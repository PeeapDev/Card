var OJ=Object.defineProperty;var lI=e=>{throw TypeError(e)};var RJ=(e,t,s)=>t in e?OJ(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s;var wi=(e,t,s)=>RJ(e,typeof t!="symbol"?t+"":t,s),m4=(e,t,s)=>t.has(e)||lI("Cannot "+s);var ye=(e,t,s)=>(m4(e,t,"read from private field"),s?s.call(e):t.get(e)),Bt=(e,t,s)=>t.has(e)?lI("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,s),ut=(e,t,s,a)=>(m4(e,t,"write to private field"),a?a.call(e,s):t.set(e,s),s),pr=(e,t,s)=>(m4(e,t,"access private method"),s);var Wb=(e,t,s,a)=>({set _(n){ut(e,t,n,s)},get _(){return ye(e,t,a)}});function aE(e,t){for(var s=0;s<t.length;s++){const a=t[s];if(typeof a!="string"&&!Array.isArray(a)){for(const n in a)if(n!=="default"&&!(n in e)){const i=Object.getOwnPropertyDescriptor(a,n);i&&Object.defineProperty(e,n,i.get?i:{enumerable:!0,get:()=>a[n]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))a(n);new MutationObserver(n=>{for(const i of n)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&a(o)}).observe(document,{childList:!0,subtree:!0});function s(n){const i={};return n.integrity&&(i.integrity=n.integrity),n.referrerPolicy&&(i.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?i.credentials="include":n.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function a(n){if(n.ep)return;n.ep=!0;const i=s(n);fetch(n.href,i)}})();var Gx=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Rl(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function KF(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var s=function a(){return this instanceof a?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};s.prototype=t.prototype}else s={};return Object.defineProperty(s,"__esModule",{value:!0}),Object.keys(e).forEach(function(a){var n=Object.getOwnPropertyDescriptor(e,a);Object.defineProperty(s,a,n.get?n:{enumerable:!0,get:function(){return e[a]}})}),s}var GF={exports:{}},yN={},YF={exports:{}},kr={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var My=Symbol.for("react.element"),MJ=Symbol.for("react.portal"),LJ=Symbol.for("react.fragment"),FJ=Symbol.for("react.strict_mode"),BJ=Symbol.for("react.profiler"),$J=Symbol.for("react.provider"),UJ=Symbol.for("react.context"),VJ=Symbol.for("react.forward_ref"),WJ=Symbol.for("react.suspense"),zJ=Symbol.for("react.memo"),qJ=Symbol.for("react.lazy"),cI=Symbol.iterator;function HJ(e){return e===null||typeof e!="object"?null:(e=cI&&e[cI]||e["@@iterator"],typeof e=="function"?e:null)}var XF={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},QF=Object.assign,ZF={};function lx(e,t,s){this.props=e,this.context=t,this.refs=ZF,this.updater=s||XF}lx.prototype.isReactComponent={};lx.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};lx.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function JF(){}JF.prototype=lx.prototype;function nE(e,t,s){this.props=e,this.context=t,this.refs=ZF,this.updater=s||XF}var iE=nE.prototype=new JF;iE.constructor=nE;QF(iE,lx.prototype);iE.isPureReactComponent=!0;var dI=Array.isArray,eB=Object.prototype.hasOwnProperty,oE={current:null},tB={key:!0,ref:!0,__self:!0,__source:!0};function rB(e,t,s){var a,n={},i=null,o=null;if(t!=null)for(a in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(i=""+t.key),t)eB.call(t,a)&&!tB.hasOwnProperty(a)&&(n[a]=t[a]);var l=arguments.length-2;if(l===1)n.children=s;else if(1<l){for(var c=Array(l),d=0;d<l;d++)c[d]=arguments[d+2];n.children=c}if(e&&e.defaultProps)for(a in l=e.defaultProps,l)n[a]===void 0&&(n[a]=l[a]);return{$$typeof:My,type:e,key:i,ref:o,props:n,_owner:oE.current}}function KJ(e,t){return{$$typeof:My,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function lE(e){return typeof e=="object"&&e!==null&&e.$$typeof===My}function GJ(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(s){return t[s]})}var uI=/\/+/g;function f4(e,t){return typeof e=="object"&&e!==null&&e.key!=null?GJ(""+e.key):t.toString(36)}function w1(e,t,s,a,n){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case My:case MJ:o=!0}}if(o)return o=e,n=n(o),e=a===""?"."+f4(o,0):a,dI(n)?(s="",e!=null&&(s=e.replace(uI,"$&/")+"/"),w1(n,t,s,"",function(d){return d})):n!=null&&(lE(n)&&(n=KJ(n,s+(!n.key||o&&o.key===n.key?"":(""+n.key).replace(uI,"$&/")+"/")+e)),t.push(n)),1;if(o=0,a=a===""?".":a+":",dI(e))for(var l=0;l<e.length;l++){i=e[l];var c=a+f4(i,l);o+=w1(i,t,s,c,n)}else if(c=HJ(e),typeof c=="function")for(e=c.call(e),l=0;!(i=e.next()).done;)i=i.value,c=a+f4(i,l++),o+=w1(i,t,s,c,n);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function zb(e,t,s){if(e==null)return e;var a=[],n=0;return w1(e,a,"","",function(i){return t.call(s,i,n++)}),a}function YJ(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(s){(e._status===0||e._status===-1)&&(e._status=1,e._result=s)},function(s){(e._status===0||e._status===-1)&&(e._status=2,e._result=s)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var ui={current:null},j1={transition:null},XJ={ReactCurrentDispatcher:ui,ReactCurrentBatchConfig:j1,ReactCurrentOwner:oE};function sB(){throw Error("act(...) is not supported in production builds of React.")}kr.Children={map:zb,forEach:function(e,t,s){zb(e,function(){t.apply(this,arguments)},s)},count:function(e){var t=0;return zb(e,function(){t++}),t},toArray:function(e){return zb(e,function(t){return t})||[]},only:function(e){if(!lE(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};kr.Component=lx;kr.Fragment=LJ;kr.Profiler=BJ;kr.PureComponent=nE;kr.StrictMode=FJ;kr.Suspense=WJ;kr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=XJ;kr.act=sB;kr.cloneElement=function(e,t,s){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var a=QF({},e.props),n=e.key,i=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,o=oE.current),t.key!==void 0&&(n=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)eB.call(t,c)&&!tB.hasOwnProperty(c)&&(a[c]=t[c]===void 0&&l!==void 0?l[c]:t[c])}var c=arguments.length-2;if(c===1)a.children=s;else if(1<c){l=Array(c);for(var d=0;d<c;d++)l[d]=arguments[d+2];a.children=l}return{$$typeof:My,type:e.type,key:n,ref:i,props:a,_owner:o}};kr.createContext=function(e){return e={$$typeof:UJ,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:$J,_context:e},e.Consumer=e};kr.createElement=rB;kr.createFactory=function(e){var t=rB.bind(null,e);return t.type=e,t};kr.createRef=function(){return{current:null}};kr.forwardRef=function(e){return{$$typeof:VJ,render:e}};kr.isValidElement=lE;kr.lazy=function(e){return{$$typeof:qJ,_payload:{_status:-1,_result:e},_init:YJ}};kr.memo=function(e,t){return{$$typeof:zJ,type:e,compare:t===void 0?null:t}};kr.startTransition=function(e){var t=j1.transition;j1.transition={};try{e()}finally{j1.transition=t}};kr.unstable_act=sB;kr.useCallback=function(e,t){return ui.current.useCallback(e,t)};kr.useContext=function(e){return ui.current.useContext(e)};kr.useDebugValue=function(){};kr.useDeferredValue=function(e){return ui.current.useDeferredValue(e)};kr.useEffect=function(e,t){return ui.current.useEffect(e,t)};kr.useId=function(){return ui.current.useId()};kr.useImperativeHandle=function(e,t,s){return ui.current.useImperativeHandle(e,t,s)};kr.useInsertionEffect=function(e,t){return ui.current.useInsertionEffect(e,t)};kr.useLayoutEffect=function(e,t){return ui.current.useLayoutEffect(e,t)};kr.useMemo=function(e,t){return ui.current.useMemo(e,t)};kr.useReducer=function(e,t,s){return ui.current.useReducer(e,t,s)};kr.useRef=function(e){return ui.current.useRef(e)};kr.useState=function(e){return ui.current.useState(e)};kr.useSyncExternalStore=function(e,t,s){return ui.current.useSyncExternalStore(e,t,s)};kr.useTransition=function(){return ui.current.useTransition()};kr.version="18.3.1";YF.exports=kr;var p=YF.exports;const ns=Rl(p),wp=aE({__proto__:null,default:ns},[p]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var QJ=p,ZJ=Symbol.for("react.element"),JJ=Symbol.for("react.fragment"),eee=Object.prototype.hasOwnProperty,tee=QJ.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,ree={key:!0,ref:!0,__self:!0,__source:!0};function aB(e,t,s){var a,n={},i=null,o=null;s!==void 0&&(i=""+s),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(o=t.ref);for(a in t)eee.call(t,a)&&!ree.hasOwnProperty(a)&&(n[a]=t[a]);if(e&&e.defaultProps)for(a in t=e.defaultProps,t)n[a]===void 0&&(n[a]=t[a]);return{$$typeof:ZJ,type:e,key:i,ref:o,props:n,_owner:tee.current}}yN.Fragment=JJ;yN.jsx=aB;yN.jsxs=aB;GF.exports=yN;var r=GF.exports,pC={},nB={exports:{}},fo={},iB={exports:{}},oB={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(K,V){var z=K.length;K.push(V);e:for(;0<z;){var G=z-1>>>1,te=K[G];if(0<n(te,V))K[G]=V,K[z]=te,z=G;else break e}}function s(K){return K.length===0?null:K[0]}function a(K){if(K.length===0)return null;var V=K[0],z=K.pop();if(z!==V){K[0]=z;e:for(var G=0,te=K.length,he=te>>>1;G<he;){var ne=2*(G+1)-1,ce=K[ne],xe=ne+1,_e=K[xe];if(0>n(ce,z))xe<te&&0>n(_e,ce)?(K[G]=_e,K[xe]=z,G=xe):(K[G]=ce,K[ne]=z,G=ne);else if(xe<te&&0>n(_e,z))K[G]=_e,K[xe]=z,G=xe;else break e}}return V}function n(K,V){var z=K.sortIndex-V.sortIndex;return z!==0?z:K.id-V.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();e.unstable_now=function(){return o.now()-l}}var c=[],d=[],h=1,f=null,x=3,y=!1,v=!1,w=!1,N=typeof setTimeout=="function"?setTimeout:null,k=typeof clearTimeout=="function"?clearTimeout:null,C=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function E(K){for(var V=s(d);V!==null;){if(V.callback===null)a(d);else if(V.startTime<=K)a(d),V.sortIndex=V.expirationTime,t(c,V);else break;V=s(d)}}function _(K){if(w=!1,E(K),!v)if(s(c)!==null)v=!0,q(T);else{var V=s(d);V!==null&&H(_,V.startTime-K)}}function T(K,V){v=!1,w&&(w=!1,k(M),M=-1),y=!0;var z=x;try{for(E(V),f=s(c);f!==null&&(!(f.expirationTime>V)||K&&!W());){var G=f.callback;if(typeof G=="function"){f.callback=null,x=f.priorityLevel;var te=G(f.expirationTime<=V);V=e.unstable_now(),typeof te=="function"?f.callback=te:f===s(c)&&a(c),E(V)}else a(c);f=s(c)}if(f!==null)var he=!0;else{var ne=s(d);ne!==null&&H(_,ne.startTime-V),he=!1}return he}finally{f=null,x=z,y=!1}}var A=!1,P=null,M=-1,R=5,$=-1;function W(){return!(e.unstable_now()-$<R)}function I(){if(P!==null){var K=e.unstable_now();$=K;var V=!0;try{V=P(!0,K)}finally{V?B():(A=!1,P=null)}}else A=!1}var B;if(typeof C=="function")B=function(){C(I)};else if(typeof MessageChannel<"u"){var O=new MessageChannel,F=O.port2;O.port1.onmessage=I,B=function(){F.postMessage(null)}}else B=function(){N(I,0)};function q(K){P=K,A||(A=!0,B())}function H(K,V){M=N(function(){K(e.unstable_now())},V)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(K){K.callback=null},e.unstable_continueExecution=function(){v||y||(v=!0,q(T))},e.unstable_forceFrameRate=function(K){0>K||125<K?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<K?Math.floor(1e3/K):5},e.unstable_getCurrentPriorityLevel=function(){return x},e.unstable_getFirstCallbackNode=function(){return s(c)},e.unstable_next=function(K){switch(x){case 1:case 2:case 3:var V=3;break;default:V=x}var z=x;x=V;try{return K()}finally{x=z}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(K,V){switch(K){case 1:case 2:case 3:case 4:case 5:break;default:K=3}var z=x;x=K;try{return V()}finally{x=z}},e.unstable_scheduleCallback=function(K,V,z){var G=e.unstable_now();switch(typeof z=="object"&&z!==null?(z=z.delay,z=typeof z=="number"&&0<z?G+z:G):z=G,K){case 1:var te=-1;break;case 2:te=250;break;case 5:te=1073741823;break;case 4:te=1e4;break;default:te=5e3}return te=z+te,K={id:h++,callback:V,priorityLevel:K,startTime:z,expirationTime:te,sortIndex:-1},z>G?(K.sortIndex=z,t(d,K),s(c)===null&&K===s(d)&&(w?(k(M),M=-1):w=!0,H(_,z-G))):(K.sortIndex=te,t(c,K),v||y||(v=!0,q(T))),K},e.unstable_shouldYield=W,e.unstable_wrapCallback=function(K){var V=x;return function(){var z=x;x=V;try{return K.apply(this,arguments)}finally{x=z}}}})(oB);iB.exports=oB;var see=iB.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aee=p,oo=see;function rt(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,s=1;s<arguments.length;s++)t+="&args[]="+encodeURIComponent(arguments[s]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var lB=new Set,jp={};function Ah(e,t){Nf(e,t),Nf(e+"Capture",t)}function Nf(e,t){for(jp[e]=t,e=0;e<t.length;e++)lB.add(t[e])}var Qc=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),yC=Object.prototype.hasOwnProperty,nee=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,hI={},mI={};function iee(e){return yC.call(mI,e)?!0:yC.call(hI,e)?!1:nee.test(e)?mI[e]=!0:(hI[e]=!0,!1)}function oee(e,t,s,a){if(s!==null&&s.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return a?!1:s!==null?!s.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function lee(e,t,s,a){if(t===null||typeof t>"u"||oee(e,t,s,a))return!0;if(a)return!1;if(s!==null)switch(s.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function hi(e,t,s,a,n,i,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=a,this.attributeNamespace=n,this.mustUseProperty=s,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=o}var In={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){In[e]=new hi(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];In[t]=new hi(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){In[e]=new hi(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){In[e]=new hi(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){In[e]=new hi(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){In[e]=new hi(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){In[e]=new hi(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){In[e]=new hi(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){In[e]=new hi(e,5,!1,e.toLowerCase(),null,!1,!1)});var cE=/[\-:]([a-z])/g;function dE(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(cE,dE);In[t]=new hi(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(cE,dE);In[t]=new hi(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(cE,dE);In[t]=new hi(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){In[e]=new hi(e,1,!1,e.toLowerCase(),null,!1,!1)});In.xlinkHref=new hi("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){In[e]=new hi(e,1,!1,e.toLowerCase(),null,!0,!0)});function uE(e,t,s,a){var n=In.hasOwnProperty(t)?In[t]:null;(n!==null?n.type!==0:a||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(lee(t,s,n,a)&&(s=null),a||n===null?iee(t)&&(s===null?e.removeAttribute(t):e.setAttribute(t,""+s)):n.mustUseProperty?e[n.propertyName]=s===null?n.type===3?!1:"":s:(t=n.attributeName,a=n.attributeNamespace,s===null?e.removeAttribute(t):(n=n.type,s=n===3||n===4&&s===!0?"":""+s,a?e.setAttributeNS(a,t,s):e.setAttribute(t,s))))}var gd=aee.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,qb=Symbol.for("react.element"),Cm=Symbol.for("react.portal"),_m=Symbol.for("react.fragment"),hE=Symbol.for("react.strict_mode"),bC=Symbol.for("react.profiler"),cB=Symbol.for("react.provider"),dB=Symbol.for("react.context"),mE=Symbol.for("react.forward_ref"),vC=Symbol.for("react.suspense"),wC=Symbol.for("react.suspense_list"),fE=Symbol.for("react.memo"),Wd=Symbol.for("react.lazy"),uB=Symbol.for("react.offscreen"),fI=Symbol.iterator;function Yx(e){return e===null||typeof e!="object"?null:(e=fI&&e[fI]||e["@@iterator"],typeof e=="function"?e:null)}var Zs=Object.assign,x4;function Tg(e){if(x4===void 0)try{throw Error()}catch(s){var t=s.stack.trim().match(/\n( *(at )?)/);x4=t&&t[1]||""}return`
`+x4+e}var g4=!1;function p4(e,t){if(!e||g4)return"";g4=!0;var s=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(d){var a=d}Reflect.construct(e,[],t)}else{try{t.call()}catch(d){a=d}e.call(t.prototype)}else{try{throw Error()}catch(d){a=d}e()}}catch(d){if(d&&a&&typeof d.stack=="string"){for(var n=d.stack.split(`
`),i=a.stack.split(`
`),o=n.length-1,l=i.length-1;1<=o&&0<=l&&n[o]!==i[l];)l--;for(;1<=o&&0<=l;o--,l--)if(n[o]!==i[l]){if(o!==1||l!==1)do if(o--,l--,0>l||n[o]!==i[l]){var c=`
`+n[o].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=o&&0<=l);break}}}finally{g4=!1,Error.prepareStackTrace=s}return(e=e?e.displayName||e.name:"")?Tg(e):""}function cee(e){switch(e.tag){case 5:return Tg(e.type);case 16:return Tg("Lazy");case 13:return Tg("Suspense");case 19:return Tg("SuspenseList");case 0:case 2:case 15:return e=p4(e.type,!1),e;case 11:return e=p4(e.type.render,!1),e;case 1:return e=p4(e.type,!0),e;default:return""}}function jC(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case _m:return"Fragment";case Cm:return"Portal";case bC:return"Profiler";case hE:return"StrictMode";case vC:return"Suspense";case wC:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case dB:return(e.displayName||"Context")+".Consumer";case cB:return(e._context.displayName||"Context")+".Provider";case mE:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case fE:return t=e.displayName||null,t!==null?t:jC(e.type)||"Memo";case Wd:t=e._payload,e=e._init;try{return jC(e(t))}catch{}}return null}function dee(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return jC(t);case 8:return t===hE?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Au(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function hB(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function uee(e){var t=hB(e)?"checked":"value",s=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),a=""+e[t];if(!e.hasOwnProperty(t)&&typeof s<"u"&&typeof s.get=="function"&&typeof s.set=="function"){var n=s.get,i=s.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return n.call(this)},set:function(o){a=""+o,i.call(this,o)}}),Object.defineProperty(e,t,{enumerable:s.enumerable}),{getValue:function(){return a},setValue:function(o){a=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Hb(e){e._valueTracker||(e._valueTracker=uee(e))}function mB(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var s=t.getValue(),a="";return e&&(a=hB(e)?e.checked?"true":"false":e.value),e=a,e!==s?(t.setValue(e),!0):!1}function J1(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function NC(e,t){var s=t.checked;return Zs({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:s??e._wrapperState.initialChecked})}function xI(e,t){var s=t.defaultValue==null?"":t.defaultValue,a=t.checked!=null?t.checked:t.defaultChecked;s=Au(t.value!=null?t.value:s),e._wrapperState={initialChecked:a,initialValue:s,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function fB(e,t){t=t.checked,t!=null&&uE(e,"checked",t,!1)}function kC(e,t){fB(e,t);var s=Au(t.value),a=t.type;if(s!=null)a==="number"?(s===0&&e.value===""||e.value!=s)&&(e.value=""+s):e.value!==""+s&&(e.value=""+s);else if(a==="submit"||a==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?SC(e,t.type,s):t.hasOwnProperty("defaultValue")&&SC(e,t.type,Au(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function gI(e,t,s){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var a=t.type;if(!(a!=="submit"&&a!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,s||t===e.value||(e.value=t),e.defaultValue=t}s=e.name,s!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,s!==""&&(e.name=s)}function SC(e,t,s){(t!=="number"||J1(e.ownerDocument)!==e)&&(s==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+s&&(e.defaultValue=""+s))}var Ig=Array.isArray;function Qm(e,t,s,a){if(e=e.options,t){t={};for(var n=0;n<s.length;n++)t["$"+s[n]]=!0;for(s=0;s<e.length;s++)n=t.hasOwnProperty("$"+e[s].value),e[s].selected!==n&&(e[s].selected=n),n&&a&&(e[s].defaultSelected=!0)}else{for(s=""+Au(s),t=null,n=0;n<e.length;n++){if(e[n].value===s){e[n].selected=!0,a&&(e[n].defaultSelected=!0);return}t!==null||e[n].disabled||(t=e[n])}t!==null&&(t.selected=!0)}}function CC(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(rt(91));return Zs({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function pI(e,t){var s=t.value;if(s==null){if(s=t.children,t=t.defaultValue,s!=null){if(t!=null)throw Error(rt(92));if(Ig(s)){if(1<s.length)throw Error(rt(93));s=s[0]}t=s}t==null&&(t=""),s=t}e._wrapperState={initialValue:Au(s)}}function xB(e,t){var s=Au(t.value),a=Au(t.defaultValue);s!=null&&(s=""+s,s!==e.value&&(e.value=s),t.defaultValue==null&&e.defaultValue!==s&&(e.defaultValue=s)),a!=null&&(e.defaultValue=""+a)}function yI(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function gB(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function _C(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?gB(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Kb,pB=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,s,a,n){MSApp.execUnsafeLocalFunction(function(){return e(t,s,a,n)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Kb=Kb||document.createElement("div"),Kb.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Kb.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Np(e,t){if(t){var s=e.firstChild;if(s&&s===e.lastChild&&s.nodeType===3){s.nodeValue=t;return}}e.textContent=t}var Hg={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},hee=["Webkit","ms","Moz","O"];Object.keys(Hg).forEach(function(e){hee.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Hg[t]=Hg[e]})});function yB(e,t,s){return t==null||typeof t=="boolean"||t===""?"":s||typeof t!="number"||t===0||Hg.hasOwnProperty(e)&&Hg[e]?(""+t).trim():t+"px"}function bB(e,t){e=e.style;for(var s in t)if(t.hasOwnProperty(s)){var a=s.indexOf("--")===0,n=yB(s,t[s],a);s==="float"&&(s="cssFloat"),a?e.setProperty(s,n):e[s]=n}}var mee=Zs({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function EC(e,t){if(t){if(mee[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(rt(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(rt(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(rt(61))}if(t.style!=null&&typeof t.style!="object")throw Error(rt(62))}}function AC(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var PC=null;function xE(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var TC=null,Zm=null,Jm=null;function bI(e){if(e=By(e)){if(typeof TC!="function")throw Error(rt(280));var t=e.stateNode;t&&(t=NN(t),TC(e.stateNode,e.type,t))}}function vB(e){Zm?Jm?Jm.push(e):Jm=[e]:Zm=e}function wB(){if(Zm){var e=Zm,t=Jm;if(Jm=Zm=null,bI(e),t)for(e=0;e<t.length;e++)bI(t[e])}}function jB(e,t){return e(t)}function NB(){}var y4=!1;function kB(e,t,s){if(y4)return e(t,s);y4=!0;try{return jB(e,t,s)}finally{y4=!1,(Zm!==null||Jm!==null)&&(NB(),wB())}}function kp(e,t){var s=e.stateNode;if(s===null)return null;var a=NN(s);if(a===null)return null;s=a[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(a=!a.disabled)||(e=e.type,a=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!a;break e;default:e=!1}if(e)return null;if(s&&typeof s!="function")throw Error(rt(231,t,typeof s));return s}var IC=!1;if(Qc)try{var Xx={};Object.defineProperty(Xx,"passive",{get:function(){IC=!0}}),window.addEventListener("test",Xx,Xx),window.removeEventListener("test",Xx,Xx)}catch{IC=!1}function fee(e,t,s,a,n,i,o,l,c){var d=Array.prototype.slice.call(arguments,3);try{t.apply(s,d)}catch(h){this.onError(h)}}var Kg=!1,ew=null,tw=!1,DC=null,xee={onError:function(e){Kg=!0,ew=e}};function gee(e,t,s,a,n,i,o,l,c){Kg=!1,ew=null,fee.apply(xee,arguments)}function pee(e,t,s,a,n,i,o,l,c){if(gee.apply(this,arguments),Kg){if(Kg){var d=ew;Kg=!1,ew=null}else throw Error(rt(198));tw||(tw=!0,DC=d)}}function Ph(e){var t=e,s=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(s=t.return),e=t.return;while(e)}return t.tag===3?s:null}function SB(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function vI(e){if(Ph(e)!==e)throw Error(rt(188))}function yee(e){var t=e.alternate;if(!t){if(t=Ph(e),t===null)throw Error(rt(188));return t!==e?null:e}for(var s=e,a=t;;){var n=s.return;if(n===null)break;var i=n.alternate;if(i===null){if(a=n.return,a!==null){s=a;continue}break}if(n.child===i.child){for(i=n.child;i;){if(i===s)return vI(n),e;if(i===a)return vI(n),t;i=i.sibling}throw Error(rt(188))}if(s.return!==a.return)s=n,a=i;else{for(var o=!1,l=n.child;l;){if(l===s){o=!0,s=n,a=i;break}if(l===a){o=!0,a=n,s=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===s){o=!0,s=i,a=n;break}if(l===a){o=!0,a=i,s=n;break}l=l.sibling}if(!o)throw Error(rt(189))}}if(s.alternate!==a)throw Error(rt(190))}if(s.tag!==3)throw Error(rt(188));return s.stateNode.current===s?e:t}function CB(e){return e=yee(e),e!==null?_B(e):null}function _B(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=_B(e);if(t!==null)return t;e=e.sibling}return null}var EB=oo.unstable_scheduleCallback,wI=oo.unstable_cancelCallback,bee=oo.unstable_shouldYield,vee=oo.unstable_requestPaint,ga=oo.unstable_now,wee=oo.unstable_getCurrentPriorityLevel,gE=oo.unstable_ImmediatePriority,AB=oo.unstable_UserBlockingPriority,rw=oo.unstable_NormalPriority,jee=oo.unstable_LowPriority,PB=oo.unstable_IdlePriority,bN=null,nc=null;function Nee(e){if(nc&&typeof nc.onCommitFiberRoot=="function")try{nc.onCommitFiberRoot(bN,e,void 0,(e.current.flags&128)===128)}catch{}}var Sl=Math.clz32?Math.clz32:Cee,kee=Math.log,See=Math.LN2;function Cee(e){return e>>>=0,e===0?32:31-(kee(e)/See|0)|0}var Gb=64,Yb=4194304;function Dg(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function sw(e,t){var s=e.pendingLanes;if(s===0)return 0;var a=0,n=e.suspendedLanes,i=e.pingedLanes,o=s&268435455;if(o!==0){var l=o&~n;l!==0?a=Dg(l):(i&=o,i!==0&&(a=Dg(i)))}else o=s&~n,o!==0?a=Dg(o):i!==0&&(a=Dg(i));if(a===0)return 0;if(t!==0&&t!==a&&!(t&n)&&(n=a&-a,i=t&-t,n>=i||n===16&&(i&4194240)!==0))return t;if(a&4&&(a|=s&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=a;0<t;)s=31-Sl(t),n=1<<s,a|=e[s],t&=~n;return a}function _ee(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Eee(e,t){for(var s=e.suspendedLanes,a=e.pingedLanes,n=e.expirationTimes,i=e.pendingLanes;0<i;){var o=31-Sl(i),l=1<<o,c=n[o];c===-1?(!(l&s)||l&a)&&(n[o]=_ee(l,t)):c<=t&&(e.expiredLanes|=l),i&=~l}}function OC(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function TB(){var e=Gb;return Gb<<=1,!(Gb&4194240)&&(Gb=64),e}function b4(e){for(var t=[],s=0;31>s;s++)t.push(e);return t}function Ly(e,t,s){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Sl(t),e[t]=s}function Aee(e,t){var s=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var a=e.eventTimes;for(e=e.expirationTimes;0<s;){var n=31-Sl(s),i=1<<n;t[n]=0,a[n]=-1,e[n]=-1,s&=~i}}function pE(e,t){var s=e.entangledLanes|=t;for(e=e.entanglements;s;){var a=31-Sl(s),n=1<<a;n&t|e[a]&t&&(e[a]|=t),s&=~n}}var ls=0;function IB(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var DB,yE,OB,RB,MB,RC=!1,Xb=[],fu=null,xu=null,gu=null,Sp=new Map,Cp=new Map,Yd=[],Pee="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function jI(e,t){switch(e){case"focusin":case"focusout":fu=null;break;case"dragenter":case"dragleave":xu=null;break;case"mouseover":case"mouseout":gu=null;break;case"pointerover":case"pointerout":Sp.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Cp.delete(t.pointerId)}}function Qx(e,t,s,a,n,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:s,eventSystemFlags:a,nativeEvent:i,targetContainers:[n]},t!==null&&(t=By(t),t!==null&&yE(t)),e):(e.eventSystemFlags|=a,t=e.targetContainers,n!==null&&t.indexOf(n)===-1&&t.push(n),e)}function Tee(e,t,s,a,n){switch(t){case"focusin":return fu=Qx(fu,e,t,s,a,n),!0;case"dragenter":return xu=Qx(xu,e,t,s,a,n),!0;case"mouseover":return gu=Qx(gu,e,t,s,a,n),!0;case"pointerover":var i=n.pointerId;return Sp.set(i,Qx(Sp.get(i)||null,e,t,s,a,n)),!0;case"gotpointercapture":return i=n.pointerId,Cp.set(i,Qx(Cp.get(i)||null,e,t,s,a,n)),!0}return!1}function LB(e){var t=P0(e.target);if(t!==null){var s=Ph(t);if(s!==null){if(t=s.tag,t===13){if(t=SB(s),t!==null){e.blockedOn=t,MB(e.priority,function(){OB(s)});return}}else if(t===3&&s.stateNode.current.memoizedState.isDehydrated){e.blockedOn=s.tag===3?s.stateNode.containerInfo:null;return}}}e.blockedOn=null}function N1(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var s=MC(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(s===null){s=e.nativeEvent;var a=new s.constructor(s.type,s);PC=a,s.target.dispatchEvent(a),PC=null}else return t=By(s),t!==null&&yE(t),e.blockedOn=s,!1;t.shift()}return!0}function NI(e,t,s){N1(e)&&s.delete(t)}function Iee(){RC=!1,fu!==null&&N1(fu)&&(fu=null),xu!==null&&N1(xu)&&(xu=null),gu!==null&&N1(gu)&&(gu=null),Sp.forEach(NI),Cp.forEach(NI)}function Zx(e,t){e.blockedOn===t&&(e.blockedOn=null,RC||(RC=!0,oo.unstable_scheduleCallback(oo.unstable_NormalPriority,Iee)))}function _p(e){function t(n){return Zx(n,e)}if(0<Xb.length){Zx(Xb[0],e);for(var s=1;s<Xb.length;s++){var a=Xb[s];a.blockedOn===e&&(a.blockedOn=null)}}for(fu!==null&&Zx(fu,e),xu!==null&&Zx(xu,e),gu!==null&&Zx(gu,e),Sp.forEach(t),Cp.forEach(t),s=0;s<Yd.length;s++)a=Yd[s],a.blockedOn===e&&(a.blockedOn=null);for(;0<Yd.length&&(s=Yd[0],s.blockedOn===null);)LB(s),s.blockedOn===null&&Yd.shift()}var ef=gd.ReactCurrentBatchConfig,aw=!0;function Dee(e,t,s,a){var n=ls,i=ef.transition;ef.transition=null;try{ls=1,bE(e,t,s,a)}finally{ls=n,ef.transition=i}}function Oee(e,t,s,a){var n=ls,i=ef.transition;ef.transition=null;try{ls=4,bE(e,t,s,a)}finally{ls=n,ef.transition=i}}function bE(e,t,s,a){if(aw){var n=MC(e,t,s,a);if(n===null)A4(e,t,a,nw,s),jI(e,a);else if(Tee(n,e,t,s,a))a.stopPropagation();else if(jI(e,a),t&4&&-1<Pee.indexOf(e)){for(;n!==null;){var i=By(n);if(i!==null&&DB(i),i=MC(e,t,s,a),i===null&&A4(e,t,a,nw,s),i===n)break;n=i}n!==null&&a.stopPropagation()}else A4(e,t,a,null,s)}}var nw=null;function MC(e,t,s,a){if(nw=null,e=xE(a),e=P0(e),e!==null)if(t=Ph(e),t===null)e=null;else if(s=t.tag,s===13){if(e=SB(t),e!==null)return e;e=null}else if(s===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return nw=e,null}function FB(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(wee()){case gE:return 1;case AB:return 4;case rw:case jee:return 16;case PB:return 536870912;default:return 16}default:return 16}}var cu=null,vE=null,k1=null;function BB(){if(k1)return k1;var e,t=vE,s=t.length,a,n="value"in cu?cu.value:cu.textContent,i=n.length;for(e=0;e<s&&t[e]===n[e];e++);var o=s-e;for(a=1;a<=o&&t[s-a]===n[i-a];a++);return k1=n.slice(e,1<a?1-a:void 0)}function S1(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Qb(){return!0}function kI(){return!1}function xo(e){function t(s,a,n,i,o){this._reactName=s,this._targetInst=n,this.type=a,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(s=e[l],this[l]=s?s(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Qb:kI,this.isPropagationStopped=kI,this}return Zs(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var s=this.nativeEvent;s&&(s.preventDefault?s.preventDefault():typeof s.returnValue!="unknown"&&(s.returnValue=!1),this.isDefaultPrevented=Qb)},stopPropagation:function(){var s=this.nativeEvent;s&&(s.stopPropagation?s.stopPropagation():typeof s.cancelBubble!="unknown"&&(s.cancelBubble=!0),this.isPropagationStopped=Qb)},persist:function(){},isPersistent:Qb}),t}var cx={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},wE=xo(cx),Fy=Zs({},cx,{view:0,detail:0}),Ree=xo(Fy),v4,w4,Jx,vN=Zs({},Fy,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:jE,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Jx&&(Jx&&e.type==="mousemove"?(v4=e.screenX-Jx.screenX,w4=e.screenY-Jx.screenY):w4=v4=0,Jx=e),v4)},movementY:function(e){return"movementY"in e?e.movementY:w4}}),SI=xo(vN),Mee=Zs({},vN,{dataTransfer:0}),Lee=xo(Mee),Fee=Zs({},Fy,{relatedTarget:0}),j4=xo(Fee),Bee=Zs({},cx,{animationName:0,elapsedTime:0,pseudoElement:0}),$ee=xo(Bee),Uee=Zs({},cx,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Vee=xo(Uee),Wee=Zs({},cx,{data:0}),CI=xo(Wee),zee={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},qee={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Hee={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Kee(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Hee[e])?!!t[e]:!1}function jE(){return Kee}var Gee=Zs({},Fy,{key:function(e){if(e.key){var t=zee[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=S1(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?qee[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:jE,charCode:function(e){return e.type==="keypress"?S1(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?S1(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Yee=xo(Gee),Xee=Zs({},vN,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),_I=xo(Xee),Qee=Zs({},Fy,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:jE}),Zee=xo(Qee),Jee=Zs({},cx,{propertyName:0,elapsedTime:0,pseudoElement:0}),ete=xo(Jee),tte=Zs({},vN,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),rte=xo(tte),ste=[9,13,27,32],NE=Qc&&"CompositionEvent"in window,Gg=null;Qc&&"documentMode"in document&&(Gg=document.documentMode);var ate=Qc&&"TextEvent"in window&&!Gg,$B=Qc&&(!NE||Gg&&8<Gg&&11>=Gg),EI=" ",AI=!1;function UB(e,t){switch(e){case"keyup":return ste.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function VB(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Em=!1;function nte(e,t){switch(e){case"compositionend":return VB(t);case"keypress":return t.which!==32?null:(AI=!0,EI);case"textInput":return e=t.data,e===EI&&AI?null:e;default:return null}}function ite(e,t){if(Em)return e==="compositionend"||!NE&&UB(e,t)?(e=BB(),k1=vE=cu=null,Em=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return $B&&t.locale!=="ko"?null:t.data;default:return null}}var ote={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function PI(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!ote[e.type]:t==="textarea"}function WB(e,t,s,a){vB(a),t=iw(t,"onChange"),0<t.length&&(s=new wE("onChange","change",null,s,a),e.push({event:s,listeners:t}))}var Yg=null,Ep=null;function lte(e){e$(e,0)}function wN(e){var t=Tm(e);if(mB(t))return e}function cte(e,t){if(e==="change")return t}var zB=!1;if(Qc){var N4;if(Qc){var k4="oninput"in document;if(!k4){var TI=document.createElement("div");TI.setAttribute("oninput","return;"),k4=typeof TI.oninput=="function"}N4=k4}else N4=!1;zB=N4&&(!document.documentMode||9<document.documentMode)}function II(){Yg&&(Yg.detachEvent("onpropertychange",qB),Ep=Yg=null)}function qB(e){if(e.propertyName==="value"&&wN(Ep)){var t=[];WB(t,Ep,e,xE(e)),kB(lte,t)}}function dte(e,t,s){e==="focusin"?(II(),Yg=t,Ep=s,Yg.attachEvent("onpropertychange",qB)):e==="focusout"&&II()}function ute(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return wN(Ep)}function hte(e,t){if(e==="click")return wN(t)}function mte(e,t){if(e==="input"||e==="change")return wN(t)}function fte(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Al=typeof Object.is=="function"?Object.is:fte;function Ap(e,t){if(Al(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var s=Object.keys(e),a=Object.keys(t);if(s.length!==a.length)return!1;for(a=0;a<s.length;a++){var n=s[a];if(!yC.call(t,n)||!Al(e[n],t[n]))return!1}return!0}function DI(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function OI(e,t){var s=DI(e);e=0;for(var a;s;){if(s.nodeType===3){if(a=e+s.textContent.length,e<=t&&a>=t)return{node:s,offset:t-e};e=a}e:{for(;s;){if(s.nextSibling){s=s.nextSibling;break e}s=s.parentNode}s=void 0}s=DI(s)}}function HB(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?HB(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function KB(){for(var e=window,t=J1();t instanceof e.HTMLIFrameElement;){try{var s=typeof t.contentWindow.location.href=="string"}catch{s=!1}if(s)e=t.contentWindow;else break;t=J1(e.document)}return t}function kE(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function xte(e){var t=KB(),s=e.focusedElem,a=e.selectionRange;if(t!==s&&s&&s.ownerDocument&&HB(s.ownerDocument.documentElement,s)){if(a!==null&&kE(s)){if(t=a.start,e=a.end,e===void 0&&(e=t),"selectionStart"in s)s.selectionStart=t,s.selectionEnd=Math.min(e,s.value.length);else if(e=(t=s.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var n=s.textContent.length,i=Math.min(a.start,n);a=a.end===void 0?i:Math.min(a.end,n),!e.extend&&i>a&&(n=a,a=i,i=n),n=OI(s,i);var o=OI(s,a);n&&o&&(e.rangeCount!==1||e.anchorNode!==n.node||e.anchorOffset!==n.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(n.node,n.offset),e.removeAllRanges(),i>a?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=s;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof s.focus=="function"&&s.focus(),s=0;s<t.length;s++)e=t[s],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var gte=Qc&&"documentMode"in document&&11>=document.documentMode,Am=null,LC=null,Xg=null,FC=!1;function RI(e,t,s){var a=s.window===s?s.document:s.nodeType===9?s:s.ownerDocument;FC||Am==null||Am!==J1(a)||(a=Am,"selectionStart"in a&&kE(a)?a={start:a.selectionStart,end:a.selectionEnd}:(a=(a.ownerDocument&&a.ownerDocument.defaultView||window).getSelection(),a={anchorNode:a.anchorNode,anchorOffset:a.anchorOffset,focusNode:a.focusNode,focusOffset:a.focusOffset}),Xg&&Ap(Xg,a)||(Xg=a,a=iw(LC,"onSelect"),0<a.length&&(t=new wE("onSelect","select",null,t,s),e.push({event:t,listeners:a}),t.target=Am)))}function Zb(e,t){var s={};return s[e.toLowerCase()]=t.toLowerCase(),s["Webkit"+e]="webkit"+t,s["Moz"+e]="moz"+t,s}var Pm={animationend:Zb("Animation","AnimationEnd"),animationiteration:Zb("Animation","AnimationIteration"),animationstart:Zb("Animation","AnimationStart"),transitionend:Zb("Transition","TransitionEnd")},S4={},GB={};Qc&&(GB=document.createElement("div").style,"AnimationEvent"in window||(delete Pm.animationend.animation,delete Pm.animationiteration.animation,delete Pm.animationstart.animation),"TransitionEvent"in window||delete Pm.transitionend.transition);function jN(e){if(S4[e])return S4[e];if(!Pm[e])return e;var t=Pm[e],s;for(s in t)if(t.hasOwnProperty(s)&&s in GB)return S4[e]=t[s];return e}var YB=jN("animationend"),XB=jN("animationiteration"),QB=jN("animationstart"),ZB=jN("transitionend"),JB=new Map,MI="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function $u(e,t){JB.set(e,t),Ah(t,[e])}for(var C4=0;C4<MI.length;C4++){var _4=MI[C4],pte=_4.toLowerCase(),yte=_4[0].toUpperCase()+_4.slice(1);$u(pte,"on"+yte)}$u(YB,"onAnimationEnd");$u(XB,"onAnimationIteration");$u(QB,"onAnimationStart");$u("dblclick","onDoubleClick");$u("focusin","onFocus");$u("focusout","onBlur");$u(ZB,"onTransitionEnd");Nf("onMouseEnter",["mouseout","mouseover"]);Nf("onMouseLeave",["mouseout","mouseover"]);Nf("onPointerEnter",["pointerout","pointerover"]);Nf("onPointerLeave",["pointerout","pointerover"]);Ah("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ah("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ah("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ah("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ah("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ah("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Og="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),bte=new Set("cancel close invalid load scroll toggle".split(" ").concat(Og));function LI(e,t,s){var a=e.type||"unknown-event";e.currentTarget=s,pee(a,t,void 0,e),e.currentTarget=null}function e$(e,t){t=(t&4)!==0;for(var s=0;s<e.length;s++){var a=e[s],n=a.event;a=a.listeners;e:{var i=void 0;if(t)for(var o=a.length-1;0<=o;o--){var l=a[o],c=l.instance,d=l.currentTarget;if(l=l.listener,c!==i&&n.isPropagationStopped())break e;LI(n,l,d),i=c}else for(o=0;o<a.length;o++){if(l=a[o],c=l.instance,d=l.currentTarget,l=l.listener,c!==i&&n.isPropagationStopped())break e;LI(n,l,d),i=c}}}if(tw)throw e=DC,tw=!1,DC=null,e}function Es(e,t){var s=t[WC];s===void 0&&(s=t[WC]=new Set);var a=e+"__bubble";s.has(a)||(t$(t,e,2,!1),s.add(a))}function E4(e,t,s){var a=0;t&&(a|=4),t$(s,e,a,t)}var Jb="_reactListening"+Math.random().toString(36).slice(2);function Pp(e){if(!e[Jb]){e[Jb]=!0,lB.forEach(function(s){s!=="selectionchange"&&(bte.has(s)||E4(s,!1,e),E4(s,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Jb]||(t[Jb]=!0,E4("selectionchange",!1,t))}}function t$(e,t,s,a){switch(FB(t)){case 1:var n=Dee;break;case 4:n=Oee;break;default:n=bE}s=n.bind(null,t,s,e),n=void 0,!IC||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(n=!0),a?n!==void 0?e.addEventListener(t,s,{capture:!0,passive:n}):e.addEventListener(t,s,!0):n!==void 0?e.addEventListener(t,s,{passive:n}):e.addEventListener(t,s,!1)}function A4(e,t,s,a,n){var i=a;if(!(t&1)&&!(t&2)&&a!==null)e:for(;;){if(a===null)return;var o=a.tag;if(o===3||o===4){var l=a.stateNode.containerInfo;if(l===n||l.nodeType===8&&l.parentNode===n)break;if(o===4)for(o=a.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===n||c.nodeType===8&&c.parentNode===n))return;o=o.return}for(;l!==null;){if(o=P0(l),o===null)return;if(c=o.tag,c===5||c===6){a=i=o;continue e}l=l.parentNode}}a=a.return}kB(function(){var d=i,h=xE(s),f=[];e:{var x=JB.get(e);if(x!==void 0){var y=wE,v=e;switch(e){case"keypress":if(S1(s)===0)break e;case"keydown":case"keyup":y=Yee;break;case"focusin":v="focus",y=j4;break;case"focusout":v="blur",y=j4;break;case"beforeblur":case"afterblur":y=j4;break;case"click":if(s.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":y=SI;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":y=Lee;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":y=Zee;break;case YB:case XB:case QB:y=$ee;break;case ZB:y=ete;break;case"scroll":y=Ree;break;case"wheel":y=rte;break;case"copy":case"cut":case"paste":y=Vee;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":y=_I}var w=(t&4)!==0,N=!w&&e==="scroll",k=w?x!==null?x+"Capture":null:x;w=[];for(var C=d,E;C!==null;){E=C;var _=E.stateNode;if(E.tag===5&&_!==null&&(E=_,k!==null&&(_=kp(C,k),_!=null&&w.push(Tp(C,_,E)))),N)break;C=C.return}0<w.length&&(x=new y(x,v,null,s,h),f.push({event:x,listeners:w}))}}if(!(t&7)){e:{if(x=e==="mouseover"||e==="pointerover",y=e==="mouseout"||e==="pointerout",x&&s!==PC&&(v=s.relatedTarget||s.fromElement)&&(P0(v)||v[Zc]))break e;if((y||x)&&(x=h.window===h?h:(x=h.ownerDocument)?x.defaultView||x.parentWindow:window,y?(v=s.relatedTarget||s.toElement,y=d,v=v?P0(v):null,v!==null&&(N=Ph(v),v!==N||v.tag!==5&&v.tag!==6)&&(v=null)):(y=null,v=d),y!==v)){if(w=SI,_="onMouseLeave",k="onMouseEnter",C="mouse",(e==="pointerout"||e==="pointerover")&&(w=_I,_="onPointerLeave",k="onPointerEnter",C="pointer"),N=y==null?x:Tm(y),E=v==null?x:Tm(v),x=new w(_,C+"leave",y,s,h),x.target=N,x.relatedTarget=E,_=null,P0(h)===d&&(w=new w(k,C+"enter",v,s,h),w.target=E,w.relatedTarget=N,_=w),N=_,y&&v)t:{for(w=y,k=v,C=0,E=w;E;E=qh(E))C++;for(E=0,_=k;_;_=qh(_))E++;for(;0<C-E;)w=qh(w),C--;for(;0<E-C;)k=qh(k),E--;for(;C--;){if(w===k||k!==null&&w===k.alternate)break t;w=qh(w),k=qh(k)}w=null}else w=null;y!==null&&FI(f,x,y,w,!1),v!==null&&N!==null&&FI(f,N,v,w,!0)}}e:{if(x=d?Tm(d):window,y=x.nodeName&&x.nodeName.toLowerCase(),y==="select"||y==="input"&&x.type==="file")var T=cte;else if(PI(x))if(zB)T=mte;else{T=ute;var A=dte}else(y=x.nodeName)&&y.toLowerCase()==="input"&&(x.type==="checkbox"||x.type==="radio")&&(T=hte);if(T&&(T=T(e,d))){WB(f,T,s,h);break e}A&&A(e,x,d),e==="focusout"&&(A=x._wrapperState)&&A.controlled&&x.type==="number"&&SC(x,"number",x.value)}switch(A=d?Tm(d):window,e){case"focusin":(PI(A)||A.contentEditable==="true")&&(Am=A,LC=d,Xg=null);break;case"focusout":Xg=LC=Am=null;break;case"mousedown":FC=!0;break;case"contextmenu":case"mouseup":case"dragend":FC=!1,RI(f,s,h);break;case"selectionchange":if(gte)break;case"keydown":case"keyup":RI(f,s,h)}var P;if(NE)e:{switch(e){case"compositionstart":var M="onCompositionStart";break e;case"compositionend":M="onCompositionEnd";break e;case"compositionupdate":M="onCompositionUpdate";break e}M=void 0}else Em?UB(e,s)&&(M="onCompositionEnd"):e==="keydown"&&s.keyCode===229&&(M="onCompositionStart");M&&($B&&s.locale!=="ko"&&(Em||M!=="onCompositionStart"?M==="onCompositionEnd"&&Em&&(P=BB()):(cu=h,vE="value"in cu?cu.value:cu.textContent,Em=!0)),A=iw(d,M),0<A.length&&(M=new CI(M,e,null,s,h),f.push({event:M,listeners:A}),P?M.data=P:(P=VB(s),P!==null&&(M.data=P)))),(P=ate?nte(e,s):ite(e,s))&&(d=iw(d,"onBeforeInput"),0<d.length&&(h=new CI("onBeforeInput","beforeinput",null,s,h),f.push({event:h,listeners:d}),h.data=P))}e$(f,t)})}function Tp(e,t,s){return{instance:e,listener:t,currentTarget:s}}function iw(e,t){for(var s=t+"Capture",a=[];e!==null;){var n=e,i=n.stateNode;n.tag===5&&i!==null&&(n=i,i=kp(e,s),i!=null&&a.unshift(Tp(e,i,n)),i=kp(e,t),i!=null&&a.push(Tp(e,i,n))),e=e.return}return a}function qh(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function FI(e,t,s,a,n){for(var i=t._reactName,o=[];s!==null&&s!==a;){var l=s,c=l.alternate,d=l.stateNode;if(c!==null&&c===a)break;l.tag===5&&d!==null&&(l=d,n?(c=kp(s,i),c!=null&&o.unshift(Tp(s,c,l))):n||(c=kp(s,i),c!=null&&o.push(Tp(s,c,l)))),s=s.return}o.length!==0&&e.push({event:t,listeners:o})}var vte=/\r\n?/g,wte=/\u0000|\uFFFD/g;function BI(e){return(typeof e=="string"?e:""+e).replace(vte,`
`).replace(wte,"")}function ev(e,t,s){if(t=BI(t),BI(e)!==t&&s)throw Error(rt(425))}function ow(){}var BC=null,$C=null;function UC(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var VC=typeof setTimeout=="function"?setTimeout:void 0,jte=typeof clearTimeout=="function"?clearTimeout:void 0,$I=typeof Promise=="function"?Promise:void 0,Nte=typeof queueMicrotask=="function"?queueMicrotask:typeof $I<"u"?function(e){return $I.resolve(null).then(e).catch(kte)}:VC;function kte(e){setTimeout(function(){throw e})}function P4(e,t){var s=t,a=0;do{var n=s.nextSibling;if(e.removeChild(s),n&&n.nodeType===8)if(s=n.data,s==="/$"){if(a===0){e.removeChild(n),_p(t);return}a--}else s!=="$"&&s!=="$?"&&s!=="$!"||a++;s=n}while(s);_p(t)}function pu(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function UI(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var s=e.data;if(s==="$"||s==="$!"||s==="$?"){if(t===0)return e;t--}else s==="/$"&&t++}e=e.previousSibling}return null}var dx=Math.random().toString(36).slice(2),Ql="__reactFiber$"+dx,Ip="__reactProps$"+dx,Zc="__reactContainer$"+dx,WC="__reactEvents$"+dx,Ste="__reactListeners$"+dx,Cte="__reactHandles$"+dx;function P0(e){var t=e[Ql];if(t)return t;for(var s=e.parentNode;s;){if(t=s[Zc]||s[Ql]){if(s=t.alternate,t.child!==null||s!==null&&s.child!==null)for(e=UI(e);e!==null;){if(s=e[Ql])return s;e=UI(e)}return t}e=s,s=e.parentNode}return null}function By(e){return e=e[Ql]||e[Zc],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Tm(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(rt(33))}function NN(e){return e[Ip]||null}var zC=[],Im=-1;function Uu(e){return{current:e}}function Is(e){0>Im||(e.current=zC[Im],zC[Im]=null,Im--)}function ks(e,t){Im++,zC[Im]=e.current,e.current=t}var Pu={},Hn=Uu(Pu),Ti=Uu(!1),ch=Pu;function kf(e,t){var s=e.type.contextTypes;if(!s)return Pu;var a=e.stateNode;if(a&&a.__reactInternalMemoizedUnmaskedChildContext===t)return a.__reactInternalMemoizedMaskedChildContext;var n={},i;for(i in s)n[i]=t[i];return a&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=n),n}function Ii(e){return e=e.childContextTypes,e!=null}function lw(){Is(Ti),Is(Hn)}function VI(e,t,s){if(Hn.current!==Pu)throw Error(rt(168));ks(Hn,t),ks(Ti,s)}function r$(e,t,s){var a=e.stateNode;if(t=t.childContextTypes,typeof a.getChildContext!="function")return s;a=a.getChildContext();for(var n in a)if(!(n in t))throw Error(rt(108,dee(e)||"Unknown",n));return Zs({},s,a)}function cw(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Pu,ch=Hn.current,ks(Hn,e),ks(Ti,Ti.current),!0}function WI(e,t,s){var a=e.stateNode;if(!a)throw Error(rt(169));s?(e=r$(e,t,ch),a.__reactInternalMemoizedMergedChildContext=e,Is(Ti),Is(Hn),ks(Hn,e)):Is(Ti),ks(Ti,s)}var Ic=null,kN=!1,T4=!1;function s$(e){Ic===null?Ic=[e]:Ic.push(e)}function _te(e){kN=!0,s$(e)}function Vu(){if(!T4&&Ic!==null){T4=!0;var e=0,t=ls;try{var s=Ic;for(ls=1;e<s.length;e++){var a=s[e];do a=a(!0);while(a!==null)}Ic=null,kN=!1}catch(n){throw Ic!==null&&(Ic=Ic.slice(e+1)),EB(gE,Vu),n}finally{ls=t,T4=!1}}return null}var Dm=[],Om=0,dw=null,uw=0,Ro=[],Mo=0,dh=null,Uc=1,Vc="";function h0(e,t){Dm[Om++]=uw,Dm[Om++]=dw,dw=e,uw=t}function a$(e,t,s){Ro[Mo++]=Uc,Ro[Mo++]=Vc,Ro[Mo++]=dh,dh=e;var a=Uc;e=Vc;var n=32-Sl(a)-1;a&=~(1<<n),s+=1;var i=32-Sl(t)+n;if(30<i){var o=n-n%5;i=(a&(1<<o)-1).toString(32),a>>=o,n-=o,Uc=1<<32-Sl(t)+n|s<<n|a,Vc=i+e}else Uc=1<<i|s<<n|a,Vc=e}function SE(e){e.return!==null&&(h0(e,1),a$(e,1,0))}function CE(e){for(;e===dw;)dw=Dm[--Om],Dm[Om]=null,uw=Dm[--Om],Dm[Om]=null;for(;e===dh;)dh=Ro[--Mo],Ro[Mo]=null,Vc=Ro[--Mo],Ro[Mo]=null,Uc=Ro[--Mo],Ro[Mo]=null}var so=null,to=null,Bs=!1,pl=null;function n$(e,t){var s=Fo(5,null,null,0);s.elementType="DELETED",s.stateNode=t,s.return=e,t=e.deletions,t===null?(e.deletions=[s],e.flags|=16):t.push(s)}function zI(e,t){switch(e.tag){case 5:var s=e.type;return t=t.nodeType!==1||s.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,so=e,to=pu(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,so=e,to=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(s=dh!==null?{id:Uc,overflow:Vc}:null,e.memoizedState={dehydrated:t,treeContext:s,retryLane:1073741824},s=Fo(18,null,null,0),s.stateNode=t,s.return=e,e.child=s,so=e,to=null,!0):!1;default:return!1}}function qC(e){return(e.mode&1)!==0&&(e.flags&128)===0}function HC(e){if(Bs){var t=to;if(t){var s=t;if(!zI(e,t)){if(qC(e))throw Error(rt(418));t=pu(s.nextSibling);var a=so;t&&zI(e,t)?n$(a,s):(e.flags=e.flags&-4097|2,Bs=!1,so=e)}}else{if(qC(e))throw Error(rt(418));e.flags=e.flags&-4097|2,Bs=!1,so=e}}}function qI(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;so=e}function tv(e){if(e!==so)return!1;if(!Bs)return qI(e),Bs=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!UC(e.type,e.memoizedProps)),t&&(t=to)){if(qC(e))throw i$(),Error(rt(418));for(;t;)n$(e,t),t=pu(t.nextSibling)}if(qI(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(rt(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var s=e.data;if(s==="/$"){if(t===0){to=pu(e.nextSibling);break e}t--}else s!=="$"&&s!=="$!"&&s!=="$?"||t++}e=e.nextSibling}to=null}}else to=so?pu(e.stateNode.nextSibling):null;return!0}function i$(){for(var e=to;e;)e=pu(e.nextSibling)}function Sf(){to=so=null,Bs=!1}function _E(e){pl===null?pl=[e]:pl.push(e)}var Ete=gd.ReactCurrentBatchConfig;function eg(e,t,s){if(e=s.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(s._owner){if(s=s._owner,s){if(s.tag!==1)throw Error(rt(309));var a=s.stateNode}if(!a)throw Error(rt(147,e));var n=a,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(o){var l=n.refs;o===null?delete l[i]:l[i]=o},t._stringRef=i,t)}if(typeof e!="string")throw Error(rt(284));if(!s._owner)throw Error(rt(290,e))}return e}function rv(e,t){throw e=Object.prototype.toString.call(t),Error(rt(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function HI(e){var t=e._init;return t(e._payload)}function o$(e){function t(k,C){if(e){var E=k.deletions;E===null?(k.deletions=[C],k.flags|=16):E.push(C)}}function s(k,C){if(!e)return null;for(;C!==null;)t(k,C),C=C.sibling;return null}function a(k,C){for(k=new Map;C!==null;)C.key!==null?k.set(C.key,C):k.set(C.index,C),C=C.sibling;return k}function n(k,C){return k=wu(k,C),k.index=0,k.sibling=null,k}function i(k,C,E){return k.index=E,e?(E=k.alternate,E!==null?(E=E.index,E<C?(k.flags|=2,C):E):(k.flags|=2,C)):(k.flags|=1048576,C)}function o(k){return e&&k.alternate===null&&(k.flags|=2),k}function l(k,C,E,_){return C===null||C.tag!==6?(C=F4(E,k.mode,_),C.return=k,C):(C=n(C,E),C.return=k,C)}function c(k,C,E,_){var T=E.type;return T===_m?h(k,C,E.props.children,_,E.key):C!==null&&(C.elementType===T||typeof T=="object"&&T!==null&&T.$$typeof===Wd&&HI(T)===C.type)?(_=n(C,E.props),_.ref=eg(k,C,E),_.return=k,_):(_=I1(E.type,E.key,E.props,null,k.mode,_),_.ref=eg(k,C,E),_.return=k,_)}function d(k,C,E,_){return C===null||C.tag!==4||C.stateNode.containerInfo!==E.containerInfo||C.stateNode.implementation!==E.implementation?(C=B4(E,k.mode,_),C.return=k,C):(C=n(C,E.children||[]),C.return=k,C)}function h(k,C,E,_,T){return C===null||C.tag!==7?(C=th(E,k.mode,_,T),C.return=k,C):(C=n(C,E),C.return=k,C)}function f(k,C,E){if(typeof C=="string"&&C!==""||typeof C=="number")return C=F4(""+C,k.mode,E),C.return=k,C;if(typeof C=="object"&&C!==null){switch(C.$$typeof){case qb:return E=I1(C.type,C.key,C.props,null,k.mode,E),E.ref=eg(k,null,C),E.return=k,E;case Cm:return C=B4(C,k.mode,E),C.return=k,C;case Wd:var _=C._init;return f(k,_(C._payload),E)}if(Ig(C)||Yx(C))return C=th(C,k.mode,E,null),C.return=k,C;rv(k,C)}return null}function x(k,C,E,_){var T=C!==null?C.key:null;if(typeof E=="string"&&E!==""||typeof E=="number")return T!==null?null:l(k,C,""+E,_);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case qb:return E.key===T?c(k,C,E,_):null;case Cm:return E.key===T?d(k,C,E,_):null;case Wd:return T=E._init,x(k,C,T(E._payload),_)}if(Ig(E)||Yx(E))return T!==null?null:h(k,C,E,_,null);rv(k,E)}return null}function y(k,C,E,_,T){if(typeof _=="string"&&_!==""||typeof _=="number")return k=k.get(E)||null,l(C,k,""+_,T);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case qb:return k=k.get(_.key===null?E:_.key)||null,c(C,k,_,T);case Cm:return k=k.get(_.key===null?E:_.key)||null,d(C,k,_,T);case Wd:var A=_._init;return y(k,C,E,A(_._payload),T)}if(Ig(_)||Yx(_))return k=k.get(E)||null,h(C,k,_,T,null);rv(C,_)}return null}function v(k,C,E,_){for(var T=null,A=null,P=C,M=C=0,R=null;P!==null&&M<E.length;M++){P.index>M?(R=P,P=null):R=P.sibling;var $=x(k,P,E[M],_);if($===null){P===null&&(P=R);break}e&&P&&$.alternate===null&&t(k,P),C=i($,C,M),A===null?T=$:A.sibling=$,A=$,P=R}if(M===E.length)return s(k,P),Bs&&h0(k,M),T;if(P===null){for(;M<E.length;M++)P=f(k,E[M],_),P!==null&&(C=i(P,C,M),A===null?T=P:A.sibling=P,A=P);return Bs&&h0(k,M),T}for(P=a(k,P);M<E.length;M++)R=y(P,k,M,E[M],_),R!==null&&(e&&R.alternate!==null&&P.delete(R.key===null?M:R.key),C=i(R,C,M),A===null?T=R:A.sibling=R,A=R);return e&&P.forEach(function(W){return t(k,W)}),Bs&&h0(k,M),T}function w(k,C,E,_){var T=Yx(E);if(typeof T!="function")throw Error(rt(150));if(E=T.call(E),E==null)throw Error(rt(151));for(var A=T=null,P=C,M=C=0,R=null,$=E.next();P!==null&&!$.done;M++,$=E.next()){P.index>M?(R=P,P=null):R=P.sibling;var W=x(k,P,$.value,_);if(W===null){P===null&&(P=R);break}e&&P&&W.alternate===null&&t(k,P),C=i(W,C,M),A===null?T=W:A.sibling=W,A=W,P=R}if($.done)return s(k,P),Bs&&h0(k,M),T;if(P===null){for(;!$.done;M++,$=E.next())$=f(k,$.value,_),$!==null&&(C=i($,C,M),A===null?T=$:A.sibling=$,A=$);return Bs&&h0(k,M),T}for(P=a(k,P);!$.done;M++,$=E.next())$=y(P,k,M,$.value,_),$!==null&&(e&&$.alternate!==null&&P.delete($.key===null?M:$.key),C=i($,C,M),A===null?T=$:A.sibling=$,A=$);return e&&P.forEach(function(I){return t(k,I)}),Bs&&h0(k,M),T}function N(k,C,E,_){if(typeof E=="object"&&E!==null&&E.type===_m&&E.key===null&&(E=E.props.children),typeof E=="object"&&E!==null){switch(E.$$typeof){case qb:e:{for(var T=E.key,A=C;A!==null;){if(A.key===T){if(T=E.type,T===_m){if(A.tag===7){s(k,A.sibling),C=n(A,E.props.children),C.return=k,k=C;break e}}else if(A.elementType===T||typeof T=="object"&&T!==null&&T.$$typeof===Wd&&HI(T)===A.type){s(k,A.sibling),C=n(A,E.props),C.ref=eg(k,A,E),C.return=k,k=C;break e}s(k,A);break}else t(k,A);A=A.sibling}E.type===_m?(C=th(E.props.children,k.mode,_,E.key),C.return=k,k=C):(_=I1(E.type,E.key,E.props,null,k.mode,_),_.ref=eg(k,C,E),_.return=k,k=_)}return o(k);case Cm:e:{for(A=E.key;C!==null;){if(C.key===A)if(C.tag===4&&C.stateNode.containerInfo===E.containerInfo&&C.stateNode.implementation===E.implementation){s(k,C.sibling),C=n(C,E.children||[]),C.return=k,k=C;break e}else{s(k,C);break}else t(k,C);C=C.sibling}C=B4(E,k.mode,_),C.return=k,k=C}return o(k);case Wd:return A=E._init,N(k,C,A(E._payload),_)}if(Ig(E))return v(k,C,E,_);if(Yx(E))return w(k,C,E,_);rv(k,E)}return typeof E=="string"&&E!==""||typeof E=="number"?(E=""+E,C!==null&&C.tag===6?(s(k,C.sibling),C=n(C,E),C.return=k,k=C):(s(k,C),C=F4(E,k.mode,_),C.return=k,k=C),o(k)):s(k,C)}return N}var Cf=o$(!0),l$=o$(!1),hw=Uu(null),mw=null,Rm=null,EE=null;function AE(){EE=Rm=mw=null}function PE(e){var t=hw.current;Is(hw),e._currentValue=t}function KC(e,t,s){for(;e!==null;){var a=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,a!==null&&(a.childLanes|=t)):a!==null&&(a.childLanes&t)!==t&&(a.childLanes|=t),e===s)break;e=e.return}}function tf(e,t){mw=e,EE=Rm=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Ei=!0),e.firstContext=null)}function zo(e){var t=e._currentValue;if(EE!==e)if(e={context:e,memoizedValue:t,next:null},Rm===null){if(mw===null)throw Error(rt(308));Rm=e,mw.dependencies={lanes:0,firstContext:e}}else Rm=Rm.next=e;return t}var T0=null;function TE(e){T0===null?T0=[e]:T0.push(e)}function c$(e,t,s,a){var n=t.interleaved;return n===null?(s.next=s,TE(t)):(s.next=n.next,n.next=s),t.interleaved=s,Jc(e,a)}function Jc(e,t){e.lanes|=t;var s=e.alternate;for(s!==null&&(s.lanes|=t),s=e,e=e.return;e!==null;)e.childLanes|=t,s=e.alternate,s!==null&&(s.childLanes|=t),s=e,e=e.return;return s.tag===3?s.stateNode:null}var zd=!1;function IE(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function d$(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Hc(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function yu(e,t,s){var a=e.updateQueue;if(a===null)return null;if(a=a.shared,Ir&2){var n=a.pending;return n===null?t.next=t:(t.next=n.next,n.next=t),a.pending=t,Jc(e,s)}return n=a.interleaved,n===null?(t.next=t,TE(a)):(t.next=n.next,n.next=t),a.interleaved=t,Jc(e,s)}function C1(e,t,s){if(t=t.updateQueue,t!==null&&(t=t.shared,(s&4194240)!==0)){var a=t.lanes;a&=e.pendingLanes,s|=a,t.lanes=s,pE(e,s)}}function KI(e,t){var s=e.updateQueue,a=e.alternate;if(a!==null&&(a=a.updateQueue,s===a)){var n=null,i=null;if(s=s.firstBaseUpdate,s!==null){do{var o={eventTime:s.eventTime,lane:s.lane,tag:s.tag,payload:s.payload,callback:s.callback,next:null};i===null?n=i=o:i=i.next=o,s=s.next}while(s!==null);i===null?n=i=t:i=i.next=t}else n=i=t;s={baseState:a.baseState,firstBaseUpdate:n,lastBaseUpdate:i,shared:a.shared,effects:a.effects},e.updateQueue=s;return}e=s.lastBaseUpdate,e===null?s.firstBaseUpdate=t:e.next=t,s.lastBaseUpdate=t}function fw(e,t,s,a){var n=e.updateQueue;zd=!1;var i=n.firstBaseUpdate,o=n.lastBaseUpdate,l=n.shared.pending;if(l!==null){n.shared.pending=null;var c=l,d=c.next;c.next=null,o===null?i=d:o.next=d,o=c;var h=e.alternate;h!==null&&(h=h.updateQueue,l=h.lastBaseUpdate,l!==o&&(l===null?h.firstBaseUpdate=d:l.next=d,h.lastBaseUpdate=c))}if(i!==null){var f=n.baseState;o=0,h=d=c=null,l=i;do{var x=l.lane,y=l.eventTime;if((a&x)===x){h!==null&&(h=h.next={eventTime:y,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var v=e,w=l;switch(x=t,y=s,w.tag){case 1:if(v=w.payload,typeof v=="function"){f=v.call(y,f,x);break e}f=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=w.payload,x=typeof v=="function"?v.call(y,f,x):v,x==null)break e;f=Zs({},f,x);break e;case 2:zd=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,x=n.effects,x===null?n.effects=[l]:x.push(l))}else y={eventTime:y,lane:x,tag:l.tag,payload:l.payload,callback:l.callback,next:null},h===null?(d=h=y,c=f):h=h.next=y,o|=x;if(l=l.next,l===null){if(l=n.shared.pending,l===null)break;x=l,l=x.next,x.next=null,n.lastBaseUpdate=x,n.shared.pending=null}}while(!0);if(h===null&&(c=f),n.baseState=c,n.firstBaseUpdate=d,n.lastBaseUpdate=h,t=n.shared.interleaved,t!==null){n=t;do o|=n.lane,n=n.next;while(n!==t)}else i===null&&(n.shared.lanes=0);hh|=o,e.lanes=o,e.memoizedState=f}}function GI(e,t,s){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var a=e[t],n=a.callback;if(n!==null){if(a.callback=null,a=s,typeof n!="function")throw Error(rt(191,n));n.call(a)}}}var $y={},ic=Uu($y),Dp=Uu($y),Op=Uu($y);function I0(e){if(e===$y)throw Error(rt(174));return e}function DE(e,t){switch(ks(Op,t),ks(Dp,e),ks(ic,$y),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:_C(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=_C(t,e)}Is(ic),ks(ic,t)}function _f(){Is(ic),Is(Dp),Is(Op)}function u$(e){I0(Op.current);var t=I0(ic.current),s=_C(t,e.type);t!==s&&(ks(Dp,e),ks(ic,s))}function OE(e){Dp.current===e&&(Is(ic),Is(Dp))}var Hs=Uu(0);function xw(e){for(var t=e;t!==null;){if(t.tag===13){var s=t.memoizedState;if(s!==null&&(s=s.dehydrated,s===null||s.data==="$?"||s.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var I4=[];function RE(){for(var e=0;e<I4.length;e++)I4[e]._workInProgressVersionPrimary=null;I4.length=0}var _1=gd.ReactCurrentDispatcher,D4=gd.ReactCurrentBatchConfig,uh=0,Xs=null,Ba=null,an=null,gw=!1,Qg=!1,Rp=0,Ate=0;function Fn(){throw Error(rt(321))}function ME(e,t){if(t===null)return!1;for(var s=0;s<t.length&&s<e.length;s++)if(!Al(e[s],t[s]))return!1;return!0}function LE(e,t,s,a,n,i){if(uh=i,Xs=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,_1.current=e===null||e.memoizedState===null?Dte:Ote,e=s(a,n),Qg){i=0;do{if(Qg=!1,Rp=0,25<=i)throw Error(rt(301));i+=1,an=Ba=null,t.updateQueue=null,_1.current=Rte,e=s(a,n)}while(Qg)}if(_1.current=pw,t=Ba!==null&&Ba.next!==null,uh=0,an=Ba=Xs=null,gw=!1,t)throw Error(rt(300));return e}function FE(){var e=Rp!==0;return Rp=0,e}function zl(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return an===null?Xs.memoizedState=an=e:an=an.next=e,an}function qo(){if(Ba===null){var e=Xs.alternate;e=e!==null?e.memoizedState:null}else e=Ba.next;var t=an===null?Xs.memoizedState:an.next;if(t!==null)an=t,Ba=e;else{if(e===null)throw Error(rt(310));Ba=e,e={memoizedState:Ba.memoizedState,baseState:Ba.baseState,baseQueue:Ba.baseQueue,queue:Ba.queue,next:null},an===null?Xs.memoizedState=an=e:an=an.next=e}return an}function Mp(e,t){return typeof t=="function"?t(e):t}function O4(e){var t=qo(),s=t.queue;if(s===null)throw Error(rt(311));s.lastRenderedReducer=e;var a=Ba,n=a.baseQueue,i=s.pending;if(i!==null){if(n!==null){var o=n.next;n.next=i.next,i.next=o}a.baseQueue=n=i,s.pending=null}if(n!==null){i=n.next,a=a.baseState;var l=o=null,c=null,d=i;do{var h=d.lane;if((uh&h)===h)c!==null&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),a=d.hasEagerState?d.eagerState:e(a,d.action);else{var f={lane:h,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};c===null?(l=c=f,o=a):c=c.next=f,Xs.lanes|=h,hh|=h}d=d.next}while(d!==null&&d!==i);c===null?o=a:c.next=l,Al(a,t.memoizedState)||(Ei=!0),t.memoizedState=a,t.baseState=o,t.baseQueue=c,s.lastRenderedState=a}if(e=s.interleaved,e!==null){n=e;do i=n.lane,Xs.lanes|=i,hh|=i,n=n.next;while(n!==e)}else n===null&&(s.lanes=0);return[t.memoizedState,s.dispatch]}function R4(e){var t=qo(),s=t.queue;if(s===null)throw Error(rt(311));s.lastRenderedReducer=e;var a=s.dispatch,n=s.pending,i=t.memoizedState;if(n!==null){s.pending=null;var o=n=n.next;do i=e(i,o.action),o=o.next;while(o!==n);Al(i,t.memoizedState)||(Ei=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),s.lastRenderedState=i}return[i,a]}function h$(){}function m$(e,t){var s=Xs,a=qo(),n=t(),i=!Al(a.memoizedState,n);if(i&&(a.memoizedState=n,Ei=!0),a=a.queue,BE(g$.bind(null,s,a,e),[e]),a.getSnapshot!==t||i||an!==null&&an.memoizedState.tag&1){if(s.flags|=2048,Lp(9,x$.bind(null,s,a,n,t),void 0,null),ln===null)throw Error(rt(349));uh&30||f$(s,t,n)}return n}function f$(e,t,s){e.flags|=16384,e={getSnapshot:t,value:s},t=Xs.updateQueue,t===null?(t={lastEffect:null,stores:null},Xs.updateQueue=t,t.stores=[e]):(s=t.stores,s===null?t.stores=[e]:s.push(e))}function x$(e,t,s,a){t.value=s,t.getSnapshot=a,p$(t)&&y$(e)}function g$(e,t,s){return s(function(){p$(t)&&y$(e)})}function p$(e){var t=e.getSnapshot;e=e.value;try{var s=t();return!Al(e,s)}catch{return!0}}function y$(e){var t=Jc(e,1);t!==null&&Cl(t,e,1,-1)}function YI(e){var t=zl();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Mp,lastRenderedState:e},t.queue=e,e=e.dispatch=Ite.bind(null,Xs,e),[t.memoizedState,e]}function Lp(e,t,s,a){return e={tag:e,create:t,destroy:s,deps:a,next:null},t=Xs.updateQueue,t===null?(t={lastEffect:null,stores:null},Xs.updateQueue=t,t.lastEffect=e.next=e):(s=t.lastEffect,s===null?t.lastEffect=e.next=e:(a=s.next,s.next=e,e.next=a,t.lastEffect=e)),e}function b$(){return qo().memoizedState}function E1(e,t,s,a){var n=zl();Xs.flags|=e,n.memoizedState=Lp(1|t,s,void 0,a===void 0?null:a)}function SN(e,t,s,a){var n=qo();a=a===void 0?null:a;var i=void 0;if(Ba!==null){var o=Ba.memoizedState;if(i=o.destroy,a!==null&&ME(a,o.deps)){n.memoizedState=Lp(t,s,i,a);return}}Xs.flags|=e,n.memoizedState=Lp(1|t,s,i,a)}function XI(e,t){return E1(8390656,8,e,t)}function BE(e,t){return SN(2048,8,e,t)}function v$(e,t){return SN(4,2,e,t)}function w$(e,t){return SN(4,4,e,t)}function j$(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function N$(e,t,s){return s=s!=null?s.concat([e]):null,SN(4,4,j$.bind(null,t,e),s)}function $E(){}function k$(e,t){var s=qo();t=t===void 0?null:t;var a=s.memoizedState;return a!==null&&t!==null&&ME(t,a[1])?a[0]:(s.memoizedState=[e,t],e)}function S$(e,t){var s=qo();t=t===void 0?null:t;var a=s.memoizedState;return a!==null&&t!==null&&ME(t,a[1])?a[0]:(e=e(),s.memoizedState=[e,t],e)}function C$(e,t,s){return uh&21?(Al(s,t)||(s=TB(),Xs.lanes|=s,hh|=s,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Ei=!0),e.memoizedState=s)}function Pte(e,t){var s=ls;ls=s!==0&&4>s?s:4,e(!0);var a=D4.transition;D4.transition={};try{e(!1),t()}finally{ls=s,D4.transition=a}}function _$(){return qo().memoizedState}function Tte(e,t,s){var a=vu(e);if(s={lane:a,action:s,hasEagerState:!1,eagerState:null,next:null},E$(e))A$(t,s);else if(s=c$(e,t,s,a),s!==null){var n=ii();Cl(s,e,a,n),P$(s,t,a)}}function Ite(e,t,s){var a=vu(e),n={lane:a,action:s,hasEagerState:!1,eagerState:null,next:null};if(E$(e))A$(t,n);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var o=t.lastRenderedState,l=i(o,s);if(n.hasEagerState=!0,n.eagerState=l,Al(l,o)){var c=t.interleaved;c===null?(n.next=n,TE(t)):(n.next=c.next,c.next=n),t.interleaved=n;return}}catch{}finally{}s=c$(e,t,n,a),s!==null&&(n=ii(),Cl(s,e,a,n),P$(s,t,a))}}function E$(e){var t=e.alternate;return e===Xs||t!==null&&t===Xs}function A$(e,t){Qg=gw=!0;var s=e.pending;s===null?t.next=t:(t.next=s.next,s.next=t),e.pending=t}function P$(e,t,s){if(s&4194240){var a=t.lanes;a&=e.pendingLanes,s|=a,t.lanes=s,pE(e,s)}}var pw={readContext:zo,useCallback:Fn,useContext:Fn,useEffect:Fn,useImperativeHandle:Fn,useInsertionEffect:Fn,useLayoutEffect:Fn,useMemo:Fn,useReducer:Fn,useRef:Fn,useState:Fn,useDebugValue:Fn,useDeferredValue:Fn,useTransition:Fn,useMutableSource:Fn,useSyncExternalStore:Fn,useId:Fn,unstable_isNewReconciler:!1},Dte={readContext:zo,useCallback:function(e,t){return zl().memoizedState=[e,t===void 0?null:t],e},useContext:zo,useEffect:XI,useImperativeHandle:function(e,t,s){return s=s!=null?s.concat([e]):null,E1(4194308,4,j$.bind(null,t,e),s)},useLayoutEffect:function(e,t){return E1(4194308,4,e,t)},useInsertionEffect:function(e,t){return E1(4,2,e,t)},useMemo:function(e,t){var s=zl();return t=t===void 0?null:t,e=e(),s.memoizedState=[e,t],e},useReducer:function(e,t,s){var a=zl();return t=s!==void 0?s(t):t,a.memoizedState=a.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},a.queue=e,e=e.dispatch=Tte.bind(null,Xs,e),[a.memoizedState,e]},useRef:function(e){var t=zl();return e={current:e},t.memoizedState=e},useState:YI,useDebugValue:$E,useDeferredValue:function(e){return zl().memoizedState=e},useTransition:function(){var e=YI(!1),t=e[0];return e=Pte.bind(null,e[1]),zl().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,s){var a=Xs,n=zl();if(Bs){if(s===void 0)throw Error(rt(407));s=s()}else{if(s=t(),ln===null)throw Error(rt(349));uh&30||f$(a,t,s)}n.memoizedState=s;var i={value:s,getSnapshot:t};return n.queue=i,XI(g$.bind(null,a,i,e),[e]),a.flags|=2048,Lp(9,x$.bind(null,a,i,s,t),void 0,null),s},useId:function(){var e=zl(),t=ln.identifierPrefix;if(Bs){var s=Vc,a=Uc;s=(a&~(1<<32-Sl(a)-1)).toString(32)+s,t=":"+t+"R"+s,s=Rp++,0<s&&(t+="H"+s.toString(32)),t+=":"}else s=Ate++,t=":"+t+"r"+s.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Ote={readContext:zo,useCallback:k$,useContext:zo,useEffect:BE,useImperativeHandle:N$,useInsertionEffect:v$,useLayoutEffect:w$,useMemo:S$,useReducer:O4,useRef:b$,useState:function(){return O4(Mp)},useDebugValue:$E,useDeferredValue:function(e){var t=qo();return C$(t,Ba.memoizedState,e)},useTransition:function(){var e=O4(Mp)[0],t=qo().memoizedState;return[e,t]},useMutableSource:h$,useSyncExternalStore:m$,useId:_$,unstable_isNewReconciler:!1},Rte={readContext:zo,useCallback:k$,useContext:zo,useEffect:BE,useImperativeHandle:N$,useInsertionEffect:v$,useLayoutEffect:w$,useMemo:S$,useReducer:R4,useRef:b$,useState:function(){return R4(Mp)},useDebugValue:$E,useDeferredValue:function(e){var t=qo();return Ba===null?t.memoizedState=e:C$(t,Ba.memoizedState,e)},useTransition:function(){var e=R4(Mp)[0],t=qo().memoizedState;return[e,t]},useMutableSource:h$,useSyncExternalStore:m$,useId:_$,unstable_isNewReconciler:!1};function ul(e,t){if(e&&e.defaultProps){t=Zs({},t),e=e.defaultProps;for(var s in e)t[s]===void 0&&(t[s]=e[s]);return t}return t}function GC(e,t,s,a){t=e.memoizedState,s=s(a,t),s=s==null?t:Zs({},t,s),e.memoizedState=s,e.lanes===0&&(e.updateQueue.baseState=s)}var CN={isMounted:function(e){return(e=e._reactInternals)?Ph(e)===e:!1},enqueueSetState:function(e,t,s){e=e._reactInternals;var a=ii(),n=vu(e),i=Hc(a,n);i.payload=t,s!=null&&(i.callback=s),t=yu(e,i,n),t!==null&&(Cl(t,e,n,a),C1(t,e,n))},enqueueReplaceState:function(e,t,s){e=e._reactInternals;var a=ii(),n=vu(e),i=Hc(a,n);i.tag=1,i.payload=t,s!=null&&(i.callback=s),t=yu(e,i,n),t!==null&&(Cl(t,e,n,a),C1(t,e,n))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var s=ii(),a=vu(e),n=Hc(s,a);n.tag=2,t!=null&&(n.callback=t),t=yu(e,n,a),t!==null&&(Cl(t,e,a,s),C1(t,e,a))}};function QI(e,t,s,a,n,i,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(a,i,o):t.prototype&&t.prototype.isPureReactComponent?!Ap(s,a)||!Ap(n,i):!0}function T$(e,t,s){var a=!1,n=Pu,i=t.contextType;return typeof i=="object"&&i!==null?i=zo(i):(n=Ii(t)?ch:Hn.current,a=t.contextTypes,i=(a=a!=null)?kf(e,n):Pu),t=new t(s,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=CN,e.stateNode=t,t._reactInternals=e,a&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=n,e.__reactInternalMemoizedMaskedChildContext=i),t}function ZI(e,t,s,a){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(s,a),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(s,a),t.state!==e&&CN.enqueueReplaceState(t,t.state,null)}function YC(e,t,s,a){var n=e.stateNode;n.props=s,n.state=e.memoizedState,n.refs={},IE(e);var i=t.contextType;typeof i=="object"&&i!==null?n.context=zo(i):(i=Ii(t)?ch:Hn.current,n.context=kf(e,i)),n.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(GC(e,t,i,s),n.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof n.getSnapshotBeforeUpdate=="function"||typeof n.UNSAFE_componentWillMount!="function"&&typeof n.componentWillMount!="function"||(t=n.state,typeof n.componentWillMount=="function"&&n.componentWillMount(),typeof n.UNSAFE_componentWillMount=="function"&&n.UNSAFE_componentWillMount(),t!==n.state&&CN.enqueueReplaceState(n,n.state,null),fw(e,s,n,a),n.state=e.memoizedState),typeof n.componentDidMount=="function"&&(e.flags|=4194308)}function Ef(e,t){try{var s="",a=t;do s+=cee(a),a=a.return;while(a);var n=s}catch(i){n=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:n,digest:null}}function M4(e,t,s){return{value:e,source:null,stack:s??null,digest:t??null}}function XC(e,t){try{console.error(t.value)}catch(s){setTimeout(function(){throw s})}}var Mte=typeof WeakMap=="function"?WeakMap:Map;function I$(e,t,s){s=Hc(-1,s),s.tag=3,s.payload={element:null};var a=t.value;return s.callback=function(){bw||(bw=!0,i5=a),XC(e,t)},s}function D$(e,t,s){s=Hc(-1,s),s.tag=3;var a=e.type.getDerivedStateFromError;if(typeof a=="function"){var n=t.value;s.payload=function(){return a(n)},s.callback=function(){XC(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(s.callback=function(){XC(e,t),typeof a!="function"&&(bu===null?bu=new Set([this]):bu.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),s}function JI(e,t,s){var a=e.pingCache;if(a===null){a=e.pingCache=new Mte;var n=new Set;a.set(t,n)}else n=a.get(t),n===void 0&&(n=new Set,a.set(t,n));n.has(s)||(n.add(s),e=Xte.bind(null,e,t,s),t.then(e,e))}function eD(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function tD(e,t,s,a,n){return e.mode&1?(e.flags|=65536,e.lanes=n,e):(e===t?e.flags|=65536:(e.flags|=128,s.flags|=131072,s.flags&=-52805,s.tag===1&&(s.alternate===null?s.tag=17:(t=Hc(-1,1),t.tag=2,yu(s,t,1))),s.lanes|=1),e)}var Lte=gd.ReactCurrentOwner,Ei=!1;function ei(e,t,s,a){t.child=e===null?l$(t,null,s,a):Cf(t,e.child,s,a)}function rD(e,t,s,a,n){s=s.render;var i=t.ref;return tf(t,n),a=LE(e,t,s,a,i,n),s=FE(),e!==null&&!Ei?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n,ed(e,t,n)):(Bs&&s&&SE(t),t.flags|=1,ei(e,t,a,n),t.child)}function sD(e,t,s,a,n){if(e===null){var i=s.type;return typeof i=="function"&&!GE(i)&&i.defaultProps===void 0&&s.compare===null&&s.defaultProps===void 0?(t.tag=15,t.type=i,O$(e,t,i,a,n)):(e=I1(s.type,null,a,t,t.mode,n),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&n)){var o=i.memoizedProps;if(s=s.compare,s=s!==null?s:Ap,s(o,a)&&e.ref===t.ref)return ed(e,t,n)}return t.flags|=1,e=wu(i,a),e.ref=t.ref,e.return=t,t.child=e}function O$(e,t,s,a,n){if(e!==null){var i=e.memoizedProps;if(Ap(i,a)&&e.ref===t.ref)if(Ei=!1,t.pendingProps=a=i,(e.lanes&n)!==0)e.flags&131072&&(Ei=!0);else return t.lanes=e.lanes,ed(e,t,n)}return QC(e,t,s,a,n)}function R$(e,t,s){var a=t.pendingProps,n=a.children,i=e!==null?e.memoizedState:null;if(a.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},ks(Lm,Ki),Ki|=s;else{if(!(s&1073741824))return e=i!==null?i.baseLanes|s:s,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,ks(Lm,Ki),Ki|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},a=i!==null?i.baseLanes:s,ks(Lm,Ki),Ki|=a}else i!==null?(a=i.baseLanes|s,t.memoizedState=null):a=s,ks(Lm,Ki),Ki|=a;return ei(e,t,n,s),t.child}function M$(e,t){var s=t.ref;(e===null&&s!==null||e!==null&&e.ref!==s)&&(t.flags|=512,t.flags|=2097152)}function QC(e,t,s,a,n){var i=Ii(s)?ch:Hn.current;return i=kf(t,i),tf(t,n),s=LE(e,t,s,a,i,n),a=FE(),e!==null&&!Ei?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n,ed(e,t,n)):(Bs&&a&&SE(t),t.flags|=1,ei(e,t,s,n),t.child)}function aD(e,t,s,a,n){if(Ii(s)){var i=!0;cw(t)}else i=!1;if(tf(t,n),t.stateNode===null)A1(e,t),T$(t,s,a),YC(t,s,a,n),a=!0;else if(e===null){var o=t.stateNode,l=t.memoizedProps;o.props=l;var c=o.context,d=s.contextType;typeof d=="object"&&d!==null?d=zo(d):(d=Ii(s)?ch:Hn.current,d=kf(t,d));var h=s.getDerivedStateFromProps,f=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==a||c!==d)&&ZI(t,o,a,d),zd=!1;var x=t.memoizedState;o.state=x,fw(t,a,o,n),c=t.memoizedState,l!==a||x!==c||Ti.current||zd?(typeof h=="function"&&(GC(t,s,h,a),c=t.memoizedState),(l=zd||QI(t,s,l,a,x,c,d))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=a,t.memoizedState=c),o.props=a,o.state=c,o.context=d,a=l):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),a=!1)}else{o=t.stateNode,d$(e,t),l=t.memoizedProps,d=t.type===t.elementType?l:ul(t.type,l),o.props=d,f=t.pendingProps,x=o.context,c=s.contextType,typeof c=="object"&&c!==null?c=zo(c):(c=Ii(s)?ch:Hn.current,c=kf(t,c));var y=s.getDerivedStateFromProps;(h=typeof y=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==f||x!==c)&&ZI(t,o,a,c),zd=!1,x=t.memoizedState,o.state=x,fw(t,a,o,n);var v=t.memoizedState;l!==f||x!==v||Ti.current||zd?(typeof y=="function"&&(GC(t,s,y,a),v=t.memoizedState),(d=zd||QI(t,s,d,a,x,v,c)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(a,v,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(a,v,c)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&x===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&x===e.memoizedState||(t.flags|=1024),t.memoizedProps=a,t.memoizedState=v),o.props=a,o.state=v,o.context=c,a=d):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&x===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&x===e.memoizedState||(t.flags|=1024),a=!1)}return ZC(e,t,s,a,i,n)}function ZC(e,t,s,a,n,i){M$(e,t);var o=(t.flags&128)!==0;if(!a&&!o)return n&&WI(t,s,!1),ed(e,t,i);a=t.stateNode,Lte.current=t;var l=o&&typeof s.getDerivedStateFromError!="function"?null:a.render();return t.flags|=1,e!==null&&o?(t.child=Cf(t,e.child,null,i),t.child=Cf(t,null,l,i)):ei(e,t,l,i),t.memoizedState=a.state,n&&WI(t,s,!0),t.child}function L$(e){var t=e.stateNode;t.pendingContext?VI(e,t.pendingContext,t.pendingContext!==t.context):t.context&&VI(e,t.context,!1),DE(e,t.containerInfo)}function nD(e,t,s,a,n){return Sf(),_E(n),t.flags|=256,ei(e,t,s,a),t.child}var JC={dehydrated:null,treeContext:null,retryLane:0};function e5(e){return{baseLanes:e,cachePool:null,transitions:null}}function F$(e,t,s){var a=t.pendingProps,n=Hs.current,i=!1,o=(t.flags&128)!==0,l;if((l=o)||(l=e!==null&&e.memoizedState===null?!1:(n&2)!==0),l?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(n|=1),ks(Hs,n&1),e===null)return HC(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=a.children,e=a.fallback,i?(a=t.mode,i=t.child,o={mode:"hidden",children:o},!(a&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=AN(o,a,0,null),e=th(e,a,s,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=e5(s),t.memoizedState=JC,e):UE(t,o));if(n=e.memoizedState,n!==null&&(l=n.dehydrated,l!==null))return Fte(e,t,o,a,l,n,s);if(i){i=a.fallback,o=t.mode,n=e.child,l=n.sibling;var c={mode:"hidden",children:a.children};return!(o&1)&&t.child!==n?(a=t.child,a.childLanes=0,a.pendingProps=c,t.deletions=null):(a=wu(n,c),a.subtreeFlags=n.subtreeFlags&14680064),l!==null?i=wu(l,i):(i=th(i,o,s,null),i.flags|=2),i.return=t,a.return=t,a.sibling=i,t.child=a,a=i,i=t.child,o=e.child.memoizedState,o=o===null?e5(s):{baseLanes:o.baseLanes|s,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=e.childLanes&~s,t.memoizedState=JC,a}return i=e.child,e=i.sibling,a=wu(i,{mode:"visible",children:a.children}),!(t.mode&1)&&(a.lanes=s),a.return=t,a.sibling=null,e!==null&&(s=t.deletions,s===null?(t.deletions=[e],t.flags|=16):s.push(e)),t.child=a,t.memoizedState=null,a}function UE(e,t){return t=AN({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function sv(e,t,s,a){return a!==null&&_E(a),Cf(t,e.child,null,s),e=UE(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Fte(e,t,s,a,n,i,o){if(s)return t.flags&256?(t.flags&=-257,a=M4(Error(rt(422))),sv(e,t,o,a)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=a.fallback,n=t.mode,a=AN({mode:"visible",children:a.children},n,0,null),i=th(i,n,o,null),i.flags|=2,a.return=t,i.return=t,a.sibling=i,t.child=a,t.mode&1&&Cf(t,e.child,null,o),t.child.memoizedState=e5(o),t.memoizedState=JC,i);if(!(t.mode&1))return sv(e,t,o,null);if(n.data==="$!"){if(a=n.nextSibling&&n.nextSibling.dataset,a)var l=a.dgst;return a=l,i=Error(rt(419)),a=M4(i,a,void 0),sv(e,t,o,a)}if(l=(o&e.childLanes)!==0,Ei||l){if(a=ln,a!==null){switch(o&-o){case 4:n=2;break;case 16:n=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:n=32;break;case 536870912:n=268435456;break;default:n=0}n=n&(a.suspendedLanes|o)?0:n,n!==0&&n!==i.retryLane&&(i.retryLane=n,Jc(e,n),Cl(a,e,n,-1))}return KE(),a=M4(Error(rt(421))),sv(e,t,o,a)}return n.data==="$?"?(t.flags|=128,t.child=e.child,t=Qte.bind(null,e),n._reactRetry=t,null):(e=i.treeContext,to=pu(n.nextSibling),so=t,Bs=!0,pl=null,e!==null&&(Ro[Mo++]=Uc,Ro[Mo++]=Vc,Ro[Mo++]=dh,Uc=e.id,Vc=e.overflow,dh=t),t=UE(t,a.children),t.flags|=4096,t)}function iD(e,t,s){e.lanes|=t;var a=e.alternate;a!==null&&(a.lanes|=t),KC(e.return,t,s)}function L4(e,t,s,a,n){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:a,tail:s,tailMode:n}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=a,i.tail=s,i.tailMode=n)}function B$(e,t,s){var a=t.pendingProps,n=a.revealOrder,i=a.tail;if(ei(e,t,a.children,s),a=Hs.current,a&2)a=a&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&iD(e,s,t);else if(e.tag===19)iD(e,s,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}a&=1}if(ks(Hs,a),!(t.mode&1))t.memoizedState=null;else switch(n){case"forwards":for(s=t.child,n=null;s!==null;)e=s.alternate,e!==null&&xw(e)===null&&(n=s),s=s.sibling;s=n,s===null?(n=t.child,t.child=null):(n=s.sibling,s.sibling=null),L4(t,!1,n,s,i);break;case"backwards":for(s=null,n=t.child,t.child=null;n!==null;){if(e=n.alternate,e!==null&&xw(e)===null){t.child=n;break}e=n.sibling,n.sibling=s,s=n,n=e}L4(t,!0,s,null,i);break;case"together":L4(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function A1(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function ed(e,t,s){if(e!==null&&(t.dependencies=e.dependencies),hh|=t.lanes,!(s&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(rt(153));if(t.child!==null){for(e=t.child,s=wu(e,e.pendingProps),t.child=s,s.return=t;e.sibling!==null;)e=e.sibling,s=s.sibling=wu(e,e.pendingProps),s.return=t;s.sibling=null}return t.child}function Bte(e,t,s){switch(t.tag){case 3:L$(t),Sf();break;case 5:u$(t);break;case 1:Ii(t.type)&&cw(t);break;case 4:DE(t,t.stateNode.containerInfo);break;case 10:var a=t.type._context,n=t.memoizedProps.value;ks(hw,a._currentValue),a._currentValue=n;break;case 13:if(a=t.memoizedState,a!==null)return a.dehydrated!==null?(ks(Hs,Hs.current&1),t.flags|=128,null):s&t.child.childLanes?F$(e,t,s):(ks(Hs,Hs.current&1),e=ed(e,t,s),e!==null?e.sibling:null);ks(Hs,Hs.current&1);break;case 19:if(a=(s&t.childLanes)!==0,e.flags&128){if(a)return B$(e,t,s);t.flags|=128}if(n=t.memoizedState,n!==null&&(n.rendering=null,n.tail=null,n.lastEffect=null),ks(Hs,Hs.current),a)break;return null;case 22:case 23:return t.lanes=0,R$(e,t,s)}return ed(e,t,s)}var $$,t5,U$,V$;$$=function(e,t){for(var s=t.child;s!==null;){if(s.tag===5||s.tag===6)e.appendChild(s.stateNode);else if(s.tag!==4&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return;s=s.return}s.sibling.return=s.return,s=s.sibling}};t5=function(){};U$=function(e,t,s,a){var n=e.memoizedProps;if(n!==a){e=t.stateNode,I0(ic.current);var i=null;switch(s){case"input":n=NC(e,n),a=NC(e,a),i=[];break;case"select":n=Zs({},n,{value:void 0}),a=Zs({},a,{value:void 0}),i=[];break;case"textarea":n=CC(e,n),a=CC(e,a),i=[];break;default:typeof n.onClick!="function"&&typeof a.onClick=="function"&&(e.onclick=ow)}EC(s,a);var o;s=null;for(d in n)if(!a.hasOwnProperty(d)&&n.hasOwnProperty(d)&&n[d]!=null)if(d==="style"){var l=n[d];for(o in l)l.hasOwnProperty(o)&&(s||(s={}),s[o]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(jp.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in a){var c=a[d];if(l=n!=null?n[d]:void 0,a.hasOwnProperty(d)&&c!==l&&(c!=null||l!=null))if(d==="style")if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(s||(s={}),s[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(s||(s={}),s[o]=c[o])}else s||(i||(i=[]),i.push(d,s)),s=c;else d==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(i=i||[]).push(d,c)):d==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(d,""+c):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(jp.hasOwnProperty(d)?(c!=null&&d==="onScroll"&&Es("scroll",e),i||l===c||(i=[])):(i=i||[]).push(d,c))}s&&(i=i||[]).push("style",s);var d=i;(t.updateQueue=d)&&(t.flags|=4)}};V$=function(e,t,s,a){s!==a&&(t.flags|=4)};function tg(e,t){if(!Bs)switch(e.tailMode){case"hidden":t=e.tail;for(var s=null;t!==null;)t.alternate!==null&&(s=t),t=t.sibling;s===null?e.tail=null:s.sibling=null;break;case"collapsed":s=e.tail;for(var a=null;s!==null;)s.alternate!==null&&(a=s),s=s.sibling;a===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:a.sibling=null}}function Bn(e){var t=e.alternate!==null&&e.alternate.child===e.child,s=0,a=0;if(t)for(var n=e.child;n!==null;)s|=n.lanes|n.childLanes,a|=n.subtreeFlags&14680064,a|=n.flags&14680064,n.return=e,n=n.sibling;else for(n=e.child;n!==null;)s|=n.lanes|n.childLanes,a|=n.subtreeFlags,a|=n.flags,n.return=e,n=n.sibling;return e.subtreeFlags|=a,e.childLanes=s,t}function $te(e,t,s){var a=t.pendingProps;switch(CE(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Bn(t),null;case 1:return Ii(t.type)&&lw(),Bn(t),null;case 3:return a=t.stateNode,_f(),Is(Ti),Is(Hn),RE(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(e===null||e.child===null)&&(tv(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,pl!==null&&(c5(pl),pl=null))),t5(e,t),Bn(t),null;case 5:OE(t);var n=I0(Op.current);if(s=t.type,e!==null&&t.stateNode!=null)U$(e,t,s,a,n),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!a){if(t.stateNode===null)throw Error(rt(166));return Bn(t),null}if(e=I0(ic.current),tv(t)){a=t.stateNode,s=t.type;var i=t.memoizedProps;switch(a[Ql]=t,a[Ip]=i,e=(t.mode&1)!==0,s){case"dialog":Es("cancel",a),Es("close",a);break;case"iframe":case"object":case"embed":Es("load",a);break;case"video":case"audio":for(n=0;n<Og.length;n++)Es(Og[n],a);break;case"source":Es("error",a);break;case"img":case"image":case"link":Es("error",a),Es("load",a);break;case"details":Es("toggle",a);break;case"input":xI(a,i),Es("invalid",a);break;case"select":a._wrapperState={wasMultiple:!!i.multiple},Es("invalid",a);break;case"textarea":pI(a,i),Es("invalid",a)}EC(s,i),n=null;for(var o in i)if(i.hasOwnProperty(o)){var l=i[o];o==="children"?typeof l=="string"?a.textContent!==l&&(i.suppressHydrationWarning!==!0&&ev(a.textContent,l,e),n=["children",l]):typeof l=="number"&&a.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&ev(a.textContent,l,e),n=["children",""+l]):jp.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&Es("scroll",a)}switch(s){case"input":Hb(a),gI(a,i,!0);break;case"textarea":Hb(a),yI(a);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(a.onclick=ow)}a=n,t.updateQueue=a,a!==null&&(t.flags|=4)}else{o=n.nodeType===9?n:n.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=gB(s)),e==="http://www.w3.org/1999/xhtml"?s==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof a.is=="string"?e=o.createElement(s,{is:a.is}):(e=o.createElement(s),s==="select"&&(o=e,a.multiple?o.multiple=!0:a.size&&(o.size=a.size))):e=o.createElementNS(e,s),e[Ql]=t,e[Ip]=a,$$(e,t,!1,!1),t.stateNode=e;e:{switch(o=AC(s,a),s){case"dialog":Es("cancel",e),Es("close",e),n=a;break;case"iframe":case"object":case"embed":Es("load",e),n=a;break;case"video":case"audio":for(n=0;n<Og.length;n++)Es(Og[n],e);n=a;break;case"source":Es("error",e),n=a;break;case"img":case"image":case"link":Es("error",e),Es("load",e),n=a;break;case"details":Es("toggle",e),n=a;break;case"input":xI(e,a),n=NC(e,a),Es("invalid",e);break;case"option":n=a;break;case"select":e._wrapperState={wasMultiple:!!a.multiple},n=Zs({},a,{value:void 0}),Es("invalid",e);break;case"textarea":pI(e,a),n=CC(e,a),Es("invalid",e);break;default:n=a}EC(s,n),l=n;for(i in l)if(l.hasOwnProperty(i)){var c=l[i];i==="style"?bB(e,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&pB(e,c)):i==="children"?typeof c=="string"?(s!=="textarea"||c!=="")&&Np(e,c):typeof c=="number"&&Np(e,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(jp.hasOwnProperty(i)?c!=null&&i==="onScroll"&&Es("scroll",e):c!=null&&uE(e,i,c,o))}switch(s){case"input":Hb(e),gI(e,a,!1);break;case"textarea":Hb(e),yI(e);break;case"option":a.value!=null&&e.setAttribute("value",""+Au(a.value));break;case"select":e.multiple=!!a.multiple,i=a.value,i!=null?Qm(e,!!a.multiple,i,!1):a.defaultValue!=null&&Qm(e,!!a.multiple,a.defaultValue,!0);break;default:typeof n.onClick=="function"&&(e.onclick=ow)}switch(s){case"button":case"input":case"select":case"textarea":a=!!a.autoFocus;break e;case"img":a=!0;break e;default:a=!1}}a&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Bn(t),null;case 6:if(e&&t.stateNode!=null)V$(e,t,e.memoizedProps,a);else{if(typeof a!="string"&&t.stateNode===null)throw Error(rt(166));if(s=I0(Op.current),I0(ic.current),tv(t)){if(a=t.stateNode,s=t.memoizedProps,a[Ql]=t,(i=a.nodeValue!==s)&&(e=so,e!==null))switch(e.tag){case 3:ev(a.nodeValue,s,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&ev(a.nodeValue,s,(e.mode&1)!==0)}i&&(t.flags|=4)}else a=(s.nodeType===9?s:s.ownerDocument).createTextNode(a),a[Ql]=t,t.stateNode=a}return Bn(t),null;case 13:if(Is(Hs),a=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Bs&&to!==null&&t.mode&1&&!(t.flags&128))i$(),Sf(),t.flags|=98560,i=!1;else if(i=tv(t),a!==null&&a.dehydrated!==null){if(e===null){if(!i)throw Error(rt(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(rt(317));i[Ql]=t}else Sf(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Bn(t),i=!1}else pl!==null&&(c5(pl),pl=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=s,t):(a=a!==null,a!==(e!==null&&e.memoizedState!==null)&&a&&(t.child.flags|=8192,t.mode&1&&(e===null||Hs.current&1?Wa===0&&(Wa=3):KE())),t.updateQueue!==null&&(t.flags|=4),Bn(t),null);case 4:return _f(),t5(e,t),e===null&&Pp(t.stateNode.containerInfo),Bn(t),null;case 10:return PE(t.type._context),Bn(t),null;case 17:return Ii(t.type)&&lw(),Bn(t),null;case 19:if(Is(Hs),i=t.memoizedState,i===null)return Bn(t),null;if(a=(t.flags&128)!==0,o=i.rendering,o===null)if(a)tg(i,!1);else{if(Wa!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=xw(e),o!==null){for(t.flags|=128,tg(i,!1),a=o.updateQueue,a!==null&&(t.updateQueue=a,t.flags|=4),t.subtreeFlags=0,a=s,s=t.child;s!==null;)i=s,e=a,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,e=o.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),s=s.sibling;return ks(Hs,Hs.current&1|2),t.child}e=e.sibling}i.tail!==null&&ga()>Af&&(t.flags|=128,a=!0,tg(i,!1),t.lanes=4194304)}else{if(!a)if(e=xw(o),e!==null){if(t.flags|=128,a=!0,s=e.updateQueue,s!==null&&(t.updateQueue=s,t.flags|=4),tg(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!Bs)return Bn(t),null}else 2*ga()-i.renderingStartTime>Af&&s!==1073741824&&(t.flags|=128,a=!0,tg(i,!1),t.lanes=4194304);i.isBackwards?(o.sibling=t.child,t.child=o):(s=i.last,s!==null?s.sibling=o:t.child=o,i.last=o)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=ga(),t.sibling=null,s=Hs.current,ks(Hs,a?s&1|2:s&1),t):(Bn(t),null);case 22:case 23:return HE(),a=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==a&&(t.flags|=8192),a&&t.mode&1?Ki&1073741824&&(Bn(t),t.subtreeFlags&6&&(t.flags|=8192)):Bn(t),null;case 24:return null;case 25:return null}throw Error(rt(156,t.tag))}function Ute(e,t){switch(CE(t),t.tag){case 1:return Ii(t.type)&&lw(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return _f(),Is(Ti),Is(Hn),RE(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return OE(t),null;case 13:if(Is(Hs),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(rt(340));Sf()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Is(Hs),null;case 4:return _f(),null;case 10:return PE(t.type._context),null;case 22:case 23:return HE(),null;case 24:return null;default:return null}}var av=!1,Wn=!1,Vte=typeof WeakSet=="function"?WeakSet:Set,jt=null;function Mm(e,t){var s=e.ref;if(s!==null)if(typeof s=="function")try{s(null)}catch(a){oa(e,t,a)}else s.current=null}function r5(e,t,s){try{s()}catch(a){oa(e,t,a)}}var oD=!1;function Wte(e,t){if(BC=aw,e=KB(),kE(e)){if("selectionStart"in e)var s={start:e.selectionStart,end:e.selectionEnd};else e:{s=(s=e.ownerDocument)&&s.defaultView||window;var a=s.getSelection&&s.getSelection();if(a&&a.rangeCount!==0){s=a.anchorNode;var n=a.anchorOffset,i=a.focusNode;a=a.focusOffset;try{s.nodeType,i.nodeType}catch{s=null;break e}var o=0,l=-1,c=-1,d=0,h=0,f=e,x=null;t:for(;;){for(var y;f!==s||n!==0&&f.nodeType!==3||(l=o+n),f!==i||a!==0&&f.nodeType!==3||(c=o+a),f.nodeType===3&&(o+=f.nodeValue.length),(y=f.firstChild)!==null;)x=f,f=y;for(;;){if(f===e)break t;if(x===s&&++d===n&&(l=o),x===i&&++h===a&&(c=o),(y=f.nextSibling)!==null)break;f=x,x=f.parentNode}f=y}s=l===-1||c===-1?null:{start:l,end:c}}else s=null}s=s||{start:0,end:0}}else s=null;for($C={focusedElem:e,selectionRange:s},aw=!1,jt=t;jt!==null;)if(t=jt,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,jt=e;else for(;jt!==null;){t=jt;try{var v=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var w=v.memoizedProps,N=v.memoizedState,k=t.stateNode,C=k.getSnapshotBeforeUpdate(t.elementType===t.type?w:ul(t.type,w),N);k.__reactInternalSnapshotBeforeUpdate=C}break;case 3:var E=t.stateNode.containerInfo;E.nodeType===1?E.textContent="":E.nodeType===9&&E.documentElement&&E.removeChild(E.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(rt(163))}}catch(_){oa(t,t.return,_)}if(e=t.sibling,e!==null){e.return=t.return,jt=e;break}jt=t.return}return v=oD,oD=!1,v}function Zg(e,t,s){var a=t.updateQueue;if(a=a!==null?a.lastEffect:null,a!==null){var n=a=a.next;do{if((n.tag&e)===e){var i=n.destroy;n.destroy=void 0,i!==void 0&&r5(t,s,i)}n=n.next}while(n!==a)}}function _N(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var s=t=t.next;do{if((s.tag&e)===e){var a=s.create;s.destroy=a()}s=s.next}while(s!==t)}}function s5(e){var t=e.ref;if(t!==null){var s=e.stateNode;switch(e.tag){case 5:e=s;break;default:e=s}typeof t=="function"?t(e):t.current=e}}function W$(e){var t=e.alternate;t!==null&&(e.alternate=null,W$(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Ql],delete t[Ip],delete t[WC],delete t[Ste],delete t[Cte])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function z$(e){return e.tag===5||e.tag===3||e.tag===4}function lD(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||z$(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function a5(e,t,s){var a=e.tag;if(a===5||a===6)e=e.stateNode,t?s.nodeType===8?s.parentNode.insertBefore(e,t):s.insertBefore(e,t):(s.nodeType===8?(t=s.parentNode,t.insertBefore(e,s)):(t=s,t.appendChild(e)),s=s._reactRootContainer,s!=null||t.onclick!==null||(t.onclick=ow));else if(a!==4&&(e=e.child,e!==null))for(a5(e,t,s),e=e.sibling;e!==null;)a5(e,t,s),e=e.sibling}function n5(e,t,s){var a=e.tag;if(a===5||a===6)e=e.stateNode,t?s.insertBefore(e,t):s.appendChild(e);else if(a!==4&&(e=e.child,e!==null))for(n5(e,t,s),e=e.sibling;e!==null;)n5(e,t,s),e=e.sibling}var Nn=null,xl=!1;function Td(e,t,s){for(s=s.child;s!==null;)q$(e,t,s),s=s.sibling}function q$(e,t,s){if(nc&&typeof nc.onCommitFiberUnmount=="function")try{nc.onCommitFiberUnmount(bN,s)}catch{}switch(s.tag){case 5:Wn||Mm(s,t);case 6:var a=Nn,n=xl;Nn=null,Td(e,t,s),Nn=a,xl=n,Nn!==null&&(xl?(e=Nn,s=s.stateNode,e.nodeType===8?e.parentNode.removeChild(s):e.removeChild(s)):Nn.removeChild(s.stateNode));break;case 18:Nn!==null&&(xl?(e=Nn,s=s.stateNode,e.nodeType===8?P4(e.parentNode,s):e.nodeType===1&&P4(e,s),_p(e)):P4(Nn,s.stateNode));break;case 4:a=Nn,n=xl,Nn=s.stateNode.containerInfo,xl=!0,Td(e,t,s),Nn=a,xl=n;break;case 0:case 11:case 14:case 15:if(!Wn&&(a=s.updateQueue,a!==null&&(a=a.lastEffect,a!==null))){n=a=a.next;do{var i=n,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&r5(s,t,o),n=n.next}while(n!==a)}Td(e,t,s);break;case 1:if(!Wn&&(Mm(s,t),a=s.stateNode,typeof a.componentWillUnmount=="function"))try{a.props=s.memoizedProps,a.state=s.memoizedState,a.componentWillUnmount()}catch(l){oa(s,t,l)}Td(e,t,s);break;case 21:Td(e,t,s);break;case 22:s.mode&1?(Wn=(a=Wn)||s.memoizedState!==null,Td(e,t,s),Wn=a):Td(e,t,s);break;default:Td(e,t,s)}}function cD(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var s=e.stateNode;s===null&&(s=e.stateNode=new Vte),t.forEach(function(a){var n=Zte.bind(null,e,a);s.has(a)||(s.add(a),a.then(n,n))})}}function ll(e,t){var s=t.deletions;if(s!==null)for(var a=0;a<s.length;a++){var n=s[a];try{var i=e,o=t,l=o;e:for(;l!==null;){switch(l.tag){case 5:Nn=l.stateNode,xl=!1;break e;case 3:Nn=l.stateNode.containerInfo,xl=!0;break e;case 4:Nn=l.stateNode.containerInfo,xl=!0;break e}l=l.return}if(Nn===null)throw Error(rt(160));q$(i,o,n),Nn=null,xl=!1;var c=n.alternate;c!==null&&(c.return=null),n.return=null}catch(d){oa(n,t,d)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)H$(t,e),t=t.sibling}function H$(e,t){var s=e.alternate,a=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(ll(t,e),$l(e),a&4){try{Zg(3,e,e.return),_N(3,e)}catch(w){oa(e,e.return,w)}try{Zg(5,e,e.return)}catch(w){oa(e,e.return,w)}}break;case 1:ll(t,e),$l(e),a&512&&s!==null&&Mm(s,s.return);break;case 5:if(ll(t,e),$l(e),a&512&&s!==null&&Mm(s,s.return),e.flags&32){var n=e.stateNode;try{Np(n,"")}catch(w){oa(e,e.return,w)}}if(a&4&&(n=e.stateNode,n!=null)){var i=e.memoizedProps,o=s!==null?s.memoizedProps:i,l=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&fB(n,i),AC(l,o);var d=AC(l,i);for(o=0;o<c.length;o+=2){var h=c[o],f=c[o+1];h==="style"?bB(n,f):h==="dangerouslySetInnerHTML"?pB(n,f):h==="children"?Np(n,f):uE(n,h,f,d)}switch(l){case"input":kC(n,i);break;case"textarea":xB(n,i);break;case"select":var x=n._wrapperState.wasMultiple;n._wrapperState.wasMultiple=!!i.multiple;var y=i.value;y!=null?Qm(n,!!i.multiple,y,!1):x!==!!i.multiple&&(i.defaultValue!=null?Qm(n,!!i.multiple,i.defaultValue,!0):Qm(n,!!i.multiple,i.multiple?[]:"",!1))}n[Ip]=i}catch(w){oa(e,e.return,w)}}break;case 6:if(ll(t,e),$l(e),a&4){if(e.stateNode===null)throw Error(rt(162));n=e.stateNode,i=e.memoizedProps;try{n.nodeValue=i}catch(w){oa(e,e.return,w)}}break;case 3:if(ll(t,e),$l(e),a&4&&s!==null&&s.memoizedState.isDehydrated)try{_p(t.containerInfo)}catch(w){oa(e,e.return,w)}break;case 4:ll(t,e),$l(e);break;case 13:ll(t,e),$l(e),n=e.child,n.flags&8192&&(i=n.memoizedState!==null,n.stateNode.isHidden=i,!i||n.alternate!==null&&n.alternate.memoizedState!==null||(zE=ga())),a&4&&cD(e);break;case 22:if(h=s!==null&&s.memoizedState!==null,e.mode&1?(Wn=(d=Wn)||h,ll(t,e),Wn=d):ll(t,e),$l(e),a&8192){if(d=e.memoizedState!==null,(e.stateNode.isHidden=d)&&!h&&e.mode&1)for(jt=e,h=e.child;h!==null;){for(f=jt=h;jt!==null;){switch(x=jt,y=x.child,x.tag){case 0:case 11:case 14:case 15:Zg(4,x,x.return);break;case 1:Mm(x,x.return);var v=x.stateNode;if(typeof v.componentWillUnmount=="function"){a=x,s=x.return;try{t=a,v.props=t.memoizedProps,v.state=t.memoizedState,v.componentWillUnmount()}catch(w){oa(a,s,w)}}break;case 5:Mm(x,x.return);break;case 22:if(x.memoizedState!==null){uD(f);continue}}y!==null?(y.return=x,jt=y):uD(f)}h=h.sibling}e:for(h=null,f=e;;){if(f.tag===5){if(h===null){h=f;try{n=f.stateNode,d?(i=n.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=f.stateNode,c=f.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=yB("display",o))}catch(w){oa(e,e.return,w)}}}else if(f.tag===6){if(h===null)try{f.stateNode.nodeValue=d?"":f.memoizedProps}catch(w){oa(e,e.return,w)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===e)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;f.sibling===null;){if(f.return===null||f.return===e)break e;h===f&&(h=null),f=f.return}h===f&&(h=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:ll(t,e),$l(e),a&4&&cD(e);break;case 21:break;default:ll(t,e),$l(e)}}function $l(e){var t=e.flags;if(t&2){try{e:{for(var s=e.return;s!==null;){if(z$(s)){var a=s;break e}s=s.return}throw Error(rt(160))}switch(a.tag){case 5:var n=a.stateNode;a.flags&32&&(Np(n,""),a.flags&=-33);var i=lD(e);n5(e,i,n);break;case 3:case 4:var o=a.stateNode.containerInfo,l=lD(e);a5(e,l,o);break;default:throw Error(rt(161))}}catch(c){oa(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function zte(e,t,s){jt=e,K$(e)}function K$(e,t,s){for(var a=(e.mode&1)!==0;jt!==null;){var n=jt,i=n.child;if(n.tag===22&&a){var o=n.memoizedState!==null||av;if(!o){var l=n.alternate,c=l!==null&&l.memoizedState!==null||Wn;l=av;var d=Wn;if(av=o,(Wn=c)&&!d)for(jt=n;jt!==null;)o=jt,c=o.child,o.tag===22&&o.memoizedState!==null?hD(n):c!==null?(c.return=o,jt=c):hD(n);for(;i!==null;)jt=i,K$(i),i=i.sibling;jt=n,av=l,Wn=d}dD(e)}else n.subtreeFlags&8772&&i!==null?(i.return=n,jt=i):dD(e)}}function dD(e){for(;jt!==null;){var t=jt;if(t.flags&8772){var s=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Wn||_N(5,t);break;case 1:var a=t.stateNode;if(t.flags&4&&!Wn)if(s===null)a.componentDidMount();else{var n=t.elementType===t.type?s.memoizedProps:ul(t.type,s.memoizedProps);a.componentDidUpdate(n,s.memoizedState,a.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&GI(t,i,a);break;case 3:var o=t.updateQueue;if(o!==null){if(s=null,t.child!==null)switch(t.child.tag){case 5:s=t.child.stateNode;break;case 1:s=t.child.stateNode}GI(t,o,s)}break;case 5:var l=t.stateNode;if(s===null&&t.flags&4){s=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&s.focus();break;case"img":c.src&&(s.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var d=t.alternate;if(d!==null){var h=d.memoizedState;if(h!==null){var f=h.dehydrated;f!==null&&_p(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(rt(163))}Wn||t.flags&512&&s5(t)}catch(x){oa(t,t.return,x)}}if(t===e){jt=null;break}if(s=t.sibling,s!==null){s.return=t.return,jt=s;break}jt=t.return}}function uD(e){for(;jt!==null;){var t=jt;if(t===e){jt=null;break}var s=t.sibling;if(s!==null){s.return=t.return,jt=s;break}jt=t.return}}function hD(e){for(;jt!==null;){var t=jt;try{switch(t.tag){case 0:case 11:case 15:var s=t.return;try{_N(4,t)}catch(c){oa(t,s,c)}break;case 1:var a=t.stateNode;if(typeof a.componentDidMount=="function"){var n=t.return;try{a.componentDidMount()}catch(c){oa(t,n,c)}}var i=t.return;try{s5(t)}catch(c){oa(t,i,c)}break;case 5:var o=t.return;try{s5(t)}catch(c){oa(t,o,c)}}}catch(c){oa(t,t.return,c)}if(t===e){jt=null;break}var l=t.sibling;if(l!==null){l.return=t.return,jt=l;break}jt=t.return}}var qte=Math.ceil,yw=gd.ReactCurrentDispatcher,VE=gd.ReactCurrentOwner,$o=gd.ReactCurrentBatchConfig,Ir=0,ln=null,Ea=null,En=0,Ki=0,Lm=Uu(0),Wa=0,Fp=null,hh=0,EN=0,WE=0,Jg=null,_i=null,zE=0,Af=1/0,Ac=null,bw=!1,i5=null,bu=null,nv=!1,du=null,vw=0,ep=0,o5=null,P1=-1,T1=0;function ii(){return Ir&6?ga():P1!==-1?P1:P1=ga()}function vu(e){return e.mode&1?Ir&2&&En!==0?En&-En:Ete.transition!==null?(T1===0&&(T1=TB()),T1):(e=ls,e!==0||(e=window.event,e=e===void 0?16:FB(e.type)),e):1}function Cl(e,t,s,a){if(50<ep)throw ep=0,o5=null,Error(rt(185));Ly(e,s,a),(!(Ir&2)||e!==ln)&&(e===ln&&(!(Ir&2)&&(EN|=s),Wa===4&&Xd(e,En)),Di(e,a),s===1&&Ir===0&&!(t.mode&1)&&(Af=ga()+500,kN&&Vu()))}function Di(e,t){var s=e.callbackNode;Eee(e,t);var a=sw(e,e===ln?En:0);if(a===0)s!==null&&wI(s),e.callbackNode=null,e.callbackPriority=0;else if(t=a&-a,e.callbackPriority!==t){if(s!=null&&wI(s),t===1)e.tag===0?_te(mD.bind(null,e)):s$(mD.bind(null,e)),Nte(function(){!(Ir&6)&&Vu()}),s=null;else{switch(IB(a)){case 1:s=gE;break;case 4:s=AB;break;case 16:s=rw;break;case 536870912:s=PB;break;default:s=rw}s=tU(s,G$.bind(null,e))}e.callbackPriority=t,e.callbackNode=s}}function G$(e,t){if(P1=-1,T1=0,Ir&6)throw Error(rt(327));var s=e.callbackNode;if(rf()&&e.callbackNode!==s)return null;var a=sw(e,e===ln?En:0);if(a===0)return null;if(a&30||a&e.expiredLanes||t)t=ww(e,a);else{t=a;var n=Ir;Ir|=2;var i=X$();(ln!==e||En!==t)&&(Ac=null,Af=ga()+500,eh(e,t));do try{Gte();break}catch(l){Y$(e,l)}while(!0);AE(),yw.current=i,Ir=n,Ea!==null?t=0:(ln=null,En=0,t=Wa)}if(t!==0){if(t===2&&(n=OC(e),n!==0&&(a=n,t=l5(e,n))),t===1)throw s=Fp,eh(e,0),Xd(e,a),Di(e,ga()),s;if(t===6)Xd(e,a);else{if(n=e.current.alternate,!(a&30)&&!Hte(n)&&(t=ww(e,a),t===2&&(i=OC(e),i!==0&&(a=i,t=l5(e,i))),t===1))throw s=Fp,eh(e,0),Xd(e,a),Di(e,ga()),s;switch(e.finishedWork=n,e.finishedLanes=a,t){case 0:case 1:throw Error(rt(345));case 2:m0(e,_i,Ac);break;case 3:if(Xd(e,a),(a&130023424)===a&&(t=zE+500-ga(),10<t)){if(sw(e,0)!==0)break;if(n=e.suspendedLanes,(n&a)!==a){ii(),e.pingedLanes|=e.suspendedLanes&n;break}e.timeoutHandle=VC(m0.bind(null,e,_i,Ac),t);break}m0(e,_i,Ac);break;case 4:if(Xd(e,a),(a&4194240)===a)break;for(t=e.eventTimes,n=-1;0<a;){var o=31-Sl(a);i=1<<o,o=t[o],o>n&&(n=o),a&=~i}if(a=n,a=ga()-a,a=(120>a?120:480>a?480:1080>a?1080:1920>a?1920:3e3>a?3e3:4320>a?4320:1960*qte(a/1960))-a,10<a){e.timeoutHandle=VC(m0.bind(null,e,_i,Ac),a);break}m0(e,_i,Ac);break;case 5:m0(e,_i,Ac);break;default:throw Error(rt(329))}}}return Di(e,ga()),e.callbackNode===s?G$.bind(null,e):null}function l5(e,t){var s=Jg;return e.current.memoizedState.isDehydrated&&(eh(e,t).flags|=256),e=ww(e,t),e!==2&&(t=_i,_i=s,t!==null&&c5(t)),e}function c5(e){_i===null?_i=e:_i.push.apply(_i,e)}function Hte(e){for(var t=e;;){if(t.flags&16384){var s=t.updateQueue;if(s!==null&&(s=s.stores,s!==null))for(var a=0;a<s.length;a++){var n=s[a],i=n.getSnapshot;n=n.value;try{if(!Al(i(),n))return!1}catch{return!1}}}if(s=t.child,t.subtreeFlags&16384&&s!==null)s.return=t,t=s;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Xd(e,t){for(t&=~WE,t&=~EN,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var s=31-Sl(t),a=1<<s;e[s]=-1,t&=~a}}function mD(e){if(Ir&6)throw Error(rt(327));rf();var t=sw(e,0);if(!(t&1))return Di(e,ga()),null;var s=ww(e,t);if(e.tag!==0&&s===2){var a=OC(e);a!==0&&(t=a,s=l5(e,a))}if(s===1)throw s=Fp,eh(e,0),Xd(e,t),Di(e,ga()),s;if(s===6)throw Error(rt(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,m0(e,_i,Ac),Di(e,ga()),null}function qE(e,t){var s=Ir;Ir|=1;try{return e(t)}finally{Ir=s,Ir===0&&(Af=ga()+500,kN&&Vu())}}function mh(e){du!==null&&du.tag===0&&!(Ir&6)&&rf();var t=Ir;Ir|=1;var s=$o.transition,a=ls;try{if($o.transition=null,ls=1,e)return e()}finally{ls=a,$o.transition=s,Ir=t,!(Ir&6)&&Vu()}}function HE(){Ki=Lm.current,Is(Lm)}function eh(e,t){e.finishedWork=null,e.finishedLanes=0;var s=e.timeoutHandle;if(s!==-1&&(e.timeoutHandle=-1,jte(s)),Ea!==null)for(s=Ea.return;s!==null;){var a=s;switch(CE(a),a.tag){case 1:a=a.type.childContextTypes,a!=null&&lw();break;case 3:_f(),Is(Ti),Is(Hn),RE();break;case 5:OE(a);break;case 4:_f();break;case 13:Is(Hs);break;case 19:Is(Hs);break;case 10:PE(a.type._context);break;case 22:case 23:HE()}s=s.return}if(ln=e,Ea=e=wu(e.current,null),En=Ki=t,Wa=0,Fp=null,WE=EN=hh=0,_i=Jg=null,T0!==null){for(t=0;t<T0.length;t++)if(s=T0[t],a=s.interleaved,a!==null){s.interleaved=null;var n=a.next,i=s.pending;if(i!==null){var o=i.next;i.next=n,a.next=o}s.pending=a}T0=null}return e}function Y$(e,t){do{var s=Ea;try{if(AE(),_1.current=pw,gw){for(var a=Xs.memoizedState;a!==null;){var n=a.queue;n!==null&&(n.pending=null),a=a.next}gw=!1}if(uh=0,an=Ba=Xs=null,Qg=!1,Rp=0,VE.current=null,s===null||s.return===null){Wa=1,Fp=t,Ea=null;break}e:{var i=e,o=s.return,l=s,c=t;if(t=En,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=c,h=l,f=h.tag;if(!(h.mode&1)&&(f===0||f===11||f===15)){var x=h.alternate;x?(h.updateQueue=x.updateQueue,h.memoizedState=x.memoizedState,h.lanes=x.lanes):(h.updateQueue=null,h.memoizedState=null)}var y=eD(o);if(y!==null){y.flags&=-257,tD(y,o,l,i,t),y.mode&1&&JI(i,d,t),t=y,c=d;var v=t.updateQueue;if(v===null){var w=new Set;w.add(c),t.updateQueue=w}else v.add(c);break e}else{if(!(t&1)){JI(i,d,t),KE();break e}c=Error(rt(426))}}else if(Bs&&l.mode&1){var N=eD(o);if(N!==null){!(N.flags&65536)&&(N.flags|=256),tD(N,o,l,i,t),_E(Ef(c,l));break e}}i=c=Ef(c,l),Wa!==4&&(Wa=2),Jg===null?Jg=[i]:Jg.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var k=I$(i,c,t);KI(i,k);break e;case 1:l=c;var C=i.type,E=i.stateNode;if(!(i.flags&128)&&(typeof C.getDerivedStateFromError=="function"||E!==null&&typeof E.componentDidCatch=="function"&&(bu===null||!bu.has(E)))){i.flags|=65536,t&=-t,i.lanes|=t;var _=D$(i,l,t);KI(i,_);break e}}i=i.return}while(i!==null)}Z$(s)}catch(T){t=T,Ea===s&&s!==null&&(Ea=s=s.return);continue}break}while(!0)}function X$(){var e=yw.current;return yw.current=pw,e===null?pw:e}function KE(){(Wa===0||Wa===3||Wa===2)&&(Wa=4),ln===null||!(hh&268435455)&&!(EN&268435455)||Xd(ln,En)}function ww(e,t){var s=Ir;Ir|=2;var a=X$();(ln!==e||En!==t)&&(Ac=null,eh(e,t));do try{Kte();break}catch(n){Y$(e,n)}while(!0);if(AE(),Ir=s,yw.current=a,Ea!==null)throw Error(rt(261));return ln=null,En=0,Wa}function Kte(){for(;Ea!==null;)Q$(Ea)}function Gte(){for(;Ea!==null&&!bee();)Q$(Ea)}function Q$(e){var t=eU(e.alternate,e,Ki);e.memoizedProps=e.pendingProps,t===null?Z$(e):Ea=t,VE.current=null}function Z$(e){var t=e;do{var s=t.alternate;if(e=t.return,t.flags&32768){if(s=Ute(s,t),s!==null){s.flags&=32767,Ea=s;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Wa=6,Ea=null;return}}else if(s=$te(s,t,Ki),s!==null){Ea=s;return}if(t=t.sibling,t!==null){Ea=t;return}Ea=t=e}while(t!==null);Wa===0&&(Wa=5)}function m0(e,t,s){var a=ls,n=$o.transition;try{$o.transition=null,ls=1,Yte(e,t,s,a)}finally{$o.transition=n,ls=a}return null}function Yte(e,t,s,a){do rf();while(du!==null);if(Ir&6)throw Error(rt(327));s=e.finishedWork;var n=e.finishedLanes;if(s===null)return null;if(e.finishedWork=null,e.finishedLanes=0,s===e.current)throw Error(rt(177));e.callbackNode=null,e.callbackPriority=0;var i=s.lanes|s.childLanes;if(Aee(e,i),e===ln&&(Ea=ln=null,En=0),!(s.subtreeFlags&2064)&&!(s.flags&2064)||nv||(nv=!0,tU(rw,function(){return rf(),null})),i=(s.flags&15990)!==0,s.subtreeFlags&15990||i){i=$o.transition,$o.transition=null;var o=ls;ls=1;var l=Ir;Ir|=4,VE.current=null,Wte(e,s),H$(s,e),xte($C),aw=!!BC,$C=BC=null,e.current=s,zte(s),vee(),Ir=l,ls=o,$o.transition=i}else e.current=s;if(nv&&(nv=!1,du=e,vw=n),i=e.pendingLanes,i===0&&(bu=null),Nee(s.stateNode),Di(e,ga()),t!==null)for(a=e.onRecoverableError,s=0;s<t.length;s++)n=t[s],a(n.value,{componentStack:n.stack,digest:n.digest});if(bw)throw bw=!1,e=i5,i5=null,e;return vw&1&&e.tag!==0&&rf(),i=e.pendingLanes,i&1?e===o5?ep++:(ep=0,o5=e):ep=0,Vu(),null}function rf(){if(du!==null){var e=IB(vw),t=$o.transition,s=ls;try{if($o.transition=null,ls=16>e?16:e,du===null)var a=!1;else{if(e=du,du=null,vw=0,Ir&6)throw Error(rt(331));var n=Ir;for(Ir|=4,jt=e.current;jt!==null;){var i=jt,o=i.child;if(jt.flags&16){var l=i.deletions;if(l!==null){for(var c=0;c<l.length;c++){var d=l[c];for(jt=d;jt!==null;){var h=jt;switch(h.tag){case 0:case 11:case 15:Zg(8,h,i)}var f=h.child;if(f!==null)f.return=h,jt=f;else for(;jt!==null;){h=jt;var x=h.sibling,y=h.return;if(W$(h),h===d){jt=null;break}if(x!==null){x.return=y,jt=x;break}jt=y}}}var v=i.alternate;if(v!==null){var w=v.child;if(w!==null){v.child=null;do{var N=w.sibling;w.sibling=null,w=N}while(w!==null)}}jt=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,jt=o;else e:for(;jt!==null;){if(i=jt,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Zg(9,i,i.return)}var k=i.sibling;if(k!==null){k.return=i.return,jt=k;break e}jt=i.return}}var C=e.current;for(jt=C;jt!==null;){o=jt;var E=o.child;if(o.subtreeFlags&2064&&E!==null)E.return=o,jt=E;else e:for(o=C;jt!==null;){if(l=jt,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:_N(9,l)}}catch(T){oa(l,l.return,T)}if(l===o){jt=null;break e}var _=l.sibling;if(_!==null){_.return=l.return,jt=_;break e}jt=l.return}}if(Ir=n,Vu(),nc&&typeof nc.onPostCommitFiberRoot=="function")try{nc.onPostCommitFiberRoot(bN,e)}catch{}a=!0}return a}finally{ls=s,$o.transition=t}}return!1}function fD(e,t,s){t=Ef(s,t),t=I$(e,t,1),e=yu(e,t,1),t=ii(),e!==null&&(Ly(e,1,t),Di(e,t))}function oa(e,t,s){if(e.tag===3)fD(e,e,s);else for(;t!==null;){if(t.tag===3){fD(t,e,s);break}else if(t.tag===1){var a=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof a.componentDidCatch=="function"&&(bu===null||!bu.has(a))){e=Ef(s,e),e=D$(t,e,1),t=yu(t,e,1),e=ii(),t!==null&&(Ly(t,1,e),Di(t,e));break}}t=t.return}}function Xte(e,t,s){var a=e.pingCache;a!==null&&a.delete(t),t=ii(),e.pingedLanes|=e.suspendedLanes&s,ln===e&&(En&s)===s&&(Wa===4||Wa===3&&(En&130023424)===En&&500>ga()-zE?eh(e,0):WE|=s),Di(e,t)}function J$(e,t){t===0&&(e.mode&1?(t=Yb,Yb<<=1,!(Yb&130023424)&&(Yb=4194304)):t=1);var s=ii();e=Jc(e,t),e!==null&&(Ly(e,t,s),Di(e,s))}function Qte(e){var t=e.memoizedState,s=0;t!==null&&(s=t.retryLane),J$(e,s)}function Zte(e,t){var s=0;switch(e.tag){case 13:var a=e.stateNode,n=e.memoizedState;n!==null&&(s=n.retryLane);break;case 19:a=e.stateNode;break;default:throw Error(rt(314))}a!==null&&a.delete(t),J$(e,s)}var eU;eU=function(e,t,s){if(e!==null)if(e.memoizedProps!==t.pendingProps||Ti.current)Ei=!0;else{if(!(e.lanes&s)&&!(t.flags&128))return Ei=!1,Bte(e,t,s);Ei=!!(e.flags&131072)}else Ei=!1,Bs&&t.flags&1048576&&a$(t,uw,t.index);switch(t.lanes=0,t.tag){case 2:var a=t.type;A1(e,t),e=t.pendingProps;var n=kf(t,Hn.current);tf(t,s),n=LE(null,t,a,e,n,s);var i=FE();return t.flags|=1,typeof n=="object"&&n!==null&&typeof n.render=="function"&&n.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ii(a)?(i=!0,cw(t)):i=!1,t.memoizedState=n.state!==null&&n.state!==void 0?n.state:null,IE(t),n.updater=CN,t.stateNode=n,n._reactInternals=t,YC(t,a,e,s),t=ZC(null,t,a,!0,i,s)):(t.tag=0,Bs&&i&&SE(t),ei(null,t,n,s),t=t.child),t;case 16:a=t.elementType;e:{switch(A1(e,t),e=t.pendingProps,n=a._init,a=n(a._payload),t.type=a,n=t.tag=ere(a),e=ul(a,e),n){case 0:t=QC(null,t,a,e,s);break e;case 1:t=aD(null,t,a,e,s);break e;case 11:t=rD(null,t,a,e,s);break e;case 14:t=sD(null,t,a,ul(a.type,e),s);break e}throw Error(rt(306,a,""))}return t;case 0:return a=t.type,n=t.pendingProps,n=t.elementType===a?n:ul(a,n),QC(e,t,a,n,s);case 1:return a=t.type,n=t.pendingProps,n=t.elementType===a?n:ul(a,n),aD(e,t,a,n,s);case 3:e:{if(L$(t),e===null)throw Error(rt(387));a=t.pendingProps,i=t.memoizedState,n=i.element,d$(e,t),fw(t,a,null,s);var o=t.memoizedState;if(a=o.element,i.isDehydrated)if(i={element:a,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){n=Ef(Error(rt(423)),t),t=nD(e,t,a,s,n);break e}else if(a!==n){n=Ef(Error(rt(424)),t),t=nD(e,t,a,s,n);break e}else for(to=pu(t.stateNode.containerInfo.firstChild),so=t,Bs=!0,pl=null,s=l$(t,null,a,s),t.child=s;s;)s.flags=s.flags&-3|4096,s=s.sibling;else{if(Sf(),a===n){t=ed(e,t,s);break e}ei(e,t,a,s)}t=t.child}return t;case 5:return u$(t),e===null&&HC(t),a=t.type,n=t.pendingProps,i=e!==null?e.memoizedProps:null,o=n.children,UC(a,n)?o=null:i!==null&&UC(a,i)&&(t.flags|=32),M$(e,t),ei(e,t,o,s),t.child;case 6:return e===null&&HC(t),null;case 13:return F$(e,t,s);case 4:return DE(t,t.stateNode.containerInfo),a=t.pendingProps,e===null?t.child=Cf(t,null,a,s):ei(e,t,a,s),t.child;case 11:return a=t.type,n=t.pendingProps,n=t.elementType===a?n:ul(a,n),rD(e,t,a,n,s);case 7:return ei(e,t,t.pendingProps,s),t.child;case 8:return ei(e,t,t.pendingProps.children,s),t.child;case 12:return ei(e,t,t.pendingProps.children,s),t.child;case 10:e:{if(a=t.type._context,n=t.pendingProps,i=t.memoizedProps,o=n.value,ks(hw,a._currentValue),a._currentValue=o,i!==null)if(Al(i.value,o)){if(i.children===n.children&&!Ti.current){t=ed(e,t,s);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var l=i.dependencies;if(l!==null){o=i.child;for(var c=l.firstContext;c!==null;){if(c.context===a){if(i.tag===1){c=Hc(-1,s&-s),c.tag=2;var d=i.updateQueue;if(d!==null){d=d.shared;var h=d.pending;h===null?c.next=c:(c.next=h.next,h.next=c),d.pending=c}}i.lanes|=s,c=i.alternate,c!==null&&(c.lanes|=s),KC(i.return,s,t),l.lanes|=s;break}c=c.next}}else if(i.tag===10)o=i.type===t.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(rt(341));o.lanes|=s,l=o.alternate,l!==null&&(l.lanes|=s),KC(o,s,t),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===t){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}ei(e,t,n.children,s),t=t.child}return t;case 9:return n=t.type,a=t.pendingProps.children,tf(t,s),n=zo(n),a=a(n),t.flags|=1,ei(e,t,a,s),t.child;case 14:return a=t.type,n=ul(a,t.pendingProps),n=ul(a.type,n),sD(e,t,a,n,s);case 15:return O$(e,t,t.type,t.pendingProps,s);case 17:return a=t.type,n=t.pendingProps,n=t.elementType===a?n:ul(a,n),A1(e,t),t.tag=1,Ii(a)?(e=!0,cw(t)):e=!1,tf(t,s),T$(t,a,n),YC(t,a,n,s),ZC(null,t,a,!0,e,s);case 19:return B$(e,t,s);case 22:return R$(e,t,s)}throw Error(rt(156,t.tag))};function tU(e,t){return EB(e,t)}function Jte(e,t,s,a){this.tag=e,this.key=s,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=a,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Fo(e,t,s,a){return new Jte(e,t,s,a)}function GE(e){return e=e.prototype,!(!e||!e.isReactComponent)}function ere(e){if(typeof e=="function")return GE(e)?1:0;if(e!=null){if(e=e.$$typeof,e===mE)return 11;if(e===fE)return 14}return 2}function wu(e,t){var s=e.alternate;return s===null?(s=Fo(e.tag,t,e.key,e.mode),s.elementType=e.elementType,s.type=e.type,s.stateNode=e.stateNode,s.alternate=e,e.alternate=s):(s.pendingProps=t,s.type=e.type,s.flags=0,s.subtreeFlags=0,s.deletions=null),s.flags=e.flags&14680064,s.childLanes=e.childLanes,s.lanes=e.lanes,s.child=e.child,s.memoizedProps=e.memoizedProps,s.memoizedState=e.memoizedState,s.updateQueue=e.updateQueue,t=e.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},s.sibling=e.sibling,s.index=e.index,s.ref=e.ref,s}function I1(e,t,s,a,n,i){var o=2;if(a=e,typeof e=="function")GE(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case _m:return th(s.children,n,i,t);case hE:o=8,n|=8;break;case bC:return e=Fo(12,s,t,n|2),e.elementType=bC,e.lanes=i,e;case vC:return e=Fo(13,s,t,n),e.elementType=vC,e.lanes=i,e;case wC:return e=Fo(19,s,t,n),e.elementType=wC,e.lanes=i,e;case uB:return AN(s,n,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case cB:o=10;break e;case dB:o=9;break e;case mE:o=11;break e;case fE:o=14;break e;case Wd:o=16,a=null;break e}throw Error(rt(130,e==null?e:typeof e,""))}return t=Fo(o,s,t,n),t.elementType=e,t.type=a,t.lanes=i,t}function th(e,t,s,a){return e=Fo(7,e,a,t),e.lanes=s,e}function AN(e,t,s,a){return e=Fo(22,e,a,t),e.elementType=uB,e.lanes=s,e.stateNode={isHidden:!1},e}function F4(e,t,s){return e=Fo(6,e,null,t),e.lanes=s,e}function B4(e,t,s){return t=Fo(4,e.children!==null?e.children:[],e.key,t),t.lanes=s,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function tre(e,t,s,a,n){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=b4(0),this.expirationTimes=b4(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=b4(0),this.identifierPrefix=a,this.onRecoverableError=n,this.mutableSourceEagerHydrationData=null}function YE(e,t,s,a,n,i,o,l,c){return e=new tre(e,t,s,l,c),t===1?(t=1,i===!0&&(t|=8)):t=0,i=Fo(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:a,isDehydrated:s,cache:null,transitions:null,pendingSuspenseBoundaries:null},IE(i),e}function rre(e,t,s){var a=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Cm,key:a==null?null:""+a,children:e,containerInfo:t,implementation:s}}function rU(e){if(!e)return Pu;e=e._reactInternals;e:{if(Ph(e)!==e||e.tag!==1)throw Error(rt(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ii(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(rt(171))}if(e.tag===1){var s=e.type;if(Ii(s))return r$(e,s,t)}return t}function sU(e,t,s,a,n,i,o,l,c){return e=YE(s,a,!0,e,n,i,o,l,c),e.context=rU(null),s=e.current,a=ii(),n=vu(s),i=Hc(a,n),i.callback=t??null,yu(s,i,n),e.current.lanes=n,Ly(e,n,a),Di(e,a),e}function PN(e,t,s,a){var n=t.current,i=ii(),o=vu(n);return s=rU(s),t.context===null?t.context=s:t.pendingContext=s,t=Hc(i,o),t.payload={element:e},a=a===void 0?null:a,a!==null&&(t.callback=a),e=yu(n,t,o),e!==null&&(Cl(e,n,o,i),C1(e,n,o)),o}function jw(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function xD(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var s=e.retryLane;e.retryLane=s!==0&&s<t?s:t}}function XE(e,t){xD(e,t),(e=e.alternate)&&xD(e,t)}function sre(){return null}var aU=typeof reportError=="function"?reportError:function(e){console.error(e)};function QE(e){this._internalRoot=e}TN.prototype.render=QE.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(rt(409));PN(e,t,null,null)};TN.prototype.unmount=QE.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;mh(function(){PN(null,e,null,null)}),t[Zc]=null}};function TN(e){this._internalRoot=e}TN.prototype.unstable_scheduleHydration=function(e){if(e){var t=RB();e={blockedOn:null,target:e,priority:t};for(var s=0;s<Yd.length&&t!==0&&t<Yd[s].priority;s++);Yd.splice(s,0,e),s===0&&LB(e)}};function ZE(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function IN(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function gD(){}function are(e,t,s,a,n){if(n){if(typeof a=="function"){var i=a;a=function(){var d=jw(o);i.call(d)}}var o=sU(t,a,e,0,null,!1,!1,"",gD);return e._reactRootContainer=o,e[Zc]=o.current,Pp(e.nodeType===8?e.parentNode:e),mh(),o}for(;n=e.lastChild;)e.removeChild(n);if(typeof a=="function"){var l=a;a=function(){var d=jw(c);l.call(d)}}var c=YE(e,0,!1,null,null,!1,!1,"",gD);return e._reactRootContainer=c,e[Zc]=c.current,Pp(e.nodeType===8?e.parentNode:e),mh(function(){PN(t,c,s,a)}),c}function DN(e,t,s,a,n){var i=s._reactRootContainer;if(i){var o=i;if(typeof n=="function"){var l=n;n=function(){var c=jw(o);l.call(c)}}PN(t,o,e,n)}else o=are(s,t,e,n,a);return jw(o)}DB=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var s=Dg(t.pendingLanes);s!==0&&(pE(t,s|1),Di(t,ga()),!(Ir&6)&&(Af=ga()+500,Vu()))}break;case 13:mh(function(){var a=Jc(e,1);if(a!==null){var n=ii();Cl(a,e,1,n)}}),XE(e,1)}};yE=function(e){if(e.tag===13){var t=Jc(e,134217728);if(t!==null){var s=ii();Cl(t,e,134217728,s)}XE(e,134217728)}};OB=function(e){if(e.tag===13){var t=vu(e),s=Jc(e,t);if(s!==null){var a=ii();Cl(s,e,t,a)}XE(e,t)}};RB=function(){return ls};MB=function(e,t){var s=ls;try{return ls=e,t()}finally{ls=s}};TC=function(e,t,s){switch(t){case"input":if(kC(e,s),t=s.name,s.type==="radio"&&t!=null){for(s=e;s.parentNode;)s=s.parentNode;for(s=s.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<s.length;t++){var a=s[t];if(a!==e&&a.form===e.form){var n=NN(a);if(!n)throw Error(rt(90));mB(a),kC(a,n)}}}break;case"textarea":xB(e,s);break;case"select":t=s.value,t!=null&&Qm(e,!!s.multiple,t,!1)}};jB=qE;NB=mh;var nre={usingClientEntryPoint:!1,Events:[By,Tm,NN,vB,wB,qE]},rg={findFiberByHostInstance:P0,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},ire={bundleType:rg.bundleType,version:rg.version,rendererPackageName:rg.rendererPackageName,rendererConfig:rg.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:gd.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=CB(e),e===null?null:e.stateNode},findFiberByHostInstance:rg.findFiberByHostInstance||sre,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var iv=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!iv.isDisabled&&iv.supportsFiber)try{bN=iv.inject(ire),nc=iv}catch{}}fo.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=nre;fo.createPortal=function(e,t){var s=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ZE(t))throw Error(rt(200));return rre(e,t,null,s)};fo.createRoot=function(e,t){if(!ZE(e))throw Error(rt(299));var s=!1,a="",n=aU;return t!=null&&(t.unstable_strictMode===!0&&(s=!0),t.identifierPrefix!==void 0&&(a=t.identifierPrefix),t.onRecoverableError!==void 0&&(n=t.onRecoverableError)),t=YE(e,1,!1,null,null,s,!1,a,n),e[Zc]=t.current,Pp(e.nodeType===8?e.parentNode:e),new QE(t)};fo.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(rt(188)):(e=Object.keys(e).join(","),Error(rt(268,e)));return e=CB(t),e=e===null?null:e.stateNode,e};fo.flushSync=function(e){return mh(e)};fo.hydrate=function(e,t,s){if(!IN(t))throw Error(rt(200));return DN(null,e,t,!0,s)};fo.hydrateRoot=function(e,t,s){if(!ZE(e))throw Error(rt(405));var a=s!=null&&s.hydratedSources||null,n=!1,i="",o=aU;if(s!=null&&(s.unstable_strictMode===!0&&(n=!0),s.identifierPrefix!==void 0&&(i=s.identifierPrefix),s.onRecoverableError!==void 0&&(o=s.onRecoverableError)),t=sU(t,null,e,1,s??null,n,!1,i,o),e[Zc]=t.current,Pp(e),a)for(e=0;e<a.length;e++)s=a[e],n=s._getVersion,n=n(s._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[s,n]:t.mutableSourceEagerHydrationData.push(s,n);return new TN(t)};fo.render=function(e,t,s){if(!IN(t))throw Error(rt(200));return DN(null,e,t,!1,s)};fo.unmountComponentAtNode=function(e){if(!IN(e))throw Error(rt(40));return e._reactRootContainer?(mh(function(){DN(null,null,e,!1,function(){e._reactRootContainer=null,e[Zc]=null})}),!0):!1};fo.unstable_batchedUpdates=qE;fo.unstable_renderSubtreeIntoContainer=function(e,t,s,a){if(!IN(s))throw Error(rt(200));if(e==null||e._reactInternals===void 0)throw Error(rt(38));return DN(e,t,s,!1,a)};fo.version="18.3.1-next-f1338f8080-20240426";function nU(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(nU)}catch(e){console.error(e)}}nU(),nB.exports=fo;var ux=nB.exports;const ov=Rl(ux);var pD=ux;pC.createRoot=pD.createRoot,pC.hydrateRoot=pD.hydrateRoot;/**
 * @remix-run/router v1.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Bp(){return Bp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e},Bp.apply(this,arguments)}var uu;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(uu||(uu={}));const yD="popstate";function ore(e){e===void 0&&(e={});function t(a,n){let{pathname:i,search:o,hash:l}=a.location;return d5("",{pathname:i,search:o,hash:l},n.state&&n.state.usr||null,n.state&&n.state.key||"default")}function s(a,n){return typeof n=="string"?n:Nw(n)}return cre(t,s,null,e)}function ba(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function JE(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function lre(){return Math.random().toString(36).substr(2,8)}function bD(e,t){return{usr:e.state,key:e.key,idx:t}}function d5(e,t,s,a){return s===void 0&&(s=null),Bp({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?hx(t):t,{state:s,key:t&&t.key||a||lre()})}function Nw(e){let{pathname:t="/",search:s="",hash:a=""}=e;return s&&s!=="?"&&(t+=s.charAt(0)==="?"?s:"?"+s),a&&a!=="#"&&(t+=a.charAt(0)==="#"?a:"#"+a),t}function hx(e){let t={};if(e){let s=e.indexOf("#");s>=0&&(t.hash=e.substr(s),e=e.substr(0,s));let a=e.indexOf("?");a>=0&&(t.search=e.substr(a),e=e.substr(0,a)),e&&(t.pathname=e)}return t}function cre(e,t,s,a){a===void 0&&(a={});let{window:n=document.defaultView,v5Compat:i=!1}=a,o=n.history,l=uu.Pop,c=null,d=h();d==null&&(d=0,o.replaceState(Bp({},o.state,{idx:d}),""));function h(){return(o.state||{idx:null}).idx}function f(){l=uu.Pop;let N=h(),k=N==null?null:N-d;d=N,c&&c({action:l,location:w.location,delta:k})}function x(N,k){l=uu.Push;let C=d5(w.location,N,k);d=h()+1;let E=bD(C,d),_=w.createHref(C);try{o.pushState(E,"",_)}catch(T){if(T instanceof DOMException&&T.name==="DataCloneError")throw T;n.location.assign(_)}i&&c&&c({action:l,location:w.location,delta:1})}function y(N,k){l=uu.Replace;let C=d5(w.location,N,k);d=h();let E=bD(C,d),_=w.createHref(C);o.replaceState(E,"",_),i&&c&&c({action:l,location:w.location,delta:0})}function v(N){let k=n.location.origin!=="null"?n.location.origin:n.location.href,C=typeof N=="string"?N:Nw(N);return C=C.replace(/ $/,"%20"),ba(k,"No window.location.(origin|href) available to create URL for href: "+C),new URL(C,k)}let w={get action(){return l},get location(){return e(n,o)},listen(N){if(c)throw new Error("A history only accepts one active listener");return n.addEventListener(yD,f),c=N,()=>{n.removeEventListener(yD,f),c=null}},createHref(N){return t(n,N)},createURL:v,encodeLocation(N){let k=v(N);return{pathname:k.pathname,search:k.search,hash:k.hash}},push:x,replace:y,go(N){return o.go(N)}};return w}var vD;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(vD||(vD={}));function dre(e,t,s){return s===void 0&&(s="/"),ure(e,t,s)}function ure(e,t,s,a){let n=typeof t=="string"?hx(t):t,i=e6(n.pathname||"/",s);if(i==null)return null;let o=iU(e);hre(o);let l=null;for(let c=0;l==null&&c<o.length;++c){let d=kre(i);l=wre(o[c],d)}return l}function iU(e,t,s,a){t===void 0&&(t=[]),s===void 0&&(s=[]),a===void 0&&(a="");let n=(i,o,l)=>{let c={relativePath:l===void 0?i.path||"":l,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};c.relativePath.startsWith("/")&&(ba(c.relativePath.startsWith(a),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+a+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(a.length));let d=ju([a,c.relativePath]),h=s.concat(c);i.children&&i.children.length>0&&(ba(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),iU(i.children,t,h,d)),!(i.path==null&&!i.index)&&t.push({path:d,score:bre(d,i.index),routesMeta:h})};return e.forEach((i,o)=>{var l;if(i.path===""||!((l=i.path)!=null&&l.includes("?")))n(i,o);else for(let c of oU(i.path))n(i,o,c)}),t}function oU(e){let t=e.split("/");if(t.length===0)return[];let[s,...a]=t,n=s.endsWith("?"),i=s.replace(/\?$/,"");if(a.length===0)return n?[i,""]:[i];let o=oU(a.join("/")),l=[];return l.push(...o.map(c=>c===""?i:[i,c].join("/"))),n&&l.push(...o),l.map(c=>e.startsWith("/")&&c===""?"/":c)}function hre(e){e.sort((t,s)=>t.score!==s.score?s.score-t.score:vre(t.routesMeta.map(a=>a.childrenIndex),s.routesMeta.map(a=>a.childrenIndex)))}const mre=/^:[\w-]+$/,fre=3,xre=2,gre=1,pre=10,yre=-2,wD=e=>e==="*";function bre(e,t){let s=e.split("/"),a=s.length;return s.some(wD)&&(a+=yre),t&&(a+=xre),s.filter(n=>!wD(n)).reduce((n,i)=>n+(mre.test(i)?fre:i===""?gre:pre),a)}function vre(e,t){return e.length===t.length&&e.slice(0,-1).every((a,n)=>a===t[n])?e[e.length-1]-t[t.length-1]:0}function wre(e,t,s){let{routesMeta:a}=e,n={},i="/",o=[];for(let l=0;l<a.length;++l){let c=a[l],d=l===a.length-1,h=i==="/"?t:t.slice(i.length)||"/",f=jre({path:c.relativePath,caseSensitive:c.caseSensitive,end:d},h),x=c.route;if(!f)return null;Object.assign(n,f.params),o.push({params:n,pathname:ju([i,f.pathname]),pathnameBase:Are(ju([i,f.pathnameBase])),route:x}),f.pathnameBase!=="/"&&(i=ju([i,f.pathnameBase]))}return o}function jre(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[s,a]=Nre(e.path,e.caseSensitive,e.end),n=t.match(s);if(!n)return null;let i=n[0],o=i.replace(/(.)\/+$/,"$1"),l=n.slice(1);return{params:a.reduce((d,h,f)=>{let{paramName:x,isOptional:y}=h;if(x==="*"){let w=l[f]||"";o=i.slice(0,i.length-w.length).replace(/(.)\/+$/,"$1")}const v=l[f];return y&&!v?d[x]=void 0:d[x]=(v||"").replace(/%2F/g,"/"),d},{}),pathname:i,pathnameBase:o,pattern:e}}function Nre(e,t,s){t===void 0&&(t=!1),s===void 0&&(s=!0),JE(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let a=[],n="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,c)=>(a.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(a.push({paramName:"*"}),n+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):s?n+="\\/*$":e!==""&&e!=="/"&&(n+="(?:(?=\\/|$))"),[new RegExp(n,t?void 0:"i"),a]}function kre(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return JE(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function e6(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let s=t.endsWith("/")?t.length-1:t.length,a=e.charAt(s);return a&&a!=="/"?null:e.slice(s)||"/"}const Sre=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Cre=e=>Sre.test(e);function _re(e,t){t===void 0&&(t="/");let{pathname:s,search:a="",hash:n=""}=typeof e=="string"?hx(e):e,i;if(s)if(Cre(s))i=s;else{if(s.includes("//")){let o=s;s=s.replace(/\/\/+/g,"/"),JE(!1,"Pathnames cannot have embedded double slashes - normalizing "+(o+" -> "+s))}s.startsWith("/")?i=jD(s.substring(1),"/"):i=jD(s,t)}else i=t;return{pathname:i,search:Pre(a),hash:Tre(n)}}function jD(e,t){let s=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(n=>{n===".."?s.length>1&&s.pop():n!=="."&&s.push(n)}),s.length>1?s.join("/"):"/"}function $4(e,t,s,a){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(a)+"].  Please separate it out to the ")+("`to."+s+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Ere(e){return e.filter((t,s)=>s===0||t.route.path&&t.route.path.length>0)}function t6(e,t){let s=Ere(e);return t?s.map((a,n)=>n===s.length-1?a.pathname:a.pathnameBase):s.map(a=>a.pathnameBase)}function r6(e,t,s,a){a===void 0&&(a=!1);let n;typeof e=="string"?n=hx(e):(n=Bp({},e),ba(!n.pathname||!n.pathname.includes("?"),$4("?","pathname","search",n)),ba(!n.pathname||!n.pathname.includes("#"),$4("#","pathname","hash",n)),ba(!n.search||!n.search.includes("#"),$4("#","search","hash",n)));let i=e===""||n.pathname==="",o=i?"/":n.pathname,l;if(o==null)l=s;else{let f=t.length-1;if(!a&&o.startsWith("..")){let x=o.split("/");for(;x[0]==="..";)x.shift(),f-=1;n.pathname=x.join("/")}l=f>=0?t[f]:"/"}let c=_re(n,l),d=o&&o!=="/"&&o.endsWith("/"),h=(i||o===".")&&s.endsWith("/");return!c.pathname.endsWith("/")&&(d||h)&&(c.pathname+="/"),c}const ju=e=>e.join("/").replace(/\/\/+/g,"/"),Are=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),Pre=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,Tre=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function Ire(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const lU=["post","put","patch","delete"];new Set(lU);const Dre=["get",...lU];new Set(Dre);/**
 * React Router v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function $p(){return $p=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e},$p.apply(this,arguments)}const s6=p.createContext(null),Ore=p.createContext(null),Wu=p.createContext(null),ON=p.createContext(null),pd=p.createContext({outlet:null,matches:[],isDataRoute:!1}),cU=p.createContext(null);function Rre(e,t){let{relative:s}=t===void 0?{}:t;mx()||ba(!1);let{basename:a,navigator:n}=p.useContext(Wu),{hash:i,pathname:o,search:l}=uU(e,{relative:s}),c=o;return a!=="/"&&(c=o==="/"?a:ju([a,o])),n.createHref({pathname:c,search:l,hash:i})}function mx(){return p.useContext(ON)!=null}function $i(){return mx()||ba(!1),p.useContext(ON).location}function dU(e){p.useContext(Wu).static||p.useLayoutEffect(e)}function Ut(){let{isDataRoute:e}=p.useContext(pd);return e?Gre():Mre()}function Mre(){mx()||ba(!1);let e=p.useContext(s6),{basename:t,future:s,navigator:a}=p.useContext(Wu),{matches:n}=p.useContext(pd),{pathname:i}=$i(),o=JSON.stringify(t6(n,s.v7_relativeSplatPath)),l=p.useRef(!1);return dU(()=>{l.current=!0}),p.useCallback(function(d,h){if(h===void 0&&(h={}),!l.current)return;if(typeof d=="number"){a.go(d);return}let f=r6(d,JSON.parse(o),i,h.relative==="path");e==null&&t!=="/"&&(f.pathname=f.pathname==="/"?t:ju([t,f.pathname])),(h.replace?a.replace:a.push)(f,h.state,h)},[t,a,o,i,e])}function Ui(){let{matches:e}=p.useContext(pd),t=e[e.length-1];return t?t.params:{}}function uU(e,t){let{relative:s}=t===void 0?{}:t,{future:a}=p.useContext(Wu),{matches:n}=p.useContext(pd),{pathname:i}=$i(),o=JSON.stringify(t6(n,a.v7_relativeSplatPath));return p.useMemo(()=>r6(e,JSON.parse(o),i,s==="path"),[e,o,i,s])}function Lre(e,t){return Fre(e,t)}function Fre(e,t,s,a){mx()||ba(!1);let{navigator:n}=p.useContext(Wu),{matches:i}=p.useContext(pd),o=i[i.length-1],l=o?o.params:{};o&&o.pathname;let c=o?o.pathnameBase:"/";o&&o.route;let d=$i(),h;if(t){var f;let N=typeof t=="string"?hx(t):t;c==="/"||(f=N.pathname)!=null&&f.startsWith(c)||ba(!1),h=N}else h=d;let x=h.pathname||"/",y=x;if(c!=="/"){let N=c.replace(/^\//,"").split("/");y="/"+x.replace(/^\//,"").split("/").slice(N.length).join("/")}let v=dre(e,{pathname:y}),w=Wre(v&&v.map(N=>Object.assign({},N,{params:Object.assign({},l,N.params),pathname:ju([c,n.encodeLocation?n.encodeLocation(N.pathname).pathname:N.pathname]),pathnameBase:N.pathnameBase==="/"?c:ju([c,n.encodeLocation?n.encodeLocation(N.pathnameBase).pathname:N.pathnameBase])})),i,s,a);return t&&w?p.createElement(ON.Provider,{value:{location:$p({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:uu.Pop}},w):w}function Bre(){let e=Kre(),t=Ire(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),s=e instanceof Error?e.stack:null,n={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return p.createElement(p.Fragment,null,p.createElement("h2",null,"Unexpected Application Error!"),p.createElement("h3",{style:{fontStyle:"italic"}},t),s?p.createElement("pre",{style:n},s):null,null)}const $re=p.createElement(Bre,null);class Ure extends p.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,s){return s.location!==t.location||s.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:s.error,location:s.location,revalidation:t.revalidation||s.revalidation}}componentDidCatch(t,s){console.error("React Router caught the following error during render",t,s)}render(){return this.state.error!==void 0?p.createElement(pd.Provider,{value:this.props.routeContext},p.createElement(cU.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Vre(e){let{routeContext:t,match:s,children:a}=e,n=p.useContext(s6);return n&&n.static&&n.staticContext&&(s.route.errorElement||s.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=s.route.id),p.createElement(pd.Provider,{value:t},a)}function Wre(e,t,s,a){var n;if(t===void 0&&(t=[]),s===void 0&&(s=null),a===void 0&&(a=null),e==null){var i;if(!s)return null;if(s.errors)e=s.matches;else if((i=a)!=null&&i.v7_partialHydration&&t.length===0&&!s.initialized&&s.matches.length>0)e=s.matches;else return null}let o=e,l=(n=s)==null?void 0:n.errors;if(l!=null){let h=o.findIndex(f=>f.route.id&&(l==null?void 0:l[f.route.id])!==void 0);h>=0||ba(!1),o=o.slice(0,Math.min(o.length,h+1))}let c=!1,d=-1;if(s&&a&&a.v7_partialHydration)for(let h=0;h<o.length;h++){let f=o[h];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(d=h),f.route.id){let{loaderData:x,errors:y}=s,v=f.route.loader&&x[f.route.id]===void 0&&(!y||y[f.route.id]===void 0);if(f.route.lazy||v){c=!0,d>=0?o=o.slice(0,d+1):o=[o[0]];break}}}return o.reduceRight((h,f,x)=>{let y,v=!1,w=null,N=null;s&&(y=l&&f.route.id?l[f.route.id]:void 0,w=f.route.errorElement||$re,c&&(d<0&&x===0?(Yre("route-fallback"),v=!0,N=null):d===x&&(v=!0,N=f.route.hydrateFallbackElement||null)));let k=t.concat(o.slice(0,x+1)),C=()=>{let E;return y?E=w:v?E=N:f.route.Component?E=p.createElement(f.route.Component,null):f.route.element?E=f.route.element:E=h,p.createElement(Vre,{match:f,routeContext:{outlet:h,matches:k,isDataRoute:s!=null},children:E})};return s&&(f.route.ErrorBoundary||f.route.errorElement||x===0)?p.createElement(Ure,{location:s.location,revalidation:s.revalidation,component:w,error:y,children:C(),routeContext:{outlet:null,matches:k,isDataRoute:!0}}):C()},null)}var hU=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(hU||{}),mU=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(mU||{});function zre(e){let t=p.useContext(s6);return t||ba(!1),t}function qre(e){let t=p.useContext(Ore);return t||ba(!1),t}function Hre(e){let t=p.useContext(pd);return t||ba(!1),t}function fU(e){let t=Hre(),s=t.matches[t.matches.length-1];return s.route.id||ba(!1),s.route.id}function Kre(){var e;let t=p.useContext(cU),s=qre(),a=fU();return t!==void 0?t:(e=s.errors)==null?void 0:e[a]}function Gre(){let{router:e}=zre(hU.UseNavigateStable),t=fU(mU.UseNavigateStable),s=p.useRef(!1);return dU(()=>{s.current=!0}),p.useCallback(function(n,i){i===void 0&&(i={}),s.current&&(typeof n=="number"?e.navigate(n):e.navigate(n,$p({fromRouteId:t},i)))},[e,t])}const ND={};function Yre(e,t,s){ND[e]||(ND[e]=!0)}function Xre(e,t){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function kw(e){let{to:t,replace:s,state:a,relative:n}=e;mx()||ba(!1);let{future:i,static:o}=p.useContext(Wu),{matches:l}=p.useContext(pd),{pathname:c}=$i(),d=Ut(),h=r6(t,t6(l,i.v7_relativeSplatPath),c,n==="path"),f=JSON.stringify(h);return p.useEffect(()=>d(JSON.parse(f),{replace:s,state:a,relative:n}),[d,f,n,s,a]),null}function Ge(e){ba(!1)}function Qre(e){let{basename:t="/",children:s=null,location:a,navigationType:n=uu.Pop,navigator:i,static:o=!1,future:l}=e;mx()&&ba(!1);let c=t.replace(/^\/*/,"/"),d=p.useMemo(()=>({basename:c,navigator:i,static:o,future:$p({v7_relativeSplatPath:!1},l)}),[c,l,i,o]);typeof a=="string"&&(a=hx(a));let{pathname:h="/",search:f="",hash:x="",state:y=null,key:v="default"}=a,w=p.useMemo(()=>{let N=e6(h,c);return N==null?null:{location:{pathname:N,search:f,hash:x,state:y,key:v},navigationType:n}},[c,h,f,x,y,v,n]);return w==null?null:p.createElement(Wu.Provider,{value:d},p.createElement(ON.Provider,{children:s,value:w}))}function a6(e){let{children:t,location:s}=e;return Lre(u5(t),s)}new Promise(()=>{});function u5(e,t){t===void 0&&(t=[]);let s=[];return p.Children.forEach(e,(a,n)=>{if(!p.isValidElement(a))return;let i=[...t,n];if(a.type===p.Fragment){s.push.apply(s,u5(a.props.children,i));return}a.type!==Ge&&ba(!1),!a.props.index||!a.props.children||ba(!1);let o={id:a.props.id||i.join("-"),caseSensitive:a.props.caseSensitive,element:a.props.element,Component:a.props.Component,index:a.props.index,path:a.props.path,loader:a.props.loader,action:a.props.action,errorElement:a.props.errorElement,ErrorBoundary:a.props.ErrorBoundary,hasErrorBoundary:a.props.ErrorBoundary!=null||a.props.errorElement!=null,shouldRevalidate:a.props.shouldRevalidate,handle:a.props.handle,lazy:a.props.lazy};a.props.children&&(o.children=u5(a.props.children,i)),s.push(o)}),s}/**
 * React Router DOM v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function h5(){return h5=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e},h5.apply(this,arguments)}function Zre(e,t){if(e==null)return{};var s={},a=Object.keys(e),n,i;for(i=0;i<a.length;i++)n=a[i],!(t.indexOf(n)>=0)&&(s[n]=e[n]);return s}function Jre(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function ese(e,t){return e.button===0&&(!t||t==="_self")&&!Jre(e)}function m5(e){return e===void 0&&(e=""),new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,s)=>{let a=e[s];return t.concat(Array.isArray(a)?a.map(n=>[s,n]):[[s,a]])},[]))}function tse(e,t){let s=m5(e);return t&&t.forEach((a,n)=>{s.has(n)||t.getAll(n).forEach(i=>{s.append(n,i)})}),s}const rse=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],sse="6";try{window.__reactRouterVersion=sse}catch{}const ase="startTransition",kD=wp[ase];function nse(e){let{basename:t,children:s,future:a,window:n}=e,i=p.useRef();i.current==null&&(i.current=ore({window:n,v5Compat:!0}));let o=i.current,[l,c]=p.useState({action:o.action,location:o.location}),{v7_startTransition:d}=a||{},h=p.useCallback(f=>{d&&kD?kD(()=>c(f)):c(f)},[c,d]);return p.useLayoutEffect(()=>o.listen(h),[o,h]),p.useEffect(()=>Xre(a),[a]),p.createElement(Qre,{basename:t,children:s,location:l.location,navigationType:l.action,navigator:o,future:a})}const ise=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",ose=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,xt=p.forwardRef(function(t,s){let{onClick:a,relative:n,reloadDocument:i,replace:o,state:l,target:c,to:d,preventScrollReset:h,viewTransition:f}=t,x=Zre(t,rse),{basename:y}=p.useContext(Wu),v,w=!1;if(typeof d=="string"&&ose.test(d)&&(v=d,ise))try{let E=new URL(window.location.href),_=d.startsWith("//")?new URL(E.protocol+d):new URL(d),T=e6(_.pathname,y);_.origin===E.origin&&T!=null?d=T+_.search+_.hash:w=!0}catch{}let N=Rre(d,{relative:n}),k=lse(d,{replace:o,state:l,target:c,preventScrollReset:h,relative:n,viewTransition:f});function C(E){a&&a(E),E.defaultPrevented||k(E)}return p.createElement("a",h5({},x,{href:v||N,onClick:w||i?a:C,ref:s,target:c}))});var SD;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(SD||(SD={}));var CD;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(CD||(CD={}));function lse(e,t){let{target:s,replace:a,state:n,preventScrollReset:i,relative:o,viewTransition:l}=t===void 0?{}:t,c=Ut(),d=$i(),h=uU(e,{relative:o});return p.useCallback(f=>{if(ese(f,s)){f.preventDefault();let x=a!==void 0?a:Nw(d)===Nw(h);c(e,{replace:x,state:n,preventScrollReset:i,relative:o,viewTransition:l})}},[d,c,h,a,n,s,e,i,o,l])}function bc(e){let t=p.useRef(m5(e)),s=p.useRef(!1),a=$i(),n=p.useMemo(()=>tse(a.search,s.current?null:t.current),[a.search]),i=Ut(),o=p.useCallback((l,c)=>{const d=m5(typeof l=="function"?l(n):l);s.current=!0,i("?"+d,c)},[i,n]);return[n,o]}var fx=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},cse={setTimeout:(e,t)=>setTimeout(e,t),clearTimeout:e=>clearTimeout(e),setInterval:(e,t)=>setInterval(e,t),clearInterval:e=>clearInterval(e)},eu,sE,MF,dse=(MF=class{constructor(){Bt(this,eu,cse);Bt(this,sE,!1)}setTimeoutProvider(e){ut(this,eu,e)}setTimeout(e,t){return ye(this,eu).setTimeout(e,t)}clearTimeout(e){ye(this,eu).clearTimeout(e)}setInterval(e,t){return ye(this,eu).setInterval(e,t)}clearInterval(e){ye(this,eu).clearInterval(e)}},eu=new WeakMap,sE=new WeakMap,MF),D0=new dse;function use(e){setTimeout(e,0)}var fh=typeof window>"u"||"Deno"in globalThis;function ti(){}function hse(e,t){return typeof e=="function"?e(t):e}function f5(e){return typeof e=="number"&&e>=0&&e!==1/0}function xU(e,t){return Math.max(e+(t||0)-Date.now(),0)}function Nu(e,t){return typeof e=="function"?e(t):e}function Do(e,t){return typeof e=="function"?e(t):e}function _D(e,t){const{type:s="all",exact:a,fetchStatus:n,predicate:i,queryKey:o,stale:l}=e;if(o){if(a){if(t.queryHash!==n6(o,t.options))return!1}else if(!Up(t.queryKey,o))return!1}if(s!=="all"){const c=t.isActive();if(s==="active"&&!c||s==="inactive"&&c)return!1}return!(typeof l=="boolean"&&t.isStale()!==l||n&&n!==t.state.fetchStatus||i&&!i(t))}function ED(e,t){const{exact:s,status:a,predicate:n,mutationKey:i}=e;if(i){if(!t.options.mutationKey)return!1;if(s){if(xh(t.options.mutationKey)!==xh(i))return!1}else if(!Up(t.options.mutationKey,i))return!1}return!(a&&t.state.status!==a||n&&!n(t))}function n6(e,t){return((t==null?void 0:t.queryKeyHashFn)||xh)(e)}function xh(e){return JSON.stringify(e,(t,s)=>x5(s)?Object.keys(s).sort().reduce((a,n)=>(a[n]=s[n],a),{}):s)}function Up(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?Object.keys(t).every(s=>Up(e[s],t[s])):!1}var mse=Object.prototype.hasOwnProperty;function gU(e,t){if(e===t)return e;const s=AD(e)&&AD(t);if(!s&&!(x5(e)&&x5(t)))return t;const n=(s?e:Object.keys(e)).length,i=s?t:Object.keys(t),o=i.length,l=s?new Array(o):{};let c=0;for(let d=0;d<o;d++){const h=s?d:i[d],f=e[h],x=t[h];if(f===x){l[h]=f,(s?d<n:mse.call(e,h))&&c++;continue}if(f===null||x===null||typeof f!="object"||typeof x!="object"){l[h]=x;continue}const y=gU(f,x);l[h]=y,y===f&&c++}return n===o&&c===n?e:l}function Sw(e,t){if(!t||Object.keys(e).length!==Object.keys(t).length)return!1;for(const s in e)if(e[s]!==t[s])return!1;return!0}function AD(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function x5(e){if(!PD(e))return!1;const t=e.constructor;if(t===void 0)return!0;const s=t.prototype;return!(!PD(s)||!s.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function PD(e){return Object.prototype.toString.call(e)==="[object Object]"}function fse(e){return new Promise(t=>{D0.setTimeout(t,e)})}function g5(e,t,s){return typeof s.structuralSharing=="function"?s.structuralSharing(e,t):s.structuralSharing!==!1?gU(e,t):t}function xse(e,t,s=0){const a=[...e,t];return s&&a.length>s?a.slice(1):a}function gse(e,t,s=0){const a=[t,...e];return s&&a.length>s?a.slice(0,-1):a}var i6=Symbol();function pU(e,t){return!e.queryFn&&(t!=null&&t.initialPromise)?()=>t.initialPromise:!e.queryFn||e.queryFn===i6?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}function yU(e,t){return typeof e=="function"?e(...t):!!e}var q0,tu,uf,LF,pse=(LF=class extends fx{constructor(){super();Bt(this,q0);Bt(this,tu);Bt(this,uf);ut(this,uf,t=>{if(!fh&&window.addEventListener){const s=()=>t();return window.addEventListener("visibilitychange",s,!1),()=>{window.removeEventListener("visibilitychange",s)}}})}onSubscribe(){ye(this,tu)||this.setEventListener(ye(this,uf))}onUnsubscribe(){var t;this.hasListeners()||((t=ye(this,tu))==null||t.call(this),ut(this,tu,void 0))}setEventListener(t){var s;ut(this,uf,t),(s=ye(this,tu))==null||s.call(this),ut(this,tu,t(a=>{typeof a=="boolean"?this.setFocused(a):this.onFocus()}))}setFocused(t){ye(this,q0)!==t&&(ut(this,q0,t),this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(s=>{s(t)})}isFocused(){var t;return typeof ye(this,q0)=="boolean"?ye(this,q0):((t=globalThis.document)==null?void 0:t.visibilityState)!=="hidden"}},q0=new WeakMap,tu=new WeakMap,uf=new WeakMap,LF),o6=new pse;function p5(){let e,t;const s=new Promise((n,i)=>{e=n,t=i});s.status="pending",s.catch(()=>{});function a(n){Object.assign(s,n),delete s.resolve,delete s.reject}return s.resolve=n=>{a({status:"fulfilled",value:n}),e(n)},s.reject=n=>{a({status:"rejected",reason:n}),t(n)},s}var yse=use;function bse(){let e=[],t=0,s=l=>{l()},a=l=>{l()},n=yse;const i=l=>{t?e.push(l):n(()=>{s(l)})},o=()=>{const l=e;e=[],l.length&&n(()=>{a(()=>{l.forEach(c=>{s(c)})})})};return{batch:l=>{let c;t++;try{c=l()}finally{t--,t||o()}return c},batchCalls:l=>(...c)=>{i(()=>{l(...c)})},schedule:i,setNotifyFunction:l=>{s=l},setBatchNotifyFunction:l=>{a=l},setScheduler:l=>{n=l}}}var Va=bse(),hf,ru,mf,FF,vse=(FF=class extends fx{constructor(){super();Bt(this,hf,!0);Bt(this,ru);Bt(this,mf);ut(this,mf,t=>{if(!fh&&window.addEventListener){const s=()=>t(!0),a=()=>t(!1);return window.addEventListener("online",s,!1),window.addEventListener("offline",a,!1),()=>{window.removeEventListener("online",s),window.removeEventListener("offline",a)}}})}onSubscribe(){ye(this,ru)||this.setEventListener(ye(this,mf))}onUnsubscribe(){var t;this.hasListeners()||((t=ye(this,ru))==null||t.call(this),ut(this,ru,void 0))}setEventListener(t){var s;ut(this,mf,t),(s=ye(this,ru))==null||s.call(this),ut(this,ru,t(this.setOnline.bind(this)))}setOnline(t){ye(this,hf)!==t&&(ut(this,hf,t),this.listeners.forEach(a=>{a(t)}))}isOnline(){return ye(this,hf)}},hf=new WeakMap,ru=new WeakMap,mf=new WeakMap,FF),Cw=new vse;function wse(e){return Math.min(1e3*2**e,3e4)}function bU(e){return(e??"online")==="online"?Cw.isOnline():!0}var y5=class extends Error{constructor(e){super("CancelledError"),this.revert=e==null?void 0:e.revert,this.silent=e==null?void 0:e.silent}};function vU(e){let t=!1,s=0,a;const n=p5(),i=()=>n.status!=="pending",o=w=>{var N;if(!i()){const k=new y5(w);x(k),(N=e.onCancel)==null||N.call(e,k)}},l=()=>{t=!0},c=()=>{t=!1},d=()=>o6.isFocused()&&(e.networkMode==="always"||Cw.isOnline())&&e.canRun(),h=()=>bU(e.networkMode)&&e.canRun(),f=w=>{i()||(a==null||a(),n.resolve(w))},x=w=>{i()||(a==null||a(),n.reject(w))},y=()=>new Promise(w=>{var N;a=k=>{(i()||d())&&w(k)},(N=e.onPause)==null||N.call(e)}).then(()=>{var w;a=void 0,i()||(w=e.onContinue)==null||w.call(e)}),v=()=>{if(i())return;let w;const N=s===0?e.initialPromise:void 0;try{w=N??e.fn()}catch(k){w=Promise.reject(k)}Promise.resolve(w).then(f).catch(k=>{var A;if(i())return;const C=e.retry??(fh?0:3),E=e.retryDelay??wse,_=typeof E=="function"?E(s,k):E,T=C===!0||typeof C=="number"&&s<C||typeof C=="function"&&C(s,k);if(t||!T){x(k);return}s++,(A=e.onFail)==null||A.call(e,s,k),fse(_).then(()=>d()?void 0:y()).then(()=>{t?x(k):v()})})};return{promise:n,status:()=>n.status,cancel:o,continue:()=>(a==null||a(),n),cancelRetry:l,continueRetry:c,canStart:h,start:()=>(h()?v():y().then(v),n)}}var H0,BF,wU=(BF=class{constructor(){Bt(this,H0)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),f5(this.gcTime)&&ut(this,H0,D0.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(fh?1/0:5*60*1e3))}clearGcTimeout(){ye(this,H0)&&(D0.clearTimeout(ye(this,H0)),ut(this,H0,void 0))}},H0=new WeakMap,BF),K0,ff,Io,G0,rn,Ty,Y0,ml,_c,$F,jse=($F=class extends wU{constructor(t){super();Bt(this,ml);Bt(this,K0);Bt(this,ff);Bt(this,Io);Bt(this,G0);Bt(this,rn);Bt(this,Ty);Bt(this,Y0);ut(this,Y0,!1),ut(this,Ty,t.defaultOptions),this.setOptions(t.options),this.observers=[],ut(this,G0,t.client),ut(this,Io,ye(this,G0).getQueryCache()),this.queryKey=t.queryKey,this.queryHash=t.queryHash,ut(this,K0,ID(this.options)),this.state=t.state??ye(this,K0),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var t;return(t=ye(this,rn))==null?void 0:t.promise}setOptions(t){if(this.options={...ye(this,Ty),...t},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const s=ID(this.options);s.data!==void 0&&(this.setState(TD(s.data,s.dataUpdatedAt)),ut(this,K0,s))}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&ye(this,Io).remove(this)}setData(t,s){const a=g5(this.state.data,t,this.options);return pr(this,ml,_c).call(this,{data:a,type:"success",dataUpdatedAt:s==null?void 0:s.updatedAt,manual:s==null?void 0:s.manual}),a}setState(t,s){pr(this,ml,_c).call(this,{type:"setState",state:t,setStateOptions:s})}cancel(t){var a,n;const s=(a=ye(this,rn))==null?void 0:a.promise;return(n=ye(this,rn))==null||n.cancel(t),s?s.then(ti).catch(ti):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(ye(this,K0))}isActive(){return this.observers.some(t=>Do(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===i6||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(t=>Nu(t.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(t=0){return this.state.data===void 0?!0:t==="static"?!1:this.state.isInvalidated?!0:!xU(this.state.dataUpdatedAt,t)}onFocus(){var s;const t=this.observers.find(a=>a.shouldFetchOnWindowFocus());t==null||t.refetch({cancelRefetch:!1}),(s=ye(this,rn))==null||s.continue()}onOnline(){var s;const t=this.observers.find(a=>a.shouldFetchOnReconnect());t==null||t.refetch({cancelRefetch:!1}),(s=ye(this,rn))==null||s.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),ye(this,Io).notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(s=>s!==t),this.observers.length||(ye(this,rn)&&(ye(this,Y0)?ye(this,rn).cancel({revert:!0}):ye(this,rn).cancelRetry()),this.scheduleGc()),ye(this,Io).notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||pr(this,ml,_c).call(this,{type:"invalidate"})}async fetch(t,s){var c,d,h,f,x,y,v,w,N,k,C,E;if(this.state.fetchStatus!=="idle"&&((c=ye(this,rn))==null?void 0:c.status())!=="rejected"){if(this.state.data!==void 0&&(s!=null&&s.cancelRefetch))this.cancel({silent:!0});else if(ye(this,rn))return ye(this,rn).continueRetry(),ye(this,rn).promise}if(t&&this.setOptions(t),!this.options.queryFn){const _=this.observers.find(T=>T.options.queryFn);_&&this.setOptions(_.options)}const a=new AbortController,n=_=>{Object.defineProperty(_,"signal",{enumerable:!0,get:()=>(ut(this,Y0,!0),a.signal)})},i=()=>{const _=pU(this.options,s),A=(()=>{const P={client:ye(this,G0),queryKey:this.queryKey,meta:this.meta};return n(P),P})();return ut(this,Y0,!1),this.options.persister?this.options.persister(_,A,this):_(A)},l=(()=>{const _={fetchOptions:s,options:this.options,queryKey:this.queryKey,client:ye(this,G0),state:this.state,fetchFn:i};return n(_),_})();(d=this.options.behavior)==null||d.onFetch(l,this),ut(this,ff,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((h=l.fetchOptions)==null?void 0:h.meta))&&pr(this,ml,_c).call(this,{type:"fetch",meta:(f=l.fetchOptions)==null?void 0:f.meta}),ut(this,rn,vU({initialPromise:s==null?void 0:s.initialPromise,fn:l.fetchFn,onCancel:_=>{_ instanceof y5&&_.revert&&this.setState({...ye(this,ff),fetchStatus:"idle"}),a.abort()},onFail:(_,T)=>{pr(this,ml,_c).call(this,{type:"failed",failureCount:_,error:T})},onPause:()=>{pr(this,ml,_c).call(this,{type:"pause"})},onContinue:()=>{pr(this,ml,_c).call(this,{type:"continue"})},retry:l.options.retry,retryDelay:l.options.retryDelay,networkMode:l.options.networkMode,canRun:()=>!0}));try{const _=await ye(this,rn).start();if(_===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(_),(y=(x=ye(this,Io).config).onSuccess)==null||y.call(x,_,this),(w=(v=ye(this,Io).config).onSettled)==null||w.call(v,_,this.state.error,this),_}catch(_){if(_ instanceof y5){if(_.silent)return ye(this,rn).promise;if(_.revert){if(this.state.data===void 0)throw _;return this.state.data}}throw pr(this,ml,_c).call(this,{type:"error",error:_}),(k=(N=ye(this,Io).config).onError)==null||k.call(N,_,this),(E=(C=ye(this,Io).config).onSettled)==null||E.call(C,this.state.data,_,this),_}finally{this.scheduleGc()}}},K0=new WeakMap,ff=new WeakMap,Io=new WeakMap,G0=new WeakMap,rn=new WeakMap,Ty=new WeakMap,Y0=new WeakMap,ml=new WeakSet,_c=function(t){const s=a=>{switch(t.type){case"failed":return{...a,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...a,fetchStatus:"paused"};case"continue":return{...a,fetchStatus:"fetching"};case"fetch":return{...a,...jU(a.data,this.options),fetchMeta:t.meta??null};case"success":const n={...a,...TD(t.data,t.dataUpdatedAt),dataUpdateCount:a.dataUpdateCount+1,...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return ut(this,ff,t.manual?n:void 0),n;case"error":const i=t.error;return{...a,error:i,errorUpdateCount:a.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:a.fetchFailureCount+1,fetchFailureReason:i,fetchStatus:"idle",status:"error"};case"invalidate":return{...a,isInvalidated:!0};case"setState":return{...a,...t.state}}};this.state=s(this.state),Va.batch(()=>{this.observers.forEach(a=>{a.onQueryUpdate()}),ye(this,Io).notify({query:this,type:"updated",action:t})})},$F);function jU(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:bU(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function TD(e,t){return{data:e,dataUpdatedAt:t??Date.now(),error:null,isInvalidated:!1,status:"success"}}function ID(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,s=t!==void 0,a=s?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:s?a??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:s?"success":"pending",fetchStatus:"idle"}}var ji,Er,Iy,Xn,X0,xf,Rc,su,Dy,gf,pf,Q0,Z0,au,yf,Zr,Rg,b5,v5,w5,j5,N5,k5,S5,NU,UF,Nse=(UF=class extends fx{constructor(t,s){super();Bt(this,Zr);Bt(this,ji);Bt(this,Er);Bt(this,Iy);Bt(this,Xn);Bt(this,X0);Bt(this,xf);Bt(this,Rc);Bt(this,su);Bt(this,Dy);Bt(this,gf);Bt(this,pf);Bt(this,Q0);Bt(this,Z0);Bt(this,au);Bt(this,yf,new Set);this.options=s,ut(this,ji,t),ut(this,su,null),ut(this,Rc,p5()),this.bindMethods(),this.setOptions(s)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(ye(this,Er).addObserver(this),DD(ye(this,Er),this.options)?pr(this,Zr,Rg).call(this):this.updateResult(),pr(this,Zr,j5).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return C5(ye(this,Er),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return C5(ye(this,Er),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,pr(this,Zr,N5).call(this),pr(this,Zr,k5).call(this),ye(this,Er).removeObserver(this)}setOptions(t){const s=this.options,a=ye(this,Er);if(this.options=ye(this,ji).defaultQueryOptions(t),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof Do(this.options.enabled,ye(this,Er))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");pr(this,Zr,S5).call(this),ye(this,Er).setOptions(this.options),s._defaulted&&!Sw(this.options,s)&&ye(this,ji).getQueryCache().notify({type:"observerOptionsUpdated",query:ye(this,Er),observer:this});const n=this.hasListeners();n&&OD(ye(this,Er),a,this.options,s)&&pr(this,Zr,Rg).call(this),this.updateResult(),n&&(ye(this,Er)!==a||Do(this.options.enabled,ye(this,Er))!==Do(s.enabled,ye(this,Er))||Nu(this.options.staleTime,ye(this,Er))!==Nu(s.staleTime,ye(this,Er)))&&pr(this,Zr,b5).call(this);const i=pr(this,Zr,v5).call(this);n&&(ye(this,Er)!==a||Do(this.options.enabled,ye(this,Er))!==Do(s.enabled,ye(this,Er))||i!==ye(this,au))&&pr(this,Zr,w5).call(this,i)}getOptimisticResult(t){const s=ye(this,ji).getQueryCache().build(ye(this,ji),t),a=this.createResult(s,t);return Sse(this,a)&&(ut(this,Xn,a),ut(this,xf,this.options),ut(this,X0,ye(this,Er).state)),a}getCurrentResult(){return ye(this,Xn)}trackResult(t,s){return new Proxy(t,{get:(a,n)=>(this.trackProp(n),s==null||s(n),n==="promise"&&(this.trackProp("data"),!this.options.experimental_prefetchInRender&&ye(this,Rc).status==="pending"&&ye(this,Rc).reject(new Error("experimental_prefetchInRender feature flag is not enabled"))),Reflect.get(a,n))})}trackProp(t){ye(this,yf).add(t)}getCurrentQuery(){return ye(this,Er)}refetch({...t}={}){return this.fetch({...t})}fetchOptimistic(t){const s=ye(this,ji).defaultQueryOptions(t),a=ye(this,ji).getQueryCache().build(ye(this,ji),s);return a.fetch().then(()=>this.createResult(a,s))}fetch(t){return pr(this,Zr,Rg).call(this,{...t,cancelRefetch:t.cancelRefetch??!0}).then(()=>(this.updateResult(),ye(this,Xn)))}createResult(t,s){var R;const a=ye(this,Er),n=this.options,i=ye(this,Xn),o=ye(this,X0),l=ye(this,xf),d=t!==a?t.state:ye(this,Iy),{state:h}=t;let f={...h},x=!1,y;if(s._optimisticResults){const $=this.hasListeners(),W=!$&&DD(t,s),I=$&&OD(t,a,s,n);(W||I)&&(f={...f,...jU(h.data,t.options)}),s._optimisticResults==="isRestoring"&&(f.fetchStatus="idle")}let{error:v,errorUpdatedAt:w,status:N}=f;y=f.data;let k=!1;if(s.placeholderData!==void 0&&y===void 0&&N==="pending"){let $;i!=null&&i.isPlaceholderData&&s.placeholderData===(l==null?void 0:l.placeholderData)?($=i.data,k=!0):$=typeof s.placeholderData=="function"?s.placeholderData((R=ye(this,pf))==null?void 0:R.state.data,ye(this,pf)):s.placeholderData,$!==void 0&&(N="success",y=g5(i==null?void 0:i.data,$,s),x=!0)}if(s.select&&y!==void 0&&!k)if(i&&y===(o==null?void 0:o.data)&&s.select===ye(this,Dy))y=ye(this,gf);else try{ut(this,Dy,s.select),y=s.select(y),y=g5(i==null?void 0:i.data,y,s),ut(this,gf,y),ut(this,su,null)}catch($){ut(this,su,$)}ye(this,su)&&(v=ye(this,su),y=ye(this,gf),w=Date.now(),N="error");const C=f.fetchStatus==="fetching",E=N==="pending",_=N==="error",T=E&&C,A=y!==void 0,M={status:N,fetchStatus:f.fetchStatus,isPending:E,isSuccess:N==="success",isError:_,isInitialLoading:T,isLoading:T,data:y,dataUpdatedAt:f.dataUpdatedAt,error:v,errorUpdatedAt:w,failureCount:f.fetchFailureCount,failureReason:f.fetchFailureReason,errorUpdateCount:f.errorUpdateCount,isFetched:f.dataUpdateCount>0||f.errorUpdateCount>0,isFetchedAfterMount:f.dataUpdateCount>d.dataUpdateCount||f.errorUpdateCount>d.errorUpdateCount,isFetching:C,isRefetching:C&&!E,isLoadingError:_&&!A,isPaused:f.fetchStatus==="paused",isPlaceholderData:x,isRefetchError:_&&A,isStale:l6(t,s),refetch:this.refetch,promise:ye(this,Rc),isEnabled:Do(s.enabled,t)!==!1};if(this.options.experimental_prefetchInRender){const $=B=>{M.status==="error"?B.reject(M.error):M.data!==void 0&&B.resolve(M.data)},W=()=>{const B=ut(this,Rc,M.promise=p5());$(B)},I=ye(this,Rc);switch(I.status){case"pending":t.queryHash===a.queryHash&&$(I);break;case"fulfilled":(M.status==="error"||M.data!==I.value)&&W();break;case"rejected":(M.status!=="error"||M.error!==I.reason)&&W();break}}return M}updateResult(){const t=ye(this,Xn),s=this.createResult(ye(this,Er),this.options);if(ut(this,X0,ye(this,Er).state),ut(this,xf,this.options),ye(this,X0).data!==void 0&&ut(this,pf,ye(this,Er)),Sw(s,t))return;ut(this,Xn,s);const a=()=>{if(!t)return!0;const{notifyOnChangeProps:n}=this.options,i=typeof n=="function"?n():n;if(i==="all"||!i&&!ye(this,yf).size)return!0;const o=new Set(i??ye(this,yf));return this.options.throwOnError&&o.add("error"),Object.keys(ye(this,Xn)).some(l=>{const c=l;return ye(this,Xn)[c]!==t[c]&&o.has(c)})};pr(this,Zr,NU).call(this,{listeners:a()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&pr(this,Zr,j5).call(this)}},ji=new WeakMap,Er=new WeakMap,Iy=new WeakMap,Xn=new WeakMap,X0=new WeakMap,xf=new WeakMap,Rc=new WeakMap,su=new WeakMap,Dy=new WeakMap,gf=new WeakMap,pf=new WeakMap,Q0=new WeakMap,Z0=new WeakMap,au=new WeakMap,yf=new WeakMap,Zr=new WeakSet,Rg=function(t){pr(this,Zr,S5).call(this);let s=ye(this,Er).fetch(this.options,t);return t!=null&&t.throwOnError||(s=s.catch(ti)),s},b5=function(){pr(this,Zr,N5).call(this);const t=Nu(this.options.staleTime,ye(this,Er));if(fh||ye(this,Xn).isStale||!f5(t))return;const a=xU(ye(this,Xn).dataUpdatedAt,t)+1;ut(this,Q0,D0.setTimeout(()=>{ye(this,Xn).isStale||this.updateResult()},a))},v5=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(ye(this,Er)):this.options.refetchInterval)??!1},w5=function(t){pr(this,Zr,k5).call(this),ut(this,au,t),!(fh||Do(this.options.enabled,ye(this,Er))===!1||!f5(ye(this,au))||ye(this,au)===0)&&ut(this,Z0,D0.setInterval(()=>{(this.options.refetchIntervalInBackground||o6.isFocused())&&pr(this,Zr,Rg).call(this)},ye(this,au)))},j5=function(){pr(this,Zr,b5).call(this),pr(this,Zr,w5).call(this,pr(this,Zr,v5).call(this))},N5=function(){ye(this,Q0)&&(D0.clearTimeout(ye(this,Q0)),ut(this,Q0,void 0))},k5=function(){ye(this,Z0)&&(D0.clearInterval(ye(this,Z0)),ut(this,Z0,void 0))},S5=function(){const t=ye(this,ji).getQueryCache().build(ye(this,ji),this.options);if(t===ye(this,Er))return;const s=ye(this,Er);ut(this,Er,t),ut(this,Iy,t.state),this.hasListeners()&&(s==null||s.removeObserver(this),t.addObserver(this))},NU=function(t){Va.batch(()=>{t.listeners&&this.listeners.forEach(s=>{s(ye(this,Xn))}),ye(this,ji).getQueryCache().notify({query:ye(this,Er),type:"observerResultsUpdated"})})},UF);function kse(e,t){return Do(t.enabled,e)!==!1&&e.state.data===void 0&&!(e.state.status==="error"&&t.retryOnMount===!1)}function DD(e,t){return kse(e,t)||e.state.data!==void 0&&C5(e,t,t.refetchOnMount)}function C5(e,t,s){if(Do(t.enabled,e)!==!1&&Nu(t.staleTime,e)!=="static"){const a=typeof s=="function"?s(e):s;return a==="always"||a!==!1&&l6(e,t)}return!1}function OD(e,t,s,a){return(e!==t||Do(a.enabled,e)===!1)&&(!s.suspense||e.state.status!=="error")&&l6(e,s)}function l6(e,t){return Do(t.enabled,e)!==!1&&e.isStaleByTime(Nu(t.staleTime,e))}function Sse(e,t){return!Sw(e.getCurrentResult(),t)}function RD(e){return{onFetch:(t,s)=>{var h,f,x,y,v;const a=t.options,n=(x=(f=(h=t.fetchOptions)==null?void 0:h.meta)==null?void 0:f.fetchMore)==null?void 0:x.direction,i=((y=t.state.data)==null?void 0:y.pages)||[],o=((v=t.state.data)==null?void 0:v.pageParams)||[];let l={pages:[],pageParams:[]},c=0;const d=async()=>{let w=!1;const N=E=>{Object.defineProperty(E,"signal",{enumerable:!0,get:()=>(t.signal.aborted?w=!0:t.signal.addEventListener("abort",()=>{w=!0}),t.signal)})},k=pU(t.options,t.fetchOptions),C=async(E,_,T)=>{if(w)return Promise.reject();if(_==null&&E.pages.length)return Promise.resolve(E);const P=(()=>{const W={client:t.client,queryKey:t.queryKey,pageParam:_,direction:T?"backward":"forward",meta:t.options.meta};return N(W),W})(),M=await k(P),{maxPages:R}=t.options,$=T?gse:xse;return{pages:$(E.pages,M,R),pageParams:$(E.pageParams,_,R)}};if(n&&i.length){const E=n==="backward",_=E?Cse:MD,T={pages:i,pageParams:o},A=_(a,T);l=await C(T,A,E)}else{const E=e??i.length;do{const _=c===0?o[0]??a.initialPageParam:MD(a,l);if(c>0&&_==null)break;l=await C(l,_),c++}while(c<E)}return l};t.options.persister?t.fetchFn=()=>{var w,N;return(N=(w=t.options).persister)==null?void 0:N.call(w,d,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},s)}:t.fetchFn=d}}}function MD(e,{pages:t,pageParams:s}){const a=t.length-1;return t.length>0?e.getNextPageParam(t[a],t,s[a],s):void 0}function Cse(e,{pages:t,pageParams:s}){var a;return t.length>0?(a=e.getPreviousPageParam)==null?void 0:a.call(e,t[0],t,s[0],s):void 0}var Oy,Hl,Qn,J0,Kl,$d,VF,_se=(VF=class extends wU{constructor(t){super();Bt(this,Kl);Bt(this,Oy);Bt(this,Hl);Bt(this,Qn);Bt(this,J0);ut(this,Oy,t.client),this.mutationId=t.mutationId,ut(this,Qn,t.mutationCache),ut(this,Hl,[]),this.state=t.state||kU(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){ye(this,Hl).includes(t)||(ye(this,Hl).push(t),this.clearGcTimeout(),ye(this,Qn).notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){ut(this,Hl,ye(this,Hl).filter(s=>s!==t)),this.scheduleGc(),ye(this,Qn).notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){ye(this,Hl).length||(this.state.status==="pending"?this.scheduleGc():ye(this,Qn).remove(this))}continue(){var t;return((t=ye(this,J0))==null?void 0:t.continue())??this.execute(this.state.variables)}async execute(t){var o,l,c,d,h,f,x,y,v,w,N,k,C,E,_,T,A,P,M,R;const s=()=>{pr(this,Kl,$d).call(this,{type:"continue"})},a={client:ye(this,Oy),meta:this.options.meta,mutationKey:this.options.mutationKey};ut(this,J0,vU({fn:()=>this.options.mutationFn?this.options.mutationFn(t,a):Promise.reject(new Error("No mutationFn found")),onFail:($,W)=>{pr(this,Kl,$d).call(this,{type:"failed",failureCount:$,error:W})},onPause:()=>{pr(this,Kl,$d).call(this,{type:"pause"})},onContinue:s,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>ye(this,Qn).canRun(this)}));const n=this.state.status==="pending",i=!ye(this,J0).canStart();try{if(n)s();else{pr(this,Kl,$d).call(this,{type:"pending",variables:t,isPaused:i}),await((l=(o=ye(this,Qn).config).onMutate)==null?void 0:l.call(o,t,this,a));const W=await((d=(c=this.options).onMutate)==null?void 0:d.call(c,t,a));W!==this.state.context&&pr(this,Kl,$d).call(this,{type:"pending",context:W,variables:t,isPaused:i})}const $=await ye(this,J0).start();return await((f=(h=ye(this,Qn).config).onSuccess)==null?void 0:f.call(h,$,t,this.state.context,this,a)),await((y=(x=this.options).onSuccess)==null?void 0:y.call(x,$,t,this.state.context,a)),await((w=(v=ye(this,Qn).config).onSettled)==null?void 0:w.call(v,$,null,this.state.variables,this.state.context,this,a)),await((k=(N=this.options).onSettled)==null?void 0:k.call(N,$,null,t,this.state.context,a)),pr(this,Kl,$d).call(this,{type:"success",data:$}),$}catch($){try{throw await((E=(C=ye(this,Qn).config).onError)==null?void 0:E.call(C,$,t,this.state.context,this,a)),await((T=(_=this.options).onError)==null?void 0:T.call(_,$,t,this.state.context,a)),await((P=(A=ye(this,Qn).config).onSettled)==null?void 0:P.call(A,void 0,$,this.state.variables,this.state.context,this,a)),await((R=(M=this.options).onSettled)==null?void 0:R.call(M,void 0,$,t,this.state.context,a)),$}finally{pr(this,Kl,$d).call(this,{type:"error",error:$})}}finally{ye(this,Qn).runNext(this)}}},Oy=new WeakMap,Hl=new WeakMap,Qn=new WeakMap,J0=new WeakMap,Kl=new WeakSet,$d=function(t){const s=a=>{switch(t.type){case"failed":return{...a,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...a,isPaused:!0};case"continue":return{...a,isPaused:!1};case"pending":return{...a,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...a,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...a,data:void 0,error:t.error,failureCount:a.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=s(this.state),Va.batch(()=>{ye(this,Hl).forEach(a=>{a.onMutationUpdate(t)}),ye(this,Qn).notify({mutation:this,type:"updated",action:t})})},VF);function kU(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Mc,fl,Ry,WF,Ese=(WF=class extends fx{constructor(t={}){super();Bt(this,Mc);Bt(this,fl);Bt(this,Ry);this.config=t,ut(this,Mc,new Set),ut(this,fl,new Map),ut(this,Ry,0)}build(t,s,a){const n=new _se({client:t,mutationCache:this,mutationId:++Wb(this,Ry)._,options:t.defaultMutationOptions(s),state:a});return this.add(n),n}add(t){ye(this,Mc).add(t);const s=lv(t);if(typeof s=="string"){const a=ye(this,fl).get(s);a?a.push(t):ye(this,fl).set(s,[t])}this.notify({type:"added",mutation:t})}remove(t){if(ye(this,Mc).delete(t)){const s=lv(t);if(typeof s=="string"){const a=ye(this,fl).get(s);if(a)if(a.length>1){const n=a.indexOf(t);n!==-1&&a.splice(n,1)}else a[0]===t&&ye(this,fl).delete(s)}}this.notify({type:"removed",mutation:t})}canRun(t){const s=lv(t);if(typeof s=="string"){const a=ye(this,fl).get(s),n=a==null?void 0:a.find(i=>i.state.status==="pending");return!n||n===t}else return!0}runNext(t){var a;const s=lv(t);if(typeof s=="string"){const n=(a=ye(this,fl).get(s))==null?void 0:a.find(i=>i!==t&&i.state.isPaused);return(n==null?void 0:n.continue())??Promise.resolve()}else return Promise.resolve()}clear(){Va.batch(()=>{ye(this,Mc).forEach(t=>{this.notify({type:"removed",mutation:t})}),ye(this,Mc).clear(),ye(this,fl).clear()})}getAll(){return Array.from(ye(this,Mc))}find(t){const s={exact:!0,...t};return this.getAll().find(a=>ED(s,a))}findAll(t={}){return this.getAll().filter(s=>ED(t,s))}notify(t){Va.batch(()=>{this.listeners.forEach(s=>{s(t)})})}resumePausedMutations(){const t=this.getAll().filter(s=>s.state.isPaused);return Va.batch(()=>Promise.all(t.map(s=>s.continue().catch(ti))))}},Mc=new WeakMap,fl=new WeakMap,Ry=new WeakMap,WF);function lv(e){var t;return(t=e.options.scope)==null?void 0:t.id}var Lc,nu,Ni,Fc,Xc,D1,_5,zF,Ase=(zF=class extends fx{constructor(s,a){super();Bt(this,Xc);Bt(this,Lc);Bt(this,nu);Bt(this,Ni);Bt(this,Fc);ut(this,Lc,s),this.setOptions(a),this.bindMethods(),pr(this,Xc,D1).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(s){var n;const a=this.options;this.options=ye(this,Lc).defaultMutationOptions(s),Sw(this.options,a)||ye(this,Lc).getMutationCache().notify({type:"observerOptionsUpdated",mutation:ye(this,Ni),observer:this}),a!=null&&a.mutationKey&&this.options.mutationKey&&xh(a.mutationKey)!==xh(this.options.mutationKey)?this.reset():((n=ye(this,Ni))==null?void 0:n.state.status)==="pending"&&ye(this,Ni).setOptions(this.options)}onUnsubscribe(){var s;this.hasListeners()||(s=ye(this,Ni))==null||s.removeObserver(this)}onMutationUpdate(s){pr(this,Xc,D1).call(this),pr(this,Xc,_5).call(this,s)}getCurrentResult(){return ye(this,nu)}reset(){var s;(s=ye(this,Ni))==null||s.removeObserver(this),ut(this,Ni,void 0),pr(this,Xc,D1).call(this),pr(this,Xc,_5).call(this)}mutate(s,a){var n;return ut(this,Fc,a),(n=ye(this,Ni))==null||n.removeObserver(this),ut(this,Ni,ye(this,Lc).getMutationCache().build(ye(this,Lc),this.options)),ye(this,Ni).addObserver(this),ye(this,Ni).execute(s)}},Lc=new WeakMap,nu=new WeakMap,Ni=new WeakMap,Fc=new WeakMap,Xc=new WeakSet,D1=function(){var a;const s=((a=ye(this,Ni))==null?void 0:a.state)??kU();ut(this,nu,{...s,isPending:s.status==="pending",isSuccess:s.status==="success",isError:s.status==="error",isIdle:s.status==="idle",mutate:this.mutate,reset:this.reset})},_5=function(s){Va.batch(()=>{var a,n,i,o,l,c,d,h;if(ye(this,Fc)&&this.hasListeners()){const f=ye(this,nu).variables,x=ye(this,nu).context,y={client:ye(this,Lc),meta:this.options.meta,mutationKey:this.options.mutationKey};(s==null?void 0:s.type)==="success"?((n=(a=ye(this,Fc)).onSuccess)==null||n.call(a,s.data,f,x,y),(o=(i=ye(this,Fc)).onSettled)==null||o.call(i,s.data,null,f,x,y)):(s==null?void 0:s.type)==="error"&&((c=(l=ye(this,Fc)).onError)==null||c.call(l,s.error,f,x,y),(h=(d=ye(this,Fc)).onSettled)==null||h.call(d,void 0,s.error,f,x,y))}this.listeners.forEach(f=>{f(ye(this,nu))})})},zF),Gl,qF,Pse=(qF=class extends fx{constructor(t={}){super();Bt(this,Gl);this.config=t,ut(this,Gl,new Map)}build(t,s,a){const n=s.queryKey,i=s.queryHash??n6(n,s);let o=this.get(i);return o||(o=new jse({client:t,queryKey:n,queryHash:i,options:t.defaultQueryOptions(s),state:a,defaultOptions:t.getQueryDefaults(n)}),this.add(o)),o}add(t){ye(this,Gl).has(t.queryHash)||(ye(this,Gl).set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const s=ye(this,Gl).get(t.queryHash);s&&(t.destroy(),s===t&&ye(this,Gl).delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){Va.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return ye(this,Gl).get(t)}getAll(){return[...ye(this,Gl).values()]}find(t){const s={exact:!0,...t};return this.getAll().find(a=>_D(s,a))}findAll(t={}){const s=this.getAll();return Object.keys(t).length>0?s.filter(a=>_D(t,a)):s}notify(t){Va.batch(()=>{this.listeners.forEach(s=>{s(t)})})}onFocus(){Va.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){Va.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},Gl=new WeakMap,qF),na,iu,ou,bf,vf,lu,wf,jf,HF,Tse=(HF=class{constructor(e={}){Bt(this,na);Bt(this,iu);Bt(this,ou);Bt(this,bf);Bt(this,vf);Bt(this,lu);Bt(this,wf);Bt(this,jf);ut(this,na,e.queryCache||new Pse),ut(this,iu,e.mutationCache||new Ese),ut(this,ou,e.defaultOptions||{}),ut(this,bf,new Map),ut(this,vf,new Map),ut(this,lu,0)}mount(){Wb(this,lu)._++,ye(this,lu)===1&&(ut(this,wf,o6.subscribe(async e=>{e&&(await this.resumePausedMutations(),ye(this,na).onFocus())})),ut(this,jf,Cw.subscribe(async e=>{e&&(await this.resumePausedMutations(),ye(this,na).onOnline())})))}unmount(){var e,t;Wb(this,lu)._--,ye(this,lu)===0&&((e=ye(this,wf))==null||e.call(this),ut(this,wf,void 0),(t=ye(this,jf))==null||t.call(this),ut(this,jf,void 0))}isFetching(e){return ye(this,na).findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return ye(this,iu).findAll({...e,status:"pending"}).length}getQueryData(e){var s;const t=this.defaultQueryOptions({queryKey:e});return(s=ye(this,na).get(t.queryHash))==null?void 0:s.state.data}ensureQueryData(e){const t=this.defaultQueryOptions(e),s=ye(this,na).build(this,t),a=s.state.data;return a===void 0?this.fetchQuery(e):(e.revalidateIfStale&&s.isStaleByTime(Nu(t.staleTime,s))&&this.prefetchQuery(t),Promise.resolve(a))}getQueriesData(e){return ye(this,na).findAll(e).map(({queryKey:t,state:s})=>{const a=s.data;return[t,a]})}setQueryData(e,t,s){const a=this.defaultQueryOptions({queryKey:e}),n=ye(this,na).get(a.queryHash),i=n==null?void 0:n.state.data,o=hse(t,i);if(o!==void 0)return ye(this,na).build(this,a).setData(o,{...s,manual:!0})}setQueriesData(e,t,s){return Va.batch(()=>ye(this,na).findAll(e).map(({queryKey:a})=>[a,this.setQueryData(a,t,s)]))}getQueryState(e){var s;const t=this.defaultQueryOptions({queryKey:e});return(s=ye(this,na).get(t.queryHash))==null?void 0:s.state}removeQueries(e){const t=ye(this,na);Va.batch(()=>{t.findAll(e).forEach(s=>{t.remove(s)})})}resetQueries(e,t){const s=ye(this,na);return Va.batch(()=>(s.findAll(e).forEach(a=>{a.reset()}),this.refetchQueries({type:"active",...e},t)))}cancelQueries(e,t={}){const s={revert:!0,...t},a=Va.batch(()=>ye(this,na).findAll(e).map(n=>n.cancel(s)));return Promise.all(a).then(ti).catch(ti)}invalidateQueries(e,t={}){return Va.batch(()=>(ye(this,na).findAll(e).forEach(s=>{s.invalidate()}),(e==null?void 0:e.refetchType)==="none"?Promise.resolve():this.refetchQueries({...e,type:(e==null?void 0:e.refetchType)??(e==null?void 0:e.type)??"active"},t)))}refetchQueries(e,t={}){const s={...t,cancelRefetch:t.cancelRefetch??!0},a=Va.batch(()=>ye(this,na).findAll(e).filter(n=>!n.isDisabled()&&!n.isStatic()).map(n=>{let i=n.fetch(void 0,s);return s.throwOnError||(i=i.catch(ti)),n.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(a).then(ti)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const s=ye(this,na).build(this,t);return s.isStaleByTime(Nu(t.staleTime,s))?s.fetch(t):Promise.resolve(s.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(ti).catch(ti)}fetchInfiniteQuery(e){return e.behavior=RD(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(ti).catch(ti)}ensureInfiniteQueryData(e){return e.behavior=RD(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return Cw.isOnline()?ye(this,iu).resumePausedMutations():Promise.resolve()}getQueryCache(){return ye(this,na)}getMutationCache(){return ye(this,iu)}getDefaultOptions(){return ye(this,ou)}setDefaultOptions(e){ut(this,ou,e)}setQueryDefaults(e,t){ye(this,bf).set(xh(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...ye(this,bf).values()],s={};return t.forEach(a=>{Up(e,a.queryKey)&&Object.assign(s,a.defaultOptions)}),s}setMutationDefaults(e,t){ye(this,vf).set(xh(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...ye(this,vf).values()],s={};return t.forEach(a=>{Up(e,a.mutationKey)&&Object.assign(s,a.defaultOptions)}),s}defaultQueryOptions(e){if(e._defaulted)return e;const t={...ye(this,ou).queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=n6(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===i6&&(t.enabled=!1),t}defaultMutationOptions(e){return e!=null&&e._defaulted?e:{...ye(this,ou).mutations,...(e==null?void 0:e.mutationKey)&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){ye(this,na).clear(),ye(this,iu).clear()}},na=new WeakMap,iu=new WeakMap,ou=new WeakMap,bf=new WeakMap,vf=new WeakMap,lu=new WeakMap,wf=new WeakMap,jf=new WeakMap,HF),SU=p.createContext(void 0),cs=e=>{const t=p.useContext(SU);if(!t)throw new Error("No QueryClient set, use QueryClientProvider to set one");return t},Ise=({client:e,children:t})=>(p.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),r.jsx(SU.Provider,{value:e,children:t})),CU=p.createContext(!1),Dse=()=>p.useContext(CU);CU.Provider;function Ose(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}var Rse=p.createContext(Ose()),Mse=()=>p.useContext(Rse),Lse=(e,t)=>{(e.suspense||e.throwOnError||e.experimental_prefetchInRender)&&(t.isReset()||(e.retryOnMount=!1))},Fse=e=>{p.useEffect(()=>{e.clearReset()},[e])},Bse=({result:e,errorResetBoundary:t,throwOnError:s,query:a,suspense:n})=>e.isError&&!t.isReset()&&!e.isFetching&&a&&(n&&e.data===void 0||yU(s,[e.error,a])),$se=e=>{if(e.suspense){const s=n=>n==="static"?n:Math.max(n??1e3,1e3),a=e.staleTime;e.staleTime=typeof a=="function"?(...n)=>s(a(...n)):s(a),typeof e.gcTime=="number"&&(e.gcTime=Math.max(e.gcTime,1e3))}},Use=(e,t)=>e.isLoading&&e.isFetching&&!t,Vse=(e,t)=>(e==null?void 0:e.suspense)&&t.isPending,LD=(e,t,s)=>t.fetchOptimistic(e).catch(()=>{s.clearReset()});function Wse(e,t,s){var f,x,y,v,w;const a=Dse(),n=Mse(),i=cs(),o=i.defaultQueryOptions(e);(x=(f=i.getDefaultOptions().queries)==null?void 0:f._experimental_beforeQuery)==null||x.call(f,o),o._optimisticResults=a?"isRestoring":"optimistic",$se(o),Lse(o,n),Fse(n);const l=!i.getQueryCache().get(o.queryHash),[c]=p.useState(()=>new t(i,o)),d=c.getOptimisticResult(o),h=!a&&e.subscribed!==!1;if(p.useSyncExternalStore(p.useCallback(N=>{const k=h?c.subscribe(Va.batchCalls(N)):ti;return c.updateResult(),k},[c,h]),()=>c.getCurrentResult(),()=>c.getCurrentResult()),p.useEffect(()=>{c.setOptions(o)},[o,c]),Vse(o,d))throw LD(o,c,n);if(Bse({result:d,errorResetBoundary:n,throwOnError:o.throwOnError,query:i.getQueryCache().get(o.queryHash),suspense:o.suspense}))throw d.error;if((v=(y=i.getDefaultOptions().queries)==null?void 0:y._experimental_afterQuery)==null||v.call(y,o,d),o.experimental_prefetchInRender&&!fh&&Use(d,a)){const N=l?LD(o,c,n):(w=i.getQueryCache().get(o.queryHash))==null?void 0:w.promise;N==null||N.catch(ti).finally(()=>{c.updateResult()})}return o.notifyOnChangeProps?d:c.trackResult(d)}function Rn(e,t){return Wse(e,Nse)}function hs(e,t){const s=cs(),[a]=p.useState(()=>new Ase(s,e));p.useEffect(()=>{a.setOptions(e)},[a,e]);const n=p.useSyncExternalStore(p.useCallback(o=>a.subscribe(Va.batchCalls(o)),[a]),()=>a.getCurrentResult(),()=>a.getCurrentResult()),i=p.useCallback((o,l)=>{a.mutate(o,l).catch(ti)},[a]);if(n.error&&yU(a.options.throwOnError,[n.error]))throw n.error;return{...n,mutate:i,mutateAsync:n.mutate}}var E5=function(e,t){return E5=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,a){s.__proto__=a}||function(s,a){for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(s[n]=a[n])},E5(e,t)};function _U(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");E5(e,t);function s(){this.constructor=e}e.prototype=t===null?Object.create(t):(s.prototype=t.prototype,new s)}var _w=function(){return _w=Object.assign||function(t){for(var s,a=1,n=arguments.length;a<n;a++){s=arguments[a];for(var i in s)Object.prototype.hasOwnProperty.call(s,i)&&(t[i]=s[i])}return t},_w.apply(this,arguments)};function xx(e,t){var s={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(s[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,a=Object.getOwnPropertySymbols(e);n<a.length;n++)t.indexOf(a[n])<0&&Object.prototype.propertyIsEnumerable.call(e,a[n])&&(s[a[n]]=e[a[n]]);return s}function EU(e,t,s,a){var n=arguments.length,i=n<3?t:a===null?a=Object.getOwnPropertyDescriptor(t,s):a,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(e,t,s,a);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(i=(n<3?o(i):n>3?o(t,s,i):o(t,s))||i);return n>3&&i&&Object.defineProperty(t,s,i),i}function AU(e,t){return function(s,a){t(s,a,e)}}function PU(e,t,s,a,n,i){function o(k){if(k!==void 0&&typeof k!="function")throw new TypeError("Function expected");return k}for(var l=a.kind,c=l==="getter"?"get":l==="setter"?"set":"value",d=!t&&e?a.static?e:e.prototype:null,h=t||(d?Object.getOwnPropertyDescriptor(d,a.name):{}),f,x=!1,y=s.length-1;y>=0;y--){var v={};for(var w in a)v[w]=w==="access"?{}:a[w];for(var w in a.access)v.access[w]=a.access[w];v.addInitializer=function(k){if(x)throw new TypeError("Cannot add initializers after decoration has completed");i.push(o(k||null))};var N=(0,s[y])(l==="accessor"?{get:h.get,set:h.set}:h[c],v);if(l==="accessor"){if(N===void 0)continue;if(N===null||typeof N!="object")throw new TypeError("Object expected");(f=o(N.get))&&(h.get=f),(f=o(N.set))&&(h.set=f),(f=o(N.init))&&n.unshift(f)}else(f=o(N))&&(l==="field"?n.unshift(f):h[c]=f)}d&&Object.defineProperty(d,a.name,h),x=!0}function TU(e,t,s){for(var a=arguments.length>2,n=0;n<t.length;n++)s=a?t[n].call(e,s):t[n].call(e);return a?s:void 0}function IU(e){return typeof e=="symbol"?e:"".concat(e)}function DU(e,t,s){return typeof t=="symbol"&&(t=t.description?"[".concat(t.description,"]"):""),Object.defineProperty(e,"name",{configurable:!0,value:s?"".concat(s," ",t):t})}function OU(e,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(e,t)}function kt(e,t,s,a){function n(i){return i instanceof s?i:new s(function(o){o(i)})}return new(s||(s=Promise))(function(i,o){function l(h){try{d(a.next(h))}catch(f){o(f)}}function c(h){try{d(a.throw(h))}catch(f){o(f)}}function d(h){h.done?i(h.value):n(h.value).then(l,c)}d((a=a.apply(e,t||[])).next())})}function RU(e,t){var s={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},a,n,i,o=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return o.next=l(0),o.throw=l(1),o.return=l(2),typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function l(d){return function(h){return c([d,h])}}function c(d){if(a)throw new TypeError("Generator is already executing.");for(;o&&(o=0,d[0]&&(s=0)),s;)try{if(a=1,n&&(i=d[0]&2?n.return:d[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,d[1])).done)return i;switch(n=0,i&&(d=[d[0]&2,i.value]),d[0]){case 0:case 1:i=d;break;case 4:return s.label++,{value:d[1],done:!1};case 5:s.label++,n=d[1],d=[0];continue;case 7:d=s.ops.pop(),s.trys.pop();continue;default:if(i=s.trys,!(i=i.length>0&&i[i.length-1])&&(d[0]===6||d[0]===2)){s=0;continue}if(d[0]===3&&(!i||d[1]>i[0]&&d[1]<i[3])){s.label=d[1];break}if(d[0]===6&&s.label<i[1]){s.label=i[1],i=d;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(d);break}i[2]&&s.ops.pop(),s.trys.pop();continue}d=t.call(e,s)}catch(h){d=[6,h],n=0}finally{a=i=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}}var RN=Object.create?function(e,t,s,a){a===void 0&&(a=s);var n=Object.getOwnPropertyDescriptor(t,s);(!n||("get"in n?!t.__esModule:n.writable||n.configurable))&&(n={enumerable:!0,get:function(){return t[s]}}),Object.defineProperty(e,a,n)}:function(e,t,s,a){a===void 0&&(a=s),e[a]=t[s]};function MU(e,t){for(var s in e)s!=="default"&&!Object.prototype.hasOwnProperty.call(t,s)&&RN(t,e,s)}function Ew(e){var t=typeof Symbol=="function"&&Symbol.iterator,s=t&&e[t],a=0;if(s)return s.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&a>=e.length&&(e=void 0),{value:e&&e[a++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function c6(e,t){var s=typeof Symbol=="function"&&e[Symbol.iterator];if(!s)return e;var a=s.call(e),n,i=[],o;try{for(;(t===void 0||t-- >0)&&!(n=a.next()).done;)i.push(n.value)}catch(l){o={error:l}}finally{try{n&&!n.done&&(s=a.return)&&s.call(a)}finally{if(o)throw o.error}}return i}function LU(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(c6(arguments[t]));return e}function FU(){for(var e=0,t=0,s=arguments.length;t<s;t++)e+=arguments[t].length;for(var a=Array(e),n=0,t=0;t<s;t++)for(var i=arguments[t],o=0,l=i.length;o<l;o++,n++)a[n]=i[o];return a}function BU(e,t,s){if(s||arguments.length===2)for(var a=0,n=t.length,i;a<n;a++)(i||!(a in t))&&(i||(i=Array.prototype.slice.call(t,0,a)),i[a]=t[a]);return e.concat(i||Array.prototype.slice.call(t))}function Pf(e){return this instanceof Pf?(this.v=e,this):new Pf(e)}function $U(e,t,s){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var a=s.apply(e,t||[]),n,i=[];return n=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),l("next"),l("throw"),l("return",o),n[Symbol.asyncIterator]=function(){return this},n;function o(y){return function(v){return Promise.resolve(v).then(y,f)}}function l(y,v){a[y]&&(n[y]=function(w){return new Promise(function(N,k){i.push([y,w,N,k])>1||c(y,w)})},v&&(n[y]=v(n[y])))}function c(y,v){try{d(a[y](v))}catch(w){x(i[0][3],w)}}function d(y){y.value instanceof Pf?Promise.resolve(y.value.v).then(h,f):x(i[0][2],y)}function h(y){c("next",y)}function f(y){c("throw",y)}function x(y,v){y(v),i.shift(),i.length&&c(i[0][0],i[0][1])}}function UU(e){var t,s;return t={},a("next"),a("throw",function(n){throw n}),a("return"),t[Symbol.iterator]=function(){return this},t;function a(n,i){t[n]=e[n]?function(o){return(s=!s)?{value:Pf(e[n](o)),done:!1}:i?i(o):o}:i}}function VU(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],s;return t?t.call(e):(e=typeof Ew=="function"?Ew(e):e[Symbol.iterator](),s={},a("next"),a("throw"),a("return"),s[Symbol.asyncIterator]=function(){return this},s);function a(i){s[i]=e[i]&&function(o){return new Promise(function(l,c){o=e[i](o),n(l,c,o.done,o.value)})}}function n(i,o,l,c){Promise.resolve(c).then(function(d){i({value:d,done:l})},o)}}function WU(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}var zse=Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t},A5=function(e){return A5=Object.getOwnPropertyNames||function(t){var s=[];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(s[s.length]=a);return s},A5(e)};function zU(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var s=A5(e),a=0;a<s.length;a++)s[a]!=="default"&&RN(t,e,s[a]);return zse(t,e),t}function qU(e){return e&&e.__esModule?e:{default:e}}function HU(e,t,s,a){if(s==="a"&&!a)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!a:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return s==="m"?a:s==="a"?a.call(e):a?a.value:t.get(e)}function KU(e,t,s,a,n){if(a==="m")throw new TypeError("Private method is not writable");if(a==="a"&&!n)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!n:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return a==="a"?n.call(e,s):n?n.value=s:t.set(e,s),s}function GU(e,t){if(t===null||typeof t!="object"&&typeof t!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof e=="function"?t===e:e.has(t)}function YU(e,t,s){if(t!=null){if(typeof t!="object"&&typeof t!="function")throw new TypeError("Object expected.");var a,n;if(s){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");a=t[Symbol.asyncDispose]}if(a===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");a=t[Symbol.dispose],s&&(n=a)}if(typeof a!="function")throw new TypeError("Object not disposable.");n&&(a=function(){try{n.call(this)}catch(i){return Promise.reject(i)}}),e.stack.push({value:t,dispose:a,async:s})}else s&&e.stack.push({async:!0});return t}var qse=typeof SuppressedError=="function"?SuppressedError:function(e,t,s){var a=new Error(s);return a.name="SuppressedError",a.error=e,a.suppressed=t,a};function XU(e){function t(i){e.error=e.hasError?new qse(i,e.error,"An error was suppressed during disposal."):i,e.hasError=!0}var s,a=0;function n(){for(;s=e.stack.pop();)try{if(!s.async&&a===1)return a=0,e.stack.push(s),Promise.resolve().then(n);if(s.dispose){var i=s.dispose.call(s.value);if(s.async)return a|=2,Promise.resolve(i).then(n,function(o){return t(o),n()})}else a|=1}catch(o){t(o)}if(a===1)return e.hasError?Promise.reject(e.error):Promise.resolve();if(e.hasError)throw e.error}return n()}function QU(e,t){return typeof e=="string"&&/^\.\.?\//.test(e)?e.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(s,a,n,i,o){return a?t?".jsx":".js":n&&(!i||!o)?s:n+i+"."+o.toLowerCase()+"js"}):e}const Hse={__extends:_U,__assign:_w,__rest:xx,__decorate:EU,__param:AU,__esDecorate:PU,__runInitializers:TU,__propKey:IU,__setFunctionName:DU,__metadata:OU,__awaiter:kt,__generator:RU,__createBinding:RN,__exportStar:MU,__values:Ew,__read:c6,__spread:LU,__spreadArrays:FU,__spreadArray:BU,__await:Pf,__asyncGenerator:$U,__asyncDelegator:UU,__asyncValues:VU,__makeTemplateObject:WU,__importStar:zU,__importDefault:qU,__classPrivateFieldGet:HU,__classPrivateFieldSet:KU,__classPrivateFieldIn:GU,__addDisposableResource:YU,__disposeResources:XU,__rewriteRelativeImportExtension:QU},Kse=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:YU,get __assign(){return _w},__asyncDelegator:UU,__asyncGenerator:$U,__asyncValues:VU,__await:Pf,__awaiter:kt,__classPrivateFieldGet:HU,__classPrivateFieldIn:GU,__classPrivateFieldSet:KU,__createBinding:RN,__decorate:EU,__disposeResources:XU,__esDecorate:PU,__exportStar:MU,__extends:_U,__generator:RU,__importDefault:qU,__importStar:zU,__makeTemplateObject:WU,__metadata:OU,__param:AU,__propKey:IU,__read:c6,__rest:xx,__rewriteRelativeImportExtension:QU,__runInitializers:TU,__setFunctionName:DU,__spread:LU,__spreadArray:BU,__spreadArrays:FU,__values:Ew,default:Hse},Symbol.toStringTag,{value:"Module"})),Gse=e=>e?(...t)=>e(...t):(...t)=>fetch(...t);class d6 extends Error{constructor(t,s="FunctionsError",a){super(t),this.name=s,this.context=a}}class Yse extends d6{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class FD extends d6{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class BD extends d6{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var P5;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(P5||(P5={}));class Xse{constructor(t,{headers:s={},customFetch:a,region:n=P5.Any}={}){this.url=t,this.headers=s,this.region=n,this.fetch=Gse(a)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t){return kt(this,arguments,void 0,function*(s,a={}){var n;let i,o;try{const{headers:l,method:c,body:d,signal:h,timeout:f}=a;let x={},{region:y}=a;y||(y=this.region);const v=new URL(`${this.url}/${s}`);y&&y!=="any"&&(x["x-region"]=y,v.searchParams.set("forceFunctionRegion",y));let w;d&&(l&&!Object.prototype.hasOwnProperty.call(l,"Content-Type")||!l)?typeof Blob<"u"&&d instanceof Blob||d instanceof ArrayBuffer?(x["Content-Type"]="application/octet-stream",w=d):typeof d=="string"?(x["Content-Type"]="text/plain",w=d):typeof FormData<"u"&&d instanceof FormData?w=d:(x["Content-Type"]="application/json",w=JSON.stringify(d)):w=d;let N=h;f&&(o=new AbortController,i=setTimeout(()=>o.abort(),f),h?(N=o.signal,h.addEventListener("abort",()=>o.abort())):N=o.signal);const k=yield this.fetch(v.toString(),{method:c||"POST",headers:Object.assign(Object.assign(Object.assign({},x),this.headers),l),body:w,signal:N}).catch(T=>{throw new Yse(T)}),C=k.headers.get("x-relay-error");if(C&&C==="true")throw new FD(k);if(!k.ok)throw new BD(k);let E=((n=k.headers.get("Content-Type"))!==null&&n!==void 0?n:"text/plain").split(";")[0].trim(),_;return E==="application/json"?_=yield k.json():E==="application/octet-stream"||E==="application/pdf"?_=yield k.blob():E==="text/event-stream"?_=k:E==="multipart/form-data"?_=yield k.formData():_=yield k.text(),{data:_,error:null,response:k}}catch(l){return{data:null,error:l,response:l instanceof BD||l instanceof FD?l.context:void 0}}finally{i&&clearTimeout(i)}})}}var ri={};const gx=KF(Kse);var cv={},dv={},uv={},hv={},mv={},fv={},$D;function ZU(){if($D)return fv;$D=1,Object.defineProperty(fv,"__esModule",{value:!0});class e extends Error{constructor(s){super(s.message),this.name="PostgrestError",this.details=s.details,this.hint=s.hint,this.code=s.code}}return fv.default=e,fv}var UD;function JU(){if(UD)return mv;UD=1,Object.defineProperty(mv,"__esModule",{value:!0});const t=gx.__importDefault(ZU());class s{constructor(n){var i,o;this.shouldThrowOnError=!1,this.method=n.method,this.url=n.url,this.headers=new Headers(n.headers),this.schema=n.schema,this.body=n.body,this.shouldThrowOnError=(i=n.shouldThrowOnError)!==null&&i!==void 0?i:!1,this.signal=n.signal,this.isMaybeSingle=(o=n.isMaybeSingle)!==null&&o!==void 0?o:!1,n.fetch?this.fetch=n.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(n,i){return this.headers=new Headers(this.headers),this.headers.set(n,i),this}then(n,i){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const o=this.fetch;let l=o(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async c=>{var d,h,f,x;let y=null,v=null,w=null,N=c.status,k=c.statusText;if(c.ok){if(this.method!=="HEAD"){const T=await c.text();T===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((d=this.headers.get("Accept"))===null||d===void 0)&&d.includes("application/vnd.pgrst.plan+text"))?v=T:v=JSON.parse(T))}const E=(h=this.headers.get("Prefer"))===null||h===void 0?void 0:h.match(/count=(exact|planned|estimated)/),_=(f=c.headers.get("content-range"))===null||f===void 0?void 0:f.split("/");E&&_&&_.length>1&&(w=parseInt(_[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(v)&&(v.length>1?(y={code:"PGRST116",details:`Results contain ${v.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},v=null,w=null,N=406,k="Not Acceptable"):v.length===1?v=v[0]:v=null)}else{const E=await c.text();try{y=JSON.parse(E),Array.isArray(y)&&c.status===404&&(v=[],y=null,N=200,k="OK")}catch{c.status===404&&E===""?(N=204,k="No Content"):y={message:E}}if(y&&this.isMaybeSingle&&(!((x=y==null?void 0:y.details)===null||x===void 0)&&x.includes("0 rows"))&&(y=null,N=200,k="OK"),y&&this.shouldThrowOnError)throw new t.default(y)}return{error:y,data:v,count:w,status:N,statusText:k}});return this.shouldThrowOnError||(l=l.catch(c=>{var d,h,f,x,y,v;let w="";const N=c==null?void 0:c.cause;if(N){const k=(d=N==null?void 0:N.message)!==null&&d!==void 0?d:"",C=(h=N==null?void 0:N.code)!==null&&h!==void 0?h:"";w=`${(f=c==null?void 0:c.name)!==null&&f!==void 0?f:"FetchError"}: ${c==null?void 0:c.message}`,w+=`

Caused by: ${(x=N==null?void 0:N.name)!==null&&x!==void 0?x:"Error"}: ${k}`,C&&(w+=` (${C})`),N!=null&&N.stack&&(w+=`
${N.stack}`)}else w=(y=c==null?void 0:c.stack)!==null&&y!==void 0?y:"";return{error:{message:`${(v=c==null?void 0:c.name)!==null&&v!==void 0?v:"FetchError"}: ${c==null?void 0:c.message}`,details:w,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),l.then(n,i)}returns(){return this}overrideTypes(){return this}}return mv.default=s,mv}var VD;function eV(){if(VD)return hv;VD=1,Object.defineProperty(hv,"__esModule",{value:!0});const t=gx.__importDefault(JU());class s extends t.default{select(n){let i=!1;const o=(n??"*").split("").map(l=>/\s/.test(l)&&!i?"":(l==='"'&&(i=!i),l)).join("");return this.url.searchParams.set("select",o),this.headers.append("Prefer","return=representation"),this}order(n,{ascending:i=!0,nullsFirst:o,foreignTable:l,referencedTable:c=l}={}){const d=c?`${c}.order`:"order",h=this.url.searchParams.get(d);return this.url.searchParams.set(d,`${h?`${h},`:""}${n}.${i?"asc":"desc"}${o===void 0?"":o?".nullsfirst":".nullslast"}`),this}limit(n,{foreignTable:i,referencedTable:o=i}={}){const l=typeof o>"u"?"limit":`${o}.limit`;return this.url.searchParams.set(l,`${n}`),this}range(n,i,{foreignTable:o,referencedTable:l=o}={}){const c=typeof l>"u"?"offset":`${l}.offset`,d=typeof l>"u"?"limit":`${l}.limit`;return this.url.searchParams.set(c,`${n}`),this.url.searchParams.set(d,`${i-n+1}`),this}abortSignal(n){return this.signal=n,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:n=!1,verbose:i=!1,settings:o=!1,buffers:l=!1,wal:c=!1,format:d="text"}={}){var h;const f=[n?"analyze":null,i?"verbose":null,o?"settings":null,l?"buffers":null,c?"wal":null].filter(Boolean).join("|"),x=(h=this.headers.get("Accept"))!==null&&h!==void 0?h:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${d}; for="${x}"; options=${f};`),d==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(n){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${n}`),this}}return hv.default=s,hv}var WD;function u6(){if(WD)return uv;WD=1,Object.defineProperty(uv,"__esModule",{value:!0});const t=gx.__importDefault(eV()),s=new RegExp("[,()]");class a extends t.default{eq(i,o){return this.url.searchParams.append(i,`eq.${o}`),this}neq(i,o){return this.url.searchParams.append(i,`neq.${o}`),this}gt(i,o){return this.url.searchParams.append(i,`gt.${o}`),this}gte(i,o){return this.url.searchParams.append(i,`gte.${o}`),this}lt(i,o){return this.url.searchParams.append(i,`lt.${o}`),this}lte(i,o){return this.url.searchParams.append(i,`lte.${o}`),this}like(i,o){return this.url.searchParams.append(i,`like.${o}`),this}likeAllOf(i,o){return this.url.searchParams.append(i,`like(all).{${o.join(",")}}`),this}likeAnyOf(i,o){return this.url.searchParams.append(i,`like(any).{${o.join(",")}}`),this}ilike(i,o){return this.url.searchParams.append(i,`ilike.${o}`),this}ilikeAllOf(i,o){return this.url.searchParams.append(i,`ilike(all).{${o.join(",")}}`),this}ilikeAnyOf(i,o){return this.url.searchParams.append(i,`ilike(any).{${o.join(",")}}`),this}regexMatch(i,o){return this.url.searchParams.append(i,`match.${o}`),this}regexIMatch(i,o){return this.url.searchParams.append(i,`imatch.${o}`),this}is(i,o){return this.url.searchParams.append(i,`is.${o}`),this}isDistinct(i,o){return this.url.searchParams.append(i,`isdistinct.${o}`),this}in(i,o){const l=Array.from(new Set(o)).map(c=>typeof c=="string"&&s.test(c)?`"${c}"`:`${c}`).join(",");return this.url.searchParams.append(i,`in.(${l})`),this}contains(i,o){return typeof o=="string"?this.url.searchParams.append(i,`cs.${o}`):Array.isArray(o)?this.url.searchParams.append(i,`cs.{${o.join(",")}}`):this.url.searchParams.append(i,`cs.${JSON.stringify(o)}`),this}containedBy(i,o){return typeof o=="string"?this.url.searchParams.append(i,`cd.${o}`):Array.isArray(o)?this.url.searchParams.append(i,`cd.{${o.join(",")}}`):this.url.searchParams.append(i,`cd.${JSON.stringify(o)}`),this}rangeGt(i,o){return this.url.searchParams.append(i,`sr.${o}`),this}rangeGte(i,o){return this.url.searchParams.append(i,`nxl.${o}`),this}rangeLt(i,o){return this.url.searchParams.append(i,`sl.${o}`),this}rangeLte(i,o){return this.url.searchParams.append(i,`nxr.${o}`),this}rangeAdjacent(i,o){return this.url.searchParams.append(i,`adj.${o}`),this}overlaps(i,o){return typeof o=="string"?this.url.searchParams.append(i,`ov.${o}`):this.url.searchParams.append(i,`ov.{${o.join(",")}}`),this}textSearch(i,o,{config:l,type:c}={}){let d="";c==="plain"?d="pl":c==="phrase"?d="ph":c==="websearch"&&(d="w");const h=l===void 0?"":`(${l})`;return this.url.searchParams.append(i,`${d}fts${h}.${o}`),this}match(i){return Object.entries(i).forEach(([o,l])=>{this.url.searchParams.append(o,`eq.${l}`)}),this}not(i,o,l){return this.url.searchParams.append(i,`not.${o}.${l}`),this}or(i,{foreignTable:o,referencedTable:l=o}={}){const c=l?`${l}.or`:"or";return this.url.searchParams.append(c,`(${i})`),this}filter(i,o,l){return this.url.searchParams.append(i,`${o}.${l}`),this}}return uv.default=a,uv}var zD;function tV(){if(zD)return dv;zD=1,Object.defineProperty(dv,"__esModule",{value:!0});const t=gx.__importDefault(u6());class s{constructor(n,{headers:i={},schema:o,fetch:l}){this.url=n,this.headers=new Headers(i),this.schema=o,this.fetch=l}select(n,i){const{head:o=!1,count:l}=i??{},c=o?"HEAD":"GET";let d=!1;const h=(n??"*").split("").map(f=>/\s/.test(f)&&!d?"":(f==='"'&&(d=!d),f)).join("");return this.url.searchParams.set("select",h),l&&this.headers.append("Prefer",`count=${l}`),new t.default({method:c,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(n,{count:i,defaultToNull:o=!0}={}){var l;const c="POST";if(i&&this.headers.append("Prefer",`count=${i}`),o||this.headers.append("Prefer","missing=default"),Array.isArray(n)){const d=n.reduce((h,f)=>h.concat(Object.keys(f)),[]);if(d.length>0){const h=[...new Set(d)].map(f=>`"${f}"`);this.url.searchParams.set("columns",h.join(","))}}return new t.default({method:c,url:this.url,headers:this.headers,schema:this.schema,body:n,fetch:(l=this.fetch)!==null&&l!==void 0?l:fetch})}upsert(n,{onConflict:i,ignoreDuplicates:o=!1,count:l,defaultToNull:c=!0}={}){var d;const h="POST";if(this.headers.append("Prefer",`resolution=${o?"ignore":"merge"}-duplicates`),i!==void 0&&this.url.searchParams.set("on_conflict",i),l&&this.headers.append("Prefer",`count=${l}`),c||this.headers.append("Prefer","missing=default"),Array.isArray(n)){const f=n.reduce((x,y)=>x.concat(Object.keys(y)),[]);if(f.length>0){const x=[...new Set(f)].map(y=>`"${y}"`);this.url.searchParams.set("columns",x.join(","))}}return new t.default({method:h,url:this.url,headers:this.headers,schema:this.schema,body:n,fetch:(d=this.fetch)!==null&&d!==void 0?d:fetch})}update(n,{count:i}={}){var o;const l="PATCH";return i&&this.headers.append("Prefer",`count=${i}`),new t.default({method:l,url:this.url,headers:this.headers,schema:this.schema,body:n,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}delete({count:n}={}){var i;const o="DELETE";return n&&this.headers.append("Prefer",`count=${n}`),new t.default({method:o,url:this.url,headers:this.headers,schema:this.schema,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch})}}return dv.default=s,dv}var qD;function Qse(){if(qD)return cv;qD=1,Object.defineProperty(cv,"__esModule",{value:!0});const e=gx,t=e.__importDefault(tV()),s=e.__importDefault(u6());class a{constructor(i,{headers:o={},schema:l,fetch:c}={}){this.url=i,this.headers=new Headers(o),this.schemaName=l,this.fetch=c}from(i){if(!i||typeof i!="string"||i.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");const o=new URL(`${this.url}/${i}`);return new t.default(o,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(i){return new a(this.url,{headers:this.headers,schema:i,fetch:this.fetch})}rpc(i,o={},{head:l=!1,get:c=!1,count:d}={}){var h;let f;const x=new URL(`${this.url}/rpc/${i}`);let y;l||c?(f=l?"HEAD":"GET",Object.entries(o).filter(([w,N])=>N!==void 0).map(([w,N])=>[w,Array.isArray(N)?`{${N.join(",")}}`:`${N}`]).forEach(([w,N])=>{x.searchParams.append(w,N)})):(f="POST",y=o);const v=new Headers(this.headers);return d&&v.set("Prefer",`count=${d}`),new s.default({method:f,url:x,headers:v,schema:this.schemaName,body:y,fetch:(h=this.fetch)!==null&&h!==void 0?h:fetch})}}return cv.default=a,cv}Object.defineProperty(ri,"__esModule",{value:!0});var rV=ri.PostgrestError=hV=ri.PostgrestBuilder=dV=ri.PostgrestTransformBuilder=lV=ri.PostgrestFilterBuilder=iV=ri.PostgrestQueryBuilder=aV=ri.PostgrestClient=void 0;const px=gx,sV=px.__importDefault(Qse());var aV=ri.PostgrestClient=sV.default;const nV=px.__importDefault(tV());var iV=ri.PostgrestQueryBuilder=nV.default;const oV=px.__importDefault(u6());var lV=ri.PostgrestFilterBuilder=oV.default;const cV=px.__importDefault(eV());var dV=ri.PostgrestTransformBuilder=cV.default;const uV=px.__importDefault(JU());var hV=ri.PostgrestBuilder=uV.default;const mV=px.__importDefault(ZU());rV=ri.PostgrestError=mV.default;var fV=ri.default={PostgrestClient:sV.default,PostgrestQueryBuilder:nV.default,PostgrestFilterBuilder:oV.default,PostgrestTransformBuilder:cV.default,PostgrestBuilder:uV.default,PostgrestError:mV.default};const Zse=aE({__proto__:null,get PostgrestBuilder(){return hV},get PostgrestClient(){return aV},get PostgrestError(){return rV},get PostgrestFilterBuilder(){return lV},get PostgrestQueryBuilder(){return iV},get PostgrestTransformBuilder(){return dV},default:fV},[ri]),{PostgrestClient:Jse,PostgrestQueryBuilder:$Be,PostgrestFilterBuilder:UBe,PostgrestTransformBuilder:VBe,PostgrestBuilder:WBe,PostgrestError:zBe}=fV||Zse;class eae{constructor(){}static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const s=process.versions;if(s&&s.node){const a=s.node,n=parseInt(a.replace(/^v/,"").split(".")[0]);return n>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${n} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${n} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let s=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(s+=`

Suggested solution: ${t.workaround}`),new Error(s)}static createWebSocket(t,s){const a=this.getWebSocketConstructor();return new a(t,s)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const tae="2.86.0",rae=`realtime-js/${tae}`,xV="1.0.0",sae="2.0.0",HD=xV,T5=1e4,aae=1e3,nae=100;var S0;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(S0||(S0={}));var Fa;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(Fa||(Fa={}));var gl;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(gl||(gl={}));var I5;(function(e){e.websocket="websocket"})(I5||(I5={}));var C0;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(C0||(C0={}));class iae{constructor(t){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=t??[]}encode(t,s){if(t.event===this.BROADCAST_EVENT&&!(t.payload instanceof ArrayBuffer)&&typeof t.payload.event=="string")return s(this._binaryEncodeUserBroadcastPush(t));let a=[t.join_ref,t.ref,t.topic,t.event,t.payload];return s(JSON.stringify(a))}_binaryEncodeUserBroadcastPush(t){var s;return this._isArrayBuffer((s=t.payload)===null||s===void 0?void 0:s.payload)?this._encodeBinaryUserBroadcastPush(t):this._encodeJsonUserBroadcastPush(t)}_encodeBinaryUserBroadcastPush(t){var s,a;const n=(a=(s=t.payload)===null||s===void 0?void 0:s.payload)!==null&&a!==void 0?a:new ArrayBuffer(0);return this._encodeUserBroadcastPush(t,this.BINARY_ENCODING,n)}_encodeJsonUserBroadcastPush(t){var s,a;const n=(a=(s=t.payload)===null||s===void 0?void 0:s.payload)!==null&&a!==void 0?a:{},o=new TextEncoder().encode(JSON.stringify(n)).buffer;return this._encodeUserBroadcastPush(t,this.JSON_ENCODING,o)}_encodeUserBroadcastPush(t,s,a){var n,i;const o=t.topic,l=(n=t.ref)!==null&&n!==void 0?n:"",c=(i=t.join_ref)!==null&&i!==void 0?i:"",d=t.payload.event,h=this.allowedMetadataKeys?this._pick(t.payload,this.allowedMetadataKeys):{},f=Object.keys(h).length===0?"":JSON.stringify(h);if(c.length>255)throw new Error(`joinRef length ${c.length} exceeds maximum of 255`);if(l.length>255)throw new Error(`ref length ${l.length} exceeds maximum of 255`);if(o.length>255)throw new Error(`topic length ${o.length} exceeds maximum of 255`);if(d.length>255)throw new Error(`userEvent length ${d.length} exceeds maximum of 255`);if(f.length>255)throw new Error(`metadata length ${f.length} exceeds maximum of 255`);const x=this.USER_BROADCAST_PUSH_META_LENGTH+c.length+l.length+o.length+d.length+f.length,y=new ArrayBuffer(this.HEADER_LENGTH+x);let v=new DataView(y),w=0;v.setUint8(w++,this.KINDS.userBroadcastPush),v.setUint8(w++,c.length),v.setUint8(w++,l.length),v.setUint8(w++,o.length),v.setUint8(w++,d.length),v.setUint8(w++,f.length),v.setUint8(w++,s),Array.from(c,k=>v.setUint8(w++,k.charCodeAt(0))),Array.from(l,k=>v.setUint8(w++,k.charCodeAt(0))),Array.from(o,k=>v.setUint8(w++,k.charCodeAt(0))),Array.from(d,k=>v.setUint8(w++,k.charCodeAt(0))),Array.from(f,k=>v.setUint8(w++,k.charCodeAt(0)));var N=new Uint8Array(y.byteLength+a.byteLength);return N.set(new Uint8Array(y),0),N.set(new Uint8Array(a),y.byteLength),N.buffer}decode(t,s){if(this._isArrayBuffer(t)){let a=this._binaryDecode(t);return s(a)}if(typeof t=="string"){const a=JSON.parse(t),[n,i,o,l,c]=a;return s({join_ref:n,ref:i,topic:o,event:l,payload:c})}return s({})}_binaryDecode(t){const s=new DataView(t),a=s.getUint8(0),n=new TextDecoder;switch(a){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(t,s,n)}}_decodeUserBroadcast(t,s,a){const n=s.getUint8(1),i=s.getUint8(2),o=s.getUint8(3),l=s.getUint8(4);let c=this.HEADER_LENGTH+4;const d=a.decode(t.slice(c,c+n));c=c+n;const h=a.decode(t.slice(c,c+i));c=c+i;const f=a.decode(t.slice(c,c+o));c=c+o;const x=t.slice(c,t.byteLength),y=l===this.JSON_ENCODING?JSON.parse(a.decode(x)):x,v={type:this.BROADCAST_EVENT,event:h,payload:y};return o>0&&(v.meta=JSON.parse(f)),{join_ref:null,ref:null,topic:d,event:this.BROADCAST_EVENT,payload:v}}_isArrayBuffer(t){var s;return t instanceof ArrayBuffer||((s=t==null?void 0:t.constructor)===null||s===void 0?void 0:s.name)==="ArrayBuffer"}_pick(t,s){return!t||typeof t!="object"?{}:Object.fromEntries(Object.entries(t).filter(([a])=>s.includes(a)))}}class gV{constructor(t,s){this.callback=t,this.timerCalc=s,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=s}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var js;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(js||(js={}));const KD=(e,t,s={})=>{var a;const n=(a=s.skipTypes)!==null&&a!==void 0?a:[];return t?Object.keys(t).reduce((i,o)=>(i[o]=oae(o,e,t,n),i),{}):{}},oae=(e,t,s,a)=>{const n=t.find(l=>l.name===e),i=n==null?void 0:n.type,o=s[e];return i&&!a.includes(i)?pV(i,o):D5(o)},pV=(e,t)=>{if(e.charAt(0)==="_"){const s=e.slice(1,e.length);return uae(t,s)}switch(e){case js.bool:return lae(t);case js.float4:case js.float8:case js.int2:case js.int4:case js.int8:case js.numeric:case js.oid:return cae(t);case js.json:case js.jsonb:return dae(t);case js.timestamp:return hae(t);case js.abstime:case js.date:case js.daterange:case js.int4range:case js.int8range:case js.money:case js.reltime:case js.text:case js.time:case js.timestamptz:case js.timetz:case js.tsrange:case js.tstzrange:return D5(t);default:return D5(t)}},D5=e=>e,lae=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},cae=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},dae=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},uae=(e,t)=>{if(typeof e!="string")return e;const s=e.length-1,a=e[s];if(e[0]==="{"&&a==="}"){let i;const o=e.slice(1,s);try{i=JSON.parse("["+o+"]")}catch{i=o?o.split(","):[]}return i.map(l=>pV(t,l))}return e},hae=e=>typeof e=="string"?e.replace(" ","T"):e,yV=e=>{const t=new URL(e);return t.protocol=t.protocol.replace(/^ws/i,"http"),t.pathname=t.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),t.pathname===""||t.pathname==="/"?t.pathname="/api/broadcast":t.pathname=t.pathname+"/api/broadcast",t.href};class U4{constructor(t,s,a={},n=T5){this.channel=t,this.event=s,this.payload=a,this.timeout=n,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,s){var a;return this._hasReceived(t)&&s((a=this.receivedResp)===null||a===void 0?void 0:a.response),this.recHooks.push({status:t,callback:s}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=s=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=s,this._matchReceive(s)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,s){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:s})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:s}){this.recHooks.filter(a=>a.status===t).forEach(a=>a.callback(s))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var GD;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(GD||(GD={}));class tp{constructor(t,s){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const a=(s==null?void 0:s.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(a.state,{},n=>{const{onJoin:i,onLeave:o,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=tp.syncState(this.state,n,i,o),this.pendingDiffs.forEach(c=>{this.state=tp.syncDiff(this.state,c,i,o)}),this.pendingDiffs=[],l()}),this.channel._on(a.diff,{},n=>{const{onJoin:i,onLeave:o,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(n):(this.state=tp.syncDiff(this.state,n,i,o),l())}),this.onJoin((n,i,o)=>{this.channel._trigger("presence",{event:"join",key:n,currentPresences:i,newPresences:o})}),this.onLeave((n,i,o)=>{this.channel._trigger("presence",{event:"leave",key:n,currentPresences:i,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,s,a,n){const i=this.cloneDeep(t),o=this.transformState(s),l={},c={};return this.map(i,(d,h)=>{o[d]||(c[d]=h)}),this.map(o,(d,h)=>{const f=i[d];if(f){const x=h.map(N=>N.presence_ref),y=f.map(N=>N.presence_ref),v=h.filter(N=>y.indexOf(N.presence_ref)<0),w=f.filter(N=>x.indexOf(N.presence_ref)<0);v.length>0&&(l[d]=v),w.length>0&&(c[d]=w)}else l[d]=h}),this.syncDiff(i,{joins:l,leaves:c},a,n)}static syncDiff(t,s,a,n){const{joins:i,leaves:o}={joins:this.transformState(s.joins),leaves:this.transformState(s.leaves)};return a||(a=()=>{}),n||(n=()=>{}),this.map(i,(l,c)=>{var d;const h=(d=t[l])!==null&&d!==void 0?d:[];if(t[l]=this.cloneDeep(c),h.length>0){const f=t[l].map(y=>y.presence_ref),x=h.filter(y=>f.indexOf(y.presence_ref)<0);t[l].unshift(...x)}a(l,h,c)}),this.map(o,(l,c)=>{let d=t[l];if(!d)return;const h=c.map(f=>f.presence_ref);d=d.filter(f=>h.indexOf(f.presence_ref)<0),t[l]=d,n(l,d,c),d.length===0&&delete t[l]}),t}static map(t,s){return Object.getOwnPropertyNames(t).map(a=>s(a,t[a]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((s,a)=>{const n=t[a];return"metas"in n?s[a]=n.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):s[a]=n,s},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var YD;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(YD||(YD={}));var rp;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(rp||(rp={}));var Pc;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(Pc||(Pc={}));class h6{constructor(t,s={config:{}},a){var n,i;if(this.topic=t,this.params=s,this.socket=a,this.bindings={},this.state=Fa.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},s.config),this.timeout=this.socket.timeout,this.joinPush=new U4(this,gl.join,this.params,this.timeout),this.rejoinTimer=new gV(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Fa.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(o=>o.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Fa.closed,this.socket._remove(this)}),this._onError(o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=Fa.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Fa.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=Fa.errored,this.rejoinTimer.scheduleTimeout())}),this._on(gl.reply,{},(o,l)=>{this._trigger(this._replyEventName(l),o)}),this.presence=new tp(this),this.broadcastEndpointURL=yV(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((i=(n=this.params.config)===null||n===void 0?void 0:n.broadcast)===null||i===void 0)&&i.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(t,s=this.timeout){var a,n,i;if(this.socket.isConnected()||this.socket.connect(),this.state==Fa.closed){const{config:{broadcast:o,presence:l,private:c}}=this.params,d=(n=(a=this.bindings.postgres_changes)===null||a===void 0?void 0:a.map(y=>y.filter))!==null&&n!==void 0?n:[],h=!!this.bindings[rp.PRESENCE]&&this.bindings[rp.PRESENCE].length>0||((i=this.params.config.presence)===null||i===void 0?void 0:i.enabled)===!0,f={},x={broadcast:o,presence:Object.assign(Object.assign({},l),{enabled:h}),postgres_changes:d,private:c};this.socket.accessTokenValue&&(f.access_token=this.socket.accessTokenValue),this._onError(y=>t==null?void 0:t(Pc.CHANNEL_ERROR,y)),this._onClose(()=>t==null?void 0:t(Pc.CLOSED)),this.updateJoinPayload(Object.assign({config:x},f)),this.joinedOnce=!0,this._rejoin(s),this.joinPush.receive("ok",async({postgres_changes:y})=>{var v;if(this.socket.setAuth(),y===void 0){t==null||t(Pc.SUBSCRIBED);return}else{const w=this.bindings.postgres_changes,N=(v=w==null?void 0:w.length)!==null&&v!==void 0?v:0,k=[];for(let C=0;C<N;C++){const E=w[C],{filter:{event:_,schema:T,table:A,filter:P}}=E,M=y&&y[C];if(M&&M.event===_&&M.schema===T&&M.table===A&&M.filter===P)k.push(Object.assign(Object.assign({},E),{id:M.id}));else{this.unsubscribe(),this.state=Fa.errored,t==null||t(Pc.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=k,t&&t(Pc.SUBSCRIBED);return}}).receive("error",y=>{this.state=Fa.errored,t==null||t(Pc.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(y).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(Pc.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,s={}){return await this.send({type:"presence",event:"track",payload:t},s.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,s,a){return this.state===Fa.joined&&t===rp.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(t,s,a)}async httpSend(t,s,a={}){var n;const i=this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"";if(s==null)return Promise.reject("Payload is required for httpSend()");const o={method:"POST",headers:{Authorization:i,apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:t,payload:s,private:this.private}]})},l=await this._fetchWithTimeout(this.broadcastEndpointURL,o,(n=a.timeout)!==null&&n!==void 0?n:this.timeout);if(l.status===202)return{success:!0};let c=l.statusText;try{const d=await l.json();c=d.error||d.message||c}catch{}return Promise.reject(new Error(c))}async send(t,s={}){var a,n;if(!this._canPush()&&t.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:i,payload:o}=t,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:o,private:this.private}]})};try{const d=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(a=s.timeout)!==null&&a!==void 0?a:this.timeout);return await((n=d.body)===null||n===void 0?void 0:n.cancel()),d.ok?"ok":"error"}catch(d){return d.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var o,l,c;const d=this._push(t.type,t,s.timeout||this.timeout);t.type==="broadcast"&&!(!((c=(l=(o=this.params)===null||o===void 0?void 0:o.config)===null||l===void 0?void 0:l.broadcast)===null||c===void 0)&&c.ack)&&i("ok"),d.receive("ok",()=>i("ok")),d.receive("error",()=>i("error")),d.receive("timeout",()=>i("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=Fa.leaving;const s=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(gl.close,"leave",this._joinRef())};this.joinPush.destroy();let a=null;return new Promise(n=>{a=new U4(this,gl.leave,{},t),a.receive("ok",()=>{s(),n("ok")}).receive("timeout",()=>{s(),n("timed out")}).receive("error",()=>{n("error")}),a.send(),this._canPush()||a.trigger("ok",{})}).finally(()=>{a==null||a.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Fa.closed,this.bindings={}}async _fetchWithTimeout(t,s,a){const n=new AbortController,i=setTimeout(()=>n.abort(),a),o=await this.socket.fetch(t,Object.assign(Object.assign({},s),{signal:n.signal}));return clearTimeout(i),o}_push(t,s,a=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let n=new U4(this,t,s,a);return this._canPush()?n.send():this._addToPushBuffer(n),n}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>nae){const s=this.pushBuffer.shift();s&&(s.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${s.event}`,s.payload))}}_onMessage(t,s,a){return s}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,s,a){var n,i;const o=t.toLocaleLowerCase(),{close:l,error:c,leave:d,join:h}=gl;if(a&&[l,c,d,h].indexOf(o)>=0&&a!==this._joinRef())return;let x=this._onMessage(o,s,a);if(s&&!x)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(n=this.bindings.postgres_changes)===null||n===void 0||n.filter(y=>{var v,w,N;return((v=y.filter)===null||v===void 0?void 0:v.event)==="*"||((N=(w=y.filter)===null||w===void 0?void 0:w.event)===null||N===void 0?void 0:N.toLocaleLowerCase())===o}).map(y=>y.callback(x,a)):(i=this.bindings[o])===null||i===void 0||i.filter(y=>{var v,w,N,k,C,E;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in y){const _=y.id,T=(v=y.filter)===null||v===void 0?void 0:v.event;return _&&((w=s.ids)===null||w===void 0?void 0:w.includes(_))&&(T==="*"||(T==null?void 0:T.toLocaleLowerCase())===((N=s.data)===null||N===void 0?void 0:N.type.toLocaleLowerCase()))}else{const _=(C=(k=y==null?void 0:y.filter)===null||k===void 0?void 0:k.event)===null||C===void 0?void 0:C.toLocaleLowerCase();return _==="*"||_===((E=s==null?void 0:s.event)===null||E===void 0?void 0:E.toLocaleLowerCase())}else return y.type.toLocaleLowerCase()===o}).map(y=>{if(typeof x=="object"&&"ids"in x){const v=x.data,{schema:w,table:N,commit_timestamp:k,type:C,errors:E}=v;x=Object.assign(Object.assign({},{schema:w,table:N,commit_timestamp:k,eventType:C,new:{},old:{},errors:E}),this._getPayloadRecords(v))}y.callback(x,a)})}_isClosed(){return this.state===Fa.closed}_isJoined(){return this.state===Fa.joined}_isJoining(){return this.state===Fa.joining}_isLeaving(){return this.state===Fa.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,s,a){const n=t.toLocaleLowerCase(),i={type:n,filter:s,callback:a};return this.bindings[n]?this.bindings[n].push(i):this.bindings[n]=[i],this}_off(t,s){const a=t.toLocaleLowerCase();return this.bindings[a]&&(this.bindings[a]=this.bindings[a].filter(n=>{var i;return!(((i=n.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===a&&h6.isEqual(n.filter,s))})),this}static isEqual(t,s){if(Object.keys(t).length!==Object.keys(s).length)return!1;for(const a in t)if(t[a]!==s[a])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(gl.close,{},t)}_onError(t){this._on(gl.error,{},s=>t(s))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Fa.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const s={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(s.new=KD(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(s.old=KD(t.columns,t.old_record)),s}}const V4=()=>{},xv={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},mae=[1e3,2e3,5e3,1e4],fae=1e4,xae=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class gae{constructor(t,s){var a;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=T5,this.transport=null,this.heartbeatIntervalMs=xv.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=V4,this.ref=0,this.reconnectTimer=null,this.vsn=HD,this.logger=V4,this.conn=null,this.sendBuffer=[],this.serializer=new iae,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=n=>n?(...i)=>n(...i):(...i)=>fetch(...i),!(!((a=s==null?void 0:s.params)===null||a===void 0)&&a.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=s.params.apikey,this.endPoint=`${t}/${I5.websocket}`,this.httpEndpoint=yV(t),this._initializeOptions(s),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(s==null?void 0:s.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=eae.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const s=t.message;throw s.includes("Node.js")?new Error(`${s}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${s}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(t,s){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const a=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(a),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(t?this.conn.close(t,s??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const s=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),s}async removeAllChannels(){const t=await Promise.all(this.channels.map(s=>s.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,s,a){this.logger(t,s,a)}connectionState(){switch(this.conn&&this.conn.readyState){case S0.connecting:return C0.Connecting;case S0.open:return C0.Open;case S0.closing:return C0.Closing;default:return C0.Closed}}isConnected(){return this.connectionState()===C0.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,s={config:{}}){const a=`realtime:${t}`,n=this.getChannels().find(i=>i.topic===a);if(n)return n;{const i=new h6(`realtime:${t}`,s,this);return this.channels.push(i),i}}push(t){const{topic:s,event:a,payload:n,ref:i}=t,o=()=>{this.encode(t,l=>{var c;(c=this.conn)===null||c===void 0||c.send(l)})};this.log("push",`${s} ${a} (${i})`,n),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var t;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(s){this.log("error","error in heartbeat callback",s)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(s){this.log("error","error in heartbeat callback",s)}this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(aae,"heartbeat timeout"),setTimeout(()=>{var s;this.isConnected()||(s=this.reconnectTimer)===null||s===void 0||s.scheduleTimeout()},xv.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(s){this.log("error","error in heartbeat callback",s)}this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let s=this.channels.find(a=>a.topic===t&&(a._isJoined()||a._isJoining()));s&&(this.log("transport",`leaving duplicate topic "${t}"`),s.unsubscribe())}_remove(t){this.channels=this.channels.filter(s=>s.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,s=>{if(s.topic==="phoenix"&&s.event==="phx_reply")try{this.heartbeatCallback(s.payload.status==="ok"?"ok":"error")}catch(d){this.log("error","error in heartbeat callback",d)}s.ref&&s.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:a,event:n,payload:i,ref:o}=s,l=o?`(${o})`:"",c=i.status||"";this.log("receive",`${c} ${a} ${n} ${l}`.trim(),i),this.channels.filter(d=>d._isMember(a)).forEach(d=>d._trigger(n,i,o)),this._triggerStateCallbacks("message",s)})}_clearTimer(t){var s;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((s=this.reconnectTimer)===null||s===void 0||s.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_teardownConnection(){if(this.conn){if(this.conn.readyState===S0.open||this.conn.readyState===S0.connecting)try{this.conn.close()}catch(t){this.log("error","Error closing connection",t)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(s=>{this.log("error","error waiting for auth on connect",s),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=s=>{this.log("worker","worker error",s.message),this.workerRef.terminate()},this.workerRef.onmessage=s=>{s.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(t){var s;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(s=this.reconnectTimer)===null||s===void 0||s.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t)}_triggerChanError(){this.channels.forEach(t=>t._trigger(gl.error))}_appendParams(t,s){if(Object.keys(s).length===0)return t;const a=t.match(/\?/)?"&":"?",n=new URLSearchParams(s);return`${t}${a}${n}`}_workerObjectUrl(t){let s;if(t)s=t;else{const a=new Blob([xae],{type:"application/javascript"});s=URL.createObjectURL(a)}return s}_setConnectionState(t,s=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=s)}async _performAuth(t=null){let s;t?s=t:this.accessToken?s=await this.accessToken():s=this.accessTokenValue,this.accessTokenValue!=s&&(this.accessTokenValue=s,this.channels.forEach(a=>{const n={access_token:s,version:rae};s&&a.updateJoinPayload(n),a.joinedOnce&&a._isJoined()&&a._push(gl.access_token,{access_token:s})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this.setAuth().catch(s=>{this.log("error",`error setting auth in ${t}`,s)})}_triggerStateCallbacks(t,s){try{this.stateChangeCallbacks[t].forEach(a=>{try{a(s)}catch(n){this.log("error",`error in ${t} callback`,n)}})}catch(a){this.log("error",`error triggering ${t} callbacks`,a)}}_setupReconnectionTimer(){this.reconnectTimer=new gV(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},xv.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var s,a,n,i,o,l,c,d,h,f,x,y;switch(this.transport=(s=t==null?void 0:t.transport)!==null&&s!==void 0?s:null,this.timeout=(a=t==null?void 0:t.timeout)!==null&&a!==void 0?a:T5,this.heartbeatIntervalMs=(n=t==null?void 0:t.heartbeatIntervalMs)!==null&&n!==void 0?n:xv.HEARTBEAT_INTERVAL,this.worker=(i=t==null?void 0:t.worker)!==null&&i!==void 0?i:!1,this.accessToken=(o=t==null?void 0:t.accessToken)!==null&&o!==void 0?o:null,this.heartbeatCallback=(l=t==null?void 0:t.heartbeatCallback)!==null&&l!==void 0?l:V4,this.vsn=(c=t==null?void 0:t.vsn)!==null&&c!==void 0?c:HD,t!=null&&t.params&&(this.params=t.params),t!=null&&t.logger&&(this.logger=t.logger),(t!=null&&t.logLevel||t!=null&&t.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(d=t==null?void 0:t.reconnectAfterMs)!==null&&d!==void 0?d:v=>mae[v-1]||fae,this.vsn){case xV:this.encode=(h=t==null?void 0:t.encode)!==null&&h!==void 0?h:(v,w)=>w(JSON.stringify(v)),this.decode=(f=t==null?void 0:t.decode)!==null&&f!==void 0?f:(v,w)=>w(JSON.parse(v));break;case sae:this.encode=(x=t==null?void 0:t.encode)!==null&&x!==void 0?x:this.serializer.encode.bind(this.serializer),this.decode=(y=t==null?void 0:t.decode)!==null&&y!==void 0?y:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t==null?void 0:t.workerUrl}}}class MN extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function qs(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class pae extends MN{constructor(t,s,a){super(t),this.name="StorageApiError",this.status=s,this.statusCode=a}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class O5 extends MN{constructor(t,s){super(t),this.name="StorageUnknownError",this.originalError=s}}const m6=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),yae=()=>Response,R5=e=>{if(Array.isArray(e))return e.map(s=>R5(s));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([s,a])=>{const n=s.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));t[n]=R5(a)}),t},bae=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},vae=e=>!e||typeof e!="string"||e.length===0||e.length>100||e.trim()!==e||e.includes("/")||e.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(e),W4=e=>{var t;return e.msg||e.message||e.error_description||(typeof e.error=="string"?e.error:(t=e.error)===null||t===void 0?void 0:t.message)||JSON.stringify(e)},wae=(e,t,s)=>kt(void 0,void 0,void 0,function*(){const a=yield yae();e instanceof a&&!(s!=null&&s.noResolveJson)?e.json().then(n=>{const i=e.status||500,o=(n==null?void 0:n.statusCode)||i+"";t(new pae(W4(n),i,o))}).catch(n=>{t(new O5(W4(n),n))}):t(new O5(W4(e),e))}),jae=(e,t,s,a)=>{const n={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"||!a?n:(bae(a)?(n.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),n.body=JSON.stringify(a)):n.body=a,t!=null&&t.duplex&&(n.duplex=t.duplex),Object.assign(Object.assign({},n),s))};function Uy(e,t,s,a,n,i){return kt(this,void 0,void 0,function*(){return new Promise((o,l)=>{e(s,jae(t,a,n,i)).then(c=>{if(!c.ok)throw c;return a!=null&&a.noResolveJson?c:c.json()}).then(c=>o(c)).catch(c=>wae(c,l,a))})})}function Vp(e,t,s,a){return kt(this,void 0,void 0,function*(){return Uy(e,"GET",t,s,a)})}function hl(e,t,s,a,n){return kt(this,void 0,void 0,function*(){return Uy(e,"POST",t,a,n,s)})}function M5(e,t,s,a,n){return kt(this,void 0,void 0,function*(){return Uy(e,"PUT",t,a,n,s)})}function Nae(e,t,s,a){return kt(this,void 0,void 0,function*(){return Uy(e,"HEAD",t,Object.assign(Object.assign({},s),{noResolveJson:!0}),a)})}function f6(e,t,s,a,n){return kt(this,void 0,void 0,function*(){return Uy(e,"DELETE",t,a,n,s)})}class kae{constructor(t,s){this.downloadFn=t,this.shouldThrowOnError=s}then(t,s){return this.execute().then(t,s)}execute(){return kt(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(qs(t))return{data:null,error:t};throw t}})}}var bV;class Sae{constructor(t,s){this.downloadFn=t,this.shouldThrowOnError=s,this[bV]="BlobDownloadBuilder",this.promise=null}asStream(){return new kae(this.downloadFn,this.shouldThrowOnError)}then(t,s){return this.getPromise().then(t,s)}catch(t){return this.getPromise().catch(t)}finally(t){return this.getPromise().finally(t)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return kt(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(qs(t))return{data:null,error:t};throw t}})}}bV=Symbol.toStringTag;const Cae={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},XD={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class _ae{constructor(t,s={},a,n){this.shouldThrowOnError=!1,this.url=t,this.headers=s,this.bucketId=a,this.fetch=m6(n)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(t,s,a,n){return kt(this,void 0,void 0,function*(){try{let i;const o=Object.assign(Object.assign({},XD),n);let l=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(o.upsert)});const c=o.metadata;typeof Blob<"u"&&a instanceof Blob?(i=new FormData,i.append("cacheControl",o.cacheControl),c&&i.append("metadata",this.encodeMetadata(c)),i.append("",a)):typeof FormData<"u"&&a instanceof FormData?(i=a,i.has("cacheControl")||i.append("cacheControl",o.cacheControl),c&&!i.has("metadata")&&i.append("metadata",this.encodeMetadata(c))):(i=a,l["cache-control"]=`max-age=${o.cacheControl}`,l["content-type"]=o.contentType,c&&(l["x-metadata"]=this.toBase64(this.encodeMetadata(c))),(typeof ReadableStream<"u"&&i instanceof ReadableStream||i&&typeof i=="object"&&"pipe"in i&&typeof i.pipe=="function")&&!o.duplex&&(o.duplex="half")),n!=null&&n.headers&&(l=Object.assign(Object.assign({},l),n.headers));const d=this._removeEmptyFolders(s),h=this._getFinalPath(d),f=yield(t=="PUT"?M5:hl)(this.fetch,`${this.url}/object/${h}`,i,Object.assign({headers:l},o!=null&&o.duplex?{duplex:o.duplex}:{}));return{data:{path:d,id:f.Id,fullPath:f.Key},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(qs(i))return{data:null,error:i};throw i}})}upload(t,s,a){return kt(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,s,a)})}uploadToSignedUrl(t,s,a,n){return kt(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(t),o=this._getFinalPath(i),l=new URL(this.url+`/object/upload/sign/${o}`);l.searchParams.set("token",s);try{let c;const d=Object.assign({upsert:XD.upsert},n),h=Object.assign(Object.assign({},this.headers),{"x-upsert":String(d.upsert)});typeof Blob<"u"&&a instanceof Blob?(c=new FormData,c.append("cacheControl",d.cacheControl),c.append("",a)):typeof FormData<"u"&&a instanceof FormData?(c=a,c.append("cacheControl",d.cacheControl)):(c=a,h["cache-control"]=`max-age=${d.cacheControl}`,h["content-type"]=d.contentType);const f=yield M5(this.fetch,l.toString(),c,{headers:h});return{data:{path:i,fullPath:f.Key},error:null}}catch(c){if(this.shouldThrowOnError)throw c;if(qs(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(t,s){return kt(this,void 0,void 0,function*(){try{let a=this._getFinalPath(t);const n=Object.assign({},this.headers);s!=null&&s.upsert&&(n["x-upsert"]="true");const i=yield hl(this.fetch,`${this.url}/object/upload/sign/${a}`,{},{headers:n}),o=new URL(this.url+i.url),l=o.searchParams.get("token");if(!l)throw new MN("No token returned by API");return{data:{signedUrl:o.toString(),path:t,token:l},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(qs(a))return{data:null,error:a};throw a}})}update(t,s,a){return kt(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,s,a)})}move(t,s,a){return kt(this,void 0,void 0,function*(){try{return{data:yield hl(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:s,destinationBucket:a==null?void 0:a.destinationBucket},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(qs(n))return{data:null,error:n};throw n}})}copy(t,s,a){return kt(this,void 0,void 0,function*(){try{return{data:{path:(yield hl(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:s,destinationBucket:a==null?void 0:a.destinationBucket},{headers:this.headers})).Key},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(qs(n))return{data:null,error:n};throw n}})}createSignedUrl(t,s,a){return kt(this,void 0,void 0,function*(){try{let n=this._getFinalPath(t),i=yield hl(this.fetch,`${this.url}/object/sign/${n}`,Object.assign({expiresIn:s},a!=null&&a.transform?{transform:a.transform}:{}),{headers:this.headers});const o=a!=null&&a.download?`&download=${a.download===!0?"":a.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${o}`)},{data:i,error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(qs(n))return{data:null,error:n};throw n}})}createSignedUrls(t,s,a){return kt(this,void 0,void 0,function*(){try{const n=yield hl(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:s,paths:t},{headers:this.headers}),i=a!=null&&a.download?`&download=${a.download===!0?"":a.download}`:"";return{data:n.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${i}`):null})),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(qs(n))return{data:null,error:n};throw n}})}download(t,s){const n=typeof(s==null?void 0:s.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((s==null?void 0:s.transform)||{}),o=i?`?${i}`:"",l=this._getFinalPath(t),c=()=>Vp(this.fetch,`${this.url}/${n}/${l}${o}`,{headers:this.headers,noResolveJson:!0});return new Sae(c,this.shouldThrowOnError)}info(t){return kt(this,void 0,void 0,function*(){const s=this._getFinalPath(t);try{const a=yield Vp(this.fetch,`${this.url}/object/info/${s}`,{headers:this.headers});return{data:R5(a),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(qs(a))return{data:null,error:a};throw a}})}exists(t){return kt(this,void 0,void 0,function*(){const s=this._getFinalPath(t);try{return yield Nae(this.fetch,`${this.url}/object/${s}`,{headers:this.headers}),{data:!0,error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(qs(a)&&a instanceof O5){const n=a.originalError;if([400,404].includes(n==null?void 0:n.status))return{data:!1,error:a}}throw a}})}getPublicUrl(t,s){const a=this._getFinalPath(t),n=[],i=s!=null&&s.download?`download=${s.download===!0?"":s.download}`:"";i!==""&&n.push(i);const l=typeof(s==null?void 0:s.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((s==null?void 0:s.transform)||{});c!==""&&n.push(c);let d=n.join("&");return d!==""&&(d=`?${d}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${a}${d}`)}}}remove(t){return kt(this,void 0,void 0,function*(){try{return{data:yield f6(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(qs(s))return{data:null,error:s};throw s}})}list(t,s,a){return kt(this,void 0,void 0,function*(){try{const n=Object.assign(Object.assign(Object.assign({},Cae),s),{prefix:t||""});return{data:yield hl(this.fetch,`${this.url}/object/list/${this.bucketId}`,n,{headers:this.headers},a),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(qs(n))return{data:null,error:n};throw n}})}listV2(t,s){return kt(this,void 0,void 0,function*(){try{const a=Object.assign({},t);return{data:yield hl(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,a,{headers:this.headers},s),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(qs(a))return{data:null,error:a};throw a}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const s=[];return t.width&&s.push(`width=${t.width}`),t.height&&s.push(`height=${t.height}`),t.resize&&s.push(`resize=${t.resize}`),t.format&&s.push(`format=${t.format}`),t.quality&&s.push(`quality=${t.quality}`),s.join("&")}}const vV="2.86.0",wV={"X-Client-Info":`storage-js/${vV}`};class Eae{constructor(t,s={},a,n){this.shouldThrowOnError=!1;const i=new URL(t);n!=null&&n.useNewHostname&&/supabase\.(co|in|red)$/.test(i.hostname)&&!i.hostname.includes("storage.supabase.")&&(i.hostname=i.hostname.replace("supabase.","storage.supabase.")),this.url=i.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},wV),s),this.fetch=m6(a)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(t){return kt(this,void 0,void 0,function*(){try{const s=this.listBucketOptionsToQueryString(t);return{data:yield Vp(this.fetch,`${this.url}/bucket${s}`,{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(qs(s))return{data:null,error:s};throw s}})}getBucket(t){return kt(this,void 0,void 0,function*(){try{return{data:yield Vp(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(qs(s))return{data:null,error:s};throw s}})}createBucket(t){return kt(this,arguments,void 0,function*(s,a={public:!1}){try{return{data:yield hl(this.fetch,`${this.url}/bucket`,{id:s,name:s,type:a.type,public:a.public,file_size_limit:a.fileSizeLimit,allowed_mime_types:a.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(qs(n))return{data:null,error:n};throw n}})}updateBucket(t,s){return kt(this,void 0,void 0,function*(){try{return{data:yield M5(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:s.public,file_size_limit:s.fileSizeLimit,allowed_mime_types:s.allowedMimeTypes},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(qs(a))return{data:null,error:a};throw a}})}emptyBucket(t){return kt(this,void 0,void 0,function*(){try{return{data:yield hl(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(qs(s))return{data:null,error:s};throw s}})}deleteBucket(t){return kt(this,void 0,void 0,function*(){try{return{data:yield f6(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(qs(s))return{data:null,error:s};throw s}})}listBucketOptionsToQueryString(t){const s={};return t&&("limit"in t&&(s.limit=String(t.limit)),"offset"in t&&(s.offset=String(t.offset)),t.search&&(s.search=t.search),t.sortColumn&&(s.sortColumn=t.sortColumn),t.sortOrder&&(s.sortOrder=t.sortOrder)),Object.keys(s).length>0?"?"+new URLSearchParams(s).toString():""}}var Wp=class extends Error{constructor(e,t){var s;super(e),this.name="IcebergError",this.status=t.status,this.icebergType=t.icebergType,this.icebergCode=t.icebergCode,this.details=t.details,this.isCommitStateUnknown=t.icebergType==="CommitStateUnknownException"||[500,502,504].includes(t.status)&&((s=t.icebergType)==null?void 0:s.includes("CommitState"))===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function Aae(e,t,s){const a=new URL(t,e);if(s)for(const[n,i]of Object.entries(s))i!==void 0&&a.searchParams.set(n,i);return a.toString()}async function Pae(e){return!e||e.type==="none"?{}:e.type==="bearer"?{Authorization:`Bearer ${e.token}`}:e.type==="header"?{[e.name]:e.value}:e.type==="custom"?await e.getHeaders():{}}function Tae(e){const t=e.fetchImpl??globalThis.fetch;return{async request({method:s,path:a,query:n,body:i,headers:o}){const l=Aae(e.baseUrl,a,n),c=await Pae(e.auth),d=await t(l,{method:s,headers:{...i?{"Content-Type":"application/json"}:{},...c,...o},body:i?JSON.stringify(i):void 0}),h=await d.text(),f=(d.headers.get("content-type")||"").includes("application/json"),x=f&&h?JSON.parse(h):h;if(!d.ok){const y=f?x:void 0,v=y==null?void 0:y.error;throw new Wp((v==null?void 0:v.message)??`Request failed with status ${d.status}`,{status:d.status,icebergType:v==null?void 0:v.type,icebergCode:v==null?void 0:v.code,details:y})}return{status:d.status,headers:d.headers,data:x}}}}function gv(e){return e.join("")}var Iae=class{constructor(e,t=""){this.client=e,this.prefix=t}async listNamespaces(e){const t=e?{parent:gv(e.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:t})).data.namespaces.map(a=>({namespace:a}))}async createNamespace(e,t){const s={namespace:e.namespace,properties:t==null?void 0:t.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:s})).data}async dropNamespace(e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${gv(e.namespace)}`})}async loadNamespaceMetadata(e){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${gv(e.namespace)}`})).data.properties}}async namespaceExists(e){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${gv(e.namespace)}`}),!0}catch(t){if(t instanceof Wp&&t.status===404)return!1;throw t}}async createNamespaceIfNotExists(e,t){try{return await this.createNamespace(e,t)}catch(s){if(s instanceof Wp&&s.status===409)return;throw s}}};function Hh(e){return e.join("")}var Dae=class{constructor(e,t="",s){this.client=e,this.prefix=t,this.accessDelegation=s}async listTables(e){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Hh(e.namespace)}/tables`})).data.identifiers}async createTable(e,t){const s={};return this.accessDelegation&&(s["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Hh(e.namespace)}/tables`,body:t,headers:s})).data.metadata}async updateTable(e,t){const s=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Hh(e.namespace)}/tables/${e.name}`,body:t});return{"metadata-location":s.data["metadata-location"],metadata:s.data.metadata}}async dropTable(e,t){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Hh(e.namespace)}/tables/${e.name}`,query:{purgeRequested:String((t==null?void 0:t.purge)??!1)}})}async loadTable(e){const t={};return this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Hh(e.namespace)}/tables/${e.name}`,headers:t})).data.metadata}async tableExists(e){const t={};this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Hh(e.namespace)}/tables/${e.name}`,headers:t}),!0}catch(s){if(s instanceof Wp&&s.status===404)return!1;throw s}}async createTableIfNotExists(e,t){try{return await this.createTable(e,t)}catch(s){if(s instanceof Wp&&s.status===409)return await this.loadTable({namespace:e.namespace,name:t.name});throw s}}},Oae=class{constructor(e){var a;let t="v1";e.catalogName&&(t+=`/${e.catalogName}`);const s=e.baseUrl.endsWith("/")?e.baseUrl:`${e.baseUrl}/`;this.client=Tae({baseUrl:s,auth:e.auth,fetchImpl:e.fetch}),this.accessDelegation=(a=e.accessDelegation)==null?void 0:a.join(","),this.namespaceOps=new Iae(this.client,t),this.tableOps=new Dae(this.client,t,this.accessDelegation)}async listNamespaces(e){return this.namespaceOps.listNamespaces(e)}async createNamespace(e,t){return this.namespaceOps.createNamespace(e,t)}async dropNamespace(e){await this.namespaceOps.dropNamespace(e)}async loadNamespaceMetadata(e){return this.namespaceOps.loadNamespaceMetadata(e)}async listTables(e){return this.tableOps.listTables(e)}async createTable(e,t){return this.tableOps.createTable(e,t)}async updateTable(e,t){return this.tableOps.updateTable(e,t)}async dropTable(e,t){await this.tableOps.dropTable(e,t)}async loadTable(e){return this.tableOps.loadTable(e)}async namespaceExists(e){return this.namespaceOps.namespaceExists(e)}async tableExists(e){return this.tableOps.tableExists(e)}async createNamespaceIfNotExists(e,t){return this.namespaceOps.createNamespaceIfNotExists(e,t)}async createTableIfNotExists(e,t){return this.tableOps.createTableIfNotExists(e,t)}};class Rae{constructor(t,s={},a){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},wV),s),this.fetch=m6(a)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(t){return kt(this,void 0,void 0,function*(){try{return{data:yield hl(this.fetch,`${this.url}/bucket`,{name:t},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(qs(s))return{data:null,error:s};throw s}})}listBuckets(t){return kt(this,void 0,void 0,function*(){try{const s=new URLSearchParams;(t==null?void 0:t.limit)!==void 0&&s.set("limit",t.limit.toString()),(t==null?void 0:t.offset)!==void 0&&s.set("offset",t.offset.toString()),t!=null&&t.sortColumn&&s.set("sortColumn",t.sortColumn),t!=null&&t.sortOrder&&s.set("sortOrder",t.sortOrder),t!=null&&t.search&&s.set("search",t.search);const a=s.toString(),n=a?`${this.url}/bucket?${a}`:`${this.url}/bucket`;return{data:yield Vp(this.fetch,n,{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(qs(s))return{data:null,error:s};throw s}})}deleteBucket(t){return kt(this,void 0,void 0,function*(){try{return{data:yield f6(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(qs(s))return{data:null,error:s};throw s}})}from(t){if(!vae(t))throw new MN("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");return new Oae({baseUrl:this.url,catalogName:t,auth:{type:"custom",getHeaders:()=>kt(this,void 0,void 0,function*(){return this.headers})},fetch:this.fetch})}}const x6={"X-Client-Info":`storage-js/${vV}`,"Content-Type":"application/json"};class jV extends Error{constructor(t){super(t),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}}function Xi(e){return typeof e=="object"&&e!==null&&"__isStorageVectorsError"in e}class z4 extends jV{constructor(t,s,a){super(t),this.name="StorageVectorsApiError",this.status=s,this.statusCode=a}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Mae extends jV{constructor(t,s){super(t),this.name="StorageVectorsUnknownError",this.originalError=s}}var QD;(function(e){e.InternalError="InternalError",e.S3VectorConflictException="S3VectorConflictException",e.S3VectorNotFoundException="S3VectorNotFoundException",e.S3VectorBucketNotEmpty="S3VectorBucketNotEmpty",e.S3VectorMaxBucketsExceeded="S3VectorMaxBucketsExceeded",e.S3VectorMaxIndexesExceeded="S3VectorMaxIndexesExceeded"})(QD||(QD={}));const g6=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),Lae=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},ZD=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),Fae=(e,t,s)=>kt(void 0,void 0,void 0,function*(){if(e&&typeof e=="object"&&"status"in e&&"ok"in e&&typeof e.status=="number"&&!(s!=null&&s.noResolveJson)){const n=e.status||500,i=e;if(typeof i.json=="function")i.json().then(o=>{const l=(o==null?void 0:o.statusCode)||(o==null?void 0:o.code)||n+"";t(new z4(ZD(o),n,l))}).catch(()=>{const o=n+"",l=i.statusText||`HTTP ${n} error`;t(new z4(l,n,o))});else{const o=n+"",l=i.statusText||`HTTP ${n} error`;t(new z4(l,n,o))}}else t(new Mae(ZD(e),e))}),Bae=(e,t,s,a)=>{const n={method:e,headers:(t==null?void 0:t.headers)||{}};return a?(Lae(a)?(n.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),n.body=JSON.stringify(a)):n.body=a,Object.assign(Object.assign({},n),s)):n};function $ae(e,t,s,a,n,i){return kt(this,void 0,void 0,function*(){return new Promise((o,l)=>{e(s,Bae(t,a,n,i)).then(c=>{if(!c.ok)throw c;if(a!=null&&a.noResolveJson)return c;const d=c.headers.get("content-type");return!d||!d.includes("application/json")?{}:c.json()}).then(c=>o(c)).catch(c=>Fae(c,l,a))})})}function Qi(e,t,s,a,n){return kt(this,void 0,void 0,function*(){return $ae(e,"POST",t,a,n,s)})}class Uae{constructor(t,s={},a){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},x6),s),this.fetch=g6(a)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(t){return kt(this,void 0,void 0,function*(){try{return{data:(yield Qi(this.fetch,`${this.url}/CreateIndex`,t,{headers:this.headers}))||{},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Xi(s))return{data:null,error:s};throw s}})}getIndex(t,s){return kt(this,void 0,void 0,function*(){try{return{data:yield Qi(this.fetch,`${this.url}/GetIndex`,{vectorBucketName:t,indexName:s},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Xi(a))return{data:null,error:a};throw a}})}listIndexes(t){return kt(this,void 0,void 0,function*(){try{return{data:yield Qi(this.fetch,`${this.url}/ListIndexes`,t,{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Xi(s))return{data:null,error:s};throw s}})}deleteIndex(t,s){return kt(this,void 0,void 0,function*(){try{return{data:(yield Qi(this.fetch,`${this.url}/DeleteIndex`,{vectorBucketName:t,indexName:s},{headers:this.headers}))||{},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Xi(a))return{data:null,error:a};throw a}})}}class Vae{constructor(t,s={},a){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},x6),s),this.fetch=g6(a)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(t){return kt(this,void 0,void 0,function*(){try{if(t.vectors.length<1||t.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:(yield Qi(this.fetch,`${this.url}/PutVectors`,t,{headers:this.headers}))||{},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Xi(s))return{data:null,error:s};throw s}})}getVectors(t){return kt(this,void 0,void 0,function*(){try{return{data:yield Qi(this.fetch,`${this.url}/GetVectors`,t,{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Xi(s))return{data:null,error:s};throw s}})}listVectors(t){return kt(this,void 0,void 0,function*(){try{if(t.segmentCount!==void 0){if(t.segmentCount<1||t.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(t.segmentIndex!==void 0&&(t.segmentIndex<0||t.segmentIndex>=t.segmentCount))throw new Error(`segmentIndex must be between 0 and ${t.segmentCount-1}`)}return{data:yield Qi(this.fetch,`${this.url}/ListVectors`,t,{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Xi(s))return{data:null,error:s};throw s}})}queryVectors(t){return kt(this,void 0,void 0,function*(){try{return{data:yield Qi(this.fetch,`${this.url}/QueryVectors`,t,{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Xi(s))return{data:null,error:s};throw s}})}deleteVectors(t){return kt(this,void 0,void 0,function*(){try{if(t.keys.length<1||t.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:(yield Qi(this.fetch,`${this.url}/DeleteVectors`,t,{headers:this.headers}))||{},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Xi(s))return{data:null,error:s};throw s}})}}class Wae{constructor(t,s={},a){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},x6),s),this.fetch=g6(a)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(t){return kt(this,void 0,void 0,function*(){try{return{data:(yield Qi(this.fetch,`${this.url}/CreateVectorBucket`,{vectorBucketName:t},{headers:this.headers}))||{},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Xi(s))return{data:null,error:s};throw s}})}getBucket(t){return kt(this,void 0,void 0,function*(){try{return{data:yield Qi(this.fetch,`${this.url}/GetVectorBucket`,{vectorBucketName:t},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Xi(s))return{data:null,error:s};throw s}})}listBuckets(){return kt(this,arguments,void 0,function*(t={}){try{return{data:yield Qi(this.fetch,`${this.url}/ListVectorBuckets`,t,{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Xi(s))return{data:null,error:s};throw s}})}deleteBucket(t){return kt(this,void 0,void 0,function*(){try{return{data:(yield Qi(this.fetch,`${this.url}/DeleteVectorBucket`,{vectorBucketName:t},{headers:this.headers}))||{},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Xi(s))return{data:null,error:s};throw s}})}}class zae extends Wae{constructor(t,s={}){super(t,s.headers||{},s.fetch)}from(t){return new qae(this.url,this.headers,t,this.fetch)}createBucket(t){const s=Object.create(null,{createBucket:{get:()=>super.createBucket}});return kt(this,void 0,void 0,function*(){return s.createBucket.call(this,t)})}getBucket(t){const s=Object.create(null,{getBucket:{get:()=>super.getBucket}});return kt(this,void 0,void 0,function*(){return s.getBucket.call(this,t)})}listBuckets(){const t=Object.create(null,{listBuckets:{get:()=>super.listBuckets}});return kt(this,arguments,void 0,function*(s={}){return t.listBuckets.call(this,s)})}deleteBucket(t){const s=Object.create(null,{deleteBucket:{get:()=>super.deleteBucket}});return kt(this,void 0,void 0,function*(){return s.deleteBucket.call(this,t)})}}class qae extends Uae{constructor(t,s,a,n){super(t,s,n),this.vectorBucketName=a}createIndex(t){const s=Object.create(null,{createIndex:{get:()=>super.createIndex}});return kt(this,void 0,void 0,function*(){return s.createIndex.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName}))})}listIndexes(){const t=Object.create(null,{listIndexes:{get:()=>super.listIndexes}});return kt(this,arguments,void 0,function*(s={}){return t.listIndexes.call(this,Object.assign(Object.assign({},s),{vectorBucketName:this.vectorBucketName}))})}getIndex(t){const s=Object.create(null,{getIndex:{get:()=>super.getIndex}});return kt(this,void 0,void 0,function*(){return s.getIndex.call(this,this.vectorBucketName,t)})}deleteIndex(t){const s=Object.create(null,{deleteIndex:{get:()=>super.deleteIndex}});return kt(this,void 0,void 0,function*(){return s.deleteIndex.call(this,this.vectorBucketName,t)})}index(t){return new Hae(this.url,this.headers,this.vectorBucketName,t,this.fetch)}}class Hae extends Vae{constructor(t,s,a,n,i){super(t,s,i),this.vectorBucketName=a,this.indexName=n}putVectors(t){const s=Object.create(null,{putVectors:{get:()=>super.putVectors}});return kt(this,void 0,void 0,function*(){return s.putVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}getVectors(t){const s=Object.create(null,{getVectors:{get:()=>super.getVectors}});return kt(this,void 0,void 0,function*(){return s.getVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}listVectors(){const t=Object.create(null,{listVectors:{get:()=>super.listVectors}});return kt(this,arguments,void 0,function*(s={}){return t.listVectors.call(this,Object.assign(Object.assign({},s),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}queryVectors(t){const s=Object.create(null,{queryVectors:{get:()=>super.queryVectors}});return kt(this,void 0,void 0,function*(){return s.queryVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}deleteVectors(t){const s=Object.create(null,{deleteVectors:{get:()=>super.deleteVectors}});return kt(this,void 0,void 0,function*(){return s.deleteVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}}class Kae extends Eae{constructor(t,s={},a,n){super(t,s,a,n)}from(t){return new _ae(this.url,this.headers,t,this.fetch)}get vectors(){return new zae(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new Rae(this.url+"/iceberg",this.headers,this.fetch)}}const Gae="2.86.0";let Mg="";typeof Deno<"u"?Mg="deno":typeof document<"u"?Mg="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Mg="react-native":Mg="node";const Yae={"X-Client-Info":`supabase-js-${Mg}/${Gae}`},Xae={headers:Yae},Qae={schema:"public"},Zae={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Jae={},ene=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),tne=()=>Headers,rne=(e,t,s)=>{const a=ene(s),n=tne();return async(i,o)=>{var l;const c=(l=await t())!==null&&l!==void 0?l:e;let d=new n(o==null?void 0:o.headers);return d.has("apikey")||d.set("apikey",e),d.has("Authorization")||d.set("Authorization",`Bearer ${c}`),a(i,Object.assign(Object.assign({},o),{headers:d}))}};function sne(e){return e.endsWith("/")?e:e+"/"}function ane(e,t){var s,a;const{db:n,auth:i,realtime:o,global:l}=e,{db:c,auth:d,realtime:h,global:f}=t,x={db:Object.assign(Object.assign({},c),n),auth:Object.assign(Object.assign({},d),i),realtime:Object.assign(Object.assign({},h),o),storage:{},global:Object.assign(Object.assign(Object.assign({},f),l),{headers:Object.assign(Object.assign({},(s=f==null?void 0:f.headers)!==null&&s!==void 0?s:{}),(a=l==null?void 0:l.headers)!==null&&a!==void 0?a:{})}),accessToken:async()=>""};return e.accessToken?x.accessToken=e.accessToken:delete x.accessToken,x}function nne(e){const t=e==null?void 0:e.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(sne(t))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const NV="2.86.0",ym=30*1e3,L5=3,q4=L5*ym,ine="http://localhost:9999",one="supabase.auth.token",lne={"X-Client-Info":`gotrue-js/${NV}`},F5="X-Supabase-Api-Version",kV={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},cne=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,dne=10*60*1e3;class zp extends Error{constructor(t,s,a){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=s,this.code=a}}function Mt(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class une extends zp{constructor(t,s,a){super(t,s,a),this.name="AuthApiError",this.status=s,this.code=a}}function hne(e){return Mt(e)&&e.name==="AuthApiError"}class _0 extends zp{constructor(t,s){super(t),this.name="AuthUnknownError",this.originalError=s}}class zu extends zp{constructor(t,s,a,n){super(t,a,n),this.name=s,this.status=a}}class qi extends zu{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function mne(e){return Mt(e)&&e.name==="AuthSessionMissingError"}class Kh extends zu{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class pv extends zu{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class yv extends zu{constructor(t,s=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=s}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function fne(e){return Mt(e)&&e.name==="AuthImplicitGrantRedirectError"}class JD extends zu{constructor(t,s=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=s}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class B5 extends zu{constructor(t,s){super(t,"AuthRetryableFetchError",s,void 0)}}function H4(e){return Mt(e)&&e.name==="AuthRetryableFetchError"}class eO extends zu{constructor(t,s,a){super(t,"AuthWeakPasswordError",s,"weak_password"),this.reasons=a}}class $5 extends zu{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const Aw="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),tO=` 	
\r=`.split(""),xne=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<tO.length;t+=1)e[tO[t].charCodeAt(0)]=-2;for(let t=0;t<Aw.length;t+=1)e[Aw[t].charCodeAt(0)]=t;return e})();function rO(e,t,s){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const a=t.queue>>t.queuedBits-6&63;s(Aw[a]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const a=t.queue>>t.queuedBits-6&63;s(Aw[a]),t.queuedBits-=6}}function SV(e,t,s){const a=xne[e];if(a>-1)for(t.queue=t.queue<<6|a,t.queuedBits+=6;t.queuedBits>=8;)s(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(a===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function sO(e){const t=[],s=o=>{t.push(String.fromCodePoint(o))},a={utf8seq:0,codepoint:0},n={queue:0,queuedBits:0},i=o=>{yne(o,a,s)};for(let o=0;o<e.length;o+=1)SV(e.charCodeAt(o),n,i);return t.join("")}function gne(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function pne(e,t){for(let s=0;s<e.length;s+=1){let a=e.charCodeAt(s);if(a>55295&&a<=56319){const n=(a-55296)*1024&65535;a=(e.charCodeAt(s+1)-56320&65535|n)+65536,s+=1}gne(a,t)}}function yne(e,t,s){if(t.utf8seq===0){if(e<=127){s(e);return}for(let a=1;a<6;a+=1)if(!(e>>7-a&1)){t.utf8seq=a;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&s(t.codepoint)}}function sf(e){const t=[],s={queue:0,queuedBits:0},a=n=>{t.push(n)};for(let n=0;n<e.length;n+=1)SV(e.charCodeAt(n),s,a);return new Uint8Array(t)}function bne(e){const t=[];return pne(e,s=>t.push(s)),new Uint8Array(t)}function O0(e){const t=[],s={queue:0,queuedBits:0},a=n=>{t.push(n)};return e.forEach(n=>rO(n,s,a)),rO(null,s,a),t.join("")}function vne(e){return Math.round(Date.now()/1e3)+e}function wne(){return Symbol("auth-callback")}const wn=()=>typeof window<"u"&&typeof document<"u",n0={tested:!1,writable:!1},CV=()=>{if(!wn())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(n0.tested)return n0.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),n0.tested=!0,n0.writable=!0}catch{n0.tested=!0,n0.writable=!1}return n0.writable};function jne(e){const t={},s=new URL(e);if(s.hash&&s.hash[0]==="#")try{new URLSearchParams(s.hash.substring(1)).forEach((n,i)=>{t[i]=n})}catch{}return s.searchParams.forEach((a,n)=>{t[n]=a}),t}const _V=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),Nne=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",bm=async(e,t,s)=>{await e.setItem(t,JSON.stringify(s))},i0=async(e,t)=>{const s=await e.getItem(t);if(!s)return null;try{return JSON.parse(s)}catch{return s}},Id=async(e,t)=>{await e.removeItem(t)};class LN{constructor(){this.promise=new LN.promiseConstructor((t,s)=>{this.resolve=t,this.reject=s})}}LN.promiseConstructor=Promise;function K4(e){const t=e.split(".");if(t.length!==3)throw new $5("Invalid JWT structure");for(let a=0;a<t.length;a++)if(!cne.test(t[a]))throw new $5("JWT not in base64url format");return{header:JSON.parse(sO(t[0])),payload:JSON.parse(sO(t[1])),signature:sf(t[2]),raw:{header:t[0],payload:t[1]}}}async function kne(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function Sne(e,t){return new Promise((a,n)=>{(async()=>{for(let i=0;i<1/0;i++)try{const o=await e(i);if(!t(i,null,o)){a(o);return}}catch(o){if(!t(i,o)){n(o);return}}})()})}function Cne(e){return("0"+e.toString(16)).substr(-2)}function _ne(){const t=new Uint32Array(56);if(typeof crypto>"u"){const s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",a=s.length;let n="";for(let i=0;i<56;i++)n+=s.charAt(Math.floor(Math.random()*a));return n}return crypto.getRandomValues(t),Array.from(t,Cne).join("")}async function Ene(e){const s=new TextEncoder().encode(e),a=await crypto.subtle.digest("SHA-256",s),n=new Uint8Array(a);return Array.from(n).map(i=>String.fromCharCode(i)).join("")}async function Ane(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const s=await Ene(e);return btoa(s).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Gh(e,t,s=!1){const a=_ne();let n=a;s&&(n+="/PASSWORD_RECOVERY"),await bm(e,`${t}-code-verifier`,n);const i=await Ane(a);return[i,a===i?"plain":"s256"]}const Pne=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function Tne(e){const t=e.headers.get(F5);if(!t||!t.match(Pne))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function Ine(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function Dne(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const One=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Yh(e){if(!One.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function G4(){const e={};return new Proxy(e,{get:(t,s)=>{if(s==="__isUserNotAvailableProxy")return!0;if(typeof s=="symbol"){const a=s.toString();if(a==="Symbol(Symbol.toPrimitive)"||a==="Symbol(Symbol.toStringTag)"||a==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${s}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,s)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${s}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,s)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${s}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function Rne(e,t){return new Proxy(e,{get:(s,a,n)=>{if(a==="__isInsecureUserWarningProxy")return!0;if(typeof a=="symbol"){const i=a.toString();if(i==="Symbol(Symbol.toPrimitive)"||i==="Symbol(Symbol.toStringTag)"||i==="Symbol(util.inspect.custom)"||i==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(s,a,n)}return!t.value&&typeof a=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),t.value=!0),Reflect.get(s,a,n)}})}function aO(e){return JSON.parse(JSON.stringify(e))}const f0=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),Mne=[502,503,504];async function nO(e){var t;if(!Nne(e))throw new B5(f0(e),0);if(Mne.includes(e.status))throw new B5(f0(e),e.status);let s;try{s=await e.json()}catch(i){throw new _0(f0(i),i)}let a;const n=Tne(e);if(n&&n.getTime()>=kV["2024-01-01"].timestamp&&typeof s=="object"&&s&&typeof s.code=="string"?a=s.code:typeof s=="object"&&s&&typeof s.error_code=="string"&&(a=s.error_code),a){if(a==="weak_password")throw new eO(f0(s),e.status,((t=s.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(a==="session_not_found")throw new qi}else if(typeof s=="object"&&s&&typeof s.weak_password=="object"&&s.weak_password&&Array.isArray(s.weak_password.reasons)&&s.weak_password.reasons.length&&s.weak_password.reasons.reduce((i,o)=>i&&typeof o=="string",!0))throw new eO(f0(s),e.status,s.weak_password.reasons);throw new une(f0(s),e.status||500,a)}const Lne=(e,t,s,a)=>{const n={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?n:(n.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),n.body=JSON.stringify(a),Object.assign(Object.assign({},n),s))};async function qt(e,t,s,a){var n;const i=Object.assign({},a==null?void 0:a.headers);i[F5]||(i[F5]=kV["2024-01-01"].name),a!=null&&a.jwt&&(i.Authorization=`Bearer ${a.jwt}`);const o=(n=a==null?void 0:a.query)!==null&&n!==void 0?n:{};a!=null&&a.redirectTo&&(o.redirect_to=a.redirectTo);const l=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",c=await Fne(e,t,s+l,{headers:i,noResolveJson:a==null?void 0:a.noResolveJson},{},a==null?void 0:a.body);return a!=null&&a.xform?a==null?void 0:a.xform(c):{data:Object.assign({},c),error:null}}async function Fne(e,t,s,a,n,i){const o=Lne(t,a,n,i);let l;try{l=await e(s,Object.assign({},o))}catch(c){throw console.error(c),new B5(f0(c),0)}if(l.ok||await nO(l),a!=null&&a.noResolveJson)return l;try{return await l.json()}catch(c){await nO(c)}}function dl(e){var t;let s=null;Une(e)&&(s=Object.assign({},e),e.expires_at||(s.expires_at=vne(e.expires_in)));const a=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:s,user:a},error:null}}function iO(e){const t=dl(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((s,a)=>s&&typeof a=="string",!0)&&(t.data.weak_password=e.weak_password),t}function Qd(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function Bne(e){return{data:e,error:null}}function $ne(e){const{action_link:t,email_otp:s,hashed_token:a,redirect_to:n,verification_type:i}=e,o=xx(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:t,email_otp:s,hashed_token:a,redirect_to:n,verification_type:i},c=Object.assign({},o);return{data:{properties:l,user:c},error:null}}function oO(e){return e}function Une(e){return e.access_token&&e.refresh_token&&e.expires_in}const Y4=["global","local","others"];class Vne{constructor({url:t="",headers:s={},fetch:a}){this.url=t,this.headers=s,this.fetch=_V(a),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(t,s=Y4[0]){if(Y4.indexOf(s)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Y4.join(", ")}`);try{return await qt(this.fetch,"POST",`${this.url}/logout?scope=${s}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(a){if(Mt(a))return{data:null,error:a};throw a}}async inviteUserByEmail(t,s={}){try{return await qt(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:s.data},headers:this.headers,redirectTo:s.redirectTo,xform:Qd})}catch(a){if(Mt(a))return{data:{user:null},error:a};throw a}}async generateLink(t){try{const{options:s}=t,a=xx(t,["options"]),n=Object.assign(Object.assign({},a),s);return"newEmail"in a&&(n.new_email=a==null?void 0:a.newEmail,delete n.newEmail),await qt(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:n,headers:this.headers,xform:$ne,redirectTo:s==null?void 0:s.redirectTo})}catch(s){if(Mt(s))return{data:{properties:null,user:null},error:s};throw s}}async createUser(t){try{return await qt(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:Qd})}catch(s){if(Mt(s))return{data:{user:null},error:s};throw s}}async listUsers(t){var s,a,n,i,o,l,c;try{const d={nextPage:null,lastPage:0,total:0},h=await qt(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(a=(s=t==null?void 0:t.page)===null||s===void 0?void 0:s.toString())!==null&&a!==void 0?a:"",per_page:(i=(n=t==null?void 0:t.perPage)===null||n===void 0?void 0:n.toString())!==null&&i!==void 0?i:""},xform:oO});if(h.error)throw h.error;const f=await h.json(),x=(o=h.headers.get("x-total-count"))!==null&&o!==void 0?o:0,y=(c=(l=h.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return y.length>0&&(y.forEach(v=>{const w=parseInt(v.split(";")[0].split("=")[1].substring(0,1)),N=JSON.parse(v.split(";")[1].split("=")[1]);d[`${N}Page`]=w}),d.total=parseInt(x)),{data:Object.assign(Object.assign({},f),d),error:null}}catch(d){if(Mt(d))return{data:{users:[]},error:d};throw d}}async getUserById(t){Yh(t);try{return await qt(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:Qd})}catch(s){if(Mt(s))return{data:{user:null},error:s};throw s}}async updateUserById(t,s){Yh(t);try{return await qt(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:s,headers:this.headers,xform:Qd})}catch(a){if(Mt(a))return{data:{user:null},error:a};throw a}}async deleteUser(t,s=!1){Yh(t);try{return await qt(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:s},xform:Qd})}catch(a){if(Mt(a))return{data:{user:null},error:a};throw a}}async _listFactors(t){Yh(t.userId);try{const{data:s,error:a}=await qt(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:n=>({data:{factors:n},error:null})});return{data:s,error:a}}catch(s){if(Mt(s))return{data:null,error:s};throw s}}async _deleteFactor(t){Yh(t.userId),Yh(t.id);try{return{data:await qt(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(s){if(Mt(s))return{data:null,error:s};throw s}}async _listOAuthClients(t){var s,a,n,i,o,l,c;try{const d={nextPage:null,lastPage:0,total:0},h=await qt(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(a=(s=t==null?void 0:t.page)===null||s===void 0?void 0:s.toString())!==null&&a!==void 0?a:"",per_page:(i=(n=t==null?void 0:t.perPage)===null||n===void 0?void 0:n.toString())!==null&&i!==void 0?i:""},xform:oO});if(h.error)throw h.error;const f=await h.json(),x=(o=h.headers.get("x-total-count"))!==null&&o!==void 0?o:0,y=(c=(l=h.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return y.length>0&&(y.forEach(v=>{const w=parseInt(v.split(";")[0].split("=")[1].substring(0,1)),N=JSON.parse(v.split(";")[1].split("=")[1]);d[`${N}Page`]=w}),d.total=parseInt(x)),{data:Object.assign(Object.assign({},f),d),error:null}}catch(d){if(Mt(d))return{data:{clients:[]},error:d};throw d}}async _createOAuthClient(t){try{return await qt(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:t,headers:this.headers,xform:s=>({data:s,error:null})})}catch(s){if(Mt(s))return{data:null,error:s};throw s}}async _getOAuthClient(t){try{return await qt(this.fetch,"GET",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,xform:s=>({data:s,error:null})})}catch(s){if(Mt(s))return{data:null,error:s};throw s}}async _updateOAuthClient(t,s){try{return await qt(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${t}`,{body:s,headers:this.headers,xform:a=>({data:a,error:null})})}catch(a){if(Mt(a))return{data:null,error:a};throw a}}async _deleteOAuthClient(t){try{return await qt(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(s){if(Mt(s))return{data:null,error:s};throw s}}async _regenerateOAuthClientSecret(t){try{return await qt(this.fetch,"POST",`${this.url}/admin/oauth/clients/${t}/regenerate_secret`,{headers:this.headers,xform:s=>({data:s,error:null})})}catch(s){if(Mt(s))return{data:null,error:s};throw s}}}function lO(e={}){return{getItem:t=>e[t]||null,setItem:(t,s)=>{e[t]=s},removeItem:t=>{delete e[t]}}}const Xh={debug:!!(globalThis&&CV()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class EV extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class Wne extends EV{}async function zne(e,t,s){Xh.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const a=new globalThis.AbortController;return t>0&&setTimeout(()=>{a.abort(),Xh.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:a.signal},async n=>{if(n){Xh.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,n.name);try{return await s()}finally{Xh.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,n.name)}}else{if(t===0)throw Xh.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new Wne(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(Xh.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await s()}}))}function qne(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function AV(e){if(!/^0x[a-fA-F0-9]{40}$/.test(e))throw new Error(`@supabase/auth-js: Address "${e}" is invalid.`);return e.toLowerCase()}function Hne(e){return parseInt(e,16)}function Kne(e){const t=new TextEncoder().encode(e);return"0x"+Array.from(t,a=>a.toString(16).padStart(2,"0")).join("")}function Gne(e){var t;const{chainId:s,domain:a,expirationTime:n,issuedAt:i=new Date,nonce:o,notBefore:l,requestId:c,resources:d,scheme:h,uri:f,version:x}=e;{if(!Number.isInteger(s))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${s}`);if(!a)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(o&&o.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${o}`);if(!f)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(x!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${x}`);if(!((t=e.statement)===null||t===void 0)&&t.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${e.statement}`)}const y=AV(e.address),v=h?`${h}://${a}`:a,w=e.statement?`${e.statement}
`:"",N=`${v} wants you to sign in with your Ethereum account:
${y}

${w}`;let k=`URI: ${f}
Version: ${x}
Chain ID: ${s}${o?`
Nonce: ${o}`:""}
Issued At: ${i.toISOString()}`;if(n&&(k+=`
Expiration Time: ${n.toISOString()}`),l&&(k+=`
Not Before: ${l.toISOString()}`),c&&(k+=`
Request ID: ${c}`),d){let C=`
Resources:`;for(const E of d){if(!E||typeof E!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${E}`);C+=`
- ${E}`}k+=C}return`${N}
${k}`}class ka extends Error{constructor({message:t,code:s,cause:a,name:n}){var i;super(t,{cause:a}),this.__isWebAuthnError=!0,this.name=(i=n??(a instanceof Error?a.name:void 0))!==null&&i!==void 0?i:"Unknown Error",this.code=s}}class Pw extends ka{constructor(t,s){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:s,message:t}),this.name="WebAuthnUnknownError",this.originalError=s}}function Yne({error:e,options:t}){var s,a,n;const{publicKey:i}=t;if(!i)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new ka({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else if(e.name==="ConstraintError"){if(((s=i.authenticatorSelection)===null||s===void 0?void 0:s.requireResidentKey)===!0)return new ka({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:e});if(t.mediation==="conditional"&&((a=i.authenticatorSelection)===null||a===void 0?void 0:a.userVerification)==="required")return new ka({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:e});if(((n=i.authenticatorSelection)===null||n===void 0?void 0:n.userVerification)==="required")return new ka({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:e})}else{if(e.name==="InvalidStateError")return new ka({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:e});if(e.name==="NotAllowedError")return new ka({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="NotSupportedError")return i.pubKeyCredParams.filter(l=>l.type==="public-key").length===0?new ka({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:e}):new ka({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:e});if(e.name==="SecurityError"){const o=window.location.hostname;if(PV(o)){if(i.rp.id!==o)return new ka({message:`The RP ID "${i.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new ka({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="TypeError"){if(i.user.id.byteLength<1||i.user.id.byteLength>64)return new ka({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:e})}else if(e.name==="UnknownError")return new ka({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new ka({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}function Xne({error:e,options:t}){const{publicKey:s}=t;if(!s)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new ka({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else{if(e.name==="NotAllowedError")return new ka({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="SecurityError"){const a=window.location.hostname;if(PV(a)){if(s.rpId!==a)return new ka({message:`The RP ID "${s.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new ka({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="UnknownError")return new ka({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new ka({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}class Qne{createNewAbortSignal(){if(this.controller){const s=new Error("Cancelling existing WebAuthn API call for new one");s.name="AbortError",this.controller.abort(s)}const t=new AbortController;return this.controller=t,t.signal}cancelCeremony(){if(this.controller){const t=new Error("Manually cancelling existing WebAuthn API call");t.name="AbortError",this.controller.abort(t),this.controller=void 0}}}const Zne=new Qne;function Jne(e){if(!e)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(e);const{challenge:t,user:s,excludeCredentials:a}=e,n=xx(e,["challenge","user","excludeCredentials"]),i=sf(t).buffer,o=Object.assign(Object.assign({},s),{id:sf(s.id).buffer}),l=Object.assign(Object.assign({},n),{challenge:i,user:o});if(a&&a.length>0){l.excludeCredentials=new Array(a.length);for(let c=0;c<a.length;c++){const d=a[c];l.excludeCredentials[c]=Object.assign(Object.assign({},d),{id:sf(d.id).buffer,type:d.type||"public-key",transports:d.transports})}}return l}function eie(e){if(!e)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(e);const{challenge:t,allowCredentials:s}=e,a=xx(e,["challenge","allowCredentials"]),n=sf(t).buffer,i=Object.assign(Object.assign({},a),{challenge:n});if(s&&s.length>0){i.allowCredentials=new Array(s.length);for(let o=0;o<s.length;o++){const l=s[o];i.allowCredentials[o]=Object.assign(Object.assign({},l),{id:sf(l.id).buffer,type:l.type||"public-key",transports:l.transports})}}return i}function tie(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const s=e;return{id:e.id,rawId:e.id,response:{attestationObject:O0(new Uint8Array(e.response.attestationObject)),clientDataJSON:O0(new Uint8Array(e.response.clientDataJSON))},type:"public-key",clientExtensionResults:e.getClientExtensionResults(),authenticatorAttachment:(t=s.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function rie(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const s=e,a=e.getClientExtensionResults(),n=e.response;return{id:e.id,rawId:e.id,response:{authenticatorData:O0(new Uint8Array(n.authenticatorData)),clientDataJSON:O0(new Uint8Array(n.clientDataJSON)),signature:O0(new Uint8Array(n.signature)),userHandle:n.userHandle?O0(new Uint8Array(n.userHandle)):void 0},type:"public-key",clientExtensionResults:a,authenticatorAttachment:(t=s.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function PV(e){return e==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(e)}function cO(){var e,t;return!!(wn()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.create)=="function"&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.get)=="function")}async function sie(e){try{const t=await navigator.credentials.create(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new Pw("Browser returned unexpected credential type",t)}:{data:null,error:new Pw("Empty credential response",t)}}catch(t){return{data:null,error:Yne({error:t,options:e})}}}async function aie(e){try{const t=await navigator.credentials.get(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new Pw("Browser returned unexpected credential type",t)}:{data:null,error:new Pw("Empty credential response",t)}}catch(t){return{data:null,error:Xne({error:t,options:e})}}}const nie={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},iie={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function Tw(...e){const t=n=>n!==null&&typeof n=="object"&&!Array.isArray(n),s=n=>n instanceof ArrayBuffer||ArrayBuffer.isView(n),a={};for(const n of e)if(n)for(const i in n){const o=n[i];if(o!==void 0)if(Array.isArray(o))a[i]=o;else if(s(o))a[i]=o;else if(t(o)){const l=a[i];t(l)?a[i]=Tw(l,o):a[i]=Tw(o)}else a[i]=o}return a}function oie(e,t){return Tw(nie,e,t||{})}function lie(e,t){return Tw(iie,e,t||{})}class cie{constructor(t){this.client=t,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(t){return this.client.mfa.enroll(Object.assign(Object.assign({},t),{factorType:"webauthn"}))}async _challenge({factorId:t,webauthn:s,friendlyName:a,signal:n},i){try{const{data:o,error:l}=await this.client.mfa.challenge({factorId:t,webauthn:s});if(!o)return{data:null,error:l};const c=n??Zne.createNewAbortSignal();if(o.webauthn.type==="create"){const{user:d}=o.webauthn.credential_options.publicKey;d.name||(d.name=`${d.id}:${a}`),d.displayName||(d.displayName=d.name)}switch(o.webauthn.type){case"create":{const d=oie(o.webauthn.credential_options.publicKey,i==null?void 0:i.create),{data:h,error:f}=await sie({publicKey:d,signal:c});return h?{data:{factorId:t,challengeId:o.id,webauthn:{type:o.webauthn.type,credential_response:h}},error:null}:{data:null,error:f}}case"request":{const d=lie(o.webauthn.credential_options.publicKey,i==null?void 0:i.request),{data:h,error:f}=await aie(Object.assign(Object.assign({},o.webauthn.credential_options),{publicKey:d,signal:c}));return h?{data:{factorId:t,challengeId:o.id,webauthn:{type:o.webauthn.type,credential_response:h}},error:null}:{data:null,error:f}}}}catch(o){return Mt(o)?{data:null,error:o}:{data:null,error:new _0("Unexpected error in challenge",o)}}}async _verify({challengeId:t,factorId:s,webauthn:a}){return this.client.mfa.verify({factorId:s,challengeId:t,webauthn:a})}async _authenticate({factorId:t,webauthn:{rpId:s=typeof window<"u"?window.location.hostname:void 0,rpOrigins:a=typeof window<"u"?[window.location.origin]:void 0,signal:n}={}},i){if(!s)return{data:null,error:new zp("rpId is required for WebAuthn authentication")};try{if(!cO())return{data:null,error:new _0("Browser does not support WebAuthn",null)};const{data:o,error:l}=await this.challenge({factorId:t,webauthn:{rpId:s,rpOrigins:a},signal:n},{request:i});if(!o)return{data:null,error:l};const{webauthn:c}=o;return this._verify({factorId:t,challengeId:o.challengeId,webauthn:{type:c.type,rpId:s,rpOrigins:a,credential_response:c.credential_response}})}catch(o){return Mt(o)?{data:null,error:o}:{data:null,error:new _0("Unexpected error in authenticate",o)}}}async _register({friendlyName:t,webauthn:{rpId:s=typeof window<"u"?window.location.hostname:void 0,rpOrigins:a=typeof window<"u"?[window.location.origin]:void 0,signal:n}={}},i){if(!s)return{data:null,error:new zp("rpId is required for WebAuthn registration")};try{if(!cO())return{data:null,error:new _0("Browser does not support WebAuthn",null)};const{data:o,error:l}=await this._enroll({friendlyName:t});if(!o)return await this.client.mfa.listFactors().then(h=>{var f;return(f=h.data)===null||f===void 0?void 0:f.all.find(x=>x.factor_type==="webauthn"&&x.friendly_name===t&&x.status!=="unverified")}).then(h=>h?this.client.mfa.unenroll({factorId:h==null?void 0:h.id}):void 0),{data:null,error:l};const{data:c,error:d}=await this._challenge({factorId:o.id,friendlyName:o.friendly_name,webauthn:{rpId:s,rpOrigins:a},signal:n},{create:i});return c?this._verify({factorId:o.id,challengeId:c.challengeId,webauthn:{rpId:s,rpOrigins:a,type:c.webauthn.type,credential_response:c.webauthn.credential_response}}):{data:null,error:d}}catch(o){return Mt(o)?{data:null,error:o}:{data:null,error:new _0("Unexpected error in register",o)}}}}qne();const die={url:ine,storageKey:one,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:lne,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function dO(e,t,s){return await s()}const Qh={};class qp{get jwks(){var t,s;return(s=(t=Qh[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&s!==void 0?s:{keys:[]}}set jwks(t){Qh[this.storageKey]=Object.assign(Object.assign({},Qh[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,s;return(s=(t=Qh[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&s!==void 0?s:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){Qh[this.storageKey]=Object.assign(Object.assign({},Qh[this.storageKey]),{cachedAt:t})}constructor(t){var s,a,n;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const i=Object.assign(Object.assign({},die),t);if(this.storageKey=i.storageKey,this.instanceID=(s=qp.nextInstanceID[this.storageKey])!==null&&s!==void 0?s:0,qp.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!i.debug,typeof i.debug=="function"&&(this.logger=i.debug),this.instanceID>0&&wn()){const o=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(o),this.logDebugMessages&&console.trace(o)}if(this.persistSession=i.persistSession,this.autoRefreshToken=i.autoRefreshToken,this.admin=new Vne({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=_V(i.fetch),this.lock=i.lock||dO,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,this.hasCustomAuthorizationHeader=i.hasCustomAuthorizationHeader,this.throwOnError=i.throwOnError,i.lock?this.lock=i.lock:wn()&&(!((a=globalThis==null?void 0:globalThis.navigator)===null||a===void 0)&&a.locks)?this.lock=zne:this.lock=dO,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new cie(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(i.storage?this.storage=i.storage:CV()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=lO(this.memoryStorage)),i.userStorage&&(this.userStorage=i.userStorage)):(this.memoryStorage={},this.storage=lO(this.memoryStorage)),wn()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(o){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",o)}(n=this.broadcastChannel)===null||n===void 0||n.addEventListener("message",async o=>{this._debug("received broadcast notification from other tab or client",o),await this._notifyAllSubscribers(o.data.event,o.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(t){if(this.throwOnError&&t&&t.error)throw t.error;return t}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${NV}) ${new Date().toISOString()}`}_debug(...t){return this.logDebugMessages&&this.logger(this._logPrefix(),...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{let s={},a="none";if(wn()&&(s=jne(window.location.href),this._isImplicitGrantCallback(s)?a="implicit":await this._isPKCECallback(s)&&(a="pkce")),wn()&&this.detectSessionInUrl&&a!=="none"){const{data:n,error:i}=await this._getSessionFromURL(s,a);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),fne(i)){const c=(t=i.details)===null||t===void 0?void 0:t.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:o,redirectType:l}=n;return this._debug("#_initialize()","detected session in URL",o,"redirect type",l),await this._saveSession(o),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(s){return Mt(s)?this._returnResult({error:s}):this._returnResult({error:new _0("Unexpected error during initialization",s)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var s,a,n;try{const i=await qt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(a=(s=t==null?void 0:t.options)===null||s===void 0?void 0:s.data)!==null&&a!==void 0?a:{},gotrue_meta_security:{captcha_token:(n=t==null?void 0:t.options)===null||n===void 0?void 0:n.captchaToken}},xform:dl}),{data:o,error:l}=i;if(l||!o)return this._returnResult({data:{user:null,session:null},error:l});const c=o.session,d=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),this._returnResult({data:{user:d,session:c},error:null})}catch(i){if(Mt(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signUp(t){var s,a,n;try{let i;if("email"in t){const{email:h,password:f,options:x}=t;let y=null,v=null;this.flowType==="pkce"&&([y,v]=await Gh(this.storage,this.storageKey)),i=await qt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:x==null?void 0:x.emailRedirectTo,body:{email:h,password:f,data:(s=x==null?void 0:x.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:x==null?void 0:x.captchaToken},code_challenge:y,code_challenge_method:v},xform:dl})}else if("phone"in t){const{phone:h,password:f,options:x}=t;i=await qt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:h,password:f,data:(a=x==null?void 0:x.data)!==null&&a!==void 0?a:{},channel:(n=x==null?void 0:x.channel)!==null&&n!==void 0?n:"sms",gotrue_meta_security:{captcha_token:x==null?void 0:x.captchaToken}},xform:dl})}else throw new pv("You must provide either an email or phone number and a password");const{data:o,error:l}=i;if(l||!o)return this._returnResult({data:{user:null,session:null},error:l});const c=o.session,d=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),this._returnResult({data:{user:d,session:c},error:null})}catch(i){if(Mt(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signInWithPassword(t){try{let s;if("email"in t){const{email:i,password:o,options:l}=t;s=await qt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:iO})}else if("phone"in t){const{phone:i,password:o,options:l}=t;s=await qt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:iO})}else throw new pv("You must provide either an email or phone number and a password");const{data:a,error:n}=s;if(n)return this._returnResult({data:{user:null,session:null},error:n});if(!a||!a.session||!a.user){const i=new Kh;return this._returnResult({data:{user:null,session:null},error:i})}return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",a.session)),this._returnResult({data:Object.assign({user:a.user,session:a.session},a.weak_password?{weakPassword:a.weak_password}:null),error:n})}catch(s){if(Mt(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signInWithOAuth(t){var s,a,n,i;return await this._handleProviderSignIn(t.provider,{redirectTo:(s=t.options)===null||s===void 0?void 0:s.redirectTo,scopes:(a=t.options)===null||a===void 0?void 0:a.scopes,queryParams:(n=t.options)===null||n===void 0?void 0:n.queryParams,skipBrowserRedirect:(i=t.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:s}=t;switch(s){case"ethereum":return await this.signInWithEthereum(t);case"solana":return await this.signInWithSolana(t);default:throw new Error(`@supabase/auth-js: Unsupported chain "${s}"`)}}async signInWithEthereum(t){var s,a,n,i,o,l,c,d,h,f,x;let y,v;if("message"in t)y=t.message,v=t.signature;else{const{chain:w,wallet:N,statement:k,options:C}=t;let E;if(wn())if(typeof N=="object")E=N;else{const R=window;if("ethereum"in R&&typeof R.ethereum=="object"&&"request"in R.ethereum&&typeof R.ethereum.request=="function")E=R.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof N!="object"||!(C!=null&&C.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");E=N}const _=new URL((s=C==null?void 0:C.url)!==null&&s!==void 0?s:window.location.href),T=await E.request({method:"eth_requestAccounts"}).then(R=>R).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!T||T.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const A=AV(T[0]);let P=(a=C==null?void 0:C.signInWithEthereum)===null||a===void 0?void 0:a.chainId;if(!P){const R=await E.request({method:"eth_chainId"});P=Hne(R)}const M={domain:_.host,address:A,statement:k,uri:_.href,version:"1",chainId:P,nonce:(n=C==null?void 0:C.signInWithEthereum)===null||n===void 0?void 0:n.nonce,issuedAt:(o=(i=C==null?void 0:C.signInWithEthereum)===null||i===void 0?void 0:i.issuedAt)!==null&&o!==void 0?o:new Date,expirationTime:(l=C==null?void 0:C.signInWithEthereum)===null||l===void 0?void 0:l.expirationTime,notBefore:(c=C==null?void 0:C.signInWithEthereum)===null||c===void 0?void 0:c.notBefore,requestId:(d=C==null?void 0:C.signInWithEthereum)===null||d===void 0?void 0:d.requestId,resources:(h=C==null?void 0:C.signInWithEthereum)===null||h===void 0?void 0:h.resources};y=Gne(M),v=await E.request({method:"personal_sign",params:[Kne(y),A]})}try{const{data:w,error:N}=await qt(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:y,signature:v},!((f=t.options)===null||f===void 0)&&f.captchaToken?{gotrue_meta_security:{captcha_token:(x=t.options)===null||x===void 0?void 0:x.captchaToken}}:null),xform:dl});if(N)throw N;if(!w||!w.session||!w.user){const k=new Kh;return this._returnResult({data:{user:null,session:null},error:k})}return w.session&&(await this._saveSession(w.session),await this._notifyAllSubscribers("SIGNED_IN",w.session)),this._returnResult({data:Object.assign({},w),error:N})}catch(w){if(Mt(w))return this._returnResult({data:{user:null,session:null},error:w});throw w}}async signInWithSolana(t){var s,a,n,i,o,l,c,d,h,f,x,y;let v,w;if("message"in t)v=t.message,w=t.signature;else{const{chain:N,wallet:k,statement:C,options:E}=t;let _;if(wn())if(typeof k=="object")_=k;else{const A=window;if("solana"in A&&typeof A.solana=="object"&&("signIn"in A.solana&&typeof A.solana.signIn=="function"||"signMessage"in A.solana&&typeof A.solana.signMessage=="function"))_=A.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof k!="object"||!(E!=null&&E.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");_=k}const T=new URL((s=E==null?void 0:E.url)!==null&&s!==void 0?s:window.location.href);if("signIn"in _&&_.signIn){const A=await _.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},E==null?void 0:E.signInWithSolana),{version:"1",domain:T.host,uri:T.href}),C?{statement:C}:null));let P;if(Array.isArray(A)&&A[0]&&typeof A[0]=="object")P=A[0];else if(A&&typeof A=="object"&&"signedMessage"in A&&"signature"in A)P=A;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in P&&"signature"in P&&(typeof P.signedMessage=="string"||P.signedMessage instanceof Uint8Array)&&P.signature instanceof Uint8Array)v=typeof P.signedMessage=="string"?P.signedMessage:new TextDecoder().decode(P.signedMessage),w=P.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in _)||typeof _.signMessage!="function"||!("publicKey"in _)||typeof _!="object"||!_.publicKey||!("toBase58"in _.publicKey)||typeof _.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");v=[`${T.host} wants you to sign in with your Solana account:`,_.publicKey.toBase58(),...C?["",C,""]:[""],"Version: 1",`URI: ${T.href}`,`Issued At: ${(n=(a=E==null?void 0:E.signInWithSolana)===null||a===void 0?void 0:a.issuedAt)!==null&&n!==void 0?n:new Date().toISOString()}`,...!((i=E==null?void 0:E.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${E.signInWithSolana.notBefore}`]:[],...!((o=E==null?void 0:E.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${E.signInWithSolana.expirationTime}`]:[],...!((l=E==null?void 0:E.signInWithSolana)===null||l===void 0)&&l.chainId?[`Chain ID: ${E.signInWithSolana.chainId}`]:[],...!((c=E==null?void 0:E.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${E.signInWithSolana.nonce}`]:[],...!((d=E==null?void 0:E.signInWithSolana)===null||d===void 0)&&d.requestId?[`Request ID: ${E.signInWithSolana.requestId}`]:[],...!((f=(h=E==null?void 0:E.signInWithSolana)===null||h===void 0?void 0:h.resources)===null||f===void 0)&&f.length?["Resources",...E.signInWithSolana.resources.map(P=>`- ${P}`)]:[]].join(`
`);const A=await _.signMessage(new TextEncoder().encode(v),"utf8");if(!A||!(A instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");w=A}}try{const{data:N,error:k}=await qt(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:v,signature:O0(w)},!((x=t.options)===null||x===void 0)&&x.captchaToken?{gotrue_meta_security:{captcha_token:(y=t.options)===null||y===void 0?void 0:y.captchaToken}}:null),xform:dl});if(k)throw k;if(!N||!N.session||!N.user){const C=new Kh;return this._returnResult({data:{user:null,session:null},error:C})}return N.session&&(await this._saveSession(N.session),await this._notifyAllSubscribers("SIGNED_IN",N.session)),this._returnResult({data:Object.assign({},N),error:k})}catch(N){if(Mt(N))return this._returnResult({data:{user:null,session:null},error:N});throw N}}async _exchangeCodeForSession(t){const s=await i0(this.storage,`${this.storageKey}-code-verifier`),[a,n]=(s??"").split("/");try{const{data:i,error:o}=await qt(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:a},xform:dl});if(await Id(this.storage,`${this.storageKey}-code-verifier`),o)throw o;if(!i||!i.session||!i.user){const l=new Kh;return this._returnResult({data:{user:null,session:null,redirectType:null},error:l})}return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),this._returnResult({data:Object.assign(Object.assign({},i),{redirectType:n??null}),error:o})}catch(i){if(Mt(i))return this._returnResult({data:{user:null,session:null,redirectType:null},error:i});throw i}}async signInWithIdToken(t){try{const{options:s,provider:a,token:n,access_token:i,nonce:o}=t,l=await qt(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:a,id_token:n,access_token:i,nonce:o,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}},xform:dl}),{data:c,error:d}=l;if(d)return this._returnResult({data:{user:null,session:null},error:d});if(!c||!c.session||!c.user){const h=new Kh;return this._returnResult({data:{user:null,session:null},error:h})}return c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),this._returnResult({data:c,error:d})}catch(s){if(Mt(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signInWithOtp(t){var s,a,n,i,o;try{if("email"in t){const{email:l,options:c}=t;let d=null,h=null;this.flowType==="pkce"&&([d,h]=await Gh(this.storage,this.storageKey));const{error:f}=await qt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(s=c==null?void 0:c.data)!==null&&s!==void 0?s:{},create_user:(a=c==null?void 0:c.shouldCreateUser)!==null&&a!==void 0?a:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:d,code_challenge_method:h},redirectTo:c==null?void 0:c.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:f})}if("phone"in t){const{phone:l,options:c}=t,{data:d,error:h}=await qt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(n=c==null?void 0:c.data)!==null&&n!==void 0?n:{},create_user:(i=c==null?void 0:c.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(o=c==null?void 0:c.channel)!==null&&o!==void 0?o:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:d==null?void 0:d.message_id},error:h})}throw new pv("You must provide either an email or phone number.")}catch(l){if(Mt(l))return this._returnResult({data:{user:null,session:null},error:l});throw l}}async verifyOtp(t){var s,a;try{let n,i;"options"in t&&(n=(s=t.options)===null||s===void 0?void 0:s.redirectTo,i=(a=t.options)===null||a===void 0?void 0:a.captchaToken);const{data:o,error:l}=await qt(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:i}}),redirectTo:n,xform:dl});if(l)throw l;if(!o)throw new Error("An error occurred on token verification.");const c=o.session,d=o.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),this._returnResult({data:{user:d,session:c},error:null})}catch(n){if(Mt(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithSSO(t){var s,a,n,i,o;try{let l=null,c=null;this.flowType==="pkce"&&([l,c]=await Gh(this.storage,this.storageKey));const d=await qt(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(a=(s=t.options)===null||s===void 0?void 0:s.redirectTo)!==null&&a!==void 0?a:void 0}),!((n=t==null?void 0:t.options)===null||n===void 0)&&n.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:l,code_challenge_method:c}),headers:this.headers,xform:Bne});return!((i=d.data)===null||i===void 0)&&i.url&&wn()&&!(!((o=t.options)===null||o===void 0)&&o.skipBrowserRedirect)&&window.location.assign(d.data.url),this._returnResult(d)}catch(l){if(Mt(l))return this._returnResult({data:null,error:l});throw l}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:s},error:a}=t;if(a)throw a;if(!s)throw new qi;const{error:n}=await qt(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:s.access_token});return this._returnResult({data:{user:null,session:null},error:n})})}catch(t){if(Mt(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async resend(t){try{const s=`${this.url}/resend`;if("email"in t){const{email:a,type:n,options:i}=t,{error:o}=await qt(this.fetch,"POST",s,{headers:this.headers,body:{email:a,type:n,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:o})}else if("phone"in t){const{phone:a,type:n,options:i}=t,{data:o,error:l}=await qt(this.fetch,"POST",s,{headers:this.headers,body:{phone:a,type:n,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:l})}throw new pv("You must provide either an email or phone number and a type")}catch(s){if(Mt(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async s=>s))}async _acquireLock(t,s){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const a=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),n=(async()=>(await a,await s()))();return this.pendingInLock.push((async()=>{try{await n}catch{}})()),n}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const a=s();for(this.pendingInLock.push((async()=>{try{await a}catch{}})()),await a;this.pendingInLock.length;){const n=[...this.pendingInLock];await Promise.all(n),this.pendingInLock.splice(0,n.length)}return await a}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const s=await this.__loadSession();return await t(s)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const s=await i0(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",s),s!==null&&(this._isValidSession(s)?t=s:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const a=t.expires_at?t.expires_at*1e3-Date.now()<q4:!1;if(this._debug("#__loadSession()",`session has${a?"":" not"} expired`,"expires_at",t.expires_at),!a){if(this.userStorage){const o=await i0(this.userStorage,this.storageKey+"-user");o!=null&&o.user?t.user=o.user:t.user=G4()}if(this.storage.isServer&&t.user&&!t.user.__isUserNotAvailableProxy){const o={value:this.suppressGetSessionWarning};t.user=Rne(t.user,o),o.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:t},error:null}}const{data:n,error:i}=await this._callRefreshToken(t.refresh_token);return i?this._returnResult({data:{session:null},error:i}):this._returnResult({data:{session:n},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await qt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:Qd}):await this._useSession(async s=>{var a,n,i;const{data:o,error:l}=s;if(l)throw l;return!(!((a=o.session)===null||a===void 0)&&a.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new qi}:await qt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(n=o.session)===null||n===void 0?void 0:n.access_token)!==null&&i!==void 0?i:void 0,xform:Qd})})}catch(s){if(Mt(s))return mne(s)&&(await this._removeSession(),await Id(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:s});throw s}}async updateUser(t,s={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,s))}async _updateUser(t,s={}){try{return await this._useSession(async a=>{const{data:n,error:i}=a;if(i)throw i;if(!n.session)throw new qi;const o=n.session;let l=null,c=null;this.flowType==="pkce"&&t.email!=null&&([l,c]=await Gh(this.storage,this.storageKey));const{data:d,error:h}=await qt(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:s==null?void 0:s.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:l,code_challenge_method:c}),jwt:o.access_token,xform:Qd});if(h)throw h;return o.user=d.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),this._returnResult({data:{user:o.user},error:null})})}catch(a){if(Mt(a))return this._returnResult({data:{user:null},error:a});throw a}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new qi;const s=Date.now()/1e3;let a=s,n=!0,i=null;const{payload:o}=K4(t.access_token);if(o.exp&&(a=o.exp,n=a<=s),n){const{data:l,error:c}=await this._callRefreshToken(t.refresh_token);if(c)return this._returnResult({data:{user:null,session:null},error:c});if(!l)return{data:{user:null,session:null},error:null};i=l}else{const{data:l,error:c}=await this._getUser(t.access_token);if(c)throw c;i={access_token:t.access_token,refresh_token:t.refresh_token,user:l.user,token_type:"bearer",expires_in:a-s,expires_at:a},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return this._returnResult({data:{user:i.user,session:i},error:null})}catch(s){if(Mt(s))return this._returnResult({data:{session:null,user:null},error:s});throw s}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async s=>{var a;if(!t){const{data:o,error:l}=s;if(l)throw l;t=(a=o.session)!==null&&a!==void 0?a:void 0}if(!(t!=null&&t.refresh_token))throw new qi;const{data:n,error:i}=await this._callRefreshToken(t.refresh_token);return i?this._returnResult({data:{user:null,session:null},error:i}):n?this._returnResult({data:{user:n.user,session:n},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(s){if(Mt(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async _getSessionFromURL(t,s){try{if(!wn())throw new yv("No browser detected.");if(t.error||t.error_description||t.error_code)throw new yv(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(s){case"implicit":if(this.flowType==="pkce")throw new JD("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new yv("Not a valid implicit grant flow url.");break;default:}if(s==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new JD("No code detected.");const{data:C,error:E}=await this._exchangeCodeForSession(t.code);if(E)throw E;const _=new URL(window.location.href);return _.searchParams.delete("code"),window.history.replaceState(window.history.state,"",_.toString()),{data:{session:C.session,redirectType:null},error:null}}const{provider_token:a,provider_refresh_token:n,access_token:i,refresh_token:o,expires_in:l,expires_at:c,token_type:d}=t;if(!i||!l||!o||!d)throw new yv("No session defined in URL");const h=Math.round(Date.now()/1e3),f=parseInt(l);let x=h+f;c&&(x=parseInt(c));const y=x-h;y*1e3<=ym&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${y}s, should have been closer to ${f}s`);const v=x-f;h-v>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",v,x,h):h-v<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",v,x,h);const{data:w,error:N}=await this._getUser(i);if(N)throw N;const k={provider_token:a,provider_refresh_token:n,access_token:i,expires_in:f,expires_at:x,refresh_token:o,token_type:d,user:w.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:k,redirectType:t.type},error:null})}catch(a){if(Mt(a))return this._returnResult({data:{session:null,redirectType:null},error:a});throw a}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const s=await i0(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&s)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async s=>{var a;const{data:n,error:i}=s;if(i)return this._returnResult({error:i});const o=(a=n.session)===null||a===void 0?void 0:a.access_token;if(o){const{error:l}=await this.admin.signOut(o,t);if(l&&!(hne(l)&&(l.status===404||l.status===401||l.status===403)))return this._returnResult({error:l})}return t!=="others"&&(await this._removeSession(),await Id(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(t){const s=wne(),a={id:s,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",s),this.stateChangeEmitters.delete(s)}};return this._debug("#onAuthStateChange()","registered callback with id",s),this.stateChangeEmitters.set(s,a),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(s)})))(),{data:{subscription:a}}}async _emitInitialSession(t){return await this._useSession(async s=>{var a,n;try{const{data:{session:i},error:o}=s;if(o)throw o;await((a=this.stateChangeEmitters.get(t))===null||a===void 0?void 0:a.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",t,"session",i)}catch(i){await((n=this.stateChangeEmitters.get(t))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",i),console.error(i)}})}async resetPasswordForEmail(t,s={}){let a=null,n=null;this.flowType==="pkce"&&([a,n]=await Gh(this.storage,this.storageKey,!0));try{return await qt(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:a,code_challenge_method:n,gotrue_meta_security:{captcha_token:s.captchaToken}},headers:this.headers,redirectTo:s.redirectTo})}catch(i){if(Mt(i))return this._returnResult({data:null,error:i});throw i}}async getUserIdentities(){var t;try{const{data:s,error:a}=await this.getUser();if(a)throw a;return this._returnResult({data:{identities:(t=s.user.identities)!==null&&t!==void 0?t:[]},error:null})}catch(s){if(Mt(s))return this._returnResult({data:null,error:s});throw s}}async linkIdentity(t){return"token"in t?this.linkIdentityIdToken(t):this.linkIdentityOAuth(t)}async linkIdentityOAuth(t){var s;try{const{data:a,error:n}=await this._useSession(async i=>{var o,l,c,d,h;const{data:f,error:x}=i;if(x)throw x;const y=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(o=t.options)===null||o===void 0?void 0:o.redirectTo,scopes:(l=t.options)===null||l===void 0?void 0:l.scopes,queryParams:(c=t.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await qt(this.fetch,"GET",y,{headers:this.headers,jwt:(h=(d=f.session)===null||d===void 0?void 0:d.access_token)!==null&&h!==void 0?h:void 0})});if(n)throw n;return wn()&&!(!((s=t.options)===null||s===void 0)&&s.skipBrowserRedirect)&&window.location.assign(a==null?void 0:a.url),this._returnResult({data:{provider:t.provider,url:a==null?void 0:a.url},error:null})}catch(a){if(Mt(a))return this._returnResult({data:{provider:t.provider,url:null},error:a});throw a}}async linkIdentityIdToken(t){return await this._useSession(async s=>{var a;try{const{error:n,data:{session:i}}=s;if(n)throw n;const{options:o,provider:l,token:c,access_token:d,nonce:h}=t,f=await qt(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(a=i==null?void 0:i.access_token)!==null&&a!==void 0?a:void 0,body:{provider:l,id_token:c,access_token:d,nonce:h,link_identity:!0,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:dl}),{data:x,error:y}=f;return y?this._returnResult({data:{user:null,session:null},error:y}):!x||!x.session||!x.user?this._returnResult({data:{user:null,session:null},error:new Kh}):(x.session&&(await this._saveSession(x.session),await this._notifyAllSubscribers("USER_UPDATED",x.session)),this._returnResult({data:x,error:y}))}catch(n){if(Mt(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}})}async unlinkIdentity(t){try{return await this._useSession(async s=>{var a,n;const{data:i,error:o}=s;if(o)throw o;return await qt(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(n=(a=i.session)===null||a===void 0?void 0:a.access_token)!==null&&n!==void 0?n:void 0})})}catch(s){if(Mt(s))return this._returnResult({data:null,error:s});throw s}}async _refreshAccessToken(t){const s=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(s,"begin");try{const a=Date.now();return await Sne(async n=>(n>0&&await kne(200*Math.pow(2,n-1)),this._debug(s,"refreshing attempt",n),await qt(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:dl})),(n,i)=>{const o=200*Math.pow(2,n);return i&&H4(i)&&Date.now()+o-a<ym})}catch(a){if(this._debug(s,"error",a),Mt(a))return this._returnResult({data:{session:null,user:null},error:a});throw a}finally{this._debug(s,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,s){const a=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:s.redirectTo,scopes:s.scopes,queryParams:s.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",s,"url",a),wn()&&!s.skipBrowserRedirect&&window.location.assign(a),{data:{provider:t,url:a},error:null}}async _recoverAndRefresh(){var t,s;const a="#_recoverAndRefresh()";this._debug(a,"begin");try{const n=await i0(this.storage,this.storageKey);if(n&&this.userStorage){let o=await i0(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!o&&(o={user:n.user},await bm(this.userStorage,this.storageKey+"-user",o)),n.user=(t=o==null?void 0:o.user)!==null&&t!==void 0?t:G4()}else if(n&&!n.user&&!n.user){const o=await i0(this.storage,this.storageKey+"-user");o&&(o!=null&&o.user)?(n.user=o.user,await Id(this.storage,this.storageKey+"-user"),await bm(this.storage,this.storageKey,n)):n.user=G4()}if(this._debug(a,"session from storage",n),!this._isValidSession(n)){this._debug(a,"session is not valid"),n!==null&&await this._removeSession();return}const i=((s=n.expires_at)!==null&&s!==void 0?s:1/0)*1e3-Date.now()<q4;if(this._debug(a,`session has${i?"":" not"} expired with margin of ${q4}s`),i){if(this.autoRefreshToken&&n.refresh_token){const{error:o}=await this._callRefreshToken(n.refresh_token);o&&(console.error(o),H4(o)||(this._debug(a,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else if(n.user&&n.user.__isUserNotAvailableProxy===!0)try{const{data:o,error:l}=await this._getUser(n.access_token);!l&&(o!=null&&o.user)?(n.user=o.user,await this._saveSession(n),await this._notifyAllSubscribers("SIGNED_IN",n)):this._debug(a,"could not get user data, skipping SIGNED_IN notification")}catch(o){console.error("Error getting user data:",o),this._debug(a,"error getting user data, skipping SIGNED_IN notification",o)}else await this._notifyAllSubscribers("SIGNED_IN",n)}catch(n){this._debug(a,"error",n),console.error(n);return}finally{this._debug(a,"end")}}async _callRefreshToken(t){var s,a;if(!t)throw new qi;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const n=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(n,"begin");try{this.refreshingDeferred=new LN;const{data:i,error:o}=await this._refreshAccessToken(t);if(o)throw o;if(!i.session)throw new qi;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const l={data:i.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(i){if(this._debug(n,"error",i),Mt(i)){const o={data:null,error:i};return H4(i)||await this._removeSession(),(s=this.refreshingDeferred)===null||s===void 0||s.resolve(o),o}throw(a=this.refreshingDeferred)===null||a===void 0||a.reject(i),i}finally{this.refreshingDeferred=null,this._debug(n,"end")}}async _notifyAllSubscribers(t,s,a=!0){const n=`#_notifyAllSubscribers(${t})`;this._debug(n,"begin",s,`broadcast = ${a}`);try{this.broadcastChannel&&a&&this.broadcastChannel.postMessage({event:t,session:s});const i=[],o=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(t,s)}catch(c){i.push(c)}});if(await Promise.all(o),i.length>0){for(let l=0;l<i.length;l+=1)console.error(i[l]);throw i[0]}}finally{this._debug(n,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0;const s=Object.assign({},t),a=s.user&&s.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!a&&s.user&&await bm(this.userStorage,this.storageKey+"-user",{user:s.user});const n=Object.assign({},s);delete n.user;const i=aO(n);await bm(this.storage,this.storageKey,i)}else{const n=aO(s);await bm(this.storage,this.storageKey,n)}}async _removeSession(){this._debug("#_removeSession()"),await Id(this.storage,this.storageKey),await Id(this.storage,this.storageKey+"-code-verifier"),await Id(this.storage,this.storageKey+"-user"),this.userStorage&&await Id(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&wn()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(s){console.error("removing visibilitychange callback failed",s)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),ym);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async s=>{const{data:{session:a}}=s;if(!a||!a.refresh_token||!a.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const n=Math.floor((a.expires_at*1e3-t)/ym);this._debug("#_autoRefreshTokenTick()",`access token expires in ${n} ticks, a tick lasts ${ym}ms, refresh threshold is ${L5} ticks`),n<=L5&&await this._callRefreshToken(a.refresh_token)})}catch(s){console.error("Auto refresh tick failed with error. This is likely a transient error.",s)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof EV)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!wn()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const s=`#_onVisibilityChanged(${t})`;this._debug(s,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(s,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,s,a){const n=[`provider=${encodeURIComponent(s)}`];if(a!=null&&a.redirectTo&&n.push(`redirect_to=${encodeURIComponent(a.redirectTo)}`),a!=null&&a.scopes&&n.push(`scopes=${encodeURIComponent(a.scopes)}`),this.flowType==="pkce"){const[i,o]=await Gh(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(o)}`});n.push(l.toString())}if(a!=null&&a.queryParams){const i=new URLSearchParams(a.queryParams);n.push(i.toString())}return a!=null&&a.skipBrowserRedirect&&n.push(`skip_http_redirect=${a.skipBrowserRedirect}`),`${t}?${n.join("&")}`}async _unenroll(t){try{return await this._useSession(async s=>{var a;const{data:n,error:i}=s;return i?this._returnResult({data:null,error:i}):await qt(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(a=n==null?void 0:n.session)===null||a===void 0?void 0:a.access_token})})}catch(s){if(Mt(s))return this._returnResult({data:null,error:s});throw s}}async _enroll(t){try{return await this._useSession(async s=>{var a,n;const{data:i,error:o}=s;if(o)return this._returnResult({data:null,error:o});const l=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:t.factorType==="totp"?{issuer:t.issuer}:{}),{data:c,error:d}=await qt(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(a=i==null?void 0:i.session)===null||a===void 0?void 0:a.access_token});return d?this._returnResult({data:null,error:d}):(t.factorType==="totp"&&c.type==="totp"&&(!((n=c==null?void 0:c.totp)===null||n===void 0)&&n.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),this._returnResult({data:c,error:null}))})}catch(s){if(Mt(s))return this._returnResult({data:null,error:s});throw s}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async s=>{var a;const{data:n,error:i}=s;if(i)return this._returnResult({data:null,error:i});const o=Object.assign({challenge_id:t.challengeId},"webauthn"in t?{webauthn:Object.assign(Object.assign({},t.webauthn),{credential_response:t.webauthn.type==="create"?tie(t.webauthn.credential_response):rie(t.webauthn.credential_response)})}:{code:t.code}),{data:l,error:c}=await qt(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:o,headers:this.headers,jwt:(a=n==null?void 0:n.session)===null||a===void 0?void 0:a.access_token});return c?this._returnResult({data:null,error:c}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+l.expires_in},l)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",l),this._returnResult({data:l,error:c}))})}catch(s){if(Mt(s))return this._returnResult({data:null,error:s});throw s}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async s=>{var a;const{data:n,error:i}=s;if(i)return this._returnResult({data:null,error:i});const o=await qt(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:t,headers:this.headers,jwt:(a=n==null?void 0:n.session)===null||a===void 0?void 0:a.access_token});if(o.error)return o;const{data:l}=o;if(l.type!=="webauthn")return{data:l,error:null};switch(l.webauthn.type){case"create":return{data:Object.assign(Object.assign({},l),{webauthn:Object.assign(Object.assign({},l.webauthn),{credential_options:Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:Jne(l.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},l),{webauthn:Object.assign(Object.assign({},l.webauthn),{credential_options:Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:eie(l.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(s){if(Mt(s))return this._returnResult({data:null,error:s});throw s}})}async _challengeAndVerify(t){const{data:s,error:a}=await this._challenge({factorId:t.factorId});return a?this._returnResult({data:null,error:a}):await this._verify({factorId:t.factorId,challengeId:s.id,code:t.code})}async _listFactors(){var t;const{data:{user:s},error:a}=await this.getUser();if(a)return{data:null,error:a};const n={all:[],phone:[],totp:[],webauthn:[]};for(const i of(t=s==null?void 0:s.factors)!==null&&t!==void 0?t:[])n.all.push(i),i.status==="verified"&&n[i.factor_type].push(i);return{data:n,error:null}}async _getAuthenticatorAssuranceLevel(){var t,s;const{data:{session:a},error:n}=await this.getSession();if(n)return this._returnResult({data:null,error:n});if(!a)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:i}=K4(a.access_token);let o=null;i.aal&&(o=i.aal);let l=o;((s=(t=a.user.factors)===null||t===void 0?void 0:t.filter(h=>h.status==="verified"))!==null&&s!==void 0?s:[]).length>0&&(l="aal2");const d=i.amr||[];return{data:{currentLevel:o,nextLevel:l,currentAuthenticationMethods:d},error:null}}async _getAuthorizationDetails(t){try{return await this._useSession(async s=>{const{data:{session:a},error:n}=s;return n?this._returnResult({data:null,error:n}):a?await qt(this.fetch,"GET",`${this.url}/oauth/authorizations/${t}`,{headers:this.headers,jwt:a.access_token,xform:i=>({data:i,error:null})}):this._returnResult({data:null,error:new qi})})}catch(s){if(Mt(s))return this._returnResult({data:null,error:s});throw s}}async _approveAuthorization(t,s){try{return await this._useSession(async a=>{const{data:{session:n},error:i}=a;if(i)return this._returnResult({data:null,error:i});if(!n)return this._returnResult({data:null,error:new qi});const o=await qt(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:n.access_token,body:{action:"approve"},xform:l=>({data:l,error:null})});return o.data&&o.data.redirect_url&&wn()&&!(s!=null&&s.skipBrowserRedirect)&&window.location.assign(o.data.redirect_url),o})}catch(a){if(Mt(a))return this._returnResult({data:null,error:a});throw a}}async _denyAuthorization(t,s){try{return await this._useSession(async a=>{const{data:{session:n},error:i}=a;if(i)return this._returnResult({data:null,error:i});if(!n)return this._returnResult({data:null,error:new qi});const o=await qt(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:n.access_token,body:{action:"deny"},xform:l=>({data:l,error:null})});return o.data&&o.data.redirect_url&&wn()&&!(s!=null&&s.skipBrowserRedirect)&&window.location.assign(o.data.redirect_url),o})}catch(a){if(Mt(a))return this._returnResult({data:null,error:a});throw a}}async _listOAuthGrants(){try{return await this._useSession(async t=>{const{data:{session:s},error:a}=t;return a?this._returnResult({data:null,error:a}):s?await qt(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:s.access_token,xform:n=>({data:n,error:null})}):this._returnResult({data:null,error:new qi})})}catch(t){if(Mt(t))return this._returnResult({data:null,error:t});throw t}}async _revokeOAuthGrant(t){try{return await this._useSession(async s=>{const{data:{session:a},error:n}=s;return n?this._returnResult({data:null,error:n}):a?(await qt(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:a.access_token,query:{client_id:t.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new qi})})}catch(s){if(Mt(s))return this._returnResult({data:null,error:s});throw s}}async fetchJwk(t,s={keys:[]}){let a=s.keys.find(l=>l.kid===t);if(a)return a;const n=Date.now();if(a=this.jwks.keys.find(l=>l.kid===t),a&&this.jwks_cached_at+dne>n)return a;const{data:i,error:o}=await qt(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;return!i.keys||i.keys.length===0||(this.jwks=i,this.jwks_cached_at=n,a=i.keys.find(l=>l.kid===t),!a)?null:a}async getClaims(t,s={}){try{let a=t;if(!a){const{data:y,error:v}=await this.getSession();if(v||!y.session)return this._returnResult({data:null,error:v});a=y.session.access_token}const{header:n,payload:i,signature:o,raw:{header:l,payload:c}}=K4(a);s!=null&&s.allowExpired||Ine(i.exp);const d=!n.alg||n.alg.startsWith("HS")||!n.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(n.kid,s!=null&&s.keys?{keys:s.keys}:s==null?void 0:s.jwks);if(!d){const{error:y}=await this.getUser(a);if(y)throw y;return{data:{claims:i,header:n,signature:o},error:null}}const h=Dne(n.alg),f=await crypto.subtle.importKey("jwk",d,h,!0,["verify"]);if(!await crypto.subtle.verify(h,f,o,bne(`${l}.${c}`)))throw new $5("Invalid JWT signature");return{data:{claims:i,header:n,signature:o},error:null}}catch(a){if(Mt(a))return this._returnResult({data:null,error:a});throw a}}}qp.nextInstanceID={};const uie=qp;class hie extends uie{constructor(t){super(t)}}class mie{constructor(t,s,a){var n,i,o;this.supabaseUrl=t,this.supabaseKey=s;const l=nne(t);if(!s)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",l),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",l),this.storageUrl=new URL("storage/v1",l),this.functionsUrl=new URL("functions/v1",l);const c=`sb-${l.hostname.split(".")[0]}-auth-token`,d={db:Qae,realtime:Jae,auth:Object.assign(Object.assign({},Zae),{storageKey:c}),global:Xae},h=ane(a??{},d);this.storageKey=(n=h.auth.storageKey)!==null&&n!==void 0?n:"",this.headers=(i=h.global.headers)!==null&&i!==void 0?i:{},h.accessToken?(this.accessToken=h.accessToken,this.auth=new Proxy({},{get:(f,x)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(x)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=h.auth)!==null&&o!==void 0?o:{},this.headers,h.global.fetch),this.fetch=rne(s,this._getAccessToken.bind(this),h.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},h.realtime)),this.accessToken&&this.accessToken().then(f=>this.realtime.setAuth(f)).catch(f=>console.warn("Failed to set initial Realtime auth token:",f)),this.rest=new Jse(new URL("rest/v1",l).href,{headers:this.headers,schema:h.db.schema,fetch:this.fetch}),this.storage=new Kae(this.storageUrl.href,this.headers,this.fetch,a==null?void 0:a.storage),h.accessToken||this._listenForAuthEvents()}get functions(){return new Xse(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,s={},a={head:!1,get:!1,count:void 0}){return this.rest.rpc(t,s,a)}channel(t,s={config:{}}){return this.realtime.channel(t,s)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var t,s;if(this.accessToken)return await this.accessToken();const{data:a}=await this.auth.getSession();return(s=(t=a.session)===null||t===void 0?void 0:t.access_token)!==null&&s!==void 0?s:this.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:s,detectSessionInUrl:a,storage:n,userStorage:i,storageKey:o,flowType:l,lock:c,debug:d,throwOnError:h},f,x){const y={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new hie({url:this.authUrl.href,headers:Object.assign(Object.assign({},y),f),storageKey:o,autoRefreshToken:t,persistSession:s,detectSessionInUrl:a,storage:n,userStorage:i,flowType:l,lock:c,debug:d,throwOnError:h,fetch:x,hasCustomAuthorizationHeader:Object.keys(this.headers).some(v=>v.toLowerCase()==="authorization")})}_initRealtimeClient(t){return new gae(this.realtimeUrl.href,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((s,a)=>{this._handleTokenChanged(s,"CLIENT",a==null?void 0:a.access_token)})}_handleTokenChanged(t,s,a){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==a?(this.changedAccessToken=a,this.realtime.setAuth(a)):t==="SIGNED_OUT"&&(this.realtime.setAuth(),s=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const p6=(e,t,s)=>new mie(e,t,s);function fie(){if(typeof window<"u"||typeof process>"u")return!1;const e=process.version;if(e==null)return!1;const t=e.match(/^v(\d+)\./);return t?parseInt(t[1],10)<=18:!1}fie()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const xie="https://akiecgwcxadcpqlvntmf.supabase.co",gie="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImFraWVjZ3djeGFkY3BxbHZudG1mIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjQyODMzMzIsImV4cCI6MjA3OTg1OTMzMn0.L2ePGMJRjBqHS-M1d9mxys7I9bZv93YYr9dzQzCQINE",X=p6(xie,gie);function af(e){if(!e)return"";let t=e.replace(/[^\d+]/g,"");return t.startsWith("+")&&(t=t.substring(1)),t.startsWith("232")&&(t=t.substring(3)),!t.startsWith("0")&&t.length===8&&(t="0"+t),t.length===8&&(t="0"+t),t}function pie(e){if(!e)return"Phone number is required";const t=af(e);return t.length<9?"Phone number is too short. Enter 9 digits (e.g., 077123456)":t.length>9?"Phone number is too long. Enter 9 digits (e.g., 077123456)":t.startsWith("0")?null:"Phone number must start with 0"}var TV={},Vy={},FN={};const yie={},bie=Object.freeze(Object.defineProperty({__proto__:null,default:yie},Symbol.toStringTag,{value:"Module"})),vie=KF(bie);/**
 * @otplib/plugin-crypto
 *
 * @author Gerald Yeo <contact@fusedthought.com>
 * @version: 12.0.1
 * @license: MIT
 **/Object.defineProperty(FN,"__esModule",{value:!0});function wie(e){return e&&typeof e=="object"&&"default"in e?e.default:e}var IV=wie(vie);const jie=(e,t,s)=>IV.createHmac(e,Buffer.from(t,"hex")).update(Buffer.from(s,"hex")).digest().toString("hex"),Nie=(e,t)=>IV.randomBytes(e).toString(t);FN.createDigest=jie;FN.createRandomBytes=Nie;var BN={},y6={},b6={},kie="ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",uO=[255,255,26,27,28,29,30,31,255,255,255,255,255,255,255,255,255,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,255,255,255,255,255,255,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,255,255,255,255,255];function Sie(e){var t=Math.floor(e.length/5);return e.length%5===0?t:t+1}b6.encode=function(e){Buffer.isBuffer(e)||(e=new Buffer(e));for(var t=0,s=0,a=0,n=0,i=new Buffer(Sie(e)*8);t<e.length;){var o=e[t];a>3?(n=o&255>>a,a=(a+5)%8,n=n<<a|(t+1<e.length?e[t+1]:0)>>8-a,t++):(n=o>>8-(a+5)&31,a=(a+5)%8,a===0&&t++),i[s]=kie.charCodeAt(n),s++}for(t=s;t<i.length;t++)i[t]=61;return i};b6.decode=function(e){var t=0,s=0,a,n=0;Buffer.isBuffer(e)||(e=new Buffer(e));for(var i=new Buffer(Math.ceil(e.length*5/8)),o=0;o<e.length&&e[o]!==61;o++){var l=e[o]-48;if(l<uO.length)s=uO[l],t<=3?(t=(t+5)%8,t===0?(a|=s,i[n]=a,n++,a=0):a|=255&s<<8-t):(t=(t+5)%8,a|=255&s>>>t,i[n]=a,n++,a=255&s<<8-t);else throw new Error("Invalid input - it is not base32 encoded string")}return i.slice(0,n)};var DV=b6;y6.encode=DV.encode;y6.decode=DV.decode;/**
 * @otplib/plugin-thirty-two
 *
 * @author Gerald Yeo <contact@fusedthought.com>
 * @version: 12.0.1
 * @license: MIT
 **/Object.defineProperty(BN,"__esModule",{value:!0});function Cie(e){return e&&typeof e=="object"&&"default"in e?e.default:e}var OV=Cie(y6);const _ie=(e,t)=>OV.decode(e).toString(t),Eie=(e,t)=>OV.encode(Buffer.from(e,t).toString("ascii")).toString().replace(/=/g,"");BN.keyDecoder=_ie;BN.keyEncoder=Eie;var RV={};/**
 * @otplib/core
 *
 * @author Gerald Yeo <contact@fusedthought.com>
 * @version: 12.0.1
 * @license: MIT
 **/(function(e){Object.defineProperty(e,"__esModule",{value:!0});function t(Z){return Object.keys(Z).map(Q=>Z[Q])}(function(Z){Z.SHA1="sha1",Z.SHA256="sha256",Z.SHA512="sha512"})(e.HashAlgorithms||(e.HashAlgorithms={}));const s=t(e.HashAlgorithms);(function(Z){Z.ASCII="ascii",Z.BASE64="base64",Z.HEX="hex",Z.LATIN1="latin1",Z.UTF8="utf8"})(e.KeyEncodings||(e.KeyEncodings={}));const a=t(e.KeyEncodings);(function(Z){Z.HOTP="hotp",Z.TOTP="totp"})(e.Strategy||(e.Strategy={}));const n=t(e.Strategy),i=()=>{throw new Error("Please provide an options.createDigest implementation.")};function o(Z){return/^(\d+)$/.test(Z)}function l(Z,Q,re){return Z.length>=Q?Z:`${Array(Q+1).join(re)}${Z}`.slice(-1*Q)}function c(Z){const Q=`otpauth://${Z.type}/{labelPrefix}:{accountName}?secret={secret}{query}`,re=[];if(n.indexOf(Z.type)<0)throw new Error(`Expecting options.type to be one of ${n.join(", ")}. Received ${Z.type}.`);if(Z.type==="hotp"){if(Z.counter==null||typeof Z.counter!="number")throw new Error('Expecting options.counter to be a number when options.type is "hotp".');re.push(`&counter=${Z.counter}`)}return Z.type==="totp"&&Z.step&&re.push(`&period=${Z.step}`),Z.digits&&re.push(`&digits=${Z.digits}`),Z.algorithm&&re.push(`&algorithm=${Z.algorithm.toUpperCase()}`),Z.issuer&&re.push(`&issuer=${encodeURIComponent(Z.issuer)}`),Q.replace("{labelPrefix}",encodeURIComponent(Z.issuer||Z.accountName)).replace("{accountName}",encodeURIComponent(Z.accountName)).replace("{secret}",Z.secret).replace("{query}",re.join(""))}class d{constructor(Q={}){this._defaultOptions=Object.freeze({...Q}),this._options=Object.freeze({})}create(Q={}){return new d(Q)}clone(Q={}){const re=this.create({...this._defaultOptions,...Q});return re.options=this._options,re}get options(){return Object.freeze({...this._defaultOptions,...this._options})}set options(Q){this._options=Object.freeze({...this._options,...Q})}allOptions(){return this.options}resetOptions(){this._options=Object.freeze({})}}function h(Z){if(typeof Z.createDigest!="function")throw new Error("Expecting options.createDigest to be a function.");if(typeof Z.createHmacKey!="function")throw new Error("Expecting options.createHmacKey to be a function.");if(typeof Z.digits!="number")throw new Error("Expecting options.digits to be a number.");if(!Z.algorithm||s.indexOf(Z.algorithm)<0)throw new Error(`Expecting options.algorithm to be one of ${s.join(", ")}. Received ${Z.algorithm}.`);if(!Z.encoding||a.indexOf(Z.encoding)<0)throw new Error(`Expecting options.encoding to be one of ${a.join(", ")}. Received ${Z.encoding}.`)}const f=(Z,Q,re)=>Buffer.from(Q,re).toString("hex");function x(){return{algorithm:e.HashAlgorithms.SHA1,createHmacKey:f,createDigest:i,digits:6,encoding:e.KeyEncodings.ASCII}}function y(Z){const Q={...x(),...Z};return h(Q),Object.freeze(Q)}function v(Z){const Q=Z.toString(16);return l(Q,16,"0")}function w(Z,Q){const re=Buffer.from(Z,"hex"),pe=re[re.length-1]&15,je=((re[pe]&127)<<24|(re[pe+1]&255)<<16|(re[pe+2]&255)<<8|re[pe+3]&255)%Math.pow(10,Q);return l(String(je),Q,"0")}function N(Z,Q,re){const pe=v(Q),Se=re.createHmacKey(re.algorithm,Z,re.encoding);return re.createDigest(re.algorithm,Se,pe)}function k(Z,Q,re){const pe=re.digest||N(Z,Q,re);return w(pe,re.digits)}function C(Z,Q,re,pe){if(!o(Z))return!1;const Se=k(Q,re,pe);return Z===Se}function E(Z,Q,re,pe,Se){return c({algorithm:Se.algorithm,digits:Se.digits,type:e.Strategy.HOTP,accountName:Z,counter:pe,issuer:Q,secret:re})}class _ extends d{create(Q={}){return new _(Q)}allOptions(){return y(this.options)}generate(Q,re){return k(Q,re,this.allOptions())}check(Q,re,pe){return C(Q,re,pe,this.allOptions())}verify(Q){if(typeof Q!="object")throw new Error("Expecting argument 0 of verify to be an object");return this.check(Q.token,Q.secret,Q.counter)}keyuri(Q,re,pe,Se){return E(Q,re,pe,Se,this.allOptions())}}function T(Z){if(typeof Z=="number")return[Math.abs(Z),Math.abs(Z)];if(Array.isArray(Z)){const[Q,re]=Z;if(typeof Q=="number"&&typeof re=="number")return[Math.abs(Q),Math.abs(re)]}throw new Error("Expecting options.window to be an number or [number, number].")}function A(Z){if(h(Z),T(Z.window),typeof Z.epoch!="number")throw new Error("Expecting options.epoch to be a number.");if(typeof Z.step!="number")throw new Error("Expecting options.step to be a number.")}const P=(Z,Q,re)=>{const pe=Z.length,Se=Buffer.from(Z,Q).toString("hex");if(pe<re){const je=new Array(re-pe+1).join(Se);return Buffer.from(je,"hex").slice(0,re).toString("hex")}return Se},M=(Z,Q,re)=>{switch(Z){case e.HashAlgorithms.SHA1:return P(Q,re,20);case e.HashAlgorithms.SHA256:return P(Q,re,32);case e.HashAlgorithms.SHA512:return P(Q,re,64);default:throw new Error(`Expecting algorithm to be one of ${s.join(", ")}. Received ${Z}.`)}};function R(){return{algorithm:e.HashAlgorithms.SHA1,createDigest:i,createHmacKey:M,digits:6,encoding:e.KeyEncodings.ASCII,epoch:Date.now(),step:30,window:0}}function $(Z){const Q={...R(),...Z};return A(Q),Object.freeze(Q)}function W(Z,Q){return Math.floor(Z/Q/1e3)}function I(Z,Q){const re=W(Q.epoch,Q.step);return k(Z,re,Q)}function B(Z,Q,re,pe){const Se=[];if(pe===0)return Se;for(let je=1;je<=pe;je++){const Fe=Q*je*re;Se.push(Z+Fe)}return Se}function O(Z,Q,re){const pe=T(re),Se=Q*1e3;return{current:Z,past:B(Z,-1,Se,pe[0]),future:B(Z,1,Se,pe[1])}}function F(Z,Q,re){if(!o(Z))return!1;const pe=I(Q,re);return Z===pe}function q(Z,Q,re,pe){let Se=null;return Z.some((je,Fe)=>F(Q,re,{...pe,epoch:je})?(Se=Fe+1,!0):!1),Se}function H(Z,Q,re){if(F(Z,Q,re))return 0;const pe=O(re.epoch,re.step,re.window),Se=q(pe.past,Z,Q,re);return Se!==null?Se*-1:q(pe.future,Z,Q,re)}function K(Z,Q){return Math.floor(Z/1e3)%Q}function V(Z,Q){return Q-K(Z,Q)}function z(Z,Q,re,pe){return c({algorithm:pe.algorithm,digits:pe.digits,step:pe.step,type:e.Strategy.TOTP,accountName:Z,issuer:Q,secret:re})}class G extends _{create(Q={}){return new G(Q)}allOptions(){return $(this.options)}generate(Q){return I(Q,this.allOptions())}checkDelta(Q,re){return H(Q,re,this.allOptions())}check(Q,re){return typeof this.checkDelta(Q,re)=="number"}verify(Q){if(typeof Q!="object")throw new Error("Expecting argument 0 of verify to be an object");return this.check(Q.token,Q.secret)}timeRemaining(){const Q=this.allOptions();return V(Q.epoch,Q.step)}timeUsed(){const Q=this.allOptions();return K(Q.epoch,Q.step)}keyuri(Q,re,pe){return z(Q,re,pe,this.allOptions())}}function te(Z){if(A(Z),typeof Z.keyDecoder!="function")throw new Error("Expecting options.keyDecoder to be a function.");if(Z.keyEncoder&&typeof Z.keyEncoder!="function")throw new Error("Expecting options.keyEncoder to be a function.")}function he(){return{algorithm:e.HashAlgorithms.SHA1,createDigest:i,createHmacKey:M,digits:6,encoding:e.KeyEncodings.HEX,epoch:Date.now(),step:30,window:0}}function ne(Z){const Q={...he(),...Z};return te(Q),Object.freeze(Q)}function ce(Z,Q){return Q.keyEncoder(Z,Q.encoding)}function xe(Z,Q){return Q.keyDecoder(Z,Q.encoding)}function _e(Z,Q){const re=Q.createRandomBytes(Z,Q.encoding);return ce(re,Q)}function oe(Z,Q){return I(xe(Z,Q),Q)}function ie(Z,Q,re){return H(Z,xe(Q,re),re)}class ge extends G{create(Q={}){return new ge(Q)}allOptions(){return ne(this.options)}generate(Q){return oe(Q,this.allOptions())}checkDelta(Q,re){return ie(Q,re,this.allOptions())}encode(Q){return ce(Q,this.allOptions())}decode(Q){return xe(Q,this.allOptions())}generateSecret(Q=10){return _e(Q,this.allOptions())}}e.Authenticator=ge,e.HASH_ALGORITHMS=s,e.HOTP=_,e.KEY_ENCODINGS=a,e.OTP=d,e.STRATEGY=n,e.TOTP=G,e.authenticatorCheckWithWindow=ie,e.authenticatorDecoder=xe,e.authenticatorDefaultOptions=he,e.authenticatorEncoder=ce,e.authenticatorGenerateSecret=_e,e.authenticatorOptionValidator=te,e.authenticatorOptions=ne,e.authenticatorToken=oe,e.createDigestPlaceholder=i,e.hotpCheck=C,e.hotpCounter=v,e.hotpCreateHmacKey=f,e.hotpDefaultOptions=x,e.hotpDigestToToken=w,e.hotpKeyuri=E,e.hotpOptions=y,e.hotpOptionsValidator=h,e.hotpToken=k,e.isTokenValid=o,e.keyuri=c,e.objectValues=t,e.padStart=l,e.totpCheck=F,e.totpCheckByEpoch=q,e.totpCheckWithWindow=H,e.totpCounter=W,e.totpCreateHmacKey=M,e.totpDefaultOptions=R,e.totpEpochAvailable=O,e.totpKeyuri=z,e.totpOptions=$,e.totpOptionsValidator=A,e.totpPadSecret=P,e.totpTimeRemaining=V,e.totpTimeUsed=K,e.totpToken=I})(RV);/**
 * @otplib/preset-default
 *
 * @author Gerald Yeo <contact@fusedthought.com>
 * @version: 12.0.1
 * @license: MIT
 **/Object.defineProperty(Vy,"__esModule",{value:!0});var Iw=FN,hO=BN,v6=RV;const Aie=new v6.HOTP({createDigest:Iw.createDigest}),Pie=new v6.TOTP({createDigest:Iw.createDigest}),Tie=new v6.Authenticator({createDigest:Iw.createDigest,createRandomBytes:Iw.createRandomBytes,keyDecoder:hO.keyDecoder,keyEncoder:hO.keyEncoder});Vy.authenticator=Tie;Vy.hotp=Aie;Vy.totp=Pie;/**
 * otplib
 *
 * @author Gerald Yeo <contact@fusedthought.com>
 * @version: 12.0.1
 * @license: MIT
 **/(function(e){Object.defineProperty(e,"__esModule",{value:!0});var t=Vy;Object.keys(t).forEach(function(s){s!=="default"&&Object.defineProperty(e,s,{enumerable:!0,get:function(){return t[s]}})})})(TV);const Tc={async login(e){const t=e.email,s=t.includes("@");let a=null,n=null;if(!s){const c=af(t),{data:d,error:h}=await X.from("users").select("*").eq("phone",c).limit(1);if(!h&&d&&d.length>0)a=d[0];else{const{data:f}=await X.from("users").select("*").eq("phone",t).limit(1);f&&f.length>0?a=f[0]:n=h}}if(!a){const{data:c,error:d}=await X.from("users").select("*").eq("email",t).limit(1);!d&&c&&c.length>0?a=c[0]:n=d}if(n||!a)throw new Error("Invalid credentials");if(a.password_hash!==e.password)throw new Error("Invalid credentials");if(a.two_factor_enabled&&a.two_factor_secret){if(!e.mfaCode)return{mfaRequired:!0,userId:a.id,email:a.email};if(!TV.authenticator.verify({token:e.mfaCode,secret:a.two_factor_secret}))throw new Error("Invalid verification code")}let i=["user"];a.roles?i=a.roles.split(",").map(c=>c.trim()):a.role&&(i=[a.role]);const o={id:a.id,email:a.email,firstName:a.first_name,lastName:a.last_name,phone:a.phone,roles:i,kycStatus:a.kyc_status,kycTier:a.kyc_tier,emailVerified:a.email_verified,createdAt:a.created_at},l={accessToken:btoa(JSON.stringify({userId:o.id,email:o.email,roles:o.roles,exp:Date.now()+36e5})),refreshToken:btoa(JSON.stringify({userId:o.id,exp:Date.now()+6048e5})),expiresIn:3600};return await X.from("users").update({last_login_at:new Date().toISOString()}).eq("id",a.id),{user:o,tokens:l}},async register(e){const{data:t}=await X.from("users").select("id").eq("email",e.email).limit(1);if(t&&t.length>0)throw new Error("Email already registered");if(e.phone){const c=af(e.phone),{data:d}=await X.from("users").select("id").eq("phone",c).limit(1);if(d&&d.length>0)throw new Error("Phone number already registered")}const s=`usr_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,a=e.role||"user";console.log("Registration - Role received:",e.role,"Assigned role:",a);const{data:n,error:i}=await X.from("users").insert({external_id:s,email:e.email,phone:e.phone?af(e.phone):null,password_hash:e.password,first_name:e.firstName,last_name:e.lastName,status:"ACTIVE",kyc_status:"NOT_STARTED",email_verified:!1,roles:a,kyc_tier:0}).select().single();if(i||!n)throw console.error("Registration error:",i),new Error((i==null?void 0:i.message)||"Failed to create user");const o={id:n.id,email:n.email,firstName:n.first_name,lastName:n.last_name,phone:n.phone,roles:[a],kycStatus:n.kyc_status,kycTier:n.kyc_tier,emailVerified:n.email_verified,createdAt:n.created_at},l={accessToken:btoa(JSON.stringify({userId:o.id,email:o.email,roles:o.roles,exp:Date.now()+36e5})),refreshToken:btoa(JSON.stringify({userId:o.id,exp:Date.now()+6048e5})),expiresIn:3600};return{user:o,tokens:l}},async logout(){localStorage.removeItem("accessToken"),localStorage.removeItem("refreshToken"),localStorage.removeItem("user")},async getProfile(){const e=this.getAccessToken();if(!e)throw new Error("Not authenticated");try{const t=JSON.parse(atob(e)),{data:s,error:a}=await X.from("users").select("*").eq("id",t.userId).limit(1);if(a||!s||s.length===0)throw new Error("User not found");const n=s[0];let i=["user"];return n.roles?i=n.roles.split(",").map(o=>o.trim()):n.role&&(i=[n.role]),{id:n.id,email:n.email,firstName:n.first_name,lastName:n.last_name,phone:n.phone,roles:i,kycStatus:n.kyc_status,kycTier:n.kyc_tier,emailVerified:n.email_verified,createdAt:n.created_at}}catch{throw new Error("Invalid token")}},async refreshToken(e){try{const t=JSON.parse(atob(e));if(t.exp<Date.now())throw new Error("Refresh token expired");const{data:s}=await X.from("users").select("*").eq("id",t.userId).limit(1);if(!s||s.length===0)throw new Error("User not found");const a=s[0];let n=["user"];return a.roles?n=a.roles.split(",").map(i=>i.trim()):a.role&&(n=[a.role]),{accessToken:btoa(JSON.stringify({userId:a.id,email:a.email,roles:n,exp:Date.now()+36e5})),refreshToken:btoa(JSON.stringify({userId:a.id,exp:Date.now()+6048e5})),expiresIn:3600}}catch{throw new Error("Invalid refresh token")}},setTokens(e){localStorage.setItem("accessToken",e.accessToken),localStorage.setItem("refreshToken",e.refreshToken)},getAccessToken(){return localStorage.getItem("accessToken")},getRefreshToken(){return localStorage.getItem("refreshToken")},isAuthenticated(){const e=this.getAccessToken();if(!e)return!1;try{return JSON.parse(atob(e)).exp>Date.now()}catch{return!1}}},MV=p.createContext(null);function Iie({children:e}){const[t,s]=p.useState(null),[a,n]=p.useState(!0),i=p.useCallback(async()=>{try{const f=await Tc.getProfile();s(f)}catch{s(null),localStorage.removeItem("accessToken"),localStorage.removeItem("refreshToken")}},[]);p.useEffect(()=>{(async()=>{Tc.isAuthenticated()&&await i(),n(!1)})()},[i]);const o=async f=>{const x=await Tc.login(f);if("mfaRequired"in x)return x;const y=x;return Tc.setTokens(y.tokens),s(y.user),y.user},l=async f=>{const x=await Tc.register(f);return Tc.setTokens(x.tokens),s(x.user),x.user},c=async()=>{await Tc.logout(),s(null)},d=p.useCallback(f=>{var x;return((x=t==null?void 0:t.roles)==null?void 0:x.includes(f))??!1},[t]),h=p.useCallback(f=>f.some(x=>{var y;return(y=t==null?void 0:t.roles)==null?void 0:y.includes(x)}),[t]);return r.jsx(MV.Provider,{value:{user:t,isLoading:a,isAuthenticated:!!t,login:o,register:l,logout:c,refreshUser:i,hasRole:d,hasAnyRole:h},children:e})}function pt(){const e=p.useContext(MV);if(!e)throw new Error("useAuth must be used within an AuthProvider");return e}const LV=p.createContext(void 0),X4=()=>{const e=localStorage.getItem("accessToken");if(!e)return null;try{return JSON.parse(atob(e)).userId||null}catch{return null}};function Die({children:e}){const[t,s]=p.useState(!1),[a,n]=p.useState(!1),[i,o]=p.useState(0);p.useEffect(()=>{const h=X4();h?(localStorage.getItem(`developerMode_${h}`)==="true"&&s(!0),l()):(s(!1),n(!1),o(0))},[]),p.useEffect(()=>{const h=X4();h&&localStorage.setItem(`developerMode_${h}`,String(t))},[t]);const l=async()=>{const h=X4();if(h)try{const{data:f,error:x}=await X.from("merchant_businesses").select("id").eq("merchant_id",h);if(x){console.error("Error checking businesses:",x);return}const y=(f==null?void 0:f.length)||0;o(y),n(y>0),y>0&&s(!0)}catch(f){console.error("Error checking businesses:",f)}},c=()=>{s(h=>!h)},d=h=>{s(h)};return r.jsx(LV.Provider,{value:{isDeveloperMode:t,toggleDeveloperMode:c,setDeveloperMode:d,hasBusinesses:a,businessCount:i,checkBusinesses:l},children:e})}function Wy(){const e=p.useContext(LV);if(e===void 0)throw new Error("useDeveloperMode must be used within a DeveloperModeProvider");return e}const FV=p.createContext(void 0);function Oie({children:e}){const[t,s]=p.useState([]),[a,n]=p.useState([]),i=()=>`${Date.now()}-${Math.random().toString(36).substr(2,9)}`,o=p.useCallback(v=>{const w=i(),N={...v,id:w,createdAt:new Date,duration:v.duration??5e3};s(k=>[...k,N]),N.duration&&N.duration>0&&setTimeout(()=>{l(w)},N.duration)},[]),l=p.useCallback(v=>{s(w=>w.filter(N=>N.id!==v))},[]),c=p.useCallback(v=>{const w={...v,id:i(),createdAt:new Date,read:!1};n(N=>[w,...N])},[]),d=p.useCallback(v=>{n(w=>w.map(N=>N.id===v?{...N,read:!0}:N))},[]),h=p.useCallback(()=>{n(v=>v.map(w=>({...w,read:!0})))},[]),f=p.useCallback(v=>{n(w=>w.filter(N=>N.id!==v))},[]),x=p.useCallback(()=>{n([])},[]),y=a.filter(v=>!v.read).length;return r.jsx(FV.Provider,{value:{toasts:t,showToast:o,dismissToast:l,notifications:a,unreadCount:y,addNotification:c,markAsRead:d,markAllAsRead:h,clearNotification:f,clearAllNotifications:x},children:e})}function BV(){const e=p.useContext(FV);if(!e)throw new Error("useNotification must be used within a NotificationProvider");return e}const $V=p.createContext(void 0),mO="peeap-theme";function Rie({children:e}){const[t,s]=p.useState(()=>{if(typeof window>"u")return"system";const l=localStorage.getItem(mO);return l&&["light","dark","system"].includes(l)?l:"system"}),[a,n]=p.useState("light");p.useEffect(()=>{const l=()=>{if(t==="system"){const h=window.matchMedia("(prefers-color-scheme: dark)").matches;n(h?"dark":"light")}else n(t)};l();const c=window.matchMedia("(prefers-color-scheme: dark)"),d=()=>{t==="system"&&l()};return c.addEventListener("change",d),()=>c.removeEventListener("change",d)},[t]),p.useEffect(()=>{const l=window.document.documentElement;a==="dark"?l.classList.add("dark"):l.classList.remove("dark")},[a]);const i=l=>{s(l),localStorage.setItem(mO,l)},o=()=>{i(a==="dark"?"light":"dark")};return r.jsx($V.Provider,{value:{theme:t,resolvedTheme:a,setTheme:i,toggleTheme:o,isDark:a==="dark"},children:e})}function Mie(){const e=p.useContext($V);if(e===void 0)throw new Error("useTheme must be used within a ThemeProvider");return e}/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Lie={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fie=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),Ie=(e,t)=>{const s=p.forwardRef(({color:a="currentColor",size:n=24,strokeWidth:i=2,absoluteStrokeWidth:o,className:l="",children:c,...d},h)=>p.createElement("svg",{ref:h,...Lie,width:n,height:n,stroke:a,strokeWidth:o?Number(i)*24/Number(n):i,className:["lucide",`lucide-${Fie(e)}`,l].join(" "),...d},[...t.map(([f,x])=>p.createElement(f,x)),...Array.isArray(c)?c:[c]]));return s.displayName=`${e}`,s};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yx=Ie("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dt=Ie("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ht=Ie("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bie=Ie("Apple",[["path",{d:"M12 20.94c1.5 0 2.75 1.06 4 1.06 3 0 6-8 6-12.22A4.91 4.91 0 0 0 17 5c-2.22 0-4 1.44-5 2-1-.56-2.78-2-5-2a4.9 4.9 0 0 0-5 4.78C2 14 5 22 8 22c1.25 0 2.5-1.06 4-1.06Z",key:"3s7exb"}],["path",{d:"M10 2c1 .5 2 2 2 5",key:"fcco2y"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $ie=Ie("Archive",[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uie=Ie("ArrowDownCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 8v8",key:"napkw2"}],["path",{d:"m8 12 4 4 4-4",key:"k98ssh"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const An=Ie("ArrowDownLeft",[["path",{d:"M17 7 7 17",key:"15tmo1"}],["path",{d:"M17 17H7V7",key:"1org7z"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Aa=Ie("ArrowDownRight",[["path",{d:"m7 7 10 10",key:"1fmybs"}],["path",{d:"M17 7v10H7",key:"6fjiku"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U5=Ie("ArrowDownToLine",[["path",{d:"M12 17V3",key:"1cwfxf"}],["path",{d:"m6 11 6 6 6-6",key:"12ii2o"}],["path",{d:"M19 21H5",key:"150jfl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pl=Ie("ArrowLeftRight",[["path",{d:"M8 3 4 7l4 4",key:"9rb6wj"}],["path",{d:"M4 7h16",key:"6tx8e3"}],["path",{d:"m16 21 4-4-4-4",key:"siv7j2"}],["path",{d:"M20 17H4",key:"h6l3hr"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ar=Ie("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const os=Ie("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vie=Ie("ArrowUpCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m16 12-4-4-4 4",key:"177agl"}],["path",{d:"M12 16V8",key:"1sbj14"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fO=Ie("ArrowUpFromLine",[["path",{d:"m18 9-6-6-6 6",key:"kcunyi"}],["path",{d:"M12 3v14",key:"7cf3v8"}],["path",{d:"M5 21h14",key:"11awu3"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rr=Ie("ArrowUpRight",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dw=Ie("AtSign",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M16 8v5a3 3 0 0 0 6 0v-1a10 10 0 1 0-4 8",key:"7n84p3"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _l=Ie("Ban",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m4.9 4.9 14.2 14.2",key:"1m5liu"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zl=Ie("Banknote",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M6 12h.01M18 12h.01",key:"113zkx"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rh=Ie("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lr=Ie("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wie=Ie("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UV=Ie("Book",[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H20v20H6.5a2.5 2.5 0 0 1 0-5H20",key:"t4utmx"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ow=Ie("Briefcase",[["rect",{width:"20",height:"14",x:"2",y:"7",rx:"2",ry:"2",key:"eto64e"}],["path",{d:"M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"zwj3tp"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Da=Ie("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w6=Ie("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zie=Ie("Calculator",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Li=Ie("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qie=Ie("CameraOff",[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["path",{d:"M7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16",key:"qmtpty"}],["path",{d:"M9.5 4h5L17 7h3a2 2 0 0 1 2 2v7.5",key:"1ufyfc"}],["path",{d:"M14.121 15.121A3 3 0 1 1 9.88 10.88",key:"11zox6"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const td=Ie("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Th=Ie("CheckCheck",[["path",{d:"M18 6 7 17l-5-5",key:"116fxf"}],["path",{d:"m22 10-7.5 7.5L13 16",key:"ke71qq"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ae=Ie("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hr=Ie("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ys=Ie("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rw=Ie("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qr=Ie("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hp=Ie("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hie=Ie("ClipboardList",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _t=Ie("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pa=Ie("Code2",[["path",{d:"m18 16 4-4-4-4",key:"1inbqp"}],["path",{d:"m6 8-4 4 4 4",key:"15zrgr"}],["path",{d:"m14.5 4-5 16",key:"e7oirm"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j6=Ie("Code",[["polyline",{points:"16 18 22 12 16 6",key:"z7tu5w"}],["polyline",{points:"8 6 2 12 8 18",key:"1eg1df"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pr=Ie("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lt=Ie("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V5=Ie("Crown",[["path",{d:"m2 4 3 12h14l3-12-6 7-4-7-4 7-6-7zm3 16h14",key:"zkxr6b"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cr=Ie("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gs=Ie("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kie=Ie("Droplets",[["path",{d:"M7 16.3c2.2 0 4-1.83 4-4.05 0-1.16-.57-2.26-1.71-3.19S7.29 6.75 7 5.3c-.29 1.45-1.14 2.84-2.29 3.76S3 11.1 3 12.25c0 2.22 1.8 4.05 4 4.05z",key:"1ptgy4"}],["path",{d:"M12.56 6.6A10.97 10.97 0 0 0 14 3.02c.5 2.5 2 4.9 4 6.5s3 3.5 3 5.5a6.98 6.98 0 0 1-11.91 4.97",key:"1sl1rz"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const da=Ie("ExternalLink",[["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}],["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["line",{x1:"10",x2:"21",y1:"14",y2:"3",key:"18c3s4"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dn=Ie("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ir=Ie("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gie=Ie("Factory",[["path",{d:"M2 20a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V8l-7 5V8l-7 5V4a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2Z",key:"159hny"}],["path",{d:"M17 18h1",key:"uldtlt"}],["path",{d:"M12 18h1",key:"s9uhes"}],["path",{d:"M7 18h1",key:"1neino"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W5=Ie("FileCheck",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["path",{d:"m9 15 2 2 4-4",key:"1grp1n"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VV=Ie("FileCode",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["path",{d:"m10 13-2 2 2 2",key:"17smn8"}],["path",{d:"m14 17 2-2-2-2",key:"14mezr"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ao=Ie("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yie=Ie("Film",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M7 3v18",key:"bbkbws"}],["path",{d:"M3 7.5h4",key:"zfgn84"}],["path",{d:"M3 12h18",key:"1i2n21"}],["path",{d:"M3 16.5h4",key:"1230mu"}],["path",{d:"M17 3v18",key:"in4fa5"}],["path",{d:"M17 7.5h4",key:"myr1c1"}],["path",{d:"M17 16.5h4",key:"go4c1d"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const el=Ie("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tf=Ie("Flag",[["path",{d:"M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z",key:"i9b6wo"}],["line",{x1:"4",x2:"4",y1:"22",y2:"15",key:"1cm3nv"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xie=Ie("FlipHorizontal",[["path",{d:"M8 3H5a2 2 0 0 0-2 2v14c0 1.1.9 2 2 2h3",key:"1i73f7"}],["path",{d:"M16 3h3a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-3",key:"saxlbk"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"M12 14v2",key:"8jcxud"}],["path",{d:"M12 8v2",key:"1woqiv"}],["path",{d:"M12 2v2",key:"tus03m"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lg=Ie("Gift",[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qie=Ie("Github",[["path",{d:"M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4",key:"tonef"}],["path",{d:"M9 18c-4.51 2-5-2-7-2",key:"9comsn"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oi=Ie("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zie=Ie("GraduationCap",[["path",{d:"M22 10v6M2 10l10-5 10 5-10 5z",key:"1ef52a"}],["path",{d:"M6 12v5c3 3 9 3 12 0v-5",key:"1f75yj"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jie=Ie("HardHat",[["path",{d:"M2 18a1 1 0 0 0 1 1h18a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1H3a1 1 0 0 0-1 1v2z",key:"1dej2m"}],["path",{d:"M10 10V5a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v5",key:"1p9q5i"}],["path",{d:"M4 15v-3a6 6 0 0 1 6-6h0",key:"1uc279"}],["path",{d:"M14 6h0a6 6 0 0 1 6 6v3",key:"1j9mnm"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uo=Ie("Headphones",[["path",{d:"M3 14h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-7a9 9 0 0 1 18 0v7a2 2 0 0 1-2 2h-1a2 2 0 0 1-2-2v-3a2 2 0 0 1 2-2h3",key:"1xhozi"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xO=Ie("HeartHandshake",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}],["path",{d:"M12 5 9.04 7.96a2.17 2.17 0 0 0 0 3.08v0c.82.82 2.13.85 3 .07l2.07-1.9a2.82 2.82 0 0 1 3.79 0l2.96 2.66",key:"12sd6o"}],["path",{d:"m18 15-2-2",key:"60u0ii"}],["path",{d:"m15 18-2-2",key:"6p76be"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eoe=Ie("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N6=Ie("HelpCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k6=Ie("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WV=Ie("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const toe=Ie("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $N=Ie("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mc=Ie("Key",[["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["path",{d:"m15.5 7.5 3 3L22 7l-3-3",key:"1rn1fs"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zV=Ie("Landmark",[["line",{x1:"3",x2:"21",y1:"22",y2:"22",key:"j8o0r"}],["line",{x1:"6",x2:"6",y1:"18",y2:"11",key:"10tf0k"}],["line",{x1:"10",x2:"10",y1:"18",y2:"11",key:"54lgf6"}],["line",{x1:"14",x2:"14",y1:"18",y2:"11",key:"380y"}],["line",{x1:"18",x2:"18",y1:"18",y2:"11",key:"1kevvc"}],["polygon",{points:"12 2 20 7 4 7",key:"jkujk7"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mw=Ie("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UN=Ie("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gO=Ie("LineChart",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"m19 9-5 5-4-4-3 3",key:"2osh9i"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kp=Ie("Link2",[["path",{d:"M9 17H7A5 5 0 0 1 7 7h2",key:"8i5ue5"}],["path",{d:"M15 7h2a5 5 0 1 1 0 10h-2",key:"1b9ql8"}],["line",{x1:"8",x2:"16",y1:"12",y2:"12",key:"1jonct"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const roe=Ie("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ke=Ie("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kr=Ie("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gp=Ie("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zy=Ie("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const On=Ie("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vi=Ie("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const soe=Ie("Megaphone",[["path",{d:"m3 11 18-5v12L3 14v-3z",key:"n962bs"}],["path",{d:"M11.6 16.8a3 3 0 1 1-5.8-1.6",key:"1yl0tm"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qy=Ie("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tu=Ie("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qV=Ie("Monitor",[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pO=Ie("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aoe=Ie("MoreHorizontal",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ih=Ie("MoreVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const noe=Ie("PackagePlus",[["path",{d:"M16 16h6",key:"100bgy"}],["path",{d:"M19 13v6",key:"85cyf1"}],["path",{d:"M21 10V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l2-1.14",key:"e7tb2h"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["line",{x1:"12",x2:"12",y1:"22",y2:"12",key:"a4e8g8"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sh=Ie("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S6=Ie("PartyPopper",[["path",{d:"M5.8 11.3 2 22l10.7-3.79",key:"gwxi1d"}],["path",{d:"M4 3h.01",key:"1vcuye"}],["path",{d:"M22 8h.01",key:"1mrtc2"}],["path",{d:"M15 2h.01",key:"1cjtqr"}],["path",{d:"M22 20h.01",key:"1mrys2"}],["path",{d:"m22 2-2.24.75a2.9 2.9 0 0 0-1.96 3.12v0c.1.86-.57 1.63-1.45 1.63h-.38c-.86 0-1.6.6-1.76 1.44L14 10",key:"bpx1uq"}],["path",{d:"m22 13-.82-.33c-.86-.34-1.82.2-1.98 1.11v0c-.11.7-.72 1.22-1.43 1.22H17",key:"1pd0s7"}],["path",{d:"m11 2 .33.82c.34.86-.2 1.82-1.11 1.98v0C9.52 4.9 9 5.52 9 6.23V7",key:"zq5xbz"}],["path",{d:"M11 13c1.93 1.93 2.83 4.17 2 5-.83.83-3.07-.07-5-2-1.93-1.93-2.83-4.17-2-5 .83-.83 3.07.07 5 2Z",key:"4kbmks"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HV=Ie("Pause",[["rect",{width:"4",height:"16",x:"6",y:"4",key:"iffhe4"}],["rect",{width:"4",height:"16",x:"14",y:"4",key:"sjin7j"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ioe=Ie("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.5 3.5a2.12 2.12 0 0 1 3 3L7 19l-4 1 1-4Z",key:"ymcmye"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rd=Ie("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gh=Ie("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const If=Ie("Percent",[["line",{x1:"19",x2:"5",y1:"5",y2:"19",key:"1x9vlm"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5",key:"4mh3h7"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ooe=Ie("PhoneCall",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}],["path",{d:"M14.05 2a9 9 0 0 1 8 7.94",key:"vmijpz"}],["path",{d:"M14.05 6A5 5 0 0 1 18 10",key:"13nbpp"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ss=Ie("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lo=Ie("PiggyBank",[["path",{d:"M19 5c-1.5 0-2.8 1.4-3 2-3.5-1.5-11-.3-11 5 0 1.8 0 3 2 4.5V20h4v-2h3v2h4v-4c1-.5 1.7-1 2-2h2v-4h-2c0-1-.5-1.5-1-2h0V5z",key:"uf6l00"}],["path",{d:"M2 9v1c0 1.1.9 2 2 2h1",key:"nm575m"}],["path",{d:"M16 11h0",key:"k2aug8"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const loe=Ie("Plane",[["path",{d:"M17.8 19.2 16 11l3.5-3.5C21 6 21.5 4 21 3c-1-.5-3 0-4.5 1.5L13 8 4.8 6.2c-.5-.1-.9.1-1.1.5l-.3.5c-.2.5-.1 1 .3 1.3L9 12l-2 3H4l-1 1 3 2 2 3 1-1v-3l3-2 3.5 5.3c.3.4.8.5 1.3.3l.5-.2c.4-.3.6-.7.5-1.2z",key:"1v9wt8"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hy=Ie("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sr=Ie("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const coe=Ie("Puzzle",[["path",{d:"M19.439 7.85c-.049.322.059.648.289.878l1.568 1.568c.47.47.706 1.087.706 1.704s-.235 1.233-.706 1.704l-1.611 1.611a.98.98 0 0 1-.837.276c-.47-.07-.802-.48-.968-.925a2.501 2.501 0 1 0-3.214 3.214c.446.166.855.497.925.968a.979.979 0 0 1-.276.837l-1.61 1.61a2.404 2.404 0 0 1-1.705.707 2.402 2.402 0 0 1-1.704-.706l-1.568-1.568a1.026 1.026 0 0 0-.877-.29c-.493.074-.84.504-1.02.968a2.5 2.5 0 1 1-3.237-3.237c.464-.18.894-.527.967-1.02a1.026 1.026 0 0 0-.289-.877l-1.568-1.568A2.402 2.402 0 0 1 1.998 12c0-.617.236-1.234.706-1.704L4.23 8.77c.24-.24.581-.353.917-.303.515.077.877.528 1.073 1.01a2.5 2.5 0 1 0 3.259-3.259c-.482-.196-.933-.558-1.01-1.073-.05-.336.062-.676.303-.917l1.525-1.525A2.402 2.402 0 0 1 12 1.998c.617 0 1.234.236 1.704.706l1.568 1.568c.23.23.556.338.877.29.493-.074.84-.504 1.02-.968a2.5 2.5 0 1 1 3.237 3.237c-.464.18-.894.527-.967 1.02Z",key:"i0oyt7"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vs=Ie("QrCode",[["rect",{width:"5",height:"5",x:"3",y:"3",rx:"1",key:"1tu5fj"}],["rect",{width:"5",height:"5",x:"16",y:"3",rx:"1",key:"1v8r4q"}],["rect",{width:"5",height:"5",x:"3",y:"16",rx:"1",key:"1x03jg"}],["path",{d:"M21 16h-3a2 2 0 0 0-2 2v3",key:"177gqh"}],["path",{d:"M21 21v.01",key:"ents32"}],["path",{d:"M12 7v3a2 2 0 0 1-2 2H7",key:"8crl2c"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M12 3h.01",key:"n36tog"}],["path",{d:"M12 16v.01",key:"133mhm"}],["path",{d:"M16 12h1",key:"1slzba"}],["path",{d:"M21 12v.01",key:"1lwtk9"}],["path",{d:"M12 21v-1",key:"1880an"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const doe=Ie("Radio",[["path",{d:"M4.9 19.1C1 15.2 1 8.8 4.9 4.9",key:"1vaf9d"}],["path",{d:"M7.8 16.2c-2.3-2.3-2.3-6.1 0-8.5",key:"u1ii0m"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M16.2 7.8c2.3 2.3 2.3 6.1 0 8.5",key:"1j5fej"}],["path",{d:"M19.1 4.9C23 8.8 23 15.1 19.1 19",key:"10b0cb"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C6=Ie("Receipt",[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1-2-1Z",key:"wqdwcb"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17V7",key:"pyj7ub"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ot=Ie("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KV=Ie("Repeat",[["path",{d:"m17 2 4 4-4 4",key:"nntrym"}],["path",{d:"M3 11v-1a4 4 0 0 1 4-4h14",key:"84bu3i"}],["path",{d:"m7 22-4-4 4-4",key:"1wqhfi"}],["path",{d:"M21 13v1a4 4 0 0 1-4 4H3",key:"1rx37r"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Df=Ie("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pn=Ie("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GV=Ie("Scan",[["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nr=Ie("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tn=Ie("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yO=Ie("Server",[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bs=Ie("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YV=Ie("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tl=Ie("ShieldCheck",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rr=Ie("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uoe=Ie("ShoppingBag",[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ky=Ie("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ws=Ie("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z5=Ie("Snowflake",[["line",{x1:"2",x2:"22",y1:"12",y2:"12",key:"1dnqot"}],["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"m20 16-4-4 4-4",key:"rquw4f"}],["path",{d:"m4 8 4 4-4 4",key:"12s3z9"}],["path",{d:"m16 4-4 4-4-4",key:"1tumq1"}],["path",{d:"m8 20 4-4 4 4",key:"9p200w"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XV=Ie("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q5=Ie("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mr=Ie("Store",[["path",{d:"m2 7 4.41-4.41A2 2 0 0 1 7.83 2h8.34a2 2 0 0 1 1.42.59L22 7",key:"ztvudi"}],["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["path",{d:"M15 22v-4a2 2 0 0 0-2-2h-2a2 2 0 0 0-2 2v4",key:"2ebpfo"}],["path",{d:"M2 7h20",key:"1fcdvo"}],["path",{d:"M22 7v3a2 2 0 0 1-2 2v0a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 16 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 12 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 8 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 4 12v0a2 2 0 0 1-2-2V7",key:"jon5kx"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bO=Ie("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gy=Ie("Tag",[["path",{d:"M12 2H2v10l9.29 9.29c.94.94 2.48.94 3.42 0l6.58-6.58c.94-.94.94-2.48 0-3.42L12 2Z",key:"14b2ls"}],["path",{d:"M7 7h.01",key:"7u93v4"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _6=Ie("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QV=Ie("Terminal",[["polyline",{points:"4 17 10 11 4 5",key:"akl6gq"}],["line",{x1:"12",x2:"20",y1:"19",y2:"19",key:"q2wloq"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E6=Ie("TestTube",[["path",{d:"M14.5 2v17.5c0 1.4-1.1 2.5-2.5 2.5h0c-1.4 0-2.5-1.1-2.5-2.5V2",key:"187lwq"}],["path",{d:"M8.5 2h7",key:"csnxdl"}],["path",{d:"M14.5 16h-5",key:"1ox875"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H5=Ie("Ticket",[["path",{d:"M2 9a3 3 0 0 1 0 6v2a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-2a3 3 0 0 1 0-6V7a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2Z",key:"qn84l0"}],["path",{d:"M13 5v2",key:"dyzc3o"}],["path",{d:"M13 17v2",key:"1ont0d"}],["path",{d:"M13 11v2",key:"1wjjxi"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gs=Ie("ToggleLeft",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"6",ry:"6",key:"f2vt7d"}],["circle",{cx:"8",cy:"12",r:"2",key:"1nvbw3"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ys=Ie("ToggleRight",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"6",ry:"6",key:"f2vt7d"}],["circle",{cx:"16",cy:"12",r:"2",key:"4ma0v8"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Js=Ie("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZV=Ie("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ts=Ie("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O1=Ie("Truck",[["path",{d:"M5 18H3c-.6 0-1-.4-1-1V7c0-.6.4-1 1-1h10c.6 0 1 .4 1 1v11",key:"hs4xqm"}],["path",{d:"M14 9h4l4 4v4c0 .6-.4 1-1 1h-2",key:"11fp61"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hoe=Ie("Tv",[["rect",{width:"20",height:"15",x:"2",y:"7",rx:"2",ry:"2",key:"10ag99"}],["polyline",{points:"17 2 12 7 7 2",key:"11pgbg"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yy=Ie("Unlock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 9.9-1",key:"1mm8w8"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Of=Ie("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JV=Ie("UserCog",[["circle",{cx:"18",cy:"15",r:"3",key:"gjjjvw"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M10 15H6a4 4 0 0 0-4 4v2",key:"1nfge6"}],["path",{d:"m21.7 16.4-.9-.3",key:"12j9ji"}],["path",{d:"m15.2 13.9-.9-.3",key:"1fdjdi"}],["path",{d:"m16.6 18.7.3-.9",key:"heedtr"}],["path",{d:"m19.1 12.2.3-.9",key:"1af3ki"}],["path",{d:"m19.6 18.7-.4-1",key:"1x9vze"}],["path",{d:"m16.8 12.3-.4-1",key:"vqeiwj"}],["path",{d:"m14.3 16.6 1-.4",key:"1qlj63"}],["path",{d:"m20.7 13.8 1-.4",key:"1v5t8k"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A6=Ie("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const br=Ie("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nn=Ie("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const moe=Ie("Utensils",[["path",{d:"M3 2v7c0 1.1.9 2 2 2h4a2 2 0 0 0 2-2V2",key:"cjf0a3"}],["path",{d:"M7 2v20",key:"1473qp"}],["path",{d:"M21 15V2v0a5 5 0 0 0-5 5v6c0 1.1.9 2 2 2h3Zm0 0v7",key:"1ogz0v"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const foe=Ie("Volume2",[["polygon",{points:"11 5 6 9 2 9 2 15 6 15 11 19 11 5",key:"16drj5"}],["path",{d:"M15.54 8.46a5 5 0 0 1 0 7.07",key:"ltjumu"}],["path",{d:"M19.07 4.93a10 10 0 0 1 0 14.14",key:"1kegas"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rt=Ie("Wallet",[["path",{d:"M21 12V7H5a2 2 0 0 1 0-4h14v4",key:"195gfw"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h16v-5",key:"195n9w"}],["path",{d:"M18 12a2 2 0 0 0 0 4h4v-4Z",key:"vllfpd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ph=Ie("Webhook",[["path",{d:"M18 16.98h-5.99c-1.1 0-1.95.94-2.48 1.9A4 4 0 0 1 2 17c.01-.7.2-1.4.57-2",key:"q3hayz"}],["path",{d:"m6 17 3.13-5.78c.53-.97.1-2.18-.5-3.1a4 4 0 1 1 6.89-4.06",key:"1go1hn"}],["path",{d:"m12 6 3.13 5.73C15.66 12.7 16.9 13 18 13a4 4 0 0 1 0 8",key:"qlwsc0"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xoe=Ie("Wheat",[["path",{d:"M2 22 16 8",key:"60hf96"}],["path",{d:"M3.47 12.53 5 11l1.53 1.53a3.5 3.5 0 0 1 0 4.94L5 19l-1.53-1.53a3.5 3.5 0 0 1 0-4.94Z",key:"1rdhi6"}],["path",{d:"M7.47 8.53 9 7l1.53 1.53a3.5 3.5 0 0 1 0 4.94L9 15l-1.53-1.53a3.5 3.5 0 0 1 0-4.94Z",key:"1sdzmb"}],["path",{d:"M11.47 4.53 13 3l1.53 1.53a3.5 3.5 0 0 1 0 4.94L13 11l-1.53-1.53a3.5 3.5 0 0 1 0-4.94Z",key:"eoatbi"}],["path",{d:"M20 2h2v2a4 4 0 0 1-4 4h-2V6a4 4 0 0 1 4-4Z",key:"19rau1"}],["path",{d:"M11.47 17.47 13 19l-1.53 1.53a3.5 3.5 0 0 1-4.94 0L5 19l1.53-1.53a3.5 3.5 0 0 1 4.94 0Z",key:"tc8ph9"}],["path",{d:"M15.47 13.47 17 15l-1.53 1.53a3.5 3.5 0 0 1-4.94 0L9 15l1.53-1.53a3.5 3.5 0 0 1 4.94 0Z",key:"2m8kc5"}],["path",{d:"M19.47 9.47 21 11l-1.53 1.53a3.5 3.5 0 0 1-4.94 0L13 11l1.53-1.53a3.5 3.5 0 0 1 4.94 0Z",key:"vex3ng"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const goe=Ie("WifiOff",[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["path",{d:"M8.5 16.5a5 5 0 0 1 7 0",key:"sej527"}],["path",{d:"M2 8.82a15 15 0 0 1 4.17-2.65",key:"11utq1"}],["path",{d:"M10.66 5c4.01-.36 8.14.9 11.34 3.76",key:"hxefdu"}],["path",{d:"M16.85 11.25a10 10 0 0 1 2.22 1.68",key:"q734kn"}],["path",{d:"M5 13a10 10 0 0 1 5.24-2.76",key:"piq4yl"}],["line",{x1:"12",x2:"12.01",y1:"20",y2:"20",key:"of4bc4"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oi=Ie("Wifi",[["path",{d:"M5 13a10 10 0 0 1 14 0",key:"6v8j51"}],["path",{d:"M8.5 16.5a5 5 0 0 1 7 0",key:"sej527"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["line",{x1:"12",x2:"12.01",y1:"20",y2:"20",key:"of4bc4"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wt=Ie("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ct=Ie("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ho=Ie("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]);function eW(e){var t,s,a="";if(typeof e=="string"||typeof e=="number")a+=e;else if(typeof e=="object")if(Array.isArray(e)){var n=e.length;for(t=0;t<n;t++)e[t]&&(s=eW(e[t]))&&(a&&(a+=" "),a+=s)}else for(s in e)e[s]&&(a&&(a+=" "),a+=s);return a}function fe(){for(var e,t,s=0,a="",n=arguments.length;s<n;s++)(e=arguments[s])&&(t=eW(e))&&(a&&(a+=" "),a+=t);return a}const poe={success:Ae,error:Wt,warning:Ht,info:$N},yoe={success:{bg:"bg-green-50",icon:"text-green-500",border:"border-green-200"},error:{bg:"bg-red-50",icon:"text-red-500",border:"border-red-200"},warning:{bg:"bg-yellow-50",icon:"text-yellow-500",border:"border-yellow-200"},info:{bg:"bg-blue-50",icon:"text-blue-500",border:"border-blue-200"}};function boe({notification:e,onDismiss:t}){const[s,a]=p.useState(!1),n=poe[e.type],i=yoe[e.type],o=()=>{a(!0),setTimeout(()=>t(e.id),300)};return r.jsxs("div",{className:fe("flex items-start gap-3 p-4 rounded-lg border shadow-lg max-w-sm w-full transform transition-all duration-300",i.bg,i.border,s?"opacity-0 translate-x-full":"opacity-100 translate-x-0"),children:[r.jsx(n,{className:fe("w-5 h-5 flex-shrink-0 mt-0.5",i.icon)}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("p",{className:"text-sm font-medium text-gray-900",children:e.title}),e.message&&r.jsx("p",{className:"mt-1 text-sm text-gray-600",children:e.message}),e.action&&r.jsx("button",{onClick:e.action.onClick,className:"mt-2 text-sm font-medium text-primary-600 hover:text-primary-500",children:e.action.label})]}),r.jsx("button",{onClick:o,className:"flex-shrink-0 p-1 rounded-lg hover:bg-gray-200/50 transition-colors",children:r.jsx(Ct,{className:"w-4 h-4 text-gray-400"})})]})}function voe({toasts:e,onDismiss:t}){return e.length===0?null:r.jsx("div",{className:"fixed top-4 right-4 z-[100] flex flex-col gap-2",children:e.map(s=>r.jsx(boe,{notification:s,onDismiss:t},s.id))})}function woe(){const{toasts:e,dismissToast:t}=BV();return r.jsx(voe,{toasts:e,onDismiss:t})}function ma({children:e}){const{isAuthenticated:t,isLoading:s}=pt(),a=$i();return s?r.jsx("div",{className:"min-h-screen flex items-center justify-center",children:r.jsx(Ke,{className:"w-8 h-8 animate-spin text-primary-600"})}):t?r.jsx(r.Fragment,{children:e}):r.jsx(kw,{to:"/login",state:{from:a},replace:!0})}function At({children:e,allowedRoles:t}){var l,c;const{user:s,isAuthenticated:a,isLoading:n}=pt(),i=$i();if(n)return r.jsx("div",{className:"min-h-screen flex items-center justify-center",children:r.jsx(Ke,{className:"w-8 h-8 animate-spin text-primary-600"})});if(!a||!s)return r.jsx(kw,{to:"/login",state:{from:i},replace:!0});if(!((l=s.roles)==null?void 0:l.some(d=>t.includes(d)))){const d=tW(((c=s.roles)==null?void 0:c[0])||"user");return r.jsx(kw,{to:d,replace:!0})}return r.jsx(r.Fragment,{children:e})}function tW(e){switch(e){case"superadmin":case"admin":return"/admin";case"merchant":return"/merchant";case"developer":return"/developer";case"agent":return"/agent";case"user":default:return"/dashboard"}}function vO(e){if(!e||e.length===0)return"/dashboard";const t=["superadmin","admin","merchant","developer","agent","user"];for(const s of t)if(e.includes(s))return tW(s);return"/dashboard"}const P6=p.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"}),VN=p.createContext({}),WN=p.createContext(null),zN=typeof document<"u",Xy=zN?p.useLayoutEffect:p.useEffect,rW=p.createContext({strict:!1}),T6=e=>e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),joe="framerAppearId",sW="data-"+T6(joe);function Noe(e,t,s,a){const{visualElement:n}=p.useContext(VN),i=p.useContext(rW),o=p.useContext(WN),l=p.useContext(P6).reducedMotion,c=p.useRef();a=a||i.renderer,!c.current&&a&&(c.current=a(e,{visualState:t,parent:n,props:s,presenceContext:o,blockInitialAnimation:o?o.initial===!1:!1,reducedMotionConfig:l}));const d=c.current;p.useInsertionEffect(()=>{d&&d.update(s,o)});const h=p.useRef(!!(s[sW]&&!window.HandoffComplete));return Xy(()=>{d&&(d.render(),h.current&&d.animationState&&d.animationState.animateChanges())}),p.useEffect(()=>{d&&(d.updateFeatures(),!h.current&&d.animationState&&d.animationState.animateChanges(),h.current&&(h.current=!1,window.HandoffComplete=!0))}),d}function Fm(e){return e&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}function koe(e,t,s){return p.useCallback(a=>{a&&e.mount&&e.mount(a),t&&(a?t.mount(a):t.unmount()),s&&(typeof s=="function"?s(a):Fm(s)&&(s.current=a))},[t])}function Yp(e){return typeof e=="string"||Array.isArray(e)}function qN(e){return e!==null&&typeof e=="object"&&typeof e.start=="function"}const I6=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],D6=["initial",...I6];function HN(e){return qN(e.animate)||D6.some(t=>Yp(e[t]))}function aW(e){return!!(HN(e)||e.variants)}function Soe(e,t){if(HN(e)){const{initial:s,animate:a}=e;return{initial:s===!1||Yp(s)?s:void 0,animate:Yp(a)?a:void 0}}return e.inherit!==!1?t:{}}function Coe(e){const{initial:t,animate:s}=Soe(e,p.useContext(VN));return p.useMemo(()=>({initial:t,animate:s}),[wO(t),wO(s)])}function wO(e){return Array.isArray(e)?e.join(" "):e}const jO={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Xp={};for(const e in jO)Xp[e]={isEnabled:t=>jO[e].some(s=>!!t[s])};function _oe(e){for(const t in e)Xp[t]={...Xp[t],...e[t]}}const O6=p.createContext({}),nW=p.createContext({}),Eoe=Symbol.for("motionComponentSymbol");function Aoe({preloadedFeatures:e,createVisualElement:t,useRender:s,useVisualState:a,Component:n}){e&&_oe(e);function i(l,c){let d;const h={...p.useContext(P6),...l,layoutId:Poe(l)},{isStatic:f}=h,x=Coe(l),y=a(l,f);if(!f&&zN){x.visualElement=Noe(n,y,h,t);const v=p.useContext(nW),w=p.useContext(rW).strict;x.visualElement&&(d=x.visualElement.loadFeatures(h,w,e,v))}return p.createElement(VN.Provider,{value:x},d&&x.visualElement?p.createElement(d,{visualElement:x.visualElement,...h}):null,s(n,l,koe(y,x.visualElement,c),y,f,x.visualElement))}const o=p.forwardRef(i);return o[Eoe]=n,o}function Poe({layoutId:e}){const t=p.useContext(O6).id;return t&&e!==void 0?t+"-"+e:e}function Toe(e){function t(a,n={}){return Aoe(e(a,n))}if(typeof Proxy>"u")return t;const s=new Map;return new Proxy(t,{get:(a,n)=>(s.has(n)||s.set(n,t(n)),s.get(n))})}const Ioe=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function R6(e){return typeof e!="string"||e.includes("-")?!1:!!(Ioe.indexOf(e)>-1||/[A-Z]/.test(e))}const Lw={};function Doe(e){Object.assign(Lw,e)}const Qy=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Dh=new Set(Qy);function iW(e,{layout:t,layoutId:s}){return Dh.has(e)||e.startsWith("origin")||(t||s!==void 0)&&(!!Lw[e]||e==="opacity")}const Kn=e=>!!(e&&e.getVelocity),Ooe={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},Roe=Qy.length;function Moe(e,{enableHardwareAcceleration:t=!0,allowTransformNone:s=!0},a,n){let i="";for(let o=0;o<Roe;o++){const l=Qy[o];if(e[l]!==void 0){const c=Ooe[l]||l;i+=`${c}(${e[l]}) `}}return t&&!e.z&&(i+="translateZ(0)"),i=i.trim(),n?i=n(e,a?"":i):s&&a&&(i="none"),i}const oW=e=>t=>typeof t=="string"&&t.startsWith(e),lW=oW("--"),K5=oW("var(--"),Loe=/var\s*\(\s*--[\w-]+(\s*,\s*(?:(?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)+)?\s*\)/g,Foe=(e,t)=>t&&typeof e=="number"?t.transform(e):e,Iu=(e,t,s)=>Math.min(Math.max(s,e),t),Oh={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},sp={...Oh,transform:e=>Iu(0,1,e)},bv={...Oh,default:1},ap=e=>Math.round(e*1e5)/1e5,KN=/(-)?([\d]*\.?[\d])+/g,cW=/(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))/gi,Boe=/^(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))$/i;function Zy(e){return typeof e=="string"}const Jy=e=>({test:t=>Zy(t)&&t.endsWith(e)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${e}`}),Ud=Jy("deg"),oc=Jy("%"),Gt=Jy("px"),$oe=Jy("vh"),Uoe=Jy("vw"),NO={...oc,parse:e=>oc.parse(e)/100,transform:e=>oc.transform(e*100)},kO={...Oh,transform:Math.round},dW={borderWidth:Gt,borderTopWidth:Gt,borderRightWidth:Gt,borderBottomWidth:Gt,borderLeftWidth:Gt,borderRadius:Gt,radius:Gt,borderTopLeftRadius:Gt,borderTopRightRadius:Gt,borderBottomRightRadius:Gt,borderBottomLeftRadius:Gt,width:Gt,maxWidth:Gt,height:Gt,maxHeight:Gt,size:Gt,top:Gt,right:Gt,bottom:Gt,left:Gt,padding:Gt,paddingTop:Gt,paddingRight:Gt,paddingBottom:Gt,paddingLeft:Gt,margin:Gt,marginTop:Gt,marginRight:Gt,marginBottom:Gt,marginLeft:Gt,rotate:Ud,rotateX:Ud,rotateY:Ud,rotateZ:Ud,scale:bv,scaleX:bv,scaleY:bv,scaleZ:bv,skew:Ud,skewX:Ud,skewY:Ud,distance:Gt,translateX:Gt,translateY:Gt,translateZ:Gt,x:Gt,y:Gt,z:Gt,perspective:Gt,transformPerspective:Gt,opacity:sp,originX:NO,originY:NO,originZ:Gt,zIndex:kO,fillOpacity:sp,strokeOpacity:sp,numOctaves:kO};function M6(e,t,s,a){const{style:n,vars:i,transform:o,transformOrigin:l}=e;let c=!1,d=!1,h=!0;for(const f in t){const x=t[f];if(lW(f)){i[f]=x;continue}const y=dW[f],v=Foe(x,y);if(Dh.has(f)){if(c=!0,o[f]=v,!h)continue;x!==(y.default||0)&&(h=!1)}else f.startsWith("origin")?(d=!0,l[f]=v):n[f]=v}if(t.transform||(c||a?n.transform=Moe(e.transform,s,h,a):n.transform&&(n.transform="none")),d){const{originX:f="50%",originY:x="50%",originZ:y=0}=l;n.transformOrigin=`${f} ${x} ${y}`}}const L6=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function uW(e,t,s){for(const a in t)!Kn(t[a])&&!iW(a,s)&&(e[a]=t[a])}function Voe({transformTemplate:e},t,s){return p.useMemo(()=>{const a=L6();return M6(a,t,{enableHardwareAcceleration:!s},e),Object.assign({},a.vars,a.style)},[t])}function Woe(e,t,s){const a=e.style||{},n={};return uW(n,a,e),Object.assign(n,Voe(e,t,s)),e.transformValues?e.transformValues(n):n}function zoe(e,t,s){const a={},n=Woe(e,t,s);return e.drag&&e.dragListener!==!1&&(a.draggable=!1,n.userSelect=n.WebkitUserSelect=n.WebkitTouchCallout="none",n.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(a.tabIndex=0),a.style=n,a}const qoe=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","transformValues","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Fw(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||qoe.has(e)}let hW=e=>!Fw(e);function Hoe(e){e&&(hW=t=>t.startsWith("on")?!Fw(t):e(t))}try{Hoe(require("@emotion/is-prop-valid").default)}catch{}function Koe(e,t,s){const a={};for(const n in e)n==="values"&&typeof e.values=="object"||(hW(n)||s===!0&&Fw(n)||!t&&!Fw(n)||e.draggable&&n.startsWith("onDrag"))&&(a[n]=e[n]);return a}function SO(e,t,s){return typeof e=="string"?e:Gt.transform(t+s*e)}function Goe(e,t,s){const a=SO(t,e.x,e.width),n=SO(s,e.y,e.height);return`${a} ${n}`}const Yoe={offset:"stroke-dashoffset",array:"stroke-dasharray"},Xoe={offset:"strokeDashoffset",array:"strokeDasharray"};function Qoe(e,t,s=1,a=0,n=!0){e.pathLength=1;const i=n?Yoe:Xoe;e[i.offset]=Gt.transform(-a);const o=Gt.transform(t),l=Gt.transform(s);e[i.array]=`${o} ${l}`}function F6(e,{attrX:t,attrY:s,attrScale:a,originX:n,originY:i,pathLength:o,pathSpacing:l=1,pathOffset:c=0,...d},h,f,x){if(M6(e,d,h,x),f){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};const{attrs:y,style:v,dimensions:w}=e;y.transform&&(w&&(v.transform=y.transform),delete y.transform),w&&(n!==void 0||i!==void 0||v.transform)&&(v.transformOrigin=Goe(w,n!==void 0?n:.5,i!==void 0?i:.5)),t!==void 0&&(y.x=t),s!==void 0&&(y.y=s),a!==void 0&&(y.scale=a),o!==void 0&&Qoe(y,o,l,c,!1)}const mW=()=>({...L6(),attrs:{}}),B6=e=>typeof e=="string"&&e.toLowerCase()==="svg";function Zoe(e,t,s,a){const n=p.useMemo(()=>{const i=mW();return F6(i,t,{enableHardwareAcceleration:!1},B6(a),e.transformTemplate),{...i.attrs,style:{...i.style}}},[t]);if(e.style){const i={};uW(i,e.style,e),n.style={...i,...n.style}}return n}function Joe(e=!1){return(s,a,n,{latestValues:i},o)=>{const c=(R6(s)?Zoe:zoe)(a,i,o,s),h={...Koe(a,typeof s=="string",e),...c,ref:n},{children:f}=a,x=p.useMemo(()=>Kn(f)?f.get():f,[f]);return p.createElement(s,{...h,children:x})}}function fW(e,{style:t,vars:s},a,n){Object.assign(e.style,t,n&&n.getProjectionStyles(a));for(const i in s)e.style.setProperty(i,s[i])}const xW=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function gW(e,t,s,a){fW(e,t,void 0,a);for(const n in t.attrs)e.setAttribute(xW.has(n)?n:T6(n),t.attrs[n])}function $6(e,t){const{style:s}=e,a={};for(const n in s)(Kn(s[n])||t.style&&Kn(t.style[n])||iW(n,e))&&(a[n]=s[n]);return a}function pW(e,t){const s=$6(e,t);for(const a in e)if(Kn(e[a])||Kn(t[a])){const n=Qy.indexOf(a)!==-1?"attr"+a.charAt(0).toUpperCase()+a.substring(1):a;s[n]=e[a]}return s}function U6(e,t,s,a={},n={}){return typeof t=="function"&&(t=t(s!==void 0?s:e.custom,a,n)),typeof t=="string"&&(t=e.variants&&e.variants[t]),typeof t=="function"&&(t=t(s!==void 0?s:e.custom,a,n)),t}function eb(e){const t=p.useRef(null);return t.current===null&&(t.current=e()),t.current}const Bw=e=>Array.isArray(e),ele=e=>!!(e&&typeof e=="object"&&e.mix&&e.toValue),tle=e=>Bw(e)?e[e.length-1]||0:e;function R1(e){const t=Kn(e)?e.get():e;return ele(t)?t.toValue():t}function rle({scrapeMotionValuesFromProps:e,createRenderState:t,onMount:s},a,n,i){const o={latestValues:sle(a,n,i,e),renderState:t()};return s&&(o.mount=l=>s(a,l,o)),o}const yW=e=>(t,s)=>{const a=p.useContext(VN),n=p.useContext(WN),i=()=>rle(e,t,a,n);return s?i():eb(i)};function sle(e,t,s,a){const n={},i=a(e,{});for(const x in i)n[x]=R1(i[x]);let{initial:o,animate:l}=e;const c=HN(e),d=aW(e);t&&d&&!c&&e.inherit!==!1&&(o===void 0&&(o=t.initial),l===void 0&&(l=t.animate));let h=s?s.initial===!1:!1;h=h||o===!1;const f=h?l:o;return f&&typeof f!="boolean"&&!qN(f)&&(Array.isArray(f)?f:[f]).forEach(y=>{const v=U6(e,y);if(!v)return;const{transitionEnd:w,transition:N,...k}=v;for(const C in k){let E=k[C];if(Array.isArray(E)){const _=h?E.length-1:0;E=E[_]}E!==null&&(n[C]=E)}for(const C in w)n[C]=w[C]}),n}const la=e=>e;class CO{constructor(){this.order=[],this.scheduled=new Set}add(t){if(!this.scheduled.has(t))return this.scheduled.add(t),this.order.push(t),!0}remove(t){const s=this.order.indexOf(t);s!==-1&&(this.order.splice(s,1),this.scheduled.delete(t))}clear(){this.order.length=0,this.scheduled.clear()}}function ale(e){let t=new CO,s=new CO,a=0,n=!1,i=!1;const o=new WeakSet,l={schedule:(c,d=!1,h=!1)=>{const f=h&&n,x=f?t:s;return d&&o.add(c),x.add(c)&&f&&n&&(a=t.order.length),c},cancel:c=>{s.remove(c),o.delete(c)},process:c=>{if(n){i=!0;return}if(n=!0,[t,s]=[s,t],s.clear(),a=t.order.length,a)for(let d=0;d<a;d++){const h=t.order[d];h(c),o.has(h)&&(l.schedule(h),e())}n=!1,i&&(i=!1,l.process(c))}};return l}const vv=["prepare","read","update","preRender","render","postRender"],nle=40;function ile(e,t){let s=!1,a=!0;const n={delta:0,timestamp:0,isProcessing:!1},i=vv.reduce((f,x)=>(f[x]=ale(()=>s=!0),f),{}),o=f=>i[f].process(n),l=()=>{const f=performance.now();s=!1,n.delta=a?1e3/60:Math.max(Math.min(f-n.timestamp,nle),1),n.timestamp=f,n.isProcessing=!0,vv.forEach(o),n.isProcessing=!1,s&&t&&(a=!1,e(l))},c=()=>{s=!0,a=!0,n.isProcessing||e(l)};return{schedule:vv.reduce((f,x)=>{const y=i[x];return f[x]=(v,w=!1,N=!1)=>(s||c(),y.schedule(v,w,N)),f},{}),cancel:f=>vv.forEach(x=>i[x].cancel(f)),state:n,steps:i}}const{schedule:Mr,cancel:Ko,state:kn,steps:Q4}=ile(typeof requestAnimationFrame<"u"?requestAnimationFrame:la,!0),ole={useVisualState:yW({scrapeMotionValuesFromProps:pW,createRenderState:mW,onMount:(e,t,{renderState:s,latestValues:a})=>{Mr.read(()=>{try{s.dimensions=typeof t.getBBox=="function"?t.getBBox():t.getBoundingClientRect()}catch{s.dimensions={x:0,y:0,width:0,height:0}}}),Mr.render(()=>{F6(s,a,{enableHardwareAcceleration:!1},B6(t.tagName),e.transformTemplate),gW(t,s)})}})},lle={useVisualState:yW({scrapeMotionValuesFromProps:$6,createRenderState:L6})};function cle(e,{forwardMotionProps:t=!1},s,a){return{...R6(e)?ole:lle,preloadedFeatures:s,useRender:Joe(t),createVisualElement:a,Component:e}}function Wc(e,t,s,a={passive:!0}){return e.addEventListener(t,s,a),()=>e.removeEventListener(t,s)}const bW=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1;function GN(e,t="page"){return{point:{x:e[t+"X"],y:e[t+"Y"]}}}const dle=e=>t=>bW(t)&&e(t,GN(t));function Kc(e,t,s,a){return Wc(e,t,dle(s),a)}const ule=(e,t)=>s=>t(e(s)),ku=(...e)=>e.reduce(ule);function vW(e){let t=null;return()=>{const s=()=>{t=null};return t===null?(t=e,s):!1}}const _O=vW("dragHorizontal"),EO=vW("dragVertical");function wW(e){let t=!1;if(e==="y")t=EO();else if(e==="x")t=_O();else{const s=_O(),a=EO();s&&a?t=()=>{s(),a()}:(s&&s(),a&&a())}return t}function jW(){const e=wW(!0);return e?(e(),!1):!0}class qu{constructor(t){this.isMounted=!1,this.node=t}update(){}}function AO(e,t){const s="pointer"+(t?"enter":"leave"),a="onHover"+(t?"Start":"End"),n=(i,o)=>{if(i.pointerType==="touch"||jW())return;const l=e.getProps();e.animationState&&l.whileHover&&e.animationState.setActive("whileHover",t),l[a]&&Mr.update(()=>l[a](i,o))};return Kc(e.current,s,n,{passive:!e.getProps()[a]})}class hle extends qu{mount(){this.unmount=ku(AO(this.node,!0),AO(this.node,!1))}unmount(){}}class mle extends qu{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=ku(Wc(this.node.current,"focus",()=>this.onFocus()),Wc(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const NW=(e,t)=>t?e===t?!0:NW(e,t.parentElement):!1;function Z4(e,t){if(!t)return;const s=new PointerEvent("pointer"+e);t(s,GN(s))}class fle extends qu{constructor(){super(...arguments),this.removeStartListeners=la,this.removeEndListeners=la,this.removeAccessibleListeners=la,this.startPointerPress=(t,s)=>{if(this.isPressing)return;this.removeEndListeners();const a=this.node.getProps(),i=Kc(window,"pointerup",(l,c)=>{if(!this.checkPressEnd())return;const{onTap:d,onTapCancel:h,globalTapTarget:f}=this.node.getProps();Mr.update(()=>{!f&&!NW(this.node.current,l.target)?h&&h(l,c):d&&d(l,c)})},{passive:!(a.onTap||a.onPointerUp)}),o=Kc(window,"pointercancel",(l,c)=>this.cancelPress(l,c),{passive:!(a.onTapCancel||a.onPointerCancel)});this.removeEndListeners=ku(i,o),this.startPress(t,s)},this.startAccessiblePress=()=>{const t=i=>{if(i.key!=="Enter"||this.isPressing)return;const o=l=>{l.key!=="Enter"||!this.checkPressEnd()||Z4("up",(c,d)=>{const{onTap:h}=this.node.getProps();h&&Mr.update(()=>h(c,d))})};this.removeEndListeners(),this.removeEndListeners=Wc(this.node.current,"keyup",o),Z4("down",(l,c)=>{this.startPress(l,c)})},s=Wc(this.node.current,"keydown",t),a=()=>{this.isPressing&&Z4("cancel",(i,o)=>this.cancelPress(i,o))},n=Wc(this.node.current,"blur",a);this.removeAccessibleListeners=ku(s,n)}}startPress(t,s){this.isPressing=!0;const{onTapStart:a,whileTap:n}=this.node.getProps();n&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),a&&Mr.update(()=>a(t,s))}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!jW()}cancelPress(t,s){if(!this.checkPressEnd())return;const{onTapCancel:a}=this.node.getProps();a&&Mr.update(()=>a(t,s))}mount(){const t=this.node.getProps(),s=Kc(t.globalTapTarget?window:this.node.current,"pointerdown",this.startPointerPress,{passive:!(t.onTapStart||t.onPointerStart)}),a=Wc(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=ku(s,a)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}const G5=new WeakMap,J4=new WeakMap,xle=e=>{const t=G5.get(e.target);t&&t(e)},gle=e=>{e.forEach(xle)};function ple({root:e,...t}){const s=e||document;J4.has(s)||J4.set(s,{});const a=J4.get(s),n=JSON.stringify(t);return a[n]||(a[n]=new IntersectionObserver(gle,{root:e,...t})),a[n]}function yle(e,t,s){const a=ple(t);return G5.set(e,s),a.observe(e),()=>{G5.delete(e),a.unobserve(e)}}const ble={some:0,all:1};class vle extends qu{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:s,margin:a,amount:n="some",once:i}=t,o={root:s?s.current:void 0,rootMargin:a,threshold:typeof n=="number"?n:ble[n]},l=c=>{const{isIntersecting:d}=c;if(this.isInView===d||(this.isInView=d,i&&!d&&this.hasEnteredView))return;d&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",d);const{onViewportEnter:h,onViewportLeave:f}=this.node.getProps(),x=d?h:f;x&&x(c)};return yle(this.node.current,o,l)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:s}=this.node;["amount","margin","root"].some(wle(t,s))&&this.startObserver()}unmount(){}}function wle({viewport:e={}},{viewport:t={}}={}){return s=>e[s]!==t[s]}const jle={inView:{Feature:vle},tap:{Feature:fle},focus:{Feature:mle},hover:{Feature:hle}};function kW(e,t){if(!Array.isArray(t))return!1;const s=t.length;if(s!==e.length)return!1;for(let a=0;a<s;a++)if(t[a]!==e[a])return!1;return!0}function Nle(e){const t={};return e.values.forEach((s,a)=>t[a]=s.get()),t}function kle(e){const t={};return e.values.forEach((s,a)=>t[a]=s.getVelocity()),t}function YN(e,t,s){const a=e.getProps();return U6(a,t,s!==void 0?s:a.custom,Nle(e),kle(e))}let Sle=la,V6=la;const Su=e=>e*1e3,lc=e=>e/1e3,Cle={current:!1},SW=e=>Array.isArray(e)&&typeof e[0]=="number";function CW(e){return!!(!e||typeof e=="string"&&_W[e]||SW(e)||Array.isArray(e)&&e.every(CW))}const Fg=([e,t,s,a])=>`cubic-bezier(${e}, ${t}, ${s}, ${a})`,_W={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Fg([0,.65,.55,1]),circOut:Fg([.55,0,1,.45]),backIn:Fg([.31,.01,.66,-.59]),backOut:Fg([.33,1.53,.69,.99])};function EW(e){if(e)return SW(e)?Fg(e):Array.isArray(e)?e.map(EW):_W[e]}function _le(e,t,s,{delay:a=0,duration:n,repeat:i=0,repeatType:o="loop",ease:l,times:c}={}){const d={[t]:s};c&&(d.offset=c);const h=EW(l);return Array.isArray(h)&&(d.easing=h),e.animate(d,{delay:a,duration:n,easing:Array.isArray(h)?"linear":h,fill:"both",iterations:i+1,direction:o==="reverse"?"alternate":"normal"})}function Ele(e,{repeat:t,repeatType:s="loop"}){const a=t&&s!=="loop"&&t%2===1?0:e.length-1;return e[a]}const AW=(e,t,s)=>(((1-3*s+3*t)*e+(3*s-6*t))*e+3*t)*e,Ale=1e-7,Ple=12;function Tle(e,t,s,a,n){let i,o,l=0;do o=t+(s-t)/2,i=AW(o,a,n)-e,i>0?s=o:t=o;while(Math.abs(i)>Ale&&++l<Ple);return o}function tb(e,t,s,a){if(e===t&&s===a)return la;const n=i=>Tle(i,0,1,e,s);return i=>i===0||i===1?i:AW(n(i),t,a)}const Ile=tb(.42,0,1,1),Dle=tb(0,0,.58,1),PW=tb(.42,0,.58,1),TW=e=>Array.isArray(e)&&typeof e[0]!="number",IW=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,DW=e=>t=>1-e(1-t),W6=e=>1-Math.sin(Math.acos(e)),OW=DW(W6),Ole=IW(W6),RW=tb(.33,1.53,.69,.99),z6=DW(RW),Rle=IW(z6),Mle=e=>(e*=2)<1?.5*z6(e):.5*(2-Math.pow(2,-10*(e-1))),Lle={linear:la,easeIn:Ile,easeInOut:PW,easeOut:Dle,circIn:W6,circInOut:Ole,circOut:OW,backIn:z6,backInOut:Rle,backOut:RW,anticipate:Mle},PO=e=>{if(Array.isArray(e)){V6(e.length===4);const[t,s,a,n]=e;return tb(t,s,a,n)}else if(typeof e=="string")return Lle[e];return e},q6=(e,t)=>s=>!!(Zy(s)&&Boe.test(s)&&s.startsWith(e)||t&&Object.prototype.hasOwnProperty.call(s,t)),MW=(e,t,s)=>a=>{if(!Zy(a))return a;const[n,i,o,l]=a.match(KN);return{[e]:parseFloat(n),[t]:parseFloat(i),[s]:parseFloat(o),alpha:l!==void 0?parseFloat(l):1}},Fle=e=>Iu(0,255,e),eS={...Oh,transform:e=>Math.round(Fle(e))},R0={test:q6("rgb","red"),parse:MW("red","green","blue"),transform:({red:e,green:t,blue:s,alpha:a=1})=>"rgba("+eS.transform(e)+", "+eS.transform(t)+", "+eS.transform(s)+", "+ap(sp.transform(a))+")"};function Ble(e){let t="",s="",a="",n="";return e.length>5?(t=e.substring(1,3),s=e.substring(3,5),a=e.substring(5,7),n=e.substring(7,9)):(t=e.substring(1,2),s=e.substring(2,3),a=e.substring(3,4),n=e.substring(4,5),t+=t,s+=s,a+=a,n+=n),{red:parseInt(t,16),green:parseInt(s,16),blue:parseInt(a,16),alpha:n?parseInt(n,16)/255:1}}const Y5={test:q6("#"),parse:Ble,transform:R0.transform},Bm={test:q6("hsl","hue"),parse:MW("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:s,alpha:a=1})=>"hsla("+Math.round(e)+", "+oc.transform(ap(t))+", "+oc.transform(ap(s))+", "+ap(sp.transform(a))+")"},Jn={test:e=>R0.test(e)||Y5.test(e)||Bm.test(e),parse:e=>R0.test(e)?R0.parse(e):Bm.test(e)?Bm.parse(e):Y5.parse(e),transform:e=>Zy(e)?e:e.hasOwnProperty("red")?R0.transform(e):Bm.transform(e)},$s=(e,t,s)=>-s*e+s*t+e;function tS(e,t,s){return s<0&&(s+=1),s>1&&(s-=1),s<1/6?e+(t-e)*6*s:s<1/2?t:s<2/3?e+(t-e)*(2/3-s)*6:e}function $le({hue:e,saturation:t,lightness:s,alpha:a}){e/=360,t/=100,s/=100;let n=0,i=0,o=0;if(!t)n=i=o=s;else{const l=s<.5?s*(1+t):s+t-s*t,c=2*s-l;n=tS(c,l,e+1/3),i=tS(c,l,e),o=tS(c,l,e-1/3)}return{red:Math.round(n*255),green:Math.round(i*255),blue:Math.round(o*255),alpha:a}}const rS=(e,t,s)=>{const a=e*e;return Math.sqrt(Math.max(0,s*(t*t-a)+a))},Ule=[Y5,R0,Bm],Vle=e=>Ule.find(t=>t.test(e));function TO(e){const t=Vle(e);let s=t.parse(e);return t===Bm&&(s=$le(s)),s}const LW=(e,t)=>{const s=TO(e),a=TO(t),n={...s};return i=>(n.red=rS(s.red,a.red,i),n.green=rS(s.green,a.green,i),n.blue=rS(s.blue,a.blue,i),n.alpha=$s(s.alpha,a.alpha,i),R0.transform(n))};function Wle(e){var t,s;return isNaN(e)&&Zy(e)&&(((t=e.match(KN))===null||t===void 0?void 0:t.length)||0)+(((s=e.match(cW))===null||s===void 0?void 0:s.length)||0)>0}const FW={regex:Loe,countKey:"Vars",token:"${v}",parse:la},BW={regex:cW,countKey:"Colors",token:"${c}",parse:Jn.parse},$W={regex:KN,countKey:"Numbers",token:"${n}",parse:Oh.parse};function sS(e,{regex:t,countKey:s,token:a,parse:n}){const i=e.tokenised.match(t);i&&(e["num"+s]=i.length,e.tokenised=e.tokenised.replace(t,a),e.values.push(...i.map(n)))}function $w(e){const t=e.toString(),s={value:t,tokenised:t,values:[],numVars:0,numColors:0,numNumbers:0};return s.value.includes("var(--")&&sS(s,FW),sS(s,BW),sS(s,$W),s}function UW(e){return $w(e).values}function VW(e){const{values:t,numColors:s,numVars:a,tokenised:n}=$w(e),i=t.length;return o=>{let l=n;for(let c=0;c<i;c++)c<a?l=l.replace(FW.token,o[c]):c<a+s?l=l.replace(BW.token,Jn.transform(o[c])):l=l.replace($W.token,ap(o[c]));return l}}const zle=e=>typeof e=="number"?0:e;function qle(e){const t=UW(e);return VW(e)(t.map(zle))}const Du={test:Wle,parse:UW,createTransformer:VW,getAnimatableNone:qle},WW=(e,t)=>s=>`${s>0?t:e}`;function zW(e,t){return typeof e=="number"?s=>$s(e,t,s):Jn.test(e)?LW(e,t):e.startsWith("var(")?WW(e,t):HW(e,t)}const qW=(e,t)=>{const s=[...e],a=s.length,n=e.map((i,o)=>zW(i,t[o]));return i=>{for(let o=0;o<a;o++)s[o]=n[o](i);return s}},Hle=(e,t)=>{const s={...e,...t},a={};for(const n in s)e[n]!==void 0&&t[n]!==void 0&&(a[n]=zW(e[n],t[n]));return n=>{for(const i in a)s[i]=a[i](n);return s}},HW=(e,t)=>{const s=Du.createTransformer(t),a=$w(e),n=$w(t);return a.numVars===n.numVars&&a.numColors===n.numColors&&a.numNumbers>=n.numNumbers?ku(qW(a.values,n.values),s):WW(e,t)},yh=(e,t,s)=>{const a=t-e;return a===0?1:(s-e)/a},IO=(e,t)=>s=>$s(e,t,s);function Kle(e){return typeof e=="number"?IO:typeof e=="string"?Jn.test(e)?LW:HW:Array.isArray(e)?qW:typeof e=="object"?Hle:IO}function Gle(e,t,s){const a=[],n=s||Kle(e[0]),i=e.length-1;for(let o=0;o<i;o++){let l=n(e[o],e[o+1]);if(t){const c=Array.isArray(t)?t[o]||la:t;l=ku(c,l)}a.push(l)}return a}function XN(e,t,{clamp:s=!0,ease:a,mixer:n}={}){const i=e.length;if(V6(i===t.length),i===1)return()=>t[0];e[0]>e[i-1]&&(e=[...e].reverse(),t=[...t].reverse());const o=Gle(t,a,n),l=o.length,c=d=>{let h=0;if(l>1)for(;h<e.length-2&&!(d<e[h+1]);h++);const f=yh(e[h],e[h+1],d);return o[h](f)};return s?d=>c(Iu(e[0],e[i-1],d)):c}function KW(e,t){const s=e[e.length-1];for(let a=1;a<=t;a++){const n=yh(0,t,a);e.push($s(s,1,n))}}function H6(e){const t=[0];return KW(t,e.length-1),t}function Yle(e,t){return e.map(s=>s*t)}function Xle(e,t){return e.map(()=>t||PW).splice(0,e.length-1)}function Uw({duration:e=300,keyframes:t,times:s,ease:a="easeInOut"}){const n=TW(a)?a.map(PO):PO(a),i={done:!1,value:t[0]},o=Yle(s&&s.length===t.length?s:H6(t),e),l=XN(o,t,{ease:Array.isArray(n)?n:Xle(t,n)});return{calculatedDuration:e,next:c=>(i.value=l(c),i.done=c>=e,i)}}function K6(e,t){return t?e*(1e3/t):0}const Qle=5;function GW(e,t,s){const a=Math.max(t-Qle,0);return K6(s-e(a),t-a)}const aS=.001,Zle=.01,Jle=10,ece=.05,tce=1;function rce({duration:e=800,bounce:t=.25,velocity:s=0,mass:a=1}){let n,i,o=1-t;o=Iu(ece,tce,o),e=Iu(Zle,Jle,lc(e)),o<1?(n=d=>{const h=d*o,f=h*e,x=h-s,y=X5(d,o),v=Math.exp(-f);return aS-x/y*v},i=d=>{const f=d*o*e,x=f*s+s,y=Math.pow(o,2)*Math.pow(d,2)*e,v=Math.exp(-f),w=X5(Math.pow(d,2),o);return(-n(d)+aS>0?-1:1)*((x-y)*v)/w}):(n=d=>{const h=Math.exp(-d*e),f=(d-s)*e+1;return-aS+h*f},i=d=>{const h=Math.exp(-d*e),f=(s-d)*(e*e);return h*f});const l=5/e,c=ace(n,i,l);if(e=Su(e),isNaN(c))return{stiffness:100,damping:10,duration:e};{const d=Math.pow(c,2)*a;return{stiffness:d,damping:o*2*Math.sqrt(a*d),duration:e}}}const sce=12;function ace(e,t,s){let a=s;for(let n=1;n<sce;n++)a=a-e(a)/t(a);return a}function X5(e,t){return e*Math.sqrt(1-t*t)}const nce=["duration","bounce"],ice=["stiffness","damping","mass"];function DO(e,t){return t.some(s=>e[s]!==void 0)}function oce(e){let t={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...e};if(!DO(e,ice)&&DO(e,nce)){const s=rce(e);t={...t,...s,mass:1},t.isResolvedFromDuration=!0}return t}function G6({keyframes:e,restDelta:t,restSpeed:s,...a}){const n=e[0],i=e[e.length-1],o={done:!1,value:n},{stiffness:l,damping:c,mass:d,duration:h,velocity:f,isResolvedFromDuration:x}=oce({...a,velocity:-lc(a.velocity||0)}),y=f||0,v=c/(2*Math.sqrt(l*d)),w=i-n,N=lc(Math.sqrt(l/d)),k=Math.abs(w)<5;s||(s=k?.01:2),t||(t=k?.005:.5);let C;if(v<1){const E=X5(N,v);C=_=>{const T=Math.exp(-v*N*_);return i-T*((y+v*N*w)/E*Math.sin(E*_)+w*Math.cos(E*_))}}else if(v===1)C=E=>i-Math.exp(-N*E)*(w+(y+N*w)*E);else{const E=N*Math.sqrt(v*v-1);C=_=>{const T=Math.exp(-v*N*_),A=Math.min(E*_,300);return i-T*((y+v*N*w)*Math.sinh(A)+E*w*Math.cosh(A))/E}}return{calculatedDuration:x&&h||null,next:E=>{const _=C(E);if(x)o.done=E>=h;else{let T=y;E!==0&&(v<1?T=GW(C,E,_):T=0);const A=Math.abs(T)<=s,P=Math.abs(i-_)<=t;o.done=A&&P}return o.value=o.done?i:_,o}}}function OO({keyframes:e,velocity:t=0,power:s=.8,timeConstant:a=325,bounceDamping:n=10,bounceStiffness:i=500,modifyTarget:o,min:l,max:c,restDelta:d=.5,restSpeed:h}){const f=e[0],x={done:!1,value:f},y=M=>l!==void 0&&M<l||c!==void 0&&M>c,v=M=>l===void 0?c:c===void 0||Math.abs(l-M)<Math.abs(c-M)?l:c;let w=s*t;const N=f+w,k=o===void 0?N:o(N);k!==N&&(w=k-f);const C=M=>-w*Math.exp(-M/a),E=M=>k+C(M),_=M=>{const R=C(M),$=E(M);x.done=Math.abs(R)<=d,x.value=x.done?k:$};let T,A;const P=M=>{y(x.value)&&(T=M,A=G6({keyframes:[x.value,v(x.value)],velocity:GW(E,M,x.value),damping:n,stiffness:i,restDelta:d,restSpeed:h}))};return P(0),{calculatedDuration:null,next:M=>{let R=!1;return!A&&T===void 0&&(R=!0,_(M),P(M)),T!==void 0&&M>T?A.next(M-T):(!R&&_(M),x)}}}const lce=e=>{const t=({timestamp:s})=>e(s);return{start:()=>Mr.update(t,!0),stop:()=>Ko(t),now:()=>kn.isProcessing?kn.timestamp:performance.now()}},Q5=2e4;function Z5(e){let t=0;const s=50;let a=e.next(t);for(;!a.done&&t<Q5;)t+=s,a=e.next(t);return t>=Q5?1/0:t}const cce={decay:OO,inertia:OO,tween:Uw,keyframes:Uw,spring:G6};function Vw({autoplay:e=!0,delay:t=0,driver:s=lce,keyframes:a,type:n="keyframes",repeat:i=0,repeatDelay:o=0,repeatType:l="loop",onPlay:c,onStop:d,onComplete:h,onUpdate:f,...x}){let y=1,v=!1,w,N;const k=()=>{N=new Promise(G=>{w=G})};k();let C;const E=cce[n]||Uw;let _;E!==Uw&&typeof a[0]!="number"&&(_=XN([0,100],a,{clamp:!1}),a=[0,100]);const T=E({...x,keyframes:a});let A;l==="mirror"&&(A=E({...x,keyframes:[...a].reverse(),velocity:-(x.velocity||0)}));let P="idle",M=null,R=null,$=null;T.calculatedDuration===null&&i&&(T.calculatedDuration=Z5(T));const{calculatedDuration:W}=T;let I=1/0,B=1/0;W!==null&&(I=W+o,B=I*(i+1)-o);let O=0;const F=G=>{if(R===null)return;y>0&&(R=Math.min(R,G)),y<0&&(R=Math.min(G-B/y,R)),M!==null?O=M:O=Math.round(G-R)*y;const te=O-t*(y>=0?1:-1),he=y>=0?te<0:te>B;O=Math.max(te,0),P==="finished"&&M===null&&(O=B);let ne=O,ce=T;if(i){const ie=Math.min(O,B)/I;let ge=Math.floor(ie),Z=ie%1;!Z&&ie>=1&&(Z=1),Z===1&&ge--,ge=Math.min(ge,i+1),!!(ge%2)&&(l==="reverse"?(Z=1-Z,o&&(Z-=o/I)):l==="mirror"&&(ce=A)),ne=Iu(0,1,Z)*I}const xe=he?{done:!1,value:a[0]}:ce.next(ne);_&&(xe.value=_(xe.value));let{done:_e}=xe;!he&&W!==null&&(_e=y>=0?O>=B:O<=0);const oe=M===null&&(P==="finished"||P==="running"&&_e);return f&&f(xe.value),oe&&K(),xe},q=()=>{C&&C.stop(),C=void 0},H=()=>{P="idle",q(),w(),k(),R=$=null},K=()=>{P="finished",h&&h(),q(),w()},V=()=>{if(v)return;C||(C=s(F));const G=C.now();c&&c(),M!==null?R=G-M:(!R||P==="finished")&&(R=G),P==="finished"&&k(),$=R,M=null,P="running",C.start()};e&&V();const z={then(G,te){return N.then(G,te)},get time(){return lc(O)},set time(G){G=Su(G),O=G,M!==null||!C||y===0?M=G:R=C.now()-G/y},get duration(){const G=T.calculatedDuration===null?Z5(T):T.calculatedDuration;return lc(G)},get speed(){return y},set speed(G){G===y||!C||(y=G,z.time=lc(O))},get state(){return P},play:V,pause:()=>{P="paused",M=O},stop:()=>{v=!0,P!=="idle"&&(P="idle",d&&d(),H())},cancel:()=>{$!==null&&F($),H()},complete:()=>{P="finished"},sample:G=>(R=0,F(G))};return z}function YW(e){let t;return()=>(t===void 0&&(t=e()),t)}const dce=YW(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),uce=new Set(["opacity","clipPath","filter","transform","backgroundColor"]),wv=10,hce=2e4,mce=(e,t)=>t.type==="spring"||e==="backgroundColor"||!CW(t.ease);function fce(e,t,{onUpdate:s,onComplete:a,...n}){if(!(dce()&&uce.has(t)&&!n.repeatDelay&&n.repeatType!=="mirror"&&n.damping!==0&&n.type!=="inertia"))return!1;let o=!1,l,c,d=!1;const h=()=>{c=new Promise(E=>{l=E})};h();let{keyframes:f,duration:x=300,ease:y,times:v}=n;if(mce(t,n)){const E=Vw({...n,repeat:0,delay:0});let _={done:!1,value:f[0]};const T=[];let A=0;for(;!_.done&&A<hce;)_=E.sample(A),T.push(_.value),A+=wv;v=void 0,f=T,x=A-wv,y="linear"}const w=_le(e.owner.current,t,f,{...n,duration:x,ease:y,times:v}),N=()=>{d=!1,w.cancel()},k=()=>{d=!0,Mr.update(N),l(),h()};return w.onfinish=()=>{d||(e.set(Ele(f,n)),a&&a(),k())},{then(E,_){return c.then(E,_)},attachTimeline(E){return w.timeline=E,w.onfinish=null,la},get time(){return lc(w.currentTime||0)},set time(E){w.currentTime=Su(E)},get speed(){return w.playbackRate},set speed(E){w.playbackRate=E},get duration(){return lc(x)},play:()=>{o||(w.play(),Ko(N))},pause:()=>w.pause(),stop:()=>{if(o=!0,w.playState==="idle")return;const{currentTime:E}=w;if(E){const _=Vw({...n,autoplay:!1});e.setWithVelocity(_.sample(E-wv).value,_.sample(E).value,wv)}k()},complete:()=>{d||w.finish()},cancel:k}}function xce({keyframes:e,delay:t,onUpdate:s,onComplete:a}){const n=()=>(s&&s(e[e.length-1]),a&&a(),{time:0,speed:1,duration:0,play:la,pause:la,stop:la,then:i=>(i(),Promise.resolve()),cancel:la,complete:la});return t?Vw({keyframes:[0,1],duration:0,delay:t,onComplete:n}):n()}const gce={type:"spring",stiffness:500,damping:25,restSpeed:10},pce=e=>({type:"spring",stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}),yce={type:"keyframes",duration:.8},bce={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},vce=(e,{keyframes:t})=>t.length>2?yce:Dh.has(e)?e.startsWith("scale")?pce(t[1]):gce:bce,J5=(e,t)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(Du.test(t)||t==="0")&&!t.startsWith("url(")),wce=new Set(["brightness","contrast","saturate","opacity"]);function jce(e){const[t,s]=e.slice(0,-1).split("(");if(t==="drop-shadow")return e;const[a]=s.match(KN)||[];if(!a)return e;const n=s.replace(a,"");let i=wce.has(t)?1:0;return a!==s&&(i*=100),t+"("+i+n+")"}const Nce=/([a-z-]*)\(.*?\)/g,e3={...Du,getAnimatableNone:e=>{const t=e.match(Nce);return t?t.map(jce).join(" "):e}},kce={...dW,color:Jn,backgroundColor:Jn,outlineColor:Jn,fill:Jn,stroke:Jn,borderColor:Jn,borderTopColor:Jn,borderRightColor:Jn,borderBottomColor:Jn,borderLeftColor:Jn,filter:e3,WebkitFilter:e3},Y6=e=>kce[e];function XW(e,t){let s=Y6(e);return s!==e3&&(s=Du),s.getAnimatableNone?s.getAnimatableNone(t):void 0}const QW=e=>/^0[^.\s]+$/.test(e);function Sce(e){if(typeof e=="number")return e===0;if(e!==null)return e==="none"||e==="0"||QW(e)}function Cce(e,t,s,a){const n=J5(t,s);let i;Array.isArray(s)?i=[...s]:i=[null,s];const o=a.from!==void 0?a.from:e.get();let l;const c=[];for(let d=0;d<i.length;d++)i[d]===null&&(i[d]=d===0?o:i[d-1]),Sce(i[d])&&c.push(d),typeof i[d]=="string"&&i[d]!=="none"&&i[d]!=="0"&&(l=i[d]);if(n&&c.length&&l)for(let d=0;d<c.length;d++){const h=c[d];i[h]=XW(t,l)}return i}function _ce({when:e,delay:t,delayChildren:s,staggerChildren:a,staggerDirection:n,repeat:i,repeatType:o,repeatDelay:l,from:c,elapsed:d,...h}){return!!Object.keys(h).length}function X6(e,t){return e[t]||e.default||e}const Ece={skipAnimations:!1},Q6=(e,t,s,a={})=>n=>{const i=X6(a,e)||{},o=i.delay||a.delay||0;let{elapsed:l=0}=a;l=l-Su(o);const c=Cce(t,e,s,i),d=c[0],h=c[c.length-1],f=J5(e,d),x=J5(e,h);let y={keyframes:c,velocity:t.getVelocity(),ease:"easeOut",...i,delay:-l,onUpdate:v=>{t.set(v),i.onUpdate&&i.onUpdate(v)},onComplete:()=>{n(),i.onComplete&&i.onComplete()}};if(_ce(i)||(y={...y,...vce(e,y)}),y.duration&&(y.duration=Su(y.duration)),y.repeatDelay&&(y.repeatDelay=Su(y.repeatDelay)),!f||!x||Cle.current||i.type===!1||Ece.skipAnimations)return xce(y);if(!a.isHandoff&&t.owner&&t.owner.current instanceof HTMLElement&&!t.owner.getProps().onUpdate){const v=fce(t,e,y);if(v)return v}return Vw(y)};function Ww(e){return!!(Kn(e)&&e.add)}const ZW=e=>/^\-?\d*\.?\d+$/.test(e);function Z6(e,t){e.indexOf(t)===-1&&e.push(t)}function QN(e,t){const s=e.indexOf(t);s>-1&&e.splice(s,1)}class J6{constructor(){this.subscriptions=[]}add(t){return Z6(this.subscriptions,t),()=>QN(this.subscriptions,t)}notify(t,s,a){const n=this.subscriptions.length;if(n)if(n===1)this.subscriptions[0](t,s,a);else for(let i=0;i<n;i++){const o=this.subscriptions[i];o&&o(t,s,a)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Ace=e=>!isNaN(parseFloat(e)),np={current:void 0};class Pce{constructor(t,s={}){this.version="10.18.0",this.timeDelta=0,this.lastUpdated=0,this.canTrackVelocity=!1,this.events={},this.updateAndNotify=(a,n=!0)=>{this.prev=this.current,this.current=a;const{delta:i,timestamp:o}=kn;this.lastUpdated!==o&&(this.timeDelta=i,this.lastUpdated=o,Mr.postRender(this.scheduleVelocityCheck)),this.prev!==this.current&&this.events.change&&this.events.change.notify(this.current),this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()),n&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.scheduleVelocityCheck=()=>Mr.postRender(this.velocityCheck),this.velocityCheck=({timestamp:a})=>{a!==this.lastUpdated&&(this.prev=this.current,this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()))},this.hasAnimated=!1,this.prev=this.current=t,this.canTrackVelocity=Ace(this.current),this.owner=s.owner}onChange(t){return this.on("change",t)}on(t,s){this.events[t]||(this.events[t]=new J6);const a=this.events[t].add(s);return t==="change"?()=>{a(),Mr.read(()=>{this.events.change.getSize()||this.stop()})}:a}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,s){this.passiveEffect=t,this.stopPassiveEffect=s}set(t,s=!0){!s||!this.passiveEffect?this.updateAndNotify(t,s):this.passiveEffect(t,this.updateAndNotify)}setWithVelocity(t,s,a){this.set(s),this.prev=t,this.timeDelta=a}jump(t){this.updateAndNotify(t),this.prev=t,this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return np.current&&np.current.push(this),this.current}getPrevious(){return this.prev}getVelocity(){return this.canTrackVelocity?K6(parseFloat(this.current)-parseFloat(this.prev),this.timeDelta):0}start(t){return this.stop(),new Promise(s=>{this.hasAnimated=!0,this.animation=t(s),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function kl(e,t){return new Pce(e,t)}const JW=e=>t=>t.test(e),Tce={test:e=>e==="auto",parse:e=>e},ez=[Oh,Gt,oc,Ud,Uoe,$oe,Tce],sg=e=>ez.find(JW(e)),Ice=[...ez,Jn,Du],Dce=e=>Ice.find(JW(e));function Oce(e,t,s){e.hasValue(t)?e.getValue(t).set(s):e.addValue(t,kl(s))}function Rce(e,t){const s=YN(e,t);let{transitionEnd:a={},transition:n={},...i}=s?e.makeTargetAnimatable(s,!1):{};i={...i,...a};for(const o in i){const l=tle(i[o]);Oce(e,o,l)}}function Mce(e,t,s){var a,n;const i=Object.keys(t).filter(l=>!e.hasValue(l)),o=i.length;if(o)for(let l=0;l<o;l++){const c=i[l],d=t[c];let h=null;Array.isArray(d)&&(h=d[0]),h===null&&(h=(n=(a=s[c])!==null&&a!==void 0?a:e.readValue(c))!==null&&n!==void 0?n:t[c]),h!=null&&(typeof h=="string"&&(ZW(h)||QW(h))?h=parseFloat(h):!Dce(h)&&Du.test(d)&&(h=XW(c,d)),e.addValue(c,kl(h,{owner:e})),s[c]===void 0&&(s[c]=h),h!==null&&e.setBaseTarget(c,h))}}function Lce(e,t){return t?(t[e]||t.default||t).from:void 0}function Fce(e,t,s){const a={};for(const n in e){const i=Lce(n,t);if(i!==void 0)a[n]=i;else{const o=s.getValue(n);o&&(a[n]=o.get())}}return a}function Bce({protectedKeys:e,needsAnimating:t},s){const a=e.hasOwnProperty(s)&&t[s]!==!0;return t[s]=!1,a}function $ce(e,t){const s=e.get();if(Array.isArray(t)){for(let a=0;a<t.length;a++)if(t[a]!==s)return!0}else return s!==t}function eA(e,t,{delay:s=0,transitionOverride:a,type:n}={}){let{transition:i=e.getDefaultTransition(),transitionEnd:o,...l}=e.makeTargetAnimatable(t);const c=e.getValue("willChange");a&&(i=a);const d=[],h=n&&e.animationState&&e.animationState.getState()[n];for(const f in l){const x=e.getValue(f),y=l[f];if(!x||y===void 0||h&&Bce(h,f))continue;const v={delay:s,elapsed:0,...X6(i||{},f)};if(window.HandoffAppearAnimations){const k=e.getProps()[sW];if(k){const C=window.HandoffAppearAnimations(k,f,x,Mr);C!==null&&(v.elapsed=C,v.isHandoff=!0)}}let w=!v.isHandoff&&!$ce(x,y);if(v.type==="spring"&&(x.getVelocity()||v.velocity)&&(w=!1),x.animation&&(w=!1),w)continue;x.start(Q6(f,x,y,e.shouldReduceMotion&&Dh.has(f)?{type:!1}:v));const N=x.animation;Ww(c)&&(c.add(f),N.then(()=>c.remove(f))),d.push(N)}return o&&Promise.all(d).then(()=>{o&&Rce(e,o)}),d}function t3(e,t,s={}){const a=YN(e,t,s.custom);let{transition:n=e.getDefaultTransition()||{}}=a||{};s.transitionOverride&&(n=s.transitionOverride);const i=a?()=>Promise.all(eA(e,a,s)):()=>Promise.resolve(),o=e.variantChildren&&e.variantChildren.size?(c=0)=>{const{delayChildren:d=0,staggerChildren:h,staggerDirection:f}=n;return Uce(e,t,d+c,h,f,s)}:()=>Promise.resolve(),{when:l}=n;if(l){const[c,d]=l==="beforeChildren"?[i,o]:[o,i];return c().then(()=>d())}else return Promise.all([i(),o(s.delay)])}function Uce(e,t,s=0,a=0,n=1,i){const o=[],l=(e.variantChildren.size-1)*a,c=n===1?(d=0)=>d*a:(d=0)=>l-d*a;return Array.from(e.variantChildren).sort(Vce).forEach((d,h)=>{d.notify("AnimationStart",t),o.push(t3(d,t,{...i,delay:s+c(h)}).then(()=>d.notify("AnimationComplete",t)))}),Promise.all(o)}function Vce(e,t){return e.sortNodePosition(t)}function Wce(e,t,s={}){e.notify("AnimationStart",t);let a;if(Array.isArray(t)){const n=t.map(i=>t3(e,i,s));a=Promise.all(n)}else if(typeof t=="string")a=t3(e,t,s);else{const n=typeof t=="function"?YN(e,t,s.custom):t;a=Promise.all(eA(e,n,s))}return a.then(()=>e.notify("AnimationComplete",t))}const zce=[...I6].reverse(),qce=I6.length;function Hce(e){return t=>Promise.all(t.map(({animation:s,options:a})=>Wce(e,s,a)))}function Kce(e){let t=Hce(e);const s=Yce();let a=!0;const n=(c,d)=>{const h=YN(e,d);if(h){const{transition:f,transitionEnd:x,...y}=h;c={...c,...y,...x}}return c};function i(c){t=c(e)}function o(c,d){const h=e.getProps(),f=e.getVariantContext(!0)||{},x=[],y=new Set;let v={},w=1/0;for(let k=0;k<qce;k++){const C=zce[k],E=s[C],_=h[C]!==void 0?h[C]:f[C],T=Yp(_),A=C===d?E.isActive:null;A===!1&&(w=k);let P=_===f[C]&&_!==h[C]&&T;if(P&&a&&e.manuallyAnimateOnMount&&(P=!1),E.protectedKeys={...v},!E.isActive&&A===null||!_&&!E.prevProp||qN(_)||typeof _=="boolean")continue;let R=Gce(E.prevProp,_)||C===d&&E.isActive&&!P&&T||k>w&&T,$=!1;const W=Array.isArray(_)?_:[_];let I=W.reduce(n,{});A===!1&&(I={});const{prevResolvedValues:B={}}=E,O={...B,...I},F=q=>{R=!0,y.has(q)&&($=!0,y.delete(q)),E.needsAnimating[q]=!0};for(const q in O){const H=I[q],K=B[q];if(v.hasOwnProperty(q))continue;let V=!1;Bw(H)&&Bw(K)?V=!kW(H,K):V=H!==K,V?H!==void 0?F(q):y.add(q):H!==void 0&&y.has(q)?F(q):E.protectedKeys[q]=!0}E.prevProp=_,E.prevResolvedValues=I,E.isActive&&(v={...v,...I}),a&&e.blockInitialAnimation&&(R=!1),R&&(!P||$)&&x.push(...W.map(q=>({animation:q,options:{type:C,...c}})))}if(y.size){const k={};y.forEach(C=>{const E=e.getBaseTarget(C);E!==void 0&&(k[C]=E)}),x.push({animation:k})}let N=!!x.length;return a&&(h.initial===!1||h.initial===h.animate)&&!e.manuallyAnimateOnMount&&(N=!1),a=!1,N?t(x):Promise.resolve()}function l(c,d,h){var f;if(s[c].isActive===d)return Promise.resolve();(f=e.variantChildren)===null||f===void 0||f.forEach(y=>{var v;return(v=y.animationState)===null||v===void 0?void 0:v.setActive(c,d)}),s[c].isActive=d;const x=o(h,c);for(const y in s)s[y].protectedKeys={};return x}return{animateChanges:o,setActive:l,setAnimateFunction:i,getState:()=>s}}function Gce(e,t){return typeof t=="string"?t!==e:Array.isArray(t)?!kW(t,e):!1}function o0(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function Yce(){return{animate:o0(!0),whileInView:o0(),whileHover:o0(),whileTap:o0(),whileDrag:o0(),whileFocus:o0(),exit:o0()}}class Xce extends qu{constructor(t){super(t),t.animationState||(t.animationState=Kce(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();this.unmount(),qN(t)&&(this.unmount=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:s}=this.node.prevProps||{};t!==s&&this.updateAnimationControlsSubscription()}unmount(){}}let Qce=0;class Zce extends qu{constructor(){super(...arguments),this.id=Qce++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:s,custom:a}=this.node.presenceContext,{isPresent:n}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===n)return;const i=this.node.animationState.setActive("exit",!t,{custom:a??this.node.getProps().custom});s&&!t&&i.then(()=>s(this.id))}mount(){const{register:t}=this.node.presenceContext||{};t&&(this.unmount=t(this.id))}unmount(){}}const Jce={animation:{Feature:Xce},exit:{Feature:Zce}},RO=(e,t)=>Math.abs(e-t);function ede(e,t){const s=RO(e.x,t.x),a=RO(e.y,t.y);return Math.sqrt(s**2+a**2)}class tz{constructor(t,s,{transformPagePoint:a,contextWindow:n,dragSnapToOrigin:i=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const f=iS(this.lastMoveEventInfo,this.history),x=this.startEvent!==null,y=ede(f.offset,{x:0,y:0})>=3;if(!x&&!y)return;const{point:v}=f,{timestamp:w}=kn;this.history.push({...v,timestamp:w});const{onStart:N,onMove:k}=this.handlers;x||(N&&N(this.lastMoveEvent,f),this.startEvent=this.lastMoveEvent),k&&k(this.lastMoveEvent,f)},this.handlePointerMove=(f,x)=>{this.lastMoveEvent=f,this.lastMoveEventInfo=nS(x,this.transformPagePoint),Mr.update(this.updatePoint,!0)},this.handlePointerUp=(f,x)=>{this.end();const{onEnd:y,onSessionEnd:v,resumeAnimation:w}=this.handlers;if(this.dragSnapToOrigin&&w&&w(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const N=iS(f.type==="pointercancel"?this.lastMoveEventInfo:nS(x,this.transformPagePoint),this.history);this.startEvent&&y&&y(f,N),v&&v(f,N)},!bW(t))return;this.dragSnapToOrigin=i,this.handlers=s,this.transformPagePoint=a,this.contextWindow=n||window;const o=GN(t),l=nS(o,this.transformPagePoint),{point:c}=l,{timestamp:d}=kn;this.history=[{...c,timestamp:d}];const{onSessionStart:h}=s;h&&h(t,iS(l,this.history)),this.removeListeners=ku(Kc(this.contextWindow,"pointermove",this.handlePointerMove),Kc(this.contextWindow,"pointerup",this.handlePointerUp),Kc(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),Ko(this.updatePoint)}}function nS(e,t){return t?{point:t(e.point)}:e}function MO(e,t){return{x:e.x-t.x,y:e.y-t.y}}function iS({point:e},t){return{point:e,delta:MO(e,rz(t)),offset:MO(e,tde(t)),velocity:rde(t,.1)}}function tde(e){return e[0]}function rz(e){return e[e.length-1]}function rde(e,t){if(e.length<2)return{x:0,y:0};let s=e.length-1,a=null;const n=rz(e);for(;s>=0&&(a=e[s],!(n.timestamp-a.timestamp>Su(t)));)s--;if(!a)return{x:0,y:0};const i=lc(n.timestamp-a.timestamp);if(i===0)return{x:0,y:0};const o={x:(n.x-a.x)/i,y:(n.y-a.y)/i};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function co(e){return e.max-e.min}function r3(e,t=0,s=.01){return Math.abs(e-t)<=s}function LO(e,t,s,a=.5){e.origin=a,e.originPoint=$s(t.min,t.max,e.origin),e.scale=co(s)/co(t),(r3(e.scale,1,1e-4)||isNaN(e.scale))&&(e.scale=1),e.translate=$s(s.min,s.max,e.origin)-e.originPoint,(r3(e.translate)||isNaN(e.translate))&&(e.translate=0)}function ip(e,t,s,a){LO(e.x,t.x,s.x,a?a.originX:void 0),LO(e.y,t.y,s.y,a?a.originY:void 0)}function FO(e,t,s){e.min=s.min+t.min,e.max=e.min+co(t)}function sde(e,t,s){FO(e.x,t.x,s.x),FO(e.y,t.y,s.y)}function BO(e,t,s){e.min=t.min-s.min,e.max=e.min+co(t)}function op(e,t,s){BO(e.x,t.x,s.x),BO(e.y,t.y,s.y)}function ade(e,{min:t,max:s},a){return t!==void 0&&e<t?e=a?$s(t,e,a.min):Math.max(e,t):s!==void 0&&e>s&&(e=a?$s(s,e,a.max):Math.min(e,s)),e}function $O(e,t,s){return{min:t!==void 0?e.min+t:void 0,max:s!==void 0?e.max+s-(e.max-e.min):void 0}}function nde(e,{top:t,left:s,bottom:a,right:n}){return{x:$O(e.x,s,n),y:$O(e.y,t,a)}}function UO(e,t){let s=t.min-e.min,a=t.max-e.max;return t.max-t.min<e.max-e.min&&([s,a]=[a,s]),{min:s,max:a}}function ide(e,t){return{x:UO(e.x,t.x),y:UO(e.y,t.y)}}function ode(e,t){let s=.5;const a=co(e),n=co(t);return n>a?s=yh(t.min,t.max-a,e.min):a>n&&(s=yh(e.min,e.max-n,t.min)),Iu(0,1,s)}function lde(e,t){const s={};return t.min!==void 0&&(s.min=t.min-e.min),t.max!==void 0&&(s.max=t.max-e.min),s}const s3=.35;function cde(e=s3){return e===!1?e=0:e===!0&&(e=s3),{x:VO(e,"left","right"),y:VO(e,"top","bottom")}}function VO(e,t,s){return{min:WO(e,t),max:WO(e,s)}}function WO(e,t){return typeof e=="number"?e:e[t]||0}const zO=()=>({translate:0,scale:1,origin:0,originPoint:0}),$m=()=>({x:zO(),y:zO()}),qO=()=>({min:0,max:0}),Na=()=>({x:qO(),y:qO()});function Po(e){return[e("x"),e("y")]}function sz({top:e,left:t,right:s,bottom:a}){return{x:{min:t,max:s},y:{min:e,max:a}}}function dde({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}function ude(e,t){if(!t)return e;const s=t({x:e.left,y:e.top}),a=t({x:e.right,y:e.bottom});return{top:s.y,left:s.x,bottom:a.y,right:a.x}}function oS(e){return e===void 0||e===1}function a3({scale:e,scaleX:t,scaleY:s}){return!oS(e)||!oS(t)||!oS(s)}function x0(e){return a3(e)||az(e)||e.z||e.rotate||e.rotateX||e.rotateY}function az(e){return HO(e.x)||HO(e.y)}function HO(e){return e&&e!=="0%"}function zw(e,t,s){const a=e-s,n=t*a;return s+n}function KO(e,t,s,a,n){return n!==void 0&&(e=zw(e,n,a)),zw(e,s,a)+t}function n3(e,t=0,s=1,a,n){e.min=KO(e.min,t,s,a,n),e.max=KO(e.max,t,s,a,n)}function nz(e,{x:t,y:s}){n3(e.x,t.translate,t.scale,t.originPoint),n3(e.y,s.translate,s.scale,s.originPoint)}function hde(e,t,s,a=!1){const n=s.length;if(!n)return;t.x=t.y=1;let i,o;for(let l=0;l<n;l++){i=s[l],o=i.projectionDelta;const c=i.instance;c&&c.style&&c.style.display==="contents"||(a&&i.options.layoutScroll&&i.scroll&&i!==i.root&&Um(e,{x:-i.scroll.offset.x,y:-i.scroll.offset.y}),o&&(t.x*=o.x.scale,t.y*=o.y.scale,nz(e,o)),a&&x0(i.latestValues)&&Um(e,i.latestValues))}t.x=GO(t.x),t.y=GO(t.y)}function GO(e){return Number.isInteger(e)||e>1.0000000000001||e<.999999999999?e:1}function qd(e,t){e.min=e.min+t,e.max=e.max+t}function YO(e,t,[s,a,n]){const i=t[n]!==void 0?t[n]:.5,o=$s(e.min,e.max,i);n3(e,t[s],t[a],o,t.scale)}const mde=["x","scaleX","originX"],fde=["y","scaleY","originY"];function Um(e,t){YO(e.x,t,mde),YO(e.y,t,fde)}function iz(e,t){return sz(ude(e.getBoundingClientRect(),t))}function xde(e,t,s){const a=iz(e,s),{scroll:n}=t;return n&&(qd(a.x,n.offset.x),qd(a.y,n.offset.y)),a}const oz=({current:e})=>e?e.ownerDocument.defaultView:null,gde=new WeakMap;class pde{constructor(t){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Na(),this.visualElement=t}start(t,{snapToCursor:s=!1}={}){const{presenceContext:a}=this.visualElement;if(a&&a.isPresent===!1)return;const n=h=>{const{dragSnapToOrigin:f}=this.getProps();f?this.pauseAnimation():this.stopAnimation(),s&&this.snapToCursor(GN(h,"page").point)},i=(h,f)=>{const{drag:x,dragPropagation:y,onDragStart:v}=this.getProps();if(x&&!y&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=wW(x),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Po(N=>{let k=this.getAxisMotionValue(N).get()||0;if(oc.test(k)){const{projection:C}=this.visualElement;if(C&&C.layout){const E=C.layout.layoutBox[N];E&&(k=co(E)*(parseFloat(k)/100))}}this.originPoint[N]=k}),v&&Mr.update(()=>v(h,f),!1,!0);const{animationState:w}=this.visualElement;w&&w.setActive("whileDrag",!0)},o=(h,f)=>{const{dragPropagation:x,dragDirectionLock:y,onDirectionLock:v,onDrag:w}=this.getProps();if(!x&&!this.openGlobalLock)return;const{offset:N}=f;if(y&&this.currentDirection===null){this.currentDirection=yde(N),this.currentDirection!==null&&v&&v(this.currentDirection);return}this.updateAxis("x",f.point,N),this.updateAxis("y",f.point,N),this.visualElement.render(),w&&w(h,f)},l=(h,f)=>this.stop(h,f),c=()=>Po(h=>{var f;return this.getAnimationState(h)==="paused"&&((f=this.getAxisMotionValue(h).animation)===null||f===void 0?void 0:f.play())}),{dragSnapToOrigin:d}=this.getProps();this.panSession=new tz(t,{onSessionStart:n,onStart:i,onMove:o,onSessionEnd:l,resumeAnimation:c},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:d,contextWindow:oz(this.visualElement)})}stop(t,s){const a=this.isDragging;if(this.cancel(),!a)return;const{velocity:n}=s;this.startAnimation(n);const{onDragEnd:i}=this.getProps();i&&Mr.update(()=>i(t,s))}cancel(){this.isDragging=!1;const{projection:t,animationState:s}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:a}=this.getProps();!a&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),s&&s.setActive("whileDrag",!1)}updateAxis(t,s,a){const{drag:n}=this.getProps();if(!a||!jv(t,n,this.currentDirection))return;const i=this.getAxisMotionValue(t);let o=this.originPoint[t]+a[t];this.constraints&&this.constraints[t]&&(o=ade(o,this.constraints[t],this.elastic[t])),i.set(o)}resolveConstraints(){var t;const{dragConstraints:s,dragElastic:a}=this.getProps(),n=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(t=this.visualElement.projection)===null||t===void 0?void 0:t.layout,i=this.constraints;s&&Fm(s)?this.constraints||(this.constraints=this.resolveRefConstraints()):s&&n?this.constraints=nde(n.layoutBox,s):this.constraints=!1,this.elastic=cde(a),i!==this.constraints&&n&&this.constraints&&!this.hasMutatedConstraints&&Po(o=>{this.getAxisMotionValue(o)&&(this.constraints[o]=lde(n.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:s}=this.getProps();if(!t||!Fm(t))return!1;const a=t.current,{projection:n}=this.visualElement;if(!n||!n.layout)return!1;const i=xde(a,n.root,this.visualElement.getTransformPagePoint());let o=ide(n.layout.layoutBox,i);if(s){const l=s(dde(o));this.hasMutatedConstraints=!!l,l&&(o=sz(l))}return o}startAnimation(t){const{drag:s,dragMomentum:a,dragElastic:n,dragTransition:i,dragSnapToOrigin:o,onDragTransitionEnd:l}=this.getProps(),c=this.constraints||{},d=Po(h=>{if(!jv(h,s,this.currentDirection))return;let f=c&&c[h]||{};o&&(f={min:0,max:0});const x=n?200:1e6,y=n?40:1e7,v={type:"inertia",velocity:a?t[h]:0,bounceStiffness:x,bounceDamping:y,timeConstant:750,restDelta:1,restSpeed:10,...i,...f};return this.startAxisValueAnimation(h,v)});return Promise.all(d).then(l)}startAxisValueAnimation(t,s){const a=this.getAxisMotionValue(t);return a.start(Q6(t,a,0,s))}stopAnimation(){Po(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){Po(t=>{var s;return(s=this.getAxisMotionValue(t).animation)===null||s===void 0?void 0:s.pause()})}getAnimationState(t){var s;return(s=this.getAxisMotionValue(t).animation)===null||s===void 0?void 0:s.state}getAxisMotionValue(t){const s="_drag"+t.toUpperCase(),a=this.visualElement.getProps(),n=a[s];return n||this.visualElement.getValue(t,(a.initial?a.initial[t]:void 0)||0)}snapToCursor(t){Po(s=>{const{drag:a}=this.getProps();if(!jv(s,a,this.currentDirection))return;const{projection:n}=this.visualElement,i=this.getAxisMotionValue(s);if(n&&n.layout){const{min:o,max:l}=n.layout.layoutBox[s];i.set(t[s]-$s(o,l,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:s}=this.getProps(),{projection:a}=this.visualElement;if(!Fm(s)||!a||!this.constraints)return;this.stopAnimation();const n={x:0,y:0};Po(o=>{const l=this.getAxisMotionValue(o);if(l){const c=l.get();n[o]=ode({min:c,max:c},this.constraints[o])}});const{transformTemplate:i}=this.visualElement.getProps();this.visualElement.current.style.transform=i?i({},""):"none",a.root&&a.root.updateScroll(),a.updateLayout(),this.resolveConstraints(),Po(o=>{if(!jv(o,t,null))return;const l=this.getAxisMotionValue(o),{min:c,max:d}=this.constraints[o];l.set($s(c,d,n[o]))})}addListeners(){if(!this.visualElement.current)return;gde.set(this.visualElement,this);const t=this.visualElement.current,s=Kc(t,"pointerdown",c=>{const{drag:d,dragListener:h=!0}=this.getProps();d&&h&&this.start(c)}),a=()=>{const{dragConstraints:c}=this.getProps();Fm(c)&&(this.constraints=this.resolveRefConstraints())},{projection:n}=this.visualElement,i=n.addEventListener("measure",a);n&&!n.layout&&(n.root&&n.root.updateScroll(),n.updateLayout()),a();const o=Wc(window,"resize",()=>this.scalePositionWithinConstraints()),l=n.addEventListener("didUpdate",({delta:c,hasLayoutChanged:d})=>{this.isDragging&&d&&(Po(h=>{const f=this.getAxisMotionValue(h);f&&(this.originPoint[h]+=c[h].translate,f.set(f.get()+c[h].translate))}),this.visualElement.render())});return()=>{o(),s(),i(),l&&l()}}getProps(){const t=this.visualElement.getProps(),{drag:s=!1,dragDirectionLock:a=!1,dragPropagation:n=!1,dragConstraints:i=!1,dragElastic:o=s3,dragMomentum:l=!0}=t;return{...t,drag:s,dragDirectionLock:a,dragPropagation:n,dragConstraints:i,dragElastic:o,dragMomentum:l}}}function jv(e,t,s){return(t===!0||t===e)&&(s===null||s===e)}function yde(e,t=10){let s=null;return Math.abs(e.y)>t?s="y":Math.abs(e.x)>t&&(s="x"),s}class bde extends qu{constructor(t){super(t),this.removeGroupControls=la,this.removeListeners=la,this.controls=new pde(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||la}unmount(){this.removeGroupControls(),this.removeListeners()}}const XO=e=>(t,s)=>{e&&Mr.update(()=>e(t,s))};class vde extends qu{constructor(){super(...arguments),this.removePointerDownListener=la}onPointerDown(t){this.session=new tz(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:oz(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:s,onPan:a,onPanEnd:n}=this.node.getProps();return{onSessionStart:XO(t),onStart:XO(s),onMove:a,onEnd:(i,o)=>{delete this.session,n&&Mr.update(()=>n(i,o))}}}mount(){this.removePointerDownListener=Kc(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}function wde(){const e=p.useContext(WN);if(e===null)return[!0,null];const{isPresent:t,onExitComplete:s,register:a}=e,n=p.useId();return p.useEffect(()=>a(n),[]),!t&&s?[!1,()=>s&&s(n)]:[!0]}const M1={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function QO(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const ag={correct:(e,t)=>{if(!t.target)return e;if(typeof e=="string")if(Gt.test(e))e=parseFloat(e);else return e;const s=QO(e,t.target.x),a=QO(e,t.target.y);return`${s}% ${a}%`}},jde={correct:(e,{treeScale:t,projectionDelta:s})=>{const a=e,n=Du.parse(e);if(n.length>5)return a;const i=Du.createTransformer(e),o=typeof n[0]!="number"?1:0,l=s.x.scale*t.x,c=s.y.scale*t.y;n[0+o]/=l,n[1+o]/=c;const d=$s(l,c,.5);return typeof n[2+o]=="number"&&(n[2+o]/=d),typeof n[3+o]=="number"&&(n[3+o]/=d),i(n)}};class Nde extends ns.Component{componentDidMount(){const{visualElement:t,layoutGroup:s,switchLayoutGroup:a,layoutId:n}=this.props,{projection:i}=t;Doe(kde),i&&(s.group&&s.group.add(i),a&&a.register&&n&&a.register(i),i.root.didUpdate(),i.addEventListener("animationComplete",()=>{this.safeToRemove()}),i.setOptions({...i.options,onExitComplete:()=>this.safeToRemove()})),M1.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:s,visualElement:a,drag:n,isPresent:i}=this.props,o=a.projection;return o&&(o.isPresent=i,n||t.layoutDependency!==s||s===void 0?o.willUpdate():this.safeToRemove(),t.isPresent!==i&&(i?o.promote():o.relegate()||Mr.postRender(()=>{const l=o.getStack();(!l||!l.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),queueMicrotask(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:s,switchLayoutGroup:a}=this.props,{projection:n}=t;n&&(n.scheduleCheckAfterUnmount(),s&&s.group&&s.group.remove(n),a&&a.deregister&&a.deregister(n))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function lz(e){const[t,s]=wde(),a=p.useContext(O6);return ns.createElement(Nde,{...e,layoutGroup:a,switchLayoutGroup:p.useContext(nW),isPresent:t,safeToRemove:s})}const kde={borderRadius:{...ag,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:ag,borderTopRightRadius:ag,borderBottomLeftRadius:ag,borderBottomRightRadius:ag,boxShadow:jde},cz=["TopLeft","TopRight","BottomLeft","BottomRight"],Sde=cz.length,ZO=e=>typeof e=="string"?parseFloat(e):e,JO=e=>typeof e=="number"||Gt.test(e);function Cde(e,t,s,a,n,i){n?(e.opacity=$s(0,s.opacity!==void 0?s.opacity:1,_de(a)),e.opacityExit=$s(t.opacity!==void 0?t.opacity:1,0,Ede(a))):i&&(e.opacity=$s(t.opacity!==void 0?t.opacity:1,s.opacity!==void 0?s.opacity:1,a));for(let o=0;o<Sde;o++){const l=`border${cz[o]}Radius`;let c=eR(t,l),d=eR(s,l);if(c===void 0&&d===void 0)continue;c||(c=0),d||(d=0),c===0||d===0||JO(c)===JO(d)?(e[l]=Math.max($s(ZO(c),ZO(d),a),0),(oc.test(d)||oc.test(c))&&(e[l]+="%")):e[l]=d}(t.rotate||s.rotate)&&(e.rotate=$s(t.rotate||0,s.rotate||0,a))}function eR(e,t){return e[t]!==void 0?e[t]:e.borderRadius}const _de=dz(0,.5,OW),Ede=dz(.5,.95,la);function dz(e,t,s){return a=>a<e?0:a>t?1:s(yh(e,t,a))}function tR(e,t){e.min=t.min,e.max=t.max}function No(e,t){tR(e.x,t.x),tR(e.y,t.y)}function rR(e,t,s,a,n){return e-=t,e=zw(e,1/s,a),n!==void 0&&(e=zw(e,1/n,a)),e}function Ade(e,t=0,s=1,a=.5,n,i=e,o=e){if(oc.test(t)&&(t=parseFloat(t),t=$s(o.min,o.max,t/100)-o.min),typeof t!="number")return;let l=$s(i.min,i.max,a);e===i&&(l-=t),e.min=rR(e.min,t,s,l,n),e.max=rR(e.max,t,s,l,n)}function sR(e,t,[s,a,n],i,o){Ade(e,t[s],t[a],t[n],t.scale,i,o)}const Pde=["x","scaleX","originX"],Tde=["y","scaleY","originY"];function aR(e,t,s,a){sR(e.x,t,Pde,s?s.x:void 0,a?a.x:void 0),sR(e.y,t,Tde,s?s.y:void 0,a?a.y:void 0)}function nR(e){return e.translate===0&&e.scale===1}function uz(e){return nR(e.x)&&nR(e.y)}function Ide(e,t){return e.x.min===t.x.min&&e.x.max===t.x.max&&e.y.min===t.y.min&&e.y.max===t.y.max}function hz(e,t){return Math.round(e.x.min)===Math.round(t.x.min)&&Math.round(e.x.max)===Math.round(t.x.max)&&Math.round(e.y.min)===Math.round(t.y.min)&&Math.round(e.y.max)===Math.round(t.y.max)}function iR(e){return co(e.x)/co(e.y)}class Dde{constructor(){this.members=[]}add(t){Z6(this.members,t),t.scheduleRender()}remove(t){if(QN(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const s=this.members[this.members.length-1];s&&this.promote(s)}}relegate(t){const s=this.members.findIndex(n=>t===n);if(s===0)return!1;let a;for(let n=s;n>=0;n--){const i=this.members[n];if(i.isPresent!==!1){a=i;break}}return a?(this.promote(a),!0):!1}promote(t,s){const a=this.lead;if(t!==a&&(this.prevLead=a,this.lead=t,t.show(),a)){a.instance&&a.scheduleRender(),t.scheduleRender(),t.resumeFrom=a,s&&(t.resumeFrom.preserveOpacity=!0),a.snapshot&&(t.snapshot=a.snapshot,t.snapshot.latestValues=a.animationValues||a.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:n}=t.options;n===!1&&a.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:s,resumingFrom:a}=t;s.onExitComplete&&s.onExitComplete(),a&&a.options.onExitComplete&&a.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function oR(e,t,s){let a="";const n=e.x.translate/t.x,i=e.y.translate/t.y;if((n||i)&&(a=`translate3d(${n}px, ${i}px, 0) `),(t.x!==1||t.y!==1)&&(a+=`scale(${1/t.x}, ${1/t.y}) `),s){const{rotate:c,rotateX:d,rotateY:h}=s;c&&(a+=`rotate(${c}deg) `),d&&(a+=`rotateX(${d}deg) `),h&&(a+=`rotateY(${h}deg) `)}const o=e.x.scale*t.x,l=e.y.scale*t.y;return(o!==1||l!==1)&&(a+=`scale(${o}, ${l})`),a||"none"}const Ode=(e,t)=>e.depth-t.depth;class Rde{constructor(){this.children=[],this.isDirty=!1}add(t){Z6(this.children,t),this.isDirty=!0}remove(t){QN(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(Ode),this.isDirty=!1,this.children.forEach(t)}}function Mde(e,t){const s=performance.now(),a=({timestamp:n})=>{const i=n-s;i>=t&&(Ko(a),e(i-t))};return Mr.read(a,!0),()=>Ko(a)}function Lde(e){window.MotionDebug&&window.MotionDebug.record(e)}function mz(e){return e instanceof SVGElement&&e.tagName!=="svg"}function tA(e,t,s){const a=Kn(e)?e:kl(e);return a.start(Q6("",a,t,s)),a.animation}const lR=["","X","Y","Z"],Fde={visibility:"hidden"},cR=1e3;let Bde=0;const g0={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0};function fz({attachResizeListener:e,defaultParent:t,measureScroll:s,checkIsScrollRoot:a,resetTransform:n}){return class{constructor(o={},l=t==null?void 0:t()){this.id=Bde++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,g0.totalNodes=g0.resolvedTargetDeltas=g0.recalculatedProjection=0,this.nodes.forEach(Vde),this.nodes.forEach(Kde),this.nodes.forEach(Gde),this.nodes.forEach(Wde),Lde(g0)},this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=l?l.root||l:this,this.path=l?[...l.path,l]:[],this.parent=l,this.depth=l?l.depth+1:0;for(let c=0;c<this.path.length;c++)this.path[c].shouldResetTransform=!0;this.root===this&&(this.nodes=new Rde)}addEventListener(o,l){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new J6),this.eventHandlers.get(o).add(l)}notifyListeners(o,...l){const c=this.eventHandlers.get(o);c&&c.notify(...l)}hasListeners(o){return this.eventHandlers.has(o)}mount(o,l=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=mz(o),this.instance=o;const{layoutId:c,layout:d,visualElement:h}=this.options;if(h&&!h.current&&h.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),l&&(d||c)&&(this.isLayoutDirty=!0),e){let f;const x=()=>this.root.updateBlockedByResize=!1;e(o,()=>{this.root.updateBlockedByResize=!0,f&&f(),f=Mde(x,250),M1.hasAnimatedSinceResize&&(M1.hasAnimatedSinceResize=!1,this.nodes.forEach(uR))})}c&&this.root.registerSharedNode(c,this),this.options.animate!==!1&&h&&(c||d)&&this.addEventListener("didUpdate",({delta:f,hasLayoutChanged:x,hasRelativeTargetChanged:y,layout:v})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const w=this.options.transition||h.getDefaultTransition()||Jde,{onLayoutAnimationStart:N,onLayoutAnimationComplete:k}=h.getProps(),C=!this.targetLayout||!hz(this.targetLayout,v)||y,E=!x&&y;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||E||x&&(C||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(f,E);const _={...X6(w,"layout"),onPlay:N,onComplete:k};(h.shouldReduceMotion||this.options.layoutRoot)&&(_.delay=0,_.type=!1),this.startAnimation(_)}else x||uR(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=v})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,Ko(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(Yde),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let h=0;h<this.path.length;h++){const f=this.path[h];f.shouldResetTransform=!0,f.updateScroll("snapshot"),f.options.layoutRoot&&f.willUpdate(!1)}const{layoutId:l,layout:c}=this.options;if(l===void 0&&!c)return;const d=this.getTransformTemplate();this.prevTransformTemplateValue=d?d(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(dR);return}this.isUpdating||this.nodes.forEach(qde),this.isUpdating=!1,this.nodes.forEach(Hde),this.nodes.forEach($de),this.nodes.forEach(Ude),this.clearAllSnapshots();const l=performance.now();kn.delta=Iu(0,1e3/60,l-kn.timestamp),kn.timestamp=l,kn.isProcessing=!0,Q4.update.process(kn),Q4.preRender.process(kn),Q4.render.process(kn),kn.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,queueMicrotask(()=>this.update()))}clearAllSnapshots(){this.nodes.forEach(zde),this.sharedNodes.forEach(Xde)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Mr.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Mr.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let c=0;c<this.path.length;c++)this.path[c].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Na(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:l}=this.options;l&&l.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let l=!!(this.options.layoutScroll&&this.instance);this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(l=!1),l&&(this.scroll={animationId:this.root.animationId,phase:o,isRoot:a(this.instance),offset:s(this.instance)})}resetTransform(){if(!n)return;const o=this.isLayoutDirty||this.shouldResetTransform,l=this.projectionDelta&&!uz(this.projectionDelta),c=this.getTransformTemplate(),d=c?c(this.latestValues,""):void 0,h=d!==this.prevTransformTemplateValue;o&&(l||x0(this.latestValues)||h)&&(n(this.instance,d),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const l=this.measurePageBox();let c=this.removeElementScroll(l);return o&&(c=this.removeTransform(c)),eue(c),{animationId:this.root.animationId,measuredBox:l,layoutBox:c,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:o}=this.options;if(!o)return Na();const l=o.measureViewportBox(),{scroll:c}=this.root;return c&&(qd(l.x,c.offset.x),qd(l.y,c.offset.y)),l}removeElementScroll(o){const l=Na();No(l,o);for(let c=0;c<this.path.length;c++){const d=this.path[c],{scroll:h,options:f}=d;if(d!==this.root&&h&&f.layoutScroll){if(h.isRoot){No(l,o);const{scroll:x}=this.root;x&&(qd(l.x,-x.offset.x),qd(l.y,-x.offset.y))}qd(l.x,h.offset.x),qd(l.y,h.offset.y)}}return l}applyTransform(o,l=!1){const c=Na();No(c,o);for(let d=0;d<this.path.length;d++){const h=this.path[d];!l&&h.options.layoutScroll&&h.scroll&&h!==h.root&&Um(c,{x:-h.scroll.offset.x,y:-h.scroll.offset.y}),x0(h.latestValues)&&Um(c,h.latestValues)}return x0(this.latestValues)&&Um(c,this.latestValues),c}removeTransform(o){const l=Na();No(l,o);for(let c=0;c<this.path.length;c++){const d=this.path[c];if(!d.instance||!x0(d.latestValues))continue;a3(d.latestValues)&&d.updateSnapshot();const h=Na(),f=d.measurePageBox();No(h,f),aR(l,d.latestValues,d.snapshot?d.snapshot.layoutBox:void 0,h)}return x0(this.latestValues)&&aR(l,this.latestValues),l}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==kn.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var l;const c=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=c.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=c.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=c.isSharedProjectionDirty);const d=!!this.resumingFrom||this!==c;if(!(o||d&&this.isSharedProjectionDirty||this.isProjectionDirty||!((l=this.parent)===null||l===void 0)&&l.isProjectionDirty||this.attemptToResolveRelativeTarget))return;const{layout:f,layoutId:x}=this.options;if(!(!this.layout||!(f||x))){if(this.resolvedRelativeTargetAt=kn.timestamp,!this.targetDelta&&!this.relativeTarget){const y=this.getClosestProjectingParent();y&&y.layout&&this.animationProgress!==1?(this.relativeParent=y,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Na(),this.relativeTargetOrigin=Na(),op(this.relativeTargetOrigin,this.layout.layoutBox,y.layout.layoutBox),No(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=Na(),this.targetWithTransforms=Na()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),sde(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):No(this.target,this.layout.layoutBox),nz(this.target,this.targetDelta)):No(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const y=this.getClosestProjectingParent();y&&!!y.resumingFrom==!!this.resumingFrom&&!y.options.layoutScroll&&y.target&&this.animationProgress!==1?(this.relativeParent=y,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Na(),this.relativeTargetOrigin=Na(),op(this.relativeTargetOrigin,this.target,y.target),No(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}g0.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||a3(this.parent.latestValues)||az(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var o;const l=this.getLead(),c=!!this.resumingFrom||this!==l;let d=!0;if((this.isProjectionDirty||!((o=this.parent)===null||o===void 0)&&o.isProjectionDirty)&&(d=!1),c&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(d=!1),this.resolvedRelativeTargetAt===kn.timestamp&&(d=!1),d)return;const{layout:h,layoutId:f}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(h||f))return;No(this.layoutCorrected,this.layout.layoutBox);const x=this.treeScale.x,y=this.treeScale.y;hde(this.layoutCorrected,this.treeScale,this.path,c),l.layout&&!l.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(l.target=l.layout.layoutBox);const{target:v}=l;if(!v){this.projectionTransform&&(this.projectionDelta=$m(),this.projectionTransform="none",this.scheduleRender());return}this.projectionDelta||(this.projectionDelta=$m(),this.projectionDeltaWithTransform=$m());const w=this.projectionTransform;ip(this.projectionDelta,this.layoutCorrected,v,this.latestValues),this.projectionTransform=oR(this.projectionDelta,this.treeScale),(this.projectionTransform!==w||this.treeScale.x!==x||this.treeScale.y!==y)&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",v)),g0.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){if(this.options.scheduleRender&&this.options.scheduleRender(),o){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}setAnimationOrigin(o,l=!1){const c=this.snapshot,d=c?c.latestValues:{},h={...this.latestValues},f=$m();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!l;const x=Na(),y=c?c.source:void 0,v=this.layout?this.layout.source:void 0,w=y!==v,N=this.getStack(),k=!N||N.members.length<=1,C=!!(w&&!k&&this.options.crossfade===!0&&!this.path.some(Zde));this.animationProgress=0;let E;this.mixTargetDelta=_=>{const T=_/1e3;hR(f.x,o.x,T),hR(f.y,o.y,T),this.setTargetDelta(f),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(op(x,this.layout.layoutBox,this.relativeParent.layout.layoutBox),Qde(this.relativeTarget,this.relativeTargetOrigin,x,T),E&&Ide(this.relativeTarget,E)&&(this.isProjectionDirty=!1),E||(E=Na()),No(E,this.relativeTarget)),w&&(this.animationValues=h,Cde(h,d,this.latestValues,T,C,k)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=T},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(Ko(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Mr.update(()=>{M1.hasAnimatedSinceResize=!0,this.currentAnimation=tA(0,cR,{...o,onUpdate:l=>{this.mixTargetDelta(l),o.onUpdate&&o.onUpdate(l)},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(cR),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:l,target:c,layout:d,latestValues:h}=o;if(!(!l||!c||!d)){if(this!==o&&this.layout&&d&&xz(this.options.animationType,this.layout.layoutBox,d.layoutBox)){c=this.target||Na();const f=co(this.layout.layoutBox.x);c.x.min=o.target.x.min,c.x.max=c.x.min+f;const x=co(this.layout.layoutBox.y);c.y.min=o.target.y.min,c.y.max=c.y.min+x}No(l,c),Um(l,h),ip(this.projectionDeltaWithTransform,this.layoutCorrected,l,h)}}registerSharedNode(o,l){this.sharedNodes.has(o)||this.sharedNodes.set(o,new Dde),this.sharedNodes.get(o).add(l);const d=l.options.initialPromotionConfig;l.promote({transition:d?d.transition:void 0,preserveFollowOpacity:d&&d.shouldPreserveFollowOpacity?d.shouldPreserveFollowOpacity(l):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var o;const{layoutId:l}=this.options;return l?((o=this.getStack())===null||o===void 0?void 0:o.lead)||this:this}getPrevLead(){var o;const{layoutId:l}=this.options;return l?(o=this.getStack())===null||o===void 0?void 0:o.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:l,preserveFollowOpacity:c}={}){const d=this.getStack();d&&d.promote(this,c),o&&(this.projectionDelta=void 0,this.needsReset=!0),l&&this.setOptions({transition:l})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetRotation(){const{visualElement:o}=this.options;if(!o)return;let l=!1;const{latestValues:c}=o;if((c.rotate||c.rotateX||c.rotateY||c.rotateZ)&&(l=!0),!l)return;const d={};for(let h=0;h<lR.length;h++){const f="rotate"+lR[h];c[f]&&(d[f]=c[f],o.setStaticValue(f,0))}o.render();for(const h in d)o.setStaticValue(h,d[h]);o.scheduleRender()}getProjectionStyles(o){var l,c;if(!this.instance||this.isSVG)return;if(!this.isVisible)return Fde;const d={visibility:""},h=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,d.opacity="",d.pointerEvents=R1(o==null?void 0:o.pointerEvents)||"",d.transform=h?h(this.latestValues,""):"none",d;const f=this.getLead();if(!this.projectionDelta||!this.layout||!f.target){const w={};return this.options.layoutId&&(w.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,w.pointerEvents=R1(o==null?void 0:o.pointerEvents)||""),this.hasProjected&&!x0(this.latestValues)&&(w.transform=h?h({},""):"none",this.hasProjected=!1),w}const x=f.animationValues||f.latestValues;this.applyTransformsToTarget(),d.transform=oR(this.projectionDeltaWithTransform,this.treeScale,x),h&&(d.transform=h(x,d.transform));const{x:y,y:v}=this.projectionDelta;d.transformOrigin=`${y.origin*100}% ${v.origin*100}% 0`,f.animationValues?d.opacity=f===this?(c=(l=x.opacity)!==null&&l!==void 0?l:this.latestValues.opacity)!==null&&c!==void 0?c:1:this.preserveOpacity?this.latestValues.opacity:x.opacityExit:d.opacity=f===this?x.opacity!==void 0?x.opacity:"":x.opacityExit!==void 0?x.opacityExit:0;for(const w in Lw){if(x[w]===void 0)continue;const{correct:N,applyTo:k}=Lw[w],C=d.transform==="none"?x[w]:N(x[w],f);if(k){const E=k.length;for(let _=0;_<E;_++)d[k[_]]=C}else d[w]=C}return this.options.layoutId&&(d.pointerEvents=f===this?R1(o==null?void 0:o.pointerEvents)||"":"none"),d}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var l;return(l=o.currentAnimation)===null||l===void 0?void 0:l.stop()}),this.root.nodes.forEach(dR),this.root.sharedNodes.clear()}}}function $de(e){e.updateLayout()}function Ude(e){var t;const s=((t=e.resumeFrom)===null||t===void 0?void 0:t.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&s&&e.hasListeners("didUpdate")){const{layoutBox:a,measuredBox:n}=e.layout,{animationType:i}=e.options,o=s.source!==e.layout.source;i==="size"?Po(f=>{const x=o?s.measuredBox[f]:s.layoutBox[f],y=co(x);x.min=a[f].min,x.max=x.min+y}):xz(i,s.layoutBox,a)&&Po(f=>{const x=o?s.measuredBox[f]:s.layoutBox[f],y=co(a[f]);x.max=x.min+y,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[f].max=e.relativeTarget[f].min+y)});const l=$m();ip(l,a,s.layoutBox);const c=$m();o?ip(c,e.applyTransform(n,!0),s.measuredBox):ip(c,a,s.layoutBox);const d=!uz(l);let h=!1;if(!e.resumeFrom){const f=e.getClosestProjectingParent();if(f&&!f.resumeFrom){const{snapshot:x,layout:y}=f;if(x&&y){const v=Na();op(v,s.layoutBox,x.layoutBox);const w=Na();op(w,a,y.layoutBox),hz(v,w)||(h=!0),f.options.layoutRoot&&(e.relativeTarget=w,e.relativeTargetOrigin=v,e.relativeParent=f)}}}e.notifyListeners("didUpdate",{layout:a,snapshot:s,delta:c,layoutDelta:l,hasLayoutChanged:d,hasRelativeTargetChanged:h})}else if(e.isLead()){const{onExitComplete:a}=e.options;a&&a()}e.options.transition=void 0}function Vde(e){g0.totalNodes++,e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function Wde(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function zde(e){e.clearSnapshot()}function dR(e){e.clearMeasurements()}function qde(e){e.isLayoutDirty=!1}function Hde(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function uR(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function Kde(e){e.resolveTargetDelta()}function Gde(e){e.calcProjection()}function Yde(e){e.resetRotation()}function Xde(e){e.removeLeadSnapshot()}function hR(e,t,s){e.translate=$s(t.translate,0,s),e.scale=$s(t.scale,1,s),e.origin=t.origin,e.originPoint=t.originPoint}function mR(e,t,s,a){e.min=$s(t.min,s.min,a),e.max=$s(t.max,s.max,a)}function Qde(e,t,s,a){mR(e.x,t.x,s.x,a),mR(e.y,t.y,s.y,a)}function Zde(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}const Jde={duration:.45,ease:[.4,0,.1,1]},fR=e=>typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes(e),xR=fR("applewebkit/")&&!fR("chrome/")?Math.round:la;function gR(e){e.min=xR(e.min),e.max=xR(e.max)}function eue(e){gR(e.x),gR(e.y)}function xz(e,t,s){return e==="position"||e==="preserve-aspect"&&!r3(iR(t),iR(s),.2)}const tue=fz({attachResizeListener:(e,t)=>Wc(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),lS={current:void 0},gz=fz({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!lS.current){const e=new tue({});e.mount(window),e.setOptions({layoutScroll:!0}),lS.current=e}return lS.current},resetTransform:(e,t)=>{e.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:e=>window.getComputedStyle(e).position==="fixed"}),rue={pan:{Feature:vde},drag:{Feature:bde,ProjectionNode:gz,MeasureLayout:lz}},sue=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/;function aue(e){const t=sue.exec(e);if(!t)return[,];const[,s,a]=t;return[s,a]}function i3(e,t,s=1){const[a,n]=aue(e);if(!a)return;const i=window.getComputedStyle(t).getPropertyValue(a);if(i){const o=i.trim();return ZW(o)?parseFloat(o):o}else return K5(n)?i3(n,t,s+1):n}function nue(e,{...t},s){const a=e.current;if(!(a instanceof Element))return{target:t,transitionEnd:s};s&&(s={...s}),e.values.forEach(n=>{const i=n.get();if(!K5(i))return;const o=i3(i,a);o&&n.set(o)});for(const n in t){const i=t[n];if(!K5(i))continue;const o=i3(i,a);o&&(t[n]=o,s||(s={}),s[n]===void 0&&(s[n]=i))}return{target:t,transitionEnd:s}}const iue=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),pz=e=>iue.has(e),oue=e=>Object.keys(e).some(pz),pR=e=>e===Oh||e===Gt,yR=(e,t)=>parseFloat(e.split(", ")[t]),bR=(e,t)=>(s,{transform:a})=>{if(a==="none"||!a)return 0;const n=a.match(/^matrix3d\((.+)\)$/);if(n)return yR(n[1],t);{const i=a.match(/^matrix\((.+)\)$/);return i?yR(i[1],e):0}},lue=new Set(["x","y","z"]),cue=Qy.filter(e=>!lue.has(e));function due(e){const t=[];return cue.forEach(s=>{const a=e.getValue(s);a!==void 0&&(t.push([s,a.get()]),a.set(s.startsWith("scale")?1:0))}),t.length&&e.render(),t}const Rf={width:({x:e},{paddingLeft:t="0",paddingRight:s="0"})=>e.max-e.min-parseFloat(t)-parseFloat(s),height:({y:e},{paddingTop:t="0",paddingBottom:s="0"})=>e.max-e.min-parseFloat(t)-parseFloat(s),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:bR(4,13),y:bR(5,14)};Rf.translateX=Rf.x;Rf.translateY=Rf.y;const uue=(e,t,s)=>{const a=t.measureViewportBox(),n=t.current,i=getComputedStyle(n),{display:o}=i,l={};o==="none"&&t.setStaticValue("display",e.display||"block"),s.forEach(d=>{l[d]=Rf[d](a,i)}),t.render();const c=t.measureViewportBox();return s.forEach(d=>{const h=t.getValue(d);h&&h.jump(l[d]),e[d]=Rf[d](c,i)}),e},hue=(e,t,s={},a={})=>{t={...t},a={...a};const n=Object.keys(t).filter(pz);let i=[],o=!1;const l=[];if(n.forEach(c=>{const d=e.getValue(c);if(!e.hasValue(c))return;let h=s[c],f=sg(h);const x=t[c];let y;if(Bw(x)){const v=x.length,w=x[0]===null?1:0;h=x[w],f=sg(h);for(let N=w;N<v&&x[N]!==null;N++)y?V6(sg(x[N])===y):y=sg(x[N])}else y=sg(x);if(f!==y)if(pR(f)&&pR(y)){const v=d.get();typeof v=="string"&&d.set(parseFloat(v)),typeof x=="string"?t[c]=parseFloat(x):Array.isArray(x)&&y===Gt&&(t[c]=x.map(parseFloat))}else f!=null&&f.transform&&(y!=null&&y.transform)&&(h===0||x===0)?h===0?d.set(y.transform(h)):t[c]=f.transform(x):(o||(i=due(e),o=!0),l.push(c),a[c]=a[c]!==void 0?a[c]:t[c],d.jump(x))}),l.length){const c=l.indexOf("height")>=0?window.pageYOffset:null,d=uue(t,e,l);return i.length&&i.forEach(([h,f])=>{e.getValue(h).set(f)}),e.render(),zN&&c!==null&&window.scrollTo({top:c}),{target:d,transitionEnd:a}}else return{target:t,transitionEnd:a}};function mue(e,t,s,a){return oue(t)?hue(e,t,s,a):{target:t,transitionEnd:a}}const fue=(e,t,s,a)=>{const n=nue(e,t,a);return t=n.target,a=n.transitionEnd,mue(e,t,s,a)},o3={current:null},yz={current:!1};function xue(){if(yz.current=!0,!!zN)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>o3.current=e.matches;e.addListener(t),t()}else o3.current=!1}function gue(e,t,s){const{willChange:a}=t;for(const n in t){const i=t[n],o=s[n];if(Kn(i))e.addValue(n,i),Ww(a)&&a.add(n);else if(Kn(o))e.addValue(n,kl(i,{owner:e})),Ww(a)&&a.remove(n);else if(o!==i)if(e.hasValue(n)){const l=e.getValue(n);!l.hasAnimated&&l.set(i)}else{const l=e.getStaticValue(n);e.addValue(n,kl(l!==void 0?l:i,{owner:e}))}}for(const n in s)t[n]===void 0&&e.removeValue(n);return t}const Qp=new WeakMap,bz=Object.keys(Xp),pue=bz.length,vR=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"],yue=D6.length;class bue{constructor({parent:t,props:s,presenceContext:a,reducedMotionConfig:n,visualState:i},o={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.scheduleRender=()=>Mr.render(this.render,!1,!0);const{latestValues:l,renderState:c}=i;this.latestValues=l,this.baseTarget={...l},this.initialValues=s.initial?{...l}:{},this.renderState=c,this.parent=t,this.props=s,this.presenceContext=a,this.depth=t?t.depth+1:0,this.reducedMotionConfig=n,this.options=o,this.isControllingVariants=HN(s),this.isVariantNode=aW(s),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:d,...h}=this.scrapeMotionValuesFromProps(s,{});for(const f in h){const x=h[f];l[f]!==void 0&&Kn(x)&&(x.set(l[f],!1),Ww(d)&&d.add(f))}}scrapeMotionValuesFromProps(t,s){return{}}mount(t){this.current=t,Qp.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((s,a)=>this.bindToMotionValue(a,s)),yz.current||xue(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:o3.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){Qp.delete(this.current),this.projection&&this.projection.unmount(),Ko(this.notifyUpdate),Ko(this.render),this.valueSubscriptions.forEach(t=>t()),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const t in this.events)this.events[t].clear();for(const t in this.features)this.features[t].unmount();this.current=null}bindToMotionValue(t,s){const a=Dh.has(t),n=s.on("change",o=>{this.latestValues[t]=o,this.props.onUpdate&&Mr.update(this.notifyUpdate,!1,!0),a&&this.projection&&(this.projection.isTransformDirty=!0)}),i=s.on("renderRequest",this.scheduleRender);this.valueSubscriptions.set(t,()=>{n(),i()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}loadFeatures({children:t,...s},a,n,i){let o,l;for(let c=0;c<pue;c++){const d=bz[c],{isEnabled:h,Feature:f,ProjectionNode:x,MeasureLayout:y}=Xp[d];x&&(o=x),h(s)&&(!this.features[d]&&f&&(this.features[d]=new f(this)),y&&(l=y))}if((this.type==="html"||this.type==="svg")&&!this.projection&&o){this.projection=new o(this.latestValues,this.parent&&this.parent.projection);const{layoutId:c,layout:d,drag:h,dragConstraints:f,layoutScroll:x,layoutRoot:y}=s;this.projection.setOptions({layoutId:c,layout:d,alwaysMeasureLayout:!!h||f&&Fm(f),visualElement:this,scheduleRender:()=>this.scheduleRender(),animationType:typeof d=="string"?d:"both",initialPromotionConfig:i,layoutScroll:x,layoutRoot:y})}return l}updateFeatures(){for(const t in this.features){const s=this.features[t];s.isMounted?s.update():(s.mount(),s.isMounted=!0)}}triggerBuild(){this.build(this.renderState,this.latestValues,this.options,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Na()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,s){this.latestValues[t]=s}makeTargetAnimatable(t,s=!0){return this.makeTargetAnimatableFromInstance(t,this.props,s)}update(t,s){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=s;for(let a=0;a<vR.length;a++){const n=vR[a];this.propEventSubscriptions[n]&&(this.propEventSubscriptions[n](),delete this.propEventSubscriptions[n]);const i=t["on"+n];i&&(this.propEventSubscriptions[n]=this.on(n,i))}this.prevMotionValues=gue(this,this.scrapeMotionValuesFromProps(t,this.prevProps),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}getVariantContext(t=!1){if(t)return this.parent?this.parent.getVariantContext():void 0;if(!this.isControllingVariants){const a=this.parent?this.parent.getVariantContext()||{}:{};return this.props.initial!==void 0&&(a.initial=this.props.initial),a}const s={};for(let a=0;a<yue;a++){const n=D6[a],i=this.props[n];(Yp(i)||i===!1)&&(s[n]=i)}return s}addVariantChild(t){const s=this.getClosestVariantNode();if(s)return s.variantChildren&&s.variantChildren.add(t),()=>s.variantChildren.delete(t)}addValue(t,s){s!==this.values.get(t)&&(this.removeValue(t),this.bindToMotionValue(t,s)),this.values.set(t,s),this.latestValues[t]=s.get()}removeValue(t){this.values.delete(t);const s=this.valueSubscriptions.get(t);s&&(s(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,s){if(this.props.values&&this.props.values[t])return this.props.values[t];let a=this.values.get(t);return a===void 0&&s!==void 0&&(a=kl(s,{owner:this}),this.addValue(t,a)),a}readValue(t){var s;return this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:(s=this.getBaseTargetFromProps(this.props,t))!==null&&s!==void 0?s:this.readValueFromInstance(this.current,t,this.options)}setBaseTarget(t,s){this.baseTarget[t]=s}getBaseTarget(t){var s;const{initial:a}=this.props,n=typeof a=="string"||typeof a=="object"?(s=U6(this.props,a))===null||s===void 0?void 0:s[t]:void 0;if(a&&n!==void 0)return n;const i=this.getBaseTargetFromProps(this.props,t);return i!==void 0&&!Kn(i)?i:this.initialValues[t]!==void 0&&n===void 0?void 0:this.baseTarget[t]}on(t,s){return this.events[t]||(this.events[t]=new J6),this.events[t].add(s)}notify(t,...s){this.events[t]&&this.events[t].notify(...s)}}class vz extends bue{sortInstanceNodePosition(t,s){return t.compareDocumentPosition(s)&2?1:-1}getBaseTargetFromProps(t,s){return t.style?t.style[s]:void 0}removeValueFromRenderState(t,{vars:s,style:a}){delete s[t],delete a[t]}makeTargetAnimatableFromInstance({transition:t,transitionEnd:s,...a},{transformValues:n},i){let o=Fce(a,t||{},this);if(n&&(s&&(s=n(s)),a&&(a=n(a)),o&&(o=n(o))),i){Mce(this,a,o);const l=fue(this,a,o,s);s=l.transitionEnd,a=l.target}return{transition:t,transitionEnd:s,...a}}}function vue(e){return window.getComputedStyle(e)}class wz extends vz{constructor(){super(...arguments),this.type="html"}readValueFromInstance(t,s){if(Dh.has(s)){const a=Y6(s);return a&&a.default||0}else{const a=vue(t),n=(lW(s)?a.getPropertyValue(s):a[s])||0;return typeof n=="string"?n.trim():n}}measureInstanceViewportBox(t,{transformPagePoint:s}){return iz(t,s)}build(t,s,a,n){M6(t,s,a,n.transformTemplate)}scrapeMotionValuesFromProps(t,s){return $6(t,s)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;Kn(t)&&(this.childSubscription=t.on("change",s=>{this.current&&(this.current.textContent=`${s}`)}))}renderInstance(t,s,a,n){fW(t,s,a,n)}}class jz extends vz{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1}getBaseTargetFromProps(t,s){return t[s]}readValueFromInstance(t,s){if(Dh.has(s)){const a=Y6(s);return a&&a.default||0}return s=xW.has(s)?s:T6(s),t.getAttribute(s)}measureInstanceViewportBox(){return Na()}scrapeMotionValuesFromProps(t,s){return pW(t,s)}build(t,s,a,n){F6(t,s,a,this.isSVGTag,n.transformTemplate)}renderInstance(t,s,a,n){gW(t,s,a,n)}mount(t){this.isSVGTag=B6(t.tagName),super.mount(t)}}const wue=(e,t)=>R6(e)?new jz(t,{enableHardwareAcceleration:!1}):new wz(t,{enableHardwareAcceleration:!0}),jue={layout:{ProjectionNode:gz,MeasureLayout:lz}},Nue={...Jce,...jle,...rue,...jue},Pe=Toe((e,t)=>cle(e,t,Nue,wue));function Nz(){const e=p.useRef(!1);return Xy(()=>(e.current=!0,()=>{e.current=!1}),[]),e}function kue(){const e=Nz(),[t,s]=p.useState(0),a=p.useCallback(()=>{e.current&&s(t+1)},[t]);return[p.useCallback(()=>Mr.postRender(a),[a]),t]}class Sue extends p.Component{getSnapshotBeforeUpdate(t){const s=this.props.childRef.current;if(s&&t.isPresent&&!this.props.isPresent){const a=this.props.sizeRef.current;a.height=s.offsetHeight||0,a.width=s.offsetWidth||0,a.top=s.offsetTop,a.left=s.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function Cue({children:e,isPresent:t}){const s=p.useId(),a=p.useRef(null),n=p.useRef({width:0,height:0,top:0,left:0});return p.useInsertionEffect(()=>{const{width:i,height:o,top:l,left:c}=n.current;if(t||!a.current||!i||!o)return;a.current.dataset.motionPopId=s;const d=document.createElement("style");return document.head.appendChild(d),d.sheet&&d.sheet.insertRule(`
          [data-motion-pop-id="${s}"] {
            position: absolute !important;
            width: ${i}px !important;
            height: ${o}px !important;
            top: ${l}px !important;
            left: ${c}px !important;
          }
        `),()=>{document.head.removeChild(d)}},[t]),p.createElement(Sue,{isPresent:t,childRef:a,sizeRef:n},p.cloneElement(e,{ref:a}))}const cS=({children:e,initial:t,isPresent:s,onExitComplete:a,custom:n,presenceAffectsLayout:i,mode:o})=>{const l=eb(_ue),c=p.useId(),d=p.useMemo(()=>({id:c,initial:t,isPresent:s,custom:n,onExitComplete:h=>{l.set(h,!0);for(const f of l.values())if(!f)return;a&&a()},register:h=>(l.set(h,!1),()=>l.delete(h))}),i?void 0:[s]);return p.useMemo(()=>{l.forEach((h,f)=>l.set(f,!1))},[s]),p.useEffect(()=>{!s&&!l.size&&a&&a()},[s]),o==="popLayout"&&(e=p.createElement(Cue,{isPresent:s},e)),p.createElement(WN.Provider,{value:d},e)};function _ue(){return new Map}function Eue(e){return p.useEffect(()=>()=>e(),[])}const p0=e=>e.key||"";function Aue(e,t){e.forEach(s=>{const a=p0(s);t.set(a,s)})}function Pue(e){const t=[];return p.Children.forEach(e,s=>{p.isValidElement(s)&&t.push(s)}),t}const Zp=({children:e,custom:t,initial:s=!0,onExitComplete:a,exitBeforeEnter:n,presenceAffectsLayout:i=!0,mode:o="sync"})=>{const l=p.useContext(O6).forceRender||kue()[0],c=Nz(),d=Pue(e);let h=d;const f=p.useRef(new Map).current,x=p.useRef(h),y=p.useRef(new Map).current,v=p.useRef(!0);if(Xy(()=>{v.current=!1,Aue(d,y),x.current=h}),Eue(()=>{v.current=!0,y.clear(),f.clear()}),v.current)return p.createElement(p.Fragment,null,h.map(C=>p.createElement(cS,{key:p0(C),isPresent:!0,initial:s?void 0:!1,presenceAffectsLayout:i,mode:o},C)));h=[...h];const w=x.current.map(p0),N=d.map(p0),k=w.length;for(let C=0;C<k;C++){const E=w[C];N.indexOf(E)===-1&&!f.has(E)&&f.set(E,void 0)}return o==="wait"&&f.size&&(h=[]),f.forEach((C,E)=>{if(N.indexOf(E)!==-1)return;const _=y.get(E);if(!_)return;const T=w.indexOf(E);let A=C;if(!A){const P=()=>{f.delete(E);const M=Array.from(y.keys()).filter(R=>!N.includes(R));if(M.forEach(R=>y.delete(R)),x.current=d.filter(R=>{const $=p0(R);return $===E||M.includes($)}),!f.size){if(c.current===!1)return;l(),a&&a()}};A=p.createElement(cS,{key:p0(_),isPresent:!1,onExitComplete:P,custom:t,presenceAffectsLayout:i,mode:o},_),f.set(E,A)}h.splice(T,0,A)}),h=h.map(C=>{const E=C.key;return f.has(E)?C:p.createElement(cS,{key:p0(C),isPresent:!0,presenceAffectsLayout:i,mode:o},C)}),p.createElement(p.Fragment,null,f.size?h:h.map(C=>p.cloneElement(C)))};function kz(e){const t=eb(()=>kl(e)),{isStatic:s}=p.useContext(P6);if(s){const[,a]=p.useState(e);p.useEffect(()=>t.on("change",a),[])}return t}const Tue=e=>e&&typeof e=="object"&&e.mix,Iue=e=>Tue(e)?e.mix:void 0;function Due(...e){const t=!Array.isArray(e[0]),s=t?0:-1,a=e[0+s],n=e[1+s],i=e[2+s],o=e[3+s],l=XN(n,i,{mixer:Iue(i[0]),...o});return t?l(a):l}function Sz(e,t){const s=kz(t()),a=()=>s.set(t());return a(),Xy(()=>{const n=()=>Mr.update(a,!1,!0),i=e.map(o=>o.on("change",n));return()=>{i.forEach(o=>o()),Ko(a)}}),s}function Oue(e){np.current=[],e();const t=Sz(np.current,e);return np.current=void 0,t}function lp(e,t,s,a){if(typeof e=="function")return Oue(e);const n=typeof t=="function"?t:Due(t,s,a);return Array.isArray(e)?wR(e,n):wR([e],([i])=>n(i))}function wR(e,t){const s=eb(()=>[]);return Sz(e,()=>{s.length=0;const a=e.length;for(let n=0;n<a;n++)s[n]=e[n].get();return t(s)})}function ZN(e,t,s){var a;if(typeof e=="string"){let n=document;s?((a=s[e])!==null&&a!==void 0||(s[e]=n.querySelectorAll(e)),e=s[e]):e=n.querySelectorAll(e)}else e instanceof Element&&(e=[e]);return Array.from(e||[])}const L1=new WeakMap;let Vd;function Rue(e,t){if(t){const{inlineSize:s,blockSize:a}=t[0];return{width:s,height:a}}else return e instanceof SVGElement&&"getBBox"in e?e.getBBox():{width:e.offsetWidth,height:e.offsetHeight}}function Mue({target:e,contentRect:t,borderBoxSize:s}){var a;(a=L1.get(e))===null||a===void 0||a.forEach(n=>{n({target:e,contentSize:t,get size(){return Rue(e,s)}})})}function Lue(e){e.forEach(Mue)}function Fue(){typeof ResizeObserver>"u"||(Vd=new ResizeObserver(Lue))}function Bue(e,t){Vd||Fue();const s=ZN(e);return s.forEach(a=>{let n=L1.get(a);n||(n=new Set,L1.set(a,n)),n.add(t),Vd==null||Vd.observe(a)}),()=>{s.forEach(a=>{const n=L1.get(a);n==null||n.delete(t),n!=null&&n.size||Vd==null||Vd.unobserve(a)})}}const F1=new Set;let cp;function $ue(){cp=()=>{const e={width:window.innerWidth,height:window.innerHeight},t={target:window,size:e,contentSize:e};F1.forEach(s=>s(t))},window.addEventListener("resize",cp)}function Uue(e){return F1.add(e),cp||$ue(),()=>{F1.delete(e),!F1.size&&cp&&(cp=void 0)}}function Vue(e,t){return typeof e=="function"?Uue(e):Bue(e,t)}const Wue=50,jR=()=>({current:0,offset:[],progress:0,scrollLength:0,targetOffset:0,targetLength:0,containerLength:0,velocity:0}),zue=()=>({time:0,x:jR(),y:jR()}),que={x:{length:"Width",position:"Left"},y:{length:"Height",position:"Top"}};function NR(e,t,s,a){const n=s[t],{length:i,position:o}=que[t],l=n.current,c=s.time;n.current=e["scroll"+o],n.scrollLength=e["scroll"+i]-e["client"+i],n.offset.length=0,n.offset[0]=0,n.offset[1]=n.scrollLength,n.progress=yh(0,n.scrollLength,n.current);const d=a-c;n.velocity=d>Wue?0:K6(n.current-l,d)}function Hue(e,t,s){NR(e,"x",t,s),NR(e,"y",t,s),t.time=s}function Kue(e,t){const s={x:0,y:0};let a=e;for(;a&&a!==t;)if(a instanceof HTMLElement)s.x+=a.offsetLeft,s.y+=a.offsetTop,a=a.offsetParent;else if(a.tagName==="svg"){const n=a.getBoundingClientRect();a=a.parentElement;const i=a.getBoundingClientRect();s.x+=n.left-i.left,s.y+=n.top-i.top}else if(a instanceof SVGGraphicsElement){const{x:n,y:i}=a.getBBox();s.x+=n,s.y+=i;let o=null,l=a.parentNode;for(;!o;)l.tagName==="svg"&&(o=l),l=a.parentNode;a=o}else break;return s}const Gue={All:[[0,0],[1,1]]},l3={start:0,center:.5,end:1};function kR(e,t,s=0){let a=0;if(l3[e]!==void 0&&(e=l3[e]),typeof e=="string"){const n=parseFloat(e);e.endsWith("px")?a=n:e.endsWith("%")?e=n/100:e.endsWith("vw")?a=n/100*document.documentElement.clientWidth:e.endsWith("vh")?a=n/100*document.documentElement.clientHeight:e=n}return typeof e=="number"&&(a=t*e),s+a}const Yue=[0,0];function Xue(e,t,s,a){let n=Array.isArray(e)?e:Yue,i=0,o=0;return typeof e=="number"?n=[e,e]:typeof e=="string"&&(e=e.trim(),e.includes(" ")?n=e.split(" "):n=[e,l3[e]?e:"0"]),i=kR(n[0],s,a),o=kR(n[1],t),i-o}const Que={x:0,y:0};function Zue(e){return"getBBox"in e&&e.tagName!=="svg"?e.getBBox():{width:e.clientWidth,height:e.clientHeight}}function Jue(e,t,s){let{offset:a=Gue.All}=s;const{target:n=e,axis:i="y"}=s,o=i==="y"?"height":"width",l=n!==e?Kue(n,e):Que,c=n===e?{width:e.scrollWidth,height:e.scrollHeight}:Zue(n),d={width:e.clientWidth,height:e.clientHeight};t[i].offset.length=0;let h=!t[i].interpolate;const f=a.length;for(let x=0;x<f;x++){const y=Xue(a[x],d[o],c[o],l[i]);!h&&y!==t[i].interpolatorOffsets[x]&&(h=!0),t[i].offset[x]=y}h&&(t[i].interpolate=XN(t[i].offset,H6(a)),t[i].interpolatorOffsets=[...t[i].offset]),t[i].progress=t[i].interpolate(t[i].current)}function e0e(e,t=e,s){if(s.x.targetOffset=0,s.y.targetOffset=0,t!==e){let a=t;for(;a&&a!==e;)s.x.targetOffset+=a.offsetLeft,s.y.targetOffset+=a.offsetTop,a=a.offsetParent}s.x.targetLength=t===e?t.scrollWidth:t.clientWidth,s.y.targetLength=t===e?t.scrollHeight:t.clientHeight,s.x.containerLength=e.clientWidth,s.y.containerLength=e.clientHeight}function t0e(e,t,s,a={}){return{measure:()=>e0e(e,a.target,s),update:n=>{Hue(e,s,n),(a.offset||a.target)&&Jue(e,s,a)},notify:()=>t(s)}}const ng=new WeakMap,SR=new WeakMap,dS=new WeakMap,CR=e=>e===document.documentElement?window:e;function r0e(e,{container:t=document.documentElement,...s}={}){let a=dS.get(t);a||(a=new Set,dS.set(t,a));const n=zue(),i=t0e(t,e,n,s);if(a.add(i),!ng.has(t)){const l=()=>{for(const x of a)x.measure()},c=()=>{for(const x of a)x.update(kn.timestamp)},d=()=>{for(const x of a)x.notify()},h=()=>{Mr.read(l,!1,!0),Mr.read(c,!1,!0),Mr.update(d,!1,!0)};ng.set(t,h);const f=CR(t);window.addEventListener("resize",h,{passive:!0}),t!==document.documentElement&&SR.set(t,Vue(t,h)),f.addEventListener("scroll",h,{passive:!0})}const o=ng.get(t);return Mr.read(o,!1,!0),()=>{var l;Ko(o);const c=dS.get(t);if(!c||(c.delete(i),c.size))return;const d=ng.get(t);ng.delete(t),d&&(CR(t).removeEventListener("scroll",d),(l=SR.get(t))===null||l===void 0||l(),window.removeEventListener("resize",d))}}function _R(e,t){Sle(!!(!t||t.current))}const s0e=()=>({scrollX:kl(0),scrollY:kl(0),scrollXProgress:kl(0),scrollYProgress:kl(0)});function a0e({container:e,target:t,layoutEffect:s=!0,...a}={}){const n=eb(s0e);return(s?Xy:p.useEffect)(()=>(_R("target",t),_R("container",e),r0e(({x:o,y:l})=>{n.scrollX.set(o.current),n.scrollXProgress.set(o.progress),n.scrollY.set(l.current),n.scrollYProgress.set(l.progress)},{...a,container:(e==null?void 0:e.current)||void 0,target:(t==null?void 0:t.current)||void 0})),[e,t,JSON.stringify(a.offset)]),n}function n0e(e,t){let s;const a=()=>{const{currentTime:n}=t,o=(n===null?0:n.value)/100;s!==o&&e(o),s=o};return Mr.update(a,!0),()=>Ko(a)}const i0e=YW(()=>window.ScrollTimeline!==void 0);class Cz{constructor(t){this.animations=t.filter(Boolean)}then(t,s){return Promise.all(this.animations).then(t).catch(s)}getAll(t){return this.animations[0][t]}setAll(t,s){for(let a=0;a<this.animations.length;a++)this.animations[a][t]=s}attachTimeline(t){const s=this.animations.map(a=>{if(i0e()&&a.attachTimeline)a.attachTimeline(t);else return a.pause(),n0e(n=>{a.time=a.duration*n},t)});return()=>{s.forEach((a,n)=>{a&&a(),this.animations[n].stop()})}}get time(){return this.getAll("time")}set time(t){this.setAll("time",t)}get speed(){return this.getAll("speed")}set speed(t){this.setAll("speed",t)}get duration(){let t=0;for(let s=0;s<this.animations.length;s++)t=Math.max(t,this.animations[s].duration);return t}runAll(t){this.animations.forEach(s=>s[t]())}play(){this.runAll("play")}pause(){this.runAll("pause")}stop(){this.runAll("stop")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}function o0e(e){return typeof e=="object"&&!Array.isArray(e)}function l0e(e){const t={presenceContext:null,props:{},visualState:{renderState:{transform:{},transformOrigin:{},style:{},vars:{},attrs:{}},latestValues:{}}},s=mz(e)?new jz(t,{enableHardwareAcceleration:!1}):new wz(t,{enableHardwareAcceleration:!0});s.mount(e),Qp.set(e,s)}function c0e(e,t=100){const s=G6({keyframes:[0,t],...e}),a=Math.min(Z5(s),Q5);return{type:"keyframes",ease:n=>s.next(a*n).value/t,duration:lc(a)}}function ER(e,t,s,a){var n;return typeof t=="number"?t:t.startsWith("-")||t.startsWith("+")?Math.max(0,e+parseFloat(t)):t==="<"?s:(n=a.get(t))!==null&&n!==void 0?n:e}const d0e=(e,t,s)=>{const a=t-e;return((s-e)%a+a)%a+e};function u0e(e,t){return TW(e)?e[d0e(0,e.length,t)]:e}function h0e(e,t,s){for(let a=0;a<e.length;a++){const n=e[a];n.at>t&&n.at<s&&(QN(e,n),a--)}}function m0e(e,t,s,a,n,i){h0e(e,n,i);for(let o=0;o<t.length;o++)e.push({value:t[o],at:$s(n,i,a[o]),easing:u0e(s,o)})}function f0e(e,t){return e.at===t.at?e.value===null?1:t.value===null?-1:0:e.at-t.at}const x0e="easeInOut";function g0e(e,{defaultTransition:t={},...s}={},a){const n=t.duration||.3,i=new Map,o=new Map,l={},c=new Map;let d=0,h=0,f=0;for(let x=0;x<e.length;x++){const y=e[x];if(typeof y=="string"){c.set(y,h);continue}else if(!Array.isArray(y)){c.set(y.name,ER(h,y.at,d,c));continue}let[v,w,N={}]=y;N.at!==void 0&&(h=ER(h,N.at,d,c));let k=0;const C=(E,_,T,A=0,P=0)=>{const M=p0e(E),{delay:R=0,times:$=H6(M),type:W="keyframes",...I}=_;let{ease:B=t.ease||"easeOut",duration:O}=_;const F=typeof R=="function"?R(A,P):R,q=M.length;if(q<=2&&W==="spring"){let z=100;if(q===2&&v0e(M)){const he=M[1]-M[0];z=Math.abs(he)}const G={...I};O!==void 0&&(G.duration=Su(O));const te=c0e(G,z);B=te.ease,O=te.duration}O??(O=n);const H=h+F,K=H+O;$.length===1&&$[0]===0&&($[1]=1);const V=$.length-M.length;V>0&&KW($,V),M.length===1&&M.unshift(null),m0e(T,M,B,$,H,K),k=Math.max(F+O,k),f=Math.max(K,f)};if(Kn(v)){const E=AR(v,o);C(w,N,PR("default",E))}else{const E=ZN(v,a,l),_=E.length;for(let T=0;T<_;T++){w=w,N=N;const A=E[T],P=AR(A,o);for(const M in w)C(w[M],y0e(N,M),PR(M,P),T,_)}}d=h,h+=k}return o.forEach((x,y)=>{for(const v in x){const w=x[v];w.sort(f0e);const N=[],k=[],C=[];for(let _=0;_<w.length;_++){const{at:T,value:A,easing:P}=w[_];N.push(A),k.push(yh(0,f,T)),C.push(P||"easeOut")}k[0]!==0&&(k.unshift(0),N.unshift(N[0]),C.unshift(x0e)),k[k.length-1]!==1&&(k.push(1),N.push(null)),i.has(y)||i.set(y,{keyframes:{},transition:{}});const E=i.get(y);E.keyframes[v]=N,E.transition[v]={...t,duration:f,ease:C,times:k,...s}}}),i}function AR(e,t){return!t.has(e)&&t.set(e,{}),t.get(e)}function PR(e,t){return t[e]||(t[e]=[]),t[e]}function p0e(e){return Array.isArray(e)?e:[e]}function y0e(e,t){return e[t]?{...e,...e[t]}:{...e}}const b0e=e=>typeof e=="number",v0e=e=>e.every(b0e);function _z(e,t,s,a){const n=ZN(e),i=n.length,o=[];for(let l=0;l<i;l++){const c=n[l];Qp.has(c)||l0e(c);const d=Qp.get(c),h={...s};typeof h.delay=="function"&&(h.delay=h.delay(l,i)),o.push(...eA(d,{...t,transition:h},{}))}return new Cz(o)}const w0e=e=>Array.isArray(e)&&Array.isArray(e[0]);function j0e(e,t,s){const a=[];return g0e(e,t,s).forEach(({keyframes:i,transition:o},l)=>{let c;Kn(l)?c=tA(l,i.default,o.default):c=_z(l,i,o),a.push(c)}),new Cz(a)}const N0e=e=>{function t(s,a,n){let i;return w0e(s)?i=j0e(s,a,e):o0e(a)?i=_z(s,a,n):i=tA(s,a,n),i}return t},TR=N0e(),k0e={some:0,all:1};function S0e(e,t,{root:s,margin:a,amount:n="some"}={}){const i=ZN(e),o=new WeakMap,l=d=>{d.forEach(h=>{const f=o.get(h.target);if(h.isIntersecting!==!!f)if(h.isIntersecting){const x=t(h);typeof x=="function"?o.set(h.target,x):c.unobserve(h.target)}else f&&(f(h),o.delete(h.target))})},c=new IntersectionObserver(l,{root:s,rootMargin:a,threshold:typeof n=="number"?n:k0e[n]});return i.forEach(d=>c.observe(d)),()=>c.disconnect()}function C0e(e,{root:t,margin:s,amount:a,once:n=!1}={}){const[i,o]=p.useState(!1);return p.useEffect(()=>{if(!e.current||n&&i)return;const l=()=>(o(!0),n?void 0:()=>o(!1)),c={root:t&&t.current||void 0,margin:s,amount:a};return S0e(e.current,l,c)},[t,e,s,n,a]),i}const Oe=p.forwardRef(({className:e,variant:t="primary",size:s="md",isLoading:a,disabled:n,children:i,...o},l)=>{const c="inline-flex items-center justify-center font-medium rounded-lg transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed",d={primary:"bg-primary-600 text-white hover:bg-primary-700 focus:ring-primary-500",secondary:"bg-gray-200 text-gray-900 hover:bg-gray-300 focus:ring-gray-500",outline:"border border-gray-300 bg-white text-gray-700 hover:bg-gray-50 focus:ring-primary-500",ghost:"text-gray-700 hover:bg-gray-100 focus:ring-gray-500",danger:"bg-red-600 text-white hover:bg-red-700 focus:ring-red-500"},h={sm:"px-3 py-1.5 text-sm",md:"px-4 py-2 text-sm",lg:"px-6 py-3 text-base"};return r.jsxs("button",{ref:l,className:fe(c,d[t],h[s],e),disabled:n||a,...o,children:[a&&r.jsx(Ke,{className:"mr-2 h-4 w-4 animate-spin"}),i]})});Oe.displayName="Button";const Rh=p.forwardRef(({className:e,label:t,error:s,helperText:a,id:n,...i},o)=>{const l=n||i.name;return r.jsxs("div",{className:"w-full",children:[t&&r.jsx("label",{htmlFor:l,className:"block text-sm font-medium text-gray-700 mb-1",children:t}),r.jsx("input",{ref:o,id:l,className:fe("w-full px-3 py-2 border rounded-lg shadow-sm transition-colors","focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500",s?"border-red-500 focus:ring-red-500 focus:border-red-500":"border-gray-300",e),...i}),s&&r.jsx("p",{className:"mt-1 text-sm text-red-600",children:s}),a&&!s&&r.jsx("p",{className:"mt-1 text-sm text-gray-500",children:a})]})});Rh.displayName="Input";const Ez=e=>({none:"",sm:"p-4",md:"p-6",lg:"p-8"})[e],se=p.forwardRef(({className:e,padding:t="md",children:s,...a},n)=>r.jsx("div",{ref:n,className:fe("bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700","dark:shadow-gray-900/20",Ez(t),e),...a,children:s}));se.displayName="Card";const Be=p.forwardRef(({className:e,padding:t="md",children:s,hoverEffect:a=!0,glowEffect:n=!1,delay:i=0},o)=>r.jsx(Pe.div,{ref:o,initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4,delay:i,ease:"easeOut"},whileHover:a?{scale:1.02,transition:{duration:.2}}:void 0,className:fe("bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700","dark:shadow-gray-900/20 transition-colors duration-300",n&&"dark:shadow-lg dark:shadow-primary-500/10 dark:hover:shadow-primary-500/20",Ez(t),e),children:s}));Be.displayName="MotionCard";const _0e=e=>({green:"bg-gradient-to-br from-green-500 to-green-600 dark:from-green-600 dark:to-green-700",blue:"bg-gradient-to-br from-blue-500 to-blue-600 dark:from-blue-600 dark:to-blue-700",purple:"bg-gradient-to-br from-purple-500 to-purple-600 dark:from-purple-600 dark:to-purple-700",orange:"bg-gradient-to-br from-orange-500 to-orange-600 dark:from-orange-600 dark:to-orange-700",cyan:"bg-gradient-to-br from-cyan-500 to-cyan-600 dark:from-cyan-600 dark:to-cyan-700",pink:"bg-gradient-to-br from-pink-500 to-pink-600 dark:from-pink-600 dark:to-pink-700"})[e],B1=p.forwardRef(({className:e,gradient:t,children:s,delay:a=0},n)=>r.jsx(Pe.div,{ref:n,initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4,delay:a,ease:"easeOut"},whileHover:{scale:1.02,boxShadow:"0 20px 40px rgba(0,0,0,0.2)",transition:{duration:.2}},className:fe("p-6 rounded-xl text-white shadow-lg transition-all duration-300",_0e(t),e),children:s}));B1.displayName="GradientCard";const pa=p.forwardRef(({className:e,children:t,...s},a)=>r.jsx("div",{ref:a,className:fe("mb-4",e),...s,children:t}));pa.displayName="CardHeader";const ya=p.forwardRef(({className:e,children:t,...s},a)=>r.jsx("h3",{ref:a,className:fe("text-lg font-semibold text-gray-900 dark:text-white",e),...s,children:t}));ya.displayName="CardTitle";const M0=p.forwardRef(({className:e,children:t,...s},a)=>r.jsx("p",{ref:a,className:fe("text-sm text-gray-500 dark:text-gray-400 mt-1",e),...s,children:t}));M0.displayName="CardDescription";function JN({variant:e="icon",className:t}){const{theme:s,setTheme:a,isDark:n,toggleTheme:i}=Mie();return e==="icon"?r.jsx("button",{onClick:i,className:fe("p-2 rounded-lg transition-colors","hover:bg-gray-100 dark:hover:bg-gray-800","text-gray-600 dark:text-gray-400",t),"aria-label":n?"Switch to light mode":"Switch to dark mode",children:n?r.jsx(bO,{className:"w-5 h-5"}):r.jsx(pO,{className:"w-5 h-5"})}):r.jsxs("div",{className:fe("flex items-center gap-1 p-1 bg-gray-100 dark:bg-gray-800 rounded-lg",t),children:[r.jsx("button",{onClick:()=>a("light"),className:fe("p-2 rounded-md transition-colors",s==="light"?"bg-white dark:bg-gray-700 shadow-sm text-primary-600":"text-gray-500 hover:text-gray-700 dark:hover:text-gray-300"),"aria-label":"Light mode",children:r.jsx(bO,{className:"w-4 h-4"})}),r.jsx("button",{onClick:()=>a("dark"),className:fe("p-2 rounded-md transition-colors",s==="dark"?"bg-white dark:bg-gray-700 shadow-sm text-primary-600":"text-gray-500 hover:text-gray-700 dark:hover:text-gray-300"),"aria-label":"Dark mode",children:r.jsx(pO,{className:"w-4 h-4"})}),r.jsx("button",{onClick:()=>a("system"),className:fe("p-2 rounded-md transition-colors",s==="system"?"bg-white dark:bg-gray-700 shadow-sm text-primary-600":"text-gray-500 hover:text-gray-700 dark:hover:text-gray-300"),"aria-label":"System theme",children:r.jsx(qV,{className:"w-4 h-4"})})]})}const Az=6048e5,E0e=864e5,Nv=43200,IR=1440,DR=Symbol.for("constructDateFrom");function sd(e,t){return typeof e=="function"?e(t):e&&typeof e=="object"&&DR in e?e[DR](t):e instanceof Date?new e.constructor(t):new Date(t)}function cn(e,t){return sd(t||e,e)}let A0e={};function rb(){return A0e}function Jp(e,t){var l,c,d,h;const s=rb(),a=(t==null?void 0:t.weekStartsOn)??((c=(l=t==null?void 0:t.locale)==null?void 0:l.options)==null?void 0:c.weekStartsOn)??s.weekStartsOn??((h=(d=s.locale)==null?void 0:d.options)==null?void 0:h.weekStartsOn)??0,n=cn(e,t==null?void 0:t.in),i=n.getDay(),o=(i<a?7:0)+i-a;return n.setDate(n.getDate()-o),n.setHours(0,0,0,0),n}function qw(e,t){return Jp(e,{...t,weekStartsOn:1})}function Pz(e,t){const s=cn(e,t==null?void 0:t.in),a=s.getFullYear(),n=sd(s,0);n.setFullYear(a+1,0,4),n.setHours(0,0,0,0);const i=qw(n),o=sd(s,0);o.setFullYear(a,0,4),o.setHours(0,0,0,0);const l=qw(o);return s.getTime()>=i.getTime()?a+1:s.getTime()>=l.getTime()?a:a-1}function Hw(e){const t=cn(e),s=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return s.setUTCFullYear(t.getFullYear()),+e-+s}function e2(e,...t){const s=sd.bind(null,e||t.find(a=>typeof a=="object"));return t.map(s)}function OR(e,t){const s=cn(e,t==null?void 0:t.in);return s.setHours(0,0,0,0),s}function P0e(e,t,s){const[a,n]=e2(s==null?void 0:s.in,e,t),i=OR(a),o=OR(n),l=+i-Hw(i),c=+o-Hw(o);return Math.round((l-c)/E0e)}function T0e(e,t){const s=Pz(e,t),a=sd(e,0);return a.setFullYear(s,0,4),a.setHours(0,0,0,0),qw(a)}function $1(e,t){const s=+cn(e)-+cn(t);return s<0?-1:s>0?1:s}function I0e(e){return sd(e,Date.now())}function D0e(e){return e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]"}function O0e(e){return!(!D0e(e)&&typeof e!="number"||isNaN(+cn(e)))}function R0e(e,t,s){const[a,n]=e2(s==null?void 0:s.in,e,t),i=a.getFullYear()-n.getFullYear(),o=a.getMonth()-n.getMonth();return i*12+o}function M0e(e){return t=>{const a=(e?Math[e]:Math.trunc)(t);return a===0?0:a}}function L0e(e,t){return+cn(e)-+cn(t)}function F0e(e,t){const s=cn(e,t==null?void 0:t.in);return s.setHours(23,59,59,999),s}function B0e(e,t){const s=cn(e,t==null?void 0:t.in),a=s.getMonth();return s.setFullYear(s.getFullYear(),a+1,0),s.setHours(23,59,59,999),s}function $0e(e,t){const s=cn(e,t==null?void 0:t.in);return+F0e(s,t)==+B0e(s,t)}function U0e(e,t,s){const[a,n,i]=e2(s==null?void 0:s.in,e,e,t),o=$1(n,i),l=Math.abs(R0e(n,i));if(l<1)return 0;n.getMonth()===1&&n.getDate()>27&&n.setDate(30),n.setMonth(n.getMonth()-o*l);let c=$1(n,i)===-o;$0e(a)&&l===1&&$1(a,i)===1&&(c=!1);const d=o*(l-+c);return d===0?0:d}function V0e(e,t,s){const a=L0e(e,t)/1e3;return M0e(s==null?void 0:s.roundingMethod)(a)}function W0e(e,t){const s=cn(e,t==null?void 0:t.in);return s.setFullYear(s.getFullYear(),0,1),s.setHours(0,0,0,0),s}const z0e={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},q0e=(e,t,s)=>{let a;const n=z0e[e];return typeof n=="string"?a=n:t===1?a=n.one:a=n.other.replace("{{count}}",t.toString()),s!=null&&s.addSuffix?s.comparison&&s.comparison>0?"in "+a:a+" ago":a};function uS(e){return(t={})=>{const s=t.width?String(t.width):e.defaultWidth;return e.formats[s]||e.formats[e.defaultWidth]}}const H0e={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},K0e={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},G0e={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},Y0e={date:uS({formats:H0e,defaultWidth:"full"}),time:uS({formats:K0e,defaultWidth:"full"}),dateTime:uS({formats:G0e,defaultWidth:"full"})},X0e={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},Q0e=(e,t,s,a)=>X0e[e];function ig(e){return(t,s)=>{const a=s!=null&&s.context?String(s.context):"standalone";let n;if(a==="formatting"&&e.formattingValues){const o=e.defaultFormattingWidth||e.defaultWidth,l=s!=null&&s.width?String(s.width):o;n=e.formattingValues[l]||e.formattingValues[o]}else{const o=e.defaultWidth,l=s!=null&&s.width?String(s.width):e.defaultWidth;n=e.values[l]||e.values[o]}const i=e.argumentCallback?e.argumentCallback(t):t;return n[i]}}const Z0e={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},J0e={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},ehe={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},the={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},rhe={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},she={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},ahe=(e,t)=>{const s=Number(e),a=s%100;if(a>20||a<10)switch(a%10){case 1:return s+"st";case 2:return s+"nd";case 3:return s+"rd"}return s+"th"},nhe={ordinalNumber:ahe,era:ig({values:Z0e,defaultWidth:"wide"}),quarter:ig({values:J0e,defaultWidth:"wide",argumentCallback:e=>e-1}),month:ig({values:ehe,defaultWidth:"wide"}),day:ig({values:the,defaultWidth:"wide"}),dayPeriod:ig({values:rhe,defaultWidth:"wide",formattingValues:she,defaultFormattingWidth:"wide"})};function og(e){return(t,s={})=>{const a=s.width,n=a&&e.matchPatterns[a]||e.matchPatterns[e.defaultMatchWidth],i=t.match(n);if(!i)return null;const o=i[0],l=a&&e.parsePatterns[a]||e.parsePatterns[e.defaultParseWidth],c=Array.isArray(l)?ohe(l,f=>f.test(o)):ihe(l,f=>f.test(o));let d;d=e.valueCallback?e.valueCallback(c):c,d=s.valueCallback?s.valueCallback(d):d;const h=t.slice(o.length);return{value:d,rest:h}}}function ihe(e,t){for(const s in e)if(Object.prototype.hasOwnProperty.call(e,s)&&t(e[s]))return s}function ohe(e,t){for(let s=0;s<e.length;s++)if(t(e[s]))return s}function lhe(e){return(t,s={})=>{const a=t.match(e.matchPattern);if(!a)return null;const n=a[0],i=t.match(e.parsePattern);if(!i)return null;let o=e.valueCallback?e.valueCallback(i[0]):i[0];o=s.valueCallback?s.valueCallback(o):o;const l=t.slice(n.length);return{value:o,rest:l}}}const che=/^(\d+)(th|st|nd|rd)?/i,dhe=/\d+/i,uhe={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},hhe={any:[/^b/i,/^(a|c)/i]},mhe={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},fhe={any:[/1/i,/2/i,/3/i,/4/i]},xhe={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},ghe={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},phe={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},yhe={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},bhe={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},vhe={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},whe={ordinalNumber:lhe({matchPattern:che,parsePattern:dhe,valueCallback:e=>parseInt(e,10)}),era:og({matchPatterns:uhe,defaultMatchWidth:"wide",parsePatterns:hhe,defaultParseWidth:"any"}),quarter:og({matchPatterns:mhe,defaultMatchWidth:"wide",parsePatterns:fhe,defaultParseWidth:"any",valueCallback:e=>e+1}),month:og({matchPatterns:xhe,defaultMatchWidth:"wide",parsePatterns:ghe,defaultParseWidth:"any"}),day:og({matchPatterns:phe,defaultMatchWidth:"wide",parsePatterns:yhe,defaultParseWidth:"any"}),dayPeriod:og({matchPatterns:bhe,defaultMatchWidth:"any",parsePatterns:vhe,defaultParseWidth:"any"})},Tz={code:"en-US",formatDistance:q0e,formatLong:Y0e,formatRelative:Q0e,localize:nhe,match:whe,options:{weekStartsOn:0,firstWeekContainsDate:1}};function jhe(e,t){const s=cn(e,t==null?void 0:t.in);return P0e(s,W0e(s))+1}function Nhe(e,t){const s=cn(e,t==null?void 0:t.in),a=+qw(s)-+T0e(s);return Math.round(a/Az)+1}function Iz(e,t){var h,f,x,y;const s=cn(e,t==null?void 0:t.in),a=s.getFullYear(),n=rb(),i=(t==null?void 0:t.firstWeekContainsDate)??((f=(h=t==null?void 0:t.locale)==null?void 0:h.options)==null?void 0:f.firstWeekContainsDate)??n.firstWeekContainsDate??((y=(x=n.locale)==null?void 0:x.options)==null?void 0:y.firstWeekContainsDate)??1,o=sd((t==null?void 0:t.in)||e,0);o.setFullYear(a+1,0,i),o.setHours(0,0,0,0);const l=Jp(o,t),c=sd((t==null?void 0:t.in)||e,0);c.setFullYear(a,0,i),c.setHours(0,0,0,0);const d=Jp(c,t);return+s>=+l?a+1:+s>=+d?a:a-1}function khe(e,t){var l,c,d,h;const s=rb(),a=(t==null?void 0:t.firstWeekContainsDate)??((c=(l=t==null?void 0:t.locale)==null?void 0:l.options)==null?void 0:c.firstWeekContainsDate)??s.firstWeekContainsDate??((h=(d=s.locale)==null?void 0:d.options)==null?void 0:h.firstWeekContainsDate)??1,n=Iz(e,t),i=sd((t==null?void 0:t.in)||e,0);return i.setFullYear(n,0,a),i.setHours(0,0,0,0),Jp(i,t)}function She(e,t){const s=cn(e,t==null?void 0:t.in),a=+Jp(s,t)-+khe(s,t);return Math.round(a/Az)+1}function as(e,t){const s=e<0?"-":"",a=Math.abs(e).toString().padStart(t,"0");return s+a}const Dd={y(e,t){const s=e.getFullYear(),a=s>0?s:1-s;return as(t==="yy"?a%100:a,t.length)},M(e,t){const s=e.getMonth();return t==="M"?String(s+1):as(s+1,2)},d(e,t){return as(e.getDate(),t.length)},a(e,t){const s=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return s.toUpperCase();case"aaa":return s;case"aaaaa":return s[0];case"aaaa":default:return s==="am"?"a.m.":"p.m."}},h(e,t){return as(e.getHours()%12||12,t.length)},H(e,t){return as(e.getHours(),t.length)},m(e,t){return as(e.getMinutes(),t.length)},s(e,t){return as(e.getSeconds(),t.length)},S(e,t){const s=t.length,a=e.getMilliseconds(),n=Math.trunc(a*Math.pow(10,s-3));return as(n,t.length)}},Zh={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},RR={G:function(e,t,s){const a=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return s.era(a,{width:"abbreviated"});case"GGGGG":return s.era(a,{width:"narrow"});case"GGGG":default:return s.era(a,{width:"wide"})}},y:function(e,t,s){if(t==="yo"){const a=e.getFullYear(),n=a>0?a:1-a;return s.ordinalNumber(n,{unit:"year"})}return Dd.y(e,t)},Y:function(e,t,s,a){const n=Iz(e,a),i=n>0?n:1-n;if(t==="YY"){const o=i%100;return as(o,2)}return t==="Yo"?s.ordinalNumber(i,{unit:"year"}):as(i,t.length)},R:function(e,t){const s=Pz(e);return as(s,t.length)},u:function(e,t){const s=e.getFullYear();return as(s,t.length)},Q:function(e,t,s){const a=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(a);case"QQ":return as(a,2);case"Qo":return s.ordinalNumber(a,{unit:"quarter"});case"QQQ":return s.quarter(a,{width:"abbreviated",context:"formatting"});case"QQQQQ":return s.quarter(a,{width:"narrow",context:"formatting"});case"QQQQ":default:return s.quarter(a,{width:"wide",context:"formatting"})}},q:function(e,t,s){const a=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(a);case"qq":return as(a,2);case"qo":return s.ordinalNumber(a,{unit:"quarter"});case"qqq":return s.quarter(a,{width:"abbreviated",context:"standalone"});case"qqqqq":return s.quarter(a,{width:"narrow",context:"standalone"});case"qqqq":default:return s.quarter(a,{width:"wide",context:"standalone"})}},M:function(e,t,s){const a=e.getMonth();switch(t){case"M":case"MM":return Dd.M(e,t);case"Mo":return s.ordinalNumber(a+1,{unit:"month"});case"MMM":return s.month(a,{width:"abbreviated",context:"formatting"});case"MMMMM":return s.month(a,{width:"narrow",context:"formatting"});case"MMMM":default:return s.month(a,{width:"wide",context:"formatting"})}},L:function(e,t,s){const a=e.getMonth();switch(t){case"L":return String(a+1);case"LL":return as(a+1,2);case"Lo":return s.ordinalNumber(a+1,{unit:"month"});case"LLL":return s.month(a,{width:"abbreviated",context:"standalone"});case"LLLLL":return s.month(a,{width:"narrow",context:"standalone"});case"LLLL":default:return s.month(a,{width:"wide",context:"standalone"})}},w:function(e,t,s,a){const n=She(e,a);return t==="wo"?s.ordinalNumber(n,{unit:"week"}):as(n,t.length)},I:function(e,t,s){const a=Nhe(e);return t==="Io"?s.ordinalNumber(a,{unit:"week"}):as(a,t.length)},d:function(e,t,s){return t==="do"?s.ordinalNumber(e.getDate(),{unit:"date"}):Dd.d(e,t)},D:function(e,t,s){const a=jhe(e);return t==="Do"?s.ordinalNumber(a,{unit:"dayOfYear"}):as(a,t.length)},E:function(e,t,s){const a=e.getDay();switch(t){case"E":case"EE":case"EEE":return s.day(a,{width:"abbreviated",context:"formatting"});case"EEEEE":return s.day(a,{width:"narrow",context:"formatting"});case"EEEEEE":return s.day(a,{width:"short",context:"formatting"});case"EEEE":default:return s.day(a,{width:"wide",context:"formatting"})}},e:function(e,t,s,a){const n=e.getDay(),i=(n-a.weekStartsOn+8)%7||7;switch(t){case"e":return String(i);case"ee":return as(i,2);case"eo":return s.ordinalNumber(i,{unit:"day"});case"eee":return s.day(n,{width:"abbreviated",context:"formatting"});case"eeeee":return s.day(n,{width:"narrow",context:"formatting"});case"eeeeee":return s.day(n,{width:"short",context:"formatting"});case"eeee":default:return s.day(n,{width:"wide",context:"formatting"})}},c:function(e,t,s,a){const n=e.getDay(),i=(n-a.weekStartsOn+8)%7||7;switch(t){case"c":return String(i);case"cc":return as(i,t.length);case"co":return s.ordinalNumber(i,{unit:"day"});case"ccc":return s.day(n,{width:"abbreviated",context:"standalone"});case"ccccc":return s.day(n,{width:"narrow",context:"standalone"});case"cccccc":return s.day(n,{width:"short",context:"standalone"});case"cccc":default:return s.day(n,{width:"wide",context:"standalone"})}},i:function(e,t,s){const a=e.getDay(),n=a===0?7:a;switch(t){case"i":return String(n);case"ii":return as(n,t.length);case"io":return s.ordinalNumber(n,{unit:"day"});case"iii":return s.day(a,{width:"abbreviated",context:"formatting"});case"iiiii":return s.day(a,{width:"narrow",context:"formatting"});case"iiiiii":return s.day(a,{width:"short",context:"formatting"});case"iiii":default:return s.day(a,{width:"wide",context:"formatting"})}},a:function(e,t,s){const n=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return s.dayPeriod(n,{width:"abbreviated",context:"formatting"});case"aaa":return s.dayPeriod(n,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return s.dayPeriod(n,{width:"narrow",context:"formatting"});case"aaaa":default:return s.dayPeriod(n,{width:"wide",context:"formatting"})}},b:function(e,t,s){const a=e.getHours();let n;switch(a===12?n=Zh.noon:a===0?n=Zh.midnight:n=a/12>=1?"pm":"am",t){case"b":case"bb":return s.dayPeriod(n,{width:"abbreviated",context:"formatting"});case"bbb":return s.dayPeriod(n,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return s.dayPeriod(n,{width:"narrow",context:"formatting"});case"bbbb":default:return s.dayPeriod(n,{width:"wide",context:"formatting"})}},B:function(e,t,s){const a=e.getHours();let n;switch(a>=17?n=Zh.evening:a>=12?n=Zh.afternoon:a>=4?n=Zh.morning:n=Zh.night,t){case"B":case"BB":case"BBB":return s.dayPeriod(n,{width:"abbreviated",context:"formatting"});case"BBBBB":return s.dayPeriod(n,{width:"narrow",context:"formatting"});case"BBBB":default:return s.dayPeriod(n,{width:"wide",context:"formatting"})}},h:function(e,t,s){if(t==="ho"){let a=e.getHours()%12;return a===0&&(a=12),s.ordinalNumber(a,{unit:"hour"})}return Dd.h(e,t)},H:function(e,t,s){return t==="Ho"?s.ordinalNumber(e.getHours(),{unit:"hour"}):Dd.H(e,t)},K:function(e,t,s){const a=e.getHours()%12;return t==="Ko"?s.ordinalNumber(a,{unit:"hour"}):as(a,t.length)},k:function(e,t,s){let a=e.getHours();return a===0&&(a=24),t==="ko"?s.ordinalNumber(a,{unit:"hour"}):as(a,t.length)},m:function(e,t,s){return t==="mo"?s.ordinalNumber(e.getMinutes(),{unit:"minute"}):Dd.m(e,t)},s:function(e,t,s){return t==="so"?s.ordinalNumber(e.getSeconds(),{unit:"second"}):Dd.s(e,t)},S:function(e,t){return Dd.S(e,t)},X:function(e,t,s){const a=e.getTimezoneOffset();if(a===0)return"Z";switch(t){case"X":return LR(a);case"XXXX":case"XX":return y0(a);case"XXXXX":case"XXX":default:return y0(a,":")}},x:function(e,t,s){const a=e.getTimezoneOffset();switch(t){case"x":return LR(a);case"xxxx":case"xx":return y0(a);case"xxxxx":case"xxx":default:return y0(a,":")}},O:function(e,t,s){const a=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+MR(a,":");case"OOOO":default:return"GMT"+y0(a,":")}},z:function(e,t,s){const a=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+MR(a,":");case"zzzz":default:return"GMT"+y0(a,":")}},t:function(e,t,s){const a=Math.trunc(+e/1e3);return as(a,t.length)},T:function(e,t,s){return as(+e,t.length)}};function MR(e,t=""){const s=e>0?"-":"+",a=Math.abs(e),n=Math.trunc(a/60),i=a%60;return i===0?s+String(n):s+String(n)+t+as(i,2)}function LR(e,t){return e%60===0?(e>0?"-":"+")+as(Math.abs(e)/60,2):y0(e,t)}function y0(e,t=""){const s=e>0?"-":"+",a=Math.abs(e),n=as(Math.trunc(a/60),2),i=as(a%60,2);return s+n+t+i}const FR=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}},Dz=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}},Che=(e,t)=>{const s=e.match(/(P+)(p+)?/)||[],a=s[1],n=s[2];if(!n)return FR(e,t);let i;switch(a){case"P":i=t.dateTime({width:"short"});break;case"PP":i=t.dateTime({width:"medium"});break;case"PPP":i=t.dateTime({width:"long"});break;case"PPPP":default:i=t.dateTime({width:"full"});break}return i.replace("{{date}}",FR(a,t)).replace("{{time}}",Dz(n,t))},_he={p:Dz,P:Che},Ehe=/^D+$/,Ahe=/^Y+$/,Phe=["D","DD","YY","YYYY"];function The(e){return Ehe.test(e)}function Ihe(e){return Ahe.test(e)}function Dhe(e,t,s){const a=Ohe(e,t,s);if(console.warn(a),Phe.includes(e))throw new RangeError(a)}function Ohe(e,t,s){const a=e[0]==="Y"?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${t}\`) for formatting ${a} to the input \`${s}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const Rhe=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Mhe=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Lhe=/^'([^]*?)'?$/,Fhe=/''/g,Bhe=/[a-zA-Z]/;function nf(e,t,s){var h,f,x,y;const a=rb(),n=a.locale??Tz,i=a.firstWeekContainsDate??((f=(h=a.locale)==null?void 0:h.options)==null?void 0:f.firstWeekContainsDate)??1,o=a.weekStartsOn??((y=(x=a.locale)==null?void 0:x.options)==null?void 0:y.weekStartsOn)??0,l=cn(e,s==null?void 0:s.in);if(!O0e(l))throw new RangeError("Invalid time value");let c=t.match(Mhe).map(v=>{const w=v[0];if(w==="p"||w==="P"){const N=_he[w];return N(v,n.formatLong)}return v}).join("").match(Rhe).map(v=>{if(v==="''")return{isToken:!1,value:"'"};const w=v[0];if(w==="'")return{isToken:!1,value:$he(v)};if(RR[w])return{isToken:!0,value:v};if(w.match(Bhe))throw new RangeError("Format string contains an unescaped latin alphabet character `"+w+"`");return{isToken:!1,value:v}});n.localize.preprocessor&&(c=n.localize.preprocessor(l,c));const d={firstWeekContainsDate:i,weekStartsOn:o,locale:n};return c.map(v=>{if(!v.isToken)return v.value;const w=v.value;(Ihe(w)||The(w))&&Dhe(w,t,String(e));const N=RR[w[0]];return N(l,w,n.localize,d)}).join("")}function $he(e){const t=e.match(Lhe);return t?t[1].replace(Fhe,"'"):e}function Uhe(e,t,s){const a=rb(),n=(s==null?void 0:s.locale)??a.locale??Tz,i=2520,o=$1(e,t);if(isNaN(o))throw new RangeError("Invalid time value");const l=Object.assign({},s,{addSuffix:s==null?void 0:s.addSuffix,comparison:o}),[c,d]=e2(s==null?void 0:s.in,...o>0?[t,e]:[e,t]),h=V0e(d,c),f=(Hw(d)-Hw(c))/1e3,x=Math.round((h-f)/60);let y;if(x<2)return s!=null&&s.includeSeconds?h<5?n.formatDistance("lessThanXSeconds",5,l):h<10?n.formatDistance("lessThanXSeconds",10,l):h<20?n.formatDistance("lessThanXSeconds",20,l):h<40?n.formatDistance("halfAMinute",0,l):h<60?n.formatDistance("lessThanXMinutes",1,l):n.formatDistance("xMinutes",1,l):x===0?n.formatDistance("lessThanXMinutes",1,l):n.formatDistance("xMinutes",x,l);if(x<45)return n.formatDistance("xMinutes",x,l);if(x<90)return n.formatDistance("aboutXHours",1,l);if(x<IR){const v=Math.round(x/60);return n.formatDistance("aboutXHours",v,l)}else{if(x<i)return n.formatDistance("xDays",1,l);if(x<Nv){const v=Math.round(x/IR);return n.formatDistance("xDays",v,l)}else if(x<Nv*2)return y=Math.round(x/Nv),n.formatDistance("aboutXMonths",y,l)}if(y=U0e(d,c),y<12){const v=Math.round(x/Nv);return n.formatDistance("xMonths",v,l)}else{const v=y%12,w=Math.trunc(y/12);return v<3?n.formatDistance("aboutXYears",w,l):v<9?n.formatDistance("overXYears",w,l):n.formatDistance("almostXYears",w+1,l)}}function bx(e,t){return Uhe(e,I0e(e),t)}const Vhe={transaction:Zl,payment:lt,system:bs,promo:soe,security:rr},Whe={transaction:"bg-green-100 text-green-600",payment:"bg-blue-100 text-blue-600",system:"bg-gray-100 text-gray-600",promo:"bg-purple-100 text-purple-600",security:"bg-red-100 text-red-600"};function zhe({notification:e,onMarkAsRead:t,onClear:s}){const a=Vhe[e.type],n=Whe[e.type];return r.jsx("div",{className:fe("p-3 border-b border-gray-100 hover:bg-gray-50 transition-colors cursor-pointer",!e.read&&"bg-blue-50/50"),onClick:()=>!e.read&&t(e.id),children:r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx("div",{className:fe("p-2 rounded-full flex-shrink-0",n),children:r.jsx(a,{className:"w-4 h-4"})}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsxs("div",{className:"flex items-start justify-between gap-2",children:[r.jsx("p",{className:fe("text-sm",e.read?"text-gray-700":"text-gray-900 font-medium"),children:e.title}),r.jsx("button",{onClick:i=>{i.stopPropagation(),s(e.id)},className:"p-1 rounded hover:bg-gray-200 transition-colors flex-shrink-0",children:r.jsx(Js,{className:"w-3.5 h-3.5 text-gray-400"})})]}),r.jsx("p",{className:"text-xs text-gray-500 mt-0.5 line-clamp-2",children:e.message}),r.jsx("p",{className:"text-xs text-gray-400 mt-1",children:bx(new Date(e.createdAt),{addSuffix:!0})})]}),!e.read&&r.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-500 flex-shrink-0 mt-2"})]})})}function rA(){const[e,t]=p.useState(!1),s=p.useRef(null),{notifications:a,unreadCount:n,markAsRead:i,markAllAsRead:o,clearNotification:l,clearAllNotifications:c}=BV();return p.useEffect(()=>{function d(h){s.current&&!s.current.contains(h.target)&&t(!1)}return document.addEventListener("mousedown",d),()=>document.removeEventListener("mousedown",d)},[]),r.jsxs("div",{className:"relative",ref:s,children:[r.jsxs("button",{onClick:()=>t(!e),className:"relative p-2 rounded-lg hover:bg-gray-100 transition-colors","aria-label":"Notifications",children:[r.jsx(Lr,{className:"w-5 h-5 text-gray-600"}),n>0&&r.jsx("span",{className:"absolute top-0.5 right-0.5 flex items-center justify-center min-w-[18px] h-[18px] px-1 text-xs font-medium text-white bg-red-500 rounded-full",children:n>99?"99+":n})]}),e&&r.jsxs("div",{className:"absolute right-0 mt-2 w-80 sm:w-96 bg-white rounded-xl shadow-xl border border-gray-200 overflow-hidden z-50",children:[r.jsxs("div",{className:"flex items-center justify-between px-4 py-3 bg-gray-50 border-b border-gray-200",children:[r.jsx("h3",{className:"font-semibold text-gray-900",children:"Notifications"}),r.jsxs("div",{className:"flex items-center gap-2",children:[n>0&&r.jsxs("button",{onClick:o,className:"flex items-center gap-1 text-xs text-primary-600 hover:text-primary-700 font-medium",children:[r.jsx(Th,{className:"w-3.5 h-3.5"}),"Mark all read"]}),a.length>0&&r.jsxs("button",{onClick:c,className:"flex items-center gap-1 text-xs text-gray-500 hover:text-gray-700",children:[r.jsx(Js,{className:"w-3.5 h-3.5"}),"Clear"]})]})]}),r.jsx("div",{className:"max-h-[400px] overflow-y-auto",children:a.length===0?r.jsxs("div",{className:"py-12 text-center",children:[r.jsx(Lr,{className:"w-10 h-10 text-gray-300 mx-auto mb-3"}),r.jsx("p",{className:"text-sm text-gray-500",children:"No notifications yet"}),r.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"We'll notify you when something happens"})]}):a.map(d=>r.jsx(zhe,{notification:d,onMarkAsRead:i,onClear:l},d.id))}),a.length>0&&r.jsx("div",{className:"px-4 py-2 bg-gray-50 border-t border-gray-200 text-center",children:r.jsx("button",{onClick:()=>t(!1),className:"text-xs text-primary-600 hover:text-primary-700 font-medium",children:"View all notifications"})})]})]})}const jc={hidden:{opacity:0,y:30},visible:{opacity:1,y:0}},Jh={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1,delayChildren:.2}}},hS={hidden:{opacity:0,scale:.8},visible:{opacity:1,scale:1}},qhe={hidden:{opacity:0,x:-50},visible:{opacity:1,x:0}},Hhe={hidden:{opacity:0,x:50},visible:{opacity:1,x:0}},Khe={y:[-10,10,-10],transition:{duration:4,repeat:1/0,ease:"easeInOut"}};function Ghe(e,t=2e3,s=!1){const[a,n]=p.useState(0);return p.useEffect(()=>{if(!s)return;let i;const o=l=>{i||(i=l);const c=Math.min((l-i)/t,1);n(Math.floor(c*e)),c<1&&requestAnimationFrame(o)};requestAnimationFrame(o)},[e,t,s]),a}function Yhe({value:e,suffix:t="",prefix:s=""}){const a=p.useRef(null),n=C0e(a,{once:!0}),i=Ghe(e,2e3,n);return r.jsxs("span",{ref:a,children:[s,i.toLocaleString(),t]})}function Xhe(){const[e,t]=p.useState(50),[s,a]=p.useState([]),[n,i]=p.useState(!0),[o,l]=p.useState(!1),c=p.useRef(null),{scrollYProgress:d}=a0e({target:c,offset:["start start","end start"]}),h=lp(d,[0,.5],[1,0]),f=lp(d,[0,.5],[1,.95]),x=lp(d,[0,.5],[0,50]);p.useEffect(()=>{y();const A=()=>{l(window.scrollY>50)};return window.addEventListener("scroll",A),()=>window.removeEventListener("scroll",A)},[]);const y=async()=>{try{const{data:A,error:P}=await X.from("fee_configs").select("*").eq("is_active",!0);!P&&A&&a(A)}catch(A){console.error("Error fetching fees:",A)}finally{i(!1)}},v=(A,P)=>{if(!P)return 0;let M=0;return P.fee_type==="percentage"?M=A*P.fee_value/100:M=P.fee_value,P.min_fee!==null&&M<P.min_fee&&(M=P.min_fee),P.max_fee!==null&&M>P.max_fee&&(M=P.max_fee),M},N=s.find(A=>A.name==="Payment Processing Fee"&&A.category==="merchant"),k=v(e,N),C=e-k,E=[{icon:Ws,title:"Mobile Money",description:"Accept Orange Money, Africell Money and more through our Monime integration.",gradient:"from-orange-500 to-amber-500"},{icon:lt,title:"Peeap Cards",description:"Accept payments from Peeap prepaid cardholders - instant settlement.",gradient:"from-blue-500 to-cyan-500"},{icon:Vs,title:"QR Code Payments",description:"Generate QR codes for in-store payments. Customers scan with Peeap app.",gradient:"from-purple-500 to-pink-500"},{icon:rr,title:"Secure & Compliant",description:"Bank-grade encryption, fraud detection, and regulatory compliance built-in.",gradient:"from-green-500 to-emerald-500"},{icon:j6,title:"Simple Integration",description:"Add payments to your site with just a few lines of code. Full API docs available.",gradient:"from-indigo-500 to-violet-500"},{icon:Ts,title:"Real-Time Dashboard",description:"Track payments, view analytics, and manage your business from one place.",gradient:"from-rose-500 to-red-500"}],_=[{name:"Mobile Money",providers:["Orange Money","Africell Money"],icon:Ws,color:"bg-gradient-to-br from-orange-400 to-orange-600",shadowColor:"shadow-orange-500/30",delay:0},{name:"Peeap Card",providers:["Virtual Cards","Physical Cards"],icon:lt,color:"bg-gradient-to-br from-blue-400 to-indigo-600",shadowColor:"shadow-blue-500/30",delay:.1},{name:"QR Code",providers:["Peeap App Scan"],icon:Vs,color:"bg-gradient-to-br from-purple-400 to-purple-600",shadowColor:"shadow-purple-500/30",delay:.2}],T=[{name:"Starter",description:"For small businesses getting started",fee:"2.9% + Le 0.30",features:["Accept all payment methods","Standard payout (T+2)","Basic dashboard","Email support","Up to Le 10,000/month"],cta:"Start Free",highlighted:!1},{name:"Growth",description:"For growing businesses",fee:"2.5% + Le 0.20",features:["Everything in Starter","Next-day payout (T+1)","Advanced analytics","Priority support","Up to Le 100/month","Webhook notifications"],cta:"Get Started",highlighted:!0},{name:"Enterprise",description:"For large scale operations",fee:"Custom",features:["Everything in Growth","Same-day payout","Dedicated account manager","24/7 phone support","Unlimited volume","Custom integration support","SLA guarantee"],cta:"Contact Sales",highlighted:!1}];return r.jsxs("div",{className:"min-h-screen bg-white overflow-hidden",children:[r.jsx(Pe.nav,{initial:{y:-100},animate:{y:0},transition:{type:"spring",stiffness:100,damping:20},className:`fixed top-0 left-0 right-0 z-50 transition-all duration-300 ${o?"bg-white/90 backdrop-blur-lg shadow-lg border-b border-gray-100":"bg-transparent"}`,children:r.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:r.jsxs("div",{className:"flex items-center justify-between h-16",children:[r.jsxs(Pe.div,{className:"flex items-center",whileHover:{scale:1.05},whileTap:{scale:.95},children:[r.jsx("span",{className:"text-2xl font-bold bg-gradient-to-r from-indigo-600 to-purple-600 bg-clip-text text-transparent",children:"Peeap"}),r.jsx(Pe.span,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},transition:{delay:.3},className:"ml-2 px-2 py-0.5 bg-gradient-to-r from-indigo-100 to-purple-100 text-indigo-700 text-xs font-medium rounded-full",children:"Business"})]}),r.jsxs("div",{className:"hidden md:flex items-center space-x-8",children:[["Features","Pricing","Calculator"].map((A,P)=>r.jsxs(Pe.a,{href:`#${A.toLowerCase()}`,initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{delay:.1*P},className:"text-gray-600 hover:text-indigo-600 transition-colors relative group",children:[A,r.jsx("span",{className:"absolute -bottom-1 left-0 w-0 h-0.5 bg-indigo-600 transition-all group-hover:w-full"})]},A)),r.jsx(Pe.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{delay:.4},children:r.jsx(xt,{to:"/login",className:"text-gray-600 hover:text-indigo-600 transition-colors",children:"Sign In"})}),r.jsx(Pe.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{delay:.5,type:"spring"},whileHover:{scale:1.05},whileTap:{scale:.95},children:r.jsx(xt,{to:"/register",children:r.jsx(Oe,{className:"bg-gradient-to-r from-indigo-600 to-purple-600 hover:from-indigo-700 hover:to-purple-700 shadow-lg shadow-indigo-500/30",children:"Get Started"})})})]})]})})}),r.jsxs("section",{ref:c,className:"relative min-h-screen flex items-center justify-center overflow-hidden",children:[r.jsxs("div",{className:"absolute inset-0 bg-gradient-to-br from-indigo-50 via-white to-purple-50",children:[r.jsx(Pe.div,{animate:{x:[0,100,0],y:[0,-50,0]},transition:{duration:20,repeat:1/0,ease:"linear"},className:"absolute top-20 left-10 w-72 h-72 bg-gradient-to-r from-indigo-300/30 to-purple-300/30 rounded-full blur-3xl"}),r.jsx(Pe.div,{animate:{x:[0,-100,0],y:[0,50,0]},transition:{duration:15,repeat:1/0,ease:"linear"},className:"absolute bottom-20 right-10 w-96 h-96 bg-gradient-to-r from-purple-300/30 to-pink-300/30 rounded-full blur-3xl"}),r.jsx(Pe.div,{animate:{scale:[1,1.2,1]},transition:{duration:10,repeat:1/0,ease:"easeInOut"},className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[800px] h-[800px] bg-gradient-to-r from-indigo-200/20 to-purple-200/20 rounded-full blur-3xl"})]}),r.jsx("div",{className:"absolute inset-0 bg-[linear-gradient(to_right,#8080800a_1px,transparent_1px),linear-gradient(to_bottom,#8080800a_1px,transparent_1px)] bg-[size:24px_24px]"}),r.jsxs(Pe.div,{style:{opacity:h,scale:f,y:x},className:"relative z-10 max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 pt-32 pb-20",children:[r.jsxs("div",{className:"text-center",children:[r.jsxs(Pe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},className:"inline-flex items-center px-4 py-2 bg-white/80 backdrop-blur-sm rounded-full mb-6 shadow-lg shadow-indigo-500/10 border border-indigo-100",children:[r.jsx(Pe.div,{animate:{rotate:360},transition:{duration:3,repeat:1/0,ease:"linear"},children:r.jsx(XV,{className:"w-4 h-4 text-indigo-600 mr-2"})}),r.jsx("span",{className:"text-sm font-medium bg-gradient-to-r from-indigo-600 to-purple-600 bg-clip-text text-transparent",children:"Sierra Leone's #1 Payment Gateway"})]}),r.jsxs(Pe.h1,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.8,delay:.2},className:"text-5xl md:text-7xl font-bold text-gray-900 mb-6 leading-tight",children:["Accept Payments"," ",r.jsxs("span",{className:"relative",children:[r.jsx("span",{className:"bg-gradient-to-r from-indigo-600 via-purple-600 to-pink-600 bg-clip-text text-transparent",children:"Anywhere"}),r.jsxs(Pe.svg,{initial:{pathLength:0},animate:{pathLength:1},transition:{duration:1,delay:1},className:"absolute -bottom-2 left-0 w-full",viewBox:"0 0 200 10",fill:"none",children:[r.jsx(Pe.path,{d:"M0 5 Q 50 0 100 5 T 200 5",stroke:"url(#gradient)",strokeWidth:"3",strokeLinecap:"round",fill:"none"}),r.jsx("defs",{children:r.jsxs("linearGradient",{id:"gradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[r.jsx("stop",{offset:"0%",stopColor:"#4F46E5"}),r.jsx("stop",{offset:"50%",stopColor:"#9333EA"}),r.jsx("stop",{offset:"100%",stopColor:"#EC4899"})]})})]})]})]}),r.jsxs(Pe.p,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.8,delay:.4},className:"text-xl md:text-2xl text-gray-600 mb-10 max-w-3xl mx-auto leading-relaxed",children:["Peeap makes it easy for businesses in Sierra Leone to accept"," ",r.jsx("span",{className:"text-orange-500 font-semibold",children:"Mobile Money"}),","," ",r.jsx("span",{className:"text-blue-500 font-semibold",children:"Card payments"}),", and"," ",r.jsx("span",{className:"text-purple-500 font-semibold",children:"QR codes"}),"."]}),r.jsxs(Pe.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.8,delay:.6},className:"flex flex-col sm:flex-row gap-4 justify-center mb-16",children:[r.jsx(Pe.div,{whileHover:{scale:1.05},whileTap:{scale:.95},children:r.jsx(xt,{to:"/register",children:r.jsxs(Oe,{size:"lg",className:"w-full sm:w-auto bg-gradient-to-r from-indigo-600 to-purple-600 hover:from-indigo-700 hover:to-purple-700 shadow-xl shadow-indigo-500/30 text-lg px-8 py-6",children:["Create Merchant Account",r.jsx(os,{className:"ml-2 w-5 h-5"})]})})}),r.jsx(Pe.div,{whileHover:{scale:1.05},whileTap:{scale:.95},children:r.jsx(xt,{to:"/register?type=agent",children:r.jsxs(Oe,{variant:"outline",size:"lg",className:"w-full sm:w-auto border-2 border-indigo-200 text-indigo-600 hover:bg-indigo-50 text-lg px-8 py-6",children:[r.jsx(Hy,{className:"mr-2 w-5 h-5"}),"Watch Demo"]})})})]}),r.jsx(Pe.div,{variants:Jh,initial:"hidden",animate:"visible",className:"grid grid-cols-1 md:grid-cols-3 gap-6 max-w-4xl mx-auto",children:_.map((A,P)=>{const M=A.icon;return r.jsxs(Pe.div,{variants:hS,animate:Khe,style:{animationDelay:`${P*.5}s`},whileHover:{scale:1.05,y:-5},className:`bg-white rounded-2xl shadow-2xl ${A.shadowColor} border border-gray-100 p-6 cursor-pointer group`,children:[r.jsx(Pe.div,{className:`w-14 h-14 ${A.color} rounded-xl flex items-center justify-center mb-4 shadow-lg`,whileHover:{rotate:[0,-10,10,0]},transition:{duration:.5},children:r.jsx(M,{className:"w-7 h-7 text-white"})}),r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2 group-hover:text-indigo-600 transition-colors",children:A.name}),r.jsx("div",{className:"flex flex-wrap gap-2",children:A.providers.map((R,$)=>r.jsx("span",{className:"px-2 py-1 bg-gray-100 text-gray-600 text-sm rounded-lg",children:R},$))})]},P)})})]}),r.jsx(Pe.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:1.5},className:"absolute bottom-10 left-1/2 -translate-x-1/2",children:r.jsxs(Pe.div,{animate:{y:[0,10,0]},transition:{duration:1.5,repeat:1/0},className:"flex flex-col items-center text-gray-400",children:[r.jsx("span",{className:"text-sm mb-2",children:"Scroll to explore"}),r.jsx(ys,{className:"w-5 h-5"})]})})]})]}),r.jsx("section",{id:"features",className:"py-24 px-4 sm:px-6 lg:px-8 bg-white relative",children:r.jsxs("div",{className:"max-w-7xl mx-auto",children:[r.jsxs(Pe.div,{initial:"hidden",whileInView:"visible",viewport:{once:!0,margin:"-100px"},variants:jc,transition:{duration:.6},className:"text-center mb-16",children:[r.jsx(Pe.span,{className:"inline-block px-4 py-1 bg-indigo-100 text-indigo-700 rounded-full text-sm font-medium mb-4",whileHover:{scale:1.05},children:"Features"}),r.jsxs("h2",{className:"text-4xl md:text-5xl font-bold text-gray-900 mb-4",children:["Everything You Need to"," ",r.jsx("span",{className:"bg-gradient-to-r from-indigo-600 to-purple-600 bg-clip-text text-transparent",children:"Accept Payments"})]}),r.jsx("p",{className:"text-xl text-gray-600 max-w-2xl mx-auto",children:"A complete payment solution designed for Sierra Leone's businesses."})]}),r.jsx(Pe.div,{variants:Jh,initial:"hidden",whileInView:"visible",viewport:{once:!0,margin:"-50px"},className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:E.map((A,P)=>{const M=A.icon;return r.jsxs(Pe.div,{variants:jc,whileHover:{y:-10,transition:{duration:.2}},className:"group bg-white rounded-2xl p-8 border border-gray-100 hover:border-indigo-200 hover:shadow-xl transition-all duration-300",children:[r.jsx(Pe.div,{className:`w-14 h-14 bg-gradient-to-br ${A.gradient} rounded-xl flex items-center justify-center mb-6 shadow-lg group-hover:scale-110 transition-transform duration-300`,whileHover:{rotate:5},children:r.jsx(M,{className:"w-7 h-7 text-white"})}),r.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-3 group-hover:text-indigo-600 transition-colors",children:A.title}),r.jsx("p",{className:"text-gray-600 leading-relaxed",children:A.description})]},P)})})]})}),r.jsxs("section",{id:"calculator",className:"py-24 px-4 sm:px-6 lg:px-8 bg-gradient-to-br from-gray-50 to-indigo-50 relative overflow-hidden",children:[r.jsx(Pe.div,{animate:{rotate:360},transition:{duration:50,repeat:1/0,ease:"linear"},className:"absolute -top-40 -right-40 w-80 h-80 bg-gradient-to-r from-indigo-200/30 to-purple-200/30 rounded-full blur-3xl"}),r.jsxs("div",{className:"max-w-7xl mx-auto relative z-10",children:[r.jsxs(Pe.div,{initial:"hidden",whileInView:"visible",viewport:{once:!0},variants:jc,className:"text-center mb-12",children:[r.jsx(Pe.span,{className:"inline-block px-4 py-1 bg-white text-indigo-700 rounded-full text-sm font-medium mb-4 shadow-sm",whileHover:{scale:1.05},children:"Transparent Pricing"}),r.jsx("h2",{className:"text-4xl md:text-5xl font-bold text-gray-900 mb-4",children:"Pricing Calculator"}),r.jsx("p",{className:"text-xl text-gray-600 max-w-2xl mx-auto",children:"See exactly how much you'll pay. No hidden fees, ever."})]}),r.jsx(Pe.div,{initial:"hidden",whileInView:"visible",viewport:{once:!0},variants:hS,transition:{duration:.6},className:"max-w-2xl mx-auto",children:r.jsxs("div",{className:"bg-white rounded-3xl shadow-2xl border border-gray-100 p-8 md:p-10",children:[r.jsx("div",{className:"flex items-center justify-center mb-8",children:r.jsx(Pe.div,{animate:{rotate:[0,10,-10,0]},transition:{duration:2,repeat:1/0},className:"w-16 h-16 bg-gradient-to-br from-indigo-500 to-purple-600 rounded-2xl flex items-center justify-center shadow-lg shadow-indigo-500/30",children:r.jsx(zie,{className:"w-8 h-8 text-white"})})}),r.jsxs("div",{className:"mb-8",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Payment Amount (Le)"}),r.jsx(Pe.input,{whileFocus:{scale:1.02},type:"number",value:e,onChange:A=>t(Math.max(0,parseInt(A.target.value)||0)),className:"w-full px-6 py-4 border-2 border-gray-200 rounded-xl focus:ring-4 focus:ring-indigo-500/20 focus:border-indigo-500 text-2xl font-semibold text-center transition-all",placeholder:"Enter amount"}),r.jsx("div",{className:"flex flex-wrap gap-2 mt-4 justify-center",children:[10,50,100,500,1e3].map(A=>r.jsxs(Pe.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>t(A),className:`px-4 py-2 text-sm rounded-xl border-2 transition-all font-medium ${e===A?"bg-indigo-600 border-indigo-600 text-white shadow-lg shadow-indigo-500/30":"bg-white border-gray-200 text-gray-600 hover:border-indigo-300 hover:text-indigo-600"}`,children:["Le ",A.toLocaleString()]},A))})]}),r.jsxs(Pe.div,{layout:!0,className:"bg-gradient-to-br from-gray-50 to-indigo-50 rounded-2xl p-6 space-y-4",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"text-gray-600",children:"Payment Amount"}),r.jsxs(Pe.span,{initial:{scale:1.2,color:"#4F46E5"},animate:{scale:1,color:"#111827"},className:"font-bold text-xl text-gray-900",children:["Le ",e.toLocaleString()]},e)]}),r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx("span",{className:"text-gray-600",children:"Processing Fee"}),N&&r.jsxs("span",{className:"ml-2 text-xs text-gray-500 bg-gray-200 px-2 py-0.5 rounded-full",children:[N.fee_value,"%"]})]}),r.jsxs(Pe.span,{initial:{scale:1.2},animate:{scale:1},className:"font-bold text-lg text-red-500",children:["- Le ",k.toLocaleString()]},k)]}),r.jsx("div",{className:"h-px bg-gradient-to-r from-transparent via-gray-300 to-transparent"}),r.jsxs("div",{className:"flex justify-between items-center pt-2",children:[r.jsx("span",{className:"text-gray-900 font-semibold text-lg",children:"You Receive"}),r.jsxs(Pe.span,{initial:{scale:1.3},animate:{scale:1},className:"text-3xl font-bold bg-gradient-to-r from-green-500 to-emerald-600 bg-clip-text text-transparent",children:["Le ",C.toLocaleString()]},C)]})]}),r.jsxs("div",{className:"mt-6 p-4 bg-indigo-50 rounded-xl border border-indigo-100",children:[r.jsxs("h4",{className:"font-semibold text-indigo-900 mb-2 flex items-center",children:[r.jsx(Ho,{className:"w-4 h-4 mr-2"}),"Current Rates"]}),r.jsx("div",{className:"text-sm text-indigo-700 space-y-1",children:n?r.jsx(Pe.div,{animate:{opacity:[.5,1,.5]},transition:{duration:1.5,repeat:1/0},children:"Loading fees..."}):r.jsxs(r.Fragment,{children:[r.jsxs("p",{children:[" Payment Processing: ",N?`${N.fee_value}%`:"2.9%"," per transaction"]}),r.jsx("p",{children:" Payouts: Free to your Peeap wallet"}),r.jsx("p",{children:" Bank Withdrawal: 0.25% (min Le 0.25)"})]})})]}),r.jsx(Pe.div,{className:"mt-8",whileHover:{scale:1.02},whileTap:{scale:.98},children:r.jsx(xt,{to:"/register",children:r.jsxs(Oe,{size:"lg",className:"w-full bg-gradient-to-r from-indigo-600 to-purple-600 hover:from-indigo-700 hover:to-purple-700 shadow-xl shadow-indigo-500/30 text-lg py-6",children:["Start Accepting Payments",r.jsx(os,{className:"ml-2 w-5 h-5"})]})})})]})})]})]}),r.jsx("section",{id:"pricing",className:"py-24 px-4 sm:px-6 lg:px-8 bg-white",children:r.jsxs("div",{className:"max-w-7xl mx-auto",children:[r.jsxs(Pe.div,{initial:"hidden",whileInView:"visible",viewport:{once:!0},variants:jc,className:"text-center mb-16",children:[r.jsx(Pe.span,{className:"inline-block px-4 py-1 bg-indigo-100 text-indigo-700 rounded-full text-sm font-medium mb-4",children:"Plans"}),r.jsxs("h2",{className:"text-4xl md:text-5xl font-bold text-gray-900 mb-4",children:["Simple, Transparent"," ",r.jsx("span",{className:"bg-gradient-to-r from-indigo-600 to-purple-600 bg-clip-text text-transparent",children:"Pricing"})]}),r.jsx("p",{className:"text-xl text-gray-600 max-w-2xl mx-auto",children:"Pay only for what you use. No monthly fees, no setup costs."})]}),r.jsx(Pe.div,{variants:Jh,initial:"hidden",whileInView:"visible",viewport:{once:!0},className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:T.map((A,P)=>r.jsxs(Pe.div,{variants:jc,whileHover:{y:-10},className:`rounded-3xl p-8 relative ${A.highlighted?"bg-gradient-to-br from-indigo-600 to-purple-700 text-white shadow-2xl shadow-indigo-500/40 scale-105 z-10":"bg-white border-2 border-gray-100 hover:border-indigo-200 hover:shadow-xl"} transition-all duration-300`,children:[A.highlighted&&r.jsx(Pe.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"absolute -top-4 left-1/2 -translate-x-1/2 px-4 py-1 bg-gradient-to-r from-amber-400 to-orange-500 text-white text-sm font-bold rounded-full shadow-lg",children:"Most Popular"}),r.jsx("h3",{className:`text-2xl font-bold mb-2 ${A.highlighted?"text-white":"text-gray-900"}`,children:A.name}),r.jsx("p",{className:`text-sm mb-6 ${A.highlighted?"text-indigo-200":"text-gray-500"}`,children:A.description}),r.jsxs("div",{className:"mb-8",children:[r.jsx("span",{className:`text-4xl font-bold ${A.highlighted?"text-white":"text-gray-900"}`,children:A.fee}),A.fee!=="Custom"&&r.jsxs("span",{className:`text-sm ${A.highlighted?"text-indigo-200":"text-gray-500"}`,children:[" ","per transaction"]})]}),r.jsx("ul",{className:"space-y-4 mb-8",children:A.features.map((M,R)=>r.jsxs(Pe.li,{className:"flex items-start",initial:{opacity:0,x:-10},whileInView:{opacity:1,x:0},transition:{delay:R*.1},children:[r.jsx(Ae,{className:`w-5 h-5 mr-3 flex-shrink-0 ${A.highlighted?"text-indigo-200":"text-green-500"}`}),r.jsx("span",{className:A.highlighted?"text-indigo-100":"text-gray-600",children:M})]},R))}),r.jsx(Pe.div,{whileHover:{scale:1.05},whileTap:{scale:.95},children:r.jsx(xt,{to:A.cta==="Contact Sales"?"/contact":"/register",children:r.jsx(Oe,{variant:A.highlighted?"outline":"primary",className:`w-full py-6 text-lg ${A.highlighted?"border-2 border-white text-white hover:bg-white hover:text-indigo-600":"bg-gradient-to-r from-indigo-600 to-purple-600 hover:from-indigo-700 hover:to-purple-700 shadow-lg shadow-indigo-500/30"}`,children:A.cta})})})]},P))})]})}),r.jsxs("section",{className:"py-24 px-4 sm:px-6 lg:px-8 bg-gray-900 text-white relative overflow-hidden",children:[r.jsx("div",{className:"absolute inset-0 bg-[linear-gradient(to_right,#ffffff0a_1px,transparent_1px),linear-gradient(to_bottom,#ffffff0a_1px,transparent_1px)] bg-[size:24px_24px]"}),r.jsx(Pe.div,{animate:{x:[0,100,0],y:[0,-50,0]},transition:{duration:20,repeat:1/0},className:"absolute top-0 right-0 w-96 h-96 bg-gradient-to-r from-indigo-600/20 to-purple-600/20 rounded-full blur-3xl"}),r.jsxs("div",{className:"max-w-7xl mx-auto relative z-10",children:[r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-16 items-center",children:[r.jsxs(Pe.div,{initial:"hidden",whileInView:"visible",viewport:{once:!0},variants:qhe,transition:{duration:.6},children:[r.jsx(Pe.span,{className:"inline-block px-4 py-1 bg-indigo-500/20 text-indigo-300 rounded-full text-sm font-medium mb-6",children:"Developer-Friendly"}),r.jsxs("h2",{className:"text-4xl md:text-5xl font-bold mb-6",children:["Integrate in"," ",r.jsx("span",{className:"bg-gradient-to-r from-indigo-400 to-purple-400 bg-clip-text text-transparent",children:"Minutes"})]}),r.jsx("p",{className:"text-xl text-gray-400 mb-8 leading-relaxed",children:"Add Peeap to your website with just a few lines of code. Works with any platform."}),r.jsx(Pe.div,{variants:Jh,initial:"hidden",whileInView:"visible",className:"space-y-4",children:["Simple JavaScript SDK","REST API for custom integrations","Hosted checkout page - no code needed","Webhook notifications"].map((A,P)=>r.jsxs(Pe.div,{variants:jc,className:"flex items-center",children:[r.jsx("div",{className:"w-6 h-6 rounded-full bg-gradient-to-r from-green-400 to-emerald-500 flex items-center justify-center mr-3",children:r.jsx(Ae,{className:"w-4 h-4 text-white"})}),r.jsx("span",{className:"text-gray-300",children:A})]},P))})]}),r.jsx(Pe.div,{initial:"hidden",whileInView:"visible",viewport:{once:!0},variants:Hhe,transition:{duration:.6},children:r.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm rounded-2xl p-6 border border-gray-700 shadow-2xl",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("div",{className:"w-3 h-3 rounded-full bg-red-500"}),r.jsx("div",{className:"w-3 h-3 rounded-full bg-yellow-500"}),r.jsx("div",{className:"w-3 h-3 rounded-full bg-green-500"})]}),r.jsx("span",{className:"px-3 py-1 bg-gradient-to-r from-green-500 to-emerald-600 text-white text-xs font-bold rounded-full",children:"SDK v0"})]}),r.jsx("pre",{className:"text-sm text-gray-300 overflow-x-auto",children:r.jsx("code",{children:`<script src="https://checkout.peeap.com/embed/peeap-sdk.js"><\/script>
<script>
PeeapSDK.init({
  publicKey: 'pk_live_YOUR_KEY',
  baseUrl: 'https://api.peeap.com',
  onSuccess: function(payment) {
    console.log('Payment successful!', payment);
  }
});

// Create a payment
PeeapSDK.createPayment({
  amount: 50,  // New Leone (SLE) - 50 = Le 50.00
  currency: 'SLE',
  description: 'Order #12345'
});
<\/script>`})})]})})]}),r.jsx(Pe.div,{initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},viewport:{once:!0},className:"text-center mt-16",children:r.jsx(Pe.a,{href:"/docs/SDK_INTEGRATION.md",target:"_blank",whileHover:{scale:1.05},whileTap:{scale:.95},children:r.jsxs(Oe,{variant:"outline",size:"lg",className:"border-2 border-white/30 text-white hover:bg-white hover:text-gray-900 px-8",children:["View Full Documentation",r.jsx(os,{className:"ml-2 w-5 h-5"})]})})})]})]}),r.jsxs("section",{className:"py-20 px-4 sm:px-6 lg:px-8 bg-gradient-to-r from-indigo-600 via-purple-600 to-pink-600 relative overflow-hidden",children:[r.jsx(Pe.div,{animate:{x:[-200,200],opacity:[.3,.5,.3]},transition:{duration:10,repeat:1/0,ease:"linear"},className:"absolute inset-0 bg-[radial-gradient(ellipse_at_center,_var(--tw-gradient-stops))] from-white/10 to-transparent"}),r.jsx("div",{className:"max-w-7xl mx-auto relative z-10",children:r.jsx(Pe.div,{variants:Jh,initial:"hidden",whileInView:"visible",viewport:{once:!0},className:"grid grid-cols-2 md:grid-cols-4 gap-8 text-center",children:[{value:500,suffix:"+",label:"Merchants"},{value:1,prefix:"Le ",suffix:"B+",label:"Processed"},{value:99.9,suffix:"%",label:"Uptime"},{value:24,suffix:"/7",label:"Support"}].map((A,P)=>r.jsxs(Pe.div,{variants:hS,className:"p-6",children:[r.jsx(Pe.p,{className:"text-5xl md:text-6xl font-bold text-white mb-2",initial:{scale:.5},whileInView:{scale:1},viewport:{once:!0},children:r.jsx(Yhe,{value:A.value,prefix:A.prefix||"",suffix:A.suffix})}),r.jsx("p",{className:"text-indigo-200 text-lg",children:A.label})]},P))})})]}),r.jsxs("section",{className:"py-24 px-4 sm:px-6 lg:px-8 bg-white relative overflow-hidden",children:[r.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-indigo-50/50 to-white"}),r.jsx(Pe.div,{animate:{scale:[1,1.2,1],rotate:[0,180,360]},transition:{duration:20,repeat:1/0},className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[600px] h-[600px] bg-gradient-to-r from-indigo-100/40 to-purple-100/40 rounded-full blur-3xl"}),r.jsxs(Pe.div,{initial:"hidden",whileInView:"visible",viewport:{once:!0},variants:jc,className:"max-w-4xl mx-auto text-center relative z-10",children:[r.jsx(Pe.div,{animate:{y:[-5,5,-5]},transition:{duration:3,repeat:1/0},className:"inline-block mb-6",children:r.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-indigo-500 to-purple-600 rounded-2xl flex items-center justify-center mx-auto shadow-2xl shadow-indigo-500/40",children:r.jsx(Ho,{className:"w-10 h-10 text-white"})})}),r.jsxs("h2",{className:"text-4xl md:text-5xl font-bold text-gray-900 mb-6",children:["Ready to Start"," ",r.jsx("span",{className:"bg-gradient-to-r from-indigo-600 to-purple-600 bg-clip-text text-transparent",children:"Accepting Payments?"})]}),r.jsx("p",{className:"text-xl text-gray-600 mb-10 max-w-2xl mx-auto",children:"Create your merchant account today. No setup fees, no monthly minimums. Start accepting payments in minutes."}),r.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[r.jsx(Pe.div,{whileHover:{scale:1.05},whileTap:{scale:.95},children:r.jsx(xt,{to:"/register",children:r.jsxs(Oe,{size:"lg",className:"bg-gradient-to-r from-indigo-600 to-purple-600 hover:from-indigo-700 hover:to-purple-700 shadow-xl shadow-indigo-500/30 text-lg px-10 py-6",children:["Create Free Account",r.jsx(os,{className:"ml-2 w-5 h-5"})]})})}),r.jsx(Pe.div,{whileHover:{scale:1.05},whileTap:{scale:.95},children:r.jsx(xt,{to:"/login",children:r.jsx(Oe,{variant:"outline",size:"lg",className:"border-2 border-gray-300 text-gray-700 hover:border-indigo-300 hover:text-indigo-600 text-lg px-10 py-6",children:"Sign In"})})})]})]})]}),r.jsx("footer",{className:"bg-gray-900 text-gray-400 py-16 px-4 sm:px-6 lg:px-8",children:r.jsxs("div",{className:"max-w-7xl mx-auto",children:[r.jsxs(Pe.div,{initial:"hidden",whileInView:"visible",viewport:{once:!0},variants:Jh,className:"grid grid-cols-2 md:grid-cols-5 gap-8 mb-12",children:[r.jsxs(Pe.div,{variants:jc,className:"col-span-2",children:[r.jsx("div",{className:"flex items-center mb-4",children:r.jsx("span",{className:"text-3xl font-bold bg-gradient-to-r from-indigo-400 to-purple-400 bg-clip-text text-transparent",children:"Peeap"})}),r.jsx("p",{className:"text-gray-500 mb-6 leading-relaxed",children:"Sierra Leone's leading payment gateway. Accept Mobile Money, Cards, and QR payments with ease."}),r.jsxs("div",{className:"flex items-center text-gray-500",children:[r.jsx(Oi,{className:"w-5 h-5 mr-2"}),r.jsx("span",{children:"Freetown, Sierra Leone"})]})]}),[{title:"Product",links:[{name:"Features",href:"#features"},{name:"Pricing",href:"#pricing"},{name:"Calculator",href:"#calculator"},{name:"API Docs",href:"/docs/SDK_INTEGRATION.md"}]},{title:"Company",links:[{name:"About Us",href:"#"},{name:"Careers",href:"#"},{name:"Blog",href:"#"},{name:"Contact",href:"#"}]},{title:"Legal",links:[{name:"Privacy Policy",href:"#"},{name:"Terms of Service",href:"#"},{name:"Security",href:"#"}]}].map((A,P)=>r.jsxs(Pe.div,{variants:jc,children:[r.jsx("h4",{className:"font-semibold text-white mb-4",children:A.title}),r.jsx("ul",{className:"space-y-3",children:A.links.map((M,R)=>r.jsx("li",{children:r.jsx("a",{href:M.href,className:"text-gray-500 hover:text-indigo-400 transition-colors",children:M.name})},R))})]},P))]}),r.jsxs(Pe.div,{initial:{opacity:0},whileInView:{opacity:1},viewport:{once:!0},className:"pt-8 border-t border-gray-800 flex flex-col md:flex-row justify-between items-center",children:[r.jsx("p",{className:"text-gray-500",children:" 2025 Peeap. All rights reserved."}),r.jsxs("div",{className:"mt-4 md:mt-0 flex items-center space-x-2 text-gray-500",children:[r.jsx(rr,{className:"w-5 h-5 text-green-500"}),r.jsx("span",{children:"PCI DSS Compliant"})]})]})]})})]})}var sb=e=>e.type==="checkbox",L0=e=>e instanceof Date,Ci=e=>e==null;const Oz=e=>typeof e=="object";var Ta=e=>!Ci(e)&&!Array.isArray(e)&&Oz(e)&&!L0(e),Qhe=e=>Ta(e)&&e.target?sb(e.target)?e.target.checked:e.target.value:e,Zhe=e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e,Jhe=(e,t)=>e.has(Zhe(t)),eme=e=>{const t=e.constructor&&e.constructor.prototype;return Ta(t)&&t.hasOwnProperty("isPrototypeOf")},sA=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function Ja(e){let t;const s=Array.isArray(e),a=typeof FileList<"u"?e instanceof FileList:!1;if(e instanceof Date)t=new Date(e);else if(!(sA&&(e instanceof Blob||a))&&(s||Ta(e)))if(t=s?[]:Object.create(Object.getPrototypeOf(e)),!s&&!eme(e))t=e;else for(const n in e)e.hasOwnProperty(n)&&(t[n]=Ja(e[n]));else return e;return t}var t2=e=>/^\w*$/.test(e),xa=e=>e===void 0,aA=e=>Array.isArray(e)?e.filter(Boolean):[],nA=e=>aA(e.replace(/["|']|\]/g,"").split(/\.|\[/)),St=(e,t,s)=>{if(!t||!Ta(e))return s;const a=(t2(t)?[t]:nA(t)).reduce((n,i)=>Ci(n)?n:n[i],e);return xa(a)||a===e?xa(e[t])?s:e[t]:a},ql=e=>typeof e=="boolean",xs=(e,t,s)=>{let a=-1;const n=t2(t)?[t]:nA(t),i=n.length,o=i-1;for(;++a<i;){const l=n[a];let c=s;if(a!==o){const d=e[l];c=Ta(d)||Array.isArray(d)?d:isNaN(+n[a+1])?{}:[]}if(l==="__proto__"||l==="constructor"||l==="prototype")return;e[l]=c,e=e[l]}};const BR={BLUR:"blur",FOCUS_OUT:"focusout"},yl={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},Nc={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},tme=ns.createContext(null);tme.displayName="HookFormContext";var rme=(e,t,s,a=!0)=>{const n={defaultValues:t._defaultValues};for(const i in e)Object.defineProperty(n,i,{get:()=>{const o=i;return t._proxyFormState[o]!==yl.all&&(t._proxyFormState[o]=!a||yl.all),e[o]}});return n};const sme=typeof window<"u"?ns.useLayoutEffect:ns.useEffect;var Zi=e=>typeof e=="string",ame=(e,t,s,a,n)=>Zi(e)?(a&&t.watch.add(e),St(s,e,n)):Array.isArray(e)?e.map(i=>(a&&t.watch.add(i),St(s,i))):(a&&(t.watchAll=!0),s),c3=e=>Ci(e)||!Oz(e);function Zd(e,t,s=new WeakSet){if(c3(e)||c3(t))return Object.is(e,t);if(L0(e)&&L0(t))return e.getTime()===t.getTime();const a=Object.keys(e),n=Object.keys(t);if(a.length!==n.length)return!1;if(s.has(e)||s.has(t))return!0;s.add(e),s.add(t);for(const i of a){const o=e[i];if(!n.includes(i))return!1;if(i!=="ref"){const l=t[i];if(L0(o)&&L0(l)||Ta(o)&&Ta(l)||Array.isArray(o)&&Array.isArray(l)?!Zd(o,l,s):!Object.is(o,l))return!1}}return!0}var Rz=(e,t,s,a,n)=>t?{...s[e],types:{...s[e]&&s[e].types?s[e].types:{},[a]:n||!0}}:{},dp=e=>Array.isArray(e)?e:[e],$R=()=>{let e=[];return{get observers(){return e},next:n=>{for(const i of e)i.next&&i.next(n)},subscribe:n=>(e.push(n),{unsubscribe:()=>{e=e.filter(i=>i!==n)}}),unsubscribe:()=>{e=[]}}};function Mz(e,t){const s={};for(const a in e)if(e.hasOwnProperty(a)){const n=e[a],i=t[a];if(n&&Ta(n)&&i){const o=Mz(n,i);Ta(o)&&(s[a]=o)}else e[a]&&(s[a]=i)}return s}var Zn=e=>Ta(e)&&!Object.keys(e).length,iA=e=>e.type==="file",bl=e=>typeof e=="function",Kw=e=>{if(!sA)return!1;const t=e?e.ownerDocument:0;return e instanceof(t&&t.defaultView?t.defaultView.HTMLElement:HTMLElement)},Lz=e=>e.type==="select-multiple",oA=e=>e.type==="radio",nme=e=>oA(e)||sb(e),mS=e=>Kw(e)&&e.isConnected;function ime(e,t){const s=t.slice(0,-1).length;let a=0;for(;a<s;)e=xa(e)?a++:e[t[a++]];return e}function ome(e){for(const t in e)if(e.hasOwnProperty(t)&&!xa(e[t]))return!1;return!0}function ja(e,t){const s=Array.isArray(t)?t:t2(t)?[t]:nA(t),a=s.length===1?e:ime(e,s),n=s.length-1,i=s[n];return a&&delete a[i],n!==0&&(Ta(a)&&Zn(a)||Array.isArray(a)&&ome(a))&&ja(e,s.slice(0,-1)),e}var lme=e=>{for(const t in e)if(bl(e[t]))return!0;return!1};function Fz(e){return Array.isArray(e)||Ta(e)&&!lme(e)}function d3(e,t={}){for(const s in e){const a=e[s];Fz(a)?(t[s]=Array.isArray(a)?[]:{},d3(a,t[s])):xa(a)||(t[s]=!0)}return t}function vm(e,t,s){s||(s=d3(t));for(const a in e){const n=e[a];if(Fz(n))xa(t)||c3(s[a])?s[a]=d3(n,Array.isArray(n)?[]:{}):vm(n,Ci(t)?{}:t[a],s[a]);else{const i=t[a];s[a]=!Zd(n,i)}}return s}const UR={value:!1,isValid:!1},VR={value:!0,isValid:!0};var Bz=e=>{if(Array.isArray(e)){if(e.length>1){const t=e.filter(s=>s&&s.checked&&!s.disabled).map(s=>s.value);return{value:t,isValid:!!t.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!xa(e[0].attributes.value)?xa(e[0].value)||e[0].value===""?VR:{value:e[0].value,isValid:!0}:VR:UR}return UR},$z=(e,{valueAsNumber:t,valueAsDate:s,setValueAs:a})=>xa(e)?e:t?e===""?NaN:e&&+e:s&&Zi(e)?new Date(e):a?a(e):e;const WR={isValid:!1,value:null};var Uz=e=>Array.isArray(e)?e.reduce((t,s)=>s&&s.checked&&!s.disabled?{isValid:!0,value:s.value}:t,WR):WR;function zR(e){const t=e.ref;return iA(t)?t.files:oA(t)?Uz(e.refs).value:Lz(t)?[...t.selectedOptions].map(({value:s})=>s):sb(t)?Bz(e.refs).value:$z(xa(t.value)?e.ref.value:t.value,e)}var cme=(e,t,s,a)=>{const n={};for(const i of e){const o=St(t,i);o&&xs(n,i,o._f)}return{criteriaMode:s,names:[...e],fields:n,shouldUseNativeValidation:a}},Gw=e=>e instanceof RegExp,lg=e=>xa(e)?e:Gw(e)?e.source:Ta(e)?Gw(e.value)?e.value.source:e.value:e,qR=e=>({isOnSubmit:!e||e===yl.onSubmit,isOnBlur:e===yl.onBlur,isOnChange:e===yl.onChange,isOnAll:e===yl.all,isOnTouch:e===yl.onTouched});const HR="AsyncFunction";var dme=e=>!!e&&!!e.validate&&!!(bl(e.validate)&&e.validate.constructor.name===HR||Ta(e.validate)&&Object.values(e.validate).find(t=>t.constructor.name===HR)),ume=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate),KR=(e,t,s)=>!s&&(t.watchAll||t.watch.has(e)||[...t.watch].some(a=>e.startsWith(a)&&/^\.\w+/.test(e.slice(a.length))));const up=(e,t,s,a)=>{for(const n of s||Object.keys(e)){const i=St(e,n);if(i){const{_f:o,...l}=i;if(o){if(o.refs&&o.refs[0]&&t(o.refs[0],n)&&!a)return!0;if(o.ref&&t(o.ref,o.name)&&!a)return!0;if(up(l,t))break}else if(Ta(l)&&up(l,t))break}}};function GR(e,t,s){const a=St(e,s);if(a||t2(s))return{error:a,name:s};const n=s.split(".");for(;n.length;){const i=n.join("."),o=St(t,i),l=St(e,i);if(o&&!Array.isArray(o)&&s!==i)return{name:s};if(l&&l.type)return{name:i,error:l};if(l&&l.root&&l.root.type)return{name:`${i}.root`,error:l.root};n.pop()}return{name:s}}var hme=(e,t,s,a)=>{s(e);const{name:n,...i}=e;return Zn(i)||Object.keys(i).length>=Object.keys(t).length||Object.keys(i).find(o=>t[o]===(!a||yl.all))},mme=(e,t,s)=>!e||!t||e===t||dp(e).some(a=>a&&(s?a===t:a.startsWith(t)||t.startsWith(a))),fme=(e,t,s,a,n)=>n.isOnAll?!1:!s&&n.isOnTouch?!(t||e):(s?a.isOnBlur:n.isOnBlur)?!e:(s?a.isOnChange:n.isOnChange)?e:!0,xme=(e,t)=>!aA(St(e,t)).length&&ja(e,t),gme=(e,t,s)=>{const a=dp(St(e,s));return xs(a,"root",t[s]),xs(e,s,a),e};function YR(e,t,s="validate"){if(Zi(e)||Array.isArray(e)&&e.every(Zi)||ql(e)&&!e)return{type:s,message:Zi(e)?e:"",ref:t}}var em=e=>Ta(e)&&!Gw(e)?e:{value:e,message:""},XR=async(e,t,s,a,n,i)=>{const{ref:o,refs:l,required:c,maxLength:d,minLength:h,min:f,max:x,pattern:y,validate:v,name:w,valueAsNumber:N,mount:k}=e._f,C=St(s,w);if(!k||t.has(w))return{};const E=l?l[0]:o,_=I=>{n&&E.reportValidity&&(E.setCustomValidity(ql(I)?"":I||""),E.reportValidity())},T={},A=oA(o),P=sb(o),M=A||P,R=(N||iA(o))&&xa(o.value)&&xa(C)||Kw(o)&&o.value===""||C===""||Array.isArray(C)&&!C.length,$=Rz.bind(null,w,a,T),W=(I,B,O,F=Nc.maxLength,q=Nc.minLength)=>{const H=I?B:O;T[w]={type:I?F:q,message:H,ref:o,...$(I?F:q,H)}};if(i?!Array.isArray(C)||!C.length:c&&(!M&&(R||Ci(C))||ql(C)&&!C||P&&!Bz(l).isValid||A&&!Uz(l).isValid)){const{value:I,message:B}=Zi(c)?{value:!!c,message:c}:em(c);if(I&&(T[w]={type:Nc.required,message:B,ref:E,...$(Nc.required,B)},!a))return _(B),T}if(!R&&(!Ci(f)||!Ci(x))){let I,B;const O=em(x),F=em(f);if(!Ci(C)&&!isNaN(C)){const q=o.valueAsNumber||C&&+C;Ci(O.value)||(I=q>O.value),Ci(F.value)||(B=q<F.value)}else{const q=o.valueAsDate||new Date(C),H=z=>new Date(new Date().toDateString()+" "+z),K=o.type=="time",V=o.type=="week";Zi(O.value)&&C&&(I=K?H(C)>H(O.value):V?C>O.value:q>new Date(O.value)),Zi(F.value)&&C&&(B=K?H(C)<H(F.value):V?C<F.value:q<new Date(F.value))}if((I||B)&&(W(!!I,O.message,F.message,Nc.max,Nc.min),!a))return _(T[w].message),T}if((d||h)&&!R&&(Zi(C)||i&&Array.isArray(C))){const I=em(d),B=em(h),O=!Ci(I.value)&&C.length>+I.value,F=!Ci(B.value)&&C.length<+B.value;if((O||F)&&(W(O,I.message,B.message),!a))return _(T[w].message),T}if(y&&!R&&Zi(C)){const{value:I,message:B}=em(y);if(Gw(I)&&!C.match(I)&&(T[w]={type:Nc.pattern,message:B,ref:o,...$(Nc.pattern,B)},!a))return _(B),T}if(v){if(bl(v)){const I=await v(C,s),B=YR(I,E);if(B&&(T[w]={...B,...$(Nc.validate,B.message)},!a))return _(B.message),T}else if(Ta(v)){let I={};for(const B in v){if(!Zn(I)&&!a)break;const O=YR(await v[B](C,s),E,B);O&&(I={...O,...$(B,O.message)},_(O.message),a&&(T[w]=I))}if(!Zn(I)&&(T[w]={ref:E,...I},!a))return T}}return _(!0),T};const pme={mode:yl.onSubmit,reValidateMode:yl.onChange,shouldFocusError:!0};function yme(e={}){let t={...pme,...e},s={submitCount:0,isDirty:!1,isReady:!1,isLoading:bl(t.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1},a={},n=Ta(t.defaultValues)||Ta(t.values)?Ja(t.defaultValues||t.values)||{}:{},i=t.shouldUnregister?{}:Ja(n),o={action:!1,mount:!1,watch:!1},l={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},c,d=0;const h={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let f={...h};const x={array:$R(),state:$R()},y=t.criteriaMode===yl.all,v=le=>me=>{clearTimeout(d),d=setTimeout(le,me)},w=async le=>{if(!t.disabled&&(h.isValid||f.isValid||le)){const me=t.resolver?Zn((await P()).errors):await R(a,!0);me!==s.isValid&&x.state.next({isValid:me})}},N=(le,me)=>{!t.disabled&&(h.isValidating||h.validatingFields||f.isValidating||f.validatingFields)&&((le||Array.from(l.mount)).forEach(ve=>{ve&&(me?xs(s.validatingFields,ve,me):ja(s.validatingFields,ve))}),x.state.next({validatingFields:s.validatingFields,isValidating:!Zn(s.validatingFields)}))},k=(le,me=[],ve,Ze,$e=!0,Ne=!0)=>{if(Ze&&ve&&!t.disabled){if(o.action=!0,Ne&&Array.isArray(St(a,le))){const He=ve(St(a,le),Ze.argA,Ze.argB);$e&&xs(a,le,He)}if(Ne&&Array.isArray(St(s.errors,le))){const He=ve(St(s.errors,le),Ze.argA,Ze.argB);$e&&xs(s.errors,le,He),xme(s.errors,le)}if((h.touchedFields||f.touchedFields)&&Ne&&Array.isArray(St(s.touchedFields,le))){const He=ve(St(s.touchedFields,le),Ze.argA,Ze.argB);$e&&xs(s.touchedFields,le,He)}(h.dirtyFields||f.dirtyFields)&&(s.dirtyFields=vm(n,i)),x.state.next({name:le,isDirty:W(le,me),dirtyFields:s.dirtyFields,errors:s.errors,isValid:s.isValid})}else xs(i,le,me)},C=(le,me)=>{xs(s.errors,le,me),x.state.next({errors:s.errors})},E=le=>{s.errors=le,x.state.next({errors:s.errors,isValid:!1})},_=(le,me,ve,Ze)=>{const $e=St(a,le);if($e){const Ne=St(i,le,xa(ve)?St(n,le):ve);xa(Ne)||Ze&&Ze.defaultChecked||me?xs(i,le,me?Ne:zR($e._f)):O(le,Ne),o.mount&&!o.action&&w()}},T=(le,me,ve,Ze,$e)=>{let Ne=!1,He=!1;const gt={name:le};if(!t.disabled){if(!ve||Ze){(h.isDirty||f.isDirty)&&(He=s.isDirty,s.isDirty=gt.isDirty=W(),Ne=He!==gt.isDirty);const yt=Zd(St(n,le),me);He=!!St(s.dirtyFields,le),yt?ja(s.dirtyFields,le):xs(s.dirtyFields,le,!0),gt.dirtyFields=s.dirtyFields,Ne=Ne||(h.dirtyFields||f.dirtyFields)&&He!==!yt}if(ve){const yt=St(s.touchedFields,le);yt||(xs(s.touchedFields,le,ve),gt.touchedFields=s.touchedFields,Ne=Ne||(h.touchedFields||f.touchedFields)&&yt!==ve)}Ne&&$e&&x.state.next(gt)}return Ne?gt:{}},A=(le,me,ve,Ze)=>{const $e=St(s.errors,le),Ne=(h.isValid||f.isValid)&&ql(me)&&s.isValid!==me;if(t.delayError&&ve?(c=v(()=>C(le,ve)),c(t.delayError)):(clearTimeout(d),c=null,ve?xs(s.errors,le,ve):ja(s.errors,le)),(ve?!Zd($e,ve):$e)||!Zn(Ze)||Ne){const He={...Ze,...Ne&&ql(me)?{isValid:me}:{},errors:s.errors,name:le};s={...s,...He},x.state.next(He)}},P=async le=>{N(le,!0);const me=await t.resolver(i,t.context,cme(le||l.mount,a,t.criteriaMode,t.shouldUseNativeValidation));return N(le),me},M=async le=>{const{errors:me}=await P(le);if(le)for(const ve of le){const Ze=St(me,ve);Ze?xs(s.errors,ve,Ze):ja(s.errors,ve)}else s.errors=me;return me},R=async(le,me,ve={valid:!0})=>{for(const Ze in le){const $e=le[Ze];if($e){const{_f:Ne,...He}=$e;if(Ne){const gt=l.array.has(Ne.name),yt=$e._f&&dme($e._f);yt&&h.validatingFields&&N([Ne.name],!0);const Vt=await XR($e,l.disabled,i,y,t.shouldUseNativeValidation&&!me,gt);if(yt&&h.validatingFields&&N([Ne.name]),Vt[Ne.name]&&(ve.valid=!1,me))break;!me&&(St(Vt,Ne.name)?gt?gme(s.errors,Vt,Ne.name):xs(s.errors,Ne.name,Vt[Ne.name]):ja(s.errors,Ne.name))}!Zn(He)&&await R(He,me,ve)}}return ve.valid},$=()=>{for(const le of l.unMount){const me=St(a,le);me&&(me._f.refs?me._f.refs.every(ve=>!mS(ve)):!mS(me._f.ref))&&_e(le)}l.unMount=new Set},W=(le,me)=>!t.disabled&&(le&&me&&xs(i,le,me),!Zd(z(),n)),I=(le,me,ve)=>ame(le,l,{...o.mount?i:xa(me)?n:Zi(le)?{[le]:me}:me},ve,me),B=le=>aA(St(o.mount?i:n,le,t.shouldUnregister?St(n,le,[]):[])),O=(le,me,ve={})=>{const Ze=St(a,le);let $e=me;if(Ze){const Ne=Ze._f;Ne&&(!Ne.disabled&&xs(i,le,$z(me,Ne)),$e=Kw(Ne.ref)&&Ci(me)?"":me,Lz(Ne.ref)?[...Ne.ref.options].forEach(He=>He.selected=$e.includes(He.value)):Ne.refs?sb(Ne.ref)?Ne.refs.forEach(He=>{(!He.defaultChecked||!He.disabled)&&(Array.isArray($e)?He.checked=!!$e.find(gt=>gt===He.value):He.checked=$e===He.value||!!$e)}):Ne.refs.forEach(He=>He.checked=He.value===$e):iA(Ne.ref)?Ne.ref.value="":(Ne.ref.value=$e,Ne.ref.type||x.state.next({name:le,values:Ja(i)})))}(ve.shouldDirty||ve.shouldTouch)&&T(le,$e,ve.shouldTouch,ve.shouldDirty,!0),ve.shouldValidate&&V(le)},F=(le,me,ve)=>{for(const Ze in me){if(!me.hasOwnProperty(Ze))return;const $e=me[Ze],Ne=le+"."+Ze,He=St(a,Ne);(l.array.has(le)||Ta($e)||He&&!He._f)&&!L0($e)?F(Ne,$e,ve):O(Ne,$e,ve)}},q=(le,me,ve={})=>{const Ze=St(a,le),$e=l.array.has(le),Ne=Ja(me);xs(i,le,Ne),$e?(x.array.next({name:le,values:Ja(i)}),(h.isDirty||h.dirtyFields||f.isDirty||f.dirtyFields)&&ve.shouldDirty&&x.state.next({name:le,dirtyFields:vm(n,i),isDirty:W(le,Ne)})):Ze&&!Ze._f&&!Ci(Ne)?F(le,Ne,ve):O(le,Ne,ve),KR(le,l)&&x.state.next({...s,name:le}),x.state.next({name:o.mount?le:void 0,values:Ja(i)})},H=async le=>{o.mount=!0;const me=le.target;let ve=me.name,Ze=!0;const $e=St(a,ve),Ne=yt=>{Ze=Number.isNaN(yt)||L0(yt)&&isNaN(yt.getTime())||Zd(yt,St(i,ve,yt))},He=qR(t.mode),gt=qR(t.reValidateMode);if($e){let yt,Vt;const $r=me.type?zR($e._f):Qhe(le),De=le.type===BR.BLUR||le.type===BR.FOCUS_OUT,Xe=!ume($e._f)&&!t.resolver&&!St(s.errors,ve)&&!$e._f.deps||fme(De,St(s.touchedFields,ve),s.isSubmitted,gt,He),st=KR(ve,l,De);xs(i,ve,$r),De?(!me||!me.readOnly)&&($e._f.onBlur&&$e._f.onBlur(le),c&&c(0)):$e._f.onChange&&$e._f.onChange(le);const Ce=T(ve,$r,De),ct=!Zn(Ce)||st;if(!De&&x.state.next({name:ve,type:le.type,values:Ja(i)}),Xe)return(h.isValid||f.isValid)&&(t.mode==="onBlur"?De&&w():De||w()),ct&&x.state.next({name:ve,...st?{}:Ce});if(!De&&st&&x.state.next({...s}),t.resolver){const{errors:ht}=await P([ve]);if(Ne($r),Ze){const Lt=GR(s.errors,a,ve),Ur=GR(ht,a,Lt.name||ve);yt=Ur.error,ve=Ur.name,Vt=Zn(ht)}}else N([ve],!0),yt=(await XR($e,l.disabled,i,y,t.shouldUseNativeValidation))[ve],N([ve]),Ne($r),Ze&&(yt?Vt=!1:(h.isValid||f.isValid)&&(Vt=await R(a,!0)));Ze&&($e._f.deps&&(!Array.isArray($e._f.deps)||$e._f.deps.length>0)&&V($e._f.deps),A(ve,Vt,yt,Ce))}},K=(le,me)=>{if(St(s.errors,me)&&le.focus)return le.focus(),1},V=async(le,me={})=>{let ve,Ze;const $e=dp(le);if(t.resolver){const Ne=await M(xa(le)?le:$e);ve=Zn(Ne),Ze=le?!$e.some(He=>St(Ne,He)):ve}else le?(Ze=(await Promise.all($e.map(async Ne=>{const He=St(a,Ne);return await R(He&&He._f?{[Ne]:He}:He)}))).every(Boolean),!(!Ze&&!s.isValid)&&w()):Ze=ve=await R(a);return x.state.next({...!Zi(le)||(h.isValid||f.isValid)&&ve!==s.isValid?{}:{name:le},...t.resolver||!le?{isValid:ve}:{},errors:s.errors}),me.shouldFocus&&!Ze&&up(a,K,le?$e:l.mount),Ze},z=(le,me)=>{let ve={...o.mount?i:n};return me&&(ve=Mz(me.dirtyFields?s.dirtyFields:s.touchedFields,ve)),xa(le)?ve:Zi(le)?St(ve,le):le.map(Ze=>St(ve,Ze))},G=(le,me)=>({invalid:!!St((me||s).errors,le),isDirty:!!St((me||s).dirtyFields,le),error:St((me||s).errors,le),isValidating:!!St(s.validatingFields,le),isTouched:!!St((me||s).touchedFields,le)}),te=le=>{le&&dp(le).forEach(me=>ja(s.errors,me)),x.state.next({errors:le?s.errors:{}})},he=(le,me,ve)=>{const Ze=(St(a,le,{_f:{}})._f||{}).ref,$e=St(s.errors,le)||{},{ref:Ne,message:He,type:gt,...yt}=$e;xs(s.errors,le,{...yt,...me,ref:Ze}),x.state.next({name:le,errors:s.errors,isValid:!1}),ve&&ve.shouldFocus&&Ze&&Ze.focus&&Ze.focus()},ne=(le,me)=>bl(le)?x.state.subscribe({next:ve=>"values"in ve&&le(I(void 0,me),ve)}):I(le,me,!0),ce=le=>x.state.subscribe({next:me=>{mme(le.name,me.name,le.exact)&&hme(me,le.formState||h,Fe,le.reRenderRoot)&&le.callback({values:{...i},...s,...me,defaultValues:n})}}).unsubscribe,xe=le=>(o.mount=!0,f={...f,...le.formState},ce({...le,formState:f})),_e=(le,me={})=>{for(const ve of le?dp(le):l.mount)l.mount.delete(ve),l.array.delete(ve),me.keepValue||(ja(a,ve),ja(i,ve)),!me.keepError&&ja(s.errors,ve),!me.keepDirty&&ja(s.dirtyFields,ve),!me.keepTouched&&ja(s.touchedFields,ve),!me.keepIsValidating&&ja(s.validatingFields,ve),!t.shouldUnregister&&!me.keepDefaultValue&&ja(n,ve);x.state.next({values:Ja(i)}),x.state.next({...s,...me.keepDirty?{isDirty:W()}:{}}),!me.keepIsValid&&w()},oe=({disabled:le,name:me})=>{(ql(le)&&o.mount||le||l.disabled.has(me))&&(le?l.disabled.add(me):l.disabled.delete(me))},ie=(le,me={})=>{let ve=St(a,le);const Ze=ql(me.disabled)||ql(t.disabled);return xs(a,le,{...ve||{},_f:{...ve&&ve._f?ve._f:{ref:{name:le}},name:le,mount:!0,...me}}),l.mount.add(le),ve?oe({disabled:ql(me.disabled)?me.disabled:t.disabled,name:le}):_(le,!0,me.value),{...Ze?{disabled:me.disabled||t.disabled}:{},...t.progressive?{required:!!me.required,min:lg(me.min),max:lg(me.max),minLength:lg(me.minLength),maxLength:lg(me.maxLength),pattern:lg(me.pattern)}:{},name:le,onChange:H,onBlur:H,ref:$e=>{if($e){ie(le,me),ve=St(a,le);const Ne=xa($e.value)&&$e.querySelectorAll&&$e.querySelectorAll("input,select,textarea")[0]||$e,He=nme(Ne),gt=ve._f.refs||[];if(He?gt.find(yt=>yt===Ne):Ne===ve._f.ref)return;xs(a,le,{_f:{...ve._f,...He?{refs:[...gt.filter(mS),Ne,...Array.isArray(St(n,le))?[{}]:[]],ref:{type:Ne.type,name:le}}:{ref:Ne}}}),_(le,!1,void 0,Ne)}else ve=St(a,le,{}),ve._f&&(ve._f.mount=!1),(t.shouldUnregister||me.shouldUnregister)&&!(Jhe(l.array,le)&&o.action)&&l.unMount.add(le)}}},ge=()=>t.shouldFocusError&&up(a,K,l.mount),Z=le=>{ql(le)&&(x.state.next({disabled:le}),up(a,(me,ve)=>{const Ze=St(a,ve);Ze&&(me.disabled=Ze._f.disabled||le,Array.isArray(Ze._f.refs)&&Ze._f.refs.forEach($e=>{$e.disabled=Ze._f.disabled||le}))},0,!1))},Q=(le,me)=>async ve=>{let Ze;ve&&(ve.preventDefault&&ve.preventDefault(),ve.persist&&ve.persist());let $e=Ja(i);if(x.state.next({isSubmitting:!0}),t.resolver){const{errors:Ne,values:He}=await P();s.errors=Ne,$e=Ja(He)}else await R(a);if(l.disabled.size)for(const Ne of l.disabled)ja($e,Ne);if(ja(s.errors,"root"),Zn(s.errors)){x.state.next({errors:{}});try{await le($e,ve)}catch(Ne){Ze=Ne}}else me&&await me({...s.errors},ve),ge(),setTimeout(ge);if(x.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:Zn(s.errors)&&!Ze,submitCount:s.submitCount+1,errors:s.errors}),Ze)throw Ze},re=(le,me={})=>{St(a,le)&&(xa(me.defaultValue)?q(le,Ja(St(n,le))):(q(le,me.defaultValue),xs(n,le,Ja(me.defaultValue))),me.keepTouched||ja(s.touchedFields,le),me.keepDirty||(ja(s.dirtyFields,le),s.isDirty=me.defaultValue?W(le,Ja(St(n,le))):W()),me.keepError||(ja(s.errors,le),h.isValid&&w()),x.state.next({...s}))},pe=(le,me={})=>{const ve=le?Ja(le):n,Ze=Ja(ve),$e=Zn(le),Ne=$e?n:Ze;if(me.keepDefaultValues||(n=ve),!me.keepValues){if(me.keepDirtyValues){const He=new Set([...l.mount,...Object.keys(vm(n,i))]);for(const gt of Array.from(He))St(s.dirtyFields,gt)?xs(Ne,gt,St(i,gt)):q(gt,St(Ne,gt))}else{if(sA&&xa(le))for(const He of l.mount){const gt=St(a,He);if(gt&&gt._f){const yt=Array.isArray(gt._f.refs)?gt._f.refs[0]:gt._f.ref;if(Kw(yt)){const Vt=yt.closest("form");if(Vt){Vt.reset();break}}}}if(me.keepFieldsRef)for(const He of l.mount)q(He,St(Ne,He));else a={}}i=t.shouldUnregister?me.keepDefaultValues?Ja(n):{}:Ja(Ne),x.array.next({values:{...Ne}}),x.state.next({values:{...Ne}})}l={mount:me.keepDirtyValues?l.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},o.mount=!h.isValid||!!me.keepIsValid||!!me.keepDirtyValues||!t.shouldUnregister&&!Zn(Ne),o.watch=!!t.shouldUnregister,x.state.next({submitCount:me.keepSubmitCount?s.submitCount:0,isDirty:$e?!1:me.keepDirty?s.isDirty:!!(me.keepDefaultValues&&!Zd(le,n)),isSubmitted:me.keepIsSubmitted?s.isSubmitted:!1,dirtyFields:$e?{}:me.keepDirtyValues?me.keepDefaultValues&&i?vm(n,i):s.dirtyFields:me.keepDefaultValues&&le?vm(n,le):me.keepDirty?s.dirtyFields:{},touchedFields:me.keepTouched?s.touchedFields:{},errors:me.keepErrors?s.errors:{},isSubmitSuccessful:me.keepIsSubmitSuccessful?s.isSubmitSuccessful:!1,isSubmitting:!1,defaultValues:n})},Se=(le,me)=>pe(bl(le)?le(i):le,me),je=(le,me={})=>{const ve=St(a,le),Ze=ve&&ve._f;if(Ze){const $e=Ze.refs?Ze.refs[0]:Ze.ref;$e.focus&&($e.focus(),me.shouldSelect&&bl($e.select)&&$e.select())}},Fe=le=>{s={...s,...le}},Ve={control:{register:ie,unregister:_e,getFieldState:G,handleSubmit:Q,setError:he,_subscribe:ce,_runSchema:P,_focusError:ge,_getWatch:I,_getDirty:W,_setValid:w,_setFieldArray:k,_setDisabledField:oe,_setErrors:E,_getFieldArray:B,_reset:pe,_resetDefaultValues:()=>bl(t.defaultValues)&&t.defaultValues().then(le=>{Se(le,t.resetOptions),x.state.next({isLoading:!1})}),_removeUnmounted:$,_disableForm:Z,_subjects:x,_proxyFormState:h,get _fields(){return a},get _formValues(){return i},get _state(){return o},set _state(le){o=le},get _defaultValues(){return n},get _names(){return l},set _names(le){l=le},get _formState(){return s},get _options(){return t},set _options(le){t={...t,...le}}},subscribe:xe,trigger:V,register:ie,handleSubmit:Q,watch:ne,setValue:q,getValues:z,reset:Se,resetField:re,clearErrors:te,unregister:_e,setError:he,setFocus:je,getFieldState:G};return{...Ve,formControl:Ve}}function bme(e={}){const t=ns.useRef(void 0),s=ns.useRef(void 0),[a,n]=ns.useState({isDirty:!1,isValidating:!1,isLoading:bl(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1,isReady:!1,defaultValues:bl(e.defaultValues)?void 0:e.defaultValues});if(!t.current)if(e.formControl)t.current={...e.formControl,formState:a},e.defaultValues&&!bl(e.defaultValues)&&e.formControl.reset(e.defaultValues,e.resetOptions);else{const{formControl:o,...l}=yme(e);t.current={...l,formState:a}}const i=t.current.control;return i._options=e,sme(()=>{const o=i._subscribe({formState:i._proxyFormState,callback:()=>n({...i._formState}),reRenderRoot:!0});return n(l=>({...l,isReady:!0})),i._formState.isReady=!0,o},[i]),ns.useEffect(()=>i._disableForm(e.disabled),[i,e.disabled]),ns.useEffect(()=>{e.mode&&(i._options.mode=e.mode),e.reValidateMode&&(i._options.reValidateMode=e.reValidateMode)},[i,e.mode,e.reValidateMode]),ns.useEffect(()=>{e.errors&&(i._setErrors(e.errors),i._focusError())},[i,e.errors]),ns.useEffect(()=>{e.shouldUnregister&&i._subjects.state.next({values:i._getWatch()})},[i,e.shouldUnregister]),ns.useEffect(()=>{if(i._proxyFormState.isDirty){const o=i._getDirty();o!==a.isDirty&&i._subjects.state.next({isDirty:o})}},[i,a.isDirty]),ns.useEffect(()=>{var o;e.values&&!Zd(e.values,s.current)?(i._reset(e.values,{keepFieldsRef:!0,...i._options.resetOptions}),!((o=i._options.resetOptions)===null||o===void 0)&&o.keepIsValid||i._setValid(),s.current=e.values,n(l=>({...l}))):i._resetDefaultValues()},[i,e.values]),ns.useEffect(()=>{i._state.mount||(i._setValid(),i._state.mount=!0),i._state.watch&&(i._state.watch=!1,i._subjects.state.next({...i._formState})),i._removeUnmounted()}),t.current.formState=rme(a,i),t.current}const QR=(e,t,s)=>{if(e&&"reportValidity"in e){const a=St(s,t);e.setCustomValidity(a&&a.message||""),e.reportValidity()}},Vz=(e,t)=>{for(const s in t.fields){const a=t.fields[s];a&&a.ref&&"reportValidity"in a.ref?QR(a.ref,s,e):a.refs&&a.refs.forEach(n=>QR(n,s,e))}},vme=(e,t)=>{t.shouldUseNativeValidation&&Vz(e,t);const s={};for(const a in e){const n=St(t.fields,a),i=Object.assign(e[a]||{},{ref:n&&n.ref});if(wme(t.names||Object.keys(e),a)){const o=Object.assign({},St(s,a));xs(o,"root",i),xs(s,a,o)}else xs(s,a,i)}return s},wme=(e,t)=>e.some(s=>s.startsWith(t+"."));var jme=function(e,t){for(var s={};e.length;){var a=e[0],n=a.code,i=a.message,o=a.path.join(".");if(!s[o])if("unionErrors"in a){var l=a.unionErrors[0].errors[0];s[o]={message:l.message,type:l.code}}else s[o]={message:i,type:n};if("unionErrors"in a&&a.unionErrors.forEach(function(h){return h.errors.forEach(function(f){return e.push(f)})}),t){var c=s[o].types,d=c&&c[a.code];s[o]=Rz(o,t,s,n,d?[].concat(d,a.message):a.message)}e.shift()}return s},Nme=function(e,t,s){return s===void 0&&(s={}),function(a,n,i){try{return Promise.resolve(function(o,l){try{var c=Promise.resolve(e[s.mode==="sync"?"parse":"parseAsync"](a,t)).then(function(d){return i.shouldUseNativeValidation&&Vz({},i),{errors:{},values:s.raw?a:d}})}catch(d){return l(d)}return c&&c.then?c.then(void 0,l):c}(0,function(o){if(function(l){return Array.isArray(l==null?void 0:l.errors)}(o))return{values:{},errors:vme(jme(o.errors,!i.shouldUseNativeValidation&&i.criteriaMode==="all"),i)};throw o}))}catch(o){return Promise.reject(o)}}},Or;(function(e){e.assertEqual=n=>{};function t(n){}e.assertIs=t;function s(n){throw new Error}e.assertNever=s,e.arrayToEnum=n=>{const i={};for(const o of n)i[o]=o;return i},e.getValidEnumValues=n=>{const i=e.objectKeys(n).filter(l=>typeof n[n[l]]!="number"),o={};for(const l of i)o[l]=n[l];return e.objectValues(o)},e.objectValues=n=>e.objectKeys(n).map(function(i){return n[i]}),e.objectKeys=typeof Object.keys=="function"?n=>Object.keys(n):n=>{const i=[];for(const o in n)Object.prototype.hasOwnProperty.call(n,o)&&i.push(o);return i},e.find=(n,i)=>{for(const o of n)if(i(o))return o},e.isInteger=typeof Number.isInteger=="function"?n=>Number.isInteger(n):n=>typeof n=="number"&&Number.isFinite(n)&&Math.floor(n)===n;function a(n,i=" | "){return n.map(o=>typeof o=="string"?`'${o}'`:o).join(i)}e.joinValues=a,e.jsonStringifyReplacer=(n,i)=>typeof i=="bigint"?i.toString():i})(Or||(Or={}));var ZR;(function(e){e.mergeShapes=(t,s)=>({...t,...s})})(ZR||(ZR={}));const Pt=Or.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Hd=e=>{switch(typeof e){case"undefined":return Pt.undefined;case"string":return Pt.string;case"number":return Number.isNaN(e)?Pt.nan:Pt.number;case"boolean":return Pt.boolean;case"function":return Pt.function;case"bigint":return Pt.bigint;case"symbol":return Pt.symbol;case"object":return Array.isArray(e)?Pt.array:e===null?Pt.null:e.then&&typeof e.then=="function"&&e.catch&&typeof e.catch=="function"?Pt.promise:typeof Map<"u"&&e instanceof Map?Pt.map:typeof Set<"u"&&e instanceof Set?Pt.set:typeof Date<"u"&&e instanceof Date?Pt.date:Pt.object;default:return Pt.unknown}},it=Or.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class ad extends Error{get errors(){return this.issues}constructor(t){super(),this.issues=[],this.addIssue=a=>{this.issues=[...this.issues,a]},this.addIssues=(a=[])=>{this.issues=[...this.issues,...a]};const s=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,s):this.__proto__=s,this.name="ZodError",this.issues=t}format(t){const s=t||function(i){return i.message},a={_errors:[]},n=i=>{for(const o of i.issues)if(o.code==="invalid_union")o.unionErrors.map(n);else if(o.code==="invalid_return_type")n(o.returnTypeError);else if(o.code==="invalid_arguments")n(o.argumentsError);else if(o.path.length===0)a._errors.push(s(o));else{let l=a,c=0;for(;c<o.path.length;){const d=o.path[c];c===o.path.length-1?(l[d]=l[d]||{_errors:[]},l[d]._errors.push(s(o))):l[d]=l[d]||{_errors:[]},l=l[d],c++}}};return n(this),a}static assert(t){if(!(t instanceof ad))throw new Error(`Not a ZodError: ${t}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,Or.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(t=s=>s.message){const s={},a=[];for(const n of this.issues)if(n.path.length>0){const i=n.path[0];s[i]=s[i]||[],s[i].push(t(n))}else a.push(t(n));return{formErrors:a,fieldErrors:s}}get formErrors(){return this.flatten()}}ad.create=e=>new ad(e);const u3=(e,t)=>{let s;switch(e.code){case it.invalid_type:e.received===Pt.undefined?s="Required":s=`Expected ${e.expected}, received ${e.received}`;break;case it.invalid_literal:s=`Invalid literal value, expected ${JSON.stringify(e.expected,Or.jsonStringifyReplacer)}`;break;case it.unrecognized_keys:s=`Unrecognized key(s) in object: ${Or.joinValues(e.keys,", ")}`;break;case it.invalid_union:s="Invalid input";break;case it.invalid_union_discriminator:s=`Invalid discriminator value. Expected ${Or.joinValues(e.options)}`;break;case it.invalid_enum_value:s=`Invalid enum value. Expected ${Or.joinValues(e.options)}, received '${e.received}'`;break;case it.invalid_arguments:s="Invalid function arguments";break;case it.invalid_return_type:s="Invalid function return type";break;case it.invalid_date:s="Invalid date";break;case it.invalid_string:typeof e.validation=="object"?"includes"in e.validation?(s=`Invalid input: must include "${e.validation.includes}"`,typeof e.validation.position=="number"&&(s=`${s} at one or more positions greater than or equal to ${e.validation.position}`)):"startsWith"in e.validation?s=`Invalid input: must start with "${e.validation.startsWith}"`:"endsWith"in e.validation?s=`Invalid input: must end with "${e.validation.endsWith}"`:Or.assertNever(e.validation):e.validation!=="regex"?s=`Invalid ${e.validation}`:s="Invalid";break;case it.too_small:e.type==="array"?s=`Array must contain ${e.exact?"exactly":e.inclusive?"at least":"more than"} ${e.minimum} element(s)`:e.type==="string"?s=`String must contain ${e.exact?"exactly":e.inclusive?"at least":"over"} ${e.minimum} character(s)`:e.type==="number"?s=`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:e.type==="bigint"?s=`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:e.type==="date"?s=`Date must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(e.minimum))}`:s="Invalid input";break;case it.too_big:e.type==="array"?s=`Array must contain ${e.exact?"exactly":e.inclusive?"at most":"less than"} ${e.maximum} element(s)`:e.type==="string"?s=`String must contain ${e.exact?"exactly":e.inclusive?"at most":"under"} ${e.maximum} character(s)`:e.type==="number"?s=`Number must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:e.type==="bigint"?s=`BigInt must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:e.type==="date"?s=`Date must be ${e.exact?"exactly":e.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(e.maximum))}`:s="Invalid input";break;case it.custom:s="Invalid input";break;case it.invalid_intersection_types:s="Intersection results could not be merged";break;case it.not_multiple_of:s=`Number must be a multiple of ${e.multipleOf}`;break;case it.not_finite:s="Number must be finite";break;default:s=t.defaultError,Or.assertNever(e)}return{message:s}};let kme=u3;function Sme(){return kme}const Cme=e=>{const{data:t,path:s,errorMaps:a,issueData:n}=e,i=[...s,...n.path||[]],o={...n,path:i};if(n.message!==void 0)return{...n,path:i,message:n.message};let l="";const c=a.filter(d=>!!d).slice().reverse();for(const d of c)l=d(o,{data:t,defaultError:l}).message;return{...n,path:i,message:l}};function ft(e,t){const s=Sme(),a=Cme({issueData:t,data:e.data,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,s,s===u3?void 0:u3].filter(n=>!!n)});e.common.issues.push(a)}class uo{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(t,s){const a=[];for(const n of s){if(n.status==="aborted")return or;n.status==="dirty"&&t.dirty(),a.push(n.value)}return{status:t.value,value:a}}static async mergeObjectAsync(t,s){const a=[];for(const n of s){const i=await n.key,o=await n.value;a.push({key:i,value:o})}return uo.mergeObjectSync(t,a)}static mergeObjectSync(t,s){const a={};for(const n of s){const{key:i,value:o}=n;if(i.status==="aborted"||o.status==="aborted")return or;i.status==="dirty"&&t.dirty(),o.status==="dirty"&&t.dirty(),i.value!=="__proto__"&&(typeof o.value<"u"||n.alwaysSet)&&(a[i.value]=o.value)}return{status:t.value,value:a}}}const or=Object.freeze({status:"aborted"}),Bg=e=>({status:"dirty",value:e}),tl=e=>({status:"valid",value:e}),JR=e=>e.status==="aborted",eM=e=>e.status==="dirty",Mf=e=>e.status==="valid",Yw=e=>typeof Promise<"u"&&e instanceof Promise;var It;(function(e){e.errToObj=t=>typeof t=="string"?{message:t}:t||{},e.toString=t=>typeof t=="string"?t:t==null?void 0:t.message})(It||(It={}));class Ou{constructor(t,s,a,n){this._cachedPath=[],this.parent=t,this.data=s,this._path=a,this._key=n}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const tM=(e,t)=>{if(Mf(t))return{success:!0,data:t.value};if(!e.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const s=new ad(e.common.issues);return this._error=s,this._error}}};function vr(e){if(!e)return{};const{errorMap:t,invalid_type_error:s,required_error:a,description:n}=e;if(t&&(s||a))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return t?{errorMap:t,description:n}:{errorMap:(o,l)=>{const{message:c}=e;return o.code==="invalid_enum_value"?{message:c??l.defaultError}:typeof l.data>"u"?{message:c??a??l.defaultError}:o.code!=="invalid_type"?{message:l.defaultError}:{message:c??s??l.defaultError}},description:n}}class Dr{get description(){return this._def.description}_getType(t){return Hd(t.data)}_getOrReturnCtx(t,s){return s||{common:t.parent.common,data:t.data,parsedType:Hd(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}_processInputParams(t){return{status:new uo,ctx:{common:t.parent.common,data:t.data,parsedType:Hd(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}}_parseSync(t){const s=this._parse(t);if(Yw(s))throw new Error("Synchronous parse encountered promise.");return s}_parseAsync(t){const s=this._parse(t);return Promise.resolve(s)}parse(t,s){const a=this.safeParse(t,s);if(a.success)return a.data;throw a.error}safeParse(t,s){const a={common:{issues:[],async:(s==null?void 0:s.async)??!1,contextualErrorMap:s==null?void 0:s.errorMap},path:(s==null?void 0:s.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:Hd(t)},n=this._parseSync({data:t,path:a.path,parent:a});return tM(a,n)}"~validate"(t){var a,n;const s={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:Hd(t)};if(!this["~standard"].async)try{const i=this._parseSync({data:t,path:[],parent:s});return Mf(i)?{value:i.value}:{issues:s.common.issues}}catch(i){(n=(a=i==null?void 0:i.message)==null?void 0:a.toLowerCase())!=null&&n.includes("encountered")&&(this["~standard"].async=!0),s.common={issues:[],async:!0}}return this._parseAsync({data:t,path:[],parent:s}).then(i=>Mf(i)?{value:i.value}:{issues:s.common.issues})}async parseAsync(t,s){const a=await this.safeParseAsync(t,s);if(a.success)return a.data;throw a.error}async safeParseAsync(t,s){const a={common:{issues:[],contextualErrorMap:s==null?void 0:s.errorMap,async:!0},path:(s==null?void 0:s.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:Hd(t)},n=this._parse({data:t,path:a.path,parent:a}),i=await(Yw(n)?n:Promise.resolve(n));return tM(a,i)}refine(t,s){const a=n=>typeof s=="string"||typeof s>"u"?{message:s}:typeof s=="function"?s(n):s;return this._refinement((n,i)=>{const o=t(n),l=()=>i.addIssue({code:it.custom,...a(n)});return typeof Promise<"u"&&o instanceof Promise?o.then(c=>c?!0:(l(),!1)):o?!0:(l(),!1)})}refinement(t,s){return this._refinement((a,n)=>t(a)?!0:(n.addIssue(typeof s=="function"?s(a,n):s),!1))}_refinement(t){return new Ff({schema:this,typeName:lr.ZodEffects,effect:{type:"refinement",refinement:t}})}superRefine(t){return this._refinement(t)}constructor(t){this.spa=this.safeParseAsync,this._def=t,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:s=>this["~validate"](s)}}optional(){return Cu.create(this,this._def)}nullable(){return Bf.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return cc.create(this)}promise(){return Jw.create(this,this._def)}or(t){return Qw.create([this,t],this._def)}and(t){return Zw.create(this,t,this._def)}transform(t){return new Ff({...vr(this._def),schema:this,typeName:lr.ZodEffects,effect:{type:"transform",transform:t}})}default(t){const s=typeof t=="function"?t:()=>t;return new m3({...vr(this._def),innerType:this,defaultValue:s,typeName:lr.ZodDefault})}brand(){return new Yme({typeName:lr.ZodBranded,type:this,...vr(this._def)})}catch(t){const s=typeof t=="function"?t:()=>t;return new f3({...vr(this._def),innerType:this,catchValue:s,typeName:lr.ZodCatch})}describe(t){const s=this.constructor;return new s({...this._def,description:t})}pipe(t){return lA.create(this,t)}readonly(){return x3.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const _me=/^c[^\s-]{8,}$/i,Eme=/^[0-9a-z]+$/,Ame=/^[0-9A-HJKMNP-TV-Z]{26}$/i,Pme=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,Tme=/^[a-z0-9_-]{21}$/i,Ime=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,Dme=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,Ome=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,Rme="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let fS;const Mme=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,Lme=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,Fme=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,Bme=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,$me=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,Ume=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,Wz="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",Vme=new RegExp(`^${Wz}$`);function zz(e){let t="[0-5]\\d";e.precision?t=`${t}\\.\\d{${e.precision}}`:e.precision==null&&(t=`${t}(\\.\\d+)?`);const s=e.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${t})${s}`}function Wme(e){return new RegExp(`^${zz(e)}$`)}function zme(e){let t=`${Wz}T${zz(e)}`;const s=[];return s.push(e.local?"Z?":"Z"),e.offset&&s.push("([+-]\\d{2}:?\\d{2})"),t=`${t}(${s.join("|")})`,new RegExp(`^${t}$`)}function qme(e,t){return!!((t==="v4"||!t)&&Mme.test(e)||(t==="v6"||!t)&&Fme.test(e))}function Hme(e,t){if(!Ime.test(e))return!1;try{const[s]=e.split(".");if(!s)return!1;const a=s.replace(/-/g,"+").replace(/_/g,"/").padEnd(s.length+(4-s.length%4)%4,"="),n=JSON.parse(atob(a));return!(typeof n!="object"||n===null||"typ"in n&&(n==null?void 0:n.typ)!=="JWT"||!n.alg||t&&n.alg!==t)}catch{return!1}}function Kme(e,t){return!!((t==="v4"||!t)&&Lme.test(e)||(t==="v6"||!t)&&Bme.test(e))}class hu extends Dr{_parse(t){if(this._def.coerce&&(t.data=String(t.data)),this._getType(t)!==Pt.string){const i=this._getOrReturnCtx(t);return ft(i,{code:it.invalid_type,expected:Pt.string,received:i.parsedType}),or}const a=new uo;let n;for(const i of this._def.checks)if(i.kind==="min")t.data.length<i.value&&(n=this._getOrReturnCtx(t,n),ft(n,{code:it.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),a.dirty());else if(i.kind==="max")t.data.length>i.value&&(n=this._getOrReturnCtx(t,n),ft(n,{code:it.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),a.dirty());else if(i.kind==="length"){const o=t.data.length>i.value,l=t.data.length<i.value;(o||l)&&(n=this._getOrReturnCtx(t,n),o?ft(n,{code:it.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}):l&&ft(n,{code:it.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}),a.dirty())}else if(i.kind==="email")Ome.test(t.data)||(n=this._getOrReturnCtx(t,n),ft(n,{validation:"email",code:it.invalid_string,message:i.message}),a.dirty());else if(i.kind==="emoji")fS||(fS=new RegExp(Rme,"u")),fS.test(t.data)||(n=this._getOrReturnCtx(t,n),ft(n,{validation:"emoji",code:it.invalid_string,message:i.message}),a.dirty());else if(i.kind==="uuid")Pme.test(t.data)||(n=this._getOrReturnCtx(t,n),ft(n,{validation:"uuid",code:it.invalid_string,message:i.message}),a.dirty());else if(i.kind==="nanoid")Tme.test(t.data)||(n=this._getOrReturnCtx(t,n),ft(n,{validation:"nanoid",code:it.invalid_string,message:i.message}),a.dirty());else if(i.kind==="cuid")_me.test(t.data)||(n=this._getOrReturnCtx(t,n),ft(n,{validation:"cuid",code:it.invalid_string,message:i.message}),a.dirty());else if(i.kind==="cuid2")Eme.test(t.data)||(n=this._getOrReturnCtx(t,n),ft(n,{validation:"cuid2",code:it.invalid_string,message:i.message}),a.dirty());else if(i.kind==="ulid")Ame.test(t.data)||(n=this._getOrReturnCtx(t,n),ft(n,{validation:"ulid",code:it.invalid_string,message:i.message}),a.dirty());else if(i.kind==="url")try{new URL(t.data)}catch{n=this._getOrReturnCtx(t,n),ft(n,{validation:"url",code:it.invalid_string,message:i.message}),a.dirty()}else i.kind==="regex"?(i.regex.lastIndex=0,i.regex.test(t.data)||(n=this._getOrReturnCtx(t,n),ft(n,{validation:"regex",code:it.invalid_string,message:i.message}),a.dirty())):i.kind==="trim"?t.data=t.data.trim():i.kind==="includes"?t.data.includes(i.value,i.position)||(n=this._getOrReturnCtx(t,n),ft(n,{code:it.invalid_string,validation:{includes:i.value,position:i.position},message:i.message}),a.dirty()):i.kind==="toLowerCase"?t.data=t.data.toLowerCase():i.kind==="toUpperCase"?t.data=t.data.toUpperCase():i.kind==="startsWith"?t.data.startsWith(i.value)||(n=this._getOrReturnCtx(t,n),ft(n,{code:it.invalid_string,validation:{startsWith:i.value},message:i.message}),a.dirty()):i.kind==="endsWith"?t.data.endsWith(i.value)||(n=this._getOrReturnCtx(t,n),ft(n,{code:it.invalid_string,validation:{endsWith:i.value},message:i.message}),a.dirty()):i.kind==="datetime"?zme(i).test(t.data)||(n=this._getOrReturnCtx(t,n),ft(n,{code:it.invalid_string,validation:"datetime",message:i.message}),a.dirty()):i.kind==="date"?Vme.test(t.data)||(n=this._getOrReturnCtx(t,n),ft(n,{code:it.invalid_string,validation:"date",message:i.message}),a.dirty()):i.kind==="time"?Wme(i).test(t.data)||(n=this._getOrReturnCtx(t,n),ft(n,{code:it.invalid_string,validation:"time",message:i.message}),a.dirty()):i.kind==="duration"?Dme.test(t.data)||(n=this._getOrReturnCtx(t,n),ft(n,{validation:"duration",code:it.invalid_string,message:i.message}),a.dirty()):i.kind==="ip"?qme(t.data,i.version)||(n=this._getOrReturnCtx(t,n),ft(n,{validation:"ip",code:it.invalid_string,message:i.message}),a.dirty()):i.kind==="jwt"?Hme(t.data,i.alg)||(n=this._getOrReturnCtx(t,n),ft(n,{validation:"jwt",code:it.invalid_string,message:i.message}),a.dirty()):i.kind==="cidr"?Kme(t.data,i.version)||(n=this._getOrReturnCtx(t,n),ft(n,{validation:"cidr",code:it.invalid_string,message:i.message}),a.dirty()):i.kind==="base64"?$me.test(t.data)||(n=this._getOrReturnCtx(t,n),ft(n,{validation:"base64",code:it.invalid_string,message:i.message}),a.dirty()):i.kind==="base64url"?Ume.test(t.data)||(n=this._getOrReturnCtx(t,n),ft(n,{validation:"base64url",code:it.invalid_string,message:i.message}),a.dirty()):Or.assertNever(i);return{status:a.value,value:t.data}}_regex(t,s,a){return this.refinement(n=>t.test(n),{validation:s,code:it.invalid_string,...It.errToObj(a)})}_addCheck(t){return new hu({...this._def,checks:[...this._def.checks,t]})}email(t){return this._addCheck({kind:"email",...It.errToObj(t)})}url(t){return this._addCheck({kind:"url",...It.errToObj(t)})}emoji(t){return this._addCheck({kind:"emoji",...It.errToObj(t)})}uuid(t){return this._addCheck({kind:"uuid",...It.errToObj(t)})}nanoid(t){return this._addCheck({kind:"nanoid",...It.errToObj(t)})}cuid(t){return this._addCheck({kind:"cuid",...It.errToObj(t)})}cuid2(t){return this._addCheck({kind:"cuid2",...It.errToObj(t)})}ulid(t){return this._addCheck({kind:"ulid",...It.errToObj(t)})}base64(t){return this._addCheck({kind:"base64",...It.errToObj(t)})}base64url(t){return this._addCheck({kind:"base64url",...It.errToObj(t)})}jwt(t){return this._addCheck({kind:"jwt",...It.errToObj(t)})}ip(t){return this._addCheck({kind:"ip",...It.errToObj(t)})}cidr(t){return this._addCheck({kind:"cidr",...It.errToObj(t)})}datetime(t){return typeof t=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:t}):this._addCheck({kind:"datetime",precision:typeof(t==null?void 0:t.precision)>"u"?null:t==null?void 0:t.precision,offset:(t==null?void 0:t.offset)??!1,local:(t==null?void 0:t.local)??!1,...It.errToObj(t==null?void 0:t.message)})}date(t){return this._addCheck({kind:"date",message:t})}time(t){return typeof t=="string"?this._addCheck({kind:"time",precision:null,message:t}):this._addCheck({kind:"time",precision:typeof(t==null?void 0:t.precision)>"u"?null:t==null?void 0:t.precision,...It.errToObj(t==null?void 0:t.message)})}duration(t){return this._addCheck({kind:"duration",...It.errToObj(t)})}regex(t,s){return this._addCheck({kind:"regex",regex:t,...It.errToObj(s)})}includes(t,s){return this._addCheck({kind:"includes",value:t,position:s==null?void 0:s.position,...It.errToObj(s==null?void 0:s.message)})}startsWith(t,s){return this._addCheck({kind:"startsWith",value:t,...It.errToObj(s)})}endsWith(t,s){return this._addCheck({kind:"endsWith",value:t,...It.errToObj(s)})}min(t,s){return this._addCheck({kind:"min",value:t,...It.errToObj(s)})}max(t,s){return this._addCheck({kind:"max",value:t,...It.errToObj(s)})}length(t,s){return this._addCheck({kind:"length",value:t,...It.errToObj(s)})}nonempty(t){return this.min(1,It.errToObj(t))}trim(){return new hu({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new hu({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new hu({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(t=>t.kind==="datetime")}get isDate(){return!!this._def.checks.find(t=>t.kind==="date")}get isTime(){return!!this._def.checks.find(t=>t.kind==="time")}get isDuration(){return!!this._def.checks.find(t=>t.kind==="duration")}get isEmail(){return!!this._def.checks.find(t=>t.kind==="email")}get isURL(){return!!this._def.checks.find(t=>t.kind==="url")}get isEmoji(){return!!this._def.checks.find(t=>t.kind==="emoji")}get isUUID(){return!!this._def.checks.find(t=>t.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(t=>t.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(t=>t.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(t=>t.kind==="cuid2")}get isULID(){return!!this._def.checks.find(t=>t.kind==="ulid")}get isIP(){return!!this._def.checks.find(t=>t.kind==="ip")}get isCIDR(){return!!this._def.checks.find(t=>t.kind==="cidr")}get isBase64(){return!!this._def.checks.find(t=>t.kind==="base64")}get isBase64url(){return!!this._def.checks.find(t=>t.kind==="base64url")}get minLength(){let t=null;for(const s of this._def.checks)s.kind==="min"&&(t===null||s.value>t)&&(t=s.value);return t}get maxLength(){let t=null;for(const s of this._def.checks)s.kind==="max"&&(t===null||s.value<t)&&(t=s.value);return t}}hu.create=e=>new hu({checks:[],typeName:lr.ZodString,coerce:(e==null?void 0:e.coerce)??!1,...vr(e)});function Gme(e,t){const s=(e.toString().split(".")[1]||"").length,a=(t.toString().split(".")[1]||"").length,n=s>a?s:a,i=Number.parseInt(e.toFixed(n).replace(".","")),o=Number.parseInt(t.toFixed(n).replace(".",""));return i%o/10**n}class ey extends Dr{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(t){if(this._def.coerce&&(t.data=Number(t.data)),this._getType(t)!==Pt.number){const i=this._getOrReturnCtx(t);return ft(i,{code:it.invalid_type,expected:Pt.number,received:i.parsedType}),or}let a;const n=new uo;for(const i of this._def.checks)i.kind==="int"?Or.isInteger(t.data)||(a=this._getOrReturnCtx(t,a),ft(a,{code:it.invalid_type,expected:"integer",received:"float",message:i.message}),n.dirty()):i.kind==="min"?(i.inclusive?t.data<i.value:t.data<=i.value)&&(a=this._getOrReturnCtx(t,a),ft(a,{code:it.too_small,minimum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),n.dirty()):i.kind==="max"?(i.inclusive?t.data>i.value:t.data>=i.value)&&(a=this._getOrReturnCtx(t,a),ft(a,{code:it.too_big,maximum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),n.dirty()):i.kind==="multipleOf"?Gme(t.data,i.value)!==0&&(a=this._getOrReturnCtx(t,a),ft(a,{code:it.not_multiple_of,multipleOf:i.value,message:i.message}),n.dirty()):i.kind==="finite"?Number.isFinite(t.data)||(a=this._getOrReturnCtx(t,a),ft(a,{code:it.not_finite,message:i.message}),n.dirty()):Or.assertNever(i);return{status:n.value,value:t.data}}gte(t,s){return this.setLimit("min",t,!0,It.toString(s))}gt(t,s){return this.setLimit("min",t,!1,It.toString(s))}lte(t,s){return this.setLimit("max",t,!0,It.toString(s))}lt(t,s){return this.setLimit("max",t,!1,It.toString(s))}setLimit(t,s,a,n){return new ey({...this._def,checks:[...this._def.checks,{kind:t,value:s,inclusive:a,message:It.toString(n)}]})}_addCheck(t){return new ey({...this._def,checks:[...this._def.checks,t]})}int(t){return this._addCheck({kind:"int",message:It.toString(t)})}positive(t){return this._addCheck({kind:"min",value:0,inclusive:!1,message:It.toString(t)})}negative(t){return this._addCheck({kind:"max",value:0,inclusive:!1,message:It.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:0,inclusive:!0,message:It.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:0,inclusive:!0,message:It.toString(t)})}multipleOf(t,s){return this._addCheck({kind:"multipleOf",value:t,message:It.toString(s)})}finite(t){return this._addCheck({kind:"finite",message:It.toString(t)})}safe(t){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:It.toString(t)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:It.toString(t)})}get minValue(){let t=null;for(const s of this._def.checks)s.kind==="min"&&(t===null||s.value>t)&&(t=s.value);return t}get maxValue(){let t=null;for(const s of this._def.checks)s.kind==="max"&&(t===null||s.value<t)&&(t=s.value);return t}get isInt(){return!!this._def.checks.find(t=>t.kind==="int"||t.kind==="multipleOf"&&Or.isInteger(t.value))}get isFinite(){let t=null,s=null;for(const a of this._def.checks){if(a.kind==="finite"||a.kind==="int"||a.kind==="multipleOf")return!0;a.kind==="min"?(s===null||a.value>s)&&(s=a.value):a.kind==="max"&&(t===null||a.value<t)&&(t=a.value)}return Number.isFinite(s)&&Number.isFinite(t)}}ey.create=e=>new ey({checks:[],typeName:lr.ZodNumber,coerce:(e==null?void 0:e.coerce)||!1,...vr(e)});class ty extends Dr{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(t){if(this._def.coerce)try{t.data=BigInt(t.data)}catch{return this._getInvalidInput(t)}if(this._getType(t)!==Pt.bigint)return this._getInvalidInput(t);let a;const n=new uo;for(const i of this._def.checks)i.kind==="min"?(i.inclusive?t.data<i.value:t.data<=i.value)&&(a=this._getOrReturnCtx(t,a),ft(a,{code:it.too_small,type:"bigint",minimum:i.value,inclusive:i.inclusive,message:i.message}),n.dirty()):i.kind==="max"?(i.inclusive?t.data>i.value:t.data>=i.value)&&(a=this._getOrReturnCtx(t,a),ft(a,{code:it.too_big,type:"bigint",maximum:i.value,inclusive:i.inclusive,message:i.message}),n.dirty()):i.kind==="multipleOf"?t.data%i.value!==BigInt(0)&&(a=this._getOrReturnCtx(t,a),ft(a,{code:it.not_multiple_of,multipleOf:i.value,message:i.message}),n.dirty()):Or.assertNever(i);return{status:n.value,value:t.data}}_getInvalidInput(t){const s=this._getOrReturnCtx(t);return ft(s,{code:it.invalid_type,expected:Pt.bigint,received:s.parsedType}),or}gte(t,s){return this.setLimit("min",t,!0,It.toString(s))}gt(t,s){return this.setLimit("min",t,!1,It.toString(s))}lte(t,s){return this.setLimit("max",t,!0,It.toString(s))}lt(t,s){return this.setLimit("max",t,!1,It.toString(s))}setLimit(t,s,a,n){return new ty({...this._def,checks:[...this._def.checks,{kind:t,value:s,inclusive:a,message:It.toString(n)}]})}_addCheck(t){return new ty({...this._def,checks:[...this._def.checks,t]})}positive(t){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:It.toString(t)})}negative(t){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:It.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:It.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:It.toString(t)})}multipleOf(t,s){return this._addCheck({kind:"multipleOf",value:t,message:It.toString(s)})}get minValue(){let t=null;for(const s of this._def.checks)s.kind==="min"&&(t===null||s.value>t)&&(t=s.value);return t}get maxValue(){let t=null;for(const s of this._def.checks)s.kind==="max"&&(t===null||s.value<t)&&(t=s.value);return t}}ty.create=e=>new ty({checks:[],typeName:lr.ZodBigInt,coerce:(e==null?void 0:e.coerce)??!1,...vr(e)});class rM extends Dr{_parse(t){if(this._def.coerce&&(t.data=!!t.data),this._getType(t)!==Pt.boolean){const a=this._getOrReturnCtx(t);return ft(a,{code:it.invalid_type,expected:Pt.boolean,received:a.parsedType}),or}return tl(t.data)}}rM.create=e=>new rM({typeName:lr.ZodBoolean,coerce:(e==null?void 0:e.coerce)||!1,...vr(e)});class Xw extends Dr{_parse(t){if(this._def.coerce&&(t.data=new Date(t.data)),this._getType(t)!==Pt.date){const i=this._getOrReturnCtx(t);return ft(i,{code:it.invalid_type,expected:Pt.date,received:i.parsedType}),or}if(Number.isNaN(t.data.getTime())){const i=this._getOrReturnCtx(t);return ft(i,{code:it.invalid_date}),or}const a=new uo;let n;for(const i of this._def.checks)i.kind==="min"?t.data.getTime()<i.value&&(n=this._getOrReturnCtx(t,n),ft(n,{code:it.too_small,message:i.message,inclusive:!0,exact:!1,minimum:i.value,type:"date"}),a.dirty()):i.kind==="max"?t.data.getTime()>i.value&&(n=this._getOrReturnCtx(t,n),ft(n,{code:it.too_big,message:i.message,inclusive:!0,exact:!1,maximum:i.value,type:"date"}),a.dirty()):Or.assertNever(i);return{status:a.value,value:new Date(t.data.getTime())}}_addCheck(t){return new Xw({...this._def,checks:[...this._def.checks,t]})}min(t,s){return this._addCheck({kind:"min",value:t.getTime(),message:It.toString(s)})}max(t,s){return this._addCheck({kind:"max",value:t.getTime(),message:It.toString(s)})}get minDate(){let t=null;for(const s of this._def.checks)s.kind==="min"&&(t===null||s.value>t)&&(t=s.value);return t!=null?new Date(t):null}get maxDate(){let t=null;for(const s of this._def.checks)s.kind==="max"&&(t===null||s.value<t)&&(t=s.value);return t!=null?new Date(t):null}}Xw.create=e=>new Xw({checks:[],coerce:(e==null?void 0:e.coerce)||!1,typeName:lr.ZodDate,...vr(e)});class sM extends Dr{_parse(t){if(this._getType(t)!==Pt.symbol){const a=this._getOrReturnCtx(t);return ft(a,{code:it.invalid_type,expected:Pt.symbol,received:a.parsedType}),or}return tl(t.data)}}sM.create=e=>new sM({typeName:lr.ZodSymbol,...vr(e)});class aM extends Dr{_parse(t){if(this._getType(t)!==Pt.undefined){const a=this._getOrReturnCtx(t);return ft(a,{code:it.invalid_type,expected:Pt.undefined,received:a.parsedType}),or}return tl(t.data)}}aM.create=e=>new aM({typeName:lr.ZodUndefined,...vr(e)});class nM extends Dr{_parse(t){if(this._getType(t)!==Pt.null){const a=this._getOrReturnCtx(t);return ft(a,{code:it.invalid_type,expected:Pt.null,received:a.parsedType}),or}return tl(t.data)}}nM.create=e=>new nM({typeName:lr.ZodNull,...vr(e)});class iM extends Dr{constructor(){super(...arguments),this._any=!0}_parse(t){return tl(t.data)}}iM.create=e=>new iM({typeName:lr.ZodAny,...vr(e)});class oM extends Dr{constructor(){super(...arguments),this._unknown=!0}_parse(t){return tl(t.data)}}oM.create=e=>new oM({typeName:lr.ZodUnknown,...vr(e)});class Ru extends Dr{_parse(t){const s=this._getOrReturnCtx(t);return ft(s,{code:it.invalid_type,expected:Pt.never,received:s.parsedType}),or}}Ru.create=e=>new Ru({typeName:lr.ZodNever,...vr(e)});class lM extends Dr{_parse(t){if(this._getType(t)!==Pt.undefined){const a=this._getOrReturnCtx(t);return ft(a,{code:it.invalid_type,expected:Pt.void,received:a.parsedType}),or}return tl(t.data)}}lM.create=e=>new lM({typeName:lr.ZodVoid,...vr(e)});class cc extends Dr{_parse(t){const{ctx:s,status:a}=this._processInputParams(t),n=this._def;if(s.parsedType!==Pt.array)return ft(s,{code:it.invalid_type,expected:Pt.array,received:s.parsedType}),or;if(n.exactLength!==null){const o=s.data.length>n.exactLength.value,l=s.data.length<n.exactLength.value;(o||l)&&(ft(s,{code:o?it.too_big:it.too_small,minimum:l?n.exactLength.value:void 0,maximum:o?n.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:n.exactLength.message}),a.dirty())}if(n.minLength!==null&&s.data.length<n.minLength.value&&(ft(s,{code:it.too_small,minimum:n.minLength.value,type:"array",inclusive:!0,exact:!1,message:n.minLength.message}),a.dirty()),n.maxLength!==null&&s.data.length>n.maxLength.value&&(ft(s,{code:it.too_big,maximum:n.maxLength.value,type:"array",inclusive:!0,exact:!1,message:n.maxLength.message}),a.dirty()),s.common.async)return Promise.all([...s.data].map((o,l)=>n.type._parseAsync(new Ou(s,o,s.path,l)))).then(o=>uo.mergeArray(a,o));const i=[...s.data].map((o,l)=>n.type._parseSync(new Ou(s,o,s.path,l)));return uo.mergeArray(a,i)}get element(){return this._def.type}min(t,s){return new cc({...this._def,minLength:{value:t,message:It.toString(s)}})}max(t,s){return new cc({...this._def,maxLength:{value:t,message:It.toString(s)}})}length(t,s){return new cc({...this._def,exactLength:{value:t,message:It.toString(s)}})}nonempty(t){return this.min(1,t)}}cc.create=(e,t)=>new cc({type:e,minLength:null,maxLength:null,exactLength:null,typeName:lr.ZodArray,...vr(t)});function wm(e){if(e instanceof Sa){const t={};for(const s in e.shape){const a=e.shape[s];t[s]=Cu.create(wm(a))}return new Sa({...e._def,shape:()=>t})}else return e instanceof cc?new cc({...e._def,type:wm(e.element)}):e instanceof Cu?Cu.create(wm(e.unwrap())):e instanceof Bf?Bf.create(wm(e.unwrap())):e instanceof bh?bh.create(e.items.map(t=>wm(t))):e}class Sa extends Dr{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const t=this._def.shape(),s=Or.objectKeys(t);return this._cached={shape:t,keys:s},this._cached}_parse(t){if(this._getType(t)!==Pt.object){const d=this._getOrReturnCtx(t);return ft(d,{code:it.invalid_type,expected:Pt.object,received:d.parsedType}),or}const{status:a,ctx:n}=this._processInputParams(t),{shape:i,keys:o}=this._getCached(),l=[];if(!(this._def.catchall instanceof Ru&&this._def.unknownKeys==="strip"))for(const d in n.data)o.includes(d)||l.push(d);const c=[];for(const d of o){const h=i[d],f=n.data[d];c.push({key:{status:"valid",value:d},value:h._parse(new Ou(n,f,n.path,d)),alwaysSet:d in n.data})}if(this._def.catchall instanceof Ru){const d=this._def.unknownKeys;if(d==="passthrough")for(const h of l)c.push({key:{status:"valid",value:h},value:{status:"valid",value:n.data[h]}});else if(d==="strict")l.length>0&&(ft(n,{code:it.unrecognized_keys,keys:l}),a.dirty());else if(d!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const d=this._def.catchall;for(const h of l){const f=n.data[h];c.push({key:{status:"valid",value:h},value:d._parse(new Ou(n,f,n.path,h)),alwaysSet:h in n.data})}}return n.common.async?Promise.resolve().then(async()=>{const d=[];for(const h of c){const f=await h.key,x=await h.value;d.push({key:f,value:x,alwaysSet:h.alwaysSet})}return d}).then(d=>uo.mergeObjectSync(a,d)):uo.mergeObjectSync(a,c)}get shape(){return this._def.shape()}strict(t){return It.errToObj,new Sa({...this._def,unknownKeys:"strict",...t!==void 0?{errorMap:(s,a)=>{var i,o;const n=((o=(i=this._def).errorMap)==null?void 0:o.call(i,s,a).message)??a.defaultError;return s.code==="unrecognized_keys"?{message:It.errToObj(t).message??n}:{message:n}}}:{}})}strip(){return new Sa({...this._def,unknownKeys:"strip"})}passthrough(){return new Sa({...this._def,unknownKeys:"passthrough"})}extend(t){return new Sa({...this._def,shape:()=>({...this._def.shape(),...t})})}merge(t){return new Sa({unknownKeys:t._def.unknownKeys,catchall:t._def.catchall,shape:()=>({...this._def.shape(),...t._def.shape()}),typeName:lr.ZodObject})}setKey(t,s){return this.augment({[t]:s})}catchall(t){return new Sa({...this._def,catchall:t})}pick(t){const s={};for(const a of Or.objectKeys(t))t[a]&&this.shape[a]&&(s[a]=this.shape[a]);return new Sa({...this._def,shape:()=>s})}omit(t){const s={};for(const a of Or.objectKeys(this.shape))t[a]||(s[a]=this.shape[a]);return new Sa({...this._def,shape:()=>s})}deepPartial(){return wm(this)}partial(t){const s={};for(const a of Or.objectKeys(this.shape)){const n=this.shape[a];t&&!t[a]?s[a]=n:s[a]=n.optional()}return new Sa({...this._def,shape:()=>s})}required(t){const s={};for(const a of Or.objectKeys(this.shape))if(t&&!t[a])s[a]=this.shape[a];else{let i=this.shape[a];for(;i instanceof Cu;)i=i._def.innerType;s[a]=i}return new Sa({...this._def,shape:()=>s})}keyof(){return qz(Or.objectKeys(this.shape))}}Sa.create=(e,t)=>new Sa({shape:()=>e,unknownKeys:"strip",catchall:Ru.create(),typeName:lr.ZodObject,...vr(t)});Sa.strictCreate=(e,t)=>new Sa({shape:()=>e,unknownKeys:"strict",catchall:Ru.create(),typeName:lr.ZodObject,...vr(t)});Sa.lazycreate=(e,t)=>new Sa({shape:e,unknownKeys:"strip",catchall:Ru.create(),typeName:lr.ZodObject,...vr(t)});class Qw extends Dr{_parse(t){const{ctx:s}=this._processInputParams(t),a=this._def.options;function n(i){for(const l of i)if(l.result.status==="valid")return l.result;for(const l of i)if(l.result.status==="dirty")return s.common.issues.push(...l.ctx.common.issues),l.result;const o=i.map(l=>new ad(l.ctx.common.issues));return ft(s,{code:it.invalid_union,unionErrors:o}),or}if(s.common.async)return Promise.all(a.map(async i=>{const o={...s,common:{...s.common,issues:[]},parent:null};return{result:await i._parseAsync({data:s.data,path:s.path,parent:o}),ctx:o}})).then(n);{let i;const o=[];for(const c of a){const d={...s,common:{...s.common,issues:[]},parent:null},h=c._parseSync({data:s.data,path:s.path,parent:d});if(h.status==="valid")return h;h.status==="dirty"&&!i&&(i={result:h,ctx:d}),d.common.issues.length&&o.push(d.common.issues)}if(i)return s.common.issues.push(...i.ctx.common.issues),i.result;const l=o.map(c=>new ad(c));return ft(s,{code:it.invalid_union,unionErrors:l}),or}}get options(){return this._def.options}}Qw.create=(e,t)=>new Qw({options:e,typeName:lr.ZodUnion,...vr(t)});function h3(e,t){const s=Hd(e),a=Hd(t);if(e===t)return{valid:!0,data:e};if(s===Pt.object&&a===Pt.object){const n=Or.objectKeys(t),i=Or.objectKeys(e).filter(l=>n.indexOf(l)!==-1),o={...e,...t};for(const l of i){const c=h3(e[l],t[l]);if(!c.valid)return{valid:!1};o[l]=c.data}return{valid:!0,data:o}}else if(s===Pt.array&&a===Pt.array){if(e.length!==t.length)return{valid:!1};const n=[];for(let i=0;i<e.length;i++){const o=e[i],l=t[i],c=h3(o,l);if(!c.valid)return{valid:!1};n.push(c.data)}return{valid:!0,data:n}}else return s===Pt.date&&a===Pt.date&&+e==+t?{valid:!0,data:e}:{valid:!1}}class Zw extends Dr{_parse(t){const{status:s,ctx:a}=this._processInputParams(t),n=(i,o)=>{if(JR(i)||JR(o))return or;const l=h3(i.value,o.value);return l.valid?((eM(i)||eM(o))&&s.dirty(),{status:s.value,value:l.data}):(ft(a,{code:it.invalid_intersection_types}),or)};return a.common.async?Promise.all([this._def.left._parseAsync({data:a.data,path:a.path,parent:a}),this._def.right._parseAsync({data:a.data,path:a.path,parent:a})]).then(([i,o])=>n(i,o)):n(this._def.left._parseSync({data:a.data,path:a.path,parent:a}),this._def.right._parseSync({data:a.data,path:a.path,parent:a}))}}Zw.create=(e,t,s)=>new Zw({left:e,right:t,typeName:lr.ZodIntersection,...vr(s)});class bh extends Dr{_parse(t){const{status:s,ctx:a}=this._processInputParams(t);if(a.parsedType!==Pt.array)return ft(a,{code:it.invalid_type,expected:Pt.array,received:a.parsedType}),or;if(a.data.length<this._def.items.length)return ft(a,{code:it.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),or;!this._def.rest&&a.data.length>this._def.items.length&&(ft(a,{code:it.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),s.dirty());const i=[...a.data].map((o,l)=>{const c=this._def.items[l]||this._def.rest;return c?c._parse(new Ou(a,o,a.path,l)):null}).filter(o=>!!o);return a.common.async?Promise.all(i).then(o=>uo.mergeArray(s,o)):uo.mergeArray(s,i)}get items(){return this._def.items}rest(t){return new bh({...this._def,rest:t})}}bh.create=(e,t)=>{if(!Array.isArray(e))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new bh({items:e,typeName:lr.ZodTuple,rest:null,...vr(t)})};class cM extends Dr{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(t){const{status:s,ctx:a}=this._processInputParams(t);if(a.parsedType!==Pt.map)return ft(a,{code:it.invalid_type,expected:Pt.map,received:a.parsedType}),or;const n=this._def.keyType,i=this._def.valueType,o=[...a.data.entries()].map(([l,c],d)=>({key:n._parse(new Ou(a,l,a.path,[d,"key"])),value:i._parse(new Ou(a,c,a.path,[d,"value"]))}));if(a.common.async){const l=new Map;return Promise.resolve().then(async()=>{for(const c of o){const d=await c.key,h=await c.value;if(d.status==="aborted"||h.status==="aborted")return or;(d.status==="dirty"||h.status==="dirty")&&s.dirty(),l.set(d.value,h.value)}return{status:s.value,value:l}})}else{const l=new Map;for(const c of o){const d=c.key,h=c.value;if(d.status==="aborted"||h.status==="aborted")return or;(d.status==="dirty"||h.status==="dirty")&&s.dirty(),l.set(d.value,h.value)}return{status:s.value,value:l}}}}cM.create=(e,t,s)=>new cM({valueType:t,keyType:e,typeName:lr.ZodMap,...vr(s)});class ry extends Dr{_parse(t){const{status:s,ctx:a}=this._processInputParams(t);if(a.parsedType!==Pt.set)return ft(a,{code:it.invalid_type,expected:Pt.set,received:a.parsedType}),or;const n=this._def;n.minSize!==null&&a.data.size<n.minSize.value&&(ft(a,{code:it.too_small,minimum:n.minSize.value,type:"set",inclusive:!0,exact:!1,message:n.minSize.message}),s.dirty()),n.maxSize!==null&&a.data.size>n.maxSize.value&&(ft(a,{code:it.too_big,maximum:n.maxSize.value,type:"set",inclusive:!0,exact:!1,message:n.maxSize.message}),s.dirty());const i=this._def.valueType;function o(c){const d=new Set;for(const h of c){if(h.status==="aborted")return or;h.status==="dirty"&&s.dirty(),d.add(h.value)}return{status:s.value,value:d}}const l=[...a.data.values()].map((c,d)=>i._parse(new Ou(a,c,a.path,d)));return a.common.async?Promise.all(l).then(c=>o(c)):o(l)}min(t,s){return new ry({...this._def,minSize:{value:t,message:It.toString(s)}})}max(t,s){return new ry({...this._def,maxSize:{value:t,message:It.toString(s)}})}size(t,s){return this.min(t,s).max(t,s)}nonempty(t){return this.min(1,t)}}ry.create=(e,t)=>new ry({valueType:e,minSize:null,maxSize:null,typeName:lr.ZodSet,...vr(t)});class dM extends Dr{get schema(){return this._def.getter()}_parse(t){const{ctx:s}=this._processInputParams(t);return this._def.getter()._parse({data:s.data,path:s.path,parent:s})}}dM.create=(e,t)=>new dM({getter:e,typeName:lr.ZodLazy,...vr(t)});class uM extends Dr{_parse(t){if(t.data!==this._def.value){const s=this._getOrReturnCtx(t);return ft(s,{received:s.data,code:it.invalid_literal,expected:this._def.value}),or}return{status:"valid",value:t.data}}get value(){return this._def.value}}uM.create=(e,t)=>new uM({value:e,typeName:lr.ZodLiteral,...vr(t)});function qz(e,t){return new Lf({values:e,typeName:lr.ZodEnum,...vr(t)})}class Lf extends Dr{_parse(t){if(typeof t.data!="string"){const s=this._getOrReturnCtx(t),a=this._def.values;return ft(s,{expected:Or.joinValues(a),received:s.parsedType,code:it.invalid_type}),or}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(t.data)){const s=this._getOrReturnCtx(t),a=this._def.values;return ft(s,{received:s.data,code:it.invalid_enum_value,options:a}),or}return tl(t.data)}get options(){return this._def.values}get enum(){const t={};for(const s of this._def.values)t[s]=s;return t}get Values(){const t={};for(const s of this._def.values)t[s]=s;return t}get Enum(){const t={};for(const s of this._def.values)t[s]=s;return t}extract(t,s=this._def){return Lf.create(t,{...this._def,...s})}exclude(t,s=this._def){return Lf.create(this.options.filter(a=>!t.includes(a)),{...this._def,...s})}}Lf.create=qz;class hM extends Dr{_parse(t){const s=Or.getValidEnumValues(this._def.values),a=this._getOrReturnCtx(t);if(a.parsedType!==Pt.string&&a.parsedType!==Pt.number){const n=Or.objectValues(s);return ft(a,{expected:Or.joinValues(n),received:a.parsedType,code:it.invalid_type}),or}if(this._cache||(this._cache=new Set(Or.getValidEnumValues(this._def.values))),!this._cache.has(t.data)){const n=Or.objectValues(s);return ft(a,{received:a.data,code:it.invalid_enum_value,options:n}),or}return tl(t.data)}get enum(){return this._def.values}}hM.create=(e,t)=>new hM({values:e,typeName:lr.ZodNativeEnum,...vr(t)});class Jw extends Dr{unwrap(){return this._def.type}_parse(t){const{ctx:s}=this._processInputParams(t);if(s.parsedType!==Pt.promise&&s.common.async===!1)return ft(s,{code:it.invalid_type,expected:Pt.promise,received:s.parsedType}),or;const a=s.parsedType===Pt.promise?s.data:Promise.resolve(s.data);return tl(a.then(n=>this._def.type.parseAsync(n,{path:s.path,errorMap:s.common.contextualErrorMap})))}}Jw.create=(e,t)=>new Jw({type:e,typeName:lr.ZodPromise,...vr(t)});class Ff extends Dr{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===lr.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(t){const{status:s,ctx:a}=this._processInputParams(t),n=this._def.effect||null,i={addIssue:o=>{ft(a,o),o.fatal?s.abort():s.dirty()},get path(){return a.path}};if(i.addIssue=i.addIssue.bind(i),n.type==="preprocess"){const o=n.transform(a.data,i);if(a.common.async)return Promise.resolve(o).then(async l=>{if(s.value==="aborted")return or;const c=await this._def.schema._parseAsync({data:l,path:a.path,parent:a});return c.status==="aborted"?or:c.status==="dirty"||s.value==="dirty"?Bg(c.value):c});{if(s.value==="aborted")return or;const l=this._def.schema._parseSync({data:o,path:a.path,parent:a});return l.status==="aborted"?or:l.status==="dirty"||s.value==="dirty"?Bg(l.value):l}}if(n.type==="refinement"){const o=l=>{const c=n.refinement(l,i);if(a.common.async)return Promise.resolve(c);if(c instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return l};if(a.common.async===!1){const l=this._def.schema._parseSync({data:a.data,path:a.path,parent:a});return l.status==="aborted"?or:(l.status==="dirty"&&s.dirty(),o(l.value),{status:s.value,value:l.value})}else return this._def.schema._parseAsync({data:a.data,path:a.path,parent:a}).then(l=>l.status==="aborted"?or:(l.status==="dirty"&&s.dirty(),o(l.value).then(()=>({status:s.value,value:l.value}))))}if(n.type==="transform")if(a.common.async===!1){const o=this._def.schema._parseSync({data:a.data,path:a.path,parent:a});if(!Mf(o))return or;const l=n.transform(o.value,i);if(l instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:s.value,value:l}}else return this._def.schema._parseAsync({data:a.data,path:a.path,parent:a}).then(o=>Mf(o)?Promise.resolve(n.transform(o.value,i)).then(l=>({status:s.value,value:l})):or);Or.assertNever(n)}}Ff.create=(e,t,s)=>new Ff({schema:e,typeName:lr.ZodEffects,effect:t,...vr(s)});Ff.createWithPreprocess=(e,t,s)=>new Ff({schema:t,effect:{type:"preprocess",transform:e},typeName:lr.ZodEffects,...vr(s)});class Cu extends Dr{_parse(t){return this._getType(t)===Pt.undefined?tl(void 0):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}}Cu.create=(e,t)=>new Cu({innerType:e,typeName:lr.ZodOptional,...vr(t)});class Bf extends Dr{_parse(t){return this._getType(t)===Pt.null?tl(null):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}}Bf.create=(e,t)=>new Bf({innerType:e,typeName:lr.ZodNullable,...vr(t)});class m3 extends Dr{_parse(t){const{ctx:s}=this._processInputParams(t);let a=s.data;return s.parsedType===Pt.undefined&&(a=this._def.defaultValue()),this._def.innerType._parse({data:a,path:s.path,parent:s})}removeDefault(){return this._def.innerType}}m3.create=(e,t)=>new m3({innerType:e,typeName:lr.ZodDefault,defaultValue:typeof t.default=="function"?t.default:()=>t.default,...vr(t)});class f3 extends Dr{_parse(t){const{ctx:s}=this._processInputParams(t),a={...s,common:{...s.common,issues:[]}},n=this._def.innerType._parse({data:a.data,path:a.path,parent:{...a}});return Yw(n)?n.then(i=>({status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new ad(a.common.issues)},input:a.data})})):{status:"valid",value:n.status==="valid"?n.value:this._def.catchValue({get error(){return new ad(a.common.issues)},input:a.data})}}removeCatch(){return this._def.innerType}}f3.create=(e,t)=>new f3({innerType:e,typeName:lr.ZodCatch,catchValue:typeof t.catch=="function"?t.catch:()=>t.catch,...vr(t)});class mM extends Dr{_parse(t){if(this._getType(t)!==Pt.nan){const a=this._getOrReturnCtx(t);return ft(a,{code:it.invalid_type,expected:Pt.nan,received:a.parsedType}),or}return{status:"valid",value:t.data}}}mM.create=e=>new mM({typeName:lr.ZodNaN,...vr(e)});class Yme extends Dr{_parse(t){const{ctx:s}=this._processInputParams(t),a=s.data;return this._def.type._parse({data:a,path:s.path,parent:s})}unwrap(){return this._def.type}}class lA extends Dr{_parse(t){const{status:s,ctx:a}=this._processInputParams(t);if(a.common.async)return(async()=>{const i=await this._def.in._parseAsync({data:a.data,path:a.path,parent:a});return i.status==="aborted"?or:i.status==="dirty"?(s.dirty(),Bg(i.value)):this._def.out._parseAsync({data:i.value,path:a.path,parent:a})})();{const n=this._def.in._parseSync({data:a.data,path:a.path,parent:a});return n.status==="aborted"?or:n.status==="dirty"?(s.dirty(),{status:"dirty",value:n.value}):this._def.out._parseSync({data:n.value,path:a.path,parent:a})}}static create(t,s){return new lA({in:t,out:s,typeName:lr.ZodPipeline})}}class x3 extends Dr{_parse(t){const s=this._def.innerType._parse(t),a=n=>(Mf(n)&&(n.value=Object.freeze(n.value)),n);return Yw(s)?s.then(n=>a(n)):a(s)}unwrap(){return this._def.innerType}}x3.create=(e,t)=>new x3({innerType:e,typeName:lr.ZodReadonly,...vr(t)});var lr;(function(e){e.ZodString="ZodString",e.ZodNumber="ZodNumber",e.ZodNaN="ZodNaN",e.ZodBigInt="ZodBigInt",e.ZodBoolean="ZodBoolean",e.ZodDate="ZodDate",e.ZodSymbol="ZodSymbol",e.ZodUndefined="ZodUndefined",e.ZodNull="ZodNull",e.ZodAny="ZodAny",e.ZodUnknown="ZodUnknown",e.ZodNever="ZodNever",e.ZodVoid="ZodVoid",e.ZodArray="ZodArray",e.ZodObject="ZodObject",e.ZodUnion="ZodUnion",e.ZodDiscriminatedUnion="ZodDiscriminatedUnion",e.ZodIntersection="ZodIntersection",e.ZodTuple="ZodTuple",e.ZodRecord="ZodRecord",e.ZodMap="ZodMap",e.ZodSet="ZodSet",e.ZodFunction="ZodFunction",e.ZodLazy="ZodLazy",e.ZodLiteral="ZodLiteral",e.ZodEnum="ZodEnum",e.ZodEffects="ZodEffects",e.ZodNativeEnum="ZodNativeEnum",e.ZodOptional="ZodOptional",e.ZodNullable="ZodNullable",e.ZodDefault="ZodDefault",e.ZodCatch="ZodCatch",e.ZodPromise="ZodPromise",e.ZodBranded="ZodBranded",e.ZodPipeline="ZodPipeline",e.ZodReadonly="ZodReadonly"})(lr||(lr={}));const fM=hu.create;Ru.create;cc.create;const Xme=Sa.create;Qw.create;Zw.create;bh.create;Lf.create;Jw.create;Cu.create;Bf.create;function hp({children:e,title:t,subtitle:s}){return r.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:r.jsxs("div",{className:"max-w-md w-full space-y-8",children:[r.jsxs("div",{className:"text-center",children:[r.jsx("h1",{className:"text-3xl font-bold text-primary-600",children:"PaymentSystem"}),r.jsx("h2",{className:"mt-6 text-2xl font-bold text-gray-900",children:t}),s&&r.jsx("p",{className:"mt-2 text-sm text-gray-600",children:s})]}),r.jsx("div",{className:"bg-white py-8 px-6 shadow-sm rounded-xl border border-gray-200",children:e})]})})}const Qme=Xme({email:fM().min(1,"Phone number or email is required"),password:fM().min(1,"Password is required")});function Zme(){var E,_,T,A;const[e,t]=p.useState(null),[s,a]=p.useState(!1),[n,i]=p.useState(""),[o,l]=p.useState(null),{login:c}=pt(),d=Ut(),f=(_=(E=$i().state)==null?void 0:E.from)==null?void 0:_.pathname,{register:x,handleSubmit:y,formState:{errors:v,isSubmitting:w}}=bme({resolver:Nme(Qme)}),N=async P=>{try{t(null);const M=await c(P);if("mfaRequired"in M&&M.mfaRequired){a(!0),l({email:P.email,password:P.password});return}const $=f||vO(M.roles);d($,{replace:!0})}catch(M){const R=M instanceof Error?M.message:"Invalid credentials";t(R)}},k=async P=>{if(P.preventDefault(),!(!o||n.length!==6))try{t(null);const R=await c({email:o.email,password:o.password,mfaCode:n}),$=f||vO(R.roles);d($,{replace:!0})}catch(M){const R=M instanceof Error?M.message:"Invalid verification code";t(R)}},C=()=>{a(!1),i(""),l(null),t(null)};return s?r.jsx(hp,{title:"Two-Factor Authentication",subtitle:"Enter the code from your authenticator app",children:r.jsxs("form",{onSubmit:k,className:"space-y-6",children:[e&&r.jsxs("div",{className:"flex items-center gap-2 p-3 bg-red-50 border border-red-200 rounded-lg text-red-700 text-sm",children:[r.jsx(dt,{className:"w-5 h-5 flex-shrink-0"}),e]}),r.jsx("div",{className:"flex justify-center",children:r.jsx("div",{className:"w-16 h-16 bg-primary-100 rounded-full flex items-center justify-center",children:r.jsx(Ws,{className:"w-8 h-8 text-primary-600"})})}),r.jsx("p",{className:"text-center text-sm text-gray-600",children:"Open your authenticator app and enter the 6-digit code for your Peeap account."}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1 text-center",children:"Verification Code"}),r.jsx("input",{type:"text",value:n,onChange:P=>i(P.target.value.replace(/\D/g,"").slice(0,6)),maxLength:6,inputMode:"numeric",autoFocus:!0,className:"w-full px-4 py-4 border border-gray-300 rounded-xl text-center text-2xl tracking-[0.5em] focus:ring-2 focus:ring-primary-500 focus:border-primary-500",placeholder:"000000"})]}),r.jsx(Oe,{type:"submit",className:"w-full",disabled:n.length!==6,children:"Verify"}),r.jsxs("button",{type:"button",onClick:C,className:"w-full flex items-center justify-center gap-2 text-sm text-gray-600 hover:text-gray-900",children:[r.jsx(Ar,{className:"w-4 h-4"}),"Back to login"]})]})}):r.jsx(hp,{title:"Sign in to your account",subtitle:"Welcome back! Please enter your details.",children:r.jsxs("form",{onSubmit:y(N),className:"space-y-6",children:[e&&r.jsxs("div",{className:"flex items-center gap-2 p-3 bg-red-50 border border-red-200 rounded-lg text-red-700 text-sm",children:[r.jsx(dt,{className:"w-5 h-5 flex-shrink-0"}),e]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone Number or Email"}),r.jsxs("div",{className:"relative",children:[r.jsx("div",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",children:r.jsx(Ss,{className:"w-4 h-4"})}),r.jsx("input",{type:"text",placeholder:"+1234567890 or email@example.com",className:"w-full pl-10 pr-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",...x("email")})]}),((T=v.email)==null?void 0:T.message)&&r.jsx("p",{className:"mt-1 text-sm text-red-500",children:v.email.message}),r.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Primary: Phone number | Alternative: Email"})]}),r.jsx(Rh,{label:"Password",type:"password",placeholder:"Enter your password",error:(A=v.password)==null?void 0:A.message,...x("password")}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("label",{className:"flex items-center",children:[r.jsx("input",{type:"checkbox",className:"rounded border-gray-300 text-primary-600 focus:ring-primary-500"}),r.jsx("span",{className:"ml-2 text-sm text-gray-600",children:"Remember me"})]}),r.jsx(xt,{to:"/forgot-password",className:"text-sm text-primary-600 hover:text-primary-700",children:"Forgot password?"})]}),r.jsx(Oe,{type:"submit",className:"w-full",isLoading:w,children:"Sign in"}),r.jsxs("p",{className:"text-center text-sm text-gray-600",children:["Don't have an account?"," ",r.jsx(xt,{to:"/register",className:"text-primary-600 hover:text-primary-700 font-medium",children:"Sign up"})]})]})})}const xM=[{id:"user",label:"Personal Account",description:"For individuals who want to make payments, hold funds, and manage their money",icon:br,color:"border-blue-500 bg-blue-50 text-blue-700",selectedColor:"border-blue-500 bg-blue-500 text-white",features:["Send & receive money","Pay bills","Get a virtual card","Track spending"]},{id:"merchant",label:"Business Account",description:"For businesses who want to accept payments from customers online or in-store",icon:mr,color:"border-green-500 bg-green-50 text-green-700",selectedColor:"border-green-500 bg-green-500 text-white",features:["Accept payments","Payment SDK integration","Business dashboard","Sales analytics"]},{id:"agent",label:"Agent Account",description:"For agents who facilitate transactions and help users with cash-in/cash-out services",icon:Uo,color:"border-orange-500 bg-orange-50 text-orange-700",selectedColor:"border-orange-500 bg-orange-500 text-white",features:["Process deposits","Process withdrawals","Earn commissions","Agent dashboard"]}],Jme=e=>{if(!e)return"";let t=e.replace(/\D/g,"");return t.startsWith("232")&&(t=t.substring(3)),!t.startsWith("0")&&t.length===8&&(t="0"+t),t},tm=[{id:1,title:"Account",description:"Login credentials"},{id:2,title:"Business Info",description:"Business details"},{id:3,title:"Categories",description:"What you sell"}];function efe(){const e=Ut(),{login:t}=pt(),[s,a]=p.useState("select_type"),[n,i]=p.useState(null),[o,l]=p.useState(null),[c,d]=p.useState(!1),[h,f]=p.useState(1),[x,y]=p.useState({firstName:"",lastName:"",email:"",phone:"",password:"",confirmPassword:"",businessName:"",businessType:"",businessAddress:"",registrationNumber:"",taxId:"",description:"",nationalId:"",agentLocation:""}),[v,w]=p.useState([]),[N,k]=p.useState(null),[C,E]=p.useState([]);p.useEffect(()=>{n==="merchant"&&_()},[n]);const _=async()=>{const{data:G,error:te}=await X.from("business_categories").select("id, name, parent_id, icon").eq("status","ACTIVE").order("sort_order",{ascending:!0});!te&&G&&w(G)},T=v.filter(G=>!G.parent_id),A=G=>v.filter(te=>te.parent_id===G),P=G=>{k(G===N?null:G)},M=G=>{if(C.some(he=>he.id===G.id)){const he=C.filter(ne=>ne.id!==G.id);he.length>0&&!he.some(ne=>ne.is_primary)&&(he[0].is_primary=!0),E(he)}else E([...C,{id:G.id,name:G.name,is_primary:C.length===0}])},R=(G,te)=>{y(he=>({...he,[G]:te})),l(null)},$=()=>x.password.length<8?(l("Password must be at least 8 characters"),!1):/[A-Z]/.test(x.password)?/[a-z]/.test(x.password)?/[0-9]/.test(x.password)?x.password!==x.confirmPassword?(l("Passwords don't match"),!1):!0:(l("Password must contain at least one number"),!1):(l("Password must contain at least one lowercase letter"),!1):(l("Password must contain at least one uppercase letter"),!1),W=G=>{i(G)},I=()=>{n&&(a("form"),f(1))},B=()=>{a("select_type"),l(null),f(1)},O=async G=>{var te;d(!0),l(null);try{if(!x.firstName.trim()){l("First name is required"),d(!1);return}if(!x.lastName.trim()){l("Last name is required"),d(!1);return}if(!x.email.trim()){l("Email is required"),d(!1);return}if(!x.phone.trim()){l("Phone number is required"),d(!1);return}if(!$()){d(!1);return}const he=Jme(x.phone),{data:ne}=await X.from("users").select("id").eq("email",x.email).limit(1);if(ne&&ne.length>0){l("A user with this email already exists"),d(!1);return}if(he){const{data:oe}=await X.from("users").select("id").eq("phone",he).limit(1);if(oe&&oe.length>0){l("A user with this phone number already exists"),d(!1);return}}const ce=`usr_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,{data:xe,error:_e}=await X.from("users").insert({external_id:ce,email:x.email,phone:he||null,password_hash:x.password,first_name:x.firstName,last_name:x.lastName,business_name:G==="merchant"?x.businessName:null,business_category_id:G==="merchant"&&((te=C.find(oe=>oe.is_primary))==null?void 0:te.id)||null,status:"ACTIVE",kyc_status:"NOT_STARTED",email_verified:!1,roles:G,kyc_tier:0}).select().single();if(_e){console.error("Registration error:",_e),l(_e.message||"Failed to create account"),d(!1);return}if(console.log("User created successfully with role:",G,xe),G==="merchant"&&C.length>0&&(xe!=null&&xe.id)){const oe=C.map(ie=>({user_id:xe.id,business_category_id:ie.id,is_primary:ie.is_primary}));await X.from("merchant_business_categories").insert(oe)}try{await t({email:x.email,password:x.password}),e(G==="merchant"?"/merchant":G==="agent"?"/agent":"/dashboard")}catch{e("/login")}}catch(he){console.error("Registration error:",he),l(he.message||"Registration failed")}finally{d(!1)}},F=async()=>{n&&await O(n)},q=G=>{switch(l(null),G){case 1:return x.firstName.trim()?x.lastName.trim()?x.email.trim()?x.phone.trim()?!!$():(l("Phone number is required"),!1):(l("Email is required"),!1):(l("Last name is required"),!1):(l("First name is required"),!1);case 2:return x.businessName.trim()?!0:(l("Business name is required"),!1);default:return!0}},H=()=>{q(h)&&(h<tm.length?f(G=>G+1):O("merchant"))},K=()=>{h>1?f(G=>G-1):B()};if(s==="select_type")return r.jsx(hp,{title:"Choose your account type",subtitle:"Select how you want to use Peeap",children:r.jsxs("div",{className:"space-y-4",children:[xM.map(G=>{const te=G.icon,he=n===G.id;return r.jsx("button",{type:"button",onClick:()=>W(G.id),className:`w-full p-4 rounded-xl border-2 text-left transition-all ${he?G.selectedColor+" shadow-lg scale-[1.02]":"border-gray-200 hover:border-gray-300 bg-white"}`,children:r.jsxs("div",{className:"flex items-start gap-4",children:[r.jsx("div",{className:`p-3 rounded-lg ${he?"bg-white/20":G.color.split(" ")[1]}`,children:r.jsx(te,{className:`w-6 h-6 ${he?"text-white":G.color.split(" ")[2]}`})}),r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("h3",{className:`font-semibold text-lg ${he?"text-white":"text-gray-900"}`,children:G.label}),he&&r.jsx(Ae,{className:"w-5 h-5 text-white"})]}),r.jsx("p",{className:`text-sm mt-1 ${he?"text-white/80":"text-gray-600"}`,children:G.description}),r.jsx("div",{className:"flex flex-wrap gap-2 mt-3",children:G.features.map((ne,ce)=>r.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${he?"bg-white/20 text-white":"bg-gray-100 text-gray-600"}`,children:ne},ce))})]})]})},G.id)}),r.jsx(Oe,{type:"button",className:"w-full mt-6",onClick:I,disabled:!n,children:"Continue"}),r.jsxs("p",{className:"text-center text-sm text-gray-600 mt-4",children:["Already have an account?"," ",r.jsx(xt,{to:"/login",className:"text-primary-600 hover:text-primary-700 font-medium",children:"Sign in"})]})]})});const V=xM.find(G=>G.id===n),z=(V==null?void 0:V.icon)||br;return n==="merchant"?r.jsx(hp,{title:"Create Business Account",subtitle:`Step ${h} of ${tm.length}: ${tm[h-1].description}`,children:r.jsxs("div",{className:"space-y-6",children:[r.jsx("div",{className:"flex items-center justify-between mb-6",children:tm.map((G,te)=>r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-sm font-semibold ${h>G.id?"bg-green-600 text-white":h===G.id?"bg-green-500 text-white":"bg-gray-200 text-gray-500"}`,children:h>G.id?r.jsx(Ae,{className:"w-4 h-4"}):G.id}),te<tm.length-1&&r.jsx("div",{className:`w-8 sm:w-16 h-1 mx-1 ${h>G.id?"bg-green-600":"bg-gray-200"}`})]},G.id))}),o&&r.jsxs("div",{className:"flex items-center gap-2 p-3 bg-red-50 border border-red-200 rounded-lg text-red-700 text-sm",children:[r.jsx(dt,{className:"w-5 h-5 flex-shrink-0"}),o]}),h===1&&r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center gap-2 text-green-700 bg-green-50 border border-green-200 rounded-lg p-3",children:[r.jsx(br,{className:"w-5 h-5"}),r.jsx("span",{className:"font-medium",children:"Account Information"})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"First Name *"}),r.jsx("input",{type:"text",value:x.firstName,onChange:G=>R("firstName",G.target.value),className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500",placeholder:"John"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Last Name *"}),r.jsx("input",{type:"text",value:x.lastName,onChange:G=>R("lastName",G.target.value),className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500",placeholder:"Doe"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email *"}),r.jsx("input",{type:"email",value:x.email,onChange:G=>R("email",G.target.value),className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500",placeholder:"john@business.com"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone Number *"}),r.jsx("input",{type:"tel",value:x.phone,onChange:G=>R("phone",G.target.value),className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500",placeholder:"+232 XX XXX XXXX"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Password *"}),r.jsx("input",{type:"password",value:x.password,onChange:G=>R("password",G.target.value),className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500",placeholder:"Min 8 chars, uppercase, lowercase, number"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Confirm Password *"}),r.jsx("input",{type:"password",value:x.confirmPassword,onChange:G=>R("confirmPassword",G.target.value),className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500",placeholder:"Confirm your password"})]})]}),h===2&&r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center gap-2 text-green-700 bg-green-50 border border-green-200 rounded-lg p-3",children:[r.jsx(Da,{className:"w-5 h-5"}),r.jsx("span",{className:"font-medium",children:"Business Information"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Business Name *"}),r.jsx("input",{type:"text",value:x.businessName,onChange:G=>R("businessName",G.target.value),className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500",placeholder:"Your Business Name"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Business Type"}),r.jsxs("select",{value:x.businessType,onChange:G=>R("businessType",G.target.value),className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500",children:[r.jsx("option",{value:"",children:"Select business type"}),r.jsx("option",{value:"sole_proprietorship",children:"Sole Proprietorship"}),r.jsx("option",{value:"partnership",children:"Partnership"}),r.jsx("option",{value:"llc",children:"LLC"}),r.jsx("option",{value:"corporation",children:"Corporation"}),r.jsx("option",{value:"nonprofit",children:"Non-Profit"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Business Address"}),r.jsx("input",{type:"text",value:x.businessAddress,onChange:G=>R("businessAddress",G.target.value),className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500",placeholder:"123 Main Street, Freetown"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Registration Number (Optional)"}),r.jsx("input",{type:"text",value:x.registrationNumber,onChange:G=>R("registrationNumber",G.target.value),className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500",placeholder:"REG-XXXXX"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),r.jsx("textarea",{value:x.description,onChange:G=>R("description",G.target.value),rows:3,className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500",placeholder:"Describe your business..."})]})]}),h===3&&r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center gap-2 text-green-700 bg-green-50 border border-green-200 rounded-lg p-3",children:[r.jsx(Gy,{className:"w-5 h-5"}),r.jsx("span",{className:"font-medium",children:"Business Categories"})]}),r.jsx("p",{className:"text-sm text-gray-500",children:"Select categories that describe what you sell."}),C.length>0&&r.jsxs("div",{className:"p-3 bg-green-50 border border-green-200 rounded-lg",children:[r.jsxs("p",{className:"text-sm font-medium text-green-700 mb-2",children:["Selected (",C.length,"):"]}),r.jsx("div",{className:"flex flex-wrap gap-2",children:C.map(G=>r.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs ${G.is_primary?"bg-green-200 text-green-800":"bg-white text-gray-700 border"}`,children:[G.name,G.is_primary&&r.jsx("span",{className:"text-[10px] bg-green-300 px-1 rounded",children:"Primary"})]},G.id))})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-0 border border-gray-200 rounded-lg overflow-hidden max-h-60",children:[r.jsxs("div",{className:"border-r border-gray-200 overflow-y-auto",children:[r.jsx("div",{className:"bg-gray-50 px-3 py-2 border-b text-xs font-medium text-gray-600",children:"Categories"}),T.map(G=>{const te=N===G.id;return r.jsxs("button",{type:"button",onClick:()=>P(G.id),className:`w-full flex items-center justify-between px-3 py-2 text-left text-sm hover:bg-gray-50 border-b border-gray-100 ${te?"bg-green-50 border-l-2 border-l-green-500":""}`,children:[r.jsx("span",{className:te?"text-green-700 font-medium":"text-gray-700",children:G.name}),r.jsx(Qr,{className:"w-4 h-4 text-gray-400"})]},G.id)})]}),r.jsxs("div",{className:"overflow-y-auto",children:[r.jsx("div",{className:"bg-gray-50 px-3 py-2 border-b text-xs font-medium text-gray-600",children:"Subcategories"}),N?A(N).length>0?r.jsx("div",{className:"p-2 space-y-1",children:A(N).map(G=>{const te=C.some(he=>he.id===G.id);return r.jsxs("label",{className:`flex items-center gap-2 p-2 rounded cursor-pointer text-sm ${te?"bg-green-50 border border-green-200":"hover:bg-gray-50"}`,children:[r.jsx("input",{type:"checkbox",checked:te,onChange:()=>M(G),className:"w-4 h-4 text-green-600 rounded"}),r.jsx("span",{className:te?"text-green-700":"text-gray-700",children:G.name})]},G.id)})}):r.jsx("div",{className:"p-4 text-center text-gray-400 text-sm",children:"No subcategories"}):r.jsx("div",{className:"p-4 text-center text-gray-400 text-sm",children:"Select a category"})]})]})]}),r.jsxs("div",{className:"flex items-center justify-between pt-4 border-t",children:[r.jsxs("button",{type:"button",onClick:K,className:"flex items-center gap-2 text-gray-600 hover:text-gray-900",children:[r.jsx(Ar,{className:"w-4 h-4"}),"Back"]}),r.jsx(Oe,{onClick:H,isLoading:c,className:"bg-green-600 hover:bg-green-700",children:h<tm.length?r.jsxs(r.Fragment,{children:["Continue ",r.jsx(os,{className:"w-4 h-4 ml-1"})]}):r.jsxs(r.Fragment,{children:["Create Business Account ",r.jsx(Ae,{className:"w-4 h-4 ml-1"})]})})]}),r.jsxs("p",{className:"text-center text-sm text-gray-600",children:["Already have an account?"," ",r.jsx(xt,{to:"/login",className:"text-primary-600 hover:text-primary-700 font-medium",children:"Sign in"})]})]})}):r.jsx(hp,{title:`Create your ${(V==null?void 0:V.label)||"account"}`,subtitle:"Fill in your details to get started",children:r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsxs("button",{type:"button",onClick:B,className:"flex items-center gap-2 text-sm text-gray-600 hover:text-gray-900",children:[r.jsx(Ar,{className:"w-4 h-4"}),"Change account type"]}),r.jsxs("div",{className:`flex items-center gap-2 px-3 py-1.5 rounded-full text-sm font-medium ${V==null?void 0:V.color}`,children:[r.jsx(z,{className:"w-4 h-4"}),V==null?void 0:V.label]})]}),o&&r.jsxs("div",{className:"flex items-center gap-2 p-3 bg-red-50 border border-red-200 rounded-lg text-red-700 text-sm",children:[r.jsx(dt,{className:"w-5 h-5 flex-shrink-0"}),o]}),n==="agent"&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"flex items-center gap-2 text-orange-700 bg-orange-50 border border-orange-200 rounded-lg p-3 mb-4",children:[r.jsx(Uo,{className:"w-5 h-5"}),r.jsx("span",{className:"font-medium",children:"Agent Information"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"National ID Number *"}),r.jsx("input",{type:"text",value:x.nationalId,onChange:G=>R("nationalId",G.target.value),className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500",placeholder:"Enter your National ID"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Location / Area of Operation *"}),r.jsx("input",{type:"text",value:x.agentLocation,onChange:G=>R("agentLocation",G.target.value),className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500",placeholder:"e.g., Freetown Central, Lumley"})]}),r.jsxs("div",{className:"flex items-center gap-2 text-blue-700 bg-blue-50 border border-blue-200 rounded-lg p-3 mt-4 mb-4",children:[r.jsx(br,{className:"w-5 h-5"}),r.jsx("span",{className:"font-medium",children:"Personal Information"})]})]}),n==="user"&&r.jsxs("div",{className:"flex items-center gap-2 text-blue-700 bg-blue-50 border border-blue-200 rounded-lg p-3 mb-4",children:[r.jsx(br,{className:"w-5 h-5"}),r.jsx("span",{className:"font-medium",children:"Personal Information"})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"First Name *"}),r.jsx("input",{type:"text",value:x.firstName,onChange:G=>R("firstName",G.target.value),className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",placeholder:"John"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Last Name *"}),r.jsx("input",{type:"text",value:x.lastName,onChange:G=>R("lastName",G.target.value),className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",placeholder:"Doe"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email *"}),r.jsx("input",{type:"email",value:x.email,onChange:G=>R("email",G.target.value),className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",placeholder:"john@example.com"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone Number *"}),r.jsx("input",{type:"tel",value:x.phone,onChange:G=>R("phone",G.target.value),className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",placeholder:"+232 XX XXX XXXX"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Password *"}),r.jsx("input",{type:"password",value:x.password,onChange:G=>R("password",G.target.value),className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",placeholder:"Min 8 chars, uppercase, lowercase, number"}),r.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Must be at least 8 characters with uppercase, lowercase, and number"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Confirm Password *"}),r.jsx("input",{type:"password",value:x.confirmPassword,onChange:G=>R("confirmPassword",G.target.value),className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",placeholder:"Confirm your password"})]}),r.jsxs(Oe,{onClick:F,className:"w-full",isLoading:c,children:["Create ",V==null?void 0:V.label]}),r.jsxs("p",{className:"text-center text-sm text-gray-600",children:["Already have an account?"," ",r.jsx(xt,{to:"/login",className:"text-primary-600 hover:text-primary-700 font-medium",children:"Sign in"})]})]})})}const tfe=[{path:"/dashboard",label:"Dashboard",icon:UN},{path:"/wallets",label:"Wallets",icon:Rt},{path:"/send",label:"Send Money",icon:Tn},{path:"/receive",label:"Receive Money",icon:Vs},{path:"/payout",label:"Mobile Money Payout",icon:Ws},{path:"/pots",label:"Savings Pots",icon:lo},{path:"/cards",label:"Cards",icon:lt},{path:"/transactions",label:"Transactions",icon:Pl},{path:"/profile",label:"Profile",icon:br},{path:"/support",label:"Help & Support",icon:N6}];function dn({children:e}){var c,d;const[t,s]=p.useState(!1),{user:a,logout:n}=pt(),i=$i(),o=Ut(),l=async()=>{await n(),o("/login")};return r.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:[t&&r.jsx("div",{className:"fixed inset-0 z-40 bg-gray-600 bg-opacity-75 lg:hidden",onClick:()=>s(!1)}),r.jsx("aside",{className:fe("fixed inset-y-0 left-0 z-50 w-64 bg-white dark:bg-gray-800 border-r border-gray-200 dark:border-gray-700 transform transition-transform duration-300 ease-in-out lg:translate-x-0",t?"translate-x-0":"-translate-x-full"),children:r.jsxs("div",{className:"flex flex-col h-full",children:[r.jsxs("div",{className:"flex items-center justify-between h-16 px-6 border-b border-gray-200 dark:border-gray-700",children:[r.jsx(xt,{to:"/dashboard",className:"text-xl font-bold text-primary-600 dark:text-primary-400",children:"PaymentSystem"}),r.jsx("button",{className:"lg:hidden p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700",onClick:()=>s(!1),children:r.jsx(Ct,{className:"w-5 h-5 dark:text-gray-400"})})]}),r.jsx("nav",{className:"flex-1 px-4 py-6 space-y-1 overflow-y-auto scrollbar-hide",children:tfe.map(h=>{const f=h.icon,x=i.pathname===h.path;return r.jsxs(xt,{to:h.path,className:fe("flex items-center px-4 py-3 rounded-lg transition-colors",x?"bg-primary-50 dark:bg-primary-900/30 text-primary-700 dark:text-primary-400":"text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700"),children:[r.jsx(f,{className:"w-5 h-5 mr-3"}),h.label]},h.path)})}),r.jsxs("div",{className:"p-4 border-t border-gray-200 dark:border-gray-700",children:[r.jsxs("div",{className:"flex items-center mb-4",children:[r.jsx("div",{className:"w-10 h-10 bg-primary-100 dark:bg-primary-900/30 rounded-full flex items-center justify-center",children:r.jsxs("span",{className:"text-primary-700 dark:text-primary-400 font-medium",children:[(c=a==null?void 0:a.firstName)==null?void 0:c.charAt(0),(d=a==null?void 0:a.lastName)==null?void 0:d.charAt(0)]})}),r.jsxs("div",{className:"ml-3",children:[r.jsxs("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:[a==null?void 0:a.firstName," ",a==null?void 0:a.lastName]}),r.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:a==null?void 0:a.email})]})]}),r.jsxs("button",{onClick:l,className:"flex items-center w-full px-4 py-2 text-gray-600 dark:text-gray-300 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",children:[r.jsx(zy,{className:"w-5 h-5 mr-3"}),"Sign out"]})]})]})}),r.jsxs("div",{className:"lg:pl-64",children:[r.jsx("header",{className:"sticky top-0 z-30 h-16 bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700",children:r.jsxs("div",{className:"flex items-center justify-between h-full px-4 lg:px-8",children:[r.jsx("button",{className:"lg:hidden p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700",onClick:()=>s(!0),children:r.jsx(qy,{className:"w-6 h-6 dark:text-gray-400"})}),r.jsxs("div",{className:"flex items-center space-x-4",children:[r.jsxs("span",{className:"text-sm text-gray-500 dark:text-gray-400 hidden sm:inline",children:["KYC Status:"," ",r.jsx("span",{className:fe("font-medium",(a==null?void 0:a.kycStatus)==="VERIFIED"&&"text-green-600",(a==null?void 0:a.kycStatus)==="PENDING"&&"text-yellow-600",(a==null?void 0:a.kycStatus)==="REJECTED"&&"text-red-600"),children:a==null?void 0:a.kycStatus})]}),r.jsx(JN,{}),r.jsx(rA,{})]})]})}),r.jsx("main",{className:"p-4 lg:p-8",children:e})]})]})}const rm=e=>({id:e.id,userId:e.user_id,balance:parseFloat(e.balance)||0,currency:e.currency||"SLE",status:e.status||"ACTIVE",dailyLimit:parseFloat(e.daily_limit)||5e3,monthlyLimit:parseFloat(e.monthly_limit)||5e4,createdAt:e.created_at,updatedAt:e.updated_at}),kv=e=>({id:e.id,walletId:e.wallet_id,cardId:e.card_id||void 0,type:e.type,amount:parseFloat(e.amount)||0,currency:e.currency||"SLE",status:e.status||"COMPLETED",description:e.description||void 0,merchantName:e.merchant_name||void 0,merchantCategory:e.merchant_category||void 0,reference:e.reference||e.id,createdAt:e.created_at,updatedAt:e.updated_at}),Hu={async getWallets(e){const{data:t,error:s}=await X.from("wallets").select("*").eq("user_id",e).order("created_at",{ascending:!1});if(s)throw console.error("Error fetching wallets:",s),new Error(s.message);return(t||[]).map(rm)},async getWallet(e){const{data:t,error:s}=await X.from("wallets").select("*").eq("id",e).single();if(s)throw console.error("Error fetching wallet:",s),new Error(s.message);return rm(t)},async getWalletByUserId(e){const{data:t,error:s}=await X.from("wallets").select("*").eq("user_id",e).eq("status","ACTIVE").order("created_at",{ascending:!0}).limit(1).single();if(s){if(s.code==="PGRST116")return null;throw console.error("Error fetching wallet by user:",s),new Error(s.message)}return rm(t)},async createWallet(e,t){const s=`WAL-${t.currency||"SLE"}-${Date.now()}-${Math.random().toString(36).substring(2,8)}`,{data:a,error:n}=await X.from("wallets").insert({user_id:e,external_id:s,currency:t.currency||"SLE",balance:0,status:"ACTIVE",daily_limit:t.dailyLimit||5e3,monthly_limit:t.monthlyLimit||5e4}).select().single();if(n)throw console.error("Error creating wallet:",n),new Error(n.message);return rm(a)},async deposit(e){const{data:t,error:s}=await X.rpc("wallet_deposit",{p_wallet_id:e.walletId,p_amount:e.amount,p_reference:e.reference||`DEP-${Date.now()}`,p_description:e.description||"Deposit"});if(s){const{error:i}=await X.from("wallets").update({balance:X.rpc("increment_balance",{amount:e.amount}),updated_at:new Date().toISOString()}).eq("id",e.walletId);if(i){const{data:o}=await X.from("wallets").select("balance").eq("id",e.walletId).single();o&&await X.from("wallets").update({balance:(parseFloat(o.balance)||0)+e.amount,updated_at:new Date().toISOString()}).eq("id",e.walletId)}}const{data:a,error:n}=await X.from("transactions").insert({wallet_id:e.walletId,type:"DEPOSIT",amount:e.amount,currency:"SLE",status:"COMPLETED",description:e.description||"Deposit",reference:e.reference||`DEP-${Date.now()}`}).select().single();if(n)throw console.error("Error creating deposit transaction:",n),new Error(n.message);return kv(a)},async transfer(e){let t=e.toWalletId;if(e.toUserId&&!t){const{data:v,error:w}=await X.from("wallets").select("id").eq("user_id",e.toUserId).eq("status","ACTIVE").limit(1).single();if(w||!v)throw new Error("Recipient wallet not found");t=v.id}if(!t)throw new Error("Recipient wallet ID is required");const{data:s,error:a}=await X.rpc("wallet_transfer",{p_from_wallet_id:e.fromWalletId,p_to_wallet_id:t,p_amount:e.amount,p_description:e.description||"Transfer"});if(!a&&s){const{data:v}=await X.from("transactions").select("*").eq("wallet_id",e.fromWalletId).eq("type","TRANSFER").order("created_at",{ascending:!1}).limit(1).single();if(v)return kv(v)}const{data:n,error:i}=await X.from("wallets").select("balance, status").eq("id",e.fromWalletId).single();if(i||!n)throw new Error("Source wallet not found");if(n.status!=="ACTIVE")throw new Error("Source wallet is not active");const o=parseFloat(n.balance)||0;if(o<e.amount)throw new Error("Insufficient balance");const{error:l}=await X.from("wallets").update({balance:o-e.amount,updated_at:new Date().toISOString()}).eq("id",e.fromWalletId);if(l)throw new Error("Failed to debit source wallet");const{data:c}=await X.from("wallets").select("balance").eq("id",t).single(),d=parseFloat(c==null?void 0:c.balance)||0,{error:h}=await X.from("wallets").update({balance:d+e.amount,updated_at:new Date().toISOString()}).eq("id",t);if(h)throw await X.from("wallets").update({balance:o}).eq("id",e.fromWalletId),new Error("Failed to credit destination wallet");const f=`TRF-${Date.now()}`,{data:x,error:y}=await X.from("transactions").insert({wallet_id:e.fromWalletId,type:"TRANSFER",amount:-e.amount,currency:"SLE",status:"COMPLETED",description:e.description||"Transfer sent",reference:f}).select().single();return y&&console.error("Error creating debit transaction:",y),await X.from("transactions").insert({wallet_id:t,type:"TRANSFER",amount:e.amount,currency:"SLE",status:"COMPLETED",description:e.description||"Transfer received",reference:f}),x?kv(x):{id:f,walletId:e.fromWalletId,type:"TRANSFER",amount:-e.amount,currency:"SLE",status:"COMPLETED",description:e.description||"Transfer",reference:f,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()}},async getTransactions(e,t){const s=(t==null?void 0:t.page)||1,a=(t==null?void 0:t.limit)||10,n=(s-1)*a,{count:i}=await X.from("transactions").select("*",{count:"exact",head:!0}).eq("wallet_id",e),{data:o,error:l}=await X.from("transactions").select("*").eq("wallet_id",e).order("created_at",{ascending:!1}).range(n,n+a-1);if(l)throw console.error("Error fetching transactions:",l),new Error(l.message);const c=i||0;return{data:(o||[]).map(kv),total:c,page:s,limit:a,totalPages:Math.ceil(c/a)}},async freezeWallet(e){const{data:t,error:s}=await X.from("wallets").update({status:"FROZEN",updated_at:new Date().toISOString()}).eq("id",e).select().single();if(s)throw console.error("Error freezing wallet:",s),new Error(s.message);return rm(t)},async unfreezeWallet(e){const{data:t,error:s}=await X.from("wallets").update({status:"ACTIVE",updated_at:new Date().toISOString()}).eq("id",e).select().single();if(s)throw console.error("Error unfreezing wallet:",s),new Error(s.message);return rm(t)}};function mi(){const{user:e}=pt();return Rn({queryKey:["wallets",e==null?void 0:e.id],queryFn:async()=>e!=null&&e.id?Hu.getWallets(e.id):[],enabled:!!(e!=null&&e.id),staleTime:3e4,retry:2})}function rfe(){const e=cs(),{user:t}=pt();return hs({mutationFn:s=>{if(!(t!=null&&t.id))throw new Error("User not authenticated");return Hu.createWallet(t.id,s)},onSuccess:()=>{e.invalidateQueries({queryKey:["wallets"]})}})}function sfe(){const e=cs();return hs({mutationFn:t=>Hu.deposit(t),onSuccess:(t,s)=>{e.invalidateQueries({queryKey:["wallets"]}),e.invalidateQueries({queryKey:["wallets",s.walletId]}),e.invalidateQueries({queryKey:["transactions",s.walletId]})}})}function afe(){const e=cs();return hs({mutationFn:t=>Hu.transfer(t),onSuccess:(t,s)=>{e.invalidateQueries({queryKey:["wallets"]}),e.invalidateQueries({queryKey:["transactions"]}),e.invalidateQueries({queryKey:["wallets",s.fromWalletId]})}})}function nfe(e,t=1,s=10){return Rn({queryKey:["transactions",e,t,s],queryFn:()=>Hu.getTransactions(e,{page:t,limit:s}),enabled:!!e,staleTime:1e4})}function ife(){const e=cs();return hs({mutationFn:t=>Hu.freezeWallet(t),onSuccess:(t,s)=>{e.invalidateQueries({queryKey:["wallets"]}),e.invalidateQueries({queryKey:["wallets",s]})}})}function ofe(){const e=cs();return hs({mutationFn:t=>Hu.unfreezeWallet(t),onSuccess:(t,s)=>{e.invalidateQueries({queryKey:["wallets"]}),e.invalidateQueries({queryKey:["wallets",s]})}})}const lfe=()=>{let t="4";for(let s=0;s<15;s++)t+=Math.floor(Math.random()*10).toString();return t},g3=e=>`****${e.slice(-4)}`,cfe=()=>Math.floor(100+Math.random()*900).toString(),jm=e=>({id:e.id,name:e.name,description:e.description||"",cardImageUrl:e.card_image_url,price:parseFloat(e.price)||0,transactionFeePercentage:parseFloat(e.transaction_fee_percentage)||0,transactionFeeFixed:parseFloat(e.transaction_fee_fixed)||0,requiredKycLevel:e.required_kyc_level||1,cardType:e.card_type||"VIRTUAL",isActive:e.is_active??!0,dailyLimit:parseFloat(e.daily_limit)||1e3,monthlyLimit:parseFloat(e.monthly_limit)||1e4,colorGradient:e.color_gradient||"from-blue-600 to-blue-800",features:e.features||[],createdAt:e.created_at,updatedAt:e.updated_at,allowNegativeBalance:e.allow_negative_balance??!1,allowBuyNowPayLater:e.allow_buy_now_pay_later??!1,highTransactionLimit:e.high_transaction_limit??!1,noTransactionFees:e.no_transaction_fees??!1,cashbackEnabled:e.cashback_enabled??!1,cashbackPercentage:parseFloat(e.cashback_percentage)||0,overdraftLimit:parseFloat(e.overdraft_limit)||0,bnplMaxAmount:parseFloat(e.bnpl_max_amount)||0,bnplInterestRate:parseFloat(e.bnpl_interest_rate)||0}),cg=e=>({id:e.id,userId:e.user_id,cardTypeId:e.card_type_id,walletId:e.wallet_id,amountPaid:parseFloat(e.amount_paid)||0,currency:e.currency||"SLE",status:e.status||"PENDING",transactionId:e.transaction_id,generatedCardId:e.generated_card_id,cardNumber:e.card_number,qrCodeData:e.qr_code_data,reviewedBy:e.reviewed_by,reviewedAt:e.reviewed_at,reviewNotes:e.review_notes,shippingAddress:e.shipping_address,trackingNumber:e.tracking_number,shippedAt:e.shipped_at,deliveredAt:e.delivered_at,activatedAt:e.activated_at,createdAt:e.created_at,updatedAt:e.updated_at,cardType:e.card_types?jm(e.card_types):void 0,user:e.users?{id:e.users.id,firstName:e.users.first_name,lastName:e.users.last_name,email:e.users.email,phone:e.users.phone,kycStatus:e.users.kyc_status,kycTier:e.users.kyc_tier}:void 0,wallet:e.wallets?{id:e.wallets.id,currency:e.wallets.currency,balance:parseFloat(e.wallets.balance)||0}:void 0}),Ul=e=>({id:e.id,walletId:e.wallet_id,cardNumber:e.card_number||"",maskedNumber:e.masked_number||g3(e.card_number||"0000"),expiryMonth:e.expiry_month||12,expiryYear:e.expiry_year||new Date().getFullYear()+3,cardholderName:e.cardholder_name||"",status:e.status||"ACTIVE",type:e.type||"VIRTUAL",dailyLimit:parseFloat(e.daily_limit)||1e3,monthlyLimit:parseFloat(e.monthly_limit)||1e4,createdAt:e.created_at,updatedAt:e.updated_at}),hn={async getCards(e){const{data:t,error:s}=await X.from("wallets").select("id").eq("user_id",e);if(s||!(t!=null&&t.length))return[];const a=t.map(o=>o.id),{data:n,error:i}=await X.from("cards").select("*").in("wallet_id",a).order("created_at",{ascending:!1});if(i)throw console.error("Error fetching cards:",i),new Error(i.message);return(n||[]).map(Ul)},async getCardsByUserId(e){const{data:t,error:s}=await X.from("cards").select("*").eq("user_id",e).order("created_at",{ascending:!1});return s?this.getCards(e):(t||[]).map(Ul)},async getCard(e){const{data:t,error:s}=await X.from("cards").select("*").eq("id",e).single();if(s)throw console.error("Error fetching card:",s),new Error(s.message);return Ul(t)},async createCard(e,t){const s=lfe(),a=new Date;a.setFullYear(a.getFullYear()+3);const{data:n,error:i}=await X.from("cards").insert({user_id:e,wallet_id:t.walletId,card_number:s,masked_number:g3(s),cvv:cfe(),expiry_month:a.getMonth()+1,expiry_year:a.getFullYear(),cardholder_name:t.cardholderName,type:t.type,status:t.type==="VIRTUAL"?"ACTIVE":"INACTIVE",daily_limit:t.dailyLimit||1e3,monthly_limit:t.monthlyLimit||1e4}).select().single();if(i)throw console.error("Error creating card:",i),new Error(i.message);return Ul(n)},async activateCard(e){const{data:t,error:s}=await X.from("cards").update({status:"ACTIVE",updated_at:new Date().toISOString()}).eq("id",e).select().single();if(s)throw console.error("Error activating card:",s),new Error(s.message);return Ul(t)},async blockCard(e){const{data:t,error:s}=await X.from("cards").update({status:"BLOCKED",updated_at:new Date().toISOString()}).eq("id",e).select().single();if(s)throw console.error("Error blocking card:",s),new Error(s.message);return Ul(t)},async unblockCard(e){const{data:t,error:s}=await X.from("cards").update({status:"ACTIVE",updated_at:new Date().toISOString()}).eq("id",e).select().single();if(s)throw console.error("Error unblocking card:",s),new Error(s.message);return Ul(t)},async updateLimits(e,t){const s={updated_at:new Date().toISOString()};t.dailyLimit!==void 0&&(s.daily_limit=t.dailyLimit),t.monthlyLimit!==void 0&&(s.monthly_limit=t.monthlyLimit);const{data:a,error:n}=await X.from("cards").update(s).eq("id",e).select().single();if(n)throw console.error("Error updating card limits:",n),new Error(n.message);return Ul(a)},async getCardDetails(e){const{data:t,error:s}=await X.from("cards").select("card_number, cvv, expiry_month, expiry_year").eq("id",e).single();if(s)throw console.error("Error fetching card details:",s),new Error(s.message);return{cardNumber:t.card_number,cvv:t.cvv,expiryMonth:t.expiry_month,expiryYear:t.expiry_year}},async getCardTypes(e=!1){let t=X.from("card_types").select("*").order("price",{ascending:!0});e||(t=t.eq("is_active",!0));const{data:s,error:a}=await t;if(a)throw console.error("Error fetching card types:",a),new Error(a.message);return(s||[]).map(jm)},async getCardType(e){const{data:t,error:s}=await X.from("card_types").select("*").eq("id",e).single();if(s)throw console.error("Error fetching card type:",s),new Error(s.message);return jm(t)},async createCardType(e){const t={name:e.name,description:e.description,card_image_url:e.cardImageUrl,price:e.price,transaction_fee_percentage:e.transactionFeePercentage||0,transaction_fee_fixed:e.transactionFeeFixed||0,required_kyc_level:e.requiredKycLevel||1,card_type:e.cardType,is_active:e.isActive??!0,daily_limit:e.dailyLimit||1e3,monthly_limit:e.monthlyLimit||1e4,color_gradient:e.colorGradient||"from-blue-600 to-blue-800",features:e.features||[],allow_negative_balance:e.allowNegativeBalance??!1,allow_buy_now_pay_later:e.allowBuyNowPayLater??!1,high_transaction_limit:e.highTransactionLimit??!1,no_transaction_fees:e.noTransactionFees??!1,cashback_enabled:e.cashbackEnabled??!1,cashback_percentage:e.cashbackPercentage||0,overdraft_limit:e.overdraftLimit||0,bnpl_max_amount:e.bnplMaxAmount||0,bnpl_interest_rate:e.bnplInterestRate||0};console.log("Creating card type with data:",t);const{data:s,error:a}=await X.from("card_types").insert(t).select().single();if(a)throw console.error("Error creating card type:",a),new Error(a.message);return jm(s)},async updateCardType(e,t){const s={updated_at:new Date().toISOString()};t.name!==void 0&&(s.name=t.name),t.description!==void 0&&(s.description=t.description),t.cardImageUrl!==void 0&&(s.card_image_url=t.cardImageUrl),t.price!==void 0&&(s.price=t.price),t.transactionFeePercentage!==void 0&&(s.transaction_fee_percentage=t.transactionFeePercentage),t.transactionFeeFixed!==void 0&&(s.transaction_fee_fixed=t.transactionFeeFixed),t.requiredKycLevel!==void 0&&(s.required_kyc_level=t.requiredKycLevel),t.cardType!==void 0&&(s.card_type=t.cardType),t.isActive!==void 0&&(s.is_active=t.isActive),t.dailyLimit!==void 0&&(s.daily_limit=t.dailyLimit),t.monthlyLimit!==void 0&&(s.monthly_limit=t.monthlyLimit),t.colorGradient!==void 0&&(s.color_gradient=t.colorGradient),t.features!==void 0&&(s.features=t.features),t.allowNegativeBalance!==void 0&&(s.allow_negative_balance=t.allowNegativeBalance),t.allowBuyNowPayLater!==void 0&&(s.allow_buy_now_pay_later=t.allowBuyNowPayLater),t.highTransactionLimit!==void 0&&(s.high_transaction_limit=t.highTransactionLimit),t.noTransactionFees!==void 0&&(s.no_transaction_fees=t.noTransactionFees),t.cashbackEnabled!==void 0&&(s.cashback_enabled=t.cashbackEnabled),t.cashbackPercentage!==void 0&&(s.cashback_percentage=t.cashbackPercentage),t.overdraftLimit!==void 0&&(s.overdraft_limit=t.overdraftLimit),t.bnplMaxAmount!==void 0&&(s.bnpl_max_amount=t.bnplMaxAmount),t.bnplInterestRate!==void 0&&(s.bnpl_interest_rate=t.bnplInterestRate);const{data:a,error:n}=await X.from("card_types").update(s).eq("id",e).select().single();if(n)throw console.error("Error updating card type:",n),new Error(n.message);return jm(a)},async deleteCardType(e){const{error:t}=await X.from("card_types").delete().eq("id",e);if(t)throw console.error("Error deleting card type:",t),new Error(t.message)},async getCardOrders(e){const{data:t,error:s}=await X.from("card_orders").select(`
        *,
        card_types (*),
        wallets (id, currency, balance)
      `).eq("user_id",e).not("status","in",'("REJECTED","CANCELLED")').order("created_at",{ascending:!1});if(s)throw console.error("Error fetching card orders:",s),new Error(s.message);return(t||[]).map(cg)},async getAllCardOrders(e){console.log("Fetching all card orders, status filter:",e);let t=X.from("card_orders").select(`
        *,
        card_types (*)
      `).order("created_at",{ascending:!1});e&&(t=t.eq("status",e));const{data:s,error:a}=await t;if(console.log("Card orders query result:",{data:s,error:a,count:s==null?void 0:s.length}),a)throw console.error("Error fetching all card orders:",a),new Error(a.message);if(!s||s.length===0)return console.log("No card orders found"),[];const n=[...new Set(s.map(h=>h.user_id).filter(Boolean))],i=[...new Set(s.map(h=>h.wallet_id).filter(Boolean))],{data:o}=await X.from("users").select("id, first_name, last_name, email, phone, kyc_status, kyc_tier").in("id",n),{data:l}=await X.from("wallets").select("id, currency, balance").in("id",i),c=new Map((o||[]).map(h=>[h.id,h])),d=new Map((l||[]).map(h=>[h.id,h]));return s.map(h=>cg({...h,users:c.get(h.user_id)||null,wallets:d.get(h.wallet_id)||null}))},async getCardOrder(e){console.log("Fetching card order:",e);const{data:t,error:s}=await X.from("card_orders").select("*").eq("id",e).maybeSingle();if(console.log("Card order fetch result:",{data:t,error:s}),s)throw console.error("Error fetching card order:",s),new Error(s.message);if(!t)return console.warn("Card order not found, returning minimal object"),{id:e,userId:"",cardTypeId:"",walletId:"",amountPaid:0,currency:"SLE",status:"PENDING",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};let a=null,n=null,i=null;if(t.card_type_id){const{data:o}=await X.from("card_types").select("*").eq("id",t.card_type_id).maybeSingle();a=o}if(t.user_id){const{data:o}=await X.from("users").select("id, first_name, last_name, email, phone, kyc_status, kyc_tier").eq("id",t.user_id).maybeSingle();n=o}if(t.wallet_id){const{data:o}=await X.from("wallets").select("id, currency, balance").eq("id",t.wallet_id).maybeSingle();i=o}return cg({...t,card_types:a,users:n,wallets:i})},async createCardOrder(e,t){console.log("Creating card order:",{userId:e,data:t});const{data:s,error:a}=await X.rpc("create_card_order",{p_user_id:e,p_card_type_id:t.cardTypeId,p_wallet_id:t.walletId});if(console.log("RPC result:",{orderId:s,error:a}),a)throw console.error("Error creating card order:",a),new Error(a.message);if(!s)throw new Error("Failed to create order - no order ID returned");const n={};if(t.shippingAddress&&(n.shipping_address=t.shippingAddress),t.cardholderName&&(n.cardholder_name=t.cardholderName),t.cardPin&&(n.card_pin=t.cardPin),t.giftRecipientId&&(n.gift_recipient_id=t.giftRecipientId,n.is_gift=!0),Object.keys(n).length>0){const{error:i}=await X.from("card_orders").update(n).eq("id",s);i&&console.warn("Failed to update additional fields:",i)}return this.getCardOrder(s)},async generateCard(e,t,s){const{data:a,error:n}=await X.rpc("admin_generate_card",{p_order_id:e,p_admin_id:t,p_notes:s||null});if(n)throw console.error("Error generating card:",n),new Error(n.message);return a},async rejectCardOrder(e,t,s){var o;const a=await this.getCardOrder(e);if(await X.rpc("wallet_deposit",{p_wallet_id:a.walletId,p_amount:a.amountPaid,p_description:`Refund for rejected card order: ${((o=a.cardType)==null?void 0:o.name)||"Card"}`}),a.generatedCardId){const{error:l}=await X.from("cards").delete().eq("id",a.generatedCardId);l&&console.error("Error deleting generated card:",l)}const{data:n,error:i}=await X.from("card_orders").update({status:"REJECTED",reviewed_by:t,reviewed_at:new Date().toISOString(),review_notes:s,generated_card_id:null,updated_at:new Date().toISOString()}).eq("id",e).select(`
        *,
        card_types (*),
        users:user_id (id, first_name, last_name, email, phone, kyc_status, kyc_tier),
        wallets (id, currency, balance)
      `).single();if(i)throw console.error("Error rejecting card order:",i),new Error(i.message);return cg(n)},async updateShipping(e,t){const{data:s,error:a}=await X.from("card_orders").update({tracking_number:t,shipped_at:new Date().toISOString(),updated_at:new Date().toISOString()}).eq("id",e).select(`
        *,
        card_types (*),
        users:user_id (id, first_name, last_name, email, phone, kyc_status, kyc_tier),
        wallets (id, currency, balance)
      `).single();if(a)throw console.error("Error updating shipping:",a),new Error(a.message);return cg(s)},async activateCardByQR(e,t){const{data:s,error:a}=await X.rpc("activate_card_by_qr",{p_qr_code:e,p_user_id:t});if(a)throw console.error("Error activating card by QR:",a),new Error(a.message);return s},async getCardByQR(e){const{data:t,error:s}=await X.from("cards").select("*").eq("qr_code",e).single();if(s){if(s.code==="PGRST116")return null;throw console.error("Error fetching card by QR:",s),new Error(s.message)}return Ul(t)},async getCardWithType(e){const{data:t,error:s}=await X.from("cards").select(`
        *,
        card_types (*)
      `).eq("id",e).single();if(s)throw console.error("Error fetching card with type:",s),new Error(s.message);return{...Ul(t),cardType:t.card_types?jm(t.card_types):void 0}},async lookupCardForPayment(e){const t=e.replace(/[\s-]/g,""),{data:s,error:a}=await X.from("cards").select(`
        id,
        card_number,
        masked_number,
        cardholder_name,
        status,
        wallet_id,
        wallets (id, balance, currency)
      `).eq("card_number",t).maybeSingle();if(a)throw console.error("Error looking up card:",a),new Error("Failed to look up card");if(!s)return null;if(s.status!=="ACTIVE")throw new Error(`Card is ${s.status.toLowerCase()}. Please use an active card.`);const n=Array.isArray(s.wallets)?s.wallets[0]:s.wallets;return{cardId:s.id,maskedNumber:s.masked_number||g3(s.card_number),cardholderName:s.cardholder_name||"Card Holder",walletId:s.wallet_id,walletBalance:parseFloat(n==null?void 0:n.balance)||0,currency:(n==null?void 0:n.currency)||"SLE",status:s.status}},async verifyCardPin(e,t){const{data:s,error:a}=await X.from("cards").select("transaction_pin").eq("id",e).single();if(a)throw console.error("Error verifying PIN:",a),new Error("Failed to verify PIN");if(!s.transaction_pin)throw new Error("Transaction PIN not set for this card. Please set a PIN in your Peeap app.");return s.transaction_pin===t},async processCardPayment(e){const{cardId:t,walletId:s,amount:a,merchantId:n,description:i,checkoutSessionId:o}=e,{data:l,error:c}=await X.rpc("process_card_checkout_payment",{p_card_id:t,p_wallet_id:s,p_amount:a,p_merchant_id:n,p_description:i,p_checkout_session_id:o});if(c)throw console.error("Error processing card payment:",c),c.message.includes("insufficient")?new Error("Insufficient funds in your wallet"):new Error(c.message||"Payment failed");return{success:!0,transactionId:l}}};function r2(){const{user:e}=pt();return Rn({queryKey:["cards",e==null?void 0:e.id],queryFn:async()=>e!=null&&e.id?hn.getCards(e.id):[],enabled:!!(e!=null&&e.id),staleTime:3e4,retry:2})}function dfe(){const e=cs(),{user:t}=pt();return hs({mutationFn:s=>{if(!(t!=null&&t.id))throw new Error("User not authenticated");return hn.createCard(t.id,s)},onSuccess:()=>{e.invalidateQueries({queryKey:["cards"]})}})}function Hz(){const e=cs();return hs({mutationFn:t=>hn.activateCard(t),onSuccess:(t,s)=>{e.invalidateQueries({queryKey:["cards"]}),e.invalidateQueries({queryKey:["cards",s]})}})}function Kz(){const e=cs();return hs({mutationFn:t=>hn.blockCard(t),onSuccess:(t,s)=>{e.invalidateQueries({queryKey:["cards"]}),e.invalidateQueries({queryKey:["cards",s]})}})}function Gz(){const e=cs();return hs({mutationFn:t=>hn.unblockCard(t),onSuccess:(t,s)=>{e.invalidateQueries({queryKey:["cards"]}),e.invalidateQueries({queryKey:["cards",s]})}})}function cA(e=!1){return Rn({queryKey:["cardTypes",{includeInactive:e}],queryFn:()=>hn.getCardTypes(e),staleTime:6e4})}function Yz(){const e=cs();return hs({mutationFn:t=>hn.createCardType(t),onSuccess:()=>{e.invalidateQueries({queryKey:["cardTypes"]})}})}function Xz(){const e=cs();return hs({mutationFn:({id:t,data:s})=>hn.updateCardType(t,s),onSuccess:(t,{id:s})=>{e.invalidateQueries({queryKey:["cardTypes"]}),e.invalidateQueries({queryKey:["cardTypes",s]})}})}function Qz(){const e=cs();return hs({mutationFn:t=>hn.deleteCardType(t),onSuccess:()=>{e.invalidateQueries({queryKey:["cardTypes"]})}})}function Zz(){const{user:e}=pt();return Rn({queryKey:["cardOrders",e==null?void 0:e.id],queryFn:async()=>e!=null&&e.id?hn.getCardOrders(e.id):[],enabled:!!(e!=null&&e.id),staleTime:3e4})}function ufe(e){return Rn({queryKey:["cardOrders","all",e],queryFn:()=>hn.getAllCardOrders(e),staleTime:3e4})}function hfe(){const e=cs(),{user:t}=pt();return hs({mutationFn:s=>{if(!(t!=null&&t.id))throw new Error("User not authenticated");return hn.createCardOrder(t.id,s)},onSuccess:()=>{e.invalidateQueries({queryKey:["cardOrders"]}),e.invalidateQueries({queryKey:["wallets"]})}})}function mfe(){const e=cs(),{user:t}=pt();return hs({mutationFn:({orderId:s,notes:a})=>{if(!(t!=null&&t.id))throw new Error("User not authenticated");return hn.generateCard(s,t.id,a)},onSuccess:(s,{orderId:a})=>{e.invalidateQueries({queryKey:["cardOrders"]}),e.invalidateQueries({queryKey:["cardOrders",a]}),e.invalidateQueries({queryKey:["cards"]})}})}function ffe(){const e=cs(),{user:t}=pt();return hs({mutationFn:({orderId:s,notes:a})=>{if(!(t!=null&&t.id))throw new Error("User not authenticated");return hn.rejectCardOrder(s,t.id,a)},onSuccess:(s,{orderId:a})=>{e.invalidateQueries({queryKey:["cards"]}),e.invalidateQueries({queryKey:["cardOrders"]}),e.invalidateQueries({queryKey:["cardOrders",a]}),e.invalidateQueries({queryKey:["wallets"]})}})}function xfe(){const e=cs();return hs({mutationFn:({orderId:t,trackingNumber:s})=>hn.updateShipping(t,s),onSuccess:(t,{orderId:s})=>{e.invalidateQueries({queryKey:["cardOrders"]}),e.invalidateQueries({queryKey:["cardOrders",s]})}})}function gfe(){const e=cs(),{user:t}=pt();return hs({mutationFn:s=>{if(!(t!=null&&t.id))throw new Error("User not authenticated");return hn.activateCardByQR(s,t.id)},onSuccess:()=>{e.invalidateQueries({queryKey:["cards"]}),e.invalidateQueries({queryKey:["cardOrders"]})}})}function pfe(e){return Rn({queryKey:["cards",e,"withType"],queryFn:()=>hn.getCardWithType(e),enabled:!!e,staleTime:3e4})}function yfe(e=10){const{user:t}=pt();return Rn({queryKey:["transactions",t==null?void 0:t.id,e],queryFn:async()=>{if(!(t!=null&&t.id))return[];const{data:s,error:a}=await X.from("wallets").select("id").eq("user_id",t.id);if(a||!(s!=null&&s.length))return console.error("Error fetching wallets:",a),[];const n=s.map(l=>l.id),{data:i,error:o}=await X.from("transactions").select("*").in("wallet_id",n).order("created_at",{ascending:!1}).limit(e);return o?(console.error("Error fetching transactions:",o),[]):(i||[]).map(l=>{var c;return{id:l.id,walletId:l.wallet_id,type:((c=l.type)==null?void 0:c.toLowerCase())||"transfer",amount:l.amount,fee:l.fee||0,currency:l.currency||"USD",status:l.status||"COMPLETED",description:l.description||l.type,reference:l.reference||"",metadata:l.metadata||{},createdAt:l.created_at}})},enabled:!!(t!=null&&t.id),staleTime:1e4,refetchOnWindowFocus:!0})}const Od={superadmin:100,admin:80,support:60,merchant:40,agent:40,user:10},bfe={"users.read.own":"View own profile","users.write.own":"Update own profile","users.read.all":"View all users","users.write.all":"Update all users","users.delete":"Delete users","users.suspend":"Suspend/activate users","wallets.read.own":"View own wallets","wallets.write.own":"Manage own wallets","wallets.read.all":"View all wallets","wallets.write.all":"Manage all wallets","wallets.adjust":"Adjust balances","transactions.read.own":"View own transactions","transactions.create":"Create transactions","transactions.read.all":"View all transactions","transactions.reverse":"Reverse transactions","cards.read.own":"View own cards","cards.manage.own":"Manage own cards","cards.read.all":"View all cards","cards.issue":"Issue cards","cards.manage.all":"Manage all cards","kyc.submit":"Submit KYC","kyc.review":"Review KYC","fees.read":"View fees","fees.manage":"Manage fees","admin.dashboard":"Access admin dashboard","merchant.dashboard":"Access merchant dashboard","agent.dashboard":"Access agent dashboard","roles.read":"View roles","roles.manage":"Manage roles","roles.assign":"Assign roles"},vfe={superadmin:Object.keys(bfe),admin:["users.read.own","users.write.own","users.read.all","users.write.all","users.suspend","wallets.read.own","wallets.write.own","wallets.read.all","wallets.adjust","transactions.read.own","transactions.create","transactions.read.all","transactions.reverse","cards.read.own","cards.manage.own","cards.read.all","cards.issue","cards.manage.all","kyc.submit","kyc.review","fees.read","fees.manage","admin.dashboard","roles.read","roles.assign"],support:["users.read.own","users.write.own","users.read.all","wallets.read.own","wallets.read.all","transactions.read.own","transactions.read.all","cards.read.own","cards.read.all","kyc.review","admin.dashboard"],merchant:["users.read.own","users.write.own","wallets.read.own","wallets.write.own","transactions.read.own","transactions.create","cards.read.own","cards.manage.own","kyc.submit","merchant.dashboard"],agent:["users.read.own","users.write.own","wallets.read.own","wallets.write.own","transactions.read.own","transactions.create","kyc.submit","agent.dashboard"],user:["users.read.own","users.write.own","wallets.read.own","wallets.write.own","transactions.read.own","transactions.create","cards.read.own","cards.manage.own","kyc.submit"]};class wfe{constructor(){wi(this,"userPermissions",new Set);wi(this,"userRoles",[]);wi(this,"userId",null)}async initialize(t,s){this.userId=t,this.userRoles=this.parseRoles(s),this.userPermissions=this.getPermissionsForRoles(this.userRoles)}parseRoles(t){return t?t.toLowerCase().split(",").map(a=>a.trim()).filter(a=>a in Od):["user"]}getPermissionsForRoles(t){const s=new Set;for(const a of t)(vfe[a]||[]).forEach(i=>s.add(i));return s}hasPermission(t){return this.userPermissions.has(t)}hasAnyPermission(t){return t.some(s=>this.userPermissions.has(s))}hasAllPermissions(t){return t.every(s=>this.userPermissions.has(s))}hasRole(t){return this.userRoles.includes(t)}hasAnyRole(t){return t.some(s=>this.userRoles.includes(s))}getRoleLevel(){return Math.max(...this.userRoles.map(t=>Od[t]||0),0)}isAdmin(){return this.getRoleLevel()>=Od.admin}isSuperAdmin(){return this.getRoleLevel()>=Od.superadmin}getPermissions(){return Array.from(this.userPermissions)}getRoles(){return[...this.userRoles]}canAccess(t,s,a=!1){const n=`${t}.${s}.own`,i=`${t}.${s}.all`,o=`${t}.${s}`;return a&&this.hasPermission(n)?!0:this.hasPermission(i)||this.hasPermission(o)}canViewUserInSearch(t){const s=this.getRoleLevel(),a=Od[t]||Od.user;return s>=Od.admin?!0:a<=Od.user}async searchUsersSecure(t,s=10){if(!this.userId)throw new Error("RBAC not initialized");const{data:a,error:n}=await X.rpc("search_users_secure",{p_searcher_id:this.userId,p_query:t,p_limit:s});return n?(console.error("Secure search error:",n),[]):a||[]}clear(){this.userPermissions.clear(),this.userRoles=[],this.userId=null}}const jfe=new wfe;function nd(e){return Array.isArray?Array.isArray(e):tq(e)==="[object Array]"}function Nfe(e){if(typeof e=="string")return e;let t=e+"";return t=="0"&&1/e==-1/0?"-0":t}function kfe(e){return e==null?"":Nfe(e)}function tc(e){return typeof e=="string"}function Jz(e){return typeof e=="number"}function Sfe(e){return e===!0||e===!1||Cfe(e)&&tq(e)=="[object Boolean]"}function eq(e){return typeof e=="object"}function Cfe(e){return eq(e)&&e!==null}function Yi(e){return e!=null}function xS(e){return!e.trim().length}function tq(e){return e==null?e===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(e)}const _fe="Incorrect 'index' type",Efe=e=>`Invalid value for key ${e}`,Afe=e=>`Pattern length exceeds max of ${e}.`,Pfe=e=>`Missing ${e} property in key`,Tfe=e=>`Property 'weight' in key '${e}' must be a positive integer`,gM=Object.prototype.hasOwnProperty;class Ife{constructor(t){this._keys=[],this._keyMap={};let s=0;t.forEach(a=>{let n=rq(a);this._keys.push(n),this._keyMap[n.id]=n,s+=n.weight}),this._keys.forEach(a=>{a.weight/=s})}get(t){return this._keyMap[t]}keys(){return this._keys}toJSON(){return JSON.stringify(this._keys)}}function rq(e){let t=null,s=null,a=null,n=1,i=null;if(tc(e)||nd(e))a=e,t=pM(e),s=p3(e);else{if(!gM.call(e,"name"))throw new Error(Pfe("name"));const o=e.name;if(a=o,gM.call(e,"weight")&&(n=e.weight,n<=0))throw new Error(Tfe(o));t=pM(o),s=p3(o),i=e.getFn}return{path:t,id:s,weight:n,src:a,getFn:i}}function pM(e){return nd(e)?e:e.split(".")}function p3(e){return nd(e)?e.join("."):e}function Dfe(e,t){let s=[],a=!1;const n=(i,o,l)=>{if(Yi(i))if(!o[l])s.push(i);else{let c=o[l];const d=i[c];if(!Yi(d))return;if(l===o.length-1&&(tc(d)||Jz(d)||Sfe(d)))s.push(kfe(d));else if(nd(d)){a=!0;for(let h=0,f=d.length;h<f;h+=1)n(d[h],o,l+1)}else o.length&&n(d,o,l+1)}};return n(e,tc(t)?t.split("."):t,0),a?s:s[0]}const Ofe={includeMatches:!1,findAllMatches:!1,minMatchCharLength:1},Rfe={isCaseSensitive:!1,ignoreDiacritics:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:(e,t)=>e.score===t.score?e.idx<t.idx?-1:1:e.score<t.score?-1:1},Mfe={location:0,threshold:.6,distance:100},Lfe={useExtendedSearch:!1,getFn:Dfe,ignoreLocation:!1,ignoreFieldNorm:!1,fieldNormWeight:1};var Zt={...Rfe,...Ofe,...Mfe,...Lfe};const Ffe=/[^ ]+/g;function Bfe(e=1,t=3){const s=new Map,a=Math.pow(10,t);return{get(n){const i=n.match(Ffe).length;if(s.has(i))return s.get(i);const o=1/Math.pow(i,.5*e),l=parseFloat(Math.round(o*a)/a);return s.set(i,l),l},clear(){s.clear()}}}class dA{constructor({getFn:t=Zt.getFn,fieldNormWeight:s=Zt.fieldNormWeight}={}){this.norm=Bfe(s,3),this.getFn=t,this.isCreated=!1,this.setIndexRecords()}setSources(t=[]){this.docs=t}setIndexRecords(t=[]){this.records=t}setKeys(t=[]){this.keys=t,this._keysMap={},t.forEach((s,a)=>{this._keysMap[s.id]=a})}create(){this.isCreated||!this.docs.length||(this.isCreated=!0,tc(this.docs[0])?this.docs.forEach((t,s)=>{this._addString(t,s)}):this.docs.forEach((t,s)=>{this._addObject(t,s)}),this.norm.clear())}add(t){const s=this.size();tc(t)?this._addString(t,s):this._addObject(t,s)}removeAt(t){this.records.splice(t,1);for(let s=t,a=this.size();s<a;s+=1)this.records[s].i-=1}getValueForItemAtKeyId(t,s){return t[this._keysMap[s]]}size(){return this.records.length}_addString(t,s){if(!Yi(t)||xS(t))return;let a={v:t,i:s,n:this.norm.get(t)};this.records.push(a)}_addObject(t,s){let a={i:s,$:{}};this.keys.forEach((n,i)=>{let o=n.getFn?n.getFn(t):this.getFn(t,n.path);if(Yi(o)){if(nd(o)){let l=[];const c=[{nestedArrIndex:-1,value:o}];for(;c.length;){const{nestedArrIndex:d,value:h}=c.pop();if(Yi(h))if(tc(h)&&!xS(h)){let f={v:h,i:d,n:this.norm.get(h)};l.push(f)}else nd(h)&&h.forEach((f,x)=>{c.push({nestedArrIndex:x,value:f})})}a.$[i]=l}else if(tc(o)&&!xS(o)){let l={v:o,n:this.norm.get(o)};a.$[i]=l}}}),this.records.push(a)}toJSON(){return{keys:this.keys,records:this.records}}}function sq(e,t,{getFn:s=Zt.getFn,fieldNormWeight:a=Zt.fieldNormWeight}={}){const n=new dA({getFn:s,fieldNormWeight:a});return n.setKeys(e.map(rq)),n.setSources(t),n.create(),n}function $fe(e,{getFn:t=Zt.getFn,fieldNormWeight:s=Zt.fieldNormWeight}={}){const{keys:a,records:n}=e,i=new dA({getFn:t,fieldNormWeight:s});return i.setKeys(a),i.setIndexRecords(n),i}function Sv(e,{errors:t=0,currentLocation:s=0,expectedLocation:a=0,distance:n=Zt.distance,ignoreLocation:i=Zt.ignoreLocation}={}){const o=t/e.length;if(i)return o;const l=Math.abs(a-s);return n?o+l/n:l?1:o}function Ufe(e=[],t=Zt.minMatchCharLength){let s=[],a=-1,n=-1,i=0;for(let o=e.length;i<o;i+=1){let l=e[i];l&&a===-1?a=i:!l&&a!==-1&&(n=i-1,n-a+1>=t&&s.push([a,n]),a=-1)}return e[i-1]&&i-a>=t&&s.push([a,i-1]),s}const E0=32;function Vfe(e,t,s,{location:a=Zt.location,distance:n=Zt.distance,threshold:i=Zt.threshold,findAllMatches:o=Zt.findAllMatches,minMatchCharLength:l=Zt.minMatchCharLength,includeMatches:c=Zt.includeMatches,ignoreLocation:d=Zt.ignoreLocation}={}){if(t.length>E0)throw new Error(Afe(E0));const h=t.length,f=e.length,x=Math.max(0,Math.min(a,f));let y=i,v=x;const w=l>1||c,N=w?Array(f):[];let k;for(;(k=e.indexOf(t,v))>-1;){let P=Sv(t,{currentLocation:k,expectedLocation:x,distance:n,ignoreLocation:d});if(y=Math.min(P,y),v=k+h,w){let M=0;for(;M<h;)N[k+M]=1,M+=1}}v=-1;let C=[],E=1,_=h+f;const T=1<<h-1;for(let P=0;P<h;P+=1){let M=0,R=_;for(;M<R;)Sv(t,{errors:P,currentLocation:x+R,expectedLocation:x,distance:n,ignoreLocation:d})<=y?M=R:_=R,R=Math.floor((_-M)/2+M);_=R;let $=Math.max(1,x-R+1),W=o?f:Math.min(x+R,f)+h,I=Array(W+2);I[W+1]=(1<<P)-1;for(let O=W;O>=$;O-=1){let F=O-1,q=s[e.charAt(F)];if(w&&(N[F]=+!!q),I[O]=(I[O+1]<<1|1)&q,P&&(I[O]|=(C[O+1]|C[O])<<1|1|C[O+1]),I[O]&T&&(E=Sv(t,{errors:P,currentLocation:F,expectedLocation:x,distance:n,ignoreLocation:d}),E<=y)){if(y=E,v=F,v<=x)break;$=Math.max(1,2*x-v)}}if(Sv(t,{errors:P+1,currentLocation:x,expectedLocation:x,distance:n,ignoreLocation:d})>y)break;C=I}const A={isMatch:v>=0,score:Math.max(.001,E)};if(w){const P=Ufe(N,l);P.length?c&&(A.indices=P):A.isMatch=!1}return A}function Wfe(e){let t={};for(let s=0,a=e.length;s<a;s+=1){const n=e.charAt(s);t[n]=(t[n]||0)|1<<a-s-1}return t}const ej=String.prototype.normalize?e=>e.normalize("NFD").replace(/[\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u08D3-\u08E1\u08E3-\u0903\u093A-\u093C\u093E-\u094F\u0951-\u0957\u0962\u0963\u0981-\u0983\u09BC\u09BE-\u09C4\u09C7\u09C8\u09CB-\u09CD\u09D7\u09E2\u09E3\u09FE\u0A01-\u0A03\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81-\u0A83\u0ABC\u0ABE-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01-\u0B03\u0B3C\u0B3E-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B62\u0B63\u0B82\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD7\u0C00-\u0C04\u0C3E-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81-\u0C83\u0CBC\u0CBE-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0D00-\u0D03\u0D3B\u0D3C\u0D3E-\u0D44\u0D46-\u0D48\u0D4A-\u0D4D\u0D57\u0D62\u0D63\u0D82\u0D83\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DF2\u0DF3\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EB9\u0EBB\u0EBC\u0EC8-\u0ECD\u0F18\u0F19\u0F35\u0F37\u0F39\u0F3E\u0F3F\u0F71-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102B-\u103E\u1056-\u1059\u105E-\u1060\u1062-\u1064\u1067-\u106D\u1071-\u1074\u1082-\u108D\u108F\u109A-\u109D\u135D-\u135F\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17B4-\u17D3\u17DD\u180B-\u180D\u1885\u1886\u18A9\u1920-\u192B\u1930-\u193B\u1A17-\u1A1B\u1A55-\u1A5E\u1A60-\u1A7C\u1A7F\u1AB0-\u1ABE\u1B00-\u1B04\u1B34-\u1B44\u1B6B-\u1B73\u1B80-\u1B82\u1BA1-\u1BAD\u1BE6-\u1BF3\u1C24-\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE8\u1CED\u1CF2-\u1CF4\u1CF7-\u1CF9\u1DC0-\u1DF9\u1DFB-\u1DFF\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA823-\uA827\uA880\uA881\uA8B4-\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA953\uA980-\uA983\uA9B3-\uA9C0\uA9E5\uAA29-\uAA36\uAA43\uAA4C\uAA4D\uAA7B-\uAA7D\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEB-\uAAEF\uAAF5\uAAF6\uABE3-\uABEA\uABEC\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F]/g,""):e=>e;class aq{constructor(t,{location:s=Zt.location,threshold:a=Zt.threshold,distance:n=Zt.distance,includeMatches:i=Zt.includeMatches,findAllMatches:o=Zt.findAllMatches,minMatchCharLength:l=Zt.minMatchCharLength,isCaseSensitive:c=Zt.isCaseSensitive,ignoreDiacritics:d=Zt.ignoreDiacritics,ignoreLocation:h=Zt.ignoreLocation}={}){if(this.options={location:s,threshold:a,distance:n,includeMatches:i,findAllMatches:o,minMatchCharLength:l,isCaseSensitive:c,ignoreDiacritics:d,ignoreLocation:h},t=c?t:t.toLowerCase(),t=d?ej(t):t,this.pattern=t,this.chunks=[],!this.pattern.length)return;const f=(y,v)=>{this.chunks.push({pattern:y,alphabet:Wfe(y),startIndex:v})},x=this.pattern.length;if(x>E0){let y=0;const v=x%E0,w=x-v;for(;y<w;)f(this.pattern.substr(y,E0),y),y+=E0;if(v){const N=x-E0;f(this.pattern.substr(N),N)}}else f(this.pattern,0)}searchIn(t){const{isCaseSensitive:s,ignoreDiacritics:a,includeMatches:n}=this.options;if(t=s?t:t.toLowerCase(),t=a?ej(t):t,this.pattern===t){let w={isMatch:!0,score:0};return n&&(w.indices=[[0,t.length-1]]),w}const{location:i,distance:o,threshold:l,findAllMatches:c,minMatchCharLength:d,ignoreLocation:h}=this.options;let f=[],x=0,y=!1;this.chunks.forEach(({pattern:w,alphabet:N,startIndex:k})=>{const{isMatch:C,score:E,indices:_}=Vfe(t,w,N,{location:i+k,distance:o,threshold:l,findAllMatches:c,minMatchCharLength:d,includeMatches:n,ignoreLocation:h});C&&(y=!0),x+=E,C&&_&&(f=[...f,..._])});let v={isMatch:y,score:y?x/this.chunks.length:1};return y&&n&&(v.indices=f),v}}class Ku{constructor(t){this.pattern=t}static isMultiMatch(t){return yM(t,this.multiRegex)}static isSingleMatch(t){return yM(t,this.singleRegex)}search(){}}function yM(e,t){const s=e.match(t);return s?s[1]:null}class zfe extends Ku{constructor(t){super(t)}static get type(){return"exact"}static get multiRegex(){return/^="(.*)"$/}static get singleRegex(){return/^=(.*)$/}search(t){const s=t===this.pattern;return{isMatch:s,score:s?0:1,indices:[0,this.pattern.length-1]}}}class qfe extends Ku{constructor(t){super(t)}static get type(){return"inverse-exact"}static get multiRegex(){return/^!"(.*)"$/}static get singleRegex(){return/^!(.*)$/}search(t){const a=t.indexOf(this.pattern)===-1;return{isMatch:a,score:a?0:1,indices:[0,t.length-1]}}}class Hfe extends Ku{constructor(t){super(t)}static get type(){return"prefix-exact"}static get multiRegex(){return/^\^"(.*)"$/}static get singleRegex(){return/^\^(.*)$/}search(t){const s=t.startsWith(this.pattern);return{isMatch:s,score:s?0:1,indices:[0,this.pattern.length-1]}}}class Kfe extends Ku{constructor(t){super(t)}static get type(){return"inverse-prefix-exact"}static get multiRegex(){return/^!\^"(.*)"$/}static get singleRegex(){return/^!\^(.*)$/}search(t){const s=!t.startsWith(this.pattern);return{isMatch:s,score:s?0:1,indices:[0,t.length-1]}}}class Gfe extends Ku{constructor(t){super(t)}static get type(){return"suffix-exact"}static get multiRegex(){return/^"(.*)"\$$/}static get singleRegex(){return/^(.*)\$$/}search(t){const s=t.endsWith(this.pattern);return{isMatch:s,score:s?0:1,indices:[t.length-this.pattern.length,t.length-1]}}}class Yfe extends Ku{constructor(t){super(t)}static get type(){return"inverse-suffix-exact"}static get multiRegex(){return/^!"(.*)"\$$/}static get singleRegex(){return/^!(.*)\$$/}search(t){const s=!t.endsWith(this.pattern);return{isMatch:s,score:s?0:1,indices:[0,t.length-1]}}}class nq extends Ku{constructor(t,{location:s=Zt.location,threshold:a=Zt.threshold,distance:n=Zt.distance,includeMatches:i=Zt.includeMatches,findAllMatches:o=Zt.findAllMatches,minMatchCharLength:l=Zt.minMatchCharLength,isCaseSensitive:c=Zt.isCaseSensitive,ignoreDiacritics:d=Zt.ignoreDiacritics,ignoreLocation:h=Zt.ignoreLocation}={}){super(t),this._bitapSearch=new aq(t,{location:s,threshold:a,distance:n,includeMatches:i,findAllMatches:o,minMatchCharLength:l,isCaseSensitive:c,ignoreDiacritics:d,ignoreLocation:h})}static get type(){return"fuzzy"}static get multiRegex(){return/^"(.*)"$/}static get singleRegex(){return/^(.*)$/}search(t){return this._bitapSearch.searchIn(t)}}class iq extends Ku{constructor(t){super(t)}static get type(){return"include"}static get multiRegex(){return/^'"(.*)"$/}static get singleRegex(){return/^'(.*)$/}search(t){let s=0,a;const n=[],i=this.pattern.length;for(;(a=t.indexOf(this.pattern,s))>-1;)s=a+i,n.push([a,s-1]);const o=!!n.length;return{isMatch:o,score:o?0:1,indices:n}}}const y3=[zfe,iq,Hfe,Kfe,Yfe,Gfe,qfe,nq],bM=y3.length,Xfe=/ +(?=(?:[^\"]*\"[^\"]*\")*[^\"]*$)/,Qfe="|";function Zfe(e,t={}){return e.split(Qfe).map(s=>{let a=s.trim().split(Xfe).filter(i=>i&&!!i.trim()),n=[];for(let i=0,o=a.length;i<o;i+=1){const l=a[i];let c=!1,d=-1;for(;!c&&++d<bM;){const h=y3[d];let f=h.isMultiMatch(l);f&&(n.push(new h(f,t)),c=!0)}if(!c)for(d=-1;++d<bM;){const h=y3[d];let f=h.isSingleMatch(l);if(f){n.push(new h(f,t));break}}}return n})}const Jfe=new Set([nq.type,iq.type]);class exe{constructor(t,{isCaseSensitive:s=Zt.isCaseSensitive,ignoreDiacritics:a=Zt.ignoreDiacritics,includeMatches:n=Zt.includeMatches,minMatchCharLength:i=Zt.minMatchCharLength,ignoreLocation:o=Zt.ignoreLocation,findAllMatches:l=Zt.findAllMatches,location:c=Zt.location,threshold:d=Zt.threshold,distance:h=Zt.distance}={}){this.query=null,this.options={isCaseSensitive:s,ignoreDiacritics:a,includeMatches:n,minMatchCharLength:i,findAllMatches:l,ignoreLocation:o,location:c,threshold:d,distance:h},t=s?t:t.toLowerCase(),t=a?ej(t):t,this.pattern=t,this.query=Zfe(this.pattern,this.options)}static condition(t,s){return s.useExtendedSearch}searchIn(t){const s=this.query;if(!s)return{isMatch:!1,score:1};const{includeMatches:a,isCaseSensitive:n,ignoreDiacritics:i}=this.options;t=n?t:t.toLowerCase(),t=i?ej(t):t;let o=0,l=[],c=0;for(let d=0,h=s.length;d<h;d+=1){const f=s[d];l.length=0,o=0;for(let x=0,y=f.length;x<y;x+=1){const v=f[x],{isMatch:w,indices:N,score:k}=v.search(t);if(w){if(o+=1,c+=k,a){const C=v.constructor.type;Jfe.has(C)?l=[...l,...N]:l.push(N)}}else{c=0,o=0,l.length=0;break}}if(o){let x={isMatch:!0,score:c/o};return a&&(x.indices=l),x}}return{isMatch:!1,score:1}}}const b3=[];function txe(...e){b3.push(...e)}function v3(e,t){for(let s=0,a=b3.length;s<a;s+=1){let n=b3[s];if(n.condition(e,t))return new n(e,t)}return new aq(e,t)}const tj={AND:"$and",OR:"$or"},w3={PATH:"$path",PATTERN:"$val"},j3=e=>!!(e[tj.AND]||e[tj.OR]),rxe=e=>!!e[w3.PATH],sxe=e=>!nd(e)&&eq(e)&&!j3(e),vM=e=>({[tj.AND]:Object.keys(e).map(t=>({[t]:e[t]}))});function oq(e,t,{auto:s=!0}={}){const a=n=>{let i=Object.keys(n);const o=rxe(n);if(!o&&i.length>1&&!j3(n))return a(vM(n));if(sxe(n)){const c=o?n[w3.PATH]:i[0],d=o?n[w3.PATTERN]:n[c];if(!tc(d))throw new Error(Efe(c));const h={keyId:p3(c),pattern:d};return s&&(h.searcher=v3(d,t)),h}let l={children:[],operator:i[0]};return i.forEach(c=>{const d=n[c];nd(d)&&d.forEach(h=>{l.children.push(a(h))})}),l};return j3(e)||(e=vM(e)),a(e)}function axe(e,{ignoreFieldNorm:t=Zt.ignoreFieldNorm}){e.forEach(s=>{let a=1;s.matches.forEach(({key:n,norm:i,score:o})=>{const l=n?n.weight:null;a*=Math.pow(o===0&&l?Number.EPSILON:o,(l||1)*(t?1:i))}),s.score=a})}function nxe(e,t){const s=e.matches;t.matches=[],Yi(s)&&s.forEach(a=>{if(!Yi(a.indices)||!a.indices.length)return;const{indices:n,value:i}=a;let o={indices:n,value:i};a.key&&(o.key=a.key.src),a.idx>-1&&(o.refIndex=a.idx),t.matches.push(o)})}function ixe(e,t){t.score=e.score}function oxe(e,t,{includeMatches:s=Zt.includeMatches,includeScore:a=Zt.includeScore}={}){const n=[];return s&&n.push(nxe),a&&n.push(ixe),e.map(i=>{const{idx:o}=i,l={item:t[o],refIndex:o};return n.length&&n.forEach(c=>{c(i,l)}),l})}class vx{constructor(t,s={},a){this.options={...Zt,...s},this.options.useExtendedSearch,this._keyStore=new Ife(this.options.keys),this.setCollection(t,a)}setCollection(t,s){if(this._docs=t,s&&!(s instanceof dA))throw new Error(_fe);this._myIndex=s||sq(this.options.keys,this._docs,{getFn:this.options.getFn,fieldNormWeight:this.options.fieldNormWeight})}add(t){Yi(t)&&(this._docs.push(t),this._myIndex.add(t))}remove(t=()=>!1){const s=[];for(let a=0,n=this._docs.length;a<n;a+=1){const i=this._docs[a];t(i,a)&&(this.removeAt(a),a-=1,n-=1,s.push(i))}return s}removeAt(t){this._docs.splice(t,1),this._myIndex.removeAt(t)}getIndex(){return this._myIndex}search(t,{limit:s=-1}={}){const{includeMatches:a,includeScore:n,shouldSort:i,sortFn:o,ignoreFieldNorm:l}=this.options;let c=tc(t)?tc(this._docs[0])?this._searchStringList(t):this._searchObjectList(t):this._searchLogical(t);return axe(c,{ignoreFieldNorm:l}),i&&c.sort(o),Jz(s)&&s>-1&&(c=c.slice(0,s)),oxe(c,this._docs,{includeMatches:a,includeScore:n})}_searchStringList(t){const s=v3(t,this.options),{records:a}=this._myIndex,n=[];return a.forEach(({v:i,i:o,n:l})=>{if(!Yi(i))return;const{isMatch:c,score:d,indices:h}=s.searchIn(i);c&&n.push({item:i,idx:o,matches:[{score:d,value:i,norm:l,indices:h}]})}),n}_searchLogical(t){const s=oq(t,this.options),a=(l,c,d)=>{if(!l.children){const{keyId:f,searcher:x}=l,y=this._findMatches({key:this._keyStore.get(f),value:this._myIndex.getValueForItemAtKeyId(c,f),searcher:x});return y&&y.length?[{idx:d,item:c,matches:y}]:[]}const h=[];for(let f=0,x=l.children.length;f<x;f+=1){const y=l.children[f],v=a(y,c,d);if(v.length)h.push(...v);else if(l.operator===tj.AND)return[]}return h},n=this._myIndex.records,i={},o=[];return n.forEach(({$:l,i:c})=>{if(Yi(l)){let d=a(s,l,c);d.length&&(i[c]||(i[c]={idx:c,item:l,matches:[]},o.push(i[c])),d.forEach(({matches:h})=>{i[c].matches.push(...h)}))}}),o}_searchObjectList(t){const s=v3(t,this.options),{keys:a,records:n}=this._myIndex,i=[];return n.forEach(({$:o,i:l})=>{if(!Yi(o))return;let c=[];a.forEach((d,h)=>{c.push(...this._findMatches({key:d,value:o[h],searcher:s}))}),c.length&&i.push({idx:l,item:o,matches:c})}),i}_findMatches({key:t,value:s,searcher:a}){if(!Yi(s))return[];let n=[];if(nd(s))s.forEach(({v:i,i:o,n:l})=>{if(!Yi(i))return;const{isMatch:c,score:d,indices:h}=a.searchIn(i);c&&n.push({score:d,key:t,value:i,idx:o,norm:l,indices:h})});else{const{v:i,n:o}=s,{isMatch:l,score:c,indices:d}=a.searchIn(i);l&&n.push({score:c,key:t,value:i,norm:o,indices:d})}return n}}vx.version="7.1.0";vx.createIndex=sq;vx.parseIndex=$fe;vx.config=Zt;vx.parseQuery=oq;txe(exe);const lxe={keys:[{name:"first_name",weight:.3},{name:"last_name",weight:.3},{name:"phone",weight:.2},{name:"email",weight:.15},{name:"username",weight:.05}],threshold:.4,distance:100,minMatchCharLength:2,includeScore:!0,shouldSort:!0};function uA({onSelect:e,placeholder:t="Search by @username, phone, or name...",className:s,excludeUserId:a,autoFocus:n=!1}){const{user:i}=pt(),[o,l]=p.useState(""),[c,d]=p.useState([]),[h,f]=p.useState([]),[x,y]=p.useState(!1),[v,w]=p.useState(!0),[N,k]=p.useState(!1),[C,E]=p.useState(-1),_=p.useRef(null),T=p.useRef(null),A=p.useRef(null);p.useEffect(()=>{i!=null&&i.id&&(i!=null&&i.roles)&&jfe.initialize(i.id,i.roles.join(","))},[i==null?void 0:i.id,i==null?void 0:i.roles]),p.useEffect(()=>{(async()=>{w(!0);try{const{data:O,error:F}=await X.from("users").select("id, first_name, last_name, phone, email, roles, status").eq("status","ACTIVE").limit(500);if(F)console.error("Error loading users:",F),d([]);else{const q=(O||[]).map(K=>({id:K.id,first_name:K.first_name||"",last_name:K.last_name||"",username:null,phone:K.phone||null,email:K.email||null,profile_picture:null})),H=a?q.filter(K=>K.id!==a):q;d(H)}}catch(O){console.error("Error in loadUsers:",O),d([])}finally{w(!1)}})()},[a]);const P=p.useMemo(()=>new vx(c,lxe),[c]),M=p.useCallback(B=>{if(B.length<2){f([]),k(!1);return}y(!0);const O=B.startsWith("@")?B.substring(1):B,q=P.search(O).slice(0,20).map(H=>H.item);f(q),k(q.length>0),y(!1)},[P,c.length]),R=B=>{const O=B.target.value;l(O),E(-1),A.current&&clearTimeout(A.current),A.current=setTimeout(()=>{M(O)},150)},$=B=>{if(N)switch(B.key){case"ArrowDown":B.preventDefault(),E(O=>O<h.length-1?O+1:O);break;case"ArrowUp":B.preventDefault(),E(O=>O>0?O-1:O);break;case"Enter":B.preventDefault(),C>=0&&h[C]&&W(h[C]);break;case"Escape":k(!1),E(-1);break}},W=B=>{e(B),l(""),f([]),k(!1),E(-1)},I=()=>{var B;l(""),f([]),k(!1),(B=_.current)==null||B.focus()};return p.useEffect(()=>{const B=O=>{var F;T.current&&!T.current.contains(O.target)&&!((F=_.current)!=null&&F.contains(O.target))&&k(!1)};return document.addEventListener("mousedown",B),()=>document.removeEventListener("mousedown",B)},[]),p.useEffect(()=>()=>{A.current&&clearTimeout(A.current)},[]),r.jsxs("div",{className:fe("relative",s),children:[r.jsxs("div",{className:"relative",children:[r.jsx("div",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",children:x||v?r.jsx(Ke,{className:"w-5 h-5 animate-spin"}):r.jsx(Nr,{className:"w-5 h-5"})}),r.jsx("input",{ref:_,type:"text",value:o,onChange:R,onKeyDown:$,onFocus:()=>o.length>=2&&k(h.length>0),placeholder:v?"Loading users...":t,autoFocus:n,disabled:v,className:"w-full pl-10 pr-10 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-primary-500 focus:border-primary-500 text-gray-900 disabled:bg-gray-100"}),o&&r.jsx("button",{onClick:I,className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600",children:r.jsx(Ct,{className:"w-5 h-5"})})]}),N&&r.jsx("div",{ref:T,className:"absolute z-50 w-full mt-2 bg-white border border-gray-200 rounded-xl shadow-lg max-h-80 overflow-y-auto",children:h.length===0?r.jsx("div",{className:"p-4 text-center text-gray-500",children:"No users found"}):r.jsx("ul",{className:"py-2",children:h.map((B,O)=>{var F,q;return r.jsx("li",{children:r.jsxs("button",{onClick:()=>W(B),className:fe("w-full px-4 py-3 flex items-center gap-3 text-left transition-colors",C===O?"bg-primary-50":"hover:bg-gray-50"),children:[B.profile_picture?r.jsx("img",{src:B.profile_picture,alt:`${B.first_name} ${B.last_name}`,className:"w-10 h-10 rounded-full object-cover flex-shrink-0 border-2 border-gray-100"}):r.jsx("div",{className:"w-10 h-10 bg-primary-100 rounded-full flex items-center justify-center flex-shrink-0",children:r.jsxs("span",{className:"text-primary-700 font-medium text-sm",children:[(F=B.first_name)==null?void 0:F.charAt(0),(q=B.last_name)==null?void 0:q.charAt(0)]})}),r.jsx("div",{className:"flex-1 min-w-0",children:B.username?r.jsxs(r.Fragment,{children:[r.jsxs("p",{className:"font-medium text-gray-900 truncate flex items-center gap-1",children:[r.jsx(Dw,{className:"w-4 h-4 text-primary-500"}),B.username]}),r.jsxs("p",{className:"text-sm text-gray-500 truncate",children:[B.first_name," ",B.last_name]})]}):r.jsxs(r.Fragment,{children:[r.jsxs("p",{className:"font-medium text-gray-900 truncate",children:[B.first_name," ",B.last_name]}),B.phone&&r.jsxs("p",{className:"text-sm text-gray-500 flex items-center gap-1",children:[r.jsx(Ss,{className:"w-3 h-3"}),B.phone]})]})})]})},B.id)})})}),!N&&o.length>0&&o.length<2&&r.jsx("p",{className:"absolute mt-1 text-xs text-gray-500",children:"Type at least 2 characters to search"})]})}var bt;(function(e){e[e.QR_CODE=0]="QR_CODE",e[e.AZTEC=1]="AZTEC",e[e.CODABAR=2]="CODABAR",e[e.CODE_39=3]="CODE_39",e[e.CODE_93=4]="CODE_93",e[e.CODE_128=5]="CODE_128",e[e.DATA_MATRIX=6]="DATA_MATRIX",e[e.MAXICODE=7]="MAXICODE",e[e.ITF=8]="ITF",e[e.EAN_13=9]="EAN_13",e[e.EAN_8=10]="EAN_8",e[e.PDF_417=11]="PDF_417",e[e.RSS_14=12]="RSS_14",e[e.RSS_EXPANDED=13]="RSS_EXPANDED",e[e.UPC_A=14]="UPC_A",e[e.UPC_E=15]="UPC_E",e[e.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(bt||(bt={}));var wM=new Map([[bt.QR_CODE,"QR_CODE"],[bt.AZTEC,"AZTEC"],[bt.CODABAR,"CODABAR"],[bt.CODE_39,"CODE_39"],[bt.CODE_93,"CODE_93"],[bt.CODE_128,"CODE_128"],[bt.DATA_MATRIX,"DATA_MATRIX"],[bt.MAXICODE,"MAXICODE"],[bt.ITF,"ITF"],[bt.EAN_13,"EAN_13"],[bt.EAN_8,"EAN_8"],[bt.PDF_417,"PDF_417"],[bt.RSS_14,"RSS_14"],[bt.RSS_EXPANDED,"RSS_EXPANDED"],[bt.UPC_A,"UPC_A"],[bt.UPC_E,"UPC_E"],[bt.UPC_EAN_EXTENSION,"UPC_EAN_EXTENSION"]]),jM;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.URL=1]="URL"})(jM||(jM={}));function cxe(e){return Object.values(bt).includes(e)}var rj;(function(e){e[e.SCAN_TYPE_CAMERA=0]="SCAN_TYPE_CAMERA",e[e.SCAN_TYPE_FILE=1]="SCAN_TYPE_FILE"})(rj||(rj={}));var dxe=function(){function e(){}return e.GITHUB_PROJECT_URL="https://github.com/mebjas/html5-qrcode",e.SCAN_DEFAULT_FPS=2,e.DEFAULT_DISABLE_FLIP=!1,e.DEFAULT_REMEMBER_LAST_CAMERA_USED=!0,e.DEFAULT_SUPPORTED_SCAN_TYPE=[rj.SCAN_TYPE_CAMERA,rj.SCAN_TYPE_FILE],e}(),lq=function(){function e(t,s){this.format=t,this.formatName=s}return e.prototype.toString=function(){return this.formatName},e.create=function(t){if(!wM.has(t))throw"".concat(t," not in html5QrcodeSupportedFormatsTextMap");return new e(t,wM.get(t))},e}(),NM=function(){function e(){}return e.createFromText=function(t){var s={text:t};return{decodedText:t,result:s}},e.createFromQrcodeResult=function(t){return{decodedText:t.text,result:t}},e}(),N3;(function(e){e[e.UNKWOWN_ERROR=0]="UNKWOWN_ERROR",e[e.IMPLEMENTATION_ERROR=1]="IMPLEMENTATION_ERROR",e[e.NO_CODE_FOUND_ERROR=2]="NO_CODE_FOUND_ERROR"})(N3||(N3={}));var uxe=function(){function e(){}return e.createFrom=function(t){return{errorMessage:t,type:N3.UNKWOWN_ERROR}},e}(),hxe=function(){function e(t){this.verbose=t}return e.prototype.log=function(t){this.verbose&&console.log(t)},e.prototype.warn=function(t){this.verbose&&console.warn(t)},e.prototype.logError=function(t,s){(this.verbose||s===!0)&&console.error(t)},e.prototype.logErrors=function(t){if(t.length===0)throw"Logger#logError called without arguments";this.verbose&&console.error(t)},e}();function Ec(e){return typeof e>"u"||e===null}var Vm=function(){function e(){}return e.codeParseError=function(t){return"QR code parse error, error = ".concat(t)},e.errorGettingUserMedia=function(t){return"Error getting userMedia, error = ".concat(t)},e.onlyDeviceSupportedError=function(){return"The device doesn't support navigator.mediaDevices , only supported cameraIdOrConfig in this case is deviceId parameter (string)."},e.cameraStreamingNotSupported=function(){return"Camera streaming not supported by the browser."},e.unableToQuerySupportedDevices=function(){return"Unable to query supported devices, unknown error."},e.insecureContextCameraQueryError=function(){return"Camera access is only supported in secure context like https or localhost."},e.scannerPaused=function(){return"Scanner paused"},e}(),cq=function(){function e(){}return e.isMediaStreamConstraintsValid=function(t,s){if(typeof t!="object"){var a=typeof t;return s.logError("videoConstraints should be of type object, the "+"object passed is of type ".concat(a,"."),!0),!1}for(var n=["autoGainControl","channelCount","echoCancellation","latency","noiseSuppression","sampleRate","sampleSize","volume"],i=new Set(n),o=Object.keys(t),l=0,c=o;l<c.length;l++){var d=c[l];if(i.has(d))return s.logError("".concat(d," is not supported videoConstaints."),!0),!1}return!0},e}(),k3={exports:{}};(function(e,t){(function(s,a){a(t)})(Gx,function(s){function a(J){return J==null}var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(J,u){J.__proto__=u}||function(J,u){for(var m in u)u.hasOwnProperty(m)&&(J[m]=u[m])};function i(J,u){n(J,u);function m(){this.constructor=J}J.prototype=u===null?Object.create(u):(m.prototype=u.prototype,new m)}function o(J,u){var m=Object.setPrototypeOf;m?m(J,u):J.__proto__=u}function l(J,u){u===void 0&&(u=J.constructor);var m=Error.captureStackTrace;m&&m(J,u)}var c=function(J){i(u,J);function u(m){var g=this.constructor,b=J.call(this,m)||this;return Object.defineProperty(b,"name",{value:g.name,enumerable:!1}),o(b,g.prototype),l(b),b}return u}(Error);class d extends c{constructor(u=void 0){super(u),this.message=u}getKind(){return this.constructor.kind}}d.kind="Exception";class h extends d{}h.kind="ArgumentException";class f extends d{}f.kind="IllegalArgumentException";class x{constructor(u){if(this.binarizer=u,u===null)throw new f("Binarizer must be non-null.")}getWidth(){return this.binarizer.getWidth()}getHeight(){return this.binarizer.getHeight()}getBlackRow(u,m){return this.binarizer.getBlackRow(u,m)}getBlackMatrix(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix}isCropSupported(){return this.binarizer.getLuminanceSource().isCropSupported()}crop(u,m,g,b){const j=this.binarizer.getLuminanceSource().crop(u,m,g,b);return new x(this.binarizer.createBinarizer(j))}isRotateSupported(){return this.binarizer.getLuminanceSource().isRotateSupported()}rotateCounterClockwise(){const u=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new x(this.binarizer.createBinarizer(u))}rotateCounterClockwise45(){const u=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new x(this.binarizer.createBinarizer(u))}toString(){try{return this.getBlackMatrix().toString()}catch{return""}}}class y extends d{static getChecksumInstance(){return new y}}y.kind="ChecksumException";class v{constructor(u){this.source=u}getLuminanceSource(){return this.source}getWidth(){return this.source.getWidth()}getHeight(){return this.source.getHeight()}}class w{static arraycopy(u,m,g,b,j){for(;j--;)g[b++]=u[m++]}static currentTimeMillis(){return Date.now()}}class N extends d{}N.kind="IndexOutOfBoundsException";class k extends N{constructor(u=void 0,m=void 0){super(m),this.index=u,this.message=m}}k.kind="ArrayIndexOutOfBoundsException";class C{static fill(u,m){for(let g=0,b=u.length;g<b;g++)u[g]=m}static fillWithin(u,m,g,b){C.rangeCheck(u.length,m,g);for(let j=m;j<g;j++)u[j]=b}static rangeCheck(u,m,g){if(m>g)throw new f("fromIndex("+m+") > toIndex("+g+")");if(m<0)throw new k(m);if(g>u)throw new k(g)}static asList(...u){return u}static create(u,m,g){return Array.from({length:u}).map(j=>Array.from({length:m}).fill(g))}static createInt32Array(u,m,g){return Array.from({length:u}).map(j=>Int32Array.from({length:m}).fill(g))}static equals(u,m){if(!u||!m||!u.length||!m.length||u.length!==m.length)return!1;for(let g=0,b=u.length;g<b;g++)if(u[g]!==m[g])return!1;return!0}static hashCode(u){if(u===null)return 0;let m=1;for(const g of u)m=31*m+g;return m}static fillUint8Array(u,m){for(let g=0;g!==u.length;g++)u[g]=m}static copyOf(u,m){return u.slice(0,m)}static copyOfUint8Array(u,m){if(u.length<=m){const g=new Uint8Array(m);return g.set(u),g}return u.slice(0,m)}static copyOfRange(u,m,g){const b=g-m,j=new Int32Array(b);return w.arraycopy(u,m,j,0,b),j}static binarySearch(u,m,g){g===void 0&&(g=C.numberComparator);let b=0,j=u.length-1;for(;b<=j;){const S=j+b>>1,D=g(m,u[S]);if(D>0)b=S+1;else if(D<0)j=S-1;else return S}return-b-1}static numberComparator(u,m){return u-m}}class E{static numberOfTrailingZeros(u){let m;if(u===0)return 32;let g=31;return m=u<<16,m!==0&&(g-=16,u=m),m=u<<8,m!==0&&(g-=8,u=m),m=u<<4,m!==0&&(g-=4,u=m),m=u<<2,m!==0&&(g-=2,u=m),g-(u<<1>>>31)}static numberOfLeadingZeros(u){if(u===0)return 32;let m=1;return u>>>16||(m+=16,u<<=16),u>>>24||(m+=8,u<<=8),u>>>28||(m+=4,u<<=4),u>>>30||(m+=2,u<<=2),m-=u>>>31,m}static toHexString(u){return u.toString(16)}static toBinaryString(u){return String(parseInt(String(u),2))}static bitCount(u){return u=u-(u>>>1&1431655765),u=(u&858993459)+(u>>>2&858993459),u=u+(u>>>4)&252645135,u=u+(u>>>8),u=u+(u>>>16),u&63}static truncDivision(u,m){return Math.trunc(u/m)}static parseInt(u,m=void 0){return parseInt(u,m)}}E.MIN_VALUE_32_BITS=-2147483648,E.MAX_VALUE=Number.MAX_SAFE_INTEGER;class _{constructor(u,m){u===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=u,m==null?this.bits=_.makeArray(u):this.bits=m)}getSize(){return this.size}getSizeInBytes(){return Math.floor((this.size+7)/8)}ensureCapacity(u){if(u>this.bits.length*32){const m=_.makeArray(u);w.arraycopy(this.bits,0,m,0,this.bits.length),this.bits=m}}get(u){return(this.bits[Math.floor(u/32)]&1<<(u&31))!==0}set(u){this.bits[Math.floor(u/32)]|=1<<(u&31)}flip(u){this.bits[Math.floor(u/32)]^=1<<(u&31)}getNextSet(u){const m=this.size;if(u>=m)return m;const g=this.bits;let b=Math.floor(u/32),j=g[b];j&=~((1<<(u&31))-1);const S=g.length;for(;j===0;){if(++b===S)return m;j=g[b]}const D=b*32+E.numberOfTrailingZeros(j);return D>m?m:D}getNextUnset(u){const m=this.size;if(u>=m)return m;const g=this.bits;let b=Math.floor(u/32),j=~g[b];j&=~((1<<(u&31))-1);const S=g.length;for(;j===0;){if(++b===S)return m;j=~g[b]}const D=b*32+E.numberOfTrailingZeros(j);return D>m?m:D}setBulk(u,m){this.bits[Math.floor(u/32)]=m}setRange(u,m){if(m<u||u<0||m>this.size)throw new f;if(m===u)return;m--;const g=Math.floor(u/32),b=Math.floor(m/32),j=this.bits;for(let S=g;S<=b;S++){const D=S>g?0:u&31,U=(2<<(S<b?31:m&31))-(1<<D);j[S]|=U}}clear(){const u=this.bits.length,m=this.bits;for(let g=0;g<u;g++)m[g]=0}isRange(u,m,g){if(m<u||u<0||m>this.size)throw new f;if(m===u)return!0;m--;const b=Math.floor(u/32),j=Math.floor(m/32),S=this.bits;for(let D=b;D<=j;D++){const L=D>b?0:u&31,Y=(2<<(D<j?31:m&31))-(1<<L)&4294967295;if((S[D]&Y)!==(g?Y:0))return!1}return!0}appendBit(u){this.ensureCapacity(this.size+1),u&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++}appendBits(u,m){if(m<0||m>32)throw new f("Num bits must be between 0 and 32");this.ensureCapacity(this.size+m);for(let g=m;g>0;g--)this.appendBit((u>>g-1&1)===1)}appendBitArray(u){const m=u.size;this.ensureCapacity(this.size+m);for(let g=0;g<m;g++)this.appendBit(u.get(g))}xor(u){if(this.size!==u.size)throw new f("Sizes don't match");const m=this.bits;for(let g=0,b=m.length;g<b;g++)m[g]^=u.bits[g]}toBytes(u,m,g,b){for(let j=0;j<b;j++){let S=0;for(let D=0;D<8;D++)this.get(u)&&(S|=1<<7-D),u++;m[g+j]=S}}getBitArray(){return this.bits}reverse(){const u=new Int32Array(this.bits.length),m=Math.floor((this.size-1)/32),g=m+1,b=this.bits;for(let j=0;j<g;j++){let S=b[j];S=S>>1&1431655765|(S&1431655765)<<1,S=S>>2&858993459|(S&858993459)<<2,S=S>>4&252645135|(S&252645135)<<4,S=S>>8&16711935|(S&16711935)<<8,S=S>>16&65535|(S&65535)<<16,u[m-j]=S}if(this.size!==g*32){const j=g*32-this.size;let S=u[0]>>>j;for(let D=1;D<g;D++){const L=u[D];S|=L<<32-j,u[D-1]=S,S=L>>>j}u[g-1]=S}this.bits=u}static makeArray(u){return new Int32Array(Math.floor((u+31)/32))}equals(u){if(!(u instanceof _))return!1;const m=u;return this.size===m.size&&C.equals(this.bits,m.bits)}hashCode(){return 31*this.size+C.hashCode(this.bits)}toString(){let u="";for(let m=0,g=this.size;m<g;m++)m&7||(u+=" "),u+=this.get(m)?"X":".";return u}clone(){return new _(this.size,this.bits.slice())}}var T;(function(J){J[J.OTHER=0]="OTHER",J[J.PURE_BARCODE=1]="PURE_BARCODE",J[J.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",J[J.TRY_HARDER=3]="TRY_HARDER",J[J.CHARACTER_SET=4]="CHARACTER_SET",J[J.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",J[J.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",J[J.ASSUME_GS1=7]="ASSUME_GS1",J[J.RETURN_CODABAR_START_END=8]="RETURN_CODABAR_START_END",J[J.NEED_RESULT_POINT_CALLBACK=9]="NEED_RESULT_POINT_CALLBACK",J[J.ALLOWED_EAN_EXTENSIONS=10]="ALLOWED_EAN_EXTENSIONS"})(T||(T={}));var A=T;class P extends d{static getFormatInstance(){return new P}}P.kind="FormatException";var M;(function(J){J[J.Cp437=0]="Cp437",J[J.ISO8859_1=1]="ISO8859_1",J[J.ISO8859_2=2]="ISO8859_2",J[J.ISO8859_3=3]="ISO8859_3",J[J.ISO8859_4=4]="ISO8859_4",J[J.ISO8859_5=5]="ISO8859_5",J[J.ISO8859_6=6]="ISO8859_6",J[J.ISO8859_7=7]="ISO8859_7",J[J.ISO8859_8=8]="ISO8859_8",J[J.ISO8859_9=9]="ISO8859_9",J[J.ISO8859_10=10]="ISO8859_10",J[J.ISO8859_11=11]="ISO8859_11",J[J.ISO8859_13=12]="ISO8859_13",J[J.ISO8859_14=13]="ISO8859_14",J[J.ISO8859_15=14]="ISO8859_15",J[J.ISO8859_16=15]="ISO8859_16",J[J.SJIS=16]="SJIS",J[J.Cp1250=17]="Cp1250",J[J.Cp1251=18]="Cp1251",J[J.Cp1252=19]="Cp1252",J[J.Cp1256=20]="Cp1256",J[J.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",J[J.UTF8=22]="UTF8",J[J.ASCII=23]="ASCII",J[J.Big5=24]="Big5",J[J.GB18030=25]="GB18030",J[J.EUC_KR=26]="EUC_KR"})(M||(M={}));class R{constructor(u,m,g,...b){this.valueIdentifier=u,this.name=g,typeof m=="number"?this.values=Int32Array.from([m]):this.values=m,this.otherEncodingNames=b,R.VALUE_IDENTIFIER_TO_ECI.set(u,this),R.NAME_TO_ECI.set(g,this);const j=this.values;for(let S=0,D=j.length;S!==D;S++){const L=j[S];R.VALUES_TO_ECI.set(L,this)}for(const S of b)R.NAME_TO_ECI.set(S,this)}getValueIdentifier(){return this.valueIdentifier}getName(){return this.name}getValue(){return this.values[0]}static getCharacterSetECIByValue(u){if(u<0||u>=900)throw new P("incorect value");const m=R.VALUES_TO_ECI.get(u);if(m===void 0)throw new P("incorect value");return m}static getCharacterSetECIByName(u){const m=R.NAME_TO_ECI.get(u);if(m===void 0)throw new P("incorect value");return m}equals(u){if(!(u instanceof R))return!1;const m=u;return this.getName()===m.getName()}}R.VALUE_IDENTIFIER_TO_ECI=new Map,R.VALUES_TO_ECI=new Map,R.NAME_TO_ECI=new Map,R.Cp437=new R(M.Cp437,Int32Array.from([0,2]),"Cp437"),R.ISO8859_1=new R(M.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),R.ISO8859_2=new R(M.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),R.ISO8859_3=new R(M.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),R.ISO8859_4=new R(M.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),R.ISO8859_5=new R(M.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),R.ISO8859_6=new R(M.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),R.ISO8859_7=new R(M.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),R.ISO8859_8=new R(M.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),R.ISO8859_9=new R(M.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),R.ISO8859_10=new R(M.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),R.ISO8859_11=new R(M.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),R.ISO8859_13=new R(M.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),R.ISO8859_14=new R(M.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),R.ISO8859_15=new R(M.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),R.ISO8859_16=new R(M.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),R.SJIS=new R(M.SJIS,20,"SJIS","Shift_JIS"),R.Cp1250=new R(M.Cp1250,21,"Cp1250","windows-1250"),R.Cp1251=new R(M.Cp1251,22,"Cp1251","windows-1251"),R.Cp1252=new R(M.Cp1252,23,"Cp1252","windows-1252"),R.Cp1256=new R(M.Cp1256,24,"Cp1256","windows-1256"),R.UnicodeBigUnmarked=new R(M.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),R.UTF8=new R(M.UTF8,26,"UTF8","UTF-8"),R.ASCII=new R(M.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),R.Big5=new R(M.Big5,28,"Big5"),R.GB18030=new R(M.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),R.EUC_KR=new R(M.EUC_KR,30,"EUC_KR","EUC-KR");class $ extends d{}$.kind="UnsupportedOperationException";class W{static decode(u,m){const g=this.encodingName(m);return this.customDecoder?this.customDecoder(u,g):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(g)?this.decodeFallback(u,g):new TextDecoder(g).decode(u)}static shouldDecodeOnFallback(u){return!W.isBrowser()&&u==="ISO-8859-1"}static encode(u,m){const g=this.encodingName(m);return this.customEncoder?this.customEncoder(u,g):typeof TextEncoder>"u"?this.encodeFallback(u):new TextEncoder().encode(u)}static isBrowser(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"}static encodingName(u){return typeof u=="string"?u:u.getName()}static encodingCharacterSet(u){return u instanceof R?u:R.getCharacterSetECIByName(u)}static decodeFallback(u,m){const g=this.encodingCharacterSet(m);if(W.isDecodeFallbackSupported(g)){let b="";for(let j=0,S=u.length;j<S;j++){let D=u[j].toString(16);D.length<2&&(D="0"+D),b+="%"+D}return decodeURIComponent(b)}if(g.equals(R.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(u.buffer));throw new $(`Encoding ${this.encodingName(m)} not supported by fallback.`)}static isDecodeFallbackSupported(u){return u.equals(R.UTF8)||u.equals(R.ISO8859_1)||u.equals(R.ASCII)}static encodeFallback(u){const g=btoa(unescape(encodeURIComponent(u))).split(""),b=[];for(let j=0;j<g.length;j++)b.push(g[j].charCodeAt(0));return new Uint8Array(b)}}class I{static castAsNonUtf8Char(u,m=null){const g=m?m.getName():this.ISO88591;return W.decode(new Uint8Array([u]),g)}static guessEncoding(u,m){if(m!=null&&m.get(A.CHARACTER_SET)!==void 0)return m.get(A.CHARACTER_SET).toString();const g=u.length;let b=!0,j=!0,S=!0,D=0,L=0,U=0,Y=0,ee=0,ae=0,ue=0,be=0,we=0,Ee=0,Me=0;const at=u.length>3&&u[0]===239&&u[1]===187&&u[2]===191;for(let nt=0;nt<g&&(b||j||S);nt++){const et=u[nt]&255;S&&(D>0?et&128?D--:S=!1:et&128&&(et&64?(D++,et&32?(D++,et&16?(D++,et&8?S=!1:Y++):U++):L++):S=!1)),b&&(et>127&&et<160?b=!1:et>159&&(et<192||et===215||et===247)&&Me++),j&&(ee>0?et<64||et===127||et>252?j=!1:ee--:et===128||et===160||et>239?j=!1:et>160&&et<224?(ae++,be=0,ue++,ue>we&&(we=ue)):et>127?(ee++,ue=0,be++,be>Ee&&(Ee=be)):(ue=0,be=0))}return S&&D>0&&(S=!1),j&&ee>0&&(j=!1),S&&(at||L+U+Y>0)?I.UTF8:j&&(I.ASSUME_SHIFT_JIS||we>=3||Ee>=3)?I.SHIFT_JIS:b&&j?we===2&&ae===2||Me*10>=g?I.SHIFT_JIS:I.ISO88591:b?I.ISO88591:j?I.SHIFT_JIS:S?I.UTF8:I.PLATFORM_DEFAULT_ENCODING}static format(u,...m){let g=-1;function b(S,D,L,U,Y,ee){if(S==="%%")return"%";if(m[++g]===void 0)return;S=U?parseInt(U.substr(1)):void 0;let ae=Y?parseInt(Y.substr(1)):void 0,ue;switch(ee){case"s":ue=m[g];break;case"c":ue=m[g][0];break;case"f":ue=parseFloat(m[g]).toFixed(S);break;case"p":ue=parseFloat(m[g]).toPrecision(S);break;case"e":ue=parseFloat(m[g]).toExponential(S);break;case"x":ue=parseInt(m[g]).toString(ae||16);break;case"d":ue=parseFloat(parseInt(m[g],ae||10).toPrecision(S)).toFixed(0);break}ue=typeof ue=="object"?JSON.stringify(ue):(+ue).toString(ae);let be=parseInt(L),we=L&&L[0]+""=="0"?"0":" ";for(;ue.length<be;)ue=D!==void 0?ue+we:we+ue;return ue}let j=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return u.replace(j,b)}static getBytes(u,m){return W.encode(u,m)}static getCharCode(u,m=0){return u.charCodeAt(m)}static getCharAt(u){return String.fromCharCode(u)}}I.SHIFT_JIS=R.SJIS.getName(),I.GB2312="GB2312",I.ISO88591=R.ISO8859_1.getName(),I.EUC_JP="EUC_JP",I.UTF8=R.UTF8.getName(),I.PLATFORM_DEFAULT_ENCODING=I.UTF8,I.ASSUME_SHIFT_JIS=!1;class B{constructor(u=""){this.value=u}enableDecoding(u){return this.encoding=u,this}append(u){return typeof u=="string"?this.value+=u.toString():this.encoding?this.value+=I.castAsNonUtf8Char(u,this.encoding):this.value+=String.fromCharCode(u),this}appendChars(u,m,g){for(let b=m;m<m+g;b++)this.append(u[b]);return this}length(){return this.value.length}charAt(u){return this.value.charAt(u)}deleteCharAt(u){this.value=this.value.substr(0,u)+this.value.substring(u+1)}setCharAt(u,m){this.value=this.value.substr(0,u)+m+this.value.substr(u+1)}substring(u,m){return this.value.substring(u,m)}setLengthToZero(){this.value=""}toString(){return this.value}insert(u,m){this.value=this.value.substr(0,u)+m+this.value.substr(u+m.length)}}class O{constructor(u,m,g,b){if(this.width=u,this.height=m,this.rowSize=g,this.bits=b,m==null&&(m=u),this.height=m,u<1||m<1)throw new f("Both dimensions must be greater than 0");g==null&&(g=Math.floor((u+31)/32)),this.rowSize=g,b==null&&(this.bits=new Int32Array(this.rowSize*this.height))}static parseFromBooleanArray(u){const m=u.length,g=u[0].length,b=new O(g,m);for(let j=0;j<m;j++){const S=u[j];for(let D=0;D<g;D++)S[D]&&b.set(D,j)}return b}static parseFromString(u,m,g){if(u===null)throw new f("stringRepresentation cannot be null");const b=new Array(u.length);let j=0,S=0,D=-1,L=0,U=0;for(;U<u.length;)if(u.charAt(U)===`
`||u.charAt(U)==="\r"){if(j>S){if(D===-1)D=j-S;else if(j-S!==D)throw new f("row lengths do not match");S=j,L++}U++}else if(u.substring(U,U+m.length)===m)U+=m.length,b[j]=!0,j++;else if(u.substring(U,U+g.length)===g)U+=g.length,b[j]=!1,j++;else throw new f("illegal character encountered: "+u.substring(U));if(j>S){if(D===-1)D=j-S;else if(j-S!==D)throw new f("row lengths do not match");L++}const Y=new O(D,L);for(let ee=0;ee<j;ee++)b[ee]&&Y.set(Math.floor(ee%D),Math.floor(ee/D));return Y}get(u,m){const g=m*this.rowSize+Math.floor(u/32);return(this.bits[g]>>>(u&31)&1)!==0}set(u,m){const g=m*this.rowSize+Math.floor(u/32);this.bits[g]|=1<<(u&31)&4294967295}unset(u,m){const g=m*this.rowSize+Math.floor(u/32);this.bits[g]&=~(1<<(u&31)&4294967295)}flip(u,m){const g=m*this.rowSize+Math.floor(u/32);this.bits[g]^=1<<(u&31)&4294967295}xor(u){if(this.width!==u.getWidth()||this.height!==u.getHeight()||this.rowSize!==u.getRowSize())throw new f("input matrix dimensions do not match");const m=new _(Math.floor(this.width/32)+1),g=this.rowSize,b=this.bits;for(let j=0,S=this.height;j<S;j++){const D=j*g,L=u.getRow(j,m).getBitArray();for(let U=0;U<g;U++)b[D+U]^=L[U]}}clear(){const u=this.bits,m=u.length;for(let g=0;g<m;g++)u[g]=0}setRegion(u,m,g,b){if(m<0||u<0)throw new f("Left and top must be nonnegative");if(b<1||g<1)throw new f("Height and width must be at least 1");const j=u+g,S=m+b;if(S>this.height||j>this.width)throw new f("The region must fit inside the matrix");const D=this.rowSize,L=this.bits;for(let U=m;U<S;U++){const Y=U*D;for(let ee=u;ee<j;ee++)L[Y+Math.floor(ee/32)]|=1<<(ee&31)&4294967295}}getRow(u,m){m==null||m.getSize()<this.width?m=new _(this.width):m.clear();const g=this.rowSize,b=this.bits,j=u*g;for(let S=0;S<g;S++)m.setBulk(S*32,b[j+S]);return m}setRow(u,m){w.arraycopy(m.getBitArray(),0,this.bits,u*this.rowSize,this.rowSize)}rotate180(){const u=this.getWidth(),m=this.getHeight();let g=new _(u),b=new _(u);for(let j=0,S=Math.floor((m+1)/2);j<S;j++)g=this.getRow(j,g),b=this.getRow(m-1-j,b),g.reverse(),b.reverse(),this.setRow(j,b),this.setRow(m-1-j,g)}getEnclosingRectangle(){const u=this.width,m=this.height,g=this.rowSize,b=this.bits;let j=u,S=m,D=-1,L=-1;for(let U=0;U<m;U++)for(let Y=0;Y<g;Y++){const ee=b[U*g+Y];if(ee!==0){if(U<S&&(S=U),U>L&&(L=U),Y*32<j){let ae=0;for(;!(ee<<31-ae&4294967295);)ae++;Y*32+ae<j&&(j=Y*32+ae)}if(Y*32+31>D){let ae=31;for(;!(ee>>>ae);)ae--;Y*32+ae>D&&(D=Y*32+ae)}}}return D<j||L<S?null:Int32Array.from([j,S,D-j+1,L-S+1])}getTopLeftOnBit(){const u=this.rowSize,m=this.bits;let g=0;for(;g<m.length&&m[g]===0;)g++;if(g===m.length)return null;const b=g/u;let j=g%u*32;const S=m[g];let D=0;for(;!(S<<31-D&4294967295);)D++;return j+=D,Int32Array.from([j,b])}getBottomRightOnBit(){const u=this.rowSize,m=this.bits;let g=m.length-1;for(;g>=0&&m[g]===0;)g--;if(g<0)return null;const b=Math.floor(g/u);let j=Math.floor(g%u)*32;const S=m[g];let D=31;for(;!(S>>>D);)D--;return j+=D,Int32Array.from([j,b])}getWidth(){return this.width}getHeight(){return this.height}getRowSize(){return this.rowSize}equals(u){if(!(u instanceof O))return!1;const m=u;return this.width===m.width&&this.height===m.height&&this.rowSize===m.rowSize&&C.equals(this.bits,m.bits)}hashCode(){let u=this.width;return u=31*u+this.width,u=31*u+this.height,u=31*u+this.rowSize,u=31*u+C.hashCode(this.bits),u}toString(u="X ",m="  ",g=`
`){return this.buildToString(u,m,g)}buildToString(u,m,g){let b=new B;for(let j=0,S=this.height;j<S;j++){for(let D=0,L=this.width;D<L;D++)b.append(this.get(D,j)?u:m);b.append(g)}return b.toString()}clone(){return new O(this.width,this.height,this.rowSize,this.bits.slice())}}class F extends d{static getNotFoundInstance(){return new F}}F.kind="NotFoundException";class q extends v{constructor(u){super(u),this.luminances=q.EMPTY,this.buckets=new Int32Array(q.LUMINANCE_BUCKETS)}getBlackRow(u,m){const g=this.getLuminanceSource(),b=g.getWidth();m==null||m.getSize()<b?m=new _(b):m.clear(),this.initArrays(b);const j=g.getRow(u,this.luminances),S=this.buckets;for(let L=0;L<b;L++)S[(j[L]&255)>>q.LUMINANCE_SHIFT]++;const D=q.estimateBlackPoint(S);if(b<3)for(let L=0;L<b;L++)(j[L]&255)<D&&m.set(L);else{let L=j[0]&255,U=j[1]&255;for(let Y=1;Y<b-1;Y++){const ee=j[Y+1]&255;(U*4-L-ee)/2<D&&m.set(Y),L=U,U=ee}}return m}getBlackMatrix(){const u=this.getLuminanceSource(),m=u.getWidth(),g=u.getHeight(),b=new O(m,g);this.initArrays(m);const j=this.buckets;for(let L=1;L<5;L++){const U=Math.floor(g*L/5),Y=u.getRow(U,this.luminances),ee=Math.floor(m*4/5);for(let ae=Math.floor(m/5);ae<ee;ae++){const ue=Y[ae]&255;j[ue>>q.LUMINANCE_SHIFT]++}}const S=q.estimateBlackPoint(j),D=u.getMatrix();for(let L=0;L<g;L++){const U=L*m;for(let Y=0;Y<m;Y++)(D[U+Y]&255)<S&&b.set(Y,L)}return b}createBinarizer(u){return new q(u)}initArrays(u){this.luminances.length<u&&(this.luminances=new Uint8ClampedArray(u));const m=this.buckets;for(let g=0;g<q.LUMINANCE_BUCKETS;g++)m[g]=0}static estimateBlackPoint(u){const m=u.length;let g=0,b=0,j=0;for(let Y=0;Y<m;Y++)u[Y]>j&&(b=Y,j=u[Y]),u[Y]>g&&(g=u[Y]);let S=0,D=0;for(let Y=0;Y<m;Y++){const ee=Y-b,ae=u[Y]*ee*ee;ae>D&&(S=Y,D=ae)}if(b>S){const Y=b;b=S,S=Y}if(S-b<=m/16)throw new F;let L=S-1,U=-1;for(let Y=S-1;Y>b;Y--){const ee=Y-b,ae=ee*ee*(S-Y)*(g-u[Y]);ae>U&&(L=Y,U=ae)}return L<<q.LUMINANCE_SHIFT}}q.LUMINANCE_BITS=5,q.LUMINANCE_SHIFT=8-q.LUMINANCE_BITS,q.LUMINANCE_BUCKETS=1<<q.LUMINANCE_BITS,q.EMPTY=Uint8ClampedArray.from([0]);class H extends q{constructor(u){super(u),this.matrix=null}getBlackMatrix(){if(this.matrix!==null)return this.matrix;const u=this.getLuminanceSource(),m=u.getWidth(),g=u.getHeight();if(m>=H.MINIMUM_DIMENSION&&g>=H.MINIMUM_DIMENSION){const b=u.getMatrix();let j=m>>H.BLOCK_SIZE_POWER;m&H.BLOCK_SIZE_MASK&&j++;let S=g>>H.BLOCK_SIZE_POWER;g&H.BLOCK_SIZE_MASK&&S++;const D=H.calculateBlackPoints(b,j,S,m,g),L=new O(m,g);H.calculateThresholdForBlock(b,j,S,m,g,D,L),this.matrix=L}else this.matrix=super.getBlackMatrix();return this.matrix}createBinarizer(u){return new H(u)}static calculateThresholdForBlock(u,m,g,b,j,S,D){const L=j-H.BLOCK_SIZE,U=b-H.BLOCK_SIZE;for(let Y=0;Y<g;Y++){let ee=Y<<H.BLOCK_SIZE_POWER;ee>L&&(ee=L);const ae=H.cap(Y,2,g-3);for(let ue=0;ue<m;ue++){let be=ue<<H.BLOCK_SIZE_POWER;be>U&&(be=U);const we=H.cap(ue,2,m-3);let Ee=0;for(let at=-2;at<=2;at++){const nt=S[ae+at];Ee+=nt[we-2]+nt[we-1]+nt[we]+nt[we+1]+nt[we+2]}const Me=Ee/25;H.thresholdBlock(u,be,ee,Me,b,D)}}}static cap(u,m,g){return u<m?m:u>g?g:u}static thresholdBlock(u,m,g,b,j,S){for(let D=0,L=g*j+m;D<H.BLOCK_SIZE;D++,L+=j)for(let U=0;U<H.BLOCK_SIZE;U++)(u[L+U]&255)<=b&&S.set(m+U,g+D)}static calculateBlackPoints(u,m,g,b,j){const S=j-H.BLOCK_SIZE,D=b-H.BLOCK_SIZE,L=new Array(g);for(let U=0;U<g;U++){L[U]=new Int32Array(m);let Y=U<<H.BLOCK_SIZE_POWER;Y>S&&(Y=S);for(let ee=0;ee<m;ee++){let ae=ee<<H.BLOCK_SIZE_POWER;ae>D&&(ae=D);let ue=0,be=255,we=0;for(let Me=0,at=Y*b+ae;Me<H.BLOCK_SIZE;Me++,at+=b){for(let nt=0;nt<H.BLOCK_SIZE;nt++){const et=u[at+nt]&255;ue+=et,et<be&&(be=et),et>we&&(we=et)}if(we-be>H.MIN_DYNAMIC_RANGE)for(Me++,at+=b;Me<H.BLOCK_SIZE;Me++,at+=b)for(let nt=0;nt<H.BLOCK_SIZE;nt++)ue+=u[at+nt]&255}let Ee=ue>>H.BLOCK_SIZE_POWER*2;if(we-be<=H.MIN_DYNAMIC_RANGE&&(Ee=be/2,U>0&&ee>0)){const Me=(L[U-1][ee]+2*L[U][ee-1]+L[U-1][ee-1])/4;be<Me&&(Ee=Me)}L[U][ee]=Ee}}return L}}H.BLOCK_SIZE_POWER=3,H.BLOCK_SIZE=1<<H.BLOCK_SIZE_POWER,H.BLOCK_SIZE_MASK=H.BLOCK_SIZE-1,H.MINIMUM_DIMENSION=H.BLOCK_SIZE*5,H.MIN_DYNAMIC_RANGE=24;class K{constructor(u,m){this.width=u,this.height=m}getWidth(){return this.width}getHeight(){return this.height}isCropSupported(){return!1}crop(u,m,g,b){throw new $("This luminance source does not support cropping.")}isRotateSupported(){return!1}rotateCounterClockwise(){throw new $("This luminance source does not support rotation by 90 degrees.")}rotateCounterClockwise45(){throw new $("This luminance source does not support rotation by 45 degrees.")}toString(){const u=new Uint8ClampedArray(this.width);let m=new B;for(let g=0;g<this.height;g++){const b=this.getRow(g,u);for(let j=0;j<this.width;j++){const S=b[j]&255;let D;S<64?D="#":S<128?D="+":S<192?D=".":D=" ",m.append(D)}m.append(`
`)}return m.toString()}}class V extends K{constructor(u){super(u.getWidth(),u.getHeight()),this.delegate=u}getRow(u,m){const g=this.delegate.getRow(u,m),b=this.getWidth();for(let j=0;j<b;j++)g[j]=255-(g[j]&255);return g}getMatrix(){const u=this.delegate.getMatrix(),m=this.getWidth()*this.getHeight(),g=new Uint8ClampedArray(m);for(let b=0;b<m;b++)g[b]=255-(u[b]&255);return g}isCropSupported(){return this.delegate.isCropSupported()}crop(u,m,g,b){return new V(this.delegate.crop(u,m,g,b))}isRotateSupported(){return this.delegate.isRotateSupported()}invert(){return this.delegate}rotateCounterClockwise(){return new V(this.delegate.rotateCounterClockwise())}rotateCounterClockwise45(){return new V(this.delegate.rotateCounterClockwise45())}}class z extends K{constructor(u){super(u.width,u.height),this.canvas=u,this.tempCanvasElement=null,this.buffer=z.makeBufferFromCanvasImageData(u)}static makeBufferFromCanvasImageData(u){const m=u.getContext("2d").getImageData(0,0,u.width,u.height);return z.toGrayscaleBuffer(m.data,u.width,u.height)}static toGrayscaleBuffer(u,m,g){const b=new Uint8ClampedArray(m*g);for(let j=0,S=0,D=u.length;j<D;j+=4,S++){let L;if(u[j+3]===0)L=255;else{const Y=u[j],ee=u[j+1],ae=u[j+2];L=306*Y+601*ee+117*ae+512>>10}b[S]=L}return b}getRow(u,m){if(u<0||u>=this.getHeight())throw new f("Requested row is outside the image: "+u);const g=this.getWidth(),b=u*g;return m===null?m=this.buffer.slice(b,b+g):(m.length<g&&(m=new Uint8ClampedArray(g)),m.set(this.buffer.slice(b,b+g))),m}getMatrix(){return this.buffer}isCropSupported(){return!0}crop(u,m,g,b){return super.crop(u,m,g,b),this}isRotateSupported(){return!0}rotateCounterClockwise(){return this.rotate(-90),this}rotateCounterClockwise45(){return this.rotate(-45),this}getTempCanvasElement(){if(this.tempCanvasElement===null){const u=this.canvas.ownerDocument.createElement("canvas");u.width=this.canvas.width,u.height=this.canvas.height,this.tempCanvasElement=u}return this.tempCanvasElement}rotate(u){const m=this.getTempCanvasElement(),g=m.getContext("2d"),b=u*z.DEGREE_TO_RADIANS,j=this.canvas.width,S=this.canvas.height,D=Math.ceil(Math.abs(Math.cos(b))*j+Math.abs(Math.sin(b))*S),L=Math.ceil(Math.abs(Math.sin(b))*j+Math.abs(Math.cos(b))*S);return m.width=D,m.height=L,g.translate(D/2,L/2),g.rotate(b),g.drawImage(this.canvas,j/-2,S/-2),this.buffer=z.makeBufferFromCanvasImageData(m),this}invert(){return new V(this)}}z.DEGREE_TO_RADIANS=Math.PI/180;class G{constructor(u,m,g){this.deviceId=u,this.label=m,this.kind="videoinput",this.groupId=g||void 0}toJSON(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}}}var te=(globalThis||Gx||self||window||void 0)&&(globalThis||Gx||self||window||void 0).__awaiter||function(J,u,m,g){function b(j){return j instanceof m?j:new m(function(S){S(j)})}return new(m||(m=Promise))(function(j,S){function D(Y){try{U(g.next(Y))}catch(ee){S(ee)}}function L(Y){try{U(g.throw(Y))}catch(ee){S(ee)}}function U(Y){Y.done?j(Y.value):b(Y.value).then(D,L)}U((g=g.apply(J,u||[])).next())})};class he{constructor(u,m=500,g){this.reader=u,this.timeBetweenScansMillis=m,this._hints=g,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}get hasNavigator(){return typeof navigator<"u"}get isMediaDevicesSuported(){return this.hasNavigator&&!!navigator.mediaDevices}get canEnumerateDevices(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)}get timeBetweenDecodingAttempts(){return this._timeBetweenDecodingAttempts}set timeBetweenDecodingAttempts(u){this._timeBetweenDecodingAttempts=u<0?0:u}set hints(u){this._hints=u||null}get hints(){return this._hints}listVideoInputDevices(){return te(this,void 0,void 0,function*(){if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");const u=yield navigator.mediaDevices.enumerateDevices(),m=[];for(const g of u){const b=g.kind==="video"?"videoinput":g.kind;if(b!=="videoinput")continue;const j=g.deviceId||g.id,S=g.label||`Video device ${m.length+1}`,D=g.groupId,L={deviceId:j,label:S,kind:b,groupId:D};m.push(L)}return m})}getVideoInputDevices(){return te(this,void 0,void 0,function*(){return(yield this.listVideoInputDevices()).map(m=>new G(m.deviceId,m.label))})}findDeviceById(u){return te(this,void 0,void 0,function*(){const m=yield this.listVideoInputDevices();return m?m.find(g=>g.deviceId===u):null})}decodeFromInputVideoDevice(u,m){return te(this,void 0,void 0,function*(){return yield this.decodeOnceFromVideoDevice(u,m)})}decodeOnceFromVideoDevice(u,m){return te(this,void 0,void 0,function*(){this.reset();let g;u?g={deviceId:{exact:u}}:g={facingMode:"environment"};const b={video:g};return yield this.decodeOnceFromConstraints(b,m)})}decodeOnceFromConstraints(u,m){return te(this,void 0,void 0,function*(){const g=yield navigator.mediaDevices.getUserMedia(u);return yield this.decodeOnceFromStream(g,m)})}decodeOnceFromStream(u,m){return te(this,void 0,void 0,function*(){this.reset();const g=yield this.attachStreamToVideo(u,m);return yield this.decodeOnce(g)})}decodeFromInputVideoDeviceContinuously(u,m,g){return te(this,void 0,void 0,function*(){return yield this.decodeFromVideoDevice(u,m,g)})}decodeFromVideoDevice(u,m,g){return te(this,void 0,void 0,function*(){let b;u?b={deviceId:{exact:u}}:b={facingMode:"environment"};const j={video:b};return yield this.decodeFromConstraints(j,m,g)})}decodeFromConstraints(u,m,g){return te(this,void 0,void 0,function*(){const b=yield navigator.mediaDevices.getUserMedia(u);return yield this.decodeFromStream(b,m,g)})}decodeFromStream(u,m,g){return te(this,void 0,void 0,function*(){this.reset();const b=yield this.attachStreamToVideo(u,m);return yield this.decodeContinuously(b,g)})}stopAsyncDecode(){this._stopAsyncDecode=!0}stopContinuousDecode(){this._stopContinuousDecode=!0}attachStreamToVideo(u,m){return te(this,void 0,void 0,function*(){const g=this.prepareVideoElement(m);return this.addVideoSource(g,u),this.videoElement=g,this.stream=u,yield this.playVideoOnLoadAsync(g),g})}playVideoOnLoadAsync(u){return new Promise((m,g)=>this.playVideoOnLoad(u,()=>m()))}playVideoOnLoad(u,m){this.videoEndedListener=()=>this.stopStreams(),this.videoCanPlayListener=()=>this.tryPlayVideo(u),u.addEventListener("ended",this.videoEndedListener),u.addEventListener("canplay",this.videoCanPlayListener),u.addEventListener("playing",m),this.tryPlayVideo(u)}isVideoPlaying(u){return u.currentTime>0&&!u.paused&&!u.ended&&u.readyState>2}tryPlayVideo(u){return te(this,void 0,void 0,function*(){if(this.isVideoPlaying(u)){console.warn("Trying to play video that is already playing.");return}try{yield u.play()}catch{console.warn("It was not possible to play the video.")}})}getMediaElement(u,m){const g=document.getElementById(u);if(!g)throw new h(`element with id '${u}' not found`);if(g.nodeName.toLowerCase()!==m.toLowerCase())throw new h(`element with id '${u}' must be an ${m} element`);return g}decodeFromImage(u,m){if(!u&&!m)throw new h("either imageElement with a src set or an url must be provided");return m&&!u?this.decodeFromImageUrl(m):this.decodeFromImageElement(u)}decodeFromVideo(u,m){if(!u&&!m)throw new h("Either an element with a src set or an URL must be provided");return m&&!u?this.decodeFromVideoUrl(m):this.decodeFromVideoElement(u)}decodeFromVideoContinuously(u,m,g){if(u===void 0&&m===void 0)throw new h("Either an element with a src set or an URL must be provided");return m&&!u?this.decodeFromVideoUrlContinuously(m,g):this.decodeFromVideoElementContinuously(u,g)}decodeFromImageElement(u){if(!u)throw new h("An image element must be provided.");this.reset();const m=this.prepareImageElement(u);this.imageElement=m;let g;return this.isImageLoaded(m)?g=this.decodeOnce(m,!1,!0):g=this._decodeOnLoadImage(m),g}decodeFromVideoElement(u){const m=this._decodeFromVideoElementSetup(u);return this._decodeOnLoadVideo(m)}decodeFromVideoElementContinuously(u,m){const g=this._decodeFromVideoElementSetup(u);return this._decodeOnLoadVideoContinuously(g,m)}_decodeFromVideoElementSetup(u){if(!u)throw new h("A video element must be provided.");this.reset();const m=this.prepareVideoElement(u);return this.videoElement=m,m}decodeFromImageUrl(u){if(!u)throw new h("An URL must be provided.");this.reset();const m=this.prepareImageElement();this.imageElement=m;const g=this._decodeOnLoadImage(m);return m.src=u,g}decodeFromVideoUrl(u){if(!u)throw new h("An URL must be provided.");this.reset();const m=this.prepareVideoElement(),g=this.decodeFromVideoElement(m);return m.src=u,g}decodeFromVideoUrlContinuously(u,m){if(!u)throw new h("An URL must be provided.");this.reset();const g=this.prepareVideoElement(),b=this.decodeFromVideoElementContinuously(g,m);return g.src=u,b}_decodeOnLoadImage(u){return new Promise((m,g)=>{this.imageLoadedListener=()=>this.decodeOnce(u,!1,!0).then(m,g),u.addEventListener("load",this.imageLoadedListener)})}_decodeOnLoadVideo(u){return te(this,void 0,void 0,function*(){return yield this.playVideoOnLoadAsync(u),yield this.decodeOnce(u)})}_decodeOnLoadVideoContinuously(u,m){return te(this,void 0,void 0,function*(){yield this.playVideoOnLoadAsync(u),this.decodeContinuously(u,m)})}isImageLoaded(u){return!(!u.complete||u.naturalWidth===0)}prepareImageElement(u){let m;return typeof u>"u"&&(m=document.createElement("img"),m.width=200,m.height=200),typeof u=="string"&&(m=this.getMediaElement(u,"img")),u instanceof HTMLImageElement&&(m=u),m}prepareVideoElement(u){let m;return!u&&typeof document<"u"&&(m=document.createElement("video"),m.width=200,m.height=200),typeof u=="string"&&(m=this.getMediaElement(u,"video")),u instanceof HTMLVideoElement&&(m=u),m.setAttribute("autoplay","true"),m.setAttribute("muted","true"),m.setAttribute("playsinline","true"),m}decodeOnce(u,m=!0,g=!0){this._stopAsyncDecode=!1;const b=(j,S)=>{if(this._stopAsyncDecode){S(new F("Video stream has ended before any code could be detected.")),this._stopAsyncDecode=void 0;return}try{const D=this.decode(u);j(D)}catch(D){const L=m&&D instanceof F,Y=(D instanceof y||D instanceof P)&&g;if(L||Y)return setTimeout(b,this._timeBetweenDecodingAttempts,j,S);S(D)}};return new Promise((j,S)=>b(j,S))}decodeContinuously(u,m){this._stopContinuousDecode=!1;const g=()=>{if(this._stopContinuousDecode){this._stopContinuousDecode=void 0;return}try{const b=this.decode(u);m(b,null),setTimeout(g,this.timeBetweenScansMillis)}catch(b){m(null,b);const j=b instanceof y||b instanceof P,S=b instanceof F;(j||S)&&setTimeout(g,this._timeBetweenDecodingAttempts)}};g()}decode(u){const m=this.createBinaryBitmap(u);return this.decodeBitmap(m)}_isHTMLVideoElement(u){return u.videoWidth!==0}drawFrameOnCanvas(u,m,g){m||(m={sx:0,sy:0,sWidth:u.videoWidth,sHeight:u.videoHeight,dx:0,dy:0,dWidth:u.videoWidth,dHeight:u.videoHeight}),g||(g=this.captureCanvasContext),g.drawImage(u,m.sx,m.sy,m.sWidth,m.sHeight,m.dx,m.dy,m.dWidth,m.dHeight)}drawImageOnCanvas(u,m,g=this.captureCanvasContext){m||(m={sx:0,sy:0,sWidth:u.naturalWidth,sHeight:u.naturalHeight,dx:0,dy:0,dWidth:u.naturalWidth,dHeight:u.naturalHeight}),g||(g=this.captureCanvasContext),g.drawImage(u,m.sx,m.sy,m.sWidth,m.sHeight,m.dx,m.dy,m.dWidth,m.dHeight)}createBinaryBitmap(u){this.getCaptureCanvasContext(u),this._isHTMLVideoElement(u)?this.drawFrameOnCanvas(u):this.drawImageOnCanvas(u);const m=this.getCaptureCanvas(u),g=new z(m),b=new H(g);return new x(b)}getCaptureCanvasContext(u){if(!this.captureCanvasContext){const g=this.getCaptureCanvas(u).getContext("2d");this.captureCanvasContext=g}return this.captureCanvasContext}getCaptureCanvas(u){if(!this.captureCanvas){const m=this.createCaptureCanvas(u);this.captureCanvas=m}return this.captureCanvas}decodeBitmap(u){return this.reader.decode(u,this._hints)}createCaptureCanvas(u){if(typeof document>"u")return this._destroyCaptureCanvas(),null;const m=document.createElement("canvas");let g,b;return typeof u<"u"&&(u instanceof HTMLVideoElement?(g=u.videoWidth,b=u.videoHeight):u instanceof HTMLImageElement&&(g=u.naturalWidth||u.width,b=u.naturalHeight||u.height)),m.style.width=g+"px",m.style.height=b+"px",m.width=g,m.height=b,m}stopStreams(){this.stream&&(this.stream.getVideoTracks().forEach(u=>u.stop()),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()}reset(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()}_destroyVideoElement(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)}_destroyImageElement(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)}_destroyCaptureCanvas(){this.captureCanvasContext=void 0,this.captureCanvas=void 0}addVideoSource(u,m){try{u.srcObject=m}catch{u.src=URL.createObjectURL(m)}}cleanVideoSource(u){try{u.srcObject=null}catch{u.src=""}this.videoElement.removeAttribute("src")}}class ne{constructor(u,m,g=m==null?0:8*m.length,b,j,S=w.currentTimeMillis()){this.text=u,this.rawBytes=m,this.numBits=g,this.resultPoints=b,this.format=j,this.timestamp=S,this.text=u,this.rawBytes=m,g==null?this.numBits=m==null?0:8*m.length:this.numBits=g,this.resultPoints=b,this.format=j,this.resultMetadata=null,S==null?this.timestamp=w.currentTimeMillis():this.timestamp=S}getText(){return this.text}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}getResultPoints(){return this.resultPoints}getBarcodeFormat(){return this.format}getResultMetadata(){return this.resultMetadata}putMetadata(u,m){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(u,m)}putAllMetadata(u){u!==null&&(this.resultMetadata===null?this.resultMetadata=u:this.resultMetadata=new Map(u))}addResultPoints(u){const m=this.resultPoints;if(m===null)this.resultPoints=u;else if(u!==null&&u.length>0){const g=new Array(m.length+u.length);w.arraycopy(m,0,g,0,m.length),w.arraycopy(u,0,g,m.length,u.length),this.resultPoints=g}}getTimestamp(){return this.timestamp}toString(){return this.text}}var ce;(function(J){J[J.AZTEC=0]="AZTEC",J[J.CODABAR=1]="CODABAR",J[J.CODE_39=2]="CODE_39",J[J.CODE_93=3]="CODE_93",J[J.CODE_128=4]="CODE_128",J[J.DATA_MATRIX=5]="DATA_MATRIX",J[J.EAN_8=6]="EAN_8",J[J.EAN_13=7]="EAN_13",J[J.ITF=8]="ITF",J[J.MAXICODE=9]="MAXICODE",J[J.PDF_417=10]="PDF_417",J[J.QR_CODE=11]="QR_CODE",J[J.RSS_14=12]="RSS_14",J[J.RSS_EXPANDED=13]="RSS_EXPANDED",J[J.UPC_A=14]="UPC_A",J[J.UPC_E=15]="UPC_E",J[J.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(ce||(ce={}));var xe=ce,_e;(function(J){J[J.OTHER=0]="OTHER",J[J.ORIENTATION=1]="ORIENTATION",J[J.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",J[J.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",J[J.ISSUE_NUMBER=4]="ISSUE_NUMBER",J[J.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",J[J.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",J[J.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",J[J.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",J[J.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",J[J.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(_e||(_e={}));var oe=_e;class ie{constructor(u,m,g,b,j=-1,S=-1){this.rawBytes=u,this.text=m,this.byteSegments=g,this.ecLevel=b,this.structuredAppendSequenceNumber=j,this.structuredAppendParity=S,this.numBits=u==null?0:8*u.length}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}setNumBits(u){this.numBits=u}getText(){return this.text}getByteSegments(){return this.byteSegments}getECLevel(){return this.ecLevel}getErrorsCorrected(){return this.errorsCorrected}setErrorsCorrected(u){this.errorsCorrected=u}getErasures(){return this.erasures}setErasures(u){this.erasures=u}getOther(){return this.other}setOther(u){this.other=u}hasStructuredAppend(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0}getStructuredAppendParity(){return this.structuredAppendParity}getStructuredAppendSequenceNumber(){return this.structuredAppendSequenceNumber}}class ge{exp(u){return this.expTable[u]}log(u){if(u===0)throw new f;return this.logTable[u]}static addOrSubtract(u,m){return u^m}}class Z{constructor(u,m){if(m.length===0)throw new f;this.field=u;const g=m.length;if(g>1&&m[0]===0){let b=1;for(;b<g&&m[b]===0;)b++;b===g?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(g-b),w.arraycopy(m,b,this.coefficients,0,this.coefficients.length))}else this.coefficients=m}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(u){return this.coefficients[this.coefficients.length-1-u]}evaluateAt(u){if(u===0)return this.getCoefficient(0);const m=this.coefficients;let g;if(u===1){g=0;for(let S=0,D=m.length;S!==D;S++){const L=m[S];g=ge.addOrSubtract(g,L)}return g}g=m[0];const b=m.length,j=this.field;for(let S=1;S<b;S++)g=ge.addOrSubtract(j.multiply(u,g),m[S]);return g}addOrSubtract(u){if(!this.field.equals(u.field))throw new f("GenericGFPolys do not have same GenericGF field");if(this.isZero())return u;if(u.isZero())return this;let m=this.coefficients,g=u.coefficients;if(m.length>g.length){const S=m;m=g,g=S}let b=new Int32Array(g.length);const j=g.length-m.length;w.arraycopy(g,0,b,0,j);for(let S=j;S<g.length;S++)b[S]=ge.addOrSubtract(m[S-j],g[S]);return new Z(this.field,b)}multiply(u){if(!this.field.equals(u.field))throw new f("GenericGFPolys do not have same GenericGF field");if(this.isZero()||u.isZero())return this.field.getZero();const m=this.coefficients,g=m.length,b=u.coefficients,j=b.length,S=new Int32Array(g+j-1),D=this.field;for(let L=0;L<g;L++){const U=m[L];for(let Y=0;Y<j;Y++)S[L+Y]=ge.addOrSubtract(S[L+Y],D.multiply(U,b[Y]))}return new Z(D,S)}multiplyScalar(u){if(u===0)return this.field.getZero();if(u===1)return this;const m=this.coefficients.length,g=this.field,b=new Int32Array(m),j=this.coefficients;for(let S=0;S<m;S++)b[S]=g.multiply(j[S],u);return new Z(g,b)}multiplyByMonomial(u,m){if(u<0)throw new f;if(m===0)return this.field.getZero();const g=this.coefficients,b=g.length,j=new Int32Array(b+u),S=this.field;for(let D=0;D<b;D++)j[D]=S.multiply(g[D],m);return new Z(S,j)}divide(u){if(!this.field.equals(u.field))throw new f("GenericGFPolys do not have same GenericGF field");if(u.isZero())throw new f("Divide by 0");const m=this.field;let g=m.getZero(),b=this;const j=u.getCoefficient(u.getDegree()),S=m.inverse(j);for(;b.getDegree()>=u.getDegree()&&!b.isZero();){const D=b.getDegree()-u.getDegree(),L=m.multiply(b.getCoefficient(b.getDegree()),S),U=u.multiplyByMonomial(D,L),Y=m.buildMonomial(D,L);g=g.addOrSubtract(Y),b=b.addOrSubtract(U)}return[g,b]}toString(){let u="";for(let m=this.getDegree();m>=0;m--){let g=this.getCoefficient(m);if(g!==0){if(g<0?(u+=" - ",g=-g):u.length>0&&(u+=" + "),m===0||g!==1){const b=this.field.log(g);b===0?u+="1":b===1?u+="a":(u+="a^",u+=b)}m!==0&&(m===1?u+="x":(u+="x^",u+=m))}}return u}}class Q extends d{}Q.kind="ArithmeticException";class re extends ge{constructor(u,m,g){super(),this.primitive=u,this.size=m,this.generatorBase=g;const b=new Int32Array(m);let j=1;for(let D=0;D<m;D++)b[D]=j,j*=2,j>=m&&(j^=u,j&=m-1);this.expTable=b;const S=new Int32Array(m);for(let D=0;D<m-1;D++)S[b[D]]=D;this.logTable=S,this.zero=new Z(this,Int32Array.from([0])),this.one=new Z(this,Int32Array.from([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(u,m){if(u<0)throw new f;if(m===0)return this.zero;const g=new Int32Array(u+1);return g[0]=m,new Z(this,g)}inverse(u){if(u===0)throw new Q;return this.expTable[this.size-this.logTable[u]-1]}multiply(u,m){return u===0||m===0?0:this.expTable[(this.logTable[u]+this.logTable[m])%(this.size-1)]}getSize(){return this.size}getGeneratorBase(){return this.generatorBase}toString(){return"GF(0x"+E.toHexString(this.primitive)+","+this.size+")"}equals(u){return u===this}}re.AZTEC_DATA_12=new re(4201,4096,1),re.AZTEC_DATA_10=new re(1033,1024,1),re.AZTEC_DATA_6=new re(67,64,1),re.AZTEC_PARAM=new re(19,16,1),re.QR_CODE_FIELD_256=new re(285,256,0),re.DATA_MATRIX_FIELD_256=new re(301,256,1),re.AZTEC_DATA_8=re.DATA_MATRIX_FIELD_256,re.MAXICODE_FIELD_64=re.AZTEC_DATA_6;class pe extends d{}pe.kind="ReedSolomonException";class Se extends d{}Se.kind="IllegalStateException";class je{constructor(u){this.field=u}decode(u,m){const g=this.field,b=new Z(g,u),j=new Int32Array(m);let S=!0;for(let ue=0;ue<m;ue++){const be=b.evaluateAt(g.exp(ue+g.getGeneratorBase()));j[j.length-1-ue]=be,be!==0&&(S=!1)}if(S)return;const D=new Z(g,j),L=this.runEuclideanAlgorithm(g.buildMonomial(m,1),D,m),U=L[0],Y=L[1],ee=this.findErrorLocations(U),ae=this.findErrorMagnitudes(Y,ee);for(let ue=0;ue<ee.length;ue++){const be=u.length-1-g.log(ee[ue]);if(be<0)throw new pe("Bad error location");u[be]=re.addOrSubtract(u[be],ae[ue])}}runEuclideanAlgorithm(u,m,g){if(u.getDegree()<m.getDegree()){const ue=u;u=m,m=ue}const b=this.field;let j=u,S=m,D=b.getZero(),L=b.getOne();for(;S.getDegree()>=(g/2|0);){let ue=j,be=D;if(j=S,D=L,j.isZero())throw new pe("r_{i-1} was zero");S=ue;let we=b.getZero();const Ee=j.getCoefficient(j.getDegree()),Me=b.inverse(Ee);for(;S.getDegree()>=j.getDegree()&&!S.isZero();){const at=S.getDegree()-j.getDegree(),nt=b.multiply(S.getCoefficient(S.getDegree()),Me);we=we.addOrSubtract(b.buildMonomial(at,nt)),S=S.addOrSubtract(j.multiplyByMonomial(at,nt))}if(L=we.multiply(D).addOrSubtract(be),S.getDegree()>=j.getDegree())throw new Se("Division algorithm failed to reduce polynomial?")}const U=L.getCoefficient(0);if(U===0)throw new pe("sigmaTilde(0) was zero");const Y=b.inverse(U),ee=L.multiplyScalar(Y),ae=S.multiplyScalar(Y);return[ee,ae]}findErrorLocations(u){const m=u.getDegree();if(m===1)return Int32Array.from([u.getCoefficient(1)]);const g=new Int32Array(m);let b=0;const j=this.field;for(let S=1;S<j.getSize()&&b<m;S++)u.evaluateAt(S)===0&&(g[b]=j.inverse(S),b++);if(b!==m)throw new pe("Error locator degree does not match number of roots");return g}findErrorMagnitudes(u,m){const g=m.length,b=new Int32Array(g),j=this.field;for(let S=0;S<g;S++){const D=j.inverse(m[S]);let L=1;for(let U=0;U<g;U++)if(S!==U){const Y=j.multiply(m[U],D),ee=Y&1?Y&-2:Y|1;L=j.multiply(L,ee)}b[S]=j.multiply(u.evaluateAt(D),j.inverse(L)),j.getGeneratorBase()!==0&&(b[S]=j.multiply(b[S],D))}return b}}var Fe;(function(J){J[J.UPPER=0]="UPPER",J[J.LOWER=1]="LOWER",J[J.MIXED=2]="MIXED",J[J.DIGIT=3]="DIGIT",J[J.PUNCT=4]="PUNCT",J[J.BINARY=5]="BINARY"})(Fe||(Fe={}));class ke{decode(u){this.ddata=u;let m=u.getBits(),g=this.extractBits(m),b=this.correctBits(g),j=ke.convertBoolArrayToByteArray(b),S=ke.getEncodedData(b),D=new ie(j,S,null,null);return D.setNumBits(b.length),D}static highLevelDecode(u){return this.getEncodedData(u)}static getEncodedData(u){let m=u.length,g=Fe.UPPER,b=Fe.UPPER,j="",S=0;for(;S<m;)if(b===Fe.BINARY){if(m-S<5)break;let D=ke.readCode(u,S,5);if(S+=5,D===0){if(m-S<11)break;D=ke.readCode(u,S,11)+31,S+=11}for(let L=0;L<D;L++){if(m-S<8){S=m;break}const U=ke.readCode(u,S,8);j+=I.castAsNonUtf8Char(U),S+=8}b=g}else{let D=b===Fe.DIGIT?4:5;if(m-S<D)break;let L=ke.readCode(u,S,D);S+=D;let U=ke.getCharacter(b,L);U.startsWith("CTRL_")?(g=b,b=ke.getTable(U.charAt(5)),U.charAt(6)==="L"&&(g=b)):(j+=U,b=g)}return j}static getTable(u){switch(u){case"L":return Fe.LOWER;case"P":return Fe.PUNCT;case"M":return Fe.MIXED;case"D":return Fe.DIGIT;case"B":return Fe.BINARY;case"U":default:return Fe.UPPER}}static getCharacter(u,m){switch(u){case Fe.UPPER:return ke.UPPER_TABLE[m];case Fe.LOWER:return ke.LOWER_TABLE[m];case Fe.MIXED:return ke.MIXED_TABLE[m];case Fe.PUNCT:return ke.PUNCT_TABLE[m];case Fe.DIGIT:return ke.DIGIT_TABLE[m];default:throw new Se("Bad table")}}correctBits(u){let m,g;this.ddata.getNbLayers()<=2?(g=6,m=re.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(g=8,m=re.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(g=10,m=re.AZTEC_DATA_10):(g=12,m=re.AZTEC_DATA_12);let b=this.ddata.getNbDatablocks(),j=u.length/g;if(j<b)throw new P;let S=u.length%g,D=new Int32Array(j);for(let ae=0;ae<j;ae++,S+=g)D[ae]=ke.readCode(u,S,g);try{new je(m).decode(D,j-b)}catch(ae){throw new P(ae)}let L=(1<<g)-1,U=0;for(let ae=0;ae<b;ae++){let ue=D[ae];if(ue===0||ue===L)throw new P;(ue===1||ue===L-1)&&U++}let Y=new Array(b*g-U),ee=0;for(let ae=0;ae<b;ae++){let ue=D[ae];if(ue===1||ue===L-1)Y.fill(ue>1,ee,ee+g-1),ee+=g-1;else for(let be=g-1;be>=0;--be)Y[ee++]=(ue&1<<be)!==0}return Y}extractBits(u){let m=this.ddata.isCompact(),g=this.ddata.getNbLayers(),b=(m?11:14)+g*4,j=new Int32Array(b),S=new Array(this.totalBitsInLayer(g,m));if(m)for(let D=0;D<j.length;D++)j[D]=D;else{let D=b+1+2*E.truncDivision(E.truncDivision(b,2)-1,15),L=b/2,U=E.truncDivision(D,2);for(let Y=0;Y<L;Y++){let ee=Y+E.truncDivision(Y,15);j[L-Y-1]=U-ee-1,j[L+Y]=U+ee+1}}for(let D=0,L=0;D<g;D++){let U=(g-D)*4+(m?9:12),Y=D*2,ee=b-1-Y;for(let ae=0;ae<U;ae++){let ue=ae*2;for(let be=0;be<2;be++)S[L+ue+be]=u.get(j[Y+be],j[Y+ae]),S[L+2*U+ue+be]=u.get(j[Y+ae],j[ee-be]),S[L+4*U+ue+be]=u.get(j[ee-be],j[ee-ae]),S[L+6*U+ue+be]=u.get(j[ee-ae],j[Y+be])}L+=U*8}return S}static readCode(u,m,g){let b=0;for(let j=m;j<m+g;j++)b<<=1,u[j]&&(b|=1);return b}static readByte(u,m){let g=u.length-m;return g>=8?ke.readCode(u,m,8):ke.readCode(u,m,g)<<8-g}static convertBoolArrayToByteArray(u){let m=new Uint8Array((u.length+7)/8);for(let g=0;g<m.length;g++)m[g]=ke.readByte(u,8*g);return m}totalBitsInLayer(u,m){return((m?88:112)+16*u)*u}}ke.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],ke.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],ke.MIXED_TABLE=["CTRL_PS"," ","\\1","\\2","\\3","\\4","\\5","\\6","\\7","\b","	",`
`,"\\13","\f","\r","\\33","\\34","\\35","\\36","\\37","@","\\","^","_","`","|","~","\\177","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],ke.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],ke.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"];class Ve{constructor(){}static round(u){return u===NaN?0:u<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:u>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:u+(u<0?-.5:.5)|0}static distance(u,m,g,b){const j=u-g,S=m-b;return Math.sqrt(j*j+S*S)}static sum(u){let m=0;for(let g=0,b=u.length;g!==b;g++){const j=u[g];m+=j}return m}}class le{static floatToIntBits(u){return u}}le.MAX_VALUE=Number.MAX_SAFE_INTEGER;class me{constructor(u,m){this.x=u,this.y=m}getX(){return this.x}getY(){return this.y}equals(u){if(u instanceof me){const m=u;return this.x===m.x&&this.y===m.y}return!1}hashCode(){return 31*le.floatToIntBits(this.x)+le.floatToIntBits(this.y)}toString(){return"("+this.x+","+this.y+")"}static orderBestPatterns(u){const m=this.distance(u[0],u[1]),g=this.distance(u[1],u[2]),b=this.distance(u[0],u[2]);let j,S,D;if(g>=m&&g>=b?(S=u[0],j=u[1],D=u[2]):b>=g&&b>=m?(S=u[1],j=u[0],D=u[2]):(S=u[2],j=u[0],D=u[1]),this.crossProductZ(j,S,D)<0){const L=j;j=D,D=L}u[0]=j,u[1]=S,u[2]=D}static distance(u,m){return Ve.distance(u.x,u.y,m.x,m.y)}static crossProductZ(u,m,g){const b=m.x,j=m.y;return(g.x-b)*(u.y-j)-(g.y-j)*(u.x-b)}}class ve{constructor(u,m){this.bits=u,this.points=m}getBits(){return this.bits}getPoints(){return this.points}}class Ze extends ve{constructor(u,m,g,b,j){super(u,m),this.compact=g,this.nbDatablocks=b,this.nbLayers=j}getNbLayers(){return this.nbLayers}getNbDatablocks(){return this.nbDatablocks}isCompact(){return this.compact}}class $e{constructor(u,m,g,b){this.image=u,this.height=u.getHeight(),this.width=u.getWidth(),m==null&&(m=$e.INIT_SIZE),g==null&&(g=u.getWidth()/2|0),b==null&&(b=u.getHeight()/2|0);const j=m/2|0;if(this.leftInit=g-j,this.rightInit=g+j,this.upInit=b-j,this.downInit=b+j,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new F}detect(){let u=this.leftInit,m=this.rightInit,g=this.upInit,b=this.downInit,j=!1,S=!0,D=!1,L=!1,U=!1,Y=!1,ee=!1;const ae=this.width,ue=this.height;for(;S;){S=!1;let be=!0;for(;(be||!L)&&m<ae;)be=this.containsBlackPoint(g,b,m,!1),be?(m++,S=!0,L=!0):L||m++;if(m>=ae){j=!0;break}let we=!0;for(;(we||!U)&&b<ue;)we=this.containsBlackPoint(u,m,b,!0),we?(b++,S=!0,U=!0):U||b++;if(b>=ue){j=!0;break}let Ee=!0;for(;(Ee||!Y)&&u>=0;)Ee=this.containsBlackPoint(g,b,u,!1),Ee?(u--,S=!0,Y=!0):Y||u--;if(u<0){j=!0;break}let Me=!0;for(;(Me||!ee)&&g>=0;)Me=this.containsBlackPoint(u,m,g,!0),Me?(g--,S=!0,ee=!0):ee||g--;if(g<0){j=!0;break}S&&(D=!0)}if(!j&&D){const be=m-u;let we=null;for(let nt=1;we===null&&nt<be;nt++)we=this.getBlackPointOnSegment(u,b-nt,u+nt,b);if(we==null)throw new F;let Ee=null;for(let nt=1;Ee===null&&nt<be;nt++)Ee=this.getBlackPointOnSegment(u,g+nt,u+nt,g);if(Ee==null)throw new F;let Me=null;for(let nt=1;Me===null&&nt<be;nt++)Me=this.getBlackPointOnSegment(m,g+nt,m-nt,g);if(Me==null)throw new F;let at=null;for(let nt=1;at===null&&nt<be;nt++)at=this.getBlackPointOnSegment(m,b-nt,m-nt,b);if(at==null)throw new F;return this.centerEdges(at,we,Me,Ee)}else throw new F}getBlackPointOnSegment(u,m,g,b){const j=Ve.round(Ve.distance(u,m,g,b)),S=(g-u)/j,D=(b-m)/j,L=this.image;for(let U=0;U<j;U++){const Y=Ve.round(u+U*S),ee=Ve.round(m+U*D);if(L.get(Y,ee))return new me(Y,ee)}return null}centerEdges(u,m,g,b){const j=u.getX(),S=u.getY(),D=m.getX(),L=m.getY(),U=g.getX(),Y=g.getY(),ee=b.getX(),ae=b.getY(),ue=$e.CORR;return j<this.width/2?[new me(ee-ue,ae+ue),new me(D+ue,L+ue),new me(U-ue,Y-ue),new me(j+ue,S-ue)]:[new me(ee+ue,ae+ue),new me(D+ue,L-ue),new me(U-ue,Y+ue),new me(j-ue,S-ue)]}containsBlackPoint(u,m,g,b){const j=this.image;if(b){for(let S=u;S<=m;S++)if(j.get(S,g))return!0}else for(let S=u;S<=m;S++)if(j.get(g,S))return!0;return!1}}$e.INIT_SIZE=10,$e.CORR=1;class Ne{static checkAndNudgePoints(u,m){const g=u.getWidth(),b=u.getHeight();let j=!0;for(let S=0;S<m.length&&j;S+=2){const D=Math.floor(m[S]),L=Math.floor(m[S+1]);if(D<-1||D>g||L<-1||L>b)throw new F;j=!1,D===-1?(m[S]=0,j=!0):D===g&&(m[S]=g-1,j=!0),L===-1?(m[S+1]=0,j=!0):L===b&&(m[S+1]=b-1,j=!0)}j=!0;for(let S=m.length-2;S>=0&&j;S-=2){const D=Math.floor(m[S]),L=Math.floor(m[S+1]);if(D<-1||D>g||L<-1||L>b)throw new F;j=!1,D===-1?(m[S]=0,j=!0):D===g&&(m[S]=g-1,j=!0),L===-1?(m[S+1]=0,j=!0):L===b&&(m[S+1]=b-1,j=!0)}}}class He{constructor(u,m,g,b,j,S,D,L,U){this.a11=u,this.a21=m,this.a31=g,this.a12=b,this.a22=j,this.a32=S,this.a13=D,this.a23=L,this.a33=U}static quadrilateralToQuadrilateral(u,m,g,b,j,S,D,L,U,Y,ee,ae,ue,be,we,Ee){const Me=He.quadrilateralToSquare(u,m,g,b,j,S,D,L);return He.squareToQuadrilateral(U,Y,ee,ae,ue,be,we,Ee).times(Me)}transformPoints(u){const m=u.length,g=this.a11,b=this.a12,j=this.a13,S=this.a21,D=this.a22,L=this.a23,U=this.a31,Y=this.a32,ee=this.a33;for(let ae=0;ae<m;ae+=2){const ue=u[ae],be=u[ae+1],we=j*ue+L*be+ee;u[ae]=(g*ue+S*be+U)/we,u[ae+1]=(b*ue+D*be+Y)/we}}transformPointsWithValues(u,m){const g=this.a11,b=this.a12,j=this.a13,S=this.a21,D=this.a22,L=this.a23,U=this.a31,Y=this.a32,ee=this.a33,ae=u.length;for(let ue=0;ue<ae;ue++){const be=u[ue],we=m[ue],Ee=j*be+L*we+ee;u[ue]=(g*be+S*we+U)/Ee,m[ue]=(b*be+D*we+Y)/Ee}}static squareToQuadrilateral(u,m,g,b,j,S,D,L){const U=u-g+j-D,Y=m-b+S-L;if(U===0&&Y===0)return new He(g-u,j-g,u,b-m,S-b,m,0,0,1);{const ee=g-j,ae=D-j,ue=b-S,be=L-S,we=ee*be-ae*ue,Ee=(U*be-ae*Y)/we,Me=(ee*Y-U*ue)/we;return new He(g-u+Ee*g,D-u+Me*D,u,b-m+Ee*b,L-m+Me*L,m,Ee,Me,1)}}static quadrilateralToSquare(u,m,g,b,j,S,D,L){return He.squareToQuadrilateral(u,m,g,b,j,S,D,L).buildAdjoint()}buildAdjoint(){return new He(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)}times(u){return new He(this.a11*u.a11+this.a21*u.a12+this.a31*u.a13,this.a11*u.a21+this.a21*u.a22+this.a31*u.a23,this.a11*u.a31+this.a21*u.a32+this.a31*u.a33,this.a12*u.a11+this.a22*u.a12+this.a32*u.a13,this.a12*u.a21+this.a22*u.a22+this.a32*u.a23,this.a12*u.a31+this.a22*u.a32+this.a32*u.a33,this.a13*u.a11+this.a23*u.a12+this.a33*u.a13,this.a13*u.a21+this.a23*u.a22+this.a33*u.a23,this.a13*u.a31+this.a23*u.a32+this.a33*u.a33)}}class gt extends Ne{sampleGrid(u,m,g,b,j,S,D,L,U,Y,ee,ae,ue,be,we,Ee,Me,at,nt){const et=He.quadrilateralToQuadrilateral(b,j,S,D,L,U,Y,ee,ae,ue,be,we,Ee,Me,at,nt);return this.sampleGridWithTransform(u,m,g,et)}sampleGridWithTransform(u,m,g,b){if(m<=0||g<=0)throw new F;const j=new O(m,g),S=new Float32Array(2*m);for(let D=0;D<g;D++){const L=S.length,U=D+.5;for(let Y=0;Y<L;Y+=2)S[Y]=Y/2+.5,S[Y+1]=U;b.transformPoints(S),Ne.checkAndNudgePoints(u,S);try{for(let Y=0;Y<L;Y+=2)u.get(Math.floor(S[Y]),Math.floor(S[Y+1]))&&j.set(Y/2,D)}catch{throw new F}}return j}}class yt{static setGridSampler(u){yt.gridSampler=u}static getInstance(){return yt.gridSampler}}yt.gridSampler=new gt;class Vt{constructor(u,m){this.x=u,this.y=m}toResultPoint(){return new me(this.getX(),this.getY())}getX(){return this.x}getY(){return this.y}}class $r{constructor(u){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=u}detect(){return this.detectMirror(!1)}detectMirror(u){let m=this.getMatrixCenter(),g=this.getBullsEyeCorners(m);if(u){let S=g[0];g[0]=g[2],g[2]=S}this.extractParameters(g);let b=this.sampleGrid(this.image,g[this.shift%4],g[(this.shift+1)%4],g[(this.shift+2)%4],g[(this.shift+3)%4]),j=this.getMatrixCornerPoints(g);return new Ze(b,j,this.compact,this.nbDataBlocks,this.nbLayers)}extractParameters(u){if(!this.isValidPoint(u[0])||!this.isValidPoint(u[1])||!this.isValidPoint(u[2])||!this.isValidPoint(u[3]))throw new F;let m=2*this.nbCenterLayers,g=new Int32Array([this.sampleLine(u[0],u[1],m),this.sampleLine(u[1],u[2],m),this.sampleLine(u[2],u[3],m),this.sampleLine(u[3],u[0],m)]);this.shift=this.getRotation(g,m);let b=0;for(let S=0;S<4;S++){let D=g[(this.shift+S)%4];this.compact?(b<<=7,b+=D>>1&127):(b<<=10,b+=(D>>2&992)+(D>>1&31))}let j=this.getCorrectedParameterData(b,this.compact);this.compact?(this.nbLayers=(j>>6)+1,this.nbDataBlocks=(j&63)+1):(this.nbLayers=(j>>11)+1,this.nbDataBlocks=(j&2047)+1)}getRotation(u,m){let g=0;u.forEach((b,j,S)=>{let D=(b>>m-2<<1)+(b&1);g=(g<<3)+D}),g=((g&1)<<11)+(g>>1);for(let b=0;b<4;b++)if(E.bitCount(g^this.EXPECTED_CORNER_BITS[b])<=2)return b;throw new F}getCorrectedParameterData(u,m){let g,b;m?(g=7,b=2):(g=10,b=4);let j=g-b,S=new Int32Array(g);for(let L=g-1;L>=0;--L)S[L]=u&15,u>>=4;try{new je(re.AZTEC_PARAM).decode(S,j)}catch{throw new F}let D=0;for(let L=0;L<b;L++)D=(D<<4)+S[L];return D}getBullsEyeCorners(u){let m=u,g=u,b=u,j=u,S=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){let ee=this.getFirstDifferent(m,S,1,-1),ae=this.getFirstDifferent(g,S,1,1),ue=this.getFirstDifferent(b,S,-1,1),be=this.getFirstDifferent(j,S,-1,-1);if(this.nbCenterLayers>2){let we=this.distancePoint(be,ee)*this.nbCenterLayers/(this.distancePoint(j,m)*(this.nbCenterLayers+2));if(we<.75||we>1.25||!this.isWhiteOrBlackRectangle(ee,ae,ue,be))break}m=ee,g=ae,b=ue,j=be,S=!S}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new F;this.compact=this.nbCenterLayers===5;let D=new me(m.getX()+.5,m.getY()-.5),L=new me(g.getX()+.5,g.getY()+.5),U=new me(b.getX()-.5,b.getY()+.5),Y=new me(j.getX()-.5,j.getY()-.5);return this.expandSquare([D,L,U,Y],2*this.nbCenterLayers-3,2*this.nbCenterLayers)}getMatrixCenter(){let u,m,g,b;try{let D=new $e(this.image).detect();u=D[0],m=D[1],g=D[2],b=D[3]}catch{let L=this.image.getWidth()/2,U=this.image.getHeight()/2;u=this.getFirstDifferent(new Vt(L+7,U-7),!1,1,-1).toResultPoint(),m=this.getFirstDifferent(new Vt(L+7,U+7),!1,1,1).toResultPoint(),g=this.getFirstDifferent(new Vt(L-7,U+7),!1,-1,1).toResultPoint(),b=this.getFirstDifferent(new Vt(L-7,U-7),!1,-1,-1).toResultPoint()}let j=Ve.round((u.getX()+b.getX()+m.getX()+g.getX())/4),S=Ve.round((u.getY()+b.getY()+m.getY()+g.getY())/4);try{let D=new $e(this.image,15,j,S).detect();u=D[0],m=D[1],g=D[2],b=D[3]}catch{u=this.getFirstDifferent(new Vt(j+7,S-7),!1,1,-1).toResultPoint(),m=this.getFirstDifferent(new Vt(j+7,S+7),!1,1,1).toResultPoint(),g=this.getFirstDifferent(new Vt(j-7,S+7),!1,-1,1).toResultPoint(),b=this.getFirstDifferent(new Vt(j-7,S-7),!1,-1,-1).toResultPoint()}return j=Ve.round((u.getX()+b.getX()+m.getX()+g.getX())/4),S=Ve.round((u.getY()+b.getY()+m.getY()+g.getY())/4),new Vt(j,S)}getMatrixCornerPoints(u){return this.expandSquare(u,2*this.nbCenterLayers,this.getDimension())}sampleGrid(u,m,g,b,j){let S=yt.getInstance(),D=this.getDimension(),L=D/2-this.nbCenterLayers,U=D/2+this.nbCenterLayers;return S.sampleGrid(u,D,D,L,L,U,L,U,U,L,U,m.getX(),m.getY(),g.getX(),g.getY(),b.getX(),b.getY(),j.getX(),j.getY())}sampleLine(u,m,g){let b=0,j=this.distanceResultPoint(u,m),S=j/g,D=u.getX(),L=u.getY(),U=S*(m.getX()-u.getX())/j,Y=S*(m.getY()-u.getY())/j;for(let ee=0;ee<g;ee++)this.image.get(Ve.round(D+ee*U),Ve.round(L+ee*Y))&&(b|=1<<g-ee-1);return b}isWhiteOrBlackRectangle(u,m,g,b){let j=3;u=new Vt(u.getX()-j,u.getY()+j),m=new Vt(m.getX()-j,m.getY()-j),g=new Vt(g.getX()+j,g.getY()-j),b=new Vt(b.getX()+j,b.getY()+j);let S=this.getColor(b,u);if(S===0)return!1;let D=this.getColor(u,m);return D!==S||(D=this.getColor(m,g),D!==S)?!1:(D=this.getColor(g,b),D===S)}getColor(u,m){let g=this.distancePoint(u,m),b=(m.getX()-u.getX())/g,j=(m.getY()-u.getY())/g,S=0,D=u.getX(),L=u.getY(),U=this.image.get(u.getX(),u.getY()),Y=Math.ceil(g);for(let ae=0;ae<Y;ae++)D+=b,L+=j,this.image.get(Ve.round(D),Ve.round(L))!==U&&S++;let ee=S/g;return ee>.1&&ee<.9?0:ee<=.1===U?1:-1}getFirstDifferent(u,m,g,b){let j=u.getX()+g,S=u.getY()+b;for(;this.isValid(j,S)&&this.image.get(j,S)===m;)j+=g,S+=b;for(j-=g,S-=b;this.isValid(j,S)&&this.image.get(j,S)===m;)j+=g;for(j-=g;this.isValid(j,S)&&this.image.get(j,S)===m;)S+=b;return S-=b,new Vt(j,S)}expandSquare(u,m,g){let b=g/(2*m),j=u[0].getX()-u[2].getX(),S=u[0].getY()-u[2].getY(),D=(u[0].getX()+u[2].getX())/2,L=(u[0].getY()+u[2].getY())/2,U=new me(D+b*j,L+b*S),Y=new me(D-b*j,L-b*S);j=u[1].getX()-u[3].getX(),S=u[1].getY()-u[3].getY(),D=(u[1].getX()+u[3].getX())/2,L=(u[1].getY()+u[3].getY())/2;let ee=new me(D+b*j,L+b*S),ae=new me(D-b*j,L-b*S);return[U,ee,Y,ae]}isValid(u,m){return u>=0&&u<this.image.getWidth()&&m>0&&m<this.image.getHeight()}isValidPoint(u){let m=Ve.round(u.getX()),g=Ve.round(u.getY());return this.isValid(m,g)}distancePoint(u,m){return Ve.distance(u.getX(),u.getY(),m.getX(),m.getY())}distanceResultPoint(u,m){return Ve.distance(u.getX(),u.getY(),m.getX(),m.getY())}getDimension(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(E.truncDivision(this.nbLayers-4,8)+1)+15}}class De{decode(u,m=null){let g=null,b=new $r(u.getBlackMatrix()),j=null,S=null;try{let Y=b.detectMirror(!1);j=Y.getPoints(),this.reportFoundResultPoints(m,j),S=new ke().decode(Y)}catch(Y){g=Y}if(S==null)try{let Y=b.detectMirror(!0);j=Y.getPoints(),this.reportFoundResultPoints(m,j),S=new ke().decode(Y)}catch(Y){throw g??Y}let D=new ne(S.getText(),S.getRawBytes(),S.getNumBits(),j,xe.AZTEC,w.currentTimeMillis()),L=S.getByteSegments();L!=null&&D.putMetadata(oe.BYTE_SEGMENTS,L);let U=S.getECLevel();return U!=null&&D.putMetadata(oe.ERROR_CORRECTION_LEVEL,U),D}reportFoundResultPoints(u,m){if(u!=null){let g=u.get(A.NEED_RESULT_POINT_CALLBACK);g!=null&&m.forEach((b,j,S)=>{g.foundPossibleResultPoint(b)})}}reset(){}}class Xe extends he{constructor(u=500){super(new De,u)}}class st{decode(u,m){try{return this.doDecode(u,m)}catch{if(m&&m.get(A.TRY_HARDER)===!0&&u.isRotateSupported()){const j=u.rotateCounterClockwise(),S=this.doDecode(j,m),D=S.getResultMetadata();let L=270;D!==null&&D.get(oe.ORIENTATION)===!0&&(L=L+D.get(oe.ORIENTATION)%360),S.putMetadata(oe.ORIENTATION,L);const U=S.getResultPoints();if(U!==null){const Y=j.getHeight();for(let ee=0;ee<U.length;ee++)U[ee]=new me(Y-U[ee].getY()-1,U[ee].getX())}return S}else throw new F}}reset(){}doDecode(u,m){const g=u.getWidth(),b=u.getHeight();let j=new _(g);const S=m&&m.get(A.TRY_HARDER)===!0,D=Math.max(1,b>>(S?8:5));let L;S?L=b:L=15;const U=Math.trunc(b/2);for(let Y=0;Y<L;Y++){const ee=Math.trunc((Y+1)/2),ae=(Y&1)===0,ue=U+D*(ae?ee:-ee);if(ue<0||ue>=b)break;try{j=u.getBlackRow(ue,j)}catch{continue}for(let be=0;be<2;be++){if(be===1&&(j.reverse(),m&&m.get(A.NEED_RESULT_POINT_CALLBACK)===!0)){const we=new Map;m.forEach((Ee,Me)=>we.set(Me,Ee)),we.delete(A.NEED_RESULT_POINT_CALLBACK),m=we}try{const we=this.decodeRow(ue,j,m);if(be===1){we.putMetadata(oe.ORIENTATION,180);const Ee=we.getResultPoints();Ee!==null&&(Ee[0]=new me(g-Ee[0].getX()-1,Ee[0].getY()),Ee[1]=new me(g-Ee[1].getX()-1,Ee[1].getY()))}return we}catch{}}}throw new F}static recordPattern(u,m,g){const b=g.length;for(let U=0;U<b;U++)g[U]=0;const j=u.getSize();if(m>=j)throw new F;let S=!u.get(m),D=0,L=m;for(;L<j;){if(u.get(L)!==S)g[D]++;else{if(++D===b)break;g[D]=1,S=!S}L++}if(!(D===b||D===b-1&&L===j))throw new F}static recordPatternInReverse(u,m,g){let b=g.length,j=u.get(m);for(;m>0&&b>=0;)u.get(--m)!==j&&(b--,j=!j);if(b>=0)throw new F;st.recordPattern(u,m+1,g)}static patternMatchVariance(u,m,g){const b=u.length;let j=0,S=0;for(let U=0;U<b;U++)j+=u[U],S+=m[U];if(j<S)return Number.POSITIVE_INFINITY;const D=j/S;g*=D;let L=0;for(let U=0;U<b;U++){const Y=u[U],ee=m[U]*D,ae=Y>ee?Y-ee:ee-Y;if(ae>g)return Number.POSITIVE_INFINITY;L+=ae}return L/j}}class Ce extends st{static findStartPattern(u){const m=u.getSize(),g=u.getNextSet(0);let b=0,j=Int32Array.from([0,0,0,0,0,0]),S=g,D=!1;const L=6;for(let U=g;U<m;U++)if(u.get(U)!==D)j[b]++;else{if(b===L-1){let Y=Ce.MAX_AVG_VARIANCE,ee=-1;for(let ae=Ce.CODE_START_A;ae<=Ce.CODE_START_C;ae++){const ue=st.patternMatchVariance(j,Ce.CODE_PATTERNS[ae],Ce.MAX_INDIVIDUAL_VARIANCE);ue<Y&&(Y=ue,ee=ae)}if(ee>=0&&u.isRange(Math.max(0,S-(U-S)/2),S,!1))return Int32Array.from([S,U,ee]);S+=j[0]+j[1],j=j.slice(2,j.length-1),j[b-1]=0,j[b]=0,b--}else b++;j[b]=1,D=!D}throw new F}static decodeCode(u,m,g){st.recordPattern(u,g,m);let b=Ce.MAX_AVG_VARIANCE,j=-1;for(let S=0;S<Ce.CODE_PATTERNS.length;S++){const D=Ce.CODE_PATTERNS[S],L=this.patternMatchVariance(m,D,Ce.MAX_INDIVIDUAL_VARIANCE);L<b&&(b=L,j=S)}if(j>=0)return j;throw new F}decodeRow(u,m,g){const b=g&&g.get(A.ASSUME_GS1)===!0,j=Ce.findStartPattern(m),S=j[2];let D=0;const L=new Uint8Array(20);L[D++]=S;let U;switch(S){case Ce.CODE_START_A:U=Ce.CODE_CODE_A;break;case Ce.CODE_START_B:U=Ce.CODE_CODE_B;break;case Ce.CODE_START_C:U=Ce.CODE_CODE_C;break;default:throw new P}let Y=!1,ee=!1,ae="",ue=j[0],be=j[1];const we=Int32Array.from([0,0,0,0,0,0]);let Ee=0,Me=0,at=S,nt=0,et=!0,Sr=!1,hr=!1;for(;!Y;){const zh=ee;switch(ee=!1,Ee=Me,Me=Ce.decodeCode(m,we,be),L[D++]=Me,Me!==Ce.CODE_STOP&&(et=!0),Me!==Ce.CODE_STOP&&(nt++,at+=nt*Me),ue=be,be+=we.reduce((IJ,DJ)=>IJ+DJ,0),Me){case Ce.CODE_START_A:case Ce.CODE_START_B:case Ce.CODE_START_C:throw new P}switch(U){case Ce.CODE_CODE_A:if(Me<64)hr===Sr?ae+=String.fromCharCode(32+Me):ae+=String.fromCharCode(32+Me+128),hr=!1;else if(Me<96)hr===Sr?ae+=String.fromCharCode(Me-64):ae+=String.fromCharCode(Me+64),hr=!1;else switch(Me!==Ce.CODE_STOP&&(et=!1),Me){case Ce.CODE_FNC_1:b&&(ae.length===0?ae+="]C1":ae+="");break;case Ce.CODE_FNC_2:case Ce.CODE_FNC_3:break;case Ce.CODE_FNC_4_A:!Sr&&hr?(Sr=!0,hr=!1):Sr&&hr?(Sr=!1,hr=!1):hr=!0;break;case Ce.CODE_SHIFT:ee=!0,U=Ce.CODE_CODE_B;break;case Ce.CODE_CODE_B:U=Ce.CODE_CODE_B;break;case Ce.CODE_CODE_C:U=Ce.CODE_CODE_C;break;case Ce.CODE_STOP:Y=!0;break}break;case Ce.CODE_CODE_B:if(Me<96)hr===Sr?ae+=String.fromCharCode(32+Me):ae+=String.fromCharCode(32+Me+128),hr=!1;else switch(Me!==Ce.CODE_STOP&&(et=!1),Me){case Ce.CODE_FNC_1:b&&(ae.length===0?ae+="]C1":ae+="");break;case Ce.CODE_FNC_2:case Ce.CODE_FNC_3:break;case Ce.CODE_FNC_4_B:!Sr&&hr?(Sr=!0,hr=!1):Sr&&hr?(Sr=!1,hr=!1):hr=!0;break;case Ce.CODE_SHIFT:ee=!0,U=Ce.CODE_CODE_A;break;case Ce.CODE_CODE_A:U=Ce.CODE_CODE_A;break;case Ce.CODE_CODE_C:U=Ce.CODE_CODE_C;break;case Ce.CODE_STOP:Y=!0;break}break;case Ce.CODE_CODE_C:if(Me<100)Me<10&&(ae+="0"),ae+=Me;else switch(Me!==Ce.CODE_STOP&&(et=!1),Me){case Ce.CODE_FNC_1:b&&(ae.length===0?ae+="]C1":ae+="");break;case Ce.CODE_CODE_A:U=Ce.CODE_CODE_A;break;case Ce.CODE_CODE_B:U=Ce.CODE_CODE_B;break;case Ce.CODE_STOP:Y=!0;break}break}zh&&(U=U===Ce.CODE_CODE_A?Ce.CODE_CODE_B:Ce.CODE_CODE_A)}const bi=be-ue;if(be=m.getNextUnset(be),!m.isRange(be,Math.min(m.getSize(),be+(be-ue)/2),!1))throw new F;if(at-=nt*Ee,at%103!==Ee)throw new y;const ol=ae.length;if(ol===0)throw new F;ol>0&&et&&(U===Ce.CODE_CODE_C?ae=ae.substring(0,ol-2):ae=ae.substring(0,ol-1));const vi=(j[1]+j[0])/2,fs=ue+bi/2,bn=L.length,zi=new Uint8Array(bn);for(let zh=0;zh<bn;zh++)zi[zh]=L[zh];const Wh=[new me(vi,u),new me(fs,u)];return new ne(ae,zi,0,Wh,xe.CODE_128,new Date().getTime())}}Ce.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],Ce.MAX_AVG_VARIANCE=.25,Ce.MAX_INDIVIDUAL_VARIANCE=.7,Ce.CODE_SHIFT=98,Ce.CODE_CODE_C=99,Ce.CODE_CODE_B=100,Ce.CODE_CODE_A=101,Ce.CODE_FNC_1=102,Ce.CODE_FNC_2=97,Ce.CODE_FNC_3=96,Ce.CODE_FNC_4_A=101,Ce.CODE_FNC_4_B=100,Ce.CODE_START_A=103,Ce.CODE_START_B=104,Ce.CODE_START_C=105,Ce.CODE_STOP=106;class ct extends st{constructor(u=!1,m=!1){super(),this.usingCheckDigit=u,this.extendedMode=m,this.decodeRowResult="",this.counters=new Int32Array(9)}decodeRow(u,m,g){let b=this.counters;b.fill(0),this.decodeRowResult="";let j=ct.findAsteriskPattern(m,b),S=m.getNextSet(j[1]),D=m.getSize(),L,U;do{ct.recordPattern(m,S,b);let we=ct.toNarrowWidePattern(b);if(we<0)throw new F;L=ct.patternToChar(we),this.decodeRowResult+=L,U=S;for(let Ee of b)S+=Ee;S=m.getNextSet(S)}while(L!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);let Y=0;for(let we of b)Y+=we;let ee=S-U-Y;if(S!==D&&ee*2<Y)throw new F;if(this.usingCheckDigit){let we=this.decodeRowResult.length-1,Ee=0;for(let Me=0;Me<we;Me++)Ee+=ct.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(Me));if(this.decodeRowResult.charAt(we)!==ct.ALPHABET_STRING.charAt(Ee%43))throw new y;this.decodeRowResult=this.decodeRowResult.substring(0,we)}if(this.decodeRowResult.length===0)throw new F;let ae;this.extendedMode?ae=ct.decodeExtended(this.decodeRowResult):ae=this.decodeRowResult;let ue=(j[1]+j[0])/2,be=U+Y/2;return new ne(ae,null,0,[new me(ue,u),new me(be,u)],xe.CODE_39,new Date().getTime())}static findAsteriskPattern(u,m){let g=u.getSize(),b=u.getNextSet(0),j=0,S=b,D=!1,L=m.length;for(let U=b;U<g;U++)if(u.get(U)!==D)m[j]++;else{if(j===L-1){if(this.toNarrowWidePattern(m)===ct.ASTERISK_ENCODING&&u.isRange(Math.max(0,S-Math.floor((U-S)/2)),S,!1))return[S,U];S+=m[0]+m[1],m.copyWithin(0,2,2+j-1),m[j-1]=0,m[j]=0,j--}else j++;m[j]=1,D=!D}throw new F}static toNarrowWidePattern(u){let m=u.length,g=0,b;do{let j=2147483647;for(let L of u)L<j&&L>g&&(j=L);g=j,b=0;let S=0,D=0;for(let L=0;L<m;L++){let U=u[L];U>g&&(D|=1<<m-1-L,b++,S+=U)}if(b===3){for(let L=0;L<m&&b>0;L++){let U=u[L];if(U>g&&(b--,U*2>=S))return-1}return D}}while(b>3);return-1}static patternToChar(u){for(let m=0;m<ct.CHARACTER_ENCODINGS.length;m++)if(ct.CHARACTER_ENCODINGS[m]===u)return ct.ALPHABET_STRING.charAt(m);if(u===ct.ASTERISK_ENCODING)return"*";throw new F}static decodeExtended(u){let m=u.length,g="";for(let b=0;b<m;b++){let j=u.charAt(b);if(j==="+"||j==="$"||j==="%"||j==="/"){let S=u.charAt(b+1),D="\0";switch(j){case"+":if(S>="A"&&S<="Z")D=String.fromCharCode(S.charCodeAt(0)+32);else throw new P;break;case"$":if(S>="A"&&S<="Z")D=String.fromCharCode(S.charCodeAt(0)-64);else throw new P;break;case"%":if(S>="A"&&S<="E")D=String.fromCharCode(S.charCodeAt(0)-38);else if(S>="F"&&S<="J")D=String.fromCharCode(S.charCodeAt(0)-11);else if(S>="K"&&S<="O")D=String.fromCharCode(S.charCodeAt(0)+16);else if(S>="P"&&S<="T")D=String.fromCharCode(S.charCodeAt(0)+43);else if(S==="U")D="\0";else if(S==="V")D="@";else if(S==="W")D="`";else if(S==="X"||S==="Y"||S==="Z")D="";else throw new P;break;case"/":if(S>="A"&&S<="O")D=String.fromCharCode(S.charCodeAt(0)-32);else if(S==="Z")D=":";else throw new P;break}g+=D,b++}else g+=j}return g}}ct.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",ct.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],ct.ASTERISK_ENCODING=148;class ht extends st{constructor(){super(...arguments),this.narrowLineWidth=-1}decodeRow(u,m,g){let b=this.decodeStart(m),j=this.decodeEnd(m),S=new B;ht.decodeMiddle(m,b[1],j[0],S);let D=S.toString(),L=null;g!=null&&(L=g.get(A.ALLOWED_LENGTHS)),L==null&&(L=ht.DEFAULT_ALLOWED_LENGTHS);let U=D.length,Y=!1,ee=0;for(let be of L){if(U===be){Y=!0;break}be>ee&&(ee=be)}if(!Y&&U>ee&&(Y=!0),!Y)throw new P;const ae=[new me(b[1],u),new me(j[0],u)];return new ne(D,null,0,ae,xe.ITF,new Date().getTime())}static decodeMiddle(u,m,g,b){let j=new Int32Array(10),S=new Int32Array(5),D=new Int32Array(5);for(j.fill(0),S.fill(0),D.fill(0);m<g;){st.recordPattern(u,m,j);for(let U=0;U<5;U++){let Y=2*U;S[U]=j[Y],D[U]=j[Y+1]}let L=ht.decodeDigit(S);b.append(L.toString()),L=this.decodeDigit(D),b.append(L.toString()),j.forEach(function(U){m+=U})}}decodeStart(u){let m=ht.skipWhiteSpace(u),g=ht.findGuardPattern(u,m,ht.START_PATTERN);return this.narrowLineWidth=(g[1]-g[0])/4,this.validateQuietZone(u,g[0]),g}validateQuietZone(u,m){let g=this.narrowLineWidth*10;g=g<m?g:m;for(let b=m-1;g>0&&b>=0&&!u.get(b);b--)g--;if(g!==0)throw new F}static skipWhiteSpace(u){const m=u.getSize(),g=u.getNextSet(0);if(g===m)throw new F;return g}decodeEnd(u){u.reverse();try{let m=ht.skipWhiteSpace(u),g;try{g=ht.findGuardPattern(u,m,ht.END_PATTERN_REVERSED[0])}catch(j){j instanceof F&&(g=ht.findGuardPattern(u,m,ht.END_PATTERN_REVERSED[1]))}this.validateQuietZone(u,g[0]);let b=g[0];return g[0]=u.getSize()-g[1],g[1]=u.getSize()-b,g}finally{u.reverse()}}static findGuardPattern(u,m,g){let b=g.length,j=new Int32Array(b),S=u.getSize(),D=!1,L=0,U=m;j.fill(0);for(let Y=m;Y<S;Y++)if(u.get(Y)!==D)j[L]++;else{if(L===b-1){if(st.patternMatchVariance(j,g,ht.MAX_INDIVIDUAL_VARIANCE)<ht.MAX_AVG_VARIANCE)return[U,Y];U+=j[0]+j[1],w.arraycopy(j,2,j,0,L-1),j[L-1]=0,j[L]=0,L--}else L++;j[L]=1,D=!D}throw new F}static decodeDigit(u){let m=ht.MAX_AVG_VARIANCE,g=-1,b=ht.PATTERNS.length;for(let j=0;j<b;j++){let S=ht.PATTERNS[j],D=st.patternMatchVariance(u,S,ht.MAX_INDIVIDUAL_VARIANCE);D<m?(m=D,g=j):D===m&&(g=-1)}if(g>=0)return g%10;throw new F}}ht.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],ht.MAX_AVG_VARIANCE=.38,ht.MAX_INDIVIDUAL_VARIANCE=.5,ht.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],ht.START_PATTERN=Int32Array.from([1,1,1,1]),ht.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])];class Lt extends st{constructor(){super(...arguments),this.decodeRowStringBuffer=""}static findStartGuardPattern(u){let m=!1,g,b=0,j=Int32Array.from([0,0,0]);for(;!m;){j=Int32Array.from([0,0,0]),g=Lt.findGuardPattern(u,b,!1,this.START_END_PATTERN,j);let S=g[0];b=g[1];let D=S-(b-S);D>=0&&(m=u.isRange(D,S,!1))}return g}static checkChecksum(u){return Lt.checkStandardUPCEANChecksum(u)}static checkStandardUPCEANChecksum(u){let m=u.length;if(m===0)return!1;let g=parseInt(u.charAt(m-1),10);return Lt.getStandardUPCEANChecksum(u.substring(0,m-1))===g}static getStandardUPCEANChecksum(u){let m=u.length,g=0;for(let b=m-1;b>=0;b-=2){let j=u.charAt(b).charCodeAt(0)-48;if(j<0||j>9)throw new P;g+=j}g*=3;for(let b=m-2;b>=0;b-=2){let j=u.charAt(b).charCodeAt(0)-48;if(j<0||j>9)throw new P;g+=j}return(1e3-g)%10}static decodeEnd(u,m){return Lt.findGuardPattern(u,m,!1,Lt.START_END_PATTERN,new Int32Array(Lt.START_END_PATTERN.length).fill(0))}static findGuardPatternWithoutCounters(u,m,g,b){return this.findGuardPattern(u,m,g,b,new Int32Array(b.length))}static findGuardPattern(u,m,g,b,j){let S=u.getSize();m=g?u.getNextUnset(m):u.getNextSet(m);let D=0,L=m,U=b.length,Y=g;for(let ee=m;ee<S;ee++)if(u.get(ee)!==Y)j[D]++;else{if(D===U-1){if(st.patternMatchVariance(j,b,Lt.MAX_INDIVIDUAL_VARIANCE)<Lt.MAX_AVG_VARIANCE)return Int32Array.from([L,ee]);L+=j[0]+j[1];let ae=j.slice(2,j.length-1);for(let ue=0;ue<D-1;ue++)j[ue]=ae[ue];j[D-1]=0,j[D]=0,D--}else D++;j[D]=1,Y=!Y}throw new F}static decodeDigit(u,m,g,b){this.recordPattern(u,g,m);let j=this.MAX_AVG_VARIANCE,S=-1,D=b.length;for(let L=0;L<D;L++){let U=b[L],Y=st.patternMatchVariance(m,U,Lt.MAX_INDIVIDUAL_VARIANCE);Y<j&&(j=Y,S=L)}if(S>=0)return S;throw new F}}Lt.MAX_AVG_VARIANCE=.48,Lt.MAX_INDIVIDUAL_VARIANCE=.7,Lt.START_END_PATTERN=Int32Array.from([1,1,1]),Lt.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),Lt.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),Lt.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])];class Ur{constructor(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(u,m,g){let b=this.decodeRowStringBuffer,j=this.decodeMiddle(m,g,b),S=b.toString(),D=Ur.parseExtensionString(S),L=[new me((g[0]+g[1])/2,u),new me(j,u)],U=new ne(S,null,0,L,xe.UPC_EAN_EXTENSION,new Date().getTime());return D!=null&&U.putAllMetadata(D),U}decodeMiddle(u,m,g){let b=this.decodeMiddleCounters;b[0]=0,b[1]=0,b[2]=0,b[3]=0;let j=u.getSize(),S=m[1],D=0;for(let U=0;U<5&&S<j;U++){let Y=Lt.decodeDigit(u,b,S,Lt.L_AND_G_PATTERNS);g+=String.fromCharCode(48+Y%10);for(let ee of b)S+=ee;Y>=10&&(D|=1<<4-U),U!==4&&(S=u.getNextSet(S),S=u.getNextUnset(S))}if(g.length!==5)throw new F;let L=this.determineCheckDigit(D);if(Ur.extensionChecksum(g.toString())!==L)throw new F;return S}static extensionChecksum(u){let m=u.length,g=0;for(let b=m-2;b>=0;b-=2)g+=u.charAt(b).charCodeAt(0)-48;g*=3;for(let b=m-1;b>=0;b-=2)g+=u.charAt(b).charCodeAt(0)-48;return g*=3,g%10}determineCheckDigit(u){for(let m=0;m<10;m++)if(u===this.CHECK_DIGIT_ENCODINGS[m])return m;throw new F}static parseExtensionString(u){if(u.length!==5)return null;let m=Ur.parseExtension5String(u);return m==null?null:new Map([[oe.SUGGESTED_PRICE,m]])}static parseExtension5String(u){let m;switch(u.charAt(0)){case"0":m="";break;case"5":m="$";break;case"9":switch(u){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}m="";break;default:m="";break}let g=parseInt(u.substring(1)),b=(g/100).toString(),j=g%100,S=j<10?"0"+j:j.toString();return m+b+"."+S}}class wr{constructor(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(u,m,g){let b=this.decodeRowStringBuffer,j=this.decodeMiddle(m,g,b),S=b.toString(),D=wr.parseExtensionString(S),L=[new me((g[0]+g[1])/2,u),new me(j,u)],U=new ne(S,null,0,L,xe.UPC_EAN_EXTENSION,new Date().getTime());return D!=null&&U.putAllMetadata(D),U}decodeMiddle(u,m,g){let b=this.decodeMiddleCounters;b[0]=0,b[1]=0,b[2]=0,b[3]=0;let j=u.getSize(),S=m[1],D=0;for(let L=0;L<2&&S<j;L++){let U=Lt.decodeDigit(u,b,S,Lt.L_AND_G_PATTERNS);g+=String.fromCharCode(48+U%10);for(let Y of b)S+=Y;U>=10&&(D|=1<<1-L),L!==1&&(S=u.getNextSet(S),S=u.getNextUnset(S))}if(g.length!==2)throw new F;if(parseInt(g.toString())%4!==D)throw new F;return S}static parseExtensionString(u){return u.length!==2?null:new Map([[oe.ISSUE_NUMBER,parseInt(u)]])}}class ua{static decodeRow(u,m,g){let b=Lt.findGuardPattern(m,g,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{return new Ur().decodeRow(u,m,b)}catch{return new wr().decodeRow(u,m,b)}}}ua.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]);class Je extends Lt{constructor(){super(),this.decodeRowStringBuffer="",Je.L_AND_G_PATTERNS=Je.L_PATTERNS.map(u=>Int32Array.from(u));for(let u=10;u<20;u++){let m=Je.L_PATTERNS[u-10],g=new Int32Array(m.length);for(let b=0;b<m.length;b++)g[b]=m[m.length-b-1];Je.L_AND_G_PATTERNS[u]=g}}decodeRow(u,m,g){let b=Je.findStartGuardPattern(m),j=g==null?null:g.get(A.NEED_RESULT_POINT_CALLBACK);if(j!=null){const et=new me((b[0]+b[1])/2,u);j.foundPossibleResultPoint(et)}let S=this.decodeMiddle(m,b,this.decodeRowStringBuffer),D=S.rowOffset,L=S.resultString;if(j!=null){const et=new me(D,u);j.foundPossibleResultPoint(et)}let U=this.decodeEnd(m,D);if(j!=null){const et=new me((U[0]+U[1])/2,u);j.foundPossibleResultPoint(et)}let Y=U[1],ee=Y+(Y-U[0]);if(ee>=m.getSize()||!m.isRange(Y,ee,!1))throw new F;let ae=L.toString();if(ae.length<8)throw new P;if(!Je.checkChecksum(ae))throw new y;let ue=(b[1]+b[0])/2,be=(U[1]+U[0])/2,we=this.getBarcodeFormat(),Ee=[new me(ue,u),new me(be,u)],Me=new ne(ae,null,0,Ee,we,new Date().getTime()),at=0;try{let et=ua.decodeRow(u,m,U[1]);Me.putMetadata(oe.UPC_EAN_EXTENSION,et.getText()),Me.putAllMetadata(et.getResultMetadata()),Me.addResultPoints(et.getResultPoints()),at=et.getText().length}catch{}let nt=g==null?null:g.get(A.ALLOWED_EAN_EXTENSIONS);if(nt!=null){let et=!1;for(let Sr in nt)if(at.toString()===Sr){et=!0;break}if(!et)throw new F}return Me}decodeEnd(u,m){return Je.findGuardPattern(u,m,!1,Je.START_END_PATTERN,new Int32Array(Je.START_END_PATTERN.length).fill(0))}static checkChecksum(u){return Je.checkStandardUPCEANChecksum(u)}static checkStandardUPCEANChecksum(u){let m=u.length;if(m===0)return!1;let g=parseInt(u.charAt(m-1),10);return Je.getStandardUPCEANChecksum(u.substring(0,m-1))===g}static getStandardUPCEANChecksum(u){let m=u.length,g=0;for(let b=m-1;b>=0;b-=2){let j=u.charAt(b).charCodeAt(0)-48;if(j<0||j>9)throw new P;g+=j}g*=3;for(let b=m-2;b>=0;b-=2){let j=u.charAt(b).charCodeAt(0)-48;if(j<0||j>9)throw new P;g+=j}return(1e3-g)%10}}class Xt extends Je{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(u,m,g){let b=this.decodeMiddleCounters;b[0]=0,b[1]=0,b[2]=0,b[3]=0;let j=u.getSize(),S=m[1],D=0;for(let U=0;U<6&&S<j;U++){let Y=Je.decodeDigit(u,b,S,Je.L_AND_G_PATTERNS);g+=String.fromCharCode(48+Y%10);for(let ee of b)S+=ee;Y>=10&&(D|=1<<5-U)}g=Xt.determineFirstDigit(g,D),S=Je.findGuardPattern(u,S,!0,Je.MIDDLE_PATTERN,new Int32Array(Je.MIDDLE_PATTERN.length).fill(0))[1];for(let U=0;U<6&&S<j;U++){let Y=Je.decodeDigit(u,b,S,Je.L_PATTERNS);g+=String.fromCharCode(48+Y);for(let ee of b)S+=ee}return{rowOffset:S,resultString:g}}getBarcodeFormat(){return xe.EAN_13}static determineFirstDigit(u,m){for(let g=0;g<10;g++)if(m===this.FIRST_DIGIT_ENCODINGS[g])return u=String.fromCharCode(48+g)+u,u;throw new F}}Xt.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26];class ur extends Je{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(u,m,g){const b=this.decodeMiddleCounters;b[0]=0,b[1]=0,b[2]=0,b[3]=0;let j=u.getSize(),S=m[1];for(let L=0;L<4&&S<j;L++){let U=Je.decodeDigit(u,b,S,Je.L_PATTERNS);g+=String.fromCharCode(48+U);for(let Y of b)S+=Y}S=Je.findGuardPattern(u,S,!0,Je.MIDDLE_PATTERN,new Int32Array(Je.MIDDLE_PATTERN.length).fill(0))[1];for(let L=0;L<4&&S<j;L++){let U=Je.decodeDigit(u,b,S,Je.L_PATTERNS);g+=String.fromCharCode(48+U);for(let Y of b)S+=Y}return{rowOffset:S,resultString:g}}getBarcodeFormat(){return xe.EAN_8}}class es extends Je{constructor(){super(...arguments),this.ean13Reader=new Xt}getBarcodeFormat(){return xe.UPC_A}decode(u,m){return this.maybeReturnResult(this.ean13Reader.decode(u))}decodeRow(u,m,g){return this.maybeReturnResult(this.ean13Reader.decodeRow(u,m,g))}decodeMiddle(u,m,g){return this.ean13Reader.decodeMiddle(u,m,g)}maybeReturnResult(u){let m=u.getText();if(m.charAt(0)==="0"){let g=new ne(m.substring(1),null,null,u.getResultPoints(),xe.UPC_A);return u.getResultMetadata()!=null&&g.putAllMetadata(u.getResultMetadata()),g}else throw new F}reset(){this.ean13Reader.reset()}}class Cs extends Je{constructor(){super(),this.decodeMiddleCounters=new Int32Array(4)}decodeMiddle(u,m,g){const b=this.decodeMiddleCounters.map(U=>U);b[0]=0,b[1]=0,b[2]=0,b[3]=0;const j=u.getSize();let S=m[1],D=0;for(let U=0;U<6&&S<j;U++){const Y=Cs.decodeDigit(u,b,S,Cs.L_AND_G_PATTERNS);g+=String.fromCharCode(48+Y%10);for(let ee of b)S+=ee;Y>=10&&(D|=1<<5-U)}let L=Cs.determineNumSysAndCheckDigit(g,D);return{rowOffset:S,resultString:L}}decodeEnd(u,m){return Cs.findGuardPatternWithoutCounters(u,m,!0,Cs.MIDDLE_END_PATTERN)}checkChecksum(u){return Je.checkChecksum(Cs.convertUPCEtoUPCA(u))}static determineNumSysAndCheckDigit(u,m){for(let g=0;g<=1;g++)for(let b=0;b<10;b++)if(m===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[g][b]){let j=String.fromCharCode(48+g),S=String.fromCharCode(48+b);return j+u+S}throw F.getNotFoundInstance()}getBarcodeFormat(){return xe.UPC_E}static convertUPCEtoUPCA(u){const m=u.slice(1,7).split("").map(j=>j.charCodeAt(0)),g=new B;g.append(u.charAt(0));let b=m[5];switch(b){case 0:case 1:case 2:g.appendChars(m,0,2),g.append(b),g.append("0000"),g.appendChars(m,2,3);break;case 3:g.appendChars(m,0,3),g.append("00000"),g.appendChars(m,3,2);break;case 4:g.appendChars(m,0,4),g.append("00000"),g.append(m[4]);break;default:g.appendChars(m,0,5),g.append("0000"),g.append(b);break}return u.length>=8&&g.append(u.charAt(7)),g.toString()}}Cs.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),Cs.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,26])];class Ya extends st{constructor(u){super();let m=u==null?null:u.get(A.POSSIBLE_FORMATS),g=[];a(m)?(g.push(new Xt),g.push(new es),g.push(new ur),g.push(new Cs)):(m.indexOf(xe.EAN_13)>-1&&g.push(new Xt),m.indexOf(xe.UPC_A)>-1&&g.push(new es),m.indexOf(xe.EAN_8)>-1&&g.push(new ur),m.indexOf(xe.UPC_E)>-1&&g.push(new Cs)),this.readers=g}decodeRow(u,m,g){for(let b of this.readers)try{const j=b.decodeRow(u,m,g),S=j.getBarcodeFormat()===xe.EAN_13&&j.getText().charAt(0)==="0",D=g==null?null:g.get(A.POSSIBLE_FORMATS),L=D==null||D.includes(xe.UPC_A);if(S&&L){const U=j.getRawBytes(),Y=new ne(j.getText().substring(1),U,U?U.length:null,j.getResultPoints(),xe.UPC_A);return Y.putAllMetadata(j.getResultMetadata()),Y}return j}catch{}throw new F}reset(){for(let u of this.readers)u.reset()}}class Et extends st{constructor(){super(),this.decodeFinderCounters=new Int32Array(4),this.dataCharacterCounters=new Int32Array(8),this.oddRoundingErrors=new Array(4),this.evenRoundingErrors=new Array(4),this.oddCounts=new Array(this.dataCharacterCounters.length/2),this.evenCounts=new Array(this.dataCharacterCounters.length/2)}getDecodeFinderCounters(){return this.decodeFinderCounters}getDataCharacterCounters(){return this.dataCharacterCounters}getOddRoundingErrors(){return this.oddRoundingErrors}getEvenRoundingErrors(){return this.evenRoundingErrors}getOddCounts(){return this.oddCounts}getEvenCounts(){return this.evenCounts}parseFinderValue(u,m){for(let g=0;g<m.length;g++)if(st.patternMatchVariance(u,m[g],Et.MAX_INDIVIDUAL_VARIANCE)<Et.MAX_AVG_VARIANCE)return g;throw new F}static count(u){return Ve.sum(new Int32Array(u))}static increment(u,m){let g=0,b=m[0];for(let j=1;j<u.length;j++)m[j]>b&&(b=m[j],g=j);u[g]++}static decrement(u,m){let g=0,b=m[0];for(let j=1;j<u.length;j++)m[j]<b&&(b=m[j],g=j);u[g]--}static isFinderPattern(u){let m=u[0]+u[1],g=m+u[2]+u[3],b=m/g;if(b>=Et.MIN_FINDER_PATTERN_RATIO&&b<=Et.MAX_FINDER_PATTERN_RATIO){let j=Number.MAX_SAFE_INTEGER,S=Number.MIN_SAFE_INTEGER;for(let D of u)D>S&&(S=D),D<j&&(j=D);return S<10*j}return!1}}Et.MAX_AVG_VARIANCE=.2,Et.MAX_INDIVIDUAL_VARIANCE=.45,Et.MIN_FINDER_PATTERN_RATIO=9.5/12,Et.MAX_FINDER_PATTERN_RATIO=12.5/14;class Os{constructor(u,m){this.value=u,this.checksumPortion=m}getValue(){return this.value}getChecksumPortion(){return this.checksumPortion}toString(){return this.value+"("+this.checksumPortion+")"}equals(u){if(!(u instanceof Os))return!1;const m=u;return this.value===m.value&&this.checksumPortion===m.checksumPortion}hashCode(){return this.value^this.checksumPortion}}class ot{constructor(u,m,g,b,j){this.value=u,this.startEnd=m,this.value=u,this.startEnd=m,this.resultPoints=new Array,this.resultPoints.push(new me(g,j)),this.resultPoints.push(new me(b,j))}getValue(){return this.value}getStartEnd(){return this.startEnd}getResultPoints(){return this.resultPoints}equals(u){if(!(u instanceof ot))return!1;const m=u;return this.value===m.value}hashCode(){return this.value}}class mt{constructor(){}static getRSSvalue(u,m,g){let b=0;for(let L of u)b+=L;let j=0,S=0,D=u.length;for(let L=0;L<D-1;L++){let U;for(U=1,S|=1<<L;U<u[L];U++,S&=~(1<<L)){let Y=mt.combins(b-U-1,D-L-2);if(g&&S===0&&b-U-(D-L-1)>=D-L-1&&(Y-=mt.combins(b-U-(D-L),D-L-2)),D-L-1>1){let ee=0;for(let ae=b-U-(D-L-2);ae>m;ae--)ee+=mt.combins(b-U-ae-1,D-L-3);Y-=ee*(D-1-L)}else b-U>m&&Y--;j+=Y}b-=U}return j}static combins(u,m){let g,b;u-m>m?(b=m,g=u-m):(b=u-m,g=m);let j=1,S=1;for(let D=u;D>g;D--)j*=D,S<=b&&(j/=S,S++);for(;S<=b;)j/=S,S++;return j}}class xr{static buildBitArray(u){let m=u.length*2-1;u[u.length-1].getRightChar()==null&&(m-=1);let g=12*m,b=new _(g),j=0,D=u[0].getRightChar().getValue();for(let L=11;L>=0;--L)D&1<<L&&b.set(j),j++;for(let L=1;L<u.length;++L){let U=u[L],Y=U.getLeftChar().getValue();for(let ee=11;ee>=0;--ee)Y&1<<ee&&b.set(j),j++;if(U.getRightChar()!=null){let ee=U.getRightChar().getValue();for(let ae=11;ae>=0;--ae)ee&1<<ae&&b.set(j),j++}}return b}}class dr{constructor(u,m){m?this.decodedInformation=null:(this.finished=u,this.decodedInformation=m)}getDecodedInformation(){return this.decodedInformation}isFinished(){return this.finished}}class Gr{constructor(u){this.newPosition=u}getNewPosition(){return this.newPosition}}class Yr extends Gr{constructor(u,m){super(u),this.value=m}getValue(){return this.value}isFNC1(){return this.value===Yr.FNC1}}Yr.FNC1="$";class wa extends Gr{constructor(u,m,g){super(u),g?(this.remaining=!0,this.remainingValue=this.remainingValue):(this.remaining=!1,this.remainingValue=0),this.newString=m}getNewString(){return this.newString}isRemaining(){return this.remaining}getRemainingValue(){return this.remainingValue}}class qe extends Gr{constructor(u,m,g){if(super(u),m<0||m>10||g<0||g>10)throw new P;this.firstDigit=m,this.secondDigit=g}getFirstDigit(){return this.firstDigit}getSecondDigit(){return this.secondDigit}getValue(){return this.firstDigit*10+this.secondDigit}isFirstDigitFNC1(){return this.firstDigit===qe.FNC1}isSecondDigitFNC1(){return this.secondDigit===qe.FNC1}isAnyFNC1(){return this.firstDigit===qe.FNC1||this.secondDigit===qe.FNC1}}qe.FNC1=10;class Ue{constructor(){}static parseFieldsInGeneralPurpose(u){if(!u)return null;if(u.length<2)throw new F;let m=u.substring(0,2);for(let j of Ue.TWO_DIGIT_DATA_LENGTH)if(j[0]===m)return j[1]===Ue.VARIABLE_LENGTH?Ue.processVariableAI(2,j[2],u):Ue.processFixedAI(2,j[1],u);if(u.length<3)throw new F;let g=u.substring(0,3);for(let j of Ue.THREE_DIGIT_DATA_LENGTH)if(j[0]===g)return j[1]===Ue.VARIABLE_LENGTH?Ue.processVariableAI(3,j[2],u):Ue.processFixedAI(3,j[1],u);for(let j of Ue.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH)if(j[0]===g)return j[1]===Ue.VARIABLE_LENGTH?Ue.processVariableAI(4,j[2],u):Ue.processFixedAI(4,j[1],u);if(u.length<4)throw new F;let b=u.substring(0,4);for(let j of Ue.FOUR_DIGIT_DATA_LENGTH)if(j[0]===b)return j[1]===Ue.VARIABLE_LENGTH?Ue.processVariableAI(4,j[2],u):Ue.processFixedAI(4,j[1],u);throw new F}static processFixedAI(u,m,g){if(g.length<u)throw new F;let b=g.substring(0,u);if(g.length<u+m)throw new F;let j=g.substring(u,u+m),S=g.substring(u+m),D="("+b+")"+j,L=Ue.parseFieldsInGeneralPurpose(S);return L==null?D:D+L}static processVariableAI(u,m,g){let b=g.substring(0,u),j;g.length<u+m?j=g.length:j=u+m;let S=g.substring(u,j),D=g.substring(j),L="("+b+")"+S,U=Ue.parseFieldsInGeneralPurpose(D);return U==null?L:L+U}}Ue.VARIABLE_LENGTH=[],Ue.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",Ue.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",Ue.VARIABLE_LENGTH,20],["22",Ue.VARIABLE_LENGTH,29],["30",Ue.VARIABLE_LENGTH,8],["37",Ue.VARIABLE_LENGTH,8],["90",Ue.VARIABLE_LENGTH,30],["91",Ue.VARIABLE_LENGTH,30],["92",Ue.VARIABLE_LENGTH,30],["93",Ue.VARIABLE_LENGTH,30],["94",Ue.VARIABLE_LENGTH,30],["95",Ue.VARIABLE_LENGTH,30],["96",Ue.VARIABLE_LENGTH,30],["97",Ue.VARIABLE_LENGTH,3],["98",Ue.VARIABLE_LENGTH,30],["99",Ue.VARIABLE_LENGTH,30]],Ue.THREE_DIGIT_DATA_LENGTH=[["240",Ue.VARIABLE_LENGTH,30],["241",Ue.VARIABLE_LENGTH,30],["242",Ue.VARIABLE_LENGTH,6],["250",Ue.VARIABLE_LENGTH,30],["251",Ue.VARIABLE_LENGTH,30],["253",Ue.VARIABLE_LENGTH,17],["254",Ue.VARIABLE_LENGTH,20],["400",Ue.VARIABLE_LENGTH,30],["401",Ue.VARIABLE_LENGTH,30],["402",17],["403",Ue.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",Ue.VARIABLE_LENGTH,20],["421",Ue.VARIABLE_LENGTH,15],["422",3],["423",Ue.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],Ue.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",Ue.VARIABLE_LENGTH,15],["391",Ue.VARIABLE_LENGTH,18],["392",Ue.VARIABLE_LENGTH,15],["393",Ue.VARIABLE_LENGTH,18],["703",Ue.VARIABLE_LENGTH,30]],Ue.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",Ue.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",Ue.VARIABLE_LENGTH,20],["8003",Ue.VARIABLE_LENGTH,30],["8004",Ue.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",Ue.VARIABLE_LENGTH,30],["8008",Ue.VARIABLE_LENGTH,12],["8018",18],["8020",Ue.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",Ue.VARIABLE_LENGTH,70],["8200",Ue.VARIABLE_LENGTH,70]];class Tt{constructor(u){this.buffer=new B,this.information=u}decodeAllCodes(u,m){let g=m,b=null;do{let j=this.decodeGeneralPurposeField(g,b),S=Ue.parseFieldsInGeneralPurpose(j.getNewString());if(S!=null&&u.append(S),j.isRemaining()?b=""+j.getRemainingValue():b=null,g===j.getNewPosition())break;g=j.getNewPosition()}while(!0);return u.toString()}isStillNumeric(u){if(u+7>this.information.getSize())return u+4<=this.information.getSize();for(let m=u;m<u+3;++m)if(this.information.get(m))return!0;return this.information.get(u+3)}decodeNumeric(u){if(u+7>this.information.getSize()){let j=this.extractNumericValueFromBitArray(u,4);return j===0?new qe(this.information.getSize(),qe.FNC1,qe.FNC1):new qe(this.information.getSize(),j-1,qe.FNC1)}let m=this.extractNumericValueFromBitArray(u,7),g=(m-8)/11,b=(m-8)%11;return new qe(u+7,g,b)}extractNumericValueFromBitArray(u,m){return Tt.extractNumericValueFromBitArray(this.information,u,m)}static extractNumericValueFromBitArray(u,m,g){let b=0;for(let j=0;j<g;++j)u.get(m+j)&&(b|=1<<g-j-1);return b}decodeGeneralPurposeField(u,m){this.buffer.setLengthToZero(),m!=null&&this.buffer.append(m),this.current.setPosition(u);let g=this.parseBlocks();return g!=null&&g.isRemaining()?new wa(this.current.getPosition(),this.buffer.toString(),g.getRemainingValue()):new wa(this.current.getPosition(),this.buffer.toString())}parseBlocks(){let u,m;do{let g=this.current.getPosition();if(this.current.isAlpha()?(m=this.parseAlphaBlock(),u=m.isFinished()):this.current.isIsoIec646()?(m=this.parseIsoIec646Block(),u=m.isFinished()):(m=this.parseNumericBlock(),u=m.isFinished()),!(g!==this.current.getPosition())&&!u)break}while(!u);return m.getDecodedInformation()}parseNumericBlock(){for(;this.isStillNumeric(this.current.getPosition());){let u=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(u.getNewPosition()),u.isFirstDigitFNC1()){let m;return u.isSecondDigitFNC1()?m=new wa(this.current.getPosition(),this.buffer.toString()):m=new wa(this.current.getPosition(),this.buffer.toString(),u.getSecondDigit()),new dr(!0,m)}if(this.buffer.append(u.getFirstDigit()),u.isSecondDigitFNC1()){let m=new wa(this.current.getPosition(),this.buffer.toString());return new dr(!0,m)}this.buffer.append(u.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new dr(!1)}parseIsoIec646Block(){for(;this.isStillIsoIec646(this.current.getPosition());){let u=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(u.getNewPosition()),u.isFNC1()){let m=new wa(this.current.getPosition(),this.buffer.toString());return new dr(!0,m)}this.buffer.append(u.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new dr(!1)}parseAlphaBlock(){for(;this.isStillAlpha(this.current.getPosition());){let u=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(u.getNewPosition()),u.isFNC1()){let m=new wa(this.current.getPosition(),this.buffer.toString());return new dr(!0,m)}this.buffer.append(u.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new dr(!1)}isStillIsoIec646(u){if(u+5>this.information.getSize())return!1;let m=this.extractNumericValueFromBitArray(u,5);if(m>=5&&m<16)return!0;if(u+7>this.information.getSize())return!1;let g=this.extractNumericValueFromBitArray(u,7);if(g>=64&&g<116)return!0;if(u+8>this.information.getSize())return!1;let b=this.extractNumericValueFromBitArray(u,8);return b>=232&&b<253}decodeIsoIec646(u){let m=this.extractNumericValueFromBitArray(u,5);if(m===15)return new Yr(u+5,Yr.FNC1);if(m>=5&&m<15)return new Yr(u+5,"0"+(m-5));let g=this.extractNumericValueFromBitArray(u,7);if(g>=64&&g<90)return new Yr(u+7,""+(g+1));if(g>=90&&g<116)return new Yr(u+7,""+(g+7));let b=this.extractNumericValueFromBitArray(u,8),j;switch(b){case 232:j="!";break;case 233:j='"';break;case 234:j="%";break;case 235:j="&";break;case 236:j="'";break;case 237:j="(";break;case 238:j=")";break;case 239:j="*";break;case 240:j="+";break;case 241:j=",";break;case 242:j="-";break;case 243:j=".";break;case 244:j="/";break;case 245:j=":";break;case 246:j=";";break;case 247:j="<";break;case 248:j="=";break;case 249:j=">";break;case 250:j="?";break;case 251:j="_";break;case 252:j=" ";break;default:throw new P}return new Yr(u+8,j)}isStillAlpha(u){if(u+5>this.information.getSize())return!1;let m=this.extractNumericValueFromBitArray(u,5);if(m>=5&&m<16)return!0;if(u+6>this.information.getSize())return!1;let g=this.extractNumericValueFromBitArray(u,6);return g>=16&&g<63}decodeAlphanumeric(u){let m=this.extractNumericValueFromBitArray(u,5);if(m===15)return new Yr(u+5,Yr.FNC1);if(m>=5&&m<15)return new Yr(u+5,"0"+(m-5));let g=this.extractNumericValueFromBitArray(u,6);if(g>=32&&g<58)return new Yr(u+6,""+(g+33));let b;switch(g){case 58:b="*";break;case 59:b=",";break;case 60:b="-";break;case 61:b=".";break;case 62:b="/";break;default:throw new Se("Decoding invalid alphanumeric value: "+g)}return new Yr(u+6,b)}isAlphaTo646ToAlphaLatch(u){if(u+1>this.information.getSize())return!1;for(let m=0;m<5&&m+u<this.information.getSize();++m)if(m===2){if(!this.information.get(u+2))return!1}else if(this.information.get(u+m))return!1;return!0}isAlphaOr646ToNumericLatch(u){if(u+3>this.information.getSize())return!1;for(let m=u;m<u+3;++m)if(this.information.get(m))return!1;return!0}isNumericToAlphaNumericLatch(u){if(u+1>this.information.getSize())return!1;for(let m=0;m<4&&m+u<this.information.getSize();++m)if(this.information.get(u+m))return!1;return!0}}class Xa{constructor(u){this.information=u,this.generalDecoder=new Tt(u)}getInformation(){return this.information}getGeneralDecoder(){return this.generalDecoder}}class ze extends Xa{constructor(u){super(u)}encodeCompressedGtin(u,m){u.append("(01)");let g=u.length();u.append("9"),this.encodeCompressedGtinWithoutAI(u,m,g)}encodeCompressedGtinWithoutAI(u,m,g){for(let b=0;b<4;++b){let j=this.getGeneralDecoder().extractNumericValueFromBitArray(m+10*b,10);j/100===0&&u.append("0"),j/10===0&&u.append("0"),u.append(j)}ze.appendCheckDigit(u,g)}static appendCheckDigit(u,m){let g=0;for(let b=0;b<13;b++){let j=u.charAt(b+m).charCodeAt(0)-48;g+=b&1?j:3*j}g=10-g%10,g===10&&(g=0),u.append(g)}}ze.GTIN_SIZE=40;class wt extends ze{constructor(u){super(u)}parseInformation(){let u=new B;u.append("(01)");let m=u.length(),g=this.getGeneralDecoder().extractNumericValueFromBitArray(wt.HEADER_SIZE,4);return u.append(g),this.encodeCompressedGtinWithoutAI(u,wt.HEADER_SIZE+4,m),this.getGeneralDecoder().decodeAllCodes(u,wt.HEADER_SIZE+44)}}wt.HEADER_SIZE=4;class ts extends Xa{constructor(u){super(u)}parseInformation(){let u=new B;return this.getGeneralDecoder().decodeAllCodes(u,ts.HEADER_SIZE)}}ts.HEADER_SIZE=5;class bo extends ze{constructor(u){super(u)}encodeCompressedWeight(u,m,g){let b=this.getGeneralDecoder().extractNumericValueFromBitArray(m,g);this.addWeightCode(u,b);let j=this.checkWeight(b),S=1e5;for(let D=0;D<5;++D)j/S===0&&u.append("0"),S/=10;u.append(j)}}class Oa extends bo{constructor(u){super(u)}parseInformation(){if(this.getInformation().getSize()!=Oa.HEADER_SIZE+bo.GTIN_SIZE+Oa.WEIGHT_SIZE)throw new F;let u=new B;return this.encodeCompressedGtin(u,Oa.HEADER_SIZE),this.encodeCompressedWeight(u,Oa.HEADER_SIZE+bo.GTIN_SIZE,Oa.WEIGHT_SIZE),u.toString()}}Oa.HEADER_SIZE=5,Oa.WEIGHT_SIZE=15;class Qk extends Oa{constructor(u){super(u)}addWeightCode(u,m){u.append("(3103)")}checkWeight(u){return u}}class KT extends Oa{constructor(u){super(u)}addWeightCode(u,m){m<1e4?u.append("(3202)"):u.append("(3203)")}checkWeight(u){return u<1e4?u:u-1e4}}class pi extends ze{constructor(u){super(u)}parseInformation(){if(this.getInformation().getSize()<pi.HEADER_SIZE+ze.GTIN_SIZE)throw new F;let u=new B;this.encodeCompressedGtin(u,pi.HEADER_SIZE);let m=this.getGeneralDecoder().extractNumericValueFromBitArray(pi.HEADER_SIZE+ze.GTIN_SIZE,pi.LAST_DIGIT_SIZE);u.append("(392"),u.append(m),u.append(")");let g=this.getGeneralDecoder().decodeGeneralPurposeField(pi.HEADER_SIZE+ze.GTIN_SIZE+pi.LAST_DIGIT_SIZE,null);return u.append(g.getNewString()),u.toString()}}pi.HEADER_SIZE=8,pi.LAST_DIGIT_SIZE=2;class gn extends ze{constructor(u){super(u)}parseInformation(){if(this.getInformation().getSize()<gn.HEADER_SIZE+ze.GTIN_SIZE)throw new F;let u=new B;this.encodeCompressedGtin(u,gn.HEADER_SIZE);let m=this.getGeneralDecoder().extractNumericValueFromBitArray(gn.HEADER_SIZE+ze.GTIN_SIZE,gn.LAST_DIGIT_SIZE);u.append("(393"),u.append(m),u.append(")");let g=this.getGeneralDecoder().extractNumericValueFromBitArray(gn.HEADER_SIZE+ze.GTIN_SIZE+gn.LAST_DIGIT_SIZE,gn.FIRST_THREE_DIGITS_SIZE);g/100==0&&u.append("0"),g/10==0&&u.append("0"),u.append(g);let b=this.getGeneralDecoder().decodeGeneralPurposeField(gn.HEADER_SIZE+ze.GTIN_SIZE+gn.LAST_DIGIT_SIZE+gn.FIRST_THREE_DIGITS_SIZE,null);return u.append(b.getNewString()),u.toString()}}gn.HEADER_SIZE=8,gn.LAST_DIGIT_SIZE=2,gn.FIRST_THREE_DIGITS_SIZE=10;class Rs extends bo{constructor(u,m,g){super(u),this.dateCode=g,this.firstAIdigits=m}parseInformation(){if(this.getInformation().getSize()!=Rs.HEADER_SIZE+Rs.GTIN_SIZE+Rs.WEIGHT_SIZE+Rs.DATE_SIZE)throw new F;let u=new B;return this.encodeCompressedGtin(u,Rs.HEADER_SIZE),this.encodeCompressedWeight(u,Rs.HEADER_SIZE+Rs.GTIN_SIZE,Rs.WEIGHT_SIZE),this.encodeCompressedDate(u,Rs.HEADER_SIZE+Rs.GTIN_SIZE+Rs.WEIGHT_SIZE),u.toString()}encodeCompressedDate(u,m){let g=this.getGeneralDecoder().extractNumericValueFromBitArray(m,Rs.DATE_SIZE);if(g==38400)return;u.append("("),u.append(this.dateCode),u.append(")");let b=g%32;g/=32;let j=g%12+1;g/=12;let S=g;S/10==0&&u.append("0"),u.append(S),j/10==0&&u.append("0"),u.append(j),b/10==0&&u.append("0"),u.append(b)}addWeightCode(u,m){u.append("("),u.append(this.firstAIdigits),u.append(m/1e5),u.append(")")}checkWeight(u){return u%1e5}}Rs.HEADER_SIZE=8,Rs.WEIGHT_SIZE=20,Rs.DATE_SIZE=16;function GT(J){try{if(J.get(1))return new wt(J);if(!J.get(2))return new ts(J);switch(Tt.extractNumericValueFromBitArray(J,1,4)){case 4:return new Qk(J);case 5:return new KT(J)}switch(Tt.extractNumericValueFromBitArray(J,1,5)){case 12:return new pi(J);case 13:return new gn(J)}switch(Tt.extractNumericValueFromBitArray(J,1,7)){case 56:return new Rs(J,"310","11");case 57:return new Rs(J,"320","11");case 58:return new Rs(J,"310","13");case 59:return new Rs(J,"320","13");case 60:return new Rs(J,"310","15");case 61:return new Rs(J,"320","15");case 62:return new Rs(J,"310","17");case 63:return new Rs(J,"320","17")}}catch(u){throw console.log(u),new Se("unknown decoder: "+J)}}class Sd{constructor(u,m,g,b){this.leftchar=u,this.rightchar=m,this.finderpattern=g,this.maybeLast=b}mayBeLast(){return this.maybeLast}getLeftChar(){return this.leftchar}getRightChar(){return this.rightchar}getFinderPattern(){return this.finderpattern}mustBeLast(){return this.rightchar==null}toString(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"}static equals(u,m){return u instanceof Sd?Sd.equalsOrNull(u.leftchar,m.leftchar)&&Sd.equalsOrNull(u.rightchar,m.rightchar)&&Sd.equalsOrNull(u.finderpattern,m.finderpattern):!1}static equalsOrNull(u,m){return u===null?m===null:Sd.equals(u,m)}hashCode(){return this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue()}}class Zk{constructor(u,m,g){this.pairs=u,this.rowNumber=m,this.wasReversed=g}getPairs(){return this.pairs}getRowNumber(){return this.rowNumber}isReversed(){return this.wasReversed}isEquivalent(u){return this.checkEqualitity(this,u)}toString(){return"{ "+this.pairs+" }"}equals(u,m){return u instanceof Zk?this.checkEqualitity(u,m)&&u.wasReversed===m.wasReversed:!1}checkEqualitity(u,m){if(!u||!m)return;let g;return u.forEach((b,j)=>{m.forEach(S=>{b.getLeftChar().getValue()===S.getLeftChar().getValue()&&b.getRightChar().getValue()===S.getRightChar().getValue()&&b.getFinderPatter().getValue()===S.getFinderPatter().getValue()&&(g=!0)})}),g}}class Qe extends Et{constructor(u){super(...arguments),this.pairs=new Array(Qe.MAX_PAIRS),this.rows=new Array,this.startEnd=[2],this.verbose=u===!0}decodeRow(u,m,g){this.pairs.length=0,this.startFromEven=!1;try{return Qe.constructResult(this.decodeRow2pairs(u,m))}catch(b){this.verbose&&console.log(b)}return this.pairs.length=0,this.startFromEven=!0,Qe.constructResult(this.decodeRow2pairs(u,m))}reset(){this.pairs.length=0,this.rows.length=0}decodeRow2pairs(u,m){let g=!1;for(;!g;)try{this.pairs.push(this.retrieveNextPair(m,this.pairs,u))}catch(j){if(j instanceof F){if(!this.pairs.length)throw new F;g=!0}}if(this.checkChecksum())return this.pairs;let b;if(this.rows.length?b=!0:b=!1,this.storeRow(u,!1),b){let j=this.checkRowsBoolean(!1);if(j!=null||(j=this.checkRowsBoolean(!0),j!=null))return j}throw new F}checkRowsBoolean(u){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,u&&(this.rows=this.rows.reverse());let m=null;try{m=this.checkRows(new Array,0)}catch(g){this.verbose&&console.log(g)}return u&&(this.rows=this.rows.reverse()),m}checkRows(u,m){for(let g=m;g<this.rows.length;g++){let b=this.rows[g];this.pairs.length=0;for(let S of u)this.pairs.push(S.getPairs());if(this.pairs.push(b.getPairs()),!Qe.isValidSequence(this.pairs))continue;if(this.checkChecksum())return this.pairs;let j=new Array(u);j.push(b);try{return this.checkRows(j,g+1)}catch(S){this.verbose&&console.log(S)}}throw new F}static isValidSequence(u){for(let m of Qe.FINDER_PATTERN_SEQUENCES){if(u.length>m.length)continue;let g=!0;for(let b=0;b<u.length;b++)if(u[b].getFinderPattern().getValue()!=m[b]){g=!1;break}if(g)return!0}return!1}storeRow(u,m){let g=0,b=!1,j=!1;for(;g<this.rows.length;){let S=this.rows[g];if(S.getRowNumber()>u){j=S.isEquivalent(this.pairs);break}b=S.isEquivalent(this.pairs),g++}j||b||Qe.isPartialRow(this.pairs,this.rows)||(this.rows.push(g,new Zk(this.pairs,u,m)),this.removePartialRows(this.pairs,this.rows))}removePartialRows(u,m){for(let g of m)if(g.getPairs().length!==u.length){for(let b of g.getPairs())for(let j of u)if(Sd.equals(b,j))break}}static isPartialRow(u,m){for(let g of m){let b=!0;for(let j of u){let S=!1;for(let D of g.getPairs())if(j.equals(D)){S=!0;break}if(!S){b=!1;break}}if(b)return!0}return!1}getRows(){return this.rows}static constructResult(u){let m=xr.buildBitArray(u),b=GT(m).parseInformation(),j=u[0].getFinderPattern().getResultPoints(),S=u[u.length-1].getFinderPattern().getResultPoints(),D=[j[0],j[1],S[0],S[1]];return new ne(b,null,null,D,xe.RSS_EXPANDED,null)}checkChecksum(){let u=this.pairs.get(0),m=u.getLeftChar(),g=u.getRightChar();if(g==null)return!1;let b=g.getChecksumPortion(),j=2;for(let D=1;D<this.pairs.size();++D){let L=this.pairs.get(D);b+=L.getLeftChar().getChecksumPortion(),j++;let U=L.getRightChar();U!=null&&(b+=U.getChecksumPortion(),j++)}return b%=211,211*(j-4)+b==m.getValue()}static getNextSecondBar(u,m){let g;return u.get(m)?(g=u.getNextUnset(m),g=u.getNextSet(g)):(g=u.getNextSet(m),g=u.getNextUnset(g)),g}retrieveNextPair(u,m,g){let b=m.length%2==0;this.startFromEven&&(b=!b);let j,S=!0,D=-1;do this.findNextPair(u,m,D),j=this.parseFoundFinderPattern(u,g,b),j==null?D=Qe.getNextSecondBar(u,this.startEnd[0]):S=!1;while(S);let L=this.decodeDataCharacter(u,j,b,!0);if(!this.isEmptyPair(m)&&m[m.length-1].mustBeLast())throw new F;let U;try{U=this.decodeDataCharacter(u,j,b,!1)}catch(Y){U=null,this.verbose&&console.log(Y)}return new Sd(L,U,j,!0)}isEmptyPair(u){return u.length===0}findNextPair(u,m,g){let b=this.getDecodeFinderCounters();b[0]=0,b[1]=0,b[2]=0,b[3]=0;let j=u.getSize(),S;g>=0?S=g:this.isEmptyPair(m)?S=0:S=m[m.length-1].getFinderPattern().getStartEnd()[1];let D=m.length%2!=0;this.startFromEven&&(D=!D);let L=!1;for(;S<j&&(L=!u.get(S),!!L);)S++;let U=0,Y=S;for(let ee=S;ee<j;ee++)if(u.get(ee)!=L)b[U]++;else{if(U==3){if(D&&Qe.reverseCounters(b),Qe.isFinderPattern(b)){this.startEnd[0]=Y,this.startEnd[1]=ee;return}D&&Qe.reverseCounters(b),Y+=b[0]+b[1],b[0]=b[2],b[1]=b[3],b[2]=0,b[3]=0,U--}else U++;b[U]=1,L=!L}throw new F}static reverseCounters(u){let m=u.length;for(let g=0;g<m/2;++g){let b=u[g];u[g]=u[m-g-1],u[m-g-1]=b}}parseFoundFinderPattern(u,m,g){let b,j,S;if(g){let U=this.startEnd[0]-1;for(;U>=0&&!u.get(U);)U--;U++,b=this.startEnd[0]-U,j=U,S=this.startEnd[1]}else j=this.startEnd[0],S=u.getNextUnset(this.startEnd[1]+1),b=S-this.startEnd[1];let D=this.getDecodeFinderCounters();w.arraycopy(D,0,D,1,D.length-1),D[0]=b;let L;try{L=this.parseFinderValue(D,Qe.FINDER_PATTERNS)}catch{return null}return new ot(L,[j,S],j,S,m)}decodeDataCharacter(u,m,g,b){let j=this.getDataCharacterCounters();for(let fs=0;fs<j.length;fs++)j[fs]=0;if(b)Qe.recordPatternInReverse(u,m.getStartEnd()[0],j);else{Qe.recordPattern(u,m.getStartEnd()[1],j);for(let fs=0,bn=j.length-1;fs<bn;fs++,bn--){let zi=j[fs];j[fs]=j[bn],j[bn]=zi}}let S=17,D=Ve.sum(new Int32Array(j))/S,L=(m.getStartEnd()[1]-m.getStartEnd()[0])/15;if(Math.abs(D-L)/L>.3)throw new F;let U=this.getOddCounts(),Y=this.getEvenCounts(),ee=this.getOddRoundingErrors(),ae=this.getEvenRoundingErrors();for(let fs=0;fs<j.length;fs++){let bn=1*j[fs]/D,zi=bn+.5;if(zi<1){if(bn<.3)throw new F;zi=1}else if(zi>8){if(bn>8.7)throw new F;zi=8}let Wh=fs/2;fs&1?(Y[Wh]=zi,ae[Wh]=bn-zi):(U[Wh]=zi,ee[Wh]=bn-zi)}this.adjustOddEvenCounts(S);let ue=4*m.getValue()+(g?0:2)+(b?0:1)-1,be=0,we=0;for(let fs=U.length-1;fs>=0;fs--){if(Qe.isNotA1left(m,g,b)){let bn=Qe.WEIGHTS[ue][2*fs];we+=U[fs]*bn}be+=U[fs]}let Ee=0;for(let fs=Y.length-1;fs>=0;fs--)if(Qe.isNotA1left(m,g,b)){let bn=Qe.WEIGHTS[ue][2*fs+1];Ee+=Y[fs]*bn}let Me=we+Ee;if(be&1||be>13||be<4)throw new F;let at=(13-be)/2,nt=Qe.SYMBOL_WIDEST[at],et=9-nt,Sr=mt.getRSSvalue(U,nt,!0),hr=mt.getRSSvalue(Y,et,!1),bi=Qe.EVEN_TOTAL_SUBSET[at],ol=Qe.GSUM[at],vi=Sr*bi+hr+ol;return new Os(vi,Me)}static isNotA1left(u,m,g){return!(u.getValue()==0&&m&&g)}adjustOddEvenCounts(u){let m=Ve.sum(new Int32Array(this.getOddCounts())),g=Ve.sum(new Int32Array(this.getEvenCounts())),b=!1,j=!1;m>13?j=!0:m<4&&(b=!0);let S=!1,D=!1;g>13?D=!0:g<4&&(S=!0);let L=m+g-u,U=(m&1)==1,Y=(g&1)==0;if(L==1)if(U){if(Y)throw new F;j=!0}else{if(!Y)throw new F;D=!0}else if(L==-1)if(U){if(Y)throw new F;b=!0}else{if(!Y)throw new F;S=!0}else if(L==0){if(U){if(!Y)throw new F;m<g?(b=!0,D=!0):(j=!0,S=!0)}else if(Y)throw new F}else throw new F;if(b){if(j)throw new F;Qe.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(j&&Qe.decrement(this.getOddCounts(),this.getOddRoundingErrors()),S){if(D)throw new F;Qe.increment(this.getEvenCounts(),this.getOddRoundingErrors())}D&&Qe.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}Qe.SYMBOL_WIDEST=[7,5,4,3,1],Qe.EVEN_TOTAL_SUBSET=[4,20,52,104,204],Qe.GSUM=[0,348,1388,2948,3988],Qe.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],Qe.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],Qe.FINDER_PAT_A=0,Qe.FINDER_PAT_B=1,Qe.FINDER_PAT_C=2,Qe.FINDER_PAT_D=3,Qe.FINDER_PAT_E=4,Qe.FINDER_PAT_F=5,Qe.FINDER_PATTERN_SEQUENCES=[[Qe.FINDER_PAT_A,Qe.FINDER_PAT_A],[Qe.FINDER_PAT_A,Qe.FINDER_PAT_B,Qe.FINDER_PAT_B],[Qe.FINDER_PAT_A,Qe.FINDER_PAT_C,Qe.FINDER_PAT_B,Qe.FINDER_PAT_D],[Qe.FINDER_PAT_A,Qe.FINDER_PAT_E,Qe.FINDER_PAT_B,Qe.FINDER_PAT_D,Qe.FINDER_PAT_C],[Qe.FINDER_PAT_A,Qe.FINDER_PAT_E,Qe.FINDER_PAT_B,Qe.FINDER_PAT_D,Qe.FINDER_PAT_D,Qe.FINDER_PAT_F],[Qe.FINDER_PAT_A,Qe.FINDER_PAT_E,Qe.FINDER_PAT_B,Qe.FINDER_PAT_D,Qe.FINDER_PAT_E,Qe.FINDER_PAT_F,Qe.FINDER_PAT_F],[Qe.FINDER_PAT_A,Qe.FINDER_PAT_A,Qe.FINDER_PAT_B,Qe.FINDER_PAT_B,Qe.FINDER_PAT_C,Qe.FINDER_PAT_C,Qe.FINDER_PAT_D,Qe.FINDER_PAT_D],[Qe.FINDER_PAT_A,Qe.FINDER_PAT_A,Qe.FINDER_PAT_B,Qe.FINDER_PAT_B,Qe.FINDER_PAT_C,Qe.FINDER_PAT_C,Qe.FINDER_PAT_D,Qe.FINDER_PAT_E,Qe.FINDER_PAT_E],[Qe.FINDER_PAT_A,Qe.FINDER_PAT_A,Qe.FINDER_PAT_B,Qe.FINDER_PAT_B,Qe.FINDER_PAT_C,Qe.FINDER_PAT_C,Qe.FINDER_PAT_D,Qe.FINDER_PAT_E,Qe.FINDER_PAT_F,Qe.FINDER_PAT_F],[Qe.FINDER_PAT_A,Qe.FINDER_PAT_A,Qe.FINDER_PAT_B,Qe.FINDER_PAT_B,Qe.FINDER_PAT_C,Qe.FINDER_PAT_D,Qe.FINDER_PAT_D,Qe.FINDER_PAT_E,Qe.FINDER_PAT_E,Qe.FINDER_PAT_F,Qe.FINDER_PAT_F]],Qe.MAX_PAIRS=11;class oJ extends Os{constructor(u,m,g){super(u,m),this.count=0,this.finderPattern=g}getFinderPattern(){return this.finderPattern}getCount(){return this.count}incrementCount(){this.count++}}class ta extends Et{constructor(){super(...arguments),this.possibleLeftPairs=[],this.possibleRightPairs=[]}decodeRow(u,m,g){const b=this.decodePair(m,!1,u,g);ta.addOrTally(this.possibleLeftPairs,b),m.reverse();let j=this.decodePair(m,!0,u,g);ta.addOrTally(this.possibleRightPairs,j),m.reverse();for(let S of this.possibleLeftPairs)if(S.getCount()>1){for(let D of this.possibleRightPairs)if(D.getCount()>1&&ta.checkChecksum(S,D))return ta.constructResult(S,D)}throw new F}static addOrTally(u,m){if(m==null)return;let g=!1;for(let b of u)if(b.getValue()===m.getValue()){b.incrementCount(),g=!0;break}g||u.push(m)}reset(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0}static constructResult(u,m){let g=4537077*u.getValue()+m.getValue(),b=new String(g).toString(),j=new B;for(let U=13-b.length;U>0;U--)j.append("0");j.append(b);let S=0;for(let U=0;U<13;U++){let Y=j.charAt(U).charCodeAt(0)-48;S+=U&1?Y:3*Y}S=10-S%10,S===10&&(S=0),j.append(S.toString());let D=u.getFinderPattern().getResultPoints(),L=m.getFinderPattern().getResultPoints();return new ne(j.toString(),null,0,[D[0],D[1],L[0],L[1]],xe.RSS_14,new Date().getTime())}static checkChecksum(u,m){let g=(u.getChecksumPortion()+16*m.getChecksumPortion())%79,b=9*u.getFinderPattern().getValue()+m.getFinderPattern().getValue();return b>72&&b--,b>8&&b--,g===b}decodePair(u,m,g,b){try{let j=this.findFinderPattern(u,m),S=this.parseFoundFinderPattern(u,g,m,j),D=b==null?null:b.get(A.NEED_RESULT_POINT_CALLBACK);if(D!=null){let Y=(j[0]+j[1])/2;m&&(Y=u.getSize()-1-Y),D.foundPossibleResultPoint(new me(Y,g))}let L=this.decodeDataCharacter(u,S,!0),U=this.decodeDataCharacter(u,S,!1);return new oJ(1597*L.getValue()+U.getValue(),L.getChecksumPortion()+4*U.getChecksumPortion(),S)}catch{return null}}decodeDataCharacter(u,m,g){let b=this.getDataCharacterCounters();for(let Ee=0;Ee<b.length;Ee++)b[Ee]=0;if(g)st.recordPatternInReverse(u,m.getStartEnd()[0],b);else{st.recordPattern(u,m.getStartEnd()[1]+1,b);for(let Ee=0,Me=b.length-1;Ee<Me;Ee++,Me--){let at=b[Ee];b[Ee]=b[Me],b[Me]=at}}let j=g?16:15,S=Ve.sum(new Int32Array(b))/j,D=this.getOddCounts(),L=this.getEvenCounts(),U=this.getOddRoundingErrors(),Y=this.getEvenRoundingErrors();for(let Ee=0;Ee<b.length;Ee++){let Me=b[Ee]/S,at=Math.floor(Me+.5);at<1?at=1:at>8&&(at=8);let nt=Math.floor(Ee/2);Ee&1?(L[nt]=at,Y[nt]=Me-at):(D[nt]=at,U[nt]=Me-at)}this.adjustOddEvenCounts(g,j);let ee=0,ae=0;for(let Ee=D.length-1;Ee>=0;Ee--)ae*=9,ae+=D[Ee],ee+=D[Ee];let ue=0,be=0;for(let Ee=L.length-1;Ee>=0;Ee--)ue*=9,ue+=L[Ee],be+=L[Ee];let we=ae+3*ue;if(g){if(ee&1||ee>12||ee<4)throw new F;let Ee=(12-ee)/2,Me=ta.OUTSIDE_ODD_WIDEST[Ee],at=9-Me,nt=mt.getRSSvalue(D,Me,!1),et=mt.getRSSvalue(L,at,!0),Sr=ta.OUTSIDE_EVEN_TOTAL_SUBSET[Ee],hr=ta.OUTSIDE_GSUM[Ee];return new Os(nt*Sr+et+hr,we)}else{if(be&1||be>10||be<4)throw new F;let Ee=(10-be)/2,Me=ta.INSIDE_ODD_WIDEST[Ee],at=9-Me,nt=mt.getRSSvalue(D,Me,!0),et=mt.getRSSvalue(L,at,!1),Sr=ta.INSIDE_ODD_TOTAL_SUBSET[Ee],hr=ta.INSIDE_GSUM[Ee];return new Os(et*Sr+nt+hr,we)}}findFinderPattern(u,m){let g=this.getDecodeFinderCounters();g[0]=0,g[1]=0,g[2]=0,g[3]=0;let b=u.getSize(),j=!1,S=0;for(;S<b&&(j=!u.get(S),m!==j);)S++;let D=0,L=S;for(let U=S;U<b;U++)if(u.get(U)!==j)g[D]++;else{if(D===3){if(Et.isFinderPattern(g))return[L,U];L+=g[0]+g[1],g[0]=g[2],g[1]=g[3],g[2]=0,g[3]=0,D--}else D++;g[D]=1,j=!j}throw new F}parseFoundFinderPattern(u,m,g,b){let j=u.get(b[0]),S=b[0]-1;for(;S>=0&&j!==u.get(S);)S--;S++;const D=b[0]-S,L=this.getDecodeFinderCounters(),U=new Int32Array(L.length);w.arraycopy(L,0,U,1,L.length-1),U[0]=D;const Y=this.parseFinderValue(U,ta.FINDER_PATTERNS);let ee=S,ae=b[1];return g&&(ee=u.getSize()-1-ee,ae=u.getSize()-1-ae),new ot(Y,[S,b[1]],ee,ae,m)}adjustOddEvenCounts(u,m){let g=Ve.sum(new Int32Array(this.getOddCounts())),b=Ve.sum(new Int32Array(this.getEvenCounts())),j=!1,S=!1,D=!1,L=!1;u?(g>12?S=!0:g<4&&(j=!0),b>12?L=!0:b<4&&(D=!0)):(g>11?S=!0:g<5&&(j=!0),b>10?L=!0:b<4&&(D=!0));let U=g+b-m,Y=(g&1)===(u?1:0),ee=(b&1)===1;if(U===1)if(Y){if(ee)throw new F;S=!0}else{if(!ee)throw new F;L=!0}else if(U===-1)if(Y){if(ee)throw new F;j=!0}else{if(!ee)throw new F;D=!0}else if(U===0){if(Y){if(!ee)throw new F;g<b?(j=!0,L=!0):(S=!0,D=!0)}else if(ee)throw new F}else throw new F;if(j){if(S)throw new F;Et.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(S&&Et.decrement(this.getOddCounts(),this.getOddRoundingErrors()),D){if(L)throw new F;Et.increment(this.getEvenCounts(),this.getOddRoundingErrors())}L&&Et.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}ta.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],ta.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],ta.OUTSIDE_GSUM=[0,161,961,2015,2715],ta.INSIDE_GSUM=[0,336,1036,1516],ta.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],ta.INSIDE_ODD_WIDEST=[2,4,6,8],ta.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])];class Bh extends st{constructor(u,m){super(),this.readers=[],this.verbose=m===!0;const g=u?u.get(A.POSSIBLE_FORMATS):null,b=u&&u.get(A.ASSUME_CODE_39_CHECK_DIGIT)!==void 0;g?((g.includes(xe.EAN_13)||g.includes(xe.UPC_A)||g.includes(xe.EAN_8)||g.includes(xe.UPC_E))&&this.readers.push(new Ya(u)),g.includes(xe.CODE_39)&&this.readers.push(new ct(b)),g.includes(xe.CODE_128)&&this.readers.push(new Ce),g.includes(xe.ITF)&&this.readers.push(new ht),g.includes(xe.RSS_14)&&this.readers.push(new ta),g.includes(xe.RSS_EXPANDED)&&this.readers.push(new Qe(this.verbose))):(this.readers.push(new Ya(u)),this.readers.push(new ct),this.readers.push(new Ya(u)),this.readers.push(new Ce),this.readers.push(new ht),this.readers.push(new ta),this.readers.push(new Qe(this.verbose)))}decodeRow(u,m,g){for(let b=0;b<this.readers.length;b++)try{return this.readers[b].decodeRow(u,m,g)}catch{}throw new F}reset(){this.readers.forEach(u=>u.reset())}}class lJ extends he{constructor(u=500,m){super(new Bh(m),u,m)}}class Xr{constructor(u,m,g){this.ecCodewords=u,this.ecBlocks=[m],g&&this.ecBlocks.push(g)}getECCodewords(){return this.ecCodewords}getECBlocks(){return this.ecBlocks}}class Vr{constructor(u,m){this.count=u,this.dataCodewords=m}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class _r{constructor(u,m,g,b,j,S){this.versionNumber=u,this.symbolSizeRows=m,this.symbolSizeColumns=g,this.dataRegionSizeRows=b,this.dataRegionSizeColumns=j,this.ecBlocks=S;let D=0;const L=S.getECCodewords(),U=S.getECBlocks();for(let Y of U)D+=Y.getCount()*(Y.getDataCodewords()+L);this.totalCodewords=D}getVersionNumber(){return this.versionNumber}getSymbolSizeRows(){return this.symbolSizeRows}getSymbolSizeColumns(){return this.symbolSizeColumns}getDataRegionSizeRows(){return this.dataRegionSizeRows}getDataRegionSizeColumns(){return this.dataRegionSizeColumns}getTotalCodewords(){return this.totalCodewords}getECBlocks(){return this.ecBlocks}static getVersionForDimensions(u,m){if(u&1||m&1)throw new P;for(let g of _r.VERSIONS)if(g.symbolSizeRows===u&&g.symbolSizeColumns===m)return g;throw new P}toString(){return""+this.versionNumber}static buildVersions(){return[new _r(1,10,10,8,8,new Xr(5,new Vr(1,3))),new _r(2,12,12,10,10,new Xr(7,new Vr(1,5))),new _r(3,14,14,12,12,new Xr(10,new Vr(1,8))),new _r(4,16,16,14,14,new Xr(12,new Vr(1,12))),new _r(5,18,18,16,16,new Xr(14,new Vr(1,18))),new _r(6,20,20,18,18,new Xr(18,new Vr(1,22))),new _r(7,22,22,20,20,new Xr(20,new Vr(1,30))),new _r(8,24,24,22,22,new Xr(24,new Vr(1,36))),new _r(9,26,26,24,24,new Xr(28,new Vr(1,44))),new _r(10,32,32,14,14,new Xr(36,new Vr(1,62))),new _r(11,36,36,16,16,new Xr(42,new Vr(1,86))),new _r(12,40,40,18,18,new Xr(48,new Vr(1,114))),new _r(13,44,44,20,20,new Xr(56,new Vr(1,144))),new _r(14,48,48,22,22,new Xr(68,new Vr(1,174))),new _r(15,52,52,24,24,new Xr(42,new Vr(2,102))),new _r(16,64,64,14,14,new Xr(56,new Vr(2,140))),new _r(17,72,72,16,16,new Xr(36,new Vr(4,92))),new _r(18,80,80,18,18,new Xr(48,new Vr(4,114))),new _r(19,88,88,20,20,new Xr(56,new Vr(4,144))),new _r(20,96,96,22,22,new Xr(68,new Vr(4,174))),new _r(21,104,104,24,24,new Xr(56,new Vr(6,136))),new _r(22,120,120,18,18,new Xr(68,new Vr(6,175))),new _r(23,132,132,20,20,new Xr(62,new Vr(8,163))),new _r(24,144,144,22,22,new Xr(62,new Vr(8,156),new Vr(2,155))),new _r(25,8,18,6,16,new Xr(7,new Vr(1,5))),new _r(26,8,32,6,14,new Xr(11,new Vr(1,10))),new _r(27,12,26,10,24,new Xr(14,new Vr(1,16))),new _r(28,12,36,10,16,new Xr(18,new Vr(1,22))),new _r(29,16,36,14,16,new Xr(24,new Vr(1,32))),new _r(30,16,48,14,22,new Xr(28,new Vr(1,49)))]}}_r.VERSIONS=_r.buildVersions();class Jk{constructor(u){const m=u.getHeight();if(m<8||m>144||m&1)throw new P;this.version=Jk.readVersion(u),this.mappingBitMatrix=this.extractDataRegion(u),this.readMappingMatrix=new O(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}getVersion(){return this.version}static readVersion(u){const m=u.getHeight(),g=u.getWidth();return _r.getVersionForDimensions(m,g)}readCodewords(){const u=new Int8Array(this.version.getTotalCodewords());let m=0,g=4,b=0;const j=this.mappingBitMatrix.getHeight(),S=this.mappingBitMatrix.getWidth();let D=!1,L=!1,U=!1,Y=!1;do if(g===j&&b===0&&!D)u[m++]=this.readCorner1(j,S)&255,g-=2,b+=2,D=!0;else if(g===j-2&&b===0&&S&3&&!L)u[m++]=this.readCorner2(j,S)&255,g-=2,b+=2,L=!0;else if(g===j+4&&b===2&&!(S&7)&&!U)u[m++]=this.readCorner3(j,S)&255,g-=2,b+=2,U=!0;else if(g===j-2&&b===0&&(S&7)===4&&!Y)u[m++]=this.readCorner4(j,S)&255,g-=2,b+=2,Y=!0;else{do g<j&&b>=0&&!this.readMappingMatrix.get(b,g)&&(u[m++]=this.readUtah(g,b,j,S)&255),g-=2,b+=2;while(g>=0&&b<S);g+=1,b+=3;do g>=0&&b<S&&!this.readMappingMatrix.get(b,g)&&(u[m++]=this.readUtah(g,b,j,S)&255),g+=2,b-=2;while(g<j&&b>=0);g+=3,b+=1}while(g<j||b<S);if(m!==this.version.getTotalCodewords())throw new P;return u}readModule(u,m,g,b){return u<0&&(u+=g,m+=4-(g+4&7)),m<0&&(m+=b,u+=4-(b+4&7)),this.readMappingMatrix.set(m,u),this.mappingBitMatrix.get(m,u)}readUtah(u,m,g,b){let j=0;return this.readModule(u-2,m-2,g,b)&&(j|=1),j<<=1,this.readModule(u-2,m-1,g,b)&&(j|=1),j<<=1,this.readModule(u-1,m-2,g,b)&&(j|=1),j<<=1,this.readModule(u-1,m-1,g,b)&&(j|=1),j<<=1,this.readModule(u-1,m,g,b)&&(j|=1),j<<=1,this.readModule(u,m-2,g,b)&&(j|=1),j<<=1,this.readModule(u,m-1,g,b)&&(j|=1),j<<=1,this.readModule(u,m,g,b)&&(j|=1),j}readCorner1(u,m){let g=0;return this.readModule(u-1,0,u,m)&&(g|=1),g<<=1,this.readModule(u-1,1,u,m)&&(g|=1),g<<=1,this.readModule(u-1,2,u,m)&&(g|=1),g<<=1,this.readModule(0,m-2,u,m)&&(g|=1),g<<=1,this.readModule(0,m-1,u,m)&&(g|=1),g<<=1,this.readModule(1,m-1,u,m)&&(g|=1),g<<=1,this.readModule(2,m-1,u,m)&&(g|=1),g<<=1,this.readModule(3,m-1,u,m)&&(g|=1),g}readCorner2(u,m){let g=0;return this.readModule(u-3,0,u,m)&&(g|=1),g<<=1,this.readModule(u-2,0,u,m)&&(g|=1),g<<=1,this.readModule(u-1,0,u,m)&&(g|=1),g<<=1,this.readModule(0,m-4,u,m)&&(g|=1),g<<=1,this.readModule(0,m-3,u,m)&&(g|=1),g<<=1,this.readModule(0,m-2,u,m)&&(g|=1),g<<=1,this.readModule(0,m-1,u,m)&&(g|=1),g<<=1,this.readModule(1,m-1,u,m)&&(g|=1),g}readCorner3(u,m){let g=0;return this.readModule(u-1,0,u,m)&&(g|=1),g<<=1,this.readModule(u-1,m-1,u,m)&&(g|=1),g<<=1,this.readModule(0,m-3,u,m)&&(g|=1),g<<=1,this.readModule(0,m-2,u,m)&&(g|=1),g<<=1,this.readModule(0,m-1,u,m)&&(g|=1),g<<=1,this.readModule(1,m-3,u,m)&&(g|=1),g<<=1,this.readModule(1,m-2,u,m)&&(g|=1),g<<=1,this.readModule(1,m-1,u,m)&&(g|=1),g}readCorner4(u,m){let g=0;return this.readModule(u-3,0,u,m)&&(g|=1),g<<=1,this.readModule(u-2,0,u,m)&&(g|=1),g<<=1,this.readModule(u-1,0,u,m)&&(g|=1),g<<=1,this.readModule(0,m-2,u,m)&&(g|=1),g<<=1,this.readModule(0,m-1,u,m)&&(g|=1),g<<=1,this.readModule(1,m-1,u,m)&&(g|=1),g<<=1,this.readModule(2,m-1,u,m)&&(g|=1),g<<=1,this.readModule(3,m-1,u,m)&&(g|=1),g}extractDataRegion(u){const m=this.version.getSymbolSizeRows(),g=this.version.getSymbolSizeColumns();if(u.getHeight()!==m)throw new f("Dimension of bitMatrix must match the version size");const b=this.version.getDataRegionSizeRows(),j=this.version.getDataRegionSizeColumns(),S=m/b|0,D=g/j|0,L=S*b,U=D*j,Y=new O(U,L);for(let ee=0;ee<S;++ee){const ae=ee*b;for(let ue=0;ue<D;++ue){const be=ue*j;for(let we=0;we<b;++we){const Ee=ee*(b+2)+1+we,Me=ae+we;for(let at=0;at<j;++at){const nt=ue*(j+2)+1+at;if(u.get(nt,Ee)){const et=be+at;Y.set(et,Me)}}}}}return Y}}class e4{constructor(u,m){this.numDataCodewords=u,this.codewords=m}static getDataBlocks(u,m){const g=m.getECBlocks();let b=0;const j=g.getECBlocks();for(let we of j)b+=we.getCount();const S=new Array(b);let D=0;for(let we of j)for(let Ee=0;Ee<we.getCount();Ee++){const Me=we.getDataCodewords(),at=g.getECCodewords()+Me;S[D++]=new e4(Me,new Uint8Array(at))}const U=S[0].codewords.length-g.getECCodewords(),Y=U-1;let ee=0;for(let we=0;we<Y;we++)for(let Ee=0;Ee<D;Ee++)S[Ee].codewords[we]=u[ee++];const ae=m.getVersionNumber()===24,ue=ae?8:D;for(let we=0;we<ue;we++)S[we].codewords[U-1]=u[ee++];const be=S[0].codewords.length;for(let we=U;we<be;we++)for(let Ee=0;Ee<D;Ee++){const Me=ae?(Ee+8)%D:Ee,at=ae&&Me>7?we-1:we;S[Me].codewords[at]=u[ee++]}if(ee!==u.length)throw new f;return S}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}class t4{constructor(u){this.bytes=u,this.byteOffset=0,this.bitOffset=0}getBitOffset(){return this.bitOffset}getByteOffset(){return this.byteOffset}readBits(u){if(u<1||u>32||u>this.available())throw new f(""+u);let m=0,g=this.bitOffset,b=this.byteOffset;const j=this.bytes;if(g>0){const S=8-g,D=u<S?u:S,L=S-D,U=255>>8-D<<L;m=(j[b]&U)>>L,u-=D,g+=D,g===8&&(g=0,b++)}if(u>0){for(;u>=8;)m=m<<8|j[b]&255,b++,u-=8;if(u>0){const S=8-u,D=255>>S<<S;m=m<<u|(j[b]&D)>>S,g+=u}}return this.bitOffset=g,this.byteOffset=b,m}available(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset}}var Ra;(function(J){J[J.PAD_ENCODE=0]="PAD_ENCODE",J[J.ASCII_ENCODE=1]="ASCII_ENCODE",J[J.C40_ENCODE=2]="C40_ENCODE",J[J.TEXT_ENCODE=3]="TEXT_ENCODE",J[J.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",J[J.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",J[J.BASE256_ENCODE=6]="BASE256_ENCODE"})(Ra||(Ra={}));class Cd{static decode(u){const m=new t4(u),g=new B,b=new B,j=new Array;let S=Ra.ASCII_ENCODE;do if(S===Ra.ASCII_ENCODE)S=this.decodeAsciiSegment(m,g,b);else{switch(S){case Ra.C40_ENCODE:this.decodeC40Segment(m,g);break;case Ra.TEXT_ENCODE:this.decodeTextSegment(m,g);break;case Ra.ANSIX12_ENCODE:this.decodeAnsiX12Segment(m,g);break;case Ra.EDIFACT_ENCODE:this.decodeEdifactSegment(m,g);break;case Ra.BASE256_ENCODE:this.decodeBase256Segment(m,g,j);break;default:throw new P}S=Ra.ASCII_ENCODE}while(S!==Ra.PAD_ENCODE&&m.available()>0);return b.length()>0&&g.append(b.toString()),new ie(u,g.toString(),j.length===0?null:j,null)}static decodeAsciiSegment(u,m,g){let b=!1;do{let j=u.readBits(8);if(j===0)throw new P;if(j<=128)return b&&(j+=128),m.append(String.fromCharCode(j-1)),Ra.ASCII_ENCODE;if(j===129)return Ra.PAD_ENCODE;if(j<=229){const S=j-130;S<10&&m.append("0"),m.append(""+S)}else switch(j){case 230:return Ra.C40_ENCODE;case 231:return Ra.BASE256_ENCODE;case 232:m.append("");break;case 233:case 234:break;case 235:b=!0;break;case 236:m.append("[)>05"),g.insert(0,"");break;case 237:m.append("[)>06"),g.insert(0,"");break;case 238:return Ra.ANSIX12_ENCODE;case 239:return Ra.TEXT_ENCODE;case 240:return Ra.EDIFACT_ENCODE;case 241:break;default:if(j!==254||u.available()!==0)throw new P;break}}while(u.available()>0);return Ra.ASCII_ENCODE}static decodeC40Segment(u,m){let g=!1;const b=[];let j=0;do{if(u.available()===8)return;const S=u.readBits(8);if(S===254)return;this.parseTwoBytes(S,u.readBits(8),b);for(let D=0;D<3;D++){const L=b[D];switch(j){case 0:if(L<3)j=L+1;else if(L<this.C40_BASIC_SET_CHARS.length){const U=this.C40_BASIC_SET_CHARS[L];g?(m.append(String.fromCharCode(U.charCodeAt(0)+128)),g=!1):m.append(U)}else throw new P;break;case 1:g?(m.append(String.fromCharCode(L+128)),g=!1):m.append(String.fromCharCode(L)),j=0;break;case 2:if(L<this.C40_SHIFT2_SET_CHARS.length){const U=this.C40_SHIFT2_SET_CHARS[L];g?(m.append(String.fromCharCode(U.charCodeAt(0)+128)),g=!1):m.append(U)}else switch(L){case 27:m.append("");break;case 30:g=!0;break;default:throw new P}j=0;break;case 3:g?(m.append(String.fromCharCode(L+224)),g=!1):m.append(String.fromCharCode(L+96)),j=0;break;default:throw new P}}}while(u.available()>0)}static decodeTextSegment(u,m){let g=!1,b=[],j=0;do{if(u.available()===8)return;const S=u.readBits(8);if(S===254)return;this.parseTwoBytes(S,u.readBits(8),b);for(let D=0;D<3;D++){const L=b[D];switch(j){case 0:if(L<3)j=L+1;else if(L<this.TEXT_BASIC_SET_CHARS.length){const U=this.TEXT_BASIC_SET_CHARS[L];g?(m.append(String.fromCharCode(U.charCodeAt(0)+128)),g=!1):m.append(U)}else throw new P;break;case 1:g?(m.append(String.fromCharCode(L+128)),g=!1):m.append(String.fromCharCode(L)),j=0;break;case 2:if(L<this.TEXT_SHIFT2_SET_CHARS.length){const U=this.TEXT_SHIFT2_SET_CHARS[L];g?(m.append(String.fromCharCode(U.charCodeAt(0)+128)),g=!1):m.append(U)}else switch(L){case 27:m.append("");break;case 30:g=!0;break;default:throw new P}j=0;break;case 3:if(L<this.TEXT_SHIFT3_SET_CHARS.length){const U=this.TEXT_SHIFT3_SET_CHARS[L];g?(m.append(String.fromCharCode(U.charCodeAt(0)+128)),g=!1):m.append(U),j=0}else throw new P;break;default:throw new P}}}while(u.available()>0)}static decodeAnsiX12Segment(u,m){const g=[];do{if(u.available()===8)return;const b=u.readBits(8);if(b===254)return;this.parseTwoBytes(b,u.readBits(8),g);for(let j=0;j<3;j++){const S=g[j];switch(S){case 0:m.append("\r");break;case 1:m.append("*");break;case 2:m.append(">");break;case 3:m.append(" ");break;default:if(S<14)m.append(String.fromCharCode(S+44));else if(S<40)m.append(String.fromCharCode(S+51));else throw new P;break}}}while(u.available()>0)}static parseTwoBytes(u,m,g){let b=(u<<8)+m-1,j=Math.floor(b/1600);g[0]=j,b-=j*1600,j=Math.floor(b/40),g[1]=j,g[2]=b-j*40}static decodeEdifactSegment(u,m){do{if(u.available()<=16)return;for(let g=0;g<4;g++){let b=u.readBits(6);if(b===31){const j=8-u.getBitOffset();j!==8&&u.readBits(j);return}b&32||(b|=64),m.append(String.fromCharCode(b))}}while(u.available()>0)}static decodeBase256Segment(u,m,g){let b=1+u.getByteOffset();const j=this.unrandomize255State(u.readBits(8),b++);let S;if(j===0?S=u.available()/8|0:j<250?S=j:S=250*(j-249)+this.unrandomize255State(u.readBits(8),b++),S<0)throw new P;const D=new Uint8Array(S);for(let L=0;L<S;L++){if(u.available()<8)throw new P;D[L]=this.unrandomize255State(u.readBits(8),b++)}g.push(D);try{m.append(W.decode(D,I.ISO88591))}catch(L){throw new Se("Platform does not support required encoding: "+L.message)}}static unrandomize255State(u,m){const g=149*m%255+1,b=u-g;return b>=0?b:b+256}}Cd.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],Cd.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],Cd.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],Cd.TEXT_SHIFT2_SET_CHARS=Cd.C40_SHIFT2_SET_CHARS,Cd.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""];class cJ{constructor(){this.rsDecoder=new je(re.DATA_MATRIX_FIELD_256)}decode(u){const m=new Jk(u),g=m.getVersion(),b=m.readCodewords(),j=e4.getDataBlocks(b,g);let S=0;for(let U of j)S+=U.getNumDataCodewords();const D=new Uint8Array(S),L=j.length;for(let U=0;U<L;U++){const Y=j[U],ee=Y.getCodewords(),ae=Y.getNumDataCodewords();this.correctErrors(ee,ae);for(let ue=0;ue<ae;ue++)D[ue*L+U]=ee[ue]}return Cd.decode(D)}correctErrors(u,m){const g=new Int32Array(u);try{this.rsDecoder.decode(g,u.length-m)}catch{throw new y}for(let b=0;b<m;b++)u[b]=g[b]}}class ha{constructor(u){this.image=u,this.rectangleDetector=new $e(this.image)}detect(){const u=this.rectangleDetector.detect();let m=this.detectSolid1(u);if(m=this.detectSolid2(m),m[3]=this.correctTopRight(m),!m[3])throw new F;m=this.shiftToModuleCenter(m);const g=m[0],b=m[1],j=m[2],S=m[3];let D=this.transitionsBetween(g,S)+1,L=this.transitionsBetween(j,S)+1;(D&1)===1&&(D+=1),(L&1)===1&&(L+=1),4*D<7*L&&4*L<7*D&&(D=L=Math.max(D,L));let U=ha.sampleGrid(this.image,g,b,j,S,D,L);return new ve(U,[g,b,j,S])}static shiftPoint(u,m,g){let b=(m.getX()-u.getX())/(g+1),j=(m.getY()-u.getY())/(g+1);return new me(u.getX()+b,u.getY()+j)}static moveAway(u,m,g){let b=u.getX(),j=u.getY();return b<m?b-=1:b+=1,j<g?j-=1:j+=1,new me(b,j)}detectSolid1(u){let m=u[0],g=u[1],b=u[3],j=u[2],S=this.transitionsBetween(m,g),D=this.transitionsBetween(g,b),L=this.transitionsBetween(b,j),U=this.transitionsBetween(j,m),Y=S,ee=[j,m,g,b];return Y>D&&(Y=D,ee[0]=m,ee[1]=g,ee[2]=b,ee[3]=j),Y>L&&(Y=L,ee[0]=g,ee[1]=b,ee[2]=j,ee[3]=m),Y>U&&(ee[0]=b,ee[1]=j,ee[2]=m,ee[3]=g),ee}detectSolid2(u){let m=u[0],g=u[1],b=u[2],j=u[3],S=this.transitionsBetween(m,j),D=ha.shiftPoint(g,b,(S+1)*4),L=ha.shiftPoint(b,g,(S+1)*4),U=this.transitionsBetween(D,m),Y=this.transitionsBetween(L,j);return U<Y?(u[0]=m,u[1]=g,u[2]=b,u[3]=j):(u[0]=g,u[1]=b,u[2]=j,u[3]=m),u}correctTopRight(u){let m=u[0],g=u[1],b=u[2],j=u[3],S=this.transitionsBetween(m,j),D=this.transitionsBetween(g,j),L=ha.shiftPoint(m,g,(D+1)*4),U=ha.shiftPoint(b,g,(S+1)*4);S=this.transitionsBetween(L,j),D=this.transitionsBetween(U,j);let Y=new me(j.getX()+(b.getX()-g.getX())/(S+1),j.getY()+(b.getY()-g.getY())/(S+1)),ee=new me(j.getX()+(m.getX()-g.getX())/(D+1),j.getY()+(m.getY()-g.getY())/(D+1));if(!this.isValid(Y))return this.isValid(ee)?ee:null;if(!this.isValid(ee))return Y;let ae=this.transitionsBetween(L,Y)+this.transitionsBetween(U,Y),ue=this.transitionsBetween(L,ee)+this.transitionsBetween(U,ee);return ae>ue?Y:ee}shiftToModuleCenter(u){let m=u[0],g=u[1],b=u[2],j=u[3],S=this.transitionsBetween(m,j)+1,D=this.transitionsBetween(b,j)+1,L=ha.shiftPoint(m,g,D*4),U=ha.shiftPoint(b,g,S*4);S=this.transitionsBetween(L,j)+1,D=this.transitionsBetween(U,j)+1,(S&1)===1&&(S+=1),(D&1)===1&&(D+=1);let Y=(m.getX()+g.getX()+b.getX()+j.getX())/4,ee=(m.getY()+g.getY()+b.getY()+j.getY())/4;m=ha.moveAway(m,Y,ee),g=ha.moveAway(g,Y,ee),b=ha.moveAway(b,Y,ee),j=ha.moveAway(j,Y,ee);let ae,ue;return L=ha.shiftPoint(m,g,D*4),L=ha.shiftPoint(L,j,S*4),ae=ha.shiftPoint(g,m,D*4),ae=ha.shiftPoint(ae,b,S*4),U=ha.shiftPoint(b,j,D*4),U=ha.shiftPoint(U,g,S*4),ue=ha.shiftPoint(j,b,D*4),ue=ha.shiftPoint(ue,m,S*4),[L,ae,U,ue]}isValid(u){return u.getX()>=0&&u.getX()<this.image.getWidth()&&u.getY()>0&&u.getY()<this.image.getHeight()}static sampleGrid(u,m,g,b,j,S,D){return yt.getInstance().sampleGrid(u,S,D,.5,.5,S-.5,.5,S-.5,D-.5,.5,D-.5,m.getX(),m.getY(),j.getX(),j.getY(),b.getX(),b.getY(),g.getX(),g.getY())}transitionsBetween(u,m){let g=Math.trunc(u.getX()),b=Math.trunc(u.getY()),j=Math.trunc(m.getX()),S=Math.trunc(m.getY()),D=Math.abs(S-b)>Math.abs(j-g);if(D){let we=g;g=b,b=we,we=j,j=S,S=we}let L=Math.abs(j-g),U=Math.abs(S-b),Y=-L/2,ee=b<S?1:-1,ae=g<j?1:-1,ue=0,be=this.image.get(D?b:g,D?g:b);for(let we=g,Ee=b;we!==j;we+=ae){let Me=this.image.get(D?Ee:we,D?we:Ee);if(Me!==be&&(ue++,be=Me),Y+=U,Y>0){if(Ee===S)break;Ee+=ee,Y-=L}}return ue}}class _d{constructor(){this.decoder=new cJ}decode(u,m=null){let g,b;if(m!=null&&m.has(A.PURE_BARCODE)){const U=_d.extractPureBits(u.getBlackMatrix());g=this.decoder.decode(U),b=_d.NO_POINTS}else{const U=new ha(u.getBlackMatrix()).detect();g=this.decoder.decode(U.getBits()),b=U.getPoints()}const j=g.getRawBytes(),S=new ne(g.getText(),j,8*j.length,b,xe.DATA_MATRIX,w.currentTimeMillis()),D=g.getByteSegments();D!=null&&S.putMetadata(oe.BYTE_SEGMENTS,D);const L=g.getECLevel();return L!=null&&S.putMetadata(oe.ERROR_CORRECTION_LEVEL,L),S}reset(){}static extractPureBits(u){const m=u.getTopLeftOnBit(),g=u.getBottomRightOnBit();if(m==null||g==null)throw new F;const b=this.moduleSize(m,u);let j=m[1];const S=g[1];let D=m[0];const U=(g[0]-D+1)/b,Y=(S-j+1)/b;if(U<=0||Y<=0)throw new F;const ee=b/2;j+=ee,D+=ee;const ae=new O(U,Y);for(let ue=0;ue<Y;ue++){const be=j+ue*b;for(let we=0;we<U;we++)u.get(D+we*b,be)&&ae.set(we,ue)}return ae}static moduleSize(u,m){const g=m.getWidth();let b=u[0];const j=u[1];for(;b<g&&m.get(b,j);)b++;if(b===g)throw new F;const S=b-u[0];if(S===0)throw new F;return S}}_d.NO_POINTS=[];class dJ extends he{constructor(u=500){super(new _d,u)}}var $h;(function(J){J[J.L=0]="L",J[J.M=1]="M",J[J.Q=2]="Q",J[J.H=3]="H"})($h||($h={}));class ws{constructor(u,m,g){this.value=u,this.stringValue=m,this.bits=g,ws.FOR_BITS.set(g,this),ws.FOR_VALUE.set(u,this)}getValue(){return this.value}getBits(){return this.bits}static fromString(u){switch(u){case"L":return ws.L;case"M":return ws.M;case"Q":return ws.Q;case"H":return ws.H;default:throw new h(u+"not available")}}toString(){return this.stringValue}equals(u){if(!(u instanceof ws))return!1;const m=u;return this.value===m.value}static forBits(u){if(u<0||u>=ws.FOR_BITS.size)throw new f;return ws.FOR_BITS.get(u)}}ws.FOR_BITS=new Map,ws.FOR_VALUE=new Map,ws.L=new ws($h.L,"L",1),ws.M=new ws($h.M,"M",0),ws.Q=new ws($h.Q,"Q",3),ws.H=new ws($h.H,"H",2);class Ln{constructor(u){this.errorCorrectionLevel=ws.forBits(u>>3&3),this.dataMask=u&7}static numBitsDiffering(u,m){return E.bitCount(u^m)}static decodeFormatInformation(u,m){const g=Ln.doDecodeFormatInformation(u,m);return g!==null?g:Ln.doDecodeFormatInformation(u^Ln.FORMAT_INFO_MASK_QR,m^Ln.FORMAT_INFO_MASK_QR)}static doDecodeFormatInformation(u,m){let g=Number.MAX_SAFE_INTEGER,b=0;for(const j of Ln.FORMAT_INFO_DECODE_LOOKUP){const S=j[0];if(S===u||S===m)return new Ln(j[1]);let D=Ln.numBitsDiffering(u,S);D<g&&(b=j[1],g=D),u!==m&&(D=Ln.numBitsDiffering(m,S),D<g&&(b=j[1],g=D))}return g<=3?new Ln(b):null}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getDataMask(){return this.dataMask}hashCode(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask}equals(u){if(!(u instanceof Ln))return!1;const m=u;return this.errorCorrectionLevel===m.errorCorrectionLevel&&this.dataMask===m.dataMask}}Ln.FORMAT_INFO_MASK_QR=21522,Ln.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])];class Te{constructor(u,...m){this.ecCodewordsPerBlock=u,this.ecBlocks=m}getECCodewordsPerBlock(){return this.ecCodewordsPerBlock}getNumBlocks(){let u=0;const m=this.ecBlocks;for(const g of m)u+=g.getCount();return u}getTotalECCodewords(){return this.ecCodewordsPerBlock*this.getNumBlocks()}getECBlocks(){return this.ecBlocks}}class de{constructor(u,m){this.count=u,this.dataCodewords=m}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class Ft{constructor(u,m,...g){this.versionNumber=u,this.alignmentPatternCenters=m,this.ecBlocks=g;let b=0;const j=g[0].getECCodewordsPerBlock(),S=g[0].getECBlocks();for(const D of S)b+=D.getCount()*(D.getDataCodewords()+j);this.totalCodewords=b}getVersionNumber(){return this.versionNumber}getAlignmentPatternCenters(){return this.alignmentPatternCenters}getTotalCodewords(){return this.totalCodewords}getDimensionForVersion(){return 17+4*this.versionNumber}getECBlocksForLevel(u){return this.ecBlocks[u.getValue()]}static getProvisionalVersionForDimension(u){if(u%4!==1)throw new P;try{return this.getVersionForNumber((u-17)/4)}catch{throw new P}}static getVersionForNumber(u){if(u<1||u>40)throw new f;return Ft.VERSIONS[u-1]}static decodeVersionInformation(u){let m=Number.MAX_SAFE_INTEGER,g=0;for(let b=0;b<Ft.VERSION_DECODE_INFO.length;b++){const j=Ft.VERSION_DECODE_INFO[b];if(j===u)return Ft.getVersionForNumber(b+7);const S=Ln.numBitsDiffering(u,j);S<m&&(g=b+7,m=S)}return m<=3?Ft.getVersionForNumber(g):null}buildFunctionPattern(){const u=this.getDimensionForVersion(),m=new O(u);m.setRegion(0,0,9,9),m.setRegion(u-8,0,8,9),m.setRegion(0,u-8,9,8);const g=this.alignmentPatternCenters.length;for(let b=0;b<g;b++){const j=this.alignmentPatternCenters[b]-2;for(let S=0;S<g;S++)b===0&&(S===0||S===g-1)||b===g-1&&S===0||m.setRegion(this.alignmentPatternCenters[S]-2,j,5,5)}return m.setRegion(6,9,1,u-17),m.setRegion(9,6,u-17,1),this.versionNumber>6&&(m.setRegion(u-11,0,3,6),m.setRegion(0,u-11,6,3)),m}toString(){return""+this.versionNumber}}Ft.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),Ft.VERSIONS=[new Ft(1,new Int32Array(0),new Te(7,new de(1,19)),new Te(10,new de(1,16)),new Te(13,new de(1,13)),new Te(17,new de(1,9))),new Ft(2,Int32Array.from([6,18]),new Te(10,new de(1,34)),new Te(16,new de(1,28)),new Te(22,new de(1,22)),new Te(28,new de(1,16))),new Ft(3,Int32Array.from([6,22]),new Te(15,new de(1,55)),new Te(26,new de(1,44)),new Te(18,new de(2,17)),new Te(22,new de(2,13))),new Ft(4,Int32Array.from([6,26]),new Te(20,new de(1,80)),new Te(18,new de(2,32)),new Te(26,new de(2,24)),new Te(16,new de(4,9))),new Ft(5,Int32Array.from([6,30]),new Te(26,new de(1,108)),new Te(24,new de(2,43)),new Te(18,new de(2,15),new de(2,16)),new Te(22,new de(2,11),new de(2,12))),new Ft(6,Int32Array.from([6,34]),new Te(18,new de(2,68)),new Te(16,new de(4,27)),new Te(24,new de(4,19)),new Te(28,new de(4,15))),new Ft(7,Int32Array.from([6,22,38]),new Te(20,new de(2,78)),new Te(18,new de(4,31)),new Te(18,new de(2,14),new de(4,15)),new Te(26,new de(4,13),new de(1,14))),new Ft(8,Int32Array.from([6,24,42]),new Te(24,new de(2,97)),new Te(22,new de(2,38),new de(2,39)),new Te(22,new de(4,18),new de(2,19)),new Te(26,new de(4,14),new de(2,15))),new Ft(9,Int32Array.from([6,26,46]),new Te(30,new de(2,116)),new Te(22,new de(3,36),new de(2,37)),new Te(20,new de(4,16),new de(4,17)),new Te(24,new de(4,12),new de(4,13))),new Ft(10,Int32Array.from([6,28,50]),new Te(18,new de(2,68),new de(2,69)),new Te(26,new de(4,43),new de(1,44)),new Te(24,new de(6,19),new de(2,20)),new Te(28,new de(6,15),new de(2,16))),new Ft(11,Int32Array.from([6,30,54]),new Te(20,new de(4,81)),new Te(30,new de(1,50),new de(4,51)),new Te(28,new de(4,22),new de(4,23)),new Te(24,new de(3,12),new de(8,13))),new Ft(12,Int32Array.from([6,32,58]),new Te(24,new de(2,92),new de(2,93)),new Te(22,new de(6,36),new de(2,37)),new Te(26,new de(4,20),new de(6,21)),new Te(28,new de(7,14),new de(4,15))),new Ft(13,Int32Array.from([6,34,62]),new Te(26,new de(4,107)),new Te(22,new de(8,37),new de(1,38)),new Te(24,new de(8,20),new de(4,21)),new Te(22,new de(12,11),new de(4,12))),new Ft(14,Int32Array.from([6,26,46,66]),new Te(30,new de(3,115),new de(1,116)),new Te(24,new de(4,40),new de(5,41)),new Te(20,new de(11,16),new de(5,17)),new Te(24,new de(11,12),new de(5,13))),new Ft(15,Int32Array.from([6,26,48,70]),new Te(22,new de(5,87),new de(1,88)),new Te(24,new de(5,41),new de(5,42)),new Te(30,new de(5,24),new de(7,25)),new Te(24,new de(11,12),new de(7,13))),new Ft(16,Int32Array.from([6,26,50,74]),new Te(24,new de(5,98),new de(1,99)),new Te(28,new de(7,45),new de(3,46)),new Te(24,new de(15,19),new de(2,20)),new Te(30,new de(3,15),new de(13,16))),new Ft(17,Int32Array.from([6,30,54,78]),new Te(28,new de(1,107),new de(5,108)),new Te(28,new de(10,46),new de(1,47)),new Te(28,new de(1,22),new de(15,23)),new Te(28,new de(2,14),new de(17,15))),new Ft(18,Int32Array.from([6,30,56,82]),new Te(30,new de(5,120),new de(1,121)),new Te(26,new de(9,43),new de(4,44)),new Te(28,new de(17,22),new de(1,23)),new Te(28,new de(2,14),new de(19,15))),new Ft(19,Int32Array.from([6,30,58,86]),new Te(28,new de(3,113),new de(4,114)),new Te(26,new de(3,44),new de(11,45)),new Te(26,new de(17,21),new de(4,22)),new Te(26,new de(9,13),new de(16,14))),new Ft(20,Int32Array.from([6,34,62,90]),new Te(28,new de(3,107),new de(5,108)),new Te(26,new de(3,41),new de(13,42)),new Te(30,new de(15,24),new de(5,25)),new Te(28,new de(15,15),new de(10,16))),new Ft(21,Int32Array.from([6,28,50,72,94]),new Te(28,new de(4,116),new de(4,117)),new Te(26,new de(17,42)),new Te(28,new de(17,22),new de(6,23)),new Te(30,new de(19,16),new de(6,17))),new Ft(22,Int32Array.from([6,26,50,74,98]),new Te(28,new de(2,111),new de(7,112)),new Te(28,new de(17,46)),new Te(30,new de(7,24),new de(16,25)),new Te(24,new de(34,13))),new Ft(23,Int32Array.from([6,30,54,78,102]),new Te(30,new de(4,121),new de(5,122)),new Te(28,new de(4,47),new de(14,48)),new Te(30,new de(11,24),new de(14,25)),new Te(30,new de(16,15),new de(14,16))),new Ft(24,Int32Array.from([6,28,54,80,106]),new Te(30,new de(6,117),new de(4,118)),new Te(28,new de(6,45),new de(14,46)),new Te(30,new de(11,24),new de(16,25)),new Te(30,new de(30,16),new de(2,17))),new Ft(25,Int32Array.from([6,32,58,84,110]),new Te(26,new de(8,106),new de(4,107)),new Te(28,new de(8,47),new de(13,48)),new Te(30,new de(7,24),new de(22,25)),new Te(30,new de(22,15),new de(13,16))),new Ft(26,Int32Array.from([6,30,58,86,114]),new Te(28,new de(10,114),new de(2,115)),new Te(28,new de(19,46),new de(4,47)),new Te(28,new de(28,22),new de(6,23)),new Te(30,new de(33,16),new de(4,17))),new Ft(27,Int32Array.from([6,34,62,90,118]),new Te(30,new de(8,122),new de(4,123)),new Te(28,new de(22,45),new de(3,46)),new Te(30,new de(8,23),new de(26,24)),new Te(30,new de(12,15),new de(28,16))),new Ft(28,Int32Array.from([6,26,50,74,98,122]),new Te(30,new de(3,117),new de(10,118)),new Te(28,new de(3,45),new de(23,46)),new Te(30,new de(4,24),new de(31,25)),new Te(30,new de(11,15),new de(31,16))),new Ft(29,Int32Array.from([6,30,54,78,102,126]),new Te(30,new de(7,116),new de(7,117)),new Te(28,new de(21,45),new de(7,46)),new Te(30,new de(1,23),new de(37,24)),new Te(30,new de(19,15),new de(26,16))),new Ft(30,Int32Array.from([6,26,52,78,104,130]),new Te(30,new de(5,115),new de(10,116)),new Te(28,new de(19,47),new de(10,48)),new Te(30,new de(15,24),new de(25,25)),new Te(30,new de(23,15),new de(25,16))),new Ft(31,Int32Array.from([6,30,56,82,108,134]),new Te(30,new de(13,115),new de(3,116)),new Te(28,new de(2,46),new de(29,47)),new Te(30,new de(42,24),new de(1,25)),new Te(30,new de(23,15),new de(28,16))),new Ft(32,Int32Array.from([6,34,60,86,112,138]),new Te(30,new de(17,115)),new Te(28,new de(10,46),new de(23,47)),new Te(30,new de(10,24),new de(35,25)),new Te(30,new de(19,15),new de(35,16))),new Ft(33,Int32Array.from([6,30,58,86,114,142]),new Te(30,new de(17,115),new de(1,116)),new Te(28,new de(14,46),new de(21,47)),new Te(30,new de(29,24),new de(19,25)),new Te(30,new de(11,15),new de(46,16))),new Ft(34,Int32Array.from([6,34,62,90,118,146]),new Te(30,new de(13,115),new de(6,116)),new Te(28,new de(14,46),new de(23,47)),new Te(30,new de(44,24),new de(7,25)),new Te(30,new de(59,16),new de(1,17))),new Ft(35,Int32Array.from([6,30,54,78,102,126,150]),new Te(30,new de(12,121),new de(7,122)),new Te(28,new de(12,47),new de(26,48)),new Te(30,new de(39,24),new de(14,25)),new Te(30,new de(22,15),new de(41,16))),new Ft(36,Int32Array.from([6,24,50,76,102,128,154]),new Te(30,new de(6,121),new de(14,122)),new Te(28,new de(6,47),new de(34,48)),new Te(30,new de(46,24),new de(10,25)),new Te(30,new de(2,15),new de(64,16))),new Ft(37,Int32Array.from([6,28,54,80,106,132,158]),new Te(30,new de(17,122),new de(4,123)),new Te(28,new de(29,46),new de(14,47)),new Te(30,new de(49,24),new de(10,25)),new Te(30,new de(24,15),new de(46,16))),new Ft(38,Int32Array.from([6,32,58,84,110,136,162]),new Te(30,new de(4,122),new de(18,123)),new Te(28,new de(13,46),new de(32,47)),new Te(30,new de(48,24),new de(14,25)),new Te(30,new de(42,15),new de(32,16))),new Ft(39,Int32Array.from([6,26,54,82,110,138,166]),new Te(30,new de(20,117),new de(4,118)),new Te(28,new de(40,47),new de(7,48)),new Te(30,new de(43,24),new de(22,25)),new Te(30,new de(10,15),new de(67,16))),new Ft(40,Int32Array.from([6,30,58,86,114,142,170]),new Te(30,new de(19,118),new de(6,119)),new Te(28,new de(18,47),new de(31,48)),new Te(30,new de(34,24),new de(34,25)),new Te(30,new de(20,15),new de(61,16)))];var Qa;(function(J){J[J.DATA_MASK_000=0]="DATA_MASK_000",J[J.DATA_MASK_001=1]="DATA_MASK_001",J[J.DATA_MASK_010=2]="DATA_MASK_010",J[J.DATA_MASK_011=3]="DATA_MASK_011",J[J.DATA_MASK_100=4]="DATA_MASK_100",J[J.DATA_MASK_101=5]="DATA_MASK_101",J[J.DATA_MASK_110=6]="DATA_MASK_110",J[J.DATA_MASK_111=7]="DATA_MASK_111"})(Qa||(Qa={}));class vo{constructor(u,m){this.value=u,this.isMasked=m}unmaskBitMatrix(u,m){for(let g=0;g<m;g++)for(let b=0;b<m;b++)this.isMasked(g,b)&&u.flip(b,g)}}vo.values=new Map([[Qa.DATA_MASK_000,new vo(Qa.DATA_MASK_000,(J,u)=>(J+u&1)===0)],[Qa.DATA_MASK_001,new vo(Qa.DATA_MASK_001,(J,u)=>(J&1)===0)],[Qa.DATA_MASK_010,new vo(Qa.DATA_MASK_010,(J,u)=>u%3===0)],[Qa.DATA_MASK_011,new vo(Qa.DATA_MASK_011,(J,u)=>(J+u)%3===0)],[Qa.DATA_MASK_100,new vo(Qa.DATA_MASK_100,(J,u)=>(Math.floor(J/2)+Math.floor(u/3)&1)===0)],[Qa.DATA_MASK_101,new vo(Qa.DATA_MASK_101,(J,u)=>J*u%6===0)],[Qa.DATA_MASK_110,new vo(Qa.DATA_MASK_110,(J,u)=>J*u%6<3)],[Qa.DATA_MASK_111,new vo(Qa.DATA_MASK_111,(J,u)=>(J+u+J*u%3&1)===0)]]);class uJ{constructor(u){const m=u.getHeight();if(m<21||(m&3)!==1)throw new P;this.bitMatrix=u}readFormatInformation(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;let u=0;for(let j=0;j<6;j++)u=this.copyBit(j,8,u);u=this.copyBit(7,8,u),u=this.copyBit(8,8,u),u=this.copyBit(8,7,u);for(let j=5;j>=0;j--)u=this.copyBit(8,j,u);const m=this.bitMatrix.getHeight();let g=0;const b=m-7;for(let j=m-1;j>=b;j--)g=this.copyBit(8,j,g);for(let j=m-8;j<m;j++)g=this.copyBit(j,8,g);if(this.parsedFormatInfo=Ln.decodeFormatInformation(u,g),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new P}readVersion(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;const u=this.bitMatrix.getHeight(),m=Math.floor((u-17)/4);if(m<=6)return Ft.getVersionForNumber(m);let g=0;const b=u-11;for(let S=5;S>=0;S--)for(let D=u-9;D>=b;D--)g=this.copyBit(D,S,g);let j=Ft.decodeVersionInformation(g);if(j!==null&&j.getDimensionForVersion()===u)return this.parsedVersion=j,j;g=0;for(let S=5;S>=0;S--)for(let D=u-9;D>=b;D--)g=this.copyBit(S,D,g);if(j=Ft.decodeVersionInformation(g),j!==null&&j.getDimensionForVersion()===u)return this.parsedVersion=j,j;throw new P}copyBit(u,m,g){return(this.isMirror?this.bitMatrix.get(m,u):this.bitMatrix.get(u,m))?g<<1|1:g<<1}readCodewords(){const u=this.readFormatInformation(),m=this.readVersion(),g=vo.values.get(u.getDataMask()),b=this.bitMatrix.getHeight();g.unmaskBitMatrix(this.bitMatrix,b);const j=m.buildFunctionPattern();let S=!0;const D=new Uint8Array(m.getTotalCodewords());let L=0,U=0,Y=0;for(let ee=b-1;ee>0;ee-=2){ee===6&&ee--;for(let ae=0;ae<b;ae++){const ue=S?b-1-ae:ae;for(let be=0;be<2;be++)j.get(ee-be,ue)||(Y++,U<<=1,this.bitMatrix.get(ee-be,ue)&&(U|=1),Y===8&&(D[L++]=U,Y=0,U=0))}S=!S}if(L!==m.getTotalCodewords())throw new P;return D}remask(){if(this.parsedFormatInfo===null)return;const u=vo.values[this.parsedFormatInfo.getDataMask()],m=this.bitMatrix.getHeight();u.unmaskBitMatrix(this.bitMatrix,m)}setMirror(u){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=u}mirror(){const u=this.bitMatrix;for(let m=0,g=u.getWidth();m<g;m++)for(let b=m+1,j=u.getHeight();b<j;b++)u.get(m,b)!==u.get(b,m)&&(u.flip(b,m),u.flip(m,b))}}class r4{constructor(u,m){this.numDataCodewords=u,this.codewords=m}static getDataBlocks(u,m,g){if(u.length!==m.getTotalCodewords())throw new f;const b=m.getECBlocksForLevel(g);let j=0;const S=b.getECBlocks();for(const be of S)j+=be.getCount();const D=new Array(j);let L=0;for(const be of S)for(let we=0;we<be.getCount();we++){const Ee=be.getDataCodewords(),Me=b.getECCodewordsPerBlock()+Ee;D[L++]=new r4(Ee,new Uint8Array(Me))}const U=D[0].codewords.length;let Y=D.length-1;for(;Y>=0&&D[Y].codewords.length!==U;)Y--;Y++;const ee=U-b.getECCodewordsPerBlock();let ae=0;for(let be=0;be<ee;be++)for(let we=0;we<L;we++)D[we].codewords[be]=u[ae++];for(let be=Y;be<L;be++)D[be].codewords[ee]=u[ae++];const ue=D[0].codewords.length;for(let be=ee;be<ue;be++)for(let we=0;we<L;we++){const Ee=we<Y?be:be+1;D[we].codewords[Ee]=u[ae++]}return D}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}var wo;(function(J){J[J.TERMINATOR=0]="TERMINATOR",J[J.NUMERIC=1]="NUMERIC",J[J.ALPHANUMERIC=2]="ALPHANUMERIC",J[J.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",J[J.BYTE=4]="BYTE",J[J.ECI=5]="ECI",J[J.KANJI=6]="KANJI",J[J.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",J[J.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",J[J.HANZI=9]="HANZI"})(wo||(wo={}));class $t{constructor(u,m,g,b){this.value=u,this.stringValue=m,this.characterCountBitsForVersions=g,this.bits=b,$t.FOR_BITS.set(b,this),$t.FOR_VALUE.set(u,this)}static forBits(u){const m=$t.FOR_BITS.get(u);if(m===void 0)throw new f;return m}getCharacterCountBits(u){const m=u.getVersionNumber();let g;return m<=9?g=0:m<=26?g=1:g=2,this.characterCountBitsForVersions[g]}getValue(){return this.value}getBits(){return this.bits}equals(u){if(!(u instanceof $t))return!1;const m=u;return this.value===m.value}toString(){return this.stringValue}}$t.FOR_BITS=new Map,$t.FOR_VALUE=new Map,$t.TERMINATOR=new $t(wo.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),$t.NUMERIC=new $t(wo.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),$t.ALPHANUMERIC=new $t(wo.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),$t.STRUCTURED_APPEND=new $t(wo.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),$t.BYTE=new $t(wo.BYTE,"BYTE",Int32Array.from([8,16,16]),4),$t.ECI=new $t(wo.ECI,"ECI",Int32Array.from([0,0,0]),7),$t.KANJI=new $t(wo.KANJI,"KANJI",Int32Array.from([8,10,12]),8),$t.FNC1_FIRST_POSITION=new $t(wo.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),$t.FNC1_SECOND_POSITION=new $t(wo.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),$t.HANZI=new $t(wo.HANZI,"HANZI",Int32Array.from([8,10,12]),13);class zs{static decode(u,m,g,b){const j=new t4(u);let S=new B;const D=new Array;let L=-1,U=-1;try{let Y=null,ee=!1,ae;do{if(j.available()<4)ae=$t.TERMINATOR;else{const ue=j.readBits(4);ae=$t.forBits(ue)}switch(ae){case $t.TERMINATOR:break;case $t.FNC1_FIRST_POSITION:case $t.FNC1_SECOND_POSITION:ee=!0;break;case $t.STRUCTURED_APPEND:if(j.available()<16)throw new P;L=j.readBits(8),U=j.readBits(8);break;case $t.ECI:const ue=zs.parseECIValue(j);if(Y=R.getCharacterSetECIByValue(ue),Y===null)throw new P;break;case $t.HANZI:const be=j.readBits(4),we=j.readBits(ae.getCharacterCountBits(m));be===zs.GB2312_SUBSET&&zs.decodeHanziSegment(j,S,we);break;default:const Ee=j.readBits(ae.getCharacterCountBits(m));switch(ae){case $t.NUMERIC:zs.decodeNumericSegment(j,S,Ee);break;case $t.ALPHANUMERIC:zs.decodeAlphanumericSegment(j,S,Ee,ee);break;case $t.BYTE:zs.decodeByteSegment(j,S,Ee,Y,D,b);break;case $t.KANJI:zs.decodeKanjiSegment(j,S,Ee);break;default:throw new P}break}}while(ae!==$t.TERMINATOR)}catch{throw new P}return new ie(u,S.toString(),D.length===0?null:D,g===null?null:g.toString(),L,U)}static decodeHanziSegment(u,m,g){if(g*13>u.available())throw new P;const b=new Uint8Array(2*g);let j=0;for(;g>0;){const S=u.readBits(13);let D=S/96<<8&4294967295|S%96;D<959?D+=41377:D+=42657,b[j]=D>>8&255,b[j+1]=D&255,j+=2,g--}try{m.append(W.decode(b,I.GB2312))}catch(S){throw new P(S)}}static decodeKanjiSegment(u,m,g){if(g*13>u.available())throw new P;const b=new Uint8Array(2*g);let j=0;for(;g>0;){const S=u.readBits(13);let D=S/192<<8&4294967295|S%192;D<7936?D+=33088:D+=49472,b[j]=D>>8,b[j+1]=D,j+=2,g--}try{m.append(W.decode(b,I.SHIFT_JIS))}catch(S){throw new P(S)}}static decodeByteSegment(u,m,g,b,j,S){if(8*g>u.available())throw new P;const D=new Uint8Array(g);for(let U=0;U<g;U++)D[U]=u.readBits(8);let L;b===null?L=I.guessEncoding(D,S):L=b.getName();try{m.append(W.decode(D,L))}catch(U){throw new P(U)}j.push(D)}static toAlphaNumericChar(u){if(u>=zs.ALPHANUMERIC_CHARS.length)throw new P;return zs.ALPHANUMERIC_CHARS[u]}static decodeAlphanumericSegment(u,m,g,b){const j=m.length();for(;g>1;){if(u.available()<11)throw new P;const S=u.readBits(11);m.append(zs.toAlphaNumericChar(Math.floor(S/45))),m.append(zs.toAlphaNumericChar(S%45)),g-=2}if(g===1){if(u.available()<6)throw new P;m.append(zs.toAlphaNumericChar(u.readBits(6)))}if(b)for(let S=j;S<m.length();S++)m.charAt(S)==="%"&&(S<m.length()-1&&m.charAt(S+1)==="%"?m.deleteCharAt(S+1):m.setCharAt(S,""))}static decodeNumericSegment(u,m,g){for(;g>=3;){if(u.available()<10)throw new P;const b=u.readBits(10);if(b>=1e3)throw new P;m.append(zs.toAlphaNumericChar(Math.floor(b/100))),m.append(zs.toAlphaNumericChar(Math.floor(b/10)%10)),m.append(zs.toAlphaNumericChar(b%10)),g-=3}if(g===2){if(u.available()<7)throw new P;const b=u.readBits(7);if(b>=100)throw new P;m.append(zs.toAlphaNumericChar(Math.floor(b/10))),m.append(zs.toAlphaNumericChar(b%10))}else if(g===1){if(u.available()<4)throw new P;const b=u.readBits(4);if(b>=10)throw new P;m.append(zs.toAlphaNumericChar(b))}}static parseECIValue(u){const m=u.readBits(8);if(!(m&128))return m&127;if((m&192)===128){const g=u.readBits(8);return(m&63)<<8&4294967295|g}if((m&224)===192){const g=u.readBits(16);return(m&31)<<16&4294967295|g}throw new P}}zs.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",zs.GB2312_SUBSET=1;class YT{constructor(u){this.mirrored=u}isMirrored(){return this.mirrored}applyMirroredCorrection(u){if(!this.mirrored||u===null||u.length<3)return;const m=u[0];u[0]=u[2],u[2]=m}}class hJ{constructor(){this.rsDecoder=new je(re.QR_CODE_FIELD_256)}decodeBooleanArray(u,m){return this.decodeBitMatrix(O.parseFromBooleanArray(u),m)}decodeBitMatrix(u,m){const g=new uJ(u);let b=null;try{return this.decodeBitMatrixParser(g,m)}catch(j){b=j}try{g.remask(),g.setMirror(!0),g.readVersion(),g.readFormatInformation(),g.mirror();const j=this.decodeBitMatrixParser(g,m);return j.setOther(new YT(!0)),j}catch(j){throw b!==null?b:j}}decodeBitMatrixParser(u,m){const g=u.readVersion(),b=u.readFormatInformation().getErrorCorrectionLevel(),j=u.readCodewords(),S=r4.getDataBlocks(j,g,b);let D=0;for(const Y of S)D+=Y.getNumDataCodewords();const L=new Uint8Array(D);let U=0;for(const Y of S){const ee=Y.getCodewords(),ae=Y.getNumDataCodewords();this.correctErrors(ee,ae);for(let ue=0;ue<ae;ue++)L[U++]=ee[ue]}return zs.decode(L,g,b,m)}correctErrors(u,m){const g=new Int32Array(u);try{this.rsDecoder.decode(g,u.length-m)}catch{throw new y}for(let b=0;b<m;b++)u[b]=g[b]}}class s4 extends me{constructor(u,m,g){super(u,m),this.estimatedModuleSize=g}aboutEquals(u,m,g){if(Math.abs(m-this.getY())<=u&&Math.abs(g-this.getX())<=u){const b=Math.abs(u-this.estimatedModuleSize);return b<=1||b<=this.estimatedModuleSize}return!1}combineEstimate(u,m,g){const b=(this.getX()+m)/2,j=(this.getY()+u)/2,S=(this.estimatedModuleSize+g)/2;return new s4(b,j,S)}}class Lb{constructor(u,m,g,b,j,S,D){this.image=u,this.startX=m,this.startY=g,this.width=b,this.height=j,this.moduleSize=S,this.resultPointCallback=D,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}find(){const u=this.startX,m=this.height,g=this.width,b=u+g,j=this.startY+m/2,S=new Int32Array(3),D=this.image;for(let L=0;L<m;L++){const U=j+(L&1?-Math.floor((L+1)/2):Math.floor((L+1)/2));S[0]=0,S[1]=0,S[2]=0;let Y=u;for(;Y<b&&!D.get(Y,U);)Y++;let ee=0;for(;Y<b;){if(D.get(Y,U))if(ee===1)S[1]++;else if(ee===2){if(this.foundPatternCross(S)){const ae=this.handlePossibleCenter(S,U,Y);if(ae!==null)return ae}S[0]=S[2],S[1]=1,S[2]=0,ee=1}else S[++ee]++;else ee===1&&ee++,S[ee]++;Y++}if(this.foundPatternCross(S)){const ae=this.handlePossibleCenter(S,U,b);if(ae!==null)return ae}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new F}static centerFromEnd(u,m){return m-u[2]-u[1]/2}foundPatternCross(u){const m=this.moduleSize,g=m/2;for(let b=0;b<3;b++)if(Math.abs(m-u[b])>=g)return!1;return!0}crossCheckVertical(u,m,g,b){const j=this.image,S=j.getHeight(),D=this.crossCheckStateCount;D[0]=0,D[1]=0,D[2]=0;let L=u;for(;L>=0&&j.get(m,L)&&D[1]<=g;)D[1]++,L--;if(L<0||D[1]>g)return NaN;for(;L>=0&&!j.get(m,L)&&D[0]<=g;)D[0]++,L--;if(D[0]>g)return NaN;for(L=u+1;L<S&&j.get(m,L)&&D[1]<=g;)D[1]++,L++;if(L===S||D[1]>g)return NaN;for(;L<S&&!j.get(m,L)&&D[2]<=g;)D[2]++,L++;if(D[2]>g)return NaN;const U=D[0]+D[1]+D[2];return 5*Math.abs(U-b)>=2*b?NaN:this.foundPatternCross(D)?Lb.centerFromEnd(D,L):NaN}handlePossibleCenter(u,m,g){const b=u[0]+u[1]+u[2],j=Lb.centerFromEnd(u,g),S=this.crossCheckVertical(m,j,2*u[1],b);if(!isNaN(S)){const D=(u[0]+u[1]+u[2])/3;for(const U of this.possibleCenters)if(U.aboutEquals(D,S,j))return U.combineEstimate(S,j,D);const L=new s4(j,S,D);this.possibleCenters.push(L),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(L)}return null}}class a4 extends me{constructor(u,m,g,b){super(u,m),this.estimatedModuleSize=g,this.count=b,b===void 0&&(this.count=1)}getEstimatedModuleSize(){return this.estimatedModuleSize}getCount(){return this.count}aboutEquals(u,m,g){if(Math.abs(m-this.getY())<=u&&Math.abs(g-this.getX())<=u){const b=Math.abs(u-this.estimatedModuleSize);return b<=1||b<=this.estimatedModuleSize}return!1}combineEstimate(u,m,g){const b=this.count+1,j=(this.count*this.getX()+m)/b,S=(this.count*this.getY()+u)/b,D=(this.count*this.estimatedModuleSize+g)/b;return new a4(j,S,D,b)}}class mJ{constructor(u){this.bottomLeft=u[0],this.topLeft=u[1],this.topRight=u[2]}getBottomLeft(){return this.bottomLeft}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}}class Za{constructor(u,m){this.image=u,this.resultPointCallback=m,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=m}getImage(){return this.image}getPossibleCenters(){return this.possibleCenters}find(u){const m=u!=null&&u.get(A.TRY_HARDER)!==void 0,g=u!=null&&u.get(A.PURE_BARCODE)!==void 0,b=this.image,j=b.getHeight(),S=b.getWidth();let D=Math.floor(3*j/(4*Za.MAX_MODULES));(D<Za.MIN_SKIP||m)&&(D=Za.MIN_SKIP);let L=!1;const U=new Int32Array(5);for(let ee=D-1;ee<j&&!L;ee+=D){U[0]=0,U[1]=0,U[2]=0,U[3]=0,U[4]=0;let ae=0;for(let ue=0;ue<S;ue++)if(b.get(ue,ee))(ae&1)===1&&ae++,U[ae]++;else if(ae&1)U[ae]++;else if(ae===4)if(Za.foundPatternCross(U)){if(this.handlePossibleCenter(U,ee,ue,g)===!0)if(D=2,this.hasSkipped===!0)L=this.haveMultiplyConfirmedCenters();else{const we=this.findRowSkip();we>U[2]&&(ee+=we-U[2]-D,ue=S-1)}else{U[0]=U[2],U[1]=U[3],U[2]=U[4],U[3]=1,U[4]=0,ae=3;continue}ae=0,U[0]=0,U[1]=0,U[2]=0,U[3]=0,U[4]=0}else U[0]=U[2],U[1]=U[3],U[2]=U[4],U[3]=1,U[4]=0,ae=3;else U[++ae]++;Za.foundPatternCross(U)&&this.handlePossibleCenter(U,ee,S,g)===!0&&(D=U[0],this.hasSkipped&&(L=this.haveMultiplyConfirmedCenters()))}const Y=this.selectBestPatterns();return me.orderBestPatterns(Y),new mJ(Y)}static centerFromEnd(u,m){return m-u[4]-u[3]-u[2]/2}static foundPatternCross(u){let m=0;for(let j=0;j<5;j++){const S=u[j];if(S===0)return!1;m+=S}if(m<7)return!1;const g=m/7,b=g/2;return Math.abs(g-u[0])<b&&Math.abs(g-u[1])<b&&Math.abs(3*g-u[2])<3*b&&Math.abs(g-u[3])<b&&Math.abs(g-u[4])<b}getCrossCheckStateCount(){const u=this.crossCheckStateCount;return u[0]=0,u[1]=0,u[2]=0,u[3]=0,u[4]=0,u}crossCheckDiagonal(u,m,g,b){const j=this.getCrossCheckStateCount();let S=0;const D=this.image;for(;u>=S&&m>=S&&D.get(m-S,u-S);)j[2]++,S++;if(u<S||m<S)return!1;for(;u>=S&&m>=S&&!D.get(m-S,u-S)&&j[1]<=g;)j[1]++,S++;if(u<S||m<S||j[1]>g)return!1;for(;u>=S&&m>=S&&D.get(m-S,u-S)&&j[0]<=g;)j[0]++,S++;if(j[0]>g)return!1;const L=D.getHeight(),U=D.getWidth();for(S=1;u+S<L&&m+S<U&&D.get(m+S,u+S);)j[2]++,S++;if(u+S>=L||m+S>=U)return!1;for(;u+S<L&&m+S<U&&!D.get(m+S,u+S)&&j[3]<g;)j[3]++,S++;if(u+S>=L||m+S>=U||j[3]>=g)return!1;for(;u+S<L&&m+S<U&&D.get(m+S,u+S)&&j[4]<g;)j[4]++,S++;if(j[4]>=g)return!1;const Y=j[0]+j[1]+j[2]+j[3]+j[4];return Math.abs(Y-b)<2*b&&Za.foundPatternCross(j)}crossCheckVertical(u,m,g,b){const j=this.image,S=j.getHeight(),D=this.getCrossCheckStateCount();let L=u;for(;L>=0&&j.get(m,L);)D[2]++,L--;if(L<0)return NaN;for(;L>=0&&!j.get(m,L)&&D[1]<=g;)D[1]++,L--;if(L<0||D[1]>g)return NaN;for(;L>=0&&j.get(m,L)&&D[0]<=g;)D[0]++,L--;if(D[0]>g)return NaN;for(L=u+1;L<S&&j.get(m,L);)D[2]++,L++;if(L===S)return NaN;for(;L<S&&!j.get(m,L)&&D[3]<g;)D[3]++,L++;if(L===S||D[3]>=g)return NaN;for(;L<S&&j.get(m,L)&&D[4]<g;)D[4]++,L++;if(D[4]>=g)return NaN;const U=D[0]+D[1]+D[2]+D[3]+D[4];return 5*Math.abs(U-b)>=2*b?NaN:Za.foundPatternCross(D)?Za.centerFromEnd(D,L):NaN}crossCheckHorizontal(u,m,g,b){const j=this.image,S=j.getWidth(),D=this.getCrossCheckStateCount();let L=u;for(;L>=0&&j.get(L,m);)D[2]++,L--;if(L<0)return NaN;for(;L>=0&&!j.get(L,m)&&D[1]<=g;)D[1]++,L--;if(L<0||D[1]>g)return NaN;for(;L>=0&&j.get(L,m)&&D[0]<=g;)D[0]++,L--;if(D[0]>g)return NaN;for(L=u+1;L<S&&j.get(L,m);)D[2]++,L++;if(L===S)return NaN;for(;L<S&&!j.get(L,m)&&D[3]<g;)D[3]++,L++;if(L===S||D[3]>=g)return NaN;for(;L<S&&j.get(L,m)&&D[4]<g;)D[4]++,L++;if(D[4]>=g)return NaN;const U=D[0]+D[1]+D[2]+D[3]+D[4];return 5*Math.abs(U-b)>=b?NaN:Za.foundPatternCross(D)?Za.centerFromEnd(D,L):NaN}handlePossibleCenter(u,m,g,b){const j=u[0]+u[1]+u[2]+u[3]+u[4];let S=Za.centerFromEnd(u,g),D=this.crossCheckVertical(m,Math.floor(S),u[2],j);if(!isNaN(D)&&(S=this.crossCheckHorizontal(Math.floor(S),Math.floor(D),u[2],j),!isNaN(S)&&(!b||this.crossCheckDiagonal(Math.floor(D),Math.floor(S),u[2],j)))){const L=j/7;let U=!1;const Y=this.possibleCenters;for(let ee=0,ae=Y.length;ee<ae;ee++){const ue=Y[ee];if(ue.aboutEquals(L,D,S)){Y[ee]=ue.combineEstimate(D,S,L),U=!0;break}}if(!U){const ee=new a4(S,D,L);Y.push(ee),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(ee)}return!0}return!1}findRowSkip(){if(this.possibleCenters.length<=1)return 0;let m=null;for(const g of this.possibleCenters)if(g.getCount()>=Za.CENTER_QUORUM)if(m==null)m=g;else return this.hasSkipped=!0,Math.floor((Math.abs(m.getX()-g.getX())-Math.abs(m.getY()-g.getY()))/2);return 0}haveMultiplyConfirmedCenters(){let u=0,m=0;const g=this.possibleCenters.length;for(const S of this.possibleCenters)S.getCount()>=Za.CENTER_QUORUM&&(u++,m+=S.getEstimatedModuleSize());if(u<3)return!1;const b=m/g;let j=0;for(const S of this.possibleCenters)j+=Math.abs(S.getEstimatedModuleSize()-b);return j<=.05*m}selectBestPatterns(){const u=this.possibleCenters.length;if(u<3)throw new F;const m=this.possibleCenters;let g;if(u>3){let b=0,j=0;for(const L of this.possibleCenters){const U=L.getEstimatedModuleSize();b+=U,j+=U*U}g=b/u;let S=Math.sqrt(j/u-g*g);m.sort((L,U)=>{const Y=Math.abs(U.getEstimatedModuleSize()-g),ee=Math.abs(L.getEstimatedModuleSize()-g);return Y<ee?-1:Y>ee?1:0});const D=Math.max(.2*g,S);for(let L=0;L<m.length&&m.length>3;L++){const U=m[L];Math.abs(U.getEstimatedModuleSize()-g)>D&&(m.splice(L,1),L--)}}if(m.length>3){let b=0;for(const j of m)b+=j.getEstimatedModuleSize();g=b/m.length,m.sort((j,S)=>{if(S.getCount()===j.getCount()){const D=Math.abs(S.getEstimatedModuleSize()-g),L=Math.abs(j.getEstimatedModuleSize()-g);return D<L?1:D>L?-1:0}else return S.getCount()-j.getCount()}),m.splice(3)}return[m[0],m[1],m[2]]}}Za.CENTER_QUORUM=2,Za.MIN_SKIP=3,Za.MAX_MODULES=57;class $x{constructor(u){this.image=u}getImage(){return this.image}getResultPointCallback(){return this.resultPointCallback}detect(u){this.resultPointCallback=u==null?null:u.get(A.NEED_RESULT_POINT_CALLBACK);const g=new Za(this.image,this.resultPointCallback).find(u);return this.processFinderPatternInfo(g)}processFinderPatternInfo(u){const m=u.getTopLeft(),g=u.getTopRight(),b=u.getBottomLeft(),j=this.calculateModuleSize(m,g,b);if(j<1)throw new F("No pattern found in proccess finder.");const S=$x.computeDimension(m,g,b,j),D=Ft.getProvisionalVersionForDimension(S),L=D.getDimensionForVersion()-7;let U=null;if(D.getAlignmentPatternCenters().length>0){const ue=g.getX()-m.getX()+b.getX(),be=g.getY()-m.getY()+b.getY(),we=1-3/L,Ee=Math.floor(m.getX()+we*(ue-m.getX())),Me=Math.floor(m.getY()+we*(be-m.getY()));for(let at=4;at<=16;at<<=1)try{U=this.findAlignmentInRegion(j,Ee,Me,at);break}catch(nt){if(!(nt instanceof F))throw nt}}const Y=$x.createTransform(m,g,b,U,S),ee=$x.sampleGrid(this.image,Y,S);let ae;return U===null?ae=[b,m,g]:ae=[b,m,g,U],new ve(ee,ae)}static createTransform(u,m,g,b,j){const S=j-3.5;let D,L,U,Y;return b!==null?(D=b.getX(),L=b.getY(),U=S-3,Y=U):(D=m.getX()-u.getX()+g.getX(),L=m.getY()-u.getY()+g.getY(),U=S,Y=S),He.quadrilateralToQuadrilateral(3.5,3.5,S,3.5,U,Y,3.5,S,u.getX(),u.getY(),m.getX(),m.getY(),D,L,g.getX(),g.getY())}static sampleGrid(u,m,g){return yt.getInstance().sampleGridWithTransform(u,g,g,m)}static computeDimension(u,m,g,b){const j=Ve.round(me.distance(u,m)/b),S=Ve.round(me.distance(u,g)/b);let D=Math.floor((j+S)/2)+7;switch(D&3){case 0:D++;break;case 2:D--;break;case 3:throw new F("Dimensions could be not found.")}return D}calculateModuleSize(u,m,g){return(this.calculateModuleSizeOneWay(u,m)+this.calculateModuleSizeOneWay(u,g))/2}calculateModuleSizeOneWay(u,m){const g=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(u.getX()),Math.floor(u.getY()),Math.floor(m.getX()),Math.floor(m.getY())),b=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(m.getX()),Math.floor(m.getY()),Math.floor(u.getX()),Math.floor(u.getY()));return isNaN(g)?b/7:isNaN(b)?g/7:(g+b)/14}sizeOfBlackWhiteBlackRunBothWays(u,m,g,b){let j=this.sizeOfBlackWhiteBlackRun(u,m,g,b),S=1,D=u-(g-u);D<0?(S=u/(u-D),D=0):D>=this.image.getWidth()&&(S=(this.image.getWidth()-1-u)/(D-u),D=this.image.getWidth()-1);let L=Math.floor(m-(b-m)*S);return S=1,L<0?(S=m/(m-L),L=0):L>=this.image.getHeight()&&(S=(this.image.getHeight()-1-m)/(L-m),L=this.image.getHeight()-1),D=Math.floor(u+(D-u)*S),j+=this.sizeOfBlackWhiteBlackRun(u,m,D,L),j-1}sizeOfBlackWhiteBlackRun(u,m,g,b){const j=Math.abs(b-m)>Math.abs(g-u);if(j){let ue=u;u=m,m=ue,ue=g,g=b,b=ue}const S=Math.abs(g-u),D=Math.abs(b-m);let L=-S/2;const U=u<g?1:-1,Y=m<b?1:-1;let ee=0;const ae=g+U;for(let ue=u,be=m;ue!==ae;ue+=U){const we=j?be:ue,Ee=j?ue:be;if(ee===1===this.image.get(we,Ee)){if(ee===2)return Ve.distance(ue,be,u,m);ee++}if(L+=D,L>0){if(be===b)break;be+=Y,L-=S}}return ee===2?Ve.distance(g+U,b,u,m):NaN}findAlignmentInRegion(u,m,g,b){const j=Math.floor(b*u),S=Math.max(0,m-j),D=Math.min(this.image.getWidth()-1,m+j);if(D-S<u*3)throw new F("Alignment top exceeds estimated module size.");const L=Math.max(0,g-j),U=Math.min(this.image.getHeight()-1,g+j);if(U-L<u*3)throw new F("Alignment bottom exceeds estimated module size.");return new Lb(this.image,S,L,D-S,U-L,u,this.resultPointCallback).find()}}class Ed{constructor(){this.decoder=new hJ}getDecoder(){return this.decoder}decode(u,m){let g,b;if(m!=null&&m.get(A.PURE_BARCODE)!==void 0){const L=Ed.extractPureBits(u.getBlackMatrix());g=this.decoder.decodeBitMatrix(L,m),b=Ed.NO_POINTS}else{const L=new $x(u.getBlackMatrix()).detect(m);g=this.decoder.decodeBitMatrix(L.getBits(),m),b=L.getPoints()}g.getOther()instanceof YT&&g.getOther().applyMirroredCorrection(b);const j=new ne(g.getText(),g.getRawBytes(),void 0,b,xe.QR_CODE,void 0),S=g.getByteSegments();S!==null&&j.putMetadata(oe.BYTE_SEGMENTS,S);const D=g.getECLevel();return D!==null&&j.putMetadata(oe.ERROR_CORRECTION_LEVEL,D),g.hasStructuredAppend()&&(j.putMetadata(oe.STRUCTURED_APPEND_SEQUENCE,g.getStructuredAppendSequenceNumber()),j.putMetadata(oe.STRUCTURED_APPEND_PARITY,g.getStructuredAppendParity())),j}reset(){}static extractPureBits(u){const m=u.getTopLeftOnBit(),g=u.getBottomRightOnBit();if(m===null||g===null)throw new F;const b=this.moduleSize(m,u);let j=m[1],S=g[1],D=m[0],L=g[0];if(D>=L||j>=S)throw new F;if(S-j!==L-D&&(L=D+(S-j),L>=u.getWidth()))throw new F;const U=Math.round((L-D+1)/b),Y=Math.round((S-j+1)/b);if(U<=0||Y<=0)throw new F;if(Y!==U)throw new F;const ee=Math.floor(b/2);j+=ee,D+=ee;const ae=D+Math.floor((U-1)*b)-L;if(ae>0){if(ae>ee)throw new F;D-=ae}const ue=j+Math.floor((Y-1)*b)-S;if(ue>0){if(ue>ee)throw new F;j-=ue}const be=new O(U,Y);for(let we=0;we<Y;we++){const Ee=j+Math.floor(we*b);for(let Me=0;Me<U;Me++)u.get(D+Math.floor(Me*b),Ee)&&be.set(Me,we)}return be}static moduleSize(u,m){const g=m.getHeight(),b=m.getWidth();let j=u[0],S=u[1],D=!0,L=0;for(;j<b&&S<g;){if(D!==m.get(j,S)){if(++L===5)break;D=!D}j++,S++}if(j===b||S===g)throw new F;return(j-u[0])/7}}Ed.NO_POINTS=new Array;class Kt{PDF417Common(){}static getBitCountSum(u){return Ve.sum(u)}static toIntArray(u){if(u==null||!u.length)return Kt.EMPTY_INT_ARRAY;const m=new Int32Array(u.length);let g=0;for(const b of u)m[g++]=b;return m}static getCodeword(u){const m=C.binarySearch(Kt.SYMBOL_TABLE,u&262143);return m<0?-1:(Kt.CODEWORD_TABLE[m]-1)%Kt.NUMBER_OF_CODEWORDS}}Kt.NUMBER_OF_CODEWORDS=929,Kt.MAX_CODEWORDS_IN_BARCODE=Kt.NUMBER_OF_CODEWORDS-1,Kt.MIN_ROWS_IN_BARCODE=3,Kt.MAX_ROWS_IN_BARCODE=90,Kt.MODULES_IN_CODEWORD=17,Kt.MODULES_IN_STOP_PATTERN=18,Kt.BARS_IN_MODULE=8,Kt.EMPTY_INT_ARRAY=new Int32Array([]),Kt.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),Kt.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]);class fJ{constructor(u,m){this.bits=u,this.points=m}getBits(){return this.bits}getPoints(){return this.points}}class gr{static detectMultiple(u,m,g){let b=u.getBlackMatrix(),j=gr.detect(g,b);return j.length||(b=b.clone(),b.rotate180(),j=gr.detect(g,b)),new fJ(b,j)}static detect(u,m){const g=new Array;let b=0,j=0,S=!1;for(;b<m.getHeight();){const D=gr.findVertices(m,b,j);if(D[0]==null&&D[3]==null){if(!S)break;S=!1,j=0;for(const L of g)L[1]!=null&&(b=Math.trunc(Math.max(b,L[1].getY()))),L[3]!=null&&(b=Math.max(b,Math.trunc(L[3].getY())));b+=gr.ROW_STEP;continue}if(S=!0,g.push(D),!u)break;D[2]!=null?(j=Math.trunc(D[2].getX()),b=Math.trunc(D[2].getY())):(j=Math.trunc(D[4].getX()),b=Math.trunc(D[4].getY()))}return g}static findVertices(u,m,g){const b=u.getHeight(),j=u.getWidth(),S=new Array(8);return gr.copyToResult(S,gr.findRowsWithPattern(u,b,j,m,g,gr.START_PATTERN),gr.INDEXES_START_PATTERN),S[4]!=null&&(g=Math.trunc(S[4].getX()),m=Math.trunc(S[4].getY())),gr.copyToResult(S,gr.findRowsWithPattern(u,b,j,m,g,gr.STOP_PATTERN),gr.INDEXES_STOP_PATTERN),S}static copyToResult(u,m,g){for(let b=0;b<g.length;b++)u[g[b]]=m[b]}static findRowsWithPattern(u,m,g,b,j,S){const D=new Array(4);let L=!1;const U=new Int32Array(S.length);for(;b<m;b+=gr.ROW_STEP){let ee=gr.findGuardPattern(u,j,b,g,!1,S,U);if(ee!=null){for(;b>0;){const ae=gr.findGuardPattern(u,j,--b,g,!1,S,U);if(ae!=null)ee=ae;else{b++;break}}D[0]=new me(ee[0],b),D[1]=new me(ee[1],b),L=!0;break}}let Y=b+1;if(L){let ee=0,ae=Int32Array.from([Math.trunc(D[0].getX()),Math.trunc(D[1].getX())]);for(;Y<m;Y++){const ue=gr.findGuardPattern(u,ae[0],Y,g,!1,S,U);if(ue!=null&&Math.abs(ae[0]-ue[0])<gr.MAX_PATTERN_DRIFT&&Math.abs(ae[1]-ue[1])<gr.MAX_PATTERN_DRIFT)ae=ue,ee=0;else{if(ee>gr.SKIPPED_ROW_COUNT_MAX)break;ee++}}Y-=ee+1,D[2]=new me(ae[0],Y),D[3]=new me(ae[1],Y)}return Y-b<gr.BARCODE_MIN_HEIGHT&&C.fill(D,null),D}static findGuardPattern(u,m,g,b,j,S,D){C.fillWithin(D,0,D.length,0);let L=m,U=0;for(;u.get(L,g)&&L>0&&U++<gr.MAX_PIXEL_DRIFT;)L--;let Y=L,ee=0,ae=S.length;for(let ue=j;Y<b;Y++)if(u.get(Y,g)!==ue)D[ee]++;else{if(ee===ae-1){if(gr.patternMatchVariance(D,S,gr.MAX_INDIVIDUAL_VARIANCE)<gr.MAX_AVG_VARIANCE)return new Int32Array([L,Y]);L+=D[0]+D[1],w.arraycopy(D,2,D,0,ee-1),D[ee-1]=0,D[ee]=0,ee--}else ee++;D[ee]=1,ue=!ue}return ee===ae-1&&gr.patternMatchVariance(D,S,gr.MAX_INDIVIDUAL_VARIANCE)<gr.MAX_AVG_VARIANCE?new Int32Array([L,Y-1]):null}static patternMatchVariance(u,m,g){let b=u.length,j=0,S=0;for(let U=0;U<b;U++)j+=u[U],S+=m[U];if(j<S)return 1/0;let D=j/S;g*=D;let L=0;for(let U=0;U<b;U++){let Y=u[U],ee=m[U]*D,ae=Y>ee?Y-ee:ee-Y;if(ae>g)return 1/0;L+=ae}return L/j}}gr.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),gr.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),gr.MAX_AVG_VARIANCE=.42,gr.MAX_INDIVIDUAL_VARIANCE=.8,gr.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),gr.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),gr.MAX_PIXEL_DRIFT=3,gr.MAX_PATTERN_DRIFT=5,gr.SKIPPED_ROW_COUNT_MAX=25,gr.ROW_STEP=5,gr.BARCODE_MIN_HEIGHT=10;class pn{constructor(u,m){if(m.length===0)throw new f;this.field=u;let g=m.length;if(g>1&&m[0]===0){let b=1;for(;b<g&&m[b]===0;)b++;b===g?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(g-b),w.arraycopy(m,b,this.coefficients,0,this.coefficients.length))}else this.coefficients=m}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(u){return this.coefficients[this.coefficients.length-1-u]}evaluateAt(u){if(u===0)return this.getCoefficient(0);if(u===1){let b=0;for(let j of this.coefficients)b=this.field.add(b,j);return b}let m=this.coefficients[0],g=this.coefficients.length;for(let b=1;b<g;b++)m=this.field.add(this.field.multiply(u,m),this.coefficients[b]);return m}add(u){if(!this.field.equals(u.field))throw new f("ModulusPolys do not have same ModulusGF field");if(this.isZero())return u;if(u.isZero())return this;let m=this.coefficients,g=u.coefficients;if(m.length>g.length){let S=m;m=g,g=S}let b=new Int32Array(g.length),j=g.length-m.length;w.arraycopy(g,0,b,0,j);for(let S=j;S<g.length;S++)b[S]=this.field.add(m[S-j],g[S]);return new pn(this.field,b)}subtract(u){if(!this.field.equals(u.field))throw new f("ModulusPolys do not have same ModulusGF field");return u.isZero()?this:this.add(u.negative())}multiply(u){return u instanceof pn?this.multiplyOther(u):this.multiplyScalar(u)}multiplyOther(u){if(!this.field.equals(u.field))throw new f("ModulusPolys do not have same ModulusGF field");if(this.isZero()||u.isZero())return new pn(this.field,new Int32Array([0]));let m=this.coefficients,g=m.length,b=u.coefficients,j=b.length,S=new Int32Array(g+j-1);for(let D=0;D<g;D++){let L=m[D];for(let U=0;U<j;U++)S[D+U]=this.field.add(S[D+U],this.field.multiply(L,b[U]))}return new pn(this.field,S)}negative(){let u=this.coefficients.length,m=new Int32Array(u);for(let g=0;g<u;g++)m[g]=this.field.subtract(0,this.coefficients[g]);return new pn(this.field,m)}multiplyScalar(u){if(u===0)return new pn(this.field,new Int32Array([0]));if(u===1)return this;let m=this.coefficients.length,g=new Int32Array(m);for(let b=0;b<m;b++)g[b]=this.field.multiply(this.coefficients[b],u);return new pn(this.field,g)}multiplyByMonomial(u,m){if(u<0)throw new f;if(m===0)return new pn(this.field,new Int32Array([0]));let g=this.coefficients.length,b=new Int32Array(g+u);for(let j=0;j<g;j++)b[j]=this.field.multiply(this.coefficients[j],m);return new pn(this.field,b)}toString(){let u=new B;for(let m=this.getDegree();m>=0;m--){let g=this.getCoefficient(m);g!==0&&(g<0?(u.append(" - "),g=-g):u.length()>0&&u.append(" + "),(m===0||g!==1)&&u.append(g),m!==0&&(m===1?u.append("x"):(u.append("x^"),u.append(m))))}return u.toString()}}class xJ{add(u,m){return(u+m)%this.modulus}subtract(u,m){return(this.modulus+u-m)%this.modulus}exp(u){return this.expTable[u]}log(u){if(u===0)throw new f;return this.logTable[u]}inverse(u){if(u===0)throw new Q;return this.expTable[this.modulus-this.logTable[u]-1]}multiply(u,m){return u===0||m===0?0:this.expTable[(this.logTable[u]+this.logTable[m])%(this.modulus-1)]}getSize(){return this.modulus}equals(u){return u===this}}class n4 extends xJ{constructor(u,m){super(),this.modulus=u,this.expTable=new Int32Array(u),this.logTable=new Int32Array(u);let g=1;for(let b=0;b<u;b++)this.expTable[b]=g,g=g*m%u;for(let b=0;b<u-1;b++)this.logTable[this.expTable[b]]=b;this.zero=new pn(this,new Int32Array([0])),this.one=new pn(this,new Int32Array([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(u,m){if(u<0)throw new f;if(m===0)return this.zero;let g=new Int32Array(u+1);return g[0]=m,new pn(this,g)}}n4.PDF417_GF=new n4(Kt.NUMBER_OF_CODEWORDS,3);class XT{constructor(){this.field=n4.PDF417_GF}decode(u,m,g){let b=new pn(this.field,u),j=new Int32Array(m),S=!1;for(let be=m;be>0;be--){let we=b.evaluateAt(this.field.exp(be));j[m-be]=we,we!==0&&(S=!0)}if(!S)return 0;let D=this.field.getOne();if(g!=null)for(const be of g){let we=this.field.exp(u.length-1-be),Ee=new pn(this.field,new Int32Array([this.field.subtract(0,we),1]));D=D.multiply(Ee)}let L=new pn(this.field,j),U=this.runEuclideanAlgorithm(this.field.buildMonomial(m,1),L,m),Y=U[0],ee=U[1],ae=this.findErrorLocations(Y),ue=this.findErrorMagnitudes(ee,Y,ae);for(let be=0;be<ae.length;be++){let we=u.length-1-this.field.log(ae[be]);if(we<0)throw y.getChecksumInstance();u[we]=this.field.subtract(u[we],ue[be])}return ae.length}runEuclideanAlgorithm(u,m,g){if(u.getDegree()<m.getDegree()){let ae=u;u=m,m=ae}let b=u,j=m,S=this.field.getZero(),D=this.field.getOne();for(;j.getDegree()>=Math.round(g/2);){let ae=b,ue=S;if(b=j,S=D,b.isZero())throw y.getChecksumInstance();j=ae;let be=this.field.getZero(),we=b.getCoefficient(b.getDegree()),Ee=this.field.inverse(we);for(;j.getDegree()>=b.getDegree()&&!j.isZero();){let Me=j.getDegree()-b.getDegree(),at=this.field.multiply(j.getCoefficient(j.getDegree()),Ee);be=be.add(this.field.buildMonomial(Me,at)),j=j.subtract(b.multiplyByMonomial(Me,at))}D=be.multiply(S).subtract(ue).negative()}let L=D.getCoefficient(0);if(L===0)throw y.getChecksumInstance();let U=this.field.inverse(L),Y=D.multiply(U),ee=j.multiply(U);return[Y,ee]}findErrorLocations(u){let m=u.getDegree(),g=new Int32Array(m),b=0;for(let j=1;j<this.field.getSize()&&b<m;j++)u.evaluateAt(j)===0&&(g[b]=this.field.inverse(j),b++);if(b!==m)throw y.getChecksumInstance();return g}findErrorMagnitudes(u,m,g){let b=m.getDegree(),j=new Int32Array(b);for(let U=1;U<=b;U++)j[b-U]=this.field.multiply(U,m.getCoefficient(U));let S=new pn(this.field,j),D=g.length,L=new Int32Array(D);for(let U=0;U<D;U++){let Y=this.field.inverse(g[U]),ee=this.field.subtract(0,u.evaluateAt(Y)),ae=this.field.inverse(S.evaluateAt(Y));L[U]=this.field.multiply(ee,ae)}return L}}class r0{constructor(u,m,g,b,j){u instanceof r0?this.constructor_2(u):this.constructor_1(u,m,g,b,j)}constructor_1(u,m,g,b,j){const S=m==null||g==null,D=b==null||j==null;if(S&&D)throw new F;S?(m=new me(0,b.getY()),g=new me(0,j.getY())):D&&(b=new me(u.getWidth()-1,m.getY()),j=new me(u.getWidth()-1,g.getY())),this.image=u,this.topLeft=m,this.bottomLeft=g,this.topRight=b,this.bottomRight=j,this.minX=Math.trunc(Math.min(m.getX(),g.getX())),this.maxX=Math.trunc(Math.max(b.getX(),j.getX())),this.minY=Math.trunc(Math.min(m.getY(),b.getY())),this.maxY=Math.trunc(Math.max(g.getY(),j.getY()))}constructor_2(u){this.image=u.image,this.topLeft=u.getTopLeft(),this.bottomLeft=u.getBottomLeft(),this.topRight=u.getTopRight(),this.bottomRight=u.getBottomRight(),this.minX=u.getMinX(),this.maxX=u.getMaxX(),this.minY=u.getMinY(),this.maxY=u.getMaxY()}static merge(u,m){return u==null?m:m==null?u:new r0(u.image,u.topLeft,u.bottomLeft,m.topRight,m.bottomRight)}addMissingRows(u,m,g){let b=this.topLeft,j=this.bottomLeft,S=this.topRight,D=this.bottomRight;if(u>0){let L=g?this.topLeft:this.topRight,U=Math.trunc(L.getY()-u);U<0&&(U=0);let Y=new me(L.getX(),U);g?b=Y:S=Y}if(m>0){let L=g?this.bottomLeft:this.bottomRight,U=Math.trunc(L.getY()+m);U>=this.image.getHeight()&&(U=this.image.getHeight()-1);let Y=new me(L.getX(),U);g?j=Y:D=Y}return new r0(this.image,b,j,S,D)}getMinX(){return this.minX}getMaxX(){return this.maxX}getMinY(){return this.minY}getMaxY(){return this.maxY}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}getBottomLeft(){return this.bottomLeft}getBottomRight(){return this.bottomRight}}class gJ{constructor(u,m,g,b){this.columnCount=u,this.errorCorrectionLevel=b,this.rowCountUpperPart=m,this.rowCountLowerPart=g,this.rowCount=m+g}getColumnCount(){return this.columnCount}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getRowCount(){return this.rowCount}getRowCountUpperPart(){return this.rowCountUpperPart}getRowCountLowerPart(){return this.rowCountLowerPart}}class Ux{constructor(){this.buffer=""}static form(u,m){let g=-1;function b(S,D,L,U,Y,ee){if(S==="%%")return"%";if(m[++g]===void 0)return;S=U?parseInt(U.substr(1)):void 0;let ae=Y?parseInt(Y.substr(1)):void 0,ue;switch(ee){case"s":ue=m[g];break;case"c":ue=m[g][0];break;case"f":ue=parseFloat(m[g]).toFixed(S);break;case"p":ue=parseFloat(m[g]).toPrecision(S);break;case"e":ue=parseFloat(m[g]).toExponential(S);break;case"x":ue=parseInt(m[g]).toString(ae||16);break;case"d":ue=parseFloat(parseInt(m[g],ae||10).toPrecision(S)).toFixed(0);break}ue=typeof ue=="object"?JSON.stringify(ue):(+ue).toString(ae);let be=parseInt(L),we=L&&L[0]+""=="0"?"0":" ";for(;ue.length<be;)ue=D!==void 0?ue+we:we+ue;return ue}let j=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return u.replace(j,b)}format(u,...m){this.buffer+=Ux.form(u,m)}toString(){return this.buffer}}class Vx{constructor(u){this.boundingBox=new r0(u),this.codewords=new Array(u.getMaxY()-u.getMinY()+1)}getCodewordNearby(u){let m=this.getCodeword(u);if(m!=null)return m;for(let g=1;g<Vx.MAX_NEARBY_DISTANCE;g++){let b=this.imageRowToCodewordIndex(u)-g;if(b>=0&&(m=this.codewords[b],m!=null)||(b=this.imageRowToCodewordIndex(u)+g,b<this.codewords.length&&(m=this.codewords[b],m!=null)))return m}return null}imageRowToCodewordIndex(u){return u-this.boundingBox.getMinY()}setCodeword(u,m){this.codewords[this.imageRowToCodewordIndex(u)]=m}getCodeword(u){return this.codewords[this.imageRowToCodewordIndex(u)]}getBoundingBox(){return this.boundingBox}getCodewords(){return this.codewords}toString(){const u=new Ux;let m=0;for(const g of this.codewords){if(g==null){u.format("%3d:    |   %n",m++);continue}u.format("%3d: %3d|%3d%n",m++,g.getRowNumber(),g.getValue())}return u.toString()}}Vx.MAX_NEARBY_DISTANCE=5;class Wx{constructor(){this.values=new Map}setValue(u){u=Math.trunc(u);let m=this.values.get(u);m==null&&(m=0),m++,this.values.set(u,m)}getValue(){let u=-1,m=new Array;for(const[g,b]of this.values.entries()){const j={getKey:()=>g,getValue:()=>b};j.getValue()>u?(u=j.getValue(),m=[],m.push(j.getKey())):j.getValue()===u&&m.push(j.getKey())}return Kt.toIntArray(m)}getConfidence(u){return this.values.get(u)}}class QT extends Vx{constructor(u,m){super(u),this._isLeft=m}setRowNumbers(){for(let u of this.getCodewords())u!=null&&u.setRowNumberAsRowIndicatorColumn()}adjustCompleteIndicatorColumnRowNumbers(u){let m=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(m,u);let g=this.getBoundingBox(),b=this._isLeft?g.getTopLeft():g.getTopRight(),j=this._isLeft?g.getBottomLeft():g.getBottomRight(),S=this.imageRowToCodewordIndex(Math.trunc(b.getY())),D=this.imageRowToCodewordIndex(Math.trunc(j.getY())),L=-1,U=1,Y=0;for(let ee=S;ee<D;ee++){if(m[ee]==null)continue;let ae=m[ee],ue=ae.getRowNumber()-L;if(ue===0)Y++;else if(ue===1)U=Math.max(U,Y),Y=1,L=ae.getRowNumber();else if(ue<0||ae.getRowNumber()>=u.getRowCount()||ue>ee)m[ee]=null;else{let be;U>2?be=(U-2)*ue:be=ue;let we=be>=ee;for(let Ee=1;Ee<=be&&!we;Ee++)we=m[ee-Ee]!=null;we?m[ee]=null:(L=ae.getRowNumber(),Y=1)}}}getRowHeights(){let u=this.getBarcodeMetadata();if(u==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(u);let m=new Int32Array(u.getRowCount());for(let g of this.getCodewords())if(g!=null){let b=g.getRowNumber();if(b>=m.length)continue;m[b]++}return m}adjustIncompleteIndicatorColumnRowNumbers(u){let m=this.getBoundingBox(),g=this._isLeft?m.getTopLeft():m.getTopRight(),b=this._isLeft?m.getBottomLeft():m.getBottomRight(),j=this.imageRowToCodewordIndex(Math.trunc(g.getY())),S=this.imageRowToCodewordIndex(Math.trunc(b.getY())),D=this.getCodewords(),L=-1;for(let U=j;U<S;U++){if(D[U]==null)continue;let Y=D[U];Y.setRowNumberAsRowIndicatorColumn();let ee=Y.getRowNumber()-L;ee===0||(ee===1?L=Y.getRowNumber():Y.getRowNumber()>=u.getRowCount()?D[U]=null:L=Y.getRowNumber())}}getBarcodeMetadata(){let u=this.getCodewords(),m=new Wx,g=new Wx,b=new Wx,j=new Wx;for(let D of u){if(D==null)continue;D.setRowNumberAsRowIndicatorColumn();let L=D.getValue()%30,U=D.getRowNumber();switch(this._isLeft||(U+=2),U%3){case 0:g.setValue(L*3+1);break;case 1:j.setValue(L/3),b.setValue(L%3);break;case 2:m.setValue(L+1);break}}if(m.getValue().length===0||g.getValue().length===0||b.getValue().length===0||j.getValue().length===0||m.getValue()[0]<1||g.getValue()[0]+b.getValue()[0]<Kt.MIN_ROWS_IN_BARCODE||g.getValue()[0]+b.getValue()[0]>Kt.MAX_ROWS_IN_BARCODE)return null;let S=new gJ(m.getValue()[0],g.getValue()[0],b.getValue()[0],j.getValue()[0]);return this.removeIncorrectCodewords(u,S),S}removeIncorrectCodewords(u,m){for(let g=0;g<u.length;g++){let b=u[g];if(u[g]==null)continue;let j=b.getValue()%30,S=b.getRowNumber();if(S>m.getRowCount()){u[g]=null;continue}switch(this._isLeft||(S+=2),S%3){case 0:j*3+1!==m.getRowCountUpperPart()&&(u[g]=null);break;case 1:(Math.trunc(j/3)!==m.getErrorCorrectionLevel()||j%3!==m.getRowCountLowerPart())&&(u[g]=null);break;case 2:j+1!==m.getColumnCount()&&(u[g]=null);break}}}isLeft(){return this._isLeft}toString(){return"IsLeft: "+this._isLeft+`
`+super.toString()}}class zx{constructor(u,m){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=u,this.barcodeColumnCount=u.getColumnCount(),this.boundingBox=m,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}getDetectionResultColumns(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);let u=Kt.MAX_CODEWORDS_IN_BARCODE,m;do m=u,u=this.adjustRowNumbersAndGetCount();while(u>0&&u<m);return this.detectionResultColumns}adjustIndicatorColumnRowNumbers(u){u!=null&&u.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)}adjustRowNumbersAndGetCount(){let u=this.adjustRowNumbersByRow();if(u===0)return 0;for(let m=1;m<this.barcodeColumnCount+1;m++){let g=this.detectionResultColumns[m].getCodewords();for(let b=0;b<g.length;b++)g[b]!=null&&(g[b].hasValidRowNumber()||this.adjustRowNumbers(m,b,g))}return u}adjustRowNumbersByRow(){return this.adjustRowNumbersFromBothRI(),this.adjustRowNumbersFromLRI()+this.adjustRowNumbersFromRRI()}adjustRowNumbersFromBothRI(){if(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)return;let u=this.detectionResultColumns[0].getCodewords(),m=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let g=0;g<u.length;g++)if(u[g]!=null&&m[g]!=null&&u[g].getRowNumber()===m[g].getRowNumber())for(let b=1;b<=this.barcodeColumnCount;b++){let j=this.detectionResultColumns[b].getCodewords()[g];j!=null&&(j.setRowNumber(u[g].getRowNumber()),j.hasValidRowNumber()||(this.detectionResultColumns[b].getCodewords()[g]=null))}}adjustRowNumbersFromRRI(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;let u=0,m=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let g=0;g<m.length;g++){if(m[g]==null)continue;let b=m[g].getRowNumber(),j=0;for(let S=this.barcodeColumnCount+1;S>0&&j<this.ADJUST_ROW_NUMBER_SKIP;S--){let D=this.detectionResultColumns[S].getCodewords()[g];D!=null&&(j=zx.adjustRowNumberIfValid(b,j,D),D.hasValidRowNumber()||u++)}}return u}adjustRowNumbersFromLRI(){if(this.detectionResultColumns[0]==null)return 0;let u=0,m=this.detectionResultColumns[0].getCodewords();for(let g=0;g<m.length;g++){if(m[g]==null)continue;let b=m[g].getRowNumber(),j=0;for(let S=1;S<this.barcodeColumnCount+1&&j<this.ADJUST_ROW_NUMBER_SKIP;S++){let D=this.detectionResultColumns[S].getCodewords()[g];D!=null&&(j=zx.adjustRowNumberIfValid(b,j,D),D.hasValidRowNumber()||u++)}}return u}static adjustRowNumberIfValid(u,m,g){return g==null||g.hasValidRowNumber()||(g.isValidRowNumber(u)?(g.setRowNumber(u),m=0):++m),m}adjustRowNumbers(u,m,g){if(!this.detectionResultColumns[u-1])return;let b=g[m],j=this.detectionResultColumns[u-1].getCodewords(),S=j;this.detectionResultColumns[u+1]!=null&&(S=this.detectionResultColumns[u+1].getCodewords());let D=new Array(14);D[2]=j[m],D[3]=S[m],m>0&&(D[0]=g[m-1],D[4]=j[m-1],D[5]=S[m-1]),m>1&&(D[8]=g[m-2],D[10]=j[m-2],D[11]=S[m-2]),m<g.length-1&&(D[1]=g[m+1],D[6]=j[m+1],D[7]=S[m+1]),m<g.length-2&&(D[9]=g[m+2],D[12]=j[m+2],D[13]=S[m+2]);for(let L of D)if(zx.adjustRowNumber(b,L))return}static adjustRowNumber(u,m){return m==null?!1:m.hasValidRowNumber()&&m.getBucket()===u.getBucket()?(u.setRowNumber(m.getRowNumber()),!0):!1}getBarcodeColumnCount(){return this.barcodeColumnCount}getBarcodeRowCount(){return this.barcodeMetadata.getRowCount()}getBarcodeECLevel(){return this.barcodeMetadata.getErrorCorrectionLevel()}setBoundingBox(u){this.boundingBox=u}getBoundingBox(){return this.boundingBox}setDetectionResultColumn(u,m){this.detectionResultColumns[u]=m}getDetectionResultColumn(u){return this.detectionResultColumns[u]}toString(){let u=this.detectionResultColumns[0];u==null&&(u=this.detectionResultColumns[this.barcodeColumnCount+1]);let m=new Ux;for(let g=0;g<u.getCodewords().length;g++){m.format("CW %3d:",g);for(let b=0;b<this.barcodeColumnCount+2;b++){if(this.detectionResultColumns[b]==null){m.format("    |   ");continue}let j=this.detectionResultColumns[b].getCodewords()[g];if(j==null){m.format("    |   ");continue}m.format(" %3d|%3d",j.getRowNumber(),j.getValue())}m.format("%n")}return m.toString()}}class qx{constructor(u,m,g,b){this.rowNumber=qx.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(u),this.endX=Math.trunc(m),this.bucket=Math.trunc(g),this.value=Math.trunc(b)}hasValidRowNumber(){return this.isValidRowNumber(this.rowNumber)}isValidRowNumber(u){return u!==qx.BARCODE_ROW_UNKNOWN&&this.bucket===u%3*3}setRowNumberAsRowIndicatorColumn(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))}getWidth(){return this.endX-this.startX}getStartX(){return this.startX}getEndX(){return this.endX}getBucket(){return this.bucket}getValue(){return this.value}getRowNumber(){return this.rowNumber}setRowNumber(u){this.rowNumber=u}toString(){return this.rowNumber+"|"+this.value}}qx.BARCODE_ROW_UNKNOWN=-1;class yi{static initialize(){for(let u=0;u<Kt.SYMBOL_TABLE.length;u++){let m=Kt.SYMBOL_TABLE[u],g=m&1;for(let b=0;b<Kt.BARS_IN_MODULE;b++){let j=0;for(;(m&1)===g;)j+=1,m>>=1;g=m&1,yi.RATIOS_TABLE[u]||(yi.RATIOS_TABLE[u]=new Array(Kt.BARS_IN_MODULE)),yi.RATIOS_TABLE[u][Kt.BARS_IN_MODULE-b-1]=Math.fround(j/Kt.MODULES_IN_CODEWORD)}}this.bSymbolTableReady=!0}static getDecodedValue(u){let m=yi.getDecodedCodewordValue(yi.sampleBitCounts(u));return m!==-1?m:yi.getClosestDecodedValue(u)}static sampleBitCounts(u){let m=Ve.sum(u),g=new Int32Array(Kt.BARS_IN_MODULE),b=0,j=0;for(let S=0;S<Kt.MODULES_IN_CODEWORD;S++){let D=m/(2*Kt.MODULES_IN_CODEWORD)+S*m/Kt.MODULES_IN_CODEWORD;j+u[b]<=D&&(j+=u[b],b++),g[b]++}return g}static getDecodedCodewordValue(u){let m=yi.getBitValue(u);return Kt.getCodeword(m)===-1?-1:m}static getBitValue(u){let m=0;for(let g=0;g<u.length;g++)for(let b=0;b<u[g];b++)m=m<<1|(g%2===0?1:0);return Math.trunc(m)}static getClosestDecodedValue(u){let m=Ve.sum(u),g=new Array(Kt.BARS_IN_MODULE);if(m>1)for(let S=0;S<g.length;S++)g[S]=Math.fround(u[S]/m);let b=le.MAX_VALUE,j=-1;this.bSymbolTableReady||yi.initialize();for(let S=0;S<yi.RATIOS_TABLE.length;S++){let D=0,L=yi.RATIOS_TABLE[S];for(let U=0;U<Kt.BARS_IN_MODULE;U++){let Y=Math.fround(L[U]-g[U]);if(D+=Math.fround(Y*Y),D>=b)break}D<b&&(b=D,j=Kt.SYMBOL_TABLE[S])}return j}}yi.bSymbolTableReady=!1,yi.RATIOS_TABLE=new Array(Kt.SYMBOL_TABLE.length).map(J=>new Array(Kt.BARS_IN_MODULE));class ZT{constructor(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}getSegmentIndex(){return this.segmentIndex}setSegmentIndex(u){this.segmentIndex=u}getFileId(){return this.fileId}setFileId(u){this.fileId=u}getOptionalData(){return this.optionalData}setOptionalData(u){this.optionalData=u}isLastSegment(){return this.lastSegment}setLastSegment(u){this.lastSegment=u}getSegmentCount(){return this.segmentCount}setSegmentCount(u){this.segmentCount=u}getSender(){return this.sender||null}setSender(u){this.sender=u}getAddressee(){return this.addressee||null}setAddressee(u){this.addressee=u}getFileName(){return this.fileName}setFileName(u){this.fileName=u}getFileSize(){return this.fileSize}setFileSize(u){this.fileSize=u}getChecksum(){return this.checksum}setChecksum(u){this.checksum=u}getTimestamp(){return this.timestamp}setTimestamp(u){this.timestamp=u}}class JT{static parseLong(u,m=void 0){return parseInt(u,m)}}class eI extends d{}eI.kind="NullPointerException";class pJ{writeBytes(u){this.writeBytesOffset(u,0,u.length)}writeBytesOffset(u,m,g){if(u==null)throw new eI;if(m<0||m>u.length||g<0||m+g>u.length||m+g<0)throw new N;if(g===0)return;for(let b=0;b<g;b++)this.write(u[m+b])}flush(){}close(){}}class yJ extends d{}class bJ extends pJ{constructor(u=32){if(super(),this.count=0,u<0)throw new f("Negative initial size: "+u);this.buf=new Uint8Array(u)}ensureCapacity(u){u-this.buf.length>0&&this.grow(u)}grow(u){let g=this.buf.length<<1;if(g-u<0&&(g=u),g<0){if(u<0)throw new yJ;g=E.MAX_VALUE}this.buf=C.copyOfUint8Array(this.buf,g)}write(u){this.ensureCapacity(this.count+1),this.buf[this.count]=u,this.count+=1}writeBytesOffset(u,m,g){if(m<0||m>u.length||g<0||m+g-u.length>0)throw new N;this.ensureCapacity(this.count+g),w.arraycopy(u,m,this.buf,this.count,g),this.count+=g}writeTo(u){u.writeBytesOffset(this.buf,0,this.count)}reset(){this.count=0}toByteArray(){return C.copyOfUint8Array(this.buf,this.count)}size(){return this.count}toString(u){return u?typeof u=="string"?this.toString_string(u):this.toString_number(u):this.toString_void()}toString_void(){return new String(this.buf).toString()}toString_string(u){return new String(this.buf).toString()}toString_number(u){return new String(this.buf).toString()}close(){}}var us;(function(J){J[J.ALPHA=0]="ALPHA",J[J.LOWER=1]="LOWER",J[J.MIXED=2]="MIXED",J[J.PUNCT=3]="PUNCT",J[J.ALPHA_SHIFT=4]="ALPHA_SHIFT",J[J.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(us||(us={}));function tI(){if(typeof window<"u")return window.BigInt||null;if(typeof Gx<"u")return Gx.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}let Fb;function Ad(J){if(typeof Fb>"u"&&(Fb=tI()),Fb===null)throw new Error("BigInt is not supported!");return Fb(J)}function vJ(){let J=[];J[0]=Ad(1);let u=Ad(900);J[1]=u;for(let m=2;m<16;m++)J[m]=J[m-1]*u;return J}class Re{static decode(u,m){let g=new B(""),b=R.ISO8859_1;g.enableDecoding(b);let j=1,S=u[j++],D=new ZT;for(;j<u[0];){switch(S){case Re.TEXT_COMPACTION_MODE_LATCH:j=Re.textCompaction(u,j,g);break;case Re.BYTE_COMPACTION_MODE_LATCH:case Re.BYTE_COMPACTION_MODE_LATCH_6:j=Re.byteCompaction(S,u,b,j,g);break;case Re.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:g.append(u[j++]);break;case Re.NUMERIC_COMPACTION_MODE_LATCH:j=Re.numericCompaction(u,j,g);break;case Re.ECI_CHARSET:R.getCharacterSetECIByValue(u[j++]);break;case Re.ECI_GENERAL_PURPOSE:j+=2;break;case Re.ECI_USER_DEFINED:j++;break;case Re.BEGIN_MACRO_PDF417_CONTROL_BLOCK:j=Re.decodeMacroBlock(u,j,D);break;case Re.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case Re.MACRO_PDF417_TERMINATOR:throw new P;default:j--,j=Re.textCompaction(u,j,g);break}if(j<u.length)S=u[j++];else throw P.getFormatInstance()}if(g.length()===0)throw P.getFormatInstance();let L=new ie(null,g.toString(),null,m);return L.setOther(D),L}static decodeMacroBlock(u,m,g){if(m+Re.NUMBER_OF_SEQUENCE_CODEWORDS>u[0])throw P.getFormatInstance();let b=new Int32Array(Re.NUMBER_OF_SEQUENCE_CODEWORDS);for(let D=0;D<Re.NUMBER_OF_SEQUENCE_CODEWORDS;D++,m++)b[D]=u[m];g.setSegmentIndex(E.parseInt(Re.decodeBase900toBase10(b,Re.NUMBER_OF_SEQUENCE_CODEWORDS)));let j=new B;m=Re.textCompaction(u,m,j),g.setFileId(j.toString());let S=-1;for(u[m]===Re.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(S=m+1);m<u[0];)switch(u[m]){case Re.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(m++,u[m]){case Re.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:let D=new B;m=Re.textCompaction(u,m+1,D),g.setFileName(D.toString());break;case Re.MACRO_PDF417_OPTIONAL_FIELD_SENDER:let L=new B;m=Re.textCompaction(u,m+1,L),g.setSender(L.toString());break;case Re.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:let U=new B;m=Re.textCompaction(u,m+1,U),g.setAddressee(U.toString());break;case Re.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:let Y=new B;m=Re.numericCompaction(u,m+1,Y),g.setSegmentCount(E.parseInt(Y.toString()));break;case Re.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:let ee=new B;m=Re.numericCompaction(u,m+1,ee),g.setTimestamp(JT.parseLong(ee.toString()));break;case Re.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:let ae=new B;m=Re.numericCompaction(u,m+1,ae),g.setChecksum(E.parseInt(ae.toString()));break;case Re.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:let ue=new B;m=Re.numericCompaction(u,m+1,ue),g.setFileSize(JT.parseLong(ue.toString()));break;default:throw P.getFormatInstance()}break;case Re.MACRO_PDF417_TERMINATOR:m++,g.setLastSegment(!0);break;default:throw P.getFormatInstance()}if(S!==-1){let D=m-S;g.isLastSegment()&&D--,g.setOptionalData(C.copyOfRange(u,S,S+D))}return m}static textCompaction(u,m,g){let b=new Int32Array((u[0]-m)*2),j=new Int32Array((u[0]-m)*2),S=0,D=!1;for(;m<u[0]&&!D;){let L=u[m++];if(L<Re.TEXT_COMPACTION_MODE_LATCH)b[S]=L/30,b[S+1]=L%30,S+=2;else switch(L){case Re.TEXT_COMPACTION_MODE_LATCH:b[S++]=Re.TEXT_COMPACTION_MODE_LATCH;break;case Re.BYTE_COMPACTION_MODE_LATCH:case Re.BYTE_COMPACTION_MODE_LATCH_6:case Re.NUMERIC_COMPACTION_MODE_LATCH:case Re.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case Re.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case Re.MACRO_PDF417_TERMINATOR:m--,D=!0;break;case Re.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:b[S]=Re.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,L=u[m++],j[S]=L,S++;break}}return Re.decodeTextCompaction(b,j,S,g),m}static decodeTextCompaction(u,m,g,b){let j=us.ALPHA,S=us.ALPHA,D=0;for(;D<g;){let L=u[D],U="";switch(j){case us.ALPHA:if(L<26)U=String.fromCharCode(65+L);else switch(L){case 26:U=" ";break;case Re.LL:j=us.LOWER;break;case Re.ML:j=us.MIXED;break;case Re.PS:S=j,j=us.PUNCT_SHIFT;break;case Re.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:b.append(m[D]);break;case Re.TEXT_COMPACTION_MODE_LATCH:j=us.ALPHA;break}break;case us.LOWER:if(L<26)U=String.fromCharCode(97+L);else switch(L){case 26:U=" ";break;case Re.AS:S=j,j=us.ALPHA_SHIFT;break;case Re.ML:j=us.MIXED;break;case Re.PS:S=j,j=us.PUNCT_SHIFT;break;case Re.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:b.append(m[D]);break;case Re.TEXT_COMPACTION_MODE_LATCH:j=us.ALPHA;break}break;case us.MIXED:if(L<Re.PL)U=Re.MIXED_CHARS[L];else switch(L){case Re.PL:j=us.PUNCT;break;case 26:U=" ";break;case Re.LL:j=us.LOWER;break;case Re.AL:j=us.ALPHA;break;case Re.PS:S=j,j=us.PUNCT_SHIFT;break;case Re.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:b.append(m[D]);break;case Re.TEXT_COMPACTION_MODE_LATCH:j=us.ALPHA;break}break;case us.PUNCT:if(L<Re.PAL)U=Re.PUNCT_CHARS[L];else switch(L){case Re.PAL:j=us.ALPHA;break;case Re.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:b.append(m[D]);break;case Re.TEXT_COMPACTION_MODE_LATCH:j=us.ALPHA;break}break;case us.ALPHA_SHIFT:if(j=S,L<26)U=String.fromCharCode(65+L);else switch(L){case 26:U=" ";break;case Re.TEXT_COMPACTION_MODE_LATCH:j=us.ALPHA;break}break;case us.PUNCT_SHIFT:if(j=S,L<Re.PAL)U=Re.PUNCT_CHARS[L];else switch(L){case Re.PAL:j=us.ALPHA;break;case Re.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:b.append(m[D]);break;case Re.TEXT_COMPACTION_MODE_LATCH:j=us.ALPHA;break}break}U!==""&&b.append(U),D++}}static byteCompaction(u,m,g,b,j){let S=new bJ,D=0,L=0,U=!1;switch(u){case Re.BYTE_COMPACTION_MODE_LATCH:let Y=new Int32Array(6),ee=m[b++];for(;b<m[0]&&!U;)switch(Y[D++]=ee,L=900*L+ee,ee=m[b++],ee){case Re.TEXT_COMPACTION_MODE_LATCH:case Re.BYTE_COMPACTION_MODE_LATCH:case Re.NUMERIC_COMPACTION_MODE_LATCH:case Re.BYTE_COMPACTION_MODE_LATCH_6:case Re.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case Re.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case Re.MACRO_PDF417_TERMINATOR:b--,U=!0;break;default:if(D%5===0&&D>0){for(let ae=0;ae<6;++ae)S.write(Number(Ad(L)>>Ad(8*(5-ae))));L=0,D=0}break}b===m[0]&&ee<Re.TEXT_COMPACTION_MODE_LATCH&&(Y[D++]=ee);for(let ae=0;ae<D;ae++)S.write(Y[ae]);break;case Re.BYTE_COMPACTION_MODE_LATCH_6:for(;b<m[0]&&!U;){let ae=m[b++];if(ae<Re.TEXT_COMPACTION_MODE_LATCH)D++,L=900*L+ae;else switch(ae){case Re.TEXT_COMPACTION_MODE_LATCH:case Re.BYTE_COMPACTION_MODE_LATCH:case Re.NUMERIC_COMPACTION_MODE_LATCH:case Re.BYTE_COMPACTION_MODE_LATCH_6:case Re.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case Re.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case Re.MACRO_PDF417_TERMINATOR:b--,U=!0;break}if(D%5===0&&D>0){for(let ue=0;ue<6;++ue)S.write(Number(Ad(L)>>Ad(8*(5-ue))));L=0,D=0}}break}return j.append(W.decode(S.toByteArray(),g)),b}static numericCompaction(u,m,g){let b=0,j=!1,S=new Int32Array(Re.MAX_NUMERIC_CODEWORDS);for(;m<u[0]&&!j;){let D=u[m++];if(m===u[0]&&(j=!0),D<Re.TEXT_COMPACTION_MODE_LATCH)S[b]=D,b++;else switch(D){case Re.TEXT_COMPACTION_MODE_LATCH:case Re.BYTE_COMPACTION_MODE_LATCH:case Re.BYTE_COMPACTION_MODE_LATCH_6:case Re.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case Re.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case Re.MACRO_PDF417_TERMINATOR:m--,j=!0;break}(b%Re.MAX_NUMERIC_CODEWORDS===0||D===Re.NUMERIC_COMPACTION_MODE_LATCH||j)&&b>0&&(g.append(Re.decodeBase900toBase10(S,b)),b=0)}return m}static decodeBase900toBase10(u,m){let g=Ad(0);for(let j=0;j<m;j++)g+=Re.EXP900[m-j-1]*Ad(u[j]);let b=g.toString();if(b.charAt(0)!=="1")throw new P;return b.substring(1)}}Re.TEXT_COMPACTION_MODE_LATCH=900,Re.BYTE_COMPACTION_MODE_LATCH=901,Re.NUMERIC_COMPACTION_MODE_LATCH=902,Re.BYTE_COMPACTION_MODE_LATCH_6=924,Re.ECI_USER_DEFINED=925,Re.ECI_GENERAL_PURPOSE=926,Re.ECI_CHARSET=927,Re.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,Re.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,Re.MACRO_PDF417_TERMINATOR=922,Re.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,Re.MAX_NUMERIC_CODEWORDS=15,Re.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,Re.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,Re.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,Re.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,Re.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,Re.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,Re.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,Re.PL=25,Re.LL=27,Re.AS=27,Re.ML=28,Re.AL=28,Re.PS=29,Re.PAL=29,Re.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,Re.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",Re.EXP900=tI()?vJ():[],Re.NUMBER_OF_SEQUENCE_CODEWORDS=2;class yr{constructor(){}static decode(u,m,g,b,j,S,D){let L=new r0(u,m,g,b,j),U=null,Y=null,ee;for(let be=!0;;be=!1){if(m!=null&&(U=yr.getRowIndicatorColumn(u,L,m,!0,S,D)),b!=null&&(Y=yr.getRowIndicatorColumn(u,L,b,!1,S,D)),ee=yr.merge(U,Y),ee==null)throw F.getNotFoundInstance();let we=ee.getBoundingBox();if(be&&we!=null&&(we.getMinY()<L.getMinY()||we.getMaxY()>L.getMaxY()))L=we;else break}ee.setBoundingBox(L);let ae=ee.getBarcodeColumnCount()+1;ee.setDetectionResultColumn(0,U),ee.setDetectionResultColumn(ae,Y);let ue=U!=null;for(let be=1;be<=ae;be++){let we=ue?be:ae-be;if(ee.getDetectionResultColumn(we)!==void 0)continue;let Ee;we===0||we===ae?Ee=new QT(L,we===0):Ee=new Vx(L),ee.setDetectionResultColumn(we,Ee);let Me=-1,at=Me;for(let nt=L.getMinY();nt<=L.getMaxY();nt++){if(Me=yr.getStartColumn(ee,we,nt,ue),Me<0||Me>L.getMaxX()){if(at===-1)continue;Me=at}let et=yr.detectCodeword(u,L.getMinX(),L.getMaxX(),ue,Me,nt,S,D);et!=null&&(Ee.setCodeword(nt,et),at=Me,S=Math.min(S,et.getWidth()),D=Math.max(D,et.getWidth()))}}return yr.createDecoderResult(ee)}static merge(u,m){if(u==null&&m==null)return null;let g=yr.getBarcodeMetadata(u,m);if(g==null)return null;let b=r0.merge(yr.adjustBoundingBox(u),yr.adjustBoundingBox(m));return new zx(g,b)}static adjustBoundingBox(u){if(u==null)return null;let m=u.getRowHeights();if(m==null)return null;let g=yr.getMax(m),b=0;for(let D of m)if(b+=g-D,D>0)break;let j=u.getCodewords();for(let D=0;b>0&&j[D]==null;D++)b--;let S=0;for(let D=m.length-1;D>=0&&(S+=g-m[D],!(m[D]>0));D--);for(let D=j.length-1;S>0&&j[D]==null;D--)S--;return u.getBoundingBox().addMissingRows(b,S,u.isLeft())}static getMax(u){let m=-1;for(let g of u)m=Math.max(m,g);return m}static getBarcodeMetadata(u,m){let g;if(u==null||(g=u.getBarcodeMetadata())==null)return m==null?null:m.getBarcodeMetadata();let b;return m==null||(b=m.getBarcodeMetadata())==null?g:g.getColumnCount()!==b.getColumnCount()&&g.getErrorCorrectionLevel()!==b.getErrorCorrectionLevel()&&g.getRowCount()!==b.getRowCount()?null:g}static getRowIndicatorColumn(u,m,g,b,j,S){let D=new QT(m,b);for(let L=0;L<2;L++){let U=L===0?1:-1,Y=Math.trunc(Math.trunc(g.getX()));for(let ee=Math.trunc(Math.trunc(g.getY()));ee<=m.getMaxY()&&ee>=m.getMinY();ee+=U){let ae=yr.detectCodeword(u,0,u.getWidth(),b,Y,ee,j,S);ae!=null&&(D.setCodeword(ee,ae),b?Y=ae.getStartX():Y=ae.getEndX())}}return D}static adjustCodewordCount(u,m){let g=m[0][1],b=g.getValue(),j=u.getBarcodeColumnCount()*u.getBarcodeRowCount()-yr.getNumberOfECCodeWords(u.getBarcodeECLevel());if(b.length===0){if(j<1||j>Kt.MAX_CODEWORDS_IN_BARCODE)throw F.getNotFoundInstance();g.setValue(j)}else b[0]!==j&&g.setValue(j)}static createDecoderResult(u){let m=yr.createBarcodeMatrix(u);yr.adjustCodewordCount(u,m);let g=new Array,b=new Int32Array(u.getBarcodeRowCount()*u.getBarcodeColumnCount()),j=[],S=new Array;for(let L=0;L<u.getBarcodeRowCount();L++)for(let U=0;U<u.getBarcodeColumnCount();U++){let Y=m[L][U+1].getValue(),ee=L*u.getBarcodeColumnCount()+U;Y.length===0?g.push(ee):Y.length===1?b[ee]=Y[0]:(S.push(ee),j.push(Y))}let D=new Array(j.length);for(let L=0;L<D.length;L++)D[L]=j[L];return yr.createDecoderResultFromAmbiguousValues(u.getBarcodeECLevel(),b,Kt.toIntArray(g),Kt.toIntArray(S),D)}static createDecoderResultFromAmbiguousValues(u,m,g,b,j){let S=new Int32Array(b.length),D=100;for(;D-- >0;){for(let L=0;L<S.length;L++)m[b[L]]=j[L][S[L]];try{return yr.decodeCodewords(m,u,g)}catch(L){if(!(L instanceof y))throw L}if(S.length===0)throw y.getChecksumInstance();for(let L=0;L<S.length;L++)if(S[L]<j[L].length-1){S[L]++;break}else if(S[L]=0,L===S.length-1)throw y.getChecksumInstance()}throw y.getChecksumInstance()}static createBarcodeMatrix(u){let m=Array.from({length:u.getBarcodeRowCount()},()=>new Array(u.getBarcodeColumnCount()+2));for(let b=0;b<m.length;b++)for(let j=0;j<m[b].length;j++)m[b][j]=new Wx;let g=0;for(let b of u.getDetectionResultColumns()){if(b!=null){for(let j of b.getCodewords())if(j!=null){let S=j.getRowNumber();if(S>=0){if(S>=m.length)continue;m[S][g].setValue(j.getValue())}}}g++}return m}static isValidBarcodeColumn(u,m){return m>=0&&m<=u.getBarcodeColumnCount()+1}static getStartColumn(u,m,g,b){let j=b?1:-1,S=null;if(yr.isValidBarcodeColumn(u,m-j)&&(S=u.getDetectionResultColumn(m-j).getCodeword(g)),S!=null)return b?S.getEndX():S.getStartX();if(S=u.getDetectionResultColumn(m).getCodewordNearby(g),S!=null)return b?S.getStartX():S.getEndX();if(yr.isValidBarcodeColumn(u,m-j)&&(S=u.getDetectionResultColumn(m-j).getCodewordNearby(g)),S!=null)return b?S.getEndX():S.getStartX();let D=0;for(;yr.isValidBarcodeColumn(u,m-j);){m-=j;for(let L of u.getDetectionResultColumn(m).getCodewords())if(L!=null)return(b?L.getEndX():L.getStartX())+j*D*(L.getEndX()-L.getStartX());D++}return b?u.getBoundingBox().getMinX():u.getBoundingBox().getMaxX()}static detectCodeword(u,m,g,b,j,S,D,L){j=yr.adjustCodewordStartColumn(u,m,g,b,j,S);let U=yr.getModuleBitCount(u,m,g,b,j,S);if(U==null)return null;let Y,ee=Ve.sum(U);if(b)Y=j+ee;else{for(let be=0;be<U.length/2;be++){let we=U[be];U[be]=U[U.length-1-be],U[U.length-1-be]=we}Y=j,j=Y-ee}if(!yr.checkCodewordSkew(ee,D,L))return null;let ae=yi.getDecodedValue(U),ue=Kt.getCodeword(ae);return ue===-1?null:new qx(j,Y,yr.getCodewordBucketNumber(ae),ue)}static getModuleBitCount(u,m,g,b,j,S){let D=j,L=new Int32Array(8),U=0,Y=b?1:-1,ee=b;for(;(b?D<g:D>=m)&&U<L.length;)u.get(D,S)===ee?(L[U]++,D+=Y):(U++,ee=!ee);return U===L.length||D===(b?g:m)&&U===L.length-1?L:null}static getNumberOfECCodeWords(u){return 2<<u}static adjustCodewordStartColumn(u,m,g,b,j,S){let D=j,L=b?-1:1;for(let U=0;U<2;U++){for(;(b?D>=m:D<g)&&b===u.get(D,S);){if(Math.abs(j-D)>yr.CODEWORD_SKEW_SIZE)return j;D+=L}L=-L,b=!b}return D}static checkCodewordSkew(u,m,g){return m-yr.CODEWORD_SKEW_SIZE<=u&&u<=g+yr.CODEWORD_SKEW_SIZE}static decodeCodewords(u,m,g){if(u.length===0)throw P.getFormatInstance();let b=1<<m+1,j=yr.correctErrors(u,g,b);yr.verifyCodewordCount(u,b);let S=Re.decode(u,""+m);return S.setErrorsCorrected(j),S.setErasures(g.length),S}static correctErrors(u,m,g){if(m!=null&&m.length>g/2+yr.MAX_ERRORS||g<0||g>yr.MAX_EC_CODEWORDS)throw y.getChecksumInstance();return yr.errorCorrection.decode(u,g,m)}static verifyCodewordCount(u,m){if(u.length<4)throw P.getFormatInstance();let g=u[0];if(g>u.length)throw P.getFormatInstance();if(g===0)if(m<u.length)u[0]=u.length-m;else throw P.getFormatInstance()}static getBitCountForCodeword(u){let m=new Int32Array(8),g=0,b=m.length-1;for(;!((u&1)!==g&&(g=u&1,b--,b<0));)m[b]++,u>>=1;return m}static getCodewordBucketNumber(u){return u instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(u):this.getCodewordBucketNumber_number(u)}static getCodewordBucketNumber_number(u){return yr.getCodewordBucketNumber(yr.getBitCountForCodeword(u))}static getCodewordBucketNumber_Int32Array(u){return(u[0]-u[2]+u[4]-u[6]+9)%9}static toString(u){let m=new Ux;for(let g=0;g<u.length;g++){m.format("Row %2d: ",g);for(let b=0;b<u[g].length;b++){let j=u[g][b];j.getValue().length===0?m.format("        ",null):m.format("%4d(%2d)",j.getValue()[0],j.getConfidence(j.getValue()[0]))}m.format("%n")}return m.toString()}}yr.CODEWORD_SKEW_SIZE=2,yr.MAX_ERRORS=3,yr.MAX_EC_CODEWORDS=512,yr.errorCorrection=new XT;class yn{decode(u,m=null){let g=yn.decode(u,m,!1);if(g==null||g.length===0||g[0]==null)throw F.getNotFoundInstance();return g[0]}decodeMultiple(u,m=null){try{return yn.decode(u,m,!0)}catch(g){throw g instanceof P||g instanceof y?F.getNotFoundInstance():g}}static decode(u,m,g){const b=new Array,j=gr.detectMultiple(u,m,g);for(const S of j.getPoints()){const D=yr.decode(j.getBits(),S[4],S[5],S[6],S[7],yn.getMinCodewordWidth(S),yn.getMaxCodewordWidth(S)),L=new ne(D.getText(),D.getRawBytes(),void 0,S,xe.PDF_417);L.putMetadata(oe.ERROR_CORRECTION_LEVEL,D.getECLevel());const U=D.getOther();U!=null&&L.putMetadata(oe.PDF417_EXTRA_METADATA,U),b.push(L)}return b.map(S=>S)}static getMaxWidth(u,m){return u==null||m==null?0:Math.trunc(Math.abs(u.getX()-m.getX()))}static getMinWidth(u,m){return u==null||m==null?E.MAX_VALUE:Math.trunc(Math.abs(u.getX()-m.getX()))}static getMaxCodewordWidth(u){return Math.floor(Math.max(Math.max(yn.getMaxWidth(u[0],u[4]),yn.getMaxWidth(u[6],u[2])*Kt.MODULES_IN_CODEWORD/Kt.MODULES_IN_STOP_PATTERN),Math.max(yn.getMaxWidth(u[1],u[5]),yn.getMaxWidth(u[7],u[3])*Kt.MODULES_IN_CODEWORD/Kt.MODULES_IN_STOP_PATTERN)))}static getMinCodewordWidth(u){return Math.floor(Math.min(Math.min(yn.getMinWidth(u[0],u[4]),yn.getMinWidth(u[6],u[2])*Kt.MODULES_IN_CODEWORD/Kt.MODULES_IN_STOP_PATTERN),Math.min(yn.getMinWidth(u[1],u[5]),yn.getMinWidth(u[7],u[3])*Kt.MODULES_IN_CODEWORD/Kt.MODULES_IN_STOP_PATTERN)))}reset(){}}class Bb extends d{}Bb.kind="ReaderException";class rI{constructor(u,m){this.verbose=u===!0,m&&this.setHints(m)}decode(u,m){return m&&this.setHints(m),this.decodeInternal(u)}decodeWithState(u){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(u)}setHints(u){this.hints=u;const m=!a(u)&&u.get(A.TRY_HARDER)===!0,g=a(u)?null:u.get(A.POSSIBLE_FORMATS),b=new Array;if(!a(g)){const j=g.some(S=>S===xe.UPC_A||S===xe.UPC_E||S===xe.EAN_13||S===xe.EAN_8||S===xe.CODABAR||S===xe.CODE_39||S===xe.CODE_93||S===xe.CODE_128||S===xe.ITF||S===xe.RSS_14||S===xe.RSS_EXPANDED);j&&!m&&b.push(new Bh(u,this.verbose)),g.includes(xe.QR_CODE)&&b.push(new Ed),g.includes(xe.DATA_MATRIX)&&b.push(new _d),g.includes(xe.AZTEC)&&b.push(new De),g.includes(xe.PDF_417)&&b.push(new yn),j&&m&&b.push(new Bh(u,this.verbose))}b.length===0&&(m||b.push(new Bh(u,this.verbose)),b.push(new Ed),b.push(new _d),b.push(new De),b.push(new yn),m&&b.push(new Bh(u,this.verbose))),this.readers=b}reset(){if(this.readers!==null)for(const u of this.readers)u.reset()}decodeInternal(u){if(this.readers===null)throw new Bb("No readers where selected, nothing can be read.");for(const m of this.readers)try{return m.decode(u,this.hints)}catch(g){if(g instanceof Bb)continue}throw new F("No MultiFormat Readers were able to detect the code.")}}class wJ extends he{constructor(u=null,m=500){const g=new rI;g.setHints(u),super(g,m)}decodeBitmap(u){return this.reader.decodeWithState(u)}}class jJ extends he{constructor(u=500){super(new yn,u)}}class NJ extends he{constructor(u=500){super(new Ed,u)}}var i4;(function(J){J[J.ERROR_CORRECTION=0]="ERROR_CORRECTION",J[J.CHARACTER_SET=1]="CHARACTER_SET",J[J.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",J[J.MIN_SIZE=3]="MIN_SIZE",J[J.MAX_SIZE=4]="MAX_SIZE",J[J.MARGIN=5]="MARGIN",J[J.PDF417_COMPACT=6]="PDF417_COMPACT",J[J.PDF417_COMPACTION=7]="PDF417_COMPACTION",J[J.PDF417_DIMENSIONS=8]="PDF417_DIMENSIONS",J[J.AZTEC_LAYERS=9]="AZTEC_LAYERS",J[J.QR_VERSION=10]="QR_VERSION"})(i4||(i4={}));var Ma=i4;class o4{constructor(u){this.field=u,this.cachedGenerators=[],this.cachedGenerators.push(new Z(u,Int32Array.from([1])))}buildGenerator(u){const m=this.cachedGenerators;if(u>=m.length){let g=m[m.length-1];const b=this.field;for(let j=m.length;j<=u;j++){const S=g.multiply(new Z(b,Int32Array.from([1,b.exp(j-1+b.getGeneratorBase())])));m.push(S),g=S}}return m[u]}encode(u,m){if(m===0)throw new f("No error correction bytes");const g=u.length-m;if(g<=0)throw new f("No data bytes provided");const b=this.buildGenerator(m),j=new Int32Array(g);w.arraycopy(u,0,j,0,g);let S=new Z(this.field,j);S=S.multiplyByMonomial(m,1);const L=S.divide(b)[1].getCoefficients(),U=m-L.length;for(let Y=0;Y<U;Y++)u[g+Y]=0;w.arraycopy(L,0,u,g+U,L.length)}}class ra{constructor(){}static applyMaskPenaltyRule1(u){return ra.applyMaskPenaltyRule1Internal(u,!0)+ra.applyMaskPenaltyRule1Internal(u,!1)}static applyMaskPenaltyRule2(u){let m=0;const g=u.getArray(),b=u.getWidth(),j=u.getHeight();for(let S=0;S<j-1;S++){const D=g[S];for(let L=0;L<b-1;L++){const U=D[L];U===D[L+1]&&U===g[S+1][L]&&U===g[S+1][L+1]&&m++}}return ra.N2*m}static applyMaskPenaltyRule3(u){let m=0;const g=u.getArray(),b=u.getWidth(),j=u.getHeight();for(let S=0;S<j;S++)for(let D=0;D<b;D++){const L=g[S];D+6<b&&L[D]===1&&L[D+1]===0&&L[D+2]===1&&L[D+3]===1&&L[D+4]===1&&L[D+5]===0&&L[D+6]===1&&(ra.isWhiteHorizontal(L,D-4,D)||ra.isWhiteHorizontal(L,D+7,D+11))&&m++,S+6<j&&g[S][D]===1&&g[S+1][D]===0&&g[S+2][D]===1&&g[S+3][D]===1&&g[S+4][D]===1&&g[S+5][D]===0&&g[S+6][D]===1&&(ra.isWhiteVertical(g,D,S-4,S)||ra.isWhiteVertical(g,D,S+7,S+11))&&m++}return m*ra.N3}static isWhiteHorizontal(u,m,g){m=Math.max(m,0),g=Math.min(g,u.length);for(let b=m;b<g;b++)if(u[b]===1)return!1;return!0}static isWhiteVertical(u,m,g,b){g=Math.max(g,0),b=Math.min(b,u.length);for(let j=g;j<b;j++)if(u[j][m]===1)return!1;return!0}static applyMaskPenaltyRule4(u){let m=0;const g=u.getArray(),b=u.getWidth(),j=u.getHeight();for(let L=0;L<j;L++){const U=g[L];for(let Y=0;Y<b;Y++)U[Y]===1&&m++}const S=u.getHeight()*u.getWidth();return Math.floor(Math.abs(m*2-S)*10/S)*ra.N4}static getDataMaskBit(u,m,g){let b,j;switch(u){case 0:b=g+m&1;break;case 1:b=g&1;break;case 2:b=m%3;break;case 3:b=(g+m)%3;break;case 4:b=Math.floor(g/2)+Math.floor(m/3)&1;break;case 5:j=g*m,b=(j&1)+j%3;break;case 6:j=g*m,b=(j&1)+j%3&1;break;case 7:j=g*m,b=j%3+(g+m&1)&1;break;default:throw new f("Invalid mask pattern: "+u)}return b===0}static applyMaskPenaltyRule1Internal(u,m){let g=0;const b=m?u.getHeight():u.getWidth(),j=m?u.getWidth():u.getHeight(),S=u.getArray();for(let D=0;D<b;D++){let L=0,U=-1;for(let Y=0;Y<j;Y++){const ee=m?S[D][Y]:S[Y][D];ee===U?L++:(L>=5&&(g+=ra.N1+(L-5)),L=1,U=ee)}L>=5&&(g+=ra.N1+(L-5))}return g}}ra.N1=3,ra.N2=3,ra.N3=40,ra.N4=10;class $b{constructor(u,m){this.width=u,this.height=m;const g=new Array(m);for(let b=0;b!==m;b++)g[b]=new Uint8Array(u);this.bytes=g}getHeight(){return this.height}getWidth(){return this.width}get(u,m){return this.bytes[m][u]}getArray(){return this.bytes}setNumber(u,m,g){this.bytes[m][u]=g}setBoolean(u,m,g){this.bytes[m][u]=g?1:0}clear(u){for(const m of this.bytes)C.fill(m,u)}equals(u){if(!(u instanceof $b))return!1;const m=u;if(this.width!==m.width||this.height!==m.height)return!1;for(let g=0,b=this.height;g<b;++g){const j=this.bytes[g],S=m.bytes[g];for(let D=0,L=this.width;D<L;++D)if(j[D]!==S[D])return!1}return!0}toString(){const u=new B;for(let m=0,g=this.height;m<g;++m){const b=this.bytes[m];for(let j=0,S=this.width;j<S;++j)switch(b[j]){case 0:u.append(" 0");break;case 1:u.append(" 1");break;default:u.append("  ");break}u.append(`
`)}return u.toString()}}class s0{constructor(){this.maskPattern=-1}getMode(){return this.mode}getECLevel(){return this.ecLevel}getVersion(){return this.version}getMaskPattern(){return this.maskPattern}getMatrix(){return this.matrix}toString(){const u=new B;return u.append(`<<
`),u.append(" mode: "),u.append(this.mode?this.mode.toString():"null"),u.append(`
 ecLevel: `),u.append(this.ecLevel?this.ecLevel.toString():"null"),u.append(`
 version: `),u.append(this.version?this.version.toString():"null"),u.append(`
 maskPattern: `),u.append(this.maskPattern.toString()),this.matrix?(u.append(`
 matrix:
`),u.append(this.matrix.toString())):u.append(`
 matrix: null
`),u.append(`>>
`),u.toString()}setMode(u){this.mode=u}setECLevel(u){this.ecLevel=u}setVersion(u){this.version=u}setMaskPattern(u){this.maskPattern=u}setMatrix(u){this.matrix=u}static isValidMaskPattern(u){return u>=0&&u<s0.NUM_MASK_PATTERNS}}s0.NUM_MASK_PATTERNS=8;class ms extends d{}ms.kind="WriterException";class zt{constructor(){}static clearMatrix(u){u.clear(255)}static buildMatrix(u,m,g,b,j){zt.clearMatrix(j),zt.embedBasicPatterns(g,j),zt.embedTypeInfo(m,b,j),zt.maybeEmbedVersionInfo(g,j),zt.embedDataBits(u,b,j)}static embedBasicPatterns(u,m){zt.embedPositionDetectionPatternsAndSeparators(m),zt.embedDarkDotAtLeftBottomCorner(m),zt.maybeEmbedPositionAdjustmentPatterns(u,m),zt.embedTimingPatterns(m)}static embedTypeInfo(u,m,g){const b=new _;zt.makeTypeInfoBits(u,m,b);for(let j=0,S=b.getSize();j<S;++j){const D=b.get(b.getSize()-1-j),L=zt.TYPE_INFO_COORDINATES[j],U=L[0],Y=L[1];if(g.setBoolean(U,Y,D),j<8){const ee=g.getWidth()-j-1;g.setBoolean(ee,8,D)}else{const ae=g.getHeight()-7+(j-8);g.setBoolean(8,ae,D)}}}static maybeEmbedVersionInfo(u,m){if(u.getVersionNumber()<7)return;const g=new _;zt.makeVersionInfoBits(u,g);let b=6*3-1;for(let j=0;j<6;++j)for(let S=0;S<3;++S){const D=g.get(b);b--,m.setBoolean(j,m.getHeight()-11+S,D),m.setBoolean(m.getHeight()-11+S,j,D)}}static embedDataBits(u,m,g){let b=0,j=-1,S=g.getWidth()-1,D=g.getHeight()-1;for(;S>0;){for(S===6&&(S-=1);D>=0&&D<g.getHeight();){for(let L=0;L<2;++L){const U=S-L;if(!zt.isEmpty(g.get(U,D)))continue;let Y;b<u.getSize()?(Y=u.get(b),++b):Y=!1,m!==255&&ra.getDataMaskBit(m,U,D)&&(Y=!Y),g.setBoolean(U,D,Y)}D+=j}j=-j,D+=j,S-=2}if(b!==u.getSize())throw new ms("Not all bits consumed: "+b+"/"+u.getSize())}static findMSBSet(u){return 32-E.numberOfLeadingZeros(u)}static calculateBCHCode(u,m){if(m===0)throw new f("0 polynomial");const g=zt.findMSBSet(m);for(u<<=g-1;zt.findMSBSet(u)>=g;)u^=m<<zt.findMSBSet(u)-g;return u}static makeTypeInfoBits(u,m,g){if(!s0.isValidMaskPattern(m))throw new ms("Invalid mask pattern");const b=u.getBits()<<3|m;g.appendBits(b,5);const j=zt.calculateBCHCode(b,zt.TYPE_INFO_POLY);g.appendBits(j,10);const S=new _;if(S.appendBits(zt.TYPE_INFO_MASK_PATTERN,15),g.xor(S),g.getSize()!==15)throw new ms("should not happen but we got: "+g.getSize())}static makeVersionInfoBits(u,m){m.appendBits(u.getVersionNumber(),6);const g=zt.calculateBCHCode(u.getVersionNumber(),zt.VERSION_INFO_POLY);if(m.appendBits(g,12),m.getSize()!==18)throw new ms("should not happen but we got: "+m.getSize())}static isEmpty(u){return u===255}static embedTimingPatterns(u){for(let m=8;m<u.getWidth()-8;++m){const g=(m+1)%2;zt.isEmpty(u.get(m,6))&&u.setNumber(m,6,g),zt.isEmpty(u.get(6,m))&&u.setNumber(6,m,g)}}static embedDarkDotAtLeftBottomCorner(u){if(u.get(8,u.getHeight()-8)===0)throw new ms;u.setNumber(8,u.getHeight()-8,1)}static embedHorizontalSeparationPattern(u,m,g){for(let b=0;b<8;++b){if(!zt.isEmpty(g.get(u+b,m)))throw new ms;g.setNumber(u+b,m,0)}}static embedVerticalSeparationPattern(u,m,g){for(let b=0;b<7;++b){if(!zt.isEmpty(g.get(u,m+b)))throw new ms;g.setNumber(u,m+b,0)}}static embedPositionAdjustmentPattern(u,m,g){for(let b=0;b<5;++b){const j=zt.POSITION_ADJUSTMENT_PATTERN[b];for(let S=0;S<5;++S)g.setNumber(u+S,m+b,j[S])}}static embedPositionDetectionPattern(u,m,g){for(let b=0;b<7;++b){const j=zt.POSITION_DETECTION_PATTERN[b];for(let S=0;S<7;++S)g.setNumber(u+S,m+b,j[S])}}static embedPositionDetectionPatternsAndSeparators(u){const m=zt.POSITION_DETECTION_PATTERN[0].length;zt.embedPositionDetectionPattern(0,0,u),zt.embedPositionDetectionPattern(u.getWidth()-m,0,u),zt.embedPositionDetectionPattern(0,u.getWidth()-m,u);const g=8;zt.embedHorizontalSeparationPattern(0,g-1,u),zt.embedHorizontalSeparationPattern(u.getWidth()-g,g-1,u),zt.embedHorizontalSeparationPattern(0,u.getWidth()-g,u);const b=7;zt.embedVerticalSeparationPattern(b,0,u),zt.embedVerticalSeparationPattern(u.getHeight()-b-1,0,u),zt.embedVerticalSeparationPattern(b,u.getHeight()-b,u)}static maybeEmbedPositionAdjustmentPatterns(u,m){if(u.getVersionNumber()<2)return;const g=u.getVersionNumber()-1,b=zt.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[g];for(let j=0,S=b.length;j!==S;j++){const D=b[j];if(D>=0)for(let L=0;L!==S;L++){const U=b[L];U>=0&&zt.isEmpty(m.get(U,D))&&zt.embedPositionAdjustmentPattern(U-2,D-2,m)}}}}zt.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),zt.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),zt.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),zt.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),zt.VERSION_INFO_POLY=7973,zt.TYPE_INFO_POLY=1335,zt.TYPE_INFO_MASK_PATTERN=21522;class kJ{constructor(u,m){this.dataBytes=u,this.errorCorrectionBytes=m}getDataBytes(){return this.dataBytes}getErrorCorrectionBytes(){return this.errorCorrectionBytes}}class _s{constructor(){}static calculateMaskPenalty(u){return ra.applyMaskPenaltyRule1(u)+ra.applyMaskPenaltyRule2(u)+ra.applyMaskPenaltyRule3(u)+ra.applyMaskPenaltyRule4(u)}static encode(u,m,g=null){let b=_s.DEFAULT_BYTE_MODE_ENCODING;const j=g!==null&&g.get(Ma.CHARACTER_SET)!==void 0;j&&(b=g.get(Ma.CHARACTER_SET).toString());const S=this.chooseMode(u,b),D=new _;if(S===$t.BYTE&&(j||_s.DEFAULT_BYTE_MODE_ENCODING!==b)){const nt=R.getCharacterSetECIByName(b);nt!==void 0&&this.appendECI(nt,D)}this.appendModeInfo(S,D);const L=new _;this.appendBytes(u,S,L,b);let U;if(g!==null&&g.get(Ma.QR_VERSION)!==void 0){const nt=Number.parseInt(g.get(Ma.QR_VERSION).toString(),10);U=Ft.getVersionForNumber(nt);const et=this.calculateBitsNeeded(S,D,L,U);if(!this.willFit(et,U,m))throw new ms("Data too big for requested version")}else U=this.recommendVersion(m,S,D,L);const Y=new _;Y.appendBitArray(D);const ee=S===$t.BYTE?L.getSizeInBytes():u.length;this.appendLengthInfo(ee,U,S,Y),Y.appendBitArray(L);const ae=U.getECBlocksForLevel(m),ue=U.getTotalCodewords()-ae.getTotalECCodewords();this.terminateBits(ue,Y);const be=this.interleaveWithECBytes(Y,U.getTotalCodewords(),ue,ae.getNumBlocks()),we=new s0;we.setECLevel(m),we.setMode(S),we.setVersion(U);const Ee=U.getDimensionForVersion(),Me=new $b(Ee,Ee),at=this.chooseMaskPattern(be,m,U,Me);return we.setMaskPattern(at),zt.buildMatrix(be,m,U,at,Me),we.setMatrix(Me),we}static recommendVersion(u,m,g,b){const j=this.calculateBitsNeeded(m,g,b,Ft.getVersionForNumber(1)),S=this.chooseVersion(j,u),D=this.calculateBitsNeeded(m,g,b,S);return this.chooseVersion(D,u)}static calculateBitsNeeded(u,m,g,b){return m.getSize()+u.getCharacterCountBits(b)+g.getSize()}static getAlphanumericCode(u){return u<_s.ALPHANUMERIC_TABLE.length?_s.ALPHANUMERIC_TABLE[u]:-1}static chooseMode(u,m=null){if(R.SJIS.getName()===m&&this.isOnlyDoubleByteKanji(u))return $t.KANJI;let g=!1,b=!1;for(let j=0,S=u.length;j<S;++j){const D=u.charAt(j);if(_s.isDigit(D))g=!0;else if(this.getAlphanumericCode(D.charCodeAt(0))!==-1)b=!0;else return $t.BYTE}return b?$t.ALPHANUMERIC:g?$t.NUMERIC:$t.BYTE}static isOnlyDoubleByteKanji(u){let m;try{m=W.encode(u,R.SJIS)}catch{return!1}const g=m.length;if(g%2!==0)return!1;for(let b=0;b<g;b+=2){const j=m[b]&255;if((j<129||j>159)&&(j<224||j>235))return!1}return!0}static chooseMaskPattern(u,m,g,b){let j=Number.MAX_SAFE_INTEGER,S=-1;for(let D=0;D<s0.NUM_MASK_PATTERNS;D++){zt.buildMatrix(u,m,g,D,b);let L=this.calculateMaskPenalty(b);L<j&&(j=L,S=D)}return S}static chooseVersion(u,m){for(let g=1;g<=40;g++){const b=Ft.getVersionForNumber(g);if(_s.willFit(u,b,m))return b}throw new ms("Data too big")}static willFit(u,m,g){const b=m.getTotalCodewords(),S=m.getECBlocksForLevel(g).getTotalECCodewords(),D=b-S,L=(u+7)/8;return D>=L}static terminateBits(u,m){const g=u*8;if(m.getSize()>g)throw new ms("data bits cannot fit in the QR Code"+m.getSize()+" > "+g);for(let S=0;S<4&&m.getSize()<g;++S)m.appendBit(!1);const b=m.getSize()&7;if(b>0)for(let S=b;S<8;S++)m.appendBit(!1);const j=u-m.getSizeInBytes();for(let S=0;S<j;++S)m.appendBits(S&1?17:236,8);if(m.getSize()!==g)throw new ms("Bits size does not equal capacity")}static getNumDataBytesAndNumECBytesForBlockID(u,m,g,b,j,S){if(b>=g)throw new ms("Block ID too large");const D=u%g,L=g-D,U=Math.floor(u/g),Y=U+1,ee=Math.floor(m/g),ae=ee+1,ue=U-ee,be=Y-ae;if(ue!==be)throw new ms("EC bytes mismatch");if(g!==L+D)throw new ms("RS blocks mismatch");if(u!==(ee+ue)*L+(ae+be)*D)throw new ms("Total bytes mismatch");b<L?(j[0]=ee,S[0]=ue):(j[0]=ae,S[0]=be)}static interleaveWithECBytes(u,m,g,b){if(u.getSizeInBytes()!==g)throw new ms("Number of bits and data bytes does not match");let j=0,S=0,D=0;const L=new Array;for(let Y=0;Y<b;++Y){const ee=new Int32Array(1),ae=new Int32Array(1);_s.getNumDataBytesAndNumECBytesForBlockID(m,g,b,Y,ee,ae);const ue=ee[0],be=new Uint8Array(ue);u.toBytes(8*j,be,0,ue);const we=_s.generateECBytes(be,ae[0]);L.push(new kJ(be,we)),S=Math.max(S,ue),D=Math.max(D,we.length),j+=ee[0]}if(g!==j)throw new ms("Data bytes does not match offset");const U=new _;for(let Y=0;Y<S;++Y)for(const ee of L){const ae=ee.getDataBytes();Y<ae.length&&U.appendBits(ae[Y],8)}for(let Y=0;Y<D;++Y)for(const ee of L){const ae=ee.getErrorCorrectionBytes();Y<ae.length&&U.appendBits(ae[Y],8)}if(m!==U.getSizeInBytes())throw new ms("Interleaving error: "+m+" and "+U.getSizeInBytes()+" differ.");return U}static generateECBytes(u,m){const g=u.length,b=new Int32Array(g+m);for(let S=0;S<g;S++)b[S]=u[S]&255;new o4(re.QR_CODE_FIELD_256).encode(b,m);const j=new Uint8Array(m);for(let S=0;S<m;S++)j[S]=b[g+S];return j}static appendModeInfo(u,m){m.appendBits(u.getBits(),4)}static appendLengthInfo(u,m,g,b){const j=g.getCharacterCountBits(m);if(u>=1<<j)throw new ms(u+" is bigger than "+((1<<j)-1));b.appendBits(u,j)}static appendBytes(u,m,g,b){switch(m){case $t.NUMERIC:_s.appendNumericBytes(u,g);break;case $t.ALPHANUMERIC:_s.appendAlphanumericBytes(u,g);break;case $t.BYTE:_s.append8BitBytes(u,g,b);break;case $t.KANJI:_s.appendKanjiBytes(u,g);break;default:throw new ms("Invalid mode: "+m)}}static getDigit(u){return u.charCodeAt(0)-48}static isDigit(u){const m=_s.getDigit(u);return m>=0&&m<=9}static appendNumericBytes(u,m){const g=u.length;let b=0;for(;b<g;){const j=_s.getDigit(u.charAt(b));if(b+2<g){const S=_s.getDigit(u.charAt(b+1)),D=_s.getDigit(u.charAt(b+2));m.appendBits(j*100+S*10+D,10),b+=3}else if(b+1<g){const S=_s.getDigit(u.charAt(b+1));m.appendBits(j*10+S,7),b+=2}else m.appendBits(j,4),b++}}static appendAlphanumericBytes(u,m){const g=u.length;let b=0;for(;b<g;){const j=_s.getAlphanumericCode(u.charCodeAt(b));if(j===-1)throw new ms;if(b+1<g){const S=_s.getAlphanumericCode(u.charCodeAt(b+1));if(S===-1)throw new ms;m.appendBits(j*45+S,11),b+=2}else m.appendBits(j,6),b++}}static append8BitBytes(u,m,g){let b;try{b=W.encode(u,g)}catch(j){throw new ms(j)}for(let j=0,S=b.length;j!==S;j++){const D=b[j];m.appendBits(D,8)}}static appendKanjiBytes(u,m){let g;try{g=W.encode(u,R.SJIS)}catch(j){throw new ms(j)}const b=g.length;for(let j=0;j<b;j+=2){const S=g[j]&255,D=g[j+1]&255,L=S<<8&4294967295|D;let U=-1;if(L>=33088&&L<=40956?U=L-33088:L>=57408&&L<=60351&&(U=L-49472),U===-1)throw new ms("Invalid byte sequence");const Y=(U>>8)*192+(U&255);m.appendBits(Y,13)}}static appendECI(u,m){m.appendBits($t.ECI.getBits(),4),m.appendBits(u.getValue(),8)}}_s.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),_s.DEFAULT_BYTE_MODE_ENCODING=R.UTF8.getName();class a0{write(u,m,g,b=null){if(u.length===0)throw new f("Found empty contents");if(m<0||g<0)throw new f("Requested dimensions are too small: "+m+"x"+g);let j=ws.L,S=a0.QUIET_ZONE_SIZE;b!==null&&(b.get(Ma.ERROR_CORRECTION)!==void 0&&(j=ws.fromString(b.get(Ma.ERROR_CORRECTION).toString())),b.get(Ma.MARGIN)!==void 0&&(S=Number.parseInt(b.get(Ma.MARGIN).toString(),10)));const D=_s.encode(u,j,b);return this.renderResult(D,m,g,S)}writeToDom(u,m,g,b,j=null){typeof u=="string"&&(u=document.querySelector(u));const S=this.write(m,g,b,j);u&&u.appendChild(S)}renderResult(u,m,g,b){const j=u.getMatrix();if(j===null)throw new Se;const S=j.getWidth(),D=j.getHeight(),L=S+b*2,U=D+b*2,Y=Math.max(m,L),ee=Math.max(g,U),ae=Math.min(Math.floor(Y/L),Math.floor(ee/U)),ue=Math.floor((Y-S*ae)/2),be=Math.floor((ee-D*ae)/2),we=this.createSVGElement(Y,ee);for(let Ee=0,Me=be;Ee<D;Ee++,Me+=ae)for(let at=0,nt=ue;at<S;at++,nt+=ae)if(j.get(at,Ee)===1){const et=this.createSvgRectElement(nt,Me,ae,ae);we.appendChild(et)}return we}createSVGElement(u,m){const g=document.createElementNS(a0.SVG_NS,"svg");return g.setAttributeNS(null,"height",u.toString()),g.setAttributeNS(null,"width",m.toString()),g}createSvgRectElement(u,m,g,b){const j=document.createElementNS(a0.SVG_NS,"rect");return j.setAttributeNS(null,"x",u.toString()),j.setAttributeNS(null,"y",m.toString()),j.setAttributeNS(null,"height",g.toString()),j.setAttributeNS(null,"width",b.toString()),j.setAttributeNS(null,"fill","#000000"),j}}a0.QUIET_ZONE_SIZE=4,a0.SVG_NS="http://www.w3.org/2000/svg";class Uh{encode(u,m,g,b,j){if(u.length===0)throw new f("Found empty contents");if(m!==xe.QR_CODE)throw new f("Can only encode QR_CODE, but got "+m);if(g<0||b<0)throw new f(`Requested dimensions are too small: ${g}x${b}`);let S=ws.L,D=Uh.QUIET_ZONE_SIZE;j!==null&&(j.get(Ma.ERROR_CORRECTION)!==void 0&&(S=ws.fromString(j.get(Ma.ERROR_CORRECTION).toString())),j.get(Ma.MARGIN)!==void 0&&(D=Number.parseInt(j.get(Ma.MARGIN).toString(),10)));const L=_s.encode(u,S,j);return Uh.renderResult(L,g,b,D)}static renderResult(u,m,g,b){const j=u.getMatrix();if(j===null)throw new Se;const S=j.getWidth(),D=j.getHeight(),L=S+b*2,U=D+b*2,Y=Math.max(m,L),ee=Math.max(g,U),ae=Math.min(Math.floor(Y/L),Math.floor(ee/U)),ue=Math.floor((Y-S*ae)/2),be=Math.floor((ee-D*ae)/2),we=new O(Y,ee);for(let Ee=0,Me=be;Ee<D;Ee++,Me+=ae)for(let at=0,nt=ue;at<S;at++,nt+=ae)j.get(at,Ee)===1&&we.setRegion(nt,Me,ae,ae);return we}}Uh.QUIET_ZONE_SIZE=4;class SJ{encode(u,m,g,b,j){let S;switch(m){case xe.QR_CODE:S=new Uh;break;default:throw new f("No encoder available for format "+m)}return S.encode(u,m,g,b,j)}}class Ll extends K{constructor(u,m,g,b,j,S,D,L){if(super(S,D),this.yuvData=u,this.dataWidth=m,this.dataHeight=g,this.left=b,this.top=j,b+S>m||j+D>g)throw new f("Crop rectangle does not fit within image data.");L&&this.reverseHorizontal(S,D)}getRow(u,m){if(u<0||u>=this.getHeight())throw new f("Requested row is outside the image: "+u);const g=this.getWidth();(m==null||m.length<g)&&(m=new Uint8ClampedArray(g));const b=(u+this.top)*this.dataWidth+this.left;return w.arraycopy(this.yuvData,b,m,0,g),m}getMatrix(){const u=this.getWidth(),m=this.getHeight();if(u===this.dataWidth&&m===this.dataHeight)return this.yuvData;const g=u*m,b=new Uint8ClampedArray(g);let j=this.top*this.dataWidth+this.left;if(u===this.dataWidth)return w.arraycopy(this.yuvData,j,b,0,g),b;for(let S=0;S<m;S++){const D=S*u;w.arraycopy(this.yuvData,j,b,D,u),j+=this.dataWidth}return b}isCropSupported(){return!0}crop(u,m,g,b){return new Ll(this.yuvData,this.dataWidth,this.dataHeight,this.left+u,this.top+m,g,b,!1)}renderThumbnail(){const u=this.getWidth()/Ll.THUMBNAIL_SCALE_FACTOR,m=this.getHeight()/Ll.THUMBNAIL_SCALE_FACTOR,g=new Int32Array(u*m),b=this.yuvData;let j=this.top*this.dataWidth+this.left;for(let S=0;S<m;S++){const D=S*u;for(let L=0;L<u;L++){const U=b[j+L*Ll.THUMBNAIL_SCALE_FACTOR]&255;g[D+L]=4278190080|U*65793}j+=this.dataWidth*Ll.THUMBNAIL_SCALE_FACTOR}return g}getThumbnailWidth(){return this.getWidth()/Ll.THUMBNAIL_SCALE_FACTOR}getThumbnailHeight(){return this.getHeight()/Ll.THUMBNAIL_SCALE_FACTOR}reverseHorizontal(u,m){const g=this.yuvData;for(let b=0,j=this.top*this.dataWidth+this.left;b<m;b++,j+=this.dataWidth){const S=j+u/2;for(let D=j,L=j+u-1;D<S;D++,L--){const U=g[D];g[D]=g[L],g[L]=U}}}invert(){return new V(this)}}Ll.THUMBNAIL_SCALE_FACTOR=2;class l4 extends K{constructor(u,m,g,b,j,S,D){if(super(m,g),this.dataWidth=b,this.dataHeight=j,this.left=S,this.top=D,u.BYTES_PER_ELEMENT===4){const L=m*g,U=new Uint8ClampedArray(L);for(let Y=0;Y<L;Y++){const ee=u[Y],ae=ee>>16&255,ue=ee>>7&510,be=ee&255;U[Y]=(ae+ue+be)/4&255}this.luminances=U}else this.luminances=u;if(b===void 0&&(this.dataWidth=m),j===void 0&&(this.dataHeight=g),S===void 0&&(this.left=0),D===void 0&&(this.top=0),this.left+m>this.dataWidth||this.top+g>this.dataHeight)throw new f("Crop rectangle does not fit within image data.")}getRow(u,m){if(u<0||u>=this.getHeight())throw new f("Requested row is outside the image: "+u);const g=this.getWidth();(m==null||m.length<g)&&(m=new Uint8ClampedArray(g));const b=(u+this.top)*this.dataWidth+this.left;return w.arraycopy(this.luminances,b,m,0,g),m}getMatrix(){const u=this.getWidth(),m=this.getHeight();if(u===this.dataWidth&&m===this.dataHeight)return this.luminances;const g=u*m,b=new Uint8ClampedArray(g);let j=this.top*this.dataWidth+this.left;if(u===this.dataWidth)return w.arraycopy(this.luminances,j,b,0,g),b;for(let S=0;S<m;S++){const D=S*u;w.arraycopy(this.luminances,j,b,D,u),j+=this.dataWidth}return b}isCropSupported(){return!0}crop(u,m,g,b){return new l4(this.luminances,g,b,this.dataWidth,this.dataHeight,this.left+u,this.top+m)}invert(){return new V(this)}}class sI extends R{static forName(u){return this.getCharacterSetECIByName(u)}}class c4{}c4.ISO_8859_1=R.ISO8859_1;class aI{isCompact(){return this.compact}setCompact(u){this.compact=u}getSize(){return this.size}setSize(u){this.size=u}getLayers(){return this.layers}setLayers(u){this.layers=u}getCodeWords(){return this.codeWords}setCodeWords(u){this.codeWords=u}getMatrix(){return this.matrix}setMatrix(u){this.matrix=u}}class nI{static singletonList(u){return[u]}static min(u,m){return u.sort(m)[0]}}class CJ{constructor(u){this.previous=u}getPrevious(){return this.previous}}class Vh extends CJ{constructor(u,m,g){super(u),this.value=m,this.bitCount=g}appendTo(u,m){u.appendBits(this.value,this.bitCount)}add(u,m){return new Vh(this,u,m)}addBinaryShift(u,m){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new Vh(this,u,m)}toString(){let u=this.value&(1<<this.bitCount)-1;return u|=1<<this.bitCount,"<"+E.toBinaryString(u|1<<this.bitCount).substring(1)+">"}}class d4 extends Vh{constructor(u,m,g){super(u,0,0),this.binaryShiftStart=m,this.binaryShiftByteCount=g}appendTo(u,m){for(let g=0;g<this.binaryShiftByteCount;g++)(g===0||g===31&&this.binaryShiftByteCount<=62)&&(u.appendBits(31,5),this.binaryShiftByteCount>62?u.appendBits(this.binaryShiftByteCount-31,16):g===0?u.appendBits(Math.min(this.binaryShiftByteCount,31),5):u.appendBits(this.binaryShiftByteCount-31,5)),u.appendBits(m[this.binaryShiftStart+g],8)}addBinaryShift(u,m){return new d4(this,u,m)}toString(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"}}function _J(J,u,m){return new d4(J,u,m)}function Hx(J,u,m){return new Vh(J,u,m)}const EJ=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],Pd=0,Ub=1,jo=2,iI=3,Fl=4,AJ=new Vh(null,0,0),u4=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])];function PJ(J){for(let u of J)C.fill(u,-1);return J[Pd][Fl]=0,J[Ub][Fl]=0,J[Ub][Pd]=28,J[iI][Fl]=0,J[jo][Fl]=0,J[jo][Pd]=15,J}const oI=PJ(C.createInt32Array(6,6));class Bl{constructor(u,m,g,b){this.token=u,this.mode=m,this.binaryShiftByteCount=g,this.bitCount=b}getMode(){return this.mode}getToken(){return this.token}getBinaryShiftByteCount(){return this.binaryShiftByteCount}getBitCount(){return this.bitCount}latchAndAppend(u,m){let g=this.bitCount,b=this.token;if(u!==this.mode){let S=u4[this.mode][u];b=Hx(b,S&65535,S>>16),g+=S>>16}let j=u===jo?4:5;return b=Hx(b,m,j),new Bl(b,u,0,g+j)}shiftAndAppend(u,m){let g=this.token,b=this.mode===jo?4:5;return g=Hx(g,oI[this.mode][u],b),g=Hx(g,m,5),new Bl(g,this.mode,0,this.bitCount+b+5)}addBinaryShiftChar(u){let m=this.token,g=this.mode,b=this.bitCount;if(this.mode===Fl||this.mode===jo){let D=u4[g][Pd];m=Hx(m,D&65535,D>>16),b+=D>>16,g=Pd}let j=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,S=new Bl(m,g,this.binaryShiftByteCount+1,b+j);return S.binaryShiftByteCount===2078&&(S=S.endBinaryShift(u+1)),S}endBinaryShift(u){if(this.binaryShiftByteCount===0)return this;let m=this.token;return m=_J(m,u-this.binaryShiftByteCount,this.binaryShiftByteCount),new Bl(m,this.mode,0,this.bitCount)}isBetterThanOrEqualTo(u){let m=this.bitCount+(u4[this.mode][u.mode]>>16);return this.binaryShiftByteCount<u.binaryShiftByteCount?m+=Bl.calculateBinaryShiftCost(u)-Bl.calculateBinaryShiftCost(this):this.binaryShiftByteCount>u.binaryShiftByteCount&&u.binaryShiftByteCount>0&&(m+=10),m<=u.bitCount}toBitArray(u){let m=[];for(let b=this.endBinaryShift(u.length).token;b!==null;b=b.getPrevious())m.unshift(b);let g=new _;for(const b of m)b.appendTo(g,u);return g}toString(){return I.format("%s bits=%d bytes=%d",EJ[this.mode],this.bitCount,this.binaryShiftByteCount)}static calculateBinaryShiftCost(u){return u.binaryShiftByteCount>62?21:u.binaryShiftByteCount>31?20:u.binaryShiftByteCount>0?10:0}}Bl.INITIAL_STATE=new Bl(AJ,Pd,0,0);function TJ(J){const u=I.getCharCode(" "),m=I.getCharCode("."),g=I.getCharCode(",");J[Pd][u]=1;const b=I.getCharCode("Z"),j=I.getCharCode("A");for(let ae=j;ae<=b;ae++)J[Pd][ae]=ae-j+2;J[Ub][u]=1;const S=I.getCharCode("z"),D=I.getCharCode("a");for(let ae=D;ae<=S;ae++)J[Ub][ae]=ae-D+2;J[jo][u]=1;const L=I.getCharCode("9"),U=I.getCharCode("0");for(let ae=U;ae<=L;ae++)J[jo][ae]=ae-U+2;J[jo][g]=12,J[jo][m]=13;const Y=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""];for(let ae=0;ae<Y.length;ae++)J[iI][I.getCharCode(Y[ae])]=ae;const ee=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"];for(let ae=0;ae<ee.length;ae++)I.getCharCode(ee[ae])>0&&(J[Fl][I.getCharCode(ee[ae])]=ae);return J}const h4=TJ(C.createInt32Array(5,256));class Kx{constructor(u){this.text=u}encode(){const u=I.getCharCode(" "),m=I.getCharCode(`
`);let g=nI.singletonList(Bl.INITIAL_STATE);for(let j=0;j<this.text.length;j++){let S,D=j+1<this.text.length?this.text[j+1]:0;switch(this.text[j]){case I.getCharCode("\r"):S=D===m?2:0;break;case I.getCharCode("."):S=D===u?3:0;break;case I.getCharCode(","):S=D===u?4:0;break;case I.getCharCode(":"):S=D===u?5:0;break;default:S=0}S>0?(g=Kx.updateStateListForPair(g,j,S),j++):g=this.updateStateListForChar(g,j)}return nI.min(g,(j,S)=>j.getBitCount()-S.getBitCount()).toBitArray(this.text)}updateStateListForChar(u,m){const g=[];for(let b of u)this.updateStateForChar(b,m,g);return Kx.simplifyStates(g)}updateStateForChar(u,m,g){let b=this.text[m]&255,j=h4[u.getMode()][b]>0,S=null;for(let D=0;D<=Fl;D++){let L=h4[D][b];if(L>0){if(S==null&&(S=u.endBinaryShift(m)),!j||D===u.getMode()||D===jo){const U=S.latchAndAppend(D,L);g.push(U)}if(!j&&oI[u.getMode()][D]>=0){const U=S.shiftAndAppend(D,L);g.push(U)}}}if(u.getBinaryShiftByteCount()>0||h4[u.getMode()][b]===0){let D=u.addBinaryShiftChar(m);g.push(D)}}static updateStateListForPair(u,m,g){const b=[];for(let j of u)this.updateStateForPair(j,m,g,b);return this.simplifyStates(b)}static updateStateForPair(u,m,g,b){let j=u.endBinaryShift(m);if(b.push(j.latchAndAppend(Fl,g)),u.getMode()!==Fl&&b.push(j.shiftAndAppend(Fl,g)),g===3||g===4){let S=j.latchAndAppend(jo,16-g).latchAndAppend(jo,1);b.push(S)}if(u.getBinaryShiftByteCount()>0){let S=u.addBinaryShiftChar(m).addBinaryShiftChar(m+1);b.push(S)}}static simplifyStates(u){let m=[];for(const g of u){let b=!0;for(const j of m){if(j.isBetterThanOrEqualTo(g)){b=!1;break}g.isBetterThanOrEqualTo(j)&&(m=m.filter(S=>S!==j))}b&&m.push(g)}return m}}class Tr{constructor(){}static encodeBytes(u){return Tr.encode(u,Tr.DEFAULT_EC_PERCENT,Tr.DEFAULT_AZTEC_LAYERS)}static encode(u,m,g){let b=new Kx(u).encode(),j=E.truncDivision(b.getSize()*m,100)+11,S=b.getSize()+j,D,L,U,Y,ee;if(g!==Tr.DEFAULT_AZTEC_LAYERS){if(D=g<0,L=Math.abs(g),L>(D?Tr.MAX_NB_BITS_COMPACT:Tr.MAX_NB_BITS))throw new f(I.format("Illegal value %s for layers",g));U=Tr.totalBitsInLayer(L,D),Y=Tr.WORD_SIZE[L];let et=U-U%Y;if(ee=Tr.stuffBits(b,Y),ee.getSize()+j>et)throw new f("Data to large for user specified layer");if(D&&ee.getSize()>Y*64)throw new f("Data to large for user specified layer")}else{Y=0,ee=null;for(let et=0;;et++){if(et>Tr.MAX_NB_BITS)throw new f("Data too large for an Aztec code");if(D=et<=3,L=D?et+1:et,U=Tr.totalBitsInLayer(L,D),S>U)continue;(ee==null||Y!==Tr.WORD_SIZE[L])&&(Y=Tr.WORD_SIZE[L],ee=Tr.stuffBits(b,Y));let Sr=U-U%Y;if(!(D&&ee.getSize()>Y*64)&&ee.getSize()+j<=Sr)break}}let ae=Tr.generateCheckWords(ee,U,Y),ue=ee.getSize()/Y,be=Tr.generateModeMessage(D,L,ue),we=(D?11:14)+L*4,Ee=new Int32Array(we),Me;if(D){Me=we;for(let et=0;et<Ee.length;et++)Ee[et]=et}else{Me=we+1+2*E.truncDivision(E.truncDivision(we,2)-1,15);let et=E.truncDivision(we,2),Sr=E.truncDivision(Me,2);for(let hr=0;hr<et;hr++){let bi=hr+E.truncDivision(hr,15);Ee[et-hr-1]=Sr-bi-1,Ee[et+hr]=Sr+bi+1}}let at=new O(Me);for(let et=0,Sr=0;et<L;et++){let hr=(L-et)*4+(D?9:12);for(let bi=0;bi<hr;bi++){let ol=bi*2;for(let vi=0;vi<2;vi++)ae.get(Sr+ol+vi)&&at.set(Ee[et*2+vi],Ee[et*2+bi]),ae.get(Sr+hr*2+ol+vi)&&at.set(Ee[et*2+bi],Ee[we-1-et*2-vi]),ae.get(Sr+hr*4+ol+vi)&&at.set(Ee[we-1-et*2-vi],Ee[we-1-et*2-bi]),ae.get(Sr+hr*6+ol+vi)&&at.set(Ee[we-1-et*2-bi],Ee[et*2+vi])}Sr+=hr*8}if(Tr.drawModeMessage(at,D,Me,be),D)Tr.drawBullsEye(at,E.truncDivision(Me,2),5);else{Tr.drawBullsEye(at,E.truncDivision(Me,2),7);for(let et=0,Sr=0;et<E.truncDivision(we,2)-1;et+=15,Sr+=16)for(let hr=E.truncDivision(Me,2)&1;hr<Me;hr+=2)at.set(E.truncDivision(Me,2)-Sr,hr),at.set(E.truncDivision(Me,2)+Sr,hr),at.set(hr,E.truncDivision(Me,2)-Sr),at.set(hr,E.truncDivision(Me,2)+Sr)}let nt=new aI;return nt.setCompact(D),nt.setSize(Me),nt.setLayers(L),nt.setCodeWords(ue),nt.setMatrix(at),nt}static drawBullsEye(u,m,g){for(let b=0;b<g;b+=2)for(let j=m-b;j<=m+b;j++)u.set(j,m-b),u.set(j,m+b),u.set(m-b,j),u.set(m+b,j);u.set(m-g,m-g),u.set(m-g+1,m-g),u.set(m-g,m-g+1),u.set(m+g,m-g),u.set(m+g,m-g+1),u.set(m+g,m+g-1)}static generateModeMessage(u,m,g){let b=new _;return u?(b.appendBits(m-1,2),b.appendBits(g-1,6),b=Tr.generateCheckWords(b,28,4)):(b.appendBits(m-1,5),b.appendBits(g-1,11),b=Tr.generateCheckWords(b,40,4)),b}static drawModeMessage(u,m,g,b){let j=E.truncDivision(g,2);if(m)for(let S=0;S<7;S++){let D=j-3+S;b.get(S)&&u.set(D,j-5),b.get(S+7)&&u.set(j+5,D),b.get(20-S)&&u.set(D,j+5),b.get(27-S)&&u.set(j-5,D)}else for(let S=0;S<10;S++){let D=j-5+S+E.truncDivision(S,5);b.get(S)&&u.set(D,j-7),b.get(S+10)&&u.set(j+7,D),b.get(29-S)&&u.set(D,j+7),b.get(39-S)&&u.set(j-7,D)}}static generateCheckWords(u,m,g){let b=u.getSize()/g,j=new o4(Tr.getGF(g)),S=E.truncDivision(m,g),D=Tr.bitsToWords(u,g,S);j.encode(D,S-b);let L=m%g,U=new _;U.appendBits(0,L);for(const Y of Array.from(D))U.appendBits(Y,g);return U}static bitsToWords(u,m,g){let b=new Int32Array(g),j,S;for(j=0,S=u.getSize()/m;j<S;j++){let D=0;for(let L=0;L<m;L++)D|=u.get(j*m+L)?1<<m-L-1:0;b[j]=D}return b}static getGF(u){switch(u){case 4:return re.AZTEC_PARAM;case 6:return re.AZTEC_DATA_6;case 8:return re.AZTEC_DATA_8;case 10:return re.AZTEC_DATA_10;case 12:return re.AZTEC_DATA_12;default:throw new f("Unsupported word size "+u)}}static stuffBits(u,m){let g=new _,b=u.getSize(),j=(1<<m)-2;for(let S=0;S<b;S+=m){let D=0;for(let L=0;L<m;L++)(S+L>=b||u.get(S+L))&&(D|=1<<m-1-L);(D&j)===j?(g.appendBits(D&j,m),S--):D&j?g.appendBits(D,m):(g.appendBits(D|1,m),S--)}return g}static totalBitsInLayer(u,m){return((m?88:112)+16*u)*u}}Tr.DEFAULT_EC_PERCENT=33,Tr.DEFAULT_AZTEC_LAYERS=0,Tr.MAX_NB_BITS=32,Tr.MAX_NB_BITS_COMPACT=4,Tr.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]);class Vb{encode(u,m,g,b){return this.encodeWithHints(u,m,g,b,null)}encodeWithHints(u,m,g,b,j){let S=c4.ISO_8859_1,D=Tr.DEFAULT_EC_PERCENT,L=Tr.DEFAULT_AZTEC_LAYERS;return j!=null&&(j.has(Ma.CHARACTER_SET)&&(S=sI.forName(j.get(Ma.CHARACTER_SET).toString())),j.has(Ma.ERROR_CORRECTION)&&(D=E.parseInt(j.get(Ma.ERROR_CORRECTION).toString())),j.has(Ma.AZTEC_LAYERS)&&(L=E.parseInt(j.get(Ma.AZTEC_LAYERS).toString()))),Vb.encodeLayers(u,m,g,b,S,D,L)}static encodeLayers(u,m,g,b,j,S,D){if(m!==xe.AZTEC)throw new f("Can only encode AZTEC, but got "+m);let L=Tr.encode(I.getBytes(u,j),S,D);return Vb.renderResult(L,g,b)}static renderResult(u,m,g){let b=u.getMatrix();if(b==null)throw new Se;let j=b.getWidth(),S=b.getHeight(),D=Math.max(m,j),L=Math.max(g,S),U=Math.min(D/j,L/S),Y=(D-j*U)/2,ee=(L-S*U)/2,ae=new O(D,L);for(let ue=0,be=ee;ue<S;ue++,be+=U)for(let we=0,Ee=Y;we<j;we++,Ee+=U)b.get(we,ue)&&ae.setRegion(Ee,be,U,U);return ae}}s.AbstractExpandedDecoder=Xa,s.ArgumentException=h,s.ArithmeticException=Q,s.AztecCode=aI,s.AztecCodeReader=De,s.AztecCodeWriter=Vb,s.AztecDecoder=ke,s.AztecDetector=$r,s.AztecDetectorResult=Ze,s.AztecEncoder=Tr,s.AztecHighLevelEncoder=Kx,s.AztecPoint=Vt,s.BarcodeFormat=xe,s.Binarizer=v,s.BinaryBitmap=x,s.BitArray=_,s.BitMatrix=O,s.BitSource=t4,s.BrowserAztecCodeReader=Xe,s.BrowserBarcodeReader=lJ,s.BrowserCodeReader=he,s.BrowserDatamatrixCodeReader=dJ,s.BrowserMultiFormatReader=wJ,s.BrowserPDF417Reader=jJ,s.BrowserQRCodeReader=NJ,s.BrowserQRCodeSvgWriter=a0,s.CharacterSetECI=R,s.ChecksumException=y,s.Code128Reader=Ce,s.Code39Reader=ct,s.DataMatrixDecodedBitStreamParser=Cd,s.DataMatrixReader=_d,s.DecodeHintType=A,s.DecoderResult=ie,s.DefaultGridSampler=gt,s.DetectorResult=ve,s.EAN13Reader=Xt,s.EncodeHintType=Ma,s.Exception=d,s.FormatException=P,s.GenericGF=re,s.GenericGFPoly=Z,s.GlobalHistogramBinarizer=q,s.GridSampler=Ne,s.GridSamplerInstance=yt,s.HTMLCanvasElementLuminanceSource=z,s.HybridBinarizer=H,s.ITFReader=ht,s.IllegalArgumentException=f,s.IllegalStateException=Se,s.InvertedLuminanceSource=V,s.LuminanceSource=K,s.MathUtils=Ve,s.MultiFormatOneDReader=Bh,s.MultiFormatReader=rI,s.MultiFormatWriter=SJ,s.NotFoundException=F,s.OneDReader=st,s.PDF417DecodedBitStreamParser=Re,s.PDF417DecoderErrorCorrection=XT,s.PDF417Reader=yn,s.PDF417ResultMetadata=ZT,s.PerspectiveTransform=He,s.PlanarYUVLuminanceSource=Ll,s.QRCodeByteMatrix=$b,s.QRCodeDataMask=vo,s.QRCodeDecodedBitStreamParser=zs,s.QRCodeDecoderErrorCorrectionLevel=ws,s.QRCodeDecoderFormatInformation=Ln,s.QRCodeEncoder=_s,s.QRCodeEncoderQRCode=s0,s.QRCodeMaskUtil=ra,s.QRCodeMatrixUtil=zt,s.QRCodeMode=$t,s.QRCodeReader=Ed,s.QRCodeVersion=Ft,s.QRCodeWriter=Uh,s.RGBLuminanceSource=l4,s.RSS14Reader=ta,s.RSSExpandedReader=Qe,s.ReaderException=Bb,s.ReedSolomonDecoder=je,s.ReedSolomonEncoder=o4,s.ReedSolomonException=pe,s.Result=ne,s.ResultMetadataType=oe,s.ResultPoint=me,s.StringUtils=I,s.UnsupportedOperationException=$,s.VideoInputDevice=G,s.WhiteRectangleDetector=$e,s.WriterException=ms,s.ZXingArrays=C,s.ZXingCharset=sI,s.ZXingInteger=E,s.ZXingStandardCharsets=c4,s.ZXingStringBuilder=B,s.ZXingStringEncoding=W,s.ZXingSystem=w,s.createAbstractExpandedDecoder=GT,Object.defineProperty(s,"__esModule",{value:!0})})})(k3,k3.exports);var As=k3.exports;const mxe=Rl(As),fxe=aE({__proto__:null,default:mxe},[As]);var kM=function(){function e(t,s,a){if(this.formatMap=new Map([[bt.QR_CODE,As.BarcodeFormat.QR_CODE],[bt.AZTEC,As.BarcodeFormat.AZTEC],[bt.CODABAR,As.BarcodeFormat.CODABAR],[bt.CODE_39,As.BarcodeFormat.CODE_39],[bt.CODE_93,As.BarcodeFormat.CODE_93],[bt.CODE_128,As.BarcodeFormat.CODE_128],[bt.DATA_MATRIX,As.BarcodeFormat.DATA_MATRIX],[bt.MAXICODE,As.BarcodeFormat.MAXICODE],[bt.ITF,As.BarcodeFormat.ITF],[bt.EAN_13,As.BarcodeFormat.EAN_13],[bt.EAN_8,As.BarcodeFormat.EAN_8],[bt.PDF_417,As.BarcodeFormat.PDF_417],[bt.RSS_14,As.BarcodeFormat.RSS_14],[bt.RSS_EXPANDED,As.BarcodeFormat.RSS_EXPANDED],[bt.UPC_A,As.BarcodeFormat.UPC_A],[bt.UPC_E,As.BarcodeFormat.UPC_E],[bt.UPC_EAN_EXTENSION,As.BarcodeFormat.UPC_EAN_EXTENSION]]),this.reverseFormatMap=this.createReverseFormatMap(),!fxe)throw"Use html5qrcode.min.js without edit, ZXing not found.";this.verbose=s,this.logger=a;var n=this.createZXingFormats(t),i=new Map;i.set(As.DecodeHintType.POSSIBLE_FORMATS,n),i.set(As.DecodeHintType.TRY_HARDER,!1),this.hints=i}return e.prototype.decodeAsync=function(t){var s=this;return new Promise(function(a,n){try{a(s.decode(t))}catch(i){n(i)}})},e.prototype.decode=function(t){var s=new As.MultiFormatReader(this.verbose,this.hints),a=new As.HTMLCanvasElementLuminanceSource(t),n=new As.BinaryBitmap(new As.HybridBinarizer(a)),i=s.decode(n);return{text:i.text,format:lq.create(this.toHtml5QrcodeSupportedFormats(i.format)),debugData:this.createDebugData()}},e.prototype.createReverseFormatMap=function(){var t=new Map;return this.formatMap.forEach(function(s,a,n){t.set(s,a)}),t},e.prototype.toHtml5QrcodeSupportedFormats=function(t){if(!this.reverseFormatMap.has(t))throw"reverseFormatMap doesn't have ".concat(t);return this.reverseFormatMap.get(t)},e.prototype.createZXingFormats=function(t){for(var s=[],a=0,n=t;a<n.length;a++){var i=n[a];this.formatMap.has(i)?s.push(this.formatMap.get(i)):this.logger.logError("".concat(i," is not supported by")+"ZXingHtml5QrcodeShim")}return s},e.prototype.createDebugData=function(){return{decoderName:"zxing-js"}},e}(),xxe=function(e,t,s,a){function n(i){return i instanceof s?i:new s(function(o){o(i)})}return new(s||(s=Promise))(function(i,o){function l(h){try{d(a.next(h))}catch(f){o(f)}}function c(h){try{d(a.throw(h))}catch(f){o(f)}}function d(h){h.done?i(h.value):n(h.value).then(l,c)}d((a=a.apply(e,t||[])).next())})},gxe=function(e,t){var s={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},a,n,i,o;return o={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function l(d){return function(h){return c([d,h])}}function c(d){if(a)throw new TypeError("Generator is already executing.");for(;o&&(o=0,d[0]&&(s=0)),s;)try{if(a=1,n&&(i=d[0]&2?n.return:d[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,d[1])).done)return i;switch(n=0,i&&(d=[d[0]&2,i.value]),d[0]){case 0:case 1:i=d;break;case 4:return s.label++,{value:d[1],done:!1};case 5:s.label++,n=d[1],d=[0];continue;case 7:d=s.ops.pop(),s.trys.pop();continue;default:if(i=s.trys,!(i=i.length>0&&i[i.length-1])&&(d[0]===6||d[0]===2)){s=0;continue}if(d[0]===3&&(!i||d[1]>i[0]&&d[1]<i[3])){s.label=d[1];break}if(d[0]===6&&s.label<i[1]){s.label=i[1],i=d;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(d);break}i[2]&&s.ops.pop(),s.trys.pop();continue}d=t.call(e,s)}catch(h){d=[6,h],n=0}finally{a=i=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}},SM=function(){function e(t,s,a){if(this.formatMap=new Map([[bt.QR_CODE,"qr_code"],[bt.AZTEC,"aztec"],[bt.CODABAR,"codabar"],[bt.CODE_39,"code_39"],[bt.CODE_93,"code_93"],[bt.CODE_128,"code_128"],[bt.DATA_MATRIX,"data_matrix"],[bt.ITF,"itf"],[bt.EAN_13,"ean_13"],[bt.EAN_8,"ean_8"],[bt.PDF_417,"pdf417"],[bt.UPC_A,"upc_a"],[bt.UPC_E,"upc_e"]]),this.reverseFormatMap=this.createReverseFormatMap(),!e.isSupported())throw"Use html5qrcode.min.js without edit, Use BarcodeDetectorDelegate only if it isSupported();";this.verbose=s,this.logger=a;var n=this.createBarcodeDetectorFormats(t);if(this.detector=new BarcodeDetector(n),!this.detector)throw"BarcodeDetector detector not supported"}return e.isSupported=function(){if(!("BarcodeDetector"in window))return!1;var t=new BarcodeDetector({formats:["qr_code"]});return typeof t<"u"},e.prototype.decodeAsync=function(t){return xxe(this,void 0,void 0,function(){var s,a;return gxe(this,function(n){switch(n.label){case 0:return[4,this.detector.detect(t)];case 1:if(s=n.sent(),!s||s.length===0)throw"No barcode or QR code detected.";return a=this.selectLargestBarcode(s),[2,{text:a.rawValue,format:lq.create(this.toHtml5QrcodeSupportedFormats(a.format)),debugData:this.createDebugData()}]}})})},e.prototype.selectLargestBarcode=function(t){for(var s=null,a=0,n=0,i=t;n<i.length;n++){var o=i[n],l=o.boundingBox.width*o.boundingBox.height;l>a&&(a=l,s=o)}if(!s)throw"No largest barcode found";return s},e.prototype.createBarcodeDetectorFormats=function(t){for(var s=[],a=0,n=t;a<n.length;a++){var i=n[a];this.formatMap.has(i)?s.push(this.formatMap.get(i)):this.logger.warn("".concat(i," is not supported by")+"BarcodeDetectorDelegate")}return{formats:s}},e.prototype.toHtml5QrcodeSupportedFormats=function(t){if(!this.reverseFormatMap.has(t))throw"reverseFormatMap doesn't have ".concat(t);return this.reverseFormatMap.get(t)},e.prototype.createReverseFormatMap=function(){var t=new Map;return this.formatMap.forEach(function(s,a,n){t.set(s,a)}),t},e.prototype.createDebugData=function(){return{decoderName:"BarcodeDetector"}},e}(),CM=function(e,t,s,a){function n(i){return i instanceof s?i:new s(function(o){o(i)})}return new(s||(s=Promise))(function(i,o){function l(h){try{d(a.next(h))}catch(f){o(f)}}function c(h){try{d(a.throw(h))}catch(f){o(f)}}function d(h){h.done?i(h.value):n(h.value).then(l,c)}d((a=a.apply(e,t||[])).next())})},_M=function(e,t){var s={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},a,n,i,o;return o={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function l(d){return function(h){return c([d,h])}}function c(d){if(a)throw new TypeError("Generator is already executing.");for(;o&&(o=0,d[0]&&(s=0)),s;)try{if(a=1,n&&(i=d[0]&2?n.return:d[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,d[1])).done)return i;switch(n=0,i&&(d=[d[0]&2,i.value]),d[0]){case 0:case 1:i=d;break;case 4:return s.label++,{value:d[1],done:!1};case 5:s.label++,n=d[1],d=[0];continue;case 7:d=s.ops.pop(),s.trys.pop();continue;default:if(i=s.trys,!(i=i.length>0&&i[i.length-1])&&(d[0]===6||d[0]===2)){s=0;continue}if(d[0]===3&&(!i||d[1]>i[0]&&d[1]<i[3])){s.label=d[1];break}if(d[0]===6&&s.label<i[1]){s.label=i[1],i=d;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(d);break}i[2]&&s.ops.pop(),s.trys.pop();continue}d=t.call(e,s)}catch(h){d=[6,h],n=0}finally{a=i=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}},pxe=function(){function e(t,s,a,n){this.EXECUTIONS_TO_REPORT_PERFORMANCE=100,this.executions=0,this.executionResults=[],this.wasPrimaryDecoderUsedInLastDecode=!1,this.verbose=a,s&&SM.isSupported()?(this.primaryDecoder=new SM(t,a,n),this.secondaryDecoder=new kM(t,a,n)):this.primaryDecoder=new kM(t,a,n)}return e.prototype.decodeAsync=function(t){return CM(this,void 0,void 0,function(){var s;return _M(this,function(a){switch(a.label){case 0:s=performance.now(),a.label=1;case 1:return a.trys.push([1,,3,4]),[4,this.getDecoder().decodeAsync(t)];case 2:return[2,a.sent()];case 3:return this.possiblyLogPerformance(s),[7];case 4:return[2]}})})},e.prototype.decodeRobustlyAsync=function(t){return CM(this,void 0,void 0,function(){var s,a;return _M(this,function(n){switch(n.label){case 0:s=performance.now(),n.label=1;case 1:return n.trys.push([1,3,4,5]),[4,this.primaryDecoder.decodeAsync(t)];case 2:return[2,n.sent()];case 3:if(a=n.sent(),this.secondaryDecoder)return[2,this.secondaryDecoder.decodeAsync(t)];throw a;case 4:return this.possiblyLogPerformance(s),[7];case 5:return[2]}})})},e.prototype.getDecoder=function(){return this.secondaryDecoder?this.wasPrimaryDecoderUsedInLastDecode===!1?(this.wasPrimaryDecoderUsedInLastDecode=!0,this.primaryDecoder):(this.wasPrimaryDecoderUsedInLastDecode=!1,this.secondaryDecoder):this.primaryDecoder},e.prototype.possiblyLogPerformance=function(t){if(this.verbose){var s=performance.now()-t;this.executionResults.push(s),this.executions++,this.possiblyFlushPerformanceReport()}},e.prototype.possiblyFlushPerformanceReport=function(){if(!(this.executions<this.EXECUTIONS_TO_REPORT_PERFORMANCE)){for(var t=0,s=0,a=this.executionResults;s<a.length;s++){var n=a[s];t+=n}var i=t/this.executionResults.length;console.log("".concat(i," ms for ").concat(this.executionResults.length," last runs.")),this.executions=0,this.executionResults=[]}},e}(),hA=function(){var e=function(t,s){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,n){a.__proto__=n}||function(a,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(a[i]=n[i])},e(t,s)};return function(t,s){if(typeof s!="function"&&s!==null)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");e(t,s);function a(){this.constructor=t}t.prototype=s===null?Object.create(s):(a.prototype=s.prototype,new a)}}(),sj=function(e,t,s,a){function n(i){return i instanceof s?i:new s(function(o){o(i)})}return new(s||(s=Promise))(function(i,o){function l(h){try{d(a.next(h))}catch(f){o(f)}}function c(h){try{d(a.throw(h))}catch(f){o(f)}}function d(h){h.done?i(h.value):n(h.value).then(l,c)}d((a=a.apply(e,t||[])).next())})},aj=function(e,t){var s={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},a,n,i,o;return o={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function l(d){return function(h){return c([d,h])}}function c(d){if(a)throw new TypeError("Generator is already executing.");for(;o&&(o=0,d[0]&&(s=0)),s;)try{if(a=1,n&&(i=d[0]&2?n.return:d[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,d[1])).done)return i;switch(n=0,i&&(d=[d[0]&2,i.value]),d[0]){case 0:case 1:i=d;break;case 4:return s.label++,{value:d[1],done:!1};case 5:s.label++,n=d[1],d=[0];continue;case 7:d=s.ops.pop(),s.trys.pop();continue;default:if(i=s.trys,!(i=i.length>0&&i[i.length-1])&&(d[0]===6||d[0]===2)){s=0;continue}if(d[0]===3&&(!i||d[1]>i[0]&&d[1]<i[3])){s.label=d[1];break}if(d[0]===6&&s.label<i[1]){s.label=i[1],i=d;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(d);break}i[2]&&s.ops.pop(),s.trys.pop();continue}d=t.call(e,s)}catch(h){d=[6,h],n=0}finally{a=i=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}},dq=function(){function e(t,s){this.name=t,this.track=s}return e.prototype.isSupported=function(){return this.track.getCapabilities?this.name in this.track.getCapabilities():!1},e.prototype.apply=function(t){var s={};s[this.name]=t;var a={advanced:[s]};return this.track.applyConstraints(a)},e.prototype.value=function(){var t=this.track.getSettings();if(this.name in t){var s=t[this.name];return s}return null},e}(),yxe=function(e){hA(t,e);function t(s,a){return e.call(this,s,a)||this}return t.prototype.min=function(){return this.getCapabilities().min},t.prototype.max=function(){return this.getCapabilities().max},t.prototype.step=function(){return this.getCapabilities().step},t.prototype.apply=function(s){var a={};a[this.name]=s;var n={advanced:[a]};return this.track.applyConstraints(n)},t.prototype.getCapabilities=function(){this.failIfNotSupported();var s=this.track.getCapabilities(),a=s[this.name];return{min:a.min,max:a.max,step:a.step}},t.prototype.failIfNotSupported=function(){if(!this.isSupported())throw new Error("".concat(this.name," capability not supported"))},t}(dq),bxe=function(e){hA(t,e);function t(s){return e.call(this,"zoom",s)||this}return t}(yxe),vxe=function(e){hA(t,e);function t(s){return e.call(this,"torch",s)||this}return t}(dq),wxe=function(){function e(t){this.track=t}return e.prototype.zoomFeature=function(){return new bxe(this.track)},e.prototype.torchFeature=function(){return new vxe(this.track)},e}(),jxe=function(){function e(t,s,a){this.isClosed=!1,this.parentElement=t,this.mediaStream=s,this.callbacks=a,this.surface=this.createVideoElement(this.parentElement.clientWidth),t.append(this.surface)}return e.prototype.createVideoElement=function(t){var s=document.createElement("video");return s.style.width="".concat(t,"px"),s.style.display="block",s.muted=!0,s.setAttribute("muted","true"),s.playsInline=!0,s},e.prototype.setupSurface=function(){var t=this;this.surface.onabort=function(){throw"RenderedCameraImpl video surface onabort() called"},this.surface.onerror=function(){throw"RenderedCameraImpl video surface onerror() called"};var s=function(){var a=t.surface.clientWidth,n=t.surface.clientHeight;t.callbacks.onRenderSurfaceReady(a,n),t.surface.removeEventListener("playing",s)};this.surface.addEventListener("playing",s),this.surface.srcObject=this.mediaStream,this.surface.play()},e.create=function(t,s,a,n){return sj(this,void 0,void 0,function(){var i,o;return aj(this,function(l){switch(l.label){case 0:return i=new e(t,s,n),a.aspectRatio?(o={aspectRatio:a.aspectRatio},[4,i.getFirstTrackOrFail().applyConstraints(o)]):[3,2];case 1:l.sent(),l.label=2;case 2:return i.setupSurface(),[2,i]}})})},e.prototype.failIfClosed=function(){if(this.isClosed)throw"The RenderedCamera has already been closed."},e.prototype.getFirstTrackOrFail=function(){if(this.failIfClosed(),this.mediaStream.getVideoTracks().length===0)throw"No video tracks found";return this.mediaStream.getVideoTracks()[0]},e.prototype.pause=function(){this.failIfClosed(),this.surface.pause()},e.prototype.resume=function(t){this.failIfClosed();var s=this,a=function(){setTimeout(t,200),s.surface.removeEventListener("playing",a)};this.surface.addEventListener("playing",a),this.surface.play()},e.prototype.isPaused=function(){return this.failIfClosed(),this.surface.paused},e.prototype.getSurface=function(){return this.failIfClosed(),this.surface},e.prototype.getRunningTrackCapabilities=function(){return this.getFirstTrackOrFail().getCapabilities()},e.prototype.getRunningTrackSettings=function(){return this.getFirstTrackOrFail().getSettings()},e.prototype.applyVideoConstraints=function(t){return sj(this,void 0,void 0,function(){return aj(this,function(s){if("aspectRatio"in t)throw"Changing 'aspectRatio' in run-time is not yet supported.";return[2,this.getFirstTrackOrFail().applyConstraints(t)]})})},e.prototype.close=function(){if(this.isClosed)return Promise.resolve();var t=this;return new Promise(function(s,a){var n=t.mediaStream.getVideoTracks(),i=n.length,o=0;t.mediaStream.getVideoTracks().forEach(function(l){t.mediaStream.removeTrack(l),l.stop(),++o,o>=i&&(t.isClosed=!0,t.parentElement.removeChild(t.surface),s())})})},e.prototype.getCapabilities=function(){return new wxe(this.getFirstTrackOrFail())},e}(),Nxe=function(){function e(t){this.mediaStream=t}return e.prototype.render=function(t,s,a){return sj(this,void 0,void 0,function(){return aj(this,function(n){return[2,jxe.create(t,this.mediaStream,s,a)]})})},e.create=function(t){return sj(this,void 0,void 0,function(){var s,a;return aj(this,function(n){switch(n.label){case 0:if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return s={audio:!1,video:t},[4,navigator.mediaDevices.getUserMedia(s)];case 1:return a=n.sent(),[2,new e(a)]}})})},e}(),EM=function(e,t,s,a){function n(i){return i instanceof s?i:new s(function(o){o(i)})}return new(s||(s=Promise))(function(i,o){function l(h){try{d(a.next(h))}catch(f){o(f)}}function c(h){try{d(a.throw(h))}catch(f){o(f)}}function d(h){h.done?i(h.value):n(h.value).then(l,c)}d((a=a.apply(e,t||[])).next())})},AM=function(e,t){var s={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},a,n,i,o;return o={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function l(d){return function(h){return c([d,h])}}function c(d){if(a)throw new TypeError("Generator is already executing.");for(;o&&(o=0,d[0]&&(s=0)),s;)try{if(a=1,n&&(i=d[0]&2?n.return:d[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,d[1])).done)return i;switch(n=0,i&&(d=[d[0]&2,i.value]),d[0]){case 0:case 1:i=d;break;case 4:return s.label++,{value:d[1],done:!1};case 5:s.label++,n=d[1],d=[0];continue;case 7:d=s.ops.pop(),s.trys.pop();continue;default:if(i=s.trys,!(i=i.length>0&&i[i.length-1])&&(d[0]===6||d[0]===2)){s=0;continue}if(d[0]===3&&(!i||d[1]>i[0]&&d[1]<i[3])){s.label=d[1];break}if(d[0]===6&&s.label<i[1]){s.label=i[1],i=d;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(d);break}i[2]&&s.ops.pop(),s.trys.pop();continue}d=t.call(e,s)}catch(h){d=[6,h],n=0}finally{a=i=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}},kxe=function(){function e(){}return e.failIfNotSupported=function(){return EM(this,void 0,void 0,function(){return AM(this,function(t){if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return[2,new e]})})},e.prototype.create=function(t){return EM(this,void 0,void 0,function(){return AM(this,function(s){return[2,Nxe.create(t)]})})},e}(),Sxe=function(e,t,s,a){function n(i){return i instanceof s?i:new s(function(o){o(i)})}return new(s||(s=Promise))(function(i,o){function l(h){try{d(a.next(h))}catch(f){o(f)}}function c(h){try{d(a.throw(h))}catch(f){o(f)}}function d(h){h.done?i(h.value):n(h.value).then(l,c)}d((a=a.apply(e,t||[])).next())})},Cxe=function(e,t){var s={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},a,n,i,o;return o={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function l(d){return function(h){return c([d,h])}}function c(d){if(a)throw new TypeError("Generator is already executing.");for(;o&&(o=0,d[0]&&(s=0)),s;)try{if(a=1,n&&(i=d[0]&2?n.return:d[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,d[1])).done)return i;switch(n=0,i&&(d=[d[0]&2,i.value]),d[0]){case 0:case 1:i=d;break;case 4:return s.label++,{value:d[1],done:!1};case 5:s.label++,n=d[1],d=[0];continue;case 7:d=s.ops.pop(),s.trys.pop();continue;default:if(i=s.trys,!(i=i.length>0&&i[i.length-1])&&(d[0]===6||d[0]===2)){s=0;continue}if(d[0]===3&&(!i||d[1]>i[0]&&d[1]<i[3])){s.label=d[1];break}if(d[0]===6&&s.label<i[1]){s.label=i[1],i=d;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(d);break}i[2]&&s.ops.pop(),s.trys.pop();continue}d=t.call(e,s)}catch(h){d=[6,h],n=0}finally{a=i=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}},_xe=function(){function e(){}return e.retrieve=function(){if(navigator.mediaDevices)return e.getCamerasFromMediaDevices();var t=MediaStreamTrack;return MediaStreamTrack&&t.getSources?e.getCamerasFromMediaStreamTrack():e.rejectWithError()},e.rejectWithError=function(){var t=Vm.unableToQuerySupportedDevices();return e.isHttpsOrLocalhost()||(t=Vm.insecureContextCameraQueryError()),Promise.reject(t)},e.isHttpsOrLocalhost=function(){if(location.protocol==="https:")return!0;var t=location.host.split(":")[0];return t==="127.0.0.1"||t==="localhost"},e.getCamerasFromMediaDevices=function(){return Sxe(this,void 0,void 0,function(){var t,s,a,n,i,o,l;return Cxe(this,function(c){switch(c.label){case 0:return t=function(d){for(var h=d.getVideoTracks(),f=0,x=h;f<x.length;f++){var y=x[f];y.enabled=!1,y.stop(),d.removeTrack(y)}},[4,navigator.mediaDevices.getUserMedia({audio:!1,video:!0})];case 1:return s=c.sent(),[4,navigator.mediaDevices.enumerateDevices()];case 2:for(a=c.sent(),n=[],i=0,o=a;i<o.length;i++)l=o[i],l.kind==="videoinput"&&n.push({id:l.deviceId,label:l.label});return t(s),[2,n]}})})},e.getCamerasFromMediaStreamTrack=function(){return new Promise(function(t,s){var a=function(i){for(var o=[],l=0,c=i;l<c.length;l++){var d=c[l];d.kind==="video"&&o.push({id:d.id,label:d.label})}t(o)},n=MediaStreamTrack;n.getSources(a)})},e}(),Ls;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.NOT_STARTED=1]="NOT_STARTED",e[e.SCANNING=2]="SCANNING",e[e.PAUSED=3]="PAUSED"})(Ls||(Ls={}));var Exe=function(){function e(){this.state=Ls.NOT_STARTED,this.onGoingTransactionNewState=Ls.UNKNOWN}return e.prototype.directTransition=function(t){this.failIfTransitionOngoing(),this.validateTransition(t),this.state=t},e.prototype.startTransition=function(t){return this.failIfTransitionOngoing(),this.validateTransition(t),this.onGoingTransactionNewState=t,this},e.prototype.execute=function(){if(this.onGoingTransactionNewState===Ls.UNKNOWN)throw"Transaction is already cancelled, cannot execute().";var t=this.onGoingTransactionNewState;this.onGoingTransactionNewState=Ls.UNKNOWN,this.directTransition(t)},e.prototype.cancel=function(){if(this.onGoingTransactionNewState===Ls.UNKNOWN)throw"Transaction is already cancelled, cannot cancel().";this.onGoingTransactionNewState=Ls.UNKNOWN},e.prototype.getState=function(){return this.state},e.prototype.failIfTransitionOngoing=function(){if(this.onGoingTransactionNewState!==Ls.UNKNOWN)throw"Cannot transition to a new state, already under transition"},e.prototype.validateTransition=function(t){switch(this.state){case Ls.UNKNOWN:throw"Transition from unknown is not allowed";case Ls.NOT_STARTED:this.failIfNewStateIs(t,[Ls.PAUSED]);break;case Ls.SCANNING:break;case Ls.PAUSED:break}},e.prototype.failIfNewStateIs=function(t,s){for(var a=0,n=s;a<n.length;a++){var i=n[a];if(t===i)throw"Cannot transition from ".concat(this.state," to ").concat(t)}},e}(),Axe=function(){function e(t){this.stateManager=t}return e.prototype.startTransition=function(t){return this.stateManager.startTransition(t)},e.prototype.directTransition=function(t){this.stateManager.directTransition(t)},e.prototype.getState=function(){return this.stateManager.getState()},e.prototype.canScanFile=function(){return this.stateManager.getState()===Ls.NOT_STARTED},e.prototype.isScanning=function(){return this.stateManager.getState()!==Ls.NOT_STARTED},e.prototype.isStrictlyScanning=function(){return this.stateManager.getState()===Ls.SCANNING},e.prototype.isPaused=function(){return this.stateManager.getState()===Ls.PAUSED},e}(),Pxe=function(){function e(){}return e.create=function(){return new Axe(new Exe)},e}(),Txe=function(){var e=function(t,s){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,n){a.__proto__=n}||function(a,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(a[i]=n[i])},e(t,s)};return function(t,s){if(typeof s!="function"&&s!==null)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");e(t,s);function a(){this.constructor=t}t.prototype=s===null?Object.create(s):(a.prototype=s.prototype,new a)}}(),Hi=function(e){Txe(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.DEFAULT_WIDTH=300,t.DEFAULT_WIDTH_OFFSET=2,t.FILE_SCAN_MIN_HEIGHT=300,t.FILE_SCAN_HIDDEN_CANVAS_PADDING=100,t.MIN_QR_BOX_SIZE=50,t.SHADED_LEFT=1,t.SHADED_RIGHT=2,t.SHADED_TOP=3,t.SHADED_BOTTOM=4,t.SHADED_REGION_ELEMENT_ID="qr-shaded-region",t.VERBOSE=!1,t.BORDER_SHADER_DEFAULT_COLOR="#ffffff",t.BORDER_SHADER_MATCH_COLOR="rgb(90, 193, 56)",t}(dxe),Ixe=function(){function e(t,s){this.logger=s,this.fps=Hi.SCAN_DEFAULT_FPS,t?(t.fps&&(this.fps=t.fps),this.disableFlip=t.disableFlip===!0,this.qrbox=t.qrbox,this.aspectRatio=t.aspectRatio,this.videoConstraints=t.videoConstraints):this.disableFlip=Hi.DEFAULT_DISABLE_FLIP}return e.prototype.isMediaStreamConstraintsValid=function(){return this.videoConstraints?cq.isMediaStreamConstraintsValid(this.videoConstraints,this.logger):(this.logger.logError("Empty videoConstraints",!0),!1)},e.prototype.isShadedBoxEnabled=function(){return!Ec(this.qrbox)},e.create=function(t,s){return new e(t,s)},e}(),Dxe=function(){function e(t,s){if(this.element=null,this.canvasElement=null,this.scannerPausedUiElement=null,this.hasBorderShaders=null,this.borderShaders=null,this.qrMatch=null,this.renderedCamera=null,this.qrRegion=null,this.context=null,this.lastScanImageFile=null,this.isScanning=!1,!document.getElementById(t))throw"HTML Element with id=".concat(t," not found");this.elementId=t,this.verbose=!1;var a;typeof s=="boolean"?this.verbose=s===!0:s&&(a=s,this.verbose=a.verbose===!0,a.experimentalFeatures),this.logger=new hxe(this.verbose),this.qrcode=new pxe(this.getSupportedFormats(s),this.getUseBarCodeDetectorIfSupported(a),this.verbose,this.logger),this.foreverScanTimeout,this.shouldScan=!0,this.stateManagerProxy=Pxe.create()}return e.prototype.start=function(t,s,a,n){var i=this;if(!t)throw"cameraIdOrConfig is required";if(!a||typeof a!="function")throw"qrCodeSuccessCallback is required and should be a function.";var o;n?o=n:o=this.verbose?this.logger.log:function(){};var l=Ixe.create(s,this.logger);this.clearElement();var c=!1;l.videoConstraints&&(l.isMediaStreamConstraintsValid()?c=!0:this.logger.logError("'videoConstraints' is not valid 'MediaStreamConstraints, it will be ignored.'",!0));var d=c,h=document.getElementById(this.elementId);h.clientWidth?h.clientWidth:Hi.DEFAULT_WIDTH,h.style.position="relative",this.shouldScan=!0,this.element=h;var f=this,x=this.stateManagerProxy.startTransition(Ls.SCANNING);return new Promise(function(y,v){var w=d?l.videoConstraints:f.createVideoConstraints(t);if(!w){x.cancel(),v("videoConstraints should be defined");return}var N={};(!d||l.aspectRatio)&&(N.aspectRatio=l.aspectRatio);var k={onRenderSurfaceReady:function(C,E){f.setupUi(C,E,l),f.isScanning=!0,f.foreverScan(l,a,o)}};kxe.failIfNotSupported().then(function(C){C.create(w).then(function(E){return E.render(i.element,N,k).then(function(_){f.renderedCamera=_,x.execute(),y(null)}).catch(function(_){x.cancel(),v(_)})}).catch(function(E){x.cancel(),v(Vm.errorGettingUserMedia(E))})}).catch(function(C){x.cancel(),v(Vm.cameraStreamingNotSupported())})})},e.prototype.pause=function(t){if(!this.stateManagerProxy.isStrictlyScanning())throw"Cannot pause, scanner is not scanning.";this.stateManagerProxy.directTransition(Ls.PAUSED),this.showPausedState(),(Ec(t)||t!==!0)&&(t=!1),t&&this.renderedCamera&&this.renderedCamera.pause()},e.prototype.resume=function(){if(!this.stateManagerProxy.isPaused())throw"Cannot result, scanner is not paused.";if(!this.renderedCamera)throw"renderedCamera doesn't exist while trying resume()";var t=this,s=function(){t.stateManagerProxy.directTransition(Ls.SCANNING),t.hidePausedState()};if(!this.renderedCamera.isPaused()){s();return}this.renderedCamera.resume(function(){s()})},e.prototype.getState=function(){return this.stateManagerProxy.getState()},e.prototype.stop=function(){var t=this;if(!this.stateManagerProxy.isScanning())throw"Cannot stop, scanner is not running or paused.";var s=this.stateManagerProxy.startTransition(Ls.NOT_STARTED);this.shouldScan=!1,this.foreverScanTimeout&&clearTimeout(this.foreverScanTimeout);var a=function(){if(t.element){var i=document.getElementById(Hi.SHADED_REGION_ELEMENT_ID);i&&t.element.removeChild(i)}},n=this;return this.renderedCamera.close().then(function(){return n.renderedCamera=null,n.element&&(n.element.removeChild(n.canvasElement),n.canvasElement=null),a(),n.qrRegion&&(n.qrRegion=null),n.context&&(n.context=null),s.execute(),n.hidePausedState(),n.isScanning=!1,Promise.resolve()})},e.prototype.scanFile=function(t,s){return this.scanFileV2(t,s).then(function(a){return a.decodedText})},e.prototype.scanFileV2=function(t,s){var a=this;if(!t||!(t instanceof File))throw"imageFile argument is mandatory and should be instance of File. Use 'event.target.files[0]'.";if(Ec(s)&&(s=!0),!this.stateManagerProxy.canScanFile())throw"Cannot start file scan - ongoing camera scan";return new Promise(function(n,i){a.possiblyCloseLastScanImageFile(),a.clearElement(),a.lastScanImageFile=URL.createObjectURL(t);var o=new Image;o.onload=function(){var l=o.width,c=o.height,d=document.getElementById(a.elementId),h=d.clientWidth?d.clientWidth:Hi.DEFAULT_WIDTH,f=Math.max(d.clientHeight?d.clientHeight:c,Hi.FILE_SCAN_MIN_HEIGHT),x=a.computeCanvasDrawConfig(l,c,h,f);if(s){var y=a.createCanvasElement(h,f,"qr-canvas-visible");y.style.display="inline-block",d.appendChild(y);var v=y.getContext("2d");if(!v)throw"Unable to get 2d context from canvas";v.canvas.width=h,v.canvas.height=f,v.drawImage(o,0,0,l,c,x.x,x.y,x.width,x.height)}var w=Hi.FILE_SCAN_HIDDEN_CANVAS_PADDING,N=Math.max(o.width,x.width),k=Math.max(o.height,x.height),C=N+2*w,E=k+2*w,_=a.createCanvasElement(C,E);d.appendChild(_);var T=_.getContext("2d");if(!T)throw"Unable to get 2d context from canvas";T.canvas.width=C,T.canvas.height=E,T.drawImage(o,0,0,l,c,w,w,N,k);try{a.qrcode.decodeRobustlyAsync(_).then(function(A){n(NM.createFromQrcodeResult(A))}).catch(i)}catch(A){i("QR code parse error, error = ".concat(A))}},o.onerror=i,o.onabort=i,o.onstalled=i,o.onsuspend=i,o.src=URL.createObjectURL(t)})},e.prototype.clear=function(){this.clearElement()},e.getCameras=function(){return _xe.retrieve()},e.prototype.getRunningTrackCapabilities=function(){return this.getRenderedCameraOrFail().getRunningTrackCapabilities()},e.prototype.getRunningTrackSettings=function(){return this.getRenderedCameraOrFail().getRunningTrackSettings()},e.prototype.getRunningTrackCameraCapabilities=function(){return this.getRenderedCameraOrFail().getCapabilities()},e.prototype.applyVideoConstraints=function(t){if(t){if(!cq.isMediaStreamConstraintsValid(t,this.logger))throw"invalid videoConstaints passed, check logs for more details"}else throw"videoConstaints is required argument.";return this.getRenderedCameraOrFail().applyVideoConstraints(t)},e.prototype.getRenderedCameraOrFail=function(){if(this.renderedCamera==null)throw"Scanning is not in running state, call this API only when QR code scanning using camera is in running state.";return this.renderedCamera},e.prototype.getSupportedFormats=function(t){var s=[bt.QR_CODE,bt.AZTEC,bt.CODABAR,bt.CODE_39,bt.CODE_93,bt.CODE_128,bt.DATA_MATRIX,bt.MAXICODE,bt.ITF,bt.EAN_13,bt.EAN_8,bt.PDF_417,bt.RSS_14,bt.RSS_EXPANDED,bt.UPC_A,bt.UPC_E,bt.UPC_EAN_EXTENSION];if(!t||typeof t=="boolean"||!t.formatsToSupport)return s;if(!Array.isArray(t.formatsToSupport))throw"configOrVerbosityFlag.formatsToSupport should be undefined or an array.";if(t.formatsToSupport.length===0)throw"Atleast 1 formatsToSupport is needed.";for(var a=[],n=0,i=t.formatsToSupport;n<i.length;n++){var o=i[n];cxe(o)?a.push(o):this.logger.warn("Invalid format: ".concat(o," passed in config, ignoring."))}if(a.length===0)throw"None of formatsToSupport match supported values.";return a},e.prototype.getUseBarCodeDetectorIfSupported=function(t){if(Ec(t))return!0;if(!Ec(t.useBarCodeDetectorIfSupported))return t.useBarCodeDetectorIfSupported!==!1;if(Ec(t.experimentalFeatures))return!0;var s=t.experimentalFeatures;return Ec(s.useBarCodeDetectorIfSupported)?!0:s.useBarCodeDetectorIfSupported!==!1},e.prototype.validateQrboxSize=function(t,s,a){var n=this,i=a.qrbox;this.validateQrboxConfig(i);var o=this.toQrdimensions(t,s,i),l=function(d){if(d<Hi.MIN_QR_BOX_SIZE)throw"minimum size of 'config.qrbox' dimension value is"+" ".concat(Hi.MIN_QR_BOX_SIZE,"px.")},c=function(d){return d>t&&(n.logger.warn("`qrbox.width` or `qrbox` is larger than the width of the root element. The width will be truncated to the width of root element."),d=t),d};l(o.width),l(o.height),o.width=c(o.width)},e.prototype.validateQrboxConfig=function(t){if(typeof t!="number"&&typeof t!="function"&&(t.width===void 0||t.height===void 0))throw"Invalid instance of QrDimensions passed for 'config.qrbox'. Both 'width' and 'height' should be set."},e.prototype.toQrdimensions=function(t,s,a){if(typeof a=="number")return{width:a,height:a};if(typeof a=="function")try{return a(t,s)}catch(n){throw new Error("qrbox config was passed as a function but it failed with unknown error"+n)}return a},e.prototype.setupUi=function(t,s,a){a.isShadedBoxEnabled()&&this.validateQrboxSize(t,s,a);var n=Ec(a.qrbox)?{width:t,height:s}:a.qrbox;this.validateQrboxConfig(n);var i=this.toQrdimensions(t,s,n);i.height>s&&this.logger.warn("[Html5Qrcode] config.qrbox has height that isgreater than the height of the video stream. Shading will be ignored");var o=a.isShadedBoxEnabled()&&i.height<=s,l={x:0,y:0,width:t,height:s},c=o?this.getShadedRegionBounds(t,s,i):l,d=this.createCanvasElement(c.width,c.height),h={willReadFrequently:!0},f=d.getContext("2d",h);f.canvas.width=c.width,f.canvas.height=c.height,this.element.append(d),o&&this.possiblyInsertShadingElement(this.element,t,s,i),this.createScannerPausedUiElement(this.element),this.qrRegion=c,this.context=f,this.canvasElement=d},e.prototype.createScannerPausedUiElement=function(t){var s=document.createElement("div");s.innerText=Vm.scannerPaused(),s.style.display="none",s.style.position="absolute",s.style.top="0px",s.style.zIndex="1",s.style.background="rgba(9, 9, 9, 0.46)",s.style.color="#FFECEC",s.style.textAlign="center",s.style.width="100%",t.appendChild(s),this.scannerPausedUiElement=s},e.prototype.scanContext=function(t,s){var a=this;return this.stateManagerProxy.isPaused()?Promise.resolve(!1):this.qrcode.decodeAsync(this.canvasElement).then(function(n){return t(n.text,NM.createFromQrcodeResult(n)),a.possiblyUpdateShaders(!0),!0}).catch(function(n){a.possiblyUpdateShaders(!1);var i=Vm.codeParseError(n);return s(i,uxe.createFrom(i)),!1})},e.prototype.foreverScan=function(t,s,a){var n=this;if(this.shouldScan&&this.renderedCamera){var i=this.renderedCamera.getSurface(),o=i.videoWidth/i.clientWidth,l=i.videoHeight/i.clientHeight;if(!this.qrRegion)throw"qrRegion undefined when localMediaStream is ready.";var c=this.qrRegion.width*o,d=this.qrRegion.height*l,h=this.qrRegion.x*o,f=this.qrRegion.y*l;this.context.drawImage(i,h,f,c,d,0,0,this.qrRegion.width,this.qrRegion.height);var x=function(){n.foreverScanTimeout=setTimeout(function(){n.foreverScan(t,s,a)},n.getTimeoutFps(t.fps))};this.scanContext(s,a).then(function(y){!y&&t.disableFlip!==!0?(n.context.translate(n.context.canvas.width,0),n.context.scale(-1,1),n.scanContext(s,a).finally(function(){x()})):x()}).catch(function(y){n.logger.logError("Error happend while scanning context",y),x()})}},e.prototype.createVideoConstraints=function(t){if(typeof t=="string")return{deviceId:{exact:t}};if(typeof t=="object"){var s="facingMode",a="deviceId",n={user:!0,environment:!0},i="exact",o=function(v){if(v in n)return!0;throw"config has invalid 'facingMode' value = "+"'".concat(v,"'")},l=Object.keys(t);if(l.length!==1)throw"'cameraIdOrConfig' object should have exactly 1 key,"+" if passed as an object, found ".concat(l.length," keys");var c=Object.keys(t)[0];if(c!==s&&c!==a)throw"Only '".concat(s,"' and '").concat(a,"' ")+" are supported for 'cameraIdOrConfig'";if(c===s){var d=t.facingMode;if(typeof d=="string"){if(o(d))return{facingMode:d}}else if(typeof d=="object")if(i in d){if(o(d["".concat(i)]))return{facingMode:{exact:d["".concat(i)]}}}else throw"'facingMode' should be string or object with"+" ".concat(i," as key.");else{var h=typeof d;throw"Invalid type of 'facingMode' = ".concat(h)}}else{var f=t.deviceId;if(typeof f=="string")return{deviceId:f};if(typeof f=="object"){if(i in f)return{deviceId:{exact:f["".concat(i)]}};throw"'deviceId' should be string or object with"+" ".concat(i," as key.")}else{var x=typeof f;throw"Invalid type of 'deviceId' = ".concat(x)}}}var y=typeof t;throw"Invalid type of 'cameraIdOrConfig' = ".concat(y)},e.prototype.computeCanvasDrawConfig=function(t,s,a,n){if(t<=a&&s<=n){var i=(a-t)/2,o=(n-s)/2;return{x:i,y:o,width:t,height:s}}else{var l=t,c=s;return t>a&&(s=a/t*s,t=a),s>n&&(t=n/s*t,s=n),this.logger.log("Image downsampled from "+"".concat(l,"X").concat(c)+" to ".concat(t,"X").concat(s,".")),this.computeCanvasDrawConfig(t,s,a,n)}},e.prototype.clearElement=function(){if(this.stateManagerProxy.isScanning())throw"Cannot clear while scan is ongoing, close it first.";var t=document.getElementById(this.elementId);t&&(t.innerHTML="")},e.prototype.possiblyUpdateShaders=function(t){this.qrMatch!==t&&(this.hasBorderShaders&&this.borderShaders&&this.borderShaders.length&&this.borderShaders.forEach(function(s){s.style.backgroundColor=t?Hi.BORDER_SHADER_MATCH_COLOR:Hi.BORDER_SHADER_DEFAULT_COLOR}),this.qrMatch=t)},e.prototype.possiblyCloseLastScanImageFile=function(){this.lastScanImageFile&&(URL.revokeObjectURL(this.lastScanImageFile),this.lastScanImageFile=null)},e.prototype.createCanvasElement=function(t,s,a){var n=t,i=s,o=document.createElement("canvas");return o.style.width="".concat(n,"px"),o.style.height="".concat(i,"px"),o.style.display="none",o.id=Ec(a)?"qr-canvas":a,o},e.prototype.getShadedRegionBounds=function(t,s,a){if(a.width>t||a.height>s)throw"'config.qrbox' dimensions should not be greater than the dimensions of the root HTML element.";return{x:(t-a.width)/2,y:(s-a.height)/2,width:a.width,height:a.height}},e.prototype.possiblyInsertShadingElement=function(t,s,a,n){if(!(s-n.width<1||a-n.height<1)){var i=document.createElement("div");i.style.position="absolute";var o=(s-n.width)/2,l=(a-n.height)/2;if(i.style.borderLeft="".concat(o,"px solid rgba(0, 0, 0, 0.48)"),i.style.borderRight="".concat(o,"px solid rgba(0, 0, 0, 0.48)"),i.style.borderTop="".concat(l,"px solid rgba(0, 0, 0, 0.48)"),i.style.borderBottom="".concat(l,"px solid rgba(0, 0, 0, 0.48)"),i.style.boxSizing="border-box",i.style.top="0px",i.style.bottom="0px",i.style.left="0px",i.style.right="0px",i.id="".concat(Hi.SHADED_REGION_ELEMENT_ID),s-n.width<11||a-n.height<11)this.hasBorderShaders=!1;else{var c=5,d=40;this.insertShaderBorders(i,d,c,-c,null,0,!0),this.insertShaderBorders(i,d,c,-c,null,0,!1),this.insertShaderBorders(i,d,c,null,-c,0,!0),this.insertShaderBorders(i,d,c,null,-c,0,!1),this.insertShaderBorders(i,c,d+c,-c,null,-c,!0),this.insertShaderBorders(i,c,d+c,null,-c,-c,!0),this.insertShaderBorders(i,c,d+c,-c,null,-c,!1),this.insertShaderBorders(i,c,d+c,null,-c,-c,!1),this.hasBorderShaders=!0}t.append(i)}},e.prototype.insertShaderBorders=function(t,s,a,n,i,o,l){var c=document.createElement("div");c.style.position="absolute",c.style.backgroundColor=Hi.BORDER_SHADER_DEFAULT_COLOR,c.style.width="".concat(s,"px"),c.style.height="".concat(a,"px"),n!==null&&(c.style.top="".concat(n,"px")),i!==null&&(c.style.bottom="".concat(i,"px")),l?c.style.left="".concat(o,"px"):c.style.right="".concat(o,"px"),this.borderShaders||(this.borderShaders=[]),this.borderShaders.push(c),t.appendChild(c)},e.prototype.showPausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="block"},e.prototype.hidePausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="none"},e.prototype.getTimeoutFps=function(t){return 1e3/t},e}(),PM;(function(e){e[e.STATUS_DEFAULT=0]="STATUS_DEFAULT",e[e.STATUS_SUCCESS=1]="STATUS_SUCCESS",e[e.STATUS_WARNING=2]="STATUS_WARNING",e[e.STATUS_REQUESTING_PERMISSION=3]="STATUS_REQUESTING_PERMISSION"})(PM||(PM={}));let Dc=null,sy=null,ay=0;const uq=5*60*1e3;async function s2(){return Dc&&Date.now()-ay<uq||(Dc=xq(),ay=Date.now(),sy=Dc.find(e=>e.isDefault)||Dc[0]),Dc}async function hq(){if(sy&&Date.now()-ay<uq)return sy;const e=await s2();return e.find(t=>t.isDefault)||e[0]||xq()[0]}async function mq(e){return(await s2()).find(s=>s.code===e)||null}async function fq(e){const t=await mq(e);return(t==null?void 0:t.symbol)||e}async function Oxe(e,t){const s=t||(await hq()).code,a=await fq(s),n=e.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2});return`${a} ${n}`}function Rxe(e,t,s){const a=s.find(o=>o.code===t),n=(a==null?void 0:a.symbol)||t,i=e.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2});return`${n} ${i}`}async function Mxe(e){try{const t=await s2();return t.find(a=>a.code===e)?(Dc=t.map(a=>({...a,isDefault:a.code===e})),sy=Dc.find(a=>a.isDefault)||null,ay=Date.now(),!0):(console.error("Currency not found:",e),!1)}catch(t){return console.error("Error setting default currency:",t),!1}}function Lxe(){Dc=null,sy=null,ay=0}function xq(){return[{code:"SLE",name:"Sierra Leone Leone",symbol:"Le",isDefault:!0,isActive:!0},{code:"USD",name:"US Dollar",symbol:"$",isDefault:!1,isActive:!0}]}const cr={getCurrencies:s2,getDefaultCurrency:hq,getCurrencyByCode:mq,getCurrencySymbol:fq,formatCurrency:Oxe,formatCurrencySync:Rxe,setDefaultCurrency:Mxe,clearCurrencyCache:Lxe};class Fxe{constructor(){wi(this,"QR_VERSION","1.0");wi(this,"QR_PREFIX","PEEAPPAY")}generateReference(){const t=Date.now().toString(36),s=Math.random().toString(36).substring(2,10);return`QR${t}${s}`.toUpperCase()}getExpiration(t=15){return new Date(Date.now()+t*60*1e3).toISOString()}encodeQRData(t){const s={p:this.QR_PREFIX,v:t.version,t:t.type,u:t.userId,w:t.walletId,a:t.amount,c:t.currency,r:t.reference,e:t.expiresAt,m:t.merchantName,d:t.description},a=Object.fromEntries(Object.entries(s).filter(([n,i])=>i!==void 0));return btoa(JSON.stringify(a))}decodeQRData(t){try{const s=JSON.parse(atob(t));return s.p!==this.QR_PREFIX?null:{type:s.t,version:s.v,userId:s.u,walletId:s.w,amount:s.a,currency:s.c||"USD",reference:s.r,expiresAt:s.e,merchantName:s.m,description:s.d}}catch{return null}}async generateStaticQR(t,s,a){if(!t||!s)throw new Error("userId and walletId are required");const n=this.generateReference(),i=a||(await cr.getDefaultCurrency()).code,o={type:"payment",version:this.QR_VERSION,userId:t,walletId:s,currency:i,reference:n},l=this.encodeQRData(o),c=`${window.location.origin}/pay?qr=${n}`;try{await X.from("qr_codes").insert({reference:n,user_id:t,wallet_id:s,type:"static",qr_data:l,status:"active"})}catch{console.log("QR codes table not available, skipping database storage")}return{qrData:l,reference:n,expiresAt:"",deepLink:c}}async generateDynamicQR(t,s,a,n,i=15,o){if(!t||!s)throw new Error("userId and walletId are required");const l=this.generateReference(),c=this.getExpiration(i),d=o||(await cr.getDefaultCurrency()).code,h={type:"request",version:this.QR_VERSION,userId:t,walletId:s,amount:a,currency:d,reference:l,expiresAt:c,description:n},f=this.encodeQRData(h),x=`${window.location.origin}/pay?qr=${l}&amount=${a}`;try{await X.from("qr_codes").insert({reference:l,user_id:t,wallet_id:s,type:"dynamic",amount:a,description:n,qr_data:f,expires_at:c,status:"active"})}catch{console.log("QR codes table not available, skipping database storage")}return{qrData:f,reference:l,expiresAt:c,deepLink:x}}async generateMerchantQR(t,s,a,n,i){const o=this.generateReference(),l=n?this.getExpiration(60):"",c=i||(await cr.getDefaultCurrency()).code,d={type:"merchant",version:this.QR_VERSION,userId:t,walletId:s,amount:n,currency:c,reference:o,expiresAt:l||void 0,merchantName:a},h=this.encodeQRData(d),f=`${window.location.origin}/pay?merchant=${o}`;try{await X.from("qr_codes").insert({reference:o,user_id:t,wallet_id:s,type:"merchant",amount:n,merchant_name:a,qr_data:h,expires_at:l||null,status:"active"})}catch{}return{qrData:h,reference:o,expiresAt:l,deepLink:f}}parseURLQR(t){try{if(!t.startsWith("http://")&&!t.startsWith("https://"))return null;const s=new URL(t),a=s.pathname,n=a.match(/\/scan-pay\/([^/]+)$/);if(n)return{type:"scan-pay",id:n[1]};const i=a.match(/\/pay\/([^/]+)$/);if(i)return{type:"checkout",id:i[1]};const o=a.match(/\/checkout\/pay\/([^/]+)$/);if(o)return{type:"checkout",id:o[1]};const l=s.searchParams.get("qr");return l?{type:"qr",id:l}:null}catch{return null}}async validateQR(t){const s=this.parseURLQR(t);if(s){if(s.type==="scan-pay"||s.type==="checkout")return{valid:!0,data:{type:"merchant",version:"1.0",userId:"",currency:"SLE",reference:s.id},checkoutSessionId:s.id};if(s.type==="qr")return this.validateQRByReference(s.id)}const a=this.decodeQRData(t);if(!a)return{valid:!1,error:"Invalid QR code format. Please scan a valid Peeap payment QR code."};if(a.expiresAt&&new Date(a.expiresAt)<new Date)return{valid:!1,expired:!0,error:"QR code has expired"};const{data:n}=await X.from("users").select("id, first_name, last_name").eq("id",a.userId).single();if(!n)return{valid:!1,error:"Recipient not found"};let i=a.walletId;if(!i){const{data:o}=await X.from("wallets").select("id").eq("user_id",a.userId).eq("wallet_type","primary").single();i=o==null?void 0:o.id}return{valid:!0,data:a,recipient:{id:n.id,name:`${n.first_name} ${n.last_name}`,walletId:i||""}}}async validateQRByReference(t){const{data:s}=await X.from("qr_codes").select("*").eq("reference",t).eq("status","active").single();return s?s.expires_at&&new Date(s.expires_at)<new Date?{valid:!1,expired:!0,error:"QR code has expired"}:this.validateQR(s.qr_data):{valid:!1,error:"QR code not found or inactive"}}async markQRAsUsed(t,s){await X.from("qr_codes").update({status:"used",used_at:new Date().toISOString(),transaction_id:s}).eq("reference",t)}}const U1=new Fxe;function gq({onScan:e,onClose:t,autoValidate:s=!0}){const[a,n]=p.useState(null),[i,o]=p.useState(!1),[l,c]=p.useState(null),[d,h]=p.useState(!1),[f,x]=p.useState(!1),[y,v]=p.useState("environment"),w=p.useRef(null),N=p.useRef(null);p.useEffect(()=>(k(),()=>{E()}),[]),p.useEffect(()=>{a&&!i&&!f&&!d&&C()},[a,y]);const k=async()=>{try{if((await navigator.mediaDevices.enumerateDevices()).filter(I=>I.kind==="videoinput").length===0){c("No camera found on this device"),n(!1);return}(await navigator.mediaDevices.getUserMedia({video:{facingMode:"environment"}})).getTracks().forEach(I=>I.stop()),n(!0)}catch(R){console.error("Camera permission error:",R),R.name==="NotAllowedError"?c("Camera access denied. Please allow camera access in your browser settings."):R.name==="NotFoundError"?c("No camera found on this device."):c("Failed to access camera: "+R.message),n(!1)}},C=async()=>{if(w.current)try{w.current.getState()===Ls.SCANNING&&await w.current.stop()}catch{}try{const R="qr-scanner-element";w.current=new Dxe(R);const $={fps:10,qrbox:void 0,aspectRatio:1,disableFlip:!1};await w.current.start({facingMode:y},$,_,T),o(!0),c(null)}catch(R){console.error("Failed to start scanner:",R),c("Failed to start camera: "+R.message)}},E=async()=>{if(w.current)try{w.current.getState()===Ls.SCANNING&&await w.current.stop(),w.current.clear()}catch(R){console.error("Error stopping scanner:",R)}},_=async R=>{if(!(d||f))if(await E(),o(!1),x(!0),s){h(!0);try{const $=await U1.validateQR(R);e($)}catch{e({valid:!1,error:"Failed to validate QR code"})}finally{h(!1)}}else e({valid:!0,data:{type:"payment",version:"1.0",userId:"",currency:"SLE",reference:R}})},T=R=>{R.includes("No QR code found")||console.log("Scan error:",R)},A=async()=>{await E(),v(R=>R==="environment"?"user":"environment"),o(!1)},P=()=>{x(!1),h(!1),c(null),C()},M=()=>{c(null),n(null),k()};return a===!1?r.jsxs("div",{className:"flex flex-col items-center justify-center p-8 bg-gray-100 dark:bg-gray-800 rounded-xl",children:[r.jsx(qie,{className:"w-16 h-16 text-gray-400 mb-4"}),r.jsx("h3",{className:"text-lg font-semibold text-gray-700 dark:text-gray-200 mb-2",children:"Camera Access Required"}),r.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 text-center mb-4",children:l||"Please enable camera access in your browser settings to scan QR codes."}),r.jsx("button",{onClick:M,className:"px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700",children:"Try Again"})]}):a===null?r.jsxs("div",{className:"flex flex-col items-center justify-center p-8",children:[r.jsx(Ke,{className:"w-12 h-12 text-primary-600 animate-spin mb-4"}),r.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Requesting camera access..."})]}):r.jsxs("div",{className:"relative",ref:N,children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:"Scan QR Code"}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("button",{onClick:A,className:"p-2 bg-gray-100 dark:bg-gray-700 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600",title:"Switch camera",children:r.jsx(Xie,{className:"w-5 h-5 text-gray-600 dark:text-gray-300"})}),t&&r.jsx("button",{onClick:t,className:"p-2 bg-gray-100 dark:bg-gray-700 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600",children:r.jsx(Ct,{className:"w-5 h-5 text-gray-600 dark:text-gray-300"})})]})]}),r.jsx("div",{className:"relative rounded-xl overflow-hidden bg-black",style:{minHeight:"300px"},children:!f&&!d?r.jsxs(r.Fragment,{children:[r.jsx("div",{id:"qr-scanner-element",className:"w-full",style:{minHeight:"300px"}}),!i&&r.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center bg-gray-900",children:[r.jsx(Ke,{className:"w-10 h-10 text-white animate-spin mb-3"}),r.jsx("p",{className:"text-white text-sm",children:"Starting camera..."})]})]}):d?r.jsxs("div",{className:"flex flex-col items-center justify-center h-[300px] bg-gray-900",children:[r.jsx(Ke,{className:"w-12 h-12 text-white animate-spin mb-4"}),r.jsx("p",{className:"text-white",children:"Validating QR code..."})]}):r.jsxs("div",{className:"flex flex-col items-center justify-center h-[300px] bg-gray-900",children:[r.jsx(Ae,{className:"w-16 h-16 text-green-500 mb-4"}),r.jsx("p",{className:"text-white text-lg font-medium",children:"QR Code Scanned!"}),r.jsx("button",{onClick:P,className:"mt-4 px-4 py-2 bg-white text-gray-900 rounded-lg hover:bg-gray-100",children:"Scan Another"})]})}),l&&r.jsxs("div",{className:"mt-4 p-3 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg flex items-center gap-2 text-red-700 dark:text-red-400",children:[r.jsx(dt,{className:"w-5 h-5 flex-shrink-0"}),r.jsx("p",{className:"text-sm",children:l})]}),r.jsx("div",{className:"mt-4 text-center",children:r.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Point your camera at a payment QR code"})})]})}function pq({isOpen:e,onClose:t}){var R,$,W,I,B,O,F;const{user:s}=pt(),{data:a,isLoading:n}=mi(),i=Ut(),[o,l]=p.useState("scan"),[c,d]=p.useState(null),[h,f]=p.useState(""),[x,y]=p.useState(""),[v,w]=p.useState(""),[N,k]=p.useState(null),[C,E]=p.useState([]);p.useEffect(()=>{cr.getCurrencies().then(E)},[]),p.useEffect(()=>{if(a&&a.length>0&&!x){const q=a.find(V=>V.status==="ACTIVE"&&V.currency==="SLE"),H=a.find(V=>V.status==="ACTIVE"),K=q||H||a[0];y(K.id)}},[a,x]),p.useEffect(()=>{e||setTimeout(()=>{l("scan"),d(null),f(""),w(""),k(null)},300)},[e]);const _=q=>{var H;return((H=C.find(K=>K.code===q))==null?void 0:H.symbol)||q},T=(q,H)=>`${_(H)} ${q.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}`,A=q=>{var H;if(!q.valid){w(q.error||"Invalid QR code"),l("error");return}if(q.checkoutSessionId){t(),i(`/scan-pay/${q.checkoutSessionId}`);return}d(q),(H=q.data)!=null&&H.amount&&f(q.data.amount.toString()),l("confirm")},P=async()=>{var K,V;if(!(c!=null&&c.recipient)||!h||!x){w("Missing payment details");return}const q=parseFloat(h);if(q<=0){w("Amount must be greater than 0");return}const H=a==null?void 0:a.find(z=>z.id===x);if(!H||H.balance<q){w("Insufficient balance");return}l("processing"),w("");try{const z=`qr_${Date.now()}_${Math.random().toString(36).substring(2,9)}`,{data:G,error:te}=await X.from("transactions").insert({user_id:s==null?void 0:s.id,wallet_id:x,type:"TRANSFER",amount:-q,currency:H.currency||"SLE",status:"COMPLETED",description:`Payment to ${c.recipient.name}`,external_id:z,metadata:{recipient_id:c.recipient.id,recipient_wallet_id:c.recipient.walletId,qr_reference:(K=c.data)==null?void 0:K.reference,payment_type:"qr_scan"}}).select().single();if(te)throw te;const{error:he}=await X.from("wallets").update({balance:H.balance-q,updated_at:new Date().toISOString()}).eq("id",x);if(he)throw he;if(c.recipient.walletId){const{data:ne}=await X.from("wallets").select("balance").eq("id",c.recipient.walletId).single();if(ne){await X.from("wallets").update({balance:(ne.balance||0)+q,updated_at:new Date().toISOString()}).eq("id",c.recipient.walletId);const ce=`qr_rcv_${Date.now()}_${Math.random().toString(36).substring(2,9)}`;await X.from("transactions").insert({user_id:c.recipient.id,wallet_id:c.recipient.walletId,type:"TRANSFER",amount:q,currency:H.currency||"SLE",status:"COMPLETED",description:`Payment from ${s==null?void 0:s.firstName} ${s==null?void 0:s.lastName}`,external_id:ce,metadata:{sender_id:s==null?void 0:s.id,sender_wallet_id:x,qr_reference:(V=c.data)==null?void 0:V.reference,payment_type:"qr_receive"}})}}k((G==null?void 0:G.id)||"success"),l("success")}catch(z){console.error("Payment error:",z),w(z.message||"Payment failed. Please try again."),l("error")}},M=()=>{l("scan"),d(null),f(""),w("")};return e?(a==null||a.find(q=>q.id===x),r.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50 p-4",children:r.jsxs(se,{className:"w-full max-w-md max-h-[90vh] overflow-y-auto",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"p-2 bg-primary-100 dark:bg-primary-900/30 rounded-lg",children:r.jsx(Vs,{className:"w-5 h-5 text-primary-600 dark:text-primary-400"})}),r.jsxs("div",{children:[r.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Scan to Pay"}),r.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:[o==="scan"&&"Scan a QR code to pay",o==="confirm"&&"Confirm payment details",o==="processing"&&"Processing payment...",o==="success"&&"Payment successful!",o==="error"&&"Payment failed"]})]})]}),r.jsx("button",{onClick:t,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:r.jsx(Ct,{className:"w-5 h-5 text-gray-500 dark:text-gray-400"})})]}),o==="scan"&&r.jsx(gq,{onScan:A,onClose:t,autoValidate:!0}),o==="confirm"&&(c==null?void 0:c.recipient)&&r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-12 h-12 bg-primary-100 dark:bg-primary-900/30 rounded-full flex items-center justify-center",children:r.jsx(br,{className:"w-6 h-6 text-primary-600 dark:text-primary-400"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Paying to"}),r.jsx("p",{className:"font-semibold text-gray-900 dark:text-white",children:c.recipient.name})]})]}),((R=c.data)==null?void 0:R.description)&&r.jsx("p",{className:"mt-2 text-sm text-gray-600 dark:text-gray-400",children:c.data.description})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Amount"}),r.jsxs("div",{className:"relative",children:[r.jsx("span",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-500 dark:text-gray-400",children:_((($=c.data)==null?void 0:$.currency)||"SLE")}),r.jsx("input",{type:"number",min:"0.01",step:"0.01",value:h,onChange:q=>f(q.target.value),disabled:!!((W=c.data)!=null&&W.amount),className:"w-full pl-10 pr-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500 bg-white dark:bg-gray-800 text-gray-900 dark:text-white disabled:bg-gray-100 dark:disabled:bg-gray-700",placeholder:"0.00"})]}),((I=c.data)==null?void 0:I.amount)&&r.jsx("p",{className:"mt-1 text-xs text-gray-500 dark:text-gray-400",children:"Amount is fixed by the payment request"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Pay from"}),n?r.jsxs("div",{className:"flex items-center justify-center py-4",children:[r.jsx(Ke,{className:"w-5 h-5 animate-spin text-primary-600"}),r.jsx("span",{className:"ml-2 text-sm text-gray-500",children:"Loading wallets..."})]}):a&&a.length>0?r.jsx("div",{className:"space-y-2 max-h-48 overflow-y-auto overscroll-contain touch-pan-y",style:{WebkitOverflowScrolling:"touch"},children:a.map(q=>r.jsxs("button",{type:"button",onClick:()=>y(q.id),className:`w-full flex items-center gap-3 p-3 rounded-lg border-2 transition-all ${x===q.id?"border-primary-500 bg-primary-50 dark:bg-primary-900/20":"border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 hover:border-gray-300 dark:hover:border-gray-600"}`,children:[r.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center ${x===q.id?"bg-primary-100 dark:bg-primary-800":"bg-gray-100 dark:bg-gray-700"}`,children:r.jsx(Rt,{className:`w-5 h-5 ${x===q.id?"text-primary-600 dark:text-primary-400":"text-gray-500 dark:text-gray-400"}`})}),r.jsxs("div",{className:"flex-1 text-left",children:[r.jsxs("p",{className:`font-medium ${x===q.id?"text-primary-700 dark:text-primary-300":"text-gray-900 dark:text-white"}`,children:[q.currency," Wallet"]}),r.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:T(q.balance,q.currency)})]}),x===q.id&&r.jsx(Ae,{className:"w-5 h-5 text-primary-600 dark:text-primary-400"})]},q.id))}):r.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 text-center py-4",children:"No wallets available"})]}),v&&r.jsxs("div",{className:"p-3 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg flex items-center gap-2 text-red-700 dark:text-red-400",children:[r.jsx(dt,{className:"w-4 h-4 flex-shrink-0"}),r.jsx("span",{className:"text-sm",children:v})]}),r.jsxs("div",{className:"flex gap-3 pt-2",children:[r.jsx(Oe,{variant:"outline",className:"flex-1",onClick:M,children:"Scan Again"}),r.jsxs(Oe,{className:"flex-1",onClick:P,disabled:!h||parseFloat(h)<=0,children:["Pay ",h?T(parseFloat(h),((B=c.data)==null?void 0:B.currency)||"SLE"):"",r.jsx(os,{className:"w-4 h-4 ml-2"})]})]})]}),o==="processing"&&r.jsxs("div",{className:"flex flex-col items-center justify-center py-12",children:[r.jsx(Ke,{className:"w-12 h-12 text-primary-600 dark:text-primary-400 animate-spin mb-4"}),r.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Processing your payment..."})]}),o==="success"&&r.jsxs("div",{className:"flex flex-col items-center justify-center py-8",children:[r.jsx("div",{className:"w-16 h-16 bg-green-100 dark:bg-green-900/30 rounded-full flex items-center justify-center mb-4",children:r.jsx(Ae,{className:"w-8 h-8 text-green-600 dark:text-green-400"})}),r.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:"Payment Successful!"}),r.jsxs("p",{className:"text-gray-500 dark:text-gray-400 text-center mb-2",children:["You paid ",T(parseFloat(h),((O=c==null?void 0:c.data)==null?void 0:O.currency)||"SLE")," to ",(F=c==null?void 0:c.recipient)==null?void 0:F.name]}),N&&r.jsxs("p",{className:"text-xs text-gray-400 dark:text-gray-500 mb-6",children:["Transaction ID: ",N.slice(0,8),"..."]}),r.jsx(Oe,{onClick:t,className:"w-full",children:"Done"})]}),o==="error"&&r.jsxs("div",{className:"flex flex-col items-center justify-center py-8",children:[r.jsx("div",{className:"w-16 h-16 bg-red-100 dark:bg-red-900/30 rounded-full flex items-center justify-center mb-4",children:r.jsx(dt,{className:"w-8 h-8 text-red-600 dark:text-red-400"})}),r.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:"Payment Failed"}),r.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-center mb-6",children:v||"Something went wrong. Please try again."}),r.jsxs("div",{className:"flex gap-3 w-full",children:[r.jsx(Oe,{variant:"outline",className:"flex-1",onClick:t,children:"Cancel"}),r.jsx(Oe,{className:"flex-1",onClick:M,children:"Try Again"})]})]})]})})):null}const Bxe="/api",$xe={m17:{name:"Orange Money",color:"text-orange-600",icon:"OM",bgColor:"bg-orange-100"},m18:{name:"Africell Money",color:"text-blue-600",icon:"AF",bgColor:"bg-blue-100"}},Uxe=["72","73","74","75","76","78","79"],Vxe=["30","33","77","80","88","90","99"];function Wxe(e){const t=e.replace(/\s+/g,"").replace(/^(\+232|232|0)/,"");if(t.length<2)return null;const s=t.substring(0,2);return Uxe.includes(s)?"m17":Vxe.includes(s)?"m18":null}function zxe({isOpen:e,onClose:t,onSuccess:s}){const{user:a}=pt(),{data:n,isLoading:i,refetch:o}=mi(),[l,c]=p.useState("form"),[d,h]=p.useState(""),[f,x]=p.useState(null),[y,v]=p.useState(""),[w,N]=p.useState(""),[k,C]=p.useState(""),[E,_]=p.useState(0),[T,A]=p.useState(0),[P,M]=p.useState(""),[R,$]=p.useState(null),[W,I]=p.useState([]);p.useEffect(()=>{cr.getCurrencies().then(I)},[]),p.useEffect(()=>{const G=Wxe(y);x(G)},[y]),p.useEffect(()=>{if(n&&n.length>0&&!d){const G=n.find(ne=>ne.status==="ACTIVE"&&ne.currency==="SLE"),te=n.find(ne=>ne.status==="ACTIVE"),he=G||te||n[0];h(he.id)}},[n,d]),p.useEffect(()=>{const G=parseFloat(w)||0;if(G>0){let te=Math.round(G*.02*100)/100;_(te),A(G+te)}else _(0),A(0)},[w]),p.useEffect(()=>{e||setTimeout(()=>{c("form"),v(""),N(""),C(""),M(""),$(null),x(null)},300)},[e]);const B=G=>{var te;return G==="SLE"?"Le":((te=W.find(he=>he.code===G))==null?void 0:te.symbol)||G},O=(G,te)=>`${B(te)} ${G.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}`,F=G=>{const te=G.replace(/\s+/g,"").replace(/^(\+232|232)/,"");return/^[0-9]{8}$/.test(te)},q=()=>{if(M(""),!d){M("Please select a wallet");return}if(!y||!F(y)){M("Please enter a valid phone number (8 digits)");return}if(!f){M("Unable to detect network. Please enter a valid Orange or Africell number.");return}const G=parseFloat(w);if(!G||G<=0){M("Please enter a valid amount");return}const te=n==null?void 0:n.find(he=>he.id===d);if(!te||te.balance<T){M(`Insufficient balance. You need ${O(T,"SLE")} (including fee)`);return}c("confirm")},H=async()=>{if(!(!a||!f)){c("processing"),M("");try{const G=await fetch(`${Bxe}/router/mobile-money/send`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({amount:parseFloat(w),currency:"SLE",phoneNumber:y,providerId:f,userId:a.id,walletId:d,description:k||void 0})}),te=await G.json();if(!G.ok||!te.success)throw new Error(te.error||"Failed to send money");$(te.transactionId),c("success"),o(),s&&s()}catch(G){console.error("Send to mobile money error:",G),M(G.message||"Failed to send money. Please try again."),c("error")}}},K=()=>{c("form"),M("")};if(!e)return null;const V=n==null?void 0:n.find(G=>G.id===d),z=f?$xe[f]:{name:"Mobile Money",color:"text-gray-600",icon:"?",bgColor:"bg-gray-100"};return r.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50 p-4",children:r.jsxs(se,{className:"w-full max-w-md max-h-[90vh] overflow-y-auto",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"p-2 bg-orange-100 dark:bg-orange-900/30 rounded-lg",children:r.jsx(Ws,{className:"w-5 h-5 text-orange-600 dark:text-orange-400"})}),r.jsxs("div",{children:[r.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Send to Mobile Money"}),r.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:[l==="form"&&"Enter recipient details",l==="confirm"&&"Confirm transfer details",l==="processing"&&"Processing transfer...",l==="success"&&"Transfer successful!",l==="error"&&"Transfer failed"]})]})]}),r.jsx("button",{onClick:t,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:r.jsx(Ct,{className:"w-5 h-5 text-gray-500 dark:text-gray-400"})})]}),l==="form"&&r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Recipient Phone Number"}),r.jsxs("div",{className:"relative",children:[r.jsx("span",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-500",children:"+232"}),r.jsx("input",{type:"tel",value:y,onChange:G=>v(G.target.value.replace(/\D/g,"").slice(0,8)),placeholder:"76123456",className:"w-full pl-14 pr-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500 bg-white dark:bg-gray-800 text-gray-900 dark:text-white"})]}),y.length>=2&&r.jsx("div",{className:"mt-2",children:f?r.jsxs("div",{className:`inline-flex items-center gap-2 px-3 py-1.5 rounded-lg ${z.bgColor}`,children:[r.jsx("span",{className:`font-bold text-sm ${z.color}`,children:z.icon}),r.jsx("span",{className:`font-medium text-sm ${z.color}`,children:z.name}),r.jsx("span",{className:"text-xs text-gray-500",children:"detected"})]}):r.jsxs("div",{className:"inline-flex items-center gap-2 px-3 py-1.5 rounded-lg bg-red-50 dark:bg-red-900/20",children:[r.jsx(dt,{className:"w-4 h-4 text-red-500"}),r.jsx("span",{className:"text-sm text-red-600 dark:text-red-400",children:"Unknown network"})]})}),r.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Orange: 72-76, 78-79 | Africell: 30, 33, 77, 80, 88, 90, 99"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Amount"}),r.jsxs("div",{className:"relative",children:[r.jsx("span",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-500",children:"Le"}),r.jsx("input",{type:"number",min:"1",step:"0.01",value:w,onChange:G=>N(G.target.value),placeholder:"10",className:"w-full pl-10 pr-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500 bg-white dark:bg-gray-800 text-gray-900 dark:text-white"})]}),T>0&&r.jsxs("div",{className:"mt-2 p-2 bg-gray-50 dark:bg-gray-800 rounded text-sm",children:[r.jsxs("div",{className:"flex justify-between text-gray-600 dark:text-gray-400",children:[r.jsx("span",{children:"Amount:"}),r.jsx("span",{children:O(parseFloat(w)||0,"SLE")})]}),r.jsxs("div",{className:"flex justify-between text-gray-600 dark:text-gray-400",children:[r.jsx("span",{children:"Fee (2%):"}),r.jsx("span",{children:O(E,"SLE")})]}),r.jsxs("div",{className:"flex justify-between font-medium text-gray-900 dark:text-white pt-1 border-t border-gray-200 dark:border-gray-700 mt-1",children:[r.jsx("span",{children:"Total:"}),r.jsx("span",{children:O(T,"SLE")})]})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Pay from"}),i?r.jsx("div",{className:"flex items-center justify-center py-4",children:r.jsx(Ke,{className:"w-5 h-5 animate-spin text-primary-600"})}):n&&n.length>0?r.jsx("div",{className:"space-y-2 max-h-32 overflow-y-auto",children:n.map(G=>r.jsxs("button",{type:"button",onClick:()=>h(G.id),className:`w-full flex items-center gap-3 p-3 rounded-lg border-2 transition-all ${d===G.id?"border-primary-500 bg-primary-50 dark:bg-primary-900/20":"border-gray-200 dark:border-gray-700 hover:border-gray-300"}`,children:[r.jsx(Rt,{className:`w-5 h-5 ${d===G.id?"text-primary-600":"text-gray-500"}`}),r.jsxs("div",{className:"flex-1 text-left",children:[r.jsxs("p",{className:`font-medium ${d===G.id?"text-primary-700 dark:text-primary-300":"text-gray-900 dark:text-white"}`,children:[G.currency," Wallet"]}),r.jsx("p",{className:"text-sm text-gray-500",children:O(G.balance,G.currency)})]}),d===G.id&&r.jsx(Ae,{className:"w-5 h-5 text-primary-600"})]},G.id))}):r.jsx("p",{className:"text-sm text-gray-500 text-center py-4",children:"No wallets available"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Description (optional)"}),r.jsx("input",{type:"text",value:k,onChange:G=>C(G.target.value),placeholder:"What's this for?",className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500 bg-white dark:bg-gray-800 text-gray-900 dark:text-white"})]}),P&&r.jsxs("div",{className:"p-3 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg flex items-center gap-2 text-red-700 dark:text-red-400",children:[r.jsx(dt,{className:"w-4 h-4 flex-shrink-0"}),r.jsx("span",{className:"text-sm",children:P})]}),r.jsxs("div",{className:"p-3 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg flex items-start gap-2 text-blue-700 dark:text-blue-400",children:[r.jsx($N,{className:"w-4 h-4 flex-shrink-0 mt-0.5"}),r.jsx("span",{className:"text-sm",children:"Transfers are typically completed within minutes. A 2% fee applies."})]}),r.jsxs("div",{className:"flex gap-3 pt-2",children:[r.jsx(Oe,{variant:"outline",className:"flex-1",onClick:t,children:"Cancel"}),r.jsxs(Oe,{className:"flex-1",onClick:q,disabled:!w||!y||!f,children:["Continue",r.jsx(os,{className:"w-4 h-4 ml-2"})]})]})]}),l==="confirm"&&r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-gray-800 rounded-lg space-y-3",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"text-sm text-gray-500",children:"Sending to"}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:`font-bold ${z.color}`,children:z.icon}),r.jsx("span",{className:"font-medium",children:z.name})]})]}),r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"text-sm text-gray-500",children:"Phone Number"}),r.jsxs("span",{className:"font-medium",children:["+232 ",y]})]}),r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"text-sm text-gray-500",children:"Amount"}),r.jsx("span",{className:"font-medium",children:O(parseFloat(w),"SLE")})]}),r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"text-sm text-gray-500",children:"Fee"}),r.jsx("span",{className:"font-medium",children:O(E,"SLE")})]}),r.jsxs("div",{className:"flex justify-between items-center pt-2 border-t border-gray-200 dark:border-gray-700",children:[r.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Total Deduction"}),r.jsx("span",{className:"font-bold text-lg text-primary-600",children:O(T,"SLE")})]})]}),V&&r.jsxs("div",{className:"flex items-center justify-between p-3 bg-primary-50 dark:bg-primary-900/20 rounded-lg",children:[r.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Wallet Balance"}),r.jsx("span",{className:"font-medium",children:O(V.balance,V.currency)})]}),r.jsx("div",{className:"p-3 bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-lg",children:r.jsx("p",{className:"text-sm text-yellow-800 dark:text-yellow-200",children:"Please verify the phone number is correct. Transfers cannot be reversed once sent."})}),r.jsxs("div",{className:"flex gap-3 pt-2",children:[r.jsx(Oe,{variant:"outline",className:"flex-1",onClick:()=>c("form"),children:"Back"}),r.jsxs(Oe,{className:"flex-1 bg-orange-600 hover:bg-orange-700",onClick:H,children:["Send ",O(parseFloat(w),"SLE")]})]})]}),l==="processing"&&r.jsxs("div",{className:"flex flex-col items-center justify-center py-12",children:[r.jsx(Ke,{className:"w-12 h-12 text-orange-600 animate-spin mb-4"}),r.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Processing your transfer..."}),r.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Please wait, do not close this window."})]}),l==="success"&&r.jsxs("div",{className:"flex flex-col items-center justify-center py-8",children:[r.jsx("div",{className:"w-16 h-16 bg-green-100 dark:bg-green-900/30 rounded-full flex items-center justify-center mb-4",children:r.jsx(Ae,{className:"w-8 h-8 text-green-600 dark:text-green-400"})}),r.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:"Transfer Successful!"}),r.jsxs("p",{className:"text-gray-500 dark:text-gray-400 text-center mb-2",children:[O(parseFloat(w),"SLE")," sent to ",z.name]}),r.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-1",children:["+232 ",y]}),R&&r.jsxs("p",{className:"text-xs text-gray-400 dark:text-gray-500 mb-6",children:["Transaction ID: ",R.slice(0,8),"..."]}),r.jsx(Oe,{onClick:t,className:"w-full",children:"Done"})]}),l==="error"&&r.jsxs("div",{className:"flex flex-col items-center justify-center py-8",children:[r.jsx("div",{className:"w-16 h-16 bg-red-100 dark:bg-red-900/30 rounded-full flex items-center justify-center mb-4",children:r.jsx(dt,{className:"w-8 h-8 text-red-600 dark:text-red-400"})}),r.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:"Transfer Failed"}),r.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-center mb-6",children:P||"Something went wrong. Please try again."}),r.jsxs("div",{className:"flex gap-3 w-full",children:[r.jsx(Oe,{variant:"outline",className:"flex-1",onClick:t,children:"Cancel"}),r.jsx(Oe,{className:"flex-1",onClick:K,children:"Try Again"})]})]})]})})}const TM={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}},sm={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.4,ease:"easeOut"}}};function qxe(){const e=Ut(),{user:t}=pt(),{data:s,isLoading:a,error:n}=mi(),{data:i,isLoading:o,error:l}=r2(),{data:c,isLoading:d,error:h}=yfe(),[f,x]=p.useState([]),[y,v]=p.useState(null),[w,N]=p.useState(!1),[k,C]=p.useState(!1);p.useEffect(()=>{(async()=>{const[W,I]=await Promise.all([cr.getCurrencies(),cr.getDefaultCurrency()]);x(W),v(I)})()},[]);const E=$=>{var W;return $?((W=f.find(I=>I.code===$))==null?void 0:W.symbol)||$:(y==null?void 0:y.symbol)||""},_=($,W)=>`${E(W)} ${$.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}`,T=(s==null?void 0:s.reduce(($,W)=>$+(W.balance||0),0))||0,A=(s==null?void 0:s.find($=>$.status==="ACTIVE"))||(s==null?void 0:s[0]),P=(A==null?void 0:A.currency)||"SLE",M=(i==null?void 0:i.filter($=>$.status==="ACTIVE").length)||0,R=$=>{sessionStorage.setItem("sendMoneyRecipient",JSON.stringify($)),e("/send")};return r.jsxs(dn,{children:[r.jsxs("div",{className:"space-y-8",children:[r.jsxs(Pe.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.5},children:[r.jsxs("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:["Welcome back, ",t==null?void 0:t.firstName,"!"]}),r.jsx("p",{className:"text-gray-500 dark:text-gray-400 mt-1",children:"Here's what's happening with your account."})]}),r.jsxs(Pe.div,{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",variants:TM,initial:"hidden",animate:"visible",children:[r.jsx(Pe.div,{variants:sm,children:r.jsxs(Be,{glowEffect:!0,delay:0,children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Total Balance"}),r.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white mt-1",children:a?"...":_(T,P)})]}),r.jsx("div",{className:"w-12 h-12 bg-primary-100 dark:bg-primary-900/30 rounded-full flex items-center justify-center",children:r.jsx(Rt,{className:"w-6 h-6 text-primary-600 dark:text-primary-400"})})]}),r.jsxs("div",{className:"mt-4 flex items-center text-sm text-green-600 dark:text-green-400",children:[r.jsx(Ts,{className:"w-4 h-4 mr-1"}),r.jsx("span",{children:"+12.5% from last month"})]})]})}),r.jsx(Pe.div,{variants:sm,children:r.jsxs(Be,{glowEffect:!0,delay:.1,children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Active Wallets"}),r.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white mt-1",children:a?"...":(s==null?void 0:s.length)||0})]}),r.jsx("div",{className:"w-12 h-12 bg-green-100 dark:bg-green-900/30 rounded-full flex items-center justify-center",children:r.jsx(Rt,{className:"w-6 h-6 text-green-600 dark:text-green-400"})})]}),r.jsx(xt,{to:"/wallets",className:"mt-4 text-sm text-primary-600 dark:text-primary-400 hover:text-primary-700 dark:hover:text-primary-300 block",children:"View all wallets "})]})}),r.jsx(Pe.div,{variants:sm,children:r.jsxs(Be,{glowEffect:!0,delay:.2,children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Active Cards"}),r.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white mt-1",children:o?"...":M})]}),r.jsx("div",{className:"w-12 h-12 bg-blue-100 dark:bg-blue-900/30 rounded-full flex items-center justify-center",children:r.jsx(lt,{className:"w-6 h-6 text-blue-600 dark:text-blue-400"})})]}),r.jsx(xt,{to:"/cards",className:"mt-4 text-sm text-primary-600 dark:text-primary-400 hover:text-primary-700 dark:hover:text-primary-300 block",children:"Manage cards "})]})}),r.jsx(Pe.div,{variants:sm,children:r.jsxs(Be,{glowEffect:!0,delay:.3,children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"KYC Status"}),r.jsx("p",{className:fe("text-lg font-bold mt-1",(t==null?void 0:t.kycStatus)==="VERIFIED"&&"text-green-600 dark:text-green-400",(t==null?void 0:t.kycStatus)==="PENDING"&&"text-yellow-600 dark:text-yellow-400",(t==null?void 0:t.kycStatus)==="REJECTED"&&"text-red-600 dark:text-red-400",(t==null?void 0:t.kycStatus)==="SUBMITTED"&&"text-blue-600 dark:text-blue-400"),children:t==null?void 0:t.kycStatus})]}),r.jsx("div",{className:fe("w-12 h-12 rounded-full flex items-center justify-center",(t==null?void 0:t.kycStatus)==="VERIFIED"&&"bg-green-100 dark:bg-green-900/30",(t==null?void 0:t.kycStatus)==="PENDING"&&"bg-yellow-100 dark:bg-yellow-900/30",(t==null?void 0:t.kycStatus)==="REJECTED"&&"bg-red-100 dark:bg-red-900/30",(t==null?void 0:t.kycStatus)==="SUBMITTED"&&"bg-blue-100 dark:bg-blue-900/30"),children:r.jsx(Ts,{className:fe("w-6 h-6",(t==null?void 0:t.kycStatus)==="VERIFIED"&&"text-green-600 dark:text-green-400",(t==null?void 0:t.kycStatus)==="PENDING"&&"text-yellow-600 dark:text-yellow-400",(t==null?void 0:t.kycStatus)==="REJECTED"&&"text-red-600 dark:text-red-400",(t==null?void 0:t.kycStatus)==="SUBMITTED"&&"text-blue-600 dark:text-blue-400")})})]}),(t==null?void 0:t.kycStatus)!=="VERIFIED"&&r.jsx(xt,{to:"/profile",className:"mt-4 text-sm text-primary-600 dark:text-primary-400 hover:text-primary-700 dark:hover:text-primary-300 block",children:"Complete verification "})]})})]}),r.jsxs(Be,{className:"p-6",delay:.4,glowEffect:!0,children:[r.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[r.jsx("div",{className:"w-10 h-10 bg-primary-100 dark:bg-primary-900/30 rounded-full flex items-center justify-center",children:r.jsx(Tn,{className:"w-5 h-5 text-primary-600 dark:text-primary-400"})}),r.jsxs("div",{children:[r.jsx("h2",{className:"font-semibold text-gray-900 dark:text-white",children:"Send Money"}),r.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Search for a user to send money instantly"})]})]}),r.jsx(uA,{placeholder:"Search by @username, phone, or name...",excludeUserId:t==null?void 0:t.id,onSelect:R}),r.jsxs("div",{className:"mt-3 flex items-center gap-4 text-xs text-gray-500 dark:text-gray-400",children:[r.jsxs("span",{className:"flex items-center gap-1",children:[r.jsx(nn,{className:"w-3 h-3"}),"Search by name"]}),r.jsx("span",{children:""}),r.jsx("span",{children:"@username"}),r.jsx("span",{children:""}),r.jsx("span",{children:"Phone number"})]})]}),r.jsxs(Pe.div,{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",variants:TM,initial:"hidden",animate:"visible",children:[r.jsx(Pe.div,{variants:sm,children:r.jsxs(Be,{delay:.5,children:[r.jsxs(pa,{children:[r.jsx(ya,{children:"Recent Transactions"}),r.jsx(M0,{children:"Your latest financial activity"})]}),r.jsx("div",{className:"space-y-4",children:d?r.jsx("div",{className:"py-8 text-center text-gray-500 dark:text-gray-400",children:"Loading transactions..."}):c&&c.length>0?c.slice(0,5).map(($,W)=>{const I=$.amount>0||["deposit","receive","refund"].includes($.type.toLowerCase());return r.jsxs(Pe.div,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},transition:{delay:.6+W*.1},className:fe("flex items-center justify-between py-3",W<c.slice(0,5).length-1&&"border-b border-gray-100 dark:border-gray-700"),children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:fe("w-10 h-10 rounded-full flex items-center justify-center",I?"bg-green-100 dark:bg-green-900/30":"bg-red-100 dark:bg-red-900/30"),children:I?r.jsx(Aa,{className:"w-5 h-5 text-green-600 dark:text-green-400"}):r.jsx(Rr,{className:"w-5 h-5 text-red-600 dark:text-red-400"})}),r.jsxs("div",{className:"ml-3",children:[r.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:$.description||$.type}),r.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:new Date($.createdAt).toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})})]})]}),r.jsxs("p",{className:fe("text-sm font-semibold",I?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"),children:[I?"+":"",_(Math.abs($.amount))]})]},$.id)}):r.jsxs("div",{className:"py-8 text-center text-gray-500 dark:text-gray-400",children:[r.jsx("p",{children:"No transactions yet"}),r.jsx("p",{className:"text-xs mt-1",children:"Send money to see your activity here"})]})}),r.jsx(xt,{to:"/transactions",className:"block mt-4 text-center text-sm text-primary-600 dark:text-primary-400 hover:text-primary-700 dark:hover:text-primary-300",children:"View all transactions"})]})}),r.jsx(Pe.div,{variants:sm,children:r.jsxs(Be,{delay:.6,children:[r.jsxs(pa,{children:[r.jsx(ya,{children:"Quick Actions"}),r.jsx(M0,{children:"Common tasks you can perform"})]}),r.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-4",children:[r.jsxs("button",{onClick:()=>N(!0),className:"flex flex-col items-center p-4 bg-gray-50 dark:bg-gray-700/50 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",children:[r.jsx("div",{className:"w-12 h-12 bg-primary-100 dark:bg-primary-900/30 rounded-full flex items-center justify-center mb-2",children:r.jsx(Vs,{className:"w-6 h-6 text-primary-600 dark:text-primary-400"})}),r.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:"Scan to Pay"})]}),r.jsxs(xt,{to:"/wallets?action=deposit",className:"flex flex-col items-center p-4 bg-gray-50 dark:bg-gray-700/50 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",children:[r.jsx("div",{className:"w-12 h-12 bg-green-100 dark:bg-green-900/30 rounded-full flex items-center justify-center mb-2",children:r.jsx(Aa,{className:"w-6 h-6 text-green-600 dark:text-green-400"})}),r.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:"Deposit"})]}),r.jsxs("button",{onClick:()=>C(!0),className:"flex flex-col items-center p-4 bg-gray-50 dark:bg-gray-700/50 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",children:[r.jsx("div",{className:"w-12 h-12 bg-orange-100 dark:bg-orange-900/30 rounded-full flex items-center justify-center mb-2",children:r.jsx(Ws,{className:"w-6 h-6 text-orange-600 dark:text-orange-400"})}),r.jsxs("span",{className:"text-sm font-medium text-gray-900 dark:text-white text-center",children:["Send to",r.jsx("br",{}),"Mobile Money"]})]}),r.jsxs(xt,{to:"/withdraw",className:"flex flex-col items-center p-4 bg-gray-50 dark:bg-gray-700/50 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",children:[r.jsx("div",{className:"w-12 h-12 bg-emerald-100 dark:bg-emerald-900/30 rounded-full flex items-center justify-center mb-2",children:r.jsx(Da,{className:"w-6 h-6 text-emerald-600 dark:text-emerald-400"})}),r.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-white text-center",children:"Withdraw"})]}),r.jsxs(xt,{to:"/wallets?action=transfer",className:"flex flex-col items-center p-4 bg-gray-50 dark:bg-gray-700/50 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",children:[r.jsx("div",{className:"w-12 h-12 bg-blue-100 dark:bg-blue-900/30 rounded-full flex items-center justify-center mb-2",children:r.jsx(Rr,{className:"w-6 h-6 text-blue-600 dark:text-blue-400"})}),r.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:"Transfer"})]}),r.jsxs(xt,{to:"/cards?action=new",className:"flex flex-col items-center p-4 bg-gray-50 dark:bg-gray-700/50 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",children:[r.jsx("div",{className:"w-12 h-12 bg-purple-100 dark:bg-purple-900/30 rounded-full flex items-center justify-center mb-2",children:r.jsx(lt,{className:"w-6 h-6 text-purple-600 dark:text-purple-400"})}),r.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:"New Card"})]})]})]})})]})]}),r.jsx(Pe.button,{initial:{scale:0},animate:{scale:1},whileHover:{scale:1.1},whileTap:{scale:.95},onClick:()=>N(!0),className:"fixed bottom-6 right-6 z-40 w-14 h-14 bg-primary-600 hover:bg-primary-700 text-white rounded-full shadow-lg flex items-center justify-center md:hidden","aria-label":"Scan to Pay",children:r.jsx(Vs,{className:"w-6 h-6"})}),r.jsx(pq,{isOpen:w,onClose:()=>N(!1)}),r.jsx(zxe,{isOpen:k,onClose:()=>C(!1)})]})}function Hxe({pot:e,onClick:t,className:s}){const a=e.goalAmount?Math.min(100,e.currentBalance/e.goalAmount*100):0,n=e.lockStatus==="LOCKED"||e.adminLocked;e.lockStatus==="UNLOCKED"&&e.adminLocked;const i=e.lockEndDate?Math.max(0,Math.ceil((new Date(e.lockEndDate).getTime()-Date.now())/(1e3*60*60*24))):0,o=h=>new Intl.NumberFormat("en-SL",{style:"currency",currency:"SLE",minimumFractionDigits:2}).format(h),l=h=>new Date(h).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}),d=(()=>{switch(e.icon){case"piggy-bank":default:return lo}})();return r.jsxs("div",{onClick:t,className:fe("bg-white rounded-xl border border-gray-200 overflow-hidden transition-all duration-200",t&&"cursor-pointer hover:shadow-lg hover:border-primary-300",e.adminLocked&&"border-red-300 bg-red-50/30",s),children:[r.jsx("div",{className:"h-2",style:{backgroundColor:e.color||"#4F46E5"}}),r.jsxs("div",{className:"p-5",children:[r.jsxs("div",{className:"flex items-start justify-between mb-4",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-12 h-12 rounded-full flex items-center justify-center",style:{backgroundColor:`${e.color||"#4F46E5"}15`},children:r.jsx(d,{className:"w-6 h-6",style:{color:e.color||"#4F46E5"}})}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-semibold text-gray-900 line-clamp-1",children:e.name}),r.jsxs("div",{className:"flex items-center gap-1 mt-0.5",children:[n?r.jsx(Kr,{className:"w-3.5 h-3.5 text-amber-500"}):r.jsx(Yy,{className:"w-3.5 h-3.5 text-green-500"}),r.jsx("span",{className:fe("text-xs font-medium",n?"text-amber-600":"text-green-600"),children:e.adminLocked?"Admin Locked":n?"Locked":"Unlocked"})]})]})]}),e.autoDepositEnabled&&r.jsxs("div",{className:"flex items-center gap-1 px-2 py-1 bg-primary-50 rounded-full",children:[r.jsx(Ts,{className:"w-3 h-3 text-primary-600"}),r.jsx("span",{className:"text-xs font-medium text-primary-700",children:"Auto"})]})]}),r.jsxs("div",{className:"mb-4",children:[r.jsx("p",{className:"text-2xl font-bold text-gray-900",children:o(e.currentBalance)}),e.goalAmount&&r.jsxs("p",{className:"text-sm text-gray-500",children:["of ",o(e.goalAmount)," goal"]})]}),e.goalAmount&&r.jsxs("div",{className:"mb-4",children:[r.jsx("div",{className:"h-2 bg-gray-100 rounded-full overflow-hidden",children:r.jsx("div",{className:"h-full rounded-full transition-all duration-500",style:{width:`${a}%`,backgroundColor:e.color||"#4F46E5"}})}),r.jsxs("p",{className:"text-xs text-gray-500 mt-1.5",children:[a.toFixed(0),"% of goal"]})]}),r.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.lockEndDate&&n&&r.jsxs("div",{className:"flex items-center gap-1.5 text-gray-600",children:[r.jsx(Li,{className:"w-4 h-4"}),r.jsx("span",{children:i>0?`${i} days left`:`Unlocks ${l(e.lockEndDate)}`})]}),e.autoDepositEnabled&&e.autoDepositAmount&&r.jsxs("div",{className:"text-gray-500",children:[o(e.autoDepositAmount),"/",e.autoDepositFrequency]})]}),e.adminLocked&&e.adminLockReason&&r.jsxs("div",{className:"mt-3 p-2 bg-red-50 rounded-lg flex items-start gap-2",children:[r.jsx(dt,{className:"w-4 h-4 text-red-500 flex-shrink-0 mt-0.5"}),r.jsx("p",{className:"text-xs text-red-700",children:e.adminLockReason})]})]})]})}const Cv=e=>({id:e.id,userId:e.user_id,walletId:e.wallet_id,name:e.name,description:e.description||void 0,goalAmount:e.goal_amount?parseFloat(e.goal_amount):void 0,targetAmount:e.target_amount?parseFloat(e.target_amount):void 0,currentBalance:parseFloat(e.current_balance||e.balance)||0,maturityDate:e.maturity_date||void 0,lockType:e.lock_type,lockPeriodDays:e.lock_period_days||void 0,lockEndDate:e.lock_end_date||void 0,autoDepositEnabled:e.auto_deposit_enabled||!1,autoDepositAmount:e.auto_deposit_amount?parseFloat(e.auto_deposit_amount):void 0,autoDepositFrequency:e.auto_deposit_frequency,autoDepositDay:e.auto_deposit_day||void 0,sourceWalletId:e.source_wallet_id||void 0,nextAutoDepositDate:e.next_auto_deposit_date||void 0,lastAutoDepositDate:e.last_auto_deposit_date||void 0,status:e.status,lockStatus:e.lock_status,withdrawalEnabled:e.withdrawal_enabled||!1,unlockedAt:e.unlocked_at||void 0,unlockReason:e.unlock_reason||void 0,adminLocked:e.admin_locked||!1,adminLockedBy:e.admin_locked_by||void 0,adminLockedAt:e.admin_locked_at||void 0,adminLockReason:e.admin_lock_reason||void 0,icon:e.icon||"piggy-bank",color:e.color||"#4F46E5",createdAt:e.created_at,updatedAt:e.updated_at}),gS=e=>({id:e.id,potId:e.pot_id,transactionId:e.transaction_id||void 0,transactionType:e.transaction_type,amount:parseFloat(e.amount)||0,balanceAfter:e.balance_after?parseFloat(e.balance_after):void 0,status:e.status,description:e.description||void 0,sourceWalletId:e.source_wallet_id||void 0,destinationWalletId:e.destination_wallet_id||void 0,reference:e.reference||void 0,failureReason:e.failure_reason||void 0,retryCount:e.retry_count||0,scheduledAt:e.scheduled_at||void 0,processedAt:e.processed_at||void 0,createdAt:e.created_at}),Kxe=e=>({id:e.id,potId:e.pot_id,userId:e.user_id,notificationType:e.notification_type,title:e.title,message:e.message,metadata:e.metadata||void 0,isRead:e.is_read||!1,sentAt:e.sent_at,readAt:e.read_at||void 0}),fi={async getPots(e){const{data:t,error:s}=await X.from("pots").select("*").eq("user_id",e).neq("status","CLOSED").order("created_at",{ascending:!1});if(s)throw console.error("Error fetching pots:",s),new Error(s.message);if(!t||t.length===0)return[];const a=t.map(o=>o.wallet_id).filter(Boolean),{data:n}=await X.from("wallets").select("id, balance").in("id",a),i=new Map((n||[]).map(o=>[o.id,parseFloat(o.balance)||0]));return t.map(o=>({...Cv(o),currentBalance:i.get(o.wallet_id)||0}))},async getPot(e){const{data:t,error:s}=await X.from("pots").select("*").eq("id",e).single();if(s)throw console.error("Error fetching pot:",s),new Error(s.message);let a=0;if(t.wallet_id){const{data:n}=await X.from("wallets").select("balance").eq("id",t.wallet_id).single();a=parseFloat(n==null?void 0:n.balance)||0}return{...Cv(t),currentBalance:a}},async getPotSummary(e){{const t=await this.getPot(e),s=await this.getPotTransactions(e,{limit:1e3}),a={totalContributions:0,totalWithdrawals:0,contributionCount:0};return s.data.forEach(n=>{n.transactionType==="contribution"||n.transactionType==="auto_deposit"?(a.totalContributions+=n.amount,a.contributionCount++):n.transactionType==="withdrawal"&&(a.totalWithdrawals+=n.amount)}),{id:t.id,name:t.name,description:t.description,currentBalance:t.currentBalance,goalAmount:t.goalAmount,progressPercent:t.goalAmount?t.currentBalance/t.goalAmount*100:void 0,lockType:t.lockType,lockStatus:t.lockStatus,lockEndDate:t.lockEndDate,maturityDate:t.maturityDate,daysUntilUnlock:t.lockEndDate?Math.max(0,Math.ceil((new Date(t.lockEndDate).getTime()-Date.now())/(1e3*60*60*24))):0,autoDeposit:{enabled:t.autoDepositEnabled,amount:t.autoDepositAmount,frequency:t.autoDepositFrequency,nextDate:t.nextAutoDepositDate},stats:a,status:t.status,adminLocked:t.adminLocked,icon:t.icon,color:t.color,createdAt:t.createdAt,updatedAt:t.updatedAt}}},async createPot(e,t){console.log("Creating pot directly via table insertion");const{error:s}=await X.from("pots").select("id").limit(1);if(s&&s.message.includes("does not exist"))throw new Error("Pots table does not exist. Please run the database migration first. Go to Supabase SQL Editor and run the pot system migration.");const a=`pot_${Date.now()}_${Math.random().toString(36).substring(2,10)}`;let n=t.maturityDate;if(!n&&t.lockPeriodDays){const h=new Date;h.setDate(h.getDate()+t.lockPeriodDays),n=h.toISOString()}let i;if(t.autoDepositEnabled&&t.autoDepositFrequency){const h=new Date;switch(t.autoDepositFrequency){case"daily":h.setDate(h.getDate()+1);break;case"weekly":h.setDate(h.getDate()+7);break;case"bi_weekly":h.setDate(h.getDate()+14);break;case"monthly":h.setMonth(h.getMonth()+1);break}i=h.toISOString()}const{data:o,error:l}=await X.from("wallets").insert({external_id:a,user_id:e,wallet_type:"pot",currency:"SLE",balance:0,status:"ACTIVE"}).select().single();if(l)throw console.error("Failed to create pot wallet:",l),new Error("Failed to create pot wallet: "+l.message);console.log("Pot wallet created:",o.id);const{data:c,error:d}=await X.from("pots").insert({user_id:e,wallet_id:o.id,name:t.name,description:t.description,goal_amount:t.goalAmount,target_amount:t.goalAmount,lock_type:t.lockType||"time_based",lock_period_days:t.lockPeriodDays,lock_end_date:n,maturity_date:n,auto_deposit_enabled:t.autoDepositEnabled||!1,auto_deposit_amount:t.autoDepositAmount,auto_deposit_frequency:t.autoDepositFrequency,source_wallet_id:t.sourceWalletId,next_auto_deposit_date:i,icon:t.icon||"piggy-bank",color:t.color||"#4F46E5",status:"ACTIVE",lock_status:"LOCKED"}).select().single();if(d){console.error("Failed to create pot, cleaning up wallet:",d);const{error:h}=await X.from("wallets").delete().eq("id",o.id);throw h&&console.error("Failed to cleanup wallet:",h),new Error("Failed to create pot: "+d.message)}return console.log("Pot created successfully:",c.id),{...Cv(c),currentBalance:0}},async updatePot(e,t){const s={updated_at:new Date().toISOString()};if(t.name!==void 0&&(s.name=t.name),t.description!==void 0&&(s.description=t.description),t.goalAmount!==void 0&&(s.goal_amount=t.goalAmount,s.target_amount=t.goalAmount),t.icon!==void 0&&(s.icon=t.icon),t.color!==void 0&&(s.color=t.color),t.autoDepositEnabled!==void 0&&(s.auto_deposit_enabled=t.autoDepositEnabled),t.autoDepositAmount!==void 0&&(s.auto_deposit_amount=t.autoDepositAmount),t.autoDepositFrequency!==void 0&&(s.auto_deposit_frequency=t.autoDepositFrequency),t.sourceWalletId!==void 0&&(s.source_wallet_id=t.sourceWalletId),t.autoDepositEnabled&&t.autoDepositFrequency){const i=new Date;switch(t.autoDepositFrequency){case"daily":i.setDate(i.getDate()+1);break;case"weekly":i.setDate(i.getDate()+7);break;case"bi_weekly":i.setDate(i.getDate()+14);break;case"monthly":i.setMonth(i.getMonth()+1);break}s.next_auto_deposit_date=i.toISOString()}const{data:a,error:n}=await X.from("pots").update(s).eq("id",e).select().single();if(n)throw console.error("Error updating pot:",n),new Error(n.message);return this.getPot(e)},async contributeToPot(e){const t=await this.getPot(e.potId);if(t.status!=="ACTIVE"&&t.status!=="LOCKED")throw new Error("Pot is not accepting contributions");if(t.adminLocked)throw new Error("Pot is locked by administrator");const{data:s,error:a}=await X.from("wallets").select("balance, status").eq("id",e.sourceWalletId).single();if(a||!s)throw new Error("Source wallet not found");if(s.status!=="ACTIVE")throw new Error("Source wallet is not active");const n=parseFloat(s.balance)||0;if(n<e.amount)throw new Error("Insufficient balance in source wallet");const{error:i}=await X.from("wallets").update({balance:n-e.amount,updated_at:new Date().toISOString()}).eq("id",e.sourceWalletId);if(i)throw new Error("Failed to debit source wallet");const{data:o}=await X.from("wallets").select("balance").eq("id",t.walletId).single(),c=(parseFloat(o==null?void 0:o.balance)||0)+e.amount,{error:d}=await X.from("wallets").update({balance:c,updated_at:new Date().toISOString()}).eq("id",t.walletId);if(d)throw await X.from("wallets").update({balance:n}).eq("id",e.sourceWalletId),new Error("Failed to credit pot wallet");const h=`CTB-${Date.now()}`,{data:f,error:x}=await X.from("pot_transactions").insert({pot_id:e.potId,transaction_type:"contribution",amount:e.amount,balance_after:c,status:"COMPLETED",description:e.description||"Contribution",source_wallet_id:e.sourceWalletId,reference:h,processed_at:new Date().toISOString()}).select().single();return x&&console.error("Error creating pot transaction:",x),await X.from("pots").update({updated_at:new Date().toISOString()}).eq("id",e.potId),f?gS(f):{id:h,potId:e.potId,transactionType:"contribution",amount:e.amount,balanceAfter:c,status:"COMPLETED",description:e.description,sourceWalletId:e.sourceWalletId,reference:h,retryCount:0,processedAt:new Date().toISOString(),createdAt:new Date().toISOString()}},async checkWithdrawalEligibility(e){const t=await this.getPot(e);if(t.adminLocked)return{canWithdraw:!1,lockStatus:"admin_locked",reason:"Pot is locked by administrator",currentBalance:t.currentBalance,maxWithdrawalAmount:t.currentBalance};if(t.status==="CLOSED")return{canWithdraw:!1,lockStatus:"closed",reason:"Pot has been closed",currentBalance:t.currentBalance,maxWithdrawalAmount:0};if((t.lockType==="time_based"||t.lockType==="hybrid")&&t.lockEndDate&&new Date(t.lockEndDate)>new Date){const s=Math.ceil((new Date(t.lockEndDate).getTime()-Date.now())/864e5);return{canWithdraw:!1,canWithdrawWithPenalty:!0,lockStatus:"locked",lockEndDate:t.lockEndDate,daysUntilUnlock:s,penaltyPercent:5,currentBalance:t.currentBalance,maxWithdrawalAmount:t.currentBalance,withdrawalAfterPenalty:t.currentBalance*.95,reason:`Pot is locked until ${new Date(t.lockEndDate).toLocaleDateString()}`}}return(t.lockType==="goal_based"||t.lockType==="hybrid")&&t.goalAmount&&t.currentBalance<t.goalAmount?{canWithdraw:!1,lockStatus:"goal_not_reached",goalAmount:t.goalAmount,currentBalance:t.currentBalance,maxWithdrawalAmount:t.currentBalance,remainingToGoal:t.goalAmount-t.currentBalance,progressPercent:t.currentBalance/t.goalAmount*100,reason:"Goal not yet reached"}:{canWithdraw:!0,lockStatus:"unlocked",currentBalance:t.currentBalance,maxWithdrawalAmount:t.currentBalance,reason:"Withdrawal available"}},async withdrawFromPot(e){const t=await this.checkWithdrawalEligibility(e.potId);if(!t.canWithdraw&&!e.forceWithPenalty)throw new Error(t.reason||"Withdrawal not allowed");if(!t.canWithdraw&&e.forceWithPenalty&&!t.canWithdrawWithPenalty)throw new Error("Early withdrawal not available for this pot");const s=await this.getPot(e.potId);if(e.amount>s.currentBalance)throw new Error("Insufficient pot balance");let a=e.amount,n=0;!t.canWithdraw&&e.forceWithPenalty&&t.penaltyPercent&&(n=e.amount*(t.penaltyPercent/100),a=e.amount-n);const i=s.currentBalance-e.amount,{error:o}=await X.from("wallets").update({balance:i,updated_at:new Date().toISOString()}).eq("id",s.walletId);if(o)throw new Error("Failed to debit pot wallet");const{data:l}=await X.from("wallets").select("balance").eq("id",e.destinationWalletId).single(),c=parseFloat(l==null?void 0:l.balance)||0,{error:d}=await X.from("wallets").update({balance:c+a,updated_at:new Date().toISOString()}).eq("id",e.destinationWalletId);if(d)throw await X.from("wallets").update({balance:s.currentBalance}).eq("id",s.walletId),new Error("Failed to credit destination wallet");const h=`WTD-${Date.now()}`,{data:f,error:x}=await X.from("pot_transactions").insert({pot_id:e.potId,transaction_type:"withdrawal",amount:e.amount,balance_after:i,status:"COMPLETED",description:e.description||"Withdrawal",destination_wallet_id:e.destinationWalletId,reference:h,processed_at:new Date().toISOString()}).select().single();return x&&console.error("Error creating pot transaction:",x),n>0&&await X.from("pot_transactions").insert({pot_id:e.potId,transaction_type:"penalty",amount:n,balance_after:i,status:"COMPLETED",description:`Early withdrawal penalty (${t.penaltyPercent}%)`,reference:`PEN-${Date.now()}`,processed_at:new Date().toISOString()}),await X.from("pots").update({updated_at:new Date().toISOString()}).eq("id",e.potId),f?gS(f):{id:h,potId:e.potId,transactionType:"withdrawal",amount:e.amount,balanceAfter:i,status:"COMPLETED",description:e.description,destinationWalletId:e.destinationWalletId,reference:h,retryCount:0,processedAt:new Date().toISOString(),createdAt:new Date().toISOString()}},async closePot(e,t){const s=await this.getPot(e);if(s.status==="CLOSED")throw new Error("Pot is already closed");if(s.adminLocked)throw new Error("Pot is locked by administrator");return s.currentBalance>0&&await this.withdrawFromPot({potId:e,destinationWalletId:t,amount:s.currentBalance,forceWithPenalty:!0,description:"Pot closure withdrawal"}),await X.from("pots").update({status:"CLOSED",lock_status:"UNLOCKED",auto_deposit_enabled:!1,updated_at:new Date().toISOString()}).eq("id",e),await X.from("wallets").update({status:"CLOSED",updated_at:new Date().toISOString()}).eq("id",s.walletId),!0},async getPotTransactions(e,t){const s=(t==null?void 0:t.page)||1,a=(t==null?void 0:t.limit)||10,n=(s-1)*a;let i=X.from("pot_transactions").select("*",{count:"exact"}).eq("pot_id",e);t!=null&&t.type&&(i=i.eq("transaction_type",t.type));const{data:o,count:l,error:c}=await i.order("created_at",{ascending:!1}).range(n,n+a-1);if(c)throw console.error("Error fetching pot transactions:",c),new Error(c.message);const d=l||0;return{data:(o||[]).map(gS),total:d,page:s,limit:a,totalPages:Math.ceil(d/a)}},async getPotNotifications(e,t){let s=X.from("pot_notifications").select("*").eq("user_id",e);t!=null&&t.unreadOnly&&(s=s.eq("is_read",!1)),t!=null&&t.potId&&(s=s.eq("pot_id",t.potId));const{data:a,error:n}=await s.order("sent_at",{ascending:!1}).limit((t==null?void 0:t.limit)||50);if(n)throw console.error("Error fetching pot notifications:",n),new Error(n.message);return(a||[]).map(Kxe)},async markNotificationRead(e){const{error:t}=await X.from("pot_notifications").update({is_read:!0,read_at:new Date().toISOString()}).eq("id",e);if(t)throw console.error("Error marking notification read:",t),new Error(t.message)},async getPotSettings(){const{data:e,error:t}=await X.from("pot_settings").select("setting_key, setting_value").eq("is_active",!0);if(t)return console.error("Error fetching pot settings:",t),{maxPotsPerUser:10,minContributionAmount:1,maxContributionAmount:1e6,minLockPeriodDays:7,maxLockPeriodDays:3650,earlyWithdrawalPenaltyPercent:5,autoDepositRetryHours:24};const s={maxPotsPerUser:10,minContributionAmount:1,maxContributionAmount:1e6,minLockPeriodDays:7,maxLockPeriodDays:3650,earlyWithdrawalPenaltyPercent:5,autoDepositRetryHours:24};return(e||[]).forEach(a=>{var i;const n=(i=a.setting_value)==null?void 0:i.value;switch(a.setting_key){case"max_pots_per_user":s.maxPotsPerUser=n||10;break;case"min_contribution_amount":s.minContributionAmount=n||1;break;case"max_contribution_amount":s.maxContributionAmount=n||1e6;break;case"min_lock_period_days":s.minLockPeriodDays=n||7;break;case"max_lock_period_days":s.maxLockPeriodDays=n||3650;break;case"early_withdrawal_penalty_percent":s.earlyWithdrawalPenaltyPercent=n||5;break;case"auto_deposit_retry_hours":s.autoDepositRetryHours=n||24;break}}),s},async getAllPots(e){const t=(e==null?void 0:e.page)||1,s=(e==null?void 0:e.limit)||20,a=(t-1)*s;let n=X.from("pots").select("*",{count:"exact"});e!=null&&e.status&&(n=n.eq("status",e.status)),e!=null&&e.userId&&(n=n.eq("user_id",e.userId));const{data:i,count:o,error:l}=await n.order("created_at",{ascending:!1}).range(a,a+s-1);if(l)throw console.error("Error fetching all pots:",l),new Error(l.message);const c=(i||[]).map(x=>x.wallet_id).filter(Boolean),{data:d}=await X.from("wallets").select("id, balance").in("id",c),h=new Map((d||[]).map(x=>[x.id,parseFloat(x.balance)||0])),f=o||0;return{data:(i||[]).map(x=>({...Cv(x),currentBalance:h.get(x.wallet_id)||0})),total:f,page:t,limit:s,totalPages:Math.ceil(f/s)}},async adminTogglePotLock(e,t,s,a){const{error:n}=await X.from("pots").update({admin_locked:s,admin_locked_by:s?t:null,admin_locked_at:s?new Date().toISOString():null,admin_lock_reason:a||null,updated_at:new Date().toISOString()}).eq("id",e);if(n)throw new Error(n.message);return!0},async adminForceUnlock(e,t){const{error:s}=await X.from("pots").update({lock_status:"UNLOCKED",withdrawal_enabled:!0,unlocked_at:new Date().toISOString(),unlock_reason:"Admin force unlock",admin_locked:!1,admin_locked_by:null,admin_locked_at:null,admin_lock_reason:null,updated_at:new Date().toISOString()}).eq("id",e);if(s)throw new Error(s.message);return!0},async updatePotSetting(e,t){const{error:s}=await X.from("pot_settings").update({setting_value:{value:t},updated_at:new Date().toISOString()}).eq("setting_key",e);if(s)throw new Error(s.message)}};function Gxe(){const{user:e}=pt();return Rn({queryKey:["pots",e==null?void 0:e.id],queryFn:async()=>e!=null&&e.id?fi.getPots(e.id):[],enabled:!!(e!=null&&e.id),staleTime:3e4,retry:2})}function Yxe(e){return Rn({queryKey:["pots","detail",e],queryFn:()=>fi.getPot(e),enabled:!!e,staleTime:3e4})}function Xxe(e){return Rn({queryKey:["pots","summary",e],queryFn:()=>fi.getPotSummary(e),enabled:!!e,staleTime:3e4})}function Qxe(e,t=1,s=10,a){return Rn({queryKey:["pots","transactions",e,t,s,a],queryFn:()=>fi.getPotTransactions(e,{page:t,limit:s,type:a}),enabled:!!e,staleTime:1e4})}function yq(e){return Rn({queryKey:["pots","eligibility",e],queryFn:()=>fi.checkWithdrawalEligibility(e),enabled:!!e,staleTime:6e4})}function a2(){return Rn({queryKey:["pots","settings"],queryFn:()=>fi.getPotSettings(),staleTime:3e5})}function Zxe(){const e=cs(),{user:t}=pt();return hs({mutationFn:s=>{if(!(t!=null&&t.id))throw new Error("User not authenticated");return fi.createPot(t.id,s)},onSuccess:()=>{e.invalidateQueries({queryKey:["pots"]}),e.invalidateQueries({queryKey:["wallets"]})}})}function Jxe(){const e=cs();return hs({mutationFn:({potId:t,data:s})=>fi.updatePot(t,s),onSuccess:(t,s)=>{e.invalidateQueries({queryKey:["pots"]}),e.invalidateQueries({queryKey:["pots","detail",s.potId]}),e.invalidateQueries({queryKey:["pots","summary",s.potId]})}})}function ege(){const e=cs();return hs({mutationFn:t=>fi.contributeToPot(t),onSuccess:(t,s)=>{e.invalidateQueries({queryKey:["pots"]}),e.invalidateQueries({queryKey:["pots","detail",s.potId]}),e.invalidateQueries({queryKey:["pots","summary",s.potId]}),e.invalidateQueries({queryKey:["pots","transactions",s.potId]}),e.invalidateQueries({queryKey:["pots","eligibility",s.potId]}),e.invalidateQueries({queryKey:["wallets"]}),e.invalidateQueries({queryKey:["wallets",s.sourceWalletId]})}})}function tge(){const e=cs();return hs({mutationFn:t=>fi.withdrawFromPot(t),onSuccess:(t,s)=>{e.invalidateQueries({queryKey:["pots"]}),e.invalidateQueries({queryKey:["pots","detail",s.potId]}),e.invalidateQueries({queryKey:["pots","summary",s.potId]}),e.invalidateQueries({queryKey:["pots","transactions",s.potId]}),e.invalidateQueries({queryKey:["pots","eligibility",s.potId]}),e.invalidateQueries({queryKey:["wallets"]}),e.invalidateQueries({queryKey:["wallets",s.destinationWalletId]})}})}function rge(){const e=cs();return hs({mutationFn:({potId:t,destinationWalletId:s})=>fi.closePot(t,s),onSuccess:()=>{e.invalidateQueries({queryKey:["pots"]}),e.invalidateQueries({queryKey:["wallets"]})}})}function sge(e){return Rn({queryKey:["pots","admin","all",e],queryFn:()=>fi.getAllPots(e),staleTime:3e4})}function age(){const e=cs(),{user:t}=pt();return hs({mutationFn:({potId:s,lock:a,reason:n})=>{if(!(t!=null&&t.id))throw new Error("User not authenticated");return fi.adminTogglePotLock(s,t.id,a,n)},onSuccess:(s,a)=>{e.invalidateQueries({queryKey:["pots"]}),e.invalidateQueries({queryKey:["pots","detail",a.potId]}),e.invalidateQueries({queryKey:["pots","admin"]})}})}function nge(){const e=cs(),{user:t}=pt();return hs({mutationFn:s=>{if(!(t!=null&&t.id))throw new Error("User not authenticated");return fi.adminForceUnlock(s,t.id)},onSuccess:(s,a)=>{e.invalidateQueries({queryKey:["pots"]}),e.invalidateQueries({queryKey:["pots","detail",a]}),e.invalidateQueries({queryKey:["pots","eligibility",a]}),e.invalidateQueries({queryKey:["pots","admin"]})}})}function ige(){const e=cs();return hs({mutationFn:({key:t,value:s})=>fi.updatePotSetting(t,s),onSuccess:()=>{e.invalidateQueries({queryKey:["pots","settings"]})}})}const pS=["#4F46E5","#0891B2","#059669","#D97706","#DC2626","#7C3AED","#DB2777","#2563EB"],oge=[{value:"time_based",label:"Time-Based",description:"Lock until a specific date"},{value:"goal_based",label:"Goal-Based",description:"Lock until you reach your goal"},{value:"hybrid",label:"Hybrid",description:"Lock until date AND goal reached"},{value:"manual",label:"Flexible",description:"No lock, withdraw anytime"}],lge=[{value:"daily",label:"Daily"},{value:"weekly",label:"Weekly"},{value:"bi_weekly",label:"Bi-weekly"},{value:"monthly",label:"Monthly"}];function bq({isOpen:e,onClose:t,onSuccess:s}){const a=Zxe(),{data:n}=a2(),{data:i=[]}=mi(),[o,l]=p.useState({name:"",description:"",lockType:"time_based",lockPeriodDays:30,color:pS[0]}),[c,d]=p.useState(!1),[h,f]=p.useState({}),x=E=>{if(!o.goalAmount||!o.lockPeriodDays||!E)return null;const _=o.lockPeriodDays;let T;switch(E){case"daily":T=_;break;case"weekly":T=Math.floor(_/7);break;case"bi_weekly":T=Math.floor(_/14);break;case"monthly":T=Math.floor(_/30);break;default:return null}return T<=0?null:Math.ceil(o.goalAmount/T*100)/100},y=()=>{if(!o.autoDepositAmount||!o.autoDepositFrequency||!o.lockPeriodDays)return null;const E=o.lockPeriodDays;let _;switch(o.autoDepositFrequency){case"daily":_=E;break;case"weekly":_=Math.floor(E/7);break;case"bi_weekly":_=Math.floor(E/14);break;case"monthly":_=Math.floor(E/30);break;default:return null}return{total:o.autoDepositAmount*_,deposits:_}},v=x(o.autoDepositFrequency),w=y(),N=i.filter(E=>E.status==="ACTIVE");p.useEffect(()=>{e||(l({name:"",description:"",lockType:"time_based",lockPeriodDays:30,color:pS[0]}),d(!1),f({}))},[e]);const k=()=>{const E={};return o.name.trim()?o.name.length>50&&(E.name="Name must be 50 characters or less"):E.name="Pot name is required",o.goalAmount!==void 0&&o.goalAmount<=0&&(E.goalAmount="Goal amount must be positive"),(o.lockType==="time_based"||o.lockType==="hybrid")&&!o.lockPeriodDays&&!o.maturityDate&&(E.lockPeriodDays="Lock period or maturity date is required"),o.autoDepositEnabled&&((!o.autoDepositAmount||o.autoDepositAmount<=0)&&(E.autoDepositAmount="Auto-deposit amount is required"),o.autoDepositFrequency||(E.autoDepositFrequency="Frequency is required"),o.sourceWalletId||(E.sourceWalletId="Source wallet is required")),f(E),Object.keys(E).length===0},C=async E=>{if(E.preventDefault(),!!k())try{await a.mutateAsync(o),s==null||s(),t()}catch(_){f({submit:_.message||"Failed to create pot"})}};return e?r.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[r.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:t}),r.jsxs("div",{className:"relative bg-white rounded-2xl shadow-xl w-full max-w-lg mx-4 max-h-[90vh] overflow-hidden",children:[r.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-10 h-10 rounded-full bg-primary-100 flex items-center justify-center",children:r.jsx(lo,{className:"w-5 h-5 text-primary-600"})}),r.jsxs("div",{children:[r.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Create New Pot"}),r.jsx("p",{className:"text-sm text-gray-500",children:"Start saving towards your goal"})]})]}),r.jsx("button",{onClick:t,className:"p-2 hover:bg-gray-100 rounded-full transition-colors",children:r.jsx(Ct,{className:"w-5 h-5 text-gray-500"})})]}),r.jsxs("form",{onSubmit:C,className:"overflow-y-auto max-h-[calc(90vh-180px)]",children:[r.jsxs("div",{className:"p-6 space-y-6",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Pot Name *"}),r.jsx("input",{type:"text",value:o.name,onChange:E=>l({...o,name:E.target.value}),placeholder:"e.g., Emergency Fund, Vacation, New Phone",className:fe("w-full px-4 py-3 rounded-xl border transition-colors",h.name?"border-red-300 focus:border-red-500 focus:ring-red-500":"border-gray-300 focus:border-primary-500 focus:ring-primary-500")}),h.name&&r.jsx("p",{className:"mt-1 text-sm text-red-600",children:h.name})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description (Optional)"}),r.jsx("textarea",{value:o.description||"",onChange:E=>l({...o,description:E.target.value}),placeholder:"What are you saving for?",rows:2,className:"w-full px-4 py-3 rounded-xl border border-gray-300 focus:border-primary-500 focus:ring-primary-500 transition-colors resize-none"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Color"}),r.jsx("div",{className:"flex gap-2",children:pS.map(E=>r.jsx("button",{type:"button",onClick:()=>l({...o,color:E}),className:fe("w-8 h-8 rounded-full transition-all",o.color===E&&"ring-2 ring-offset-2 ring-gray-400"),style:{backgroundColor:E}},E))})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[r.jsx(_6,{className:"w-4 h-4 inline mr-1"}),"Target Amount (Optional)"]}),r.jsxs("div",{className:"relative",children:[r.jsx("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-500",children:"SLE"}),r.jsx("input",{type:"number",value:o.goalAmount||"",onChange:E=>l({...o,goalAmount:E.target.value?parseFloat(E.target.value):void 0}),placeholder:"0.00",min:"0",step:"0.01",className:"w-full pl-14 pr-4 py-3 rounded-xl border border-gray-300 focus:border-primary-500 focus:ring-primary-500 transition-colors"})]}),h.goalAmount&&r.jsx("p",{className:"mt-1 text-sm text-red-600",children:h.goalAmount})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[r.jsx(Li,{className:"w-4 h-4 inline mr-1"}),"Lock Type"]}),r.jsx("div",{className:"grid grid-cols-2 gap-2",children:oge.map(E=>r.jsxs("button",{type:"button",onClick:()=>l({...o,lockType:E.value}),className:fe("p-3 rounded-xl border text-left transition-all",o.lockType===E.value?"border-primary-500 bg-primary-50":"border-gray-200 hover:border-gray-300"),children:[r.jsx("span",{className:"font-medium text-sm text-gray-900",children:E.label}),r.jsx("p",{className:"text-xs text-gray-500 mt-0.5",children:E.description})]},E.value))})]}),(o.lockType==="time_based"||o.lockType==="hybrid")&&r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Lock Period (Days)"}),r.jsx("input",{type:"number",value:o.lockPeriodDays||"",onChange:E=>l({...o,lockPeriodDays:E.target.value?parseInt(E.target.value):void 0}),placeholder:"30",min:(n==null?void 0:n.minLockPeriodDays)||7,max:(n==null?void 0:n.maxLockPeriodDays)||3650,className:"w-full px-4 py-3 rounded-xl border border-gray-300 focus:border-primary-500 focus:ring-primary-500 transition-colors"}),r.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Min: ",(n==null?void 0:n.minLockPeriodDays)||7," days, Max: ",(n==null?void 0:n.maxLockPeriodDays)||3650," days"]}),h.lockPeriodDays&&r.jsx("p",{className:"mt-1 text-sm text-red-600",children:h.lockPeriodDays})]}),r.jsxs("div",{className:"border-t border-gray-200 pt-6",children:[r.jsxs("button",{type:"button",onClick:()=>{d(!c),l(c?{...o,autoDepositEnabled:!1,autoDepositAmount:void 0,autoDepositFrequency:void 0,sourceWalletId:void 0}:{...o,autoDepositEnabled:!0})},className:"w-full flex items-center justify-between p-4 rounded-xl border border-gray-200 hover:border-primary-300 transition-colors",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-10 h-10 rounded-full bg-green-100 flex items-center justify-center",children:r.jsx(KV,{className:"w-5 h-5 text-green-600"})}),r.jsxs("div",{className:"text-left",children:[r.jsx("p",{className:"font-medium text-gray-900",children:"Auto-Deposit"}),r.jsx("p",{className:"text-sm text-gray-500",children:"Schedule automatic contributions"})]})]}),r.jsx(ys,{className:fe("w-5 h-5 text-gray-400 transition-transform",c&&"rotate-180")})]}),c&&r.jsxs("div",{className:"mt-4 space-y-4 p-4 bg-gray-50 rounded-xl",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Frequency *"}),r.jsx("div",{className:"grid grid-cols-4 gap-2",children:lge.map(E=>{const _=x(E.value);return r.jsxs("button",{type:"button",onClick:()=>l({...o,autoDepositFrequency:E.value}),className:fe("py-2 px-3 rounded-lg text-sm font-medium transition-colors flex flex-col items-center",o.autoDepositFrequency===E.value?"bg-primary-600 text-white":"bg-white border border-gray-200 text-gray-700 hover:bg-gray-50"),children:[r.jsx("span",{children:E.label}),_&&r.jsxs("span",{className:fe("text-xs mt-0.5",o.autoDepositFrequency===E.value?"text-primary-100":"text-gray-400"),children:["~",_.toFixed(2)]})]},E.value)})}),h.autoDepositFrequency&&r.jsx("p",{className:"mt-1 text-sm text-red-600",children:h.autoDepositFrequency})]}),o.goalAmount&&o.lockPeriodDays&&o.autoDepositFrequency&&v&&r.jsxs("div",{className:"p-3 bg-blue-50 border border-blue-200 rounded-lg",children:[r.jsxs("p",{className:"text-sm text-blue-800",children:[r.jsx("strong",{children:"Recommended:"})," To reach your goal of"," ",r.jsxs("span",{className:"font-semibold",children:["SLE ",o.goalAmount.toLocaleString()]})," in"," ",r.jsxs("span",{className:"font-semibold",children:[o.lockPeriodDays," days"]}),", deposit"," ",r.jsxs("span",{className:"font-semibold",children:["SLE ",v.toFixed(2)]})," ",o.autoDepositFrequency==="daily"&&"per day",o.autoDepositFrequency==="weekly"&&"per week",o.autoDepositFrequency==="bi_weekly"&&"every 2 weeks",o.autoDepositFrequency==="monthly"&&"per month"]}),r.jsx("button",{type:"button",onClick:()=>l({...o,autoDepositAmount:v}),className:"mt-2 text-sm font-medium text-blue-600 hover:text-blue-800",children:"Use recommended amount"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Amount per deposit *"}),r.jsxs("div",{className:"relative",children:[r.jsx("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-500",children:"SLE"}),r.jsx("input",{type:"number",value:o.autoDepositAmount||"",onChange:E=>l({...o,autoDepositAmount:E.target.value?parseFloat(E.target.value):void 0}),placeholder:"0.00",min:"0",step:"0.01",className:"w-full pl-14 pr-4 py-3 rounded-xl border border-gray-300 focus:border-primary-500 focus:ring-primary-500 transition-colors"})]}),h.autoDepositAmount&&r.jsx("p",{className:"mt-1 text-sm text-red-600",children:h.autoDepositAmount})]}),w&&r.jsxs("div",{className:fe("p-3 rounded-lg border",o.goalAmount&&w.total>=o.goalAmount?"bg-green-50 border-green-200":o.goalAmount&&w.total<o.goalAmount?"bg-yellow-50 border-yellow-200":"bg-gray-100 border-gray-200"),children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"text-sm text-gray-600",children:"Projected total:"}),r.jsxs("span",{className:"font-semibold text-gray-900",children:["SLE ",w.total.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})]})]}),r.jsxs("div",{className:"flex justify-between items-center mt-1",children:[r.jsx("span",{className:"text-sm text-gray-600",children:"Number of deposits:"}),r.jsx("span",{className:"font-medium text-gray-700",children:w.deposits})]}),o.goalAmount&&r.jsx("div",{className:"mt-2 pt-2 border-t border-gray-200",children:w.total>=o.goalAmount?r.jsxs("p",{className:"text-sm text-green-700",children:["You'll reach your goal of SLE ",o.goalAmount.toLocaleString(),w.total>o.goalAmount&&r.jsxs("span",{children:[" (+SLE ",(w.total-o.goalAmount).toFixed(2)," extra)"]})]}):r.jsxs("p",{className:"text-sm text-yellow-700",children:["You'll be SLE ",(o.goalAmount-w.total).toFixed(2)," short of your goal"]})})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[r.jsx(Rt,{className:"w-4 h-4 inline mr-1"}),"Source Wallet *"]}),r.jsxs("select",{value:o.sourceWalletId||"",onChange:E=>l({...o,sourceWalletId:E.target.value}),className:"w-full px-4 py-3 rounded-xl border border-gray-300 focus:border-primary-500 focus:ring-primary-500 transition-colors",children:[r.jsx("option",{value:"",children:"Select wallet"}),N.map(E=>r.jsxs("option",{value:E.id,children:["Wallet (",E.currency,") - ",new Intl.NumberFormat("en-SL",{style:"currency",currency:E.currency}).format(E.balance)]},E.id))]}),h.sourceWalletId&&r.jsx("p",{className:"mt-1 text-sm text-red-600",children:h.sourceWalletId})]})]})]}),h.submit&&r.jsx("div",{className:"p-4 bg-red-50 rounded-xl",children:r.jsx("p",{className:"text-sm text-red-600",children:h.submit})})]}),r.jsx("div",{className:"p-6 border-t border-gray-200 bg-gray-50",children:r.jsxs("div",{className:"flex gap-3",children:[r.jsx("button",{type:"button",onClick:t,className:"flex-1 py-3 px-4 rounded-xl border border-gray-300 text-gray-700 font-medium hover:bg-gray-100 transition-colors",children:"Cancel"}),r.jsx("button",{type:"submit",disabled:a.isPending,className:fe("flex-1 py-3 px-4 rounded-xl font-medium transition-colors flex items-center justify-center gap-2",a.isPending?"bg-gray-300 cursor-not-allowed":"bg-primary-600 text-white hover:bg-primary-700"),children:a.isPending?r.jsxs(r.Fragment,{children:[r.jsx(Ke,{className:"w-5 h-5 animate-spin"}),"Creating..."]}):"Create Pot"})]})})]})]})]}):null}function vq({isOpen:e,onClose:t,pot:s,onSuccess:a}){const n=ege(),{data:i}=a2(),{data:o=[]}=mi(),[l,c]=p.useState(""),[d,h]=p.useState(""),[f,x]=p.useState(""),[y,v]=p.useState({}),[w,N]=p.useState(0),[k,C]=p.useState(!1),[E,_]=p.useState(!1),T=p.useRef(null),A=p.useRef(!1),P=p.useRef(0),M=85,R=o.filter(G=>G.status==="ACTIVE"),$=R.find(G=>G.id===d);p.useEffect(()=>{e||(c(""),h(""),x(""),v({}),N(0),_(!1))},[e]),p.useEffect(()=>{P.current=w},[w]);const W=G=>new Intl.NumberFormat("en-SL",{style:"currency",currency:"SLE",minimumFractionDigits:2}).format(G),I=()=>{const G={},te=parseFloat(l);return!l||te<=0?G.amount="Amount is required":i&&te<i.minContributionAmount?G.amount=`Minimum amount is ${W(i.minContributionAmount)}`:i&&te>i.maxContributionAmount&&(G.amount=`Maximum amount is ${W(i.maxContributionAmount)}`),d?$&&te>$.balance&&(G.amount="Insufficient wallet balance"):G.sourceWalletId="Please select a wallet",v(G),Object.keys(G).length===0},B=p.useCallback(()=>T.current?T.current.offsetWidth-64-8:200,[]),O=p.useCallback(G=>{if(!A.current||!T.current||n.isPending)return;const te=T.current.getBoundingClientRect(),he=B(),ce=Math.max(0,Math.min(G-te.left-32,he))/he*100;N(ce),P.current=ce},[n.isPending,B]),F=p.useCallback(async()=>{if(!A.current)return;const G=P.current;if(A.current=!1,C(!1),G>=M&&!n.isPending){if(!I()){N(0);return}_(!0),N(100);try{await n.mutateAsync({potId:s.id,sourceWalletId:d,amount:parseFloat(l),description:f||void 0}),a==null||a(),setTimeout(t,500)}catch(te){v({submit:te.message||"Failed to contribute"}),_(!1),N(0)}}else N(0)},[n,s.id,d,l,f,a,t]),q=p.useCallback(G=>{n.isPending||E||(A.current=!0,C(!0))},[n.isPending,E]),H=G=>{G.preventDefault(),q(G.clientX)},K=G=>{q(G.touches[0].clientX)};p.useEffect(()=>{const G=ce=>{A.current&&O(ce.clientX)},te=()=>{A.current&&F()},he=ce=>{A.current&&ce.touches[0]&&O(ce.touches[0].clientX)},ne=()=>{A.current&&F()};return window.addEventListener("mousemove",G),window.addEventListener("mouseup",te),window.addEventListener("touchmove",he,{passive:!0}),window.addEventListener("touchend",ne),()=>{window.removeEventListener("mousemove",G),window.removeEventListener("mouseup",te),window.removeEventListener("touchmove",he),window.removeEventListener("touchend",ne)}},[O,F]);const V=w/100*B(),z=l&&parseFloat(l)>0&&d;return e?r.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[r.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:t}),r.jsxs("div",{className:"relative bg-white rounded-2xl shadow-xl w-full max-w-md mx-4 overflow-hidden",children:[r.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-10 h-10 rounded-full flex items-center justify-center",style:{backgroundColor:`${s.color||"#4F46E5"}15`},children:r.jsx(Rr,{className:"w-5 h-5",style:{color:s.color||"#4F46E5"}})}),r.jsxs("div",{children:[r.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Add to Pot"}),r.jsx("p",{className:"text-sm text-gray-500",children:s.name})]})]}),r.jsx("button",{onClick:t,className:"p-2 hover:bg-gray-100 rounded-full transition-colors",children:r.jsx(Ct,{className:"w-5 h-5 text-gray-500"})})]}),r.jsxs("div",{className:"p-6 space-y-6",children:[r.jsxs("div",{className:"p-4 rounded-xl bg-gray-50",children:[r.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Current Pot Balance"}),r.jsx("p",{className:"text-2xl font-bold text-gray-900",children:W(s.currentBalance)}),s.goalAmount&&r.jsxs("div",{className:"mt-2",children:[r.jsx("div",{className:"h-2 bg-gray-200 rounded-full overflow-hidden",children:r.jsx("div",{className:"h-full rounded-full",style:{width:`${Math.min(100,s.currentBalance/s.goalAmount*100)}%`,backgroundColor:s.color||"#4F46E5"}})}),r.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[W(s.goalAmount-s.currentBalance)," to reach goal"]})]})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[r.jsx(Rt,{className:"w-4 h-4 inline mr-1"}),"From Wallet"]}),r.jsxs("select",{value:d,onChange:G=>h(G.target.value),className:fe("w-full px-4 py-3 rounded-xl border transition-colors",y.sourceWalletId?"border-red-300 focus:border-red-500":"border-gray-300 focus:border-primary-500"),children:[r.jsx("option",{value:"",children:"Select wallet"}),R.map(G=>r.jsxs("option",{value:G.id,children:["Wallet (",G.currency,") - ",W(G.balance)]},G.id))]}),y.sourceWalletId&&r.jsx("p",{className:"mt-1 text-sm text-red-600",children:y.sourceWalletId})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Amount"}),r.jsxs("div",{className:"relative",children:[r.jsx("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-500 font-medium",children:"SLE"}),r.jsx("input",{type:"number",value:l,onChange:G=>c(G.target.value),placeholder:"0.00",min:"0",step:"0.01",className:fe("w-full pl-14 pr-4 py-4 text-2xl font-semibold rounded-xl border transition-colors",y.amount?"border-red-300 focus:border-red-500":"border-gray-300 focus:border-primary-500")})]}),y.amount&&r.jsx("p",{className:"mt-1 text-sm text-red-600",children:y.amount}),$&&r.jsxs("p",{className:"mt-1 text-sm text-gray-500",children:["Available: ",W($.balance)]})]}),$&&r.jsx("div",{className:"flex gap-2",children:[10,50,100,500].map(G=>r.jsxs("button",{type:"button",onClick:()=>c(G.toString()),disabled:G>$.balance,className:fe("flex-1 py-2 rounded-lg text-sm font-medium transition-colors",G>$.balance?"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:["+",G]},G))}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Note (Optional)"}),r.jsx("input",{type:"text",value:f,onChange:G=>x(G.target.value),placeholder:"e.g., Birthday money, Weekly savings",className:"w-full px-4 py-3 rounded-xl border border-gray-300 focus:border-primary-500 transition-colors"})]}),y.submit&&r.jsx("div",{className:"p-4 bg-red-50 rounded-xl",children:r.jsx("p",{className:"text-sm text-red-600",children:y.submit})})]}),r.jsx("div",{className:"p-6 border-t border-gray-200 bg-gray-50",children:r.jsxs("div",{ref:T,className:fe("relative h-16 rounded-2xl overflow-hidden select-none",z?"cursor-grab":"opacity-50 cursor-not-allowed",E?"bg-green-500":"bg-gradient-to-r from-primary-600 to-primary-500"),children:[r.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:r.jsx("div",{className:"flex items-center gap-2 text-white/80 font-medium",children:n.isPending?r.jsxs(r.Fragment,{children:[r.jsx(Ke,{className:"w-5 h-5 animate-spin"}),r.jsx("span",{children:"Processing..."})]}):E?r.jsxs(r.Fragment,{children:[r.jsx(Hr,{className:"w-5 h-5"}),r.jsx("span",{children:"Added!"})]}):r.jsxs(r.Fragment,{children:[r.jsxs("span",{children:["Slide to add ",l?W(parseFloat(l)):"amount"]}),r.jsx(Qr,{className:"w-5 h-5 animate-pulse"})]})})}),r.jsx("div",{className:fe("absolute inset-y-0 left-0 transition-all duration-100",E?"bg-green-600":"bg-primary-700/30"),style:{width:`${w}%`}}),r.jsx("div",{onMouseDown:H,onTouchStart:K,className:fe("absolute top-1 bottom-1 left-1 w-14 rounded-xl flex items-center justify-center",k?"cursor-grabbing scale-105":"cursor-grab",E?"bg-white":"bg-white shadow-lg",!z||n.isPending?"pointer-events-none":""),style:{transform:`translateX(${V}px)`,transition:k?"none":"transform 0.3s ease-out"},children:n.isPending?r.jsx(Ke,{className:"w-6 h-6 text-primary-600 animate-spin"}):E?r.jsx(Hr,{className:"w-6 h-6 text-green-600"}):r.jsx(Rr,{className:"w-6 h-6 text-primary-600"})})]})})]})]}):null}function cge({isOpen:e,onClose:t,pot:s,onSuccess:a}){const n=tge(),{data:i,isLoading:o}=yq(s.id),{data:l=[]}=mi(),[c,d]=p.useState(""),[h,f]=p.useState(""),[x,y]=p.useState(!1),[v,w]=p.useState(""),[N,k]=p.useState({}),[C,E]=p.useState(0),[_,T]=p.useState(!1),[A,P]=p.useState(!1),M=p.useRef(null),R=p.useRef(!1),$=p.useRef(0),W=85,I=l.filter(ie=>ie.status==="ACTIVE");p.useEffect(()=>{e||(d(""),f(""),y(!1),w(""),k({}),E(0),P(!1))},[e]),p.useEffect(()=>{$.current=C},[C]);const B=ie=>new Intl.NumberFormat("en-SL",{style:"currency",currency:"SLE",minimumFractionDigits:2}).format(ie),O=(i==null?void 0:i.canWithdraw)||!1,F=(i==null?void 0:i.canWithdrawWithPenalty)||!1,q=(i==null?void 0:i.penaltyPercent)||0,H=parseFloat(c)||0,K=x?H*(q/100):0,V=H-K,z=()=>{const ie={};return!c||H<=0?ie.amount="Amount is required":H>s.currentBalance&&(ie.amount="Amount exceeds pot balance"),h||(ie.destinationWalletId="Please select a destination wallet"),!O&&!x&&(ie.eligibility="Withdrawal not allowed. Enable early withdrawal with penalty."),k(ie),Object.keys(ie).length===0},G=p.useCallback(()=>M.current?M.current.offsetWidth-64-8:200,[]),te=p.useCallback(ie=>{if(!R.current||!M.current||n.isPending)return;const ge=M.current.getBoundingClientRect(),Z=G(),re=Math.max(0,Math.min(ie-ge.left-32,Z))/Z*100;E(re),$.current=re},[n.isPending,G]),he=p.useCallback(async()=>{if(!R.current)return;const ie=$.current;if(R.current=!1,T(!1),ie>=W&&!n.isPending){if(!z()){E(0);return}P(!0),E(100);try{await n.mutateAsync({potId:s.id,destinationWalletId:h,amount:H,forceWithPenalty:!O&&x,description:v||void 0}),a==null||a(),setTimeout(t,500)}catch(ge){k({submit:ge.message||"Failed to withdraw"}),P(!1),E(0)}}else E(0)},[n,s.id,h,H,O,x,v,a,t]),ne=p.useCallback(ie=>{n.isPending||A||(R.current=!0,T(!0))},[n.isPending,A]),ce=ie=>{ie.preventDefault(),ne(ie.clientX)},xe=ie=>{ne(ie.touches[0].clientX)};p.useEffect(()=>{const ie=re=>{R.current&&te(re.clientX)},ge=()=>{R.current&&he()},Z=re=>{R.current&&re.touches[0]&&te(re.touches[0].clientX)},Q=()=>{R.current&&he()};return window.addEventListener("mousemove",ie),window.addEventListener("mouseup",ge),window.addEventListener("touchmove",Z,{passive:!0}),window.addEventListener("touchend",Q),()=>{window.removeEventListener("mousemove",ie),window.removeEventListener("mouseup",ge),window.removeEventListener("touchmove",Z),window.removeEventListener("touchend",Q)}},[te,he]);const _e=C/100*G(),oe=c&&H>0&&h&&(O||x);return e?r.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[r.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:t}),r.jsxs("div",{className:"relative bg-white rounded-2xl shadow-xl w-full max-w-md mx-4 overflow-hidden",children:[r.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-10 h-10 rounded-full flex items-center justify-center",style:{backgroundColor:`${s.color||"#4F46E5"}15`},children:r.jsx(An,{className:"w-5 h-5",style:{color:s.color||"#4F46E5"}})}),r.jsxs("div",{children:[r.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Withdraw from Pot"}),r.jsx("p",{className:"text-sm text-gray-500",children:s.name})]})]}),r.jsx("button",{onClick:t,className:"p-2 hover:bg-gray-100 rounded-full transition-colors",children:r.jsx(Ct,{className:"w-5 h-5 text-gray-500"})})]}),r.jsx("div",{className:"p-6 space-y-6 max-h-[60vh] overflow-y-auto",children:o?r.jsx("div",{className:"flex items-center justify-center py-8",children:r.jsx(Ke,{className:"w-8 h-8 text-primary-600 animate-spin"})}):r.jsxs(r.Fragment,{children:[!O&&r.jsx("div",{className:fe("p-4 rounded-xl",F?"bg-amber-50":"bg-red-50"),children:r.jsxs("div",{className:"flex items-start gap-3",children:[F?r.jsx(Ht,{className:"w-5 h-5 text-amber-600 flex-shrink-0 mt-0.5"}):r.jsx(Kr,{className:"w-5 h-5 text-red-600 flex-shrink-0 mt-0.5"}),r.jsxs("div",{children:[r.jsx("p",{className:fe("font-medium",F?"text-amber-800":"text-red-800"),children:(i==null?void 0:i.reason)||"Withdrawal not available"}),F&&r.jsxs("p",{className:"text-sm text-amber-700 mt-1",children:["Early withdrawal incurs a ",q,"% penalty fee."]}),(i==null?void 0:i.daysUntilUnlock)&&i.daysUntilUnlock>0&&r.jsxs("p",{className:"text-sm text-amber-700 mt-1",children:[i.daysUntilUnlock," days until maturity."]})]})]})}),r.jsxs("div",{className:"p-4 rounded-xl bg-gray-50",children:[r.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Available Balance"}),r.jsx("p",{className:"text-2xl font-bold text-gray-900",children:B(s.currentBalance)})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[r.jsx(Rt,{className:"w-4 h-4 inline mr-1"}),"To Wallet"]}),r.jsxs("select",{value:h,onChange:ie=>f(ie.target.value),className:fe("w-full px-4 py-3 rounded-xl border transition-colors",N.destinationWalletId?"border-red-300 focus:border-red-500":"border-gray-300 focus:border-primary-500"),children:[r.jsx("option",{value:"",children:"Select wallet"}),I.map(ie=>r.jsxs("option",{value:ie.id,children:["Wallet (",ie.currency,") - ",B(ie.balance)]},ie.id))]}),N.destinationWalletId&&r.jsx("p",{className:"mt-1 text-sm text-red-600",children:N.destinationWalletId})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Amount"}),r.jsxs("div",{className:"relative",children:[r.jsx("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-500 font-medium",children:"SLE"}),r.jsx("input",{type:"number",value:c,onChange:ie=>d(ie.target.value),placeholder:"0.00",min:"0",max:s.currentBalance,step:"0.01",className:fe("w-full pl-14 pr-4 py-4 text-2xl font-semibold rounded-xl border transition-colors",N.amount?"border-red-300 focus:border-red-500":"border-gray-300 focus:border-primary-500")})]}),N.amount&&r.jsx("p",{className:"mt-1 text-sm text-red-600",children:N.amount})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("button",{type:"button",onClick:()=>d((s.currentBalance*.25).toFixed(2)),className:"flex-1 py-2 rounded-lg text-sm font-medium bg-gray-100 text-gray-700 hover:bg-gray-200 transition-colors",children:"25%"}),r.jsx("button",{type:"button",onClick:()=>d((s.currentBalance*.5).toFixed(2)),className:"flex-1 py-2 rounded-lg text-sm font-medium bg-gray-100 text-gray-700 hover:bg-gray-200 transition-colors",children:"50%"}),r.jsx("button",{type:"button",onClick:()=>d((s.currentBalance*.75).toFixed(2)),className:"flex-1 py-2 rounded-lg text-sm font-medium bg-gray-100 text-gray-700 hover:bg-gray-200 transition-colors",children:"75%"}),r.jsx("button",{type:"button",onClick:()=>d(s.currentBalance.toFixed(2)),className:"flex-1 py-2 rounded-lg text-sm font-medium bg-gray-100 text-gray-700 hover:bg-gray-200 transition-colors",children:"Max"})]}),!O&&F&&r.jsxs("div",{className:"flex items-center justify-between p-4 rounded-xl border border-amber-200 bg-amber-50",children:[r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-amber-800",children:"Enable early withdrawal"}),r.jsxs("p",{className:"text-sm text-amber-700",children:[q,"% penalty will be deducted"]})]}),r.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[r.jsx("input",{type:"checkbox",checked:x,onChange:ie=>y(ie.target.checked),className:"sr-only peer"}),r.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-amber-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-amber-500"})]})]}),H>0&&r.jsxs("div",{className:"p-4 rounded-xl bg-gray-50 space-y-2",children:[r.jsxs("div",{className:"flex justify-between text-sm",children:[r.jsx("span",{className:"text-gray-600",children:"Withdrawal amount"}),r.jsx("span",{className:"font-medium",children:B(H)})]}),K>0&&r.jsxs("div",{className:"flex justify-between text-sm text-amber-600",children:[r.jsxs("span",{children:["Penalty (",q,"%)"]}),r.jsxs("span",{children:["-",B(K)]})]}),r.jsxs("div",{className:"flex justify-between text-base font-semibold border-t border-gray-200 pt-2 mt-2",children:[r.jsx("span",{children:"You'll receive"}),r.jsx("span",{className:"text-green-600",children:B(V)})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Note (Optional)"}),r.jsx("input",{type:"text",value:v,onChange:ie=>w(ie.target.value),placeholder:"e.g., Emergency expense",className:"w-full px-4 py-3 rounded-xl border border-gray-300 focus:border-primary-500 transition-colors"})]}),(N.submit||N.eligibility)&&r.jsx("div",{className:"p-4 bg-red-50 rounded-xl",children:r.jsx("p",{className:"text-sm text-red-600",children:N.submit||N.eligibility})})]})}),!o&&r.jsx("div",{className:"p-6 border-t border-gray-200 bg-gray-50",children:r.jsxs("div",{ref:M,className:fe("relative h-16 rounded-2xl overflow-hidden select-none",oe?"cursor-grab":"opacity-50 cursor-not-allowed",A?"bg-green-500":"bg-gradient-to-r from-primary-600 to-primary-500"),children:[r.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:r.jsx("div",{className:"flex items-center gap-2 text-white/80 font-medium",children:n.isPending?r.jsxs(r.Fragment,{children:[r.jsx(Ke,{className:"w-5 h-5 animate-spin"}),r.jsx("span",{children:"Processing..."})]}):A?r.jsxs(r.Fragment,{children:[r.jsx(Hr,{className:"w-5 h-5"}),r.jsx("span",{children:"Withdrawn!"})]}):r.jsxs(r.Fragment,{children:[r.jsxs("span",{children:["Slide to withdraw"," ",c?B(V):"amount"]}),r.jsx(Qr,{className:"w-5 h-5 animate-pulse"})]})})}),r.jsx("div",{className:fe("absolute inset-y-0 left-0 transition-all duration-100",A?"bg-green-600":"bg-primary-700/30"),style:{width:`${C}%`}}),r.jsx("div",{onMouseDown:ce,onTouchStart:xe,className:fe("absolute top-1 bottom-1 left-1 w-14 rounded-xl flex items-center justify-center",_?"cursor-grabbing scale-105":"cursor-grab",A?"bg-white":"bg-white shadow-lg",!oe||n.isPending?"pointer-events-none":""),style:{transform:`translateX(${_e}px)`,transition:_?"none":"transform 0.3s ease-out"},children:n.isPending?r.jsx(Ke,{className:"w-6 h-6 text-primary-600 animate-spin"}):A?r.jsx(Hr,{className:"w-6 h-6 text-green-600"}):r.jsx(An,{className:"w-6 h-6 text-primary-600"})})]})})]})]}):null}const dge="https://api.peeap.com";function uge(){const e={},t=localStorage.getItem("accessToken");if(t){e.Authorization=`Bearer ${t}`;try{const s=JSON.parse(atob(t));s.userId&&(e["x-user-id"]=s.userId)}catch{}}return e}async function _v(e,t={}){const{params:s,...a}=t;let n=`${dge}${e}`;if(s){const o=new URLSearchParams(s);n+=`?${o.toString()}`}const i=await fetch(n,{...a,headers:{"Content-Type":"application/json",...uge(),...a.headers}});if(!i.ok){const o=await i.json().catch(()=>({message:i.statusText}));throw new Error(o.message||`HTTP error ${i.status}`)}return i.json()}const am={get(e,t){return _v(e,{...t,method:"GET"})},post(e,t,s){return _v(e,{...s,method:"POST",body:t?JSON.stringify(t):void 0})},put(e,t,s){return _v(e,{...s,method:"PUT",body:t?JSON.stringify(t):void 0})},delete(e,t){return _v(e,{...t,method:"DELETE"})}},hge=(e,t)=>e,IM=(e,t)=>e,mge={async initiateDeposit(e){return await am.post("/monime/deposit",{...e,amount:e.amount,currency:e.currency||"SLE",method:e.method||"CHECKOUT_SESSION"})},async initiateWithdraw(e){return await am.post("/monime/withdraw",{...e,amount:e.amount,currency:e.currency||"SLE"})},async getTransaction(e){return await am.get(`/monime/transactions/${e}`)},async getTransactions(e){const t=e?`?type=${e}`:"";return await am.get(`/monime/transactions${t}`)},async getBanks(){return(await am.get("/monime/banks")).result||[]},async pollTransactionStatus(e,t,s){const{interval:a=3e3,maxAttempts:n=60,stopStatuses:i=["completed","failed","expired","cancelled"]}=s||{};let o=0;return new Promise((l,c)=>{const d=async()=>{try{const h=await this.getTransaction(e);if(t(h),i.includes(h.status)){l(h);return}if(o++,o>=n){c(new Error("Polling timeout - transaction still pending"));return}setTimeout(d,a)}catch(h){c(h)}};d()})},openCheckout(e,t){const s=(t==null?void 0:t.target)||"_blank";window.open(e,s)},formatUssdCode(e){return e.startsWith("*")?e:`*${e}`},dialUssd(e){const t=e.replace("#","%23");window.location.href=`tel:${t}`},async getAllDeposits(e=50,t=0){return await am.get(`/monime/deposits?limit=${e}&offset=${t}`)}};var n2={},wq={exports:{}},fge="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",xge=fge,gge=xge;function jq(){}function Nq(){}Nq.resetWarningCache=jq;var pge=function(){function e(a,n,i,o,l,c){if(c!==gge){var d=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw d.name="Invariant Violation",d}}e.isRequired=e;function t(){return e}var s={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:Nq,resetWarningCache:jq};return s.PropTypes=s,s};wq.exports=pge();var kq=wq.exports,Sq={L:1,M:0,Q:3,H:2},Cq={MODE_NUMBER:1,MODE_ALPHA_NUM:2,MODE_8BIT_BYTE:4,MODE_KANJI:8},yge=Cq;function _q(e){this.mode=yge.MODE_8BIT_BYTE,this.data=e}_q.prototype={getLength:function(e){return this.data.length},write:function(e){for(var t=0;t<this.data.length;t++)e.put(this.data.charCodeAt(t),8)}};var bge=_q,Ev=Sq;function Jl(e,t){this.totalCount=e,this.dataCount=t}Jl.RS_BLOCK_TABLE=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]];Jl.getRSBlocks=function(e,t){var s=Jl.getRsBlockTable(e,t);if(s==null)throw new Error("bad rs block @ typeNumber:"+e+"/errorCorrectLevel:"+t);for(var a=s.length/3,n=new Array,i=0;i<a;i++)for(var o=s[i*3+0],l=s[i*3+1],c=s[i*3+2],d=0;d<o;d++)n.push(new Jl(l,c));return n};Jl.getRsBlockTable=function(e,t){switch(t){case Ev.L:return Jl.RS_BLOCK_TABLE[(e-1)*4+0];case Ev.M:return Jl.RS_BLOCK_TABLE[(e-1)*4+1];case Ev.Q:return Jl.RS_BLOCK_TABLE[(e-1)*4+2];case Ev.H:return Jl.RS_BLOCK_TABLE[(e-1)*4+3];default:return}};var vge=Jl;function Eq(){this.buffer=new Array,this.length=0}Eq.prototype={get:function(e){var t=Math.floor(e/8);return(this.buffer[t]>>>7-e%8&1)==1},put:function(e,t){for(var s=0;s<t;s++)this.putBit((e>>>t-s-1&1)==1)},getLengthInBits:function(){return this.length},putBit:function(e){var t=Math.floor(this.length/8);this.buffer.length<=t&&this.buffer.push(0),e&&(this.buffer[t]|=128>>>this.length%8),this.length++}};var wge=Eq,vl={glog:function(e){if(e<1)throw new Error("glog("+e+")");return vl.LOG_TABLE[e]},gexp:function(e){for(;e<0;)e+=255;for(;e>=256;)e-=255;return vl.EXP_TABLE[e]},EXP_TABLE:new Array(256),LOG_TABLE:new Array(256)};for(var Sn=0;Sn<8;Sn++)vl.EXP_TABLE[Sn]=1<<Sn;for(var Sn=8;Sn<256;Sn++)vl.EXP_TABLE[Sn]=vl.EXP_TABLE[Sn-4]^vl.EXP_TABLE[Sn-5]^vl.EXP_TABLE[Sn-6]^vl.EXP_TABLE[Sn-8];for(var Sn=0;Sn<255;Sn++)vl.LOG_TABLE[vl.EXP_TABLE[Sn]]=Sn;var Aq=vl,l0=Aq;function V1(e,t){if(e.length==null)throw new Error(e.length+"/"+t);for(var s=0;s<e.length&&e[s]==0;)s++;this.num=new Array(e.length-s+t);for(var a=0;a<e.length-s;a++)this.num[a]=e[a+s]}V1.prototype={get:function(e){return this.num[e]},getLength:function(){return this.num.length},multiply:function(e){for(var t=new Array(this.getLength()+e.getLength()-1),s=0;s<this.getLength();s++)for(var a=0;a<e.getLength();a++)t[s+a]^=l0.gexp(l0.glog(this.get(s))+l0.glog(e.get(a)));return new V1(t,0)},mod:function(e){if(this.getLength()-e.getLength()<0)return this;for(var t=l0.glog(this.get(0))-l0.glog(e.get(0)),s=new Array(this.getLength()),a=0;a<this.getLength();a++)s[a]=this.get(a);for(var a=0;a<e.getLength();a++)s[a]^=l0.gexp(l0.glog(e.get(a))+t);return new V1(s,0).mod(e)}};var Pq=V1,ko=Cq,DM=Pq,jge=Aq,Rd={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7},vn={PATTERN_POSITION_TABLE:[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],G15:1335,G18:7973,G15_MASK:21522,getBCHTypeInfo:function(e){for(var t=e<<10;vn.getBCHDigit(t)-vn.getBCHDigit(vn.G15)>=0;)t^=vn.G15<<vn.getBCHDigit(t)-vn.getBCHDigit(vn.G15);return(e<<10|t)^vn.G15_MASK},getBCHTypeNumber:function(e){for(var t=e<<12;vn.getBCHDigit(t)-vn.getBCHDigit(vn.G18)>=0;)t^=vn.G18<<vn.getBCHDigit(t)-vn.getBCHDigit(vn.G18);return e<<12|t},getBCHDigit:function(e){for(var t=0;e!=0;)t++,e>>>=1;return t},getPatternPosition:function(e){return vn.PATTERN_POSITION_TABLE[e-1]},getMask:function(e,t,s){switch(e){case Rd.PATTERN000:return(t+s)%2==0;case Rd.PATTERN001:return t%2==0;case Rd.PATTERN010:return s%3==0;case Rd.PATTERN011:return(t+s)%3==0;case Rd.PATTERN100:return(Math.floor(t/2)+Math.floor(s/3))%2==0;case Rd.PATTERN101:return t*s%2+t*s%3==0;case Rd.PATTERN110:return(t*s%2+t*s%3)%2==0;case Rd.PATTERN111:return(t*s%3+(t+s)%2)%2==0;default:throw new Error("bad maskPattern:"+e)}},getErrorCorrectPolynomial:function(e){for(var t=new DM([1],0),s=0;s<e;s++)t=t.multiply(new DM([1,jge.gexp(s)],0));return t},getLengthInBits:function(e,t){if(1<=t&&t<10)switch(e){case ko.MODE_NUMBER:return 10;case ko.MODE_ALPHA_NUM:return 9;case ko.MODE_8BIT_BYTE:return 8;case ko.MODE_KANJI:return 8;default:throw new Error("mode:"+e)}else if(t<27)switch(e){case ko.MODE_NUMBER:return 12;case ko.MODE_ALPHA_NUM:return 11;case ko.MODE_8BIT_BYTE:return 16;case ko.MODE_KANJI:return 10;default:throw new Error("mode:"+e)}else if(t<41)switch(e){case ko.MODE_NUMBER:return 14;case ko.MODE_ALPHA_NUM:return 13;case ko.MODE_8BIT_BYTE:return 16;case ko.MODE_KANJI:return 12;default:throw new Error("mode:"+e)}else throw new Error("type:"+t)},getLostPoint:function(e){for(var t=e.getModuleCount(),s=0,a=0;a<t;a++)for(var n=0;n<t;n++){for(var i=0,o=e.isDark(a,n),l=-1;l<=1;l++)if(!(a+l<0||t<=a+l))for(var c=-1;c<=1;c++)n+c<0||t<=n+c||l==0&&c==0||o==e.isDark(a+l,n+c)&&i++;i>5&&(s+=3+i-5)}for(var a=0;a<t-1;a++)for(var n=0;n<t-1;n++){var d=0;e.isDark(a,n)&&d++,e.isDark(a+1,n)&&d++,e.isDark(a,n+1)&&d++,e.isDark(a+1,n+1)&&d++,(d==0||d==4)&&(s+=3)}for(var a=0;a<t;a++)for(var n=0;n<t-6;n++)e.isDark(a,n)&&!e.isDark(a,n+1)&&e.isDark(a,n+2)&&e.isDark(a,n+3)&&e.isDark(a,n+4)&&!e.isDark(a,n+5)&&e.isDark(a,n+6)&&(s+=40);for(var n=0;n<t;n++)for(var a=0;a<t-6;a++)e.isDark(a,n)&&!e.isDark(a+1,n)&&e.isDark(a+2,n)&&e.isDark(a+3,n)&&e.isDark(a+4,n)&&!e.isDark(a+5,n)&&e.isDark(a+6,n)&&(s+=40);for(var h=0,n=0;n<t;n++)for(var a=0;a<t;a++)e.isDark(a,n)&&h++;var f=Math.abs(100*h/t/t-50)/5;return s+=f*10,s}},Nge=vn,kge=bge,Tq=vge,Iq=wge,Gu=Nge,Sge=Pq;function rc(e,t){this.typeNumber=e,this.errorCorrectLevel=t,this.modules=null,this.moduleCount=0,this.dataCache=null,this.dataList=[]}var go=rc.prototype;go.addData=function(e){var t=new kge(e);this.dataList.push(t),this.dataCache=null};go.isDark=function(e,t){if(e<0||this.moduleCount<=e||t<0||this.moduleCount<=t)throw new Error(e+","+t);return this.modules[e][t]};go.getModuleCount=function(){return this.moduleCount};go.make=function(){if(this.typeNumber<1){var e=1;for(e=1;e<40;e++){for(var t=Tq.getRSBlocks(e,this.errorCorrectLevel),s=new Iq,a=0,n=0;n<t.length;n++)a+=t[n].dataCount;for(var n=0;n<this.dataList.length;n++){var i=this.dataList[n];s.put(i.mode,4),s.put(i.getLength(),Gu.getLengthInBits(i.mode,e)),i.write(s)}if(s.getLengthInBits()<=a*8)break}this.typeNumber=e}this.makeImpl(!1,this.getBestMaskPattern())};go.makeImpl=function(e,t){this.moduleCount=this.typeNumber*4+17,this.modules=new Array(this.moduleCount);for(var s=0;s<this.moduleCount;s++){this.modules[s]=new Array(this.moduleCount);for(var a=0;a<this.moduleCount;a++)this.modules[s][a]=null}this.setupPositionProbePattern(0,0),this.setupPositionProbePattern(this.moduleCount-7,0),this.setupPositionProbePattern(0,this.moduleCount-7),this.setupPositionAdjustPattern(),this.setupTimingPattern(),this.setupTypeInfo(e,t),this.typeNumber>=7&&this.setupTypeNumber(e),this.dataCache==null&&(this.dataCache=rc.createData(this.typeNumber,this.errorCorrectLevel,this.dataList)),this.mapData(this.dataCache,t)};go.setupPositionProbePattern=function(e,t){for(var s=-1;s<=7;s++)if(!(e+s<=-1||this.moduleCount<=e+s))for(var a=-1;a<=7;a++)t+a<=-1||this.moduleCount<=t+a||(0<=s&&s<=6&&(a==0||a==6)||0<=a&&a<=6&&(s==0||s==6)||2<=s&&s<=4&&2<=a&&a<=4?this.modules[e+s][t+a]=!0:this.modules[e+s][t+a]=!1)};go.getBestMaskPattern=function(){for(var e=0,t=0,s=0;s<8;s++){this.makeImpl(!0,s);var a=Gu.getLostPoint(this);(s==0||e>a)&&(e=a,t=s)}return t};go.createMovieClip=function(e,t,s){var a=e.createEmptyMovieClip(t,s),n=1;this.make();for(var i=0;i<this.modules.length;i++)for(var o=i*n,l=0;l<this.modules[i].length;l++){var c=l*n,d=this.modules[i][l];d&&(a.beginFill(0,100),a.moveTo(c,o),a.lineTo(c+n,o),a.lineTo(c+n,o+n),a.lineTo(c,o+n),a.endFill())}return a};go.setupTimingPattern=function(){for(var e=8;e<this.moduleCount-8;e++)this.modules[e][6]==null&&(this.modules[e][6]=e%2==0);for(var t=8;t<this.moduleCount-8;t++)this.modules[6][t]==null&&(this.modules[6][t]=t%2==0)};go.setupPositionAdjustPattern=function(){for(var e=Gu.getPatternPosition(this.typeNumber),t=0;t<e.length;t++)for(var s=0;s<e.length;s++){var a=e[t],n=e[s];if(this.modules[a][n]==null)for(var i=-2;i<=2;i++)for(var o=-2;o<=2;o++)i==-2||i==2||o==-2||o==2||i==0&&o==0?this.modules[a+i][n+o]=!0:this.modules[a+i][n+o]=!1}};go.setupTypeNumber=function(e){for(var t=Gu.getBCHTypeNumber(this.typeNumber),s=0;s<18;s++){var a=!e&&(t>>s&1)==1;this.modules[Math.floor(s/3)][s%3+this.moduleCount-8-3]=a}for(var s=0;s<18;s++){var a=!e&&(t>>s&1)==1;this.modules[s%3+this.moduleCount-8-3][Math.floor(s/3)]=a}};go.setupTypeInfo=function(e,t){for(var s=this.errorCorrectLevel<<3|t,a=Gu.getBCHTypeInfo(s),n=0;n<15;n++){var i=!e&&(a>>n&1)==1;n<6?this.modules[n][8]=i:n<8?this.modules[n+1][8]=i:this.modules[this.moduleCount-15+n][8]=i}for(var n=0;n<15;n++){var i=!e&&(a>>n&1)==1;n<8?this.modules[8][this.moduleCount-n-1]=i:n<9?this.modules[8][15-n-1+1]=i:this.modules[8][15-n-1]=i}this.modules[this.moduleCount-8][8]=!e};go.mapData=function(e,t){for(var s=-1,a=this.moduleCount-1,n=7,i=0,o=this.moduleCount-1;o>0;o-=2)for(o==6&&o--;;){for(var l=0;l<2;l++)if(this.modules[a][o-l]==null){var c=!1;i<e.length&&(c=(e[i]>>>n&1)==1);var d=Gu.getMask(t,a,o-l);d&&(c=!c),this.modules[a][o-l]=c,n--,n==-1&&(i++,n=7)}if(a+=s,a<0||this.moduleCount<=a){a-=s,s=-s;break}}};rc.PAD0=236;rc.PAD1=17;rc.createData=function(e,t,s){for(var a=Tq.getRSBlocks(e,t),n=new Iq,i=0;i<s.length;i++){var o=s[i];n.put(o.mode,4),n.put(o.getLength(),Gu.getLengthInBits(o.mode,e)),o.write(n)}for(var l=0,i=0;i<a.length;i++)l+=a[i].dataCount;if(n.getLengthInBits()>l*8)throw new Error("code length overflow. ("+n.getLengthInBits()+">"+l*8+")");for(n.getLengthInBits()+4<=l*8&&n.put(0,4);n.getLengthInBits()%8!=0;)n.putBit(!1);for(;!(n.getLengthInBits()>=l*8||(n.put(rc.PAD0,8),n.getLengthInBits()>=l*8));)n.put(rc.PAD1,8);return rc.createBytes(n,a)};rc.createBytes=function(e,t){for(var s=0,a=0,n=0,i=new Array(t.length),o=new Array(t.length),l=0;l<t.length;l++){var c=t[l].dataCount,d=t[l].totalCount-c;a=Math.max(a,c),n=Math.max(n,d),i[l]=new Array(c);for(var h=0;h<i[l].length;h++)i[l][h]=255&e.buffer[h+s];s+=c;var f=Gu.getErrorCorrectPolynomial(d),x=new Sge(i[l],f.getLength()-1),y=x.mod(f);o[l]=new Array(f.getLength()-1);for(var h=0;h<o[l].length;h++){var v=h+y.getLength()-o[l].length;o[l][h]=v>=0?y.get(v):0}}for(var w=0,h=0;h<t.length;h++)w+=t[h].totalCount;for(var N=new Array(w),k=0,h=0;h<a;h++)for(var l=0;l<t.length;l++)h<i[l].length&&(N[k++]=i[l][h]);for(var h=0;h<n;h++)for(var l=0;l<t.length;l++)h<o[l].length&&(N[k++]=o[l][h]);return N};var Cge=rc,mA={};Object.defineProperty(mA,"__esModule",{value:!0});var _ge=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e},Ege=kq,So=Oq(Ege),Dq=p,Av=Oq(Dq);function Oq(e){return e&&e.__esModule?e:{default:e}}function Age(e,t){var s={};for(var a in e)t.indexOf(a)>=0||Object.prototype.hasOwnProperty.call(e,a)&&(s[a]=e[a]);return s}var Pge={bgColor:So.default.oneOfType([So.default.object,So.default.string]).isRequired,bgD:So.default.string.isRequired,fgColor:So.default.oneOfType([So.default.object,So.default.string]).isRequired,fgD:So.default.string.isRequired,size:So.default.number.isRequired,title:So.default.string,viewBoxSize:So.default.number.isRequired,xmlns:So.default.string},fA=(0,Dq.forwardRef)(function(e,t){var s=e.bgColor,a=e.bgD,n=e.fgD,i=e.fgColor,o=e.size,l=e.title,c=e.viewBoxSize,d=e.xmlns,h=d===void 0?"http://www.w3.org/2000/svg":d,f=Age(e,["bgColor","bgD","fgD","fgColor","size","title","viewBoxSize","xmlns"]);return Av.default.createElement("svg",_ge({},f,{height:o,ref:t,viewBox:"0 0 "+c+" "+c,width:o,xmlns:h}),l?Av.default.createElement("title",null,l):null,Av.default.createElement("path",{d:a,fill:s}),Av.default.createElement("path",{d:n,fill:i}))});fA.displayName="QRCodeSvg";fA.propTypes=Pge;mA.default=fA;Object.defineProperty(n2,"__esModule",{value:!0});n2.QRCode=void 0;var Tge=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e},Ige=kq,kc=ab(Ige),Dge=Sq,Oge=ab(Dge),Rge=Cge,Mge=ab(Rge),Rq=p,Lge=ab(Rq),Fge=mA,Bge=ab(Fge);function ab(e){return e&&e.__esModule?e:{default:e}}function $ge(e,t){var s={};for(var a in e)t.indexOf(a)>=0||Object.prototype.hasOwnProperty.call(e,a)&&(s[a]=e[a]);return s}var Uge={bgColor:kc.default.oneOfType([kc.default.object,kc.default.string]),fgColor:kc.default.oneOfType([kc.default.object,kc.default.string]),level:kc.default.string,size:kc.default.number,value:kc.default.string.isRequired},i2=(0,Rq.forwardRef)(function(e,t){var s=e.bgColor,a=s===void 0?"#FFFFFF":s,n=e.fgColor,i=n===void 0?"#000000":n,o=e.level,l=o===void 0?"L":o,c=e.size,d=c===void 0?256:c,h=e.value,f=$ge(e,["bgColor","fgColor","level","size","value"]),x=new Mge.default(-1,Oge.default[l]);x.addData(h),x.make();var y=x.modules;return Lge.default.createElement(Bge.default,Tge({},f,{bgColor:a,bgD:y.map(function(v,w){return v.map(function(N,k){return N?"":"M "+k+" "+w+" l 1 0 0 1 -1 0 Z"}).join(" ")}).join(" "),fgColor:i,fgD:y.map(function(v,w){return v.map(function(N,k){return N?"M "+k+" "+w+" l 1 0 0 1 -1 0 Z":""}).join(" ")}).join(" "),ref:t,size:d,viewBoxSize:y.length}))});n2.QRCode=i2;i2.displayName="QRCode";i2.propTypes=Uge;var wx=n2.default=i2;function Mq({userId:e,walletId:t,amount:s,description:a,type:n="static",merchantName:i,onGenerated:o,size:l=200,currency:c}){const[d,h]=p.useState(null),[f,x]=p.useState(!0),[y,v]=p.useState(null),[w,N]=p.useState(!1),[k,C]=p.useState(null),[E,_]=p.useState("");p.useEffect(()=>{(async()=>{if(c){const W=await cr.getCurrencySymbol(c);_(W)}else{const W=await cr.getDefaultCurrency();_(W.symbol)}})()},[c]);const T=async()=>{if(x(!0),v(null),!e||!t){v("Missing user or wallet information"),x(!1);return}try{let $;if(n==="dynamic"&&s?$=await U1.generateDynamicQR(e,t,s,a):n==="merchant"&&i?$=await U1.generateMerchantQR(e,t,i,s):$=await U1.generateStaticQR(e,t),h($),o==null||o($),$.expiresAt){const W=new Date($.expiresAt).getTime();C(Math.max(0,Math.floor((W-Date.now())/1e3)))}}catch($){console.error("Failed to generate QR:",$),v($.message||"Failed to generate QR code")}finally{x(!1)}};p.useEffect(()=>{T()},[e,t,s,n]),p.useEffect(()=>{if(k===null||k<=0)return;const $=setInterval(()=>{C(W=>W===null||W<=1?(clearInterval($),0):W-1)},1e3);return()=>clearInterval($)},[k]);const A=$=>{const W=Math.floor($/60),I=$%60;return`${W}:${I.toString().padStart(2,"0")}`},P=async()=>{d!=null&&d.deepLink&&(await navigator.clipboard.writeText(d.deepLink),N(!0),setTimeout(()=>N(!1),2e3))},M=async()=>{if(d!=null&&d.deepLink&&navigator.share)try{await navigator.share({title:"Payment Request",text:s?`Pay ${E}${s.toFixed(2)}`:"Send me money",url:d.deepLink})}catch{}};if(f)return r.jsxs("div",{className:"flex flex-col items-center justify-center p-8",children:[r.jsx("div",{className:"w-12 h-12 border-4 border-primary-600 border-t-transparent rounded-full animate-spin mb-4"}),r.jsx("p",{className:"text-gray-500",children:"Generating QR code..."})]});if(!d||y)return r.jsxs("div",{className:"flex flex-col items-center justify-center p-8 text-center",children:[r.jsx(Vs,{className:"w-12 h-12 text-gray-300 mb-4"}),r.jsx("p",{className:"text-gray-500 font-medium",children:"Failed to generate QR code"}),y&&r.jsx("p",{className:"text-red-500 text-sm mt-2",children:y}),r.jsx("button",{onClick:T,className:"mt-4 px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700",children:"Try Again"})]});const R=k!==null&&k<=0;return r.jsxs("div",{className:"flex flex-col items-center",children:[s&&r.jsxs("div",{className:"mb-4 text-center",children:[r.jsx("p",{className:"text-sm text-gray-500",children:"Amount to receive"}),r.jsxs("p",{className:"text-3xl font-bold text-gray-900",children:[E,s.toFixed(2)]})]}),r.jsx("div",{className:`p-4 bg-white rounded-xl shadow-lg ${R?"opacity-50":""}`,children:r.jsx(wx,{value:d.qrData,size:l,level:"M",style:{filter:R?"blur(4px)":"none"}})}),k!==null&&r.jsxs("div",{className:`mt-4 flex items-center gap-2 px-3 py-2 rounded-lg ${R?"bg-red-100 text-red-700":k<60?"bg-yellow-100 text-yellow-700":"bg-green-100 text-green-700"}`,children:[r.jsx(_t,{className:"w-4 h-4"}),R?r.jsx("span",{children:"QR code expired"}):r.jsxs("span",{children:["Expires in ",A(k)]})]}),r.jsxs("p",{className:"mt-4 text-xs text-gray-400",children:["Ref: ",d.reference]}),r.jsxs("div",{className:"mt-4 flex gap-2",children:[r.jsxs("button",{onClick:T,className:"flex items-center gap-2 px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200",children:[r.jsx(Ot,{className:"w-4 h-4"}),"Refresh"]}),r.jsx("button",{onClick:P,className:"flex items-center gap-2 px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200",children:w?r.jsxs(r.Fragment,{children:[r.jsx(Ae,{className:"w-4 h-4 text-green-600"}),"Copied!"]}):r.jsxs(r.Fragment,{children:[r.jsx(Pr,{className:"w-4 h-4"}),"Copy Link"]})}),typeof navigator<"u"&&"share"in navigator&&r.jsxs("button",{onClick:M,className:"flex items-center gap-2 px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700",children:[r.jsx(YV,{className:"w-4 h-4"}),"Share"]})]}),a&&r.jsx("p",{className:"mt-4 text-sm text-gray-500 text-center",children:a})]})}function Vge(){const e=Ut(),{user:t}=pt(),{data:s,isLoading:a}=mi(),n=rfe();sfe();const i=afe(),o=ife(),l=ofe(),[c,d]=p.useState([]);p.useEffect(()=>{cr.getCurrencies().then(d)},[]);const h=Ne=>{var He;return Ne==="SLE"?"Le":((He=c.find(gt=>gt.code===Ne))==null?void 0:He.symbol)||Ne},f=(Ne,He)=>`${h(He)} ${Ne.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}`,[x,y]=p.useState(!1),[v,w]=p.useState(!1),[N,k]=p.useState(!1),[C,E]=p.useState(!1),[_,T]=p.useState(!1),[A,P]=p.useState(!1),[M,R]=p.useState(null),[$,W]=p.useState(""),[I,B]=p.useState(!1),[O,F]=p.useState(""),[q,H]=p.useState("SLE"),[K,V]=p.useState(""),[z,G]=p.useState(""),[te,he]=p.useState(""),[ne,ce]=p.useState(""),[xe,_e]=p.useState([]),[oe,ie]=p.useState(null),[ge,Z]=p.useState(!1),[Q,re]=p.useState(""),[pe,Se]=p.useState(!1),[je,Fe]=p.useState(!1),ke=async Ne=>{if(Ne.length<3){_e([]);return}Z(!0);try{const{data:He,error:gt}=await X.from("users").select("id, email, first_name, last_name").or(`email.ilike.%${Ne}%,phone.ilike.%${Ne}%`).limit(5);if(gt){console.error("Error searching recipient:",gt),_e([]);return}_e((He==null?void 0:He.map(yt=>({id:yt.id,email:yt.email,firstName:yt.first_name,lastName:yt.last_name})))||[])}catch(He){console.error("Error searching recipient:",He),_e([])}finally{Z(!1)}},Ve=async()=>{if(!M||!z||!oe)return;re("");const Ne=parseFloat(z);if(Ne<=0){re("Amount must be greater than 0");return}if(Ne>M.balance){re("Insufficient balance");return}try{await i.mutateAsync({fromWalletId:M.id,toWalletId:oe.id,amount:Ne,description:te||`Transfer to ${oe.firstName} ${oe.lastName}`}),Se(!0),setTimeout(()=>{T(!1),le()},2e3)}catch(He){re(He.message||"Transfer failed. Please try again.")}},le=()=>{G(""),he(""),ce(""),_e([]),ie(null),re(""),Se(!1),R(null)},me=Ne=>{navigator.clipboard.writeText(Ne),Fe(!0),setTimeout(()=>Fe(!1),2e3)},ve=async()=>{V("");try{await n.mutateAsync({currency:q}),w(!1),H("SLE")}catch(Ne){console.error("Failed to create wallet:",Ne),V(Ne.message||"Failed to create wallet. Please try again.")}},Ze=async()=>{if(!M||!$)return;const Ne=parseFloat($);if(Ne<=0){F("Amount must be greater than 0");return}B(!0),F("");try{const He=hge(Ne),gt=await fetch("/api/monime/deposit",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({walletId:M.id,amount:He,currency:"SLE",userId:t==null?void 0:t.id,description:`Deposit to ${M.currency} wallet`})}),yt=await gt.json();if(!gt.ok)throw new Error(yt.error||"Failed to create checkout session");yt.paymentUrl?window.location.href=yt.paymentUrl:F("Failed to get payment URL. Please try again.")}catch(He){console.error("Failed to initiate deposit:",He),F(He.message||"Failed to initiate deposit. Please try again.")}finally{B(!1)}},$e=async Ne=>{try{Ne.status==="FROZEN"?await l.mutateAsync(Ne.id):await o.mutateAsync(Ne.id)}catch(He){console.error("Failed to update wallet status:",He)}};return r.jsxs(dn,{children:[r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Wallets"}),r.jsx("p",{className:"text-gray-500 mt-1",children:"Manage your digital wallets"})]}),r.jsxs("div",{className:"relative",children:[r.jsxs(Oe,{onClick:()=>y(!x),children:[r.jsx(sr,{className:"w-4 h-4 mr-2"}),"Create",r.jsx(ys,{className:fe("w-4 h-4 ml-2 transition-transform",x&&"rotate-180")})]}),x&&r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"fixed inset-0 z-10",onClick:()=>y(!1)}),r.jsxs("div",{className:"absolute right-0 top-full mt-2 w-56 bg-white rounded-xl shadow-lg border border-gray-200 py-2 z-20",children:[r.jsxs("button",{onClick:()=>{y(!1),w(!0)},className:"w-full flex items-center gap-3 px-4 py-3 hover:bg-gray-50 transition-colors",children:[r.jsx("div",{className:"w-10 h-10 rounded-full bg-primary-100 flex items-center justify-center",children:r.jsx(Rt,{className:"w-5 h-5 text-primary-600"})}),r.jsxs("div",{className:"text-left",children:[r.jsx("p",{className:"font-medium text-gray-900",children:"Wallet"}),r.jsx("p",{className:"text-xs text-gray-500",children:"Regular spending wallet"})]})]}),r.jsxs("button",{onClick:()=>{y(!1),k(!0)},className:"w-full flex items-center gap-3 px-4 py-3 hover:bg-gray-50 transition-colors",children:[r.jsx("div",{className:"w-10 h-10 rounded-full bg-green-100 flex items-center justify-center",children:r.jsx(lo,{className:"w-5 h-5 text-green-600"})}),r.jsxs("div",{className:"text-left",children:[r.jsx("p",{className:"font-medium text-gray-900",children:"Savings Pot"}),r.jsx("p",{className:"text-xs text-gray-500",children:"Locked savings goal"})]})]})]})]})]})]}),a?r.jsx("div",{className:"text-center py-12",children:"Loading wallets..."}):s&&s.length>0?r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:s.map(Ne=>r.jsxs(se,{className:"relative",children:[r.jsxs("div",{className:"flex items-start justify-between mb-4",children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:fe("w-12 h-12 rounded-full flex items-center justify-center",Ne.status==="ACTIVE"?"bg-primary-100":"bg-gray-100"),children:r.jsx(Rt,{className:fe("w-6 h-6",Ne.status==="ACTIVE"?"text-primary-600":"text-gray-400")})}),r.jsxs("div",{className:"ml-3",children:[r.jsxs("p",{className:"text-sm font-medium text-gray-900",children:[Ne.currency," Wallet"]}),r.jsx("p",{className:fe("text-xs",Ne.status==="ACTIVE"?"text-green-600":"text-gray-500"),children:Ne.status})]})]}),r.jsx("button",{className:"p-1 rounded hover:bg-gray-100",children:r.jsx(Ih,{className:"w-5 h-5 text-gray-400"})})]}),r.jsxs("div",{className:"mb-4",children:[r.jsx("p",{className:"text-sm text-gray-500",children:"Balance"}),r.jsx("p",{className:"text-2xl font-bold text-gray-900",children:f(Ne.balance,Ne.currency)})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-2 mb-4 text-xs text-gray-500",children:[r.jsxs("div",{children:[r.jsx("p",{children:"Daily Limit"}),r.jsx("p",{className:"font-medium text-gray-900",children:f(Ne.dailyLimit,Ne.currency)})]}),r.jsxs("div",{children:[r.jsx("p",{children:"Monthly Limit"}),r.jsx("p",{className:"font-medium text-gray-900",children:f(Ne.monthlyLimit,Ne.currency)})]})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsxs(Oe,{variant:"outline",size:"sm",className:"flex-1",onClick:()=>{R(Ne),E(!0)},disabled:Ne.status!=="ACTIVE",children:[r.jsx(Aa,{className:"w-4 h-4 mr-1"}),"Deposit"]}),r.jsxs(Oe,{variant:"outline",size:"sm",className:"flex-1",onClick:()=>{R(Ne),T(!0)},disabled:Ne.status!=="ACTIVE",children:[r.jsx(Rr,{className:"w-4 h-4 mr-1"}),"Send"]}),r.jsx(Oe,{variant:"outline",size:"sm",onClick:()=>{R(Ne),P(!0)},disabled:Ne.status!=="ACTIVE",title:"Receive Money",children:r.jsx(Vs,{className:"w-4 h-4"})}),r.jsx(Oe,{variant:"ghost",size:"sm",onClick:()=>$e(Ne),title:Ne.status==="FROZEN"?"Unfreeze":"Freeze",children:r.jsx(z5,{className:fe("w-4 h-4",Ne.status==="FROZEN"?"text-blue-500":"text-gray-400")})})]})]},Ne.id))}):r.jsxs(se,{className:"text-center py-12",children:[r.jsx(Rt,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),r.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No wallets yet"}),r.jsx("p",{className:"text-gray-500 mb-6",children:"Create your first wallet or savings pot to get started"}),r.jsxs("div",{className:"flex justify-center gap-4",children:[r.jsxs(Oe,{onClick:()=>w(!0),children:[r.jsx(Rt,{className:"w-4 h-4 mr-2"}),"Create Wallet"]}),r.jsxs(Oe,{variant:"outline",onClick:()=>k(!0),children:[r.jsx(lo,{className:"w-4 h-4 mr-2"}),"Create Pot"]})]})]})]}),v&&r.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50 p-4",children:r.jsxs(se,{className:"w-full max-w-md",children:[r.jsx(pa,{children:r.jsx(ya,{children:"Create New Wallet"})}),r.jsx("p",{className:"text-gray-500 mb-4",children:"Choose the currency for your new wallet."}),r.jsxs("div",{className:"mb-6 space-y-3",children:[r.jsxs("button",{onClick:()=>H("SLE"),className:`w-full flex items-center gap-4 p-4 rounded-xl border-2 transition-all ${q==="SLE"?"border-primary-500 bg-primary-50":"border-gray-200 hover:border-gray-300"}`,children:[r.jsx("div",{className:`w-12 h-12 rounded-full flex items-center justify-center ${q==="SLE"?"bg-primary-100":"bg-gray-100"}`,children:r.jsx("span",{className:"text-xl font-bold text-primary-600",children:"Le"})}),r.jsxs("div",{className:"text-left flex-1",children:[r.jsx("p",{className:"font-semibold text-gray-900",children:"Leone Wallet (SLE)"}),r.jsx("p",{className:"text-sm text-gray-500",children:"For mobile money payouts"})]}),q==="SLE"&&r.jsx(Ae,{className:"w-5 h-5 text-primary-600"})]}),r.jsxs("button",{onClick:()=>H("USD"),className:`w-full flex items-center gap-4 p-4 rounded-xl border-2 transition-all ${q==="USD"?"border-primary-500 bg-primary-50":"border-gray-200 hover:border-gray-300"}`,children:[r.jsx("div",{className:`w-12 h-12 rounded-full flex items-center justify-center ${q==="USD"?"bg-primary-100":"bg-gray-100"}`,children:r.jsx("span",{className:"text-xl font-bold text-green-600",children:"$"})}),r.jsxs("div",{className:"text-left flex-1",children:[r.jsx("p",{className:"font-semibold text-gray-900",children:"US Dollar Wallet (USD)"}),r.jsx("p",{className:"text-sm text-gray-500",children:"For international transactions"})]}),q==="USD"&&r.jsx(Ae,{className:"w-5 h-5 text-primary-600"})]})]}),K&&r.jsxs("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-lg flex items-center gap-2 text-red-700",children:[r.jsx(dt,{className:"w-4 h-4 flex-shrink-0"}),r.jsx("span",{className:"text-sm",children:K})]}),r.jsxs("div",{className:"flex gap-3",children:[r.jsx(Oe,{variant:"outline",className:"flex-1",onClick:()=>{w(!1),V(""),H("SLE")},children:"Cancel"}),r.jsxs(Oe,{className:"flex-1",onClick:ve,isLoading:n.isPending,children:["Create ",q," Wallet"]})]})]})}),C&&M&&r.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50 p-4",children:r.jsxs(se,{className:"w-full max-w-md",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:r.jsx(Aa,{className:"w-5 h-5 text-green-600"})}),r.jsxs("div",{children:[r.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Add Funds"}),r.jsxs("p",{className:"text-sm text-gray-500",children:["Deposit to ",M.currency," Wallet"]})]})]}),r.jsx("button",{onClick:()=>{E(!1),W(""),F(""),R(null)},className:"p-2 hover:bg-gray-100 rounded-lg",children:r.jsx(Ct,{className:"w-5 h-5 text-gray-500"})})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[r.jsx("p",{className:"text-sm text-gray-500",children:"Current Balance"}),r.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:["Le ",M.balance.toLocaleString("en-US",{minimumFractionDigits:2})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Amount to Deposit"}),r.jsxs("div",{className:"relative",children:[r.jsx("span",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-500",children:"Le"}),r.jsx("input",{type:"number",min:"1",step:"0.01",value:$,onChange:Ne=>{W(Ne.target.value),F("")},className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"0.00",disabled:I})]}),r.jsx("div",{className:"flex gap-2 mt-2",children:[10,50,100,500].map(Ne=>r.jsxs("button",{onClick:()=>W(Ne.toString()),className:"flex-1 px-2 py-1 text-sm bg-gray-100 hover:bg-gray-200 rounded text-gray-700",disabled:I,children:["Le ",Ne]},Ne))})]}),r.jsx("div",{className:"p-3 bg-orange-50 border border-orange-200 rounded-lg",children:r.jsxs("div",{className:"flex items-start gap-2",children:[r.jsx(Aa,{className:"w-4 h-4 text-orange-600 mt-0.5"}),r.jsx("p",{className:"text-sm text-orange-800",children:"Add money with Orange Money"})]})}),O&&r.jsxs("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg flex items-center gap-2 text-red-700",children:[r.jsx(dt,{className:"w-4 h-4"}),r.jsx("span",{className:"text-sm",children:O})]}),r.jsxs("div",{className:"flex gap-3 pt-2",children:[r.jsx(Oe,{variant:"outline",className:"flex-1",onClick:()=>{E(!1),W(""),F(""),R(null)},disabled:I,children:"Cancel"}),r.jsx(Oe,{className:"flex-1",onClick:Ze,disabled:!$||parseFloat($)<=0||I,children:I?r.jsxs(r.Fragment,{children:[r.jsx(Ke,{className:"w-4 h-4 mr-2 animate-spin"}),"Processing..."]}):r.jsxs(r.Fragment,{children:[r.jsx(Aa,{className:"w-4 h-4 mr-2"}),"Deposit Le ",$||"0.00"]})})]})]})]})}),_&&M&&r.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50 p-4",children:r.jsxs(se,{className:"w-full max-w-lg max-h-[90vh] overflow-y-auto",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"p-2 bg-primary-100 rounded-lg",children:r.jsx(Tn,{className:"w-5 h-5 text-primary-600"})}),r.jsxs("div",{children:[r.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Send Money"}),r.jsxs("p",{className:"text-sm text-gray-500",children:["Transfer from ",M.currency," Wallet"]})]})]}),r.jsx("button",{onClick:()=>{T(!1),le()},className:"p-2 hover:bg-gray-100 rounded-lg",children:r.jsx(Ct,{className:"w-5 h-5 text-gray-500"})})]}),pe?r.jsxs("div",{className:"text-center py-8",children:[r.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:r.jsx(Ae,{className:"w-8 h-8 text-green-600"})}),r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Transfer Successful!"}),r.jsxs("p",{className:"text-gray-500",children:[h(M.currency),z," has been sent to ",oe==null?void 0:oe.firstName," ",oe==null?void 0:oe.lastName]})]}):r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Send from Wallet"}),r.jsx("select",{value:M.id,onChange:Ne=>{const He=s==null?void 0:s.find(gt=>gt.id===Ne.target.value);He&&R(He)},className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500 bg-white",children:s==null?void 0:s.filter(Ne=>Ne.status==="ACTIVE").map(Ne=>r.jsxs("option",{value:Ne.id,children:[Ne.currency," Wallet - ",f(Ne.balance,Ne.currency)]},Ne.id))})]}),r.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[r.jsx("p",{className:"text-sm text-gray-500",children:"Available Balance"}),r.jsx("p",{className:"text-2xl font-bold text-gray-900",children:f(M.balance,M.currency)})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Send to (Email or Phone)"}),oe?r.jsxs("div",{className:"flex items-center justify-between p-3 bg-primary-50 border border-primary-200 rounded-lg",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-10 h-10 bg-primary-100 rounded-full flex items-center justify-center",children:r.jsx(br,{className:"w-5 h-5 text-primary-600"})}),r.jsxs("div",{children:[r.jsxs("p",{className:"font-medium text-gray-900",children:[oe.firstName," ",oe.lastName]}),r.jsx("p",{className:"text-sm text-gray-500",children:oe.email})]})]}),r.jsx("button",{onClick:()=>ie(null),className:"p-1 hover:bg-primary-100 rounded",children:r.jsx(Ct,{className:"w-4 h-4 text-gray-500"})})]}):r.jsxs("div",{className:"relative",children:[r.jsx(Nr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),r.jsx("input",{type:"text",value:ne,onChange:Ne=>{ce(Ne.target.value),ke(Ne.target.value)},className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"Search by email or phone..."}),ge&&r.jsx("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2",children:r.jsx("div",{className:"w-4 h-4 border-2 border-primary-600 border-t-transparent rounded-full animate-spin"})}),xe.length>0&&!oe&&r.jsx("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-200 rounded-lg shadow-lg max-h-48 overflow-y-auto",children:xe.map(Ne=>r.jsxs("button",{onClick:()=>{ie(Ne),ce(""),_e([])},className:"w-full flex items-center gap-3 p-3 hover:bg-gray-50 text-left",children:[r.jsx("div",{className:"w-8 h-8 bg-gray-100 rounded-full flex items-center justify-center",children:r.jsx(br,{className:"w-4 h-4 text-gray-500"})}),r.jsxs("div",{children:[r.jsxs("p",{className:"font-medium text-gray-900",children:[Ne.firstName," ",Ne.lastName]}),r.jsx("p",{className:"text-sm text-gray-500",children:Ne.email})]})]},Ne.id))})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Amount"}),r.jsxs("div",{className:"relative",children:[r.jsx("span",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-500",children:h(M.currency)}),r.jsx("input",{type:"number",min:"0",step:"0.01",value:z,onChange:Ne=>G(Ne.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"0.00"})]}),r.jsx("div",{className:"flex gap-2 mt-2",children:[10,25,50,100].map(Ne=>r.jsxs("button",{onClick:()=>G(Ne.toString()),className:"flex-1 px-2 py-1 text-sm bg-gray-100 hover:bg-gray-200 rounded text-gray-700",children:[h(M.currency),Ne]},Ne))})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Note (Optional)"}),r.jsx("input",{type:"text",value:te,onChange:Ne=>he(Ne.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"What's this for?"})]}),Q&&r.jsxs("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg flex items-center gap-2 text-red-700",children:[r.jsx(dt,{className:"w-4 h-4"}),r.jsx("span",{className:"text-sm",children:Q})]}),r.jsxs("div",{className:"flex gap-3 pt-4",children:[r.jsx(Oe,{variant:"outline",className:"flex-1",onClick:()=>{T(!1),le()},children:"Cancel"}),r.jsxs(Oe,{className:"flex-1",onClick:Ve,isLoading:i.isPending,disabled:!oe||!z||parseFloat(z)<=0,children:[r.jsx(Tn,{className:"w-4 h-4 mr-2"}),"Send ",h(M.currency),z||"0.00"]})]})]})]})}),A&&M&&r.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50 p-4",children:r.jsxs(se,{className:"w-full max-w-md",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:r.jsx(Aa,{className:"w-5 h-5 text-green-600"})}),r.jsxs("div",{children:[r.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Receive Money"}),r.jsx("p",{className:"text-sm text-gray-500",children:"Share your wallet details"})]})]}),r.jsx("button",{onClick:()=>P(!1),className:"p-2 hover:bg-gray-100 rounded-lg",children:r.jsx(Ct,{className:"w-5 h-5 text-gray-500"})})]}),r.jsxs("div",{className:"space-y-4",children:[t&&r.jsx("div",{className:"flex justify-center p-4 bg-gray-50 rounded-lg",children:r.jsx(Mq,{userId:t.id,walletId:M.id,type:"static",size:180,currency:M.currency})}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Your Wallet ID"}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("input",{type:"text",readOnly:!0,value:M.id,className:"flex-1 px-3 py-2 bg-gray-50 border border-gray-300 rounded-lg font-mono text-sm"}),r.jsx(Oe,{variant:"outline",onClick:()=>me(M.id),children:je?r.jsx(Ae,{className:"w-4 h-4 text-green-600"}):r.jsx(Pr,{className:"w-4 h-4"})})]})]}),r.jsx("p",{className:"text-sm text-gray-500 text-center",children:"Scan this QR code or share your wallet ID to receive money"}),r.jsx(Oe,{className:"w-full",onClick:()=>P(!1),children:"Done"})]})]})}),r.jsx(bq,{isOpen:N,onClose:()=>k(!1),onSuccess:()=>{k(!1),e("/pots")}})]})}function Wge(){const{data:e,isLoading:t}=r2(),{data:s}=mi(),[a,n]=p.useState(null);p.useEffect(()=>{cr.getDefaultCurrency().then(n)},[]);const i=(a==null?void 0:a.symbol)||"",o=dfe(),l=Kz(),c=Gz(),d=Hz(),[h,f]=p.useState(!1),[x,y]=p.useState(null),[v,w]=p.useState({walletId:"",type:"VIRTUAL",cardholderName:""}),N=async()=>{try{await o.mutateAsync(v),f(!1),w({walletId:"",type:"VIRTUAL",cardholderName:""})}catch(_){console.error("Failed to create card:",_)}},k=async _=>{try{_.status==="BLOCKED"?await c.mutateAsync(_.id):await l.mutateAsync(_.id)}catch(T){console.error("Failed to update card status:",T)}},C=async _=>{try{await d.mutateAsync(_)}catch(T){console.error("Failed to activate card:",T)}},E=(_,T)=>{const A=["from-blue-600 to-blue-800","from-purple-600 to-purple-800","from-indigo-600 to-indigo-800","from-teal-600 to-teal-800"];return _==="PHYSICAL"?"from-gray-700 to-gray-900":A[T%A.length]};return r.jsxs(dn,{children:[r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Cards"}),r.jsx("p",{className:"text-gray-500 mt-1",children:"Manage your virtual and physical cards"})]}),r.jsxs(Oe,{onClick:()=>f(!0),children:[r.jsx(sr,{className:"w-4 h-4 mr-2"}),"New Card"]})]}),t?r.jsx("div",{className:"text-center py-12",children:"Loading cards..."}):e&&e.length>0?r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:e.map((_,T)=>r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:fe("relative aspect-[1.586/1] rounded-xl p-6 text-white bg-gradient-to-br shadow-lg",E(_.type,T),_.status!=="ACTIVE"&&"opacity-60"),children:[_.status==="BLOCKED"&&r.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-50 rounded-xl flex items-center justify-center",children:r.jsx(Kr,{className:"w-12 h-12"})}),r.jsxs("div",{className:"flex justify-between items-start",children:[r.jsxs("div",{children:[r.jsxs("p",{className:"text-xs uppercase tracking-wider opacity-80",children:[_.type," Card"]}),r.jsx("p",{className:"text-sm mt-1 opacity-90",children:_.cardholderName})]}),r.jsx(lt,{className:"w-8 h-8"})]}),r.jsxs("div",{className:"absolute bottom-6 left-6 right-6",children:[r.jsx("p",{className:"text-lg tracking-widest font-mono",children:x===_.id?_.cardNumber:_.maskedNumber||"   "}),r.jsxs("div",{className:"flex justify-between mt-2",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-xs opacity-70",children:"Expires"}),r.jsxs("p",{className:"text-sm",children:[String(_.expiryMonth).padStart(2,"0"),"/",String(_.expiryYear).slice(-2)]})]}),r.jsxs("div",{className:"text-right",children:[r.jsx("p",{className:"text-xs opacity-70",children:"Status"}),r.jsx("p",{className:"text-sm",children:_.status})]})]})]})]}),r.jsx(se,{padding:"sm",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"text-sm",children:[r.jsx("p",{className:"text-gray-500",children:"Daily Limit"}),r.jsxs("p",{className:"font-medium",children:[i,_.dailyLimit.toLocaleString()]})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx(Oe,{variant:"ghost",size:"sm",onClick:()=>y(x===_.id?null:_.id),title:x===_.id?"Hide details":"Show details",children:x===_.id?r.jsx(Dn,{className:"w-4 h-4"}):r.jsx(ir,{className:"w-4 h-4"})}),_.status==="INACTIVE"?r.jsx(Oe,{variant:"outline",size:"sm",onClick:()=>C(_.id),isLoading:d.isPending,children:"Activate"}):r.jsx(Oe,{variant:"ghost",size:"sm",onClick:()=>k(_),title:_.status==="BLOCKED"?"Unblock":"Block",children:_.status==="BLOCKED"?r.jsx(Yy,{className:"w-4 h-4 text-green-500"}):r.jsx(Kr,{className:"w-4 h-4 text-red-500"})}),r.jsx(Oe,{variant:"ghost",size:"sm",children:r.jsx(Ih,{className:"w-4 h-4"})})]})]})})]},_.id))}):r.jsxs(se,{className:"text-center py-12",children:[r.jsx(lt,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),r.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No cards yet"}),r.jsx("p",{className:"text-gray-500 mb-4",children:"Create your first card to start making payments"}),r.jsxs(Oe,{onClick:()=>f(!0),children:[r.jsx(sr,{className:"w-4 h-4 mr-2"}),"Create Card"]})]})]}),h&&r.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:r.jsxs(se,{className:"w-full max-w-md",children:[r.jsx(pa,{children:r.jsx(ya,{children:"Create New Card"})}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Wallet"}),r.jsxs("select",{value:v.walletId,onChange:_=>w({...v,walletId:_.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",children:[r.jsx("option",{value:"",children:"Select a wallet"}),s==null?void 0:s.map(_=>r.jsxs("option",{value:_.id,children:[_.currency," Wallet - ",i,_.balance.toLocaleString()]},_.id))]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Card Type"}),r.jsxs("div",{className:"flex gap-4",children:[r.jsxs("label",{className:"flex items-center",children:[r.jsx("input",{type:"radio",name:"cardType",value:"VIRTUAL",checked:v.type==="VIRTUAL",onChange:()=>w({...v,type:"VIRTUAL"}),className:"mr-2"}),"Virtual"]}),r.jsxs("label",{className:"flex items-center",children:[r.jsx("input",{type:"radio",name:"cardType",value:"PHYSICAL",checked:v.type==="PHYSICAL",onChange:()=>w({...v,type:"PHYSICAL"}),className:"mr-2"}),"Physical"]})]})]}),r.jsx(Rh,{label:"Cardholder Name",value:v.cardholderName,onChange:_=>w({...v,cardholderName:_.target.value}),placeholder:"Name as it appears on card"}),r.jsxs("div",{className:"flex gap-3 pt-4",children:[r.jsx(Oe,{variant:"outline",className:"flex-1",onClick:()=>{f(!1),w({walletId:"",type:"VIRTUAL",cardholderName:""})},children:"Cancel"}),r.jsx(Oe,{className:"flex-1",onClick:N,isLoading:o.isPending,disabled:!v.walletId||!v.cardholderName,children:"Create Card"})]})]})]})})]})}function zge(){var H;const{user:e}=pt(),{data:t}=mi(),[s,a]=p.useState(""),[n,i]=p.useState(""),[o,l]=p.useState(1),[c,d]=p.useState(!1),[h,f]=p.useState(null),[x,y]=p.useState(""),[v,w]=p.useState(""),[N,k]=p.useState(!1),[C,E]=p.useState(!1),{data:_,isLoading:T}=nfe(s||((H=t==null?void 0:t[0])==null?void 0:H.id)||"",o,10),A=(_==null?void 0:_.data)||[],P=(_==null?void 0:_.totalPages)||1,M=K=>{switch(K){case"DEPOSIT":return r.jsx(Aa,{className:"w-5 h-5 text-green-600"});case"WITHDRAWAL":case"PAYMENT":return r.jsx(Rr,{className:"w-5 h-5 text-red-600"});case"TRANSFER":return r.jsx(Rr,{className:"w-5 h-5 text-blue-600"});case"REFUND":return r.jsx(Aa,{className:"w-5 h-5 text-purple-600"});default:return r.jsx(Rr,{className:"w-5 h-5 text-gray-600"})}},R=K=>{switch(K){case"DEPOSIT":return"bg-green-100";case"WITHDRAWAL":case"PAYMENT":return"bg-red-100";case"TRANSFER":return"bg-blue-100";case"REFUND":return"bg-purple-100";default:return"bg-gray-100"}},$=K=>{switch(K){case"DEPOSIT":case"REFUND":return"text-green-600";case"WITHDRAWAL":case"PAYMENT":return"text-red-600";case"TRANSFER":return"text-blue-600";default:return"text-gray-900"}},W=K=>{switch(K){case"DEPOSIT":case"REFUND":return"+";default:return"-"}},I=K=>new Date(K).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),B=A.filter(K=>{var V,z;return((V=K.description)==null?void 0:V.toLowerCase().includes(n.toLowerCase()))||((z=K.merchantName)==null?void 0:z.toLowerCase().includes(n.toLowerCase()))||K.type.toLowerCase().includes(n.toLowerCase())}),O=K=>["PAYMENT","PAYMENT_SENT","TRANSFER","WITHDRAWAL"].includes(K.type)&&K.status==="COMPLETED",F=K=>{f(K),y(""),w(""),E(!1),d(!0)},q=async()=>{if(!(!h||!x||!e)){k(!0);try{const{error:K}=await X.from("disputes").insert({transaction_id:h.id,user_id:e.id,status:"OPEN",reason:x,description:v,amount:Math.abs(h.amount),currency:h.currency||"SLE",metadata:{transaction_type:h.type,transaction_date:h.createdAt,merchant_name:h.merchantName,reference:h.reference}});if(K)throw K;await X.from("user_notifications").insert({user_id:e.id,type:"dispute_created",title:"Dispute Submitted",message:`Your dispute for ${h.currency||"SLE"} ${Math.abs(h.amount).toLocaleString()} has been submitted. We will review it within 24-48 hours.`,read:!1,metadata:{transaction_id:h.id,amount:Math.abs(h.amount),reason:x}}),E(!0)}catch(K){console.error("Error creating dispute:",K),alert(K.message||"Failed to submit dispute. Please try again.")}finally{k(!1)}}};return r.jsxs(dn,{children:[r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Transactions"}),r.jsx("p",{className:"text-gray-500 mt-1",children:"View your transaction history"})]}),r.jsxs(Oe,{variant:"outline",children:[r.jsx(gs,{className:"w-4 h-4 mr-2"}),"Export"]})]}),r.jsx(se,{padding:"sm",children:r.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[r.jsx("div",{className:"flex-1",children:r.jsxs("div",{className:"relative",children:[r.jsx(Nr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),r.jsx("input",{type:"text",placeholder:"Search transactions...",value:n,onChange:K=>i(K.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500"})]})}),r.jsx("div",{className:"w-full md:w-64",children:r.jsxs("select",{value:s,onChange:K=>{a(K.target.value),l(1)},className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",children:[r.jsx("option",{value:"",children:"All Wallets"}),t==null?void 0:t.map(K=>r.jsxs("option",{value:K.id,children:[K.currency," Wallet"]},K.id))]})}),r.jsxs(Oe,{variant:"outline",children:[r.jsx(el,{className:"w-4 h-4 mr-2"}),"Filter"]})]})}),r.jsx(se,{padding:"none",children:T?r.jsx("div",{className:"text-center py-12",children:"Loading transactions..."}):B.length>0?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"divide-y divide-gray-100",children:B.map(K=>r.jsxs("div",{className:"flex items-center justify-between p-4 hover:bg-gray-50 transition-colors",children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:fe("w-10 h-10 rounded-full flex items-center justify-center",R(K.type)),children:M(K.type)}),r.jsxs("div",{className:"ml-4",children:[r.jsx("p",{className:"text-sm font-medium text-gray-900",children:K.merchantName||K.description||K.type}),r.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-500",children:[r.jsx("span",{children:I(K.createdAt)}),r.jsx("span",{className:"w-1 h-1 bg-gray-300 rounded-full"}),r.jsx("span",{children:K.type}),K.merchantCategory&&r.jsxs(r.Fragment,{children:[r.jsx("span",{className:"w-1 h-1 bg-gray-300 rounded-full"}),r.jsx("span",{children:K.merchantCategory})]})]})]})]}),r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsxs("div",{className:"text-right",children:[r.jsxs("p",{className:fe("text-sm font-medium",$(K.type)),children:[W(K.type),"$",Math.abs(K.amount).toLocaleString("en-US",{minimumFractionDigits:2})]}),r.jsx("p",{className:fe("text-xs",K.status==="COMPLETED"&&"text-green-600",K.status==="PENDING"&&"text-yellow-600",K.status==="FAILED"&&"text-red-600",K.status==="REVERSED"&&"text-purple-600"),children:K.status})]}),O(K)&&r.jsx("button",{onClick:()=>F(K),className:"p-2 hover:bg-red-50 rounded-lg text-red-600 transition-colors",title:"Dispute Transaction",children:r.jsx(Tf,{className:"w-4 h-4"})})]})]},K.id))}),r.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-t border-gray-100",children:[r.jsxs("p",{className:"text-sm text-gray-500",children:["Page ",o," of ",P]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx(Oe,{variant:"outline",size:"sm",disabled:o===1,onClick:()=>l(o-1),children:"Previous"}),r.jsx(Oe,{variant:"outline",size:"sm",disabled:o===P,onClick:()=>l(o+1),children:"Next"})]})]})]}):r.jsx("div",{className:"text-center py-12",children:r.jsx("p",{className:"text-gray-500",children:"No transactions found"})})})]}),c&&h&&r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:r.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md",children:[r.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Ht,{className:"w-5 h-5 text-red-600"}),r.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Dispute Transaction"})]}),r.jsx("button",{onClick:()=>d(!1),className:"p-1 hover:bg-gray-100 rounded-lg",children:r.jsx(Ct,{className:"w-5 h-5 text-gray-500"})})]}),C?r.jsxs("div",{className:"p-6 text-center",children:[r.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:r.jsx(Tf,{className:"w-8 h-8 text-green-600"})}),r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Dispute Submitted"}),r.jsx("p",{className:"text-gray-500 mb-6",children:"Your dispute has been submitted successfully. Our team will review it within 24-48 hours and contact you with an update."}),r.jsx(Oe,{onClick:()=>d(!1),className:"w-full",children:"Close"})]}):r.jsxs("div",{className:"p-4 space-y-4",children:[r.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"text-sm text-gray-500",children:"Transaction"}),r.jsx("span",{className:"text-sm font-medium",children:h.merchantName||h.description||h.type})]}),r.jsxs("div",{className:"flex justify-between items-center mt-1",children:[r.jsx("span",{className:"text-sm text-gray-500",children:"Amount"}),r.jsxs("span",{className:"text-sm font-medium text-red-600",children:["$",Math.abs(h.amount).toLocaleString("en-US",{minimumFractionDigits:2})]})]}),r.jsxs("div",{className:"flex justify-between items-center mt-1",children:[r.jsx("span",{className:"text-sm text-gray-500",children:"Date"}),r.jsx("span",{className:"text-sm font-medium",children:I(h.createdAt)})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Reason for Dispute *"}),r.jsxs("select",{value:x,onChange:K=>y(K.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",children:[r.jsx("option",{value:"",children:"Select a reason"}),r.jsx("option",{value:"unauthorized",children:"Unauthorized Transaction"}),r.jsx("option",{value:"not_received",children:"Goods/Service Not Received"}),r.jsx("option",{value:"wrong_amount",children:"Wrong Amount Charged"}),r.jsx("option",{value:"duplicate",children:"Duplicate Charge"}),r.jsx("option",{value:"fraud",children:"Suspected Fraud"}),r.jsx("option",{value:"other",children:"Other"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Additional Details"}),r.jsx("textarea",{value:v,onChange:K=>w(K.target.value),placeholder:"Please provide any additional information about this dispute...",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",rows:3})]}),r.jsx("div",{className:"p-3 bg-yellow-50 border border-yellow-200 rounded-lg",children:r.jsx("p",{className:"text-sm text-yellow-800",children:"Please note: Filing a false dispute may result in account suspension. Only file a dispute if you have a legitimate concern."})}),r.jsxs("div",{className:"flex gap-3 pt-2",children:[r.jsx(Oe,{variant:"outline",className:"flex-1",onClick:()=>d(!1),disabled:N,children:"Cancel"}),r.jsx(Oe,{className:"flex-1 bg-red-600 hover:bg-red-700",onClick:q,disabled:!x||N,children:N?r.jsxs(r.Fragment,{children:[r.jsx(Ke,{className:"w-4 h-4 animate-spin mr-2"}),"Submitting..."]}):"Submit Dispute"})]})]})]})})]})}const qge=e=>{const t=["bg-red-500","bg-orange-500","bg-amber-500","bg-yellow-500","bg-lime-500","bg-green-500","bg-emerald-500","bg-teal-500","bg-cyan-500","bg-sky-500","bg-blue-500","bg-indigo-500","bg-violet-500","bg-purple-500","bg-fuchsia-500","bg-pink-500","bg-rose-500"];let s=0;for(let a=0;a<e.length;a++)s=e.charCodeAt(a)+((s<<5)-s);return t[Math.abs(s)%t.length]},OM={xs:"w-6 h-6 text-xs",sm:"w-8 h-8 text-sm",md:"w-10 h-10 text-sm",lg:"w-12 h-12 text-base",xl:"w-16 h-16 text-lg"};function S3({firstName:e="",lastName:t="",profilePicture:s,size:a="md",className:n}){const i=`${e.charAt(0)}${t.charAt(0)}`.toUpperCase(),o=`${e} ${t}`.trim(),l=qge(o||"Unknown");return s?r.jsx("img",{src:s,alt:o,className:fe("rounded-full object-cover border-2 border-white shadow-sm",OM[a],n),onError:c=>{var d;c.currentTarget.style.display="none",(d=c.currentTarget.nextElementSibling)==null||d.classList.remove("hidden")}}):r.jsx("div",{className:fe("rounded-full flex items-center justify-center text-white font-semibold shadow-sm",OM[a],l,n),title:o,children:i||"?"})}const C3="ABCDEFGHIJKLMNOPQRSTUVWXYZ234567";function Hge(e=20){const t=new Uint8Array(e);return crypto.getRandomValues(t),Kge(t)}function Kge(e){let t="",s=0,a=0;for(let n=0;n<e.length;n++)for(a=a<<8|e[n],s+=8;s>=5;)t+=C3[a>>>s-5&31],s-=5;return s>0&&(t+=C3[a<<5-s&31]),t}function Gge(e){const t=e.toUpperCase().replace(/[^A-Z2-7]/g,""),s=new Uint8Array(Math.floor(t.length*5/8));let a=0,n=0,i=0;for(let o=0;o<t.length;o++){const l=C3.indexOf(t[o]);l!==-1&&(n=n<<5|l,a+=5,a>=8&&(s[i++]=n>>>a-8&255,a-=8))}return s.slice(0,i)}async function Yge(e,t){const s=await crypto.subtle.importKey("raw",e.buffer,{name:"HMAC",hash:"SHA-1"},!1,["sign"]),a=await crypto.subtle.sign("HMAC",s,t.buffer);return new Uint8Array(a)}function Xge(e){const t=new Uint8Array(8);for(let s=7;s>=0;s--)t[s]=e&255,e=Math.floor(e/256);return t}async function Qge(e,t,s=30,a=1){const n=t.replace(/\s/g,"");for(let i=-a;i<=a;i++){const o=Math.floor(Date.now()/1e3/s)+i,l=Gge(e),c=Xge(o),d=await Yge(l,c),h=d[d.length-1]&15;if((((d[h]&127)<<24|(d[h+1]&255)<<16|(d[h+2]&255)<<8|d[h+3]&255)%1e6).toString().padStart(6,"0")===n)return!0}return!1}function Zge(e,t,s="Peeap"){const a=encodeURIComponent(s),n=encodeURIComponent(t);return`otpauth://totp/${a}:${n}?secret=${e}&issuer=${a}&algorithm=SHA1&digits=6&period=30`}var nb={},Jge=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then},Lq={},po={};let xA;const epe=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];po.getSymbolSize=function(t){if(!t)throw new Error('"version" cannot be null or undefined');if(t<1||t>40)throw new Error('"version" should be in range from 1 to 40');return t*4+17};po.getSymbolTotalCodewords=function(t){return epe[t]};po.getBCHDigit=function(e){let t=0;for(;e!==0;)t++,e>>>=1;return t};po.setToSJISFunction=function(t){if(typeof t!="function")throw new Error('"toSJISFunc" is not a valid function.');xA=t};po.isKanjiModeEnabled=function(){return typeof xA<"u"};po.toSJIS=function(t){return xA(t)};var o2={};(function(e){e.L={bit:1},e.M={bit:0},e.Q={bit:3},e.H={bit:2};function t(s){if(typeof s!="string")throw new Error("Param is not a string");switch(s.toLowerCase()){case"l":case"low":return e.L;case"m":case"medium":return e.M;case"q":case"quartile":return e.Q;case"h":case"high":return e.H;default:throw new Error("Unknown EC Level: "+s)}}e.isValid=function(a){return a&&typeof a.bit<"u"&&a.bit>=0&&a.bit<4},e.from=function(a,n){if(e.isValid(a))return a;try{return t(a)}catch{return n}}})(o2);function Fq(){this.buffer=[],this.length=0}Fq.prototype={get:function(e){const t=Math.floor(e/8);return(this.buffer[t]>>>7-e%8&1)===1},put:function(e,t){for(let s=0;s<t;s++)this.putBit((e>>>t-s-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(e){const t=Math.floor(this.length/8);this.buffer.length<=t&&this.buffer.push(0),e&&(this.buffer[t]|=128>>>this.length%8),this.length++}};var tpe=Fq;function ib(e){if(!e||e<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=e,this.data=new Uint8Array(e*e),this.reservedBit=new Uint8Array(e*e)}ib.prototype.set=function(e,t,s,a){const n=e*this.size+t;this.data[n]=s,a&&(this.reservedBit[n]=!0)};ib.prototype.get=function(e,t){return this.data[e*this.size+t]};ib.prototype.xor=function(e,t,s){this.data[e*this.size+t]^=s};ib.prototype.isReserved=function(e,t){return this.reservedBit[e*this.size+t]};var rpe=ib,Bq={};(function(e){const t=po.getSymbolSize;e.getRowColCoords=function(a){if(a===1)return[];const n=Math.floor(a/7)+2,i=t(a),o=i===145?26:Math.ceil((i-13)/(2*n-2))*2,l=[i-7];for(let c=1;c<n-1;c++)l[c]=l[c-1]-o;return l.push(6),l.reverse()},e.getPositions=function(a){const n=[],i=e.getRowColCoords(a),o=i.length;for(let l=0;l<o;l++)for(let c=0;c<o;c++)l===0&&c===0||l===0&&c===o-1||l===o-1&&c===0||n.push([i[l],i[c]]);return n}})(Bq);var $q={};const spe=po.getSymbolSize,RM=7;$q.getPositions=function(t){const s=spe(t);return[[0,0],[s-RM,0],[0,s-RM]]};var Uq={};(function(e){e.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const t={N1:3,N2:3,N3:40,N4:10};e.isValid=function(n){return n!=null&&n!==""&&!isNaN(n)&&n>=0&&n<=7},e.from=function(n){return e.isValid(n)?parseInt(n,10):void 0},e.getPenaltyN1=function(n){const i=n.size;let o=0,l=0,c=0,d=null,h=null;for(let f=0;f<i;f++){l=c=0,d=h=null;for(let x=0;x<i;x++){let y=n.get(f,x);y===d?l++:(l>=5&&(o+=t.N1+(l-5)),d=y,l=1),y=n.get(x,f),y===h?c++:(c>=5&&(o+=t.N1+(c-5)),h=y,c=1)}l>=5&&(o+=t.N1+(l-5)),c>=5&&(o+=t.N1+(c-5))}return o},e.getPenaltyN2=function(n){const i=n.size;let o=0;for(let l=0;l<i-1;l++)for(let c=0;c<i-1;c++){const d=n.get(l,c)+n.get(l,c+1)+n.get(l+1,c)+n.get(l+1,c+1);(d===4||d===0)&&o++}return o*t.N2},e.getPenaltyN3=function(n){const i=n.size;let o=0,l=0,c=0;for(let d=0;d<i;d++){l=c=0;for(let h=0;h<i;h++)l=l<<1&2047|n.get(d,h),h>=10&&(l===1488||l===93)&&o++,c=c<<1&2047|n.get(h,d),h>=10&&(c===1488||c===93)&&o++}return o*t.N3},e.getPenaltyN4=function(n){let i=0;const o=n.data.length;for(let c=0;c<o;c++)i+=n.data[c];return Math.abs(Math.ceil(i*100/o/5)-10)*t.N4};function s(a,n,i){switch(a){case e.Patterns.PATTERN000:return(n+i)%2===0;case e.Patterns.PATTERN001:return n%2===0;case e.Patterns.PATTERN010:return i%3===0;case e.Patterns.PATTERN011:return(n+i)%3===0;case e.Patterns.PATTERN100:return(Math.floor(n/2)+Math.floor(i/3))%2===0;case e.Patterns.PATTERN101:return n*i%2+n*i%3===0;case e.Patterns.PATTERN110:return(n*i%2+n*i%3)%2===0;case e.Patterns.PATTERN111:return(n*i%3+(n+i)%2)%2===0;default:throw new Error("bad maskPattern:"+a)}}e.applyMask=function(n,i){const o=i.size;for(let l=0;l<o;l++)for(let c=0;c<o;c++)i.isReserved(c,l)||i.xor(c,l,s(n,c,l))},e.getBestMask=function(n,i){const o=Object.keys(e.Patterns).length;let l=0,c=1/0;for(let d=0;d<o;d++){i(d),e.applyMask(d,n);const h=e.getPenaltyN1(n)+e.getPenaltyN2(n)+e.getPenaltyN3(n)+e.getPenaltyN4(n);e.applyMask(d,n),h<c&&(c=h,l=d)}return l}})(Uq);var l2={};const mu=o2,Pv=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],Tv=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];l2.getBlocksCount=function(t,s){switch(s){case mu.L:return Pv[(t-1)*4+0];case mu.M:return Pv[(t-1)*4+1];case mu.Q:return Pv[(t-1)*4+2];case mu.H:return Pv[(t-1)*4+3];default:return}};l2.getTotalCodewordsCount=function(t,s){switch(s){case mu.L:return Tv[(t-1)*4+0];case mu.M:return Tv[(t-1)*4+1];case mu.Q:return Tv[(t-1)*4+2];case mu.H:return Tv[(t-1)*4+3];default:return}};var Vq={},c2={};const mp=new Uint8Array(512),nj=new Uint8Array(256);(function(){let t=1;for(let s=0;s<255;s++)mp[s]=t,nj[t]=s,t<<=1,t&256&&(t^=285);for(let s=255;s<512;s++)mp[s]=mp[s-255]})();c2.log=function(t){if(t<1)throw new Error("log("+t+")");return nj[t]};c2.exp=function(t){return mp[t]};c2.mul=function(t,s){return t===0||s===0?0:mp[nj[t]+nj[s]]};(function(e){const t=c2;e.mul=function(a,n){const i=new Uint8Array(a.length+n.length-1);for(let o=0;o<a.length;o++)for(let l=0;l<n.length;l++)i[o+l]^=t.mul(a[o],n[l]);return i},e.mod=function(a,n){let i=new Uint8Array(a);for(;i.length-n.length>=0;){const o=i[0];for(let c=0;c<n.length;c++)i[c]^=t.mul(n[c],o);let l=0;for(;l<i.length&&i[l]===0;)l++;i=i.slice(l)}return i},e.generateECPolynomial=function(a){let n=new Uint8Array([1]);for(let i=0;i<a;i++)n=e.mul(n,new Uint8Array([1,t.exp(i)]));return n}})(Vq);const Wq=Vq;function gA(e){this.genPoly=void 0,this.degree=e,this.degree&&this.initialize(this.degree)}gA.prototype.initialize=function(t){this.degree=t,this.genPoly=Wq.generateECPolynomial(this.degree)};gA.prototype.encode=function(t){if(!this.genPoly)throw new Error("Encoder not initialized");const s=new Uint8Array(t.length+this.degree);s.set(t);const a=Wq.mod(s,this.genPoly),n=this.degree-a.length;if(n>0){const i=new Uint8Array(this.degree);return i.set(a,n),i}return a};var ape=gA,zq={},Yu={},pA={};pA.isValid=function(t){return!isNaN(t)&&t>=1&&t<=40};var vc={};const qq="[0-9]+",npe="[A-Z $%*+\\-./:]+";let ny="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";ny=ny.replace(/u/g,"\\u");const ipe="(?:(?![A-Z0-9 $%*+\\-./:]|"+ny+`)(?:.|[\r
]))+`;vc.KANJI=new RegExp(ny,"g");vc.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g");vc.BYTE=new RegExp(ipe,"g");vc.NUMERIC=new RegExp(qq,"g");vc.ALPHANUMERIC=new RegExp(npe,"g");const ope=new RegExp("^"+ny+"$"),lpe=new RegExp("^"+qq+"$"),cpe=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");vc.testKanji=function(t){return ope.test(t)};vc.testNumeric=function(t){return lpe.test(t)};vc.testAlphanumeric=function(t){return cpe.test(t)};(function(e){const t=pA,s=vc;e.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},e.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},e.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},e.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},e.MIXED={bit:-1},e.getCharCountIndicator=function(i,o){if(!i.ccBits)throw new Error("Invalid mode: "+i);if(!t.isValid(o))throw new Error("Invalid version: "+o);return o>=1&&o<10?i.ccBits[0]:o<27?i.ccBits[1]:i.ccBits[2]},e.getBestModeForData=function(i){return s.testNumeric(i)?e.NUMERIC:s.testAlphanumeric(i)?e.ALPHANUMERIC:s.testKanji(i)?e.KANJI:e.BYTE},e.toString=function(i){if(i&&i.id)return i.id;throw new Error("Invalid mode")},e.isValid=function(i){return i&&i.bit&&i.ccBits};function a(n){if(typeof n!="string")throw new Error("Param is not a string");switch(n.toLowerCase()){case"numeric":return e.NUMERIC;case"alphanumeric":return e.ALPHANUMERIC;case"kanji":return e.KANJI;case"byte":return e.BYTE;default:throw new Error("Unknown mode: "+n)}}e.from=function(i,o){if(e.isValid(i))return i;try{return a(i)}catch{return o}}})(Yu);(function(e){const t=po,s=l2,a=o2,n=Yu,i=pA,o=7973,l=t.getBCHDigit(o);function c(x,y,v){for(let w=1;w<=40;w++)if(y<=e.getCapacity(w,v,x))return w}function d(x,y){return n.getCharCountIndicator(x,y)+4}function h(x,y){let v=0;return x.forEach(function(w){const N=d(w.mode,y);v+=N+w.getBitsLength()}),v}function f(x,y){for(let v=1;v<=40;v++)if(h(x,v)<=e.getCapacity(v,y,n.MIXED))return v}e.from=function(y,v){return i.isValid(y)?parseInt(y,10):v},e.getCapacity=function(y,v,w){if(!i.isValid(y))throw new Error("Invalid QR Code version");typeof w>"u"&&(w=n.BYTE);const N=t.getSymbolTotalCodewords(y),k=s.getTotalCodewordsCount(y,v),C=(N-k)*8;if(w===n.MIXED)return C;const E=C-d(w,y);switch(w){case n.NUMERIC:return Math.floor(E/10*3);case n.ALPHANUMERIC:return Math.floor(E/11*2);case n.KANJI:return Math.floor(E/13);case n.BYTE:default:return Math.floor(E/8)}},e.getBestVersionForData=function(y,v){let w;const N=a.from(v,a.M);if(Array.isArray(y)){if(y.length>1)return f(y,N);if(y.length===0)return 1;w=y[0]}else w=y;return c(w.mode,w.getLength(),N)},e.getEncodedBits=function(y){if(!i.isValid(y)||y<7)throw new Error("Invalid QR Code version");let v=y<<12;for(;t.getBCHDigit(v)-l>=0;)v^=o<<t.getBCHDigit(v)-l;return y<<12|v}})(zq);var Hq={};const _3=po,Kq=1335,dpe=21522,MM=_3.getBCHDigit(Kq);Hq.getEncodedBits=function(t,s){const a=t.bit<<3|s;let n=a<<10;for(;_3.getBCHDigit(n)-MM>=0;)n^=Kq<<_3.getBCHDigit(n)-MM;return(a<<10|n)^dpe};var Gq={};const upe=Yu;function $f(e){this.mode=upe.NUMERIC,this.data=e.toString()}$f.getBitsLength=function(t){return 10*Math.floor(t/3)+(t%3?t%3*3+1:0)};$f.prototype.getLength=function(){return this.data.length};$f.prototype.getBitsLength=function(){return $f.getBitsLength(this.data.length)};$f.prototype.write=function(t){let s,a,n;for(s=0;s+3<=this.data.length;s+=3)a=this.data.substr(s,3),n=parseInt(a,10),t.put(n,10);const i=this.data.length-s;i>0&&(a=this.data.substr(s),n=parseInt(a,10),t.put(n,i*3+1))};var hpe=$f;const mpe=Yu,yS=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function Uf(e){this.mode=mpe.ALPHANUMERIC,this.data=e}Uf.getBitsLength=function(t){return 11*Math.floor(t/2)+6*(t%2)};Uf.prototype.getLength=function(){return this.data.length};Uf.prototype.getBitsLength=function(){return Uf.getBitsLength(this.data.length)};Uf.prototype.write=function(t){let s;for(s=0;s+2<=this.data.length;s+=2){let a=yS.indexOf(this.data[s])*45;a+=yS.indexOf(this.data[s+1]),t.put(a,11)}this.data.length%2&&t.put(yS.indexOf(this.data[s]),6)};var fpe=Uf;const xpe=Yu;function Vf(e){this.mode=xpe.BYTE,typeof e=="string"?this.data=new TextEncoder().encode(e):this.data=new Uint8Array(e)}Vf.getBitsLength=function(t){return t*8};Vf.prototype.getLength=function(){return this.data.length};Vf.prototype.getBitsLength=function(){return Vf.getBitsLength(this.data.length)};Vf.prototype.write=function(e){for(let t=0,s=this.data.length;t<s;t++)e.put(this.data[t],8)};var gpe=Vf;const ppe=Yu,ype=po;function Wf(e){this.mode=ppe.KANJI,this.data=e}Wf.getBitsLength=function(t){return t*13};Wf.prototype.getLength=function(){return this.data.length};Wf.prototype.getBitsLength=function(){return Wf.getBitsLength(this.data.length)};Wf.prototype.write=function(e){let t;for(t=0;t<this.data.length;t++){let s=ype.toSJIS(this.data[t]);if(s>=33088&&s<=40956)s-=33088;else if(s>=57408&&s<=60351)s-=49472;else throw new Error("Invalid SJIS character: "+this.data[t]+`
Make sure your charset is UTF-8`);s=(s>>>8&255)*192+(s&255),e.put(s,13)}};var bpe=Wf,Yq={exports:{}};(function(e){var t={single_source_shortest_paths:function(s,a,n){var i={},o={};o[a]=0;var l=t.PriorityQueue.make();l.push(a,0);for(var c,d,h,f,x,y,v,w,N;!l.empty();){c=l.pop(),d=c.value,f=c.cost,x=s[d]||{};for(h in x)x.hasOwnProperty(h)&&(y=x[h],v=f+y,w=o[h],N=typeof o[h]>"u",(N||w>v)&&(o[h]=v,l.push(h,v),i[h]=d))}if(typeof n<"u"&&typeof o[n]>"u"){var k=["Could not find a path from ",a," to ",n,"."].join("");throw new Error(k)}return i},extract_shortest_path_from_predecessor_list:function(s,a){for(var n=[],i=a;i;)n.push(i),s[i],i=s[i];return n.reverse(),n},find_path:function(s,a,n){var i=t.single_source_shortest_paths(s,a,n);return t.extract_shortest_path_from_predecessor_list(i,n)},PriorityQueue:{make:function(s){var a=t.PriorityQueue,n={},i;s=s||{};for(i in a)a.hasOwnProperty(i)&&(n[i]=a[i]);return n.queue=[],n.sorter=s.sorter||a.default_sorter,n},default_sorter:function(s,a){return s.cost-a.cost},push:function(s,a){var n={value:s,cost:a};this.queue.push(n),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};e.exports=t})(Yq);var vpe=Yq.exports;(function(e){const t=Yu,s=hpe,a=fpe,n=gpe,i=bpe,o=vc,l=po,c=vpe;function d(k){return unescape(encodeURIComponent(k)).length}function h(k,C,E){const _=[];let T;for(;(T=k.exec(E))!==null;)_.push({data:T[0],index:T.index,mode:C,length:T[0].length});return _}function f(k){const C=h(o.NUMERIC,t.NUMERIC,k),E=h(o.ALPHANUMERIC,t.ALPHANUMERIC,k);let _,T;return l.isKanjiModeEnabled()?(_=h(o.BYTE,t.BYTE,k),T=h(o.KANJI,t.KANJI,k)):(_=h(o.BYTE_KANJI,t.BYTE,k),T=[]),C.concat(E,_,T).sort(function(P,M){return P.index-M.index}).map(function(P){return{data:P.data,mode:P.mode,length:P.length}})}function x(k,C){switch(C){case t.NUMERIC:return s.getBitsLength(k);case t.ALPHANUMERIC:return a.getBitsLength(k);case t.KANJI:return i.getBitsLength(k);case t.BYTE:return n.getBitsLength(k)}}function y(k){return k.reduce(function(C,E){const _=C.length-1>=0?C[C.length-1]:null;return _&&_.mode===E.mode?(C[C.length-1].data+=E.data,C):(C.push(E),C)},[])}function v(k){const C=[];for(let E=0;E<k.length;E++){const _=k[E];switch(_.mode){case t.NUMERIC:C.push([_,{data:_.data,mode:t.ALPHANUMERIC,length:_.length},{data:_.data,mode:t.BYTE,length:_.length}]);break;case t.ALPHANUMERIC:C.push([_,{data:_.data,mode:t.BYTE,length:_.length}]);break;case t.KANJI:C.push([_,{data:_.data,mode:t.BYTE,length:d(_.data)}]);break;case t.BYTE:C.push([{data:_.data,mode:t.BYTE,length:d(_.data)}])}}return C}function w(k,C){const E={},_={start:{}};let T=["start"];for(let A=0;A<k.length;A++){const P=k[A],M=[];for(let R=0;R<P.length;R++){const $=P[R],W=""+A+R;M.push(W),E[W]={node:$,lastCount:0},_[W]={};for(let I=0;I<T.length;I++){const B=T[I];E[B]&&E[B].node.mode===$.mode?(_[B][W]=x(E[B].lastCount+$.length,$.mode)-x(E[B].lastCount,$.mode),E[B].lastCount+=$.length):(E[B]&&(E[B].lastCount=$.length),_[B][W]=x($.length,$.mode)+4+t.getCharCountIndicator($.mode,C))}}T=M}for(let A=0;A<T.length;A++)_[T[A]].end=0;return{map:_,table:E}}function N(k,C){let E;const _=t.getBestModeForData(k);if(E=t.from(C,_),E!==t.BYTE&&E.bit<_.bit)throw new Error('"'+k+'" cannot be encoded with mode '+t.toString(E)+`.
 Suggested mode is: `+t.toString(_));switch(E===t.KANJI&&!l.isKanjiModeEnabled()&&(E=t.BYTE),E){case t.NUMERIC:return new s(k);case t.ALPHANUMERIC:return new a(k);case t.KANJI:return new i(k);case t.BYTE:return new n(k)}}e.fromArray=function(C){return C.reduce(function(E,_){return typeof _=="string"?E.push(N(_,null)):_.data&&E.push(N(_.data,_.mode)),E},[])},e.fromString=function(C,E){const _=f(C,l.isKanjiModeEnabled()),T=v(_),A=w(T,E),P=c.find_path(A.map,"start","end"),M=[];for(let R=1;R<P.length-1;R++)M.push(A.table[P[R]].node);return e.fromArray(y(M))},e.rawSplit=function(C){return e.fromArray(f(C,l.isKanjiModeEnabled()))}})(Gq);const d2=po,bS=o2,wpe=tpe,jpe=rpe,Npe=Bq,kpe=$q,E3=Uq,A3=l2,Spe=ape,ij=zq,Cpe=Hq,_pe=Yu,vS=Gq;function Epe(e,t){const s=e.size,a=kpe.getPositions(t);for(let n=0;n<a.length;n++){const i=a[n][0],o=a[n][1];for(let l=-1;l<=7;l++)if(!(i+l<=-1||s<=i+l))for(let c=-1;c<=7;c++)o+c<=-1||s<=o+c||(l>=0&&l<=6&&(c===0||c===6)||c>=0&&c<=6&&(l===0||l===6)||l>=2&&l<=4&&c>=2&&c<=4?e.set(i+l,o+c,!0,!0):e.set(i+l,o+c,!1,!0))}}function Ape(e){const t=e.size;for(let s=8;s<t-8;s++){const a=s%2===0;e.set(s,6,a,!0),e.set(6,s,a,!0)}}function Ppe(e,t){const s=Npe.getPositions(t);for(let a=0;a<s.length;a++){const n=s[a][0],i=s[a][1];for(let o=-2;o<=2;o++)for(let l=-2;l<=2;l++)o===-2||o===2||l===-2||l===2||o===0&&l===0?e.set(n+o,i+l,!0,!0):e.set(n+o,i+l,!1,!0)}}function Tpe(e,t){const s=e.size,a=ij.getEncodedBits(t);let n,i,o;for(let l=0;l<18;l++)n=Math.floor(l/3),i=l%3+s-8-3,o=(a>>l&1)===1,e.set(n,i,o,!0),e.set(i,n,o,!0)}function wS(e,t,s){const a=e.size,n=Cpe.getEncodedBits(t,s);let i,o;for(i=0;i<15;i++)o=(n>>i&1)===1,i<6?e.set(i,8,o,!0):i<8?e.set(i+1,8,o,!0):e.set(a-15+i,8,o,!0),i<8?e.set(8,a-i-1,o,!0):i<9?e.set(8,15-i-1+1,o,!0):e.set(8,15-i-1,o,!0);e.set(a-8,8,1,!0)}function Ipe(e,t){const s=e.size;let a=-1,n=s-1,i=7,o=0;for(let l=s-1;l>0;l-=2)for(l===6&&l--;;){for(let c=0;c<2;c++)if(!e.isReserved(n,l-c)){let d=!1;o<t.length&&(d=(t[o]>>>i&1)===1),e.set(n,l-c,d),i--,i===-1&&(o++,i=7)}if(n+=a,n<0||s<=n){n-=a,a=-a;break}}}function Dpe(e,t,s){const a=new wpe;s.forEach(function(c){a.put(c.mode.bit,4),a.put(c.getLength(),_pe.getCharCountIndicator(c.mode,e)),c.write(a)});const n=d2.getSymbolTotalCodewords(e),i=A3.getTotalCodewordsCount(e,t),o=(n-i)*8;for(a.getLengthInBits()+4<=o&&a.put(0,4);a.getLengthInBits()%8!==0;)a.putBit(0);const l=(o-a.getLengthInBits())/8;for(let c=0;c<l;c++)a.put(c%2?17:236,8);return Ope(a,e,t)}function Ope(e,t,s){const a=d2.getSymbolTotalCodewords(t),n=A3.getTotalCodewordsCount(t,s),i=a-n,o=A3.getBlocksCount(t,s),l=a%o,c=o-l,d=Math.floor(a/o),h=Math.floor(i/o),f=h+1,x=d-h,y=new Spe(x);let v=0;const w=new Array(o),N=new Array(o);let k=0;const C=new Uint8Array(e.buffer);for(let P=0;P<o;P++){const M=P<c?h:f;w[P]=C.slice(v,v+M),N[P]=y.encode(w[P]),v+=M,k=Math.max(k,M)}const E=new Uint8Array(a);let _=0,T,A;for(T=0;T<k;T++)for(A=0;A<o;A++)T<w[A].length&&(E[_++]=w[A][T]);for(T=0;T<x;T++)for(A=0;A<o;A++)E[_++]=N[A][T];return E}function Rpe(e,t,s,a){let n;if(Array.isArray(e))n=vS.fromArray(e);else if(typeof e=="string"){let d=t;if(!d){const h=vS.rawSplit(e);d=ij.getBestVersionForData(h,s)}n=vS.fromString(e,d||40)}else throw new Error("Invalid data");const i=ij.getBestVersionForData(n,s);if(!i)throw new Error("The amount of data is too big to be stored in a QR Code");if(!t)t=i;else if(t<i)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+i+`.
`);const o=Dpe(t,s,n),l=d2.getSymbolSize(t),c=new jpe(l);return Epe(c,t),Ape(c),Ppe(c,t),wS(c,s,0),t>=7&&Tpe(c,t),Ipe(c,o),isNaN(a)&&(a=E3.getBestMask(c,wS.bind(null,c,s))),E3.applyMask(a,c),wS(c,s,a),{modules:c,version:t,errorCorrectionLevel:s,maskPattern:a,segments:n}}Lq.create=function(t,s){if(typeof t>"u"||t==="")throw new Error("No input text");let a=bS.M,n,i;return typeof s<"u"&&(a=bS.from(s.errorCorrectionLevel,bS.M),n=ij.from(s.version),i=E3.from(s.maskPattern),s.toSJISFunc&&d2.setToSJISFunction(s.toSJISFunc)),Rpe(t,n,a,i)};var Xq={},yA={};(function(e){function t(s){if(typeof s=="number"&&(s=s.toString()),typeof s!="string")throw new Error("Color should be defined as hex string");let a=s.slice().replace("#","").split("");if(a.length<3||a.length===5||a.length>8)throw new Error("Invalid hex color: "+s);(a.length===3||a.length===4)&&(a=Array.prototype.concat.apply([],a.map(function(i){return[i,i]}))),a.length===6&&a.push("F","F");const n=parseInt(a.join(""),16);return{r:n>>24&255,g:n>>16&255,b:n>>8&255,a:n&255,hex:"#"+a.slice(0,6).join("")}}e.getOptions=function(a){a||(a={}),a.color||(a.color={});const n=typeof a.margin>"u"||a.margin===null||a.margin<0?4:a.margin,i=a.width&&a.width>=21?a.width:void 0,o=a.scale||4;return{width:i,scale:i?4:o,margin:n,color:{dark:t(a.color.dark||"#000000ff"),light:t(a.color.light||"#ffffffff")},type:a.type,rendererOpts:a.rendererOpts||{}}},e.getScale=function(a,n){return n.width&&n.width>=a+n.margin*2?n.width/(a+n.margin*2):n.scale},e.getImageWidth=function(a,n){const i=e.getScale(a,n);return Math.floor((a+n.margin*2)*i)},e.qrToImageData=function(a,n,i){const o=n.modules.size,l=n.modules.data,c=e.getScale(o,i),d=Math.floor((o+i.margin*2)*c),h=i.margin*c,f=[i.color.light,i.color.dark];for(let x=0;x<d;x++)for(let y=0;y<d;y++){let v=(x*d+y)*4,w=i.color.light;if(x>=h&&y>=h&&x<d-h&&y<d-h){const N=Math.floor((x-h)/c),k=Math.floor((y-h)/c);w=f[l[N*o+k]?1:0]}a[v++]=w.r,a[v++]=w.g,a[v++]=w.b,a[v]=w.a}}})(yA);(function(e){const t=yA;function s(n,i,o){n.clearRect(0,0,i.width,i.height),i.style||(i.style={}),i.height=o,i.width=o,i.style.height=o+"px",i.style.width=o+"px"}function a(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}e.render=function(i,o,l){let c=l,d=o;typeof c>"u"&&(!o||!o.getContext)&&(c=o,o=void 0),o||(d=a()),c=t.getOptions(c);const h=t.getImageWidth(i.modules.size,c),f=d.getContext("2d"),x=f.createImageData(h,h);return t.qrToImageData(x.data,i,c),s(f,d,h),f.putImageData(x,0,0),d},e.renderToDataURL=function(i,o,l){let c=l;typeof c>"u"&&(!o||!o.getContext)&&(c=o,o=void 0),c||(c={});const d=e.render(i,o,c),h=c.type||"image/png",f=c.rendererOpts||{};return d.toDataURL(h,f.quality)}})(Xq);var Qq={};const Mpe=yA;function LM(e,t){const s=e.a/255,a=t+'="'+e.hex+'"';return s<1?a+" "+t+'-opacity="'+s.toFixed(2).slice(1)+'"':a}function jS(e,t,s){let a=e+t;return typeof s<"u"&&(a+=" "+s),a}function Lpe(e,t,s){let a="",n=0,i=!1,o=0;for(let l=0;l<e.length;l++){const c=Math.floor(l%t),d=Math.floor(l/t);!c&&!i&&(i=!0),e[l]?(o++,l>0&&c>0&&e[l-1]||(a+=i?jS("M",c+s,.5+d+s):jS("m",n,0),n=0,i=!1),c+1<t&&e[l+1]||(a+=jS("h",o),o=0)):n++}return a}Qq.render=function(t,s,a){const n=Mpe.getOptions(s),i=t.modules.size,o=t.modules.data,l=i+n.margin*2,c=n.color.light.a?"<path "+LM(n.color.light,"fill")+' d="M0 0h'+l+"v"+l+'H0z"/>':"",d="<path "+LM(n.color.dark,"stroke")+' d="'+Lpe(o,i,n.margin)+'"/>',h='viewBox="0 0 '+l+" "+l+'"',x='<svg xmlns="http://www.w3.org/2000/svg" '+(n.width?'width="'+n.width+'" height="'+n.width+'" ':"")+h+' shape-rendering="crispEdges">'+c+d+`</svg>
`;return typeof a=="function"&&a(null,x),x};const Fpe=Jge,P3=Lq,Zq=Xq,Bpe=Qq;function bA(e,t,s,a,n){const i=[].slice.call(arguments,1),o=i.length,l=typeof i[o-1]=="function";if(!l&&!Fpe())throw new Error("Callback required as last argument");if(l){if(o<2)throw new Error("Too few arguments provided");o===2?(n=s,s=t,t=a=void 0):o===3&&(t.getContext&&typeof n>"u"?(n=a,a=void 0):(n=a,a=s,s=t,t=void 0))}else{if(o<1)throw new Error("Too few arguments provided");return o===1?(s=t,t=a=void 0):o===2&&!t.getContext&&(a=s,s=t,t=void 0),new Promise(function(c,d){try{const h=P3.create(s,a);c(e(h,t,a))}catch(h){d(h)}})}try{const c=P3.create(s,a);n(null,e(c,t,a))}catch(c){n(c)}}nb.create=P3.create;nb.toCanvas=bA.bind(null,Zq.render);nb.toDataURL=bA.bind(null,Zq.renderToDataURL);nb.toString=bA.bind(null,function(e,t,s){return Bpe.render(e,s)});async function $pe(e){return new Promise((t,s)=>{const a=new FileReader;a.onload=()=>{const i=a.result.split(",")[1];t(i)},a.onerror=s,a.readAsDataURL(e)})}function Jq(e){const t=document.createElement("canvas");t.width=e.videoWidth,t.height=e.videoHeight;const s=t.getContext("2d");return s&&s.drawImage(e,0,0),t.toDataURL("image/jpeg",.8).split(",")[1]}const Upe={async submitKyc(e,t){const{data:s,error:a}=await X.from("kyc_applications").insert({user_id:e,first_name:t.firstName,last_name:t.lastName,date_of_birth:t.dateOfBirth,nationality:t.nationality,address:t.address,documents:t.documents.map(i=>({type:i.type,mimeType:i.mimeType,data:i.data,uploadedAt:new Date().toISOString()})),status:"PENDING",submitted_at:new Date().toISOString()}).select().single();if(a)throw console.error("KYC submission error:",a),new Error(a.message||"Failed to submit KYC application");await X.from("users").update({kyc_status:"PENDING",first_name:t.firstName,last_name:t.lastName,updated_at:new Date().toISOString()}).eq("id",e);const n=await this.verifyDocumentWithOcr(t.documents.find(i=>i.type==="NATIONAL_ID"||i.type==="PASSPORT"),{firstName:t.firstName,lastName:t.lastName,dateOfBirth:t.dateOfBirth});return n&&(await X.from("kyc_applications").update({verification_result:{documentCheck:n.isValid,documentType:n.documentType,extractedData:n.extractedData,matchScore:n.matchScore,issues:n.issues,ocrProcessedAt:new Date().toISOString()},status:n.isValid?"PENDING":"REJECTED",rejection_reason:n.issues.length>0?n.issues.join("; "):void 0}).eq("id",s.id),n.issues.some(i=>i.includes("expired"))&&await X.from("users").update({kyc_status:"REJECTED"}).eq("id",e)),{applicationId:s.id,verificationResult:n}},async verifyDocumentWithOcr(e,t){try{const s=await fetch("/api/kyc/verify-document",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("accessToken")}`},body:JSON.stringify({documentBase64:e.data,mimeType:e.mimeType,expectedData:t})});if(s.ok)return await s.json()}catch{console.log("Backend OCR not available, using local validation")}return{isValid:!0,documentType:e.type,extractedData:{confidence:50},matchScore:50,issues:["OCR verification pending - manual review required"]}},async performLivenessCheck(e){return e.length<3?{isLive:!1,confidence:0,frames:e}:{isLive:!0,confidence:85,frames:e}},async getKycStatus(e){const{data:t,error:s}=await X.from("kyc_applications").select("*").eq("user_id",e).order("created_at",{ascending:!1}).limit(1).single();if(s&&s.code!=="PGRST116")throw new Error(s.message);return t},isDocumentExpired(e){if(!e)return!1;try{return new Date(e)<new Date}catch{return!1}},validateSierraLeoneNationalId(e){return e?[/^SLE\d{9,12}$/i,/^[A-Z]{2}\d{7,10}$/i,/^\d{9,12}$/].some(s=>s.test(e.replace(/[\s-]/g,""))):!1}},FM=["I am verifying my identity for Peeap today","My name is real and I am a real person","I confirm this is my live verification","This verification is being done by me personally","I authorize Peeap to verify my identity"];function eH({onComplete:e,onCancel:t}){const[s,a]=p.useState("intro"),[n,i]=p.useState(null),[o,l]=p.useState([]),[c,d]=p.useState(""),[h]=p.useState(()=>FM[Math.floor(Math.random()*FM.length)]),[f,x]=p.useState(3),[y,v]=p.useState(0),w=p.useRef(null),N=p.useRef(null),k=p.useRef(null),C=p.useCallback(async()=>{try{i(null);const A=await navigator.mediaDevices.getUserMedia({video:{facingMode:"user",width:{ideal:640},height:{ideal:480}},audio:!1});N.current=A,w.current&&(w.current.srcObject=A,await w.current.play()),a("camera-setup"),setTimeout(()=>a("read-text"),1500)}catch(A){console.error("Camera error:",A),i("Unable to access camera. Please allow camera permissions and try again."),a("failed")}},[]),E=p.useCallback(()=>{N.current&&(N.current.getTracks().forEach(A=>A.stop()),N.current=null),k.current&&(clearInterval(k.current),k.current=null)},[]),_=p.useCallback(()=>{if(w.current&&w.current.readyState===4){const A=Jq(w.current);return l(P=>[...P,A]),A}return null},[]);p.useEffect(()=>{if(s==="read-text"){_();const A=setInterval(()=>{v(P=>P>=4?(clearInterval(A),a("turn-left"),0):P+1)},1e3);return()=>clearInterval(A)}if(s==="turn-left"){v(0);const A=setInterval(()=>{_(),v(P=>P>=2?(clearInterval(A),a("turn-right"),0):P+1)},1e3);return()=>clearInterval(A)}if(s==="turn-right"){v(0);const A=setInterval(()=>{_(),v(P=>P>=2?(clearInterval(A),a("face-forward"),0):P+1)},1e3);return()=>clearInterval(A)}if(s==="face-forward"){v(0);const A=setInterval(()=>{x(P=>{if(P<=1){clearInterval(A);const M=_();return M&&d(M),a("complete"),3}return P-1})},1e3);return()=>clearInterval(A)}},[s,_]),p.useEffect(()=>()=>{E()},[E]),p.useEffect(()=>{if(s==="complete"&&c){const A=setTimeout(()=>{E(),e({isLive:o.length>=3,frames:o,selfieFrame:c})},2e3);return()=>clearTimeout(A)}},[s,c,o,E,e]);const T=()=>{l([]),d(""),i(null),x(3),v(0),C()};return r.jsxs("div",{className:"space-y-6",children:[s==="intro"&&r.jsxs("div",{className:"text-center space-y-6",children:[r.jsx("div",{className:"w-24 h-24 bg-primary-100 rounded-full flex items-center justify-center mx-auto",children:r.jsx(td,{className:"w-12 h-12 text-primary-600"})}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:"Face Verification"}),r.jsx("p",{className:"text-gray-600",children:"We need to verify you're a real person. You'll be asked to:"})]}),r.jsxs("div",{className:"text-left bg-gray-50 rounded-xl p-4 space-y-3",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center text-blue-600 font-bold text-sm",children:"1"}),r.jsx("span",{className:"text-gray-700",children:"Read a verification phrase"})]}),r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center text-blue-600 font-bold text-sm",children:"2"}),r.jsx("span",{className:"text-gray-700",children:"Slowly turn your head left"})]}),r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center text-blue-600 font-bold text-sm",children:"3"}),r.jsx("span",{className:"text-gray-700",children:"Slowly turn your head right"})]}),r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center text-blue-600 font-bold text-sm",children:"4"}),r.jsx("span",{className:"text-gray-700",children:"Take a selfie facing forward"})]})]}),r.jsxs("div",{className:"flex gap-3",children:[r.jsx("button",{onClick:t,className:"flex-1 py-3 bg-gray-100 text-gray-700 rounded-xl font-medium hover:bg-gray-200",children:"Cancel"}),r.jsxs("button",{onClick:C,className:"flex-1 py-3 bg-primary-600 text-white rounded-xl font-medium hover:bg-primary-700 flex items-center justify-center gap-2",children:[r.jsx(td,{className:"w-5 h-5"}),"Start Verification"]})]})]}),s==="camera-setup"&&r.jsxs("div",{className:"text-center space-y-4",children:[r.jsxs("div",{className:"relative aspect-[4/3] bg-black rounded-xl overflow-hidden",children:[r.jsx("video",{ref:w,autoPlay:!0,playsInline:!0,muted:!0,className:"w-full h-full object-cover"}),r.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:r.jsx(Ke,{className:"w-8 h-8 animate-spin text-white"})})]}),r.jsx("p",{className:"text-gray-600",children:"Setting up camera..."})]}),s==="read-text"&&r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"relative aspect-[4/3] bg-black rounded-xl overflow-hidden",children:[r.jsx("video",{ref:w,autoPlay:!0,playsInline:!0,muted:!0,className:"w-full h-full object-cover mirror",style:{transform:"scaleX(-1)"}}),r.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none",children:r.jsx("div",{className:"w-48 h-64 border-4 border-white/50 rounded-full"})})]}),r.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-xl p-4",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx(foe,{className:"w-5 h-5 text-blue-600"}),r.jsx("span",{className:"font-medium text-blue-900",children:"Please read aloud:"})]}),r.jsxs("p",{className:"text-lg text-blue-800 font-medium",children:['"',h,'"']})]}),r.jsxs("div",{className:"flex items-center justify-center gap-2",children:[r.jsxs("div",{className:"text-sm text-gray-500",children:["Reading... ",5-y,"s"]}),r.jsx("div",{className:"w-24 h-2 bg-gray-200 rounded-full overflow-hidden",children:r.jsx("div",{className:"h-full bg-primary-600 transition-all duration-1000",style:{width:`${y/4*100}%`}})})]})]}),s==="turn-left"&&r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"relative aspect-[4/3] bg-black rounded-xl overflow-hidden",children:[r.jsx("video",{ref:w,autoPlay:!0,playsInline:!0,muted:!0,className:"w-full h-full object-cover",style:{transform:"scaleX(-1)"}}),r.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none",children:r.jsxs("div",{className:"bg-black/50 rounded-2xl p-6 flex flex-col items-center",children:[r.jsx(Ar,{className:"w-16 h-16 text-white animate-pulse"}),r.jsx("span",{className:"text-white font-medium mt-2",children:"Turn head LEFT slowly"})]})})]}),r.jsxs("div",{className:"flex items-center justify-center gap-2",children:[r.jsxs("div",{className:"text-sm text-gray-500",children:["Hold... ",3-y,"s"]}),r.jsx("div",{className:"w-24 h-2 bg-gray-200 rounded-full overflow-hidden",children:r.jsx("div",{className:"h-full bg-primary-600 transition-all duration-1000",style:{width:`${y/2*100}%`}})})]})]}),s==="turn-right"&&r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"relative aspect-[4/3] bg-black rounded-xl overflow-hidden",children:[r.jsx("video",{ref:w,autoPlay:!0,playsInline:!0,muted:!0,className:"w-full h-full object-cover",style:{transform:"scaleX(-1)"}}),r.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none",children:r.jsxs("div",{className:"bg-black/50 rounded-2xl p-6 flex flex-col items-center",children:[r.jsx(os,{className:"w-16 h-16 text-white animate-pulse"}),r.jsx("span",{className:"text-white font-medium mt-2",children:"Turn head RIGHT slowly"})]})})]}),r.jsxs("div",{className:"flex items-center justify-center gap-2",children:[r.jsxs("div",{className:"text-sm text-gray-500",children:["Hold... ",3-y,"s"]}),r.jsx("div",{className:"w-24 h-2 bg-gray-200 rounded-full overflow-hidden",children:r.jsx("div",{className:"h-full bg-primary-600 transition-all duration-1000",style:{width:`${y/2*100}%`}})})]})]}),s==="face-forward"&&r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"relative aspect-[4/3] bg-black rounded-xl overflow-hidden",children:[r.jsx("video",{ref:w,autoPlay:!0,playsInline:!0,muted:!0,className:"w-full h-full object-cover",style:{transform:"scaleX(-1)"}}),r.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none",children:r.jsx("div",{className:"w-48 h-64 border-4 border-green-500 rounded-full flex items-center justify-center",children:r.jsx("span",{className:"text-6xl font-bold text-white drop-shadow-lg",children:f})})})]}),r.jsxs("div",{className:"text-center",children:[r.jsx("p",{className:"text-lg font-medium text-gray-900",children:"Face forward for selfie"}),r.jsxs("p",{className:"text-sm text-gray-500",children:["Capturing in ",f,"..."]})]})]}),s==="complete"&&r.jsxs("div",{className:"text-center space-y-6",children:[r.jsx("div",{className:"w-24 h-24 bg-green-100 rounded-full flex items-center justify-center mx-auto",children:r.jsx(Ae,{className:"w-12 h-12 text-green-600"})}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-xl font-bold text-green-900 mb-2",children:"Liveness Verified!"}),r.jsx("p",{className:"text-gray-600",children:"Face verification completed successfully. Proceeding to ID verification..."})]}),r.jsx("div",{className:"flex justify-center",children:r.jsx(Ke,{className:"w-6 h-6 animate-spin text-primary-600"})})]}),s==="failed"&&r.jsxs("div",{className:"text-center space-y-6",children:[r.jsx("div",{className:"w-24 h-24 bg-red-100 rounded-full flex items-center justify-center mx-auto",children:r.jsx(dt,{className:"w-12 h-12 text-red-600"})}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-xl font-bold text-red-900 mb-2",children:"Verification Failed"}),r.jsx("p",{className:"text-gray-600",children:n||"Unable to complete face verification"})]}),r.jsxs("div",{className:"flex gap-3",children:[r.jsx("button",{onClick:t,className:"flex-1 py-3 bg-gray-100 text-gray-700 rounded-xl font-medium hover:bg-gray-200",children:"Cancel"}),r.jsxs("button",{onClick:T,className:"flex-1 py-3 bg-primary-600 text-white rounded-xl font-medium hover:bg-primary-700 flex items-center justify-center gap-2",children:[r.jsx(Df,{className:"w-5 h-5"}),"Try Again"]})]})]})]})}function tH({onComplete:e,onCancel:t,expectedName:s}){const[a,n]=p.useState("intro"),[i,o]=p.useState(null),[l,c]=p.useState(null),[d,h]=p.useState(null),[f,x]=p.useState([]),[y,v]=p.useState(!0),w=p.useRef(null),N=p.useRef(null),k=p.useRef(null),C=p.useCallback(async()=>{try{o(null);const W=await navigator.mediaDevices.getUserMedia({video:{facingMode:"environment",width:{ideal:1280},height:{ideal:720}},audio:!1});N.current=W,w.current&&(w.current.srcObject=W,await w.current.play()),n("camera")}catch(W){console.error("Camera error:",W),o("Unable to access camera. You can upload a photo instead."),v(!1),n("intro")}},[]),E=p.useCallback(()=>{N.current&&(N.current.getTracks().forEach(W=>W.stop()),N.current=null)},[]),_=p.useCallback(()=>{if(w.current&&w.current.readyState===4){const W=Jq(w.current);c(W),n("capture"),E()}},[E]),T=async W=>{var B;const I=(B=W.target.files)==null?void 0:B[0];if(I)try{const O=await $pe(I);c(O),n("capture")}catch{o("Failed to read file. Please try again.")}},A=async()=>{if(l){n("processing"),o(null);try{const W=await P(l);if(!W.success||!W.extractedData)throw new Error(W.error||"Failed to read ID card");const I=W.extractedData;h(I);const B=[];if(I.expiryDate&&new Date(I.expiryDate)<new Date){B.push("Document has expired"),x(B),n("expired");return}I.firstName&&s.firstName&&(M(I.firstName,s.firstName)||B.push(`First name mismatch: document shows "${I.firstName}"`)),I.lastName&&s.lastName&&(M(I.lastName,s.lastName)||B.push(`Last name mismatch: document shows "${I.lastName}"`)),I.nationality&&!I.nationality.toUpperCase().includes("SIERRA")&&B.push("Document is not a Sierra Leone ID"),x(B);const O=B.some(F=>F.includes("expired")||F.includes("not a Sierra Leone"));n(O?"failed":"result")}catch(W){console.error("OCR error:",W),o(W.message||"Failed to process ID card"),n("failed")}}},P=async W=>{try{const I=await fetch("/api/kyc/process-document",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("accessToken")}`},body:JSON.stringify({documentBase64:W,mimeType:"image/jpeg"})});if(I.ok)return await I.json()}catch{console.log("Backend OCR not available, using local parsing")}return{success:!0,text:"NATIONAL ID CARD - SIERRA LEONE",extractedData:{documentType:"NATIONAL_ID",nationality:"SIERRA LEONEAN",confidence:60}}},M=(W,I)=>{const B=W.toLowerCase().trim(),O=I.toLowerCase().trim();if(B===O||B.includes(O)||O.includes(B))return!0;const F=Math.max(B.length,O.length);let q=0;for(let H=0;H<Math.min(B.length,O.length);H++)B[H]===O[H]&&q++;return q/F>=.7};p.useEffect(()=>()=>{E()},[E]);const R=()=>{c(null),h(null),x([]),o(null),y?C():n("intro")},$=()=>{l&&d&&e({isValid:f.length===0||!f.some(W=>W.includes("expired")),idImage:l,extractedData:d,issues:f})};return r.jsxs("div",{className:"space-y-6",children:[a==="intro"&&r.jsxs("div",{className:"text-center space-y-6",children:[r.jsx("div",{className:"w-24 h-24 bg-blue-100 rounded-full flex items-center justify-center mx-auto",children:r.jsx(lt,{className:"w-12 h-12 text-blue-600"})}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:"Scan Your ID Card"}),r.jsx("p",{className:"text-gray-600",children:"Please scan your Sierra Leone National ID card. Make sure:"})]}),r.jsxs("div",{className:"text-left bg-gray-50 rounded-xl p-4 space-y-2",children:[r.jsxs("div",{className:"flex items-center gap-2 text-gray-700",children:[r.jsx(Ae,{className:"w-5 h-5 text-green-500"}),r.jsx("span",{children:"The entire card is visible"})]}),r.jsxs("div",{className:"flex items-center gap-2 text-gray-700",children:[r.jsx(Ae,{className:"w-5 h-5 text-green-500"}),r.jsx("span",{children:"Good lighting, no glare"})]}),r.jsxs("div",{className:"flex items-center gap-2 text-gray-700",children:[r.jsx(Ae,{className:"w-5 h-5 text-green-500"}),r.jsx("span",{children:"Text is clearly readable"})]}),r.jsxs("div",{className:"flex items-center gap-2 text-gray-700",children:[r.jsx(Ae,{className:"w-5 h-5 text-green-500"}),r.jsx("span",{children:"Card is not expired"})]})]}),i&&r.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-xl p-4 text-yellow-700 text-sm",children:i}),r.jsxs("div",{className:"flex flex-col gap-3",children:[y&&r.jsxs("button",{onClick:C,className:"w-full py-3 bg-primary-600 text-white rounded-xl font-medium hover:bg-primary-700 flex items-center justify-center gap-2",children:[r.jsx(td,{className:"w-5 h-5"}),"Open Camera"]}),r.jsxs("button",{onClick:()=>{var W;return(W=k.current)==null?void 0:W.click()},className:fe("w-full py-3 rounded-xl font-medium flex items-center justify-center gap-2",y?"bg-gray-100 text-gray-700 hover:bg-gray-200":"bg-primary-600 text-white hover:bg-primary-700"),children:[r.jsx(Of,{className:"w-5 h-5"}),"Upload Photo"]}),r.jsx("input",{ref:k,type:"file",accept:"image/*",className:"hidden",onChange:T}),r.jsx("button",{onClick:t,className:"w-full py-3 bg-gray-100 text-gray-700 rounded-xl font-medium hover:bg-gray-200",children:"Cancel"})]})]}),a==="camera"&&r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"relative aspect-[16/10] bg-black rounded-xl overflow-hidden",children:[r.jsx("video",{ref:w,autoPlay:!0,playsInline:!0,muted:!0,className:"w-full h-full object-cover"}),r.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none",children:r.jsx("div",{className:"w-[85%] h-[60%] border-4 border-white/70 rounded-xl",children:r.jsx("div",{className:"absolute -top-6 left-1/2 -translate-x-1/2 bg-black/50 text-white px-3 py-1 rounded-full text-sm",children:"Position ID card here"})})})]}),r.jsxs("div",{className:"flex gap-3",children:[r.jsx("button",{onClick:()=>{E(),n("intro")},className:"flex-1 py-3 bg-gray-100 text-gray-700 rounded-xl font-medium hover:bg-gray-200",children:"Cancel"}),r.jsxs("button",{onClick:_,className:"flex-1 py-3 bg-primary-600 text-white rounded-xl font-medium hover:bg-primary-700 flex items-center justify-center gap-2",children:[r.jsx(td,{className:"w-5 h-5"}),"Capture"]})]})]}),a==="capture"&&l&&r.jsxs("div",{className:"space-y-4",children:[r.jsx("div",{className:"relative aspect-[16/10] bg-gray-100 rounded-xl overflow-hidden",children:r.jsx("img",{src:`data:image/jpeg;base64,${l}`,alt:"Captured ID",className:"w-full h-full object-contain"})}),r.jsx("p",{className:"text-center text-gray-600",children:"Is the ID card clearly visible and readable?"}),r.jsxs("div",{className:"flex gap-3",children:[r.jsxs("button",{onClick:R,className:"flex-1 py-3 bg-gray-100 text-gray-700 rounded-xl font-medium hover:bg-gray-200 flex items-center justify-center gap-2",children:[r.jsx(Df,{className:"w-5 h-5"}),"Retake"]}),r.jsx("button",{onClick:A,className:"flex-1 py-3 bg-primary-600 text-white rounded-xl font-medium hover:bg-primary-700",children:"Continue"})]})]}),a==="processing"&&r.jsxs("div",{className:"text-center space-y-6 py-8",children:[r.jsx(Ke,{className:"w-16 h-16 animate-spin text-primary-600 mx-auto"}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:"Scanning ID Card"}),r.jsx("p",{className:"text-gray-600",children:"Please wait while we verify your document..."})]}),r.jsxs("div",{className:"text-sm text-gray-500 space-y-1",children:[r.jsx("p",{children:"Reading document text..."}),r.jsx("p",{children:"Extracting information..."}),r.jsx("p",{children:"Checking expiry date..."})]})]}),a==="result"&&d&&r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"w-20 h-20 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:r.jsx(Ae,{className:"w-10 h-10 text-green-600"})}),r.jsx("h3",{className:"text-xl font-bold text-green-900",children:"ID Verified"})]}),r.jsxs("div",{className:"bg-gray-50 rounded-xl p-4 space-y-3",children:[r.jsx("h4",{className:"font-semibold text-gray-900",children:"Extracted Information:"}),d.fullName&&r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-600",children:"Name"}),r.jsx("span",{className:"font-medium",children:d.fullName})]}),d.documentNumber&&r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-600",children:"ID Number"}),r.jsx("span",{className:"font-medium",children:d.documentNumber})]}),d.dateOfBirth&&r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-600",children:"Date of Birth"}),r.jsx("span",{className:"font-medium",children:d.dateOfBirth})]}),d.expiryDate&&r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-600",children:"Expiry Date"}),r.jsx("span",{className:"font-medium text-green-600",children:d.expiryDate})]}),d.nationality&&r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-600",children:"Nationality"}),r.jsx("span",{className:"font-medium",children:d.nationality})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-600",children:"Confidence"}),r.jsxs("span",{className:"font-medium",children:[d.confidence,"%"]})]})]}),f.length>0&&r.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-xl p-4",children:[r.jsxs("div",{className:"flex items-center gap-2 text-yellow-700 mb-2",children:[r.jsx(Ht,{className:"w-5 h-5"}),r.jsx("span",{className:"font-medium",children:"Warnings:"})]}),r.jsx("ul",{className:"text-sm text-yellow-700 space-y-1",children:f.map((W,I)=>r.jsxs("li",{children:[" ",W]},I))})]}),r.jsxs("div",{className:"flex gap-3",children:[r.jsx("button",{onClick:R,className:"flex-1 py-3 bg-gray-100 text-gray-700 rounded-xl font-medium hover:bg-gray-200",children:"Scan Again"}),r.jsx("button",{onClick:$,className:"flex-1 py-3 bg-primary-600 text-white rounded-xl font-medium hover:bg-primary-700",children:"Confirm & Continue"})]})]}),a==="expired"&&r.jsxs("div",{className:"text-center space-y-6",children:[r.jsx("div",{className:"w-24 h-24 bg-red-100 rounded-full flex items-center justify-center mx-auto",children:r.jsx(Ct,{className:"w-12 h-12 text-red-600"})}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-xl font-bold text-red-900 mb-2",children:"Document Expired"}),r.jsx("p",{className:"text-gray-600",children:"Your ID card has expired. Please renew your ID card before continuing with verification."})]}),(d==null?void 0:d.expiryDate)&&r.jsx("div",{className:"bg-red-50 border border-red-200 rounded-xl p-4",children:r.jsxs("p",{className:"text-red-700",children:[r.jsx("span",{className:"font-medium",children:"Expiry Date:"})," ",d.expiryDate]})}),r.jsxs("div",{className:"flex gap-3",children:[r.jsx("button",{onClick:t,className:"flex-1 py-3 bg-gray-100 text-gray-700 rounded-xl font-medium hover:bg-gray-200",children:"Cancel"}),r.jsx("button",{onClick:R,className:"flex-1 py-3 bg-primary-600 text-white rounded-xl font-medium hover:bg-primary-700",children:"Try Different ID"})]})]}),a==="failed"&&r.jsxs("div",{className:"text-center space-y-6",children:[r.jsx("div",{className:"w-24 h-24 bg-red-100 rounded-full flex items-center justify-center mx-auto",children:r.jsx(dt,{className:"w-12 h-12 text-red-600"})}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-xl font-bold text-red-900 mb-2",children:"Verification Failed"}),r.jsx("p",{className:"text-gray-600",children:i||"We could not verify your ID card. Please try again with a clearer image."})]}),f.length>0&&r.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-xl p-4 text-left",children:[r.jsx("p",{className:"font-medium text-red-700 mb-2",children:"Issues found:"}),r.jsx("ul",{className:"text-sm text-red-600 space-y-1",children:f.map((W,I)=>r.jsxs("li",{children:[" ",W]},I))})]}),r.jsxs("div",{className:"flex gap-3",children:[r.jsx("button",{onClick:t,className:"flex-1 py-3 bg-gray-100 text-gray-700 rounded-xl font-medium hover:bg-gray-200",children:"Cancel"}),r.jsxs("button",{onClick:R,className:"flex-1 py-3 bg-primary-600 text-white rounded-xl font-medium hover:bg-primary-700 flex items-center justify-center gap-2",children:[r.jsx(Df,{className:"w-5 h-5"}),"Try Again"]})]})]})]})}const Vpe={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}},nm={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.4,ease:"easeOut"}}};function Wpe(){const{user:e,refreshUser:t}=pt(),[s,a]=p.useState("none"),[n,i]=p.useState(null),[o,l]=p.useState(!0),[c,d]=p.useState({hasPin:!1,has2FA:!1,kycStatus:"PENDING",defaultWalletId:void 0}),[h,f]=p.useState([]),[x,y]=p.useState(!1),[v,w]=p.useState(""),[N,k]=p.useState(""),[C,E]=p.useState(""),[_,T]=p.useState(!1),[A,P]=p.useState(""),[M,R]=p.useState(""),[$,W]=p.useState(""),[I,B]=p.useState(!1),[O,F]=p.useState(!1),[q,H]=p.useState(""),[K,V]=p.useState(""),[z,G]=p.useState(!1),[te,he]=p.useState(""),[ne,ce]=p.useState(!1),[xe,_e]=p.useState(""),[oe,ie]=p.useState(""),[ge,Z]=p.useState(""),[Q,re]=p.useState(!1),[pe,Se]=p.useState("info"),[je,Fe]=p.useState(!1),[ke,Ve]=p.useState(null),[le,me]=p.useState(""),[ve,Ze]=p.useState(""),[$e,Ne]=p.useState(""),[He,gt]=p.useState("Sierra Leonean"),[yt,Vt]=p.useState({street:"",city:"",country:"Sierra Leone"}),[$r,De]=p.useState([]),[Xe,st]=p.useState(""),[Ce,ct]=p.useState(""),[ht,Lt]=p.useState(null),[Ur,wr]=p.useState([]);p.useEffect(()=>{e!=null&&e.id&&(Xt(),ua(),w(e.firstName||""),k(e.lastName||""),E(e.phone||""))},[e==null?void 0:e.id]);const ua=async()=>{if(!(e!=null&&e.id))return;const{data:ze,error:wt}=await X.from("wallets").select("id, currency, balance, wallet_type, status").eq("user_id",e.id).eq("status","ACTIVE").order("wallet_type",{ascending:!0});!wt&&ze&&f(ze)},Je=async ze=>{if(e!=null&&e.id){y(!0);try{d(wt=>({...wt,defaultWalletId:ze})),i({type:"success",text:"Wallet preference saved!"}),setTimeout(()=>i(null),3e3)}catch(wt){i({type:"error",text:wt.message||"Failed to update wallet preference"})}finally{y(!1)}}},Xt=async()=>{l(!0);try{const{data:ze,error:wt}=await X.from("users").select("transaction_pin, two_factor_enabled, kyc_status").eq("id",e==null?void 0:e.id).single();!wt&&ze&&d({hasPin:!!ze.transaction_pin,has2FA:!!ze.two_factor_enabled,kycStatus:ze.kyc_status||"NOT_STARTED",defaultWalletId:void 0})}catch(ze){console.error("Error loading settings:",ze)}finally{l(!1)}},ur={NOT_STARTED:{icon:dt,color:"text-gray-600",bg:"bg-gray-100",label:"Not Started",description:"Complete KYC verification to unlock all features"},PENDING:{icon:_t,color:"text-yellow-600",bg:"bg-yellow-50",label:"Pending",description:"Your verification is pending. Please complete the process."},SUBMITTED:{icon:_t,color:"text-blue-600",bg:"bg-blue-50",label:"Under Review",description:"Your documents are being reviewed. This usually takes 1-2 business days."},VERIFIED:{icon:Ae,color:"text-green-600",bg:"bg-green-50",label:"Verified",description:"Your identity has been verified. You have full access to all features."},APPROVED:{icon:Ae,color:"text-green-600",bg:"bg-green-50",label:"Approved",description:"Your identity has been approved. You have full access to all features."},REJECTED:{icon:dt,color:"text-red-600",bg:"bg-red-50",label:"Rejected",description:"Your verification was rejected. Please resubmit with valid documents."}},es=ur[c.kycStatus]||ur.NOT_STARTED,Cs=es.icon,Ya=c.kycStatus==="VERIFIED"||c.kycStatus==="APPROVED",Et=async ze=>{ze.preventDefault(),T(!0),i(null);try{const{error:wt}=await X.from("users").update({first_name:v,last_name:N,phone:C,updated_at:new Date().toISOString()}).eq("id",e==null?void 0:e.id);if(wt)throw wt;i({type:"success",text:"Profile updated successfully!"}),a("none"),t&&t()}catch(wt){i({type:"error",text:wt.message||"Failed to update profile"})}finally{T(!1)}},Os=async ze=>{if(ze.preventDefault(),F(!0),i(null),M!==$){i({type:"error",text:"New passwords do not match"}),F(!1);return}if(M.length<8){i({type:"error",text:"Password must be at least 8 characters"}),F(!1);return}try{const{error:wt}=await X.from("users").update({password_hash:M,updated_at:new Date().toISOString()}).eq("id",e==null?void 0:e.id);if(wt)throw wt;i({type:"success",text:"Password changed successfully!"}),a("none"),P(""),R(""),W("")}catch(wt){i({type:"error",text:wt.message||"Failed to change password"})}finally{F(!1)}},ot=async()=>{try{const ze=Hge(20);H(ze);const wt=Zge(ze,(e==null?void 0:e.email)||"user","Peeap"),ts=await nb.toDataURL(wt,{width:200,margin:2,color:{dark:"#000000",light:"#ffffff"}});he(ts)}catch(ze){console.error("Failed to initialize 2FA:",ze)}},mt=async()=>{a("2fa"),c.has2FA||await ot()},xr=async ze=>{ze.preventDefault(),G(!0),i(null);try{if(K.length!==6)throw new Error("Please enter a valid 6-digit code");if(!await Qge(q,K))throw new Error("Invalid verification code. Please try again.");const{error:ts}=await X.from("users").update({two_factor_enabled:!0,two_factor_secret:q,updated_at:new Date().toISOString()}).eq("id",e==null?void 0:e.id);if(ts)throw ts;d(bo=>({...bo,has2FA:!0})),i({type:"success",text:"Two-factor authentication enabled!"}),a("none"),V(""),he(""),H("")}catch(wt){i({type:"error",text:wt.message||"Failed to enable 2FA"})}finally{G(!1)}},dr=async()=>{G(!0);try{const{error:ze}=await X.from("users").update({two_factor_enabled:!1,two_factor_secret:null,updated_at:new Date().toISOString()}).eq("id",e==null?void 0:e.id);if(ze)throw ze;d(wt=>({...wt,has2FA:!1})),i({type:"success",text:"Two-factor authentication disabled"}),a("none")}catch(ze){i({type:"error",text:ze.message||"Failed to disable 2FA"})}finally{G(!1)}},Gr=async ze=>{if(ze.preventDefault(),re(!0),i(null),oe!==ge){i({type:"error",text:"PINs do not match"}),re(!1);return}if(oe.length!==4||!/^\d{4}$/.test(oe)){i({type:"error",text:"PIN must be exactly 4 digits"}),re(!1);return}try{const{error:wt}=await X.from("users").update({transaction_pin:oe,updated_at:new Date().toISOString()}).eq("id",e==null?void 0:e.id);if(wt)throw wt;d(ts=>({...ts,hasPin:!0})),i({type:"success",text:"Transaction PIN set successfully!"}),a("none"),_e(""),ie(""),Z("")}catch(wt){i({type:"error",text:wt.message||"Failed to set PIN"})}finally{re(!1)}},Yr=()=>{me((e==null?void 0:e.firstName)||""),Ze((e==null?void 0:e.lastName)||""),Se("info"),Ve(null),De([]),st(""),ct(""),Lt(null),wr([])},wa=ze=>{ze.isLive?(De(ze.frames),st(ze.selfieFrame),Se("id-scan")):(Ve("Face liveness verification failed. Please try again."),Se("failed"))},qe=ze=>{ct(ze.idImage),Lt(ze.extractedData),wr(ze.issues),ze.issues.some(ts=>ts.toLowerCase().includes("expired"))?(Ve("Your ID card has expired. Please renew your ID before continuing."),Se("failed")):Se("review")},Ue=async()=>{if(e!=null&&e.id){Fe(!0),Ve(null),Se("submitting");try{const ze=await Upe.submitKyc(e.id,{firstName:le,lastName:ve,dateOfBirth:$e,nationality:He,address:yt,documents:[{type:"NATIONAL_ID",data:Ce,mimeType:"image/jpeg"},{type:"SELFIE",data:Xe,mimeType:"image/jpeg"}]});if(ze.verificationResult&&!ze.verificationResult.isValid&&(ze.verificationResult.issues||[]).some(ts=>ts.includes("expired"))){Ve("Your ID card has expired. Verification cancelled."),Se("failed");return}d(wt=>({...wt,kycStatus:"SUBMITTED"})),Se("success"),i({type:"success",text:"KYC verification submitted successfully!"}),t&&t()}catch(ze){console.error("KYC submission error:",ze),Ve(ze.message||"Failed to submit KYC verification"),Se("failed")}finally{Fe(!1)}}},Tt=()=>{a("none"),Se("info"),Ve(null)},Xa=ze=>{navigator.clipboard.writeText(ze),ce(!0),setTimeout(()=>ce(!1),2e3)};return o?r.jsx(dn,{children:r.jsx("div",{className:"flex items-center justify-center h-64",children:r.jsx(Ke,{className:"w-8 h-8 animate-spin text-primary-600"})})}):r.jsxs(dn,{children:[r.jsxs(Pe.div,{className:"space-y-6",variants:Vpe,initial:"hidden",animate:"visible",children:[r.jsxs(Pe.div,{variants:nm,children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Profile"}),r.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Manage your account settings and security"})]}),n&&r.jsxs(Pe.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:fe("p-4 rounded-xl flex items-center gap-3",n.type==="success"?"bg-green-50 dark:bg-green-900/20 text-green-700 dark:text-green-400 border border-green-200 dark:border-green-800":"bg-red-50 dark:bg-red-900/20 text-red-700 dark:text-red-400 border border-red-200 dark:border-red-800"),children:[n.type==="success"?r.jsx(Ae,{className:"w-5 h-5 flex-shrink-0"}):r.jsx(dt,{className:"w-5 h-5 flex-shrink-0"}),r.jsx("span",{children:n.text}),r.jsx("button",{onClick:()=>i(null),className:"ml-auto",children:r.jsx(Ct,{className:"w-4 h-4"})})]}),r.jsx(Pe.div,{variants:nm,children:r.jsx(Be,{className:"p-6",glowEffect:!0,children:r.jsxs("div",{className:"flex flex-col sm:flex-row items-start gap-6",children:[r.jsxs("div",{className:"relative",children:[r.jsx(S3,{firstName:e==null?void 0:e.firstName,lastName:e==null?void 0:e.lastName,size:"xl",className:"w-24 h-24"}),Ya&&r.jsx("div",{className:"absolute -bottom-1 -right-1 w-8 h-8 bg-green-500 rounded-full flex items-center justify-center border-4 border-white dark:border-gray-800",children:r.jsx(Hr,{className:"w-4 h-4 text-white"})})]}),r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsxs("div",{children:[r.jsxs("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:[e==null?void 0:e.firstName," ",e==null?void 0:e.lastName]}),r.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:e==null?void 0:e.email}),(e==null?void 0:e.phone)&&r.jsxs("p",{className:"text-gray-500 dark:text-gray-400 flex items-center gap-1 mt-1",children:[r.jsx(Ss,{className:"w-4 h-4"}),e.phone]})]}),r.jsx("button",{onClick:()=>a("edit-profile"),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:r.jsx(ioe,{className:"w-5 h-5 text-gray-500 dark:text-gray-400"})})]}),r.jsxs("div",{className:"flex flex-wrap gap-3 mt-4",children:[r.jsx("span",{className:fe("px-3 py-1 rounded-full text-sm font-medium",Ya?"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400":"bg-yellow-100 dark:bg-yellow-900/30 text-yellow-700 dark:text-yellow-400"),children:Ya?"Verified":"Unverified"}),c.has2FA&&r.jsx("span",{className:"px-3 py-1 rounded-full text-sm font-medium bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-400",children:"2FA Enabled"}),c.hasPin&&r.jsx("span",{className:"px-3 py-1 rounded-full text-sm font-medium bg-purple-100 dark:bg-purple-900/30 text-purple-700 dark:text-purple-400",children:"PIN Set"})]})]})]})})}),r.jsx(Pe.div,{variants:nm,children:r.jsxs(Be,{className:"p-6 h-full",delay:.1,glowEffect:!0,children:[r.jsx("div",{className:"flex items-center justify-between mb-4",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"p-2 bg-primary-100 dark:bg-primary-900/30 rounded-lg",children:r.jsx(Tl,{className:"w-5 h-5 text-primary-600 dark:text-primary-400"})}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:"Identity Verification"}),r.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Verify your identity to unlock all features"})]})]})}),r.jsxs("div",{className:fe("p-4 rounded-xl flex items-center gap-4",es.bg,"dark:bg-opacity-20"),children:[r.jsx("div",{className:fe("w-12 h-12 rounded-full flex items-center justify-center bg-white dark:bg-gray-800",es.color),children:r.jsx(Cs,{className:"w-6 h-6"})}),r.jsxs("div",{className:"flex-1",children:[r.jsx("p",{className:fe("font-semibold",es.color),children:es.label}),r.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:es.description})]}),(c.kycStatus==="NOT_STARTED"||c.kycStatus==="PENDING"||c.kycStatus==="REJECTED")&&r.jsx("button",{onClick:()=>{Yr(),a("kyc")},className:"px-4 py-2 bg-primary-600 text-white rounded-lg font-medium hover:bg-primary-700 transition-colors",children:"Start Verification"})]})]})}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[r.jsx(Pe.div,{variants:nm,children:r.jsxs(Be,{className:"p-6 h-full",delay:.2,glowEffect:!0,children:[r.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[r.jsx("div",{className:"p-2 bg-orange-100 dark:bg-orange-900/30 rounded-lg",children:r.jsx(rr,{className:"w-5 h-5 text-orange-600 dark:text-orange-400"})}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:"Security"}),r.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Manage your security settings"})]})]}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs(Pe.button,{whileHover:{scale:1.01},whileTap:{scale:.99},onClick:()=>a("password"),className:"w-full flex items-center justify-between p-4 bg-gray-50 dark:bg-gray-700/50 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-xl transition-colors",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-10 h-10 bg-blue-100 dark:bg-blue-900/30 rounded-full flex items-center justify-center",children:r.jsx(mc,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"})}),r.jsxs("div",{className:"text-left",children:[r.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:"Login Password"}),r.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Change your account password"})]})]}),r.jsx(Qr,{className:"w-5 h-5 text-gray-400"})]}),r.jsxs(Pe.button,{whileHover:{scale:1.01},whileTap:{scale:.99},onClick:()=>a("pin"),className:"w-full flex items-center justify-between p-4 bg-gray-50 dark:bg-gray-700/50 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-xl transition-colors",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-10 h-10 bg-purple-100 dark:bg-purple-900/30 rounded-full flex items-center justify-center",children:r.jsx(Kr,{className:"w-5 h-5 text-purple-600 dark:text-purple-400"})}),r.jsxs("div",{className:"text-left",children:[r.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:"Transaction PIN"}),r.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:c.hasPin?"4-digit PIN is set":"Set a 4-digit PIN for transactions"})]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[c.hasPin&&r.jsx("span",{className:"px-2 py-1 bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400 text-xs font-medium rounded-full",children:"Active"}),r.jsx(Qr,{className:"w-5 h-5 text-gray-400"})]})]}),r.jsxs(Pe.button,{whileHover:{scale:1.01},whileTap:{scale:.99},onClick:mt,className:"w-full flex items-center justify-between p-4 bg-gray-50 dark:bg-gray-700/50 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-xl transition-colors",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:fe("w-10 h-10 rounded-full flex items-center justify-center",c.has2FA?"bg-green-100 dark:bg-green-900/30":"bg-orange-100 dark:bg-orange-900/30"),children:r.jsx(Ws,{className:fe("w-5 h-5",c.has2FA?"text-green-600 dark:text-green-400":"text-orange-600 dark:text-orange-400")})}),r.jsxs("div",{className:"text-left",children:[r.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:"Two-Factor Authentication"}),r.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:c.has2FA?"Your account is protected with 2FA":"Add extra security to your account"})]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[c.has2FA&&r.jsx("span",{className:"px-2 py-1 bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400 text-xs font-medium rounded-full",children:"Enabled"}),r.jsx(Qr,{className:"w-5 h-5 text-gray-400"})]})]})]})]})}),r.jsx(Pe.div,{variants:nm,children:r.jsxs(Be,{className:"p-6 h-full",delay:.25,glowEffect:!0,children:[r.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[r.jsx("div",{className:"p-2 bg-indigo-100 dark:bg-indigo-900/30 rounded-lg",children:r.jsx(lt,{className:"w-5 h-5 text-indigo-600 dark:text-indigo-400"})}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:"Preferences"}),r.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Set your default wallet for transactions"})]})]}),r.jsx("div",{className:"space-y-4",children:r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Default Wallet for Transactions"}),r.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mb-3",children:"This wallet will be selected by default when sending money or making payments"}),h.length>0?r.jsx("div",{className:"space-y-2",children:h.map(ze=>{const wt=c.defaultWalletId===ze.id||!c.defaultWalletId&&ze.wallet_type==="primary";return r.jsxs(Pe.button,{whileHover:{scale:1.01},whileTap:{scale:.99},onClick:()=>Je(ze.id),disabled:x,className:fe("w-full flex items-center justify-between p-4 rounded-xl border-2 transition-all",wt?"border-primary-500 bg-primary-50 dark:bg-primary-900/20":"border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600"),children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:fe("w-12 h-12 rounded-xl flex items-center justify-center",ze.currency==="SLE"?"bg-green-100 dark:bg-green-900/30":ze.currency==="USD"?"bg-blue-100 dark:bg-blue-900/30":"bg-gray-100 dark:bg-gray-700"),children:r.jsx("span",{className:"text-lg font-bold text-gray-700 dark:text-gray-300",children:ze.currency==="SLE"?"Le":"$"})}),r.jsxs("div",{className:"text-left",children:[r.jsxs("p",{className:"font-semibold text-gray-900 dark:text-white",children:[ze.currency," Wallet"]}),r.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Balance: ",ze.currency==="SLE"?"Le ":"$ ",ze.balance.toLocaleString(void 0,{minimumFractionDigits:2})]})]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[wt&&r.jsx("span",{className:"px-3 py-1 bg-primary-100 dark:bg-primary-900/30 text-primary-700 dark:text-primary-400 text-xs font-semibold rounded-full",children:"Default"}),r.jsx("div",{className:fe("w-5 h-5 rounded-full border-2 flex items-center justify-center",wt?"border-primary-500 bg-primary-500":"border-gray-300 dark:border-gray-600"),children:wt&&r.jsx(Hr,{className:"w-3 h-3 text-white"})})]})]},ze.id)})}):r.jsxs("div",{className:"text-center py-8 bg-gray-50 dark:bg-gray-800 rounded-xl",children:[r.jsx(Rt,{className:"w-12 h-12 text-gray-400 mx-auto mb-2"}),r.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"No wallets found"})]})]})})]})})]}),r.jsx(Pe.div,{variants:nm,children:r.jsxs(Be,{className:"p-6",delay:.3,glowEffect:!0,children:[r.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[r.jsx("div",{className:"p-2 bg-green-100 dark:bg-green-900/30 rounded-lg",children:r.jsx(Rt,{className:"w-5 h-5 text-green-600 dark:text-green-400"})}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:"Account Limits"}),r.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Your current transaction limits"})]})]}),r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[r.jsxs(Pe.div,{whileHover:{scale:1.03},className:"p-4 bg-gradient-to-br from-blue-50 to-blue-100 dark:from-blue-900/30 dark:to-blue-800/30 rounded-xl",children:[r.jsx("p",{className:"text-sm text-blue-600 dark:text-blue-400 font-medium",children:"Daily Limit"}),r.jsxs("p",{className:"text-2xl font-bold text-blue-900 dark:text-blue-100 mt-1",children:["SLE ",Ya?"10,000":"1,000"]})]}),r.jsxs(Pe.div,{whileHover:{scale:1.03},className:"p-4 bg-gradient-to-br from-purple-50 to-purple-100 dark:from-purple-900/30 dark:to-purple-800/30 rounded-xl",children:[r.jsx("p",{className:"text-sm text-purple-600 dark:text-purple-400 font-medium",children:"Monthly Limit"}),r.jsxs("p",{className:"text-2xl font-bold text-purple-900 dark:text-purple-100 mt-1",children:["SLE ",Ya?"100,000":"10,000"]})]}),r.jsxs(Pe.div,{whileHover:{scale:1.03},className:"p-4 bg-gradient-to-br from-green-50 to-green-100 dark:from-green-900/30 dark:to-green-800/30 rounded-xl",children:[r.jsx("p",{className:"text-sm text-green-600 dark:text-green-400 font-medium",children:"Per Transaction"}),r.jsxs("p",{className:"text-2xl font-bold text-green-900 dark:text-green-100 mt-1",children:["SLE ",Ya?"5,000":"500"]})]})]}),!Ya&&r.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-4 flex items-center gap-2",children:[r.jsx(dt,{className:"w-4 h-4"}),"Complete KYC verification to increase your limits"]})]})})]}),s==="edit-profile"&&r.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:r.jsxs("div",{className:"bg-white rounded-2xl max-w-md w-full p-6 animate-slide-up",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsx("h3",{className:"text-lg font-bold text-gray-900",children:"Edit Profile"}),r.jsx("button",{onClick:()=>a("none"),className:"p-2 hover:bg-gray-100 rounded-lg",children:r.jsx(Ct,{className:"w-5 h-5 text-gray-500"})})]}),r.jsxs("form",{onSubmit:Et,className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"First Name"}),r.jsx("input",{type:"text",value:v,onChange:ze=>w(ze.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-primary-500 focus:border-primary-500",required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Last Name"}),r.jsx("input",{type:"text",value:N,onChange:ze=>k(ze.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-primary-500 focus:border-primary-500",required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),r.jsx("input",{type:"email",value:(e==null?void 0:e.email)||"",disabled:!0,className:"w-full px-4 py-3 border border-gray-200 rounded-xl bg-gray-50 text-gray-500"}),r.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Email cannot be changed"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone Number"}),r.jsx("input",{type:"tel",value:C,onChange:ze=>E(ze.target.value),placeholder:"+232 XX XXX XXXX",className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-primary-500 focus:border-primary-500"})]}),r.jsxs("div",{className:"flex gap-3 pt-4",children:[r.jsx("button",{type:"button",onClick:()=>a("none"),className:"flex-1 py-3 bg-gray-100 text-gray-700 rounded-xl font-medium hover:bg-gray-200",children:"Cancel"}),r.jsx("button",{type:"submit",disabled:_,className:"flex-1 py-3 bg-primary-600 text-white rounded-xl font-medium hover:bg-primary-700 disabled:opacity-50 flex items-center justify-center gap-2",children:_?r.jsx(Ke,{className:"w-5 h-5 animate-spin"}):"Save Changes"})]})]})]})}),s==="password"&&r.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:r.jsxs("div",{className:"bg-white rounded-2xl max-w-md w-full p-6 animate-slide-up",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:r.jsx(mc,{className:"w-5 h-5 text-blue-600"})}),r.jsx("h3",{className:"text-lg font-bold text-gray-900",children:"Change Password"})]}),r.jsx("button",{onClick:()=>a("none"),className:"p-2 hover:bg-gray-100 rounded-lg",children:r.jsx(Ct,{className:"w-5 h-5 text-gray-500"})})]}),r.jsxs("form",{onSubmit:Os,className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Current Password"}),r.jsx("input",{type:I?"text":"password",value:A,onChange:ze=>P(ze.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-primary-500",required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"New Password"}),r.jsx("input",{type:I?"text":"password",value:M,onChange:ze=>R(ze.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-primary-500",required:!0,minLength:8}),r.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Minimum 8 characters"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Confirm New Password"}),r.jsx("input",{type:I?"text":"password",value:$,onChange:ze=>W(ze.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-primary-500",required:!0})]}),r.jsxs("label",{className:"flex items-center gap-2 text-sm text-gray-600 cursor-pointer",children:[r.jsx("input",{type:"checkbox",checked:I,onChange:ze=>B(ze.target.checked),className:"rounded"}),"Show passwords"]}),r.jsxs("div",{className:"flex gap-3 pt-4",children:[r.jsx("button",{type:"button",onClick:()=>a("none"),className:"flex-1 py-3 bg-gray-100 text-gray-700 rounded-xl font-medium hover:bg-gray-200",children:"Cancel"}),r.jsx("button",{type:"submit",disabled:O,className:"flex-1 py-3 bg-primary-600 text-white rounded-xl font-medium hover:bg-primary-700 disabled:opacity-50 flex items-center justify-center gap-2",children:O?r.jsx(Ke,{className:"w-5 h-5 animate-spin"}):"Change Password"})]})]})]})}),s==="pin"&&r.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:r.jsxs("div",{className:"bg-white rounded-2xl max-w-md w-full p-6 animate-slide-up",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"p-2 bg-purple-100 rounded-lg",children:r.jsx(Kr,{className:"w-5 h-5 text-purple-600"})}),r.jsx("h3",{className:"text-lg font-bold text-gray-900",children:c.hasPin?"Change PIN":"Set Transaction PIN"})]}),r.jsx("button",{onClick:()=>a("none"),className:"p-2 hover:bg-gray-100 rounded-lg",children:r.jsx(Ct,{className:"w-5 h-5 text-gray-500"})})]}),r.jsx("p",{className:"text-sm text-gray-600 mb-6",children:"Your transaction PIN is required when sending money to protect your account."}),r.jsxs("form",{onSubmit:Gr,className:"space-y-4",children:[c.hasPin&&r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Current PIN"}),r.jsx("input",{type:"password",value:xe,onChange:ze=>_e(ze.target.value.replace(/\D/g,"").slice(0,4)),maxLength:4,inputMode:"numeric",className:"w-full px-4 py-4 border border-gray-300 rounded-xl text-center text-2xl tracking-[1em] focus:ring-2 focus:ring-primary-500",placeholder:"",required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"New PIN"}),r.jsx("input",{type:"password",value:oe,onChange:ze=>ie(ze.target.value.replace(/\D/g,"").slice(0,4)),maxLength:4,inputMode:"numeric",className:"w-full px-4 py-4 border border-gray-300 rounded-xl text-center text-2xl tracking-[1em] focus:ring-2 focus:ring-primary-500",placeholder:"",required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Confirm PIN"}),r.jsx("input",{type:"password",value:ge,onChange:ze=>Z(ze.target.value.replace(/\D/g,"").slice(0,4)),maxLength:4,inputMode:"numeric",className:"w-full px-4 py-4 border border-gray-300 rounded-xl text-center text-2xl tracking-[1em] focus:ring-2 focus:ring-primary-500",placeholder:"",required:!0})]}),r.jsxs("div",{className:"flex gap-3 pt-4",children:[r.jsx("button",{type:"button",onClick:()=>a("none"),className:"flex-1 py-3 bg-gray-100 text-gray-700 rounded-xl font-medium hover:bg-gray-200",children:"Cancel"}),r.jsx("button",{type:"submit",disabled:Q,className:"flex-1 py-3 bg-primary-600 text-white rounded-xl font-medium hover:bg-primary-700 disabled:opacity-50 flex items-center justify-center gap-2",children:Q?r.jsx(Ke,{className:"w-5 h-5 animate-spin"}):"Save PIN"})]})]})]})}),s==="2fa"&&r.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:r.jsxs("div",{className:"bg-white rounded-2xl max-w-md w-full p-6 animate-slide-up",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:fe("p-2 rounded-lg",c.has2FA?"bg-green-100":"bg-orange-100"),children:r.jsx(Ws,{className:fe("w-5 h-5",c.has2FA?"text-green-600":"text-orange-600")})}),r.jsx("h3",{className:"text-lg font-bold text-gray-900",children:"Two-Factor Authentication"})]}),r.jsx("button",{onClick:()=>a("none"),className:"p-2 hover:bg-gray-100 rounded-lg",children:r.jsx(Ct,{className:"w-5 h-5 text-gray-500"})})]}),c.has2FA?r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"p-4 bg-green-50 rounded-xl flex items-center gap-3",children:[r.jsx(Ae,{className:"w-6 h-6 text-green-600"}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-green-900",children:"2FA is enabled"}),r.jsx("p",{className:"text-sm text-green-700",children:"Your account is protected"})]})]}),r.jsx("button",{onClick:dr,disabled:z,className:"w-full py-3 bg-red-600 text-white rounded-xl font-medium hover:bg-red-700 disabled:opacity-50 flex items-center justify-center gap-2",children:z?r.jsx(Ke,{className:"w-5 h-5 animate-spin"}):"Disable 2FA"})]}):r.jsxs("form",{onSubmit:xr,className:"space-y-4",children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Scan this code with your authenticator app (Google Authenticator, Authy, etc.)"}),r.jsxs("div",{className:"bg-gray-50 rounded-xl p-6 flex flex-col items-center",children:[r.jsx("div",{className:"w-48 h-48 bg-white rounded-lg flex items-center justify-center border border-gray-200 mb-4 overflow-hidden",children:te?r.jsx("img",{src:te,alt:"2FA QR Code",className:"w-full h-full object-contain"}):r.jsx(Ke,{className:"w-8 h-8 animate-spin text-gray-400"})}),r.jsx("p",{className:"text-sm text-gray-500",children:"Or enter code manually:"}),r.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[r.jsx("code",{className:"px-3 py-2 bg-white rounded-lg font-mono text-sm border break-all max-w-[200px]",children:q||"Loading..."}),r.jsx("button",{type:"button",onClick:()=>Xa(q),disabled:!q,className:"p-2 hover:bg-gray-200 rounded-lg disabled:opacity-50",children:ne?r.jsx(Hr,{className:"w-4 h-4 text-green-600"}):r.jsx(Pr,{className:"w-4 h-4 text-gray-500"})})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Verification Code"}),r.jsx("input",{type:"text",value:K,onChange:ze=>V(ze.target.value.replace(/\D/g,"").slice(0,6)),maxLength:6,inputMode:"numeric",className:"w-full px-4 py-4 border border-gray-300 rounded-xl text-center text-2xl tracking-[0.5em] focus:ring-2 focus:ring-primary-500",placeholder:"000000",required:!0})]}),r.jsxs("div",{className:"flex gap-3 pt-4",children:[r.jsx("button",{type:"button",onClick:()=>a("none"),className:"flex-1 py-3 bg-gray-100 text-gray-700 rounded-xl font-medium hover:bg-gray-200",children:"Cancel"}),r.jsx("button",{type:"submit",disabled:z||K.length!==6,className:"flex-1 py-3 bg-primary-600 text-white rounded-xl font-medium hover:bg-primary-700 disabled:opacity-50 flex items-center justify-center gap-2",children:z?r.jsx(Ke,{className:"w-5 h-5 animate-spin"}):"Enable 2FA"})]})]})]})}),s==="kyc"&&r.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:r.jsxs("div",{className:"bg-white rounded-2xl max-w-lg w-full p-6 max-h-[90vh] overflow-y-auto animate-slide-up",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"p-2 bg-primary-100 rounded-lg",children:r.jsx(Tl,{className:"w-5 h-5 text-primary-600"})}),r.jsx("h3",{className:"text-lg font-bold text-gray-900",children:"Identity Verification"})]}),r.jsx("button",{onClick:Tt,className:"p-2 hover:bg-gray-100 rounded-lg",children:r.jsx(Ct,{className:"w-5 h-5 text-gray-500"})})]}),!["success","failed","submitting"].includes(pe)&&r.jsx("div",{className:"flex items-center justify-between mb-6",children:[{step:"info",label:"Info",num:1},{step:"face-liveness",label:"Face",num:2},{step:"id-scan",label:"ID Scan",num:3},{step:"review",label:"Review",num:4}].map(({step:ze,label:wt,num:ts},bo)=>{const Oa=["info","face-liveness","id-scan","review"],Qk=Oa.indexOf(pe),pi=Oa.indexOf(ze)<Qk,gn=ze===pe;return r.jsxs("div",{className:"flex items-center",children:[r.jsxs("div",{className:"flex flex-col items-center",children:[r.jsx("div",{className:fe("w-8 h-8 rounded-full flex items-center justify-center text-sm font-bold transition-colors",pi?"bg-green-500 text-white":gn?"bg-primary-600 text-white":"bg-gray-200 text-gray-500"),children:pi?r.jsx(Hr,{className:"w-4 h-4"}):ts}),r.jsx("span",{className:"text-xs text-gray-500 mt-1",children:wt})]}),bo<3&&r.jsx("div",{className:fe("w-8 sm:w-12 h-1 mx-1",pi?"bg-green-500":"bg-gray-200")})]},ze)})}),pe==="info"&&r.jsxs("div",{className:"space-y-4",children:[r.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Please confirm your personal information before proceeding with verification."}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"First Name"}),r.jsx("input",{type:"text",value:le,onChange:ze=>me(ze.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-primary-500",required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Last Name"}),r.jsx("input",{type:"text",value:ve,onChange:ze=>Ze(ze.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-primary-500",required:!0})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Date of Birth"}),r.jsx("input",{type:"date",value:$e,onChange:ze=>Ne(ze.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-primary-500",required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nationality"}),r.jsxs("select",{value:He,onChange:ze=>gt(ze.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-primary-500",children:[r.jsx("option",{value:"Sierra Leonean",children:"Sierra Leonean"}),r.jsx("option",{value:"Other",children:"Other"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Address"}),r.jsx("input",{type:"text",placeholder:"Street address",value:yt.street,onChange:ze=>Vt(wt=>({...wt,street:ze.target.value})),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-primary-500 mb-2"}),r.jsx("input",{type:"text",placeholder:"City",value:yt.city,onChange:ze=>Vt(wt=>({...wt,city:ze.target.value})),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-primary-500"})]}),r.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-xl p-4 text-sm text-blue-700",children:[r.jsx("p",{className:"font-medium mb-1",children:"What's next:"}),r.jsxs("ul",{className:"space-y-1",children:[r.jsx("li",{children:"1. Face liveness verification (read text & turn head)"}),r.jsx("li",{children:"2. Scan your Sierra Leone National ID card"}),r.jsx("li",{children:"3. Review and submit"})]})]}),r.jsxs("div",{className:"flex gap-3 pt-4",children:[r.jsx("button",{onClick:Tt,className:"flex-1 py-3 bg-gray-100 text-gray-700 rounded-xl font-medium hover:bg-gray-200",children:"Cancel"}),r.jsxs("button",{onClick:()=>Se("face-liveness"),disabled:!le||!ve||!$e,className:"flex-1 py-3 bg-primary-600 text-white rounded-xl font-medium hover:bg-primary-700 disabled:opacity-50 flex items-center justify-center gap-2",children:[r.jsx(td,{className:"w-5 h-5"}),"Start Face Scan"]})]})]}),pe==="face-liveness"&&r.jsx(eH,{onComplete:wa,onCancel:()=>Se("info")}),pe==="id-scan"&&r.jsx(tH,{onComplete:qe,onCancel:()=>Se("face-liveness"),expectedName:{firstName:le,lastName:ve}}),pe==="review"&&r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"text-center mb-4",children:[r.jsx(Ae,{className:"w-16 h-16 text-green-500 mx-auto mb-2"}),r.jsx("h4",{className:"text-lg font-bold text-gray-900",children:"Verification Complete"}),r.jsx("p",{className:"text-sm text-gray-600",children:"Please review your information before submitting"})]}),r.jsxs("div",{className:"bg-gray-50 rounded-xl p-4 space-y-3",children:[r.jsx("h5",{className:"font-semibold text-gray-900",children:"Personal Information"}),r.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[r.jsx("span",{className:"text-gray-500",children:"Name:"}),r.jsxs("span",{className:"font-medium",children:[le," ",ve]}),r.jsx("span",{className:"text-gray-500",children:"Date of Birth:"}),r.jsx("span",{className:"font-medium",children:$e}),r.jsx("span",{className:"text-gray-500",children:"Nationality:"}),r.jsx("span",{className:"font-medium",children:He})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-700 mb-2",children:"Selfie"}),r.jsx("div",{className:"aspect-square bg-gray-100 rounded-xl overflow-hidden",children:Xe&&r.jsx("img",{src:`data:image/jpeg;base64,${Xe}`,alt:"Selfie",className:"w-full h-full object-cover"})})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-700 mb-2",children:"ID Card"}),r.jsx("div",{className:"aspect-square bg-gray-100 rounded-xl overflow-hidden",children:Ce&&r.jsx("img",{src:`data:image/jpeg;base64,${Ce}`,alt:"ID Card",className:"w-full h-full object-cover"})})]})]}),ht&&r.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-xl p-4",children:[r.jsx("h5",{className:"font-semibold text-green-900 mb-2",children:"ID Card Data"}),r.jsxs("div",{className:"text-sm space-y-1",children:[ht.documentNumber&&r.jsxs("p",{children:[r.jsx("span",{className:"text-green-700",children:"ID Number:"})," ",ht.documentNumber]}),ht.expiryDate&&r.jsxs("p",{children:[r.jsx("span",{className:"text-green-700",children:"Expiry:"})," ",ht.expiryDate]}),r.jsxs("p",{children:[r.jsx("span",{className:"text-green-700",children:"Confidence:"})," ",ht.confidence,"%"]})]})]}),Ur.length>0&&r.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-xl p-4",children:[r.jsx("p",{className:"font-medium text-yellow-700 mb-1",children:"Warnings:"}),r.jsx("ul",{className:"text-sm text-yellow-600 space-y-1",children:Ur.map((ze,wt)=>r.jsxs("li",{children:[" ",ze]},wt))})]}),r.jsxs("div",{className:"flex gap-3",children:[r.jsx("button",{onClick:()=>Se("id-scan"),className:"flex-1 py-3 bg-gray-100 text-gray-700 rounded-xl font-medium hover:bg-gray-200",children:"Back"}),r.jsx("button",{onClick:Ue,className:"flex-1 py-3 bg-primary-600 text-white rounded-xl font-medium hover:bg-primary-700 flex items-center justify-center gap-2",children:"Submit Verification"})]})]}),pe==="submitting"&&r.jsxs("div",{className:"text-center py-12",children:[r.jsx(Ke,{className:"w-16 h-16 animate-spin text-primary-600 mx-auto mb-4"}),r.jsx("h4",{className:"text-lg font-bold text-gray-900 mb-2",children:"Submitting Verification"}),r.jsx("p",{className:"text-gray-600",children:"Please wait while we process your documents..."})]}),pe==="success"&&r.jsxs("div",{className:"text-center py-8",children:[r.jsx("div",{className:"w-24 h-24 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:r.jsx(Ae,{className:"w-12 h-12 text-green-600"})}),r.jsx("h4",{className:"text-xl font-bold text-green-900 mb-2",children:"Verification Submitted!"}),r.jsx("p",{className:"text-gray-600 mb-6",children:"Your identity verification has been submitted successfully. We'll review your documents and notify you within 1-2 business days."}),r.jsx("button",{onClick:Tt,className:"w-full py-3 bg-primary-600 text-white rounded-xl font-medium hover:bg-primary-700",children:"Done"})]}),pe==="failed"&&r.jsxs("div",{className:"text-center py-8",children:[r.jsx("div",{className:"w-24 h-24 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:r.jsx(dt,{className:"w-12 h-12 text-red-600"})}),r.jsx("h4",{className:"text-xl font-bold text-red-900 mb-2",children:"Verification Failed"}),r.jsx("p",{className:"text-gray-600 mb-4",children:ke||"We were unable to verify your identity. Please try again."}),r.jsxs("div",{className:"flex gap-3",children:[r.jsx("button",{onClick:Tt,className:"flex-1 py-3 bg-gray-100 text-gray-700 rounded-xl font-medium hover:bg-gray-200",children:"Cancel"}),r.jsx("button",{onClick:()=>Se("info"),className:"flex-1 py-3 bg-primary-600 text-white rounded-xl font-medium hover:bg-primary-700",children:"Try Again"})]})]})]})})]})}function zpe(){const e=[{category:"Authentication",items:[{method:"POST",path:"/api/v1/auth/register",description:"Register a new user"},{method:"POST",path:"/api/v1/auth/login",description:"Login and get tokens"},{method:"POST",path:"/api/v1/auth/refresh",description:"Refresh access token"},{method:"POST",path:"/api/v1/auth/logout",description:"Logout and invalidate tokens"},{method:"GET",path:"/api/v1/auth/profile",description:"Get current user profile"}]},{category:"Wallets",items:[{method:"GET",path:"/api/v1/wallets",description:"List all wallets"},{method:"POST",path:"/api/v1/wallets",description:"Create a new wallet"},{method:"GET",path:"/api/v1/wallets/:id",description:"Get wallet details"},{method:"POST",path:"/api/v1/wallets/:id/deposit",description:"Deposit funds"},{method:"POST",path:"/api/v1/wallets/transfer",description:"Transfer between wallets"},{method:"POST",path:"/api/v1/wallets/:id/freeze",description:"Freeze wallet"},{method:"POST",path:"/api/v1/wallets/:id/unfreeze",description:"Unfreeze wallet"}]},{category:"Cards",items:[{method:"GET",path:"/api/v1/cards",description:"List all cards"},{method:"POST",path:"/api/v1/cards",description:"Create a new card"},{method:"GET",path:"/api/v1/cards/:id",description:"Get card details"},{method:"POST",path:"/api/v1/cards/:id/activate",description:"Activate card"},{method:"POST",path:"/api/v1/cards/:id/block",description:"Block card"},{method:"POST",path:"/api/v1/cards/:id/unblock",description:"Unblock card"},{method:"PATCH",path:"/api/v1/cards/:id/limits",description:"Update card limits"},{method:"GET",path:"/api/v1/cards/:id/details",description:"Get sensitive card details"}]},{category:"Transactions",items:[{method:"GET",path:"/api/v1/transactions",description:"List all transactions"},{method:"GET",path:"/api/v1/transactions/:id",description:"Get transaction details"},{method:"POST",path:"/api/v1/transactions/authorize",description:"Authorize a payment"},{method:"POST",path:"/api/v1/transactions/:id/capture",description:"Capture authorized payment"},{method:"POST",path:"/api/v1/transactions/:id/reverse",description:"Reverse a transaction"}]}],t=s=>{switch(s){case"GET":return"bg-green-100 text-green-700";case"POST":return"bg-blue-100 text-blue-700";case"PUT":return"bg-yellow-100 text-yellow-700";case"PATCH":return"bg-orange-100 text-orange-700";case"DELETE":return"bg-red-100 text-red-700";default:return"bg-gray-100 text-gray-700"}};return r.jsxs("div",{className:"min-h-screen bg-gray-50",children:[r.jsx("div",{className:"bg-white border-b border-gray-200",children:r.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"API Documentation"}),r.jsx("p",{className:"mt-2 text-gray-600",children:"Complete reference for the PaymentSystem REST API"})]}),r.jsxs("div",{className:"flex gap-4",children:[r.jsx("a",{href:"/api/docs",target:"_blank",children:r.jsxs(Oe,{variant:"outline",children:[r.jsx(da,{className:"w-4 h-4 mr-2"}),"Swagger UI"]})}),r.jsx("a",{href:"/",children:r.jsx(Oe,{variant:"outline",children:"Back to Home"})})]})]})})}),r.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-8",children:[r.jsx("div",{className:"lg:col-span-1",children:r.jsxs(se,{className:"sticky top-8",children:[r.jsx(pa,{children:r.jsx(ya,{className:"text-base",children:"Quick Links"})}),r.jsx("nav",{className:"space-y-1",children:e.map(s=>r.jsx("a",{href:`#${s.category.toLowerCase()}`,className:"block px-4 py-2 text-sm text-gray-600 hover:bg-gray-50 hover:text-gray-900 rounded-lg",children:s.category},s.category))}),r.jsxs("div",{className:"mt-6 px-4",children:[r.jsx("p",{className:"text-sm font-medium text-gray-900 mb-3",children:"Resources"}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("a",{href:"/api/docs",target:"_blank",className:"flex items-center text-sm text-gray-600 hover:text-gray-900",children:[r.jsx(UV,{className:"w-4 h-4 mr-2"}),"Swagger UI"]}),r.jsxs("a",{href:"#",className:"flex items-center text-sm text-gray-600 hover:text-gray-900",children:[r.jsx(j6,{className:"w-4 h-4 mr-2"}),"SDK Libraries"]}),r.jsxs("a",{href:"#",className:"flex items-center text-sm text-gray-600 hover:text-gray-900",children:[r.jsx(QV,{className:"w-4 h-4 mr-2"}),"Postman Collection"]})]})]})]})}),r.jsxs("div",{className:"lg:col-span-3 space-y-8",children:[r.jsxs(se,{children:[r.jsxs(pa,{children:[r.jsx(ya,{children:"Base URL"}),r.jsx(M0,{children:"All API requests should be made to:"})]}),r.jsx("div",{className:"bg-gray-900 rounded-lg p-4 font-mono text-sm text-green-400",children:"http://localhost:3000/api/v1"})]}),r.jsxs(se,{children:[r.jsxs(pa,{children:[r.jsx(ya,{children:"Authentication"}),r.jsx(M0,{children:"Most endpoints require authentication via Bearer token"})]}),r.jsx("div",{className:"bg-gray-900 rounded-lg p-4 font-mono text-sm text-gray-300 overflow-x-auto",children:r.jsx("pre",{children:`// Include in request headers
Authorization: Bearer <access_token>

// Example
curl -X GET http://localhost:3000/api/v1/wallets \\
  -H "Authorization: Bearer eyJhbGciOiJIUzI1NiIs..."`})})]}),e.map(s=>r.jsxs(se,{id:s.category.toLowerCase(),children:[r.jsx(pa,{children:r.jsx(ya,{children:s.category})}),r.jsx("div",{className:"divide-y divide-gray-100",children:s.items.map((a,n)=>r.jsxs("div",{className:"py-4 flex items-start gap-4",children:[r.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${t(a.method)}`,children:a.method}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("code",{className:"text-sm font-mono text-gray-900",children:a.path}),r.jsx("p",{className:"text-sm text-gray-500 mt-1",children:a.description})]})]},n))})]},s.category)),r.jsxs(se,{children:[r.jsxs(pa,{children:[r.jsx(ya,{children:"Example: Create a Card"}),r.jsx(M0,{children:"Full example of creating a virtual card"})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-700 mb-2",children:"Request"}),r.jsx("div",{className:"bg-gray-900 rounded-lg p-4 font-mono text-sm text-gray-300 overflow-x-auto",children:r.jsx("pre",{children:`POST /api/v1/cards
Content-Type: application/json
Authorization: Bearer <token>

{
  "walletId": "uuid-of-wallet",
  "type": "VIRTUAL",
  "cardholderName": "JOHN DOE",
  "dailyLimit": 1000,
  "monthlyLimit": 5000
}`})})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-700 mb-2",children:"Response (201 Created)"}),r.jsx("div",{className:"bg-gray-900 rounded-lg p-4 font-mono text-sm text-gray-300 overflow-x-auto",children:r.jsx("pre",{children:`{
  "id": "card-uuid",
  "walletId": "uuid-of-wallet",
  "maskedNumber": "**** **** **** 1234",
  "expiryMonth": 12,
  "expiryYear": 2027,
  "cardholderName": "JOHN DOE",
  "status": "INACTIVE",
  "type": "VIRTUAL",
  "dailyLimit": 1000,
  "monthlyLimit": 5000,
  "createdAt": "2024-11-29T10:00:00.000Z"
}`})})]})]})]}),r.jsxs(se,{children:[r.jsxs(pa,{children:[r.jsx(ya,{children:"Error Responses"}),r.jsx(M0,{children:"Standard error format for all endpoints"})]}),r.jsx("div",{className:"bg-gray-900 rounded-lg p-4 font-mono text-sm text-gray-300 overflow-x-auto",children:r.jsx("pre",{children:`// 400 Bad Request
{
  "statusCode": 400,
  "message": ["email must be a valid email"],
  "error": "Bad Request"
}

// 401 Unauthorized
{
  "statusCode": 401,
  "message": "Invalid credentials",
  "error": "Unauthorized"
}

// 404 Not Found
{
  "statusCode": 404,
  "message": "Card not found",
  "error": "Not Found"
}`})})]})]})]})})]})}class qpe{constructor(){wi(this,"TOKEN_VERSION","1");wi(this,"TOKEN_PREFIX","NFCPAY")}checkNFCCapabilities(){return typeof window>"u"?{available:!1,canRead:!1,canWrite:!1,reason:"Not in browser"}:"NDEFReader"in window?{available:!0,canRead:!0,canWrite:!0}:{available:!1,canRead:!1,canWrite:!1,reason:"Web NFC not supported. Available on Android Chrome 89+"}}generateNonce(){const t=new Uint8Array(16);return crypto.getRandomValues(t),Array.from(t,s=>s.toString(16).padStart(2,"0")).join("")}generateToken(){const t=Date.now().toString(36),s=crypto.getRandomValues(new Uint8Array(8)),a=Array.from(s,n=>n.toString(36)).join("");return`${this.TOKEN_PREFIX}_${t}_${a}`.toUpperCase()}generateSignature(t,s){const a=`${t}:${s}:${Date.now()}`;let n=0;for(let i=0;i<a.length;i++){const o=a.charCodeAt(i);n=(n<<5)-n+o,n=n&n}return Math.abs(n).toString(36).toUpperCase()}async generateReceiveToken(t,s,a,n=5){const i=this.generateToken(),o=this.generateNonce(),l=new Date(Date.now()+n*60*1e3).toISOString(),c=`${i}:${t}:${s}:${a||0}:${l}`,d=this.generateSignature(c,o),h={token:i,userId:t,walletId:s,amount:a,currency:"USD",expiresAt:l,nonce:o,signature:d};return await X.from("nfc_tokens").insert({token:i,user_id:t,wallet_id:s,amount:a,currency:"USD",nonce:o,signature:d,expires_at:l,status:"active"}),h}async generateSendToken(t,s,a,n=2){const i=this.generateToken(),o=this.generateNonce(),l=new Date(Date.now()+n*60*1e3).toISOString(),c=`SEND:${i}:${t}:${a}:${l}`,d=this.generateSignature(c,o),h={token:i,userId:t,walletId:s,amount:a,currency:"USD",expiresAt:l,nonce:o,signature:d};try{await X.from("nfc_tokens").insert({token:i,user_id:t,wallet_id:s,amount:a,currency:"USD",nonce:o,signature:d,expires_at:l,status:"active",type:"send"})}catch{}return h}async validateToken(t){const{data:s}=await X.from("nfc_tokens").select("*").eq("token",t).eq("status","active").single();if(!s)return{valid:!1,error:"Token not found or already used"};if(new Date(s.expires_at)<new Date)return{valid:!1,expired:!0,error:"Token has expired"};const a=`${t}:${s.user_id}:${s.wallet_id}:${s.amount||0}:${s.expires_at}`,n=this.generateSignature(a,s.nonce);if(s.signature!==n)return{valid:!1,error:"Invalid token signature"};const{data:i}=await X.from("users").select("id, first_name, last_name").eq("id",s.user_id).single();return{valid:!0,tokenData:{token:s.token,userId:s.user_id,walletId:s.wallet_id,amount:s.amount,currency:s.currency,expiresAt:s.expires_at,nonce:s.nonce,signature:s.signature},recipient:i?{id:i.id,name:`${i.first_name} ${i.last_name}`,walletId:s.wallet_id}:void 0}}async processPayment(t){const s=await this.validateToken(t.token);if(!s.valid)return{success:!1,error:s.error,errorCode:s.expired?"TOKEN_EXPIRED":"INVALID_TOKEN"};const a=s.tokenData;if(a.amount&&t.amount!==a.amount)return{success:!1,error:`Amount must be exactly $${a.amount}`,errorCode:"AMOUNT_MISMATCH"};const{data:n}=await X.from("wallets").select("id, balance").eq("id",t.senderWalletId).single();if(!n||n.balance<t.amount)return{success:!1,error:"Insufficient balance",errorCode:"INSUFFICIENT_BALANCE"};const i=`nfc_${Date.now()}_${Math.random().toString(36).substr(2,9)}`;try{await X.from("wallets").update({balance:n.balance-t.amount}).eq("id",t.senderWalletId);const{data:o}=await X.from("wallets").select("balance").eq("id",a.walletId).single();await X.from("wallets").update({balance:((o==null?void 0:o.balance)||0)+t.amount}).eq("id",a.walletId),await X.from("nfc_tokens").update({status:"used",used_at:new Date().toISOString(),transaction_id:i}).eq("token",t.token);try{await X.from("transactions").insert({external_id:i,wallet_id:t.senderWalletId,type:"TRANSFER",amount:-t.amount,currency:"USD",status:"COMPLETED",description:"NFC Payment",metadata:{nfc_token:t.token,recipient_wallet:a.walletId,method:"nfc"}})}catch{}return{success:!0,transactionId:i}}catch(o){return{success:!1,error:o.message||"Payment processing failed",errorCode:"PROCESSING_ERROR"}}}encodeForNFC(t){return btoa(JSON.stringify({v:this.TOKEN_VERSION,t:t.token,u:t.userId,w:t.walletId,a:t.amount,c:t.currency,e:t.expiresAt,n:t.nonce,s:t.signature}))}decodeFromNFC(t){try{const s=JSON.parse(atob(t));return{token:s.t,userId:s.u,walletId:s.w,amount:s.a,currency:s.c||"USD",expiresAt:s.e,nonce:s.n,signature:s.s}}catch{return null}}async startNFCReader(t,s){const a=this.checkNFCCapabilities();if(!a.available)return s(a.reason||"NFC not available"),null;try{const n=new NDEFReader;return await n.scan(),n.addEventListener("reading",({message:i})=>{for(const o of i.records)if(o.recordType==="text"){const c=new TextDecoder().decode(o.data),d=this.decodeFromNFC(c);d&&t(d)}}),n.addEventListener("error",()=>{s("NFC read error")}),{stop:()=>{}}}catch(n){return s(n.message||"Failed to start NFC reader"),null}}async writeToNFC(t){const s=this.checkNFCCapabilities();if(!s.canWrite)throw new Error(s.reason||"NFC write not available");try{const a=new NDEFReader,n=this.encodeForNFC(t);return await a.write({records:[{recordType:"text",data:n}]}),!0}catch(a){throw new Error(a.message||"Failed to write NFC tag")}}}const Nm=new qpe;function rH({userId:e,walletId:t,amount:s,mode:a,maxAmount:n,onTokenGenerated:i,onPaymentReceived:o,onError:l}){const[c,d]=p.useState(null),[h,f]=p.useState(null),[x,y]=p.useState(!1),[v,w]=p.useState(!1),[N,k]=p.useState("idle"),[C,E]=p.useState(""),[_,T]=p.useState(null);p.useEffect(()=>{const $=Nm.checkNFCCapabilities();d($)},[]);const A=async()=>{y(!0),k("idle"),E("");try{let $;a==="receive"?$=await Nm.generateReceiveToken(e,t,s):$=await Nm.generateSendToken(e,t,n||100),f($),k("ready"),i==null||i($);const W=new Date($.expiresAt).getTime();T(Math.max(0,Math.floor((W-Date.now())/1e3)))}catch($){k("error"),E($.message||"Failed to generate NFC token"),l==null||l($.message)}finally{y(!1)}};p.useEffect(()=>{if(_===null||_<=0)return;const $=setInterval(()=>{T(W=>W===null||W<=1?(clearInterval($),k("idle"),E("Token expired. Generate a new one."),0):W-1)},1e3);return()=>clearInterval($)},[_]);const P=async()=>{if(!(c!=null&&c.canRead)){k("error"),E("NFC reading not available on this device");return}w(!0),k("scanning"),E("Hold your device near another NFC device..."),await Nm.startNFCReader(async W=>{if(w(!1),k("success"),E("Payment received!"),a==="send"&&h){const I=await Nm.processPayment({token:W.token,senderId:e,senderWalletId:t,amount:W.amount||n||0});I.success?o==null||o(I.transactionId):(k("error"),E(I.error||"Payment failed"),l==null||l(I.error||"Payment failed"))}},W=>{w(!1),k("error"),E(W),l==null||l(W)})||w(!1)},M=$=>{const W=Math.floor($/60),I=$%60;return`${W}:${I.toString().padStart(2,"0")}`},R=_!==null&&_<=0;return c&&!c.available?r.jsxs("div",{className:"flex flex-col items-center p-6 bg-gray-50 rounded-xl",children:[r.jsx(goe,{className:"w-16 h-16 text-gray-300 mb-4"}),r.jsx("h3",{className:"text-lg font-semibold text-gray-700 mb-2",children:"NFC Not Available"}),r.jsx("p",{className:"text-sm text-gray-500 text-center",children:c.reason||"NFC is not supported on this device"}),r.jsx("p",{className:"text-xs text-gray-400 mt-2",children:"Try using QR code payment instead"})]}):r.jsxs("div",{className:"flex flex-col items-center p-6",children:[r.jsxs("div",{className:`relative mb-6 ${v?"animate-pulse":""}`,children:[r.jsx("div",{className:`w-32 h-32 rounded-full flex items-center justify-center ${N==="success"?"bg-green-100":N==="error"?"bg-red-100":N==="scanning"?"bg-blue-100":"bg-gray-100"}`,children:N==="success"?r.jsx(Ae,{className:"w-16 h-16 text-green-600"}):N==="error"?r.jsx(Wt,{className:"w-16 h-16 text-red-600"}):N==="scanning"?r.jsx(oi,{className:"w-16 h-16 text-blue-600 animate-pulse"}):r.jsx(Ws,{className:"w-16 h-16 text-gray-400"})}),v&&r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"absolute inset-0 rounded-full border-4 border-blue-400 animate-ping opacity-25"}),r.jsx("div",{className:"absolute inset-0 rounded-full border-4 border-blue-400 animate-ping opacity-25",style:{animationDelay:"0.5s"}})]})]}),r.jsx("div",{className:"text-center mb-4",children:x?r.jsxs("div",{className:"flex items-center gap-2 text-gray-500",children:[r.jsx(Ke,{className:"w-4 h-4 animate-spin"}),"Generating NFC token..."]}):N==="ready"&&h?r.jsxs(r.Fragment,{children:[r.jsx("p",{className:"text-lg font-medium text-gray-900",children:a==="receive"?"Ready to Receive":"Ready to Pay"}),s&&r.jsxs("p",{className:"text-2xl font-bold text-primary-600 mt-1",children:["$",s.toFixed(2)]})]}):N==="scanning"?r.jsx("p",{className:"text-gray-600",children:C}):N==="success"?r.jsx("p",{className:"text-green-600 font-medium",children:C}):N==="error"?r.jsx("p",{className:"text-red-600",children:C}):r.jsx("p",{className:"text-gray-500",children:"Generate an NFC token to start"})}),h&&_!==null&&_>0&&r.jsxs("div",{className:`flex items-center gap-2 px-3 py-1 rounded-full text-sm mb-4 ${_<30?"bg-red-100 text-red-700":_<60?"bg-yellow-100 text-yellow-700":"bg-green-100 text-green-700"}`,children:[r.jsx(dt,{className:"w-4 h-4"}),"Expires in ",M(_)]}),h&&!R&&r.jsxs("div",{className:"bg-gray-50 rounded-lg p-3 mb-4 text-center",children:[r.jsx("p",{className:"text-xs text-gray-400",children:"Token ID"}),r.jsxs("p",{className:"text-sm font-mono text-gray-600",children:[h.token.slice(0,20),"..."]})]}),r.jsx("div",{className:"flex gap-3",children:!h||R?r.jsx("button",{onClick:A,disabled:x,className:"flex items-center gap-2 px-6 py-3 bg-primary-600 text-white rounded-xl font-medium hover:bg-primary-700 disabled:opacity-50",children:x?r.jsxs(r.Fragment,{children:[r.jsx(Ke,{className:"w-5 h-5 animate-spin"}),"Generating..."]}):r.jsxs(r.Fragment,{children:[r.jsx(oi,{className:"w-5 h-5"}),"Generate NFC Token"]})}):r.jsxs(r.Fragment,{children:[r.jsxs("button",{onClick:A,className:"flex items-center gap-2 px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200",children:[r.jsx(Ot,{className:"w-4 h-4"}),"Regenerate"]}),(c==null?void 0:c.canRead)&&a==="send"&&r.jsx("button",{onClick:P,disabled:v,className:"flex items-center gap-2 px-6 py-3 bg-primary-600 text-white rounded-xl font-medium hover:bg-primary-700 disabled:opacity-50",children:v?r.jsxs(r.Fragment,{children:[r.jsx(Ke,{className:"w-5 h-5 animate-spin"}),"Scanning..."]}):r.jsxs(r.Fragment,{children:[r.jsx(oi,{className:"w-5 h-5"}),"Start Scanning"]})})]})}),r.jsx("div",{className:"mt-6 text-center",children:r.jsx("p",{className:"text-xs text-gray-400",children:a==="receive"?"Show this to the sender or tap devices together":"Tap your device to the recipient's device to pay"})})]})}function sH({amount:e,recipientName:t,onConfirm:s,disabled:a=!1,isProcessing:n=!1}){const[i,o]=p.useState(0),[l,c]=p.useState(!1),[d,h]=p.useState(!1),f=p.useRef(null),x=p.useRef(!1),y=p.useRef(0),v=85;p.useEffect(()=>{y.current=i},[i]),p.useEffect(()=>{if(!n&&d){const A=setTimeout(()=>{h(!1),o(0)},500);return()=>clearTimeout(A)}},[n,d]);const w=p.useCallback(()=>f.current?f.current.offsetWidth-64-8:200,[]),N=p.useCallback(A=>{if(!x.current||!f.current||a||n)return;const P=f.current.getBoundingClientRect(),M=w(),$=Math.max(0,Math.min(A-P.left-32,M))/M*100;o($),y.current=$},[a,n,w]),k=p.useCallback(async()=>{if(!x.current)return;const A=y.current;if(x.current=!1,c(!1),A>=v&&!a&&!n){h(!0),o(100);try{await s()}catch(P){console.error("Confirm error:",P),h(!1),o(0)}}else o(0)},[a,n,s]),C=p.useCallback(A=>{a||n||d||(x.current=!0,c(!0))},[a,n,d]),E=A=>{A.preventDefault(),C(A.clientX)},_=A=>{C(A.touches[0].clientX)};p.useEffect(()=>{const A=$=>{x.current&&N($.clientX)},P=()=>{x.current&&k()},M=$=>{x.current&&$.touches[0]&&N($.touches[0].clientX)},R=()=>{x.current&&k()};return window.addEventListener("mousemove",A),window.addEventListener("mouseup",P),window.addEventListener("touchmove",M,{passive:!0}),window.addEventListener("touchend",R),()=>{window.removeEventListener("mousemove",A),window.removeEventListener("mouseup",P),window.removeEventListener("touchmove",M),window.removeEventListener("touchend",R)}},[N,k]);const T=i/100*w();return r.jsxs("div",{ref:f,className:fe("relative h-16 rounded-2xl overflow-hidden select-none",a||n?"opacity-50 cursor-not-allowed":"cursor-grab",d?"bg-green-500":"bg-gradient-to-r from-primary-600 to-primary-500"),children:[r.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:r.jsx("div",{className:"flex items-center gap-2 text-white/80 font-medium",children:n?r.jsxs(r.Fragment,{children:[r.jsx(Ke,{className:"w-5 h-5 animate-spin"}),r.jsx("span",{children:"Processing..."})]}):d?r.jsxs(r.Fragment,{children:[r.jsx(Hr,{className:"w-5 h-5"}),r.jsx("span",{children:"Sent!"})]}):r.jsxs(r.Fragment,{children:[r.jsxs("span",{children:["Slide to send $",parseFloat(e).toFixed(2)]}),r.jsx(Qr,{className:"w-5 h-5 animate-pulse"})]})})}),r.jsx("div",{className:fe("absolute inset-y-0 left-0 transition-all duration-100",d?"bg-green-600":"bg-primary-700/30"),style:{width:`${i}%`}}),r.jsx("div",{onMouseDown:E,onTouchStart:_,className:fe("absolute top-1 bottom-1 left-1 w-14 rounded-xl flex items-center justify-center",l?"cursor-grabbing scale-105":"cursor-grab",d?"bg-white":"bg-white shadow-lg",a||n?"pointer-events-none":""),style:{transform:`translateX(${T}px)`,transition:l?"none":"transform 0.3s ease-out"},children:n?r.jsx(Ke,{className:"w-6 h-6 text-primary-600 animate-spin"}):d?r.jsx(Hr,{className:"w-6 h-6 text-green-600"}):r.jsx(Tn,{className:"w-6 h-6 text-primary-600"})})]})}function vA({isOpen:e,onClose:t,onVerify:s,amount:a,recipientName:n}){const[i,o]=p.useState(["","","",""]),[l,c]=p.useState(!1),[d,h]=p.useState(""),[f,x]=p.useState(0),y=p.useRef([]),v=3;p.useEffect(()=>{e&&(o(["","","",""]),h(""),c(!1),setTimeout(()=>{var T;(T=y.current[0])==null||T.focus()},100))},[e]);const w=(T,A)=>{var M;if(!/^\d*$/.test(A))return;const P=[...i];P[T]=A.slice(-1),o(P),h(""),A&&T<3&&((M=y.current[T+1])==null||M.focus()),P.every(R=>R!=="")&&!l&&C(P.join(""))},N=(T,A)=>{var P;A.key==="Backspace"&&!i[T]&&T>0&&((P=y.current[T-1])==null||P.focus())},k=T=>{T.preventDefault();const A=T.clipboardData.getData("text").replace(/\D/g,"").slice(0,4);if(A.length===4){const P=A.split("");o(P),C(A)}},C=async T=>{if(!(T.length!==4||l)){c(!0),h("");try{if(!await s(T)){const P=f+1;x(P),P>=v?(h("Too many failed attempts. Please try again later."),setTimeout(()=>{t()},2e3)):(h(`Incorrect PIN. ${v-P} attempts remaining.`),o(["","","",""]),setTimeout(()=>{var M;(M=y.current[0])==null||M.focus()},100))}}catch(A){h(A.message||"Verification failed"),o(["","","",""])}finally{c(!1)}}},E=T=>{const A=i.findIndex(P=>P==="");A!==-1&&w(A,T)},_=()=>{var A;const T=i.map((P,M)=>P!==""?M:-1).filter(P=>P!==-1).pop();if(T!==void 0){const P=[...i];P[T]="",o(P),(A=y.current[T])==null||A.focus()}};return e?r.jsxs("div",{className:"fixed inset-0 z-50 flex items-end sm:items-center justify-center",children:[r.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:t}),r.jsxs("div",{className:"relative w-full sm:max-w-md bg-white rounded-t-3xl sm:rounded-2xl shadow-2xl animate-slide-up",children:[r.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"p-2 bg-primary-100 rounded-xl",children:r.jsx(Kr,{className:"w-5 h-5 text-primary-600"})}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-semibold text-gray-900",children:"Enter Transaction PIN"}),r.jsx("p",{className:"text-sm text-gray-500",children:"Verify to send money"})]})]}),r.jsx("button",{onClick:t,disabled:l,className:"p-2 hover:bg-gray-100 rounded-lg",children:r.jsx(Ct,{className:"w-5 h-5 text-gray-500"})})]}),r.jsxs("div",{className:"p-6 space-y-6",children:[r.jsxs("div",{className:"p-4 bg-gray-50 rounded-xl text-center",children:[r.jsx("p",{className:"text-sm text-gray-500",children:"Sending"}),r.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:["$",parseFloat(a).toFixed(2)]}),r.jsxs("p",{className:"text-sm text-gray-600",children:["to ",n]})]}),r.jsx("div",{className:"flex justify-center gap-3",onPaste:k,children:i.map((T,A)=>r.jsx("input",{ref:P=>y.current[A]=P,type:"password",inputMode:"numeric",maxLength:1,value:T,onChange:P=>w(A,P.target.value),onKeyDown:P=>N(A,P),disabled:l||f>=v,className:fe("w-14 h-14 text-center text-2xl font-bold border-2 rounded-xl focus:ring-2 focus:ring-primary-500 focus:border-primary-500 transition-all",d?"border-red-300 bg-red-50":"border-gray-300",l&&"opacity-50")},A))}),d&&r.jsxs("div",{className:"flex items-center gap-2 p-3 bg-red-50 border border-red-200 rounded-lg",children:[r.jsx(dt,{className:"w-4 h-4 text-red-600 shrink-0"}),r.jsx("p",{className:"text-sm text-red-700",children:d})]}),l&&r.jsxs("div",{className:"flex items-center justify-center gap-2 text-primary-600",children:[r.jsx(Ke,{className:"w-5 h-5 animate-spin"}),r.jsx("span",{className:"font-medium",children:"Verifying..."})]}),r.jsx("div",{className:"grid grid-cols-3 gap-3",children:["1","2","3","4","5","6","7","8","9","","0","back"].map(T=>r.jsx("button",{onClick:()=>{T==="back"?_():T&&E(T)},disabled:!T||l||f>=v,className:fe("h-14 rounded-xl font-semibold text-xl transition-colors",T?"":"invisible",T==="back"?"bg-gray-100 text-gray-600 hover:bg-gray-200":"bg-gray-50 text-gray-900 hover:bg-gray-100 active:bg-gray-200",(l||f>=v)&&"opacity-50 cursor-not-allowed"),children:T==="back"?"":T},T))}),r.jsxs("p",{className:"text-center text-sm text-gray-500",children:["Forgot your PIN?"," ",r.jsx("a",{href:"/profile",className:"text-primary-600 font-medium hover:underline",children:"Reset in Profile"})]})]})]})]}):null}function wA({isOpen:e,onClose:t,onSuccess:s,userId:a}){const[n,i]=p.useState("intro"),[o,l]=p.useState(["","","",""]),[c,d]=p.useState(["","","",""]),[h,f]=p.useState(""),[x,y]=p.useState(!1),v=p.useRef([]),w=p.useRef([]);p.useEffect(()=>{e&&(i("intro"),l(["","","",""]),d(["","","",""]),f(""))},[e]),p.useEffect(()=>{n==="enter"?setTimeout(()=>{var T;return(T=v.current[0])==null?void 0:T.focus()},100):n==="confirm"&&setTimeout(()=>{var T;return(T=w.current[0])==null?void 0:T.focus()},100)},[n]);const N=(T,A,P=!1)=>{var R;if(!/^\d*$/.test(A))return;const M=P?[...c]:[...o];M[T]=A.slice(-1),P?d(M):l(M),f(""),A&&T<3&&((R=(P?w:v).current[T+1])==null||R.focus()),M.every($=>$!=="")&&(P?C(M.join("")):setTimeout(()=>i("confirm"),300))},k=(T,A,P=!1)=>{var $;const M=P?c:o,R=P?w:v;A.key==="Backspace"&&!M[T]&&T>0&&(($=R.current[T-1])==null||$.focus())},C=async T=>{const A=o.join("");if(A!==T){f("PINs do not match. Please try again."),d(["","","",""]),setTimeout(()=>{var P;return(P=w.current[0])==null?void 0:P.focus()},100);return}y(!0);try{const{error:P}=await X.from("users").update({transaction_pin:A,updated_at:new Date().toISOString()}).eq("id",a);if(P)throw P;s()}catch(P){f(P.message||"Failed to set PIN")}finally{y(!1)}},E=(T,A=!1)=>{const M=(A?c:o).findIndex(R=>R==="");M!==-1&&N(M,T,A)},_=(T=!1)=>{var M;const P=(T?c:o).map((R,$)=>R!==""?$:-1).filter(R=>R!==-1).pop();P!==void 0&&(N(P,"",T),(M=(T?w:v).current[P])==null||M.focus())};return e?r.jsxs("div",{className:"fixed inset-0 z-50 flex items-end sm:items-center justify-center",children:[r.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm"}),r.jsxs("div",{className:"relative w-full sm:max-w-md bg-white rounded-t-3xl sm:rounded-2xl shadow-2xl animate-slide-up",children:[r.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"p-2 bg-purple-100 rounded-xl",children:r.jsx(rr,{className:"w-5 h-5 text-purple-600"})}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-semibold text-gray-900",children:"Set Transaction PIN"}),r.jsx("p",{className:"text-sm text-gray-500",children:"Secure your transfers"})]})]}),r.jsx("button",{onClick:t,disabled:x,className:"p-2 hover:bg-gray-100 rounded-lg",children:r.jsx(Ct,{className:"w-5 h-5 text-gray-500"})})]}),r.jsxs("div",{className:"p-6 space-y-6",children:[n==="intro"&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"w-20 h-20 bg-purple-100 rounded-full flex items-center justify-center mx-auto mb-4",children:r.jsx(Kr,{className:"w-10 h-10 text-purple-600"})}),r.jsx("h4",{className:"text-lg font-semibold text-gray-900",children:"Protect Your Transfers"}),r.jsx("p",{className:"text-gray-500 mt-2",children:"Before you can send money, you need to set up a 4-digit transaction PIN. This PIN will be required every time you make a transfer."})]}),r.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-xl p-4",children:r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx(dt,{className:"w-5 h-5 text-yellow-600 shrink-0 mt-0.5"}),r.jsxs("div",{className:"text-sm text-yellow-800",children:[r.jsx("p",{className:"font-medium",children:"Important"}),r.jsx("p",{className:"mt-1",children:"Remember your PIN! You'll need it for all transfers. If you forget it, you can reset it from your profile settings."})]})]})}),r.jsx("button",{onClick:()=>i("enter"),className:"w-full py-4 bg-primary-600 text-white rounded-xl font-semibold hover:bg-primary-700 transition-colors",children:"Set Up PIN Now"}),r.jsx("button",{onClick:t,className:"w-full py-3 text-gray-500 font-medium hover:text-gray-700",children:"I'll do this later"})]}),n==="enter"&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"text-center",children:[r.jsx("h4",{className:"text-lg font-semibold text-gray-900",children:"Create Your PIN"}),r.jsx("p",{className:"text-gray-500 mt-1",children:"Enter a 4-digit PIN"})]}),r.jsx("div",{className:"flex justify-center gap-3",children:o.map((T,A)=>r.jsx("input",{ref:P=>v.current[A]=P,type:"password",inputMode:"numeric",maxLength:1,value:T,onChange:P=>N(A,P.target.value),onKeyDown:P=>k(A,P),className:"w-14 h-14 text-center text-2xl font-bold border-2 border-gray-300 rounded-xl focus:ring-2 focus:ring-primary-500 focus:border-primary-500"},A))}),r.jsx("div",{className:"grid grid-cols-3 gap-3",children:["1","2","3","4","5","6","7","8","9","","0","back"].map(T=>r.jsx("button",{onClick:()=>{T==="back"?_():T&&E(T)},disabled:!T,className:fe("h-14 rounded-xl font-semibold text-xl transition-colors",T?"":"invisible",T==="back"?"bg-gray-100 text-gray-600 hover:bg-gray-200":"bg-gray-50 text-gray-900 hover:bg-gray-100 active:bg-gray-200"),children:T==="back"?"":T},T))})]}),n==="confirm"&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"text-center",children:[r.jsx("h4",{className:"text-lg font-semibold text-gray-900",children:"Confirm Your PIN"}),r.jsx("p",{className:"text-gray-500 mt-1",children:"Re-enter your 4-digit PIN"})]}),h&&r.jsxs("div",{className:"flex items-center gap-2 p-3 bg-red-50 border border-red-200 rounded-lg",children:[r.jsx(dt,{className:"w-4 h-4 text-red-600 shrink-0"}),r.jsx("p",{className:"text-sm text-red-700",children:h})]}),r.jsx("div",{className:"flex justify-center gap-3",children:c.map((T,A)=>r.jsx("input",{ref:P=>w.current[A]=P,type:"password",inputMode:"numeric",maxLength:1,value:T,onChange:P=>N(A,P.target.value,!0),onKeyDown:P=>k(A,P,!0),disabled:x,className:fe("w-14 h-14 text-center text-2xl font-bold border-2 rounded-xl focus:ring-2 focus:ring-primary-500 focus:border-primary-500",h?"border-red-300 bg-red-50":"border-gray-300")},A))}),x&&r.jsxs("div",{className:"flex items-center justify-center gap-2 text-primary-600",children:[r.jsx(Ke,{className:"w-5 h-5 animate-spin"}),r.jsx("span",{className:"font-medium",children:"Setting up PIN..."})]}),r.jsx("div",{className:"grid grid-cols-3 gap-3",children:["1","2","3","4","5","6","7","8","9","","0","back"].map(T=>r.jsx("button",{onClick:()=>{T==="back"?_(!0):T&&E(T,!0)},disabled:!T||x,className:fe("h-14 rounded-xl font-semibold text-xl transition-colors",T?"":"invisible",T==="back"?"bg-gray-100 text-gray-600 hover:bg-gray-200":"bg-gray-50 text-gray-900 hover:bg-gray-100 active:bg-gray-200",x&&"opacity-50 cursor-not-allowed"),children:T==="back"?"":T},T))}),r.jsx("button",{onClick:()=>{i("enter"),l(["","","",""]),d(["","","",""]),f("")},disabled:x,className:"w-full py-3 text-gray-500 font-medium hover:text-gray-700 disabled:opacity-50",children:"Start Over"})]})]})]})]}):null}function Hpe(){const{user:e}=pt(),[t,s]=p.useState("method"),[a,n]=p.useState("search"),[i,o]=p.useState(null),[l,c]=p.useState(""),[d,h]=p.useState(""),[f,x]=p.useState(!1),[y,v]=p.useState(null),[w,N]=p.useState(""),[k,C]=p.useState(0),[E,_]=p.useState(0),[T,A]=p.useState([]),[P,M]=p.useState(!1),[R,$]=p.useState(!1),[W,I]=p.useState(!1),[B,O]=p.useState([]),[F,q]=p.useState(null);p.useEffect(()=>{cr.getDefaultCurrency().then(q)},[]);const H=(F==null?void 0:F.symbol)||"",K=Z=>`${H} ${Z.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}`;p.useEffect(()=>{e!=null&&e.id&&(z(),te(),V())},[e==null?void 0:e.id]),p.useEffect(()=>{const Z=sessionStorage.getItem("sendMoneyRecipient");if(Z)try{const Q=JSON.parse(Z);sessionStorage.removeItem("sendMoneyRecipient"),(async()=>{const{data:pe}=await X.from("wallets").select("id").eq("user_id",Q.id).eq("wallet_type","primary").single();pe&&(o({id:Q.id,name:`${Q.first_name} ${Q.last_name}`,firstName:Q.first_name,lastName:Q.last_name,username:Q.username||void 0,email:Q.email||void 0,phone:Q.phone||void 0,walletId:pe.id}),s("amount"))})()}catch(Q){console.error("Error parsing stored recipient:",Q),sessionStorage.removeItem("sendMoneyRecipient")}},[]),p.useEffect(()=>{const Z=parseFloat(l)||0,Q=Math.max(Z*.01,.1);_(Z>0?Q:0)},[l]);const V=async()=>{if(!(e!=null&&e.id))return;const{data:Z,error:Q}=await X.from("users").select("transaction_pin").eq("id",e.id).single();if(Q){console.error("Error checking transaction PIN:",Q),I(!1);return}const re=!!(Z!=null&&Z.transaction_pin);console.log("Transaction PIN check:",{hasPin:re,userId:e.id}),I(re)},z=async()=>{if(!(e!=null&&e.id))return;const{data:Z}=await X.from("wallets").select("id, balance, currency, wallet_type").eq("user_id",e.id).eq("status","ACTIVE").order("wallet_type",{ascending:!0});if(Z&&Z.length>0){A(Z);const Q=Z.find(Se=>Se.currency==="SLE"),re=Z.find(Se=>Se.wallet_type==="primary"),pe=Q||re||Z[0];N(pe.id),C(pe.balance),te(pe.id)}},G=Z=>{const Q=T.find(re=>re.id===Z);Q&&(N(Q.id),C(Q.balance))},te=async Z=>{const Q=Z||w;if(!Q)return;const{data:re}=await X.from("transactions").select("*").eq("wallet_id",Q).eq("type","TRANSFER").lt("amount",0).order("created_at",{ascending:!1}).limit(5);if(re&&re.length>0){const pe=re.map(Se=>{var je,Fe;return{id:Se.id,recipientName:((je=Se.metadata)==null?void 0:je.recipient_name)||"Unknown",recipientId:((Fe=Se.metadata)==null?void 0:Fe.recipient_id)||"",amount:Math.abs(Se.amount),date:Se.created_at,status:Se.status==="COMPLETED"?"completed":Se.status==="PENDING"?"pending":"failed"}});O(pe)}},he=async Z=>{var Q;Z.valid&&Z.recipient?(o({id:Z.recipient.id,name:Z.recipient.name,walletId:Z.recipient.walletId}),(Q=Z.data)!=null&&Q.amount&&c(Z.data.amount.toString()),s("amount")):(v({success:!1,error:Z.error||"Invalid QR code"}),s("result"))},ne=()=>{if(!(!i||!l||parseFloat(l)<=0)){if(parseFloat(l)>k){v({success:!1,error:"Insufficient balance"}),s("result");return}s("confirm")}},ce=()=>{if(console.log("handleSlideConfirm called, hasTransactionPin:",W),!W){console.log("Opening SetupPinModal"),$(!0);return}console.log("Opening TransactionPinModal"),M(!0)},xe=()=>{$(!1),I(!0),M(!0)},_e=async Z=>{if(!(e!=null&&e.id))return!1;const{data:Q}=await X.from("users").select("transaction_pin").eq("id",e.id).single();return(Q==null?void 0:Q.transaction_pin)===Z?(M(!1),await oe(),!0):!1},oe=async()=>{if(!i||!l||!(e!=null&&e.id)||!w)return;x(!0);const Z=parseFloat(l),Q=Z;try{const{data:re}=await X.from("wallets").select("balance").eq("id",w).single();if(!re||re.balance<Q){v({success:!1,error:"Insufficient balance"}),s("result");return}const pe=`txn_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,{error:Se}=await X.from("wallets").update({balance:re.balance-Q,updated_at:new Date().toISOString()}).eq("id",w);if(Se)throw Se;const{data:je}=await X.from("wallets").select("balance").eq("id",i.walletId).single();if(je){const Fe=Z-E;await X.from("wallets").update({balance:je.balance+Fe,updated_at:new Date().toISOString()}).eq("id",i.walletId)}await X.from("transactions").insert([{external_id:`${pe}_out`,wallet_id:w,type:"TRANSFER",amount:-Z,fee:E,currency:"USD",status:"COMPLETED",description:d||`Transfer to ${i.name}`,metadata:{recipient_id:i.id,recipient_wallet:i.walletId,recipient_name:i.name,method:a}},{external_id:`${pe}_in`,wallet_id:i.walletId,type:"TRANSFER",amount:Z-E,currency:"USD",status:"COMPLETED",description:d||`Transfer from ${e.firstName} ${e.lastName}`,metadata:{sender_id:e.id,sender_wallet:w,sender_name:`${e.firstName} ${e.lastName}`,method:a}}]),v({success:!0,transactionId:pe,fee:E}),s("result"),z()}catch(re){console.error("Transfer error:",re),v({success:!1,error:re.message||"Transfer failed. Please try again."}),s("result")}finally{x(!1)}},ie=()=>{s("method"),n("search"),o(null),c(""),h(""),v(null),z()},ge=()=>{switch(t){case"scan":s("method");break;case"recipient":s("method");break;case"amount":o(null),s(a==="search"?"recipient":"method");break;case"confirm":s("amount");break;default:s("method")}};return r.jsxs(dn,{children:[r.jsxs("div",{className:"max-w-2xl mx-auto space-y-6",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[t!=="method"&&t!=="result"&&r.jsx("button",{onClick:ge,className:"p-2 hover:bg-gray-100 rounded-lg",children:r.jsx(Ar,{className:"w-5 h-5"})}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Send Money"}),r.jsx("p",{className:"text-gray-500",children:"Transfer money instantly"})]})]}),r.jsx(se,{className:"p-4 bg-gradient-to-r from-primary-600 to-primary-500 text-white",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex-1",children:[r.jsx("p",{className:"text-sm text-primary-100",children:"Available Balance"}),r.jsx("p",{className:"text-3xl font-bold",children:K(k)}),T.length>0&&r.jsx("select",{value:w,onChange:Z=>G(Z.target.value),className:"mt-2 px-3 py-1.5 bg-white/20 border border-white/30 rounded-lg text-white text-sm focus:outline-none focus:ring-2 focus:ring-white/50 cursor-pointer",style:{colorScheme:"dark"},children:T.map(Z=>r.jsxs("option",{value:Z.id,className:"text-gray-900",children:[Z.currency," Wallet - ",K(Z.balance)]},Z.id))})]}),r.jsx("div",{className:"p-3 bg-white/20 rounded-xl",children:r.jsx(Rt,{className:"w-8 h-8"})})]})}),t==="method"&&r.jsxs(se,{className:"p-6 space-y-6",children:[r.jsx("h2",{className:"font-semibold text-gray-900",children:"How do you want to send?"}),r.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[r.jsxs("button",{onClick:()=>{n("search"),s("recipient")},className:"flex items-center gap-4 p-4 border-2 border-gray-200 rounded-xl hover:border-primary-500 hover:bg-primary-50 transition-colors text-left",children:[r.jsx("div",{className:"p-3 bg-blue-100 rounded-xl",children:r.jsx(Nr,{className:"w-6 h-6 text-blue-600"})}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-gray-900",children:"Search Recipient"}),r.jsx("p",{className:"text-sm text-gray-500",children:"Find by name, email or phone"})]})]}),r.jsxs("button",{onClick:()=>{n("qr"),s("scan")},className:"flex items-center gap-4 p-4 border-2 border-gray-200 rounded-xl hover:border-primary-500 hover:bg-primary-50 transition-colors text-left",children:[r.jsx("div",{className:"p-3 bg-purple-100 rounded-xl",children:r.jsx(Vs,{className:"w-6 h-6 text-purple-600"})}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-gray-900",children:"Scan QR Code"}),r.jsx("p",{className:"text-sm text-gray-500",children:"Scan recipient's payment QR"})]})]}),r.jsxs("button",{onClick:()=>{n("nfc"),s("scan")},className:"flex items-center gap-4 p-4 border-2 border-gray-200 rounded-xl hover:border-primary-500 hover:bg-primary-50 transition-colors text-left",children:[r.jsx("div",{className:"p-3 bg-green-100 rounded-xl",children:r.jsx(oi,{className:"w-6 h-6 text-green-600"})}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-gray-900",children:"NFC Tap to Pay"}),r.jsx("p",{className:"text-sm text-gray-500",children:"Tap devices together"})]})]})]})]}),t==="scan"&&a==="qr"&&r.jsx(se,{className:"p-6",children:r.jsx(gq,{onScan:he,onClose:()=>s("method")})}),t==="scan"&&a==="nfc"&&w&&(e==null?void 0:e.id)&&r.jsx(se,{className:"p-6",children:r.jsx(rH,{userId:e.id,walletId:w,mode:"send",maxAmount:k,onPaymentReceived:Z=>{v({success:!0,transactionId:Z}),s("result")},onError:Z=>{v({success:!1,error:Z}),s("result")}})}),t==="recipient"&&r.jsxs(se,{className:"p-6 space-y-4",children:[r.jsx("h2",{className:"font-semibold text-gray-900",children:"Find Recipient"}),r.jsx(uA,{placeholder:"Search by @username, phone, or name...",excludeUserId:e==null?void 0:e.id,autoFocus:!0,onSelect:async Z=>{const{data:Q}=await X.from("wallets").select("id").eq("user_id",Z.id).eq("wallet_type","primary").single();Q?(o({id:Z.id,name:`${Z.first_name} ${Z.last_name}`,firstName:Z.first_name,lastName:Z.last_name,username:Z.username||void 0,email:Z.email||void 0,phone:Z.phone||void 0,walletId:Q.id}),s("amount")):(v({success:!1,error:"This user does not have a wallet. They cannot receive payments."}),s("result"))}}),r.jsxs("div",{className:"p-4 bg-blue-50 rounded-xl",children:[r.jsx("p",{className:"text-sm text-blue-700 font-medium mb-2",children:"Search tips:"}),r.jsxs("ul",{className:"text-sm text-blue-600 space-y-1",children:[r.jsxs("li",{className:"flex items-center gap-2",children:[r.jsx(Dw,{className:"w-4 h-4"}),r.jsx("span",{children:"Search by username: @johndoe"})]}),r.jsxs("li",{className:"flex items-center gap-2",children:[r.jsx(Ss,{className:"w-4 h-4"}),r.jsx("span",{children:"Search by phone: +1234567890"})]}),r.jsxs("li",{className:"flex items-center gap-2",children:[r.jsx(br,{className:"w-4 h-4"}),r.jsx("span",{children:"Search by name: John Doe"})]})]})]})]}),t==="amount"&&i&&r.jsxs(se,{className:"p-6 space-y-6",children:[r.jsxs("div",{className:"flex items-center gap-3 p-4 bg-green-50 border border-green-200 rounded-xl",children:[r.jsx(S3,{firstName:i.firstName,lastName:i.lastName,profilePicture:i.profilePicture,size:"lg"}),r.jsxs("div",{className:"flex-1",children:[r.jsx("p",{className:"font-medium text-green-900",children:"Sending to"}),r.jsx("p",{className:"text-green-700",children:i.name}),i.username&&r.jsxs("p",{className:"text-xs text-green-500 flex items-center gap-1",children:[r.jsx(Dw,{className:"w-3 h-3"}),i.username]}),i.phone&&r.jsxs("p",{className:"text-xs text-green-500 flex items-center gap-1",children:[r.jsx(Ss,{className:"w-3 h-3"}),i.phone]})]}),r.jsx(Ae,{className:"w-6 h-6 text-green-600"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Amount"}),r.jsxs("div",{className:"relative",children:[r.jsx(Cr,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-6 h-6 text-gray-400"}),r.jsx("input",{type:"number",step:"0.01",min:"0.01",max:k,value:l,onChange:Z=>c(Z.target.value),placeholder:"0.00",className:"w-full pl-12 pr-4 py-4 border border-gray-300 rounded-xl text-2xl font-bold focus:ring-2 focus:ring-primary-500 focus:border-primary-500",autoFocus:!0})]}),r.jsx("div",{className:"flex gap-2 mt-3",children:[10,25,50,100].map(Z=>r.jsxs("button",{onClick:()=>c(Z.toString()),disabled:Z>k,className:"flex-1 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 disabled:opacity-50 font-medium",children:[H,Z]},Z))}),parseFloat(l)>0&&r.jsxs("div",{className:"mt-4 p-3 bg-gray-50 rounded-lg",children:[r.jsxs("div",{className:"flex justify-between text-sm",children:[r.jsx("span",{className:"text-gray-500",children:"Transfer fee (1%)"}),r.jsx("span",{className:"text-gray-700",children:K(E)})]}),r.jsxs("div",{className:"flex justify-between text-sm mt-1",children:[r.jsx("span",{className:"text-gray-500",children:"Recipient receives"}),r.jsx("span",{className:"font-medium text-gray-900",children:K(parseFloat(l)-E)})]})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Note (optional)"}),r.jsx("input",{type:"text",value:d,onChange:Z=>h(Z.target.value),placeholder:"What's this for?",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500"})]}),r.jsxs("button",{onClick:ne,disabled:!l||parseFloat(l)<=0||parseFloat(l)>k,className:"w-full py-4 bg-primary-600 text-white rounded-xl font-semibold flex items-center justify-center gap-2 hover:bg-primary-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:["Continue",r.jsx(os,{className:"w-5 h-5"})]})]}),t==="confirm"&&i&&r.jsxs(se,{className:"p-6 space-y-6",children:[r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"w-20 h-20 mx-auto mb-4",children:r.jsx(S3,{firstName:i.firstName,lastName:i.lastName,profilePicture:i.profilePicture,size:"xl"})}),r.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Confirm Transfer"}),r.jsxs("p",{className:"text-gray-500",children:["to ",i.name]})]}),r.jsxs("div",{className:"text-center py-4",children:[r.jsx("p",{className:"text-4xl font-bold text-primary-600",children:K(parseFloat(l))}),r.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["Recipient receives ",K(parseFloat(l)-E)]})]}),r.jsxs("div",{className:"bg-gray-50 rounded-xl p-4 space-y-3",children:[r.jsxs("div",{className:"flex justify-between text-sm",children:[r.jsx("span",{className:"text-gray-500",children:"To"}),r.jsx("span",{className:"font-medium",children:i.name})]}),i.phone&&r.jsxs("div",{className:"flex justify-between text-sm",children:[r.jsx("span",{className:"text-gray-500",children:"Phone"}),r.jsx("span",{className:"text-gray-700",children:i.phone})]}),r.jsxs("div",{className:"flex justify-between text-sm",children:[r.jsx("span",{className:"text-gray-500",children:"Amount"}),r.jsx("span",{className:"font-medium",children:K(parseFloat(l))})]}),r.jsxs("div",{className:"flex justify-between text-sm",children:[r.jsx("span",{className:"text-gray-500",children:"Fee"}),r.jsx("span",{className:"text-gray-700",children:K(E)})]}),d&&r.jsx("div",{className:"border-t border-gray-200 pt-3",children:r.jsxs("span",{className:"text-gray-500 text-sm",children:["Note: ",d]})})]}),r.jsxs("div",{className:"p-4 bg-yellow-50 border border-yellow-200 rounded-lg flex items-start gap-3",children:[r.jsx(dt,{className:"w-5 h-5 text-yellow-600 shrink-0 mt-0.5"}),r.jsx("p",{className:"text-sm text-yellow-800",children:"Please verify the recipient details. Transfers cannot be reversed."})]}),W&&r.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-500",children:[r.jsx(Kr,{className:"w-4 h-4"}),r.jsx("span",{children:"Transaction PIN required to complete"})]}),r.jsx(sH,{amount:l,recipientName:i.name,onConfirm:ce,disabled:f,isProcessing:f}),r.jsx("button",{onClick:ge,disabled:f,className:"w-full py-3 text-gray-600 font-medium hover:text-gray-800 disabled:opacity-50",children:"Go Back"})]}),t==="result"&&y&&r.jsx(se,{className:"p-6 space-y-6 text-center",children:y.success?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"w-20 h-20 bg-green-100 rounded-full flex items-center justify-center mx-auto",children:r.jsx(Ae,{className:"w-10 h-10 text-green-600"})}),r.jsxs("div",{children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Transfer Successful!"}),r.jsxs("p",{className:"text-gray-500 mt-2",children:["You sent ",K(parseFloat(l))," to ",i==null?void 0:i.name]})]}),y.transactionId&&r.jsxs("div",{className:"bg-gray-50 rounded-xl p-4",children:[r.jsx("p",{className:"text-sm text-gray-500",children:"Transaction ID"}),r.jsx("p",{className:"text-sm font-mono text-gray-700 break-all",children:y.transactionId})]}),r.jsx("button",{onClick:ie,className:"w-full py-4 bg-primary-600 text-white rounded-xl font-semibold hover:bg-primary-700 transition-colors",children:"Send More Money"})]}):r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"w-20 h-20 bg-red-100 rounded-full flex items-center justify-center mx-auto",children:r.jsx(Wt,{className:"w-10 h-10 text-red-600"})}),r.jsxs("div",{children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Transfer Failed"}),r.jsx("p",{className:"text-gray-500 mt-2",children:y.error})]}),r.jsx("button",{onClick:ie,className:"w-full py-4 bg-primary-600 text-white rounded-xl font-semibold hover:bg-primary-700 transition-colors",children:"Try Again"})]})})]}),r.jsx(vA,{isOpen:P,onClose:()=>M(!1),onVerify:_e,amount:l,recipientName:(i==null?void 0:i.name)||""}),r.jsx(wA,{isOpen:R,onClose:()=>$(!1),onSuccess:xe,userId:(e==null?void 0:e.id)||""})]})}function Kpe(){const{user:e}=pt(),[t,s]=p.useState("qr"),[a,n]=p.useState(""),[i,o]=p.useState(""),[l,c]=p.useState(""),[d,h]=p.useState(0),[f,x]=p.useState(""),[y,v]=p.useState(!1),[w,N]=p.useState(!1),[k,C]=p.useState(!0),[E,_]=p.useState(null),[T,A]=p.useState(null);p.useEffect(()=>{cr.getDefaultCurrency().then(A)},[]);const P=(T==null?void 0:T.symbol)||"Le",M=O=>`${P} ${O.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}`;p.useEffect(()=>{e!=null&&e.id&&R()},[e==null?void 0:e.id]);const R=async()=>{C(!0),_(null);try{const{data:O,error:F}=await X.from("wallets").select("id, balance").eq("user_id",e==null?void 0:e.id).eq("wallet_type","primary").single();if(F){console.error("Wallet fetch error:",F),_("Failed to load wallet");return}O?(c(O.id),h(O.balance)):_("No wallet found")}catch(O){console.error("Wallet fetch exception:",O),_("Failed to load wallet")}finally{C(!1)}},$=()=>{const O=window.location.origin,F=new URLSearchParams({to:(e==null?void 0:e.id)||"",...a&&{amount:a},...i&&{note:i}}),q=`${O}/pay?${F.toString()}`;return x(q),q},W=async()=>{const O=f||$();await navigator.clipboard.writeText(O),v(!0),setTimeout(()=>v(!1),2e3)},I=async()=>{const O=f||$();if(navigator.share)try{await navigator.share({title:"Payment Request",text:a?`Pay me ${P}${a}`:"Send me money",url:O})}catch{}},B=parseFloat(a)||void 0;return r.jsx(dn,{children:r.jsxs("div",{className:"max-w-2xl mx-auto space-y-6",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Receive Money"}),r.jsx("p",{className:"text-gray-500",children:"Get paid via QR code, NFC, or payment link"})]}),r.jsx(se,{className:"p-4 bg-gradient-to-r from-green-600 to-green-500 text-white",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-green-100",children:"Current Balance"}),r.jsx("p",{className:"text-3xl font-bold",children:M(d)})]}),r.jsx("div",{className:"p-3 bg-white/20 rounded-xl",children:r.jsx(Rt,{className:"w-8 h-8"})})]})}),r.jsxs(se,{className:"p-4",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("label",{className:"font-medium text-gray-700",children:"Request specific amount?"}),r.jsx("button",{onClick:()=>N(!w),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${w?"bg-primary-600":"bg-gray-200"}`,children:r.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${w?"translate-x-6":"translate-x-1"}`})})]}),w&&r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"Amount"}),r.jsxs("div",{className:"relative",children:[r.jsx(Cr,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),r.jsx("input",{type:"number",step:"0.01",min:"0",value:a,onChange:O=>n(O.target.value),placeholder:"0.00",className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg text-xl font-semibold focus:ring-2 focus:ring-primary-500 focus:border-primary-500"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"Description (optional)"}),r.jsx("input",{type:"text",value:i,onChange:O=>o(O.target.value),placeholder:"What's this for?",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500"})]})]})]}),r.jsx("div",{className:"flex gap-2",children:[{key:"qr",label:"QR Code",icon:Vs},{key:"nfc",label:"NFC Tap",icon:oi},{key:"link",label:"Link",icon:Kp}].map(({key:O,label:F,icon:q})=>r.jsxs("button",{onClick:()=>s(O),className:`flex-1 py-3 px-4 rounded-lg flex items-center justify-center gap-2 font-medium transition-colors ${t===O?"bg-primary-600 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:[r.jsx(q,{className:"w-5 h-5"}),F]},O))}),r.jsxs(se,{className:"p-6",children:[k&&r.jsxs("div",{className:"flex flex-col items-center justify-center p-8",children:[r.jsx("div",{className:"w-12 h-12 border-4 border-primary-600 border-t-transparent rounded-full animate-spin mb-4"}),r.jsx("p",{className:"text-gray-500",children:"Loading wallet..."})]}),!k&&E&&r.jsxs("div",{className:"flex flex-col items-center justify-center p-8 text-center",children:[r.jsx(Vs,{className:"w-12 h-12 text-gray-300 mb-4"}),r.jsx("p",{className:"text-gray-500 font-medium",children:"Unable to load QR code"}),r.jsx("p",{className:"text-red-500 text-sm mt-2",children:E}),r.jsx("button",{onClick:R,className:"mt-4 px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700",children:"Try Again"})]}),t==="qr"&&!k&&!E&&(e==null?void 0:e.id)&&l&&r.jsx(Mq,{userId:e.id,walletId:l,amount:B,description:i,type:B?"dynamic":"static",size:250}),t==="nfc"&&!k&&!E&&(e==null?void 0:e.id)&&l&&r.jsx(rH,{userId:e.id,walletId:l,amount:B,mode:"receive",onPaymentReceived:O=>{console.log("Payment received:",O),R()}}),t==="link"&&r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"text-center",children:[r.jsx(Kp,{className:"w-16 h-16 text-primary-600 mx-auto mb-4"}),r.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Payment Link"}),r.jsx("p",{className:"text-gray-500 text-sm mt-1",children:"Share this link to receive payments"})]}),r.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[r.jsx("p",{className:"text-xs text-gray-500 mb-2",children:"Your payment link:"}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("input",{type:"text",readOnly:!0,value:f||$(),className:"flex-1 px-3 py-2 bg-white border border-gray-300 rounded-lg text-sm font-mono truncate"}),r.jsx("button",{onClick:W,className:"p-2 bg-white border border-gray-300 rounded-lg hover:bg-gray-50",children:y?r.jsx(Ae,{className:"w-5 h-5 text-green-600"}):r.jsx(Pr,{className:"w-5 h-5 text-gray-500"})})]})]}),r.jsxs("div",{className:"flex gap-3",children:[r.jsx("button",{onClick:W,className:"flex-1 flex items-center justify-center gap-2 px-4 py-3 bg-gray-100 text-gray-700 rounded-xl font-medium hover:bg-gray-200",children:y?r.jsxs(r.Fragment,{children:[r.jsx(Ae,{className:"w-5 h-5 text-green-600"}),"Copied!"]}):r.jsxs(r.Fragment,{children:[r.jsx(Pr,{className:"w-5 h-5"}),"Copy Link"]})}),typeof navigator<"u"&&"share"in navigator&&r.jsxs("button",{onClick:I,className:"flex-1 flex items-center justify-center gap-2 px-4 py-3 bg-primary-600 text-white rounded-xl font-medium hover:bg-primary-700",children:[r.jsx(YV,{className:"w-5 h-5"}),"Share"]})]}),B&&r.jsxs("div",{className:"text-center p-4 bg-green-50 rounded-lg",children:[r.jsx("p",{className:"text-sm text-green-600",children:"Requesting"}),r.jsx("p",{className:"text-2xl font-bold text-green-700",children:M(B)})]})]})]}),r.jsxs(se,{className:"p-4 bg-blue-50 border-blue-200",children:[r.jsx("h4",{className:"font-medium text-blue-900 mb-2",children:"How it works"}),r.jsxs("ul",{className:"text-sm text-blue-700 space-y-1",children:[t==="qr"&&r.jsxs(r.Fragment,{children:[r.jsx("li",{children:"1. Show the QR code to the sender"}),r.jsx("li",{children:"2. They scan it with their camera or app"}),r.jsx("li",{children:"3. Payment is sent directly to your wallet"})]}),t==="nfc"&&r.jsxs(r.Fragment,{children:[r.jsx("li",{children:"1. Generate an NFC token"}),r.jsx("li",{children:"2. Tap your phone to the sender's phone"}),r.jsx("li",{children:"3. Payment is transferred instantly"})]}),t==="link"&&r.jsxs(r.Fragment,{children:[r.jsx("li",{children:"1. Copy or share the payment link"}),r.jsx("li",{children:"2. Sender opens the link and confirms"}),r.jsx("li",{children:"3. Money arrives in your wallet"})]})]})]})]})})}const Gpe="/api",Ype={m17:{name:"Orange Money",color:"text-orange-600",icon:"OM",bgColor:"bg-orange-100"},m18:{name:"Africell Money",color:"text-blue-600",icon:"AF",bgColor:"bg-blue-100"}},Xpe=["72","73","74","75","76","78","79"],Qpe=["30","33","77","80","88","90","99"];function Zpe(e){const t=e.replace(/\s+/g,"").replace(/^(\+232|232|0)/,"");if(t.length<2)return null;const s=t.substring(0,2);return Xpe.includes(s)?"m17":Qpe.includes(s)?"m18":null}function Jpe(){const{user:e}=pt(),{data:t,isLoading:s,refetch:a}=mi(),[n,i]=p.useState("form"),[o,l]=p.useState(""),[c,d]=p.useState(null),[h,f]=p.useState(""),[x,y]=p.useState(""),[v,w]=p.useState(""),[N,k]=p.useState(0),[C,E]=p.useState(0),[_,T]=p.useState(""),[A,P]=p.useState(null),[M,R]=p.useState([]),[$,W]=p.useState([]);p.useEffect(()=>{cr.getCurrencies().then(R)},[]),p.useEffect(()=>{if(t&&t.length>0&&!o){const z=t.find(he=>he.status==="ACTIVE"&&he.currency==="SLE"),G=t.find(he=>he.status==="ACTIVE"),te=z||G||t[0];l(te.id)}},[t,o]),p.useEffect(()=>{const z=Zpe(h);d(z)},[h]),p.useEffect(()=>{const z=parseFloat(x)||0;if(z>0){let G=Math.round(z*.02*100)/100;k(G),E(z+G)}else k(0),E(0)},[x]);const I=z=>{var G;return z==="SLE"?"Le":((G=M.find(te=>te.code===z))==null?void 0:G.symbol)||z},B=(z,G)=>`${I(G)} ${z.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}`,O=z=>{const G=z.replace(/\s+/g,"").replace(/^(\+232|232)/,"");return/^[0-9]{8}$/.test(G)},F=()=>{if(T(""),!o){T("Please select a wallet");return}if(!h||!O(h)){T("Please enter a valid phone number (8 digits)");return}if(!c){T("Unable to detect network. Please enter a valid Orange or Africell number.");return}const z=parseFloat(x);if(!z||z<=0){T("Please enter a valid amount");return}if(z<1){T("Minimum amount is Le 1");return}const G=t==null?void 0:t.find(te=>te.id===o);if(!G||G.balance<C){T(`Insufficient balance. You need ${B(C,"SLE")} (including fee)`);return}i("confirm")},q=async()=>{if(!(!e||!c)){i("processing"),T("");try{const z=await fetch(`${Gpe}/router/mobile-money/send`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({amount:parseFloat(x),currency:"SLE",phoneNumber:h,providerId:c,userId:e.id,walletId:o,description:v||void 0})}),G=await z.json();if(!z.ok||!G.success)throw new Error(G.error||"Failed to send money");P(G.transactionId),i("success"),a()}catch(z){console.error("Send to mobile money error:",z),T(z.message||"Failed to send money. Please try again."),i("error")}}},H=()=>{i("form"),f(""),y(""),w(""),T(""),P(null)},K=t==null?void 0:t.find(z=>z.id===o),V=c?Ype[c]:{name:"Mobile Money",color:"text-gray-600",icon:"?",bgColor:"bg-gray-100"};return r.jsx(dn,{children:r.jsxs("div",{className:"max-w-2xl mx-auto space-y-6",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[n==="confirm"&&r.jsx("button",{onClick:()=>i("form"),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg",children:r.jsx(Ar,{className:"w-5 h-5 text-gray-600 dark:text-gray-400"})}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Mobile Money Payout"}),r.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Send money to Orange Money or Africell"})]})]}),K&&r.jsx(se,{className:"p-4 bg-gradient-to-r from-orange-600 to-orange-500 text-white",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-orange-100",children:"Available Balance"}),r.jsx("p",{className:"text-3xl font-bold",children:B(K.balance,K.currency)}),r.jsxs("p",{className:"text-sm text-orange-200 mt-1",children:[K.currency," Wallet"]})]}),r.jsx("div",{className:"p-3 bg-white/20 rounded-xl",children:r.jsx(Rt,{className:"w-8 h-8"})})]})}),n==="form"&&r.jsxs(se,{className:"p-6 space-y-6",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Recipient Phone Number"}),r.jsxs("div",{className:"relative",children:[r.jsx("span",{className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-500 font-medium",children:"+232"}),r.jsx("input",{type:"tel",value:h,onChange:z=>f(z.target.value.replace(/\D/g,"").slice(0,8)),placeholder:"76123456",className:"w-full pl-16 pr-4 py-4 text-lg border border-gray-300 dark:border-gray-600 rounded-xl focus:outline-none focus:ring-2 focus:ring-orange-500 bg-white dark:bg-gray-800 text-gray-900 dark:text-white"})]}),h.length>=2&&r.jsx("div",{className:"mt-3",children:c?r.jsxs("div",{className:`inline-flex items-center gap-2 px-3 py-2 rounded-lg ${V.bgColor}`,children:[r.jsx("span",{className:`font-bold text-sm ${V.color}`,children:V.icon}),r.jsx("span",{className:`font-medium text-sm ${V.color}`,children:V.name}),r.jsx("span",{className:"text-xs text-gray-500",children:"detected"})]}):r.jsxs("div",{className:"inline-flex items-center gap-2 px-3 py-2 rounded-lg bg-red-50 dark:bg-red-900/20",children:[r.jsx(dt,{className:"w-4 h-4 text-red-500"}),r.jsx("span",{className:"text-sm text-red-600 dark:text-red-400",children:"Unknown network. Enter Orange or Africell number."})]})}),r.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"Orange: 72-76, 78-79 | Africell: 30, 33, 77, 80, 88, 90, 99"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Amount"}),r.jsxs("div",{className:"relative",children:[r.jsx("span",{className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-500 font-medium",children:"Le"}),r.jsx("input",{type:"number",min:"1",step:"0.01",value:x,onChange:z=>y(z.target.value),placeholder:"10",className:"w-full pl-12 pr-4 py-4 text-2xl font-bold border border-gray-300 dark:border-gray-600 rounded-xl focus:outline-none focus:ring-2 focus:ring-orange-500 bg-white dark:bg-gray-800 text-gray-900 dark:text-white"})]}),r.jsx("div",{className:"flex gap-2 mt-3",children:[5,10,25,50].map(z=>r.jsxs("button",{onClick:()=>y(z.toString()),disabled:K&&z*1.02>K.balance,className:"flex-1 py-2 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 disabled:opacity-50 font-medium text-sm",children:["Le ",z]},z))}),C>0&&r.jsxs("div",{className:"mt-4 p-4 bg-gray-50 dark:bg-gray-800 rounded-xl space-y-2",children:[r.jsxs("div",{className:"flex justify-between text-sm",children:[r.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Amount"}),r.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:B(parseFloat(x)||0,"SLE")})]}),r.jsxs("div",{className:"flex justify-between text-sm",children:[r.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Fee (2%)"}),r.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:B(N,"SLE")})]}),r.jsxs("div",{className:"flex justify-between font-semibold pt-2 border-t border-gray-200 dark:border-gray-700",children:[r.jsx("span",{className:"text-gray-900 dark:text-white",children:"Total Deduction"}),r.jsx("span",{className:"text-orange-600",children:B(C,"SLE")})]})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Pay from Wallet"}),s?r.jsx("div",{className:"flex items-center justify-center py-4",children:r.jsx(Ke,{className:"w-5 h-5 animate-spin text-primary-600"})}):t&&t.length>0?r.jsx("div",{className:"space-y-2 max-h-40 overflow-y-auto overscroll-contain",style:{WebkitOverflowScrolling:"touch"},children:t.filter(z=>z.status==="ACTIVE").map(z=>r.jsxs("button",{type:"button",onClick:()=>l(z.id),className:`w-full flex items-center gap-3 p-4 rounded-xl border-2 transition-all ${o===z.id?"border-orange-500 bg-orange-50 dark:bg-orange-900/20":"border-gray-200 dark:border-gray-700 hover:border-gray-300"}`,children:[r.jsx(Rt,{className:`w-5 h-5 ${o===z.id?"text-orange-600":"text-gray-500"}`}),r.jsxs("div",{className:"flex-1 text-left",children:[r.jsxs("p",{className:`font-medium ${o===z.id?"text-orange-700 dark:text-orange-300":"text-gray-900 dark:text-white"}`,children:[z.currency," Wallet"]}),r.jsx("p",{className:"text-sm text-gray-500",children:B(z.balance,z.currency)})]}),o===z.id&&r.jsx(Ae,{className:"w-5 h-5 text-orange-600"})]},z.id))}):r.jsx("p",{className:"text-sm text-gray-500 text-center py-4",children:"No wallets available"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Description (optional)"}),r.jsx("input",{type:"text",value:v,onChange:z=>w(z.target.value),placeholder:"What's this for?",className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-xl focus:outline-none focus:ring-2 focus:ring-orange-500 bg-white dark:bg-gray-800 text-gray-900 dark:text-white"})]}),_&&r.jsxs("div",{className:"p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-xl flex items-center gap-3 text-red-700 dark:text-red-400",children:[r.jsx(dt,{className:"w-5 h-5 flex-shrink-0"}),r.jsx("span",{children:_})]}),r.jsxs("div",{className:"p-4 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-xl flex items-start gap-3",children:[r.jsx($N,{className:"w-5 h-5 text-blue-600 dark:text-blue-400 flex-shrink-0 mt-0.5"}),r.jsxs("div",{className:"text-sm text-blue-700 dark:text-blue-300",children:[r.jsx("p",{className:"font-medium",children:"Transfer Information"}),r.jsxs("ul",{className:"mt-1 space-y-1 text-blue-600 dark:text-blue-400",children:[r.jsx("li",{children:" Transfers complete within minutes"}),r.jsx("li",{children:" 2% fee applies"}),r.jsx("li",{children:" Minimum transfer: Le 1"})]})]})]}),r.jsxs(Oe,{onClick:F,disabled:!x||!h||!c,className:"w-full py-4 bg-orange-600 hover:bg-orange-700 text-white font-semibold rounded-xl flex items-center justify-center gap-2",children:["Continue",r.jsx(os,{className:"w-5 h-5"})]})]}),n==="confirm"&&r.jsxs(se,{className:"p-6 space-y-6",children:[r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:`w-20 h-20 mx-auto mb-4 ${V.bgColor} rounded-full flex items-center justify-center`,children:r.jsx("span",{className:"text-4xl",children:V.icon})}),r.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Confirm Transfer"}),r.jsxs("p",{className:"text-gray-500 dark:text-gray-400",children:["to ",V.name]})]}),r.jsxs("div",{className:"text-center py-4",children:[r.jsx("p",{className:"text-4xl font-bold text-orange-600",children:B(parseFloat(x),"SLE")}),r.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["Total deduction: ",B(C,"SLE")]})]}),r.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800 rounded-xl p-4 space-y-3",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"text-sm text-gray-500",children:"Sending to"}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-lg",children:V.icon}),r.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:V.name})]})]}),r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"text-sm text-gray-500",children:"Phone Number"}),r.jsxs("span",{className:"font-medium text-gray-900 dark:text-white",children:["+232 ",h]})]}),r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"text-sm text-gray-500",children:"Amount"}),r.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:B(parseFloat(x),"SLE")})]}),r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"text-sm text-gray-500",children:"Fee"}),r.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:B(N,"SLE")})]}),r.jsxs("div",{className:"flex justify-between items-center pt-2 border-t border-gray-200 dark:border-gray-700",children:[r.jsx("span",{className:"font-medium text-gray-700 dark:text-gray-300",children:"Total Deduction"}),r.jsx("span",{className:"font-bold text-lg text-orange-600",children:B(C,"SLE")})]})]}),r.jsxs("div",{className:"p-4 bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-xl flex items-start gap-3",children:[r.jsx(dt,{className:"w-5 h-5 text-yellow-600 dark:text-yellow-400 flex-shrink-0 mt-0.5"}),r.jsx("p",{className:"text-sm text-yellow-800 dark:text-yellow-200",children:"Please verify the phone number is correct. Transfers cannot be reversed once sent."})]}),r.jsxs("div",{className:"flex gap-3",children:[r.jsx(Oe,{variant:"outline",className:"flex-1 py-4",onClick:()=>i("form"),children:"Back"}),r.jsxs(Oe,{className:"flex-1 py-4 bg-orange-600 hover:bg-orange-700",onClick:q,children:["Send ",B(parseFloat(x),"SLE")]})]})]}),n==="processing"&&r.jsx(se,{className:"p-8",children:r.jsxs("div",{className:"flex flex-col items-center justify-center py-12",children:[r.jsx("div",{className:"relative",children:r.jsx("div",{className:"w-20 h-20 bg-orange-100 dark:bg-orange-900/30 rounded-full flex items-center justify-center",children:r.jsx(Ke,{className:"w-10 h-10 text-orange-600 animate-spin"})})}),r.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mt-6",children:"Processing Transfer"}),r.jsxs("p",{className:"text-gray-500 dark:text-gray-400 mt-2 text-center",children:["Sending ",B(parseFloat(x),"SLE")," to ",V.name]}),r.jsx("p",{className:"text-sm text-gray-400 mt-4",children:"Please wait, do not close this page."})]})}),n==="success"&&r.jsx(se,{className:"p-8",children:r.jsxs("div",{className:"flex flex-col items-center justify-center py-8",children:[r.jsx("div",{className:"w-20 h-20 bg-green-100 dark:bg-green-900/30 rounded-full flex items-center justify-center mb-6",children:r.jsx(Ae,{className:"w-10 h-10 text-green-600 dark:text-green-400"})}),r.jsx("h3",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:"Transfer Successful!"}),r.jsxs("p",{className:"text-gray-500 dark:text-gray-400 text-center mb-2",children:[B(parseFloat(x),"SLE")," sent to ",V.name]}),r.jsxs("p",{className:"text-gray-500 dark:text-gray-400 mb-1",children:["+232 ",h]}),A&&r.jsxs("p",{className:"text-xs text-gray-400 dark:text-gray-500 mb-6",children:["Transaction ID: ",A.slice(0,12),"..."]}),r.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-500 dark:text-gray-400 mb-6",children:[r.jsx(_t,{className:"w-4 h-4"}),r.jsx("span",{children:"The recipient will receive the money within minutes"})]}),r.jsx(Oe,{onClick:H,className:"w-full py-4 bg-orange-600 hover:bg-orange-700",children:"Send Another Transfer"})]})}),n==="error"&&r.jsx(se,{className:"p-8",children:r.jsxs("div",{className:"flex flex-col items-center justify-center py-8",children:[r.jsx("div",{className:"w-20 h-20 bg-red-100 dark:bg-red-900/30 rounded-full flex items-center justify-center mb-6",children:r.jsx(dt,{className:"w-10 h-10 text-red-600 dark:text-red-400"})}),r.jsx("h3",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:"Transfer Failed"}),r.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-center mb-6",children:_||"Something went wrong. Please try again."}),r.jsxs("div",{className:"flex gap-3 w-full",children:[r.jsx(Oe,{variant:"outline",className:"flex-1 py-4",onClick:H,children:"Cancel"}),r.jsx(Oe,{className:"flex-1 py-4 bg-orange-600 hover:bg-orange-700",onClick:()=>i("form"),children:"Try Again"})]})]})})]})})}function eye(){const e=Ut(),{data:t,isLoading:s,error:a}=Gxe(),{data:n}=a2(),[i,o]=p.useState(!1),[l,c]=p.useState(null),[d,h]=p.useState(""),[f,x]=p.useState("all"),y=(t==null?void 0:t.reduce((_,T)=>_+T.currentBalance,0))||0,v=(t==null?void 0:t.reduce((_,T)=>_+(T.goalAmount||0),0))||0,w=(t==null?void 0:t.filter(_=>_.status==="ACTIVE"||_.status==="LOCKED").length)||0,N=(t==null?void 0:t.filter(_=>_.lockStatus==="UNLOCKED").length)||0,k=(t==null?void 0:t.filter(_=>{var P;const T=_.name.toLowerCase().includes(d.toLowerCase())||((P=_.description)==null?void 0:P.toLowerCase().includes(d.toLowerCase())),A=f==="all"||_.status===f;return T&&A}))||[],C=_=>new Intl.NumberFormat("en-SL",{style:"currency",currency:"SLE",minimumFractionDigits:2}).format(_),E=_=>{e(`/pots/${_.id}`)};return r.jsxs(dn,{children:[r.jsxs("div",{className:"space-y-8",children:[r.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Savings Pots"}),r.jsx("p",{className:"text-gray-500 mt-1",children:"Create and manage locked savings goals"})]}),r.jsxs("button",{onClick:()=>o(!0),className:"inline-flex items-center gap-2 px-4 py-2.5 bg-primary-600 text-white rounded-xl font-medium hover:bg-primary-700 transition-colors",children:[r.jsx(sr,{className:"w-5 h-5"}),"Create Pot"]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[r.jsx(se,{children:r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("div",{className:"w-12 h-12 rounded-full bg-primary-100 flex items-center justify-center",children:r.jsx(lo,{className:"w-6 h-6 text-primary-600"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-500",children:"Total Savings"}),r.jsx("p",{className:"text-xl font-bold text-gray-900",children:s?"...":C(y)})]})]})}),r.jsx(se,{children:r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("div",{className:"w-12 h-12 rounded-full bg-green-100 flex items-center justify-center",children:r.jsx(_6,{className:"w-6 h-6 text-green-600"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-500",children:"Total Goals"}),r.jsx("p",{className:"text-xl font-bold text-gray-900",children:s?"...":C(v)})]})]})}),r.jsx(se,{children:r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("div",{className:"w-12 h-12 rounded-full bg-blue-100 flex items-center justify-center",children:r.jsx(Ts,{className:"w-6 h-6 text-blue-600"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-500",children:"Active Pots"}),r.jsx("p",{className:"text-xl font-bold text-gray-900",children:s?"...":w})]})]})}),r.jsx(se,{children:r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("div",{className:"w-12 h-12 rounded-full bg-amber-100 flex items-center justify-center",children:r.jsx(Li,{className:"w-6 h-6 text-amber-600"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-500",children:"Ready to Withdraw"}),r.jsx("p",{className:"text-xl font-bold text-gray-900",children:s?"...":N})]})]})})]}),r.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[r.jsxs("div",{className:"relative flex-1",children:[r.jsx(Nr,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),r.jsx("input",{type:"text",value:d,onChange:_=>h(_.target.value),placeholder:"Search pots...",className:"w-full pl-12 pr-4 py-3 rounded-xl border border-gray-300 focus:border-primary-500 focus:ring-primary-500 transition-colors"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(el,{className:"w-5 h-5 text-gray-400"}),r.jsxs("select",{value:f,onChange:_=>x(_.target.value),className:"px-4 py-3 rounded-xl border border-gray-300 focus:border-primary-500 focus:ring-primary-500 transition-colors",children:[r.jsx("option",{value:"all",children:"All Status"}),r.jsx("option",{value:"ACTIVE",children:"Active"}),r.jsx("option",{value:"LOCKED",children:"Locked"}),r.jsx("option",{value:"UNLOCKED",children:"Unlocked"}),r.jsx("option",{value:"CLOSED",children:"Closed"})]})]})]}),s&&r.jsx("div",{className:"flex items-center justify-center py-16",children:r.jsx(Ke,{className:"w-8 h-8 text-primary-600 animate-spin"})}),a&&r.jsxs("div",{className:"p-6 bg-red-50 rounded-xl flex items-start gap-4",children:[r.jsx(dt,{className:"w-6 h-6 text-red-600 flex-shrink-0"}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-semibold text-red-800",children:"Error loading pots"}),r.jsx("p",{className:"text-red-700 mt-1",children:a.message})]})]}),!s&&!a&&k.length===0&&r.jsx(se,{className:"py-16",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"w-20 h-20 rounded-full bg-primary-100 flex items-center justify-center mx-auto mb-6",children:r.jsx(lo,{className:"w-10 h-10 text-primary-600"})}),r.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:d||f!=="all"?"No pots found":"No savings pots yet"}),r.jsx("p",{className:"text-gray-500 max-w-md mx-auto mb-6",children:d||f!=="all"?"Try adjusting your search or filter criteria.":"Start building your savings by creating your first pot. Set a goal, lock your funds, and watch your savings grow!"}),!d&&f==="all"&&r.jsxs("button",{onClick:()=>o(!0),className:"inline-flex items-center gap-2 px-6 py-3 bg-primary-600 text-white rounded-xl font-medium hover:bg-primary-700 transition-colors",children:[r.jsx(sr,{className:"w-5 h-5"}),"Create Your First Pot"]})]})}),!s&&!a&&k.length>0&&r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:k.map(_=>r.jsx(Hxe,{pot:_,onClick:()=>E(_)},_.id))}),n&&r.jsx("div",{className:"text-center text-sm text-gray-500",children:r.jsxs("p",{children:["Max ",n.maxPotsPerUser," pots per user  Min lock period: ",n.minLockPeriodDays," days  Early withdrawal penalty: ",n.earlyWithdrawalPenaltyPercent,"%"]})})]}),r.jsx(bq,{isOpen:i,onClose:()=>o(!1),onSuccess:()=>o(!1)}),l&&r.jsx(vq,{isOpen:!!l,onClose:()=>c(null),pot:l,onSuccess:()=>c(null)})]})}function tye(){var B;const{potId:e}=Ui(),t=Ut(),{data:s,isLoading:a}=Yxe(e||""),{data:n,isLoading:i}=Xxe(e||""),{data:o,isLoading:l}=Qxe(e||"",1,20),{data:c}=yq(e||""),{data:d=[]}=mi(),h=rge(),f=Jxe(),[x,y]=p.useState(!1),[v,w]=p.useState(!1),[N,k]=p.useState(!1),[C,E]=p.useState(!1),_=d.filter(O=>O.status==="ACTIVE"),T=a||i,A=(c==null?void 0:c.canWithdraw)||(c==null?void 0:c.canWithdrawWithPenalty),P=O=>new Intl.NumberFormat("en-SL",{style:"currency",currency:"SLE",minimumFractionDigits:2}).format(O),M=O=>new Date(O).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}),R=O=>new Date(O).toLocaleString("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"2-digit"}),$=O=>{switch(O){case"contribution":case"auto_deposit":return r.jsx(Rr,{className:"w-4 h-4 text-green-600"});case"withdrawal":return r.jsx(An,{className:"w-4 h-4 text-red-600"});case"penalty":return r.jsx(dt,{className:"w-4 h-4 text-amber-600"});case"interest":case"bonus":return r.jsx(Ts,{className:"w-4 h-4 text-blue-600"});default:return r.jsx(_t,{className:"w-4 h-4 text-gray-600"})}},W=async()=>{if(!(!s||_.length===0))try{await h.mutateAsync({potId:s.id,destinationWalletId:_[0].id}),t("/pots")}catch(O){console.error("Failed to close pot:",O)}},I=async()=>{if(s)try{await f.mutateAsync({potId:s.id,data:{autoDepositEnabled:!s.autoDepositEnabled}})}catch(O){console.error("Failed to update pot:",O)}};return e?r.jsxs(dn,{children:[r.jsxs("div",{className:"space-y-8",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("button",{onClick:()=>t("/pots"),className:"p-2 hover:bg-gray-100 rounded-full transition-colors",children:r.jsx(Ar,{className:"w-5 h-5 text-gray-600"})}),r.jsx("div",{className:"flex-1",children:T?r.jsx("div",{className:"h-8 w-48 bg-gray-200 rounded animate-pulse"}):r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-10 h-10 rounded-full flex items-center justify-center",style:{backgroundColor:`${(s==null?void 0:s.color)||"#4F46E5"}15`},children:r.jsx(lo,{className:"w-5 h-5",style:{color:(s==null?void 0:s.color)||"#4F46E5"}})}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-xl font-bold text-gray-900",children:s==null?void 0:s.name}),(s==null?void 0:s.description)&&r.jsx("p",{className:"text-sm text-gray-500",children:s.description})]})]})}),r.jsxs("div",{className:"relative",children:[r.jsx("button",{onClick:()=>k(!N),className:"p-2 hover:bg-gray-100 rounded-full transition-colors",children:r.jsx(Ih,{className:"w-5 h-5 text-gray-600"})}),N&&r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"fixed inset-0 z-10",onClick:()=>k(!1)}),r.jsxs("div",{className:"absolute right-0 top-full mt-2 w-48 bg-white rounded-xl shadow-lg border border-gray-200 py-2 z-20",children:[r.jsxs("button",{onClick:()=>{k(!1)},className:"w-full px-4 py-2 text-left text-sm text-gray-700 hover:bg-gray-50 flex items-center gap-2",children:[r.jsx(gh,{className:"w-4 h-4"}),"Edit Pot"]}),(s==null?void 0:s.autoDepositEnabled)!==void 0&&r.jsxs("button",{onClick:()=>{k(!1),I()},className:"w-full px-4 py-2 text-left text-sm text-gray-700 hover:bg-gray-50 flex items-center gap-2",children:[r.jsx(KV,{className:"w-4 h-4"}),s.autoDepositEnabled?"Disable":"Enable"," Auto-Deposit"]}),r.jsxs("button",{onClick:()=>{k(!1),E(!0)},className:"w-full px-4 py-2 text-left text-sm text-red-600 hover:bg-red-50 flex items-center gap-2",children:[r.jsx(Js,{className:"w-4 h-4"}),"Close Pot"]})]})]})]})]}),T&&r.jsx("div",{className:"flex items-center justify-center py-16",children:r.jsx(Ke,{className:"w-8 h-8 text-primary-600 animate-spin"})}),!T&&s&&r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[r.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[r.jsxs(se,{className:"overflow-hidden",children:[r.jsx("div",{className:"h-2",style:{backgroundColor:s.color||"#4F46E5"}}),r.jsxs("div",{className:"p-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Current Balance"}),r.jsx("p",{className:"text-4xl font-bold text-gray-900",children:P(s.currentBalance)})]}),r.jsx("div",{className:"flex items-center gap-2",children:s.lockStatus==="LOCKED"||s.adminLocked?r.jsxs("div",{className:"flex items-center gap-1.5 px-3 py-1.5 bg-amber-100 rounded-full",children:[r.jsx(Kr,{className:"w-4 h-4 text-amber-600"}),r.jsx("span",{className:"text-sm font-medium text-amber-700",children:s.adminLocked?"Admin Locked":"Locked"})]}):r.jsxs("div",{className:"flex items-center gap-1.5 px-3 py-1.5 bg-green-100 rounded-full",children:[r.jsx(Yy,{className:"w-4 h-4 text-green-600"}),r.jsx("span",{className:"text-sm font-medium text-green-700",children:"Unlocked"})]})})]}),s.goalAmount&&r.jsxs("div",{className:"mb-6",children:[r.jsxs("div",{className:"flex justify-between text-sm mb-2",children:[r.jsx("span",{className:"text-gray-500",children:"Progress to Goal"}),r.jsxs("span",{className:"font-medium text-gray-700",children:[((B=n==null?void 0:n.progressPercent)==null?void 0:B.toFixed(0))||0,"%"]})]}),r.jsx("div",{className:"h-3 bg-gray-100 rounded-full overflow-hidden",children:r.jsx("div",{className:"h-full rounded-full transition-all duration-500",style:{width:`${Math.min(100,(n==null?void 0:n.progressPercent)||0)}%`,backgroundColor:s.color||"#4F46E5"}})}),r.jsxs("div",{className:"flex justify-between mt-2 text-sm text-gray-500",children:[r.jsx("span",{children:P(s.currentBalance)}),r.jsx("span",{children:P(s.goalAmount)})]})]}),r.jsxs("div",{className:"flex gap-3",children:[r.jsxs("button",{onClick:()=>y(!0),className:"flex-1 py-3 px-4 bg-primary-600 text-white rounded-xl font-medium hover:bg-primary-700 transition-colors flex items-center justify-center gap-2",children:[r.jsx(Rr,{className:"w-5 h-5"}),"Add Money"]}),r.jsxs("button",{onClick:()=>w(!0),disabled:!A,className:fe("flex-1 py-3 px-4 rounded-xl font-medium transition-colors flex items-center justify-center gap-2",A?"bg-gray-100 text-gray-700 hover:bg-gray-200":"bg-gray-100 text-gray-400 cursor-not-allowed"),children:[r.jsx(An,{className:"w-5 h-5"}),"Withdraw"]})]})]})]}),r.jsxs(se,{children:[r.jsx("div",{className:"p-6 border-b border-gray-200",children:r.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Transaction History"})}),l?r.jsx("div",{className:"p-8 flex justify-center",children:r.jsx(Ke,{className:"w-6 h-6 text-primary-600 animate-spin"})}):(o==null?void 0:o.data.length)===0?r.jsx("div",{className:"p-8 text-center",children:r.jsx("p",{className:"text-gray-500",children:"No transactions yet"})}):r.jsx("div",{className:"divide-y divide-gray-100",children:o==null?void 0:o.data.map(O=>r.jsxs("div",{className:"p-4 flex items-center justify-between hover:bg-gray-50",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-10 h-10 rounded-full bg-gray-100 flex items-center justify-center",children:$(O.transactionType)}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-gray-900 capitalize",children:O.transactionType.replace("_"," ")}),r.jsx("p",{className:"text-sm text-gray-500",children:O.description||R(O.createdAt)})]})]}),r.jsxs("div",{className:"text-right",children:[r.jsxs("p",{className:fe("font-semibold",O.transactionType==="withdrawal"||O.transactionType==="penalty"?"text-red-600":"text-green-600"),children:[O.transactionType==="withdrawal"||O.transactionType==="penalty"?"-":"+",P(O.amount)]}),O.balanceAfter!==void 0&&r.jsxs("p",{className:"text-xs text-gray-500",children:["Balance: ",P(O.balanceAfter)]})]})]},O.id))})]})]}),r.jsxs("div",{className:"space-y-6",children:[r.jsx(se,{children:r.jsxs("div",{className:"p-6 space-y-4",children:[r.jsx("h3",{className:"font-semibold text-gray-900",children:"Pot Details"}),s.goalAmount&&r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[r.jsx(_6,{className:"w-4 h-4"}),r.jsx("span",{className:"text-sm",children:"Target Amount"})]}),r.jsx("span",{className:"font-medium text-gray-900",children:P(s.goalAmount)})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[r.jsx(Kr,{className:"w-4 h-4"}),r.jsx("span",{className:"text-sm",children:"Lock Type"})]}),r.jsx("span",{className:"font-medium text-gray-900 capitalize",children:s.lockType.replace("_"," ")})]}),s.lockEndDate&&r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[r.jsx(Li,{className:"w-4 h-4"}),r.jsx("span",{className:"text-sm",children:"Maturity Date"})]}),r.jsx("span",{className:"font-medium text-gray-900",children:M(s.lockEndDate)})]}),(n==null?void 0:n.daysUntilUnlock)!==void 0&&n.daysUntilUnlock>0&&r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[r.jsx(_t,{className:"w-4 h-4"}),r.jsx("span",{className:"text-sm",children:"Days Until Unlock"})]}),r.jsxs("span",{className:"font-medium text-gray-900",children:[n.daysUntilUnlock," days"]})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[r.jsx(_t,{className:"w-4 h-4"}),r.jsx("span",{className:"text-sm",children:"Created"})]}),r.jsx("span",{className:"font-medium text-gray-900",children:M(s.createdAt)})]})]})}),s.autoDepositEnabled&&r.jsx(se,{children:r.jsxs("div",{className:"p-6 space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("h3",{className:"font-semibold text-gray-900",children:"Auto-Deposit"}),r.jsx("div",{className:"px-2 py-1 bg-green-100 rounded-full",children:r.jsx("span",{className:"text-xs font-medium text-green-700",children:"Active"})})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-sm text-gray-600",children:"Amount"}),r.jsx("span",{className:"font-medium text-gray-900",children:P(s.autoDepositAmount||0)})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-sm text-gray-600",children:"Frequency"}),r.jsx("span",{className:"font-medium text-gray-900 capitalize",children:s.autoDepositFrequency})]}),s.nextAutoDepositDate&&r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-sm text-gray-600",children:"Next Deposit"}),r.jsx("span",{className:"font-medium text-gray-900",children:M(s.nextAutoDepositDate)})]})]})}),(n==null?void 0:n.stats)&&r.jsx(se,{children:r.jsxs("div",{className:"p-6 space-y-4",children:[r.jsx("h3",{className:"font-semibold text-gray-900",children:"Statistics"}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-sm text-gray-600",children:"Total Contributions"}),r.jsxs("span",{className:"font-medium text-green-600",children:["+",P(n.stats.totalContributions)]})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-sm text-gray-600",children:"Total Withdrawals"}),r.jsxs("span",{className:"font-medium text-red-600",children:["-",P(n.stats.totalWithdrawals)]})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-sm text-gray-600",children:"Contribution Count"}),r.jsx("span",{className:"font-medium text-gray-900",children:n.stats.contributionCount})]})]})}),c&&!c.canWithdraw&&r.jsx(se,{className:"bg-amber-50 border-amber-200",children:r.jsx("div",{className:"p-6",children:r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx(dt,{className:"w-5 h-5 text-amber-600 flex-shrink-0 mt-0.5"}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-semibold text-amber-800",children:"Withdrawal Restricted"}),r.jsx("p",{className:"text-sm text-amber-700 mt-1",children:c.reason}),c.canWithdrawWithPenalty&&r.jsxs("p",{className:"text-sm text-amber-700 mt-2",children:["Early withdrawal available with ",c.penaltyPercent,"% penalty."]})]})]})})})]})]})]}),s&&r.jsxs(r.Fragment,{children:[r.jsx(vq,{isOpen:x,onClose:()=>y(!1),pot:s,onSuccess:()=>y(!1)}),r.jsx(cge,{isOpen:v,onClose:()=>w(!1),pot:s,onSuccess:()=>w(!1)})]}),C&&s&&r.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[r.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:()=>E(!1)}),r.jsxs("div",{className:"relative bg-white rounded-2xl shadow-xl w-full max-w-md mx-4 p-6",children:[r.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Close Pot?"}),r.jsxs("p",{className:"text-gray-600 mb-4",children:['Are you sure you want to close "',s.name,'"?',s.currentBalance>0&&r.jsxs(r.Fragment,{children:[" ","Your remaining balance of ",P(s.currentBalance)," will be transferred to your primary wallet."]})]}),s.lockStatus==="LOCKED"&&r.jsx("div",{className:"p-3 bg-amber-50 rounded-lg mb-4",children:r.jsxs("p",{className:"text-sm text-amber-700",children:[r.jsx(dt,{className:"w-4 h-4 inline mr-1"}),"Early closure may incur a penalty fee."]})}),r.jsxs("div",{className:"flex gap-3",children:[r.jsx("button",{onClick:()=>E(!1),className:"flex-1 py-2.5 px-4 rounded-xl border border-gray-300 text-gray-700 font-medium hover:bg-gray-50 transition-colors",children:"Cancel"}),r.jsx("button",{onClick:W,disabled:h.isPending,className:"flex-1 py-2.5 px-4 rounded-xl bg-red-600 text-white font-medium hover:bg-red-700 transition-colors flex items-center justify-center gap-2",children:h.isPending?r.jsxs(r.Fragment,{children:[r.jsx(Ke,{className:"w-4 h-4 animate-spin"}),"Closing..."]}):"Close Pot"})]})]})]})]}):r.jsx(dn,{children:r.jsxs("div",{className:"text-center py-16",children:[r.jsx("p",{className:"text-gray-500",children:"Pot not found"}),r.jsx(xt,{to:"/pots",className:"text-primary-600 hover:text-primary-700 mt-4 inline-block",children:"Back to Pots"})]})})}const rye={1:{label:"Basic",description:"Email verification"},2:{label:"Advanced",description:"ID verification required"},3:{label:"Enhanced",description:"Full KYC with address proof"}};function sye(){const e=Ut(),{user:t}=pt(),{data:s,isLoading:a}=cA(),{data:n,isLoading:i}=mi(),{data:o}=r2(),{data:l}=Zz(),c=hfe(),[d,h]=p.useState(null);p.useEffect(()=>{cr.getDefaultCurrency().then(h)},[]);const f=(d==null?void 0:d.symbol)||"Le",x=je=>`${f} ${je.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}`,[y,v]=p.useState(null),[w,N]=p.useState(null),[k,C]=p.useState(!1),[E,_]=p.useState(!1),[T,A]=p.useState(!1),[P,M]=p.useState("details"),[R,$]=p.useState(""),[W,I]=p.useState(""),[B,O]=p.useState(""),[F,q]=p.useState(!1),[H,K]=p.useState(!1),[V,z]=p.useState({street:"",city:"",state:"",postalCode:"",country:""}),[G,te]=p.useState(!1),[he,ne]=p.useState(null),ce=p.useRef(null),xe=(t==null?void 0:t.kycTier)||1,_e=new Set([...(l==null?void 0:l.filter(je=>je.status!=="REJECTED"&&je.status!=="CANCELLED").map(je=>je.cardTypeId))||[]]),oe=je=>{ce.current&&ce.current.scrollBy({left:je==="left"?-340:340,behavior:"smooth"})},ie=(je,Fe=!1)=>{const ke=_e.has(je.id);v(je),N(n&&n.length===1?n[0].id:null),C(!0),A(!1),M("details"),te(ke||Fe),ne(null),$(!ke&&!Fe&&t?`${t.firstName||""} ${t.lastName||""}`.trim():""),I(""),O(""),z({street:"",city:"",state:"",postalCode:"",country:""})},ge=()=>{M("details"),$(""),I(""),O(""),z({street:"",city:"",state:"",postalCode:"",country:""}),te(!1),ne(null)},Z=()=>{const je=R.trim().length>=3,Fe=W.length===4&&/^\d{4}$/.test(W),ke=W===B;if(G&&!he)return!1;if((y==null?void 0:y.cardType)==="PHYSICAL"){const Ve=V.street&&V.city&&V.state&&V.postalCode&&V.country;return je&&Fe&&ke&&Ve}return je&&Fe&&ke},Q=async()=>{if(!(!y||!w)){_(!0);try{await c.mutateAsync({cardTypeId:y.id,walletId:w,cardholderName:R.trim(),cardPin:W,shippingAddress:y.cardType==="PHYSICAL"?V:void 0,giftRecipientId:G&&he?he.id:void 0}),A(!0),ge()}catch(je){console.error("Failed to create order:",je);const Fe=(je==null?void 0:je.message)||(je==null?void 0:je.toString())||"Unknown error";alert(`Failed to purchase card: ${Fe}`)}finally{_(!1)}}},re=n==null?void 0:n.find(je=>je.id===w),pe=re&&y?re.balance>=y.price:!1,Se=(l==null?void 0:l.filter(je=>je.status==="PENDING"||je.status==="GENERATED"))||[];return r.jsxs(dn,{children:[r.jsxs("div",{className:"space-y-8",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Card Marketplace"}),r.jsx("p",{className:"text-gray-500 mt-1",children:"Choose a card that fits your needs"})]}),Se.length>0&&r.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"p-2 bg-yellow-100 rounded-full",children:r.jsx(lt,{className:"w-5 h-5 text-yellow-600"})}),r.jsxs("div",{children:[r.jsxs("p",{className:"font-medium text-yellow-800",children:["You have ",Se.length," card order",Se.length>1?"s":""," pending"]}),r.jsxs("p",{className:"text-sm text-yellow-600",children:["Your card",Se.length>1?"s are":" is"," being processed"]})]})]}),r.jsx(Oe,{variant:"outline",size:"sm",onClick:()=>e("/cards"),children:"View My Cards"})]}),a?r.jsx("div",{className:"text-center py-12",children:"Loading available cards..."}):s&&s.length>0?r.jsxs("div",{className:"relative",children:[r.jsx("button",{onClick:()=>oe("left"),className:"absolute left-0 top-1/2 -translate-y-1/2 z-10 p-2 bg-white shadow-lg rounded-full hover:bg-gray-50 -ml-4",children:r.jsx(Rw,{className:"w-6 h-6 text-gray-600"})}),r.jsx("button",{onClick:()=>oe("right"),className:"absolute right-0 top-1/2 -translate-y-1/2 z-10 p-2 bg-white shadow-lg rounded-full hover:bg-gray-50 -mr-4",children:r.jsx(Qr,{className:"w-6 h-6 text-gray-600"})}),r.jsx("div",{ref:ce,className:"flex gap-6 overflow-x-auto pb-4 scroll-smooth scrollbar-hide",style:{scrollbarWidth:"none",msOverflowStyle:"none"},children:s.map(je=>{var Ve;const Fe=xe>=je.requiredKycLevel;je.cardType;const ke=_e.has(je.id);return r.jsx("div",{className:"flex-none w-80",children:r.jsxs(se,{className:"overflow-hidden hover:shadow-lg transition-shadow",children:[r.jsxs("div",{className:fe("relative aspect-[1.586/1] p-6 text-white bg-gradient-to-br cursor-pointer",je.colorGradient),onClick:()=>ie(je),children:[r.jsxs("div",{className:"absolute top-4 right-4 flex gap-2",children:[ke&&r.jsx("span",{className:"px-2 py-1 bg-green-500/90 backdrop-blur-sm rounded-full text-xs font-medium",children:"Owned"}),r.jsx("span",{className:"px-2 py-1 bg-white/20 backdrop-blur-sm rounded-full text-xs font-medium",children:je.cardType})]}),r.jsxs("div",{className:"flex flex-col h-full justify-between",children:[r.jsxs("div",{children:[r.jsx(lt,{className:"w-10 h-10 opacity-80"}),r.jsx("p",{className:"font-bold text-lg mt-2",children:je.name})]}),r.jsxs("div",{className:"flex justify-between items-end",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-xs opacity-70",children:"Starting at"}),r.jsx("p",{className:"text-2xl font-bold",children:je.price===0?"FREE":x(je.price)})]}),r.jsxs("div",{className:"text-right",children:[r.jsx("p",{className:"text-xs opacity-70",children:"Requires"}),r.jsxs("p",{className:"text-sm",children:[(Ve=rye[je.requiredKycLevel])==null?void 0:Ve.label," KYC"]})]})]})]}),!Fe&&r.jsx("div",{className:"absolute inset-0 bg-black/60 flex items-center justify-center",children:r.jsxs("div",{className:"text-center",children:[r.jsx(rr,{className:"w-10 h-10 mx-auto mb-2"}),r.jsxs("p",{className:"font-medium",children:["KYC Level ",je.requiredKycLevel," Required"]}),r.jsx(Oe,{variant:"outline",size:"sm",className:"mt-2 bg-white/10 border-white/30 hover:bg-white/20",children:"Upgrade KYC"})]})})]}),r.jsxs("div",{className:"p-4 space-y-4",children:[r.jsx("p",{className:"text-sm text-gray-600 line-clamp-2",children:je.description}),r.jsx("div",{className:"space-y-2",children:je.features.slice(0,3).map((le,me)=>r.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[r.jsx(Hr,{className:"w-4 h-4 text-green-500 flex-shrink-0"}),r.jsx("span",{className:"text-gray-600",children:le})]},me))}),r.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs text-gray-500 pt-2 border-t",children:[r.jsxs("div",{children:[r.jsx("p",{children:"Transaction Fee"}),r.jsxs("p",{className:"font-medium text-gray-700",children:[je.transactionFeePercentage,"% + ",x(je.transactionFeeFixed)]})]}),r.jsxs("div",{children:[r.jsx("p",{children:"Daily Limit"}),r.jsxs("p",{className:"font-medium text-gray-700",children:[f,je.dailyLimit.toLocaleString()]})]})]}),ke?r.jsxs(Oe,{className:"w-full",variant:"outline",onClick:()=>ie(je,!0),disabled:!Fe,children:[r.jsx(Lg,{className:"w-4 h-4 mr-2"}),"Gift This Card"]}):r.jsx(Oe,{className:"w-full",onClick:()=>ie(je),disabled:!Fe,children:Fe?r.jsxs(r.Fragment,{children:["Get This Card",r.jsx(os,{className:"w-4 h-4 ml-2"})]}):r.jsxs(r.Fragment,{children:[r.jsx(rr,{className:"w-4 h-4 mr-2"}),"Upgrade KYC First"]})})]})]})},je.id)})})]}):r.jsxs(se,{className:"text-center py-12",children:[r.jsx(lt,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),r.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No cards available"}),r.jsx("p",{className:"text-gray-500",children:"Check back later for new card offerings"})]}),o&&o.length>0&&r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"My Cards"}),r.jsx(Oe,{variant:"outline",size:"sm",onClick:()=>e("/cards"),children:"View All"})]}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:o.slice(0,3).map(je=>r.jsx(se,{className:"p-4 cursor-pointer hover:shadow-md transition-shadow",onClick:()=>e("/cards"),children:r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("div",{className:"w-16 h-10 bg-gradient-to-br from-blue-600 to-blue-800 rounded flex items-center justify-center",children:r.jsx(lt,{className:"w-6 h-6 text-white"})}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium",children:je.maskedNumber}),r.jsxs("p",{className:"text-sm text-gray-500",children:[je.type," Card  ",je.status]})]})]})},je.id))})]})]}),k&&y&&r.jsx("div",{className:"fixed inset-0 z-50 flex items-end sm:items-center justify-center bg-black bg-opacity-50",children:r.jsx(se,{className:"w-full sm:max-w-lg sm:mx-4 rounded-t-3xl sm:rounded-2xl max-h-[90vh] overflow-y-auto",children:T?r.jsxs("div",{className:"p-8 text-center",children:[r.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:r.jsx(Hr,{className:"w-8 h-8 text-green-600"})}),r.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Order Placed!"}),r.jsx("p",{className:"text-gray-600 mb-6",children:"Your card order has been submitted for review. You'll be notified once it's approved."}),r.jsxs("div",{className:"space-y-3",children:[r.jsx(Oe,{className:"w-full",onClick:()=>e("/cards"),children:"View My Cards"}),r.jsx(Oe,{variant:"outline",className:"w-full",onClick:()=>{C(!1),A(!1)},children:"Continue Shopping"})]})]}):r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:fe("relative p-6 text-white bg-gradient-to-br",y.colorGradient),children:[r.jsx("button",{onClick:()=>{P==="details"?C(!1):M(P==="wallet"?"details":"wallet")},className:"absolute top-4 right-4 p-2 hover:bg-white/20 rounded-full transition-colors",children:r.jsx(Rw,{className:"w-5 h-5"})}),r.jsxs("div",{className:"flex items-start gap-4",children:[r.jsx("div",{className:"p-3 bg-white/20 backdrop-blur-sm rounded-xl",children:r.jsx(lt,{className:"w-8 h-8"})}),r.jsxs("div",{children:[r.jsx("p",{className:"font-bold text-xl",children:y.name}),r.jsxs("p",{className:"text-white/80 text-sm",children:[y.cardType," Card"]})]})]}),r.jsxs("div",{className:"mt-6",children:[r.jsx("p",{className:"text-white/70 text-sm",children:"Card Price"}),r.jsx("p",{className:"text-3xl font-bold",children:y.price===0?"FREE":x(y.price)})]}),r.jsx("div",{className:"flex gap-2 mt-4",children:["details","wallet","confirm"].map((je,Fe)=>r.jsx("div",{className:fe("flex-1 h-1 rounded-full",P===je?"bg-white":["details","wallet","confirm"].indexOf(P)>Fe?"bg-white/60":"bg-white/30")},je))})]}),r.jsxs("div",{className:"p-6 space-y-6",children:[P==="details"&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600 mb-4",children:[G?r.jsx(Lg,{className:"w-4 h-4 text-primary-500"}):r.jsx(br,{className:"w-4 h-4 text-primary-500"}),r.jsxs("span",{className:"font-medium",children:["Step 1: ",G?"Gift Card Details":"Card Details"]})]}),G&&r.jsxs("div",{className:"flex items-center gap-3 p-4 bg-purple-50 border border-purple-200 rounded-lg",children:[r.jsx(Lg,{className:"w-5 h-5 text-purple-500 flex-shrink-0"}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-purple-800",children:"Purchasing as a Gift"}),r.jsx("p",{className:"text-sm text-purple-600",children:_e.has((y==null?void 0:y.id)||"")?"You already own this card. You can gift it to someone else.":"This card will be gifted to another user."})]})]}),G&&r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[r.jsx(Nr,{className:"w-4 h-4 inline mr-1"}),"Gift Recipient"]}),r.jsx(uA,{onSelect:je=>{ne({id:je.id,firstName:je.first_name||"",lastName:je.last_name||"",email:je.email||""}),$(`${je.first_name||""} ${je.last_name||""}`.trim().toUpperCase())},placeholder:"Search for recipient by name, email, or phone..."}),he&&r.jsxs("div",{className:"mt-2 p-3 bg-green-50 border border-green-200 rounded-lg flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsxs("p",{className:"font-medium text-green-800",children:[he.firstName," ",he.lastName]}),r.jsx("p",{className:"text-sm text-green-600",children:he.email})]}),r.jsx("button",{type:"button",onClick:()=>{ne(null),$("")},className:"text-green-600 hover:text-green-800",children:"Change"})]})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[r.jsx(br,{className:"w-4 h-4 inline mr-1"}),"Cardholder Name"]}),r.jsx("input",{type:"text",value:R,onChange:je=>$(je.target.value.toUpperCase()),placeholder:"Enter name as it will appear on card",className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-primary-500 focus:border-primary-500 uppercase",maxLength:26,disabled:G&&he!==null}),r.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Name will appear on the card (max 26 characters)"})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[r.jsx(Kr,{className:"w-4 h-4 inline mr-1"}),"Set 4-Digit Card PIN"]}),r.jsxs("div",{className:"relative",children:[r.jsx("input",{type:F?"text":"password",value:W,onChange:je=>{const Fe=je.target.value.replace(/\D/g,"").slice(0,4);I(Fe)},placeholder:"Enter 4-digit PIN",className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-primary-500 focus:border-primary-500",maxLength:4}),r.jsx("button",{type:"button",onClick:()=>q(!F),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600",children:F?r.jsx(Dn,{className:"w-5 h-5"}):r.jsx(ir,{className:"w-5 h-5"})})]})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[r.jsx(Kr,{className:"w-4 h-4 inline mr-1"}),"Confirm PIN"]}),r.jsxs("div",{className:"relative",children:[r.jsx("input",{type:H?"text":"password",value:B,onChange:je=>{const Fe=je.target.value.replace(/\D/g,"").slice(0,4);O(Fe)},placeholder:"Re-enter PIN",className:fe("w-full px-4 py-3 border rounded-xl focus:ring-2 focus:ring-primary-500 focus:border-primary-500",B&&B!==W?"border-red-300 bg-red-50":"border-gray-300"),maxLength:4}),r.jsx("button",{type:"button",onClick:()=>K(!H),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600",children:H?r.jsx(Dn,{className:"w-5 h-5"}):r.jsx(ir,{className:"w-5 h-5"})})]}),B&&B!==W&&r.jsx("p",{className:"text-xs text-red-500 mt-1",children:"PINs do not match"})]}),y.cardType==="PHYSICAL"&&r.jsxs("div",{className:"space-y-4 pt-4 border-t",children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700",children:[r.jsx(Vi,{className:"w-4 h-4 inline mr-1"}),"Delivery Address"]}),r.jsx("input",{type:"text",value:V.street,onChange:je=>z({...V,street:je.target.value}),placeholder:"Street Address",className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-primary-500"}),r.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[r.jsx("input",{type:"text",value:V.city,onChange:je=>z({...V,city:je.target.value}),placeholder:"City",className:"px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-primary-500"}),r.jsx("input",{type:"text",value:V.state,onChange:je=>z({...V,state:je.target.value}),placeholder:"State/Province",className:"px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-primary-500"})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[r.jsx("input",{type:"text",value:V.postalCode,onChange:je=>z({...V,postalCode:je.target.value}),placeholder:"Postal Code",className:"px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-primary-500"}),r.jsx("input",{type:"text",value:V.country,onChange:je=>z({...V,country:je.target.value}),placeholder:"Country",className:"px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-primary-500"})]})]}),r.jsxs(Oe,{className:"w-full",onClick:()=>M("wallet"),disabled:!Z(),children:["Continue to Payment",r.jsx(os,{className:"w-4 h-4 ml-2"})]})]}),P==="wallet"&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600 mb-4",children:[r.jsx(Rt,{className:"w-4 h-4 text-primary-500"}),r.jsx("span",{className:"font-medium",children:"Step 2: Select Payment Wallet"})]}),i?r.jsx("p",{className:"text-gray-500",children:"Loading wallets..."}):n&&n.length>0?r.jsx("div",{className:"space-y-2",children:n.map(je=>{const Fe=je.balance>=y.price;return r.jsx("button",{onClick:()=>N(je.id),className:fe("w-full p-4 border rounded-xl text-left transition-all",w===je.id?"border-primary-500 bg-primary-50 ring-2 ring-primary-200":Fe?"border-gray-200 hover:border-gray-300":"border-gray-200 bg-gray-50"),children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:fe("w-10 h-10 rounded-full flex items-center justify-center",Fe?"bg-green-100":"bg-gray-100"),children:r.jsx(Rt,{className:fe("w-5 h-5",Fe?"text-green-600":"text-gray-400")})}),r.jsxs("div",{children:[r.jsxs("p",{className:"font-medium",children:[je.currency," Wallet"]}),r.jsxs("p",{className:"text-sm text-gray-500",children:["Balance: ",x(je.balance)]})]})]}),w===je.id&&r.jsx(Hr,{className:"w-5 h-5 text-primary-600"}),!Fe&&r.jsx("span",{className:"text-xs text-red-500",children:"Insufficient"})]})},je.id)})}):r.jsxs("div",{className:"text-center py-4 border border-dashed border-gray-300 rounded-xl",children:[r.jsx(Rt,{className:"w-8 h-8 text-gray-400 mx-auto mb-2"}),r.jsx("p",{className:"text-gray-500",children:"No wallets available"}),r.jsx(Oe,{variant:"outline",size:"sm",className:"mt-2",children:"Create Wallet"})]}),w&&!pe&&r.jsxs("div",{className:"flex items-center gap-3 p-4 bg-red-50 border border-red-200 rounded-lg",children:[r.jsx(dt,{className:"w-5 h-5 text-red-500 flex-shrink-0"}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-red-800",children:"Insufficient Balance"}),r.jsxs("p",{className:"text-sm text-red-600",children:["You need ",x(y.price-((re==null?void 0:re.balance)||0))," more."]})]})]}),r.jsxs(Oe,{className:"w-full",onClick:()=>M("confirm"),disabled:!w||!pe,children:["Review Order",r.jsx(os,{className:"w-4 h-4 ml-2"})]})]}),P==="confirm"&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600 mb-4",children:[r.jsx(Hr,{className:"w-4 h-4 text-primary-500"}),r.jsx("span",{className:"font-medium",children:"Step 3: Review & Confirm"})]}),r.jsxs("div",{className:"bg-gray-50 rounded-xl p-4 space-y-3",children:[G&&he&&r.jsxs("div",{className:"flex items-center gap-2 p-2 bg-purple-100 rounded-lg mb-2",children:[r.jsx(Lg,{className:"w-4 h-4 text-purple-600"}),r.jsxs("span",{className:"text-sm font-medium text-purple-800",children:["Gift for ",he.firstName," ",he.lastName]})]}),r.jsxs("div",{className:"flex justify-between text-sm",children:[r.jsx("span",{className:"text-gray-600",children:"Card"}),r.jsx("span",{className:"font-medium",children:y.name})]}),r.jsxs("div",{className:"flex justify-between text-sm",children:[r.jsx("span",{className:"text-gray-600",children:"Cardholder"}),r.jsx("span",{className:"font-medium",children:R})]}),G&&he&&r.jsxs("div",{className:"flex justify-between text-sm",children:[r.jsx("span",{className:"text-gray-600",children:"Recipient"}),r.jsx("span",{className:"font-medium",children:he.email})]}),r.jsxs("div",{className:"flex justify-between text-sm",children:[r.jsx("span",{className:"text-gray-600",children:"Pay from"}),r.jsxs("span",{className:"font-medium",children:[re==null?void 0:re.currency," Wallet"]})]}),y.cardType==="PHYSICAL"&&r.jsxs("div",{className:"pt-2 border-t",children:[r.jsx("span",{className:"text-sm text-gray-600",children:"Delivery Address:"}),r.jsxs("p",{className:"text-sm font-medium mt-1",children:[V.street,", ",V.city,", ",V.state," ",V.postalCode,", ",V.country]})]}),r.jsxs("div",{className:"border-t pt-3 space-y-2",children:[r.jsxs("div",{className:"flex justify-between text-sm",children:[r.jsx("span",{className:"text-gray-600",children:"Card Price"}),r.jsx("span",{className:"font-medium",children:x(y.price)})]}),r.jsxs("div",{className:"flex justify-between text-sm",children:[r.jsx("span",{className:"text-gray-600",children:"Transaction Fee"}),r.jsxs("span",{className:"font-medium",children:[y.transactionFeePercentage,"% + ",x(y.transactionFeeFixed)]})]}),r.jsxs("div",{className:"border-t pt-2 flex justify-between",children:[r.jsx("span",{className:"font-bold",children:"Total"}),r.jsx("span",{className:"font-bold text-lg",children:x(y.price)})]})]})]}),r.jsx(sH,{amount:y.price.toFixed(2),recipientName:y.name,onConfirm:Q,disabled:!w||!pe,isProcessing:E})]}),r.jsx("button",{onClick:()=>C(!1),className:"w-full text-center text-gray-500 text-sm hover:text-gray-700",children:"Cancel"})]})]})})})]})}function aH(){const{user:e}=pt();return Rn({queryKey:["nfc-payment-links",e==null?void 0:e.id],queryFn:async()=>{if(!(e!=null&&e.id))return[];const{data:t,error:s}=await X.from("nfc_payment_links").select("*").eq("user_id",e.id).order("created_at",{ascending:!1});if(s)throw new Error(s.message);return t||[]},enabled:!!(e!=null&&e.id),staleTime:3e4})}function aye(){const e=cs(),{user:t}=pt();return hs({mutationFn:async s=>{if(!(t!=null&&t.id))throw new Error("User not authenticated");const{data:a,error:n}=await X.rpc("create_nfc_payment_link",{p_user_id:t.id,p_wallet_id:s.wallet_id,p_card_id:s.card_id||null,p_name:s.name,p_description:s.description||null,p_single_limit:s.single_limit||1e3,p_daily_limit:s.daily_limit||5e3,p_pin:s.pin||null});if(n)throw new Error(n.message);if(!a||a.length===0)throw new Error("Failed to create payment link");const i=a[0];return{link_id:i.link_id,short_code:i.short_code,payment_url:`${window.location.origin}${i.payment_url}`}},onSuccess:()=>{e.invalidateQueries({queryKey:["nfc-payment-links"]})}})}function nye(e){return Rn({queryKey:["nfc-validate-link",e],queryFn:async()=>{if(!e)return null;const{data:t,error:s}=await X.rpc("validate_nfc_payment_link",{p_short_code:e});if(s)throw new Error(s.message);return!t||t.length===0?null:t[0]},enabled:!!e,staleTime:1e4})}function iye(){return hs({mutationFn:async e=>{const{data:t,error:s}=await X.rpc("generate_nfc_payment_token",{p_short_code:e.short_code,p_amount:e.amount||null,p_expiry_minutes:e.expiry_minutes||5,p_ip_address:null,p_device_info:navigator.userAgent});if(s)throw new Error(s.message);if(!t||t.length===0)throw new Error("Failed to generate token");const a=t[0];if(!a.success)throw new Error(a.error_message||"Failed to generate token");return{token:a.token,expires_at:a.expires_at}}})}function oye(){const{user:e}=pt(),t=cs();return hs({mutationFn:async s=>{if(!(e!=null&&e.id))throw new Error("User not authenticated");const{data:a,error:n}=await X.rpc("process_nfc_payment",{p_token:s.token,p_payer_user_id:e.id,p_payer_wallet_id:s.wallet_id,p_amount:s.amount,p_pin:s.pin||null,p_ip_address:null,p_device_info:navigator.userAgent});if(n)throw new Error(n.message);if(!a||a.length===0)throw new Error("Payment processing failed");const i=a[0];if(!i.success){const o=new Error(i.error_message||"Payment failed");throw o.code=i.error_code,o}return{transaction_id:i.transaction_id}},onSuccess:()=>{t.invalidateQueries({queryKey:["wallets"]}),t.invalidateQueries({queryKey:["transactions"]})}})}function lye({cardId:e,userId:t,walletId:s,cardholderName:a,cardLastFour:n,onClose:i}){var V;const[o,l]=p.useState(null),[c,d]=p.useState(!1),[h,f]=p.useState("configure"),[x,y]=p.useState(`NFC Payment - ${a}`),[v,w]=p.useState("1000"),[N,k]=p.useState("5000"),[C,E]=p.useState(!1),[_,T]=p.useState(""),[A,P]=p.useState(!1),[M,R]=p.useState(""),[$,W]=p.useState(""),I=aye(),{data:B,refetch:O}=aH(),F=B==null?void 0:B.find(z=>z.card_id===e&&z.status==="active");p.useEffect(()=>{const z=Nm.checkNFCCapabilities();l(z),F&&(R(`${window.location.origin}/pay/nfc/${F.short_code}`),W(F.short_code),y(F.name),f("created"))},[F]);const q=async()=>{if(C&&_.length!==6){alert("PIN must be exactly 6 digits");return}try{const z=await I.mutateAsync({wallet_id:s,card_id:e,name:x,single_limit:parseFloat(v)||1e3,daily_limit:parseFloat(N)||5e3,pin:C?_:void 0});R(z.payment_url),W(z.short_code),f("created"),O()}catch(z){alert(z.message||"Failed to create payment link")}},H=async()=>{try{await navigator.clipboard.writeText(M),d(!0),setTimeout(()=>d(!1),2e3)}catch{alert("Failed to copy link")}},K=async()=>{if(!(o!=null&&o.canWrite)||!M){alert("NFC writing not available");return}try{await new NDEFReader().write({records:[{recordType:"url",data:M}]}),alert("Successfully wrote payment link to NFC tag!")}catch(z){z.name==="NotAllowedError"?alert("NFC permission denied. Please allow NFC access and try again."):alert(z.message||"Failed to write to NFC tag")}};return r.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50 p-4 overflow-y-auto",children:r.jsxs(se,{className:"w-full max-w-lg my-8",children:[r.jsx(pa,{children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs(ya,{className:"flex items-center gap-2",children:[r.jsx(rr,{className:"w-5 h-5 text-indigo-600"}),"Secure NFC Payment Setup"]}),r.jsx("button",{onClick:i,className:"text-gray-400 hover:text-gray-600",children:r.jsx(Ct,{className:"w-5 h-5"})})]})}),r.jsxs("div",{className:"p-6 space-y-6",children:[r.jsxs("div",{className:"flex items-center gap-4 p-4 bg-gradient-to-r from-indigo-50 to-purple-50 rounded-xl border border-indigo-100",children:[r.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-indigo-600 to-purple-600 rounded-lg flex items-center justify-center",children:r.jsx(lt,{className:"w-6 h-6 text-white"})}),r.jsxs("div",{children:[r.jsx("p",{className:"font-semibold text-gray-900",children:a}),r.jsxs("p",{className:"text-sm text-gray-500",children:["Card ending in ",n]})]})]}),r.jsxs("div",{className:"flex items-start gap-3 p-4 bg-green-50 rounded-xl border border-green-200",children:[r.jsx(rr,{className:"w-5 h-5 text-green-600 flex-shrink-0 mt-0.5"}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-green-800",children:"Bank-Grade Security"}),r.jsx("p",{className:"text-sm text-green-700 mt-1",children:"Each payment requires a unique cryptographic token that expires in minutes. All transactions are verified server-side to prevent fraud."})]})]}),h==="configure"&&r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Payment Link Name"}),r.jsx(Rh,{value:x,onChange:z=>y(z.target.value),placeholder:"e.g., My Business Card"})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Single Transaction Limit"}),r.jsxs("div",{className:"relative",children:[r.jsx(Cr,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),r.jsx("input",{type:"number",value:v,onChange:z=>w(z.target.value),className:"w-full pl-9 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Daily Limit"}),r.jsxs("div",{className:"relative",children:[r.jsx(Cr,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),r.jsx("input",{type:"number",value:N,onChange:z=>k(z.target.value),className:"w-full pl-9 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"})]})]})]}),r.jsxs("div",{className:"p-4 bg-gray-50 rounded-xl border border-gray-200",children:[r.jsxs("div",{className:"flex items-center justify-between mb-3",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Kr,{className:"w-4 h-4 text-gray-600"}),r.jsx("span",{className:"font-medium text-gray-900",children:"PIN Protection"})]}),r.jsx("button",{onClick:()=>E(!C),className:fe("w-12 h-6 rounded-full transition-colors relative",C?"bg-indigo-600":"bg-gray-300"),children:r.jsx("span",{className:fe("absolute w-5 h-5 bg-white rounded-full top-0.5 transition-transform",C?"translate-x-6":"translate-x-0.5")})})]}),r.jsx("p",{className:"text-sm text-gray-600 mb-3",children:"Require PIN for transactions above a certain amount"}),C&&r.jsxs("div",{className:"relative",children:[r.jsx("input",{type:A?"text":"password",value:_,onChange:z=>T(z.target.value.replace(/\D/g,"").slice(0,6)),placeholder:"Enter 6-digit PIN",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",maxLength:6}),r.jsx("button",{type:"button",onClick:()=>P(!A),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400",children:A?r.jsx(Dn,{className:"w-4 h-4"}):r.jsx(ir,{className:"w-4 h-4"})})]})]}),r.jsxs(Oe,{className:"w-full bg-gradient-to-r from-indigo-600 to-purple-600",onClick:q,isLoading:I.isPending,children:[r.jsx(rr,{className:"w-4 h-4 mr-2"}),"Generate Secure Payment Link"]})]}),h==="created"&&r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"text-center p-4 bg-indigo-50 rounded-xl",children:[r.jsx("p",{className:"text-sm text-indigo-600 mb-1",children:"Payment Code"}),r.jsx("p",{className:"text-3xl font-bold tracking-widest text-indigo-900",children:$})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Payment URL"}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"flex-1 p-3 bg-gray-50 rounded-lg border border-gray-200 font-mono text-sm text-gray-600 truncate",children:M}),r.jsx(Oe,{variant:"outline",onClick:H,className:"flex-shrink-0",children:c?r.jsx(Hr,{className:"w-4 h-4 text-green-600"}):r.jsx(Pr,{className:"w-4 h-4"})})]})]}),r.jsxs("div",{className:"text-center",children:[r.jsxs("p",{className:"text-sm font-medium text-gray-700 mb-3 flex items-center justify-center gap-2",children:[r.jsx(Vs,{className:"w-4 h-4"}),"Scan to Pay or Write to NFC Tag"]}),r.jsx("div",{className:"bg-white p-4 rounded-xl border border-gray-200 inline-block",children:r.jsx(wx,{value:M,size:180,level:"H"})})]}),(o==null?void 0:o.canWrite)&&r.jsxs(Oe,{className:"w-full bg-gradient-to-r from-indigo-600 to-purple-600",onClick:K,children:[r.jsx(Ws,{className:"w-4 h-4 mr-2"}),"Write to NFC Tag"]}),r.jsxs("div",{className:"bg-amber-50 rounded-xl p-4 border border-amber-200",children:[r.jsxs("h4",{className:"font-medium text-amber-900 mb-2 flex items-center gap-2",children:[r.jsx(dt,{className:"w-4 h-4"}),"How It Works"]}),r.jsxs("ol",{className:"space-y-1 text-sm text-amber-800",children:[r.jsx("li",{children:"1. Copy the URL or scan the QR with an NFC writer app"}),r.jsx("li",{children:"2. Write the URL to your NFC tag/card"}),r.jsx("li",{children:"3. When tapped, payers enter amount and complete payment"}),r.jsx("li",{children:"4. Each payment generates a unique token (valid 5 mins)"}),r.jsx("li",{children:"5. Funds are deposited to your wallet minus 1% fee"})]})]}),F&&r.jsxs("div",{className:"flex items-center justify-around p-4 bg-gray-50 rounded-xl",children:[r.jsxs("div",{className:"text-center",children:[r.jsx("p",{className:"text-2xl font-bold text-gray-900",children:F.total_transactions}),r.jsx("p",{className:"text-xs text-gray-500",children:"Transactions"})]}),r.jsx("div",{className:"h-10 w-px bg-gray-200"}),r.jsxs("div",{className:"text-center",children:[r.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:["$",((V=F.total_amount_received)==null?void 0:V.toFixed(2))||"0.00"]}),r.jsx("p",{className:"text-xs text-gray-500",children:"Received"})]})]})]}),r.jsxs("div",{className:"flex gap-3 pt-2",children:[r.jsx(Oe,{variant:"outline",className:"flex-1",onClick:i,children:"Close"}),h==="created"&&r.jsxs(Oe,{className:"flex-1",onClick:()=>window.open(M,"_blank"),children:[r.jsx(da,{className:"w-4 h-4 mr-2"}),"Test Payment"]})]})]})]})})}function cye(){var Fe;const e=Ut(),{user:t}=pt(),{data:s,isLoading:a}=r2(),{data:n}=Zz(),{data:i}=mi(),{data:o,isLoading:l,refetch:c}=aH(),d=Kz(),h=Gz(),f=Hz(),x=gfe(),[y,v]=p.useState(null);p.useEffect(()=>{cr.getDefaultCurrency().then(v)},[]);const w=(y==null?void 0:y.symbol)||"",[N,k]=p.useState(null),[C,E]=p.useState(null),[_,T]=p.useState(!1),[A,P]=p.useState(""),[M,R]=p.useState(null),[$,W]=p.useState(!1),[I,B]=p.useState(!1),[O,F]=p.useState(""),[q,H]=p.useState(null),[K,V]=p.useState(!1),[z,G]=p.useState(null),[te,he]=p.useState(null),ne=ke=>(i==null?void 0:i.find(Ve=>Ve.id===ke))||null,ce=ke=>{H(ke),F(""),B(!0)},xe=ke=>{G(ke),V(!0)},_e=async(ke,Ve)=>{try{const le=`${window.location.origin}/pay/nfc/${ke}`;await navigator.clipboard.writeText(le),he(Ve),setTimeout(()=>he(null),2e3)}catch(le){console.error("Failed to copy:",le)}},oe=async ke=>{if(confirm("Are you sure you want to deactivate this payment link? It will no longer accept payments."))try{await X.from("nfc_payment_links").update({status:"inactive"}).eq("id",ke),c()}catch(Ve){console.error("Failed to deactivate link:",Ve)}},ie=ke=>ke?s==null?void 0:s.find(Ve=>Ve.id===ke):null,ge=async()=>{if(!(!q||!O))try{const Ve=Number(O).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2});alert(`Top up of ${w} ${Ve} to card successful!`),B(!1),H(null),F("")}catch(ke){console.error("Failed to top up card:",ke)}},Z=async ke=>{try{ke.status==="BLOCKED"?await h.mutateAsync(ke.id):await d.mutateAsync(ke.id)}catch(Ve){console.error("Failed to update card status:",Ve)}},Q=async ke=>{try{await f.mutateAsync(ke)}catch(Ve){console.error("Failed to activate card:",Ve)}},re=async()=>{if(A.trim())try{await x.mutateAsync(A.trim()),T(!1),P(""),alert("Card activated successfully!")}catch(ke){alert(ke.message||"Failed to activate card")}},pe=(n==null?void 0:n.filter(ke=>["PENDING","GENERATED"].includes(ke.status)))||[],Se=(s==null?void 0:s.filter(ke=>ke.status==="ACTIVE"))||[],je=(s==null?void 0:s.filter(ke=>ke.status!=="ACTIVE"))||[];return r.jsxs(dn,{children:[r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"My Cards"}),r.jsx("p",{className:"text-gray-500 mt-1",children:"Manage your virtual and physical cards"})]}),r.jsxs("div",{className:"flex gap-3",children:[r.jsxs(Oe,{variant:"outline",onClick:()=>T(!0),children:[r.jsx(GV,{className:"w-4 h-4 mr-2"}),"Scan QR"]}),r.jsxs(Oe,{onClick:()=>e("/cards/marketplace"),children:[r.jsx(sr,{className:"w-4 h-4 mr-2"}),"Get New Card"]})]})]}),pe.length>0&&r.jsxs("div",{children:[r.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Pending Orders"}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:pe.map(ke=>{var Ve,le,me;return r.jsx(se,{className:"p-4",children:r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("div",{className:fe("w-16 h-10 rounded bg-gradient-to-br flex items-center justify-center",((Ve=ke.cardType)==null?void 0:Ve.colorGradient)||"from-gray-400 to-gray-600"),children:r.jsx(lt,{className:"w-6 h-6 text-white"})}),r.jsxs("div",{className:"flex-1",children:[r.jsx("p",{className:"font-medium",children:(le=ke.cardType)==null?void 0:le.name}),r.jsx("div",{className:"flex items-center gap-2 mt-1",children:ke.status==="PENDING"?r.jsxs("span",{className:"flex items-center gap-1 text-xs text-yellow-600",children:[r.jsx(_t,{className:"w-3 h-3"}),"Under Review"]}):ke.status==="GENERATED"?r.jsxs("span",{className:"flex items-center gap-1 text-xs text-purple-600",children:[r.jsx(Ae,{className:"w-3 h-3"}),"Ready for Activation"]}):null})]}),ke.status==="GENERATED"&&((me=ke.cardType)==null?void 0:me.cardType)==="PHYSICAL"&&r.jsx(Oe,{size:"sm",variant:"outline",onClick:()=>T(!0),children:"Activate"})]})},ke.id)})})]}),o&&o.length>0&&r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(oi,{className:"w-5 h-5 text-indigo-600"}),r.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"NFC Payment Links"})]}),r.jsxs("span",{className:"text-sm text-gray-500",children:[o.filter(ke=>ke.status==="active").length," active"]})]}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:o.filter(ke=>ke.status==="active").map(ke=>{var me,ve,Ze;const Ve=ie(ke.card_id),le=`${window.location.origin}/pay/nfc/${ke.short_code}`;return r.jsx(se,{className:"p-4",children:r.jsxs("div",{className:"flex items-start gap-4",children:[r.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-indigo-500 to-purple-600 rounded-xl flex items-center justify-center flex-shrink-0",children:r.jsx(oi,{className:"w-6 h-6 text-white"})}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("p",{className:"font-semibold text-gray-900 truncate",children:ke.name}),r.jsx("span",{className:"px-2 py-0.5 text-xs font-medium bg-green-100 text-green-700 rounded-full",children:"Secure"})]}),Ve&&r.jsxs("p",{className:"text-sm text-gray-500 flex items-center gap-1 mt-1",children:[r.jsx(lt,{className:"w-3 h-3"}),"Card ****",Ve.cardNumber.slice(-4)]}),r.jsxs("div",{className:"mt-2 inline-flex items-center gap-2 px-3 py-1 bg-indigo-50 rounded-lg",children:[r.jsx("span",{className:"text-xs text-indigo-600",children:"Code:"}),r.jsx("span",{className:"font-mono font-bold text-indigo-900 tracking-wider",children:ke.short_code})]}),r.jsxs("div",{className:"mt-2 flex items-center gap-2",children:[r.jsx("div",{className:"flex-1 bg-gray-50 rounded-lg px-3 py-2 font-mono text-xs text-gray-600 truncate border border-gray-200",children:le}),r.jsx("button",{onClick:()=>_e(ke.short_code,ke.id),className:fe("p-2 rounded-lg transition-colors flex-shrink-0",te===ke.id?"bg-green-100 text-green-600":"bg-gray-100 text-gray-600 hover:bg-gray-200"),title:"Copy payment link",children:te===ke.id?r.jsx(Ae,{className:"w-4 h-4"}):r.jsx(Pr,{className:"w-4 h-4"})})]}),r.jsxs("div",{className:"mt-3 flex items-center gap-4 text-sm",children:[r.jsxs("div",{children:[r.jsx("span",{className:"text-gray-500",children:"Transactions: "}),r.jsx("span",{className:"font-medium text-gray-900",children:ke.total_transactions})]}),r.jsxs("div",{children:[r.jsx("span",{className:"text-gray-500",children:"Received: "}),r.jsxs("span",{className:"font-medium text-gray-900",children:[w,((me=ke.total_amount_received)==null?void 0:me.toLocaleString(void 0,{minimumFractionDigits:2}))||"0.00"]})]})]}),r.jsxs("div",{className:"mt-2 text-xs text-gray-500",children:["Limit: ",w,(ve=ke.single_transaction_limit)==null?void 0:ve.toLocaleString()," per txn / ",w,(Ze=ke.daily_limit)==null?void 0:Ze.toLocaleString()," daily"]})]}),r.jsxs("div",{className:"flex flex-col gap-2",children:[r.jsx("button",{onClick:()=>window.open(le,"_blank"),className:"p-2 text-indigo-600 hover:bg-indigo-50 rounded-lg transition-colors",title:"Open payment page",children:r.jsx(da,{className:"w-4 h-4"})}),r.jsx("button",{onClick:()=>oe(ke.id),className:"p-2 text-red-500 hover:bg-red-50 rounded-lg transition-colors",title:"Deactivate link",children:r.jsx(Ct,{className:"w-4 h-4"})})]})]})},ke.id)})})]}),a?r.jsx("div",{className:"text-center py-12",children:"Loading cards..."}):s&&s.length>0?r.jsxs("div",{className:"space-y-6",children:[Se.length>0&&r.jsxs("div",{children:[r.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Active Cards"}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:Se.map((ke,Ve)=>r.jsx(BM,{card:ke,index:Ve,showDetails:C===ke.id,showFlip:M===ke.id,onToggleDetails:()=>E(C===ke.id?null:ke.id),onToggleFlip:()=>R(M===ke.id?null:ke.id),onBlock:()=>Z(ke),onViewDetails:()=>{k(ke),W(!0)},onTopUp:()=>ce(ke),onNFCSetup:()=>xe(ke),isBlocking:d.isPending||h.isPending,currencySymbol:w,connectedWallet:ne(ke.walletId)},ke.id))})]}),je.length>0&&r.jsxs("div",{children:[r.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Inactive Cards"}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:je.map((ke,Ve)=>r.jsx(BM,{card:ke,index:Ve,showDetails:C===ke.id,showFlip:M===ke.id,onToggleDetails:()=>E(C===ke.id?null:ke.id),onToggleFlip:()=>R(M===ke.id?null:ke.id),onBlock:()=>Z(ke),onActivate:()=>Q(ke.id),onViewDetails:()=>{k(ke),W(!0)},onTopUp:()=>ce(ke),onNFCSetup:()=>xe(ke),isBlocking:d.isPending||h.isPending,isActivating:f.isPending,currencySymbol:w,connectedWallet:ne(ke.walletId)},ke.id))})]})]}):r.jsxs(se,{className:"text-center py-12",children:[r.jsx(lt,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),r.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No cards yet"}),r.jsx("p",{className:"text-gray-500 mb-4",children:"Get your first card from the marketplace"}),r.jsxs(Oe,{onClick:()=>e("/cards/marketplace"),children:[r.jsx(sr,{className:"w-4 h-4 mr-2"}),"Browse Cards"]})]})]}),_&&r.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50 p-4",children:r.jsxs(se,{className:"w-full max-w-md",children:[r.jsx(pa,{children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx(ya,{children:"Activate Physical Card"}),r.jsx("button",{onClick:()=>T(!1),children:r.jsx(Ct,{className:"w-5 h-5 text-gray-400 hover:text-gray-600"})})]})}),r.jsxs("div",{className:"p-6 space-y-6",children:[r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"w-16 h-16 bg-primary-100 rounded-full flex items-center justify-center mx-auto mb-4",children:r.jsx(Ws,{className:"w-8 h-8 text-primary-600"})}),r.jsx("p",{className:"text-gray-600",children:"Scan the QR code on the back of your physical card or enter it manually below."})]}),r.jsx("div",{children:r.jsx(Rh,{label:"QR Code",value:A,onChange:ke=>P(ke.target.value),placeholder:"Enter QR code from your card"})}),r.jsx("div",{className:"bg-gray-50 rounded-lg p-4",children:r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx(dt,{className:"w-5 h-5 text-gray-400 flex-shrink-0 mt-0.5"}),r.jsx("p",{className:"text-sm text-gray-600",children:"The QR code is printed on the back of your physical card. Make sure you have received your card before activating."})]})}),r.jsxs("div",{className:"flex gap-3",children:[r.jsx(Oe,{variant:"outline",className:"flex-1",onClick:()=>T(!1),children:"Cancel"}),r.jsx(Oe,{className:"flex-1",onClick:re,isLoading:x.isPending,disabled:!A.trim(),children:"Activate Card"})]})]})]})}),$&&N&&r.jsx(dye,{card:N,onClose:()=>{W(!1),k(null)},currencySymbol:w}),I&&q&&r.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50 p-4",children:r.jsxs(se,{className:"w-full max-w-md",children:[r.jsx(pa,{children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs(ya,{className:"flex items-center gap-2",children:[r.jsx(Cr,{className:"w-5 h-5 text-green-600"}),"Top Up Card"]}),r.jsx("button",{onClick:()=>B(!1),children:r.jsx(Ct,{className:"w-5 h-5 text-gray-400 hover:text-gray-600"})})]})}),r.jsxs("div",{className:"p-6 space-y-6",children:[r.jsxs("div",{className:"bg-gradient-to-br from-blue-600 to-blue-800 rounded-xl p-4 text-white",children:[r.jsxs("div",{className:"flex justify-between items-start mb-4",children:[r.jsxs("div",{children:[r.jsxs("p",{className:"text-xs opacity-70",children:[q.type," Card"]}),r.jsx("p",{className:"font-medium",children:q.cardholderName})]}),r.jsx(lt,{className:"w-6 h-6 opacity-70"})]}),r.jsxs("p",{className:"text-sm font-mono tracking-wider",children:["   ",q.cardNumber.slice(-4)]})]}),ne(q.walletId)&&r.jsxs("div",{className:"flex items-center justify-between bg-gray-50 rounded-lg p-4",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-10 h-10 bg-indigo-100 rounded-full flex items-center justify-center",children:r.jsx(Rt,{className:"w-5 h-5 text-indigo-600"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-500",children:"From Wallet"}),r.jsxs("p",{className:"font-semibold",children:[w,(Fe=ne(q.walletId))==null?void 0:Fe.balance.toLocaleString(void 0,{minimumFractionDigits:2})]})]})]}),r.jsx(An,{className:"w-5 h-5 text-green-500"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Amount to Top Up"}),r.jsxs("div",{className:"relative",children:[r.jsx("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-500 font-medium",children:w}),r.jsx("input",{type:"number",value:O,onChange:ke=>F(ke.target.value),placeholder:"0.00",className:"w-full pl-12 pr-4 py-3 border-2 border-gray-200 rounded-xl focus:ring-2 focus:ring-green-500 focus:border-green-500 text-xl font-semibold"})]}),r.jsx("div",{className:"flex flex-wrap gap-2 mt-3",children:[1,5,10,50,100].map(ke=>r.jsxs("button",{onClick:()=>F(String(ke)),className:fe("px-3 py-1 text-sm rounded-lg border transition-colors",O===String(ke)?"bg-green-100 border-green-300 text-green-700":"bg-gray-50 border-gray-200 text-gray-600 hover:bg-gray-100"),children:[w,ke.toLocaleString()]},ke))})]}),r.jsxs("div",{className:"flex gap-3",children:[r.jsx(Oe,{variant:"outline",className:"flex-1",onClick:()=>B(!1),children:"Cancel"}),r.jsxs(Oe,{className:"flex-1 bg-gradient-to-r from-green-500 to-emerald-600 hover:from-green-600 hover:to-emerald-700",onClick:ge,disabled:!O||Number(O)<=0,children:[r.jsx(sr,{className:"w-4 h-4 mr-2"}),"Top Up ",O&&`${w} ${Number(O).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}`]})]})]})]})}),K&&z&&t&&r.jsx(lye,{cardId:z.id,userId:t.id,walletId:z.walletId,cardholderName:z.cardholderName,cardLastFour:z.cardNumber.slice(-4),onClose:()=>{V(!1),G(null),c()}})]})}function T3(e){return e.replace(/(.{4})/g,"$1 ").trim()}function BM({card:e,index:t,showDetails:s,showFlip:a,onToggleDetails:n,onToggleFlip:i,onBlock:o,onActivate:l,onViewDetails:c,onTopUp:d,onNFCSetup:h,isBlocking:f,isActivating:x,currencySymbol:y,connectedWallet:v}){const[w,N]=p.useState(!1),[k,C]=p.useState({nfcPayment:!0,onlinePayment:!0,international:!1,atmWithdrawal:!0}),E=(P,M)=>{const R=["from-blue-600 to-blue-800","from-purple-600 to-purple-800","from-indigo-600 to-indigo-800","from-teal-600 to-teal-800"];return P==="PHYSICAL"?"from-gray-700 to-gray-900":R[M%R.length]},_=`peeappay://pay?card=${e.id}&wallet=${e.walletId}&name=${encodeURIComponent(e.cardholderName)}`,T=P=>{C(M=>({...M,[P]:!M[P]}))},A=s?T3(e.cardNumber):e.maskedNumber?T3(e.maskedNumber.replace(/[]/g,"")):"   ";return r.jsxs("div",{className:"space-y-4",children:[v&&r.jsxs("div",{className:"flex items-center justify-between bg-gradient-to-r from-indigo-50 to-purple-50 rounded-lg px-4 py-2 border border-indigo-100",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Rt,{className:"w-4 h-4 text-indigo-600"}),r.jsx("span",{className:"text-sm text-gray-600",children:"Linked Wallet"})]}),r.jsxs("span",{className:"font-semibold text-indigo-700",children:[y,v.balance.toLocaleString(void 0,{minimumFractionDigits:2})]})]}),r.jsx("div",{className:"card-flip-container",children:r.jsxs("div",{className:fe("card-flip-inner",a&&"flipped"),onClick:i,children:[r.jsxs("div",{className:fe("card-front bg-gradient-to-br p-6 text-white shadow-xl cursor-pointer card-shine",E(e.type,t),e.status!=="ACTIVE"&&"opacity-60"),children:[e.status==="BLOCKED"&&r.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-50 rounded-xl flex items-center justify-center z-10",children:r.jsx(Kr,{className:"w-12 h-12"})}),r.jsxs("div",{className:"flex justify-between items-start",children:[r.jsxs("div",{children:[r.jsxs("p",{className:"text-xs uppercase tracking-wider opacity-80",children:[e.type," Card"]}),r.jsx("p",{className:"text-sm mt-1 opacity-90",children:e.cardholderName})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[e.type==="PHYSICAL"&&r.jsx(oi,{className:"w-5 h-5 opacity-70"}),r.jsx(lt,{className:"w-8 h-8"})]})]}),r.jsxs("div",{className:"absolute bottom-6 left-6 right-6",children:[r.jsx("p",{className:"text-xl tracking-[0.2em] font-mono",children:A}),r.jsxs("div",{className:"flex justify-between mt-3",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-[10px] uppercase opacity-60 tracking-wider",children:"Valid Thru"}),r.jsxs("p",{className:"text-sm font-medium",children:[String(e.expiryMonth).padStart(2,"0"),"/",String(e.expiryYear).slice(-2)]})]}),r.jsxs("div",{className:"text-right",children:[r.jsx("p",{className:"text-[10px] uppercase opacity-60 tracking-wider",children:"Status"}),r.jsx("p",{className:fe("text-sm font-medium",e.status==="ACTIVE"&&"text-green-300",e.status==="BLOCKED"&&"text-red-300",e.status==="INACTIVE"&&"text-yellow-300"),children:e.status})]})]})]}),r.jsxs("div",{className:"absolute top-2 right-2 opacity-40 flex items-center gap-1",children:[r.jsx("span",{className:"text-[10px]",children:"Tap to flip"}),r.jsx(Ot,{className:"w-3 h-3"})]})]}),r.jsxs("div",{className:"card-back bg-gradient-to-br from-gray-800 to-gray-900 shadow-xl overflow-hidden cursor-pointer",children:[r.jsx("div",{className:"absolute top-8 left-0 right-0 h-12 bg-gray-950"}),r.jsxs("div",{className:"absolute top-24 left-4 right-4 flex items-end gap-2",children:[r.jsx("div",{className:"flex-1 h-10 bg-gray-200 rounded flex items-center px-3",children:r.jsx("p",{className:"text-gray-700 text-xs font-mono tracking-wider truncate italic",children:e.cardholderName})}),r.jsxs("div",{className:"bg-white rounded px-3 py-1 text-center",children:[r.jsx("p",{className:"text-[8px] text-gray-500 uppercase",children:"CVV"}),r.jsx("p",{className:"text-sm font-mono font-bold text-gray-800",children:s?"123":""})]})]}),r.jsx("div",{className:"absolute bottom-4 right-4 bg-white p-2 rounded-lg shadow-lg",children:r.jsx(wx,{value:_,size:70,level:"M"})}),r.jsxs("div",{className:"absolute bottom-4 left-4 max-w-[140px] text-white",children:[r.jsxs("p",{className:"text-xs font-semibold mb-1 flex items-center gap-1",children:[r.jsx(Vs,{className:"w-3 h-3"}),"Scan to Pay"]}),r.jsx("p",{className:"text-[9px] opacity-60 leading-tight",children:"Instant payments via Peeap app"})]}),r.jsxs("div",{className:"absolute top-2 right-2 opacity-40 flex items-center gap-1 text-white",children:[r.jsx("span",{className:"text-[10px]",children:"Tap to flip"}),r.jsx(Ot,{className:"w-3 h-3"})]})]})]})}),r.jsx(se,{padding:"sm",children:r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"text-sm",children:[r.jsx("p",{className:"text-gray-500",children:"Daily Limit"}),r.jsxs("p",{className:"font-semibold text-gray-900",children:[y,e.dailyLimit.toLocaleString()]})]}),e.status==="ACTIVE"&&r.jsxs(Oe,{size:"sm",onClick:P=>{P.stopPropagation(),d()},className:"bg-gradient-to-r from-green-500 to-emerald-600 hover:from-green-600 hover:to-emerald-700",children:[r.jsx(sr,{className:"w-4 h-4 mr-1"}),"Top Up"]})]}),r.jsxs("div",{className:"flex items-center justify-between pt-2 border-t border-gray-100",children:[r.jsxs("div",{className:"flex gap-1",children:[r.jsx(Oe,{variant:"ghost",size:"sm",onClick:P=>{P.stopPropagation(),n()},title:"Toggle card number",children:s?r.jsx(Dn,{className:"w-4 h-4"}):r.jsx(ir,{className:"w-4 h-4"})}),r.jsx(Oe,{variant:"ghost",size:"sm",onClick:P=>{P.stopPropagation(),i()},title:"Flip card",children:r.jsx(Ot,{className:"w-4 h-4"})}),r.jsx(Oe,{variant:"ghost",size:"sm",onClick:P=>{P.stopPropagation(),N(!w)},title:"Card controls",children:r.jsx(bs,{className:"w-4 h-4"})})]}),r.jsxs("div",{className:"flex gap-1",children:[e.status==="INACTIVE"&&l?r.jsx(Oe,{variant:"outline",size:"sm",onClick:P=>{P.stopPropagation(),l()},isLoading:x,children:"Activate"}):r.jsx(Oe,{variant:"ghost",size:"sm",onClick:P=>{P.stopPropagation(),o()},title:e.status==="BLOCKED"?"Unblock":"Block",isLoading:f,children:e.status==="BLOCKED"?r.jsx(Yy,{className:"w-4 h-4 text-green-500"}):r.jsx(Kr,{className:"w-4 h-4 text-red-500"})}),r.jsx(Oe,{variant:"ghost",size:"sm",onClick:P=>{P.stopPropagation(),c()},children:r.jsx(Ih,{className:"w-4 h-4"})})]})]})]})}),w&&r.jsx(se,{padding:"sm",className:"animate-slide-up",children:r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex items-center justify-between text-sm",children:[r.jsx("p",{className:"font-medium text-gray-900",children:"Card Controls"}),r.jsx("button",{onClick:()=>N(!1),className:"text-gray-400 hover:text-gray-600",children:r.jsx(Ct,{className:"w-4 h-4"})})]}),r.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-gray-100",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(oi,{className:"w-5 h-5 text-blue-500"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium",children:"NFC Payment"}),r.jsx("p",{className:"text-xs text-gray-500",children:"Tap to pay with contactless"})]})]}),r.jsx("button",{onClick:()=>T("nfcPayment"),className:fe("transition-colors",k.nfcPayment?"text-green-500":"text-gray-300"),children:k.nfcPayment?r.jsx(Ys,{className:"w-8 h-8"}):r.jsx(Gs,{className:"w-8 h-8"})})]}),r.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-gray-100",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(doe,{className:"w-5 h-5 text-indigo-500"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium",children:"NFC Tag Setup"}),r.jsx("p",{className:"text-xs text-gray-500",children:"Generate link for physical NFC tag"})]})]}),r.jsx("button",{onClick:P=>{P.stopPropagation(),h()},className:"px-3 py-1 text-xs font-medium bg-indigo-100 text-indigo-700 rounded-lg hover:bg-indigo-200 transition-colors",children:"Setup"})]}),r.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-gray-100",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(Ky,{className:"w-5 h-5 text-purple-500"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium",children:"Online Payment"}),r.jsx("p",{className:"text-xs text-gray-500",children:"E-commerce transactions"})]})]}),r.jsx("button",{onClick:()=>T("onlinePayment"),className:fe("transition-colors",k.onlinePayment?"text-green-500":"text-gray-300"),children:k.onlinePayment?r.jsx(Ys,{className:"w-8 h-8"}):r.jsx(Gs,{className:"w-8 h-8"})})]}),r.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-gray-100",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(Oi,{className:"w-5 h-5 text-green-500"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium",children:"International"}),r.jsx("p",{className:"text-xs text-gray-500",children:"Foreign currency transactions"})]})]}),r.jsx("button",{onClick:()=>T("international"),className:fe("transition-colors",k.international?"text-green-500":"text-gray-300"),children:k.international?r.jsx(Ys,{className:"w-8 h-8"}):r.jsx(Gs,{className:"w-8 h-8"})})]}),r.jsxs("div",{className:"flex items-center justify-between py-2",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(zV,{className:"w-5 h-5 text-orange-500"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium",children:"ATM Withdrawal"}),r.jsx("p",{className:"text-xs text-gray-500",children:"Cash withdrawals at ATMs"})]})]}),r.jsx("button",{onClick:()=>T("atmWithdrawal"),className:fe("transition-colors",k.atmWithdrawal?"text-green-500":"text-gray-300"),children:k.atmWithdrawal?r.jsx(Ys,{className:"w-8 h-8"}):r.jsx(Gs,{className:"w-8 h-8"})})]})]})})]})}function dye({card:e,onClose:t,currencySymbol:s}){var o;const{data:a}=pfe(e.id),[n,i]=p.useState(!1);return r.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50 p-4",children:r.jsxs(se,{className:"w-full max-w-lg max-h-[90vh] overflow-y-auto",children:[r.jsx(pa,{children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx(ya,{children:"Card Details"}),r.jsx("button",{onClick:t,children:r.jsx(Ct,{className:"w-5 h-5 text-gray-400 hover:text-gray-600"})})]})}),r.jsxs("div",{className:"p-6 space-y-6",children:[r.jsxs("div",{className:"bg-gradient-to-br from-blue-600 to-blue-800 rounded-xl p-6 text-white shadow-xl",children:[r.jsxs("div",{className:"flex justify-between items-start mb-8",children:[r.jsxs("div",{children:[r.jsxs("p",{className:"text-xs uppercase tracking-wider opacity-80",children:[e.type," Card"]}),r.jsx("p",{className:"font-bold mt-1",children:((o=a==null?void 0:a.cardType)==null?void 0:o.name)||"Peeap Card"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[e.type==="PHYSICAL"&&r.jsx(oi,{className:"w-5 h-5 opacity-70"}),r.jsx(lt,{className:"w-8 h-8 opacity-80"})]})]}),r.jsx("p",{className:"text-xl tracking-[0.2em] font-mono mb-4",children:n?T3(e.cardNumber):"   "+e.cardNumber.slice(-4)}),r.jsxs("div",{className:"flex justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-[10px] uppercase opacity-60 tracking-wider",children:"Valid Thru"}),r.jsxs("p",{className:"font-medium",children:[String(e.expiryMonth).padStart(2,"0"),"/",String(e.expiryYear).slice(-2)]})]}),r.jsxs("div",{className:"text-right",children:[r.jsx("p",{className:"text-[10px] uppercase opacity-60 tracking-wider",children:"Cardholder"}),r.jsx("p",{className:"font-medium",children:e.cardholderName.toUpperCase()})]})]})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between py-2 border-b",children:[r.jsx("span",{className:"text-gray-500",children:"Status"}),r.jsx("span",{className:fe("font-medium",e.status==="ACTIVE"&&"text-green-600",e.status==="BLOCKED"&&"text-red-600",e.status==="INACTIVE"&&"text-yellow-600"),children:e.status})]}),r.jsxs("div",{className:"flex items-center justify-between py-2 border-b",children:[r.jsx("span",{className:"text-gray-500",children:"Card Type"}),r.jsx("span",{className:"font-medium",children:e.type})]}),r.jsxs("div",{className:"flex items-center justify-between py-2 border-b",children:[r.jsx("span",{className:"text-gray-500",children:"Daily Limit"}),r.jsxs("span",{className:"font-medium",children:[s,e.dailyLimit.toLocaleString()]})]}),r.jsxs("div",{className:"flex items-center justify-between py-2 border-b",children:[r.jsx("span",{className:"text-gray-500",children:"Monthly Limit"}),r.jsxs("span",{className:"font-medium",children:[s,e.monthlyLimit.toLocaleString()]})]}),r.jsxs("div",{className:"flex items-center justify-between py-2",children:[r.jsx("span",{className:"text-gray-500",children:"Created"}),r.jsx("span",{className:"font-medium",children:new Date(e.createdAt).toLocaleDateString()})]})]}),r.jsx(Oe,{variant:"outline",className:"w-full",onClick:()=>i(!n),children:n?r.jsxs(r.Fragment,{children:[r.jsx(Dn,{className:"w-4 h-4 mr-2"}),"Hide Card Details"]}):r.jsxs(r.Fragment,{children:[r.jsx(ir,{className:"w-4 h-4 mr-2"}),"Show Full Card Number"]})}),r.jsx(Oe,{variant:"outline",className:"w-full",onClick:t,children:"Close"})]})]})})}const $M=[{id:"edsa",name:"EDSA - Electricity Distribution",shortName:"EDSA",logo:"/providers/edsa.png",category:"electricity",description:"Electricity Distribution and Supply Authority",accountLabel:"Meter Number",accountPlaceholder:"Enter your meter number",minAmount:10,maxAmount:5e3},{id:"gvwc",name:"GVWC - Guma Valley Water",shortName:"GVWC",logo:"/providers/gvwc.png",category:"water",description:"Guma Valley Water Company",accountLabel:"Account Number",accountPlaceholder:"Enter your account number",minAmount:5,maxAmount:1e3},{id:"dstv",name:"DStv Subscription",shortName:"DStv",logo:"/providers/dstv.png",category:"tv",description:"MultiChoice DStv",accountLabel:"Smart Card Number",accountPlaceholder:"Enter your smart card number",minAmount:20,maxAmount:500},{id:"gotv",name:"GOtv Subscription",shortName:"GOtv",logo:"/providers/gotv.png",category:"tv",description:"MultiChoice GOtv",accountLabel:"IUC Number",accountPlaceholder:"Enter your IUC number",minAmount:10,maxAmount:200}],uye={electricity:[20,50,100,200],water:[10,25,50,100],tv:[25,50,100,150]},Iv={electricity:Ho,water:Kie,tv:hoe},Md={electricity:{bg:"bg-yellow-100",text:"text-yellow-700",icon:"text-yellow-600"},water:{bg:"bg-blue-100",text:"text-blue-700",icon:"text-blue-600"},tv:{bg:"bg-purple-100",text:"text-purple-700",icon:"text-purple-600"}};function hye(){const{user:e}=pt(),[t,s]=p.useState("category"),[a,n]=p.useState(null),[i,o]=p.useState(null),[l,c]=p.useState(""),[d,h]=p.useState(""),[f,x]=p.useState(!1),[y,v]=p.useState(null),[w,N]=p.useState(""),[k,C]=p.useState(0),[E,_]=p.useState(!1),[T,A]=p.useState(!1),[P,M]=p.useState(!1),[R,$]=p.useState([]),[W,I]=p.useState(null);p.useEffect(()=>{cr.getDefaultCurrency().then(I)},[]);const B=(W==null?void 0:W.symbol)||"Le",O=oe=>`${B} ${oe.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}`;p.useEffect(()=>{e!=null&&e.id&&(F(),q(),H())},[e==null?void 0:e.id]);const F=async()=>{if(!(e!=null&&e.id))return;const{data:oe}=await X.from("wallets").select("id, balance").eq("user_id",e.id).eq("wallet_type","primary").single();oe&&(N(oe.id),C(oe.balance))},q=async()=>{if(!(e!=null&&e.id))return;const{data:oe}=await X.from("users").select("transaction_pin").eq("id",e.id).single();M(!!(oe!=null&&oe.transaction_pin))},H=async()=>{if(!(e!=null&&e.id))return;const{data:oe}=await X.from("transactions").select("*").eq("wallet_id",w).eq("type","BILL_PAYMENT").order("created_at",{ascending:!1}).limit(5);if(oe&&oe.length>0){const ie=oe.map(ge=>{var Z,Q;return{id:ge.id,provider:((Z=ge.metadata)==null?void 0:Z.provider_name)||"Unknown",accountNumber:((Q=ge.metadata)==null?void 0:Q.account_number)||"",amount:Math.abs(ge.amount),date:ge.created_at,status:ge.status==="COMPLETED"?"completed":ge.status==="PENDING"?"pending":"failed"}});$(ie)}},K=oe=>{n(oe),s("provider")},V=oe=>{o(oe),s("details")},z=()=>{if(!i||!l||!d)return;const oe=parseFloat(d);if(!(oe<i.minAmount||oe>i.maxAmount)){if(oe>k){v({success:!1,error:"Insufficient balance"}),s("result");return}s("confirm")}},G=()=>{if(!P){A(!0);return}_(!0)},te=()=>{A(!1),M(!0),_(!0)},he=async oe=>{if(!(e!=null&&e.id))return!1;const{data:ie}=await X.from("users").select("transaction_pin").eq("id",e.id).single();return(ie==null?void 0:ie.transaction_pin)===oe?(_(!1),await ne(),!0):!1},ne=async()=>{var ie;if(!i||!l||!d||!(e!=null&&e.id)||!w)return;x(!0);const oe=parseFloat(d);try{const{data:ge}=await X.from("wallets").select("balance").eq("id",w).single();if(!ge||ge.balance<oe){v({success:!1,error:"Insufficient balance"}),s("result");return}const Z=`bill_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,{error:Q}=await X.from("wallets").update({balance:ge.balance-oe,updated_at:new Date().toISOString()}).eq("id",w);if(Q)throw Q;let re;i.category==="electricity"&&(re=Array.from({length:20},()=>Math.floor(Math.random()*10)).join(""),re=((ie=re.match(/.{1,4}/g))==null?void 0:ie.join("-"))||re),await X.from("transactions").insert({external_id:Z,wallet_id:w,type:"BILL_PAYMENT",amount:-oe,currency:(W==null?void 0:W.code)||"SLE",status:"COMPLETED",description:`${i.name} payment`,metadata:{provider_id:i.id,provider_name:i.shortName,category:i.category,account_number:l,token:re}}),v({success:!0,transactionId:Z,token:re}),s("result"),F()}catch(ge){console.error("Bill payment error:",ge),v({success:!1,error:ge.message||"Payment failed. Please try again."}),s("result")}finally{x(!1)}},ce=()=>{s("category"),n(null),o(null),c(""),h(""),v(null),F()},xe=()=>{switch(t){case"provider":n(null),s("category");break;case"details":o(null),s("provider");break;case"confirm":s("details");break;default:s("category")}},_e=a?$M.filter(oe=>oe.category===a):[];return r.jsxs(dn,{children:[r.jsxs("div",{className:"max-w-2xl mx-auto space-y-6",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[t!=="category"&&t!=="result"&&r.jsx("button",{onClick:xe,className:"p-2 hover:bg-gray-100 rounded-lg",children:r.jsx(Ar,{className:"w-5 h-5"})}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Pay Bills"}),r.jsx("p",{className:"text-gray-500",children:"Pay your utility bills instantly"})]})]}),r.jsx(se,{className:"p-4 bg-gradient-to-r from-green-600 to-green-500 text-white",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-green-100",children:"Available Balance"}),r.jsx("p",{className:"text-3xl font-bold",children:O(k)})]}),r.jsx("div",{className:"p-3 bg-white/20 rounded-xl",children:r.jsx(Rt,{className:"w-8 h-8"})})]})}),t==="category"&&r.jsxs(r.Fragment,{children:[r.jsxs(se,{className:"p-6 space-y-4",children:[r.jsx("h2",{className:"font-semibold text-gray-900",children:"Select Bill Category"}),r.jsx("div",{className:"grid grid-cols-1 gap-3",children:["electricity","water","tv"].map(oe=>{const ie=Iv[oe],ge=Md[oe],Z=$M.filter(Q=>Q.category===oe).length;return r.jsxs("button",{onClick:()=>K(oe),className:"flex items-center gap-4 p-4 border-2 border-gray-200 rounded-xl hover:border-primary-500 hover:bg-primary-50 transition-colors text-left",children:[r.jsx("div",{className:`p-3 ${ge.bg} rounded-xl`,children:r.jsx(ie,{className:`w-6 h-6 ${ge.icon}`})}),r.jsxs("div",{className:"flex-1",children:[r.jsx("p",{className:"font-medium text-gray-900 capitalize",children:oe}),r.jsxs("p",{className:"text-sm text-gray-500",children:[Z," provider",Z>1?"s":""," available"]})]}),r.jsx(os,{className:"w-5 h-5 text-gray-400"})]},oe)})})]}),R.length>0&&r.jsxs(se,{className:"p-6 space-y-4",children:[r.jsxs("h3",{className:"font-semibold text-gray-900 flex items-center gap-2",children:[r.jsx(_t,{className:"w-5 h-5 text-gray-400"}),"Recent Payments"]}),r.jsx("div",{className:"space-y-2",children:R.map(oe=>r.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-gray-900",children:oe.provider}),r.jsx("p",{className:"text-sm text-gray-500",children:oe.accountNumber})]}),r.jsxs("div",{className:"text-right",children:[r.jsx("p",{className:"font-medium",children:O(oe.amount)}),r.jsx("p",{className:"text-xs text-gray-500",children:new Date(oe.date).toLocaleDateString()})]})]},oe.id))})]})]}),t==="provider"&&a&&r.jsxs(se,{className:"p-6 space-y-4",children:[r.jsxs("h2",{className:"font-semibold text-gray-900 capitalize",children:["Select ",a," Provider"]}),r.jsx("div",{className:"space-y-3",children:_e.map(oe=>r.jsxs("button",{onClick:()=>V(oe),className:"w-full flex items-center gap-4 p-4 border-2 border-gray-200 rounded-xl hover:border-primary-500 hover:bg-primary-50 transition-colors text-left",children:[r.jsx("div",{className:`p-3 ${Md[oe.category].bg} rounded-xl`,children:ns.createElement(Iv[oe.category],{className:`w-6 h-6 ${Md[oe.category].icon}`})}),r.jsxs("div",{className:"flex-1",children:[r.jsx("p",{className:"font-medium text-gray-900",children:oe.name}),r.jsx("p",{className:"text-sm text-gray-500",children:oe.description})]}),r.jsx(os,{className:"w-5 h-5 text-gray-400"})]},oe.id))})]}),t==="details"&&i&&r.jsxs(se,{className:"p-6 space-y-6",children:[r.jsxs("div",{className:`flex items-center gap-3 p-4 ${Md[i.category].bg} rounded-xl`,children:[ns.createElement(Iv[i.category],{className:`w-6 h-6 ${Md[i.category].icon}`}),r.jsxs("div",{children:[r.jsx("p",{className:`font-medium ${Md[i.category].text}`,children:i.shortName}),r.jsx("p",{className:"text-sm text-gray-600",children:i.description})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:i.accountLabel}),r.jsx("input",{type:"text",value:l,onChange:oe=>c(oe.target.value),placeholder:i.accountPlaceholder,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",autoFocus:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Amount"}),r.jsxs("div",{className:"relative",children:[r.jsx("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-400 font-medium",children:B}),r.jsx("input",{type:"number",step:"0.01",min:i.minAmount,max:Math.min(i.maxAmount,k),value:d,onChange:oe=>h(oe.target.value),placeholder:"0.00",className:"w-full pl-12 pr-4 py-3 border border-gray-300 rounded-lg text-xl font-bold focus:ring-2 focus:ring-primary-500 focus:border-primary-500"})]}),r.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Min: ",O(i.minAmount)," | Max: ",O(i.maxAmount)]}),r.jsx("div",{className:"flex gap-2 mt-3",children:uye[i.category].map(oe=>r.jsxs("button",{onClick:()=>h(oe.toString()),disabled:oe>k,className:"flex-1 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 disabled:opacity-50 font-medium text-sm",children:[B,oe]},oe))})]}),r.jsxs("button",{onClick:z,disabled:!l||!d||parseFloat(d)<i.minAmount||parseFloat(d)>Math.min(i.maxAmount,k),className:"w-full py-4 bg-primary-600 text-white rounded-xl font-semibold flex items-center justify-center gap-2 hover:bg-primary-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:["Continue",r.jsx(os,{className:"w-5 h-5"})]})]}),t==="confirm"&&i&&r.jsxs(se,{className:"p-6 space-y-6",children:[r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:`w-16 h-16 mx-auto mb-4 ${Md[i.category].bg} rounded-full flex items-center justify-center`,children:ns.createElement(Iv[i.category],{className:`w-8 h-8 ${Md[i.category].icon}`})}),r.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Confirm Payment"}),r.jsx("p",{className:"text-gray-500",children:i.shortName})]}),r.jsx("div",{className:"text-center py-4",children:r.jsx("p",{className:"text-4xl font-bold text-primary-600",children:O(parseFloat(d))})}),r.jsxs("div",{className:"bg-gray-50 rounded-xl p-4 space-y-3",children:[r.jsxs("div",{className:"flex justify-between text-sm",children:[r.jsx("span",{className:"text-gray-500",children:"Provider"}),r.jsx("span",{className:"font-medium",children:i.name})]}),r.jsxs("div",{className:"flex justify-between text-sm",children:[r.jsx("span",{className:"text-gray-500",children:i.accountLabel}),r.jsx("span",{className:"font-medium",children:l})]}),r.jsxs("div",{className:"flex justify-between text-sm",children:[r.jsx("span",{className:"text-gray-500",children:"Amount"}),r.jsx("span",{className:"font-medium",children:O(parseFloat(d))})]}),r.jsxs("div",{className:"flex justify-between text-sm",children:[r.jsx("span",{className:"text-gray-500",children:"Fee"}),r.jsx("span",{className:"font-medium text-green-600",children:"FREE"})]})]}),r.jsxs("div",{className:"p-4 bg-yellow-50 border border-yellow-200 rounded-lg flex items-start gap-3",children:[r.jsx(dt,{className:"w-5 h-5 text-yellow-600 shrink-0 mt-0.5"}),r.jsxs("p",{className:"text-sm text-yellow-800",children:["Please verify the ",i.accountLabel.toLowerCase()," before proceeding. Payments cannot be reversed."]})]}),r.jsx("button",{onClick:G,disabled:f,className:"w-full py-4 bg-primary-600 text-white rounded-xl font-semibold flex items-center justify-center gap-2 hover:bg-primary-700 transition-colors disabled:opacity-50",children:f?r.jsxs(r.Fragment,{children:[r.jsx(Ke,{className:"w-5 h-5 animate-spin"}),"Processing..."]}):r.jsxs(r.Fragment,{children:[r.jsx(C6,{className:"w-5 h-5"}),"Pay ",O(parseFloat(d))]})}),r.jsx("button",{onClick:xe,disabled:f,className:"w-full py-3 text-gray-600 font-medium hover:text-gray-800 disabled:opacity-50",children:"Go Back"})]}),t==="result"&&y&&r.jsx(se,{className:"p-6 space-y-6 text-center",children:y.success?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"w-20 h-20 bg-green-100 rounded-full flex items-center justify-center mx-auto",children:r.jsx(Ae,{className:"w-10 h-10 text-green-600"})}),r.jsxs("div",{children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Payment Successful!"}),r.jsxs("p",{className:"text-gray-500 mt-2",children:["Your ",i==null?void 0:i.shortName," payment of ",O(parseFloat(d))," was successful."]})]}),y.token&&r.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-xl p-4",children:[r.jsx("p",{className:"text-sm text-yellow-700 font-medium mb-2",children:"Your Electricity Token"}),r.jsx("p",{className:"text-2xl font-mono font-bold text-yellow-900 tracking-wider",children:y.token}),r.jsx("p",{className:"text-xs text-yellow-600 mt-2",children:"Enter this token on your prepaid meter"})]}),y.transactionId&&r.jsxs("div",{className:"bg-gray-50 rounded-xl p-4",children:[r.jsx("p",{className:"text-sm text-gray-500",children:"Transaction ID"}),r.jsx("p",{className:"text-sm font-mono text-gray-700 break-all",children:y.transactionId})]}),r.jsx("button",{onClick:ce,className:"w-full py-4 bg-primary-600 text-white rounded-xl font-semibold hover:bg-primary-700 transition-colors",children:"Pay Another Bill"})]}):r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"w-20 h-20 bg-red-100 rounded-full flex items-center justify-center mx-auto",children:r.jsx(Wt,{className:"w-10 h-10 text-red-600"})}),r.jsxs("div",{children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Payment Failed"}),r.jsx("p",{className:"text-gray-500 mt-2",children:y.error})]}),r.jsx("button",{onClick:ce,className:"w-full py-4 bg-primary-600 text-white rounded-xl font-semibold hover:bg-primary-700 transition-colors",children:"Try Again"})]})})]}),r.jsx(vA,{isOpen:E,onClose:()=>_(!1),onVerify:he,amount:d,recipientName:(i==null?void 0:i.shortName)||""}),r.jsx(wA,{isOpen:T,onClose:()=>A(!1),onSuccess:te,userId:(e==null?void 0:e.id)||""})]})}const UM=[{id:"orange",name:"Orange Sierra Leone",shortName:"Orange",color:"text-orange-600",bgColor:"bg-orange-100",prefixes:["076","077","078","030","033"]},{id:"africell",name:"Africell Sierra Leone",shortName:"Africell",color:"text-blue-600",bgColor:"bg-blue-100",prefixes:["025","040","044","088","099"]},{id:"qcell",name:"QCell Sierra Leone",shortName:"QCell",color:"text-green-600",bgColor:"bg-green-100",prefixes:["032","034"]}],mye={orange:[{id:"orange_250mb",name:"Daily Data",data:"250MB",validity:"1 Day",price:5},{id:"orange_500mb",name:"Small Bundle",data:"500MB",validity:"7 Days",price:10},{id:"orange_1gb",name:"Medium Bundle",data:"1GB",validity:"14 Days",price:20},{id:"orange_2gb",name:"Large Bundle",data:"2GB",validity:"30 Days",price:35},{id:"orange_5gb",name:"Extra Large",data:"5GB",validity:"30 Days",price:75},{id:"orange_10gb",name:"Super Bundle",data:"10GB",validity:"30 Days",price:120}],africell:[{id:"africell_200mb",name:"Daily Data",data:"200MB",validity:"1 Day",price:4},{id:"africell_500mb",name:"Weekly Bundle",data:"500MB",validity:"7 Days",price:9},{id:"africell_1gb",name:"Monthly Lite",data:"1GB",validity:"30 Days",price:18},{id:"africell_3gb",name:"Monthly Plus",data:"3GB",validity:"30 Days",price:45},{id:"africell_6gb",name:"Monthly Max",data:"6GB",validity:"30 Days",price:80},{id:"africell_unlimited",name:"Unlimited Night",data:"Unlimited (10PM-6AM)",validity:"30 Days",price:50}],qcell:[{id:"qcell_300mb",name:"Daily Data",data:"300MB",validity:"1 Day",price:5},{id:"qcell_750mb",name:"Weekly Bundle",data:"750MB",validity:"7 Days",price:12},{id:"qcell_1.5gb",name:"Bi-Weekly",data:"1.5GB",validity:"14 Days",price:22},{id:"qcell_3gb",name:"Monthly Value",data:"3GB",validity:"30 Days",price:40},{id:"qcell_7gb",name:"Monthly Premium",data:"7GB",validity:"30 Days",price:85}]},fye=[5,10,20,50,100,200];function xye(){const{user:e}=pt(),[t,s]=p.useState("type"),[a,n]=p.useState(null),[i,o]=p.useState(null),[l,c]=p.useState(""),[d,h]=p.useState(""),[f,x]=p.useState(null),[y,v]=p.useState(!1),[w,N]=p.useState(null),[k,C]=p.useState(""),[E,_]=p.useState(0),[T,A]=p.useState(!1),[P,M]=p.useState(!1),[R,$]=p.useState(!1),[W,I]=p.useState([]),[B,O]=p.useState(null);p.useEffect(()=>{cr.getDefaultCurrency().then(O)},[]);const F=(B==null?void 0:B.symbol)||"Le",q=Q=>`${F} ${Q.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}`;p.useEffect(()=>{e!=null&&e.id&&(H(),K())},[e==null?void 0:e.id]);const H=async()=>{if(!(e!=null&&e.id))return;const{data:Q}=await X.from("wallets").select("id, balance").eq("user_id",e.id).eq("wallet_type","primary").single();Q&&(C(Q.id),_(Q.balance),V(Q.id))},K=async()=>{if(!(e!=null&&e.id))return;const{data:Q}=await X.from("users").select("transaction_pin").eq("id",e.id).single();$(!!(Q!=null&&Q.transaction_pin))},V=async Q=>{const{data:re}=await X.from("transactions").select("*").eq("wallet_id",Q).in("type",["AIRTIME","DATA"]).order("created_at",{ascending:!1}).limit(5);if(re&&re.length>0){const pe=re.map(Se=>{var je,Fe;return{id:Se.id,type:Se.type==="AIRTIME"?"airtime":"data",provider:((je=Se.metadata)==null?void 0:je.provider_name)||"Unknown",phoneNumber:((Fe=Se.metadata)==null?void 0:Fe.phone_number)||"",amount:Math.abs(Se.amount),date:Se.created_at,status:Se.status==="COMPLETED"?"completed":Se.status==="PENDING"?"pending":"failed"}});I(pe)}},z=Q=>{const re=Q.replace(/\D/g,"");if(re.length<3)return null;const pe=re.substring(0,3);for(const Se of UM)if(Se.prefixes.includes(pe))return Se;return null},G=Q=>{c(Q);const re=z(Q);re&&!i&&o(re)},te=Q=>{n(Q),s("phone")},he=()=>{if(!(!l||l.length<9)){if(!i){const Q=z(l);Q&&o(Q)}s("amount")}},ne=()=>{if((a==="data"&&f?f.price:parseFloat(d))>E){N({success:!1,error:"Insufficient balance"}),s("result");return}s("confirm")},ce=()=>{if(!R){M(!0);return}A(!0)},xe=()=>{M(!1),$(!0),A(!0)},_e=async Q=>{if(!(e!=null&&e.id))return!1;const{data:re}=await X.from("users").select("transaction_pin").eq("id",e.id).single();return(re==null?void 0:re.transaction_pin)===Q?(A(!1),await oe(),!0):!1},oe=async()=>{if(!i||!l||!(e!=null&&e.id)||!k)return;const Q=a==="data"&&f?f.price:parseFloat(d);v(!0);try{const{data:re}=await X.from("wallets").select("balance").eq("id",k).single();if(!re||re.balance<Q){N({success:!1,error:"Insufficient balance"}),s("result");return}const pe=`topup_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,{error:Se}=await X.from("wallets").update({balance:re.balance-Q,updated_at:new Date().toISOString()}).eq("id",k);if(Se)throw Se;await X.from("transactions").insert({external_id:pe,wallet_id:k,type:a==="airtime"?"AIRTIME":"DATA",amount:-Q,currency:(B==null?void 0:B.code)||"SLE",status:"COMPLETED",description:a==="airtime"?`${i.shortName} Airtime - ${l}`:`${i.shortName} ${f==null?void 0:f.data} Data - ${l}`,metadata:{provider_id:i.id,provider_name:i.shortName,phone_number:l,topup_type:a,bundle:f?{id:f.id,name:f.name,data:f.data,validity:f.validity}:null}}),N({success:!0,transactionId:pe}),s("result"),H()}catch(re){console.error("Topup error:",re),N({success:!1,error:re.message||"Top-up failed. Please try again."}),s("result")}finally{v(!1)}},ie=()=>{s("type"),n(null),o(null),c(""),h(""),x(null),N(null),H()},ge=()=>{switch(t){case"phone":n(null),s("type");break;case"amount":s("phone");break;case"confirm":s("amount");break;default:s("type")}},Z=()=>a==="data"&&f?f.price:parseFloat(d)||0;return r.jsxs(dn,{children:[r.jsxs("div",{className:"max-w-2xl mx-auto space-y-6",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[t!=="type"&&t!=="result"&&r.jsx("button",{onClick:ge,className:"p-2 hover:bg-gray-100 rounded-lg",children:r.jsx(Ar,{className:"w-5 h-5"})}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Airtime & Data"}),r.jsx("p",{className:"text-gray-500",children:"Top up instantly"})]})]}),r.jsx(se,{className:"p-4 bg-gradient-to-r from-purple-600 to-purple-500 text-white",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-purple-100",children:"Available Balance"}),r.jsx("p",{className:"text-3xl font-bold",children:q(E)})]}),r.jsx("div",{className:"p-3 bg-white/20 rounded-xl",children:r.jsx(Rt,{className:"w-8 h-8"})})]})}),t==="type"&&r.jsxs(r.Fragment,{children:[r.jsxs(se,{className:"p-6 space-y-4",children:[r.jsx("h2",{className:"font-semibold text-gray-900",children:"What do you need?"}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("button",{onClick:()=>te("airtime"),className:"flex flex-col items-center gap-3 p-6 border-2 border-gray-200 rounded-xl hover:border-primary-500 hover:bg-primary-50 transition-colors",children:[r.jsx("div",{className:"p-4 bg-green-100 rounded-full",children:r.jsx(Ss,{className:"w-8 h-8 text-green-600"})}),r.jsxs("div",{className:"text-center",children:[r.jsx("p",{className:"font-semibold text-gray-900",children:"Airtime"}),r.jsx("p",{className:"text-sm text-gray-500",children:"Buy call credit"})]})]}),r.jsxs("button",{onClick:()=>te("data"),className:"flex flex-col items-center gap-3 p-6 border-2 border-gray-200 rounded-xl hover:border-primary-500 hover:bg-primary-50 transition-colors",children:[r.jsx("div",{className:"p-4 bg-blue-100 rounded-full",children:r.jsx(Oi,{className:"w-8 h-8 text-blue-600"})}),r.jsxs("div",{className:"text-center",children:[r.jsx("p",{className:"font-semibold text-gray-900",children:"Data Bundle"}),r.jsx("p",{className:"text-sm text-gray-500",children:"Buy internet data"})]})]})]})]}),W.length>0&&r.jsxs(se,{className:"p-6 space-y-4",children:[r.jsxs("h3",{className:"font-semibold text-gray-900 flex items-center gap-2",children:[r.jsx(_t,{className:"w-5 h-5 text-gray-400"}),"Recent Top-ups"]}),r.jsx("div",{className:"space-y-2",children:W.map(Q=>r.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:`p-2 rounded-full ${Q.type==="airtime"?"bg-green-100":"bg-blue-100"}`,children:Q.type==="airtime"?r.jsx(Ss,{className:"w-4 h-4 text-green-600"}):r.jsx(Oi,{className:"w-4 h-4 text-blue-600"})}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-gray-900",children:Q.provider}),r.jsx("p",{className:"text-sm text-gray-500",children:Q.phoneNumber})]})]}),r.jsxs("div",{className:"text-right",children:[r.jsx("p",{className:"font-medium",children:q(Q.amount)}),r.jsx("p",{className:"text-xs text-gray-500",children:new Date(Q.date).toLocaleDateString()})]})]},Q.id))})]})]}),t==="phone"&&r.jsxs(se,{className:"p-6 space-y-6",children:[r.jsx("h2",{className:"font-semibold text-gray-900",children:"Enter Phone Number"}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Mobile Number"}),r.jsxs("div",{className:"relative",children:[r.jsx(Ws,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),r.jsx("input",{type:"tel",value:l,onChange:Q=>G(Q.target.value),placeholder:"076 123 4567",className:"w-full pl-12 pr-4 py-3 border border-gray-300 rounded-lg text-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",autoFocus:!0})]})]}),i&&r.jsxs("div",{className:`flex items-center gap-3 p-3 ${i.bgColor} rounded-lg`,children:[r.jsx("div",{className:"p-2 bg-white rounded-full",children:r.jsx(oi,{className:`w-4 h-4 ${i.color}`})}),r.jsxs("span",{className:`font-medium ${i.color}`,children:[i.name," detected"]})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-700 mb-3",children:"Or select network manually:"}),r.jsx("div",{className:"grid grid-cols-3 gap-2",children:UM.map(Q=>r.jsx("button",{onClick:()=>o(Q),className:`p-3 rounded-lg border-2 transition-colors ${(i==null?void 0:i.id)===Q.id?`${Q.bgColor} border-current ${Q.color}`:"border-gray-200 hover:border-gray-300"}`,children:r.jsx("p",{className:`font-medium text-sm ${(i==null?void 0:i.id)===Q.id?Q.color:"text-gray-700"}`,children:Q.shortName})},Q.id))})]}),r.jsxs("button",{onClick:he,disabled:!l||l.length<9||!i,className:"w-full py-4 bg-primary-600 text-white rounded-xl font-semibold flex items-center justify-center gap-2 hover:bg-primary-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:["Continue",r.jsx(os,{className:"w-5 h-5"})]})]}),t==="amount"&&r.jsxs(se,{className:"p-6 space-y-6",children:[r.jsxs("div",{className:`flex items-center gap-3 p-3 ${i==null?void 0:i.bgColor} rounded-lg`,children:[r.jsx(Ws,{className:`w-5 h-5 ${i==null?void 0:i.color}`}),r.jsxs("div",{children:[r.jsx("p",{className:`font-medium ${i==null?void 0:i.color}`,children:l}),r.jsx("p",{className:"text-sm text-gray-600",children:i==null?void 0:i.name})]})]}),a==="airtime"?r.jsxs(r.Fragment,{children:[r.jsx("h2",{className:"font-semibold text-gray-900",children:"Select Airtime Amount"}),r.jsx("div",{className:"grid grid-cols-3 gap-3",children:fye.map(Q=>r.jsx("button",{onClick:()=>h(Q.toString()),disabled:Q>E,className:`p-4 rounded-xl border-2 transition-colors ${d===Q.toString()?"border-primary-500 bg-primary-50 text-primary-700":"border-gray-200 hover:border-gray-300"} disabled:opacity-50`,children:r.jsx("p",{className:"text-xl font-bold",children:q(Q)})},Q))}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Or enter custom amount"}),r.jsxs("div",{className:"relative",children:[r.jsx("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-400 font-medium",children:F}),r.jsx("input",{type:"number",step:"1",min:"1",max:E,value:d,onChange:Q=>h(Q.target.value),placeholder:"0",className:"w-full pl-12 pr-4 py-3 border border-gray-300 rounded-lg text-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500"})]})]})]}):r.jsxs(r.Fragment,{children:[r.jsx("h2",{className:"font-semibold text-gray-900",children:"Select Data Bundle"}),r.jsx("div",{className:"space-y-3",children:(mye[(i==null?void 0:i.id)||""]||[]).map(Q=>r.jsx("button",{onClick:()=>{x(Q),h(Q.price.toString())},disabled:Q.price>E,className:`w-full p-4 rounded-xl border-2 transition-colors text-left ${(f==null?void 0:f.id)===Q.id?"border-primary-500 bg-primary-50":"border-gray-200 hover:border-gray-300"} disabled:opacity-50`,children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"font-bold text-gray-900",children:Q.data}),r.jsx("p",{className:"text-sm text-gray-500",children:Q.validity})]}),r.jsx("p",{className:"text-xl font-bold text-primary-600",children:q(Q.price)})]})},Q.id))})]}),r.jsxs("button",{onClick:ne,disabled:a==="airtime"?!d||parseFloat(d)<=0||parseFloat(d)>E:!f,className:"w-full py-4 bg-primary-600 text-white rounded-xl font-semibold flex items-center justify-center gap-2 hover:bg-primary-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:["Continue",r.jsx(os,{className:"w-5 h-5"})]})]}),t==="confirm"&&r.jsxs(se,{className:"p-6 space-y-6",children:[r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:`w-16 h-16 mx-auto mb-4 ${i==null?void 0:i.bgColor} rounded-full flex items-center justify-center`,children:a==="airtime"?r.jsx(Ss,{className:`w-8 h-8 ${i==null?void 0:i.color}`}):r.jsx(Oi,{className:`w-8 h-8 ${i==null?void 0:i.color}`})}),r.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Confirm Top-up"}),r.jsx("p",{className:"text-gray-500",children:i==null?void 0:i.shortName})]}),r.jsxs("div",{className:"text-center py-4",children:[r.jsx("p",{className:"text-4xl font-bold text-primary-600",children:q(Z())}),a==="data"&&f&&r.jsxs("p",{className:"text-lg text-gray-600 mt-1",children:[f.data,"  ",f.validity]})]}),r.jsxs("div",{className:"bg-gray-50 rounded-xl p-4 space-y-3",children:[r.jsxs("div",{className:"flex justify-between text-sm",children:[r.jsx("span",{className:"text-gray-500",children:"Phone Number"}),r.jsx("span",{className:"font-medium",children:l})]}),r.jsxs("div",{className:"flex justify-between text-sm",children:[r.jsx("span",{className:"text-gray-500",children:"Network"}),r.jsx("span",{className:"font-medium",children:i==null?void 0:i.name})]}),r.jsxs("div",{className:"flex justify-between text-sm",children:[r.jsx("span",{className:"text-gray-500",children:"Type"}),r.jsx("span",{className:"font-medium capitalize",children:a})]}),a==="data"&&f&&r.jsxs("div",{className:"flex justify-between text-sm",children:[r.jsx("span",{className:"text-gray-500",children:"Bundle"}),r.jsxs("span",{className:"font-medium",children:[f.data," / ",f.validity]})]}),r.jsxs("div",{className:"flex justify-between text-sm",children:[r.jsx("span",{className:"text-gray-500",children:"Amount"}),r.jsx("span",{className:"font-medium",children:q(Z())})]})]}),r.jsxs("div",{className:"p-4 bg-yellow-50 border border-yellow-200 rounded-lg flex items-start gap-3",children:[r.jsx(dt,{className:"w-5 h-5 text-yellow-600 shrink-0 mt-0.5"}),r.jsx("p",{className:"text-sm text-yellow-800",children:"Please verify the phone number before proceeding. Top-ups cannot be reversed."})]}),r.jsx("button",{onClick:ce,disabled:y,className:"w-full py-4 bg-primary-600 text-white rounded-xl font-semibold flex items-center justify-center gap-2 hover:bg-primary-700 transition-colors disabled:opacity-50",children:y?r.jsxs(r.Fragment,{children:[r.jsx(Ke,{className:"w-5 h-5 animate-spin"}),"Processing..."]}):r.jsxs(r.Fragment,{children:[r.jsx(Ae,{className:"w-5 h-5"}),"Confirm Top-up"]})}),r.jsx("button",{onClick:ge,disabled:y,className:"w-full py-3 text-gray-600 font-medium hover:text-gray-800 disabled:opacity-50",children:"Go Back"})]}),t==="result"&&w&&r.jsx(se,{className:"p-6 space-y-6 text-center",children:w.success?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"w-20 h-20 bg-green-100 rounded-full flex items-center justify-center mx-auto",children:r.jsx(Ae,{className:"w-10 h-10 text-green-600"})}),r.jsxs("div",{children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Top-up Successful!"}),r.jsxs("p",{className:"text-gray-500 mt-2",children:[q(Z())," ",a==="airtime"?"airtime":"data"," sent to ",l]})]}),w.transactionId&&r.jsxs("div",{className:"bg-gray-50 rounded-xl p-4",children:[r.jsx("p",{className:"text-sm text-gray-500",children:"Transaction ID"}),r.jsx("p",{className:"text-sm font-mono text-gray-700 break-all",children:w.transactionId})]}),r.jsx("button",{onClick:ie,className:"w-full py-4 bg-primary-600 text-white rounded-xl font-semibold hover:bg-primary-700 transition-colors",children:"Buy More"})]}):r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"w-20 h-20 bg-red-100 rounded-full flex items-center justify-center mx-auto",children:r.jsx(Wt,{className:"w-10 h-10 text-red-600"})}),r.jsxs("div",{children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Top-up Failed"}),r.jsx("p",{className:"text-gray-500 mt-2",children:w.error})]}),r.jsx("button",{onClick:ie,className:"w-full py-4 bg-primary-600 text-white rounded-xl font-semibold hover:bg-primary-700 transition-colors",children:"Try Again"})]})})]}),r.jsx(vA,{isOpen:T,onClose:()=>A(!1),onVerify:_e,amount:Z().toString(),recipientName:`${(i==null?void 0:i.shortName)||""} ${a||""}`}),r.jsx(wA,{isOpen:P,onClose:()=>M(!1),onSuccess:xe,userId:(e==null?void 0:e.id)||""})]})}const gye=e=>({id:e.id,userId:e.user_id,cardId:e.card_id,transactionId:e.transaction_id,amount:parseFloat(e.amount)||0,currency:e.currency||"SLE",percentageApplied:parseFloat(e.percentage_applied)||0,originalAmount:parseFloat(e.original_amount)||0,transactionType:e.transaction_type||"PAYMENT",merchantName:e.merchant_name,status:e.status||"PENDING",creditedAt:e.credited_at,redeemedAt:e.redeemed_at,expiresAt:e.expires_at,description:e.description,createdAt:e.created_at,updatedAt:e.updated_at}),pye=e=>({userId:e.user_id,currency:e.currency||"SLE",availableBalance:parseFloat(e.available_balance)||0,pendingBalance:parseFloat(e.pending_balance)||0,totalRedeemed:parseFloat(e.total_redeemed)||0,lifetimeEarned:parseFloat(e.lifetime_earned)||0,totalRewards:parseInt(e.total_rewards)||0}),dg={async getBalance(e,t="SLE"){const{data:s,error:a}=await X.from("user_cashback_balance").select("*").eq("user_id",e).eq("currency",t).maybeSingle();return a?(console.warn("Cashback balance view not found, calculating directly:",a.message),this.calculateBalance(e,t)):s?pye(s):{userId:e,currency:t,availableBalance:0,pendingBalance:0,totalRedeemed:0,lifetimeEarned:0,totalRewards:0}},async calculateBalance(e,t="SLE"){const{data:s,error:a}=await X.from("cashback_rewards").select("amount, status").eq("user_id",e).eq("currency",t);if(a)return console.error("Error calculating cashback balance:",a),{userId:e,currency:t,availableBalance:0,pendingBalance:0,totalRedeemed:0,lifetimeEarned:0,totalRewards:0};let n=0,i=0,o=0,l=0;for(const c of s||[]){const d=parseFloat(c.amount)||0;switch(l+=d,c.status){case"CREDITED":n+=d;break;case"PENDING":i+=d;break;case"REDEEMED":o+=d;break}}return{userId:e,currency:t,availableBalance:n,pendingBalance:i,totalRedeemed:o,lifetimeEarned:l,totalRewards:(s||[]).length}},async getRewards(e,t){let s=X.from("cashback_rewards").select("*").eq("user_id",e).order("created_at",{ascending:!1});t!=null&&t.status&&(s=s.eq("status",t.status)),t!=null&&t.limit&&(s=s.limit(t.limit)),t!=null&&t.offset&&(s=s.range(t.offset,t.offset+(t.limit||20)-1));const{data:a,error:n}=await s;return n?(console.error("Error fetching cashback rewards:",n),[]):(a||[]).map(gye)},async redeem(e,t,s){const{data:a,error:n}=await X.rpc("redeem_cashback",{p_user_id:e,p_wallet_id:t,p_amount:s||null});if(n)return console.error("Error redeeming cashback:",n),n.message.includes("does not exist")?this.redeemManually(e,t,s):{success:!1,amount:0,message:n.message};const i=(a==null?void 0:a[0])||a;return{success:(i==null?void 0:i.success)||!1,amount:parseFloat(i==null?void 0:i.amount_redeemed)||0,message:(i==null?void 0:i.message)||"Unknown error"}},async redeemManually(e,t,s){const a=await this.calculateBalance(e,"SLE"),n=s?Math.min(s,a.availableBalance):a.availableBalance;if(n<.01)return{success:!1,amount:0,message:"Insufficient cashback balance"};const{data:i,error:o}=await X.from("cashback_rewards").select("id, amount").eq("user_id",e).eq("status","CREDITED").order("created_at",{ascending:!0});if(o||!(i!=null&&i.length))return{success:!1,amount:0,message:"No available rewards to redeem"};let l=n;const c=[];for(const f of i){if(l<=0)break;const x=parseFloat(f.amount)||0;x<=l&&(c.push(f.id),l-=x)}c.length>0&&await X.from("cashback_rewards").update({status:"REDEEMED",redeemed_at:new Date().toISOString(),updated_at:new Date().toISOString()}).in("id",c);const{error:d}=await X.from("wallets").update({balance:X.rpc("",{}),updated_at:new Date().toISOString()}).eq("id",t),{error:h}=await X.rpc("update_wallet_balance",{p_wallet_id:t,p_amount:n,p_operation:"credit"});if(h){const{data:f}=await X.from("wallets").select("balance").eq("id",t).single();f&&await X.from("wallets").update({balance:(parseFloat(f.balance)||0)+n,updated_at:new Date().toISOString()}).eq("id",t)}return await X.from("transactions").insert({wallet_id:t,type:"CASHBACK_REDEMPTION",amount:n,status:"COMPLETED",description:"Cashback redemption to wallet",metadata:{rewards_redeemed:c.length}}),{success:!0,amount:n,message:"Cashback redeemed successfully"}},async creditCashback(e){const t=Math.round(e.originalAmount*(e.cashbackPercentage/100)*100)/100;if(t<=0)return null;const s=new Date;s.setDate(s.getDate()+90);const{data:a,error:n}=await X.from("cashback_rewards").insert({user_id:e.userId,card_id:e.cardId,transaction_id:e.transactionId,amount:t,currency:e.currency||"SLE",percentage_applied:e.cashbackPercentage,original_amount:e.originalAmount,transaction_type:e.transactionType||"PAYMENT",merchant_name:e.merchantName,status:"CREDITED",credited_at:new Date().toISOString(),expires_at:s.toISOString(),description:`${e.cashbackPercentage}% cashback on ${e.merchantName||e.transactionType||"payment"}`}).select("id").single();return n?(console.error("Error crediting cashback:",n),null):(a==null?void 0:a.id)||null},async getRedemptions(e,t=20){const{data:s,error:a}=await X.from("cashback_redemptions").select("*").eq("user_id",e).order("created_at",{ascending:!1}).limit(t);return a?(console.error("Error fetching redemptions:",a),[]):(s||[]).map(n=>({id:n.id,userId:n.user_id,walletId:n.wallet_id,amount:parseFloat(n.amount)||0,currency:n.currency||"SLE",status:n.status||"PENDING",transactionId:n.transaction_id,processedAt:n.processed_at,createdAt:n.created_at}))},async getStats(e){var y;const t=new Date,s=new Date(t.getFullYear(),t.getMonth(),1),a=new Date(t.getFullYear(),t.getMonth()-1,1),n=new Date(t.getFullYear(),t.getMonth(),0),{data:i}=await X.from("cashback_rewards").select("amount").eq("user_id",e).gte("created_at",s.toISOString()),{data:o}=await X.from("cashback_rewards").select("amount").eq("user_id",e).gte("created_at",a.toISOString()).lt("created_at",n.toISOString()),{data:l}=await X.from("cashback_rewards").select("percentage_applied, transaction_type").eq("user_id",e),c=(i||[]).reduce((v,w)=>v+(parseFloat(w.amount)||0),0),d=(o||[]).reduce((v,w)=>v+(parseFloat(w.amount)||0),0);let h=0;l!=null&&l.length&&(h=l.reduce((w,N)=>w+(parseFloat(N.percentage_applied)||0),0)/l.length);const f={};for(const v of l||[]){const w=v.transaction_type||"OTHER";f[w]=(f[w]||0)+1}const x=((y=Object.entries(f).sort((v,w)=>w[1]-v[1])[0])==null?void 0:y[0])||"N/A";return{thisMonth:c,lastMonth:d,averagePercentage:h,topCategory:x}}};function yye(){var K;const{user:e}=pt(),t=Ut(),[s,a]=p.useState("overview"),[n,i]=p.useState(!0),[o,l]=p.useState(!1),[c,d]=p.useState(null),[h,f]=p.useState([]),[x,y]=p.useState(null),[v,w]=p.useState("all"),[N,k]=p.useState(null),[C,E]=p.useState(""),[_,T]=p.useState(!0),[A,P]=p.useState(null),[M,R]=p.useState(null);p.useEffect(()=>{e!=null&&e.id&&$()},[e==null?void 0:e.id]),p.useEffect(()=>{e!=null&&e.id&&W()},[v,e==null?void 0:e.id]);const $=async()=>{if(e!=null&&e.id){i(!0);try{const[V,z,G,te]=await Promise.all([dg.getBalance(e.id),dg.getStats(e.id),dg.getRewards(e.id,{limit:50}),I()]);d(V),y(z),f(G),k(te)}catch(V){console.error("Error loading cashback data:",V)}finally{i(!1)}}},W=async()=>{if(e!=null&&e.id)try{const V=await dg.getRewards(e.id,{status:v==="all"?void 0:v,limit:50});f(V)}catch(V){console.error("Error loading rewards:",V)}},I=async()=>{if(!(e!=null&&e.id))return null;const{data:V}=await X.from("wallets").select("id, balance, currency").eq("user_id",e.id).eq("is_primary",!0).single();return V?{id:V.id,balance:parseFloat(V.balance)||0,currency:V.currency||"SLE"}:null},B=async()=>{if(!(!(e!=null&&e.id)||!(N!=null&&N.id))){l(!0),R(null),P(null);try{const V=_?void 0:parseFloat(C);if(!_&&(!V||V<=0)){R("Please enter a valid amount"),l(!1);return}if(!_&&c&&V&&V>c.availableBalance){R("Amount exceeds available balance"),l(!1);return}const z=await dg.redeem(e.id,N.id,V);z.success?(P({amount:z.amount}),E(""),T(!0),await $()):R(z.message)}catch(V){R(V.message||"Failed to redeem cashback")}finally{l(!1)}}},O=V=>`Le ${V.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})}`,F=V=>new Date(V).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}),q=V=>{const z={PENDING:"bg-yellow-100 text-yellow-800",CREDITED:"bg-green-100 text-green-800",REDEEMED:"bg-blue-100 text-blue-800",EXPIRED:"bg-gray-100 text-gray-600"};return r.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs font-medium ${z[V]}`,children:V})},H=V=>{const z={PAYMENT:"M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z",BILL_PAYMENT:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z",AIRTIME:"M12 18h.01M8 21h8a2 2 0 002-2V5a2 2 0 00-2-2H8a2 2 0 00-2 2v14a2 2 0 002 2z",TRANSFER:"M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4"};return z[V]||z.PAYMENT};return n?r.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-indigo-600 border-t-transparent"})}):r.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-6 sm:px-6 lg:px-8",children:[r.jsxs("div",{className:"mb-6",children:[r.jsxs("button",{onClick:()=>t(-1),className:"flex items-center text-gray-600 hover:text-gray-900 mb-4",children:[r.jsx("svg",{className:"w-5 h-5 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"Back"]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Cashback Rewards"}),r.jsx("p",{className:"text-gray-600 mt-1",children:"Earn rewards on every eligible transaction"})]}),r.jsx("div",{className:"hidden sm:flex items-center gap-2",children:r.jsx("svg",{className:"w-10 h-10 text-indigo-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})})]})]}),r.jsxs("div",{className:"bg-gradient-to-br from-indigo-600 to-purple-700 rounded-2xl p-6 text-white mb-6 shadow-lg",children:[r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-indigo-200 text-sm font-medium",children:"Available Cashback"}),r.jsx("p",{className:"text-4xl font-bold mt-1",children:O((c==null?void 0:c.availableBalance)||0)}),((c==null?void 0:c.pendingBalance)||0)>0&&r.jsxs("p",{className:"text-indigo-200 text-sm mt-2",children:["+ ",O((c==null?void 0:c.pendingBalance)||0)," pending"]})]}),r.jsxs("div",{className:"text-right",children:[r.jsx("p",{className:"text-indigo-200 text-xs",children:"Lifetime Earned"}),r.jsx("p",{className:"text-lg font-semibold",children:O((c==null?void 0:c.lifetimeEarned)||0)})]})]}),r.jsx("div",{className:"mt-6 pt-4 border-t border-indigo-500/30",children:r.jsxs("div",{className:"grid grid-cols-3 gap-4 text-center",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-2xl font-bold",children:(c==null?void 0:c.totalRewards)||0}),r.jsx("p",{className:"text-indigo-200 text-xs",children:"Total Rewards"})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-2xl font-bold",children:O((c==null?void 0:c.totalRedeemed)||0)}),r.jsx("p",{className:"text-indigo-200 text-xs",children:"Redeemed"})]}),r.jsxs("div",{children:[r.jsxs("p",{className:"text-2xl font-bold",children:[((K=x==null?void 0:x.averagePercentage)==null?void 0:K.toFixed(1))||0,"%"]}),r.jsx("p",{className:"text-indigo-200 text-xs",children:"Avg. Rate"})]})]})})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[r.jsx("div",{className:"bg-white rounded-xl p-4 shadow-sm border border-gray-100",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:r.jsx("svg",{className:"w-5 h-5 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-gray-500 text-xs",children:"This Month"}),r.jsx("p",{className:"text-lg font-semibold text-gray-900",children:O((x==null?void 0:x.thisMonth)||0)})]})]})}),r.jsx("div",{className:"bg-white rounded-xl p-4 shadow-sm border border-gray-100",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:r.jsx("svg",{className:"w-5 h-5 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-gray-500 text-xs",children:"Last Month"}),r.jsx("p",{className:"text-lg font-semibold text-gray-900",children:O((x==null?void 0:x.lastMonth)||0)})]})]})})]}),r.jsx("div",{className:"flex gap-1 bg-gray-100 rounded-lg p-1 mb-6",children:["overview","history","redeem"].map(V=>r.jsxs("button",{onClick:()=>a(V),className:`flex-1 py-2 px-4 rounded-md text-sm font-medium transition-colors ${s===V?"bg-white text-indigo-600 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:[V==="overview"&&"Overview",V==="history"&&"History",V==="redeem"&&"Redeem"]},V))}),s==="overview"&&r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-gray-100",children:[r.jsx("h3",{className:"font-semibold text-gray-900 mb-4",children:"How Cashback Works"}),r.jsxs("div",{className:"grid gap-4",children:[r.jsxs("div",{className:"flex items-start gap-4",children:[r.jsx("div",{className:"flex-shrink-0 w-8 h-8 bg-indigo-100 rounded-full flex items-center justify-center",children:r.jsx("span",{className:"text-indigo-600 font-semibold text-sm",children:"1"})}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-gray-900",children:"Make Eligible Transactions"}),r.jsx("p",{className:"text-sm text-gray-500",children:"Use your Peeap card for payments, bills, and airtime"})]})]}),r.jsxs("div",{className:"flex items-start gap-4",children:[r.jsx("div",{className:"flex-shrink-0 w-8 h-8 bg-indigo-100 rounded-full flex items-center justify-center",children:r.jsx("span",{className:"text-indigo-600 font-semibold text-sm",children:"2"})}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-gray-900",children:"Earn Cashback Automatically"}),r.jsx("p",{className:"text-sm text-gray-500",children:"Get up to 5% cashback based on your card type"})]})]}),r.jsxs("div",{className:"flex items-start gap-4",children:[r.jsx("div",{className:"flex-shrink-0 w-8 h-8 bg-indigo-100 rounded-full flex items-center justify-center",children:r.jsx("span",{className:"text-indigo-600 font-semibold text-sm",children:"3"})}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-gray-900",children:"Redeem to Your Wallet"}),r.jsx("p",{className:"text-sm text-gray-500",children:"Transfer cashback to your wallet anytime"})]})]})]})]}),r.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100",children:[r.jsxs("div",{className:"p-4 border-b border-gray-100 flex items-center justify-between",children:[r.jsx("h3",{className:"font-semibold text-gray-900",children:"Recent Rewards"}),r.jsx("button",{onClick:()=>a("history"),className:"text-sm text-indigo-600 hover:text-indigo-700 font-medium",children:"View All"})]}),r.jsxs("div",{className:"divide-y divide-gray-100",children:[h.slice(0,5).map(V=>r.jsxs("div",{className:"p-4 flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"p-2 bg-gray-100 rounded-lg",children:r.jsx("svg",{className:"w-5 h-5 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:H(V.transactionType)})})}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-gray-900",children:V.merchantName||V.transactionType}),r.jsx("p",{className:"text-sm text-gray-500",children:F(V.createdAt)})]})]}),r.jsxs("div",{className:"text-right",children:[r.jsxs("p",{className:"font-semibold text-green-600",children:["+",O(V.amount)]}),r.jsxs("p",{className:"text-xs text-gray-500",children:[V.percentageApplied,"% on ",O(V.originalAmount)]})]})]},V.id)),h.length===0&&r.jsxs("div",{className:"p-8 text-center text-gray-500",children:[r.jsx("svg",{className:"w-12 h-12 mx-auto text-gray-300 mb-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),r.jsx("p",{children:"No cashback rewards yet"}),r.jsx("p",{className:"text-sm mt-1",children:"Make eligible transactions to start earning"})]})]})]})]}),s==="history"&&r.jsxs("div",{className:"space-y-4",children:[r.jsx("div",{className:"flex gap-2 overflow-x-auto pb-2",children:["all","CREDITED","REDEEMED","EXPIRED"].map(V=>r.jsx("button",{onClick:()=>w(V),className:`px-4 py-2 rounded-lg text-sm font-medium whitespace-nowrap ${v===V?"bg-indigo-600 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:V==="all"?"All":V},V))}),r.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100",children:r.jsxs("div",{className:"divide-y divide-gray-100",children:[h.map(V=>r.jsx("div",{className:"p-4",children:r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx("div",{className:"p-2 bg-gray-100 rounded-lg",children:r.jsx("svg",{className:"w-5 h-5 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:H(V.transactionType)})})}),r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("p",{className:"font-medium text-gray-900",children:V.merchantName||V.transactionType}),q(V.status)]}),r.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:[V.percentageApplied,"% cashback on ",O(V.originalAmount)]}),r.jsx("p",{className:"text-xs text-gray-400 mt-1",children:F(V.createdAt)})]})]}),r.jsxs("div",{className:"text-right",children:[r.jsxs("p",{className:`font-semibold ${V.status==="CREDITED"?"text-green-600":"text-gray-600"}`,children:["+",O(V.amount)]}),V.expiresAt&&V.status==="CREDITED"&&r.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:["Expires ",F(V.expiresAt)]})]})]})},V.id)),h.length===0&&r.jsx("div",{className:"p-8 text-center text-gray-500",children:r.jsx("p",{children:"No rewards found"})})]})})]}),s==="redeem"&&r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-gray-100",children:[r.jsx("h3",{className:"font-semibold text-gray-900 mb-4",children:"Redeem Cashback"}),A&&r.jsx("div",{className:"mb-4 p-4 bg-green-50 border border-green-200 rounded-lg",children:r.jsxs("div",{className:"flex items-center gap-2 text-green-800",children:[r.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),r.jsxs("span",{className:"font-medium",children:["Successfully redeemed ",O(A.amount)]})]})}),M&&r.jsx("div",{className:"mb-4 p-4 bg-red-50 border border-red-200 rounded-lg",children:r.jsxs("div",{className:"flex items-center gap-2 text-red-800",children:[r.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),r.jsx("span",{className:"font-medium",children:M})]})}),r.jsxs("div",{className:"space-y-4",children:[r.jsx("div",{className:"p-4 bg-gray-50 rounded-lg",children:r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"text-gray-600",children:"Available to redeem"}),r.jsx("span",{className:"text-xl font-bold text-gray-900",children:O((c==null?void 0:c.availableBalance)||0)})]})}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[r.jsx("input",{type:"radio",checked:_,onChange:()=>T(!0),className:"w-4 h-4 text-indigo-600 focus:ring-indigo-500"}),r.jsx("span",{className:"text-gray-700",children:"Redeem all available cashback"})]}),r.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[r.jsx("input",{type:"radio",checked:!_,onChange:()=>T(!1),className:"w-4 h-4 text-indigo-600 focus:ring-indigo-500"}),r.jsx("span",{className:"text-gray-700",children:"Redeem custom amount"})]})]}),!_&&r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Amount to redeem"}),r.jsxs("div",{className:"relative",children:[r.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500",children:"Le"}),r.jsx("input",{type:"number",value:C,onChange:V=>E(V.target.value),placeholder:"0.00",min:"0.01",max:(c==null?void 0:c.availableBalance)||0,step:"0.01",className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"})]})]}),r.jsx("div",{className:"p-4 bg-indigo-50 rounded-lg",children:r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx("svg",{className:"w-5 h-5 text-indigo-600 mt-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),r.jsxs("div",{className:"text-sm text-indigo-800",children:[r.jsx("p",{className:"font-medium",children:"Cashback will be added to your wallet"}),r.jsxs("p",{className:"mt-1 text-indigo-600",children:["Wallet balance: ",N?O(N.balance):"N/A"]})]})]})}),r.jsx("button",{onClick:B,disabled:o||!(c!=null&&c.availableBalance)||c.availableBalance<.01,className:`w-full py-3 px-4 rounded-lg font-semibold text-white transition-colors ${o||!(c!=null&&c.availableBalance)||c.availableBalance<.01?"bg-gray-400 cursor-not-allowed":"bg-indigo-600 hover:bg-indigo-700"}`,children:o?r.jsxs("span",{className:"flex items-center justify-center gap-2",children:[r.jsxs("svg",{className:"animate-spin h-5 w-5",fill:"none",viewBox:"0 0 24 24",children:[r.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),r.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Processing..."]}):`Redeem ${_?O((c==null?void 0:c.availableBalance)||0):C?O(parseFloat(C)):"Cashback"}`})]})]}),r.jsxs("div",{className:"bg-gray-50 rounded-xl p-4",children:[r.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Redemption Terms"}),r.jsxs("ul",{className:"text-sm text-gray-600 space-y-1",children:[r.jsx("li",{children:" Minimum redemption: Le 0.01"}),r.jsx("li",{children:" Cashback expires 90 days after being credited"}),r.jsx("li",{children:" Redeemed cashback is added to your primary wallet instantly"}),r.jsx("li",{children:" Expired cashback cannot be recovered"})]})]})]})]})}const VM=e=>({id:e.id,userId:e.user_id,cardId:e.card_id,transactionId:e.transaction_id,principalAmount:parseFloat(e.principal_amount)||0,totalAmount:parseFloat(e.total_amount)||0,interestAmount:parseFloat(e.interest_amount)||0,interestRate:parseFloat(e.interest_rate)||0,currency:e.currency||"SLE",numInstallments:parseInt(e.num_installments)||3,installmentAmount:parseFloat(e.installment_amount)||0,installmentsPaid:parseInt(e.installments_paid)||0,amountPaid:parseFloat(e.amount_paid)||0,amountRemaining:parseFloat(e.amount_remaining)||0,status:e.status||"ACTIVE",nextPaymentDate:e.next_payment_date,lastPaymentDate:e.last_payment_date,merchantName:e.merchant_name,description:e.description,startedAt:e.started_at,dueDate:e.due_date,completedAt:e.completed_at,createdAt:e.created_at,updatedAt:e.updated_at}),WM=e=>({id:e.id,loanId:e.loan_id,userId:e.user_id,amount:parseFloat(e.amount)||0,currency:e.currency||"SLE",installmentNumber:parseInt(e.installment_number)||1,dueDate:e.due_date,paidDate:e.paid_date,status:e.status||"SCHEDULED",transactionId:e.transaction_id,autoDebitEnabled:e.auto_debit_enabled??!0,createdAt:e.created_at}),ug={async getSummary(e){const{data:t,error:s}=await X.from("user_bnpl_summary").select("*").eq("user_id",e).maybeSingle();return s||!t?this.calculateSummary(e):{userId:t.user_id,activeLoans:parseInt(t.active_loans)||0,overdueLoans:parseInt(t.overdue_loans)||0,totalOutstanding:parseFloat(t.total_outstanding)||0,lifetimeBorrowed:parseFloat(t.lifetime_borrowed)||0,totalRepaid:parseFloat(t.total_repaid)||0}},async calculateSummary(e){const{data:t}=await X.from("bnpl_loans").select("status, amount_remaining, total_amount, amount_paid").eq("user_id",e);let s=0,a=0,n=0,i=0,o=0;for(const l of t||[])i+=parseFloat(l.total_amount)||0,o+=parseFloat(l.amount_paid)||0,l.status==="ACTIVE"?(s++,n+=parseFloat(l.amount_remaining)||0):l.status==="OVERDUE"&&(a++,n+=parseFloat(l.amount_remaining)||0);return{userId:e,activeLoans:s,overdueLoans:a,totalOutstanding:n,lifetimeBorrowed:i,totalRepaid:o}},async getLoans(e,t){let s=X.from("bnpl_loans").select("*").eq("user_id",e).order("created_at",{ascending:!1});t!=null&&t.status&&(s=s.eq("status",t.status)),t!=null&&t.limit&&(s=s.limit(t.limit));const{data:a,error:n}=await s;return n?(console.error("Error fetching BNPL loans:",n),[]):(a||[]).map(VM)},async getLoan(e){const{data:t,error:s}=await X.from("bnpl_loans").select("*").eq("id",e).maybeSingle();return s||!t?null:VM(t)},async getLoanPayments(e){const{data:t,error:s}=await X.from("bnpl_payments").select("*").eq("loan_id",e).order("installment_number",{ascending:!0});return s?(console.error("Error fetching BNPL payments:",s),[]):(t||[]).map(WM)},async getNextPayment(e){const{data:t}=await X.from("bnpl_payments").select("*").eq("user_id",e).in("status",["SCHEDULED","OVERDUE"]).order("due_date",{ascending:!0}).limit(1).maybeSingle();return t?WM(t):null},async createLoan(e,t){const{data:s,error:a}=await X.rpc("create_bnpl_loan",{p_user_id:e,p_card_id:t.cardId||null,p_amount:t.amount,p_num_installments:t.numInstallments,p_interest_rate:t.interestRate||0,p_merchant_name:t.merchantName||null,p_description:t.description||null,p_currency:t.currency||"SLE"});return a?a.message.includes("does not exist")?this.createLoanManually(e,t):{success:!1,error:a.message}:{success:!0,loanId:s}},async createLoanManually(e,t){const s=Math.round(t.amount*((t.interestRate||0)/100)*100)/100,a=t.amount+s,n=Math.round(a/t.numInstallments*100)/100,i=new Date;i.setMonth(i.getMonth()+t.numInstallments);const o=new Date;o.setMonth(o.getMonth()+1);const{data:l,error:c}=await X.from("bnpl_loans").insert({user_id:e,card_id:t.cardId,principal_amount:t.amount,total_amount:a,interest_amount:s,interest_rate:t.interestRate||0,currency:t.currency||"SLE",num_installments:t.numInstallments,installment_amount:n,amount_remaining:a,status:"ACTIVE",next_payment_date:o.toISOString().split("T")[0],merchant_name:t.merchantName,description:t.description,due_date:i.toISOString().split("T")[0]}).select("id").single();if(c)return{success:!1,error:c.message};for(let d=1;d<=t.numInstallments;d++){const h=new Date;h.setMonth(h.getMonth()+d),await X.from("bnpl_payments").insert({loan_id:l.id,user_id:e,amount:n,currency:t.currency||"SLE",installment_number:d,due_date:h.toISOString().split("T")[0],status:"SCHEDULED"})}return{success:!0,loanId:l.id}},async makePayment(e,t){const{data:s,error:a}=await X.rpc("make_bnpl_payment",{p_payment_id:e,p_wallet_id:t});if(a)return a.message.includes("does not exist")?this.makePaymentManually(e,t):{success:!1,message:a.message};const n=(s==null?void 0:s[0])||s;return{success:(n==null?void 0:n.success)||!1,message:(n==null?void 0:n.message)||"Unknown error",loanStatus:n==null?void 0:n.loan_status}},async makePaymentManually(e,t){const{data:s}=await X.from("bnpl_payments").select("*").eq("id",e).single();if(!s)return{success:!1,message:"Payment not found"};if(s.status==="PAID")return{success:!1,message:"Payment already made"};const{data:a}=await X.from("wallets").select("balance").eq("id",t).single();if(!a||parseFloat(a.balance)<parseFloat(s.amount))return{success:!1,message:"Insufficient wallet balance"};const{data:n}=await X.from("bnpl_loans").select("*").eq("id",s.loan_id).single();if(!n)return{success:!1,message:"Loan not found"};await X.from("wallets").update({balance:parseFloat(a.balance)-parseFloat(s.amount),updated_at:new Date().toISOString()}).eq("id",t);const{data:i}=await X.from("transactions").insert({wallet_id:t,type:"BNPL_PAYMENT",amount:-parseFloat(s.amount),status:"COMPLETED",description:`BNPL installment payment #${s.installment_number}`,metadata:{loan_id:n.id,payment_id:e}}).select("id").single();await X.from("bnpl_payments").update({status:"PAID",paid_date:new Date().toISOString().split("T")[0],transaction_id:i==null?void 0:i.id,updated_at:new Date().toISOString()}).eq("id",e);const o=parseInt(n.installments_paid)+1,l=parseFloat(n.amount_paid)+parseFloat(s.amount),c=parseFloat(n.amount_remaining)-parseFloat(s.amount),d=o>=parseInt(n.num_installments)?"PAID_OFF":"ACTIVE";let h=null;if(d==="ACTIVE"){const{data:f}=await X.from("bnpl_payments").select("due_date").eq("loan_id",n.id).eq("status","SCHEDULED").order("installment_number").limit(1).maybeSingle();h=f==null?void 0:f.due_date}return await X.from("bnpl_loans").update({installments_paid:o,amount_paid:l,amount_remaining:c,status:d,next_payment_date:h,last_payment_date:new Date().toISOString().split("T")[0],completed_at:d==="PAID_OFF"?new Date().toISOString():null,updated_at:new Date().toISOString()}).eq("id",n.id),{success:!0,message:"Payment successful",loanStatus:d}},async checkEligibility(e,t){const s=await this.getSummary(e);if(s.overdueLoans>0)return{eligible:!1,maxAmount:0,reason:"You have overdue BNPL payments. Please clear them first."};if(s.activeLoans>=3)return{eligible:!1,maxAmount:0,reason:"Maximum number of active BNPL loans reached (3)."};const n=5e4-s.totalOutstanding;return n<=0?{eligible:!1,maxAmount:0,reason:"You have reached your BNPL credit limit."}:t>n?{eligible:!1,maxAmount:n,reason:`Amount exceeds your available BNPL credit of Le ${n.toLocaleString()}.`}:{eligible:!0,maxAmount:n}},getInstallmentOptions(e){return[{installments:2,interestRate:0},{installments:3,interestRate:0},{installments:4,interestRate:5},{installments:6,interestRate:8},{installments:12,interestRate:12}].map(s=>{const a=Math.round(e*(s.interestRate/100)*100)/100,n=e+a,i=Math.round(n/s.installments*100)/100;return{installments:s.installments,interestRate:s.interestRate,installmentAmount:i,totalAmount:n,totalInterest:a}})}};function bye(){const{user:e}=pt(),t=Ut(),[s,a]=p.useState("overview"),[n,i]=p.useState(!0),[o,l]=p.useState(null),[c,d]=p.useState(null),[h,f]=p.useState([]),[x,y]=p.useState(null),[v,w]=p.useState([]),[N,k]=p.useState(null),[C,E]=p.useState(null),[_,T]=p.useState(!1),[A,P]=p.useState(null),[M,R]=p.useState(null);p.useEffect(()=>{e!=null&&e.id&&$()},[e==null?void 0:e.id]),p.useEffect(()=>{x&&I(x.id)},[x==null?void 0:x.id]);const $=async()=>{if(e!=null&&e.id){i(!0);try{const[V,z,G,te]=await Promise.all([ug.getSummary(e.id),ug.getLoans(e.id),ug.getNextPayment(e.id),W()]);d(V),f(z),k(G),E(te)}catch(V){console.error("Error loading BNPL data:",V)}finally{i(!1)}}},W=async()=>{if(!(e!=null&&e.id))return null;const{data:V}=await X.from("wallets").select("id, balance").eq("user_id",e.id).eq("is_primary",!0).single();return V?{id:V.id,balance:parseFloat(V.balance)||0}:null},I=async V=>{const z=await ug.getLoanPayments(V);w(z)},B=async()=>{if(!(!A||!(C!=null&&C.id))){l(A.id),R(null);try{const V=await ug.makePayment(A.id,C.id);R(V),V.success&&(await $(),x&&await I(x.id),setTimeout(()=>{T(!1),P(null),R(null)},2e3))}catch(V){R({success:!1,message:V.message})}finally{l(null)}}},O=V=>`Le ${V.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})}`,F=V=>new Date(V).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}),q=V=>{const z=new Date(V),G=new Date;return Math.ceil((z.getTime()-G.getTime())/(1e3*60*60*24))},H=V=>{const z={ACTIVE:"bg-blue-100 text-blue-800",PAID_OFF:"bg-green-100 text-green-800",OVERDUE:"bg-red-100 text-red-800",DEFAULTED:"bg-red-200 text-red-900",CANCELLED:"bg-gray-100 text-gray-600",SCHEDULED:"bg-yellow-100 text-yellow-800",PAID:"bg-green-100 text-green-800",MISSED:"bg-red-100 text-red-800"};return r.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs font-medium ${z[V]||"bg-gray-100 text-gray-600"}`,children:V.replace("_"," ")})},K=V=>Math.round(V.installmentsPaid/V.numInstallments*100);return n?r.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-indigo-600 border-t-transparent"})}):r.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-6 sm:px-6 lg:px-8",children:[r.jsxs("div",{className:"mb-6",children:[r.jsxs("button",{onClick:()=>t(-1),className:"flex items-center text-gray-600 hover:text-gray-900 mb-4",children:[r.jsx("svg",{className:"w-5 h-5 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"Back"]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Buy Now Pay Later"}),r.jsx("p",{className:"text-gray-600 mt-1",children:"Split payments into easy installments"})]}),r.jsx("div",{className:"hidden sm:flex items-center gap-2",children:r.jsx("svg",{className:"w-10 h-10 text-indigo-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})})})]})]}),r.jsxs("div",{className:"bg-gradient-to-br from-purple-600 to-indigo-700 rounded-2xl p-6 text-white mb-6 shadow-lg",children:[r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-purple-200 text-sm font-medium",children:"Outstanding Balance"}),r.jsx("p",{className:"text-4xl font-bold mt-1",children:O((c==null?void 0:c.totalOutstanding)||0)}),((c==null?void 0:c.overdueLoans)||0)>0&&r.jsxs("p",{className:"text-red-300 text-sm mt-2 flex items-center gap-1",children:[r.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),c==null?void 0:c.overdueLoans," overdue payment(s)"]})]}),r.jsxs("div",{className:"text-right",children:[r.jsx("p",{className:"text-purple-200 text-xs",children:"Active Loans"}),r.jsx("p",{className:"text-2xl font-bold",children:(c==null?void 0:c.activeLoans)||0})]})]}),r.jsx("div",{className:"mt-6 pt-4 border-t border-purple-500/30",children:r.jsxs("div",{className:"grid grid-cols-2 gap-4 text-center",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-lg font-bold",children:O((c==null?void 0:c.lifetimeBorrowed)||0)}),r.jsx("p",{className:"text-purple-200 text-xs",children:"Total Borrowed"})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-lg font-bold",children:O((c==null?void 0:c.totalRepaid)||0)}),r.jsx("p",{className:"text-purple-200 text-xs",children:"Total Repaid"})]})]})})]}),N&&r.jsx("div",{className:`rounded-xl p-4 mb-6 ${q(N.dueDate)<0?"bg-red-50 border border-red-200":q(N.dueDate)<=7?"bg-yellow-50 border border-yellow-200":"bg-blue-50 border border-blue-200"}`,children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:`p-2 rounded-lg ${q(N.dueDate)<0?"bg-red-100":q(N.dueDate)<=7?"bg-yellow-100":"bg-blue-100"}`,children:r.jsx("svg",{className:`w-5 h-5 ${q(N.dueDate)<0?"text-red-600":q(N.dueDate)<=7?"text-yellow-600":"text-blue-600"}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-gray-900",children:q(N.dueDate)<0?"Payment Overdue!":`Next payment due in ${q(N.dueDate)} days`}),r.jsxs("p",{className:"text-sm text-gray-600",children:[O(N.amount)," - Due ",F(N.dueDate)]})]})]}),r.jsx("button",{onClick:()=>{P(N),T(!0)},className:"px-4 py-2 bg-indigo-600 text-white rounded-lg text-sm font-medium hover:bg-indigo-700",children:"Pay Now"})]})}),r.jsx("div",{className:"flex gap-1 bg-gray-100 rounded-lg p-1 mb-6",children:["overview","loans","payments"].map(V=>r.jsxs("button",{onClick:()=>{a(V),y(null)},className:`flex-1 py-2 px-4 rounded-md text-sm font-medium transition-colors ${s===V?"bg-white text-indigo-600 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:[V==="overview"&&"Overview",V==="loans"&&"My Loans",V==="payments"&&"Payments"]},V))}),s==="overview"&&r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-gray-100",children:[r.jsx("h3",{className:"font-semibold text-gray-900 mb-4",children:"How BNPL Works"}),r.jsxs("div",{className:"grid gap-4",children:[r.jsxs("div",{className:"flex items-start gap-4",children:[r.jsx("div",{className:"flex-shrink-0 w-8 h-8 bg-indigo-100 rounded-full flex items-center justify-center",children:r.jsx("span",{className:"text-indigo-600 font-semibold text-sm",children:"1"})}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-gray-900",children:"Shop & Choose BNPL"}),r.jsx("p",{className:"text-sm text-gray-500",children:"Select BNPL at checkout for eligible purchases"})]})]}),r.jsxs("div",{className:"flex items-start gap-4",children:[r.jsx("div",{className:"flex-shrink-0 w-8 h-8 bg-indigo-100 rounded-full flex items-center justify-center",children:r.jsx("span",{className:"text-indigo-600 font-semibold text-sm",children:"2"})}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-gray-900",children:"Split Into Installments"}),r.jsx("p",{className:"text-sm text-gray-500",children:"Pay in 2-12 monthly installments. 0% interest for 2-3 months!"})]})]}),r.jsxs("div",{className:"flex items-start gap-4",children:[r.jsx("div",{className:"flex-shrink-0 w-8 h-8 bg-indigo-100 rounded-full flex items-center justify-center",children:r.jsx("span",{className:"text-indigo-600 font-semibold text-sm",children:"3"})}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-gray-900",children:"Auto-Pay Monthly"}),r.jsx("p",{className:"text-sm text-gray-500",children:"Payments are auto-debited from your wallet each month"})]})]})]})]}),r.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-gray-100",children:[r.jsx("h3",{className:"font-semibold text-gray-900 mb-4",children:"Installment Plans"}),r.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-3",children:[{months:2,rate:"0%",label:"Pay in 2"},{months:3,rate:"0%",label:"Pay in 3"},{months:4,rate:"5%",label:"Pay in 4"},{months:6,rate:"8%",label:"Pay in 6"},{months:12,rate:"12%",label:"Pay in 12"}].map(V=>r.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg text-center",children:[r.jsx("p",{className:"text-lg font-bold text-gray-900",children:V.months}),r.jsx("p",{className:"text-xs text-gray-500",children:"months"}),r.jsxs("p",{className:`text-xs font-medium mt-1 ${V.rate==="0%"?"text-green-600":"text-gray-600"}`,children:[V.rate," interest"]})]},V.months))})]}),r.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100",children:[r.jsxs("div",{className:"p-4 border-b border-gray-100 flex items-center justify-between",children:[r.jsx("h3",{className:"font-semibold text-gray-900",children:"Recent Loans"}),r.jsx("button",{onClick:()=>a("loans"),className:"text-sm text-indigo-600 hover:text-indigo-700 font-medium",children:"View All"})]}),r.jsxs("div",{className:"divide-y divide-gray-100",children:[h.slice(0,3).map(V=>r.jsxs("div",{onClick:()=>{y(V),a("loans")},className:"p-4 flex items-center justify-between cursor-pointer hover:bg-gray-50",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"p-2 bg-gray-100 rounded-lg",children:r.jsx("svg",{className:"w-5 h-5 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})})}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-gray-900",children:V.merchantName||V.description||"BNPL Purchase"}),r.jsxs("p",{className:"text-sm text-gray-500",children:[V.installmentsPaid,"/",V.numInstallments," payments"]})]})]}),r.jsxs("div",{className:"text-right",children:[r.jsx("p",{className:"font-semibold text-gray-900",children:O(V.amountRemaining)}),H(V.status)]})]},V.id)),h.length===0&&r.jsxs("div",{className:"p-8 text-center text-gray-500",children:[r.jsx("svg",{className:"w-12 h-12 mx-auto text-gray-300 mb-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})}),r.jsx("p",{children:"No BNPL loans yet"}),r.jsx("p",{className:"text-sm mt-1",children:"Use BNPL at checkout to split payments"})]})]})]})]}),s==="loans"&&r.jsx("div",{className:"space-y-4",children:x?r.jsxs("div",{className:"space-y-4",children:[r.jsxs("button",{onClick:()=>y(null),className:"flex items-center text-gray-600 hover:text-gray-900",children:[r.jsx("svg",{className:"w-5 h-5 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"Back to Loans"]}),r.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-gray-100",children:[r.jsxs("div",{className:"flex items-start justify-between mb-4",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:x.merchantName||x.description||"BNPL Purchase"}),r.jsxs("p",{className:"text-sm text-gray-500",children:["Started ",F(x.startedAt)]})]}),H(x.status)]}),r.jsxs("div",{className:"mb-6",children:[r.jsxs("div",{className:"flex justify-between text-sm mb-2",children:[r.jsx("span",{className:"text-gray-600",children:"Progress"}),r.jsxs("span",{className:"font-medium text-gray-900",children:[x.installmentsPaid,"/",x.numInstallments," payments"]})]}),r.jsx("div",{className:"h-3 bg-gray-200 rounded-full overflow-hidden",children:r.jsx("div",{className:"h-full bg-indigo-600 rounded-full transition-all",style:{width:`${K(x)}%`}})})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[r.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg",children:[r.jsx("p",{className:"text-xs text-gray-500",children:"Principal"}),r.jsx("p",{className:"text-lg font-semibold text-gray-900",children:O(x.principalAmount)})]}),r.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg",children:[r.jsxs("p",{className:"text-xs text-gray-500",children:["Interest (",x.interestRate,"%)"]}),r.jsx("p",{className:"text-lg font-semibold text-gray-900",children:O(x.interestAmount)})]}),r.jsxs("div",{className:"p-3 bg-indigo-50 rounded-lg",children:[r.jsx("p",{className:"text-xs text-indigo-600",children:"Amount Paid"}),r.jsx("p",{className:"text-lg font-semibold text-indigo-600",children:O(x.amountPaid)})]}),r.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg",children:[r.jsx("p",{className:"text-xs text-gray-500",children:"Remaining"}),r.jsx("p",{className:"text-lg font-semibold text-gray-900",children:O(x.amountRemaining)})]})]}),r.jsx("h4",{className:"font-medium text-gray-900 mb-3",children:"Payment Schedule"}),r.jsx("div",{className:"space-y-2",children:v.map(V=>r.jsxs("div",{className:`p-3 rounded-lg flex items-center justify-between ${V.status==="PAID"?"bg-green-50":V.status==="OVERDUE"?"bg-red-50":"bg-gray-50"}`,children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center ${V.status==="PAID"?"bg-green-100 text-green-600":V.status==="OVERDUE"?"bg-red-100 text-red-600":"bg-gray-200 text-gray-600"}`,children:V.status==="PAID"?r.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}):r.jsx("span",{className:"text-sm font-medium",children:V.installmentNumber})}),r.jsxs("div",{children:[r.jsxs("p",{className:"font-medium text-gray-900",children:["Installment #",V.installmentNumber]}),r.jsx("p",{className:"text-sm text-gray-500",children:V.status==="PAID"?`Paid ${F(V.paidDate)}`:`Due ${F(V.dueDate)}`})]})]}),r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("p",{className:"font-semibold text-gray-900",children:O(V.amount)}),V.status!=="PAID"&&r.jsx("button",{onClick:()=>{P(V),T(!0)},className:"px-3 py-1 bg-indigo-600 text-white text-sm rounded-lg hover:bg-indigo-700",children:"Pay"})]})]},V.id))})]})]}):r.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100",children:r.jsxs("div",{className:"divide-y divide-gray-100",children:[h.map(V=>r.jsxs("div",{onClick:()=>y(V),className:"p-4 cursor-pointer hover:bg-gray-50",children:[r.jsxs("div",{className:"flex items-center justify-between mb-3",children:[r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-gray-900",children:V.merchantName||V.description||"BNPL Purchase"}),r.jsx("p",{className:"text-sm text-gray-500",children:F(V.startedAt)})]}),H(V.status)]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex-1 mr-4",children:[r.jsx("div",{className:"h-2 bg-gray-200 rounded-full overflow-hidden",children:r.jsx("div",{className:"h-full bg-indigo-600 rounded-full",style:{width:`${K(V)}%`}})}),r.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[V.installmentsPaid,"/",V.numInstallments," payments"]})]}),r.jsxs("div",{className:"text-right",children:[r.jsx("p",{className:"font-semibold text-gray-900",children:O(V.amountRemaining)}),r.jsx("p",{className:"text-xs text-gray-500",children:"remaining"})]})]})]},V.id)),h.length===0&&r.jsx("div",{className:"p-8 text-center text-gray-500",children:r.jsx("p",{children:"No BNPL loans"})})]})})}),s==="payments"&&r.jsx("div",{className:"space-y-4",children:r.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100",children:[r.jsx("div",{className:"p-4 border-b border-gray-100",children:r.jsx("h3",{className:"font-semibold text-gray-900",children:"All Scheduled Payments"})}),r.jsx("div",{className:"divide-y divide-gray-100",children:h.flatMap(V=>V.status==="ACTIVE"||V.status==="OVERDUE"?[V]:[]).length===0?r.jsx("div",{className:"p-8 text-center text-gray-500",children:r.jsx("p",{children:"No upcoming payments"})}):h.filter(V=>V.status==="ACTIVE"||V.status==="OVERDUE").map(V=>r.jsx("div",{className:"p-4",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-gray-900",children:V.merchantName||V.description||"BNPL Purchase"}),r.jsxs("p",{className:"text-sm text-gray-500",children:["Next: ",O(V.installmentAmount)," on"," ",V.nextPaymentDate?F(V.nextPaymentDate):"N/A"]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[H(V.status),r.jsx("button",{onClick:()=>y(V),className:"text-indigo-600 hover:text-indigo-700 text-sm font-medium",children:"View"})]})]})},V.id))})]})}),_&&A&&r.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:r.jsxs("div",{className:"bg-white rounded-2xl max-w-md w-full p-6",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Make Payment"}),M?r.jsx("div",{className:`p-4 rounded-lg mb-4 ${M.success?"bg-green-50":"bg-red-50"}`,children:r.jsxs("div",{className:`flex items-center gap-2 ${M.success?"text-green-800":"text-red-800"}`,children:[M.success?r.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}):r.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),r.jsx("span",{className:"font-medium",children:M.message})]})}):r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg mb-4",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsxs("span",{className:"text-gray-600",children:["Installment #",A.installmentNumber]}),r.jsx("span",{className:"text-xl font-bold text-gray-900",children:O(A.amount)})]}),r.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["Due: ",F(A.dueDate)]})]}),r.jsx("div",{className:"p-4 bg-indigo-50 rounded-lg mb-4",children:r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx("svg",{className:"w-5 h-5 text-indigo-600 mt-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z"})}),r.jsxs("div",{className:"text-sm",children:[r.jsx("p",{className:"font-medium text-indigo-800",children:"Payment from wallet"}),r.jsxs("p",{className:"text-indigo-600",children:["Available: ",C?O(C.balance):"N/A"]})]})]})}),C&&C.balance<A.amount&&r.jsx("div",{className:"p-3 bg-red-50 rounded-lg mb-4 text-sm text-red-700",children:"Insufficient wallet balance. Please top up your wallet first."})]}),r.jsxs("div",{className:"flex gap-3",children:[r.jsx("button",{onClick:()=>{T(!1),P(null),R(null)},className:"flex-1 py-3 px-4 border border-gray-300 rounded-lg text-gray-700 font-medium hover:bg-gray-50",children:M?"Close":"Cancel"}),!M&&r.jsx("button",{onClick:B,disabled:o!==null||!C||C.balance<A.amount,className:`flex-1 py-3 px-4 rounded-lg font-medium text-white ${o!==null||!C||C.balance<A.amount?"bg-gray-400 cursor-not-allowed":"bg-indigo-600 hover:bg-indigo-700"}`,children:o?r.jsxs("span",{className:"flex items-center justify-center gap-2",children:[r.jsxs("svg",{className:"animate-spin h-5 w-5",fill:"none",viewBox:"0 0 24 24",children:[r.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),r.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Processing..."]}):"Pay Now"})]})]})})]})}const I3=e=>({id:e.id,agentId:e.agent_id,businessName:e.business_name,address:e.address,city:e.city,region:e.region,phone:e.phone,whatsapp:e.whatsapp,operatingHours:e.operating_hours,isOpenNow:e.is_open_now??!1,cashAvailable:e.cash_available??!0,dailyLimit:parseFloat(e.daily_limit)||5e4,minAmount:parseFloat(e.min_amount)||10,maxAmount:parseFloat(e.max_amount)||1e4,isActive:e.is_active??!0,verified:e.verified??!1,rating:parseFloat(e.rating)||0,totalTransactions:parseInt(e.total_transactions)||0,latitude:e.latitude?parseFloat(e.latitude):void 0,longitude:e.longitude?parseFloat(e.longitude):void 0}),Dv=e=>({id:e.id,userId:e.user_id,agentId:e.agent_id,agentLocationId:e.agent_location_id,amount:parseFloat(e.amount)||0,currency:e.currency||"SLE",fee:parseFloat(e.fee)||0,totalDeducted:parseFloat(e.total_deducted)||0,code:e.code,codeExpiresAt:e.code_expires_at,codeVerifiedAt:e.code_verified_at,status:e.status||"PENDING",qrCodeData:e.qr_code_data,walletId:e.wallet_id,transactionId:e.transaction_id,requestedAt:e.requested_at||e.created_at,completedAt:e.completed_at,cancelledAt:e.cancelled_at,cancelReason:e.cancel_reason,agentLocation:e.agent_locations?I3(e.agent_locations):void 0}),Ld={async getNearbyAgents(e){let t=X.from("agent_locations").select("*").eq("is_active",!0).eq("cash_available",!0).order("total_transactions",{ascending:!1});e!=null&&e.city&&(t=t.eq("city",e.city)),e!=null&&e.limit&&(t=t.limit(e.limit));const{data:s,error:a}=await t;if(a)return console.error("Error fetching agent locations:",a),[];let n=(s||[]).map(I3);return e!=null&&e.latitude&&(e!=null&&e.longitude)&&(n=n.map(i=>({...i,distance:i.latitude&&i.longitude?this.calculateDistance(e.latitude,e.longitude,i.latitude,i.longitude):void 0})),n.sort((i,o)=>(i.distance||999)-(o.distance||999))),n},calculateDistance(e,t,s,a){const i=this.toRad(s-e),o=this.toRad(a-t),l=Math.sin(i/2)*Math.sin(i/2)+Math.cos(this.toRad(e))*Math.cos(this.toRad(s))*Math.sin(o/2)*Math.sin(o/2),c=2*Math.atan2(Math.sqrt(l),Math.sqrt(1-l));return Math.round(6371*c*10)/10},toRad(e){return e*(Math.PI/180)},async getAgentLocation(e){const{data:t,error:s}=await X.from("agent_locations").select("*").eq("id",e).maybeSingle();return s||!t?null:I3(t)},async createRequest(e){const{data:t,error:s}=await X.rpc("create_cash_out_request",{p_user_id:e.userId,p_amount:e.amount,p_wallet_id:e.walletId,p_agent_location_id:e.agentLocationId||null,p_currency:e.currency||"SLE"});if(s)return s.message.includes("does not exist")?this.createRequestManually(e):{success:!1,error:s.message};const a=(t==null?void 0:t[0])||t;return a!=null&&a.success?{success:!0,request:await this.getRequest(a.request_id)||void 0,code:a.code}:{success:!1,error:(a==null?void 0:a.message)||"Failed to create request"}},async createRequestManually(e){const t=Math.max(Math.round(e.amount*.01*100)/100,1),s=e.amount+t,{data:a}=await X.from("wallets").select("balance").eq("id",e.walletId).single();if(!a||parseFloat(a.balance)<s)return{success:!1,error:"Insufficient balance"};const n=Math.floor(1e5+Math.random()*9e5).toString(),i=new Date;i.setMinutes(i.getMinutes()+30),await X.from("wallets").update({balance:parseFloat(a.balance)-s,updated_at:new Date().toISOString()}).eq("id",e.walletId);const{data:o,error:l}=await X.from("cash_out_requests").insert({user_id:e.userId,agent_location_id:e.agentLocationId,amount:e.amount,currency:e.currency||"SLE",fee:t,total_deducted:s,code:n,code_expires_at:i.toISOString(),wallet_id:e.walletId,status:"PENDING",qr_code_data:`CASHOUT_${e.userId}_${Date.now()}`}).select().single();return l?(await X.from("wallets").update({balance:parseFloat(a.balance),updated_at:new Date().toISOString()}).eq("id",e.walletId),{success:!1,error:l.message}):{success:!0,request:Dv(o),code:n}},async getRequest(e){const{data:t,error:s}=await X.from("cash_out_requests").select(`
        *,
        agent_locations (*)
      `).eq("id",e).maybeSingle();return s||!t?null:Dv(t)},async getUserRequests(e,t=20){const{data:s,error:a}=await X.from("cash_out_requests").select(`
        *,
        agent_locations (*)
      `).eq("user_id",e).order("created_at",{ascending:!1}).limit(t);return a?(console.error("Error fetching cash-out requests:",a),[]):(s||[]).map(Dv)},async getActiveRequest(e){const{data:t}=await X.from("cash_out_requests").select(`
        *,
        agent_locations (*)
      `).eq("user_id",e).eq("status","PENDING").gt("code_expires_at",new Date().toISOString()).order("created_at",{ascending:!1}).limit(1).maybeSingle();return t?Dv(t):null},async cancelRequest(e,t,s){const{data:a,error:n}=await X.rpc("cancel_cash_out",{p_request_id:e,p_user_id:t,p_reason:s||null});if(n)return n.message.includes("does not exist")?this.cancelRequestManually(e,t,s):{success:!1,message:n.message};const i=(a==null?void 0:a[0])||a;return{success:(i==null?void 0:i.success)||!1,message:(i==null?void 0:i.message)||"Unknown error"}},async cancelRequestManually(e,t,s){const{data:a}=await X.from("cash_out_requests").select("*").eq("id",e).eq("user_id",t).eq("status","PENDING").single();if(!a)return{success:!1,message:"Request not found or cannot be cancelled"};const{data:n}=await X.from("wallets").select("balance").eq("id",a.wallet_id).single();return n&&await X.from("wallets").update({balance:parseFloat(n.balance)+parseFloat(a.total_deducted),updated_at:new Date().toISOString()}).eq("id",a.wallet_id),await X.from("cash_out_requests").update({status:"CANCELLED",cancelled_at:new Date().toISOString(),cancel_reason:s,updated_at:new Date().toISOString()}).eq("id",e),{success:!0,message:"Cash-out request cancelled and funds refunded"}},calculateFee(e){return Math.max(Math.round(e*.01*100)/100,1)},getLimits(){return{minAmount:10,maxAmount:1e4,dailyLimit:5e4}}};function vye(){const{user:e}=pt(),t=Ut(),[s,a]=p.useState("amount"),[n,i]=p.useState(!1),[o,l]=p.useState(!1),[c,d]=p.useState(null),[h,f]=p.useState([]),[x,y]=p.useState(null),[v,w]=p.useState([]),[N,k]=p.useState(""),[C,E]=p.useState(null),[_,T]=p.useState(null),[A,P]=p.useState(""),[M,R]=p.useState(null),$=Ld.getLimits();p.useEffect(()=>{e!=null&&e.id&&W()},[e==null?void 0:e.id]);const W=async()=>{if(e!=null&&e.id){i(!0);try{const[ne,ce,xe]=await Promise.all([I(),Ld.getActiveRequest(e.id),Ld.getUserRequests(e.id,20)]);d(ne),y(ce),w(xe),ce&&(T(ce),P(ce.code),a("code"))}catch(ne){console.error("Error loading data:",ne)}finally{i(!1)}}},I=async()=>{if(!(e!=null&&e.id))return null;const{data:ne}=await X.from("wallets").select("id, balance, currency").eq("user_id",e.id).eq("is_primary",!0).single();return ne?{id:ne.id,balance:parseFloat(ne.balance)||0,currency:ne.currency||"SLE"}:null},B=async()=>{i(!0);try{const ne=await Ld.getNearbyAgents({limit:20});f(ne)}catch(ne){console.error("Error loading agents:",ne)}finally{i(!1)}},O=()=>{R(null);const ne=parseFloat(N);if(!ne||ne<=0){R("Please enter a valid amount");return}if(ne<$.minAmount){R(`Minimum withdrawal is Le ${$.minAmount.toLocaleString()}`);return}if(ne>$.maxAmount){R(`Maximum withdrawal is Le ${$.maxAmount.toLocaleString()}`);return}const ce=Ld.calculateFee(ne),xe=ne+ce;if(!c||c.balance<xe){R("Insufficient balance");return}B(),a("agents")},F=ne=>{E(ne),a("confirm")},q=async()=>{if(!(!(e!=null&&e.id)||!(c!=null&&c.id))){l(!0),R(null);try{const ne=await Ld.createRequest({userId:e.id,amount:parseFloat(N),walletId:c.id,agentLocationId:C==null?void 0:C.id});if(ne.success&&ne.request){T(ne.request),P(ne.code||ne.request.code),a("code");const ce=await I();d(ce)}else R(ne.error||"Failed to create cash-out request")}catch(ne){R(ne.message||"An error occurred")}finally{l(!1)}}},H=async()=>{if(!(!(e!=null&&e.id)||!_)){l(!0);try{const ne=await Ld.cancelRequest(_.id,e.id,"User cancelled");ne.success?(T(null),P(""),k(""),E(null),a("amount"),await W()):R(ne.message)}catch(ne){R(ne.message)}finally{l(!1)}}},K=ne=>`Le ${ne.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})}`,V=ne=>new Date(ne).toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),z=ne=>{const ce=new Date(ne),xe=new Date,_e=ce.getTime()-xe.getTime();if(_e<=0)return"Expired";const oe=Math.floor(_e/6e4);return`${oe} min${oe!==1?"s":""} remaining`},G=ne=>{const ce={PENDING:"bg-yellow-100 text-yellow-800",COMPLETED:"bg-green-100 text-green-800",CANCELLED:"bg-gray-100 text-gray-600",EXPIRED:"bg-red-100 text-red-800"};return r.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs font-medium ${ce[ne]||"bg-gray-100 text-gray-600"}`,children:ne})},te=N?Ld.calculateFee(parseFloat(N)||0):0,he=(parseFloat(N)||0)+te;return n&&!c?r.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-indigo-600 border-t-transparent"})}):r.jsxs("div",{className:"max-w-lg mx-auto px-4 py-6 sm:px-6 lg:px-8",children:[r.jsxs("div",{className:"mb-6",children:[r.jsxs("button",{onClick:()=>{s==="history"?a(_?"code":"amount"):s==="agents"?a("amount"):s==="confirm"?a("agents"):t(-1)},className:"flex items-center text-gray-600 hover:text-gray-900 mb-4",children:[r.jsx("svg",{className:"w-5 h-5 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"Back"]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Cash Out"}),r.jsx("p",{className:"text-gray-600 mt-1",children:"Withdraw cash at agent locations"})]}),r.jsx("button",{onClick:()=>a("history"),className:"text-indigo-600 hover:text-indigo-700 text-sm font-medium",children:"History"})]})]}),s!=="history"&&s!=="code"&&r.jsxs("div",{className:"bg-gradient-to-br from-green-600 to-teal-700 rounded-2xl p-6 text-white mb-6 shadow-lg",children:[r.jsx("p",{className:"text-green-100 text-sm",children:"Available Balance"}),r.jsx("p",{className:"text-3xl font-bold mt-1",children:K((c==null?void 0:c.balance)||0)})]}),M&&r.jsx("div",{className:"mb-4 p-4 bg-red-50 border border-red-200 rounded-lg",children:r.jsxs("div",{className:"flex items-center gap-2 text-red-800",children:[r.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),r.jsx("span",{children:M})]})}),s==="amount"&&r.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-gray-100",children:[r.jsx("h3",{className:"font-semibold text-gray-900 mb-4",children:"Enter Amount"}),r.jsxs("div",{className:"mb-4",children:[r.jsx("label",{className:"block text-sm text-gray-600 mb-2",children:"Amount to withdraw"}),r.jsxs("div",{className:"relative",children:[r.jsx("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-500 font-medium",children:"Le"}),r.jsx("input",{type:"number",value:N,onChange:ne=>k(ne.target.value),placeholder:"0.00",min:$.minAmount,max:$.maxAmount,className:"w-full pl-12 pr-4 py-4 border border-gray-300 rounded-lg text-xl font-semibold focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"})]}),r.jsxs("p",{className:"text-xs text-gray-500 mt-2",children:["Min: ",K($.minAmount),"  Max: ",K($.maxAmount)]})]}),r.jsx("div",{className:"grid grid-cols-4 gap-2 mb-6",children:[10,50,100,500].map(ne=>r.jsx("button",{onClick:()=>k(ne.toString()),className:`py-2 rounded-lg text-sm font-medium ${N===ne.toString()?"bg-indigo-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:ne.toLocaleString()},ne))}),parseFloat(N)>0&&r.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg mb-6 space-y-2",children:[r.jsxs("div",{className:"flex justify-between text-sm",children:[r.jsx("span",{className:"text-gray-600",children:"Amount"}),r.jsx("span",{className:"font-medium",children:K(parseFloat(N))})]}),r.jsxs("div",{className:"flex justify-between text-sm",children:[r.jsx("span",{className:"text-gray-600",children:"Fee (1%)"}),r.jsx("span",{className:"font-medium",children:K(te)})]}),r.jsxs("div",{className:"pt-2 border-t border-gray-200 flex justify-between",children:[r.jsx("span",{className:"font-medium text-gray-900",children:"Total"}),r.jsx("span",{className:"font-bold text-gray-900",children:K(he)})]})]}),r.jsx("button",{onClick:O,disabled:!N||parseFloat(N)<=0,className:`w-full py-3 px-4 rounded-lg font-semibold text-white ${!N||parseFloat(N)<=0?"bg-gray-400 cursor-not-allowed":"bg-indigo-600 hover:bg-indigo-700"}`,children:"Continue"})]}),s==="agents"&&r.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100",children:[r.jsxs("div",{className:"p-4 border-b border-gray-100",children:[r.jsx("h3",{className:"font-semibold text-gray-900",children:"Select Agent (Optional)"}),r.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Choose a nearby agent or skip to get your code"})]}),r.jsxs("div",{className:"divide-y divide-gray-100 max-h-[400px] overflow-y-auto",children:[r.jsxs("button",{onClick:()=>F(null),className:"w-full p-4 text-left hover:bg-gray-50 flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-indigo-600",children:"Skip - Use any agent"}),r.jsx("p",{className:"text-sm text-gray-500",children:"Get a code valid at all agents"})]}),r.jsx("svg",{className:"w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]}),h.map(ne=>r.jsx("button",{onClick:()=>F(ne),disabled:!ne.cashAvailable,className:`w-full p-4 text-left hover:bg-gray-50 ${ne.cashAvailable?"":"opacity-50"}`,children:r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("p",{className:"font-medium text-gray-900",children:ne.businessName}),ne.verified&&r.jsx("svg",{className:"w-4 h-4 text-blue-500",fill:"currentColor",viewBox:"0 0 20 20",children:r.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})})]}),r.jsx("p",{className:"text-sm text-gray-500",children:ne.address}),ne.city&&r.jsx("p",{className:"text-xs text-gray-400",children:ne.city}),ne.distance!==void 0&&r.jsxs("p",{className:"text-xs text-indigo-600 mt-1",children:[ne.distance," km away"]})]}),r.jsxs("div",{className:"text-right",children:[ne.cashAvailable?r.jsx("span",{className:"text-xs bg-green-100 text-green-700 px-2 py-0.5 rounded-full",children:"Cash Available"}):r.jsx("span",{className:"text-xs bg-red-100 text-red-700 px-2 py-0.5 rounded-full",children:"No Cash"}),ne.rating>0&&r.jsxs("p",{className:"text-xs text-gray-500 mt-1 flex items-center justify-end gap-1",children:[r.jsx("svg",{className:"w-3 h-3 text-yellow-500",fill:"currentColor",viewBox:"0 0 20 20",children:r.jsx("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})}),ne.rating.toFixed(1)]})]})]})},ne.id)),h.length===0&&!n&&r.jsxs("div",{className:"p-8 text-center text-gray-500",children:[r.jsx("p",{children:"No agents available"}),r.jsx("button",{onClick:()=>F(null),className:"mt-2 text-indigo-600 hover:text-indigo-700 font-medium",children:"Skip and get code"})]})]})]}),s==="confirm"&&r.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-gray-100",children:[r.jsx("h3",{className:"font-semibold text-gray-900 mb-4",children:"Confirm Cash-Out"}),r.jsxs("div",{className:"space-y-4 mb-6",children:[r.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[r.jsx("p",{className:"text-sm text-gray-500",children:"Amount to receive"}),r.jsx("p",{className:"text-2xl font-bold text-gray-900",children:K(parseFloat(N))})]}),r.jsxs("div",{className:"flex justify-between text-sm",children:[r.jsx("span",{className:"text-gray-600",children:"Fee"}),r.jsx("span",{className:"font-medium",children:K(te)})]}),r.jsxs("div",{className:"flex justify-between text-sm",children:[r.jsx("span",{className:"text-gray-600",children:"Total deducted"}),r.jsx("span",{className:"font-semibold",children:K(he)})]}),C&&r.jsxs("div",{className:"pt-4 border-t border-gray-200",children:[r.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Agent"}),r.jsx("p",{className:"font-medium text-gray-900",children:C.businessName}),r.jsx("p",{className:"text-sm text-gray-500",children:C.address})]})]}),r.jsx("div",{className:"p-4 bg-yellow-50 rounded-lg mb-6",children:r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx("svg",{className:"w-5 h-5 text-yellow-600 mt-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),r.jsxs("div",{className:"text-sm text-yellow-800",children:[r.jsx("p",{className:"font-medium",children:"Important"}),r.jsx("p",{children:"You'll receive a 6-digit code valid for 30 minutes. Show this code to the agent to collect your cash."})]})]})}),r.jsxs("div",{className:"flex gap-3",children:[r.jsx("button",{onClick:()=>a("agents"),className:"flex-1 py-3 px-4 border border-gray-300 rounded-lg text-gray-700 font-medium hover:bg-gray-50",children:"Back"}),r.jsx("button",{onClick:q,disabled:o,className:`flex-1 py-3 px-4 rounded-lg font-semibold text-white ${o?"bg-gray-400 cursor-not-allowed":"bg-indigo-600 hover:bg-indigo-700"}`,children:o?"Processing...":"Confirm"})]})]}),s==="code"&&_&&r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-gray-100 text-center",children:[r.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:r.jsx("svg",{className:"w-8 h-8 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Cash-Out Code Ready"}),r.jsx("p",{className:"text-sm text-gray-500 mb-6",children:"Show this code to any Peeap agent"}),r.jsx("div",{className:"bg-gray-900 rounded-xl p-6 mb-4",children:r.jsx("p",{className:"text-4xl font-mono font-bold text-white tracking-widest",children:A})}),r.jsxs("div",{className:"mb-4",children:[r.jsx("p",{className:"text-sm text-gray-500",children:"Collect"}),r.jsx("p",{className:"text-2xl font-bold text-gray-900",children:K(_.amount)})]}),r.jsxs("div",{className:`inline-flex items-center gap-2 px-3 py-1 rounded-full text-sm ${new Date(_.codeExpiresAt)>new Date?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:[r.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),z(_.codeExpiresAt)]})]}),r.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm border border-gray-100",children:[r.jsx("h4",{className:"font-medium text-gray-900 mb-3",children:"How to collect"}),r.jsxs("ol",{className:"space-y-2 text-sm text-gray-600",children:[r.jsxs("li",{className:"flex items-start gap-3",children:[r.jsx("span",{className:"flex-shrink-0 w-5 h-5 bg-indigo-100 text-indigo-600 rounded-full flex items-center justify-center text-xs font-medium",children:"1"}),r.jsx("span",{children:"Visit any Peeap agent location"})]}),r.jsxs("li",{className:"flex items-start gap-3",children:[r.jsx("span",{className:"flex-shrink-0 w-5 h-5 bg-indigo-100 text-indigo-600 rounded-full flex items-center justify-center text-xs font-medium",children:"2"}),r.jsx("span",{children:"Show your 6-digit code to the agent"})]}),r.jsxs("li",{className:"flex items-start gap-3",children:[r.jsx("span",{className:"flex-shrink-0 w-5 h-5 bg-indigo-100 text-indigo-600 rounded-full flex items-center justify-center text-xs font-medium",children:"3"}),r.jsxs("span",{children:["Collect your ",K(_.amount)," cash"]})]})]})]}),_.status==="PENDING"&&r.jsx("button",{onClick:H,disabled:o,className:"w-full py-3 px-4 border border-red-300 text-red-600 rounded-lg font-medium hover:bg-red-50",children:o?"Cancelling...":"Cancel Request"})]}),s==="history"&&r.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100",children:[r.jsx("div",{className:"p-4 border-b border-gray-100",children:r.jsx("h3",{className:"font-semibold text-gray-900",children:"Withdrawal History"})}),r.jsxs("div",{className:"divide-y divide-gray-100",children:[v.map(ne=>r.jsx("div",{className:"p-4",children:r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-gray-900",children:K(ne.amount)}),r.jsx("p",{className:"text-sm text-gray-500",children:V(ne.requestedAt)}),ne.agentLocation&&r.jsx("p",{className:"text-xs text-gray-400 mt-1",children:ne.agentLocation.businessName})]}),r.jsxs("div",{className:"text-right",children:[G(ne.status),r.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Fee: ",K(ne.fee)]})]})]})},ne.id)),v.length===0&&r.jsx("div",{className:"p-8 text-center text-gray-500",children:r.jsx("p",{children:"No withdrawal history"})})]})]})]})}const zM={TRANSFER:{label:"Transfers",color:"#6366f1"},BILL_PAYMENT:{label:"Bills & Utilities",color:"#f59e0b"},AIRTIME:{label:"Airtime",color:"#10b981"},DATA:{label:"Data Bundles",color:"#06b6d4"},CARD_PAYMENT:{label:"Card Payments",color:"#8b5cf6"},BNPL_PAYMENT:{label:"BNPL",color:"#ec4899"},CASH_OUT:{label:"Cash Withdrawals",color:"#ef4444"},DEPOSIT:{label:"Deposits",color:"#22c55e"},CASHBACK_REDEMPTION:{label:"Cashback",color:"#14b8a6"},OTHER:{label:"Other",color:"#6b7280"}},hg={async getSummary(e,t,s){const{data:a}=await X.from("wallets").select("id").eq("user_id",e).eq("is_primary",!0).single();if(!a)return{totalIncome:0,totalExpenses:0,netBalance:0,averageDaily:0,biggestExpense:null,transactionCount:0};const{data:n}=await X.from("transactions").select("amount, type, description, created_at").eq("wallet_id",a.id).eq("status","COMPLETED").gte("created_at",t.toISOString()).lte("created_at",s.toISOString());if(!(n!=null&&n.length))return{totalIncome:0,totalExpenses:0,netBalance:0,averageDaily:0,biggestExpense:null,transactionCount:0};let i=0,o=0,l=null;for(const h of n){const f=parseFloat(h.amount)||0;if(f>0)i+=f;else{const x=Math.abs(f);o+=x,(!l||x>l.amount)&&(l={amount:x,description:h.description||h.type,date:h.created_at})}}const c=Math.ceil((s.getTime()-t.getTime())/(1e3*60*60*24)),d=c>0?o/c:0;return{totalIncome:i,totalExpenses:o,netBalance:i-o,averageDaily:d,biggestExpense:l,transactionCount:n.length}},async getSpendingByCategory(e,t,s){const{data:a}=await X.from("wallets").select("id").eq("user_id",e).eq("is_primary",!0).single();if(!a)return[];const{data:n}=await X.from("transactions").select("amount, type").eq("wallet_id",a.id).eq("status","COMPLETED").lt("amount",0).gte("created_at",t.toISOString()).lte("created_at",s.toISOString());if(!(n!=null&&n.length))return[];const i={};let o=0;for(const c of n){const d=Math.abs(parseFloat(c.amount)||0),h=c.type||"OTHER";i[h]||(i[h]={amount:0,count:0}),i[h].amount+=d,i[h].count++,o+=d}return Object.entries(i).map(([c,d])=>{var h,f;return{category:((h=zM[c])==null?void 0:h.label)||c,amount:d.amount,percentage:o>0?Math.round(d.amount/o*100):0,transactionCount:d.count,color:((f=zM[c])==null?void 0:f.color)||"#6b7280"}}).sort((c,d)=>d.amount-c.amount)},async getMonthlyTrend(e,t=6){const{data:s}=await X.from("wallets").select("id").eq("user_id",e).eq("is_primary",!0).single();if(!s)return[];const a=new Date,n=new Date;n.setMonth(n.getMonth()-t+1),n.setDate(1),n.setHours(0,0,0,0);const{data:i}=await X.from("transactions").select("amount, created_at").eq("wallet_id",s.id).eq("status","COMPLETED").gte("created_at",n.toISOString()).lte("created_at",a.toISOString()),o={},l=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];for(let c=0;c<t;c++){const d=new Date;d.setMonth(d.getMonth()-c);const h=`${d.getFullYear()}-${String(d.getMonth()+1).padStart(2,"0")}`;o[h]={income:0,expenses:0}}for(const c of i||[]){const d=new Date(c.created_at),h=`${d.getFullYear()}-${String(d.getMonth()+1).padStart(2,"0")}`;if(o[h]){const f=parseFloat(c.amount)||0;f>0?o[h].income+=f:o[h].expenses+=Math.abs(f)}}return Object.entries(o).map(([c,d])=>{const[h,f]=c.split("-");return{month:c,monthName:l[parseInt(f)-1],income:d.income,expenses:d.expenses,net:d.income-d.expenses}}).reverse()},async getInsights(e){const t=[],s=new Date,a=new Date(s.getFullYear(),s.getMonth(),1),n=new Date(s.getFullYear(),s.getMonth()-1,1),i=new Date(s.getFullYear(),s.getMonth(),0),[o,l]=await Promise.all([this.getSummary(e,a,s),this.getSummary(e,n,i)]);if(l.totalExpenses>0&&o.totalExpenses>0){const c=(o.totalExpenses-l.totalExpenses)/l.totalExpenses*100;c>20?t.push({type:"warning",title:"Spending Increase",message:`Your spending is ${Math.abs(Math.round(c))}% higher than last month. Consider reviewing your expenses.`,metric:c}):c<-10&&t.push({type:"success",title:"Great Savings!",message:`You've reduced spending by ${Math.abs(Math.round(c))}% compared to last month.`,metric:c})}if(o.averageDaily>0){const c=new Date(s.getFullYear(),s.getMonth()+1,0).getDate(),d=o.averageDaily*c;t.push({type:"info",title:"Monthly Projection",message:`At your current rate, you'll spend Le ${d.toLocaleString(void 0,{maximumFractionDigits:0})} this month.`,metric:d})}if(o.transactionCount>0){const c=s.getDate(),d=o.transactionCount/c;d>5&&t.push({type:"info",title:"High Activity",message:`You're averaging ${d.toFixed(1)} transactions per day. Consider consolidating payments.`})}return o.netBalance>0&&t.push({type:"success",title:"Positive Cash Flow",message:`You've earned Le ${o.netBalance.toLocaleString()} more than you've spent this month!`,metric:o.netBalance}),t},async getTopRecipients(e,t,s,a=5){const{data:n}=await X.from("wallets").select("id").eq("user_id",e).eq("is_primary",!0).single();if(!n)return[];const{data:i}=await X.from("transactions").select("amount, description, metadata").eq("wallet_id",n.id).eq("status","COMPLETED").lt("amount",0).gte("created_at",t.toISOString()).lte("created_at",s.toISOString());if(!(i!=null&&i.length))return[];const o={};for(const l of i){const c=l.description||"Unknown";o[c]||(o[c]={amount:0,count:0}),o[c].amount+=Math.abs(parseFloat(l.amount)||0),o[c].count++}return Object.entries(o).map(([l,c])=>({name:l,...c})).sort((l,c)=>c.amount-l.amount).slice(0,a)}};function wye(){const{user:e}=pt(),t=Ut(),[s,a]=p.useState(!0),[n,i]=p.useState("month"),[o,l]=p.useState(null),[c,d]=p.useState([]),[h,f]=p.useState([]),[x,y]=p.useState([]),[v,w]=p.useState([]);p.useEffect(()=>{e!=null&&e.id&&k()},[e==null?void 0:e.id,n]);const N=()=>{const P=new Date,M=new Date;switch(n){case"week":M.setDate(M.getDate()-7);break;case"month":M.setMonth(M.getMonth()-1);break;case"quarter":M.setMonth(M.getMonth()-3);break;case"year":M.setFullYear(M.getFullYear()-1);break}return{start:M,end:P}},k=async()=>{if(e!=null&&e.id){a(!0);try{const{start:P,end:M}=N(),[R,$,W,I,B]=await Promise.all([hg.getSummary(e.id,P,M),hg.getSpendingByCategory(e.id,P,M),hg.getMonthlyTrend(e.id,6),hg.getInsights(e.id),hg.getTopRecipients(e.id,P,M,5)]);l(R),d($),f(W),y(I),w(B)}catch(P){console.error("Error loading analytics:",P)}finally{a(!1)}}},C=P=>`Le ${P.toLocaleString("en-US",{minimumFractionDigits:0,maximumFractionDigits:0})}`,E=P=>new Date(P).toLocaleDateString("en-US",{month:"short",day:"numeric"}),_=P=>{switch(P){case"warning":return r.jsx("svg",{className:"w-5 h-5 text-yellow-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})});case"success":return r.jsx("svg",{className:"w-5 h-5 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})});case"info":return r.jsx("svg",{className:"w-5 h-5 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}},T=P=>{switch(P){case"warning":return"bg-yellow-50 border-yellow-200";case"success":return"bg-green-50 border-green-200";case"info":return"bg-blue-50 border-blue-200"}},A=Math.max(...h.flatMap(P=>[P.income,P.expenses]),1);return s?r.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-indigo-600 border-t-transparent"})}):r.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-6 sm:px-6 lg:px-8",children:[r.jsxs("div",{className:"mb-6",children:[r.jsxs("button",{onClick:()=>t(-1),className:"flex items-center text-gray-600 hover:text-gray-900 mb-4",children:[r.jsx("svg",{className:"w-5 h-5 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"Back"]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Spending Analytics"}),r.jsx("p",{className:"text-gray-600 mt-1",children:"Track and understand your spending habits"})]}),r.jsx("div",{className:"hidden sm:flex items-center gap-2",children:r.jsx("svg",{className:"w-10 h-10 text-indigo-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})})})]})]}),r.jsx("div",{className:"flex gap-2 overflow-x-auto pb-2 mb-6",children:["week","month","quarter","year"].map(P=>r.jsxs("button",{onClick:()=>i(P),className:`px-4 py-2 rounded-lg text-sm font-medium whitespace-nowrap ${n===P?"bg-indigo-600 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:[P==="week"&&"7 Days",P==="month"&&"30 Days",P==="quarter"&&"3 Months",P==="year"&&"1 Year"]},P))}),r.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[r.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm border border-gray-100",children:[r.jsx("p",{className:"text-xs text-gray-500 uppercase tracking-wide",children:"Income"}),r.jsx("p",{className:"text-xl font-bold text-green-600 mt-1",children:C((o==null?void 0:o.totalIncome)||0)})]}),r.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm border border-gray-100",children:[r.jsx("p",{className:"text-xs text-gray-500 uppercase tracking-wide",children:"Expenses"}),r.jsx("p",{className:"text-xl font-bold text-red-600 mt-1",children:C((o==null?void 0:o.totalExpenses)||0)})]}),r.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm border border-gray-100",children:[r.jsx("p",{className:"text-xs text-gray-500 uppercase tracking-wide",children:"Net"}),r.jsx("p",{className:`text-xl font-bold mt-1 ${((o==null?void 0:o.netBalance)||0)>=0?"text-green-600":"text-red-600"}`,children:C((o==null?void 0:o.netBalance)||0)})]}),r.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm border border-gray-100",children:[r.jsx("p",{className:"text-xs text-gray-500 uppercase tracking-wide",children:"Daily Avg"}),r.jsx("p",{className:"text-xl font-bold text-gray-900 mt-1",children:C((o==null?void 0:o.averageDaily)||0)})]})]}),x.length>0&&r.jsx("div",{className:"mb-6 space-y-3",children:x.slice(0,3).map((P,M)=>r.jsx("div",{className:`p-4 rounded-xl border ${T(P.type)}`,children:r.jsxs("div",{className:"flex items-start gap-3",children:[_(P.type),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-gray-900",children:P.title}),r.jsx("p",{className:"text-sm text-gray-600 mt-0.5",children:P.message})]})]})},M))}),r.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-gray-100 mb-6",children:[r.jsx("h3",{className:"font-semibold text-gray-900 mb-4",children:"Spending by Category"}),c.length===0?r.jsx("div",{className:"text-center py-8 text-gray-500",children:r.jsx("p",{children:"No spending data for this period"})}):r.jsx("div",{className:"space-y-4",children:c.map((P,M)=>r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center justify-between text-sm mb-1",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:P.color}}),r.jsx("span",{className:"font-medium text-gray-900",children:P.category})]}),r.jsxs("div",{className:"text-right",children:[r.jsx("span",{className:"font-semibold text-gray-900",children:C(P.amount)}),r.jsxs("span",{className:"text-gray-500 ml-2",children:["(",P.percentage,"%)"]})]})]}),r.jsx("div",{className:"h-2 bg-gray-100 rounded-full overflow-hidden",children:r.jsx("div",{className:"h-full rounded-full transition-all",style:{width:`${P.percentage}%`,backgroundColor:P.color}})}),r.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[P.transactionCount," transactions"]})]},M))})]}),r.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-gray-100 mb-6",children:[r.jsx("h3",{className:"font-semibold text-gray-900 mb-4",children:"Monthly Trend"}),h.length===0?r.jsx("div",{className:"text-center py-8 text-gray-500",children:r.jsx("p",{children:"No trend data available"})}):r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center gap-6 text-sm",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-3 h-3 rounded-full bg-green-500"}),r.jsx("span",{className:"text-gray-600",children:"Income"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-3 h-3 rounded-full bg-red-500"}),r.jsx("span",{className:"text-gray-600",children:"Expenses"})]})]}),r.jsx("div",{className:"flex items-end gap-3 h-40",children:h.map((P,M)=>r.jsxs("div",{className:"flex-1 flex flex-col items-center",children:[r.jsxs("div",{className:"w-full flex gap-1 items-end h-32",children:[r.jsx("div",{className:"flex-1 bg-green-500 rounded-t transition-all hover:bg-green-600",style:{height:`${P.income/A*100}%`,minHeight:P.income>0?"4px":"0"},title:`Income: ${C(P.income)}`}),r.jsx("div",{className:"flex-1 bg-red-500 rounded-t transition-all hover:bg-red-600",style:{height:`${P.expenses/A*100}%`,minHeight:P.expenses>0?"4px":"0"},title:`Expenses: ${C(P.expenses)}`})]}),r.jsx("p",{className:"text-xs text-gray-500 mt-2",children:P.monthName})]},M))})]})]}),v.length>0&&r.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-gray-100 mb-6",children:[r.jsx("h3",{className:"font-semibold text-gray-900 mb-4",children:"Top Spending"}),r.jsx("div",{className:"space-y-3",children:v.map((P,M)=>r.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-8 h-8 bg-indigo-100 rounded-full flex items-center justify-center text-indigo-600 font-semibold text-sm",children:M+1}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-gray-900",children:P.name}),r.jsxs("p",{className:"text-xs text-gray-500",children:[P.count," transactions"]})]})]}),r.jsx("p",{className:"font-semibold text-gray-900",children:C(P.amount)})]},M))})]}),(o==null?void 0:o.biggestExpense)&&r.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-gray-100",children:[r.jsx("h3",{className:"font-semibold text-gray-900 mb-4",children:"Biggest Expense"}),r.jsxs("div",{className:"flex items-center justify-between p-4 bg-red-50 rounded-lg border border-red-100",children:[r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-gray-900",children:o.biggestExpense.description}),r.jsx("p",{className:"text-sm text-gray-500",children:E(o.biggestExpense.date)})]}),r.jsx("p",{className:"text-xl font-bold text-red-600",children:C(o.biggestExpense.amount)})]})]}),!(o!=null&&o.transactionCount)&&r.jsxs("div",{className:"text-center py-12",children:[r.jsx("svg",{className:"w-16 h-16 text-gray-300 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),r.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-1",children:"No Data Yet"}),r.jsx("p",{className:"text-gray-500",children:"Make some transactions to see your spending analytics"})]})]})}const NS="https://api.peeap.com",Fd={m17:{name:"Orange Money",color:"text-orange-600",icon:"OM",bgColor:"bg-orange-100"},m18:{name:"Africell Money",color:"text-blue-600",icon:"AF",bgColor:"bg-blue-100"}},jye=["72","73","74","75","76","78","79"],Nye=["30","33","77","80","88","90","99"];function kye(e){const t=e.replace(/\s+/g,"").replace(/^(\+232|232|0)/,"");if(t.length<2)return null;const s=t.substring(0,2);return jye.includes(s)?"m17":Nye.includes(s)?"m18":null}function Sye({onComplete:e,disabled:t,walletPin:s,onPinChange:a}){const n=p.useRef(null),i=kz(0),[o,l]=p.useState(!1),[c,d]=p.useState(0);p.useEffect(()=>{n.current&&d(n.current.offsetWidth-64)},[]);const h=lp(i,[0,c],["rgb(22, 163, 74)","rgb(21, 128, 61)"]),f=lp(i,[0,c*.3],[1,0]),x=()=>{i.get()>=c*.85?(TR(i,c,{duration:.2}),l(!0),setTimeout(()=>{e()},300)):TR(i,0,{duration:.3})},y=s.length===4,v=!t&&y&&!o;return r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Enter Wallet PIN to confirm"}),r.jsxs("div",{className:"relative",children:[r.jsx(Kr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),r.jsx("input",{type:"password",maxLength:4,value:s,onChange:w=>a(w.target.value.replace(/\D/g,"").slice(0,4)),placeholder:"",className:"w-full pl-10 pr-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500 bg-white dark:bg-gray-800 text-gray-900 dark:text-white text-center text-xl tracking-[0.5em] font-mono"})]}),r.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Use your 4-digit wallet PIN"})]}),r.jsxs(Pe.div,{ref:n,className:`relative h-16 rounded-xl overflow-hidden ${v?"bg-green-600":"bg-gray-300 dark:bg-gray-700"}`,style:{background:v?h:void 0},children:[r.jsx(Pe.div,{className:"absolute inset-0 flex items-center justify-center",style:{opacity:f},children:r.jsx("span",{className:`text-sm font-medium flex items-center gap-2 ${v?"text-white":"text-gray-500 dark:text-gray-400"}`,children:y?o?r.jsxs(r.Fragment,{children:[r.jsx(Ae,{className:"w-5 h-5"}),"Processing..."]}):r.jsxs(r.Fragment,{children:["Slide to Withdraw",r.jsx(Qr,{className:"w-5 h-5"}),r.jsx(Qr,{className:"w-5 h-5 -ml-3"})]}):"Enter PIN to enable"})}),r.jsx(Pe.div,{drag:v?"x":!1,dragConstraints:n,dragElastic:0,dragMomentum:!1,onDragEnd:x,style:{x:i},className:`absolute left-1 top-1 bottom-1 w-14 rounded-lg flex items-center justify-center shadow-lg ${v?"bg-white cursor-grab active:cursor-grabbing":"bg-gray-200 dark:bg-gray-600 cursor-not-allowed"}`,children:o?r.jsx(Ae,{className:"w-6 h-6 text-green-600"}):r.jsx(os,{className:`w-6 h-6 ${v?"text-green-600":"text-gray-400"}`})})]})]})}function Cye(){const{user:e}=pt(),{data:t,isLoading:s,refetch:a}=mi(),[n,i]=p.useState("select"),[o,l]=p.useState(null),[c,d]=p.useState([]),[h,f]=p.useState([]),[x,y]=p.useState(!0),[v,w]=p.useState(""),[N,k]=p.useState(""),[C,E]=p.useState(""),[_,T]=p.useState(""),[A,P]=p.useState(""),[M,R]=p.useState(""),[$,W]=p.useState(0),[I,B]=p.useState(0),[O,F]=p.useState(""),[q,H]=p.useState(null),[K,V]=p.useState([]);p.useEffect(()=>{cr.getCurrencies().then(V)},[]),p.useEffect(()=>{z(),G()},[]),p.useEffect(()=>{if(t&&t.length>0&&!v){const Z=t.find(pe=>pe.status==="ACTIVE"&&pe.currency==="SLE"),Q=t.find(pe=>pe.status==="ACTIVE"),re=Z||Q||t[0];w(re.id)}},[t,v]),p.useEffect(()=>{if(o==="momo"){const Z=kye(C);Z&&k(Z)}},[C,o]),p.useEffect(()=>{const Z=parseFloat(A)||0;if(Z>0){let Q=Math.round(Z*.02*100)/100;W(Q),B(Z+Q)}else W(0),B(0)},[A]);const z=async()=>{try{const Q=await(await fetch(`${NS}/router/mobile-money/providers`)).json();Q.success&&Q.providers&&d(Q.providers.filter(re=>re.canPayout))}catch(Z){console.error("Failed to load providers:",Z),d([{providerId:"m17",name:"Orange Money",country:"SL",canPayout:!0},{providerId:"m18",name:"Africell Money",country:"SL",canPayout:!0}])}finally{y(!1)}},G=async()=>{try{const Q=await(await fetch(`${NS}/router/payouts/banks`)).json();Q.banks&&f(Q.banks)}catch(Z){console.error("Failed to load banks:",Z)}},te=Z=>{var Q;return Z==="SLE"?"Le":((Q=K.find(re=>re.code===Z))==null?void 0:Q.symbol)||Z},he=(Z,Q="SLE")=>`${te(Q)} ${Z.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}`,ne=()=>{if(F(""),!v)return F("Please select a wallet"),!1;if(!N)return F("Please select a provider"),!1;if(!C)return F(o==="momo"?"Please enter a phone number":"Please enter an account number"),!1;if(o==="momo"){const re=C.replace(/\s+/g,"").replace(/^(\+232|232)/,"");if(!/^[0-9]{8}$/.test(re))return F("Please enter a valid 8-digit phone number"),!1}const Z=parseFloat(A);if(!Z||Z<1)return F("Minimum withdrawal amount is Le 1"),!1;const Q=t==null?void 0:t.find(re=>re.id===v);return!Q||Q.balance<I?(F(`Insufficient balance. You need ${he(I)} (including fee)`),!1):M.length!==4?(F("Please enter your 4-digit wallet PIN"),!1):!0},ce=async()=>{if(!(!e||!ne())){i("processing"),F("");try{const Z=await fetch(`${NS}/router/payouts/user/cashout`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:e.id,walletId:v,amount:parseFloat(A),currency:"SLE",destinationType:o,providerId:N,accountNumber:C,accountName:_||void 0,walletPin:M})}),Q=await Z.json();if(!Z.ok||!Q.success)throw new Error(Q.error||"Withdrawal failed");H(Q.payoutId),i("success"),a()}catch(Z){console.error("Withdraw error:",Z),F(Z.message||"Withdrawal failed. Please try again."),i("error")}}},xe=()=>{i("select"),l(null),k(""),E(""),T(""),P(""),R(""),F(""),H(null)},_e=t==null?void 0:t.find(Z=>Z.id===v),oe=h.find(Z=>Z.id===N),ie=o==="momo"&&Fd[N]?Fd[N]:{name:(oe==null?void 0:oe.name)||"Bank"},ge=N&&C&&parseFloat(A)>=1&&(o!=="momo"||/^[0-9]{8}$/.test(C.replace(/\s+/g,"").replace(/^(\+232|232)/,"")));return r.jsx(dn,{children:r.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[n!=="select"&&n!=="success"&&n!=="error"&&r.jsx("button",{onClick:()=>i("select"),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg",children:r.jsx(Ar,{className:"w-5 h-5"})}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Withdraw"}),r.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Send to bank or mobile money"})]})]}),n==="select"&&r.jsxs(r.Fragment,{children:[_e&&r.jsx(se,{className:"p-4 bg-gradient-to-r from-green-600 to-green-500 text-white",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-green-100",children:"Available Balance"}),r.jsx("p",{className:"text-3xl font-bold",children:he(_e.balance,_e.currency)})]}),r.jsx("div",{className:"p-3 bg-white/20 rounded-xl",children:r.jsx(Rt,{className:"w-8 h-8"})})]})}),r.jsxs(se,{className:"p-6 space-y-6",children:[r.jsx("h2",{className:"font-semibold text-gray-900 dark:text-white",children:"Where do you want to withdraw to?"}),r.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[r.jsxs("button",{onClick:()=>{l("momo"),c.length>0&&k(c[0].providerId),i("form")},className:"flex items-center gap-4 p-4 border-2 border-gray-200 dark:border-gray-700 rounded-xl hover:border-orange-500 hover:bg-orange-50 dark:hover:bg-orange-900/20 transition-colors text-left",children:[r.jsx("div",{className:"p-3 bg-orange-100 dark:bg-orange-900/30 rounded-xl",children:r.jsx(Ws,{className:"w-6 h-6 text-orange-600 dark:text-orange-400"})}),r.jsxs("div",{className:"flex-1",children:[r.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:"Mobile Money"}),r.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Orange Money, Africell"})]}),r.jsx(os,{className:"w-5 h-5 text-gray-400"})]}),r.jsxs("button",{onClick:()=>{l("bank"),h.length>0&&k(h[0].id),i("form")},className:"flex items-center gap-4 p-4 border-2 border-gray-200 dark:border-gray-700 rounded-xl hover:border-blue-500 hover:bg-blue-50 dark:hover:bg-blue-900/20 transition-colors text-left",children:[r.jsx("div",{className:"p-3 bg-blue-100 dark:bg-blue-900/30 rounded-xl",children:r.jsx(Da,{className:"w-6 h-6 text-blue-600 dark:text-blue-400"})}),r.jsxs("div",{className:"flex-1",children:[r.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:"Bank Account"}),r.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Transfer to any Sierra Leone bank"})]}),r.jsx(os,{className:"w-5 h-5 text-gray-400"})]})]}),r.jsxs("div",{className:"p-3 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg flex items-start gap-2",children:[r.jsx($N,{className:"w-4 h-4 text-blue-600 dark:text-blue-400 flex-shrink-0 mt-0.5"}),r.jsx("span",{className:"text-sm text-blue-700 dark:text-blue-300",children:"Withdrawals typically complete within 1-24 hours depending on the provider."})]})]})]}),n==="form"&&r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[r.jsxs(se,{className:"p-6 space-y-4",children:[r.jsxs("h2",{className:"font-semibold text-gray-900 dark:text-white flex items-center gap-2",children:[r.jsx(U5,{className:"w-5 h-5 text-green-600"}),"Amount & Recipient"]}),o==="bank"&&r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Select Bank"}),r.jsxs("select",{value:N,onChange:Z=>k(Z.target.value),className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500 bg-white dark:bg-gray-800 text-gray-900 dark:text-white",children:[r.jsx("option",{value:"",children:"Select a bank"}),h.map(Z=>r.jsx("option",{value:Z.id,children:Z.name},Z.id))]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:o==="momo"?"Phone Number":"Account Number"}),o==="momo"?r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"relative",children:[r.jsx("span",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-500",children:"+232"}),r.jsx("input",{type:"tel",value:C,onChange:Z=>E(Z.target.value.replace(/\D/g,"").slice(0,8)),placeholder:"76123456",className:"w-full pl-14 pr-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500 bg-white dark:bg-gray-800 text-gray-900 dark:text-white"})]}),C.length>=2&&r.jsx("div",{className:"mt-2",children:N&&Fd[N]?r.jsxs("div",{className:`inline-flex items-center gap-2 px-3 py-1.5 rounded-lg ${Fd[N].bgColor}`,children:[r.jsx("span",{className:`font-bold text-sm ${Fd[N].color}`,children:Fd[N].icon}),r.jsx("span",{className:`font-medium text-sm ${Fd[N].color}`,children:Fd[N].name}),r.jsx("span",{className:"text-xs text-gray-500",children:"detected"})]}):r.jsxs("div",{className:"inline-flex items-center gap-2 px-3 py-1.5 rounded-lg bg-red-50 dark:bg-red-900/20",children:[r.jsx(dt,{className:"w-4 h-4 text-red-500"}),r.jsx("span",{className:"text-sm text-red-600 dark:text-red-400",children:"Unknown network"})]})}),r.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Orange: 72-76, 78-79 | Africell: 30, 33, 77, 80, 88, 90, 99"})]}):r.jsx("input",{type:"text",value:C,onChange:Z=>E(Z.target.value),placeholder:"Enter account number",className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500 bg-white dark:bg-gray-800 text-gray-900 dark:text-white"})]}),o==="bank"&&r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Account Name"}),r.jsx("input",{type:"text",value:_,onChange:Z=>T(Z.target.value),placeholder:"Enter account holder name",className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500 bg-white dark:bg-gray-800 text-gray-900 dark:text-white"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Amount"}),r.jsxs("div",{className:"relative",children:[r.jsx("span",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-500",children:"Le"}),r.jsx("input",{type:"number",min:"1",step:"0.01",value:A,onChange:Z=>P(Z.target.value),placeholder:"10",className:"w-full pl-10 pr-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500 bg-white dark:bg-gray-800 text-gray-900 dark:text-white text-lg font-semibold"})]})]}),I>0&&r.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-gray-800 rounded-lg text-sm space-y-1",children:[r.jsxs("div",{className:"flex justify-between text-gray-600 dark:text-gray-400",children:[r.jsx("span",{children:"Amount:"}),r.jsx("span",{children:he(parseFloat(A)||0)})]}),r.jsxs("div",{className:"flex justify-between text-gray-600 dark:text-gray-400",children:[r.jsx("span",{children:"Fee (2%):"}),r.jsx("span",{children:he($)})]}),r.jsxs("div",{className:"flex justify-between font-medium text-gray-900 dark:text-white pt-1 border-t border-gray-200 dark:border-gray-700",children:[r.jsx("span",{children:"Total Deduction:"}),r.jsx("span",{className:"text-green-600",children:he(I)})]})]})]}),r.jsxs(se,{className:"p-6 space-y-4",children:[r.jsxs("h2",{className:"font-semibold text-gray-900 dark:text-white flex items-center gap-2",children:[r.jsx(Rt,{className:"w-5 h-5 text-green-600"}),"Pay from Wallet"]}),_e&&r.jsx("div",{className:"p-4 bg-gradient-to-r from-green-600 to-green-500 text-white rounded-xl",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-green-100",children:"Available Balance"}),r.jsx("p",{className:"text-2xl font-bold",children:he(_e.balance,_e.currency)})]}),r.jsx("div",{className:"p-2 bg-white/20 rounded-lg",children:r.jsx(Rt,{className:"w-6 h-6"})})]})}),t&&t.length>1&&r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Select Wallet"}),r.jsx("select",{value:v,onChange:Z=>w(Z.target.value),className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500 bg-white dark:bg-gray-800 text-gray-900 dark:text-white",children:t.map(Z=>r.jsxs("option",{value:Z.id,children:[Z.currency," Wallet - ",he(Z.balance,Z.currency)]},Z.id))})]}),ge&&r.jsxs("div",{className:"p-3 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg",children:[r.jsxs("p",{className:"text-sm text-blue-700 dark:text-blue-300",children:[r.jsx("strong",{children:"Sending:"})," ",he(parseFloat(A))," to ",ie.name]}),r.jsx("p",{className:"text-sm text-blue-600 dark:text-blue-400 mt-1",children:o==="momo"?`+232 ${C}`:C})]}),O&&r.jsxs("div",{className:"p-3 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg flex items-center gap-2 text-red-700 dark:text-red-400",children:[r.jsx(dt,{className:"w-4 h-4 flex-shrink-0"}),r.jsx("span",{className:"text-sm",children:O})]}),r.jsx(Sye,{onComplete:ce,disabled:!ge,walletPin:M,onPinChange:R}),r.jsxs(Oe,{variant:"outline",className:"w-full",onClick:()=>i("select"),children:[r.jsx(Ar,{className:"w-4 h-4 mr-2"}),"Back"]})]})]}),n==="processing"&&r.jsx(se,{className:"p-6",children:r.jsxs("div",{className:"flex flex-col items-center justify-center py-12",children:[r.jsx(Ke,{className:"w-12 h-12 text-green-600 animate-spin mb-4"}),r.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Processing your withdrawal..."}),r.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Please wait, do not close this page."})]})}),n==="success"&&r.jsx(se,{className:"p-6",children:r.jsxs("div",{className:"flex flex-col items-center justify-center py-8",children:[r.jsx("div",{className:"w-16 h-16 bg-green-100 dark:bg-green-900/30 rounded-full flex items-center justify-center mb-4",children:r.jsx(Ae,{className:"w-8 h-8 text-green-600 dark:text-green-400"})}),r.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:"Withdrawal Initiated!"}),r.jsxs("p",{className:"text-gray-500 dark:text-gray-400 text-center mb-2",children:[he(parseFloat(A))," is being sent to ",ie.name]}),r.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-1",children:o==="momo"?`+232 ${C}`:C}),q&&r.jsxs("p",{className:"text-xs text-gray-400 dark:text-gray-500 mb-6",children:["Reference: ",q.slice(0,20),"..."]}),r.jsx("p",{className:"text-sm text-gray-500 text-center mb-6",children:"You will receive a notification once the transfer is complete."}),r.jsx(Oe,{onClick:xe,className:"w-full max-w-xs",children:"Done"})]})}),n==="error"&&r.jsx(se,{className:"p-6",children:r.jsxs("div",{className:"flex flex-col items-center justify-center py-8",children:[r.jsx("div",{className:"w-16 h-16 bg-red-100 dark:bg-red-900/30 rounded-full flex items-center justify-center mb-4",children:r.jsx(dt,{className:"w-8 h-8 text-red-600 dark:text-red-400"})}),r.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:"Withdrawal Failed"}),r.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-center mb-6",children:O||"Something went wrong. Please try again."}),r.jsxs("div",{className:"flex gap-3 w-full max-w-xs",children:[r.jsx(Oe,{variant:"outline",className:"flex-1",onClick:xe,children:"Cancel"}),r.jsx(Oe,{className:"flex-1",onClick:()=>{F(""),i("form")},children:"Try Again"})]})]})})]})})}const _ye={card_order:sh,kyc_request:Tl,dispute:Ht,system:bs,user_registration:A6,transaction_flagged:Tf,support_ticket:Uo},qM={card_order:"bg-purple-100 dark:bg-purple-900/30 text-purple-600 dark:text-purple-400",kyc_request:"bg-blue-100 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400",dispute:"bg-red-100 dark:bg-red-900/30 text-red-600 dark:text-red-400",system:"bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-400",user_registration:"bg-green-100 dark:bg-green-900/30 text-green-600 dark:text-green-400",transaction_flagged:"bg-orange-100 dark:bg-orange-900/30 text-orange-600 dark:text-orange-400",support_ticket:"bg-yellow-100 dark:bg-yellow-900/30 text-yellow-600 dark:text-yellow-400"},HM={urgent:"border-l-red-500",high:"border-l-orange-500",medium:"border-l-yellow-500",low:"border-l-blue-500"};function Eye({notification:e,onMarkAsRead:t,onClick:s}){const a=_ye[e.type]||Lr,n=qM[e.type]||qM.system,i=HM[e.priority]||HM.medium;return r.jsx("div",{className:fe("p-3 border-b border-gray-100 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors cursor-pointer border-l-4",e.status==="unread"?"bg-blue-50/50 dark:bg-blue-900/20":"bg-white dark:bg-gray-800",i),onClick:()=>s(e),children:r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx("div",{className:fe("p-2 rounded-full flex-shrink-0",n),children:r.jsx(a,{className:"w-4 h-4"})}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("div",{className:"flex items-start justify-between gap-2",children:r.jsx("p",{className:fe("text-sm",e.status==="unread"?"text-gray-900 dark:text-white font-medium":"text-gray-700 dark:text-gray-300"),children:e.title})}),r.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-0.5 line-clamp-2",children:e.message}),r.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[r.jsx("p",{className:"text-xs text-gray-400 dark:text-gray-500",children:bx(new Date(e.created_at),{addSuffix:!0})}),r.jsx("span",{className:fe("px-1.5 py-0.5 text-xs rounded capitalize",e.priority==="urgent"&&"bg-red-100 dark:bg-red-900/30 text-red-600 dark:text-red-400",e.priority==="high"&&"bg-orange-100 dark:bg-orange-900/30 text-orange-600 dark:text-orange-400",e.priority==="medium"&&"bg-yellow-100 dark:bg-yellow-900/30 text-yellow-600 dark:text-yellow-400",e.priority==="low"&&"bg-blue-100 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400"),children:e.priority})]})]}),e.status==="unread"&&r.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-500 flex-shrink-0 mt-2"})]})})}function Aye(){const[e,t]=p.useState(!1),[s,a]=p.useState([]),[n,i]=p.useState(0),[o,l]=p.useState(!0),c=p.useRef(null),d=Ut(),{user:h}=pt();p.useEffect(()=>{f();const w=X.channel("admin_bell_notifications").on("postgres_changes",{event:"INSERT",schema:"public",table:"admin_notifications"},N=>{console.log("New notification received:",N);const k=N.new;a(C=>[k,...C].slice(0,20)),i(C=>C+1)}).subscribe();return()=>{X.removeChannel(w)}},[]),p.useEffect(()=>{function w(N){c.current&&!c.current.contains(N.target)&&t(!1)}return document.addEventListener("mousedown",w),()=>document.removeEventListener("mousedown",w)},[]);const f=async()=>{var w,N;try{l(!0);const{data:k}=await X.auth.getSession();console.log("Auth session:",((N=(w=k==null?void 0:k.session)==null?void 0:w.user)==null?void 0:N.email)||"No session"),console.log("Fetching admin notifications...");const{data:C,error:E,status:_,statusText:T}=await X.from("admin_notifications").select("*").order("created_at",{ascending:!1}).limit(20);console.log("Notifications query result:",{data:C,error:E,status:_,statusText:T,count:C==null?void 0:C.length}),E?(console.error("Error fetching notifications:",E),a([]),i(0)):(a(C||[]),i((C||[]).filter(A=>A.status==="unread").length))}catch(k){console.error("Error fetching admin notifications:",k)}finally{l(!1)}},x=async w=>{if(h!=null&&h.id)try{const{error:N}=await X.from("admin_notifications").update({status:"read",read_by:h.id,read_at:new Date().toISOString()}).eq("id",w);N||(a(k=>k.map(C=>C.id===w?{...C,status:"read"}:C)),i(k=>Math.max(0,k-1)))}catch(N){console.error("Error marking notification as read:",N)}},y=async()=>{if(h!=null&&h.id)try{const{error:w}=await X.from("admin_notifications").update({status:"read",read_by:h.id,read_at:new Date().toISOString()}).eq("status","unread");w||(a(N=>N.map(k=>({...k,status:"read"}))),i(0))}catch(w){console.error("Error marking all notifications as read:",w)}},v=w=>{w.status==="unread"&&x(w.id),d(`/admin/notifications?id=${w.id}`),t(!1)};return r.jsxs("div",{className:"relative",ref:c,children:[r.jsxs("button",{onClick:()=>t(!e),className:"relative p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors","aria-label":"Admin Notifications",children:[r.jsx(Lr,{className:"w-5 h-5 text-gray-600 dark:text-gray-400"}),n>0&&r.jsx("span",{className:"absolute top-0.5 right-0.5 flex items-center justify-center min-w-[18px] h-[18px] px-1 text-xs font-medium text-white bg-red-500 rounded-full animate-pulse",children:n>99?"99+":n})]}),e&&r.jsxs("div",{className:"absolute right-0 mt-2 w-80 sm:w-96 bg-white dark:bg-gray-800 rounded-xl shadow-xl border border-gray-200 dark:border-gray-700 overflow-hidden z-50",children:[r.jsxs("div",{className:"flex items-center justify-between px-4 py-3 bg-gray-50 dark:bg-gray-900 border-b border-gray-200 dark:border-gray-700",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:"Admin Notifications"}),n>0&&r.jsxs("span",{className:"px-2 py-0.5 text-xs font-medium bg-red-100 dark:bg-red-900/30 text-red-600 dark:text-red-400 rounded-full",children:[n," new"]})]}),n>0&&r.jsxs("button",{onClick:y,className:"flex items-center gap-1 text-xs text-primary-600 dark:text-primary-400 hover:text-primary-700 dark:hover:text-primary-300 font-medium",children:[r.jsx(Th,{className:"w-3.5 h-3.5"}),"Mark all read"]})]}),r.jsx("div",{className:"max-h-[400px] overflow-y-auto",children:o?r.jsxs("div",{className:"py-12 text-center",children:[r.jsx("div",{className:"w-8 h-8 border-2 border-primary-500 border-t-transparent rounded-full animate-spin mx-auto mb-3"}),r.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Loading notifications..."})]}):s.length===0?r.jsxs("div",{className:"py-12 text-center",children:[r.jsx(Lr,{className:"w-10 h-10 text-gray-300 dark:text-gray-600 mx-auto mb-3"}),r.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"No notifications yet"}),r.jsx("p",{className:"text-xs text-gray-400 dark:text-gray-500 mt-1",children:"You'll be notified when users place card orders"})]}):s.map(w=>r.jsx(Eye,{notification:w,onMarkAsRead:x,onClick:v},w.id))}),s.length>0&&r.jsx("div",{className:"px-4 py-2 bg-gray-50 dark:bg-gray-900 border-t border-gray-200 dark:border-gray-700 text-center",children:r.jsx("button",{onClick:()=>{d("/admin/notifications"),t(!1)},className:"text-xs text-primary-600 dark:text-primary-400 hover:text-primary-700 dark:hover:text-primary-300 font-medium",children:"View all notifications"})})]})]})}const Pye=[{items:[{path:"/admin",label:"Dashboard",icon:UN}]},{title:"User Management",items:[{path:"/admin/users",label:"Users",icon:nn},{path:"/admin/merchants",label:"Merchants",icon:Rt},{path:"/admin/businesses",label:"Businesses",icon:mr,badge:"New",badgeColor:"primary"},{path:"/admin/agents",label:"Agents",icon:Mw}]},{title:"Core",items:[{path:"/admin/accounts",label:"Accounts",icon:Rt},{path:"/admin/customers",label:"Customers",icon:nn},{path:"/admin/pots",label:"Savings Pots",icon:lo},{path:"/admin/cards",label:"Cards",icon:lt},{path:"/admin/card-products",label:"Card Products",icon:noe,badge:"New",badgeColor:"primary"},{path:"/admin/card-programs",label:"Card Programs",icon:Mw},{path:"/admin/card-types",label:"Card Types",icon:uoe},{path:"/admin/card-orders",label:"Card Orders",icon:Hie,badge:"New",badgeColor:"primary"}]},{title:"Transactions",items:[{path:"/admin/authorization",label:"Authorization",icon:Tl},{path:"/admin/transactions",label:"Transactions",icon:Pl},{path:"/admin/deposits",label:"Deposits",icon:Aa,badge:"New",badgeColor:"primary"},{path:"/admin/disputes",label:"Disputes",icon:Ht}]},{title:"Configuration",items:[{path:"/admin/business-categories",label:"Business Categories",icon:Ow,badge:"New",badgeColor:"primary"},{path:"/admin/fees",label:"Fees & Pricing",icon:lt},{path:"/admin/fee-settings",label:"Fee Settings",icon:Cr},{path:"/admin/subscriptions",label:"Subscriptions",icon:Rt}]},{title:"Developer",items:[{path:"/admin/developers",label:"SDK Management",icon:Pa},{path:"/admin/webhooks",label:"Webhooks",icon:ph}]},{title:"Settings",items:[{path:"/admin/modules",label:"Modules",icon:coe,badge:"New",badgeColor:"primary"},{path:"/admin/roles",label:"Role Management",icon:JV},{path:"/admin/payment-settings",label:"Payment Settings",icon:bs},{path:"/admin/smtp-settings",label:"SMTP / Email",icon:On},{path:"/admin/compliance",label:"Compliance",icon:W5,badge:"Pending",badgeColor:"yellow"}]},{title:"Support",items:[{path:"/admin/support",label:"Support Tickets",icon:Uo},{path:"/admin/notifications",label:"Notifications",icon:Lr,badge:"New",badgeColor:"primary"}]}];function fr({children:e}){var f,x;const[t,s]=p.useState(!1),{user:a,logout:n}=pt(),i=$i(),o=Ut(),[l,c]=p.useState({}),d=y=>{c(v=>({[y]:!v[y]}))},h=async()=>{await n(),o("/login")};return r.jsxs("div",{className:"min-h-screen bg-gray-100 dark:bg-gray-900",children:[t&&r.jsx("div",{className:"fixed inset-0 z-40 bg-gray-600 bg-opacity-75 lg:hidden",onClick:()=>s(!1)}),r.jsx("aside",{className:fe("fixed inset-y-0 left-0 z-50 w-64 bg-gray-900 transform transition-transform duration-300 ease-in-out lg:translate-x-0",t?"translate-x-0":"-translate-x-full"),children:r.jsxs("div",{className:"flex flex-col h-full",children:[r.jsxs("div",{className:"flex items-center justify-between h-16 px-6 bg-gray-800",children:[r.jsxs(xt,{to:"/admin",className:"flex items-center gap-2",children:[r.jsx(rr,{className:"w-8 h-8 text-primary-400"}),r.jsx("span",{className:"text-xl font-bold text-white",children:"CardPay"})]}),r.jsx("button",{className:"lg:hidden p-2 rounded-lg hover:bg-gray-700 text-gray-400",onClick:()=>s(!1),children:r.jsx(Ct,{className:"w-5 h-5"})})]}),r.jsx("nav",{className:"flex-1 px-3 py-4 space-y-1 overflow-y-auto scrollbar-hide",style:{scrollbarWidth:"none",msOverflowStyle:"none"},children:Pye.map((y,v)=>{const w=y.items.some(k=>i.pathname===k.path||k.path!=="/admin"&&i.pathname.startsWith(k.path)),N=w||(y.title?l[y.title]===!0:!0);return r.jsx("div",{className:"mb-1",children:y.title?r.jsxs(r.Fragment,{children:[r.jsxs("button",{onClick:()=>!w&&d(y.title),className:fe("w-full flex items-center justify-between px-4 py-2 text-xs font-semibold uppercase tracking-wider rounded-lg transition-colors",w?"text-primary-400 bg-gray-800 cursor-default":"text-gray-500 hover:text-gray-300 hover:bg-gray-800 cursor-pointer"),children:[r.jsx("span",{children:y.title}),N?r.jsx(ys,{className:"w-4 h-4"}):r.jsx(Qr,{className:"w-4 h-4"})]}),r.jsx("div",{className:fe("overflow-hidden transition-all duration-200 ease-in-out",N?"max-h-96 opacity-100":"max-h-0 opacity-0"),children:r.jsx("div",{className:"space-y-1 mt-1 ml-2",children:y.items.map(k=>{const C=k.icon,E=i.pathname===k.path||k.path!=="/admin"&&i.pathname.startsWith(k.path);return r.jsxs(xt,{to:k.path,className:fe("flex items-center px-4 py-2 rounded-lg transition-colors text-sm",E?"bg-primary-600 text-white":"text-gray-300 hover:bg-gray-800 hover:text-white"),children:[r.jsx(C,{className:"w-4 h-4 mr-3"}),r.jsx("span",{className:"flex-1",children:k.label}),k.badge&&r.jsx("span",{className:fe("px-2 py-0.5 text-xs rounded-full",k.badgeColor==="yellow"&&"bg-yellow-100 text-yellow-700",k.badgeColor==="primary"&&"bg-primary-100 text-primary-700",!k.badgeColor&&"bg-gray-100 text-gray-700"),children:k.badge})]},k.path)})})})]}):r.jsx("div",{className:"space-y-1",children:y.items.map(k=>{const C=k.icon,E=i.pathname===k.path||k.path!=="/admin"&&i.pathname.startsWith(k.path);return r.jsxs(xt,{to:k.path,className:fe("flex items-center px-4 py-2.5 rounded-lg transition-colors text-sm",E?"bg-primary-600 text-white":"text-gray-300 hover:bg-gray-800 hover:text-white"),children:[r.jsx(C,{className:"w-5 h-5 mr-3"}),r.jsx("span",{className:"flex-1",children:k.label}),k.badge&&r.jsx("span",{className:fe("px-2 py-0.5 text-xs rounded-full",k.badgeColor==="yellow"&&"bg-yellow-100 text-yellow-700",k.badgeColor==="primary"&&"bg-primary-100 text-primary-700",!k.badgeColor&&"bg-gray-100 text-gray-700"),children:k.badge})]},k.path)})})},v)})}),r.jsxs("div",{className:"p-4 border-t border-gray-700",children:[r.jsxs("div",{className:"flex items-center mb-3",children:[r.jsx("div",{className:"w-10 h-10 bg-primary-600 rounded-full flex items-center justify-center",children:r.jsxs("span",{className:"text-white font-medium",children:[(f=a==null?void 0:a.firstName)==null?void 0:f.charAt(0),(x=a==null?void 0:a.lastName)==null?void 0:x.charAt(0)]})}),r.jsxs("div",{className:"ml-3",children:[r.jsxs("p",{className:"text-sm font-medium text-white",children:[a==null?void 0:a.firstName," ",a==null?void 0:a.lastName]}),r.jsx("p",{className:"text-xs text-gray-400",children:"Administrator"})]})]}),r.jsxs("button",{onClick:h,className:"flex items-center w-full px-4 py-2 text-gray-300 rounded-lg hover:bg-gray-800 hover:text-white transition-colors text-sm",children:[r.jsx(zy,{className:"w-5 h-5 mr-3"}),"Sign out"]})]})]})}),r.jsxs("div",{className:"lg:pl-64",children:[r.jsx("header",{className:"sticky top-0 z-30 h-16 bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 shadow-sm",children:r.jsxs("div",{className:"flex items-center justify-between h-full px-4 lg:px-8",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("button",{className:"lg:hidden p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700",onClick:()=>s(!0),children:r.jsx(qy,{className:"w-6 h-6 dark:text-gray-400"})}),r.jsxs("div",{className:"hidden md:flex items-center gap-2 bg-gray-100 dark:bg-gray-700 rounded-lg px-3 py-2",children:[r.jsx(Nr,{className:"w-4 h-4 text-gray-400"}),r.jsx("input",{type:"text",placeholder:"Search customers, cards, transactions...",className:"bg-transparent border-none outline-none text-sm w-80 dark:text-white dark:placeholder-gray-400"})]})]}),r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("span",{className:"px-3 py-1 rounded-full text-xs font-medium bg-primary-100 text-primary-700",children:"Admin Portal"}),r.jsx(JN,{}),r.jsx(Aye,{})]})]})}),r.jsx("main",{className:"p-4 lg:p-8",children:e})]})]})}const im=e=>({id:e.id,type:e.type,title:e.title,message:e.message,priority:e.priority||"medium",status:e.status||"unread",relatedEntityType:e.related_entity_type,relatedEntityId:e.related_entity_id,metadata:e.metadata,actionUrl:e.action_url,readBy:e.read_by,readAt:e.read_at,createdAt:e.created_at,updatedAt:e.updated_at}),mg={async getNotifications(e={}){console.log("Fetching admin notifications with filters:",e);let t=X.from("admin_notifications").select("*").order("created_at",{ascending:!1});e.type&&(t=t.eq("type",e.type)),e.status&&(t=t.eq("status",e.status)),e.priority&&(t=t.eq("priority",e.priority)),e.limit&&(t=t.limit(e.limit)),e.offset&&(t=t.range(e.offset,e.offset+(e.limit||10)-1));const{data:s,error:a}=await t;return console.log("Admin notifications query result:",{data:s,error:a,count:s==null?void 0:s.length}),a?(console.error("Error fetching admin notifications:",a),[]):(s||[]).map(im)},async getUnreadCount(){const{count:e,error:t}=await X.from("admin_notifications").select("*",{count:"exact",head:!0}).eq("status","unread");return t?(console.error("Error fetching unread count:",t),0):e||0},async getCountsByType(){const{data:e,error:t}=await X.from("admin_notifications").select("type").eq("status","unread");if(t)return console.error("Error fetching notification counts:",t),{};const s={};return(e||[]).forEach(a=>{s[a.type]=(s[a.type]||0)+1}),s},async getNotification(e){const{data:t,error:s}=await X.from("admin_notifications").select("*").eq("id",e).single();if(s)throw console.error("Error fetching notification:",s),new Error(s.message);return im(t)},async markAsRead(e,t){const{data:s,error:a}=await X.from("admin_notifications").update({status:"read",read_by:t,read_at:new Date().toISOString()}).eq("id",e).select().single();if(a)throw console.error("Error marking notification as read:",a),new Error(a.message);return im(s)},async markAllAsRead(e){const{error:t}=await X.from("admin_notifications").update({status:"read",read_by:e,read_at:new Date().toISOString()}).eq("status","unread");if(t)throw console.error("Error marking all notifications as read:",t),new Error(t.message)},async archiveNotification(e){const{data:t,error:s}=await X.from("admin_notifications").update({status:"archived"}).eq("id",e).select().single();if(s)throw console.error("Error archiving notification:",s),new Error(s.message);return im(t)},async deleteNotification(e){const{error:t}=await X.from("admin_notifications").delete().eq("id",e);if(t)throw console.error("Error deleting notification:",t),new Error(t.message)},async createNotification(e){const{data:t,error:s}=await X.from("admin_notifications").insert({type:e.type,title:e.title,message:e.message,priority:e.priority||"medium",related_entity_type:e.relatedEntityType,related_entity_id:e.relatedEntityId,metadata:e.metadata,action_url:e.actionUrl}).select().single();if(s)throw console.error("Error creating notification:",s),new Error(s.message);return im(t)},subscribeToNotifications(e){const t=X.channel("admin_notifications_changes").on("postgres_changes",{event:"INSERT",schema:"public",table:"admin_notifications"},s=>{e(im(s.new))}).subscribe();return()=>{X.removeChannel(t)}}};var Tye=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"];function jA(e){if(typeof e!="string")return!1;var t=Tye;return t.includes(e)}var Iye=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],Dye=new Set(Iye);function nH(e){return typeof e!="string"?!1:Dye.has(e)}function iH(e){return typeof e=="string"&&e.startsWith("data-")}function Go(e){if(typeof e!="object"||e===null)return{};var t={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(nH(s)||iH(s))&&(t[s]=e[s]);return t}function ob(e){if(e==null)return null;if(p.isValidElement(e)&&typeof e.props=="object"&&e.props!==null){var t=e.props;return Go(t)}return typeof e=="object"&&!Array.isArray(e)?Go(e):null}function li(e){var t={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(nH(s)||iH(s)||jA(s))&&(t[s]=e[s]);return t}function Oye(e){return e==null?null:p.isValidElement(e)?li(e.props):typeof e=="object"&&!Array.isArray(e)?li(e):null}var Rye=["children","width","height","viewBox","className","style","title","desc"];function D3(){return D3=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)({}).hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e},D3.apply(null,arguments)}function Mye(e,t){if(e==null)return{};var s,a,n=Lye(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)s=i[a],t.indexOf(s)===-1&&{}.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function Lye(e,t){if(e==null)return{};var s={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;s[a]=e[a]}return s}var NA=p.forwardRef((e,t)=>{var{children:s,width:a,height:n,viewBox:i,className:o,style:l,title:c,desc:d}=e,h=Mye(e,Rye),f=i||{width:a,height:n,x:0,y:0},x=fe("recharts-surface",o);return p.createElement("svg",D3({},li(h),{className:x,width:a,height:n,style:l,viewBox:"".concat(f.x," ").concat(f.y," ").concat(f.width," ").concat(f.height),ref:t}),p.createElement("title",null,c),p.createElement("desc",null,d),s)}),Fye=["children","className"];function O3(){return O3=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)({}).hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e},O3.apply(null,arguments)}function Bye(e,t){if(e==null)return{};var s,a,n=$ye(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)s=i[a],t.indexOf(s)===-1&&{}.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function $ye(e,t){if(e==null)return{};var s={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;s[a]=e[a]}return s}var ci=p.forwardRef((e,t)=>{var{children:s,className:a}=e,n=Bye(e,Fye),i=fe("recharts-layer",a);return p.createElement("g",O3({className:i},li(n),{ref:t}),s)}),oH=p.createContext(null),Uye=()=>p.useContext(oH);function Ns(e){return function(){return e}}const lH=Math.cos,oj=Math.sin,Ml=Math.sqrt,lj=Math.PI,u2=2*lj,R3=Math.PI,M3=2*R3,b0=1e-6,Vye=M3-b0;function cH(e){this._+=e[0];for(let t=1,s=e.length;t<s;++t)this._+=arguments[t]+e[t]}function Wye(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return cH;const s=10**t;return function(a){this._+=a[0];for(let n=1,i=a.length;n<i;++n)this._+=Math.round(arguments[n]*s)/s+a[n]}}class zye{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?cH:Wye(t)}moveTo(t,s){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+s}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,s){this._append`L${this._x1=+t},${this._y1=+s}`}quadraticCurveTo(t,s,a,n){this._append`Q${+t},${+s},${this._x1=+a},${this._y1=+n}`}bezierCurveTo(t,s,a,n,i,o){this._append`C${+t},${+s},${+a},${+n},${this._x1=+i},${this._y1=+o}`}arcTo(t,s,a,n,i){if(t=+t,s=+s,a=+a,n=+n,i=+i,i<0)throw new Error(`negative radius: ${i}`);let o=this._x1,l=this._y1,c=a-t,d=n-s,h=o-t,f=l-s,x=h*h+f*f;if(this._x1===null)this._append`M${this._x1=t},${this._y1=s}`;else if(x>b0)if(!(Math.abs(f*c-d*h)>b0)||!i)this._append`L${this._x1=t},${this._y1=s}`;else{let y=a-o,v=n-l,w=c*c+d*d,N=y*y+v*v,k=Math.sqrt(w),C=Math.sqrt(x),E=i*Math.tan((R3-Math.acos((w+x-N)/(2*k*C)))/2),_=E/C,T=E/k;Math.abs(_-1)>b0&&this._append`L${t+_*h},${s+_*f}`,this._append`A${i},${i},0,0,${+(f*y>h*v)},${this._x1=t+T*c},${this._y1=s+T*d}`}}arc(t,s,a,n,i,o){if(t=+t,s=+s,a=+a,o=!!o,a<0)throw new Error(`negative radius: ${a}`);let l=a*Math.cos(n),c=a*Math.sin(n),d=t+l,h=s+c,f=1^o,x=o?n-i:i-n;this._x1===null?this._append`M${d},${h}`:(Math.abs(this._x1-d)>b0||Math.abs(this._y1-h)>b0)&&this._append`L${d},${h}`,a&&(x<0&&(x=x%M3+M3),x>Vye?this._append`A${a},${a},0,1,${f},${t-l},${s-c}A${a},${a},0,1,${f},${this._x1=d},${this._y1=h}`:x>b0&&this._append`A${a},${a},0,${+(x>=R3)},${f},${this._x1=t+a*Math.cos(i)},${this._y1=s+a*Math.sin(i)}`)}rect(t,s,a,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+s}h${a=+a}v${+n}h${-a}Z`}toString(){return this._}}function kA(e){let t=3;return e.digits=function(s){if(!arguments.length)return t;if(s==null)t=null;else{const a=Math.floor(s);if(!(a>=0))throw new RangeError(`invalid digits: ${s}`);t=a}return e},()=>new zye(t)}function SA(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function dH(e){this._context=e}dH.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function h2(e){return new dH(e)}function uH(e){return e[0]}function hH(e){return e[1]}function mH(e,t){var s=Ns(!0),a=null,n=h2,i=null,o=kA(l);e=typeof e=="function"?e:e===void 0?uH:Ns(e),t=typeof t=="function"?t:t===void 0?hH:Ns(t);function l(c){var d,h=(c=SA(c)).length,f,x=!1,y;for(a==null&&(i=n(y=o())),d=0;d<=h;++d)!(d<h&&s(f=c[d],d,c))===x&&((x=!x)?i.lineStart():i.lineEnd()),x&&i.point(+e(f,d,c),+t(f,d,c));if(y)return i=null,y+""||null}return l.x=function(c){return arguments.length?(e=typeof c=="function"?c:Ns(+c),l):e},l.y=function(c){return arguments.length?(t=typeof c=="function"?c:Ns(+c),l):t},l.defined=function(c){return arguments.length?(s=typeof c=="function"?c:Ns(!!c),l):s},l.curve=function(c){return arguments.length?(n=c,a!=null&&(i=n(a)),l):n},l.context=function(c){return arguments.length?(c==null?a=i=null:i=n(a=c),l):a},l}function Ov(e,t,s){var a=null,n=Ns(!0),i=null,o=h2,l=null,c=kA(d);e=typeof e=="function"?e:e===void 0?uH:Ns(+e),t=typeof t=="function"?t:Ns(t===void 0?0:+t),s=typeof s=="function"?s:s===void 0?hH:Ns(+s);function d(f){var x,y,v,w=(f=SA(f)).length,N,k=!1,C,E=new Array(w),_=new Array(w);for(i==null&&(l=o(C=c())),x=0;x<=w;++x){if(!(x<w&&n(N=f[x],x,f))===k)if(k=!k)y=x,l.areaStart(),l.lineStart();else{for(l.lineEnd(),l.lineStart(),v=x-1;v>=y;--v)l.point(E[v],_[v]);l.lineEnd(),l.areaEnd()}k&&(E[x]=+e(N,x,f),_[x]=+t(N,x,f),l.point(a?+a(N,x,f):E[x],s?+s(N,x,f):_[x]))}if(C)return l=null,C+""||null}function h(){return mH().defined(n).curve(o).context(i)}return d.x=function(f){return arguments.length?(e=typeof f=="function"?f:Ns(+f),a=null,d):e},d.x0=function(f){return arguments.length?(e=typeof f=="function"?f:Ns(+f),d):e},d.x1=function(f){return arguments.length?(a=f==null?null:typeof f=="function"?f:Ns(+f),d):a},d.y=function(f){return arguments.length?(t=typeof f=="function"?f:Ns(+f),s=null,d):t},d.y0=function(f){return arguments.length?(t=typeof f=="function"?f:Ns(+f),d):t},d.y1=function(f){return arguments.length?(s=f==null?null:typeof f=="function"?f:Ns(+f),d):s},d.lineX0=d.lineY0=function(){return h().x(e).y(t)},d.lineY1=function(){return h().x(e).y(s)},d.lineX1=function(){return h().x(a).y(t)},d.defined=function(f){return arguments.length?(n=typeof f=="function"?f:Ns(!!f),d):n},d.curve=function(f){return arguments.length?(o=f,i!=null&&(l=o(i)),d):o},d.context=function(f){return arguments.length?(f==null?i=l=null:l=o(i=f),d):i},d}class fH{constructor(t,s){this._context=t,this._x=s}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,s){switch(t=+t,s=+s,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,s):this._context.moveTo(t,s);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,s,t,s):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+s)/2,t,this._y0,t,s);break}}this._x0=t,this._y0=s}}function qye(e){return new fH(e,!0)}function Hye(e){return new fH(e,!1)}const CA={draw(e,t){const s=Ml(t/lj);e.moveTo(s,0),e.arc(0,0,s,0,u2)}},Kye={draw(e,t){const s=Ml(t/5)/2;e.moveTo(-3*s,-s),e.lineTo(-s,-s),e.lineTo(-s,-3*s),e.lineTo(s,-3*s),e.lineTo(s,-s),e.lineTo(3*s,-s),e.lineTo(3*s,s),e.lineTo(s,s),e.lineTo(s,3*s),e.lineTo(-s,3*s),e.lineTo(-s,s),e.lineTo(-3*s,s),e.closePath()}},xH=Ml(1/3),Gye=xH*2,Yye={draw(e,t){const s=Ml(t/Gye),a=s*xH;e.moveTo(0,-s),e.lineTo(a,0),e.lineTo(0,s),e.lineTo(-a,0),e.closePath()}},Xye={draw(e,t){const s=Ml(t),a=-s/2;e.rect(a,a,s,s)}},Qye=.8908130915292852,gH=oj(lj/10)/oj(7*lj/10),Zye=oj(u2/10)*gH,Jye=-lH(u2/10)*gH,ebe={draw(e,t){const s=Ml(t*Qye),a=Zye*s,n=Jye*s;e.moveTo(0,-s),e.lineTo(a,n);for(let i=1;i<5;++i){const o=u2*i/5,l=lH(o),c=oj(o);e.lineTo(c*s,-l*s),e.lineTo(l*a-c*n,c*a+l*n)}e.closePath()}},kS=Ml(3),tbe={draw(e,t){const s=-Ml(t/(kS*3));e.moveTo(0,s*2),e.lineTo(-kS*s,-s),e.lineTo(kS*s,-s),e.closePath()}},Co=-.5,_o=Ml(3)/2,L3=1/Ml(12),rbe=(L3/2+1)*3,sbe={draw(e,t){const s=Ml(t/rbe),a=s/2,n=s*L3,i=a,o=s*L3+s,l=-i,c=o;e.moveTo(a,n),e.lineTo(i,o),e.lineTo(l,c),e.lineTo(Co*a-_o*n,_o*a+Co*n),e.lineTo(Co*i-_o*o,_o*i+Co*o),e.lineTo(Co*l-_o*c,_o*l+Co*c),e.lineTo(Co*a+_o*n,Co*n-_o*a),e.lineTo(Co*i+_o*o,Co*o-_o*i),e.lineTo(Co*l+_o*c,Co*c-_o*l),e.closePath()}};function abe(e,t){let s=null,a=kA(n);e=typeof e=="function"?e:Ns(e||CA),t=typeof t=="function"?t:Ns(t===void 0?64:+t);function n(){let i;if(s||(s=i=a()),e.apply(this,arguments).draw(s,+t.apply(this,arguments)),i)return s=null,i+""||null}return n.type=function(i){return arguments.length?(e=typeof i=="function"?i:Ns(i),n):e},n.size=function(i){return arguments.length?(t=typeof i=="function"?i:Ns(+i),n):t},n.context=function(i){return arguments.length?(s=i??null,n):s},n}function cj(){}function dj(e,t,s){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+s)/6)}function pH(e){this._context=e}pH.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:dj(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:dj(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function nbe(e){return new pH(e)}function yH(e){this._context=e}yH.prototype={areaStart:cj,areaEnd:cj,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:dj(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function ibe(e){return new yH(e)}function bH(e){this._context=e}bH.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var s=(this._x0+4*this._x1+e)/6,a=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(s,a):this._context.moveTo(s,a);break;case 3:this._point=4;default:dj(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function obe(e){return new bH(e)}function vH(e){this._context=e}vH.prototype={areaStart:cj,areaEnd:cj,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function lbe(e){return new vH(e)}function KM(e){return e<0?-1:1}function GM(e,t,s){var a=e._x1-e._x0,n=t-e._x1,i=(e._y1-e._y0)/(a||n<0&&-0),o=(s-e._y1)/(n||a<0&&-0),l=(i*n+o*a)/(a+n);return(KM(i)+KM(o))*Math.min(Math.abs(i),Math.abs(o),.5*Math.abs(l))||0}function YM(e,t){var s=e._x1-e._x0;return s?(3*(e._y1-e._y0)/s-t)/2:t}function SS(e,t,s){var a=e._x0,n=e._y0,i=e._x1,o=e._y1,l=(i-a)/3;e._context.bezierCurveTo(a+l,n+l*t,i-l,o-l*s,i,o)}function uj(e){this._context=e}uj.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:SS(this,this._t0,YM(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var s=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,SS(this,YM(this,s=GM(this,e,t)),s);break;default:SS(this,this._t0,s=GM(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=s}}};function wH(e){this._context=new jH(e)}(wH.prototype=Object.create(uj.prototype)).point=function(e,t){uj.prototype.point.call(this,t,e)};function jH(e){this._context=e}jH.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,s,a,n,i){this._context.bezierCurveTo(t,e,a,s,i,n)}};function cbe(e){return new uj(e)}function dbe(e){return new wH(e)}function NH(e){this._context=e}NH.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,s=e.length;if(s)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),s===2)this._context.lineTo(e[1],t[1]);else for(var a=XM(e),n=XM(t),i=0,o=1;o<s;++i,++o)this._context.bezierCurveTo(a[0][i],n[0][i],a[1][i],n[1][i],e[o],t[o]);(this._line||this._line!==0&&s===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function XM(e){var t,s=e.length-1,a,n=new Array(s),i=new Array(s),o=new Array(s);for(n[0]=0,i[0]=2,o[0]=e[0]+2*e[1],t=1;t<s-1;++t)n[t]=1,i[t]=4,o[t]=4*e[t]+2*e[t+1];for(n[s-1]=2,i[s-1]=7,o[s-1]=8*e[s-1]+e[s],t=1;t<s;++t)a=n[t]/i[t-1],i[t]-=a,o[t]-=a*o[t-1];for(n[s-1]=o[s-1]/i[s-1],t=s-2;t>=0;--t)n[t]=(o[t]-n[t+1])/i[t];for(i[s-1]=(e[s]+n[s-1])/2,t=0;t<s-1;++t)i[t]=2*e[t+1]-n[t+1];return[n,i]}function ube(e){return new NH(e)}function m2(e,t){this._context=e,this._t=t}m2.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var s=this._x*(1-this._t)+e*this._t;this._context.lineTo(s,this._y),this._context.lineTo(s,t)}break}}this._x=e,this._y=t}};function hbe(e){return new m2(e,.5)}function mbe(e){return new m2(e,0)}function fbe(e){return new m2(e,1)}function zf(e,t){if((o=e.length)>1)for(var s=1,a,n,i=e[t[0]],o,l=i.length;s<o;++s)for(n=i,i=e[t[s]],a=0;a<l;++a)i[a][1]+=i[a][0]=isNaN(n[a][1])?n[a][0]:n[a][1]}function F3(e){for(var t=e.length,s=new Array(t);--t>=0;)s[t]=t;return s}function xbe(e,t){return e[t]}function gbe(e){const t=[];return t.key=e,t}function pbe(){var e=Ns([]),t=F3,s=zf,a=xbe;function n(i){var o=Array.from(e.apply(this,arguments),gbe),l,c=o.length,d=-1,h;for(const f of i)for(l=0,++d;l<c;++l)(o[l][d]=[0,+a(f,o[l].key,d,i)]).data=f;for(l=0,h=SA(t(o));l<c;++l)o[h[l]].index=l;return s(o,h),o}return n.keys=function(i){return arguments.length?(e=typeof i=="function"?i:Ns(Array.from(i)),n):e},n.value=function(i){return arguments.length?(a=typeof i=="function"?i:Ns(+i),n):a},n.order=function(i){return arguments.length?(t=i==null?F3:typeof i=="function"?i:Ns(Array.from(i)),n):t},n.offset=function(i){return arguments.length?(s=i??zf,n):s},n}function ybe(e,t){if((a=e.length)>0){for(var s,a,n=0,i=e[0].length,o;n<i;++n){for(o=s=0;s<a;++s)o+=e[s][n][1]||0;if(o)for(s=0;s<a;++s)e[s][n][1]/=o}zf(e,t)}}function bbe(e,t){if((n=e.length)>0){for(var s=0,a=e[t[0]],n,i=a.length;s<i;++s){for(var o=0,l=0;o<n;++o)l+=e[o][s][1]||0;a[s][1]+=a[s][0]=-l/2}zf(e,t)}}function vbe(e,t){if(!(!((o=e.length)>0)||!((i=(n=e[t[0]]).length)>0))){for(var s=0,a=1,n,i,o;a<i;++a){for(var l=0,c=0,d=0;l<o;++l){for(var h=e[t[l]],f=h[a][1]||0,x=h[a-1][1]||0,y=(f-x)/2,v=0;v<l;++v){var w=e[t[v]],N=w[a][1]||0,k=w[a-1][1]||0;y+=N-k}c+=f,d+=y*f}n[a-1][1]+=n[a-1][0]=s,c&&(s-=d/c)}n[a-1][1]+=n[a-1][0]=s,zf(e,t)}}var f2={},kH={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(s){return s==="__proto__"}e.isUnsafeProperty=t})(kH);var _A={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(s){switch(typeof s){case"number":case"symbol":return!1;case"string":return s.includes(".")||s.includes("[")||s.includes("]")}}e.isDeepKey=t})(_A);var x2={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(s){var a;return typeof s=="string"||typeof s=="symbol"?s:Object.is((a=s==null?void 0:s.valueOf)==null?void 0:a.call(s),-0)?"-0":String(s)}e.toKey=t})(x2);var g2={},SH={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(s){if(s==null)return"";if(typeof s=="string")return s;if(Array.isArray(s))return s.map(t).join(",");const a=String(s);return a==="0"&&Object.is(Number(s),-0)?"-0":a}e.toString=t})(SH);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=SH,s=x2;function a(n){if(Array.isArray(n))return n.map(s.toKey);if(typeof n=="symbol")return[n];n=t.toString(n);const i=[],o=n.length;if(o===0)return i;let l=0,c="",d="",h=!1;for(n.charCodeAt(0)===46&&(i.push(""),l++);l<o;){const f=n[l];d?f==="\\"&&l+1<o?(l++,c+=n[l]):f===d?d="":c+=f:h?f==='"'||f==="'"?d=f:f==="]"?(h=!1,i.push(c),c=""):c+=f:f==="["?(h=!0,c&&(i.push(c),c="")):f==="."?c&&(i.push(c),c=""):c+=f,l++}return c&&i.push(c),i}e.toPath=a})(g2);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=kH,s=_A,a=x2,n=g2;function i(l,c,d){if(l==null)return d;switch(typeof c){case"string":{if(t.isUnsafeProperty(c))return d;const h=l[c];return h===void 0?s.isDeepKey(c)?i(l,n.toPath(c),d):d:h}case"number":case"symbol":{typeof c=="number"&&(c=a.toKey(c));const h=l[c];return h===void 0?d:h}default:{if(Array.isArray(c))return o(l,c,d);if(Object.is(c==null?void 0:c.valueOf(),-0)?c="-0":c=String(c),t.isUnsafeProperty(c))return d;const h=l[c];return h===void 0?d:h}}}function o(l,c,d){if(c.length===0)return d;let h=l;for(let f=0;f<c.length;f++){if(h==null||t.isUnsafeProperty(c[f]))return d;h=h[c[f]]}return h===void 0?d:h}e.get=i})(f2);var wbe=f2.get;const qf=Rl(wbe);var Ai=e=>e===0?0:e>0?1:-1,Yo=e=>typeof e=="number"&&e!=+e,id=e=>typeof e=="string"&&e.indexOf("%")===e.length-1,vt=e=>(typeof e=="number"||e instanceof Number)&&!Yo(e),fc=e=>vt(e)||typeof e=="string",jbe=0,iy=e=>{var t=++jbe;return"".concat(e||"").concat(t)},Il=function(t,s){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!vt(t)&&typeof t!="string")return a;var i;if(id(t)){if(s==null)return a;var o=t.indexOf("%");i=s*parseFloat(t.slice(0,o))/100}else i=+t;return Yo(i)&&(i=a),n&&s!=null&&i>s&&(i=s),i},CH=e=>{if(!Array.isArray(e))return!1;for(var t=e.length,s={},a=0;a<t;a++)if(!s[e[a]])s[e[a]]=!0;else return!0;return!1};function Ks(e,t,s){return vt(e)&&vt(t)?e+s*(t-e):t}function _H(e,t,s){if(!(!e||!e.length))return e.find(a=>a&&(typeof t=="function"?t(a):qf(a,t))===s)}var Qs=e=>e===null||typeof e>"u",lb=e=>Qs(e)?e:"".concat(e.charAt(0).toUpperCase()).concat(e.slice(1));function Nbe(e){return e!=null}function cb(){}var kbe=["type","size","sizeType"];function B3(){return B3=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)({}).hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e},B3.apply(null,arguments)}function QM(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),s.push.apply(s,a)}return s}function ZM(e){for(var t=1;t<arguments.length;t++){var s=arguments[t]!=null?arguments[t]:{};t%2?QM(Object(s),!0).forEach(function(a){Sbe(e,a,s[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):QM(Object(s)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(s,a))})}return e}function Sbe(e,t,s){return(t=Cbe(t))in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function Cbe(e){var t=_be(e,"string");return typeof t=="symbol"?t:t+""}function _be(e,t){if(typeof e!="object"||!e)return e;var s=e[Symbol.toPrimitive];if(s!==void 0){var a=s.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Ebe(e,t){if(e==null)return{};var s,a,n=Abe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)s=i[a],t.indexOf(s)===-1&&{}.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function Abe(e,t){if(e==null)return{};var s={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;s[a]=e[a]}return s}var EH={symbolCircle:CA,symbolCross:Kye,symbolDiamond:Yye,symbolSquare:Xye,symbolStar:ebe,symbolTriangle:tbe,symbolWye:sbe},Pbe=Math.PI/180,Tbe=e=>{var t="symbol".concat(lb(e));return EH[t]||CA},Ibe=(e,t,s)=>{if(t==="area")return e;switch(s){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var a=18*Pbe;return 1.25*e*e*(Math.tan(a)-Math.tan(a*2)*Math.tan(a)**2)}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},Dbe=(e,t)=>{EH["symbol".concat(lb(e))]=t},EA=e=>{var{type:t="circle",size:s=64,sizeType:a="area"}=e,n=Ebe(e,kbe),i=ZM(ZM({},n),{},{type:t,size:s,sizeType:a}),o="circle";typeof t=="string"&&(o=t);var l=()=>{var x=Tbe(o),y=abe().type(x).size(Ibe(s,a,o)),v=y();if(v!==null)return v},{className:c,cx:d,cy:h}=i,f=li(i);return vt(d)&&vt(h)&&vt(s)?p.createElement("path",B3({},f,{className:fe("recharts-symbols",c),transform:"translate(".concat(d,", ").concat(h,")"),d:l()})):null};EA.registerSymbol=Dbe;var AH=e=>"radius"in e&&"startAngle"in e&&"endAngle"in e,AA=(e,t)=>{if(!e||typeof e=="function"||typeof e=="boolean")return null;var s=e;if(p.isValidElement(e)&&(s=e.props),typeof s!="object"&&typeof s!="function")return null;var a={};return Object.keys(s).forEach(n=>{jA(n)&&(a[n]=i=>s[n](s,i))}),a},Obe=(e,t,s)=>a=>(e(t,s,a),null),p2=(e,t,s)=>{if(e===null||typeof e!="object"&&typeof e!="function")return null;var a=null;return Object.keys(e).forEach(n=>{var i=e[n];jA(n)&&typeof i=="function"&&(a||(a={}),a[n]=Obe(i,t,s))}),a};function JM(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),s.push.apply(s,a)}return s}function Rbe(e){for(var t=1;t<arguments.length;t++){var s=arguments[t]!=null?arguments[t]:{};t%2?JM(Object(s),!0).forEach(function(a){Mbe(e,a,s[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):JM(Object(s)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(s,a))})}return e}function Mbe(e,t,s){return(t=Lbe(t))in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function Lbe(e){var t=Fbe(e,"string");return typeof t=="symbol"?t:t+""}function Fbe(e,t){if(typeof e!="object"||!e)return e;var s=e[Symbol.toPrimitive];if(s!==void 0){var a=s.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Mn(e,t){var s=Rbe({},e),a=t,n=Object.keys(t),i=n.reduce((o,l)=>(o[l]===void 0&&a[l]!==void 0&&(o[l]=a[l]),o),s);return i}function hj(){return hj=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)({}).hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e},hj.apply(null,arguments)}function e7(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),s.push.apply(s,a)}return s}function Bbe(e){for(var t=1;t<arguments.length;t++){var s=arguments[t]!=null?arguments[t]:{};t%2?e7(Object(s),!0).forEach(function(a){$be(e,a,s[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):e7(Object(s)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(s,a))})}return e}function $be(e,t,s){return(t=Ube(t))in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function Ube(e){var t=Vbe(e,"string");return typeof t=="symbol"?t:t+""}function Vbe(e,t){if(typeof e!="object"||!e)return e;var s=e[Symbol.toPrimitive];if(s!==void 0){var a=s.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var To=32,Wbe={align:"center",iconSize:14,inactiveColor:"#ccc",layout:"horizontal",verticalAlign:"middle"};function zbe(e){var{data:t,iconType:s,inactiveColor:a}=e,n=To/2,i=To/6,o=To/3,l=t.inactive?a:t.color,c=s??t.type;if(c==="none")return null;if(c==="plainline"){var d;return p.createElement("line",{strokeWidth:4,fill:"none",stroke:l,strokeDasharray:(d=t.payload)===null||d===void 0?void 0:d.strokeDasharray,x1:0,y1:n,x2:To,y2:n,className:"recharts-legend-icon"})}if(c==="line")return p.createElement("path",{strokeWidth:4,fill:"none",stroke:l,d:"M0,".concat(n,"h").concat(o,`
            A`).concat(i,",").concat(i,",0,1,1,").concat(2*o,",").concat(n,`
            H`).concat(To,"M").concat(2*o,",").concat(n,`
            A`).concat(i,",").concat(i,",0,1,1,").concat(o,",").concat(n),className:"recharts-legend-icon"});if(c==="rect")return p.createElement("path",{stroke:"none",fill:l,d:"M0,".concat(To/8,"h").concat(To,"v").concat(To*3/4,"h").concat(-To,"z"),className:"recharts-legend-icon"});if(p.isValidElement(t.legendIcon)){var h=Bbe({},t);return delete h.legendIcon,p.cloneElement(t.legendIcon,h)}return p.createElement(EA,{fill:l,cx:n,cy:n,size:To,sizeType:"diameter",type:c})}function qbe(e){var{payload:t,iconSize:s,layout:a,formatter:n,inactiveColor:i,iconType:o}=e,l={x:0,y:0,width:To,height:To},c={display:a==="horizontal"?"inline-block":"block",marginRight:10},d={display:"inline-block",verticalAlign:"middle",marginRight:4};return t.map((h,f)=>{var x=h.formatter||n,y=fe({"recharts-legend-item":!0,["legend-item-".concat(f)]:!0,inactive:h.inactive});if(h.type==="none")return null;var v=h.inactive?i:h.color,w=x?x(h.value,h,f):h.value;return p.createElement("li",hj({className:y,style:c,key:"legend-item-".concat(f)},p2(e,h,f)),p.createElement(NA,{width:s,height:s,viewBox:l,style:d,"aria-label":"".concat(w," legend icon")},p.createElement(zbe,{data:h,iconType:o,inactiveColor:i})),p.createElement("span",{className:"recharts-legend-item-text",style:{color:v}},w))})}var Hbe=e=>{var t=Mn(e,Wbe),{payload:s,layout:a,align:n}=t;if(!s||!s.length)return null;var i={padding:0,margin:0,textAlign:a==="horizontal"?n:"left"};return p.createElement("ul",{className:"recharts-default-legend",style:i},p.createElement(qbe,hj({},t,{payload:s})))},PH={},TH={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(s,a){const n=new Map;for(let i=0;i<s.length;i++){const o=s[i],l=a(o);n.has(l)||n.set(l,o)}return Array.from(n.values())}e.uniqBy=t})(TH);var PA={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(s){return s}e.identity=t})(PA);var IH={},y2={},DH={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(s){return Number.isSafeInteger(s)&&s>=0}e.isLength=t})(DH);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=DH;function s(a){return a!=null&&typeof a!="function"&&t.isLength(a.length)}e.isArrayLike=s})(y2);var OH={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(s){return typeof s=="object"&&s!==null}e.isObjectLike=t})(OH);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=y2,s=OH;function a(n){return s.isObjectLike(n)&&t.isArrayLike(n)}e.isArrayLikeObject=a})(IH);var RH={},MH={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=f2;function s(a){return function(n){return t.get(n,a)}}e.property=s})(MH);var LH={},TA={},FH={},IA={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(s){return s!==null&&(typeof s=="object"||typeof s=="function")}e.isObject=t})(IA);var DA={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(s){return s==null||typeof s!="object"&&typeof s!="function"}e.isPrimitive=t})(DA);var OA={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(s,a){return s===a||Number.isNaN(s)&&Number.isNaN(a)}e.eq=t})(OA);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=IA,s=DA,a=OA;function n(h,f,x){return typeof x!="function"?n(h,f,()=>{}):i(h,f,function y(v,w,N,k,C,E){const _=x(v,w,N,k,C,E);return _!==void 0?!!_:i(v,w,y,E)},new Map)}function i(h,f,x,y){if(f===h)return!0;switch(typeof f){case"object":return o(h,f,x,y);case"function":return Object.keys(f).length>0?i(h,{...f},x,y):a.eq(h,f);default:return t.isObject(h)?typeof f=="string"?f==="":!0:a.eq(h,f)}}function o(h,f,x,y){if(f==null)return!0;if(Array.isArray(f))return c(h,f,x,y);if(f instanceof Map)return l(h,f,x,y);if(f instanceof Set)return d(h,f,x,y);const v=Object.keys(f);if(h==null)return v.length===0;if(v.length===0)return!0;if(y!=null&&y.has(f))return y.get(f)===h;y==null||y.set(f,h);try{for(let w=0;w<v.length;w++){const N=v[w];if(!s.isPrimitive(h)&&!(N in h)||f[N]===void 0&&h[N]!==void 0||f[N]===null&&h[N]!==null||!x(h[N],f[N],N,h,f,y))return!1}return!0}finally{y==null||y.delete(f)}}function l(h,f,x,y){if(f.size===0)return!0;if(!(h instanceof Map))return!1;for(const[v,w]of f.entries()){const N=h.get(v);if(x(N,w,v,h,f,y)===!1)return!1}return!0}function c(h,f,x,y){if(f.length===0)return!0;if(!Array.isArray(h))return!1;const v=new Set;for(let w=0;w<f.length;w++){const N=f[w];let k=!1;for(let C=0;C<h.length;C++){if(v.has(C))continue;const E=h[C];let _=!1;if(x(E,N,w,h,f,y)&&(_=!0),_){v.add(C),k=!0;break}}if(!k)return!1}return!0}function d(h,f,x,y){return f.size===0?!0:h instanceof Set?c([...h],[...f],x,y):!1}e.isMatchWith=n,e.isSetMatch=d})(FH);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=FH;function s(a,n){return t.isMatchWith(a,n,()=>{})}e.isMatch=s})(TA);var BH={},RA={},$H={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(s){return Object.getOwnPropertySymbols(s).filter(a=>Object.prototype.propertyIsEnumerable.call(s,a))}e.getSymbols=t})($H);var MA={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(s){return s==null?s===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(s)}e.getTag=t})(MA);var LA={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t="[object RegExp]",s="[object String]",a="[object Number]",n="[object Boolean]",i="[object Arguments]",o="[object Symbol]",l="[object Date]",c="[object Map]",d="[object Set]",h="[object Array]",f="[object Function]",x="[object ArrayBuffer]",y="[object Object]",v="[object Error]",w="[object DataView]",N="[object Uint8Array]",k="[object Uint8ClampedArray]",C="[object Uint16Array]",E="[object Uint32Array]",_="[object BigUint64Array]",T="[object Int8Array]",A="[object Int16Array]",P="[object Int32Array]",M="[object BigInt64Array]",R="[object Float32Array]",$="[object Float64Array]";e.argumentsTag=i,e.arrayBufferTag=x,e.arrayTag=h,e.bigInt64ArrayTag=M,e.bigUint64ArrayTag=_,e.booleanTag=n,e.dataViewTag=w,e.dateTag=l,e.errorTag=v,e.float32ArrayTag=R,e.float64ArrayTag=$,e.functionTag=f,e.int16ArrayTag=A,e.int32ArrayTag=P,e.int8ArrayTag=T,e.mapTag=c,e.numberTag=a,e.objectTag=y,e.regexpTag=t,e.setTag=d,e.stringTag=s,e.symbolTag=o,e.uint16ArrayTag=C,e.uint32ArrayTag=E,e.uint8ArrayTag=N,e.uint8ClampedArrayTag=k})(LA);var UH={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(s){return ArrayBuffer.isView(s)&&!(s instanceof DataView)}e.isTypedArray=t})(UH);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=$H,s=MA,a=LA,n=DA,i=UH;function o(h,f){return l(h,void 0,h,new Map,f)}function l(h,f,x,y=new Map,v=void 0){const w=v==null?void 0:v(h,f,x,y);if(w!==void 0)return w;if(n.isPrimitive(h))return h;if(y.has(h))return y.get(h);if(Array.isArray(h)){const N=new Array(h.length);y.set(h,N);for(let k=0;k<h.length;k++)N[k]=l(h[k],k,x,y,v);return Object.hasOwn(h,"index")&&(N.index=h.index),Object.hasOwn(h,"input")&&(N.input=h.input),N}if(h instanceof Date)return new Date(h.getTime());if(h instanceof RegExp){const N=new RegExp(h.source,h.flags);return N.lastIndex=h.lastIndex,N}if(h instanceof Map){const N=new Map;y.set(h,N);for(const[k,C]of h)N.set(k,l(C,k,x,y,v));return N}if(h instanceof Set){const N=new Set;y.set(h,N);for(const k of h)N.add(l(k,void 0,x,y,v));return N}if(typeof Buffer<"u"&&Buffer.isBuffer(h))return h.subarray();if(i.isTypedArray(h)){const N=new(Object.getPrototypeOf(h)).constructor(h.length);y.set(h,N);for(let k=0;k<h.length;k++)N[k]=l(h[k],k,x,y,v);return N}if(h instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&h instanceof SharedArrayBuffer)return h.slice(0);if(h instanceof DataView){const N=new DataView(h.buffer.slice(0),h.byteOffset,h.byteLength);return y.set(h,N),c(N,h,x,y,v),N}if(typeof File<"u"&&h instanceof File){const N=new File([h],h.name,{type:h.type});return y.set(h,N),c(N,h,x,y,v),N}if(typeof Blob<"u"&&h instanceof Blob){const N=new Blob([h],{type:h.type});return y.set(h,N),c(N,h,x,y,v),N}if(h instanceof Error){const N=new h.constructor;return y.set(h,N),N.message=h.message,N.name=h.name,N.stack=h.stack,N.cause=h.cause,c(N,h,x,y,v),N}if(h instanceof Boolean){const N=new Boolean(h.valueOf());return y.set(h,N),c(N,h,x,y,v),N}if(h instanceof Number){const N=new Number(h.valueOf());return y.set(h,N),c(N,h,x,y,v),N}if(h instanceof String){const N=new String(h.valueOf());return y.set(h,N),c(N,h,x,y,v),N}if(typeof h=="object"&&d(h)){const N=Object.create(Object.getPrototypeOf(h));return y.set(h,N),c(N,h,x,y,v),N}return h}function c(h,f,x=h,y,v){const w=[...Object.keys(f),...t.getSymbols(f)];for(let N=0;N<w.length;N++){const k=w[N],C=Object.getOwnPropertyDescriptor(h,k);(C==null||C.writable)&&(h[k]=l(f[k],k,x,y,v))}}function d(h){switch(s.getTag(h)){case a.argumentsTag:case a.arrayTag:case a.arrayBufferTag:case a.dataViewTag:case a.booleanTag:case a.dateTag:case a.float32ArrayTag:case a.float64ArrayTag:case a.int8ArrayTag:case a.int16ArrayTag:case a.int32ArrayTag:case a.mapTag:case a.numberTag:case a.objectTag:case a.regexpTag:case a.setTag:case a.stringTag:case a.symbolTag:case a.uint8ArrayTag:case a.uint8ClampedArrayTag:case a.uint16ArrayTag:case a.uint32ArrayTag:return!0;default:return!1}}e.cloneDeepWith=o,e.cloneDeepWithImpl=l,e.copyProperties=c})(RA);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=RA;function s(a){return t.cloneDeepWithImpl(a,void 0,a,new Map,void 0)}e.cloneDeep=s})(BH);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=TA,s=BH;function a(n){return n=s.cloneDeep(n),i=>t.isMatch(i,n)}e.matches=a})(LH);var VH={},WH={},zH={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=RA,s=LA;function a(n,i){return t.cloneDeepWith(n,(o,l,c,d)=>{const h=i==null?void 0:i(o,l,c,d);if(h!==void 0)return h;if(typeof n=="object")switch(Object.prototype.toString.call(n)){case s.numberTag:case s.stringTag:case s.booleanTag:{const f=new n.constructor(n==null?void 0:n.valueOf());return t.copyProperties(f,n),f}case s.argumentsTag:{const f={};return t.copyProperties(f,n),f.length=n.length,f[Symbol.iterator]=n[Symbol.iterator],f}default:return}})}e.cloneDeepWith=a})(zH);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=zH;function s(a){return t.cloneDeepWith(a)}e.cloneDeep=s})(WH);var qH={},FA={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=/^(?:0|[1-9]\d*)$/;function s(a,n=Number.MAX_SAFE_INTEGER){switch(typeof a){case"number":return Number.isInteger(a)&&a>=0&&a<n;case"symbol":return!1;case"string":return t.test(a)}}e.isIndex=s})(FA);var HH={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=MA;function s(a){return a!==null&&typeof a=="object"&&t.getTag(a)==="[object Arguments]"}e.isArguments=s})(HH);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=_A,s=FA,a=HH,n=g2;function i(o,l){let c;if(Array.isArray(l)?c=l:typeof l=="string"&&t.isDeepKey(l)&&(o==null?void 0:o[l])==null?c=n.toPath(l):c=[l],c.length===0)return!1;let d=o;for(let h=0;h<c.length;h++){const f=c[h];if((d==null||!Object.hasOwn(d,f))&&!((Array.isArray(d)||a.isArguments(d))&&s.isIndex(f)&&f<d.length))return!1;d=d[f]}return!0}e.has=i})(qH);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=TA,s=x2,a=WH,n=f2,i=qH;function o(l,c){switch(typeof l){case"object":{Object.is(l==null?void 0:l.valueOf(),-0)&&(l="-0");break}case"number":{l=s.toKey(l);break}}return c=a.cloneDeep(c),function(d){const h=n.get(d,l);return h===void 0?i.has(d,l):c===void 0?h===void 0:t.isMatch(h,c)}}e.matchesProperty=o})(VH);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=PA,s=MH,a=LH,n=VH;function i(o){if(o==null)return t.identity;switch(typeof o){case"function":return o;case"object":return Array.isArray(o)&&o.length===2?n.matchesProperty(o[0],o[1]):a.matches(o);case"string":case"symbol":case"number":return s.property(o)}}e.iteratee=i})(RH);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=TH,s=PA,a=IH,n=RH;function i(o,l=s.identity){return a.isArrayLikeObject(o)?t.uniqBy(Array.from(o),n.iteratee(l)):[]}e.uniqBy=i})(PH);var Kbe=PH.uniqBy;const t7=Rl(Kbe);function KH(e,t,s){return t===!0?t7(e,s):typeof t=="function"?t7(e,t):e}var GH={exports:{}},YH={},XH={exports:{}},QH={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Hf=p;function Gbe(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Ybe=typeof Object.is=="function"?Object.is:Gbe,Xbe=Hf.useState,Qbe=Hf.useEffect,Zbe=Hf.useLayoutEffect,Jbe=Hf.useDebugValue;function eve(e,t){var s=t(),a=Xbe({inst:{value:s,getSnapshot:t}}),n=a[0].inst,i=a[1];return Zbe(function(){n.value=s,n.getSnapshot=t,CS(n)&&i({inst:n})},[e,s,t]),Qbe(function(){return CS(n)&&i({inst:n}),e(function(){CS(n)&&i({inst:n})})},[e]),Jbe(s),s}function CS(e){var t=e.getSnapshot;e=e.value;try{var s=t();return!Ybe(e,s)}catch{return!0}}function tve(e,t){return t()}var rve=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?tve:eve;QH.useSyncExternalStore=Hf.useSyncExternalStore!==void 0?Hf.useSyncExternalStore:rve;XH.exports=QH;var sve=XH.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var b2=p,ave=sve;function nve(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var ive=typeof Object.is=="function"?Object.is:nve,ove=ave.useSyncExternalStore,lve=b2.useRef,cve=b2.useEffect,dve=b2.useMemo,uve=b2.useDebugValue;YH.useSyncExternalStoreWithSelector=function(e,t,s,a,n){var i=lve(null);if(i.current===null){var o={hasValue:!1,value:null};i.current=o}else o=i.current;i=dve(function(){function c(y){if(!d){if(d=!0,h=y,y=a(y),n!==void 0&&o.hasValue){var v=o.value;if(n(v,y))return f=v}return f=y}if(v=f,ive(h,y))return v;var w=a(y);return n!==void 0&&n(v,w)?(h=y,v):(h=y,f=w)}var d=!1,h,f,x=s===void 0?null:s;return[function(){return c(t())},x===null?void 0:function(){return c(x())}]},[t,s,a,n]);var l=ove(e,i[0],i[1]);return cve(function(){o.hasValue=!0,o.value=l},[l]),uve(l),l};GH.exports=YH;var hve=GH.exports,BA=p.createContext(null),mve=e=>e,ea=()=>{var e=p.useContext(BA);return e?e.store.dispatch:mve},W1=()=>{},fve=()=>W1,xve=(e,t)=>e===t;function Dt(e){var t=p.useContext(BA);return hve.useSyncExternalStoreWithSelector(t?t.subscription.addNestedSub:fve,t?t.store.getState:W1,t?t.store.getState:W1,t?e:W1,xve)}function gve(e,t=`expected a function, instead received ${typeof e}`){if(typeof e!="function")throw new TypeError(t)}function pve(e,t=`expected an object, instead received ${typeof e}`){if(typeof e!="object")throw new TypeError(t)}function yve(e,t="expected all items to be functions, instead received the following types: "){if(!e.every(s=>typeof s=="function")){const s=e.map(a=>typeof a=="function"?`function ${a.name||"unnamed"}()`:typeof a).join(", ");throw new TypeError(`${t}[${s}]`)}}var r7=e=>Array.isArray(e)?e:[e];function bve(e){const t=Array.isArray(e[0])?e[0]:e;return yve(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}function vve(e,t){const s=[],{length:a}=e;for(let n=0;n<a;n++)s.push(e[n].apply(null,t));return s}var wve=class{constructor(e){this.value=e}deref(){return this.value}},jve=typeof WeakRef<"u"?WeakRef:wve,Nve=0,s7=1;function Rv(){return{s:Nve,v:void 0,o:null,p:null}}function ZH(e,t={}){let s=Rv();const{resultEqualityCheck:a}=t;let n,i=0;function o(){var f;let l=s;const{length:c}=arguments;for(let x=0,y=c;x<y;x++){const v=arguments[x];if(typeof v=="function"||typeof v=="object"&&v!==null){let w=l.o;w===null&&(l.o=w=new WeakMap);const N=w.get(v);N===void 0?(l=Rv(),w.set(v,l)):l=N}else{let w=l.p;w===null&&(l.p=w=new Map);const N=w.get(v);N===void 0?(l=Rv(),w.set(v,l)):l=N}}const d=l;let h;if(l.s===s7)h=l.v;else if(h=e.apply(null,arguments),i++,a){const x=((f=n==null?void 0:n.deref)==null?void 0:f.call(n))??n;x!=null&&a(x,h)&&(h=x,i!==0&&i--),n=typeof h=="object"&&h!==null||typeof h=="function"?new jve(h):h}return d.s=s7,d.v=h,h}return o.clearCache=()=>{s=Rv(),o.resetResultsCount()},o.resultsCount=()=>i,o.resetResultsCount=()=>{i=0},o}function kve(e,...t){const s=typeof e=="function"?{memoize:e,memoizeOptions:t}:e,a=(...n)=>{let i=0,o=0,l,c={},d=n.pop();typeof d=="object"&&(c=d,d=n.pop()),gve(d,`createSelector expects an output function after the inputs, but received: [${typeof d}]`);const h={...s,...c},{memoize:f,memoizeOptions:x=[],argsMemoize:y=ZH,argsMemoizeOptions:v=[]}=h,w=r7(x),N=r7(v),k=bve(n),C=f(function(){return i++,d.apply(null,arguments)},...w),E=y(function(){o++;const T=vve(k,arguments);return l=C.apply(null,T),l},...N);return Object.assign(E,{resultFunc:d,memoizedResultFunc:C,dependencies:k,dependencyRecomputations:()=>o,resetDependencyRecomputations:()=>{o=0},lastResult:()=>l,recomputations:()=>i,resetRecomputations:()=>{i=0},memoize:f,argsMemoize:y})};return Object.assign(a,{withTypes:()=>a}),a}var Le=kve(ZH),Sve=Object.assign((e,t=Le)=>{pve(e,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof e}`);const s=Object.keys(e),a=s.map(i=>e[i]);return t(a,(...i)=>i.reduce((o,l,c)=>(o[s[c]]=l,o),{}))},{withTypes:()=>Sve}),JH={},eK={},tK={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(a){return typeof a=="symbol"?1:a===null?2:a===void 0?3:a!==a?4:0}const s=(a,n,i)=>{if(a!==n){const o=t(a),l=t(n);if(o===l&&o===0){if(a<n)return i==="desc"?1:-1;if(a>n)return i==="desc"?-1:1}return i==="desc"?l-o:o-l}return 0};e.compareValues=s})(tK);var rK={},$A={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(s){return typeof s=="symbol"||s instanceof Symbol}e.isSymbol=t})($A);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=$A,s=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,a=/^\w*$/;function n(i,o){return Array.isArray(i)?!1:typeof i=="number"||typeof i=="boolean"||i==null||t.isSymbol(i)?!0:typeof i=="string"&&(a.test(i)||!s.test(i))||o!=null&&Object.hasOwn(o,i)}e.isKey=n})(rK);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=tK,s=rK,a=g2;function n(i,o,l,c){if(i==null)return[];l=c?void 0:l,Array.isArray(i)||(i=Object.values(i)),Array.isArray(o)||(o=o==null?[null]:[o]),o.length===0&&(o=[null]),Array.isArray(l)||(l=l==null?[]:[l]),l=l.map(y=>String(y));const d=(y,v)=>{let w=y;for(let N=0;N<v.length&&w!=null;++N)w=w[v[N]];return w},h=(y,v)=>v==null||y==null?v:typeof y=="object"&&"key"in y?Object.hasOwn(v,y.key)?v[y.key]:d(v,y.path):typeof y=="function"?y(v):Array.isArray(y)?d(v,y):typeof v=="object"?v[y]:v,f=o.map(y=>(Array.isArray(y)&&y.length===1&&(y=y[0]),y==null||typeof y=="function"||Array.isArray(y)||s.isKey(y)?y:{key:y,path:a.toPath(y)}));return i.map(y=>({original:y,criteria:f.map(v=>h(v,y))})).slice().sort((y,v)=>{for(let w=0;w<f.length;w++){const N=t.compareValues(y.criteria[w],v.criteria[w],l[w]);if(N!==0)return N}return 0}).map(y=>y.original)}e.orderBy=n})(eK);var sK={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(s,a=1){const n=[],i=Math.floor(a),o=(l,c)=>{for(let d=0;d<l.length;d++){const h=l[d];Array.isArray(h)&&c<i?o(h,c+1):n.push(h)}};return o(s,0),n}e.flatten=t})(sK);var UA={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=FA,s=y2,a=IA,n=OA;function i(o,l,c){return a.isObject(c)&&(typeof l=="number"&&s.isArrayLike(c)&&t.isIndex(l)&&l<c.length||typeof l=="string"&&l in c)?n.eq(c[l],o):!1}e.isIterateeCall=i})(UA);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=eK,s=sK,a=UA;function n(i,...o){const l=o.length;return l>1&&a.isIterateeCall(i,o[0],o[1])?o=[]:l>2&&a.isIterateeCall(o[0],o[1],o[2])&&(o=[o[0]]),t.orderBy(i,s.flatten(o),["asc"])}e.sortBy=n})(JH);var Cve=JH.sortBy;const v2=Rl(Cve);var aK=e=>e.legend.settings,_ve=e=>e.legend.size,Eve=e=>e.legend.payload,Ave=Le([Eve,aK],(e,t)=>{var{itemSorter:s}=t,a=e.flat(1);return s?v2(a,s):a});function Pve(){return Dt(Ave)}var Mv=1;function nK(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],[t,s]=p.useState({height:0,left:0,top:0,width:0}),a=p.useCallback(n=>{if(n!=null){var i=n.getBoundingClientRect(),o={height:i.height,left:i.left,top:i.top,width:i.width};(Math.abs(o.height-t.height)>Mv||Math.abs(o.left-t.left)>Mv||Math.abs(o.top-t.top)>Mv||Math.abs(o.width-t.width)>Mv)&&s({height:o.height,left:o.left,top:o.top,width:o.width})}},[t.width,t.height,t.top,t.left,...e]);return[t,a]}function jn(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var Tve=typeof Symbol=="function"&&Symbol.observable||"@@observable",a7=Tve,_S=()=>Math.random().toString(36).substring(7).split("").join("."),Ive={INIT:`@@redux/INIT${_S()}`,REPLACE:`@@redux/REPLACE${_S()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${_S()}`},mj=Ive;function VA(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function iK(e,t,s){if(typeof e!="function")throw new Error(jn(2));if(typeof t=="function"&&typeof s=="function"||typeof s=="function"&&typeof arguments[3]=="function")throw new Error(jn(0));if(typeof t=="function"&&typeof s>"u"&&(s=t,t=void 0),typeof s<"u"){if(typeof s!="function")throw new Error(jn(1));return s(iK)(e,t)}let a=e,n=t,i=new Map,o=i,l=0,c=!1;function d(){o===i&&(o=new Map,i.forEach((N,k)=>{o.set(k,N)}))}function h(){if(c)throw new Error(jn(3));return n}function f(N){if(typeof N!="function")throw new Error(jn(4));if(c)throw new Error(jn(5));let k=!0;d();const C=l++;return o.set(C,N),function(){if(k){if(c)throw new Error(jn(6));k=!1,d(),o.delete(C),i=null}}}function x(N){if(!VA(N))throw new Error(jn(7));if(typeof N.type>"u")throw new Error(jn(8));if(typeof N.type!="string")throw new Error(jn(17));if(c)throw new Error(jn(9));try{c=!0,n=a(n,N)}finally{c=!1}return(i=o).forEach(C=>{C()}),N}function y(N){if(typeof N!="function")throw new Error(jn(10));a=N,x({type:mj.REPLACE})}function v(){const N=f;return{subscribe(k){if(typeof k!="object"||k===null)throw new Error(jn(11));function C(){const _=k;_.next&&_.next(h())}return C(),{unsubscribe:N(C)}},[a7](){return this}}}return x({type:mj.INIT}),{dispatch:x,subscribe:f,getState:h,replaceReducer:y,[a7]:v}}function Dve(e){Object.keys(e).forEach(t=>{const s=e[t];if(typeof s(void 0,{type:mj.INIT})>"u")throw new Error(jn(12));if(typeof s(void 0,{type:mj.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(jn(13))})}function oK(e){const t=Object.keys(e),s={};for(let i=0;i<t.length;i++){const o=t[i];typeof e[o]=="function"&&(s[o]=e[o])}const a=Object.keys(s);let n;try{Dve(s)}catch(i){n=i}return function(o={},l){if(n)throw n;let c=!1;const d={};for(let h=0;h<a.length;h++){const f=a[h],x=s[f],y=o[f],v=x(y,l);if(typeof v>"u")throw l&&l.type,new Error(jn(14));d[f]=v,c=c||v!==y}return c=c||a.length!==Object.keys(o).length,c?d:o}}function fj(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,s)=>(...a)=>t(s(...a)))}function Ove(...e){return t=>(s,a)=>{const n=t(s,a);let i=()=>{throw new Error(jn(15))};const o={getState:n.getState,dispatch:(c,...d)=>i(c,...d)},l=e.map(c=>c(o));return i=fj(...l)(n.dispatch),{...n,dispatch:i}}}function lK(e){return VA(e)&&"type"in e&&typeof e.type=="string"}var cK=Symbol.for("immer-nothing"),n7=Symbol.for("immer-draftable"),di=Symbol.for("immer-state");function wl(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var ro=Object,Kf=ro.getPrototypeOf,xj="constructor",w2="prototype",$3="configurable",gj="enumerable",z1="writable",oy="value",od=e=>!!e&&!!e[di];function Dl(e){var t;return e?dK(e)||j2(e)||!!e[n7]||!!((t=e[xj])!=null&&t[n7])||N2(e)||k2(e):!1}var Rve=ro[w2][xj].toString(),i7=new WeakMap;function dK(e){if(!e||!WA(e))return!1;const t=Kf(e);if(t===null||t===ro[w2])return!0;const s=ro.hasOwnProperty.call(t,xj)&&t[xj];if(s===Object)return!0;if(!km(s))return!1;let a=i7.get(s);return a===void 0&&(a=Function.toString.call(s),i7.set(s,a)),a===Rve}function db(e,t,s=!0){ub(e)===0?(s?Reflect.ownKeys(e):ro.keys(e)).forEach(n=>{t(n,e[n],e)}):e.forEach((a,n)=>t(n,a,e))}function ub(e){const t=e[di];return t?t.type_:j2(e)?1:N2(e)?2:k2(e)?3:0}var o7=(e,t,s=ub(e))=>s===2?e.has(t):ro[w2].hasOwnProperty.call(e,t),U3=(e,t,s=ub(e))=>s===2?e.get(t):e[t],pj=(e,t,s,a=ub(e))=>{a===2?e.set(t,s):a===3?e.add(s):e[t]=s};function Mve(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}var j2=Array.isArray,N2=e=>e instanceof Map,k2=e=>e instanceof Set,WA=e=>typeof e=="object",km=e=>typeof e=="function",ES=e=>typeof e=="boolean",Oc=e=>e.copy_||e.base_,zA=e=>e.modified_?e.copy_:e.base_;function V3(e,t){if(N2(e))return new Map(e);if(k2(e))return new Set(e);if(j2(e))return Array[w2].slice.call(e);const s=dK(e);if(t===!0||t==="class_only"&&!s){const a=ro.getOwnPropertyDescriptors(e);delete a[di];let n=Reflect.ownKeys(a);for(let i=0;i<n.length;i++){const o=n[i],l=a[o];l[z1]===!1&&(l[z1]=!0,l[$3]=!0),(l.get||l.set)&&(a[o]={[$3]:!0,[z1]:!0,[gj]:l[gj],[oy]:e[o]})}return ro.create(Kf(e),a)}else{const a=Kf(e);if(a!==null&&s)return{...e};const n=ro.create(a);return ro.assign(n,e)}}function qA(e,t=!1){return S2(e)||od(e)||!Dl(e)||(ub(e)>1&&ro.defineProperties(e,{set:Lv,add:Lv,clear:Lv,delete:Lv}),ro.freeze(e),t&&db(e,(s,a)=>{qA(a,!0)},!1)),e}function Lve(){wl(2)}var Lv={[oy]:Lve};function S2(e){return e===null||!WA(e)?!0:ro.isFrozen(e)}var yj="MapSet",W3="Patches",uK={};function Gf(e){const t=uK[e];return t||wl(0,e),t}var Fve=e=>!!uK[e],ly,hK=()=>ly,Bve=(e,t)=>({drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0,handledSet_:new Set,processedForPatches_:new Set,mapSetPlugin_:Fve(yj)?Gf(yj):void 0});function l7(e,t){t&&(e.patchPlugin_=Gf(W3),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function z3(e){q3(e),e.drafts_.forEach($ve),e.drafts_=null}function q3(e){e===ly&&(ly=e.parent_)}var c7=e=>ly=Bve(ly,e);function $ve(e){const t=e[di];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function d7(e,t){t.unfinalizedDrafts_=t.drafts_.length;const s=t.drafts_[0];if(e!==void 0&&e!==s){s[di].modified_&&(z3(t),wl(4)),Dl(e)&&(e=u7(t,e));const{patchPlugin_:n}=t;n&&n.generateReplacementPatches_(s[di].base_,e,t)}else e=u7(t,s);return Uve(t,e,!0),z3(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==cK?e:void 0}function u7(e,t){if(S2(t))return t;const s=t[di];if(!s)return HA(t,e.handledSet_,e);if(!C2(s,e))return t;if(!s.modified_)return s.base_;if(!s.finalized_){const{callbacks_:a}=s;if(a)for(;a.length>0;)a.pop()(e);xK(s,e)}return s.copy_}function Uve(e,t,s=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&qA(t,s)}function mK(e){e.finalized_=!0,e.scope_.unfinalizedDrafts_--}var C2=(e,t)=>e.scope_===t,Vve=[];function fK(e,t,s,a){const n=Oc(e),i=e.type_;if(a!==void 0&&U3(n,a,i)===t){pj(n,a,s,i);return}if(!e.draftLocations_){const l=e.draftLocations_=new Map;db(n,(c,d)=>{if(od(d)){const h=l.get(d)||[];h.push(c),l.set(d,h)}})}const o=e.draftLocations_.get(t)??Vve;for(const l of o)pj(n,l,s,i)}function Wve(e,t,s){e.callbacks_.push(function(n){var l;const i=t;if(!i||!C2(i,n))return;(l=n.mapSetPlugin_)==null||l.fixSetContents(i);const o=zA(i);fK(e,i.draft_??i,o,s),xK(i,n)})}function xK(e,t){var a;if(e.modified_&&!e.finalized_&&(e.type_===3||(((a=e.assigned_)==null?void 0:a.size)??0)>0)){const{patchPlugin_:n}=t;if(n){const i=n.getPath(e);i&&n.generatePatches_(e,i,t)}mK(e)}}function zve(e,t,s){const{scope_:a}=e;if(od(s)){const n=s[di];C2(n,a)&&n.callbacks_.push(function(){q1(e);const o=zA(n);fK(e,s,o,t)})}else Dl(s)&&e.callbacks_.push(function(){const i=Oc(e);U3(i,t,e.type_)===s&&a.drafts_.length>1&&(e.assigned_.get(t)??!1)===!0&&e.copy_&&HA(U3(e.copy_,t,e.type_),a.handledSet_,a)})}function HA(e,t,s){return!s.immer_.autoFreeze_&&s.unfinalizedDrafts_<1||od(e)||t.has(e)||!Dl(e)||S2(e)||(t.add(e),db(e,(a,n)=>{if(od(n)){const i=n[di];if(C2(i,s)){const o=zA(i);pj(e,a,o,e.type_),mK(i)}}else Dl(n)&&HA(n,t,s)})),e}function qve(e,t){const s=j2(e),a={type_:s?1:0,scope_:t?t.scope_:hK(),modified_:!1,finalized_:!1,assigned_:void 0,parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1,callbacks_:void 0};let n=a,i=KA;s&&(n=[a],i=cy);const{revoke:o,proxy:l}=Proxy.revocable(n,i);return a.draft_=l,a.revoke_=o,[l,a]}var KA={get(e,t){if(t===di)return e;const s=Oc(e);if(!o7(s,t,e.type_))return Hve(e,s,t);const a=s[t];if(e.finalized_||!Dl(a))return a;if(a===AS(e.base_,t)){q1(e);const n=e.type_===1?+t:t,i=K3(e.scope_,a,e,n);return e.copy_[n]=i}return a},has(e,t){return t in Oc(e)},ownKeys(e){return Reflect.ownKeys(Oc(e))},set(e,t,s){const a=gK(Oc(e),t);if(a!=null&&a.set)return a.set.call(e.draft_,s),!0;if(!e.modified_){const n=AS(Oc(e),t),i=n==null?void 0:n[di];if(i&&i.base_===s)return e.copy_[t]=s,e.assigned_.set(t,!1),!0;if(Mve(s,n)&&(s!==void 0||o7(e.base_,t,e.type_)))return!0;q1(e),H3(e)}return e.copy_[t]===s&&(s!==void 0||t in e.copy_)||Number.isNaN(s)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=s,e.assigned_.set(t,!0),zve(e,t,s)),!0},deleteProperty(e,t){return q1(e),AS(e.base_,t)!==void 0||t in e.base_?(e.assigned_.set(t,!1),H3(e)):e.assigned_.delete(t),e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const s=Oc(e),a=Reflect.getOwnPropertyDescriptor(s,t);return a&&{[z1]:!0,[$3]:e.type_!==1||t!=="length",[gj]:a[gj],[oy]:s[t]}},defineProperty(){wl(11)},getPrototypeOf(e){return Kf(e.base_)},setPrototypeOf(){wl(12)}},cy={};db(KA,(e,t)=>{cy[e]=function(){const s=arguments;return s[0]=s[0][0],t.apply(this,s)}});cy.deleteProperty=function(e,t){return cy.set.call(this,e,t,void 0)};cy.set=function(e,t,s){return KA.set.call(this,e[0],t,s,e[0])};function AS(e,t){const s=e[di];return(s?Oc(s):e)[t]}function Hve(e,t,s){var n;const a=gK(t,s);return a?oy in a?a[oy]:(n=a.get)==null?void 0:n.call(e.draft_):void 0}function gK(e,t){if(!(t in e))return;let s=Kf(e);for(;s;){const a=Object.getOwnPropertyDescriptor(s,t);if(a)return a;s=Kf(s)}}function H3(e){e.modified_||(e.modified_=!0,e.parent_&&H3(e.parent_))}function q1(e){e.copy_||(e.assigned_=new Map,e.copy_=V3(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var Kve=class{constructor(t){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!1,this.produce=(s,a,n)=>{if(km(s)&&!km(a)){const o=a;a=s;const l=this;return function(d=o,...h){return l.produce(d,f=>a.call(this,f,...h))}}km(a)||wl(6),n!==void 0&&!km(n)&&wl(7);let i;if(Dl(s)){const o=c7(this),l=K3(o,s,void 0);let c=!0;try{i=a(l),c=!1}finally{c?z3(o):q3(o)}return l7(o,n),d7(i,o)}else if(!s||!WA(s)){if(i=a(s),i===void 0&&(i=s),i===cK&&(i=void 0),this.autoFreeze_&&qA(i,!0),n){const o=[],l=[];Gf(W3).generateReplacementPatches_(s,i,{patches_:o,inversePatches_:l}),n(o,l)}return i}else wl(1,s)},this.produceWithPatches=(s,a)=>{if(km(s))return(l,...c)=>this.produceWithPatches(l,d=>s(d,...c));let n,i;return[this.produce(s,a,(l,c)=>{n=l,i=c}),n,i]},ES(t==null?void 0:t.autoFreeze)&&this.setAutoFreeze(t.autoFreeze),ES(t==null?void 0:t.useStrictShallowCopy)&&this.setUseStrictShallowCopy(t.useStrictShallowCopy),ES(t==null?void 0:t.useStrictIteration)&&this.setUseStrictIteration(t.useStrictIteration)}createDraft(t){Dl(t)||wl(8),od(t)&&(t=El(t));const s=c7(this),a=K3(s,t,void 0);return a[di].isManual_=!0,q3(s),a}finishDraft(t,s){const a=t&&t[di];(!a||!a.isManual_)&&wl(9);const{scope_:n}=a;return l7(n,s),d7(void 0,n)}setAutoFreeze(t){this.autoFreeze_=t}setUseStrictShallowCopy(t){this.useStrictShallowCopy_=t}setUseStrictIteration(t){this.useStrictIteration_=t}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(t,s){let a;for(a=s.length-1;a>=0;a--){const i=s[a];if(i.path.length===0&&i.op==="replace"){t=i.value;break}}a>-1&&(s=s.slice(a+1));const n=Gf(W3).applyPatches_;return od(t)?n(t,s):this.produce(t,i=>n(i,s))}};function K3(e,t,s,a){const[n,i]=N2(t)?Gf(yj).proxyMap_(t,s):k2(t)?Gf(yj).proxySet_(t,s):qve(t,s);return((s==null?void 0:s.scope_)??hK()).drafts_.push(n),i.callbacks_=(s==null?void 0:s.callbacks_)??[],i.key_=a,s&&a!==void 0?Wve(s,i,a):i.callbacks_.push(function(c){var h;(h=c.mapSetPlugin_)==null||h.fixSetContents(i);const{patchPlugin_:d}=c;i.modified_&&d&&d.generatePatches_(i,[],c)}),n}function El(e){return od(e)||wl(10,e),pK(e)}function pK(e){if(!Dl(e)||S2(e))return e;const t=e[di];let s,a=!0;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,s=V3(e,t.scope_.immer_.useStrictShallowCopy_),a=t.scope_.immer_.shouldUseStrictIteration()}else s=V3(e,!0);return db(s,(n,i)=>{pj(s,n,pK(i))},a),t&&(t.finalized_=!1),s}var Gve=new Kve,yK=Gve.produce;function bK(e){return({dispatch:s,getState:a})=>n=>i=>typeof i=="function"?i(s,a,e):n(i)}var Yve=bK(),Xve=bK,Qve=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?fj:fj.apply(null,arguments)};function Xo(e,t){function s(...a){if(t){let n=t(...a);if(!n)throw new Error(no(0));return{type:e,payload:n.payload,..."meta"in n&&{meta:n.meta},..."error"in n&&{error:n.error}}}return{type:e,payload:a[0]}}return s.toString=()=>`${e}`,s.type=e,s.match=a=>lK(a)&&a.type===e,s}var vK=class $g extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,$g.prototype)}static get[Symbol.species](){return $g}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new $g(...t[0].concat(this)):new $g(...t.concat(this))}};function h7(e){return Dl(e)?yK(e,()=>{}):e}function Fv(e,t,s){return e.has(t)?e.get(t):e.set(t,s(t)).get(t)}function Zve(e){return typeof e=="boolean"}var Jve=()=>function(t){const{thunk:s=!0,immutableCheck:a=!0,serializableCheck:n=!0,actionCreatorCheck:i=!0}=t??{};let o=new vK;return s&&(Zve(s)?o.push(Yve):o.push(Xve(s.extraArgument))),o},wK="RTK_autoBatch",Fs=()=>e=>({payload:e,meta:{[wK]:!0}}),m7=e=>t=>{setTimeout(t,e)},jK=(e={type:"raf"})=>t=>(...s)=>{const a=t(...s);let n=!0,i=!1,o=!1;const l=new Set,c=e.type==="tick"?queueMicrotask:e.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:m7(10):e.type==="callback"?e.queueNotification:m7(e.timeout),d=()=>{o=!1,i&&(i=!1,l.forEach(h=>h()))};return Object.assign({},a,{subscribe(h){const f=()=>n&&h(),x=a.subscribe(f);return l.add(h),()=>{x(),l.delete(h)}},dispatch(h){var f;try{return n=!((f=h==null?void 0:h.meta)!=null&&f[wK]),i=!n,i&&(o||(o=!0,c(d))),a.dispatch(h)}finally{n=!0}}})},e1e=e=>function(s){const{autoBatch:a=!0}=s??{};let n=new vK(e);return a&&n.push(jK(typeof a=="object"?a:void 0)),n};function t1e(e){const t=Jve(),{reducer:s=void 0,middleware:a,devTools:n=!0,preloadedState:i=void 0,enhancers:o=void 0}=e||{};let l;if(typeof s=="function")l=s;else if(VA(s))l=oK(s);else throw new Error(no(1));let c;typeof a=="function"?c=a(t):c=t();let d=fj;n&&(d=Qve({trace:!1,...typeof n=="object"&&n}));const h=Ove(...c),f=e1e(h);let x=typeof o=="function"?o(f):f();const y=d(...x);return iK(l,i,y)}function NK(e){const t={},s=[];let a;const n={addCase(i,o){const l=typeof i=="string"?i:i.type;if(!l)throw new Error(no(28));if(l in t)throw new Error(no(29));return t[l]=o,n},addAsyncThunk(i,o){return o.pending&&(t[i.pending.type]=o.pending),o.rejected&&(t[i.rejected.type]=o.rejected),o.fulfilled&&(t[i.fulfilled.type]=o.fulfilled),o.settled&&s.push({matcher:i.settled,reducer:o.settled}),n},addMatcher(i,o){return s.push({matcher:i,reducer:o}),n},addDefaultCase(i){return a=i,n}};return e(n),[t,s,a]}function r1e(e){return typeof e=="function"}function s1e(e,t){let[s,a,n]=NK(t),i;if(r1e(e))i=()=>h7(e());else{const l=h7(e);i=()=>l}function o(l=i(),c){let d=[s[c.type],...a.filter(({matcher:h})=>h(c)).map(({reducer:h})=>h)];return d.filter(h=>!!h).length===0&&(d=[n]),d.reduce((h,f)=>{if(f)if(od(h)){const y=f(h,c);return y===void 0?h:y}else{if(Dl(h))return yK(h,x=>f(x,c));{const x=f(h,c);if(x===void 0){if(h===null)return h;throw Error("A case reducer on a non-draftable value must not return undefined")}return x}}return h},l)}return o.getInitialState=i,o}var a1e="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",n1e=(e=21)=>{let t="",s=e;for(;s--;)t+=a1e[Math.random()*64|0];return t},i1e=Symbol.for("rtk-slice-createasyncthunk");function o1e(e,t){return`${e}/${t}`}function l1e({creators:e}={}){var s;const t=(s=e==null?void 0:e.asyncThunk)==null?void 0:s[i1e];return function(n){const{name:i,reducerPath:o=i}=n;if(!i)throw new Error(no(11));const l=(typeof n.reducers=="function"?n.reducers(d1e()):n.reducers)||{},c=Object.keys(l),d={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},h={addCase(_,T){const A=typeof _=="string"?_:_.type;if(!A)throw new Error(no(12));if(A in d.sliceCaseReducersByType)throw new Error(no(13));return d.sliceCaseReducersByType[A]=T,h},addMatcher(_,T){return d.sliceMatchers.push({matcher:_,reducer:T}),h},exposeAction(_,T){return d.actionCreators[_]=T,h},exposeCaseReducer(_,T){return d.sliceCaseReducersByName[_]=T,h}};c.forEach(_=>{const T=l[_],A={reducerName:_,type:o1e(i,_),createNotation:typeof n.reducers=="function"};h1e(T)?f1e(A,T,h,t):u1e(A,T,h)});function f(){const[_={},T=[],A=void 0]=typeof n.extraReducers=="function"?NK(n.extraReducers):[n.extraReducers],P={..._,...d.sliceCaseReducersByType};return s1e(n.initialState,M=>{for(let R in P)M.addCase(R,P[R]);for(let R of d.sliceMatchers)M.addMatcher(R.matcher,R.reducer);for(let R of T)M.addMatcher(R.matcher,R.reducer);A&&M.addDefaultCase(A)})}const x=_=>_,y=new Map,v=new WeakMap;let w;function N(_,T){return w||(w=f()),w(_,T)}function k(){return w||(w=f()),w.getInitialState()}function C(_,T=!1){function A(M){let R=M[_];return typeof R>"u"&&T&&(R=Fv(v,A,k)),R}function P(M=x){const R=Fv(y,T,()=>new WeakMap);return Fv(R,M,()=>{const $={};for(const[W,I]of Object.entries(n.selectors??{}))$[W]=c1e(I,M,()=>Fv(v,M,k),T);return $})}return{reducerPath:_,getSelectors:P,get selectors(){return P(A)},selectSlice:A}}const E={name:i,reducer:N,actions:d.actionCreators,caseReducers:d.sliceCaseReducersByName,getInitialState:k,...C(o),injectInto(_,{reducerPath:T,...A}={}){const P=T??o;return _.inject({reducerPath:P,reducer:N},A),{...E,...C(P,!0)}}};return E}}function c1e(e,t,s,a){function n(i,...o){let l=t(i);return typeof l>"u"&&a&&(l=s()),e(l,...o)}return n.unwrapped=e,n}var Wi=l1e();function d1e(){function e(t,s){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...s}}return e.withTypes=()=>e,{reducer(t){return Object.assign({[t.name](...s){return t(...s)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,s){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:s}},asyncThunk:e}}function u1e({type:e,reducerName:t,createNotation:s},a,n){let i,o;if("reducer"in a){if(s&&!m1e(a))throw new Error(no(17));i=a.reducer,o=a.prepare}else i=a;n.addCase(e,i).exposeCaseReducer(t,i).exposeAction(t,o?Xo(e,o):Xo(e))}function h1e(e){return e._reducerDefinitionType==="asyncThunk"}function m1e(e){return e._reducerDefinitionType==="reducerWithPrepare"}function f1e({type:e,reducerName:t},s,a,n){if(!n)throw new Error(no(18));const{payloadCreator:i,fulfilled:o,pending:l,rejected:c,settled:d,options:h}=s,f=n(e,i,h);a.exposeAction(t,f),o&&a.addCase(f.fulfilled,o),l&&a.addCase(f.pending,l),c&&a.addCase(f.rejected,c),d&&a.addMatcher(f.settled,d),a.exposeCaseReducer(t,{fulfilled:o||Bv,pending:l||Bv,rejected:c||Bv,settled:d||Bv})}function Bv(){}var x1e="task",kK="listener",SK="completed",GA="cancelled",g1e=`task-${GA}`,p1e=`task-${SK}`,G3=`${kK}-${GA}`,y1e=`${kK}-${SK}`,_2=class{constructor(e){wi(this,"name","TaskAbortError");wi(this,"message");this.code=e,this.message=`${x1e} ${GA} (reason: ${e})`}},YA=(e,t)=>{if(typeof e!="function")throw new TypeError(no(32))},bj=()=>{},CK=(e,t=bj)=>(e.catch(t),e),_K=(e,t)=>(e.addEventListener("abort",t,{once:!0}),()=>e.removeEventListener("abort",t)),ah=e=>{if(e.aborted)throw new _2(e.reason)};function EK(e,t){let s=bj;return new Promise((a,n)=>{const i=()=>n(new _2(e.reason));if(e.aborted){i();return}s=_K(e,i),t.finally(()=>s()).then(a,n)}).finally(()=>{s=bj})}var b1e=async(e,t)=>{try{return await Promise.resolve(),{status:"ok",value:await e()}}catch(s){return{status:s instanceof _2?"cancelled":"rejected",error:s}}finally{t==null||t()}},vj=e=>t=>CK(EK(e,t).then(s=>(ah(e),s))),AK=e=>{const t=vj(e);return s=>t(new Promise(a=>setTimeout(a,s)))},{assign:of}=Object,f7={},E2="listenerMiddleware",v1e=(e,t)=>{const s=a=>_K(e,()=>a.abort(e.reason));return(a,n)=>{YA(a);const i=new AbortController;s(i);const o=b1e(async()=>{ah(e),ah(i.signal);const l=await a({pause:vj(i.signal),delay:AK(i.signal),signal:i.signal});return ah(i.signal),l},()=>i.abort(p1e));return n!=null&&n.autoJoin&&t.push(o.catch(bj)),{result:vj(e)(o),cancel(){i.abort(g1e)}}}},w1e=(e,t)=>{const s=async(a,n)=>{ah(t);let i=()=>{};const l=[new Promise((c,d)=>{let h=e({predicate:a,effect:(f,x)=>{x.unsubscribe(),c([f,x.getState(),x.getOriginalState()])}});i=()=>{h(),d()}})];n!=null&&l.push(new Promise(c=>setTimeout(c,n,null)));try{const c=await EK(t,Promise.race(l));return ah(t),c}finally{i()}};return(a,n)=>CK(s(a,n))},PK=e=>{let{type:t,actionCreator:s,matcher:a,predicate:n,effect:i}=e;if(t)n=Xo(t).match;else if(s)t=s.type,n=s.match;else if(a)n=a;else if(!n)throw new Error(no(21));return YA(i),{predicate:n,type:t,effect:i}},TK=of(e=>{const{type:t,predicate:s,effect:a}=PK(e);return{id:n1e(),effect:a,type:t,predicate:s,pending:new Set,unsubscribe:()=>{throw new Error(no(22))}}},{withTypes:()=>TK}),x7=(e,t)=>{const{type:s,effect:a,predicate:n}=PK(t);return Array.from(e.values()).find(i=>(typeof s=="string"?i.type===s:i.predicate===n)&&i.effect===a)},Y3=e=>{e.pending.forEach(t=>{t.abort(G3)})},j1e=(e,t)=>()=>{for(const s of t.keys())Y3(s);e.clear()},g7=(e,t,s)=>{try{e(t,s)}catch(a){setTimeout(()=>{throw a},0)}},IK=of(Xo(`${E2}/add`),{withTypes:()=>IK}),N1e=Xo(`${E2}/removeAll`),DK=of(Xo(`${E2}/remove`),{withTypes:()=>DK}),k1e=(...e)=>{console.error(`${E2}/error`,...e)},hb=(e={})=>{const t=new Map,s=new Map,a=y=>{const v=s.get(y)??0;s.set(y,v+1)},n=y=>{const v=s.get(y)??1;v===1?s.delete(y):s.set(y,v-1)},{extra:i,onError:o=k1e}=e;YA(o);const l=y=>(y.unsubscribe=()=>t.delete(y.id),t.set(y.id,y),v=>{y.unsubscribe(),v!=null&&v.cancelActive&&Y3(y)}),c=y=>{const v=x7(t,y)??TK(y);return l(v)};of(c,{withTypes:()=>c});const d=y=>{const v=x7(t,y);return v&&(v.unsubscribe(),y.cancelActive&&Y3(v)),!!v};of(d,{withTypes:()=>d});const h=async(y,v,w,N)=>{const k=new AbortController,C=w1e(c,k.signal),E=[];try{y.pending.add(k),a(y),await Promise.resolve(y.effect(v,of({},w,{getOriginalState:N,condition:(_,T)=>C(_,T).then(Boolean),take:C,delay:AK(k.signal),pause:vj(k.signal),extra:i,signal:k.signal,fork:v1e(k.signal,E),unsubscribe:y.unsubscribe,subscribe:()=>{t.set(y.id,y)},cancelActiveListeners:()=>{y.pending.forEach((_,T,A)=>{_!==k&&(_.abort(G3),A.delete(_))})},cancel:()=>{k.abort(G3),y.pending.delete(k)},throwIfCancelled:()=>{ah(k.signal)}})))}catch(_){_ instanceof _2||g7(o,_,{raisedBy:"effect"})}finally{await Promise.all(E),k.abort(y1e),n(y),y.pending.delete(k)}},f=j1e(t,s);return{middleware:y=>v=>w=>{if(!lK(w))return v(w);if(IK.match(w))return c(w.payload);if(N1e.match(w)){f();return}if(DK.match(w))return d(w.payload);let N=y.getState();const k=()=>{if(N===f7)throw new Error(no(23));return N};let C;try{if(C=v(w),t.size>0){const E=y.getState(),_=Array.from(t.values());for(const T of _){let A=!1;try{A=T.predicate(w,E,N)}catch(P){A=!1,g7(o,P,{raisedBy:"predicate"})}A&&h(T,w,y,k)}}}finally{N=f7}return C},startListening:c,stopListening:d,clearListeners:f}};function no(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var S1e={layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},OK=Wi({name:"chartLayout",initialState:S1e,reducers:{setLayout(e,t){e.layoutType=t.payload},setChartSize(e,t){e.width=t.payload.width,e.height=t.payload.height},setMargin(e,t){var s,a,n,i;e.margin.top=(s=t.payload.top)!==null&&s!==void 0?s:0,e.margin.right=(a=t.payload.right)!==null&&a!==void 0?a:0,e.margin.bottom=(n=t.payload.bottom)!==null&&n!==void 0?n:0,e.margin.left=(i=t.payload.left)!==null&&i!==void 0?i:0},setScale(e,t){e.scale=t.payload}}}),{setMargin:C1e,setLayout:_1e,setChartSize:E1e,setScale:A1e}=OK.actions,P1e=OK.reducer;function RK(e,t,s){return Array.isArray(e)&&e&&t+s!==0?e.slice(t,s+1):e}function p7(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),s.push.apply(s,a)}return s}function Wm(e){for(var t=1;t<arguments.length;t++){var s=arguments[t]!=null?arguments[t]:{};t%2?p7(Object(s),!0).forEach(function(a){T1e(e,a,s[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):p7(Object(s)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(s,a))})}return e}function T1e(e,t,s){return(t=I1e(t))in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function I1e(e){var t=D1e(e,"string");return typeof t=="symbol"?t:t+""}function D1e(e,t){if(typeof e!="object"||!e)return e;var s=e[Symbol.toPrimitive];if(s!==void 0){var a=s.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function za(e,t,s){return Qs(e)||Qs(t)?s:fc(t)?qf(e,t,s):typeof t=="function"?t(e):s}var O1e=(e,t,s)=>{if(t&&s){var{width:a,height:n}=s,{align:i,verticalAlign:o,layout:l}=t;if((l==="vertical"||l==="horizontal"&&o==="middle")&&i!=="center"&&vt(e[i]))return Wm(Wm({},e),{},{[i]:e[i]+(a||0)});if((l==="horizontal"||l==="vertical"&&i==="center")&&o!=="middle"&&vt(e[o]))return Wm(Wm({},e),{},{[o]:e[o]+(n||0)})}return e},yd=(e,t)=>e==="horizontal"&&t==="xAxis"||e==="vertical"&&t==="yAxis"||e==="centric"&&t==="angleAxis"||e==="radial"&&t==="radiusAxis",MK=(e,t,s,a)=>{if(a)return e.map(l=>l.coordinate);var n,i,o=e.map(l=>(l.coordinate===t&&(n=!0),l.coordinate===s&&(i=!0),l.coordinate));return n||o.push(t),i||o.push(s),o},LK=(e,t,s)=>{if(!e)return null;var{duplicateDomain:a,type:n,range:i,scale:o,realScaleType:l,isCategorical:c,categoricalDomain:d,tickCount:h,ticks:f,niceTicks:x,axisType:y}=e;if(!o)return null;var v=l==="scaleBand"&&o.bandwidth?o.bandwidth()/2:2,w=n==="category"&&o.bandwidth?o.bandwidth()/v:0;if(w=y==="angleAxis"&&i&&i.length>=2?Ai(i[0]-i[1])*2*w:w,f||x){var N=(f||x||[]).map((k,C)=>{var E=a?a.indexOf(k):k;return{coordinate:o(E)+w,value:k,offset:w,index:C}});return N.filter(k=>!Yo(k.coordinate))}return c&&d?d.map((k,C)=>({coordinate:o(k)+w,value:k,index:C,offset:w})):o.ticks&&h!=null?o.ticks(h).map((k,C)=>({coordinate:o(k)+w,value:k,offset:w,index:C})):o.domain().map((k,C)=>({coordinate:o(k)+w,value:a?a[k]:k,index:C,offset:w}))},y7=1e-4,R1e=e=>{var t=e.domain();if(!(!t||t.length<=2)){var s=t.length,a=e.range(),n=Math.min(a[0],a[1])-y7,i=Math.max(a[0],a[1])+y7,o=e(t[0]),l=e(t[s-1]);(o<n||o>i||l<n||l>i)&&e.domain([t[0],t[s-1]])}},M1e=(e,t)=>{if(!t||t.length!==2||!vt(t[0])||!vt(t[1]))return e;var s=Math.min(t[0],t[1]),a=Math.max(t[0],t[1]),n=[e[0],e[1]];return(!vt(e[0])||e[0]<s)&&(n[0]=s),(!vt(e[1])||e[1]>a)&&(n[1]=a),n[0]>a&&(n[0]=a),n[1]<s&&(n[1]=s),n},L1e=e=>{var t=e.length;if(!(t<=0))for(var s=0,a=e[0].length;s<a;++s)for(var n=0,i=0,o=0;o<t;++o){var l=Yo(e[o][s][1])?e[o][s][0]:e[o][s][1];l>=0?(e[o][s][0]=n,e[o][s][1]=n+l,n=e[o][s][1]):(e[o][s][0]=i,e[o][s][1]=i+l,i=e[o][s][1])}},F1e=e=>{var t=e.length;if(!(t<=0))for(var s=0,a=e[0].length;s<a;++s)for(var n=0,i=0;i<t;++i){var o=Yo(e[i][s][1])?e[i][s][0]:e[i][s][1];o>=0?(e[i][s][0]=n,e[i][s][1]=n+o,n=e[i][s][1]):(e[i][s][0]=0,e[i][s][1]=0)}},B1e={sign:L1e,expand:ybe,none:zf,silhouette:bbe,wiggle:vbe,positive:F1e},$1e=(e,t,s)=>{var a=B1e[s],n=pbe().keys(t).value((i,o)=>Number(za(i,o,0))).order(F3).offset(a);return n(e)};function FK(e){return e==null?void 0:String(e)}function b7(e){var{axis:t,ticks:s,bandSize:a,entry:n,index:i,dataKey:o}=e;if(t.type==="category"){if(!t.allowDuplicatedCategory&&t.dataKey&&!Qs(n[t.dataKey])){var l=_H(s,"value",n[t.dataKey]);if(l)return l.coordinate+a/2}return s[i]?s[i].coordinate+a/2:null}var c=za(n,Qs(o)?t.dataKey:o);return Qs(c)?null:t.scale(c)}var v7=e=>{var{axis:t,ticks:s,offset:a,bandSize:n,entry:i,index:o}=e;if(t.type==="category")return s[o]?s[o].coordinate+a:null;var l=za(i,t.dataKey,t.scale.domain()[o]);return Qs(l)?null:t.scale(l)-n/2+a},U1e=e=>{var{numericAxis:t}=e,s=t.scale.domain();if(t.type==="number"){var a=Math.min(s[0],s[1]),n=Math.max(s[0],s[1]);return a<=0&&n>=0?0:n<0?n:a}return s[0]},V1e=e=>{var t=e.flat(2).filter(vt);return[Math.min(...t),Math.max(...t)]},W1e=e=>[e[0]===1/0?0:e[0],e[1]===-1/0?0:e[1]],z1e=(e,t,s)=>{if(e!=null)return W1e(Object.keys(e).reduce((a,n)=>{var i=e[n],{stackedData:o}=i,l=o.reduce((c,d)=>{var h=RK(d,t,s),f=V1e(h);return[Math.min(c[0],f[0]),Math.max(c[1],f[1])]},[1/0,-1/0]);return[Math.min(l[0],a[0]),Math.max(l[1],a[1])]},[1/0,-1/0]))},w7=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,j7=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,Yf=(e,t,s)=>{if(e&&e.scale&&e.scale.bandwidth){var a=e.scale.bandwidth();if(!s||a>0)return a}if(e&&t&&t.length>=2){for(var n=v2(t,h=>h.coordinate),i=1/0,o=1,l=n.length;o<l;o++){var c=n[o],d=n[o-1];i=Math.min((c.coordinate||0)-(d.coordinate||0),i)}return i===1/0?0:i}return s?void 0:0};function N7(e){var{tooltipEntrySettings:t,dataKey:s,payload:a,value:n,name:i}=e;return Wm(Wm({},t),{},{dataKey:s,payload:a,value:n,name:i})}function A2(e,t){if(e)return String(e);if(typeof t=="string")return t}var q1e=(e,t)=>{if(t==="horizontal")return e.chartX;if(t==="vertical")return e.chartY},H1e=(e,t)=>t==="centric"?e.angle:e.radius,bd=e=>e.layout.width,vd=e=>e.layout.height,K1e=e=>e.layout.scale,BK=e=>e.layout.margin,P2=Le(e=>e.cartesianAxis.xAxis,e=>Object.values(e)),T2=Le(e=>e.cartesianAxis.yAxis,e=>Object.values(e)),G1e="data-recharts-item-index",Y1e="data-recharts-item-data-key",mb=60;function k7(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),s.push.apply(s,a)}return s}function $v(e){for(var t=1;t<arguments.length;t++){var s=arguments[t]!=null?arguments[t]:{};t%2?k7(Object(s),!0).forEach(function(a){X1e(e,a,s[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):k7(Object(s)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(s,a))})}return e}function X1e(e,t,s){return(t=Q1e(t))in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function Q1e(e){var t=Z1e(e,"string");return typeof t=="symbol"?t:t+""}function Z1e(e,t){if(typeof e!="object"||!e)return e;var s=e[Symbol.toPrimitive];if(s!==void 0){var a=s.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var J1e=e=>e.brush.height;function ewe(e){var t=T2(e);return t.reduce((s,a)=>{if(a.orientation==="left"&&!a.mirror&&!a.hide){var n=typeof a.width=="number"?a.width:mb;return s+n}return s},0)}function twe(e){var t=T2(e);return t.reduce((s,a)=>{if(a.orientation==="right"&&!a.mirror&&!a.hide){var n=typeof a.width=="number"?a.width:mb;return s+n}return s},0)}function rwe(e){var t=P2(e);return t.reduce((s,a)=>a.orientation==="top"&&!a.mirror&&!a.hide?s+a.height:s,0)}function swe(e){var t=P2(e);return t.reduce((s,a)=>a.orientation==="bottom"&&!a.mirror&&!a.hide?s+a.height:s,0)}var mn=Le([bd,vd,BK,J1e,ewe,twe,rwe,swe,aK,_ve],(e,t,s,a,n,i,o,l,c,d)=>{var h={left:(s.left||0)+n,right:(s.right||0)+i},f={top:(s.top||0)+o,bottom:(s.bottom||0)+l},x=$v($v({},f),h),y=x.bottom;x.bottom+=a,x=O1e(x,c,d);var v=e-x.left-x.right,w=t-x.top-x.bottom;return $v($v({brushBottom:y},x),{},{width:Math.max(v,0),height:Math.max(w,0)})}),awe=Le(mn,e=>({x:e.left,y:e.top,width:e.width,height:e.height})),XA=Le(bd,vd,(e,t)=>({x:0,y:0,width:e,height:t})),nwe=p.createContext(null),Gn=()=>p.useContext(nwe)!=null,I2=e=>e.brush,D2=Le([I2,mn,BK],(e,t,s)=>({height:e.height,x:vt(e.x)?e.x:t.left,y:vt(e.y)?e.y:t.top+t.height+t.brushBottom-((s==null?void 0:s.bottom)||0),width:vt(e.width)?e.width:t.width})),$K={},UK={},VK={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(s,a,{signal:n,edges:i}={}){let o,l=null;const c=i!=null&&i.includes("leading"),d=i==null||i.includes("trailing"),h=()=>{l!==null&&(s.apply(o,l),o=void 0,l=null)},f=()=>{d&&h(),w()};let x=null;const y=()=>{x!=null&&clearTimeout(x),x=setTimeout(()=>{x=null,f()},a)},v=()=>{x!==null&&(clearTimeout(x),x=null)},w=()=>{v(),o=void 0,l=null},N=()=>{h()},k=function(...C){if(n!=null&&n.aborted)return;o=this,l=C;const E=x==null;y(),c&&E&&h()};return k.schedule=y,k.cancel=w,k.flush=N,n==null||n.addEventListener("abort",w,{once:!0}),k}e.debounce=t})(VK);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=VK;function s(a,n=0,i={}){typeof i!="object"&&(i={});const{leading:o=!1,trailing:l=!0,maxWait:c}=i,d=Array(2);o&&(d[0]="leading"),l&&(d[1]="trailing");let h,f=null;const x=t.debounce(function(...w){h=a.apply(this,w),f=null},n,{edges:d}),y=function(...w){return c!=null&&(f===null&&(f=Date.now()),Date.now()-f>=c)?(h=a.apply(this,w),f=Date.now(),x.cancel(),x.schedule(),h):(x.apply(this,w),h)},v=()=>(x.flush(),h);return y.cancel=x.cancel,y.flush=v,y}e.debounce=s})(UK);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=UK;function s(a,n=0,i={}){const{leading:o=!0,trailing:l=!0}=i;return t.debounce(a,n,{leading:o,maxWait:n,trailing:l})}e.throttle=s})($K);var iwe=$K.throttle;const owe=Rl(iwe);var wj=function(t,s){for(var a=arguments.length,n=new Array(a>2?a-2:0),i=2;i<a;i++)n[i-2]=arguments[i];if(typeof console<"u"&&console.warn&&(s===void 0&&console.warn("LogUtils requires an error message argument"),!t))if(s===void 0)console.warn("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var o=0;console.warn(s.replace(/%s/g,()=>n[o++]))}},WK=(e,t,s)=>{var{width:a="100%",height:n="100%",aspect:i,maxHeight:o}=s,l=id(a)?e:Number(a),c=id(n)?t:Number(n);return i&&i>0&&(l?c=l/i:c&&(l=c*i),o&&c!=null&&c>o&&(c=o)),{calculatedWidth:l,calculatedHeight:c}},lwe={width:0,height:0,overflow:"visible"},cwe={width:0,overflowX:"visible"},dwe={height:0,overflowY:"visible"},uwe={},hwe=e=>{var{width:t,height:s}=e,a=id(t),n=id(s);return a&&n?lwe:a?cwe:n?dwe:uwe};function mwe(e){var{width:t,height:s,aspect:a}=e,n=t,i=s;return n===void 0&&i===void 0?(n="100%",i="100%"):n===void 0?n=a&&a>0?void 0:"100%":i===void 0&&(i=a&&a>0?void 0:"100%"),{width:n,height:i}}function Ds(e){return Number.isFinite(e)}function xc(e){return typeof e=="number"&&e>0&&Number.isFinite(e)}function X3(){return X3=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)({}).hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e},X3.apply(null,arguments)}function S7(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),s.push.apply(s,a)}return s}function C7(e){for(var t=1;t<arguments.length;t++){var s=arguments[t]!=null?arguments[t]:{};t%2?S7(Object(s),!0).forEach(function(a){fwe(e,a,s[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):S7(Object(s)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(s,a))})}return e}function fwe(e,t,s){return(t=xwe(t))in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function xwe(e){var t=gwe(e,"string");return typeof t=="symbol"?t:t+""}function gwe(e,t){if(typeof e!="object"||!e)return e;var s=e[Symbol.toPrimitive];if(s!==void 0){var a=s.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var zK=p.createContext({width:-1,height:-1});function pwe(e){return xc(e.width)&&xc(e.height)}function qK(e){var{children:t,width:s,height:a}=e,n=p.useMemo(()=>({width:s,height:a}),[s,a]);return pwe(n)?p.createElement(zK.Provider,{value:n},t):null}var QA=()=>p.useContext(zK),ywe=p.forwardRef((e,t)=>{var{aspect:s,initialDimension:a={width:-1,height:-1},width:n,height:i,minWidth:o=0,minHeight:l,maxHeight:c,children:d,debounce:h=0,id:f,className:x,onResize:y,style:v={}}=e,w=p.useRef(null),N=p.useRef();N.current=y,p.useImperativeHandle(t,()=>w.current);var[k,C]=p.useState({containerWidth:a.width,containerHeight:a.height}),E=p.useCallback((M,R)=>{C($=>{var W=Math.round(M),I=Math.round(R);return $.containerWidth===W&&$.containerHeight===I?$:{containerWidth:W,containerHeight:I}})},[]);p.useEffect(()=>{if(w.current==null||typeof ResizeObserver>"u")return cb;var M=I=>{var B,{width:O,height:F}=I[0].contentRect;E(O,F),(B=N.current)===null||B===void 0||B.call(N,O,F)};h>0&&(M=owe(M,h,{trailing:!0,leading:!1}));var R=new ResizeObserver(M),{width:$,height:W}=w.current.getBoundingClientRect();return E($,W),R.observe(w.current),()=>{R.disconnect()}},[E,h]);var{containerWidth:_,containerHeight:T}=k;wj(!s||s>0,"The aspect(%s) must be greater than zero.",s);var{calculatedWidth:A,calculatedHeight:P}=WK(_,T,{width:n,height:i,aspect:s,maxHeight:c});return wj(A!=null&&A>0||P!=null&&P>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,A,P,n,i,o,l,s),p.createElement("div",{id:f?"".concat(f):void 0,className:fe("recharts-responsive-container",x),style:C7(C7({},v),{},{width:n,height:i,minWidth:o,minHeight:l,maxHeight:c}),ref:w},p.createElement("div",{style:hwe({width:n,height:i})},p.createElement(qK,{width:A,height:P},d)))}),jj=p.forwardRef((e,t)=>{var s=QA();if(xc(s.width)&&xc(s.height))return e.children;var{width:a,height:n}=mwe({width:e.width,height:e.height,aspect:e.aspect}),{calculatedWidth:i,calculatedHeight:o}=WK(void 0,void 0,{width:a,height:n,aspect:e.aspect,maxHeight:e.maxHeight});return vt(i)&&vt(o)?p.createElement(qK,{width:i,height:o},e.children):p.createElement(ywe,X3({},e,{width:a,height:n,ref:t}))});function HK(e){if(e)return{x:e.x,y:e.y,upperWidth:"upperWidth"in e?e.upperWidth:e.width,lowerWidth:"lowerWidth"in e?e.lowerWidth:e.width,width:e.width,height:e.height}}var O2=()=>{var e,t=Gn(),s=Dt(awe),a=Dt(D2),n=(e=Dt(I2))===null||e===void 0?void 0:e.padding;return!t||!a||!n?s:{width:a.width-n.left-n.right,height:a.height-n.top-n.bottom,x:n.left,y:n.top}},bwe={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},KK=()=>{var e;return(e=Dt(mn))!==null&&e!==void 0?e:bwe},ZA=()=>Dt(bd),JA=()=>Dt(vd),vwe=()=>Dt(e=>e.layout.margin),Br=e=>e.layout.layoutType,jx=()=>Dt(Br),wwe=()=>{var e=jx();if(e==="horizontal"||e==="vertical")return e},jwe=()=>{var e=jx();return e!==void 0},R2=e=>{var t=ea(),s=Gn(),{width:a,height:n}=e,i=QA(),o=a,l=n;return i&&(o=i.width>0?i.width:a,l=i.height>0?i.height:n),p.useEffect(()=>{!s&&xc(o)&&xc(l)&&t(E1e({width:o,height:l}))},[t,s,o,l]),null},GK=Symbol.for("immer-nothing"),_7=Symbol.for("immer-draftable"),ho=Symbol.for("immer-state");function jl(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var dy=Object.getPrototypeOf;function Xf(e){return!!e&&!!e[ho]}function vh(e){var t;return e?YK(e)||Array.isArray(e)||!!e[_7]||!!((t=e.constructor)!=null&&t[_7])||fb(e)||L2(e):!1}var Nwe=Object.prototype.constructor.toString(),E7=new WeakMap;function YK(e){if(!e||typeof e!="object")return!1;const t=Object.getPrototypeOf(e);if(t===null||t===Object.prototype)return!0;const s=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;if(s===Object)return!0;if(typeof s!="function")return!1;let a=E7.get(s);return a===void 0&&(a=Function.toString.call(s),E7.set(s,a)),a===Nwe}function Nj(e,t,s=!0){M2(e)===0?(s?Reflect.ownKeys(e):Object.keys(e)).forEach(n=>{t(n,e[n],e)}):e.forEach((a,n)=>t(n,a,e))}function M2(e){const t=e[ho];return t?t.type_:Array.isArray(e)?1:fb(e)?2:L2(e)?3:0}function Q3(e,t){return M2(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function XK(e,t,s){const a=M2(e);a===2?e.set(t,s):a===3?e.add(s):e[t]=s}function kwe(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function fb(e){return e instanceof Map}function L2(e){return e instanceof Set}function v0(e){return e.copy_||e.base_}function Z3(e,t){if(fb(e))return new Map(e);if(L2(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const s=YK(e);if(t===!0||t==="class_only"&&!s){const a=Object.getOwnPropertyDescriptors(e);delete a[ho];let n=Reflect.ownKeys(a);for(let i=0;i<n.length;i++){const o=n[i],l=a[o];l.writable===!1&&(l.writable=!0,l.configurable=!0),(l.get||l.set)&&(a[o]={configurable:!0,writable:!0,enumerable:l.enumerable,value:e[o]})}return Object.create(dy(e),a)}else{const a=dy(e);if(a!==null&&s)return{...e};const n=Object.create(a);return Object.assign(n,e)}}function eP(e,t=!1){return F2(e)||Xf(e)||!vh(e)||(M2(e)>1&&Object.defineProperties(e,{set:Uv,add:Uv,clear:Uv,delete:Uv}),Object.freeze(e),t&&Object.values(e).forEach(s=>eP(s,!0))),e}function Swe(){jl(2)}var Uv={value:Swe};function F2(e){return e===null||typeof e!="object"?!0:Object.isFrozen(e)}var Cwe={};function wh(e){const t=Cwe[e];return t||jl(0,e),t}var uy;function QK(){return uy}function _we(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function A7(e,t){t&&(wh("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function J3(e){e_(e),e.drafts_.forEach(Ewe),e.drafts_=null}function e_(e){e===uy&&(uy=e.parent_)}function P7(e){return uy=_we(uy,e)}function Ewe(e){const t=e[ho];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function T7(e,t){t.unfinalizedDrafts_=t.drafts_.length;const s=t.drafts_[0];return e!==void 0&&e!==s?(s[ho].modified_&&(J3(t),jl(4)),vh(e)&&(e=kj(t,e),t.parent_||Sj(t,e)),t.patches_&&wh("Patches").generateReplacementPatches_(s[ho].base_,e,t.patches_,t.inversePatches_)):e=kj(t,s,[]),J3(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==GK?e:void 0}function kj(e,t,s){if(F2(t))return t;const a=e.immer_.shouldUseStrictIteration(),n=t[ho];if(!n)return Nj(t,(i,o)=>I7(e,n,t,i,o,s),a),t;if(n.scope_!==e)return t;if(!n.modified_)return Sj(e,n.base_,!0),n.base_;if(!n.finalized_){n.finalized_=!0,n.scope_.unfinalizedDrafts_--;const i=n.copy_;let o=i,l=!1;n.type_===3&&(o=new Set(i),i.clear(),l=!0),Nj(o,(c,d)=>I7(e,n,i,c,d,s,l),a),Sj(e,i,!1),s&&e.patches_&&wh("Patches").generatePatches_(n,s,e.patches_,e.inversePatches_)}return n.copy_}function I7(e,t,s,a,n,i,o){if(n==null||typeof n!="object"&&!o)return;const l=F2(n);if(!(l&&!o)){if(Xf(n)){const c=i&&t&&t.type_!==3&&!Q3(t.assigned_,a)?i.concat(a):void 0,d=kj(e,n,c);if(XK(s,a,d),Xf(d))e.canAutoFreeze_=!1;else return}else o&&s.add(n);if(vh(n)&&!l){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1||t&&t.base_&&t.base_[a]===n&&l)return;kj(e,n),(!t||!t.scope_.parent_)&&typeof a!="symbol"&&(fb(s)?s.has(a):Object.prototype.propertyIsEnumerable.call(s,a))&&Sj(e,n)}}}function Sj(e,t,s=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&eP(t,s)}function Awe(e,t){const s=Array.isArray(e),a={type_:s?1:0,scope_:t?t.scope_:QK(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let n=a,i=tP;s&&(n=[a],i=hy);const{revoke:o,proxy:l}=Proxy.revocable(n,i);return a.draft_=l,a.revoke_=o,l}var tP={get(e,t){if(t===ho)return e;const s=v0(e);if(!Q3(s,t))return Pwe(e,s,t);const a=s[t];return e.finalized_||!vh(a)?a:a===PS(e.base_,t)?(TS(e),e.copy_[t]=r_(a,e)):a},has(e,t){return t in v0(e)},ownKeys(e){return Reflect.ownKeys(v0(e))},set(e,t,s){const a=ZK(v0(e),t);if(a!=null&&a.set)return a.set.call(e.draft_,s),!0;if(!e.modified_){const n=PS(v0(e),t),i=n==null?void 0:n[ho];if(i&&i.base_===s)return e.copy_[t]=s,e.assigned_[t]=!1,!0;if(kwe(s,n)&&(s!==void 0||Q3(e.base_,t)))return!0;TS(e),t_(e)}return e.copy_[t]===s&&(s!==void 0||t in e.copy_)||Number.isNaN(s)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=s,e.assigned_[t]=!0),!0},deleteProperty(e,t){return PS(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,TS(e),t_(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const s=v0(e),a=Reflect.getOwnPropertyDescriptor(s,t);return a&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:a.enumerable,value:s[t]}},defineProperty(){jl(11)},getPrototypeOf(e){return dy(e.base_)},setPrototypeOf(){jl(12)}},hy={};Nj(tP,(e,t)=>{hy[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});hy.deleteProperty=function(e,t){return hy.set.call(this,e,t,void 0)};hy.set=function(e,t,s){return tP.set.call(this,e[0],t,s,e[0])};function PS(e,t){const s=e[ho];return(s?v0(s):e)[t]}function Pwe(e,t,s){var n;const a=ZK(t,s);return a?"value"in a?a.value:(n=a.get)==null?void 0:n.call(e.draft_):void 0}function ZK(e,t){if(!(t in e))return;let s=dy(e);for(;s;){const a=Object.getOwnPropertyDescriptor(s,t);if(a)return a;s=dy(s)}}function t_(e){e.modified_||(e.modified_=!0,e.parent_&&t_(e.parent_))}function TS(e){e.copy_||(e.copy_=Z3(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var Twe=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!0,this.produce=(t,s,a)=>{if(typeof t=="function"&&typeof s!="function"){const i=s;s=t;const o=this;return function(c=i,...d){return o.produce(c,h=>s.call(this,h,...d))}}typeof s!="function"&&jl(6),a!==void 0&&typeof a!="function"&&jl(7);let n;if(vh(t)){const i=P7(this),o=r_(t,void 0);let l=!0;try{n=s(o),l=!1}finally{l?J3(i):e_(i)}return A7(i,a),T7(n,i)}else if(!t||typeof t!="object"){if(n=s(t),n===void 0&&(n=t),n===GK&&(n=void 0),this.autoFreeze_&&eP(n,!0),a){const i=[],o=[];wh("Patches").generateReplacementPatches_(t,n,i,o),a(i,o)}return n}else jl(1,t)},this.produceWithPatches=(t,s)=>{if(typeof t=="function")return(o,...l)=>this.produceWithPatches(o,c=>t(c,...l));let a,n;return[this.produce(t,s,(o,l)=>{a=o,n=l}),a,n]},typeof(e==null?void 0:e.autoFreeze)=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof(e==null?void 0:e.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy),typeof(e==null?void 0:e.useStrictIteration)=="boolean"&&this.setUseStrictIteration(e.useStrictIteration)}createDraft(e){vh(e)||jl(8),Xf(e)&&(e=Iwe(e));const t=P7(this),s=r_(e,void 0);return s[ho].isManual_=!0,e_(t),s}finishDraft(e,t){const s=e&&e[ho];(!s||!s.isManual_)&&jl(9);const{scope_:a}=s;return A7(a,t),T7(void 0,a)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}setUseStrictIteration(e){this.useStrictIteration_=e}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(e,t){let s;for(s=t.length-1;s>=0;s--){const n=t[s];if(n.path.length===0&&n.op==="replace"){e=n.value;break}}s>-1&&(t=t.slice(s+1));const a=wh("Patches").applyPatches_;return Xf(e)?a(e,t):this.produce(e,n=>a(n,t))}};function r_(e,t){const s=fb(e)?wh("MapSet").proxyMap_(e,t):L2(e)?wh("MapSet").proxySet_(e,t):Awe(e,t);return(t?t.scope_:QK()).drafts_.push(s),s}function Iwe(e){return Xf(e)||jl(10,e),JK(e)}function JK(e){if(!vh(e)||F2(e))return e;const t=e[ho];let s,a=!0;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,s=Z3(e,t.scope_.immer_.useStrictShallowCopy_),a=t.scope_.immer_.shouldUseStrictIteration()}else s=Z3(e,!0);return Nj(s,(n,i)=>{XK(s,n,JK(i))},a),t&&(t.finalized_=!1),s}var Dwe=new Twe;Dwe.produce;var Owe={settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},eG=Wi({name:"legend",initialState:Owe,reducers:{setLegendSize(e,t){e.size.width=t.payload.width,e.size.height=t.payload.height},setLegendSettings(e,t){e.settings.align=t.payload.align,e.settings.layout=t.payload.layout,e.settings.verticalAlign=t.payload.verticalAlign,e.settings.itemSorter=t.payload.itemSorter},addLegendPayload:{reducer(e,t){e.payload.push(t.payload)},prepare:Fs()},replaceLegendPayload:{reducer(e,t){var{prev:s,next:a}=t.payload,n=El(e).payload.indexOf(s);n>-1&&(e.payload[n]=a)},prepare:Fs()},removeLegendPayload:{reducer(e,t){var s=El(e).payload.indexOf(t.payload);s>-1&&e.payload.splice(s,1)},prepare:Fs()}}}),{setLegendSize:D7,setLegendSettings:Rwe,addLegendPayload:Mwe,replaceLegendPayload:Lwe,removeLegendPayload:Fwe}=eG.actions,Bwe=eG.reducer,$we=["contextPayload"];function s_(){return s_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)({}).hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e},s_.apply(null,arguments)}function O7(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),s.push.apply(s,a)}return s}function Qf(e){for(var t=1;t<arguments.length;t++){var s=arguments[t]!=null?arguments[t]:{};t%2?O7(Object(s),!0).forEach(function(a){Uwe(e,a,s[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):O7(Object(s)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(s,a))})}return e}function Uwe(e,t,s){return(t=Vwe(t))in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function Vwe(e){var t=Wwe(e,"string");return typeof t=="symbol"?t:t+""}function Wwe(e,t){if(typeof e!="object"||!e)return e;var s=e[Symbol.toPrimitive];if(s!==void 0){var a=s.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function zwe(e,t){if(e==null)return{};var s,a,n=qwe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)s=i[a],t.indexOf(s)===-1&&{}.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function qwe(e,t){if(e==null)return{};var s={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;s[a]=e[a]}return s}function Hwe(e){return e.value}function Kwe(e){var{contextPayload:t}=e,s=zwe(e,$we),a=KH(t,e.payloadUniqBy,Hwe),n=Qf(Qf({},s),{},{payload:a});return p.isValidElement(e.content)?p.cloneElement(e.content,n):typeof e.content=="function"?p.createElement(e.content,n):p.createElement(Hbe,n)}function Gwe(e,t,s,a,n,i){var{layout:o,align:l,verticalAlign:c}=t,d,h;return(!e||(e.left===void 0||e.left===null)&&(e.right===void 0||e.right===null))&&(l==="center"&&o==="vertical"?d={left:((a||0)-i.width)/2}:d=l==="right"?{right:s&&s.right||0}:{left:s&&s.left||0}),(!e||(e.top===void 0||e.top===null)&&(e.bottom===void 0||e.bottom===null))&&(c==="middle"?h={top:((n||0)-i.height)/2}:h=c==="bottom"?{bottom:s&&s.bottom||0}:{top:s&&s.top||0}),Qf(Qf({},d),h)}function Ywe(e){var t=ea();return p.useEffect(()=>{t(Rwe(e))},[t,e]),null}function Xwe(e){var t=ea();return p.useEffect(()=>(t(D7(e)),()=>{t(D7({width:0,height:0}))}),[t,e]),null}function Qwe(e,t,s,a){return e==="vertical"&&vt(t)?{height:t}:e==="horizontal"?{width:s||a}:null}var Zwe={align:"center",iconSize:14,itemSorter:"value",layout:"horizontal",verticalAlign:"bottom"};function tG(e){var t=Mn(e,Zwe),s=Pve(),a=Uye(),n=vwe(),{width:i,height:o,wrapperStyle:l,portal:c}=t,[d,h]=nK([s]),f=ZA(),x=JA();if(f==null||x==null)return null;var y=f-((n==null?void 0:n.left)||0)-((n==null?void 0:n.right)||0),v=Qwe(t.layout,o,i,y),w=c?l:Qf(Qf({position:"absolute",width:(v==null?void 0:v.width)||i||"auto",height:(v==null?void 0:v.height)||o||"auto"},Gwe(l,t,n,f,x,d)),l),N=c??a;if(N==null||s==null)return null;var k=p.createElement("div",{className:"recharts-legend-wrapper",style:w,ref:h},p.createElement(Ywe,{layout:t.layout,align:t.align,verticalAlign:t.verticalAlign,itemSorter:t.itemSorter}),!c&&p.createElement(Xwe,{width:d.width,height:d.height}),p.createElement(Kwe,s_({},t,v,{margin:n,chartWidth:f,chartHeight:x,contextPayload:s})));return ux.createPortal(k,N)}tG.displayName="Legend";function a_(){return a_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)({}).hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e},a_.apply(null,arguments)}function R7(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),s.push.apply(s,a)}return s}function IS(e){for(var t=1;t<arguments.length;t++){var s=arguments[t]!=null?arguments[t]:{};t%2?R7(Object(s),!0).forEach(function(a){Jwe(e,a,s[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):R7(Object(s)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(s,a))})}return e}function Jwe(e,t,s){return(t=eje(t))in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function eje(e){var t=tje(e,"string");return typeof t=="symbol"?t:t+""}function tje(e,t){if(typeof e!="object"||!e)return e;var s=e[Symbol.toPrimitive];if(s!==void 0){var a=s.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function rje(e){return Array.isArray(e)&&fc(e[0])&&fc(e[1])?e.join(" ~ "):e}var sje=e=>{var{separator:t=" : ",contentStyle:s={},itemStyle:a={},labelStyle:n={},payload:i,formatter:o,itemSorter:l,wrapperClassName:c,labelClassName:d,label:h,labelFormatter:f,accessibilityLayer:x=!1}=e,y=()=>{if(i&&i.length){var T={padding:0,margin:0},A=(l?v2(i,l):i).map((P,M)=>{if(P.type==="none")return null;var R=P.formatter||o||rje,{value:$,name:W}=P,I=$,B=W;if(R){var O=R($,W,P,M,i);if(Array.isArray(O))[I,B]=O;else if(O!=null)I=O;else return null}var F=IS({display:"block",paddingTop:4,paddingBottom:4,color:P.color||"#000"},a);return p.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(M),style:F},fc(B)?p.createElement("span",{className:"recharts-tooltip-item-name"},B):null,fc(B)?p.createElement("span",{className:"recharts-tooltip-item-separator"},t):null,p.createElement("span",{className:"recharts-tooltip-item-value"},I),p.createElement("span",{className:"recharts-tooltip-item-unit"},P.unit||""))});return p.createElement("ul",{className:"recharts-tooltip-item-list",style:T},A)}return null},v=IS({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},s),w=IS({margin:0},n),N=!Qs(h),k=N?h:"",C=fe("recharts-default-tooltip",c),E=fe("recharts-tooltip-label",d);N&&f&&i!==void 0&&i!==null&&(k=f(h,i));var _=x?{role:"status","aria-live":"assertive"}:{};return p.createElement("div",a_({className:C,style:v},_),p.createElement("p",{className:E,style:w},p.isValidElement(k)?k:"".concat(k)),y())},fg="recharts-tooltip-wrapper",aje={visibility:"hidden"};function nje(e){var{coordinate:t,translateX:s,translateY:a}=e;return fe(fg,{["".concat(fg,"-right")]:vt(s)&&t&&vt(t.x)&&s>=t.x,["".concat(fg,"-left")]:vt(s)&&t&&vt(t.x)&&s<t.x,["".concat(fg,"-bottom")]:vt(a)&&t&&vt(t.y)&&a>=t.y,["".concat(fg,"-top")]:vt(a)&&t&&vt(t.y)&&a<t.y})}function M7(e){var{allowEscapeViewBox:t,coordinate:s,key:a,offsetTopLeft:n,position:i,reverseDirection:o,tooltipDimension:l,viewBox:c,viewBoxDimension:d}=e;if(i&&vt(i[a]))return i[a];var h=s[a]-l-(n>0?n:0),f=s[a]+n;if(t[a])return o[a]?h:f;var x=c[a];if(x==null)return 0;if(o[a]){var y=h,v=x;return y<v?Math.max(f,x):Math.max(h,x)}if(d==null)return 0;var w=f+l,N=x+d;return w>N?Math.max(h,x):Math.max(f,x)}function ije(e){var{translateX:t,translateY:s,useTranslate3d:a}=e;return{transform:a?"translate3d(".concat(t,"px, ").concat(s,"px, 0)"):"translate(".concat(t,"px, ").concat(s,"px)")}}function oje(e){var{allowEscapeViewBox:t,coordinate:s,offsetTopLeft:a,position:n,reverseDirection:i,tooltipBox:o,useTranslate3d:l,viewBox:c}=e,d,h,f;return o.height>0&&o.width>0&&s?(h=M7({allowEscapeViewBox:t,coordinate:s,key:"x",offsetTopLeft:a,position:n,reverseDirection:i,tooltipDimension:o.width,viewBox:c,viewBoxDimension:c.width}),f=M7({allowEscapeViewBox:t,coordinate:s,key:"y",offsetTopLeft:a,position:n,reverseDirection:i,tooltipDimension:o.height,viewBox:c,viewBoxDimension:c.height}),d=ije({translateX:h,translateY:f,useTranslate3d:l})):d=aje,{cssProperties:d,cssClasses:nje({translateX:h,translateY:f,coordinate:s})}}function L7(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),s.push.apply(s,a)}return s}function Vv(e){for(var t=1;t<arguments.length;t++){var s=arguments[t]!=null?arguments[t]:{};t%2?L7(Object(s),!0).forEach(function(a){n_(e,a,s[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):L7(Object(s)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(s,a))})}return e}function n_(e,t,s){return(t=lje(t))in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function lje(e){var t=cje(e,"string");return typeof t=="symbol"?t:t+""}function cje(e,t){if(typeof e!="object"||!e)return e;var s=e[Symbol.toPrimitive];if(s!==void 0){var a=s.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class dje extends p.PureComponent{constructor(){super(...arguments),n_(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),n_(this,"handleKeyDown",t=>{if(t.key==="Escape"){var s,a,n,i;this.setState({dismissed:!0,dismissedAtCoordinate:{x:(s=(a=this.props.coordinate)===null||a===void 0?void 0:a.x)!==null&&s!==void 0?s:0,y:(n=(i=this.props.coordinate)===null||i===void 0?void 0:i.y)!==null&&n!==void 0?n:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var t,s;this.state.dismissed&&(((t=this.props.coordinate)===null||t===void 0?void 0:t.x)!==this.state.dismissedAtCoordinate.x||((s=this.props.coordinate)===null||s===void 0?void 0:s.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:t,allowEscapeViewBox:s,animationDuration:a,animationEasing:n,children:i,coordinate:o,hasPayload:l,isAnimationActive:c,offset:d,position:h,reverseDirection:f,useTranslate3d:x,viewBox:y,wrapperStyle:v,lastBoundingBox:w,innerRef:N,hasPortalFromProps:k}=this.props,{cssClasses:C,cssProperties:E}=oje({allowEscapeViewBox:s,coordinate:o,offsetTopLeft:d,position:h,reverseDirection:f,tooltipBox:{height:w.height,width:w.width},useTranslate3d:x,viewBox:y}),_=k?{}:Vv(Vv({transition:c&&t?"transform ".concat(a,"ms ").concat(n):void 0},E),{},{pointerEvents:"none",visibility:!this.state.dismissed&&t&&l?"visible":"hidden",position:"absolute",top:0,left:0}),T=Vv(Vv({},_),{},{visibility:!this.state.dismissed&&t&&l?"visible":"hidden"},v);return p.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:C,style:T,ref:N},i)}}var rG=()=>{var e;return(e=Dt(t=>t.rootProps.accessibilityLayer))!==null&&e!==void 0?e:!0};function i_(){return i_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)({}).hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e},i_.apply(null,arguments)}function F7(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),s.push.apply(s,a)}return s}function B7(e){for(var t=1;t<arguments.length;t++){var s=arguments[t]!=null?arguments[t]:{};t%2?F7(Object(s),!0).forEach(function(a){uje(e,a,s[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):F7(Object(s)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(s,a))})}return e}function uje(e,t,s){return(t=hje(t))in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function hje(e){var t=mje(e,"string");return typeof t=="symbol"?t:t+""}function mje(e,t){if(typeof e!="object"||!e)return e;var s=e[Symbol.toPrimitive];if(s!==void 0){var a=s.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var $7={curveBasisClosed:ibe,curveBasisOpen:obe,curveBasis:nbe,curveBumpX:qye,curveBumpY:Hye,curveLinearClosed:lbe,curveLinear:h2,curveMonotoneX:cbe,curveMonotoneY:dbe,curveNatural:ube,curveStep:hbe,curveStepAfter:fbe,curveStepBefore:mbe},Cj=e=>Ds(e.x)&&Ds(e.y),U7=e=>e.base!=null&&Cj(e.base)&&Cj(e),xg=e=>e.x,gg=e=>e.y,fje=(e,t)=>{if(typeof e=="function")return e;var s="curve".concat(lb(e));return(s==="curveMonotone"||s==="curveBump")&&t?$7["".concat(s).concat(t==="vertical"?"Y":"X")]:$7[s]||h2},xje=e=>{var{type:t="linear",points:s=[],baseLine:a,layout:n,connectNulls:i=!1}=e,o=fje(t,n),l=i?s.filter(Cj):s,c;if(Array.isArray(a)){var d=s.map((y,v)=>B7(B7({},y),{},{base:a[v]}));n==="vertical"?c=Ov().y(gg).x1(xg).x0(y=>y.base.x):c=Ov().x(xg).y1(gg).y0(y=>y.base.y);var h=c.defined(U7).curve(o),f=i?d.filter(U7):d;return h(f)}n==="vertical"&&vt(a)?c=Ov().y(gg).x1(xg).x0(a):vt(a)?c=Ov().x(xg).y1(gg).y0(a):c=mH().x(xg).y(gg);var x=c.defined(Cj).curve(o);return x(l)},fp=e=>{var{className:t,points:s,path:a,pathRef:n}=e;if((!s||!s.length)&&!a)return null;var i=s&&s.length?xje(e):a;return p.createElement("path",i_({},Go(e),AA(e),{className:fe("recharts-curve",t),d:i===null?void 0:i,ref:n}))},gje=["x","y","top","left","width","height","className"];function o_(){return o_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)({}).hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e},o_.apply(null,arguments)}function V7(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),s.push.apply(s,a)}return s}function pje(e){for(var t=1;t<arguments.length;t++){var s=arguments[t]!=null?arguments[t]:{};t%2?V7(Object(s),!0).forEach(function(a){yje(e,a,s[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):V7(Object(s)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(s,a))})}return e}function yje(e,t,s){return(t=bje(t))in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function bje(e){var t=vje(e,"string");return typeof t=="symbol"?t:t+""}function vje(e,t){if(typeof e!="object"||!e)return e;var s=e[Symbol.toPrimitive];if(s!==void 0){var a=s.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function wje(e,t){if(e==null)return{};var s,a,n=jje(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)s=i[a],t.indexOf(s)===-1&&{}.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function jje(e,t){if(e==null)return{};var s={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;s[a]=e[a]}return s}var Nje=(e,t,s,a,n,i)=>"M".concat(e,",").concat(n,"v").concat(a,"M").concat(i,",").concat(t,"h").concat(s),kje=e=>{var{x:t=0,y:s=0,top:a=0,left:n=0,width:i=0,height:o=0,className:l}=e,c=wje(e,gje),d=pje({x:t,y:s,top:a,left:n,width:i,height:o},c);return!vt(t)||!vt(s)||!vt(i)||!vt(o)||!vt(a)||!vt(n)?null:p.createElement("path",o_({},li(d),{className:fe("recharts-cross",l),d:Nje(t,s,i,o,a,n)}))};function Sje(e,t,s,a){var n=a/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-n:s.left+.5,y:e==="horizontal"?s.top+.5:t.y-n,width:e==="horizontal"?a:s.width-1,height:e==="horizontal"?s.height-1:a}}function W7(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),s.push.apply(s,a)}return s}function z7(e){for(var t=1;t<arguments.length;t++){var s=arguments[t]!=null?arguments[t]:{};t%2?W7(Object(s),!0).forEach(function(a){Cje(e,a,s[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):W7(Object(s)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(s,a))})}return e}function Cje(e,t,s){return(t=_je(t))in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function _je(e){var t=Eje(e,"string");return typeof t=="symbol"?t:t+""}function Eje(e,t){if(typeof e!="object"||!e)return e;var s=e[Symbol.toPrimitive];if(s!==void 0){var a=s.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Aje=e=>e.replace(/([A-Z])/g,t=>"-".concat(t.toLowerCase())),sG=(e,t,s)=>e.map(a=>"".concat(Aje(a)," ").concat(t,"ms ").concat(s)).join(","),Pje=(e,t)=>[Object.keys(e),Object.keys(t)].reduce((s,a)=>s.filter(n=>a.includes(n))),my=(e,t)=>Object.keys(t).reduce((s,a)=>z7(z7({},s),{},{[a]:e(a,t[a])}),{});function q7(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),s.push.apply(s,a)}return s}function $a(e){for(var t=1;t<arguments.length;t++){var s=arguments[t]!=null?arguments[t]:{};t%2?q7(Object(s),!0).forEach(function(a){Tje(e,a,s[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):q7(Object(s)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(s,a))})}return e}function Tje(e,t,s){return(t=Ije(t))in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function Ije(e){var t=Dje(e,"string");return typeof t=="symbol"?t:t+""}function Dje(e,t){if(typeof e!="object"||!e)return e;var s=e[Symbol.toPrimitive];if(s!==void 0){var a=s.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var _j=(e,t,s)=>e+(t-e)*s,l_=e=>{var{from:t,to:s}=e;return t!==s},aG=(e,t,s)=>{var a=my((n,i)=>{if(l_(i)){var[o,l]=e(i.from,i.to,i.velocity);return $a($a({},i),{},{from:o,velocity:l})}return i},t);return s<1?my((n,i)=>l_(i)?$a($a({},i),{},{velocity:_j(i.velocity,a[n].velocity,s),from:_j(i.from,a[n].from,s)}):i,t):aG(e,a,s-1)};function Oje(e,t,s,a,n,i){var o,l=a.reduce((x,y)=>$a($a({},x),{},{[y]:{from:e[y],velocity:0,to:t[y]}}),{}),c=()=>my((x,y)=>y.from,l),d=()=>!Object.values(l).filter(l_).length,h=null,f=x=>{o||(o=x);var y=x-o,v=y/s.dt;l=aG(s,l,v),n($a($a($a({},e),t),c())),o=x,d()||(h=i.setTimeout(f))};return()=>(h=i.setTimeout(f),()=>{var x;(x=h)===null||x===void 0||x()})}function Rje(e,t,s,a,n,i,o){var l=null,c=n.reduce((f,x)=>$a($a({},f),{},{[x]:[e[x],t[x]]}),{}),d,h=f=>{d||(d=f);var x=(f-d)/a,y=my((w,N)=>_j(...N,s(x)),c);if(i($a($a($a({},e),t),y)),x<1)l=o.setTimeout(h);else{var v=my((w,N)=>_j(...N,s(1)),c);i($a($a($a({},e),t),v))}};return()=>(l=o.setTimeout(h),()=>{var f;(f=l)===null||f===void 0||f()})}const Mje=(e,t,s,a,n,i)=>{var o=Pje(e,t);return s==null?()=>(n($a($a({},e),t)),()=>{}):s.isStepper===!0?Oje(e,t,s,o,n,i):Rje(e,t,s,a,o,n,i)};var Ej=1e-4,nG=(e,t)=>[0,3*e,3*t-6*e,3*e-3*t+1],iG=(e,t)=>e.map((s,a)=>s*t**a).reduce((s,a)=>s+a),H7=(e,t)=>s=>{var a=nG(e,t);return iG(a,s)},Lje=(e,t)=>s=>{var a=nG(e,t),n=[...a.map((i,o)=>i*o).slice(1),0];return iG(n,s)},Fje=function(){for(var t=arguments.length,s=new Array(t),a=0;a<t;a++)s[a]=arguments[a];if(s.length===1)switch(s[0]){case"linear":return[0,0,1,1];case"ease":return[.25,.1,.25,1];case"ease-in":return[.42,0,1,1];case"ease-out":return[.42,0,.58,1];case"ease-in-out":return[0,0,.58,1];default:{var n,i=s[0].split("(");if(i[0]==="cubic-bezier"&&((n=i[1])===null||n===void 0?void 0:n.split(")")[0].split(",").length)===4){var o=i[1].split(")")[0].split(",").map(l=>parseFloat(l));return[o[0],o[1],o[2],o[3]]}}}return s.length===4?s:[0,0,1,1]},Bje=(e,t,s,a)=>{var n=H7(e,s),i=H7(t,a),o=Lje(e,s),l=d=>d>1?1:d<0?0:d,c=d=>{for(var h=d>1?1:d,f=h,x=0;x<8;++x){var y=n(f)-h,v=o(f);if(Math.abs(y-h)<Ej||v<Ej)return i(f);f=l(f-y/v)}return i(f)};return c.isStepper=!1,c},K7=function(){return Bje(...Fje(...arguments))},$je=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{stiff:s=100,damping:a=8,dt:n=17}=t,i=(o,l,c)=>{var d=-(o-l)*s,h=c*a,f=c+(d-h)*n/1e3,x=c*n/1e3+o;return Math.abs(x-l)<Ej&&Math.abs(f)<Ej?[l,0]:[x,f]};return i.isStepper=!0,i.dt=n,i},Uje=e=>{if(typeof e=="string")switch(e){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return K7(e);case"spring":return $je();default:if(e.split("(")[0]==="cubic-bezier")return K7(e)}return typeof e=="function"?e:null};function Vje(e){var t,s=()=>null,a=!1,n=null,i=o=>{if(!a){if(Array.isArray(o)){if(!o.length)return;var l=o,[c,...d]=l;if(typeof c=="number"){n=e.setTimeout(i.bind(null,d),c);return}i(c),n=e.setTimeout(i.bind(null,d));return}typeof o=="string"&&(t=o,s(t)),typeof o=="object"&&(t=o,s(t)),typeof o=="function"&&o()}};return{stop:()=>{a=!0},start:o=>{a=!1,n&&(n(),n=null),i(o)},subscribe:o=>(s=o,()=>{s=()=>null}),getTimeoutController:()=>e}}class Wje{setTimeout(t){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,a=performance.now(),n=null,i=o=>{o-a>=s?t(o):typeof requestAnimationFrame=="function"&&(n=requestAnimationFrame(i))};return n=requestAnimationFrame(i),()=>{n!=null&&cancelAnimationFrame(n)}}}function zje(){return Vje(new Wje)}var qje=p.createContext(zje);function Hje(e,t){var s=p.useContext(qje);return p.useMemo(()=>t??s(e),[e,t,s])}var Kje=()=>!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout),Nx={devToolsEnabled:!1,isSsr:Kje()},Gje={begin:0,duration:1e3,easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}},G7={t:0},DS={t:1};function B2(e){var t=Mn(e,Gje),{isActive:s,canBegin:a,duration:n,easing:i,begin:o,onAnimationEnd:l,onAnimationStart:c,children:d}=t,h=s==="auto"?!Nx.isSsr:s,f=Hje(t.animationId,t.animationManager),[x,y]=p.useState(h?G7:DS),v=p.useRef(null);return p.useEffect(()=>{h||y(DS)},[h]),p.useEffect(()=>{if(!h||!a)return cb;var w=Mje(G7,DS,Uje(i),n,y,f.getTimeoutController()),N=()=>{v.current=w()};return f.start([c,o,N,n,l]),()=>{f.stop(),v.current&&v.current(),l()}},[h,a,n,i,o,c,l,f]),d(x.t)}function $2(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"animation-",s=p.useRef(iy(t)),a=p.useRef(e);return a.current!==e&&(s.current=iy(t),a.current=e),s.current}var Yje=["radius"],Xje=["radius"];function Y7(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),s.push.apply(s,a)}return s}function X7(e){for(var t=1;t<arguments.length;t++){var s=arguments[t]!=null?arguments[t]:{};t%2?Y7(Object(s),!0).forEach(function(a){Qje(e,a,s[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Y7(Object(s)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(s,a))})}return e}function Qje(e,t,s){return(t=Zje(t))in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function Zje(e){var t=Jje(e,"string");return typeof t=="symbol"?t:t+""}function Jje(e,t){if(typeof e!="object"||!e)return e;var s=e[Symbol.toPrimitive];if(s!==void 0){var a=s.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Aj(){return Aj=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)({}).hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e},Aj.apply(null,arguments)}function Q7(e,t){if(e==null)return{};var s,a,n=eNe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)s=i[a],t.indexOf(s)===-1&&{}.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function eNe(e,t){if(e==null)return{};var s={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;s[a]=e[a]}return s}var Z7=(e,t,s,a,n)=>{var i=Math.min(Math.abs(s)/2,Math.abs(a)/2),o=a>=0?1:-1,l=s>=0?1:-1,c=a>=0&&s>=0||a<0&&s<0?1:0,d;if(i>0&&n instanceof Array){for(var h=[0,0,0,0],f=0,x=4;f<x;f++)h[f]=n[f]>i?i:n[f];d="M".concat(e,",").concat(t+o*h[0]),h[0]>0&&(d+="A ".concat(h[0],",").concat(h[0],",0,0,").concat(c,",").concat(e+l*h[0],",").concat(t)),d+="L ".concat(e+s-l*h[1],",").concat(t),h[1]>0&&(d+="A ".concat(h[1],",").concat(h[1],",0,0,").concat(c,`,
        `).concat(e+s,",").concat(t+o*h[1])),d+="L ".concat(e+s,",").concat(t+a-o*h[2]),h[2]>0&&(d+="A ".concat(h[2],",").concat(h[2],",0,0,").concat(c,`,
        `).concat(e+s-l*h[2],",").concat(t+a)),d+="L ".concat(e+l*h[3],",").concat(t+a),h[3]>0&&(d+="A ".concat(h[3],",").concat(h[3],",0,0,").concat(c,`,
        `).concat(e,",").concat(t+a-o*h[3])),d+="Z"}else if(i>0&&n===+n&&n>0){var y=Math.min(i,n);d="M ".concat(e,",").concat(t+o*y,`
            A `).concat(y,",").concat(y,",0,0,").concat(c,",").concat(e+l*y,",").concat(t,`
            L `).concat(e+s-l*y,",").concat(t,`
            A `).concat(y,",").concat(y,",0,0,").concat(c,",").concat(e+s,",").concat(t+o*y,`
            L `).concat(e+s,",").concat(t+a-o*y,`
            A `).concat(y,",").concat(y,",0,0,").concat(c,",").concat(e+s-l*y,",").concat(t+a,`
            L `).concat(e+l*y,",").concat(t+a,`
            A `).concat(y,",").concat(y,",0,0,").concat(c,",").concat(e,",").concat(t+a-o*y," Z")}else d="M ".concat(e,",").concat(t," h ").concat(s," v ").concat(a," h ").concat(-s," Z");return d},J7={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},oG=e=>{var t=Mn(e,J7),s=p.useRef(null),[a,n]=p.useState(-1);p.useEffect(()=>{if(s.current&&s.current.getTotalLength)try{var H=s.current.getTotalLength();H&&n(H)}catch{}},[]);var{x:i,y:o,width:l,height:c,radius:d,className:h}=t,{animationEasing:f,animationDuration:x,animationBegin:y,isAnimationActive:v,isUpdateAnimationActive:w}=t,N=p.useRef(l),k=p.useRef(c),C=p.useRef(i),E=p.useRef(o),_=p.useMemo(()=>({x:i,y:o,width:l,height:c,radius:d}),[i,o,l,c,d]),T=$2(_,"rectangle-");if(i!==+i||o!==+o||l!==+l||c!==+c||l===0||c===0)return null;var A=fe("recharts-rectangle",h);if(!w){var P=li(t),{radius:M}=P,R=Q7(P,Yje);return p.createElement("path",Aj({},R,{radius:typeof d=="number"?d:void 0,className:A,d:Z7(i,o,l,c,d)}))}var $=N.current,W=k.current,I=C.current,B=E.current,O="0px ".concat(a===-1?1:a,"px"),F="".concat(a,"px 0px"),q=sG(["strokeDasharray"],x,typeof f=="string"?f:J7.animationEasing);return p.createElement(B2,{animationId:T,key:T,canBegin:a>0,duration:x,easing:f,isActive:w,begin:y},H=>{var K=Ks($,l,H),V=Ks(W,c,H),z=Ks(I,i,H),G=Ks(B,o,H);s.current&&(N.current=K,k.current=V,C.current=z,E.current=G);var te;v?H>0?te={transition:q,strokeDasharray:F}:te={strokeDasharray:O}:te={strokeDasharray:F};var he=li(t),{radius:ne}=he,ce=Q7(he,Xje);return p.createElement("path",Aj({},ce,{radius:typeof d=="number"?d:void 0,className:A,d:Z7(z,G,K,V,d),ref:s,style:X7(X7({},te),t.style)}))})};function e8(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),s.push.apply(s,a)}return s}function t8(e){for(var t=1;t<arguments.length;t++){var s=arguments[t]!=null?arguments[t]:{};t%2?e8(Object(s),!0).forEach(function(a){tNe(e,a,s[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):e8(Object(s)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(s,a))})}return e}function tNe(e,t,s){return(t=rNe(t))in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function rNe(e){var t=sNe(e,"string");return typeof t=="symbol"?t:t+""}function sNe(e,t){if(typeof e!="object"||!e)return e;var s=e[Symbol.toPrimitive];if(s!==void 0){var a=s.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Pj=Math.PI/180,aNe=e=>e*180/Math.PI,_n=(e,t,s,a)=>({x:e+Math.cos(-Pj*a)*s,y:t+Math.sin(-Pj*a)*s}),nNe=function(t,s){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(t-(a.left||0)-(a.right||0)),Math.abs(s-(a.top||0)-(a.bottom||0)))/2},iNe=(e,t)=>{var{x:s,y:a}=e,{x:n,y:i}=t;return Math.sqrt((s-n)**2+(a-i)**2)},oNe=(e,t)=>{var{x:s,y:a}=e,{cx:n,cy:i}=t,o=iNe({x:s,y:a},{x:n,y:i});if(o<=0)return{radius:o,angle:0};var l=(s-n)/o,c=Math.acos(l);return a>i&&(c=2*Math.PI-c),{radius:o,angle:aNe(c),angleInRadian:c}},lNe=e=>{var{startAngle:t,endAngle:s}=e,a=Math.floor(t/360),n=Math.floor(s/360),i=Math.min(a,n);return{startAngle:t-i*360,endAngle:s-i*360}},cNe=(e,t)=>{var{startAngle:s,endAngle:a}=t,n=Math.floor(s/360),i=Math.floor(a/360),o=Math.min(n,i);return e+o*360},dNe=(e,t)=>{var{chartX:s,chartY:a}=e,{radius:n,angle:i}=oNe({x:s,y:a},t),{innerRadius:o,outerRadius:l}=t;if(n<o||n>l||n===0)return null;var{startAngle:c,endAngle:d}=lNe(t),h=i,f;if(c<=d){for(;h>d;)h-=360;for(;h<c;)h+=360;f=h>=c&&h<=d}else{for(;h>c;)h-=360;for(;h<d;)h+=360;f=h>=d&&h<=c}return f?t8(t8({},t),{},{radius:n,angle:cNe(h,t)}):null};function lG(e){var{cx:t,cy:s,radius:a,startAngle:n,endAngle:i}=e,o=_n(t,s,a,n),l=_n(t,s,a,i);return{points:[o,l],cx:t,cy:s,radius:a,startAngle:n,endAngle:i}}function c_(){return c_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)({}).hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e},c_.apply(null,arguments)}var uNe=(e,t)=>{var s=Ai(t-e),a=Math.min(Math.abs(t-e),359.999);return s*a},Wv=e=>{var{cx:t,cy:s,radius:a,angle:n,sign:i,isExternal:o,cornerRadius:l,cornerIsExternal:c}=e,d=l*(o?1:-1)+a,h=Math.asin(l/d)/Pj,f=c?n:n+i*h,x=_n(t,s,d,f),y=_n(t,s,a,f),v=c?n-i*h:n,w=_n(t,s,d*Math.cos(h*Pj),v);return{center:x,circleTangency:y,lineTangency:w,theta:h}},cG=e=>{var{cx:t,cy:s,innerRadius:a,outerRadius:n,startAngle:i,endAngle:o}=e,l=uNe(i,o),c=i+l,d=_n(t,s,n,i),h=_n(t,s,n,c),f="M ".concat(d.x,",").concat(d.y,`
    A `).concat(n,",").concat(n,`,0,
    `).concat(+(Math.abs(l)>180),",").concat(+(i>c),`,
    `).concat(h.x,",").concat(h.y,`
  `);if(a>0){var x=_n(t,s,a,i),y=_n(t,s,a,c);f+="L ".concat(y.x,",").concat(y.y,`
            A `).concat(a,",").concat(a,`,0,
            `).concat(+(Math.abs(l)>180),",").concat(+(i<=c),`,
            `).concat(x.x,",").concat(x.y," Z")}else f+="L ".concat(t,",").concat(s," Z");return f},hNe=e=>{var{cx:t,cy:s,innerRadius:a,outerRadius:n,cornerRadius:i,forceCornerRadius:o,cornerIsExternal:l,startAngle:c,endAngle:d}=e,h=Ai(d-c),{circleTangency:f,lineTangency:x,theta:y}=Wv({cx:t,cy:s,radius:n,angle:c,sign:h,cornerRadius:i,cornerIsExternal:l}),{circleTangency:v,lineTangency:w,theta:N}=Wv({cx:t,cy:s,radius:n,angle:d,sign:-h,cornerRadius:i,cornerIsExternal:l}),k=l?Math.abs(c-d):Math.abs(c-d)-y-N;if(k<0)return o?"M ".concat(x.x,",").concat(x.y,`
        a`).concat(i,",").concat(i,",0,0,1,").concat(i*2,`,0
        a`).concat(i,",").concat(i,",0,0,1,").concat(-i*2,`,0
      `):cG({cx:t,cy:s,innerRadius:a,outerRadius:n,startAngle:c,endAngle:d});var C="M ".concat(x.x,",").concat(x.y,`
    A`).concat(i,",").concat(i,",0,0,").concat(+(h<0),",").concat(f.x,",").concat(f.y,`
    A`).concat(n,",").concat(n,",0,").concat(+(k>180),",").concat(+(h<0),",").concat(v.x,",").concat(v.y,`
    A`).concat(i,",").concat(i,",0,0,").concat(+(h<0),",").concat(w.x,",").concat(w.y,`
  `);if(a>0){var{circleTangency:E,lineTangency:_,theta:T}=Wv({cx:t,cy:s,radius:a,angle:c,sign:h,isExternal:!0,cornerRadius:i,cornerIsExternal:l}),{circleTangency:A,lineTangency:P,theta:M}=Wv({cx:t,cy:s,radius:a,angle:d,sign:-h,isExternal:!0,cornerRadius:i,cornerIsExternal:l}),R=l?Math.abs(c-d):Math.abs(c-d)-T-M;if(R<0&&i===0)return"".concat(C,"L").concat(t,",").concat(s,"Z");C+="L".concat(P.x,",").concat(P.y,`
      A`).concat(i,",").concat(i,",0,0,").concat(+(h<0),",").concat(A.x,",").concat(A.y,`
      A`).concat(a,",").concat(a,",0,").concat(+(R>180),",").concat(+(h>0),",").concat(E.x,",").concat(E.y,`
      A`).concat(i,",").concat(i,",0,0,").concat(+(h<0),",").concat(_.x,",").concat(_.y,"Z")}else C+="L".concat(t,",").concat(s,"Z");return C},mNe={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},dG=e=>{var t=Mn(e,mNe),{cx:s,cy:a,innerRadius:n,outerRadius:i,cornerRadius:o,forceCornerRadius:l,cornerIsExternal:c,startAngle:d,endAngle:h,className:f}=t;if(i<n||d===h)return null;var x=fe("recharts-sector",f),y=i-n,v=Il(o,y,0,!0),w;return v>0&&Math.abs(d-h)<360?w=hNe({cx:s,cy:a,innerRadius:n,outerRadius:i,cornerRadius:Math.min(v,y/2),forceCornerRadius:l,cornerIsExternal:c,startAngle:d,endAngle:h}):w=cG({cx:s,cy:a,innerRadius:n,outerRadius:i,startAngle:d,endAngle:h}),p.createElement("path",c_({},li(t),{className:x,d:w}))};function fNe(e,t,s){if(e==="horizontal")return[{x:t.x,y:s.top},{x:t.x,y:s.top+s.height}];if(e==="vertical")return[{x:s.left,y:t.y},{x:s.left+s.width,y:t.y}];if(AH(t)){if(e==="centric"){var{cx:a,cy:n,innerRadius:i,outerRadius:o,angle:l}=t,c=_n(a,n,i,l),d=_n(a,n,o,l);return[{x:c.x,y:c.y},{x:d.x,y:d.y}]}return lG(t)}}var uG={},hG={},mG={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=$A;function s(a){return t.isSymbol(a)?NaN:Number(a)}e.toNumber=s})(mG);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=mG;function s(a){return a?(a=t.toNumber(a),a===1/0||a===-1/0?(a<0?-1:1)*Number.MAX_VALUE:a===a?a:0):a===0?a:0}e.toFinite=s})(hG);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=UA,s=hG;function a(n,i,o){o&&typeof o!="number"&&t.isIterateeCall(n,i,o)&&(i=o=void 0),n=s.toFinite(n),i===void 0?(i=n,n=0):i=s.toFinite(i),o=o===void 0?n<i?1:-1:s.toFinite(o);const l=Math.max(Math.ceil((i-n)/(o||1)),0),c=new Array(l);for(let d=0;d<l;d++)c[d]=n,n+=o;return c}e.range=a})(uG);var xNe=uG.range;const fG=Rl(xNe);function _u(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function gNe(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function rP(e){let t,s,a;e.length!==2?(t=_u,s=(l,c)=>_u(e(l),c),a=(l,c)=>e(l)-c):(t=e===_u||e===gNe?e:pNe,s=e,a=e);function n(l,c,d=0,h=l.length){if(d<h){if(t(c,c)!==0)return h;do{const f=d+h>>>1;s(l[f],c)<0?d=f+1:h=f}while(d<h)}return d}function i(l,c,d=0,h=l.length){if(d<h){if(t(c,c)!==0)return h;do{const f=d+h>>>1;s(l[f],c)<=0?d=f+1:h=f}while(d<h)}return d}function o(l,c,d=0,h=l.length){const f=n(l,c,d,h-1);return f>d&&a(l[f-1],c)>-a(l[f],c)?f-1:f}return{left:n,center:o,right:i}}function pNe(){return 0}function xG(e){return e===null?NaN:+e}function*yNe(e,t){for(let s of e)s!=null&&(s=+s)>=s&&(yield s)}const bNe=rP(_u),xb=bNe.right;rP(xG).center;class r8 extends Map{constructor(t,s=jNe){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:s}}),t!=null)for(const[a,n]of t)this.set(a,n)}get(t){return super.get(s8(this,t))}has(t){return super.has(s8(this,t))}set(t,s){return super.set(vNe(this,t),s)}delete(t){return super.delete(wNe(this,t))}}function s8({_intern:e,_key:t},s){const a=t(s);return e.has(a)?e.get(a):s}function vNe({_intern:e,_key:t},s){const a=t(s);return e.has(a)?e.get(a):(e.set(a,s),s)}function wNe({_intern:e,_key:t},s){const a=t(s);return e.has(a)&&(s=e.get(a),e.delete(a)),s}function jNe(e){return e!==null&&typeof e=="object"?e.valueOf():e}function NNe(e=_u){if(e===_u)return gG;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,s)=>{const a=e(t,s);return a||a===0?a:(e(s,s)===0)-(e(t,t)===0)}}function gG(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const kNe=Math.sqrt(50),SNe=Math.sqrt(10),CNe=Math.sqrt(2);function Tj(e,t,s){const a=(t-e)/Math.max(0,s),n=Math.floor(Math.log10(a)),i=a/Math.pow(10,n),o=i>=kNe?10:i>=SNe?5:i>=CNe?2:1;let l,c,d;return n<0?(d=Math.pow(10,-n)/o,l=Math.round(e*d),c=Math.round(t*d),l/d<e&&++l,c/d>t&&--c,d=-d):(d=Math.pow(10,n)*o,l=Math.round(e/d),c=Math.round(t/d),l*d<e&&++l,c*d>t&&--c),c<l&&.5<=s&&s<2?Tj(e,t,s*2):[l,c,d]}function d_(e,t,s){if(t=+t,e=+e,s=+s,!(s>0))return[];if(e===t)return[e];const a=t<e,[n,i,o]=a?Tj(t,e,s):Tj(e,t,s);if(!(i>=n))return[];const l=i-n+1,c=new Array(l);if(a)if(o<0)for(let d=0;d<l;++d)c[d]=(i-d)/-o;else for(let d=0;d<l;++d)c[d]=(i-d)*o;else if(o<0)for(let d=0;d<l;++d)c[d]=(n+d)/-o;else for(let d=0;d<l;++d)c[d]=(n+d)*o;return c}function u_(e,t,s){return t=+t,e=+e,s=+s,Tj(e,t,s)[2]}function h_(e,t,s){t=+t,e=+e,s=+s;const a=t<e,n=a?u_(t,e,s):u_(e,t,s);return(a?-1:1)*(n<0?1/-n:n)}function a8(e,t){let s;for(const a of e)a!=null&&(s<a||s===void 0&&a>=a)&&(s=a);return s}function n8(e,t){let s;for(const a of e)a!=null&&(s>a||s===void 0&&a>=a)&&(s=a);return s}function pG(e,t,s=0,a=1/0,n){if(t=Math.floor(t),s=Math.floor(Math.max(0,s)),a=Math.floor(Math.min(e.length-1,a)),!(s<=t&&t<=a))return e;for(n=n===void 0?gG:NNe(n);a>s;){if(a-s>600){const c=a-s+1,d=t-s+1,h=Math.log(c),f=.5*Math.exp(2*h/3),x=.5*Math.sqrt(h*f*(c-f)/c)*(d-c/2<0?-1:1),y=Math.max(s,Math.floor(t-d*f/c+x)),v=Math.min(a,Math.floor(t+(c-d)*f/c+x));pG(e,t,y,v,n)}const i=e[t];let o=s,l=a;for(pg(e,s,t),n(e[a],i)>0&&pg(e,s,a);o<l;){for(pg(e,o,l),++o,--l;n(e[o],i)<0;)++o;for(;n(e[l],i)>0;)--l}n(e[s],i)===0?pg(e,s,l):(++l,pg(e,l,a)),l<=t&&(s=l+1),t<=l&&(a=l-1)}return e}function pg(e,t,s){const a=e[t];e[t]=e[s],e[s]=a}function _Ne(e,t,s){if(e=Float64Array.from(yNe(e)),!(!(a=e.length)||isNaN(t=+t))){if(t<=0||a<2)return n8(e);if(t>=1)return a8(e);var a,n=(a-1)*t,i=Math.floor(n),o=a8(pG(e,i).subarray(0,i+1)),l=n8(e.subarray(i+1));return o+(l-o)*(n-i)}}function ENe(e,t,s=xG){if(!(!(a=e.length)||isNaN(t=+t))){if(t<=0||a<2)return+s(e[0],0,e);if(t>=1)return+s(e[a-1],a-1,e);var a,n=(a-1)*t,i=Math.floor(n),o=+s(e[i],i,e),l=+s(e[i+1],i+1,e);return o+(l-o)*(n-i)}}function ANe(e,t,s){e=+e,t=+t,s=(n=arguments.length)<2?(t=e,e=0,1):n<3?1:+s;for(var a=-1,n=Math.max(0,Math.ceil((t-e)/s))|0,i=new Array(n);++a<n;)i[a]=e+a*s;return i}function rl(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function wd(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const m_=Symbol("implicit");function sP(){var e=new r8,t=[],s=[],a=m_;function n(i){let o=e.get(i);if(o===void 0){if(a!==m_)return a;e.set(i,o=t.push(i)-1)}return s[o%s.length]}return n.domain=function(i){if(!arguments.length)return t.slice();t=[],e=new r8;for(const o of i)e.has(o)||e.set(o,t.push(o)-1);return n},n.range=function(i){return arguments.length?(s=Array.from(i),n):s.slice()},n.unknown=function(i){return arguments.length?(a=i,n):a},n.copy=function(){return sP(t,s).unknown(a)},rl.apply(n,arguments),n}function aP(){var e=sP().unknown(void 0),t=e.domain,s=e.range,a=0,n=1,i,o,l=!1,c=0,d=0,h=.5;delete e.unknown;function f(){var x=t().length,y=n<a,v=y?n:a,w=y?a:n;i=(w-v)/Math.max(1,x-c+d*2),l&&(i=Math.floor(i)),v+=(w-v-i*(x-c))*h,o=i*(1-c),l&&(v=Math.round(v),o=Math.round(o));var N=ANe(x).map(function(k){return v+i*k});return s(y?N.reverse():N)}return e.domain=function(x){return arguments.length?(t(x),f()):t()},e.range=function(x){return arguments.length?([a,n]=x,a=+a,n=+n,f()):[a,n]},e.rangeRound=function(x){return[a,n]=x,a=+a,n=+n,l=!0,f()},e.bandwidth=function(){return o},e.step=function(){return i},e.round=function(x){return arguments.length?(l=!!x,f()):l},e.padding=function(x){return arguments.length?(c=Math.min(1,d=+x),f()):c},e.paddingInner=function(x){return arguments.length?(c=Math.min(1,x),f()):c},e.paddingOuter=function(x){return arguments.length?(d=+x,f()):d},e.align=function(x){return arguments.length?(h=Math.max(0,Math.min(1,x)),f()):h},e.copy=function(){return aP(t(),[a,n]).round(l).paddingInner(c).paddingOuter(d).align(h)},rl.apply(f(),arguments)}function yG(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return yG(t())},e}function PNe(){return yG(aP.apply(null,arguments).paddingInner(1))}function nP(e,t,s){e.prototype=t.prototype=s,s.constructor=e}function bG(e,t){var s=Object.create(e.prototype);for(var a in t)s[a]=t[a];return s}function gb(){}var fy=.7,Ij=1/fy,lf="\\s*([+-]?\\d+)\\s*",xy="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",dc="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",TNe=/^#([0-9a-f]{3,8})$/,INe=new RegExp(`^rgb\\(${lf},${lf},${lf}\\)$`),DNe=new RegExp(`^rgb\\(${dc},${dc},${dc}\\)$`),ONe=new RegExp(`^rgba\\(${lf},${lf},${lf},${xy}\\)$`),RNe=new RegExp(`^rgba\\(${dc},${dc},${dc},${xy}\\)$`),MNe=new RegExp(`^hsl\\(${xy},${dc},${dc}\\)$`),LNe=new RegExp(`^hsla\\(${xy},${dc},${dc},${xy}\\)$`),i8={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};nP(gb,gy,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:o8,formatHex:o8,formatHex8:FNe,formatHsl:BNe,formatRgb:l8,toString:l8});function o8(){return this.rgb().formatHex()}function FNe(){return this.rgb().formatHex8()}function BNe(){return vG(this).formatHsl()}function l8(){return this.rgb().formatRgb()}function gy(e){var t,s;return e=(e+"").trim().toLowerCase(),(t=TNe.exec(e))?(s=t[1].length,t=parseInt(t[1],16),s===6?c8(t):s===3?new Pi(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):s===8?zv(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):s===4?zv(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=INe.exec(e))?new Pi(t[1],t[2],t[3],1):(t=DNe.exec(e))?new Pi(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=ONe.exec(e))?zv(t[1],t[2],t[3],t[4]):(t=RNe.exec(e))?zv(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=MNe.exec(e))?h8(t[1],t[2]/100,t[3]/100,1):(t=LNe.exec(e))?h8(t[1],t[2]/100,t[3]/100,t[4]):i8.hasOwnProperty(e)?c8(i8[e]):e==="transparent"?new Pi(NaN,NaN,NaN,0):null}function c8(e){return new Pi(e>>16&255,e>>8&255,e&255,1)}function zv(e,t,s,a){return a<=0&&(e=t=s=NaN),new Pi(e,t,s,a)}function $Ne(e){return e instanceof gb||(e=gy(e)),e?(e=e.rgb(),new Pi(e.r,e.g,e.b,e.opacity)):new Pi}function f_(e,t,s,a){return arguments.length===1?$Ne(e):new Pi(e,t,s,a??1)}function Pi(e,t,s,a){this.r=+e,this.g=+t,this.b=+s,this.opacity=+a}nP(Pi,f_,bG(gb,{brighter(e){return e=e==null?Ij:Math.pow(Ij,e),new Pi(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?fy:Math.pow(fy,e),new Pi(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Pi(nh(this.r),nh(this.g),nh(this.b),Dj(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:d8,formatHex:d8,formatHex8:UNe,formatRgb:u8,toString:u8}));function d8(){return`#${F0(this.r)}${F0(this.g)}${F0(this.b)}`}function UNe(){return`#${F0(this.r)}${F0(this.g)}${F0(this.b)}${F0((isNaN(this.opacity)?1:this.opacity)*255)}`}function u8(){const e=Dj(this.opacity);return`${e===1?"rgb(":"rgba("}${nh(this.r)}, ${nh(this.g)}, ${nh(this.b)}${e===1?")":`, ${e})`}`}function Dj(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function nh(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function F0(e){return e=nh(e),(e<16?"0":"")+e.toString(16)}function h8(e,t,s,a){return a<=0?e=t=s=NaN:s<=0||s>=1?e=t=NaN:t<=0&&(e=NaN),new Nl(e,t,s,a)}function vG(e){if(e instanceof Nl)return new Nl(e.h,e.s,e.l,e.opacity);if(e instanceof gb||(e=gy(e)),!e)return new Nl;if(e instanceof Nl)return e;e=e.rgb();var t=e.r/255,s=e.g/255,a=e.b/255,n=Math.min(t,s,a),i=Math.max(t,s,a),o=NaN,l=i-n,c=(i+n)/2;return l?(t===i?o=(s-a)/l+(s<a)*6:s===i?o=(a-t)/l+2:o=(t-s)/l+4,l/=c<.5?i+n:2-i-n,o*=60):l=c>0&&c<1?0:o,new Nl(o,l,c,e.opacity)}function VNe(e,t,s,a){return arguments.length===1?vG(e):new Nl(e,t,s,a??1)}function Nl(e,t,s,a){this.h=+e,this.s=+t,this.l=+s,this.opacity=+a}nP(Nl,VNe,bG(gb,{brighter(e){return e=e==null?Ij:Math.pow(Ij,e),new Nl(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?fy:Math.pow(fy,e),new Nl(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,s=this.l,a=s+(s<.5?s:1-s)*t,n=2*s-a;return new Pi(OS(e>=240?e-240:e+120,n,a),OS(e,n,a),OS(e<120?e+240:e-120,n,a),this.opacity)},clamp(){return new Nl(m8(this.h),qv(this.s),qv(this.l),Dj(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Dj(this.opacity);return`${e===1?"hsl(":"hsla("}${m8(this.h)}, ${qv(this.s)*100}%, ${qv(this.l)*100}%${e===1?")":`, ${e})`}`}}));function m8(e){return e=(e||0)%360,e<0?e+360:e}function qv(e){return Math.max(0,Math.min(1,e||0))}function OS(e,t,s){return(e<60?t+(s-t)*e/60:e<180?s:e<240?t+(s-t)*(240-e)/60:t)*255}const iP=e=>()=>e;function WNe(e,t){return function(s){return e+s*t}}function zNe(e,t,s){return e=Math.pow(e,s),t=Math.pow(t,s)-e,s=1/s,function(a){return Math.pow(e+a*t,s)}}function qNe(e){return(e=+e)==1?wG:function(t,s){return s-t?zNe(t,s,e):iP(isNaN(t)?s:t)}}function wG(e,t){var s=t-e;return s?WNe(e,s):iP(isNaN(e)?t:e)}const f8=function e(t){var s=qNe(t);function a(n,i){var o=s((n=f_(n)).r,(i=f_(i)).r),l=s(n.g,i.g),c=s(n.b,i.b),d=wG(n.opacity,i.opacity);return function(h){return n.r=o(h),n.g=l(h),n.b=c(h),n.opacity=d(h),n+""}}return a.gamma=e,a}(1);function HNe(e,t){t||(t=[]);var s=e?Math.min(t.length,e.length):0,a=t.slice(),n;return function(i){for(n=0;n<s;++n)a[n]=e[n]*(1-i)+t[n]*i;return a}}function KNe(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function GNe(e,t){var s=t?t.length:0,a=e?Math.min(s,e.length):0,n=new Array(a),i=new Array(s),o;for(o=0;o<a;++o)n[o]=kx(e[o],t[o]);for(;o<s;++o)i[o]=t[o];return function(l){for(o=0;o<a;++o)i[o]=n[o](l);return i}}function YNe(e,t){var s=new Date;return e=+e,t=+t,function(a){return s.setTime(e*(1-a)+t*a),s}}function Oj(e,t){return e=+e,t=+t,function(s){return e*(1-s)+t*s}}function XNe(e,t){var s={},a={},n;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(n in t)n in e?s[n]=kx(e[n],t[n]):a[n]=t[n];return function(i){for(n in s)a[n]=s[n](i);return a}}var x_=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,RS=new RegExp(x_.source,"g");function QNe(e){return function(){return e}}function ZNe(e){return function(t){return e(t)+""}}function JNe(e,t){var s=x_.lastIndex=RS.lastIndex=0,a,n,i,o=-1,l=[],c=[];for(e=e+"",t=t+"";(a=x_.exec(e))&&(n=RS.exec(t));)(i=n.index)>s&&(i=t.slice(s,i),l[o]?l[o]+=i:l[++o]=i),(a=a[0])===(n=n[0])?l[o]?l[o]+=n:l[++o]=n:(l[++o]=null,c.push({i:o,x:Oj(a,n)})),s=RS.lastIndex;return s<t.length&&(i=t.slice(s),l[o]?l[o]+=i:l[++o]=i),l.length<2?c[0]?ZNe(c[0].x):QNe(t):(t=c.length,function(d){for(var h=0,f;h<t;++h)l[(f=c[h]).i]=f.x(d);return l.join("")})}function kx(e,t){var s=typeof t,a;return t==null||s==="boolean"?iP(t):(s==="number"?Oj:s==="string"?(a=gy(t))?(t=a,f8):JNe:t instanceof gy?f8:t instanceof Date?YNe:KNe(t)?HNe:Array.isArray(t)?GNe:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?XNe:Oj)(e,t)}function oP(e,t){return e=+e,t=+t,function(s){return Math.round(e*(1-s)+t*s)}}function e2e(e,t){t===void 0&&(t=e,e=kx);for(var s=0,a=t.length-1,n=t[0],i=new Array(a<0?0:a);s<a;)i[s]=e(n,n=t[++s]);return function(o){var l=Math.max(0,Math.min(a-1,Math.floor(o*=a)));return i[l](o-l)}}function t2e(e){return function(){return e}}function Rj(e){return+e}var x8=[0,1];function ni(e){return e}function g_(e,t){return(t-=e=+e)?function(s){return(s-e)/t}:t2e(isNaN(t)?NaN:.5)}function r2e(e,t){var s;return e>t&&(s=e,e=t,t=s),function(a){return Math.max(e,Math.min(t,a))}}function s2e(e,t,s){var a=e[0],n=e[1],i=t[0],o=t[1];return n<a?(a=g_(n,a),i=s(o,i)):(a=g_(a,n),i=s(i,o)),function(l){return i(a(l))}}function a2e(e,t,s){var a=Math.min(e.length,t.length)-1,n=new Array(a),i=new Array(a),o=-1;for(e[a]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<a;)n[o]=g_(e[o],e[o+1]),i[o]=s(t[o],t[o+1]);return function(l){var c=xb(e,l,1,a)-1;return i[c](n[c](l))}}function pb(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function U2(){var e=x8,t=x8,s=kx,a,n,i,o=ni,l,c,d;function h(){var x=Math.min(e.length,t.length);return o!==ni&&(o=r2e(e[0],e[x-1])),l=x>2?a2e:s2e,c=d=null,f}function f(x){return x==null||isNaN(x=+x)?i:(c||(c=l(e.map(a),t,s)))(a(o(x)))}return f.invert=function(x){return o(n((d||(d=l(t,e.map(a),Oj)))(x)))},f.domain=function(x){return arguments.length?(e=Array.from(x,Rj),h()):e.slice()},f.range=function(x){return arguments.length?(t=Array.from(x),h()):t.slice()},f.rangeRound=function(x){return t=Array.from(x),s=oP,h()},f.clamp=function(x){return arguments.length?(o=x?!0:ni,h()):o!==ni},f.interpolate=function(x){return arguments.length?(s=x,h()):s},f.unknown=function(x){return arguments.length?(i=x,f):i},function(x,y){return a=x,n=y,h()}}function lP(){return U2()(ni,ni)}function n2e(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function Mj(e,t){if((s=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var s,a=e.slice(0,s);return[a.length>1?a[0]+a.slice(2):a,+e.slice(s+1)]}function Zf(e){return e=Mj(Math.abs(e)),e?e[1]:NaN}function i2e(e,t){return function(s,a){for(var n=s.length,i=[],o=0,l=e[0],c=0;n>0&&l>0&&(c+l+1>a&&(l=Math.max(1,a-c)),i.push(s.substring(n-=l,n+l)),!((c+=l+1)>a));)l=e[o=(o+1)%e.length];return i.reverse().join(t)}}function o2e(e){return function(t){return t.replace(/[0-9]/g,function(s){return e[+s]})}}var l2e=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function py(e){if(!(t=l2e.exec(e)))throw new Error("invalid format: "+e);var t;return new cP({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}py.prototype=cP.prototype;function cP(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}cP.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function c2e(e){e:for(var t=e.length,s=1,a=-1,n;s<t;++s)switch(e[s]){case".":a=n=s;break;case"0":a===0&&(a=s),n=s;break;default:if(!+e[s])break e;a>0&&(a=0);break}return a>0?e.slice(0,a)+e.slice(n+1):e}var jG;function d2e(e,t){var s=Mj(e,t);if(!s)return e+"";var a=s[0],n=s[1],i=n-(jG=Math.max(-8,Math.min(8,Math.floor(n/3)))*3)+1,o=a.length;return i===o?a:i>o?a+new Array(i-o+1).join("0"):i>0?a.slice(0,i)+"."+a.slice(i):"0."+new Array(1-i).join("0")+Mj(e,Math.max(0,t+i-1))[0]}function g8(e,t){var s=Mj(e,t);if(!s)return e+"";var a=s[0],n=s[1];return n<0?"0."+new Array(-n).join("0")+a:a.length>n+1?a.slice(0,n+1)+"."+a.slice(n+1):a+new Array(n-a.length+2).join("0")}const p8={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:n2e,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>g8(e*100,t),r:g8,s:d2e,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function y8(e){return e}var b8=Array.prototype.map,v8=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function u2e(e){var t=e.grouping===void 0||e.thousands===void 0?y8:i2e(b8.call(e.grouping,Number),e.thousands+""),s=e.currency===void 0?"":e.currency[0]+"",a=e.currency===void 0?"":e.currency[1]+"",n=e.decimal===void 0?".":e.decimal+"",i=e.numerals===void 0?y8:o2e(b8.call(e.numerals,String)),o=e.percent===void 0?"%":e.percent+"",l=e.minus===void 0?"":e.minus+"",c=e.nan===void 0?"NaN":e.nan+"";function d(f){f=py(f);var x=f.fill,y=f.align,v=f.sign,w=f.symbol,N=f.zero,k=f.width,C=f.comma,E=f.precision,_=f.trim,T=f.type;T==="n"?(C=!0,T="g"):p8[T]||(E===void 0&&(E=12),_=!0,T="g"),(N||x==="0"&&y==="=")&&(N=!0,x="0",y="=");var A=w==="$"?s:w==="#"&&/[boxX]/.test(T)?"0"+T.toLowerCase():"",P=w==="$"?a:/[%p]/.test(T)?o:"",M=p8[T],R=/[defgprs%]/.test(T);E=E===void 0?6:/[gprs]/.test(T)?Math.max(1,Math.min(21,E)):Math.max(0,Math.min(20,E));function $(W){var I=A,B=P,O,F,q;if(T==="c")B=M(W)+B,W="";else{W=+W;var H=W<0||1/W<0;if(W=isNaN(W)?c:M(Math.abs(W),E),_&&(W=c2e(W)),H&&+W==0&&v!=="+"&&(H=!1),I=(H?v==="("?v:l:v==="-"||v==="("?"":v)+I,B=(T==="s"?v8[8+jG/3]:"")+B+(H&&v==="("?")":""),R){for(O=-1,F=W.length;++O<F;)if(q=W.charCodeAt(O),48>q||q>57){B=(q===46?n+W.slice(O+1):W.slice(O))+B,W=W.slice(0,O);break}}}C&&!N&&(W=t(W,1/0));var K=I.length+W.length+B.length,V=K<k?new Array(k-K+1).join(x):"";switch(C&&N&&(W=t(V+W,V.length?k-B.length:1/0),V=""),y){case"<":W=I+W+B+V;break;case"=":W=I+V+W+B;break;case"^":W=V.slice(0,K=V.length>>1)+I+W+B+V.slice(K);break;default:W=V+I+W+B;break}return i(W)}return $.toString=function(){return f+""},$}function h(f,x){var y=d((f=py(f),f.type="f",f)),v=Math.max(-8,Math.min(8,Math.floor(Zf(x)/3)))*3,w=Math.pow(10,-v),N=v8[8+v/3];return function(k){return y(w*k)+N}}return{format:d,formatPrefix:h}}var Hv,dP,NG;h2e({thousands:",",grouping:[3],currency:["$",""]});function h2e(e){return Hv=u2e(e),dP=Hv.format,NG=Hv.formatPrefix,Hv}function m2e(e){return Math.max(0,-Zf(Math.abs(e)))}function f2e(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Zf(t)/3)))*3-Zf(Math.abs(e)))}function x2e(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,Zf(t)-Zf(e))+1}function kG(e,t,s,a){var n=h_(e,t,s),i;switch(a=py(a??",f"),a.type){case"s":{var o=Math.max(Math.abs(e),Math.abs(t));return a.precision==null&&!isNaN(i=f2e(n,o))&&(a.precision=i),NG(a,o)}case"":case"e":case"g":case"p":case"r":{a.precision==null&&!isNaN(i=x2e(n,Math.max(Math.abs(e),Math.abs(t))))&&(a.precision=i-(a.type==="e"));break}case"f":case"%":{a.precision==null&&!isNaN(i=m2e(n))&&(a.precision=i-(a.type==="%")*2);break}}return dP(a)}function Xu(e){var t=e.domain;return e.ticks=function(s){var a=t();return d_(a[0],a[a.length-1],s??10)},e.tickFormat=function(s,a){var n=t();return kG(n[0],n[n.length-1],s??10,a)},e.nice=function(s){s==null&&(s=10);var a=t(),n=0,i=a.length-1,o=a[n],l=a[i],c,d,h=10;for(l<o&&(d=o,o=l,l=d,d=n,n=i,i=d);h-- >0;){if(d=u_(o,l,s),d===c)return a[n]=o,a[i]=l,t(a);if(d>0)o=Math.floor(o/d)*d,l=Math.ceil(l/d)*d;else if(d<0)o=Math.ceil(o*d)/d,l=Math.floor(l*d)/d;else break;c=d}return e},e}function SG(){var e=lP();return e.copy=function(){return pb(e,SG())},rl.apply(e,arguments),Xu(e)}function CG(e){var t;function s(a){return a==null||isNaN(a=+a)?t:a}return s.invert=s,s.domain=s.range=function(a){return arguments.length?(e=Array.from(a,Rj),s):e.slice()},s.unknown=function(a){return arguments.length?(t=a,s):t},s.copy=function(){return CG(e).unknown(t)},e=arguments.length?Array.from(e,Rj):[0,1],Xu(s)}function _G(e,t){e=e.slice();var s=0,a=e.length-1,n=e[s],i=e[a],o;return i<n&&(o=s,s=a,a=o,o=n,n=i,i=o),e[s]=t.floor(n),e[a]=t.ceil(i),e}function w8(e){return Math.log(e)}function j8(e){return Math.exp(e)}function g2e(e){return-Math.log(-e)}function p2e(e){return-Math.exp(-e)}function y2e(e){return isFinite(e)?+("1e"+e):e<0?0:e}function b2e(e){return e===10?y2e:e===Math.E?Math.exp:t=>Math.pow(e,t)}function v2e(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function N8(e){return(t,s)=>-e(-t,s)}function uP(e){const t=e(w8,j8),s=t.domain;let a=10,n,i;function o(){return n=v2e(a),i=b2e(a),s()[0]<0?(n=N8(n),i=N8(i),e(g2e,p2e)):e(w8,j8),t}return t.base=function(l){return arguments.length?(a=+l,o()):a},t.domain=function(l){return arguments.length?(s(l),o()):s()},t.ticks=l=>{const c=s();let d=c[0],h=c[c.length-1];const f=h<d;f&&([d,h]=[h,d]);let x=n(d),y=n(h),v,w;const N=l==null?10:+l;let k=[];if(!(a%1)&&y-x<N){if(x=Math.floor(x),y=Math.ceil(y),d>0){for(;x<=y;++x)for(v=1;v<a;++v)if(w=x<0?v/i(-x):v*i(x),!(w<d)){if(w>h)break;k.push(w)}}else for(;x<=y;++x)for(v=a-1;v>=1;--v)if(w=x>0?v/i(-x):v*i(x),!(w<d)){if(w>h)break;k.push(w)}k.length*2<N&&(k=d_(d,h,N))}else k=d_(x,y,Math.min(y-x,N)).map(i);return f?k.reverse():k},t.tickFormat=(l,c)=>{if(l==null&&(l=10),c==null&&(c=a===10?"s":","),typeof c!="function"&&(!(a%1)&&(c=py(c)).precision==null&&(c.trim=!0),c=dP(c)),l===1/0)return c;const d=Math.max(1,a*l/t.ticks().length);return h=>{let f=h/i(Math.round(n(h)));return f*a<a-.5&&(f*=a),f<=d?c(h):""}},t.nice=()=>s(_G(s(),{floor:l=>i(Math.floor(n(l))),ceil:l=>i(Math.ceil(n(l)))})),t}function EG(){const e=uP(U2()).domain([1,10]);return e.copy=()=>pb(e,EG()).base(e.base()),rl.apply(e,arguments),e}function k8(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function S8(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function hP(e){var t=1,s=e(k8(t),S8(t));return s.constant=function(a){return arguments.length?e(k8(t=+a),S8(t)):t},Xu(s)}function AG(){var e=hP(U2());return e.copy=function(){return pb(e,AG()).constant(e.constant())},rl.apply(e,arguments)}function C8(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function w2e(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function j2e(e){return e<0?-e*e:e*e}function mP(e){var t=e(ni,ni),s=1;function a(){return s===1?e(ni,ni):s===.5?e(w2e,j2e):e(C8(s),C8(1/s))}return t.exponent=function(n){return arguments.length?(s=+n,a()):s},Xu(t)}function fP(){var e=mP(U2());return e.copy=function(){return pb(e,fP()).exponent(e.exponent())},rl.apply(e,arguments),e}function N2e(){return fP.apply(null,arguments).exponent(.5)}function _8(e){return Math.sign(e)*e*e}function k2e(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function PG(){var e=lP(),t=[0,1],s=!1,a;function n(i){var o=k2e(e(i));return isNaN(o)?a:s?Math.round(o):o}return n.invert=function(i){return e.invert(_8(i))},n.domain=function(i){return arguments.length?(e.domain(i),n):e.domain()},n.range=function(i){return arguments.length?(e.range((t=Array.from(i,Rj)).map(_8)),n):t.slice()},n.rangeRound=function(i){return n.range(i).round(!0)},n.round=function(i){return arguments.length?(s=!!i,n):s},n.clamp=function(i){return arguments.length?(e.clamp(i),n):e.clamp()},n.unknown=function(i){return arguments.length?(a=i,n):a},n.copy=function(){return PG(e.domain(),t).round(s).clamp(e.clamp()).unknown(a)},rl.apply(n,arguments),Xu(n)}function TG(){var e=[],t=[],s=[],a;function n(){var o=0,l=Math.max(1,t.length);for(s=new Array(l-1);++o<l;)s[o-1]=ENe(e,o/l);return i}function i(o){return o==null||isNaN(o=+o)?a:t[xb(s,o)]}return i.invertExtent=function(o){var l=t.indexOf(o);return l<0?[NaN,NaN]:[l>0?s[l-1]:e[0],l<s.length?s[l]:e[e.length-1]]},i.domain=function(o){if(!arguments.length)return e.slice();e=[];for(let l of o)l!=null&&!isNaN(l=+l)&&e.push(l);return e.sort(_u),n()},i.range=function(o){return arguments.length?(t=Array.from(o),n()):t.slice()},i.unknown=function(o){return arguments.length?(a=o,i):a},i.quantiles=function(){return s.slice()},i.copy=function(){return TG().domain(e).range(t).unknown(a)},rl.apply(i,arguments)}function IG(){var e=0,t=1,s=1,a=[.5],n=[0,1],i;function o(c){return c!=null&&c<=c?n[xb(a,c,0,s)]:i}function l(){var c=-1;for(a=new Array(s);++c<s;)a[c]=((c+1)*t-(c-s)*e)/(s+1);return o}return o.domain=function(c){return arguments.length?([e,t]=c,e=+e,t=+t,l()):[e,t]},o.range=function(c){return arguments.length?(s=(n=Array.from(c)).length-1,l()):n.slice()},o.invertExtent=function(c){var d=n.indexOf(c);return d<0?[NaN,NaN]:d<1?[e,a[0]]:d>=s?[a[s-1],t]:[a[d-1],a[d]]},o.unknown=function(c){return arguments.length&&(i=c),o},o.thresholds=function(){return a.slice()},o.copy=function(){return IG().domain([e,t]).range(n).unknown(i)},rl.apply(Xu(o),arguments)}function DG(){var e=[.5],t=[0,1],s,a=1;function n(i){return i!=null&&i<=i?t[xb(e,i,0,a)]:s}return n.domain=function(i){return arguments.length?(e=Array.from(i),a=Math.min(e.length,t.length-1),n):e.slice()},n.range=function(i){return arguments.length?(t=Array.from(i),a=Math.min(e.length,t.length-1),n):t.slice()},n.invertExtent=function(i){var o=t.indexOf(i);return[e[o-1],e[o]]},n.unknown=function(i){return arguments.length?(s=i,n):s},n.copy=function(){return DG().domain(e).range(t).unknown(s)},rl.apply(n,arguments)}const MS=new Date,LS=new Date;function qa(e,t,s,a){function n(i){return e(i=arguments.length===0?new Date:new Date(+i)),i}return n.floor=i=>(e(i=new Date(+i)),i),n.ceil=i=>(e(i=new Date(i-1)),t(i,1),e(i),i),n.round=i=>{const o=n(i),l=n.ceil(i);return i-o<l-i?o:l},n.offset=(i,o)=>(t(i=new Date(+i),o==null?1:Math.floor(o)),i),n.range=(i,o,l)=>{const c=[];if(i=n.ceil(i),l=l==null?1:Math.floor(l),!(i<o)||!(l>0))return c;let d;do c.push(d=new Date(+i)),t(i,l),e(i);while(d<i&&i<o);return c},n.filter=i=>qa(o=>{if(o>=o)for(;e(o),!i(o);)o.setTime(o-1)},(o,l)=>{if(o>=o)if(l<0)for(;++l<=0;)for(;t(o,-1),!i(o););else for(;--l>=0;)for(;t(o,1),!i(o););}),s&&(n.count=(i,o)=>(MS.setTime(+i),LS.setTime(+o),e(MS),e(LS),Math.floor(s(MS,LS))),n.every=i=>(i=Math.floor(i),!isFinite(i)||!(i>0)?null:i>1?n.filter(a?o=>a(o)%i===0:o=>n.count(0,o)%i===0):n)),n}const Lj=qa(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);Lj.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?qa(t=>{t.setTime(Math.floor(t/e)*e)},(t,s)=>{t.setTime(+t+s*e)},(t,s)=>(s-t)/e):Lj);Lj.range;const zc=1e3,Bo=zc*60,qc=Bo*60,ld=qc*24,xP=ld*7,E8=ld*30,FS=ld*365,B0=qa(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*zc)},(e,t)=>(t-e)/zc,e=>e.getUTCSeconds());B0.range;const gP=qa(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*zc)},(e,t)=>{e.setTime(+e+t*Bo)},(e,t)=>(t-e)/Bo,e=>e.getMinutes());gP.range;const pP=qa(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*Bo)},(e,t)=>(t-e)/Bo,e=>e.getUTCMinutes());pP.range;const yP=qa(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*zc-e.getMinutes()*Bo)},(e,t)=>{e.setTime(+e+t*qc)},(e,t)=>(t-e)/qc,e=>e.getHours());yP.range;const bP=qa(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*qc)},(e,t)=>(t-e)/qc,e=>e.getUTCHours());bP.range;const yb=qa(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Bo)/ld,e=>e.getDate()-1);yb.range;const V2=qa(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/ld,e=>e.getUTCDate()-1);V2.range;const OG=qa(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/ld,e=>Math.floor(e/ld));OG.range;function Mh(e){return qa(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,s)=>{t.setDate(t.getDate()+s*7)},(t,s)=>(s-t-(s.getTimezoneOffset()-t.getTimezoneOffset())*Bo)/xP)}const W2=Mh(0),Fj=Mh(1),S2e=Mh(2),C2e=Mh(3),Jf=Mh(4),_2e=Mh(5),E2e=Mh(6);W2.range;Fj.range;S2e.range;C2e.range;Jf.range;_2e.range;E2e.range;function Lh(e){return qa(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,s)=>{t.setUTCDate(t.getUTCDate()+s*7)},(t,s)=>(s-t)/xP)}const z2=Lh(0),Bj=Lh(1),A2e=Lh(2),P2e=Lh(3),ex=Lh(4),T2e=Lh(5),I2e=Lh(6);z2.range;Bj.range;A2e.range;P2e.range;ex.range;T2e.range;I2e.range;const vP=qa(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());vP.range;const wP=qa(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());wP.range;const cd=qa(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());cd.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:qa(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,s)=>{t.setFullYear(t.getFullYear()+s*e)});cd.range;const dd=qa(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());dd.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:qa(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,s)=>{t.setUTCFullYear(t.getUTCFullYear()+s*e)});dd.range;function RG(e,t,s,a,n,i){const o=[[B0,1,zc],[B0,5,5*zc],[B0,15,15*zc],[B0,30,30*zc],[i,1,Bo],[i,5,5*Bo],[i,15,15*Bo],[i,30,30*Bo],[n,1,qc],[n,3,3*qc],[n,6,6*qc],[n,12,12*qc],[a,1,ld],[a,2,2*ld],[s,1,xP],[t,1,E8],[t,3,3*E8],[e,1,FS]];function l(d,h,f){const x=h<d;x&&([d,h]=[h,d]);const y=f&&typeof f.range=="function"?f:c(d,h,f),v=y?y.range(d,+h+1):[];return x?v.reverse():v}function c(d,h,f){const x=Math.abs(h-d)/f,y=rP(([,,N])=>N).right(o,x);if(y===o.length)return e.every(h_(d/FS,h/FS,f));if(y===0)return Lj.every(Math.max(h_(d,h,f),1));const[v,w]=o[x/o[y-1][2]<o[y][2]/x?y-1:y];return v.every(w)}return[l,c]}const[D2e,O2e]=RG(dd,wP,z2,OG,bP,pP),[R2e,M2e]=RG(cd,vP,W2,yb,yP,gP);function BS(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function $S(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function yg(e,t,s){return{y:e,m:t,d:s,H:0,M:0,S:0,L:0}}function L2e(e){var t=e.dateTime,s=e.date,a=e.time,n=e.periods,i=e.days,o=e.shortDays,l=e.months,c=e.shortMonths,d=bg(n),h=vg(n),f=bg(i),x=vg(i),y=bg(o),v=vg(o),w=bg(l),N=vg(l),k=bg(c),C=vg(c),E={a:H,A:K,b:V,B:z,c:null,d:O8,e:O8,f:ike,g:gke,G:yke,H:ske,I:ake,j:nke,L:MG,m:oke,M:lke,p:G,q:te,Q:L8,s:F8,S:cke,u:dke,U:uke,V:hke,w:mke,W:fke,x:null,X:null,y:xke,Y:pke,Z:bke,"%":M8},_={a:he,A:ne,b:ce,B:xe,c:null,d:R8,e:R8,f:Nke,g:Dke,G:Rke,H:vke,I:wke,j:jke,L:FG,m:kke,M:Ske,p:_e,q:oe,Q:L8,s:F8,S:Cke,u:_ke,U:Eke,V:Ake,w:Pke,W:Tke,x:null,X:null,y:Ike,Y:Oke,Z:Mke,"%":M8},T={a:$,A:W,b:I,B,c:O,d:I8,e:I8,f:J2e,g:T8,G:P8,H:D8,I:D8,j:Y2e,L:Z2e,m:G2e,M:X2e,p:R,q:K2e,Q:tke,s:rke,S:Q2e,u:V2e,U:W2e,V:z2e,w:U2e,W:q2e,x:F,X:q,y:T8,Y:P8,Z:H2e,"%":eke};E.x=A(s,E),E.X=A(a,E),E.c=A(t,E),_.x=A(s,_),_.X=A(a,_),_.c=A(t,_);function A(ie,ge){return function(Z){var Q=[],re=-1,pe=0,Se=ie.length,je,Fe,ke;for(Z instanceof Date||(Z=new Date(+Z));++re<Se;)ie.charCodeAt(re)===37&&(Q.push(ie.slice(pe,re)),(Fe=A8[je=ie.charAt(++re)])!=null?je=ie.charAt(++re):Fe=je==="e"?" ":"0",(ke=ge[je])&&(je=ke(Z,Fe)),Q.push(je),pe=re+1);return Q.push(ie.slice(pe,re)),Q.join("")}}function P(ie,ge){return function(Z){var Q=yg(1900,void 0,1),re=M(Q,ie,Z+="",0),pe,Se;if(re!=Z.length)return null;if("Q"in Q)return new Date(Q.Q);if("s"in Q)return new Date(Q.s*1e3+("L"in Q?Q.L:0));if(ge&&!("Z"in Q)&&(Q.Z=0),"p"in Q&&(Q.H=Q.H%12+Q.p*12),Q.m===void 0&&(Q.m="q"in Q?Q.q:0),"V"in Q){if(Q.V<1||Q.V>53)return null;"w"in Q||(Q.w=1),"Z"in Q?(pe=$S(yg(Q.y,0,1)),Se=pe.getUTCDay(),pe=Se>4||Se===0?Bj.ceil(pe):Bj(pe),pe=V2.offset(pe,(Q.V-1)*7),Q.y=pe.getUTCFullYear(),Q.m=pe.getUTCMonth(),Q.d=pe.getUTCDate()+(Q.w+6)%7):(pe=BS(yg(Q.y,0,1)),Se=pe.getDay(),pe=Se>4||Se===0?Fj.ceil(pe):Fj(pe),pe=yb.offset(pe,(Q.V-1)*7),Q.y=pe.getFullYear(),Q.m=pe.getMonth(),Q.d=pe.getDate()+(Q.w+6)%7)}else("W"in Q||"U"in Q)&&("w"in Q||(Q.w="u"in Q?Q.u%7:"W"in Q?1:0),Se="Z"in Q?$S(yg(Q.y,0,1)).getUTCDay():BS(yg(Q.y,0,1)).getDay(),Q.m=0,Q.d="W"in Q?(Q.w+6)%7+Q.W*7-(Se+5)%7:Q.w+Q.U*7-(Se+6)%7);return"Z"in Q?(Q.H+=Q.Z/100|0,Q.M+=Q.Z%100,$S(Q)):BS(Q)}}function M(ie,ge,Z,Q){for(var re=0,pe=ge.length,Se=Z.length,je,Fe;re<pe;){if(Q>=Se)return-1;if(je=ge.charCodeAt(re++),je===37){if(je=ge.charAt(re++),Fe=T[je in A8?ge.charAt(re++):je],!Fe||(Q=Fe(ie,Z,Q))<0)return-1}else if(je!=Z.charCodeAt(Q++))return-1}return Q}function R(ie,ge,Z){var Q=d.exec(ge.slice(Z));return Q?(ie.p=h.get(Q[0].toLowerCase()),Z+Q[0].length):-1}function $(ie,ge,Z){var Q=y.exec(ge.slice(Z));return Q?(ie.w=v.get(Q[0].toLowerCase()),Z+Q[0].length):-1}function W(ie,ge,Z){var Q=f.exec(ge.slice(Z));return Q?(ie.w=x.get(Q[0].toLowerCase()),Z+Q[0].length):-1}function I(ie,ge,Z){var Q=k.exec(ge.slice(Z));return Q?(ie.m=C.get(Q[0].toLowerCase()),Z+Q[0].length):-1}function B(ie,ge,Z){var Q=w.exec(ge.slice(Z));return Q?(ie.m=N.get(Q[0].toLowerCase()),Z+Q[0].length):-1}function O(ie,ge,Z){return M(ie,t,ge,Z)}function F(ie,ge,Z){return M(ie,s,ge,Z)}function q(ie,ge,Z){return M(ie,a,ge,Z)}function H(ie){return o[ie.getDay()]}function K(ie){return i[ie.getDay()]}function V(ie){return c[ie.getMonth()]}function z(ie){return l[ie.getMonth()]}function G(ie){return n[+(ie.getHours()>=12)]}function te(ie){return 1+~~(ie.getMonth()/3)}function he(ie){return o[ie.getUTCDay()]}function ne(ie){return i[ie.getUTCDay()]}function ce(ie){return c[ie.getUTCMonth()]}function xe(ie){return l[ie.getUTCMonth()]}function _e(ie){return n[+(ie.getUTCHours()>=12)]}function oe(ie){return 1+~~(ie.getUTCMonth()/3)}return{format:function(ie){var ge=A(ie+="",E);return ge.toString=function(){return ie},ge},parse:function(ie){var ge=P(ie+="",!1);return ge.toString=function(){return ie},ge},utcFormat:function(ie){var ge=A(ie+="",_);return ge.toString=function(){return ie},ge},utcParse:function(ie){var ge=P(ie+="",!0);return ge.toString=function(){return ie},ge}}}var A8={"-":"",_:" ",0:"0"},fn=/^\s*\d+/,F2e=/^%/,B2e=/[\\^$*+?|[\]().{}]/g;function Fr(e,t,s){var a=e<0?"-":"",n=(a?-e:e)+"",i=n.length;return a+(i<s?new Array(s-i+1).join(t)+n:n)}function $2e(e){return e.replace(B2e,"\\$&")}function bg(e){return new RegExp("^(?:"+e.map($2e).join("|")+")","i")}function vg(e){return new Map(e.map((t,s)=>[t.toLowerCase(),s]))}function U2e(e,t,s){var a=fn.exec(t.slice(s,s+1));return a?(e.w=+a[0],s+a[0].length):-1}function V2e(e,t,s){var a=fn.exec(t.slice(s,s+1));return a?(e.u=+a[0],s+a[0].length):-1}function W2e(e,t,s){var a=fn.exec(t.slice(s,s+2));return a?(e.U=+a[0],s+a[0].length):-1}function z2e(e,t,s){var a=fn.exec(t.slice(s,s+2));return a?(e.V=+a[0],s+a[0].length):-1}function q2e(e,t,s){var a=fn.exec(t.slice(s,s+2));return a?(e.W=+a[0],s+a[0].length):-1}function P8(e,t,s){var a=fn.exec(t.slice(s,s+4));return a?(e.y=+a[0],s+a[0].length):-1}function T8(e,t,s){var a=fn.exec(t.slice(s,s+2));return a?(e.y=+a[0]+(+a[0]>68?1900:2e3),s+a[0].length):-1}function H2e(e,t,s){var a=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(s,s+6));return a?(e.Z=a[1]?0:-(a[2]+(a[3]||"00")),s+a[0].length):-1}function K2e(e,t,s){var a=fn.exec(t.slice(s,s+1));return a?(e.q=a[0]*3-3,s+a[0].length):-1}function G2e(e,t,s){var a=fn.exec(t.slice(s,s+2));return a?(e.m=a[0]-1,s+a[0].length):-1}function I8(e,t,s){var a=fn.exec(t.slice(s,s+2));return a?(e.d=+a[0],s+a[0].length):-1}function Y2e(e,t,s){var a=fn.exec(t.slice(s,s+3));return a?(e.m=0,e.d=+a[0],s+a[0].length):-1}function D8(e,t,s){var a=fn.exec(t.slice(s,s+2));return a?(e.H=+a[0],s+a[0].length):-1}function X2e(e,t,s){var a=fn.exec(t.slice(s,s+2));return a?(e.M=+a[0],s+a[0].length):-1}function Q2e(e,t,s){var a=fn.exec(t.slice(s,s+2));return a?(e.S=+a[0],s+a[0].length):-1}function Z2e(e,t,s){var a=fn.exec(t.slice(s,s+3));return a?(e.L=+a[0],s+a[0].length):-1}function J2e(e,t,s){var a=fn.exec(t.slice(s,s+6));return a?(e.L=Math.floor(a[0]/1e3),s+a[0].length):-1}function eke(e,t,s){var a=F2e.exec(t.slice(s,s+1));return a?s+a[0].length:-1}function tke(e,t,s){var a=fn.exec(t.slice(s));return a?(e.Q=+a[0],s+a[0].length):-1}function rke(e,t,s){var a=fn.exec(t.slice(s));return a?(e.s=+a[0],s+a[0].length):-1}function O8(e,t){return Fr(e.getDate(),t,2)}function ske(e,t){return Fr(e.getHours(),t,2)}function ake(e,t){return Fr(e.getHours()%12||12,t,2)}function nke(e,t){return Fr(1+yb.count(cd(e),e),t,3)}function MG(e,t){return Fr(e.getMilliseconds(),t,3)}function ike(e,t){return MG(e,t)+"000"}function oke(e,t){return Fr(e.getMonth()+1,t,2)}function lke(e,t){return Fr(e.getMinutes(),t,2)}function cke(e,t){return Fr(e.getSeconds(),t,2)}function dke(e){var t=e.getDay();return t===0?7:t}function uke(e,t){return Fr(W2.count(cd(e)-1,e),t,2)}function LG(e){var t=e.getDay();return t>=4||t===0?Jf(e):Jf.ceil(e)}function hke(e,t){return e=LG(e),Fr(Jf.count(cd(e),e)+(cd(e).getDay()===4),t,2)}function mke(e){return e.getDay()}function fke(e,t){return Fr(Fj.count(cd(e)-1,e),t,2)}function xke(e,t){return Fr(e.getFullYear()%100,t,2)}function gke(e,t){return e=LG(e),Fr(e.getFullYear()%100,t,2)}function pke(e,t){return Fr(e.getFullYear()%1e4,t,4)}function yke(e,t){var s=e.getDay();return e=s>=4||s===0?Jf(e):Jf.ceil(e),Fr(e.getFullYear()%1e4,t,4)}function bke(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+Fr(t/60|0,"0",2)+Fr(t%60,"0",2)}function R8(e,t){return Fr(e.getUTCDate(),t,2)}function vke(e,t){return Fr(e.getUTCHours(),t,2)}function wke(e,t){return Fr(e.getUTCHours()%12||12,t,2)}function jke(e,t){return Fr(1+V2.count(dd(e),e),t,3)}function FG(e,t){return Fr(e.getUTCMilliseconds(),t,3)}function Nke(e,t){return FG(e,t)+"000"}function kke(e,t){return Fr(e.getUTCMonth()+1,t,2)}function Ske(e,t){return Fr(e.getUTCMinutes(),t,2)}function Cke(e,t){return Fr(e.getUTCSeconds(),t,2)}function _ke(e){var t=e.getUTCDay();return t===0?7:t}function Eke(e,t){return Fr(z2.count(dd(e)-1,e),t,2)}function BG(e){var t=e.getUTCDay();return t>=4||t===0?ex(e):ex.ceil(e)}function Ake(e,t){return e=BG(e),Fr(ex.count(dd(e),e)+(dd(e).getUTCDay()===4),t,2)}function Pke(e){return e.getUTCDay()}function Tke(e,t){return Fr(Bj.count(dd(e)-1,e),t,2)}function Ike(e,t){return Fr(e.getUTCFullYear()%100,t,2)}function Dke(e,t){return e=BG(e),Fr(e.getUTCFullYear()%100,t,2)}function Oke(e,t){return Fr(e.getUTCFullYear()%1e4,t,4)}function Rke(e,t){var s=e.getUTCDay();return e=s>=4||s===0?ex(e):ex.ceil(e),Fr(e.getUTCFullYear()%1e4,t,4)}function Mke(){return"+0000"}function M8(){return"%"}function L8(e){return+e}function F8(e){return Math.floor(+e/1e3)}var om,$G,UG;Lke({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function Lke(e){return om=L2e(e),$G=om.format,om.parse,UG=om.utcFormat,om.utcParse,om}function Fke(e){return new Date(e)}function Bke(e){return e instanceof Date?+e:+new Date(+e)}function jP(e,t,s,a,n,i,o,l,c,d){var h=lP(),f=h.invert,x=h.domain,y=d(".%L"),v=d(":%S"),w=d("%I:%M"),N=d("%I %p"),k=d("%a %d"),C=d("%b %d"),E=d("%B"),_=d("%Y");function T(A){return(c(A)<A?y:l(A)<A?v:o(A)<A?w:i(A)<A?N:a(A)<A?n(A)<A?k:C:s(A)<A?E:_)(A)}return h.invert=function(A){return new Date(f(A))},h.domain=function(A){return arguments.length?x(Array.from(A,Bke)):x().map(Fke)},h.ticks=function(A){var P=x();return e(P[0],P[P.length-1],A??10)},h.tickFormat=function(A,P){return P==null?T:d(P)},h.nice=function(A){var P=x();return(!A||typeof A.range!="function")&&(A=t(P[0],P[P.length-1],A??10)),A?x(_G(P,A)):h},h.copy=function(){return pb(h,jP(e,t,s,a,n,i,o,l,c,d))},h}function $ke(){return rl.apply(jP(R2e,M2e,cd,vP,W2,yb,yP,gP,B0,$G).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function Uke(){return rl.apply(jP(D2e,O2e,dd,wP,z2,V2,bP,pP,B0,UG).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function q2(){var e=0,t=1,s,a,n,i,o=ni,l=!1,c;function d(f){return f==null||isNaN(f=+f)?c:o(n===0?.5:(f=(i(f)-s)*n,l?Math.max(0,Math.min(1,f)):f))}d.domain=function(f){return arguments.length?([e,t]=f,s=i(e=+e),a=i(t=+t),n=s===a?0:1/(a-s),d):[e,t]},d.clamp=function(f){return arguments.length?(l=!!f,d):l},d.interpolator=function(f){return arguments.length?(o=f,d):o};function h(f){return function(x){var y,v;return arguments.length?([y,v]=x,o=f(y,v),d):[o(0),o(1)]}}return d.range=h(kx),d.rangeRound=h(oP),d.unknown=function(f){return arguments.length?(c=f,d):c},function(f){return i=f,s=f(e),a=f(t),n=s===a?0:1/(a-s),d}}function Qu(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function VG(){var e=Xu(q2()(ni));return e.copy=function(){return Qu(e,VG())},wd.apply(e,arguments)}function WG(){var e=uP(q2()).domain([1,10]);return e.copy=function(){return Qu(e,WG()).base(e.base())},wd.apply(e,arguments)}function zG(){var e=hP(q2());return e.copy=function(){return Qu(e,zG()).constant(e.constant())},wd.apply(e,arguments)}function NP(){var e=mP(q2());return e.copy=function(){return Qu(e,NP()).exponent(e.exponent())},wd.apply(e,arguments)}function Vke(){return NP.apply(null,arguments).exponent(.5)}function qG(){var e=[],t=ni;function s(a){if(a!=null&&!isNaN(a=+a))return t((xb(e,a,1)-1)/(e.length-1))}return s.domain=function(a){if(!arguments.length)return e.slice();e=[];for(let n of a)n!=null&&!isNaN(n=+n)&&e.push(n);return e.sort(_u),s},s.interpolator=function(a){return arguments.length?(t=a,s):t},s.range=function(){return e.map((a,n)=>t(n/(e.length-1)))},s.quantiles=function(a){return Array.from({length:a+1},(n,i)=>_Ne(e,i/a))},s.copy=function(){return qG(t).domain(e)},wd.apply(s,arguments)}function H2(){var e=0,t=.5,s=1,a=1,n,i,o,l,c,d=ni,h,f=!1,x;function y(w){return isNaN(w=+w)?x:(w=.5+((w=+h(w))-i)*(a*w<a*i?l:c),d(f?Math.max(0,Math.min(1,w)):w))}y.domain=function(w){return arguments.length?([e,t,s]=w,n=h(e=+e),i=h(t=+t),o=h(s=+s),l=n===i?0:.5/(i-n),c=i===o?0:.5/(o-i),a=i<n?-1:1,y):[e,t,s]},y.clamp=function(w){return arguments.length?(f=!!w,y):f},y.interpolator=function(w){return arguments.length?(d=w,y):d};function v(w){return function(N){var k,C,E;return arguments.length?([k,C,E]=N,d=e2e(w,[k,C,E]),y):[d(0),d(.5),d(1)]}}return y.range=v(kx),y.rangeRound=v(oP),y.unknown=function(w){return arguments.length?(x=w,y):x},function(w){return h=w,n=w(e),i=w(t),o=w(s),l=n===i?0:.5/(i-n),c=i===o?0:.5/(o-i),a=i<n?-1:1,y}}function HG(){var e=Xu(H2()(ni));return e.copy=function(){return Qu(e,HG())},wd.apply(e,arguments)}function KG(){var e=uP(H2()).domain([.1,1,10]);return e.copy=function(){return Qu(e,KG()).base(e.base())},wd.apply(e,arguments)}function GG(){var e=hP(H2());return e.copy=function(){return Qu(e,GG()).constant(e.constant())},wd.apply(e,arguments)}function kP(){var e=mP(H2());return e.copy=function(){return Qu(e,kP()).exponent(e.exponent())},wd.apply(e,arguments)}function Wke(){return kP.apply(null,arguments).exponent(.5)}const Ug=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:aP,scaleDiverging:HG,scaleDivergingLog:KG,scaleDivergingPow:kP,scaleDivergingSqrt:Wke,scaleDivergingSymlog:GG,scaleIdentity:CG,scaleImplicit:m_,scaleLinear:SG,scaleLog:EG,scaleOrdinal:sP,scalePoint:PNe,scalePow:fP,scaleQuantile:TG,scaleQuantize:IG,scaleRadial:PG,scaleSequential:VG,scaleSequentialLog:WG,scaleSequentialPow:NP,scaleSequentialQuantile:qG,scaleSequentialSqrt:Vke,scaleSequentialSymlog:zG,scaleSqrt:N2e,scaleSymlog:AG,scaleThreshold:DG,scaleTime:$ke,scaleUtc:Uke,tickFormat:kG},Symbol.toStringTag,{value:"Module"}));var Zu=e=>e.chartData,zke=Le([Zu],e=>{var t=e.chartData!=null?e.chartData.length-1:0;return{chartData:e.chartData,computedData:e.computedData,dataEndIndex:t,dataStartIndex:0}}),K2=(e,t,s,a)=>a?zke(e):Zu(e);function Mu(e){if(Array.isArray(e)&&e.length===2){var[t,s]=e;if(Ds(t)&&Ds(s))return!0}return!1}function B8(e,t,s){return s?e:[Math.min(e[0],t[0]),Math.max(e[1],t[1])]}function YG(e,t){if(t&&typeof e!="function"&&Array.isArray(e)&&e.length===2){var[s,a]=e,n,i;if(Ds(s))n=s;else if(typeof s=="function")return;if(Ds(a))i=a;else if(typeof a=="function")return;var o=[n,i];if(Mu(o))return o}}function qke(e,t,s){if(!(!s&&t==null)){if(typeof e=="function"&&t!=null)try{var a=e(t,s);if(Mu(a))return B8(a,t,s)}catch{}if(Array.isArray(e)&&e.length===2){var[n,i]=e,o,l;if(n==="auto")t!=null&&(o=Math.min(...t));else if(vt(n))o=n;else if(typeof n=="function")try{t!=null&&(o=n(t==null?void 0:t[0]))}catch{}else if(typeof n=="string"&&w7.test(n)){var c=w7.exec(n);if(c==null||t==null)o=void 0;else{var d=+c[1];o=t[0]-d}}else o=t==null?void 0:t[0];if(i==="auto")t!=null&&(l=Math.max(...t));else if(vt(i))l=i;else if(typeof i=="function")try{t!=null&&(l=i(t==null?void 0:t[1]))}catch{}else if(typeof i=="string"&&j7.test(i)){var h=j7.exec(i);if(h==null||t==null)l=void 0;else{var f=+h[1];l=t[1]+f}}else l=t==null?void 0:t[1];var x=[o,l];if(Mu(x))return t==null?x:B8(x,t,s)}}}var Sx=1e9,Hke={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},CP,Us=!0,Qo="[DecimalError] ",ih=Qo+"Invalid argument: ",SP=Qo+"Exponent out of range: ",Cx=Math.floor,w0=Math.pow,Kke=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Ji,sn=1e7,Ps=7,XG=9007199254740991,$j=Cx(XG/Ps),Nt={};Nt.absoluteValue=Nt.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};Nt.comparedTo=Nt.cmp=function(e){var t,s,a,n,i=this;if(e=new i.constructor(e),i.s!==e.s)return i.s||-e.s;if(i.e!==e.e)return i.e>e.e^i.s<0?1:-1;for(a=i.d.length,n=e.d.length,t=0,s=a<n?a:n;t<s;++t)if(i.d[t]!==e.d[t])return i.d[t]>e.d[t]^i.s<0?1:-1;return a===n?0:a>n^i.s<0?1:-1};Nt.decimalPlaces=Nt.dp=function(){var e=this,t=e.d.length-1,s=(t-e.e)*Ps;if(t=e.d[t],t)for(;t%10==0;t/=10)s--;return s<0?0:s};Nt.dividedBy=Nt.div=function(e){return Gc(this,new this.constructor(e))};Nt.dividedToIntegerBy=Nt.idiv=function(e){var t=this,s=t.constructor;return ps(Gc(t,new s(e),0,1),s.precision)};Nt.equals=Nt.eq=function(e){return!this.cmp(e)};Nt.exponent=function(){return Ia(this)};Nt.greaterThan=Nt.gt=function(e){return this.cmp(e)>0};Nt.greaterThanOrEqualTo=Nt.gte=function(e){return this.cmp(e)>=0};Nt.isInteger=Nt.isint=function(){return this.e>this.d.length-2};Nt.isNegative=Nt.isneg=function(){return this.s<0};Nt.isPositive=Nt.ispos=function(){return this.s>0};Nt.isZero=function(){return this.s===0};Nt.lessThan=Nt.lt=function(e){return this.cmp(e)<0};Nt.lessThanOrEqualTo=Nt.lte=function(e){return this.cmp(e)<1};Nt.logarithm=Nt.log=function(e){var t,s=this,a=s.constructor,n=a.precision,i=n+5;if(e===void 0)e=new a(10);else if(e=new a(e),e.s<1||e.eq(Ji))throw Error(Qo+"NaN");if(s.s<1)throw Error(Qo+(s.s?"NaN":"-Infinity"));return s.eq(Ji)?new a(0):(Us=!1,t=Gc(yy(s,i),yy(e,i),i),Us=!0,ps(t,n))};Nt.minus=Nt.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?JG(t,e):QG(t,(e.s=-e.s,e))};Nt.modulo=Nt.mod=function(e){var t,s=this,a=s.constructor,n=a.precision;if(e=new a(e),!e.s)throw Error(Qo+"NaN");return s.s?(Us=!1,t=Gc(s,e,0,1).times(e),Us=!0,s.minus(t)):ps(new a(s),n)};Nt.naturalExponential=Nt.exp=function(){return ZG(this)};Nt.naturalLogarithm=Nt.ln=function(){return yy(this)};Nt.negated=Nt.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};Nt.plus=Nt.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?QG(t,e):JG(t,(e.s=-e.s,e))};Nt.precision=Nt.sd=function(e){var t,s,a,n=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(ih+e);if(t=Ia(n)+1,a=n.d.length-1,s=a*Ps+1,a=n.d[a],a){for(;a%10==0;a/=10)s--;for(a=n.d[0];a>=10;a/=10)s++}return e&&t>s?t:s};Nt.squareRoot=Nt.sqrt=function(){var e,t,s,a,n,i,o,l=this,c=l.constructor;if(l.s<1){if(!l.s)return new c(0);throw Error(Qo+"NaN")}for(e=Ia(l),Us=!1,n=Math.sqrt(+l),n==0||n==1/0?(t=sc(l.d),(t.length+e)%2==0&&(t+="0"),n=Math.sqrt(t),e=Cx((e+1)/2)-(e<0||e%2),n==1/0?t="5e"+e:(t=n.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),a=new c(t)):a=new c(n.toString()),s=c.precision,n=o=s+3;;)if(i=a,a=i.plus(Gc(l,i,o+2)).times(.5),sc(i.d).slice(0,o)===(t=sc(a.d)).slice(0,o)){if(t=t.slice(o-3,o+1),n==o&&t=="4999"){if(ps(i,s+1,0),i.times(i).eq(l)){a=i;break}}else if(t!="9999")break;o+=4}return Us=!0,ps(a,s)};Nt.times=Nt.mul=function(e){var t,s,a,n,i,o,l,c,d,h=this,f=h.constructor,x=h.d,y=(e=new f(e)).d;if(!h.s||!e.s)return new f(0);for(e.s*=h.s,s=h.e+e.e,c=x.length,d=y.length,c<d&&(i=x,x=y,y=i,o=c,c=d,d=o),i=[],o=c+d,a=o;a--;)i.push(0);for(a=d;--a>=0;){for(t=0,n=c+a;n>a;)l=i[n]+y[a]*x[n-a-1]+t,i[n--]=l%sn|0,t=l/sn|0;i[n]=(i[n]+t)%sn|0}for(;!i[--o];)i.pop();return t?++s:i.shift(),e.d=i,e.e=s,Us?ps(e,f.precision):e};Nt.toDecimalPlaces=Nt.todp=function(e,t){var s=this,a=s.constructor;return s=new a(s),e===void 0?s:(gc(e,0,Sx),t===void 0?t=a.rounding:gc(t,0,8),ps(s,e+Ia(s)+1,t))};Nt.toExponential=function(e,t){var s,a=this,n=a.constructor;return e===void 0?s=jh(a,!0):(gc(e,0,Sx),t===void 0?t=n.rounding:gc(t,0,8),a=ps(new n(a),e+1,t),s=jh(a,!0,e+1)),s};Nt.toFixed=function(e,t){var s,a,n=this,i=n.constructor;return e===void 0?jh(n):(gc(e,0,Sx),t===void 0?t=i.rounding:gc(t,0,8),a=ps(new i(n),e+Ia(n)+1,t),s=jh(a.abs(),!1,e+Ia(a)+1),n.isneg()&&!n.isZero()?"-"+s:s)};Nt.toInteger=Nt.toint=function(){var e=this,t=e.constructor;return ps(new t(e),Ia(e)+1,t.rounding)};Nt.toNumber=function(){return+this};Nt.toPower=Nt.pow=function(e){var t,s,a,n,i,o,l=this,c=l.constructor,d=12,h=+(e=new c(e));if(!e.s)return new c(Ji);if(l=new c(l),!l.s){if(e.s<1)throw Error(Qo+"Infinity");return l}if(l.eq(Ji))return l;if(a=c.precision,e.eq(Ji))return ps(l,a);if(t=e.e,s=e.d.length-1,o=t>=s,i=l.s,o){if((s=h<0?-h:h)<=XG){for(n=new c(Ji),t=Math.ceil(a/Ps+4),Us=!1;s%2&&(n=n.times(l),U8(n.d,t)),s=Cx(s/2),s!==0;)l=l.times(l),U8(l.d,t);return Us=!0,e.s<0?new c(Ji).div(n):ps(n,a)}}else if(i<0)throw Error(Qo+"NaN");return i=i<0&&e.d[Math.max(t,s)]&1?-1:1,l.s=1,Us=!1,n=e.times(yy(l,a+d)),Us=!0,n=ZG(n),n.s=i,n};Nt.toPrecision=function(e,t){var s,a,n=this,i=n.constructor;return e===void 0?(s=Ia(n),a=jh(n,s<=i.toExpNeg||s>=i.toExpPos)):(gc(e,1,Sx),t===void 0?t=i.rounding:gc(t,0,8),n=ps(new i(n),e,t),s=Ia(n),a=jh(n,e<=s||s<=i.toExpNeg,e)),a};Nt.toSignificantDigits=Nt.tosd=function(e,t){var s=this,a=s.constructor;return e===void 0?(e=a.precision,t=a.rounding):(gc(e,1,Sx),t===void 0?t=a.rounding:gc(t,0,8)),ps(new a(s),e,t)};Nt.toString=Nt.valueOf=Nt.val=Nt.toJSON=Nt[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=Ia(e),s=e.constructor;return jh(e,t<=s.toExpNeg||t>=s.toExpPos)};function QG(e,t){var s,a,n,i,o,l,c,d,h=e.constructor,f=h.precision;if(!e.s||!t.s)return t.s||(t=new h(e)),Us?ps(t,f):t;if(c=e.d,d=t.d,o=e.e,n=t.e,c=c.slice(),i=o-n,i){for(i<0?(a=c,i=-i,l=d.length):(a=d,n=o,l=c.length),o=Math.ceil(f/Ps),l=o>l?o+1:l+1,i>l&&(i=l,a.length=1),a.reverse();i--;)a.push(0);a.reverse()}for(l=c.length,i=d.length,l-i<0&&(i=l,a=d,d=c,c=a),s=0;i;)s=(c[--i]=c[i]+d[i]+s)/sn|0,c[i]%=sn;for(s&&(c.unshift(s),++n),l=c.length;c[--l]==0;)c.pop();return t.d=c,t.e=n,Us?ps(t,f):t}function gc(e,t,s){if(e!==~~e||e<t||e>s)throw Error(ih+e)}function sc(e){var t,s,a,n=e.length-1,i="",o=e[0];if(n>0){for(i+=o,t=1;t<n;t++)a=e[t]+"",s=Ps-a.length,s&&(i+=Kd(s)),i+=a;o=e[t],a=o+"",s=Ps-a.length,s&&(i+=Kd(s))}else if(o===0)return"0";for(;o%10===0;)o/=10;return i+o}var Gc=function(){function e(a,n){var i,o=0,l=a.length;for(a=a.slice();l--;)i=a[l]*n+o,a[l]=i%sn|0,o=i/sn|0;return o&&a.unshift(o),a}function t(a,n,i,o){var l,c;if(i!=o)c=i>o?1:-1;else for(l=c=0;l<i;l++)if(a[l]!=n[l]){c=a[l]>n[l]?1:-1;break}return c}function s(a,n,i){for(var o=0;i--;)a[i]-=o,o=a[i]<n[i]?1:0,a[i]=o*sn+a[i]-n[i];for(;!a[0]&&a.length>1;)a.shift()}return function(a,n,i,o){var l,c,d,h,f,x,y,v,w,N,k,C,E,_,T,A,P,M,R=a.constructor,$=a.s==n.s?1:-1,W=a.d,I=n.d;if(!a.s)return new R(a);if(!n.s)throw Error(Qo+"Division by zero");for(c=a.e-n.e,P=I.length,T=W.length,y=new R($),v=y.d=[],d=0;I[d]==(W[d]||0);)++d;if(I[d]>(W[d]||0)&&--c,i==null?C=i=R.precision:o?C=i+(Ia(a)-Ia(n))+1:C=i,C<0)return new R(0);if(C=C/Ps+2|0,d=0,P==1)for(h=0,I=I[0],C++;(d<T||h)&&C--;d++)E=h*sn+(W[d]||0),v[d]=E/I|0,h=E%I|0;else{for(h=sn/(I[0]+1)|0,h>1&&(I=e(I,h),W=e(W,h),P=I.length,T=W.length),_=P,w=W.slice(0,P),N=w.length;N<P;)w[N++]=0;M=I.slice(),M.unshift(0),A=I[0],I[1]>=sn/2&&++A;do h=0,l=t(I,w,P,N),l<0?(k=w[0],P!=N&&(k=k*sn+(w[1]||0)),h=k/A|0,h>1?(h>=sn&&(h=sn-1),f=e(I,h),x=f.length,N=w.length,l=t(f,w,x,N),l==1&&(h--,s(f,P<x?M:I,x))):(h==0&&(l=h=1),f=I.slice()),x=f.length,x<N&&f.unshift(0),s(w,f,N),l==-1&&(N=w.length,l=t(I,w,P,N),l<1&&(h++,s(w,P<N?M:I,N))),N=w.length):l===0&&(h++,w=[0]),v[d++]=h,l&&w[0]?w[N++]=W[_]||0:(w=[W[_]],N=1);while((_++<T||w[0]!==void 0)&&C--)}return v[0]||v.shift(),y.e=c,ps(y,o?i+Ia(y)+1:i)}}();function ZG(e,t){var s,a,n,i,o,l,c=0,d=0,h=e.constructor,f=h.precision;if(Ia(e)>16)throw Error(SP+Ia(e));if(!e.s)return new h(Ji);for(Us=!1,l=f,o=new h(.03125);e.abs().gte(.1);)e=e.times(o),d+=5;for(a=Math.log(w0(2,d))/Math.LN10*2+5|0,l+=a,s=n=i=new h(Ji),h.precision=l;;){if(n=ps(n.times(e),l),s=s.times(++c),o=i.plus(Gc(n,s,l)),sc(o.d).slice(0,l)===sc(i.d).slice(0,l)){for(;d--;)i=ps(i.times(i),l);return h.precision=f,t==null?(Us=!0,ps(i,f)):i}i=o}}function Ia(e){for(var t=e.e*Ps,s=e.d[0];s>=10;s/=10)t++;return t}function US(e,t,s){if(t>e.LN10.sd())throw Us=!0,s&&(e.precision=s),Error(Qo+"LN10 precision limit exceeded");return ps(new e(e.LN10),t)}function Kd(e){for(var t="";e--;)t+="0";return t}function yy(e,t){var s,a,n,i,o,l,c,d,h,f=1,x=10,y=e,v=y.d,w=y.constructor,N=w.precision;if(y.s<1)throw Error(Qo+(y.s?"NaN":"-Infinity"));if(y.eq(Ji))return new w(0);if(t==null?(Us=!1,d=N):d=t,y.eq(10))return t==null&&(Us=!0),US(w,d);if(d+=x,w.precision=d,s=sc(v),a=s.charAt(0),i=Ia(y),Math.abs(i)<15e14){for(;a<7&&a!=1||a==1&&s.charAt(1)>3;)y=y.times(e),s=sc(y.d),a=s.charAt(0),f++;i=Ia(y),a>1?(y=new w("0."+s),i++):y=new w(a+"."+s.slice(1))}else return c=US(w,d+2,N).times(i+""),y=yy(new w(a+"."+s.slice(1)),d-x).plus(c),w.precision=N,t==null?(Us=!0,ps(y,N)):y;for(l=o=y=Gc(y.minus(Ji),y.plus(Ji),d),h=ps(y.times(y),d),n=3;;){if(o=ps(o.times(h),d),c=l.plus(Gc(o,new w(n),d)),sc(c.d).slice(0,d)===sc(l.d).slice(0,d))return l=l.times(2),i!==0&&(l=l.plus(US(w,d+2,N).times(i+""))),l=Gc(l,new w(f),d),w.precision=N,t==null?(Us=!0,ps(l,N)):l;l=c,n+=2}}function $8(e,t){var s,a,n;for((s=t.indexOf("."))>-1&&(t=t.replace(".","")),(a=t.search(/e/i))>0?(s<0&&(s=a),s+=+t.slice(a+1),t=t.substring(0,a)):s<0&&(s=t.length),a=0;t.charCodeAt(a)===48;)++a;for(n=t.length;t.charCodeAt(n-1)===48;)--n;if(t=t.slice(a,n),t){if(n-=a,s=s-a-1,e.e=Cx(s/Ps),e.d=[],a=(s+1)%Ps,s<0&&(a+=Ps),a<n){for(a&&e.d.push(+t.slice(0,a)),n-=Ps;a<n;)e.d.push(+t.slice(a,a+=Ps));t=t.slice(a),a=Ps-t.length}else a-=n;for(;a--;)t+="0";if(e.d.push(+t),Us&&(e.e>$j||e.e<-$j))throw Error(SP+s)}else e.s=0,e.e=0,e.d=[0];return e}function ps(e,t,s){var a,n,i,o,l,c,d,h,f=e.d;for(o=1,i=f[0];i>=10;i/=10)o++;if(a=t-o,a<0)a+=Ps,n=t,d=f[h=0];else{if(h=Math.ceil((a+1)/Ps),i=f.length,h>=i)return e;for(d=i=f[h],o=1;i>=10;i/=10)o++;a%=Ps,n=a-Ps+o}if(s!==void 0&&(i=w0(10,o-n-1),l=d/i%10|0,c=t<0||f[h+1]!==void 0||d%i,c=s<4?(l||c)&&(s==0||s==(e.s<0?3:2)):l>5||l==5&&(s==4||c||s==6&&(a>0?n>0?d/w0(10,o-n):0:f[h-1])%10&1||s==(e.s<0?8:7))),t<1||!f[0])return c?(i=Ia(e),f.length=1,t=t-i-1,f[0]=w0(10,(Ps-t%Ps)%Ps),e.e=Cx(-t/Ps)||0):(f.length=1,f[0]=e.e=e.s=0),e;if(a==0?(f.length=h,i=1,h--):(f.length=h+1,i=w0(10,Ps-a),f[h]=n>0?(d/w0(10,o-n)%w0(10,n)|0)*i:0),c)for(;;)if(h==0){(f[0]+=i)==sn&&(f[0]=1,++e.e);break}else{if(f[h]+=i,f[h]!=sn)break;f[h--]=0,i=1}for(a=f.length;f[--a]===0;)f.pop();if(Us&&(e.e>$j||e.e<-$j))throw Error(SP+Ia(e));return e}function JG(e,t){var s,a,n,i,o,l,c,d,h,f,x=e.constructor,y=x.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new x(e),Us?ps(t,y):t;if(c=e.d,f=t.d,a=t.e,d=e.e,c=c.slice(),o=d-a,o){for(h=o<0,h?(s=c,o=-o,l=f.length):(s=f,a=d,l=c.length),n=Math.max(Math.ceil(y/Ps),l)+2,o>n&&(o=n,s.length=1),s.reverse(),n=o;n--;)s.push(0);s.reverse()}else{for(n=c.length,l=f.length,h=n<l,h&&(l=n),n=0;n<l;n++)if(c[n]!=f[n]){h=c[n]<f[n];break}o=0}for(h&&(s=c,c=f,f=s,t.s=-t.s),l=c.length,n=f.length-l;n>0;--n)c[l++]=0;for(n=f.length;n>o;){if(c[--n]<f[n]){for(i=n;i&&c[--i]===0;)c[i]=sn-1;--c[i],c[n]+=sn}c[n]-=f[n]}for(;c[--l]===0;)c.pop();for(;c[0]===0;c.shift())--a;return c[0]?(t.d=c,t.e=a,Us?ps(t,y):t):new x(0)}function jh(e,t,s){var a,n=Ia(e),i=sc(e.d),o=i.length;return t?(s&&(a=s-o)>0?i=i.charAt(0)+"."+i.slice(1)+Kd(a):o>1&&(i=i.charAt(0)+"."+i.slice(1)),i=i+(n<0?"e":"e+")+n):n<0?(i="0."+Kd(-n-1)+i,s&&(a=s-o)>0&&(i+=Kd(a))):n>=o?(i+=Kd(n+1-o),s&&(a=s-n-1)>0&&(i=i+"."+Kd(a))):((a=n+1)<o&&(i=i.slice(0,a)+"."+i.slice(a)),s&&(a=s-o)>0&&(n+1===o&&(i+="."),i+=Kd(a))),e.s<0?"-"+i:i}function U8(e,t){if(e.length>t)return e.length=t,!0}function eY(e){var t,s,a;function n(i){var o=this;if(!(o instanceof n))return new n(i);if(o.constructor=n,i instanceof n){o.s=i.s,o.e=i.e,o.d=(i=i.d)?i.slice():i;return}if(typeof i=="number"){if(i*0!==0)throw Error(ih+i);if(i>0)o.s=1;else if(i<0)i=-i,o.s=-1;else{o.s=0,o.e=0,o.d=[0];return}if(i===~~i&&i<1e7){o.e=0,o.d=[i];return}return $8(o,i.toString())}else if(typeof i!="string")throw Error(ih+i);if(i.charCodeAt(0)===45?(i=i.slice(1),o.s=-1):o.s=1,Kke.test(i))$8(o,i);else throw Error(ih+i)}if(n.prototype=Nt,n.ROUND_UP=0,n.ROUND_DOWN=1,n.ROUND_CEIL=2,n.ROUND_FLOOR=3,n.ROUND_HALF_UP=4,n.ROUND_HALF_DOWN=5,n.ROUND_HALF_EVEN=6,n.ROUND_HALF_CEIL=7,n.ROUND_HALF_FLOOR=8,n.clone=eY,n.config=n.set=Gke,e===void 0&&(e={}),e)for(a=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<a.length;)e.hasOwnProperty(s=a[t++])||(e[s]=this[s]);return n.config(e),n}function Gke(e){if(!e||typeof e!="object")throw Error(Qo+"Object expected");var t,s,a,n=["precision",1,Sx,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<n.length;t+=3)if((a=e[s=n[t]])!==void 0)if(Cx(a)===a&&a>=n[t+1]&&a<=n[t+2])this[s]=a;else throw Error(ih+s+": "+a);if((a=e[s="LN10"])!==void 0)if(a==Math.LN10)this[s]=new this(a);else throw Error(ih+s+": "+a);return this}var CP=eY(Hke);Ji=new CP(1);const is=CP;var Yke=e=>e,tY={},rY=e=>e===tY,V8=e=>function t(){return arguments.length===0||arguments.length===1&&rY(arguments.length<=0?void 0:arguments[0])?t:e(...arguments)},sY=(e,t)=>e===1?t:V8(function(){for(var s=arguments.length,a=new Array(s),n=0;n<s;n++)a[n]=arguments[n];var i=a.filter(o=>o!==tY).length;return i>=e?t(...a):sY(e-i,V8(function(){for(var o=arguments.length,l=new Array(o),c=0;c<o;c++)l[c]=arguments[c];var d=a.map(h=>rY(h)?l.shift():h);return t(...d,...l)}))}),Xke=e=>sY(e.length,e),p_=(e,t)=>{for(var s=[],a=e;a<t;++a)s[a-e]=a;return s},Qke=Xke((e,t)=>Array.isArray(t)?t.map(e):Object.keys(t).map(s=>t[s]).map(e)),Zke=function(){for(var t=arguments.length,s=new Array(t),a=0;a<t;a++)s[a]=arguments[a];if(!s.length)return Yke;var n=s.reverse(),i=n[0],o=n.slice(1);return function(){return o.reduce((l,c)=>c(l),i(...arguments))}},y_=e=>Array.isArray(e)?e.reverse():e.split("").reverse().join("");function aY(e){var t;return e===0?t=1:t=Math.floor(new is(e).abs().log(10).toNumber())+1,t}function nY(e,t,s){for(var a=new is(e),n=0,i=[];a.lt(t)&&n<1e5;)i.push(a.toNumber()),a=a.add(s),n++;return i}var iY=e=>{var[t,s]=e,[a,n]=[t,s];return t>s&&([a,n]=[s,t]),[a,n]},oY=(e,t,s)=>{if(e.lte(0))return new is(0);var a=aY(e.toNumber()),n=new is(10).pow(a),i=e.div(n),o=a!==1?.05:.1,l=new is(Math.ceil(i.div(o).toNumber())).add(s).mul(o),c=l.mul(n);return t?new is(c.toNumber()):new is(Math.ceil(c.toNumber()))},Jke=(e,t,s)=>{var a=new is(1),n=new is(e);if(!n.isint()&&s){var i=Math.abs(e);i<1?(a=new is(10).pow(aY(e)-1),n=new is(Math.floor(n.div(a).toNumber())).mul(a)):i>1&&(n=new is(Math.floor(e)))}else e===0?n=new is(Math.floor((t-1)/2)):s||(n=new is(Math.floor(e)));var o=Math.floor((t-1)/2),l=Zke(Qke(c=>n.add(new is(c-o).mul(a)).toNumber()),p_);return l(0,t)},lY=function(t,s,a,n){var i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((s-t)/(a-1)))return{step:new is(0),tickMin:new is(0),tickMax:new is(0)};var o=oY(new is(s).sub(t).div(a-1),n,i),l;t<=0&&s>=0?l=new is(0):(l=new is(t).add(s).div(2),l=l.sub(new is(l).mod(o)));var c=Math.ceil(l.sub(t).div(o).toNumber()),d=Math.ceil(new is(s).sub(l).div(o).toNumber()),h=c+d+1;return h>a?lY(t,s,a,n,i+1):(h<a&&(d=s>0?d+(a-h):d,c=s>0?c:c+(a-h)),{step:o,tickMin:l.sub(new is(c).mul(o)),tickMax:l.add(new is(d).mul(o))})},e4e=function(t){var[s,a]=t,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=Math.max(n,2),[l,c]=iY([s,a]);if(l===-1/0||c===1/0){var d=c===1/0?[l,...p_(0,n-1).map(()=>1/0)]:[...p_(0,n-1).map(()=>-1/0),c];return s>a?y_(d):d}if(l===c)return Jke(l,n,i);var{step:h,tickMin:f,tickMax:x}=lY(l,c,o,i,0),y=nY(f,x.add(new is(.1).mul(h)),h);return s>a?y_(y):y},t4e=function(t,s){var[a,n]=t,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,[o,l]=iY([a,n]);if(o===-1/0||l===1/0)return[a,n];if(o===l)return[o];var c=Math.max(s,2),d=oY(new is(l).sub(o).div(c-1),i,0),h=[...nY(new is(o),new is(l),d),l];return i===!1&&(h=h.map(f=>Math.round(f))),a>n?y_(h):h},cY=e=>e.rootProps.maxBarSize,r4e=e=>e.rootProps.barGap,dY=e=>e.rootProps.barCategoryGap,s4e=e=>e.rootProps.barSize,G2=e=>e.rootProps.stackOffset,uY=e=>e.rootProps.reverseStackOrder,_P=e=>e.options.chartName,EP=e=>e.rootProps.syncId,hY=e=>e.rootProps.syncMethod,AP=e=>e.options.eventEmitter,a4e=e=>e.rootProps.baseValue,on={grid:-100,barBackground:-50,area:100,cursorRectangle:200,bar:300,line:400,axis:500,scatter:600,activeBar:1e3,cursorLine:1100,activeDot:1200,label:2e3},Bc={allowDuplicatedCategory:!0,angleAxisId:0,reversed:!1,scale:"auto",tick:!0,type:"category"},Gi={allowDataOverflow:!1,allowDuplicatedCategory:!0,radiusAxisId:0,scale:"auto",tick:!0,tickCount:5,type:"number"},Y2=(e,t)=>{if(!(!e||!t))return e!=null&&e.reversed?[t[1],t[0]]:t},n4e={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:Bc.angleAxisId,includeHidden:!1,name:void 0,reversed:Bc.reversed,scale:Bc.scale,tick:Bc.tick,tickCount:void 0,ticks:void 0,type:Bc.type,unit:void 0},i4e={allowDataOverflow:Gi.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:Gi.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Gi.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Gi.scale,tick:Gi.tick,tickCount:Gi.tickCount,ticks:void 0,type:Gi.type,unit:void 0},o4e={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:Bc.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Bc.angleAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Bc.scale,tick:Bc.tick,tickCount:void 0,ticks:void 0,type:"number",unit:void 0},l4e={allowDataOverflow:Gi.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:Gi.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Gi.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Gi.scale,tick:Gi.tick,tickCount:Gi.tickCount,ticks:void 0,type:"category",unit:void 0},PP=(e,t)=>e.polarAxis.angleAxis[t]!=null?e.polarAxis.angleAxis[t]:e.layout.layoutType==="radial"?o4e:n4e,TP=(e,t)=>e.polarAxis.radiusAxis[t]!=null?e.polarAxis.radiusAxis[t]:e.layout.layoutType==="radial"?l4e:i4e,X2=e=>e.polarOptions,IP=Le([bd,vd,mn],nNe),mY=Le([X2,IP],(e,t)=>{if(e!=null)return Il(e.innerRadius,t,0)}),fY=Le([X2,IP],(e,t)=>{if(e!=null)return Il(e.outerRadius,t,t*.8)}),c4e=e=>{if(e==null)return[0,0];var{startAngle:t,endAngle:s}=e;return[t,s]},xY=Le([X2],c4e);Le([PP,xY],Y2);var gY=Le([IP,mY,fY],(e,t,s)=>{if(!(e==null||t==null||s==null))return[t,s]});Le([TP,gY],Y2);var pY=Le([Br,X2,mY,fY,bd,vd],(e,t,s,a,n,i)=>{if(!(e!=="centric"&&e!=="radial"||t==null||s==null||a==null)){var{cx:o,cy:l,startAngle:c,endAngle:d}=t;return{cx:Il(o,n,n/2),cy:Il(l,i,i/2),innerRadius:s,outerRadius:a,startAngle:c,endAngle:d,clockWise:!1}}}),Ha=(e,t)=>t,Q2=(e,t,s)=>s;function Z2(e){return e==null?void 0:e.id}function yY(e,t,s){var{chartData:a=[]}=t,{allowDuplicatedCategory:n,dataKey:i}=s,o=new Map;return e.forEach(l=>{var c,d=(c=l.data)!==null&&c!==void 0?c:a;if(!(d==null||d.length===0)){var h=Z2(l);d.forEach((f,x)=>{var y=i==null||n?x:String(za(f,i,null)),v=za(f,l.dataKey,0),w;o.has(y)?w=o.get(y):w={},Object.assign(w,{[h]:v}),o.set(y,w)})}}),Array.from(o.values())}function J2(e){return e.stackId!=null&&e.dataKey!=null}var ek=(e,t)=>e===t?!0:e==null||t==null?!1:e[0]===t[0]&&e[1]===t[1];function tk(e,t){return Array.isArray(e)&&Array.isArray(t)&&e.length===0&&t.length===0?!0:e===t}function d4e(e,t){if(e.length===t.length){for(var s=0;s<e.length;s++)if(e[s]!==t[s])return!1;return!0}return!1}var Ka=e=>{var t=Br(e);return t==="horizontal"?"xAxis":t==="vertical"?"yAxis":t==="centric"?"angleAxis":"radiusAxis"},_x=e=>e.tooltip.settings.axisId;function W8(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),s.push.apply(s,a)}return s}function Uj(e){for(var t=1;t<arguments.length;t++){var s=arguments[t]!=null?arguments[t]:{};t%2?W8(Object(s),!0).forEach(function(a){u4e(e,a,s[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):W8(Object(s)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(s,a))})}return e}function u4e(e,t,s){return(t=h4e(t))in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function h4e(e){var t=m4e(e,"string");return typeof t=="symbol"?t:t+""}function m4e(e,t){if(typeof e!="object"||!e)return e;var s=e[Symbol.toPrimitive];if(s!==void 0){var a=s.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var b_=[0,"auto"],en={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},bY=(e,t)=>e.cartesianAxis.xAxis[t],jd=(e,t)=>{var s=bY(e,t);return s??en},tn={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:b_,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:mb},vY=(e,t)=>e.cartesianAxis.yAxis[t],Nd=(e,t)=>{var s=vY(e,t);return s??tn},f4e={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},DP=(e,t)=>{var s=e.cartesianAxis.zAxis[t];return s??f4e},xi=(e,t,s)=>{switch(t){case"xAxis":return jd(e,s);case"yAxis":return Nd(e,s);case"zAxis":return DP(e,s);case"angleAxis":return PP(e,s);case"radiusAxis":return TP(e,s);default:throw new Error("Unexpected axis type: ".concat(t))}},x4e=(e,t,s)=>{switch(t){case"xAxis":return jd(e,s);case"yAxis":return Nd(e,s);default:throw new Error("Unexpected axis type: ".concat(t))}},bb=(e,t,s)=>{switch(t){case"xAxis":return jd(e,s);case"yAxis":return Nd(e,s);case"angleAxis":return PP(e,s);case"radiusAxis":return TP(e,s);default:throw new Error("Unexpected axis type: ".concat(t))}},wY=e=>e.graphicalItems.cartesianItems.some(t=>t.type==="bar")||e.graphicalItems.polarItems.some(t=>t.type==="radialBar");function jY(e,t){return s=>{switch(e){case"xAxis":return"xAxisId"in s&&s.xAxisId===t;case"yAxis":return"yAxisId"in s&&s.yAxisId===t;case"zAxis":return"zAxisId"in s&&s.zAxisId===t;case"angleAxis":return"angleAxisId"in s&&s.angleAxisId===t;case"radiusAxis":return"radiusAxisId"in s&&s.radiusAxisId===t;default:return!1}}}var rk=e=>e.graphicalItems.cartesianItems,g4e=Le([Ha,Q2],jY),NY=(e,t,s)=>e.filter(s).filter(a=>(t==null?void 0:t.includeHidden)===!0?!0:!a.hide),vb=Le([rk,xi,g4e],NY,{memoizeOptions:{resultEqualityCheck:tk}}),kY=Le([vb],e=>e.filter(t=>t.type==="area"||t.type==="bar").filter(J2)),SY=e=>e.filter(t=>!("stackId"in t)||t.stackId===void 0),p4e=Le([vb],SY),CY=e=>e.map(t=>t.data).filter(Boolean).flat(1),y4e=Le([vb],CY,{memoizeOptions:{resultEqualityCheck:tk}}),_Y=(e,t)=>{var{chartData:s=[],dataStartIndex:a,dataEndIndex:n}=t;return e.length>0?e:s.slice(a,n+1)},OP=Le([y4e,K2],_Y),EY=(e,t,s)=>(t==null?void 0:t.dataKey)!=null?e.map(a=>({value:za(a,t.dataKey)})):s.length>0?s.map(a=>a.dataKey).flatMap(a=>e.map(n=>({value:za(n,a)}))):e.map(a=>({value:a})),sk=Le([OP,xi,vb],EY);function AY(e,t){switch(e){case"xAxis":return t.direction==="x";case"yAxis":return t.direction==="y";default:return!1}}function H1(e){if(fc(e)||e instanceof Date){var t=Number(e);if(Ds(t))return t}}function z8(e){if(Array.isArray(e)){var t=[H1(e[0]),H1(e[1])];return Mu(t)?t:void 0}var s=H1(e);if(s!=null)return[s,s]}function ud(e){return e.map(H1).filter(Nbe)}function b4e(e,t,s){return!s||typeof t!="number"||Yo(t)?[]:s.length?ud(s.flatMap(a=>{var n=za(e,a.dataKey),i,o;if(Array.isArray(n)?[i,o]=n:i=o=n,!(!Ds(i)||!Ds(o)))return[t-i,t+o]})):[]}var Ga=e=>{var t=Ka(e),s=_x(e);return bb(e,t,s)},wb=Le([Ga],e=>e==null?void 0:e.dataKey),v4e=Le([kY,K2,Ga],yY),PY=(e,t,s,a)=>{var n={},i=t.reduce((o,l)=>(l.stackId==null||(o[l.stackId]==null&&(o[l.stackId]=[]),o[l.stackId].push(l)),o),n);return Object.fromEntries(Object.entries(i).map(o=>{var[l,c]=o,d=a?[...c].reverse():c,h=d.map(Z2);return[l,{stackedData:$1e(e,h,s),graphicalItems:d}]}))},by=Le([v4e,kY,G2,uY],PY),TY=(e,t,s,a)=>{var{dataStartIndex:n,dataEndIndex:i}=t;if(a==null&&s!=="zAxis"){var o=z1e(e,n,i);if(!(o!=null&&o[0]===0&&o[1]===0))return o}},w4e=Le([xi],e=>e.allowDataOverflow),RP=e=>{var t;if(e==null||!("domain"in e))return b_;if(e.domain!=null)return e.domain;if(e.ticks!=null){if(e.type==="number"){var s=ud(e.ticks);return[Math.min(...s),Math.max(...s)]}if(e.type==="category")return e.ticks.map(String)}return(t=e==null?void 0:e.domain)!==null&&t!==void 0?t:b_},IY=Le([xi],RP),DY=Le([IY,w4e],YG),j4e=Le([by,Zu,Ha,DY],TY,{memoizeOptions:{resultEqualityCheck:ek}}),MP=e=>e.errorBars,N4e=(e,t,s)=>e.flatMap(a=>t[a.id]).filter(Boolean).filter(a=>AY(s,a)),Vj=function(){for(var t=arguments.length,s=new Array(t),a=0;a<t;a++)s[a]=arguments[a];var n=s.filter(Boolean);if(n.length!==0){var i=n.flat(),o=Math.min(...i),l=Math.max(...i);return[o,l]}},OY=(e,t,s,a,n)=>{var i,o;if(s.length>0&&e.forEach(l=>{s.forEach(c=>{var d,h,f=(d=a[c.id])===null||d===void 0?void 0:d.filter(k=>AY(n,k)),x=za(l,(h=t.dataKey)!==null&&h!==void 0?h:c.dataKey),y=b4e(l,x,f);if(y.length>=2){var v=Math.min(...y),w=Math.max(...y);(i==null||v<i)&&(i=v),(o==null||w>o)&&(o=w)}var N=z8(x);N!=null&&(i=i==null?N[0]:Math.min(i,N[0]),o=o==null?N[1]:Math.max(o,N[1]))})}),(t==null?void 0:t.dataKey)!=null&&e.forEach(l=>{var c=z8(za(l,t.dataKey));c!=null&&(i=i==null?c[0]:Math.min(i,c[0]),o=o==null?c[1]:Math.max(o,c[1]))}),Ds(i)&&Ds(o))return[i,o]},k4e=Le([OP,xi,p4e,MP,Ha],OY,{memoizeOptions:{resultEqualityCheck:ek}});function S4e(e){var{value:t}=e;if(fc(t)||t instanceof Date)return t}var C4e=(e,t,s)=>{var a=e.map(S4e).filter(n=>n!=null);return s&&(t.dataKey==null||t.allowDuplicatedCategory&&CH(a))?fG(0,e.length):t.allowDuplicatedCategory?a:Array.from(new Set(a))},RY=e=>e.referenceElements.dots,Ex=(e,t,s)=>e.filter(a=>a.ifOverflow==="extendDomain").filter(a=>t==="xAxis"?a.xAxisId===s:a.yAxisId===s),_4e=Le([RY,Ha,Q2],Ex),MY=e=>e.referenceElements.areas,E4e=Le([MY,Ha,Q2],Ex),LY=e=>e.referenceElements.lines,A4e=Le([LY,Ha,Q2],Ex),FY=(e,t)=>{var s=ud(e.map(a=>t==="xAxis"?a.x:a.y));if(s.length!==0)return[Math.min(...s),Math.max(...s)]},P4e=Le(_4e,Ha,FY),BY=(e,t)=>{var s=ud(e.flatMap(a=>[t==="xAxis"?a.x1:a.y1,t==="xAxis"?a.x2:a.y2]));if(s.length!==0)return[Math.min(...s),Math.max(...s)]},T4e=Le([E4e,Ha],BY);function I4e(e){var t;if(e.x!=null)return ud([e.x]);var s=(t=e.segment)===null||t===void 0?void 0:t.map(a=>a.x);return s==null||s.length===0?[]:ud(s)}function D4e(e){var t;if(e.y!=null)return ud([e.y]);var s=(t=e.segment)===null||t===void 0?void 0:t.map(a=>a.y);return s==null||s.length===0?[]:ud(s)}var $Y=(e,t)=>{var s=e.flatMap(a=>t==="xAxis"?I4e(a):D4e(a));if(s.length!==0)return[Math.min(...s),Math.max(...s)]},O4e=Le([A4e,Ha],$Y),R4e=Le(P4e,O4e,T4e,(e,t,s)=>Vj(e,s,t)),UY=(e,t,s,a,n,i,o,l)=>{if(s!=null)return s;var c=o==="vertical"&&l==="xAxis"||o==="horizontal"&&l==="yAxis",d=c?Vj(a,i,n):Vj(i,n);return qke(t,d,e.allowDataOverflow)},M4e=Le([xi,IY,DY,j4e,k4e,R4e,Br,Ha],UY,{memoizeOptions:{resultEqualityCheck:ek}}),L4e=[0,1],VY=(e,t,s,a,n,i,o)=>{if(!((e==null||s==null||s.length===0)&&o===void 0)){var{dataKey:l,type:c}=e,d=yd(t,i);if(d&&l==null){var h;return fG(0,(h=s==null?void 0:s.length)!==null&&h!==void 0?h:0)}return c==="category"?C4e(a,e,d):n==="expand"?L4e:o}},LP=Le([xi,Br,OP,sk,G2,Ha,M4e],VY),WY=(e,t,s,a,n)=>{if(e!=null){var{scale:i,type:o}=e;if(i==="auto")return t==="radial"&&n==="radiusAxis"?"band":t==="radial"&&n==="angleAxis"?"linear":o==="category"&&a&&(a.indexOf("LineChart")>=0||a.indexOf("AreaChart")>=0||a.indexOf("ComposedChart")>=0&&!s)?"point":o==="category"?"band":"linear";if(typeof i=="string"){var l="scale".concat(lb(i));return l in Ug?l:"point"}}},jb=Le([xi,Br,wY,_P,Ha],WY);function F4e(e){if(e!=null){if(e in Ug)return Ug[e]();var t="scale".concat(lb(e));if(t in Ug)return Ug[t]()}}function FP(e,t,s,a){if(!(s==null||a==null)){if(typeof e.scale=="function")return e.scale.copy().domain(s).range(a);var n=F4e(t);if(n!=null){var i=n.domain(s).range(a);return R1e(i),i}}}var zY=(e,t,s)=>{var a=RP(t);if(!(s!=="auto"&&s!=="linear")){if(t!=null&&t.tickCount&&Array.isArray(a)&&(a[0]==="auto"||a[1]==="auto")&&Mu(e))return e4e(e,t.tickCount,t.allowDecimals);if(t!=null&&t.tickCount&&t.type==="number"&&Mu(e))return t4e(e,t.tickCount,t.allowDecimals)}},BP=Le([LP,bb,jb],zY),qY=(e,t,s,a)=>{if(a!=="angleAxis"&&(e==null?void 0:e.type)==="number"&&Mu(t)&&Array.isArray(s)&&s.length>0){var n=t[0],i=s[0],o=t[1],l=s[s.length-1];return[Math.min(n,i),Math.max(o,l)]}return t},B4e=Le([xi,LP,BP,Ha],qY),$4e=Le(sk,xi,(e,t)=>{if(!(!t||t.type!=="number")){var s=1/0,a=Array.from(ud(e.map(l=>l.value))).sort((l,c)=>l-c);if(a.length<2)return 1/0;var n=a[a.length-1]-a[0];if(n===0)return 1/0;for(var i=0;i<a.length-1;i++){var o=a[i+1]-a[i];s=Math.min(s,o)}return s/n}}),HY=Le($4e,Br,dY,mn,(e,t,s,a)=>a,(e,t,s,a,n)=>{if(!Ds(e))return 0;var i=t==="vertical"?a.height:a.width;if(n==="gap")return e*i/2;if(n==="no-gap"){var o=Il(s,e*i),l=e*i/2;return l-o-(l-o)/i*o}return 0}),U4e=(e,t)=>{var s=jd(e,t);return s==null||typeof s.padding!="string"?0:HY(e,"xAxis",t,s.padding)},V4e=(e,t)=>{var s=Nd(e,t);return s==null||typeof s.padding!="string"?0:HY(e,"yAxis",t,s.padding)},W4e=Le(jd,U4e,(e,t)=>{var s,a;if(e==null)return{left:0,right:0};var{padding:n}=e;return typeof n=="string"?{left:t,right:t}:{left:((s=n.left)!==null&&s!==void 0?s:0)+t,right:((a=n.right)!==null&&a!==void 0?a:0)+t}}),z4e=Le(Nd,V4e,(e,t)=>{var s,a;if(e==null)return{top:0,bottom:0};var{padding:n}=e;return typeof n=="string"?{top:t,bottom:t}:{top:((s=n.top)!==null&&s!==void 0?s:0)+t,bottom:((a=n.bottom)!==null&&a!==void 0?a:0)+t}}),q4e=Le([mn,W4e,D2,I2,(e,t,s)=>s],(e,t,s,a,n)=>{var{padding:i}=a;return n?[i.left,s.width-i.right]:[e.left+t.left,e.left+e.width-t.right]}),H4e=Le([mn,Br,z4e,D2,I2,(e,t,s)=>s],(e,t,s,a,n,i)=>{var{padding:o}=n;return i?[a.height-o.bottom,o.top]:t==="horizontal"?[e.top+e.height-s.bottom,e.top+s.top]:[e.top+s.top,e.top+e.height-s.bottom]}),Nb=(e,t,s,a)=>{var n;switch(t){case"xAxis":return q4e(e,s,a);case"yAxis":return H4e(e,s,a);case"zAxis":return(n=DP(e,s))===null||n===void 0?void 0:n.range;case"angleAxis":return xY(e);case"radiusAxis":return gY(e,s);default:return}},KY=Le([xi,Nb],Y2),Ax=Le([xi,jb,B4e,KY],FP);Le([vb,MP,Ha],N4e);function GY(e,t){return e.id<t.id?-1:e.id>t.id?1:0}var ak=(e,t)=>t,nk=(e,t,s)=>s,K4e=Le(P2,ak,nk,(e,t,s)=>e.filter(a=>a.orientation===t).filter(a=>a.mirror===s).sort(GY)),G4e=Le(T2,ak,nk,(e,t,s)=>e.filter(a=>a.orientation===t).filter(a=>a.mirror===s).sort(GY)),YY=(e,t)=>({width:e.width,height:t.height}),Y4e=(e,t)=>{var s=typeof t.width=="number"?t.width:mb;return{width:s,height:e.height}},XY=Le(mn,jd,YY),X4e=(e,t,s)=>{switch(t){case"top":return e.top;case"bottom":return s-e.bottom;default:return 0}},Q4e=(e,t,s)=>{switch(t){case"left":return e.left;case"right":return s-e.right;default:return 0}},Z4e=Le(vd,mn,K4e,ak,nk,(e,t,s,a,n)=>{var i={},o;return s.forEach(l=>{var c=YY(t,l);o==null&&(o=X4e(t,a,e));var d=a==="top"&&!n||a==="bottom"&&n;i[l.id]=o-Number(d)*c.height,o+=(d?-1:1)*c.height}),i}),J4e=Le(bd,mn,G4e,ak,nk,(e,t,s,a,n)=>{var i={},o;return s.forEach(l=>{var c=Y4e(t,l);o==null&&(o=Q4e(t,a,e));var d=a==="left"&&!n||a==="right"&&n;i[l.id]=o-Number(d)*c.width,o+=(d?-1:1)*c.width}),i}),eSe=(e,t)=>{var s=jd(e,t);if(s!=null)return Z4e(e,s.orientation,s.mirror)},tSe=Le([mn,jd,eSe,(e,t)=>t],(e,t,s,a)=>{if(t!=null){var n=s==null?void 0:s[a];return n==null?{x:e.left,y:0}:{x:e.left,y:n}}}),rSe=(e,t)=>{var s=Nd(e,t);if(s!=null)return J4e(e,s.orientation,s.mirror)},sSe=Le([mn,Nd,rSe,(e,t)=>t],(e,t,s,a)=>{if(t!=null){var n=s==null?void 0:s[a];return n==null?{x:0,y:e.top}:{x:n,y:e.top}}}),QY=Le(mn,Nd,(e,t)=>{var s=typeof t.width=="number"?t.width:mb;return{width:s,height:e.height}}),q8=(e,t,s)=>{switch(t){case"xAxis":return XY(e,s).width;case"yAxis":return QY(e,s).height;default:return}},ZY=(e,t,s,a)=>{if(s!=null){var{allowDuplicatedCategory:n,type:i,dataKey:o}=s,l=yd(e,a),c=t.map(d=>d.value);if(o&&l&&i==="category"&&n&&CH(c))return c}},$P=Le([Br,sk,xi,Ha],ZY),JY=(e,t,s,a)=>{if(!(s==null||s.dataKey==null)){var{type:n,scale:i}=s,o=yd(e,a);if(o&&(n==="number"||i!=="auto"))return t.map(l=>l.value)}},UP=Le([Br,sk,bb,Ha],JY),H8=Le([Br,x4e,jb,Ax,$P,UP,Nb,BP,Ha],(e,t,s,a,n,i,o,l,c)=>{if(t!=null){var d=yd(e,c);return{angle:t.angle,interval:t.interval,minTickGap:t.minTickGap,orientation:t.orientation,tick:t.tick,tickCount:t.tickCount,tickFormatter:t.tickFormatter,ticks:t.ticks,type:t.type,unit:t.unit,axisType:c,categoricalDomain:i,duplicateDomain:n,isCategorical:d,niceTicks:l,range:o,realScaleType:s,scale:a}}}),aSe=(e,t,s,a,n,i,o,l,c)=>{if(!(t==null||a==null)){var d=yd(e,c),{type:h,ticks:f,tickCount:x}=t,y=s==="scaleBand"&&typeof a.bandwidth=="function"?a.bandwidth()/2:2,v=h==="category"&&a.bandwidth?a.bandwidth()/y:0;v=c==="angleAxis"&&i!=null&&i.length>=2?Ai(i[0]-i[1])*2*v:v;var w=f||n;if(w){var N=w.map((k,C)=>{var E=o?o.indexOf(k):k;return{index:C,coordinate:a(E)+v,value:k,offset:v}});return N.filter(k=>Ds(k.coordinate))}return d&&l?l.map((k,C)=>({coordinate:a(k)+v,value:k,index:C,offset:v})).filter(k=>Ds(k.coordinate)):a.ticks?a.ticks(x).map(k=>({coordinate:a(k)+v,value:k,offset:v})):a.domain().map((k,C)=>({coordinate:a(k)+v,value:o?o[k]:k,index:C,offset:v}))}},eX=Le([Br,bb,jb,Ax,BP,Nb,$P,UP,Ha],aSe),nSe=(e,t,s,a,n,i,o)=>{if(!(t==null||s==null||a==null||a[0]===a[1])){var l=yd(e,o),{tickCount:c}=t,d=0;return d=o==="angleAxis"&&(a==null?void 0:a.length)>=2?Ai(a[0]-a[1])*2*d:d,l&&i?i.map((h,f)=>({coordinate:s(h)+d,value:h,index:f,offset:d})):s.ticks?s.ticks(c).map(h=>({coordinate:s(h)+d,value:h,offset:d})):s.domain().map((h,f)=>({coordinate:s(h)+d,value:n?n[h]:h,index:f,offset:d}))}},Lu=Le([Br,bb,Ax,Nb,$P,UP,Ha],nSe),Fu=Le(xi,Ax,(e,t)=>{if(!(e==null||t==null))return Uj(Uj({},e),{},{scale:t})}),iSe=Le([xi,jb,LP,KY],FP);Le((e,t,s)=>DP(e,s),iSe,(e,t)=>{if(!(e==null||t==null))return Uj(Uj({},e),{},{scale:t})});var oSe=Le([Br,P2,T2],(e,t,s)=>{switch(e){case"horizontal":return t.some(a=>a.reversed)?"right-to-left":"left-to-right";case"vertical":return s.some(a=>a.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),tX=e=>e.options.defaultTooltipEventType,rX=e=>e.options.validateTooltipEventTypes;function sX(e,t,s){if(e==null)return t;var a=e?"axis":"item";return s==null?t:s.includes(a)?a:t}function VP(e,t){var s=tX(e),a=rX(e);return sX(t,s,a)}function lSe(e){return Dt(t=>VP(t,e))}var aX=(e,t)=>{var s,a=Number(t);if(!(Yo(a)||t==null))return a>=0?e==null||(s=e[a])===null||s===void 0?void 0:s.value:void 0},cSe=e=>e.tooltip.settings,Jd={active:!1,index:null,dataKey:void 0,graphicalItemId:void 0,coordinate:void 0},dSe={itemInteraction:{click:Jd,hover:Jd},axisInteraction:{click:Jd,hover:Jd},keyboardInteraction:Jd,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0,sourceViewBox:void 0,graphicalItemId:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},nX=Wi({name:"tooltip",initialState:dSe,reducers:{addTooltipEntrySettings:{reducer(e,t){e.tooltipItemPayloads.push(t.payload)},prepare:Fs()},replaceTooltipEntrySettings:{reducer(e,t){var{prev:s,next:a}=t.payload,n=El(e).tooltipItemPayloads.indexOf(s);n>-1&&(e.tooltipItemPayloads[n]=a)},prepare:Fs()},removeTooltipEntrySettings:{reducer(e,t){var s=El(e).tooltipItemPayloads.indexOf(t.payload);s>-1&&e.tooltipItemPayloads.splice(s,1)},prepare:Fs()},setTooltipSettingsState(e,t){e.settings=t.payload},setActiveMouseOverItemIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.itemInteraction.hover.active=!0,e.itemInteraction.hover.index=t.payload.activeIndex,e.itemInteraction.hover.dataKey=t.payload.activeDataKey,e.itemInteraction.hover.graphicalItemId=t.payload.activeGraphicalItemId,e.itemInteraction.hover.coordinate=t.payload.activeCoordinate},mouseLeaveChart(e){e.itemInteraction.hover.active=!1,e.axisInteraction.hover.active=!1},mouseLeaveItem(e){e.itemInteraction.hover.active=!1},setActiveClickItemIndex(e,t){e.syncInteraction.active=!1,e.itemInteraction.click.active=!0,e.keyboardInteraction.active=!1,e.itemInteraction.click.index=t.payload.activeIndex,e.itemInteraction.click.dataKey=t.payload.activeDataKey,e.itemInteraction.click.graphicalItemId=t.payload.activeGraphicalItemId,e.itemInteraction.click.coordinate=t.payload.activeCoordinate},setMouseOverAxisIndex(e,t){e.syncInteraction.active=!1,e.axisInteraction.hover.active=!0,e.keyboardInteraction.active=!1,e.axisInteraction.hover.index=t.payload.activeIndex,e.axisInteraction.hover.dataKey=t.payload.activeDataKey,e.axisInteraction.hover.coordinate=t.payload.activeCoordinate},setMouseClickAxisIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.axisInteraction.click.active=!0,e.axisInteraction.click.index=t.payload.activeIndex,e.axisInteraction.click.dataKey=t.payload.activeDataKey,e.axisInteraction.click.coordinate=t.payload.activeCoordinate},setSyncInteraction(e,t){e.syncInteraction=t.payload},setKeyboardInteraction(e,t){e.keyboardInteraction.active=t.payload.active,e.keyboardInteraction.index=t.payload.activeIndex,e.keyboardInteraction.coordinate=t.payload.activeCoordinate,e.keyboardInteraction.dataKey=t.payload.activeDataKey}}}),{addTooltipEntrySettings:uSe,replaceTooltipEntrySettings:hSe,removeTooltipEntrySettings:mSe,setTooltipSettingsState:fSe,setActiveMouseOverItemIndex:iX,mouseLeaveItem:xSe,mouseLeaveChart:oX,setActiveClickItemIndex:gSe,setMouseOverAxisIndex:lX,setMouseClickAxisIndex:pSe,setSyncInteraction:v_,setKeyboardInteraction:w_}=nX.actions,ySe=nX.reducer;function K8(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),s.push.apply(s,a)}return s}function Kv(e){for(var t=1;t<arguments.length;t++){var s=arguments[t]!=null?arguments[t]:{};t%2?K8(Object(s),!0).forEach(function(a){bSe(e,a,s[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):K8(Object(s)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(s,a))})}return e}function bSe(e,t,s){return(t=vSe(t))in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function vSe(e){var t=wSe(e,"string");return typeof t=="symbol"?t:t+""}function wSe(e,t){if(typeof e!="object"||!e)return e;var s=e[Symbol.toPrimitive];if(s!==void 0){var a=s.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function jSe(e,t,s){return t==="axis"?s==="click"?e.axisInteraction.click:e.axisInteraction.hover:s==="click"?e.itemInteraction.click:e.itemInteraction.hover}function NSe(e){return e.index!=null}var cX=(e,t,s,a)=>{if(t==null)return Jd;var n=jSe(e,t,s);if(n==null)return Jd;if(n.active)return n;if(e.keyboardInteraction.active)return e.keyboardInteraction;if(e.syncInteraction.active&&e.syncInteraction.index!=null)return e.syncInteraction;var i=e.settings.active===!0;if(NSe(n)){if(i)return Kv(Kv({},n),{},{active:!0})}else if(a!=null)return{active:!0,coordinate:void 0,dataKey:void 0,index:a,graphicalItemId:void 0};return Kv(Kv({},Jd),{},{coordinate:n.coordinate})};function kSe(e){if(typeof e=="number")return Number.isFinite(e)?e:void 0;if(e instanceof Date){var t=e.valueOf();return Number.isFinite(t)?t:void 0}var s=Number(e);return Number.isFinite(s)?s:void 0}function SSe(e,t){var s=kSe(e),a=t[0],n=t[1];if(s===void 0)return!1;var i=Math.min(a,n),o=Math.max(a,n);return s>=i&&s<=o}function CSe(e,t,s){if(s==null||t==null)return!0;var a=za(e,t);return a==null||!Mu(s)?!0:SSe(a,s)}var WP=(e,t,s,a)=>{var n=e==null?void 0:e.index;if(n==null)return null;var i=Number(n);if(!Ds(i))return n;var o=0,l=1/0;t.length>0&&(l=t.length-1);var c=Math.max(o,Math.min(i,l)),d=t[c];return d==null||CSe(d,s,a)?String(c):null},dX=(e,t,s,a,n,i,o,l)=>{if(!(i==null||l==null)){var c=o[0],d=c==null?void 0:l(c.positions,i);if(d!=null)return d;var h=n==null?void 0:n[Number(i)];if(h)switch(s){case"horizontal":return{x:h.coordinate,y:(a.top+t)/2};default:return{x:(a.left+e)/2,y:h.coordinate}}}},uX=(e,t,s,a)=>{if(t==="axis")return e.tooltipItemPayloads;if(e.tooltipItemPayloads.length===0)return[];var n;return s==="hover"?n=e.itemInteraction.hover.dataKey:n=e.itemInteraction.click.dataKey,n==null&&a!=null?[e.tooltipItemPayloads[0]]:e.tooltipItemPayloads.filter(i=>{var o;return((o=i.settings)===null||o===void 0?void 0:o.dataKey)===n})},kb=e=>e.options.tooltipPayloadSearcher,Px=e=>e.tooltip;function G8(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),s.push.apply(s,a)}return s}function Y8(e){for(var t=1;t<arguments.length;t++){var s=arguments[t]!=null?arguments[t]:{};t%2?G8(Object(s),!0).forEach(function(a){_Se(e,a,s[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):G8(Object(s)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(s,a))})}return e}function _Se(e,t,s){return(t=ESe(t))in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function ESe(e){var t=ASe(e,"string");return typeof t=="symbol"?t:t+""}function ASe(e,t){if(typeof e!="object"||!e)return e;var s=e[Symbol.toPrimitive];if(s!==void 0){var a=s.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function PSe(e,t){return e??t}var hX=(e,t,s,a,n,i,o)=>{if(!(t==null||i==null)){var{chartData:l,computedData:c,dataStartIndex:d,dataEndIndex:h}=s,f=[];return e.reduce((x,y)=>{var v,{dataDefinedOnItem:w,settings:N}=y,k=PSe(w,l),C=Array.isArray(k)?RK(k,d,h):k,E=(v=N==null?void 0:N.dataKey)!==null&&v!==void 0?v:a,_=N==null?void 0:N.nameKey,T;if(a&&Array.isArray(C)&&!Array.isArray(C[0])&&o==="axis"?T=_H(C,a,n):T=i(C,t,c,_),Array.isArray(T))T.forEach(P=>{var M=Y8(Y8({},N),{},{name:P.name,unit:P.unit,color:void 0,fill:void 0});x.push(N7({tooltipEntrySettings:M,dataKey:P.dataKey,payload:P.payload,value:za(P.payload,P.dataKey),name:P.name}))});else{var A;x.push(N7({tooltipEntrySettings:N,dataKey:E,payload:T,value:za(T,E),name:(A=za(T,_))!==null&&A!==void 0?A:N==null?void 0:N.name}))}return x},f)}},zP=Le([Ga,Br,wY,_P,Ka],WY),TSe=Le([e=>e.graphicalItems.cartesianItems,e=>e.graphicalItems.polarItems],(e,t)=>[...e,...t]),ISe=Le([Ka,_x],jY),Sb=Le([TSe,Ga,ISe],NY,{memoizeOptions:{resultEqualityCheck:tk}}),DSe=Le([Sb],e=>e.filter(J2)),OSe=Le([Sb],CY,{memoizeOptions:{resultEqualityCheck:tk}}),Tx=Le([OSe,Zu],_Y),RSe=Le([DSe,Zu,Ga],yY),qP=Le([Tx,Ga,Sb],EY),mX=Le([Ga],RP),MSe=Le([Ga],e=>e.allowDataOverflow),fX=Le([mX,MSe],YG),LSe=Le([Sb],e=>e.filter(J2)),FSe=Le([RSe,LSe,G2,uY],PY),BSe=Le([FSe,Zu,Ka,fX],TY),$Se=Le([Sb],SY),USe=Le([Tx,Ga,$Se,MP,Ka],OY,{memoizeOptions:{resultEqualityCheck:ek}}),VSe=Le([RY,Ka,_x],Ex),WSe=Le([VSe,Ka],FY),zSe=Le([MY,Ka,_x],Ex),qSe=Le([zSe,Ka],BY),HSe=Le([LY,Ka,_x],Ex),KSe=Le([HSe,Ka],$Y),GSe=Le([WSe,KSe,qSe],Vj),YSe=Le([Ga,mX,fX,BSe,USe,GSe,Br,Ka],UY),Cb=Le([Ga,Br,Tx,qP,G2,Ka,YSe],VY),XSe=Le([Cb,Ga,zP],zY),QSe=Le([Ga,Cb,XSe,Ka],qY),xX=e=>{var t=Ka(e),s=_x(e),a=!1;return Nb(e,t,s,a)},gX=Le([Ga,xX],Y2),pX=Le([Ga,zP,QSe,gX],FP),ZSe=Le([Br,qP,Ga,Ka],ZY),JSe=Le([Br,qP,Ga,Ka],JY),eCe=(e,t,s,a,n,i,o,l)=>{if(t){var{type:c}=t,d=yd(e,l);if(a){var h=s==="scaleBand"&&a.bandwidth?a.bandwidth()/2:2,f=c==="category"&&a.bandwidth?a.bandwidth()/h:0;return f=l==="angleAxis"&&n!=null&&(n==null?void 0:n.length)>=2?Ai(n[0]-n[1])*2*f:f,d&&o?o.map((x,y)=>({coordinate:a(x)+f,value:x,index:y,offset:f})):a.domain().map((x,y)=>({coordinate:a(x)+f,value:i?i[x]:x,index:y,offset:f}))}}},kd=Le([Br,Ga,zP,pX,xX,ZSe,JSe,Ka],eCe),HP=Le([tX,rX,cSe],(e,t,s)=>sX(s.shared,e,t)),yX=e=>e.tooltip.settings.trigger,KP=e=>e.tooltip.settings.defaultIndex,_b=Le([Px,HP,yX,KP],cX),Nh=Le([_b,Tx,wb,Cb],WP),bX=Le([kd,Nh],aX),vX=Le([_b],e=>{if(e)return e.dataKey});Le([_b],e=>{if(e)return e.graphicalItemId});var wX=Le([Px,HP,yX,KP],uX),tCe=Le([bd,vd,Br,mn,kd,KP,wX,kb],dX),rCe=Le([_b,tCe],(e,t)=>e!=null&&e.coordinate?e.coordinate:t),sCe=Le([_b],e=>e.active),aCe=Le([wX,Nh,Zu,wb,bX,kb,HP],hX),nCe=Le([aCe],e=>{if(e!=null){var t=e.map(s=>s.payload).filter(s=>s!=null);return Array.from(new Set(t))}});function X8(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),s.push.apply(s,a)}return s}function Q8(e){for(var t=1;t<arguments.length;t++){var s=arguments[t]!=null?arguments[t]:{};t%2?X8(Object(s),!0).forEach(function(a){iCe(e,a,s[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):X8(Object(s)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(s,a))})}return e}function iCe(e,t,s){return(t=oCe(t))in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function oCe(e){var t=lCe(e,"string");return typeof t=="symbol"?t:t+""}function lCe(e,t){if(typeof e!="object"||!e)return e;var s=e[Symbol.toPrimitive];if(s!==void 0){var a=s.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var cCe=()=>Dt(Ga),dCe=()=>{var e=cCe(),t=Dt(kd),s=Dt(pX);return Yf(!e||!s?void 0:Q8(Q8({},e),{},{scale:s}),t)};function Z8(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),s.push.apply(s,a)}return s}function lm(e){for(var t=1;t<arguments.length;t++){var s=arguments[t]!=null?arguments[t]:{};t%2?Z8(Object(s),!0).forEach(function(a){uCe(e,a,s[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Z8(Object(s)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(s,a))})}return e}function uCe(e,t,s){return(t=hCe(t))in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function hCe(e){var t=mCe(e,"string");return typeof t=="symbol"?t:t+""}function mCe(e,t){if(typeof e!="object"||!e)return e;var s=e[Symbol.toPrimitive];if(s!==void 0){var a=s.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var fCe=(e,t,s,a)=>{var n=t.find(i=>i&&i.index===s);if(n){if(e==="horizontal")return{x:n.coordinate,y:a.chartY};if(e==="vertical")return{x:a.chartX,y:n.coordinate}}return{x:0,y:0}},xCe=(e,t,s,a)=>{var n=t.find(d=>d&&d.index===s);if(n){if(e==="centric"){var i=n.coordinate,{radius:o}=a;return lm(lm(lm({},a),_n(a.cx,a.cy,o,i)),{},{angle:i,radius:o})}var l=n.coordinate,{angle:c}=a;return lm(lm(lm({},a),_n(a.cx,a.cy,l,c)),{},{angle:c,radius:l})}return{angle:0,clockWise:!1,cx:0,cy:0,endAngle:0,innerRadius:0,outerRadius:0,radius:0,startAngle:0,x:0,y:0}};function gCe(e,t){var{chartX:s,chartY:a}=e;return s>=t.left&&s<=t.left+t.width&&a>=t.top&&a<=t.top+t.height}var jX=(e,t,s,a,n)=>{var i,o=-1,l=(i=t==null?void 0:t.length)!==null&&i!==void 0?i:0;if(l<=1||e==null)return 0;if(a==="angleAxis"&&n!=null&&Math.abs(Math.abs(n[1]-n[0])-360)<=1e-6)for(var c=0;c<l;c++){var d=c>0?s[c-1].coordinate:s[l-1].coordinate,h=s[c].coordinate,f=c>=l-1?s[0].coordinate:s[c+1].coordinate,x=void 0;if(Ai(h-d)!==Ai(f-h)){var y=[];if(Ai(f-h)===Ai(n[1]-n[0])){x=f;var v=h+n[1]-n[0];y[0]=Math.min(v,(v+d)/2),y[1]=Math.max(v,(v+d)/2)}else{x=d;var w=f+n[1]-n[0];y[0]=Math.min(h,(w+h)/2),y[1]=Math.max(h,(w+h)/2)}var N=[Math.min(h,(x+h)/2),Math.max(h,(x+h)/2)];if(e>N[0]&&e<=N[1]||e>=y[0]&&e<=y[1]){({index:o}=s[c]);break}}else{var k=Math.min(d,f),C=Math.max(d,f);if(e>(k+h)/2&&e<=(C+h)/2){({index:o}=s[c]);break}}}else if(t){for(var E=0;E<l;E++)if(E===0&&e<=(t[E].coordinate+t[E+1].coordinate)/2||E>0&&E<l-1&&e>(t[E].coordinate+t[E-1].coordinate)/2&&e<=(t[E].coordinate+t[E+1].coordinate)/2||E===l-1&&e>(t[E].coordinate+t[E-1].coordinate)/2){({index:o}=t[E]);break}}return o},NX=()=>Dt(_P),GP=(e,t)=>t,kX=(e,t,s)=>s,YP=(e,t,s,a)=>a,pCe=Le(kd,e=>v2(e,t=>t.coordinate)),XP=Le([Px,GP,kX,YP],cX),QP=Le([XP,Tx,wb,Cb],WP),yCe=(e,t,s)=>{if(t!=null){var a=Px(e);return t==="axis"?s==="hover"?a.axisInteraction.hover.dataKey:a.axisInteraction.click.dataKey:s==="hover"?a.itemInteraction.hover.dataKey:a.itemInteraction.click.dataKey}},SX=Le([Px,GP,kX,YP],uX),Wj=Le([bd,vd,Br,mn,kd,YP,SX,kb],dX),bCe=Le([XP,Wj],(e,t)=>{var s;return(s=e.coordinate)!==null&&s!==void 0?s:t}),CX=Le([kd,QP],aX),vCe=Le([SX,QP,Zu,wb,CX,kb,GP],hX),wCe=Le([XP,QP],(e,t)=>({isActive:e.active&&t!=null,activeIndex:t})),jCe=(e,t,s,a,n,i,o)=>{if(!(!e||!s||!a||!n)&&gCe(e,o)){var l=q1e(e,t),c=jX(l,i,n,s,a),d=fCe(t,n,c,e);return{activeIndex:String(c),activeCoordinate:d}}},NCe=(e,t,s,a,n,i,o)=>{if(!(!e||!a||!n||!i||!s)){var l=dNe(e,s);if(l){var c=H1e(l,t),d=jX(c,o,i,a,n),h=xCe(t,i,d,l);return{activeIndex:String(d),activeCoordinate:h}}}},kCe=(e,t,s,a,n,i,o,l)=>{if(!(!e||!t||!a||!n||!i))return t==="horizontal"||t==="vertical"?jCe(e,t,a,n,i,o,l):NCe(e,t,s,a,n,i,o)},SCe=Le(e=>e.zIndex.zIndexMap,(e,t)=>t,(e,t,s)=>s,(e,t,s)=>{if(t!=null){var a=e[t];if(a!=null)return s?a.panoramaElementId:a.elementId}}),CCe=Le(e=>e.zIndex.zIndexMap,e=>{var t=Object.keys(e).map(a=>parseInt(a,10)).concat(Object.values(on)),s=Array.from(new Set(t));return s.sort((a,n)=>a-n)},{memoizeOptions:{resultEqualityCheck:d4e}});function J8(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),s.push.apply(s,a)}return s}function eL(e){for(var t=1;t<arguments.length;t++){var s=arguments[t]!=null?arguments[t]:{};t%2?J8(Object(s),!0).forEach(function(a){_Ce(e,a,s[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):J8(Object(s)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(s,a))})}return e}function _Ce(e,t,s){return(t=ECe(t))in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function ECe(e){var t=ACe(e,"string");return typeof t=="symbol"?t:t+""}function ACe(e,t){if(typeof e!="object"||!e)return e;var s=e[Symbol.toPrimitive];if(s!==void 0){var a=s.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var PCe={},TCe={zIndexMap:Object.values(on).reduce((e,t)=>eL(eL({},e),{},{[t]:{elementId:void 0,panoramaElementId:void 0,consumers:0}}),PCe)},ICe=new Set(Object.values(on));function DCe(e){return ICe.has(e)}var _X=Wi({name:"zIndex",initialState:TCe,reducers:{registerZIndexPortal:{reducer:(e,t)=>{var{zIndex:s}=t.payload;e.zIndexMap[s]?e.zIndexMap[s].consumers+=1:e.zIndexMap[s]={consumers:1,elementId:void 0,panoramaElementId:void 0}},prepare:Fs()},unregisterZIndexPortal:{reducer:(e,t)=>{var{zIndex:s}=t.payload;e.zIndexMap[s]&&(e.zIndexMap[s].consumers-=1,e.zIndexMap[s].consumers<=0&&!DCe(s)&&delete e.zIndexMap[s])},prepare:Fs()},registerZIndexPortalId:{reducer:(e,t)=>{var{zIndex:s,elementId:a,isPanorama:n}=t.payload;e.zIndexMap[s]?n?e.zIndexMap[s].panoramaElementId=a:e.zIndexMap[s].elementId=a:e.zIndexMap[s]={consumers:0,elementId:n?void 0:a,panoramaElementId:n?a:void 0}},prepare:Fs()},unregisterZIndexPortalId:{reducer:(e,t)=>{var{zIndex:s}=t.payload;e.zIndexMap[s]&&(t.payload.isPanorama?e.zIndexMap[s].panoramaElementId=void 0:e.zIndexMap[s].elementId=void 0)},prepare:Fs()}}}),{registerZIndexPortal:OCe,unregisterZIndexPortal:RCe,registerZIndexPortalId:MCe,unregisterZIndexPortalId:LCe}=_X.actions,FCe=_X.reducer;function sl(e){var{zIndex:t,children:s}=e,a=jwe(),n=a&&t!==void 0&&t!==0,i=Gn(),o=ea();p.useLayoutEffect(()=>n?(o(OCe({zIndex:t})),()=>{o(RCe({zIndex:t}))}):cb,[o,t,n]);var l=Dt(d=>SCe(d,t,i));if(!n)return s;if(!l)return null;var c=document.getElementById(l);return c?ux.createPortal(s,c):null}function j_(){return j_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)({}).hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e},j_.apply(null,arguments)}function tL(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),s.push.apply(s,a)}return s}function Gv(e){for(var t=1;t<arguments.length;t++){var s=arguments[t]!=null?arguments[t]:{};t%2?tL(Object(s),!0).forEach(function(a){BCe(e,a,s[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):tL(Object(s)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(s,a))})}return e}function BCe(e,t,s){return(t=$Ce(t))in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function $Ce(e){var t=UCe(e,"string");return typeof t=="symbol"?t:t+""}function UCe(e,t){if(typeof e!="object"||!e)return e;var s=e[Symbol.toPrimitive];if(s!==void 0){var a=s.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function VCe(e){var{cursor:t,cursorComp:s,cursorProps:a}=e;return p.isValidElement(t)?p.cloneElement(t,a):p.createElement(s,a)}function WCe(e){var t,{coordinate:s,payload:a,index:n,offset:i,tooltipAxisBandSize:o,layout:l,cursor:c,tooltipEventType:d,chartName:h}=e,f=s,x=a,y=n;if(!c||!f||h!=="ScatterChart"&&d!=="axis")return null;var v,w,N;if(h==="ScatterChart")v=f,w=kje,N=on.cursorLine;else if(h==="BarChart")v=Sje(l,f,i,o),w=oG,N=on.cursorRectangle;else if(l==="radial"&&AH(f)){var{cx:k,cy:C,radius:E,startAngle:_,endAngle:T}=lG(f);v={cx:k,cy:C,startAngle:_,endAngle:T,innerRadius:E,outerRadius:E},w=dG,N=on.cursorLine}else v={points:fNe(l,f,i)},w=fp,N=on.cursorLine;var A=typeof c=="object"&&"className"in c?c.className:void 0,P=Gv(Gv(Gv(Gv({stroke:"#ccc",pointerEvents:"none"},i),v),ob(c)),{},{payload:x,payloadIndex:y,className:fe("recharts-tooltip-cursor",A)});return p.createElement(sl,{zIndex:(t=e.zIndex)!==null&&t!==void 0?t:N},p.createElement(VCe,{cursor:c,cursorComp:w,cursorProps:P}))}function zCe(e){var t=dCe(),s=KK(),a=jx(),n=NX();return t==null||s==null||a==null||n==null?null:p.createElement(WCe,j_({},e,{offset:s,layout:a,tooltipAxisBandSize:t,chartName:n}))}var EX=p.createContext(null),qCe=()=>p.useContext(EX),AX={exports:{}};(function(e){var t=Object.prototype.hasOwnProperty,s="~";function a(){}Object.create&&(a.prototype=Object.create(null),new a().__proto__||(s=!1));function n(c,d,h){this.fn=c,this.context=d,this.once=h||!1}function i(c,d,h,f,x){if(typeof h!="function")throw new TypeError("The listener must be a function");var y=new n(h,f||c,x),v=s?s+d:d;return c._events[v]?c._events[v].fn?c._events[v]=[c._events[v],y]:c._events[v].push(y):(c._events[v]=y,c._eventsCount++),c}function o(c,d){--c._eventsCount===0?c._events=new a:delete c._events[d]}function l(){this._events=new a,this._eventsCount=0}l.prototype.eventNames=function(){var d=[],h,f;if(this._eventsCount===0)return d;for(f in h=this._events)t.call(h,f)&&d.push(s?f.slice(1):f);return Object.getOwnPropertySymbols?d.concat(Object.getOwnPropertySymbols(h)):d},l.prototype.listeners=function(d){var h=s?s+d:d,f=this._events[h];if(!f)return[];if(f.fn)return[f.fn];for(var x=0,y=f.length,v=new Array(y);x<y;x++)v[x]=f[x].fn;return v},l.prototype.listenerCount=function(d){var h=s?s+d:d,f=this._events[h];return f?f.fn?1:f.length:0},l.prototype.emit=function(d,h,f,x,y,v){var w=s?s+d:d;if(!this._events[w])return!1;var N=this._events[w],k=arguments.length,C,E;if(N.fn){switch(N.once&&this.removeListener(d,N.fn,void 0,!0),k){case 1:return N.fn.call(N.context),!0;case 2:return N.fn.call(N.context,h),!0;case 3:return N.fn.call(N.context,h,f),!0;case 4:return N.fn.call(N.context,h,f,x),!0;case 5:return N.fn.call(N.context,h,f,x,y),!0;case 6:return N.fn.call(N.context,h,f,x,y,v),!0}for(E=1,C=new Array(k-1);E<k;E++)C[E-1]=arguments[E];N.fn.apply(N.context,C)}else{var _=N.length,T;for(E=0;E<_;E++)switch(N[E].once&&this.removeListener(d,N[E].fn,void 0,!0),k){case 1:N[E].fn.call(N[E].context);break;case 2:N[E].fn.call(N[E].context,h);break;case 3:N[E].fn.call(N[E].context,h,f);break;case 4:N[E].fn.call(N[E].context,h,f,x);break;default:if(!C)for(T=1,C=new Array(k-1);T<k;T++)C[T-1]=arguments[T];N[E].fn.apply(N[E].context,C)}}return!0},l.prototype.on=function(d,h,f){return i(this,d,h,f,!1)},l.prototype.once=function(d,h,f){return i(this,d,h,f,!0)},l.prototype.removeListener=function(d,h,f,x){var y=s?s+d:d;if(!this._events[y])return this;if(!h)return o(this,y),this;var v=this._events[y];if(v.fn)v.fn===h&&(!x||v.once)&&(!f||v.context===f)&&o(this,y);else{for(var w=0,N=[],k=v.length;w<k;w++)(v[w].fn!==h||x&&!v[w].once||f&&v[w].context!==f)&&N.push(v[w]);N.length?this._events[y]=N.length===1?N[0]:N:o(this,y)}return this},l.prototype.removeAllListeners=function(d){var h;return d?(h=s?s+d:d,this._events[h]&&o(this,h)):(this._events=new a,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=s,l.EventEmitter=l,e.exports=l})(AX);var HCe=AX.exports;const KCe=Rl(HCe);var vy=new KCe,N_="recharts.syncEvent.tooltip",rL="recharts.syncEvent.brush";function PX(e,t){if(t){var s=Number.parseInt(t,10);if(!Yo(s))return e==null?void 0:e[s]}}var GCe={chartName:"",tooltipPayloadSearcher:void 0,eventEmitter:void 0,defaultTooltipEventType:"axis"},TX=Wi({name:"options",initialState:GCe,reducers:{createEventEmitter:e=>{e.eventEmitter==null&&(e.eventEmitter=Symbol("rechartsEventEmitter"))}}}),YCe=TX.reducer,{createEventEmitter:XCe}=TX.actions;function QCe(e){return e.tooltip.syncInteraction}var ZCe={chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},IX=Wi({name:"chartData",initialState:ZCe,reducers:{setChartData(e,t){if(e.chartData=t.payload,t.payload==null){e.dataStartIndex=0,e.dataEndIndex=0;return}t.payload.length>0&&e.dataEndIndex!==t.payload.length-1&&(e.dataEndIndex=t.payload.length-1)},setComputedData(e,t){e.computedData=t.payload},setDataStartEndIndexes(e,t){var{startIndex:s,endIndex:a}=t.payload;s!=null&&(e.dataStartIndex=s),a!=null&&(e.dataEndIndex=a)}}}),{setChartData:sL,setDataStartEndIndexes:JCe,setComputedData:KBe}=IX.actions,e5e=IX.reducer,t5e=["x","y"];function aL(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),s.push.apply(s,a)}return s}function cm(e){for(var t=1;t<arguments.length;t++){var s=arguments[t]!=null?arguments[t]:{};t%2?aL(Object(s),!0).forEach(function(a){r5e(e,a,s[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):aL(Object(s)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(s,a))})}return e}function r5e(e,t,s){return(t=s5e(t))in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function s5e(e){var t=a5e(e,"string");return typeof t=="symbol"?t:t+""}function a5e(e,t){if(typeof e!="object"||!e)return e;var s=e[Symbol.toPrimitive];if(s!==void 0){var a=s.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function n5e(e,t){if(e==null)return{};var s,a,n=i5e(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)s=i[a],t.indexOf(s)===-1&&{}.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function i5e(e,t){if(e==null)return{};var s={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;s[a]=e[a]}return s}function o5e(){var e=Dt(EP),t=Dt(AP),s=ea(),a=Dt(hY),n=Dt(kd),i=jx(),o=O2(),l=Dt(c=>c.rootProps.className);p.useEffect(()=>{if(e==null)return cb;var c=(d,h,f)=>{if(t!==f&&e===d){if(a==="index"){var x;if(o&&h!==null&&h!==void 0&&(x=h.payload)!==null&&x!==void 0&&x.coordinate&&h.payload.sourceViewBox){var y=h.payload.coordinate,{x:v,y:w}=y,N=n5e(y,t5e),{x:k,y:C,width:E,height:_}=h.payload.sourceViewBox,T=cm(cm({},N),{},{x:o.x+(E?(v-k)/E:0)*o.width,y:o.y+(_?(w-C)/_:0)*o.height});s(cm(cm({},h),{},{payload:cm(cm({},h.payload),{},{coordinate:T})}))}else s(h);return}if(n!=null){var A;if(typeof a=="function"){var P={activeTooltipIndex:h.payload.index==null?void 0:Number(h.payload.index),isTooltipActive:h.payload.active,activeIndex:h.payload.index==null?void 0:Number(h.payload.index),activeLabel:h.payload.label,activeDataKey:h.payload.dataKey,activeCoordinate:h.payload.coordinate},M=a(n,P);A=n[M]}else a==="value"&&(A=n.find(q=>String(q.value)===h.payload.label));var{coordinate:R}=h.payload;if(A==null||h.payload.active===!1||R==null||o==null){s(v_({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0,sourceViewBox:void 0,graphicalItemId:void 0}));return}var{x:$,y:W}=R,I=Math.min($,o.x+o.width),B=Math.min(W,o.y+o.height),O={x:i==="horizontal"?A.coordinate:I,y:i==="horizontal"?B:A.coordinate},F=v_({active:h.payload.active,coordinate:O,dataKey:h.payload.dataKey,index:String(A.index),label:h.payload.label,sourceViewBox:h.payload.sourceViewBox,graphicalItemId:h.payload.graphicalItemId});s(F)}}};return vy.on(N_,c),()=>{vy.off(N_,c)}},[l,s,t,e,a,n,i,o])}function l5e(){var e=Dt(EP),t=Dt(AP),s=ea();p.useEffect(()=>{if(e==null)return cb;var a=(n,i,o)=>{t!==o&&e===n&&s(JCe(i))};return vy.on(rL,a),()=>{vy.off(rL,a)}},[s,t,e])}function c5e(){var e=ea();p.useEffect(()=>{e(XCe())},[e]),o5e(),l5e()}function d5e(e,t,s,a,n,i){var o=Dt(y=>yCe(y,e,t)),l=Dt(AP),c=Dt(EP),d=Dt(hY),h=Dt(QCe),f=h==null?void 0:h.active,x=O2();p.useEffect(()=>{if(!f&&c!=null&&l!=null){var y=v_({active:i,coordinate:s,dataKey:o,index:n,label:typeof a=="number"?String(a):a,sourceViewBox:x,graphicalItemId:void 0});vy.emit(N_,c,y,l)}},[f,s,o,n,a,l,c,d,i,x])}function nL(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),s.push.apply(s,a)}return s}function iL(e){for(var t=1;t<arguments.length;t++){var s=arguments[t]!=null?arguments[t]:{};t%2?nL(Object(s),!0).forEach(function(a){u5e(e,a,s[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):nL(Object(s)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(s,a))})}return e}function u5e(e,t,s){return(t=h5e(t))in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function h5e(e){var t=m5e(e,"string");return typeof t=="symbol"?t:t+""}function m5e(e,t){if(typeof e!="object"||!e)return e;var s=e[Symbol.toPrimitive];if(s!==void 0){var a=s.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function f5e(e){return e.dataKey}function x5e(e,t){return p.isValidElement(e)?p.cloneElement(e,t):typeof e=="function"?p.createElement(e,t):p.createElement(sje,t)}var oL=[],g5e={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,isAnimationActive:"auto",itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function zj(e){var t,s,a=Mn(e,g5e),{active:n,allowEscapeViewBox:i,animationDuration:o,animationEasing:l,content:c,filterNull:d,isAnimationActive:h,offset:f,payloadUniqBy:x,position:y,reverseDirection:v,useTranslate3d:w,wrapperStyle:N,cursor:k,shared:C,trigger:E,defaultIndex:_,portal:T,axisId:A}=a,P=ea(),M=typeof _=="number"?String(_):_;p.useEffect(()=>{P(fSe({shared:C,trigger:E,axisId:A,active:n,defaultIndex:M}))},[P,C,E,A,n,M]);var R=O2(),$=rG(),W=lSe(C),{activeIndex:I,isActive:B}=(t=Dt(_e=>wCe(_e,W,E,M)))!==null&&t!==void 0?t:{},O=Dt(_e=>vCe(_e,W,E,M)),F=Dt(_e=>CX(_e,W,E,M)),q=Dt(_e=>bCe(_e,W,E,M)),H=O,K=qCe(),V=(s=n??B)!==null&&s!==void 0?s:!1,[z,G]=nK([H,V]),te=W==="axis"?F:void 0;d5e(W,E,q,te,I,V);var he=T??K;if(he==null||R==null||W==null)return null;var ne=H??oL;V||(ne=oL),d&&ne.length&&(ne=KH(ne.filter(_e=>_e.value!=null&&(_e.hide!==!0||a.includeHidden)),x,f5e));var ce=ne.length>0,xe=p.createElement(dje,{allowEscapeViewBox:i,animationDuration:o,animationEasing:l,isAnimationActive:h,active:V,coordinate:q,hasPayload:ce,offset:f,position:y,reverseDirection:v,useTranslate3d:w,viewBox:R,wrapperStyle:N,lastBoundingBox:z,innerRef:G,hasPortalFromProps:!!T},x5e(c,iL(iL({},a),{},{payload:ne,label:te,active:V,activeIndex:I,coordinate:q,accessibilityLayer:$})));return p.createElement(p.Fragment,null,ux.createPortal(xe,he),V&&p.createElement(zCe,{cursor:k,tooltipEventType:W,coordinate:q,payload:ne,index:I}))}var DX=e=>null;DX.displayName="Cell";function p5e(e,t,s){return(t=y5e(t))in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function y5e(e){var t=b5e(e,"string");return typeof t=="symbol"?t:t+""}function b5e(e,t){if(typeof e!="object"||!e)return e;var s=e[Symbol.toPrimitive];if(s!==void 0){var a=s.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class v5e{constructor(t){p5e(this,"cache",new Map),this.maxSize=t}get(t){var s=this.cache.get(t);return s!==void 0&&(this.cache.delete(t),this.cache.set(t,s)),s}set(t,s){if(this.cache.has(t))this.cache.delete(t);else if(this.cache.size>=this.maxSize){var a=this.cache.keys().next().value;a!=null&&this.cache.delete(a)}this.cache.set(t,s)}clear(){this.cache.clear()}size(){return this.cache.size}}function lL(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),s.push.apply(s,a)}return s}function w5e(e){for(var t=1;t<arguments.length;t++){var s=arguments[t]!=null?arguments[t]:{};t%2?lL(Object(s),!0).forEach(function(a){j5e(e,a,s[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):lL(Object(s)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(s,a))})}return e}function j5e(e,t,s){return(t=N5e(t))in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function N5e(e){var t=k5e(e,"string");return typeof t=="symbol"?t:t+""}function k5e(e,t){if(typeof e!="object"||!e)return e;var s=e[Symbol.toPrimitive];if(s!==void 0){var a=s.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var S5e={cacheSize:2e3,enableCache:!0},OX=w5e({},S5e),cL=new v5e(OX.cacheSize),C5e={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},dL="recharts_measurement_span";function _5e(e,t){var s=t.fontSize||"",a=t.fontFamily||"",n=t.fontWeight||"",i=t.fontStyle||"",o=t.letterSpacing||"",l=t.textTransform||"";return"".concat(e,"|").concat(s,"|").concat(a,"|").concat(n,"|").concat(i,"|").concat(o,"|").concat(l)}var uL=(e,t)=>{try{var s=document.getElementById(dL);s||(s=document.createElement("span"),s.setAttribute("id",dL),s.setAttribute("aria-hidden","true"),document.body.appendChild(s)),Object.assign(s.style,C5e,t),s.textContent="".concat(e);var a=s.getBoundingClientRect();return{width:a.width,height:a.height}}catch{return{width:0,height:0}}},xp=function(t){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||Nx.isSsr)return{width:0,height:0};if(!OX.enableCache)return uL(t,s);var a=_5e(t,s),n=cL.get(a);if(n)return n;var i=uL(t,s);return cL.set(a,i),i},hL=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,mL=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,E5e=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,A5e=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,RX={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},P5e=Object.keys(RX),zm="NaN";function T5e(e,t){return e*RX[t]}class ki{static parse(t){var s,[,a,n]=(s=A5e.exec(t))!==null&&s!==void 0?s:[];return new ki(parseFloat(a),n??"")}constructor(t,s){this.num=t,this.unit=s,this.num=t,this.unit=s,Yo(t)&&(this.unit=""),s!==""&&!E5e.test(s)&&(this.num=NaN,this.unit=""),P5e.includes(s)&&(this.num=T5e(t,s),this.unit="px")}add(t){return this.unit!==t.unit?new ki(NaN,""):new ki(this.num+t.num,this.unit)}subtract(t){return this.unit!==t.unit?new ki(NaN,""):new ki(this.num-t.num,this.unit)}multiply(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new ki(NaN,""):new ki(this.num*t.num,this.unit||t.unit)}divide(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new ki(NaN,""):new ki(this.num/t.num,this.unit||t.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return Yo(this.num)}}function MX(e){if(e.includes(zm))return zm;for(var t=e;t.includes("*")||t.includes("/");){var s,[,a,n,i]=(s=hL.exec(t))!==null&&s!==void 0?s:[],o=ki.parse(a??""),l=ki.parse(i??""),c=n==="*"?o.multiply(l):o.divide(l);if(c.isNaN())return zm;t=t.replace(hL,c.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var d,[,h,f,x]=(d=mL.exec(t))!==null&&d!==void 0?d:[],y=ki.parse(h??""),v=ki.parse(x??""),w=f==="+"?y.add(v):y.subtract(v);if(w.isNaN())return zm;t=t.replace(mL,w.toString())}return t}var fL=/\(([^()]*)\)/;function I5e(e){for(var t=e,s;(s=fL.exec(t))!=null;){var[,a]=s;t=t.replace(fL,MX(a))}return t}function D5e(e){var t=e.replace(/\s+/g,"");return t=I5e(t),t=MX(t),t}function O5e(e){try{return D5e(e)}catch{return zm}}function VS(e){var t=O5e(e.slice(5,-1));return t===zm?"":t}var R5e=["x","y","lineHeight","capHeight","fill","scaleToFit","textAnchor","verticalAnchor"],M5e=["dx","dy","angle","className","breakAll"];function k_(){return k_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)({}).hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e},k_.apply(null,arguments)}function xL(e,t){if(e==null)return{};var s,a,n=L5e(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)s=i[a],t.indexOf(s)===-1&&{}.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function L5e(e,t){if(e==null)return{};var s={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;s[a]=e[a]}return s}var LX=/[ \f\n\r\t\v\u2028\u2029]+/,FX=e=>{var{children:t,breakAll:s,style:a}=e;try{var n=[];Qs(t)||(s?n=t.toString().split(""):n=t.toString().split(LX));var i=n.map(l=>({word:l,width:xp(l,a).width})),o=s?0:xp("",a).width;return{wordsWithComputedWidth:i,spaceWidth:o}}catch{return null}};function F5e(e){return e==="start"||e==="middle"||e==="end"||e==="inherit"}var BX=(e,t,s,a)=>e.reduce((n,i)=>{var{word:o,width:l}=i,c=n[n.length-1];if(c&&l!=null&&(t==null||a||c.width+l+s<Number(t)))c.words.push(o),c.width+=l+s;else{var d={words:[o],width:l};n.push(d)}return n},[]),$X=e=>e.reduce((t,s)=>t.width>s.width?t:s),B5e="",gL=(e,t,s,a,n,i,o,l)=>{var c=e.slice(0,t),d=FX({breakAll:s,style:a,children:c+B5e});if(!d)return[!1,[]];var h=BX(d.wordsWithComputedWidth,i,o,l),f=h.length>n||$X(h).width>Number(i);return[f,h]},$5e=(e,t,s,a,n)=>{var{maxLines:i,children:o,style:l,breakAll:c}=e,d=vt(i),h=String(o),f=BX(t,a,s,n);if(!d||n)return f;var x=f.length>i||$X(f).width>Number(a);if(!x)return f;for(var y=0,v=h.length-1,w=0,N;y<=v&&w<=h.length-1;){var k=Math.floor((y+v)/2),C=k-1,[E,_]=gL(h,C,c,l,i,a,s,n),[T]=gL(h,k,c,l,i,a,s,n);if(!E&&!T&&(y=k+1),E&&T&&(v=k-1),!E&&T){N=_;break}w++}return N||f},pL=e=>{var t=Qs(e)?[]:e.toString().split(LX);return[{words:t,width:void 0}]},U5e=e=>{var{width:t,scaleToFit:s,children:a,style:n,breakAll:i,maxLines:o}=e;if((t||s)&&!Nx.isSsr){var l,c,d=FX({breakAll:i,children:a,style:n});if(d){var{wordsWithComputedWidth:h,spaceWidth:f}=d;l=h,c=f}else return pL(a);return $5e({breakAll:i,children:a,maxLines:o,style:n},l,c,t,!!s)}return pL(a)},UX="#808080",V5e={angle:0,breakAll:!1,capHeight:"0.71em",fill:UX,lineHeight:"1em",scaleToFit:!1,textAnchor:"start",verticalAnchor:"end",x:0,y:0},ZP=p.forwardRef((e,t)=>{var s=Mn(e,V5e),{x:a,y:n,lineHeight:i,capHeight:o,fill:l,scaleToFit:c,textAnchor:d,verticalAnchor:h}=s,f=xL(s,R5e),x=p.useMemo(()=>U5e({breakAll:f.breakAll,children:f.children,maxLines:f.maxLines,scaleToFit:c,style:f.style,width:f.width}),[f.breakAll,f.children,f.maxLines,c,f.style,f.width]),{dx:y,dy:v,angle:w,className:N,breakAll:k}=f,C=xL(f,M5e);if(!fc(a)||!fc(n)||x.length===0)return null;var E=Number(a)+(vt(y)?y:0),_=Number(n)+(vt(v)?v:0);if(!Ds(E)||!Ds(_))return null;var T;switch(h){case"start":T=VS("calc(".concat(o,")"));break;case"middle":T=VS("calc(".concat((x.length-1)/2," * -").concat(i," + (").concat(o," / 2))"));break;default:T=VS("calc(".concat(x.length-1," * -").concat(i,")"));break}var A=[];if(c){var P=x[0].width,{width:M}=f;A.push("scale(".concat(vt(M)&&vt(P)?M/P:1,")"))}return w&&A.push("rotate(".concat(w,", ").concat(E,", ").concat(_,")")),A.length&&(C.transform=A.join(" ")),p.createElement("text",k_({},li(C),{ref:t,x:E,y:_,className:fe("recharts-text",N),textAnchor:d,fill:l.includes("url")?UX:l}),x.map((R,$)=>{var W=R.words.join(k?"":" ");return p.createElement("tspan",{x:E,dy:$===0?T:i,key:"".concat(W,"-").concat($)},W)}))});ZP.displayName="Text";var W5e=["labelRef"];function z5e(e,t){if(e==null)return{};var s,a,n=q5e(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)s=i[a],t.indexOf(s)===-1&&{}.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function q5e(e,t){if(e==null)return{};var s={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;s[a]=e[a]}return s}function yL(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),s.push.apply(s,a)}return s}function fa(e){for(var t=1;t<arguments.length;t++){var s=arguments[t]!=null?arguments[t]:{};t%2?yL(Object(s),!0).forEach(function(a){H5e(e,a,s[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):yL(Object(s)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(s,a))})}return e}function H5e(e,t,s){return(t=K5e(t))in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function K5e(e){var t=G5e(e,"string");return typeof t=="symbol"?t:t+""}function G5e(e,t){if(typeof e!="object"||!e)return e;var s=e[Symbol.toPrimitive];if(s!==void 0){var a=s.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function $c(){return $c=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)({}).hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e},$c.apply(null,arguments)}var VX=p.createContext(null),Y5e=e=>{var{x:t,y:s,upperWidth:a,lowerWidth:n,width:i,height:o,children:l}=e,c=p.useMemo(()=>({x:t,y:s,upperWidth:a,lowerWidth:n,width:i,height:o}),[t,s,a,n,i,o]);return p.createElement(VX.Provider,{value:c},l)},WX=()=>{var e=p.useContext(VX),t=O2();return e||HK(t)},X5e=p.createContext(null),Q5e=()=>{var e=p.useContext(X5e),t=Dt(pY);return e||t},Z5e=e=>{var{value:t,formatter:s}=e,a=Qs(e.children)?t:e.children;return typeof s=="function"?s(a):a},JP=e=>e!=null&&typeof e=="function",J5e=(e,t)=>{var s=Ai(t-e),a=Math.min(Math.abs(t-e),360);return s*a},e3e=(e,t,s,a,n)=>{var{offset:i,className:o}=e,{cx:l,cy:c,innerRadius:d,outerRadius:h,startAngle:f,endAngle:x,clockWise:y}=n,v=(d+h)/2,w=J5e(f,x),N=w>=0?1:-1,k,C;switch(t){case"insideStart":k=f+N*i,C=y;break;case"insideEnd":k=x-N*i,C=!y;break;case"end":k=x+N*i,C=y;break;default:throw new Error("Unsupported position ".concat(t))}C=w<=0?C:!C;var E=_n(l,c,v,k),_=_n(l,c,v,k+(C?1:-1)*359),T="M".concat(E.x,",").concat(E.y,`
    A`).concat(v,",").concat(v,",0,1,").concat(C?0:1,`,
    `).concat(_.x,",").concat(_.y),A=Qs(e.id)?iy("recharts-radial-line-"):e.id;return p.createElement("text",$c({},a,{dominantBaseline:"central",className:fe("recharts-radial-bar-label",o)}),p.createElement("defs",null,p.createElement("path",{id:A,d:T})),p.createElement("textPath",{xlinkHref:"#".concat(A)},s))},t3e=(e,t,s)=>{var{cx:a,cy:n,innerRadius:i,outerRadius:o,startAngle:l,endAngle:c}=e,d=(l+c)/2;if(s==="outside"){var{x:h,y:f}=_n(a,n,o+t,d);return{x:h,y:f,textAnchor:h>=a?"start":"end",verticalAnchor:"middle"}}if(s==="center")return{x:a,y:n,textAnchor:"middle",verticalAnchor:"middle"};if(s==="centerTop")return{x:a,y:n,textAnchor:"middle",verticalAnchor:"start"};if(s==="centerBottom")return{x:a,y:n,textAnchor:"middle",verticalAnchor:"end"};var x=(i+o)/2,{x:y,y:v}=_n(a,n,x,d);return{x:y,y:v,textAnchor:"middle",verticalAnchor:"middle"}},S_=e=>"cx"in e&&vt(e.cx),r3e=(e,t)=>{var{parentViewBox:s,offset:a,position:n}=e,i;s!=null&&!S_(s)&&(i=s);var{x:o,y:l,upperWidth:c,lowerWidth:d,height:h}=t,f=o,x=o+(c-d)/2,y=(f+x)/2,v=(c+d)/2,w=f+c/2,N=h>=0?1:-1,k=N*a,C=N>0?"end":"start",E=N>0?"start":"end",_=c>=0?1:-1,T=_*a,A=_>0?"end":"start",P=_>0?"start":"end";if(n==="top"){var M={x:f+c/2,y:l-k,textAnchor:"middle",verticalAnchor:C};return fa(fa({},M),i?{height:Math.max(l-i.y,0),width:c}:{})}if(n==="bottom"){var R={x:x+d/2,y:l+h+k,textAnchor:"middle",verticalAnchor:E};return fa(fa({},R),i?{height:Math.max(i.y+i.height-(l+h),0),width:d}:{})}if(n==="left"){var $={x:y-T,y:l+h/2,textAnchor:A,verticalAnchor:"middle"};return fa(fa({},$),i?{width:Math.max($.x-i.x,0),height:h}:{})}if(n==="right"){var W={x:y+v+T,y:l+h/2,textAnchor:P,verticalAnchor:"middle"};return fa(fa({},W),i?{width:Math.max(i.x+i.width-W.x,0),height:h}:{})}var I=i?{width:v,height:h}:{};return n==="insideLeft"?fa({x:y+T,y:l+h/2,textAnchor:P,verticalAnchor:"middle"},I):n==="insideRight"?fa({x:y+v-T,y:l+h/2,textAnchor:A,verticalAnchor:"middle"},I):n==="insideTop"?fa({x:f+c/2,y:l+k,textAnchor:"middle",verticalAnchor:E},I):n==="insideBottom"?fa({x:x+d/2,y:l+h-k,textAnchor:"middle",verticalAnchor:C},I):n==="insideTopLeft"?fa({x:f+T,y:l+k,textAnchor:P,verticalAnchor:E},I):n==="insideTopRight"?fa({x:f+c-T,y:l+k,textAnchor:A,verticalAnchor:E},I):n==="insideBottomLeft"?fa({x:x+T,y:l+h-k,textAnchor:P,verticalAnchor:C},I):n==="insideBottomRight"?fa({x:x+d-T,y:l+h-k,textAnchor:A,verticalAnchor:C},I):n&&typeof n=="object"&&(vt(n.x)||id(n.x))&&(vt(n.y)||id(n.y))?fa({x:o+Il(n.x,v),y:l+Il(n.y,h),textAnchor:"end",verticalAnchor:"end"},I):fa({x:w,y:l+h/2,textAnchor:"middle",verticalAnchor:"middle"},I)},s3e={angle:0,offset:5,zIndex:on.label,position:"middle",textBreakAll:!1};function Gd(e){var t=Mn(e,s3e),{viewBox:s,position:a,value:n,children:i,content:o,className:l="",textBreakAll:c,labelRef:d}=t,h=Q5e(),f=WX(),x=a==="center"?f:h??f,y,v,w;if(s==null?y=x:S_(s)?y=s:y=HK(s),!y||Qs(n)&&Qs(i)&&!p.isValidElement(o)&&typeof o!="function")return null;var N=fa(fa({},t),{},{viewBox:y});if(p.isValidElement(o)){var{labelRef:k}=N,C=z5e(N,W5e);return p.cloneElement(o,C)}if(typeof o=="function"){if(v=p.createElement(o,N),p.isValidElement(v))return v}else v=Z5e(t);var E=li(t);if(S_(y)){if(a==="insideStart"||a==="insideEnd"||a==="end")return e3e(t,a,v,E,y);w=t3e(y,t.offset,t.position)}else w=r3e(t,y);return p.createElement(sl,{zIndex:t.zIndex},p.createElement(ZP,$c({ref:d,className:fe("recharts-label",l)},E,w,{textAnchor:F5e(E.textAnchor)?E.textAnchor:w.textAnchor,breakAll:c}),v))}Gd.displayName="Label";var a3e=(e,t,s)=>{if(!e)return null;var a={viewBox:t,labelRef:s};return e===!0?p.createElement(Gd,$c({key:"label-implicit"},a)):fc(e)?p.createElement(Gd,$c({key:"label-implicit",value:e},a)):p.isValidElement(e)?e.type===Gd?p.cloneElement(e,fa({key:"label-implicit"},a)):p.createElement(Gd,$c({key:"label-implicit",content:e},a)):JP(e)?p.createElement(Gd,$c({key:"label-implicit",content:e},a)):e&&typeof e=="object"?p.createElement(Gd,$c({},e,{key:"label-implicit"},a)):null};function n3e(e){var{label:t,labelRef:s}=e,a=WX();return a3e(t,a,s)||null}var zX={},qX={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(s){return s[s.length-1]}e.last=t})(qX);var HX={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(s){return Array.isArray(s)?s:Array.from(s)}e.toArray=t})(HX);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=qX,s=HX,a=y2;function n(i){if(a.isArrayLike(i))return t.last(s.toArray(i))}e.last=n})(zX);var i3e=zX.last;const o3e=Rl(i3e);var l3e=["valueAccessor"],c3e=["dataKey","clockWise","id","textBreakAll","zIndex"];function qj(){return qj=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)({}).hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e},qj.apply(null,arguments)}function bL(e,t){if(e==null)return{};var s,a,n=d3e(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)s=i[a],t.indexOf(s)===-1&&{}.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function d3e(e,t){if(e==null)return{};var s={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;s[a]=e[a]}return s}var u3e=e=>Array.isArray(e.value)?o3e(e.value):e.value,KX=p.createContext(void 0),GX=KX.Provider,YX=p.createContext(void 0);YX.Provider;function h3e(){return p.useContext(KX)}function m3e(){return p.useContext(YX)}function K1(e){var{valueAccessor:t=u3e}=e,s=bL(e,l3e),{dataKey:a,clockWise:n,id:i,textBreakAll:o,zIndex:l}=s,c=bL(s,c3e),d=h3e(),h=m3e(),f=d||h;return!f||!f.length?null:p.createElement(sl,{zIndex:l??on.label},p.createElement(ci,{className:"recharts-label-list"},f.map((x,y)=>{var v,w=Qs(a)?t(x,y):za(x&&x.payload,a),N=Qs(i)?{}:{id:"".concat(i,"-").concat(y)};return p.createElement(Gd,qj({key:"label-".concat(y)},li(x),c,N,{fill:(v=s.fill)!==null&&v!==void 0?v:x.fill,parentViewBox:x.parentViewBox,value:w,textBreakAll:o,viewBox:x.viewBox,index:y,zIndex:0}))})))}K1.displayName="LabelList";function XX(e){var{label:t}=e;return t?t===!0?p.createElement(K1,{key:"labelList-implicit"}):p.isValidElement(t)||JP(t)?p.createElement(K1,{key:"labelList-implicit",content:t}):typeof t=="object"?p.createElement(K1,qj({key:"labelList-implicit"},t,{type:String(t.type)})):null:null}function C_(){return C_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)({}).hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e},C_.apply(null,arguments)}var QX=e=>{var{cx:t,cy:s,r:a,className:n}=e,i=fe("recharts-dot",n);return vt(t)&&vt(s)&&vt(a)?p.createElement("circle",C_({},Go(e),AA(e),{className:i,cx:t,cy:s,r:a})):null},f3e={radiusAxis:{},angleAxis:{}},ZX=Wi({name:"polarAxis",initialState:f3e,reducers:{addRadiusAxis(e,t){e.radiusAxis[t.payload.id]=t.payload},removeRadiusAxis(e,t){delete e.radiusAxis[t.payload.id]},addAngleAxis(e,t){e.angleAxis[t.payload.id]=t.payload},removeAngleAxis(e,t){delete e.angleAxis[t.payload.id]}}}),{addRadiusAxis:GBe,removeRadiusAxis:YBe,addAngleAxis:XBe,removeAngleAxis:QBe}=ZX.actions,x3e=ZX.reducer,JX={exports:{}},ds={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xn=typeof Symbol=="function"&&Symbol.for,eT=xn?Symbol.for("react.element"):60103,tT=xn?Symbol.for("react.portal"):60106,ik=xn?Symbol.for("react.fragment"):60107,ok=xn?Symbol.for("react.strict_mode"):60108,lk=xn?Symbol.for("react.profiler"):60114,ck=xn?Symbol.for("react.provider"):60109,dk=xn?Symbol.for("react.context"):60110,rT=xn?Symbol.for("react.async_mode"):60111,uk=xn?Symbol.for("react.concurrent_mode"):60111,hk=xn?Symbol.for("react.forward_ref"):60112,mk=xn?Symbol.for("react.suspense"):60113,g3e=xn?Symbol.for("react.suspense_list"):60120,fk=xn?Symbol.for("react.memo"):60115,xk=xn?Symbol.for("react.lazy"):60116,p3e=xn?Symbol.for("react.block"):60121,y3e=xn?Symbol.for("react.fundamental"):60117,b3e=xn?Symbol.for("react.responder"):60118,v3e=xn?Symbol.for("react.scope"):60119;function yo(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case eT:switch(e=e.type,e){case rT:case uk:case ik:case lk:case ok:case mk:return e;default:switch(e=e&&e.$$typeof,e){case dk:case hk:case xk:case fk:case ck:return e;default:return t}}case tT:return t}}}function eQ(e){return yo(e)===uk}ds.AsyncMode=rT;ds.ConcurrentMode=uk;ds.ContextConsumer=dk;ds.ContextProvider=ck;ds.Element=eT;ds.ForwardRef=hk;ds.Fragment=ik;ds.Lazy=xk;ds.Memo=fk;ds.Portal=tT;ds.Profiler=lk;ds.StrictMode=ok;ds.Suspense=mk;ds.isAsyncMode=function(e){return eQ(e)||yo(e)===rT};ds.isConcurrentMode=eQ;ds.isContextConsumer=function(e){return yo(e)===dk};ds.isContextProvider=function(e){return yo(e)===ck};ds.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===eT};ds.isForwardRef=function(e){return yo(e)===hk};ds.isFragment=function(e){return yo(e)===ik};ds.isLazy=function(e){return yo(e)===xk};ds.isMemo=function(e){return yo(e)===fk};ds.isPortal=function(e){return yo(e)===tT};ds.isProfiler=function(e){return yo(e)===lk};ds.isStrictMode=function(e){return yo(e)===ok};ds.isSuspense=function(e){return yo(e)===mk};ds.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===ik||e===uk||e===lk||e===ok||e===mk||e===g3e||typeof e=="object"&&e!==null&&(e.$$typeof===xk||e.$$typeof===fk||e.$$typeof===ck||e.$$typeof===dk||e.$$typeof===hk||e.$$typeof===y3e||e.$$typeof===b3e||e.$$typeof===v3e||e.$$typeof===p3e)};ds.typeOf=yo;JX.exports=ds;var tQ=JX.exports,vL=e=>typeof e=="string"?e:e?e.displayName||e.name||"Component":"",wL=null,WS=null,rQ=e=>{if(e===wL&&Array.isArray(WS))return WS;var t=[];return p.Children.forEach(e,s=>{Qs(s)||(tQ.isFragment(s)?t=t.concat(rQ(s.props.children)):t.push(s))}),WS=t,wL=e,t};function w3e(e,t){var s=[],a=[];return Array.isArray(t)?a=t.map(n=>vL(n)):a=[vL(t)],rQ(e).forEach(n=>{var i=qf(n,"type.displayName")||qf(n,"type.name");i&&a.indexOf(i)!==-1&&s.push(n)}),s}var sQ=e=>e&&typeof e=="object"&&"clipDot"in e?!!e.clipDot:!0,aQ={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(s){var n;if(typeof s!="object"||s==null)return!1;if(Object.getPrototypeOf(s)===null)return!0;if(Object.prototype.toString.call(s)!=="[object Object]"){const i=s[Symbol.toStringTag];return i==null||!((n=Object.getOwnPropertyDescriptor(s,Symbol.toStringTag))!=null&&n.writable)?!1:s.toString()===`[object ${i}]`}let a=s;for(;Object.getPrototypeOf(a)!==null;)a=Object.getPrototypeOf(a);return Object.getPrototypeOf(s)===a}e.isPlainObject=t})(aQ);var j3e=aQ.isPlainObject;const N3e=Rl(j3e);function jL(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),s.push.apply(s,a)}return s}function NL(e){for(var t=1;t<arguments.length;t++){var s=arguments[t]!=null?arguments[t]:{};t%2?jL(Object(s),!0).forEach(function(a){k3e(e,a,s[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):jL(Object(s)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(s,a))})}return e}function k3e(e,t,s){return(t=S3e(t))in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function S3e(e){var t=C3e(e,"string");return typeof t=="symbol"?t:t+""}function C3e(e,t){if(typeof e!="object"||!e)return e;var s=e[Symbol.toPrimitive];if(s!==void 0){var a=s.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Hj(){return Hj=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)({}).hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e},Hj.apply(null,arguments)}var kL=(e,t,s,a,n)=>{var i=s-a,o;return o="M ".concat(e,",").concat(t),o+="L ".concat(e+s,",").concat(t),o+="L ".concat(e+s-i/2,",").concat(t+n),o+="L ".concat(e+s-i/2-a,",").concat(t+n),o+="L ".concat(e,",").concat(t," Z"),o},_3e={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},E3e=e=>{var t=Mn(e,_3e),{x:s,y:a,upperWidth:n,lowerWidth:i,height:o,className:l}=t,{animationEasing:c,animationDuration:d,animationBegin:h,isUpdateAnimationActive:f}=t,x=p.useRef(null),[y,v]=p.useState(-1),w=p.useRef(n),N=p.useRef(i),k=p.useRef(o),C=p.useRef(s),E=p.useRef(a),_=$2(e,"trapezoid-");if(p.useEffect(()=>{if(x.current&&x.current.getTotalLength)try{var O=x.current.getTotalLength();O&&v(O)}catch{}},[]),s!==+s||a!==+a||n!==+n||i!==+i||o!==+o||n===0&&i===0||o===0)return null;var T=fe("recharts-trapezoid",l);if(!f)return p.createElement("g",null,p.createElement("path",Hj({},li(t),{className:T,d:kL(s,a,n,i,o)})));var A=w.current,P=N.current,M=k.current,R=C.current,$=E.current,W="0px ".concat(y===-1?1:y,"px"),I="".concat(y,"px 0px"),B=sG(["strokeDasharray"],d,c);return p.createElement(B2,{animationId:_,key:_,canBegin:y>0,duration:d,easing:c,isActive:f,begin:h},O=>{var F=Ks(A,n,O),q=Ks(P,i,O),H=Ks(M,o,O),K=Ks(R,s,O),V=Ks($,a,O);x.current&&(w.current=F,N.current=q,k.current=H,C.current=K,E.current=V);var z=O>0?{transition:B,strokeDasharray:I}:{strokeDasharray:W};return p.createElement("path",Hj({},li(t),{className:T,d:kL(K,V,F,q,H),ref:x,style:NL(NL({},z),t.style)}))})},A3e=["option","shapeType","propTransformer","activeClassName"];function P3e(e,t){if(e==null)return{};var s,a,n=T3e(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)s=i[a],t.indexOf(s)===-1&&{}.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function T3e(e,t){if(e==null)return{};var s={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;s[a]=e[a]}return s}function SL(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),s.push.apply(s,a)}return s}function Kj(e){for(var t=1;t<arguments.length;t++){var s=arguments[t]!=null?arguments[t]:{};t%2?SL(Object(s),!0).forEach(function(a){I3e(e,a,s[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):SL(Object(s)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(s,a))})}return e}function I3e(e,t,s){return(t=D3e(t))in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function D3e(e){var t=O3e(e,"string");return typeof t=="symbol"?t:t+""}function O3e(e,t){if(typeof e!="object"||!e)return e;var s=e[Symbol.toPrimitive];if(s!==void 0){var a=s.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function R3e(e,t){return Kj(Kj({},t),e)}function M3e(e,t){return e==="symbols"}function CL(e){var{shapeType:t,elementProps:s}=e;switch(t){case"rectangle":return p.createElement(oG,s);case"trapezoid":return p.createElement(E3e,s);case"sector":return p.createElement(dG,s);case"symbols":if(M3e(t))return p.createElement(EA,s);break;case"curve":return p.createElement(fp,s);default:return null}}function L3e(e){return p.isValidElement(e)?e.props:e}function F3e(e){var{option:t,shapeType:s,propTransformer:a=R3e,activeClassName:n="recharts-active-shape"}=e,i=P3e(e,A3e),o;if(p.isValidElement(t))o=p.cloneElement(t,Kj(Kj({},i),L3e(t)));else if(typeof t=="function")o=t(i,i.index);else if(N3e(t)&&typeof t!="boolean"){var l=a(t,i);o=p.createElement(CL,{shapeType:s,elementProps:l})}else{var c=i;o=p.createElement(CL,{shapeType:s,elementProps:c})}return i.isActive?p.createElement(ci,{className:n},o):o}var nQ=(e,t,s)=>{var a=ea();return(n,i)=>o=>{e==null||e(n,i,o),a(iX({activeIndex:String(i),activeDataKey:t,activeCoordinate:n.tooltipPosition,activeGraphicalItemId:s}))}},iQ=e=>{var t=ea();return(s,a)=>n=>{e==null||e(s,a,n),t(xSe())}},oQ=(e,t,s)=>{var a=ea();return(n,i)=>o=>{e==null||e(n,i,o),a(gSe({activeIndex:String(i),activeDataKey:t,activeCoordinate:n.tooltipPosition,activeGraphicalItemId:s}))}};function lQ(e){var{tooltipEntrySettings:t}=e,s=ea(),a=Gn(),n=p.useRef(null);return p.useLayoutEffect(()=>{a||(n.current===null?s(uSe(t)):n.current!==t&&s(hSe({prev:n.current,next:t})),n.current=t)},[t,s,a]),p.useLayoutEffect(()=>()=>{n.current&&(s(mSe(n.current)),n.current=null)},[s]),null}function cQ(e){var{legendPayload:t}=e,s=ea(),a=Gn(),n=p.useRef(null);return p.useLayoutEffect(()=>{a||(n.current===null?s(Mwe(t)):n.current!==t&&s(Lwe({prev:n.current,next:t})),n.current=t)},[s,a,t]),p.useLayoutEffect(()=>()=>{n.current&&(s(Fwe(n.current)),n.current=null)},[s]),null}var zS,B3e=()=>{var[e]=p.useState(()=>iy("uid-"));return e},$3e=(zS=wp.useId)!==null&&zS!==void 0?zS:B3e;function dQ(e,t){var s=$3e();return t||(e?"".concat(e,"-").concat(s):s)}var U3e=p.createContext(void 0),uQ=e=>{var{id:t,type:s,children:a}=e,n=dQ("recharts-".concat(s),t);return p.createElement(U3e.Provider,{value:n},a(n))},V3e={cartesianItems:[],polarItems:[]},hQ=Wi({name:"graphicalItems",initialState:V3e,reducers:{addCartesianGraphicalItem:{reducer(e,t){e.cartesianItems.push(t.payload)},prepare:Fs()},replaceCartesianGraphicalItem:{reducer(e,t){var{prev:s,next:a}=t.payload,n=El(e).cartesianItems.indexOf(s);n>-1&&(e.cartesianItems[n]=a)},prepare:Fs()},removeCartesianGraphicalItem:{reducer(e,t){var s=El(e).cartesianItems.indexOf(t.payload);s>-1&&e.cartesianItems.splice(s,1)},prepare:Fs()},addPolarGraphicalItem:{reducer(e,t){e.polarItems.push(t.payload)},prepare:Fs()},removePolarGraphicalItem:{reducer(e,t){var s=El(e).polarItems.indexOf(t.payload);s>-1&&e.polarItems.splice(s,1)},prepare:Fs()}}}),{addCartesianGraphicalItem:W3e,replaceCartesianGraphicalItem:z3e,removeCartesianGraphicalItem:q3e,addPolarGraphicalItem:ZBe,removePolarGraphicalItem:JBe}=hQ.actions,H3e=hQ.reducer,K3e=e=>{var t=ea(),s=p.useRef(null);return p.useLayoutEffect(()=>{s.current===null?t(W3e(e)):s.current!==e&&t(z3e({prev:s.current,next:e})),s.current=e},[t,e]),p.useLayoutEffect(()=>()=>{s.current&&(t(q3e(s.current)),s.current=null)},[t]),null},mQ=p.memo(K3e),G3e=["points"];function _L(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),s.push.apply(s,a)}return s}function qS(e){for(var t=1;t<arguments.length;t++){var s=arguments[t]!=null?arguments[t]:{};t%2?_L(Object(s),!0).forEach(function(a){Y3e(e,a,s[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):_L(Object(s)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(s,a))})}return e}function Y3e(e,t,s){return(t=X3e(t))in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function X3e(e){var t=Q3e(e,"string");return typeof t=="symbol"?t:t+""}function Q3e(e,t){if(typeof e!="object"||!e)return e;var s=e[Symbol.toPrimitive];if(s!==void 0){var a=s.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Gj(){return Gj=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)({}).hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e},Gj.apply(null,arguments)}function Z3e(e,t){if(e==null)return{};var s,a,n=J3e(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)s=i[a],t.indexOf(s)===-1&&{}.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function J3e(e,t){if(e==null)return{};var s={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;s[a]=e[a]}return s}function e_e(e){var{option:t,dotProps:s,className:a}=e;if(p.isValidElement(t))return p.cloneElement(t,s);if(typeof t=="function")return t(s);var n=fe(a,typeof t!="boolean"?t.className:""),i=s??{},{points:o}=i,l=Z3e(i,G3e);return p.createElement(QX,Gj({},l,{className:n}))}function t_e(e,t){return e==null?!1:t?!0:e.length===1}function r_e(e){var{points:t,dot:s,className:a,dotClassName:n,dataKey:i,baseProps:o,needClip:l,clipPathId:c,zIndex:d=on.scatter}=e;if(!t_e(t,s))return null;var h=sQ(s),f=Oye(s),x=t.map((v,w)=>{var N,k,C=qS(qS(qS({r:3},o),f),{},{index:w,cx:(N=v.x)!==null&&N!==void 0?N:void 0,cy:(k=v.y)!==null&&k!==void 0?k:void 0,dataKey:i,value:v.value,payload:v.payload,points:t});return p.createElement(e_e,{key:"dot-".concat(w),option:s,dotProps:C,className:n})}),y={};return l&&c!=null&&(y.clipPath="url(#clipPath-".concat(h?"":"dots-").concat(c,")")),p.createElement(sl,{zIndex:d},p.createElement(ci,Gj({className:a},y),x))}function EL(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),s.push.apply(s,a)}return s}function AL(e){for(var t=1;t<arguments.length;t++){var s=arguments[t]!=null?arguments[t]:{};t%2?EL(Object(s),!0).forEach(function(a){s_e(e,a,s[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):EL(Object(s)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(s,a))})}return e}function s_e(e,t,s){return(t=a_e(t))in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function a_e(e){var t=n_e(e,"string");return typeof t=="symbol"?t:t+""}function n_e(e,t){if(typeof e!="object"||!e)return e;var s=e[Symbol.toPrimitive];if(s!==void 0){var a=s.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var i_e={xAxis:{},yAxis:{},zAxis:{}},fQ=Wi({name:"cartesianAxis",initialState:i_e,reducers:{addXAxis:{reducer(e,t){e.xAxis[t.payload.id]=t.payload},prepare:Fs()},replaceXAxis:{reducer(e,t){var{prev:s,next:a}=t.payload;e.xAxis[s.id]!==void 0&&(s.id!==a.id&&delete e.xAxis[s.id],e.xAxis[a.id]=a)},prepare:Fs()},removeXAxis:{reducer(e,t){delete e.xAxis[t.payload.id]},prepare:Fs()},addYAxis:{reducer(e,t){e.yAxis[t.payload.id]=t.payload},prepare:Fs()},replaceYAxis:{reducer(e,t){var{prev:s,next:a}=t.payload;e.yAxis[s.id]!==void 0&&(s.id!==a.id&&delete e.yAxis[s.id],e.yAxis[a.id]=a)},prepare:Fs()},removeYAxis:{reducer(e,t){delete e.yAxis[t.payload.id]},prepare:Fs()},addZAxis:{reducer(e,t){e.zAxis[t.payload.id]=t.payload},prepare:Fs()},replaceZAxis:{reducer(e,t){var{prev:s,next:a}=t.payload;e.zAxis[s.id]!==void 0&&(s.id!==a.id&&delete e.zAxis[s.id],e.zAxis[a.id]=a)},prepare:Fs()},removeZAxis:{reducer(e,t){delete e.zAxis[t.payload.id]},prepare:Fs()},updateYAxisWidth(e,t){var{id:s,width:a}=t.payload,n=e.yAxis[s];if(n){var i=n.widthHistory||[];if(i.length===3&&i[0]===i[2]&&a===i[1]&&a!==n.width&&Math.abs(a-i[0])<=1)return;var o=[...i,a].slice(-3);e.yAxis[s]=AL(AL({},e.yAxis[s]),{},{width:a,widthHistory:o})}}}}),{addXAxis:o_e,replaceXAxis:l_e,removeXAxis:c_e,addYAxis:d_e,replaceYAxis:u_e,removeYAxis:h_e,addZAxis:e$e,replaceZAxis:t$e,removeZAxis:r$e,updateYAxisWidth:m_e}=fQ.actions,f_e=fQ.reducer,x_e=Le([mn],e=>({top:e.top,bottom:e.bottom,left:e.left,right:e.right})),g_e=Le([x_e,bd,vd],(e,t,s)=>{if(!(!e||t==null||s==null))return{x:e.left,y:e.top,width:Math.max(0,t-e.left-e.right),height:Math.max(0,s-e.top-e.bottom)}}),sT=()=>Dt(g_e),p_e=()=>Dt(nCe);function PL(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),s.push.apply(s,a)}return s}function HS(e){for(var t=1;t<arguments.length;t++){var s=arguments[t]!=null?arguments[t]:{};t%2?PL(Object(s),!0).forEach(function(a){y_e(e,a,s[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):PL(Object(s)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(s,a))})}return e}function y_e(e,t,s){return(t=b_e(t))in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function b_e(e){var t=v_e(e,"string");return typeof t=="symbol"?t:t+""}function v_e(e,t){if(typeof e!="object"||!e)return e;var s=e[Symbol.toPrimitive];if(s!==void 0){var a=s.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var w_e=e=>{var{point:t,childIndex:s,mainColor:a,activeDot:n,dataKey:i,clipPath:o}=e;if(n===!1||t.x==null||t.y==null)return null;var l={index:s,dataKey:i,cx:t.x,cy:t.y,r:4,fill:a??"none",strokeWidth:2,stroke:"#fff",payload:t.payload,value:t.value},c=HS(HS(HS({},l),ob(n)),AA(n)),d;return p.isValidElement(n)?d=p.cloneElement(n,c):typeof n=="function"?d=n(c):d=p.createElement(QX,c),p.createElement(ci,{className:"recharts-active-dot",clipPath:o},d)};function TL(e){var{points:t,mainColor:s,activeDot:a,itemDataKey:n,clipPath:i,zIndex:o=on.activeDot}=e,l=Dt(Nh),c=p_e();if(t==null||c==null)return null;var d=t.find(h=>c.includes(h.payload));return Qs(d)?null:p.createElement(sl,{zIndex:o},p.createElement(w_e,{point:d,childIndex:Number(l),mainColor:s,dataKey:n,activeDot:a,clipPath:i}))}var j_e="Invariant failed";function N_e(e,t){throw new Error(j_e)}var k_e=["x","y"];function __(){return __=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)({}).hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e},__.apply(null,arguments)}function IL(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),s.push.apply(s,a)}return s}function wg(e){for(var t=1;t<arguments.length;t++){var s=arguments[t]!=null?arguments[t]:{};t%2?IL(Object(s),!0).forEach(function(a){S_e(e,a,s[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):IL(Object(s)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(s,a))})}return e}function S_e(e,t,s){return(t=C_e(t))in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function C_e(e){var t=__e(e,"string");return typeof t=="symbol"?t:t+""}function __e(e,t){if(typeof e!="object"||!e)return e;var s=e[Symbol.toPrimitive];if(s!==void 0){var a=s.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function E_e(e,t){if(e==null)return{};var s,a,n=A_e(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)s=i[a],t.indexOf(s)===-1&&{}.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function A_e(e,t){if(e==null)return{};var s={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;s[a]=e[a]}return s}function P_e(e,t){var{x:s,y:a}=e,n=E_e(e,k_e),i="".concat(s),o=parseInt(i,10),l="".concat(a),c=parseInt(l,10),d="".concat(t.height||n.height),h=parseInt(d,10),f="".concat(t.width||n.width),x=parseInt(f,10);return wg(wg(wg(wg(wg({},t),n),o?{x:o}:{}),c?{y:c}:{}),{},{height:h,width:x,name:t.name,radius:t.radius})}function Yj(e){return p.createElement(F3e,__({shapeType:"rectangle",propTransformer:P_e,activeClassName:"recharts-active-bar"},e))}var T_e=function(t){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(a,n)=>{if(vt(t))return t;var i=vt(a)||Qs(a);return i?t(a,n):(i||N_e(),s)}},I_e={},xQ=Wi({name:"errorBars",initialState:I_e,reducers:{addErrorBar:(e,t)=>{var{itemId:s,errorBar:a}=t.payload;e[s]||(e[s]=[]),e[s].push(a)},replaceErrorBar:(e,t)=>{var{itemId:s,prev:a,next:n}=t.payload;e[s]&&(e[s]=e[s].map(i=>i.dataKey===a.dataKey&&i.direction===a.direction?n:i))},removeErrorBar:(e,t)=>{var{itemId:s,errorBar:a}=t.payload;e[s]&&(e[s]=e[s].filter(n=>n.dataKey!==a.dataKey||n.direction!==a.direction))}}}),{addErrorBar:s$e,replaceErrorBar:a$e,removeErrorBar:n$e}=xQ.actions,D_e=xQ.reducer,O_e=["children"];function R_e(e,t){if(e==null)return{};var s,a,n=M_e(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)s=i[a],t.indexOf(s)===-1&&{}.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function M_e(e,t){if(e==null)return{};var s={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;s[a]=e[a]}return s}var L_e={data:[],xAxisId:"xAxis-0",yAxisId:"yAxis-0",dataPointFormatter:()=>({x:0,y:0,value:0}),errorBarOffset:0},F_e=p.createContext(L_e);function B_e(e){var{children:t}=e,s=R_e(e,O_e);return p.createElement(F_e.Provider,{value:s},t)}function aT(e,t){var s,a,n=Dt(d=>jd(d,e)),i=Dt(d=>Nd(d,t)),o=(s=n==null?void 0:n.allowDataOverflow)!==null&&s!==void 0?s:en.allowDataOverflow,l=(a=i==null?void 0:i.allowDataOverflow)!==null&&a!==void 0?a:tn.allowDataOverflow,c=o||l;return{needClip:c,needClipX:o,needClipY:l}}function gQ(e){var{xAxisId:t,yAxisId:s,clipPathId:a}=e,n=sT(),{needClipX:i,needClipY:o,needClip:l}=aT(t,s);if(!l||!n)return null;var{x:c,y:d,width:h,height:f}=n;return p.createElement("clipPath",{id:"clipPath-".concat(a)},p.createElement("rect",{x:i?c:c-h/2,y:o?d:d-f/2,width:i?h:h*2,height:o?f:f*2}))}function $_e(e,t){return e&&typeof e=="object"&&"zIndex"in e&&typeof e.zIndex=="number"&&Ds(e.zIndex)?e.zIndex:t}var U_e={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Eb=p;function V_e(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var W_e=typeof Object.is=="function"?Object.is:V_e,z_e=Eb.useSyncExternalStore,q_e=Eb.useRef,H_e=Eb.useEffect,K_e=Eb.useMemo,G_e=Eb.useDebugValue;U_e.useSyncExternalStoreWithSelector=function(e,t,s,a,n){var i=q_e(null);if(i.current===null){var o={hasValue:!1,value:null};i.current=o}else o=i.current;i=K_e(function(){function c(y){if(!d){if(d=!0,h=y,y=a(y),n!==void 0&&o.hasValue){var v=o.value;if(n(v,y))return f=v}return f=y}if(v=f,W_e(h,y))return v;var w=a(y);return n!==void 0&&n(v,w)?(h=y,v):(h=y,f=w)}var d=!1,h,f,x=s===void 0?null:s;return[function(){return c(t())},x===null?void 0:function(){return c(x())}]},[t,s,a,n]);var l=z_e(e,i[0],i[1]);return H_e(function(){o.hasValue=!0,o.value=l},[l]),G_e(l),l};function Y_e(e){e()}function X_e(){let e=null,t=null;return{clear(){e=null,t=null},notify(){Y_e(()=>{let s=e;for(;s;)s.callback(),s=s.next})},get(){const s=[];let a=e;for(;a;)s.push(a),a=a.next;return s},subscribe(s){let a=!0;const n=t={callback:s,next:null,prev:t};return n.prev?n.prev.next=n:e=n,function(){!a||e===null||(a=!1,n.next?n.next.prev=n.prev:t=n.prev,n.prev?n.prev.next=n.next:e=n.next)}}}}var DL={notify(){},get:()=>[]};function Q_e(e,t){let s,a=DL,n=0,i=!1;function o(w){h();const N=a.subscribe(w);let k=!1;return()=>{k||(k=!0,N(),f())}}function l(){a.notify()}function c(){v.onStateChange&&v.onStateChange()}function d(){return i}function h(){n++,s||(s=e.subscribe(c),a=X_e())}function f(){n--,s&&n===0&&(s(),s=void 0,a.clear(),a=DL)}function x(){i||(i=!0,h())}function y(){i&&(i=!1,f())}const v={addNestedSub:o,notifyNestedSubs:l,handleChangeWrapper:c,isSubscribed:d,trySubscribe:x,tryUnsubscribe:y,getListeners:()=>a};return v}var Z_e=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",J_e=Z_e(),eEe=()=>typeof navigator<"u"&&navigator.product==="ReactNative",tEe=eEe(),rEe=()=>J_e||tEe?p.useLayoutEffect:p.useEffect,sEe=rEe();function OL(e,t){return e===t?e!==0||t!==0||1/e===1/t:e!==e&&t!==t}function aEe(e,t){if(OL(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;const s=Object.keys(e),a=Object.keys(t);if(s.length!==a.length)return!1;for(let n=0;n<s.length;n++)if(!Object.prototype.hasOwnProperty.call(t,s[n])||!OL(e[s[n]],t[s[n]]))return!1;return!0}var KS=Symbol.for("react-redux-context"),GS=typeof globalThis<"u"?globalThis:{};function nEe(){if(!p.createContext)return{};const e=GS[KS]??(GS[KS]=new Map);let t=e.get(p.createContext);return t||(t=p.createContext(null),e.set(p.createContext,t)),t}var iEe=nEe();function oEe(e){const{children:t,context:s,serverState:a,store:n}=e,i=p.useMemo(()=>{const c=Q_e(n);return{store:n,subscription:c,getServerState:a?()=>a:void 0}},[n,a]),o=p.useMemo(()=>n.getState(),[n]);sEe(()=>{const{subscription:c}=i;return c.onStateChange=c.notifyNestedSubs,c.trySubscribe(),o!==n.getState()&&c.notifyNestedSubs(),()=>{c.tryUnsubscribe(),c.onStateChange=void 0}},[i,o]);const l=s||iEe;return p.createElement(l.Provider,{value:i},t)}var lEe=oEe,cEe=new Set(["axisLine","tickLine","activeBar","activeDot","activeLabel","activeShape","allowEscapeViewBox","background","cursor","dot","label","line","margin","padding","position","shape","style","tick","wrapperStyle"]);function dEe(e,t){return e==null&&t==null?!0:typeof e=="number"&&typeof t=="number"?e===t||e!==e&&t!==t:e===t}function gk(e,t){var s=new Set([...Object.keys(e),...Object.keys(t)]);for(var a of s)if(cEe.has(a)){if(e[a]==null&&t[a]==null)continue;if(!aEe(e[a],t[a]))return!1}else if(!dEe(e[a],t[a]))return!1;return!0}var uEe=["onMouseEnter","onMouseLeave","onClick"],hEe=["value","background","tooltipPosition"],mEe=["id"],fEe=["onMouseEnter","onClick","onMouseLeave"];function hd(){return hd=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)({}).hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e},hd.apply(null,arguments)}function RL(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),s.push.apply(s,a)}return s}function si(e){for(var t=1;t<arguments.length;t++){var s=arguments[t]!=null?arguments[t]:{};t%2?RL(Object(s),!0).forEach(function(a){xEe(e,a,s[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):RL(Object(s)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(s,a))})}return e}function xEe(e,t,s){return(t=gEe(t))in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function gEe(e){var t=pEe(e,"string");return typeof t=="symbol"?t:t+""}function pEe(e,t){if(typeof e!="object"||!e)return e;var s=e[Symbol.toPrimitive];if(s!==void 0){var a=s.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Xj(e,t){if(e==null)return{};var s,a,n=yEe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)s=i[a],t.indexOf(s)===-1&&{}.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function yEe(e,t){if(e==null)return{};var s={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;s[a]=e[a]}return s}var bEe=e=>{var{dataKey:t,name:s,fill:a,legendType:n,hide:i}=e;return[{inactive:i,dataKey:t,type:n,color:a,value:A2(s,t),payload:e}]},vEe=p.memo(e=>{var{dataKey:t,stroke:s,strokeWidth:a,fill:n,name:i,hide:o,unit:l,tooltipType:c}=e,d={dataDefinedOnItem:void 0,positions:void 0,settings:{stroke:s,strokeWidth:a,fill:n,dataKey:t,nameKey:void 0,name:A2(i,t),hide:o,type:c,color:n,unit:l}};return p.createElement(lQ,{tooltipEntrySettings:d})});function wEe(e){var t=Dt(Nh),{data:s,dataKey:a,background:n,allOtherBarProps:i}=e,{onMouseEnter:o,onMouseLeave:l,onClick:c}=i,d=Xj(i,uEe),h=nQ(o,a),f=iQ(l),x=oQ(c,a);if(!n||s==null)return null;var y=ob(n);return p.createElement(sl,{zIndex:$_e(n,on.barBackground)},s.map((v,w)=>{var{value:N,background:k,tooltipPosition:C}=v,E=Xj(v,hEe);if(!k)return null;var _=h(v,w),T=f(v,w),A=x(v,w),P=si(si(si(si(si({option:n,isActive:String(w)===t},E),{},{fill:"#eee"},k),y),p2(d,v,w)),{},{onMouseEnter:_,onMouseLeave:T,onClick:A,dataKey:a,index:w,className:"recharts-bar-background-rectangle"});return p.createElement(Yj,hd({key:"background-bar-".concat(w)},P))}))}function jEe(e){var{showLabels:t,children:s,rects:a}=e,n=a==null?void 0:a.map(i=>{var o={x:i.x,y:i.y,width:i.width,lowerWidth:i.width,upperWidth:i.width,height:i.height};return si(si({},o),{},{value:i.value,payload:i.payload,parentViewBox:i.parentViewBox,viewBox:o,fill:i.fill})});return p.createElement(GX,{value:t?n:void 0},s)}function NEe(e){var{shape:t,activeBar:s,baseProps:a,entry:n,index:i,dataKey:o}=e,l=Dt(Nh),c=Dt(vX),d=s&&String(i)===l&&(c==null||o===c),h=d?s:t;return d?p.createElement(sl,{zIndex:on.activeBar},p.createElement(Yj,hd({},a,{name:String(a.name)},n,{isActive:d,option:h,index:i,dataKey:o}))):p.createElement(Yj,hd({},a,{name:String(a.name)},n,{isActive:d,option:h,index:i,dataKey:o}))}function kEe(e){var{shape:t,baseProps:s,entry:a,index:n,dataKey:i}=e;return p.createElement(Yj,hd({},s,{name:String(s.name)},a,{isActive:!1,option:t,index:n,dataKey:i}))}function SEe(e){var t,{data:s,props:a}=e,n=(t=Go(a))!==null&&t!==void 0?t:{},{id:i}=n,o=Xj(n,mEe),{shape:l,dataKey:c,activeBar:d}=a,{onMouseEnter:h,onClick:f,onMouseLeave:x}=a,y=Xj(a,fEe),v=nQ(h,c),w=iQ(x),N=oQ(f,c);return s?p.createElement(p.Fragment,null,s.map((k,C)=>p.createElement(ci,hd({key:"rectangle-".concat(k==null?void 0:k.x,"-").concat(k==null?void 0:k.y,"-").concat(k==null?void 0:k.value,"-").concat(C),className:"recharts-bar-rectangle"},p2(y,k,C),{onMouseEnter:v(k,C),onMouseLeave:w(k,C),onClick:N(k,C)}),d?p.createElement(NEe,{shape:l,activeBar:d,baseProps:o,entry:k,index:C,dataKey:c}):p.createElement(kEe,{shape:l,baseProps:o,entry:k,index:C,dataKey:c})))):null}function CEe(e){var{props:t,previousRectanglesRef:s}=e,{data:a,layout:n,isAnimationActive:i,animationBegin:o,animationDuration:l,animationEasing:c,onAnimationEnd:d,onAnimationStart:h}=t,f=s.current,x=$2(t,"recharts-bar-"),[y,v]=p.useState(!1),w=!y,N=p.useCallback(()=>{typeof d=="function"&&d(),v(!1)},[d]),k=p.useCallback(()=>{typeof h=="function"&&h(),v(!0)},[h]);return p.createElement(jEe,{showLabels:w,rects:a},p.createElement(B2,{animationId:x,begin:o,duration:l,isActive:i,easing:c,onAnimationEnd:N,onAnimationStart:k,key:x},C=>{var E=C===1?a:a==null?void 0:a.map((_,T)=>{var A=f&&f[T];if(A)return si(si({},_),{},{x:Ks(A.x,_.x,C),y:Ks(A.y,_.y,C),width:Ks(A.width,_.width,C),height:Ks(A.height,_.height,C)});if(n==="horizontal"){var P=Ks(0,_.height,C),M=Ks(_.stackedBarStart,_.y,C);return si(si({},_),{},{y:M,height:P})}var R=Ks(0,_.width,C),$=Ks(_.stackedBarStart,_.x,C);return si(si({},_),{},{width:R,x:$})});return C>0&&(s.current=E??null),E==null?null:p.createElement(ci,null,p.createElement(SEe,{props:t,data:E}))}),p.createElement(XX,{label:t.label}),t.children)}function _Ee(e){var t=p.useRef(null);return p.createElement(CEe,{previousRectanglesRef:t,props:e})}var pQ=0,EEe=(e,t)=>{var s=Array.isArray(e.value)?e.value[1]:e.value;return{x:e.x,y:e.y,value:s,errorVal:za(e,t)}};class AEe extends p.PureComponent{render(){var{hide:t,data:s,dataKey:a,className:n,xAxisId:i,yAxisId:o,needClip:l,background:c,id:d}=this.props;if(t||s==null)return null;var h=fe("recharts-bar",n),f=d;return p.createElement(ci,{className:h,id:d},l&&p.createElement("defs",null,p.createElement(gQ,{clipPathId:f,xAxisId:i,yAxisId:o})),p.createElement(ci,{className:"recharts-bar-rectangles",clipPath:l?"url(#clipPath-".concat(f,")"):void 0},p.createElement(wEe,{data:s,dataKey:a,background:c,allOtherBarProps:this.props}),p.createElement(_Ee,this.props)))}}var PEe={activeBar:!1,animationBegin:0,animationDuration:400,animationEasing:"ease",background:!1,hide:!1,isAnimationActive:"auto",label:!1,legendType:"rect",minPointSize:pQ,xAxisId:0,yAxisId:0,zIndex:on.bar};function TEe(e){var{xAxisId:t,yAxisId:s,hide:a,legendType:n,minPointSize:i,activeBar:o,animationBegin:l,animationDuration:c,animationEasing:d,isAnimationActive:h}=e,{needClip:f}=aT(t,s),x=jx(),y=Gn(),v=w3e(e.children,DX),w=Dt(C=>n6e(C,t,s,y,e.id,v));if(x!=="vertical"&&x!=="horizontal")return null;var N,k=w==null?void 0:w[0];return k==null||k.height==null||k.width==null?N=0:N=x==="vertical"?k.height/2:k.width/2,p.createElement(B_e,{xAxisId:t,yAxisId:s,data:w,dataPointFormatter:EEe,errorBarOffset:N},p.createElement(AEe,hd({},e,{layout:x,needClip:f,data:w,xAxisId:t,yAxisId:s,hide:a,legendType:n,minPointSize:i,activeBar:o,animationBegin:l,animationDuration:c,animationEasing:d,isAnimationActive:h})))}function IEe(e){var{layout:t,barSettings:{dataKey:s,minPointSize:a},pos:n,bandSize:i,xAxis:o,yAxis:l,xAxisTicks:c,yAxisTicks:d,stackedData:h,displayedData:f,offset:x,cells:y,parentViewBox:v,dataStartIndex:w}=e,N=t==="horizontal"?l:o,k=h?N.scale.domain():null,C=U1e({numericAxis:N}),E=N.scale(C);return f.map((_,T)=>{var A,P,M,R,$,W;h?A=M1e(h[T+w],k):(A=za(_,s),Array.isArray(A)||(A=[C,A]));var I=T_e(a,pQ)(A[1],T);if(t==="horizontal"){var B,[O,F]=[l.scale(A[0]),l.scale(A[1])];P=v7({axis:o,ticks:c,bandSize:i,offset:n.offset,entry:_,index:T}),M=(B=F??O)!==null&&B!==void 0?B:void 0,R=n.size;var q=O-F;if($=Yo(q)?0:q,W={x:P,y:x.top,width:R,height:x.height},Math.abs(I)>0&&Math.abs($)<Math.abs(I)){var H=Ai($||I)*(Math.abs(I)-Math.abs($));M-=H,$+=H}}else{var[K,V]=[o.scale(A[0]),o.scale(A[1])];if(P=K,M=v7({axis:l,ticks:d,bandSize:i,offset:n.offset,entry:_,index:T}),R=V-K,$=n.size,W={x:x.left,y:M,width:x.width,height:$},Math.abs(I)>0&&Math.abs(R)<Math.abs(I)){var z=Ai(R||I)*(Math.abs(I)-Math.abs(R));R+=z}}if(P==null||M==null||R==null||$==null)return null;var G=si(si({},_),{},{stackedBarStart:E,x:P,y:M,width:R,height:$,value:h?A:A[1],payload:_,background:W,tooltipPosition:{x:P+R/2,y:M+$/2},parentViewBox:v},y&&y[T]&&y[T].props);return G}).filter(Boolean)}function DEe(e){var t=Mn(e,PEe),s=Gn();return p.createElement(uQ,{id:t.id,type:"bar"},a=>p.createElement(p.Fragment,null,p.createElement(cQ,{legendPayload:bEe(t)}),p.createElement(vEe,{dataKey:t.dataKey,stroke:t.stroke,strokeWidth:t.strokeWidth,fill:t.fill,name:t.name,hide:t.hide,unit:t.unit,tooltipType:t.tooltipType}),p.createElement(mQ,{type:"bar",id:a,data:void 0,xAxisId:t.xAxisId,yAxisId:t.yAxisId,zAxisId:0,dataKey:t.dataKey,stackId:FK(t.stackId),hide:t.hide,barSize:t.barSize,minPointSize:t.minPointSize,maxBarSize:t.maxBarSize,isPanorama:s}),p.createElement(sl,{zIndex:t.zIndex},p.createElement(TEe,hd({},t,{id:a})))))}var Qj=p.memo(DEe,gk);Qj.displayName="Bar";function ML(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),s.push.apply(s,a)}return s}function Yv(e){for(var t=1;t<arguments.length;t++){var s=arguments[t]!=null?arguments[t]:{};t%2?ML(Object(s),!0).forEach(function(a){OEe(e,a,s[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):ML(Object(s)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(s,a))})}return e}function OEe(e,t,s){return(t=REe(t))in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function REe(e){var t=MEe(e,"string");return typeof t=="symbol"?t:t+""}function MEe(e,t){if(typeof e!="object"||!e)return e;var s=e[Symbol.toPrimitive];if(s!==void 0){var a=s.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var LEe=(e,t)=>t,FEe=(e,t,s)=>s,BEe=(e,t,s,a)=>a,$Ee=(e,t,s,a,n)=>n,Ab=Le([rk,$Ee],(e,t)=>e.filter(s=>s.type==="bar").find(s=>s.id===t)),UEe=Le([Ab],e=>e==null?void 0:e.maxBarSize),VEe=(e,t,s,a,n,i)=>i,LL=(e,t,s)=>{var a=s??e;if(!Qs(a))return Il(a,t,0)},WEe=Le([Br,rk,LEe,FEe,BEe],(e,t,s,a,n)=>t.filter(i=>e==="horizontal"?i.xAxisId===s:i.yAxisId===a).filter(i=>i.isPanorama===n).filter(i=>i.hide===!1).filter(i=>i.type==="bar")),zEe=(e,t,s,a)=>{var n=Br(e);return n==="horizontal"?by(e,"yAxis",s,a):by(e,"xAxis",t,a)},qEe=(e,t,s)=>{var a=Br(e);return a==="horizontal"?q8(e,"xAxis",t):q8(e,"yAxis",s)},HEe=(e,t,s)=>{var a={},n=e.filter(J2),i=e.filter(d=>d.stackId==null),o=n.reduce((d,h)=>(d[h.stackId]||(d[h.stackId]=[]),d[h.stackId].push(h),d),a),l=Object.entries(o).map(d=>{var[h,f]=d,x=f.map(v=>v.dataKey),y=LL(t,s,f[0].barSize);return{stackId:h,dataKeys:x,barSize:y}}),c=i.map(d=>{var h=[d.dataKey].filter(x=>x!=null),f=LL(t,s,d.barSize);return{stackId:void 0,dataKeys:h,barSize:f}});return[...l,...c]},KEe=Le([WEe,s4e,qEe],HEe),GEe=(e,t,s,a,n)=>{var i,o,l=Ab(e,t,s,a,n);if(l!=null){var c=Br(e),d=cY(e),{maxBarSize:h}=l,f=Qs(h)?d:h,x,y;return c==="horizontal"?(x=Fu(e,"xAxis",t,a),y=Lu(e,"xAxis",t,a)):(x=Fu(e,"yAxis",s,a),y=Lu(e,"yAxis",s,a)),(i=(o=Yf(x,y,!0))!==null&&o!==void 0?o:f)!==null&&i!==void 0?i:0}},yQ=(e,t,s,a)=>{var n=Br(e),i,o;return n==="horizontal"?(i=Fu(e,"xAxis",t,a),o=Lu(e,"xAxis",t,a)):(i=Fu(e,"yAxis",s,a),o=Lu(e,"yAxis",s,a)),Yf(i,o)};function YEe(e,t,s,a,n){var i=a.length;if(!(i<1)){var o=Il(e,s,0,!0),l,c=[];if(Ds(a[0].barSize)){var d=!1,h=s/i,f=a.reduce((k,C)=>k+(C.barSize||0),0);f+=(i-1)*o,f>=s&&(f-=(i-1)*o,o=0),f>=s&&h>0&&(d=!0,h*=.9,f=i*h);var x=(s-f)/2>>0,y={offset:x-o,size:0};l=a.reduce((k,C)=>{var E,_={stackId:C.stackId,dataKeys:C.dataKeys,position:{offset:y.offset+y.size+o,size:d?h:(E=C.barSize)!==null&&E!==void 0?E:0}},T=[...k,_];return y=T[T.length-1].position,T},c)}else{var v=Il(t,s,0,!0);s-2*v-(i-1)*o<=0&&(o=0);var w=(s-2*v-(i-1)*o)/i;w>1&&(w>>=0);var N=Ds(n)?Math.min(w,n):w;l=a.reduce((k,C,E)=>[...k,{stackId:C.stackId,dataKeys:C.dataKeys,position:{offset:v+(w+o)*E+(w-N)/2,size:N}}],c)}return l}}var XEe=(e,t,s,a,n,i,o)=>{var l=Qs(o)?t:o,c=YEe(s,a,n!==i?n:i,e,l);return n!==i&&c!=null&&(c=c.map(d=>Yv(Yv({},d),{},{position:Yv(Yv({},d.position),{},{offset:d.position.offset-n/2})}))),c},QEe=Le([KEe,cY,r4e,dY,GEe,yQ,UEe],XEe),ZEe=(e,t,s,a)=>Fu(e,"xAxis",t,a),JEe=(e,t,s,a)=>Fu(e,"yAxis",s,a),e6e=(e,t,s,a)=>Lu(e,"xAxis",t,a),t6e=(e,t,s,a)=>Lu(e,"yAxis",s,a),r6e=Le([QEe,Ab],(e,t)=>{if(!(e==null||t==null)){var s=e.find(a=>a.stackId===t.stackId&&t.dataKey!=null&&a.dataKeys.includes(t.dataKey));if(s!=null)return s.position}}),s6e=(e,t)=>{var s=Z2(t);if(!(!e||s==null||t==null)){var{stackId:a}=t;if(a!=null){var n=e[a];if(n){var{stackedData:i}=n;if(i)return i.find(o=>o.key===s)}}}},a6e=Le([zEe,Ab],s6e),n6e=Le([mn,XA,ZEe,JEe,e6e,t6e,r6e,Br,K2,yQ,a6e,Ab,VEe],(e,t,s,a,n,i,o,l,c,d,h,f,x)=>{var{chartData:y,dataStartIndex:v,dataEndIndex:w}=c;if(!(f==null||o==null||t==null||l!=="horizontal"&&l!=="vertical"||s==null||a==null||n==null||i==null||d==null)){var{data:N}=f,k;if(N!=null&&N.length>0?k=N:k=y==null?void 0:y.slice(v,w+1),k!=null)return IEe({layout:l,barSettings:f,pos:o,parentViewBox:t,bandSize:d,xAxis:s,yAxis:a,xAxisTicks:n,yAxisTicks:i,stackedData:h,displayedData:k,offset:e,cells:x,dataStartIndex:v})}}),i6e=e=>{var{chartData:t}=e,s=ea(),a=Gn();return p.useEffect(()=>a?()=>{}:(s(sL(t)),()=>{s(sL(void 0))}),[t,s,a]),null},FL={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},bQ=Wi({name:"brush",initialState:FL,reducers:{setBrushSettings(e,t){return t.payload==null?FL:t.payload}}}),{setBrushSettings:i$e}=bQ.actions,o6e=bQ.reducer;function l6e(e,t,s){return(t=c6e(t))in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function c6e(e){var t=d6e(e,"string");return typeof t=="symbol"?t:t+""}function d6e(e,t){if(typeof e!="object"||!e)return e;var s=e[Symbol.toPrimitive];if(s!==void 0){var a=s.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class nT{static create(t){return new nT(t)}constructor(t){this.scale=t}get domain(){return this.scale.domain}get range(){return this.scale.range}get rangeMin(){return this.range()[0]}get rangeMax(){return this.range()[1]}get bandwidth(){return this.scale.bandwidth}apply(t){var{bandAware:s,position:a}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t!==void 0){if(a)switch(a){case"start":return this.scale(t);case"middle":{var n=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+n}case"end":{var i=this.bandwidth?this.bandwidth():0;return this.scale(t)+i}default:return this.scale(t)}if(s){var o=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+o}return this.scale(t)}}isInRange(t){var s=this.range(),a=s[0],n=s[s.length-1];return a<=n?t>=a&&t<=n:t>=n&&t<=a}}l6e(nT,"EPS",1e-4);function u6e(e){return(e%180+180)%180}var h6e=function(t){var{width:s,height:a}=t,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=u6e(n),o=i*Math.PI/180,l=Math.atan(a/s),c=o>l&&o<Math.PI-l?a/Math.sin(o):s/Math.cos(o);return Math.abs(c)},m6e={dots:[],areas:[],lines:[]},vQ=Wi({name:"referenceElements",initialState:m6e,reducers:{addDot:(e,t)=>{e.dots.push(t.payload)},removeDot:(e,t)=>{var s=El(e).dots.findIndex(a=>a===t.payload);s!==-1&&e.dots.splice(s,1)},addArea:(e,t)=>{e.areas.push(t.payload)},removeArea:(e,t)=>{var s=El(e).areas.findIndex(a=>a===t.payload);s!==-1&&e.areas.splice(s,1)},addLine:(e,t)=>{e.lines.push(t.payload)},removeLine:(e,t)=>{var s=El(e).lines.findIndex(a=>a===t.payload);s!==-1&&e.lines.splice(s,1)}}}),{addDot:o$e,removeDot:l$e,addArea:c$e,removeArea:d$e,addLine:u$e,removeLine:h$e}=vQ.actions,f6e=vQ.reducer,x6e=p.createContext(void 0),g6e=e=>{var{children:t}=e,[s]=p.useState("".concat(iy("recharts"),"-clip")),a=sT();if(a==null)return null;var{x:n,y:i,width:o,height:l}=a;return p.createElement(x6e.Provider,{value:s},p.createElement("defs",null,p.createElement("clipPath",{id:s},p.createElement("rect",{x:n,y:i,height:l,width:o}))),t)};function wQ(e,t){if(t<1)return[];if(t===1)return e;for(var s=[],a=0;a<e.length;a+=t)s.push(e[a]);return s}function p6e(e,t,s){var a={width:e.width+t.width,height:e.height+t.height};return h6e(a,s)}function y6e(e,t,s){var a=s==="width",{x:n,y:i,width:o,height:l}=e;return t===1?{start:a?n:i,end:a?n+o:i+l}:{start:a?n+o:i+l,end:a?n:i}}function Zj(e,t,s,a,n){if(e*t<e*a||e*t>e*n)return!1;var i=s();return e*(t-e*i/2-a)>=0&&e*(t+e*i/2-n)<=0}function b6e(e,t){return wQ(e,t+1)}function v6e(e,t,s,a,n){for(var i=(a||[]).slice(),{start:o,end:l}=t,c=0,d=1,h=o,f=function(){var v=a==null?void 0:a[c];if(v===void 0)return{v:wQ(a,d)};var w=c,N,k=()=>(N===void 0&&(N=s(v,w)),N),C=v.coordinate,E=c===0||Zj(e,C,k,h,l);E||(c=0,h=o,d+=1),E&&(h=C+e*(k()/2+n),c+=d)},x;d<=i.length;)if(x=f(),x)return x.v;return[]}function BL(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),s.push.apply(s,a)}return s}function Vn(e){for(var t=1;t<arguments.length;t++){var s=arguments[t]!=null?arguments[t]:{};t%2?BL(Object(s),!0).forEach(function(a){w6e(e,a,s[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):BL(Object(s)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(s,a))})}return e}function w6e(e,t,s){return(t=j6e(t))in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function j6e(e){var t=N6e(e,"string");return typeof t=="symbol"?t:t+""}function N6e(e,t){if(typeof e!="object"||!e)return e;var s=e[Symbol.toPrimitive];if(s!==void 0){var a=s.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function k6e(e,t,s,a,n){for(var i=(a||[]).slice(),o=i.length,{start:l}=t,{end:c}=t,d=function(x){var y=i[x],v,w=()=>(v===void 0&&(v=s(y,x)),v);if(x===o-1){var N=e*(y.coordinate+e*w()/2-c);i[x]=y=Vn(Vn({},y),{},{tickCoord:N>0?y.coordinate-N*e:y.coordinate})}else i[x]=y=Vn(Vn({},y),{},{tickCoord:y.coordinate});if(y.tickCoord!=null){var k=Zj(e,y.tickCoord,w,l,c);k&&(c=y.tickCoord-e*(w()/2+n),i[x]=Vn(Vn({},y),{},{isShow:!0}))}},h=o-1;h>=0;h--)d(h);return i}function S6e(e,t,s,a,n,i){var o=(a||[]).slice(),l=o.length,{start:c,end:d}=t;if(i){var h=a[l-1],f=s(h,l-1),x=e*(h.coordinate+e*f/2-d);if(o[l-1]=h=Vn(Vn({},h),{},{tickCoord:x>0?h.coordinate-x*e:h.coordinate}),h.tickCoord!=null){var y=Zj(e,h.tickCoord,()=>f,c,d);y&&(d=h.tickCoord-e*(f/2+n),o[l-1]=Vn(Vn({},h),{},{isShow:!0}))}}for(var v=i?l-1:l,w=function(C){var E=o[C],_,T=()=>(_===void 0&&(_=s(E,C)),_);if(C===0){var A=e*(E.coordinate-e*T()/2-c);o[C]=E=Vn(Vn({},E),{},{tickCoord:A<0?E.coordinate-A*e:E.coordinate})}else o[C]=E=Vn(Vn({},E),{},{tickCoord:E.coordinate});if(E.tickCoord!=null){var P=Zj(e,E.tickCoord,T,c,d);P&&(c=E.tickCoord+e*(T()/2+n),o[C]=Vn(Vn({},E),{},{isShow:!0}))}},N=0;N<v;N++)w(N);return o}function iT(e,t,s){var{tick:a,ticks:n,viewBox:i,minTickGap:o,orientation:l,interval:c,tickFormatter:d,unit:h,angle:f}=e;if(!n||!n.length||!a)return[];if(vt(c)||Nx.isSsr){var x;return(x=b6e(n,vt(c)?c:0))!==null&&x!==void 0?x:[]}var y=[],v=l==="top"||l==="bottom"?"width":"height",w=h&&v==="width"?xp(h,{fontSize:t,letterSpacing:s}):{width:0,height:0},N=(E,_)=>{var T=typeof d=="function"?d(E.value,_):E.value;return v==="width"?p6e(xp(T,{fontSize:t,letterSpacing:s}),w,f):xp(T,{fontSize:t,letterSpacing:s})[v]},k=n.length>=2?Ai(n[1].coordinate-n[0].coordinate):1,C=y6e(i,k,v);return c==="equidistantPreserveStart"?v6e(k,C,N,n,o):(c==="preserveStart"||c==="preserveStartEnd"?y=S6e(k,C,N,n,o,c==="preserveStartEnd"):y=k6e(k,C,N,n,o),y.filter(E=>E.isShow))}var C6e=e=>{var{ticks:t,label:s,labelGapWithTick:a=5,tickSize:n=0,tickMargin:i=0}=e,o=0;if(t){Array.from(t).forEach(h=>{if(h){var f=h.getBoundingClientRect();f.width>o&&(o=f.width)}});var l=s?s.getBoundingClientRect().width:0,c=n+i,d=o+c+l+(s?a:0);return Math.round(d)}return 0},_6e=["axisLine","width","height","className","hide","ticks","axisType"];function E6e(e,t){if(e==null)return{};var s,a,n=A6e(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)s=i[a],t.indexOf(s)===-1&&{}.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function A6e(e,t){if(e==null)return{};var s={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;s[a]=e[a]}return s}function kh(){return kh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)({}).hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e},kh.apply(null,arguments)}function $L(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),s.push.apply(s,a)}return s}function Ca(e){for(var t=1;t<arguments.length;t++){var s=arguments[t]!=null?arguments[t]:{};t%2?$L(Object(s),!0).forEach(function(a){P6e(e,a,s[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):$L(Object(s)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(s,a))})}return e}function P6e(e,t,s){return(t=T6e(t))in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function T6e(e){var t=I6e(e,"string");return typeof t=="symbol"?t:t+""}function I6e(e,t){if(typeof e!="object"||!e)return e;var s=e[Symbol.toPrimitive];if(s!==void 0){var a=s.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Yc={x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd",zIndex:on.axis};function D6e(e){var{x:t,y:s,width:a,height:n,orientation:i,mirror:o,axisLine:l,otherSvgProps:c}=e;if(!l)return null;var d=Ca(Ca(Ca({},c),Go(l)),{},{fill:"none"});if(i==="top"||i==="bottom"){var h=+(i==="top"&&!o||i==="bottom"&&o);d=Ca(Ca({},d),{},{x1:t,y1:s+h*n,x2:t+a,y2:s+h*n})}else{var f=+(i==="left"&&!o||i==="right"&&o);d=Ca(Ca({},d),{},{x1:t+f*a,y1:s,x2:t+f*a,y2:s+n})}return p.createElement("line",kh({},d,{className:fe("recharts-cartesian-axis-line",qf(l,"className"))}))}function O6e(e,t,s,a,n,i,o,l,c){var d,h,f,x,y,v,w=l?-1:1,N=e.tickSize||o,k=vt(e.tickCoord)?e.tickCoord:e.coordinate;switch(i){case"top":d=h=e.coordinate,x=s+ +!l*n,f=x-w*N,v=f-w*c,y=k;break;case"left":f=x=e.coordinate,h=t+ +!l*a,d=h-w*N,y=d-w*c,v=k;break;case"right":f=x=e.coordinate,h=t+ +l*a,d=h+w*N,y=d+w*c,v=k;break;default:d=h=e.coordinate,x=s+ +l*n,f=x+w*N,v=f+w*c,y=k;break}return{line:{x1:d,y1:f,x2:h,y2:x},tick:{x:y,y:v}}}function R6e(e,t){switch(e){case"left":return t?"start":"end";case"right":return t?"end":"start";default:return"middle"}}function M6e(e,t){switch(e){case"left":case"right":return"middle";case"top":return t?"start":"end";default:return t?"end":"start"}}function L6e(e){var{option:t,tickProps:s,value:a}=e,n,i=fe(s.className,"recharts-cartesian-axis-tick-value");if(p.isValidElement(t))n=p.cloneElement(t,Ca(Ca({},s),{},{className:i}));else if(typeof t=="function")n=t(Ca(Ca({},s),{},{className:i}));else{var o="recharts-cartesian-axis-tick-value";typeof t!="boolean"&&(o=fe(o,t==null?void 0:t.className)),n=p.createElement(ZP,kh({},s,{className:o}),a)}return n}var F6e=p.forwardRef((e,t)=>{var{ticks:s=[],tick:a,tickLine:n,stroke:i,tickFormatter:o,unit:l,padding:c,tickTextProps:d,orientation:h,mirror:f,x,y,width:v,height:w,tickSize:N,tickMargin:k,fontSize:C,letterSpacing:E,getTicksConfig:_,events:T,axisType:A}=e,P=iT(Ca(Ca({},_),{},{ticks:s}),C,E),M=R6e(h,f),R=M6e(h,f),$=Go(_),W=ob(a),I={};typeof n=="object"&&(I=n);var B=Ca(Ca({},$),{},{fill:"none"},I),O=P.map(H=>Ca({entry:H},O6e(H,x,y,v,w,h,N,f,k))),F=O.map(H=>{var{entry:K,line:V}=H;return p.createElement(ci,{className:"recharts-cartesian-axis-tick",key:"tick-".concat(K.value,"-").concat(K.coordinate,"-").concat(K.tickCoord)},n&&p.createElement("line",kh({},B,V,{className:fe("recharts-cartesian-axis-tick-line",qf(n,"className"))})))}),q=O.map((H,K)=>{var{entry:V,tick:z}=H,G=Ca(Ca(Ca(Ca({textAnchor:M,verticalAnchor:R},$),{},{stroke:"none",fill:i},W),z),{},{index:K,payload:V,visibleTicksCount:P.length,tickFormatter:o,padding:c},d);return p.createElement(ci,kh({className:"recharts-cartesian-axis-tick-label",key:"tick-label-".concat(V.value,"-").concat(V.coordinate,"-").concat(V.tickCoord)},p2(T,V,K)),a&&p.createElement(L6e,{option:a,tickProps:G,value:"".concat(typeof o=="function"?o(V.value,K):V.value).concat(l||"")}))});return p.createElement("g",{className:"recharts-cartesian-axis-ticks recharts-".concat(A,"-ticks")},q.length>0&&p.createElement(sl,{zIndex:on.label},p.createElement("g",{className:"recharts-cartesian-axis-tick-labels recharts-".concat(A,"-tick-labels"),ref:t},q)),F.length>0&&p.createElement("g",{className:"recharts-cartesian-axis-tick-lines recharts-".concat(A,"-tick-lines")},F))}),B6e=p.forwardRef((e,t)=>{var{axisLine:s,width:a,height:n,className:i,hide:o,ticks:l,axisType:c}=e,d=E6e(e,_6e),[h,f]=p.useState(""),[x,y]=p.useState(""),v=p.useRef(null);p.useImperativeHandle(t,()=>({getCalculatedWidth:()=>{var N;return C6e({ticks:v.current,label:(N=e.labelRef)===null||N===void 0?void 0:N.current,labelGapWithTick:5,tickSize:e.tickSize,tickMargin:e.tickMargin})}}));var w=p.useCallback(N=>{if(N){var k=N.getElementsByClassName("recharts-cartesian-axis-tick-value");v.current=k;var C=k[0];if(C){var E=window.getComputedStyle(C),_=E.fontSize,T=E.letterSpacing;(_!==h||T!==x)&&(f(_),y(T))}}},[h,x]);return o||a!=null&&a<=0||n!=null&&n<=0?null:p.createElement(sl,{zIndex:e.zIndex},p.createElement(ci,{className:fe("recharts-cartesian-axis",i)},p.createElement(D6e,{x:e.x,y:e.y,width:a,height:n,orientation:e.orientation,mirror:e.mirror,axisLine:s,otherSvgProps:Go(e)}),p.createElement(F6e,{ref:w,axisType:c,events:d,fontSize:h,getTicksConfig:e,height:e.height,letterSpacing:x,mirror:e.mirror,orientation:e.orientation,padding:e.padding,stroke:e.stroke,tick:e.tick,tickFormatter:e.tickFormatter,tickLine:e.tickLine,tickMargin:e.tickMargin,tickSize:e.tickSize,tickTextProps:e.tickTextProps,ticks:l,unit:e.unit,width:e.width,x:e.x,y:e.y}),p.createElement(Y5e,{x:e.x,y:e.y,width:e.width,height:e.height,lowerWidth:e.width,upperWidth:e.width},p.createElement(n3e,{label:e.label,labelRef:e.labelRef}),e.children)))}),oT=p.forwardRef((e,t)=>{var s=Mn(e,Yc);return p.createElement(B6e,kh({},s,{ref:t}))});oT.displayName="CartesianAxis";var $6e=["x1","y1","x2","y2","key"],U6e=["offset"],V6e=["xAxisId","yAxisId"],W6e=["xAxisId","yAxisId"];function UL(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),s.push.apply(s,a)}return s}function zn(e){for(var t=1;t<arguments.length;t++){var s=arguments[t]!=null?arguments[t]:{};t%2?UL(Object(s),!0).forEach(function(a){z6e(e,a,s[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):UL(Object(s)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(s,a))})}return e}function z6e(e,t,s){return(t=q6e(t))in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function q6e(e){var t=H6e(e,"string");return typeof t=="symbol"?t:t+""}function H6e(e,t){if(typeof e!="object"||!e)return e;var s=e[Symbol.toPrimitive];if(s!==void 0){var a=s.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function $0(){return $0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)({}).hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e},$0.apply(null,arguments)}function Jj(e,t){if(e==null)return{};var s,a,n=K6e(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)s=i[a],t.indexOf(s)===-1&&{}.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function K6e(e,t){if(e==null)return{};var s={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;s[a]=e[a]}return s}var G6e=e=>{var{fill:t}=e;if(!t||t==="none")return null;var{fillOpacity:s,x:a,y:n,width:i,height:o,ry:l}=e;return p.createElement("rect",{x:a,y:n,ry:l,width:i,height:o,stroke:"none",fill:t,fillOpacity:s,className:"recharts-cartesian-grid-bg"})};function jQ(e){var{option:t,lineItemProps:s}=e,a;if(p.isValidElement(t))a=p.cloneElement(t,s);else if(typeof t=="function")a=t(s);else{var n,{x1:i,y1:o,x2:l,y2:c,key:d}=s,h=Jj(s,$6e),f=(n=Go(h))!==null&&n!==void 0?n:{},{offset:x}=f,y=Jj(f,U6e);a=p.createElement("line",$0({},y,{x1:i,y1:o,x2:l,y2:c,fill:"none",key:d}))}return a}function Y6e(e){var{x:t,width:s,horizontal:a=!0,horizontalPoints:n}=e;if(!a||!n||!n.length)return null;var{xAxisId:i,yAxisId:o}=e,l=Jj(e,V6e),c=n.map((d,h)=>{var f=zn(zn({},l),{},{x1:t,y1:d,x2:t+s,y2:d,key:"line-".concat(h),index:h});return p.createElement(jQ,{key:"line-".concat(h),option:a,lineItemProps:f})});return p.createElement("g",{className:"recharts-cartesian-grid-horizontal"},c)}function X6e(e){var{y:t,height:s,vertical:a=!0,verticalPoints:n}=e;if(!a||!n||!n.length)return null;var{xAxisId:i,yAxisId:o}=e,l=Jj(e,W6e),c=n.map((d,h)=>{var f=zn(zn({},l),{},{x1:d,y1:t,x2:d,y2:t+s,key:"line-".concat(h),index:h});return p.createElement(jQ,{option:a,lineItemProps:f,key:"line-".concat(h)})});return p.createElement("g",{className:"recharts-cartesian-grid-vertical"},c)}function Q6e(e){var{horizontalFill:t,fillOpacity:s,x:a,y:n,width:i,height:o,horizontalPoints:l,horizontal:c=!0}=e;if(!c||!t||!t.length||l==null)return null;var d=l.map(f=>Math.round(f+n-n)).sort((f,x)=>f-x);n!==d[0]&&d.unshift(0);var h=d.map((f,x)=>{var y=!d[x+1],v=y?n+o-f:d[x+1]-f;if(v<=0)return null;var w=x%t.length;return p.createElement("rect",{key:"react-".concat(x),y:f,x:a,height:v,width:i,stroke:"none",fill:t[w],fillOpacity:s,className:"recharts-cartesian-grid-bg"})});return p.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},h)}function Z6e(e){var{vertical:t=!0,verticalFill:s,fillOpacity:a,x:n,y:i,width:o,height:l,verticalPoints:c}=e;if(!t||!s||!s.length)return null;var d=c.map(f=>Math.round(f+n-n)).sort((f,x)=>f-x);n!==d[0]&&d.unshift(0);var h=d.map((f,x)=>{var y=!d[x+1],v=y?n+o-f:d[x+1]-f;if(v<=0)return null;var w=x%s.length;return p.createElement("rect",{key:"react-".concat(x),x:f,y:i,width:v,height:l,stroke:"none",fill:s[w],fillOpacity:a,className:"recharts-cartesian-grid-bg"})});return p.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},h)}var J6e=(e,t)=>{var{xAxis:s,width:a,height:n,offset:i}=e;return MK(iT(zn(zn(zn({},Yc),s),{},{ticks:LK(s),viewBox:{x:0,y:0,width:a,height:n}})),i.left,i.left+i.width,t)},eAe=(e,t)=>{var{yAxis:s,width:a,height:n,offset:i}=e;return MK(iT(zn(zn(zn({},Yc),s),{},{ticks:LK(s),viewBox:{x:0,y:0,width:a,height:n}})),i.top,i.top+i.height,t)},tAe={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[],xAxisId:0,yAxisId:0,syncWithTicks:!1,zIndex:on.grid};function wy(e){var t=ZA(),s=JA(),a=KK(),n=zn(zn({},Mn(e,tAe)),{},{x:vt(e.x)?e.x:a.left,y:vt(e.y)?e.y:a.top,width:vt(e.width)?e.width:a.width,height:vt(e.height)?e.height:a.height}),{xAxisId:i,yAxisId:o,x:l,y:c,width:d,height:h,syncWithTicks:f,horizontalValues:x,verticalValues:y}=n,v=Gn(),w=Dt(R=>H8(R,"xAxis",i,v)),N=Dt(R=>H8(R,"yAxis",o,v));if(!xc(d)||!xc(h)||!vt(l)||!vt(c))return null;var k=n.verticalCoordinatesGenerator||J6e,C=n.horizontalCoordinatesGenerator||eAe,{horizontalPoints:E,verticalPoints:_}=n;if((!E||!E.length)&&typeof C=="function"){var T=x&&x.length,A=C({yAxis:N?zn(zn({},N),{},{ticks:T?x:N.ticks}):void 0,width:t??d,height:s??h,offset:a},T?!0:f);wj(Array.isArray(A),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(typeof A,"]")),Array.isArray(A)&&(E=A)}if((!_||!_.length)&&typeof k=="function"){var P=y&&y.length,M=k({xAxis:w?zn(zn({},w),{},{ticks:P?y:w.ticks}):void 0,width:t??d,height:s??h,offset:a},P?!0:f);wj(Array.isArray(M),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(typeof M,"]")),Array.isArray(M)&&(_=M)}return p.createElement(sl,{zIndex:n.zIndex},p.createElement("g",{className:"recharts-cartesian-grid"},p.createElement(G6e,{fill:n.fill,fillOpacity:n.fillOpacity,x:n.x,y:n.y,width:n.width,height:n.height,ry:n.ry}),p.createElement(Q6e,$0({},n,{horizontalPoints:E})),p.createElement(Z6e,$0({},n,{verticalPoints:_})),p.createElement(Y6e,$0({},n,{offset:a,horizontalPoints:E,xAxis:w,yAxis:N})),p.createElement(X6e,$0({},n,{offset:a,verticalPoints:_,xAxis:w,yAxis:N}))))}wy.displayName="CartesianGrid";function rAe(e){var t=ob(e),s=3,a=2;if(t!=null){var{r:n,strokeWidth:i}=t,o=Number(n),l=Number(i);return(Number.isNaN(o)||o<0)&&(o=s),(Number.isNaN(l)||l<0)&&(l=a),{r:o,strokeWidth:l}}return{r:s,strokeWidth:a}}var NQ=(e,t,s,a)=>Fu(e,"xAxis",t,a),kQ=(e,t,s,a)=>Lu(e,"xAxis",t,a),SQ=(e,t,s,a)=>Fu(e,"yAxis",s,a),CQ=(e,t,s,a)=>Lu(e,"yAxis",s,a),sAe=Le([Br,NQ,SQ,kQ,CQ],(e,t,s,a,n)=>yd(e,"xAxis")?Yf(t,a,!1):Yf(s,n,!1)),aAe=(e,t,s,a,n)=>n,_Q=Le([rk,aAe],(e,t)=>e.filter(s=>s.type==="area").find(s=>s.id===t)),nAe=(e,t,s,a,n)=>{var i,o=_Q(e,t,s,a,n);if(o!=null){var l=Br(e),c=yd(l,"xAxis"),d;if(c?d=by(e,"yAxis",s,a):d=by(e,"xAxis",t,a),d!=null){var{stackId:h}=o,f=Z2(o);if(!(h==null||f==null)){var x=(i=d[h])===null||i===void 0?void 0:i.stackedData;return x==null?void 0:x.find(y=>y.key===f)}}}},iAe=Le([Br,NQ,SQ,kQ,CQ,nAe,K2,sAe,_Q,a4e],(e,t,s,a,n,i,o,l,c,d)=>{var{chartData:h,dataStartIndex:f,dataEndIndex:x}=o;if(!(c==null||e!=="horizontal"&&e!=="vertical"||t==null||s==null||a==null||n==null||a.length===0||n.length===0||l==null)){var{data:y}=c,v;if(y&&y.length>0?v=y:v=h==null?void 0:h.slice(f,x+1),v!=null)return SAe({layout:e,xAxis:t,yAxis:s,xAxisTicks:a,yAxisTicks:n,dataStartIndex:f,areaSettings:c,stackedData:i,displayedData:v,chartBaseValue:d,bandSize:l})}}),oAe=["id"],lAe=["activeDot","animationBegin","animationDuration","animationEasing","connectNulls","dot","fill","fillOpacity","hide","isAnimationActive","legendType","stroke","xAxisId","yAxisId"];function oh(){return oh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)({}).hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e},oh.apply(null,arguments)}function EQ(e,t){if(e==null)return{};var s,a,n=cAe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)s=i[a],t.indexOf(s)===-1&&{}.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function cAe(e,t){if(e==null)return{};var s={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;s[a]=e[a]}return s}function VL(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),s.push.apply(s,a)}return s}function qm(e){for(var t=1;t<arguments.length;t++){var s=arguments[t]!=null?arguments[t]:{};t%2?VL(Object(s),!0).forEach(function(a){dAe(e,a,s[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):VL(Object(s)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(s,a))})}return e}function dAe(e,t,s){return(t=uAe(t))in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function uAe(e){var t=hAe(e,"string");return typeof t=="symbol"?t:t+""}function hAe(e,t){if(typeof e!="object"||!e)return e;var s=e[Symbol.toPrimitive];if(s!==void 0){var a=s.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function eN(e,t){return e&&e!=="none"?e:t}var mAe=e=>{var{dataKey:t,name:s,stroke:a,fill:n,legendType:i,hide:o}=e;return[{inactive:o,dataKey:t,type:i,color:eN(a,n),value:A2(s,t),payload:e}]},fAe=p.memo(e=>{var{dataKey:t,data:s,stroke:a,strokeWidth:n,fill:i,name:o,hide:l,unit:c,tooltipType:d}=e,h={dataDefinedOnItem:s,positions:void 0,settings:{stroke:a,strokeWidth:n,fill:i,dataKey:t,nameKey:void 0,name:A2(o,t),hide:l,type:d,color:eN(a,i),unit:c}};return p.createElement(lQ,{tooltipEntrySettings:h})});function xAe(e){var{clipPathId:t,points:s,props:a}=e,{needClip:n,dot:i,dataKey:o}=a,l=Go(a);return p.createElement(r_e,{points:s,dot:i,className:"recharts-area-dots",dotClassName:"recharts-area-dot",dataKey:o,baseProps:l,needClip:n,clipPathId:t})}function gAe(e){var{showLabels:t,children:s,points:a}=e,n=a.map(i=>{var o,l,c={x:(o=i.x)!==null&&o!==void 0?o:0,y:(l=i.y)!==null&&l!==void 0?l:0,width:0,lowerWidth:0,upperWidth:0,height:0};return qm(qm({},c),{},{value:i.value,payload:i.payload,parentViewBox:void 0,viewBox:c,fill:void 0})});return p.createElement(GX,{value:t?n:void 0},s)}function WL(e){var{points:t,baseLine:s,needClip:a,clipPathId:n,props:i}=e,{layout:o,type:l,stroke:c,connectNulls:d,isRange:h}=i,{id:f}=i,x=EQ(i,oAe),y=Go(x),v=li(x);return p.createElement(p.Fragment,null,(t==null?void 0:t.length)>1&&p.createElement(ci,{clipPath:a?"url(#clipPath-".concat(n,")"):void 0},p.createElement(fp,oh({},v,{id:f,points:t,connectNulls:d,type:l,baseLine:s,layout:o,stroke:"none",className:"recharts-area-area"})),c!=="none"&&p.createElement(fp,oh({},y,{className:"recharts-area-curve",layout:o,type:l,connectNulls:d,fill:"none",points:t})),c!=="none"&&h&&p.createElement(fp,oh({},y,{className:"recharts-area-curve",layout:o,type:l,connectNulls:d,fill:"none",points:s}))),p.createElement(xAe,{points:t,props:x,clipPathId:n}))}function pAe(e){var{alpha:t,baseLine:s,points:a,strokeWidth:n}=e,i=a[0].y,o=a[a.length-1].y;if(!Ds(i)||!Ds(o))return null;var l=t*Math.abs(i-o),c=Math.max(...a.map(d=>d.x||0));return vt(s)?c=Math.max(s,c):s&&Array.isArray(s)&&s.length&&(c=Math.max(...s.map(d=>d.x||0),c)),vt(c)?p.createElement("rect",{x:0,y:i<o?i:i-l,width:c+(n?parseInt("".concat(n),10):1),height:Math.floor(l)}):null}function yAe(e){var{alpha:t,baseLine:s,points:a,strokeWidth:n}=e,i=a[0].x,o=a[a.length-1].x;if(!Ds(i)||!Ds(o))return null;var l=t*Math.abs(i-o),c=Math.max(...a.map(d=>d.y||0));return vt(s)?c=Math.max(s,c):s&&Array.isArray(s)&&s.length&&(c=Math.max(...s.map(d=>d.y||0),c)),vt(c)?p.createElement("rect",{x:i<o?i:i-l,y:0,width:l,height:Math.floor(c+(n?parseInt("".concat(n),10):1))}):null}function bAe(e){var{alpha:t,layout:s,points:a,baseLine:n,strokeWidth:i}=e;return s==="vertical"?p.createElement(pAe,{alpha:t,points:a,baseLine:n,strokeWidth:i}):p.createElement(yAe,{alpha:t,points:a,baseLine:n,strokeWidth:i})}function vAe(e){var{needClip:t,clipPathId:s,props:a,previousPointsRef:n,previousBaselineRef:i}=e,{points:o,baseLine:l,isAnimationActive:c,animationBegin:d,animationDuration:h,animationEasing:f,onAnimationStart:x,onAnimationEnd:y}=a,v=p.useMemo(()=>({points:o,baseLine:l}),[o,l]),w=$2(v,"recharts-area-"),N=wwe(),[k,C]=p.useState(!1),E=!k,_=p.useCallback(()=>{typeof y=="function"&&y(),C(!1)},[y]),T=p.useCallback(()=>{typeof x=="function"&&x(),C(!0)},[x]);if(N==null)return null;var A=n.current,P=i.current;return p.createElement(gAe,{showLabels:E,points:o},a.children,p.createElement(B2,{animationId:w,begin:d,duration:h,isActive:c,easing:f,onAnimationEnd:_,onAnimationStart:T,key:w},M=>{if(A){var R=A.length/o.length,$=M===1?o:o.map((I,B)=>{var O=Math.floor(B*R);if(A[O]){var F=A[O];return qm(qm({},I),{},{x:Ks(F.x,I.x,M),y:Ks(F.y,I.y,M)})}return I}),W;return vt(l)?W=Ks(P,l,M):Qs(l)||Yo(l)?W=Ks(P,0,M):W=l.map((I,B)=>{var O=Math.floor(B*R);if(Array.isArray(P)&&P[O]){var F=P[O];return qm(qm({},I),{},{x:Ks(F.x,I.x,M),y:Ks(F.y,I.y,M)})}return I}),M>0&&(n.current=$,i.current=W),p.createElement(WL,{points:$,baseLine:W,needClip:t,clipPathId:s,props:a})}return M>0&&(n.current=o,i.current=l),p.createElement(ci,null,c&&p.createElement("defs",null,p.createElement("clipPath",{id:"animationClipPath-".concat(s)},p.createElement(bAe,{alpha:M,points:o,baseLine:l,layout:N,strokeWidth:a.strokeWidth}))),p.createElement(ci,{clipPath:"url(#animationClipPath-".concat(s,")")},p.createElement(WL,{points:o,baseLine:l,needClip:t,clipPathId:s,props:a})))}),p.createElement(XX,{label:a.label}))}function wAe(e){var{needClip:t,clipPathId:s,props:a}=e,n=p.useRef(null),i=p.useRef();return p.createElement(vAe,{needClip:t,clipPathId:s,props:a,previousPointsRef:n,previousBaselineRef:i})}class jAe extends p.PureComponent{render(){var{hide:t,dot:s,points:a,className:n,top:i,left:o,needClip:l,xAxisId:c,yAxisId:d,width:h,height:f,id:x,baseLine:y,zIndex:v}=this.props;if(t)return null;var w=fe("recharts-area",n),N=x,{r:k,strokeWidth:C}=rAe(s),E=sQ(s),_=k*2+C,T=l?"url(#clipPath-".concat(E?"":"dots-").concat(N,")"):void 0;return p.createElement(sl,{zIndex:v},p.createElement(ci,{className:w},l&&p.createElement("defs",null,p.createElement(gQ,{clipPathId:N,xAxisId:c,yAxisId:d}),!E&&p.createElement("clipPath",{id:"clipPath-dots-".concat(N)},p.createElement("rect",{x:o-_/2,y:i-_/2,width:h+_,height:f+_}))),p.createElement(wAe,{needClip:l,clipPathId:N,props:this.props})),p.createElement(TL,{points:a,mainColor:eN(this.props.stroke,this.props.fill),itemDataKey:this.props.dataKey,activeDot:this.props.activeDot,clipPath:T}),this.props.isRange&&Array.isArray(y)&&p.createElement(TL,{points:y,mainColor:eN(this.props.stroke,this.props.fill),itemDataKey:this.props.dataKey,activeDot:this.props.activeDot,clipPath:T}))}}var AQ={activeDot:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",connectNulls:!1,dot:!1,fill:"#3182bd",fillOpacity:.6,hide:!1,isAnimationActive:"auto",legendType:"line",stroke:"#3182bd",strokeWidth:1,type:"linear",label:!1,xAxisId:0,yAxisId:0,zIndex:on.area};function NAe(e){var t,s=Mn(e,AQ),{activeDot:a,animationBegin:n,animationDuration:i,animationEasing:o,connectNulls:l,dot:c,fill:d,fillOpacity:h,hide:f,isAnimationActive:x,legendType:y,stroke:v,xAxisId:w,yAxisId:N}=s,k=EQ(s,lAe),C=jx(),E=NX(),{needClip:_}=aT(w,N),T=Gn(),{points:A,isRange:P,baseLine:M}=(t=Dt(O=>iAe(O,w,N,T,e.id)))!==null&&t!==void 0?t:{},R=sT();if(C!=="horizontal"&&C!=="vertical"||R==null||E!=="AreaChart"&&E!=="ComposedChart")return null;var{height:$,width:W,x:I,y:B}=R;return!A||!A.length?null:p.createElement(jAe,oh({},k,{activeDot:a,animationBegin:n,animationDuration:i,animationEasing:o,baseLine:M,connectNulls:l,dot:c,fill:d,fillOpacity:h,height:$,hide:f,layout:C,isAnimationActive:x==="auto"?!Nx.isSsr:x,isRange:P,legendType:y,needClip:_,points:A,stroke:v,width:W,left:I,top:B,xAxisId:w,yAxisId:N}))}var kAe=(e,t,s,a,n)=>{var i=s??t;if(vt(i))return i;var o=e==="horizontal"?n:a,l=o.scale.domain();if(o.type==="number"){var c=Math.max(l[0],l[1]),d=Math.min(l[0],l[1]);return i==="dataMin"?d:i==="dataMax"||c<0?c:Math.max(Math.min(l[0],l[1]),0)}return i==="dataMin"?l[0]:i==="dataMax"?l[1]:l[0]};function SAe(e){var{areaSettings:{connectNulls:t,baseValue:s,dataKey:a},stackedData:n,layout:i,chartBaseValue:o,xAxis:l,yAxis:c,displayedData:d,dataStartIndex:h,xAxisTicks:f,yAxisTicks:x,bandSize:y}=e,v=n&&n.length,w=kAe(i,o,s,l,c),N=i==="horizontal",k=!1,C=d.map((_,T)=>{var A;v?A=n[h+T]:(A=za(_,a),Array.isArray(A)?k=!0:A=[w,A]);var P=A[1]==null||v&&!t&&za(_,a)==null;return N?{x:b7({axis:l,ticks:f,bandSize:y,entry:_,index:T}),y:P?null:c.scale(A[1]),value:A,payload:_}:{x:P?null:l.scale(A[1]),y:b7({axis:c,ticks:x,bandSize:y,entry:_,index:T}),value:A,payload:_}}),E;return v||k?E=C.map(_=>{var T=Array.isArray(_.value)?_.value[0]:null;return N?{x:_.x,y:T!=null&&_.y!=null?c.scale(T):null,payload:_.payload}:{x:T!=null?l.scale(T):null,y:_.y,payload:_.payload}}):E=N?c.scale(w):l.scale(w),{points:C,baseLine:E,isRange:k}}function CAe(e){var t=Mn(e,AQ),s=Gn();return p.createElement(uQ,{id:t.id,type:"area"},a=>p.createElement(p.Fragment,null,p.createElement(cQ,{legendPayload:mAe(t)}),p.createElement(fAe,{dataKey:t.dataKey,data:t.data,stroke:t.stroke,strokeWidth:t.strokeWidth,fill:t.fill,name:t.name,hide:t.hide,unit:t.unit,tooltipType:t.tooltipType}),p.createElement(mQ,{type:"area",id:a,data:t.data,dataKey:t.dataKey,xAxisId:t.xAxisId,yAxisId:t.yAxisId,zAxisId:0,stackId:FK(t.stackId),hide:t.hide,barSize:void 0,baseValue:t.baseValue,isPanorama:s,connectNulls:t.connectNulls}),p.createElement(NAe,oh({},t,{id:a}))))}var tN=p.memo(CAe,gk);tN.displayName="Area";var _Ae=["domain","range"],EAe=["domain","range"];function zL(e,t){if(e==null)return{};var s,a,n=AAe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)s=i[a],t.indexOf(s)===-1&&{}.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function AAe(e,t){if(e==null)return{};var s={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;s[a]=e[a]}return s}function qL(e,t){return e===t?!0:Array.isArray(e)&&e.length===2&&Array.isArray(t)&&t.length===2?e[0]===t[0]&&e[1]===t[1]:!1}function PQ(e,t){if(e===t)return!0;var{domain:s,range:a}=e,n=zL(e,_Ae),{domain:i,range:o}=t,l=zL(t,EAe);return!qL(s,i)||!qL(a,o)?!1:gk(n,l)}var PAe=["dangerouslySetInnerHTML","ticks"],TAe=["id"];function E_(){return E_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)({}).hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e},E_.apply(null,arguments)}function HL(e,t){if(e==null)return{};var s,a,n=IAe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)s=i[a],t.indexOf(s)===-1&&{}.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function IAe(e,t){if(e==null)return{};var s={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;s[a]=e[a]}return s}function DAe(e){var t=ea(),s=p.useRef(null);return p.useLayoutEffect(()=>{s.current===null?t(o_e(e)):s.current!==e&&t(l_e({prev:s.current,next:e})),s.current=e},[e,t]),p.useLayoutEffect(()=>()=>{s.current&&(t(c_e(s.current)),s.current=null)},[t]),null}var OAe=e=>{var{xAxisId:t,className:s}=e,a=Dt(XA),n=Gn(),i="xAxis",o=Dt(N=>Ax(N,i,t,n)),l=Dt(N=>eX(N,i,t,n)),c=Dt(N=>XY(N,t)),d=Dt(N=>tSe(N,t)),h=Dt(N=>bY(N,t));if(c==null||d==null||h==null)return null;var{dangerouslySetInnerHTML:f,ticks:x}=e,y=HL(e,PAe),{id:v}=h,w=HL(h,TAe);return p.createElement(oT,E_({},y,w,{scale:o,x:d.x,y:d.y,width:c.width,height:c.height,className:fe("recharts-".concat(i," ").concat(i),s),viewBox:a,ticks:l,axisType:i}))},RAe={allowDataOverflow:en.allowDataOverflow,allowDecimals:en.allowDecimals,allowDuplicatedCategory:en.allowDuplicatedCategory,angle:en.angle,axisLine:Yc.axisLine,height:en.height,hide:!1,includeHidden:en.includeHidden,interval:en.interval,minTickGap:en.minTickGap,mirror:en.mirror,orientation:en.orientation,padding:en.padding,reversed:en.reversed,scale:en.scale,tick:en.tick,tickCount:en.tickCount,tickLine:Yc.tickLine,tickSize:Yc.tickSize,type:en.type,xAxisId:0},MAe=e=>{var t=Mn(e,RAe);return p.createElement(p.Fragment,null,p.createElement(DAe,{allowDataOverflow:t.allowDataOverflow,allowDecimals:t.allowDecimals,allowDuplicatedCategory:t.allowDuplicatedCategory,angle:t.angle,dataKey:t.dataKey,domain:t.domain,height:t.height,hide:t.hide,id:t.xAxisId,includeHidden:t.includeHidden,interval:t.interval,minTickGap:t.minTickGap,mirror:t.mirror,name:t.name,orientation:t.orientation,padding:t.padding,reversed:t.reversed,scale:t.scale,tick:t.tick,tickCount:t.tickCount,tickFormatter:t.tickFormatter,ticks:t.ticks,type:t.type,unit:t.unit}),p.createElement(OAe,t))},jy=p.memo(MAe,PQ);jy.displayName="XAxis";var LAe=["dangerouslySetInnerHTML","ticks"],FAe=["id"];function A_(){return A_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)({}).hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e},A_.apply(null,arguments)}function KL(e,t){if(e==null)return{};var s,a,n=BAe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)s=i[a],t.indexOf(s)===-1&&{}.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function BAe(e,t){if(e==null)return{};var s={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;s[a]=e[a]}return s}function $Ae(e){var t=ea(),s=p.useRef(null);return p.useLayoutEffect(()=>{s.current===null?t(d_e(e)):s.current!==e&&t(u_e({prev:s.current,next:e})),s.current=e},[e,t]),p.useLayoutEffect(()=>()=>{s.current&&(t(h_e(s.current)),s.current=null)},[t]),null}var UAe=e=>{var{yAxisId:t,className:s,width:a,label:n}=e,i=p.useRef(null),o=p.useRef(null),l=Dt(XA),c=Gn(),d=ea(),h="yAxis",f=Dt(T=>Ax(T,h,t,c)),x=Dt(T=>QY(T,t)),y=Dt(T=>sSe(T,t)),v=Dt(T=>eX(T,h,t,c)),w=Dt(T=>vY(T,t));if(p.useLayoutEffect(()=>{if(!(a!=="auto"||!x||JP(n)||p.isValidElement(n)||w==null)){var T=i.current;if(T){var A=T.getCalculatedWidth();Math.round(x.width)!==Math.round(A)&&d(m_e({id:t,width:A}))}}},[v,x,d,n,t,a,w]),x==null||y==null||w==null)return null;var{dangerouslySetInnerHTML:N,ticks:k}=e,C=KL(e,LAe),{id:E}=w,_=KL(w,FAe);return p.createElement(oT,A_({},C,_,{ref:i,labelRef:o,scale:f,x:y.x,y:y.y,tickTextProps:a==="auto"?{width:void 0}:{width:a},width:x.width,height:x.height,className:fe("recharts-".concat(h," ").concat(h),s),viewBox:l,ticks:v,axisType:h}))},VAe={allowDataOverflow:tn.allowDataOverflow,allowDecimals:tn.allowDecimals,allowDuplicatedCategory:tn.allowDuplicatedCategory,angle:tn.angle,axisLine:Yc.axisLine,hide:!1,includeHidden:tn.includeHidden,interval:tn.interval,minTickGap:tn.minTickGap,mirror:tn.mirror,orientation:tn.orientation,padding:tn.padding,reversed:tn.reversed,scale:tn.scale,tick:tn.tick,tickCount:tn.tickCount,tickLine:Yc.tickLine,tickSize:Yc.tickSize,type:tn.type,width:tn.width,yAxisId:0},WAe=e=>{var t=Mn(e,VAe);return p.createElement(p.Fragment,null,p.createElement($Ae,{interval:t.interval,id:t.yAxisId,scale:t.scale,type:t.type,domain:t.domain,allowDataOverflow:t.allowDataOverflow,dataKey:t.dataKey,allowDuplicatedCategory:t.allowDuplicatedCategory,allowDecimals:t.allowDecimals,tickCount:t.tickCount,padding:t.padding,includeHidden:t.includeHidden,reversed:t.reversed,ticks:t.ticks,width:t.width,orientation:t.orientation,mirror:t.mirror,hide:t.hide,unit:t.unit,name:t.name,angle:t.angle,minTickGap:t.minTickGap,tick:t.tick,tickFormatter:t.tickFormatter}),p.createElement(UAe,t))},Ny=p.memo(WAe,PQ);Ny.displayName="YAxis";var zAe=(e,t)=>t,lT=Le([zAe,Br,pY,Ka,gX,kd,pCe,mn],kCe),cT=e=>{var t=e.currentTarget.getBoundingClientRect(),s=t.width/e.currentTarget.offsetWidth,a=t.height/e.currentTarget.offsetHeight;return{chartX:Math.round((e.clientX-t.left)/s),chartY:Math.round((e.clientY-t.top)/a)}},TQ=Xo("mouseClick"),IQ=hb();IQ.startListening({actionCreator:TQ,effect:(e,t)=>{var s=e.payload,a=lT(t.getState(),cT(s));(a==null?void 0:a.activeIndex)!=null&&t.dispatch(pSe({activeIndex:a.activeIndex,activeDataKey:void 0,activeCoordinate:a.activeCoordinate}))}});var P_=Xo("mouseMove"),DQ=hb(),Xv=null;DQ.startListening({actionCreator:P_,effect:(e,t)=>{var s=e.payload;Xv!==null&&cancelAnimationFrame(Xv);var a=cT(s);Xv=requestAnimationFrame(()=>{var n=t.getState(),i=VP(n,n.tooltip.settings.shared);if(i==="axis"){var o=lT(n,a);(o==null?void 0:o.activeIndex)!=null?t.dispatch(lX({activeIndex:o.activeIndex,activeDataKey:void 0,activeCoordinate:o.activeCoordinate})):t.dispatch(oX())}Xv=null})}});var GL={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index",baseValue:void 0,reverseStackOrder:!1},OQ=Wi({name:"rootProps",initialState:GL,reducers:{updateOptions:(e,t)=>{var s;e.accessibilityLayer=t.payload.accessibilityLayer,e.barCategoryGap=t.payload.barCategoryGap,e.barGap=(s=t.payload.barGap)!==null&&s!==void 0?s:GL.barGap,e.barSize=t.payload.barSize,e.maxBarSize=t.payload.maxBarSize,e.stackOffset=t.payload.stackOffset,e.syncId=t.payload.syncId,e.syncMethod=t.payload.syncMethod,e.className=t.payload.className,e.baseValue=t.payload.baseValue,e.reverseStackOrder=t.payload.reverseStackOrder}}}),qAe=OQ.reducer,{updateOptions:HAe}=OQ.actions,RQ=Wi({name:"polarOptions",initialState:null,reducers:{updatePolarOptions:(e,t)=>t.payload}}),{updatePolarOptions:m$e}=RQ.actions,KAe=RQ.reducer,MQ=Xo("keyDown"),LQ=Xo("focus"),dT=hb();dT.startListening({actionCreator:MQ,effect:(e,t)=>{var s=t.getState(),a=s.rootProps.accessibilityLayer!==!1;if(a){var{keyboardInteraction:n}=s.tooltip,i=e.payload;if(!(i!=="ArrowRight"&&i!=="ArrowLeft"&&i!=="Enter")){var o=WP(n,Tx(s),wb(s),Cb(s)),l=o==null?-1:Number(o);if(!(!Number.isFinite(l)||l<0)){var c=kd(s);if(i==="Enter"){var d=Wj(s,"axis","hover",String(n.index));t.dispatch(w_({active:!n.active,activeIndex:n.index,activeDataKey:n.dataKey,activeCoordinate:d}));return}var h=oSe(s),f=h==="left-to-right"?1:-1,x=i==="ArrowRight"?1:-1,y=l+x*f;if(!(c==null||y>=c.length||y<0)){var v=Wj(s,"axis","hover",String(y));t.dispatch(w_({active:!0,activeIndex:y.toString(),activeDataKey:void 0,activeCoordinate:v}))}}}}}});dT.startListening({actionCreator:LQ,effect:(e,t)=>{var s=t.getState(),a=s.rootProps.accessibilityLayer!==!1;if(a){var{keyboardInteraction:n}=s.tooltip;if(!n.active&&n.index==null){var i="0",o=Wj(s,"axis","hover",String(i));t.dispatch(w_({activeDataKey:void 0,active:!0,activeIndex:i,activeCoordinate:o}))}}}});var Ao=Xo("externalEvent"),FQ=hb(),YS=new Map;FQ.startListening({actionCreator:Ao,effect:(e,t)=>{var{handler:s,reactEvent:a}=e.payload;if(s!=null){a.persist();var n=a.type,i=YS.get(n);i!==void 0&&cancelAnimationFrame(i);var o=requestAnimationFrame(()=>{try{var l=t.getState(),c={activeCoordinate:rCe(l),activeDataKey:vX(l),activeIndex:Nh(l),activeLabel:bX(l),activeTooltipIndex:Nh(l),isTooltipActive:sCe(l)};s(c,a)}finally{YS.delete(n)}});YS.set(n,o)}}});var GAe=Le([Px],e=>e.tooltipItemPayloads),YAe=Le([GAe,kb,(e,t,s)=>t,(e,t,s)=>s],(e,t,s,a)=>{var n=e.find(l=>l.settings.dataKey===a);if(n!=null){var{positions:i}=n;if(i!=null){var o=t(i,s);return o}}}),BQ=Xo("touchMove"),$Q=hb();$Q.startListening({actionCreator:BQ,effect:(e,t)=>{var s=e.payload;if(!(s.touches==null||s.touches.length===0)){var a=t.getState(),n=VP(a,a.tooltip.settings.shared);if(n==="axis"){var i=lT(a,cT({clientX:s.touches[0].clientX,clientY:s.touches[0].clientY,currentTarget:s.currentTarget}));(i==null?void 0:i.activeIndex)!=null&&t.dispatch(lX({activeIndex:i.activeIndex,activeDataKey:void 0,activeCoordinate:i.activeCoordinate}))}else if(n==="item"){var o,l=s.touches[0];if(document.elementFromPoint==null)return;var c=document.elementFromPoint(l.clientX,l.clientY);if(!c||!c.getAttribute)return;var d=c.getAttribute(G1e),h=(o=c.getAttribute(Y1e))!==null&&o!==void 0?o:void 0,f=YAe(t.getState(),d,h);t.dispatch(iX({activeDataKey:h,activeIndex:d,activeCoordinate:f}))}}}});var XAe=oK({brush:o6e,cartesianAxis:f_e,chartData:e5e,errorBars:D_e,graphicalItems:H3e,layout:P1e,legend:Bwe,options:YCe,polarAxis:x3e,polarOptions:KAe,referenceElements:f6e,rootProps:qAe,tooltip:ySe,zIndex:FCe}),QAe=function(t){return t1e({reducer:XAe,preloadedState:t,middleware:s=>{var a;return s({serializableCheck:!1,immutableCheck:!["commonjs","es6","production"].includes((a="es6")!==null&&a!==void 0?a:"")}).concat([IQ.middleware,DQ.middleware,dT.middleware,FQ.middleware,$Q.middleware])},enhancers:s=>{var a=s;return typeof s=="function"&&(a=s()),a.concat(jK({type:"raf"}))},devTools:Nx.devToolsEnabled})};function ZAe(e){var{preloadedState:t,children:s,reduxStoreName:a}=e,n=Gn(),i=p.useRef(null);if(n)return s;i.current==null&&(i.current=QAe(t));var o=BA;return p.createElement(lEe,{context:o,store:i.current},s)}function JAe(e){var{layout:t,margin:s}=e,a=ea(),n=Gn();return p.useEffect(()=>{n||(a(_1e(t)),a(C1e(s)))},[a,n,t,s]),null}var ePe=p.memo(JAe,gk);function tPe(e){var t=ea();return p.useEffect(()=>{t(HAe(e))},[t,e]),null}function YL(e){var{zIndex:t,isPanorama:s}=e,a=s?"recharts-zindex-panorama-":"recharts-zindex-",n=dQ("".concat(a).concat(t)),i=ea();return p.useLayoutEffect(()=>(i(MCe({zIndex:t,elementId:n,isPanorama:s})),()=>{i(LCe({zIndex:t,isPanorama:s}))}),[i,t,n,s]),p.createElement("g",{tabIndex:-1,id:n})}function XL(e){var{children:t,isPanorama:s}=e,a=Dt(CCe);if(!a||a.length===0)return t;var n=a.filter(o=>o<0),i=a.filter(o=>o>0);return p.createElement(p.Fragment,null,n.map(o=>p.createElement(YL,{key:o,zIndex:o,isPanorama:s})),t,i.map(o=>p.createElement(YL,{key:o,zIndex:o,isPanorama:s})))}var rPe=["children"];function sPe(e,t){if(e==null)return{};var s,a,n=aPe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)s=i[a],t.indexOf(s)===-1&&{}.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function aPe(e,t){if(e==null)return{};var s={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;s[a]=e[a]}return s}function rN(){return rN=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)({}).hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e},rN.apply(null,arguments)}var nPe={width:"100%",height:"100%",display:"block"},iPe=p.forwardRef((e,t)=>{var s=ZA(),a=JA(),n=rG();if(!xc(s)||!xc(a))return null;var{children:i,otherAttributes:o,title:l,desc:c}=e,d,h;return o!=null&&(typeof o.tabIndex=="number"?d=o.tabIndex:d=n?0:void 0,typeof o.role=="string"?h=o.role:h=n?"application":void 0),p.createElement(NA,rN({},o,{title:l,desc:c,role:h,tabIndex:d,width:s,height:a,style:nPe,ref:t}),i)}),oPe=e=>{var{children:t}=e,s=Dt(D2);if(!s)return null;var{width:a,height:n,y:i,x:o}=s;return p.createElement(NA,{width:a,height:n,x:o,y:i},t)},QL=p.forwardRef((e,t)=>{var{children:s}=e,a=sPe(e,rPe),n=Gn();return n?p.createElement(oPe,null,p.createElement(XL,{isPanorama:!0},s)):p.createElement(iPe,rN({ref:t},a),p.createElement(XL,{isPanorama:!1},s))});function lPe(){var e=ea(),[t,s]=p.useState(null),a=Dt(K1e);return p.useEffect(()=>{if(t!=null){var n=t.getBoundingClientRect(),i=n.width/t.offsetWidth;Ds(i)&&i!==a&&e(A1e(i))}},[t,e,a]),s}function ZL(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),s.push.apply(s,a)}return s}function cPe(e){for(var t=1;t<arguments.length;t++){var s=arguments[t]!=null?arguments[t]:{};t%2?ZL(Object(s),!0).forEach(function(a){dPe(e,a,s[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):ZL(Object(s)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(s,a))})}return e}function dPe(e,t,s){return(t=uPe(t))in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function uPe(e){var t=hPe(e,"string");return typeof t=="symbol"?t:t+""}function hPe(e,t){if(typeof e!="object"||!e)return e;var s=e[Symbol.toPrimitive];if(s!==void 0){var a=s.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Sh(){return Sh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)({}).hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e},Sh.apply(null,arguments)}var mPe=()=>(c5e(),null);function sN(e){if(typeof e=="number")return e;if(typeof e=="string"){var t=parseFloat(e);if(!Number.isNaN(t))return t}return 0}var fPe=p.forwardRef((e,t)=>{var s,a,n=p.useRef(null),[i,o]=p.useState({containerWidth:sN((s=e.style)===null||s===void 0?void 0:s.width),containerHeight:sN((a=e.style)===null||a===void 0?void 0:a.height)}),l=p.useCallback((d,h)=>{o(f=>{var x=Math.round(d),y=Math.round(h);return f.containerWidth===x&&f.containerHeight===y?f:{containerWidth:x,containerHeight:y}})},[]),c=p.useCallback(d=>{if(typeof t=="function"&&t(d),d!=null&&typeof ResizeObserver<"u"){var{width:h,height:f}=d.getBoundingClientRect();l(h,f);var x=v=>{var{width:w,height:N}=v[0].contentRect;l(w,N)},y=new ResizeObserver(x);y.observe(d),n.current=y}},[t,l]);return p.useEffect(()=>()=>{var d=n.current;d!=null&&d.disconnect()},[l]),p.createElement(p.Fragment,null,p.createElement(R2,{width:i.containerWidth,height:i.containerHeight}),p.createElement("div",Sh({ref:c},e)))}),xPe=p.forwardRef((e,t)=>{var{width:s,height:a}=e,[n,i]=p.useState({containerWidth:sN(s),containerHeight:sN(a)}),o=p.useCallback((c,d)=>{i(h=>{var f=Math.round(c),x=Math.round(d);return h.containerWidth===f&&h.containerHeight===x?h:{containerWidth:f,containerHeight:x}})},[]),l=p.useCallback(c=>{if(typeof t=="function"&&t(c),c!=null){var{width:d,height:h}=c.getBoundingClientRect();o(d,h)}},[t,o]);return p.createElement(p.Fragment,null,p.createElement(R2,{width:n.containerWidth,height:n.containerHeight}),p.createElement("div",Sh({ref:l},e)))}),gPe=p.forwardRef((e,t)=>{var{width:s,height:a}=e;return p.createElement(p.Fragment,null,p.createElement(R2,{width:s,height:a}),p.createElement("div",Sh({ref:t},e)))}),pPe=p.forwardRef((e,t)=>{var{width:s,height:a}=e;return id(s)||id(a)?p.createElement(xPe,Sh({},e,{ref:t})):p.createElement(gPe,Sh({},e,{ref:t}))});function yPe(e){return e===!0?fPe:pPe}var bPe=p.forwardRef((e,t)=>{var{children:s,className:a,height:n,onClick:i,onContextMenu:o,onDoubleClick:l,onMouseDown:c,onMouseEnter:d,onMouseLeave:h,onMouseMove:f,onMouseUp:x,onTouchEnd:y,onTouchMove:v,onTouchStart:w,style:N,width:k,responsive:C,dispatchTouchEvents:E=!0}=e,_=p.useRef(null),T=ea(),[A,P]=p.useState(null),[M,R]=p.useState(null),$=lPe(),W=QA(),I=(W==null?void 0:W.width)>0?W.width:k,B=(W==null?void 0:W.height)>0?W.height:n,O=p.useCallback(ie=>{$(ie),typeof t=="function"&&t(ie),P(ie),R(ie),ie!=null&&(_.current=ie)},[$,t,P,R]),F=p.useCallback(ie=>{T(TQ(ie)),T(Ao({handler:i,reactEvent:ie}))},[T,i]),q=p.useCallback(ie=>{T(P_(ie)),T(Ao({handler:d,reactEvent:ie}))},[T,d]),H=p.useCallback(ie=>{T(oX()),T(Ao({handler:h,reactEvent:ie}))},[T,h]),K=p.useCallback(ie=>{T(P_(ie)),T(Ao({handler:f,reactEvent:ie}))},[T,f]),V=p.useCallback(()=>{T(LQ())},[T]),z=p.useCallback(ie=>{T(MQ(ie.key))},[T]),G=p.useCallback(ie=>{T(Ao({handler:o,reactEvent:ie}))},[T,o]),te=p.useCallback(ie=>{T(Ao({handler:l,reactEvent:ie}))},[T,l]),he=p.useCallback(ie=>{T(Ao({handler:c,reactEvent:ie}))},[T,c]),ne=p.useCallback(ie=>{T(Ao({handler:x,reactEvent:ie}))},[T,x]),ce=p.useCallback(ie=>{T(Ao({handler:w,reactEvent:ie}))},[T,w]),xe=p.useCallback(ie=>{E&&T(BQ(ie)),T(Ao({handler:v,reactEvent:ie}))},[T,E,v]),_e=p.useCallback(ie=>{T(Ao({handler:y,reactEvent:ie}))},[T,y]),oe=yPe(C);return p.createElement(EX.Provider,{value:A},p.createElement(oH.Provider,{value:M},p.createElement(oe,{width:I??(N==null?void 0:N.width),height:B??(N==null?void 0:N.height),className:fe("recharts-wrapper",a),style:cPe({position:"relative",cursor:"default",width:I,height:B},N),onClick:F,onContextMenu:G,onDoubleClick:te,onFocus:V,onKeyDown:z,onMouseDown:he,onMouseEnter:q,onMouseLeave:H,onMouseMove:K,onMouseUp:ne,onTouchEnd:_e,onTouchMove:xe,onTouchStart:ce,ref:O},p.createElement(mPe,null),s)))}),vPe=["width","height","responsive","children","className","style","compact","title","desc"];function wPe(e,t){if(e==null)return{};var s,a,n=jPe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)s=i[a],t.indexOf(s)===-1&&{}.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function jPe(e,t){if(e==null)return{};var s={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;s[a]=e[a]}return s}var NPe=p.forwardRef((e,t)=>{var{width:s,height:a,responsive:n,children:i,className:o,style:l,compact:c,title:d,desc:h}=e,f=wPe(e,vPe),x=Go(f);return c?p.createElement(p.Fragment,null,p.createElement(R2,{width:s,height:a}),p.createElement(QL,{otherAttributes:x,title:d,desc:h},i)):p.createElement(bPe,{className:o,style:l,width:s,height:a,responsive:n??!1,onClick:e.onClick,onMouseLeave:e.onMouseLeave,onMouseEnter:e.onMouseEnter,onMouseMove:e.onMouseMove,onMouseDown:e.onMouseDown,onMouseUp:e.onMouseUp,onContextMenu:e.onContextMenu,onDoubleClick:e.onDoubleClick,onTouchStart:e.onTouchStart,onTouchMove:e.onTouchMove,onTouchEnd:e.onTouchEnd},p.createElement(QL,{otherAttributes:x,title:d,desc:h,ref:t},p.createElement(g6e,null,i)))});function T_(){return T_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)({}).hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e},T_.apply(null,arguments)}var kPe={top:5,right:5,bottom:5,left:5},SPe={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,layout:"horizontal",margin:kPe,responsive:!1,reverseStackOrder:!1,stackOffset:"none",syncMethod:"index"},UQ=p.forwardRef(function(t,s){var a,n=Mn(t.categoricalChartProps,SPe),{chartName:i,defaultTooltipEventType:o,validateTooltipEventTypes:l,tooltipPayloadSearcher:c,categoricalChartProps:d}=t,h={chartName:i,defaultTooltipEventType:o,validateTooltipEventTypes:l,tooltipPayloadSearcher:c,eventEmitter:void 0};return p.createElement(ZAe,{preloadedState:{options:h},reduxStoreName:(a=d.id)!==null&&a!==void 0?a:i},p.createElement(i6e,{chartData:d.data}),p.createElement(ePe,{layout:n.layout,margin:n.margin}),p.createElement(tPe,{baseValue:n.baseValue,accessibilityLayer:n.accessibilityLayer,barCategoryGap:n.barCategoryGap,maxBarSize:n.maxBarSize,stackOffset:n.stackOffset,barGap:n.barGap,barSize:n.barSize,syncId:n.syncId,syncMethod:n.syncMethod,className:n.className,reverseStackOrder:n.reverseStackOrder}),p.createElement(NPe,T_({},n,{ref:s})))}),CPe=["axis","item"],VQ=p.forwardRef((e,t)=>p.createElement(UQ,{chartName:"BarChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:CPe,tooltipPayloadSearcher:PX,categoricalChartProps:e,ref:t})),_Pe=["axis"],WQ=p.forwardRef((e,t)=>p.createElement(UQ,{chartName:"AreaChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:_Pe,tooltipPayloadSearcher:PX,categoricalChartProps:e,ref:t}));const dm=e=>({id:e.id,currency:e.currency,openingBalance:parseFloat(e.opening_balance)||0,currentBalance:parseFloat(e.current_balance)||0,closingBalance:e.closing_balance?parseFloat(e.closing_balance):null,totalInflows:parseFloat(e.total_inflows)||0,totalOutflows:parseFloat(e.total_outflows)||0,cycleStartDate:e.cycle_start_date,cycleEndDate:e.cycle_end_date,status:e.status,financialYear:e.financial_year,description:e.description,updatedBy:e.updated_by,createdBy:e.created_by,createdAt:e.created_at,updatedAt:e.updated_at}),JL=e=>({id:e.id,floatId:e.float_id,currency:e.currency,amount:parseFloat(e.amount)||0,type:e.type,previousBalance:parseFloat(e.previous_balance)||0,newBalance:parseFloat(e.new_balance)||0,description:e.description,reference:e.reference,transactionId:e.transaction_id,createdBy:e.created_by,createdAt:e.created_at}),EPe=e=>({id:e.id,currency:e.currency,openingBalance:parseFloat(e.opening_balance)||0,currentBalance:parseFloat(e.current_balance)||0,closingBalance:e.closing_balance?parseFloat(e.closing_balance):null,totalInflows:parseFloat(e.total_inflows)||0,totalOutflows:parseFloat(e.total_outflows)||0,netChange:parseFloat(e.net_change)||0,utilizationPercentage:parseFloat(e.utilization_percentage)||0,status:e.status,financialYear:e.financial_year,cycleStartDate:e.cycle_start_date,cycleEndDate:e.cycle_end_date}),Hm={async getAllFloats(){const{data:e,error:t}=await X.from("system_float").select("*").order("created_at",{ascending:!1});if(t)throw console.error("Error fetching floats:",t),new Error(t.message);return(e||[]).map(dm)},async getActiveFloats(){const{data:e,error:t}=await X.from("system_float").select("*").eq("status","active").order("currency",{ascending:!0});if(t)throw console.error("Error fetching active floats:",t),new Error(t.message);return(e||[]).map(dm)},async getActiveFloatByCurrency(e){const{data:t,error:s}=await X.from("system_float").select("*").eq("currency",e).eq("status","active").single();if(s){if(s.code==="PGRST116")return null;throw console.error("Error fetching float:",s),new Error(s.message)}return dm(t)},async getFloatSummary(){const{data:e,error:t}=await X.rpc("get_float_summary");if(t){console.error("Error fetching float summary:",t);const{data:s}=await X.from("system_float").select("*").order("status",{ascending:!0}).order("created_at",{ascending:!1});return s?s.map(a=>({id:a.id,currency:a.currency,openingBalance:parseFloat(a.opening_balance)||0,currentBalance:parseFloat(a.current_balance)||0,closingBalance:a.closing_balance?parseFloat(a.closing_balance):null,totalInflows:parseFloat(a.total_inflows)||0,totalOutflows:parseFloat(a.total_outflows)||0,netChange:(parseFloat(a.total_inflows)||0)-(parseFloat(a.total_outflows)||0),utilizationPercentage:a.opening_balance>0?Math.round((a.opening_balance-a.current_balance)/a.opening_balance*100*100)/100:0,status:a.status,financialYear:a.financial_year,cycleStartDate:a.cycle_start_date,cycleEndDate:a.cycle_end_date})):[]}return(e||[]).map(EPe)},async openFloat(e,t){const{data:s,error:a}=await X.rpc("open_system_float",{p_currency:e.currency,p_opening_balance:e.openingBalance,p_financial_year:e.financialYear,p_description:e.description||`Opening balance for ${e.financialYear}`,p_admin_id:t});if(a)throw console.error("Error opening float:",a),new Error(a.message);return dm(s)},async replenishFloat(e,t){const{data:s,error:a}=await X.rpc("replenish_system_float",{p_currency:e.currency,p_amount:e.amount,p_description:e.description||"Capital injection",p_admin_id:t});if(a)throw console.error("Error replenishing float:",a),new Error(a.message);return dm(s)},async closeFloat(e,t){const{data:s,error:a}=await X.rpc("close_system_float",{p_currency:e.currency,p_description:e.description||"End of financial cycle",p_admin_id:t});if(a)throw console.error("Error closing float:",a),new Error(a.message);return dm(s)},async checkFloatAvailability(e,t){const{data:s,error:a}=await X.rpc("check_float_availability",{p_currency:e,p_amount:t});return a?(console.error("Error checking float availability:",a),!0):s===!0},async debitFloat(e,t,s,a){const{data:n,error:i}=await X.rpc("debit_system_float",{p_currency:e,p_amount:t,p_transaction_id:s,p_description:a||"Transaction debit"});if(i)throw console.error("Error debiting float:",i),new Error(i.message);return n===!0},async creditFloat(e,t,s,a){const{data:n,error:i}=await X.rpc("credit_system_float",{p_currency:e,p_amount:t,p_transaction_id:s,p_description:a||"Transaction credit"});if(i)throw console.error("Error crediting float:",i),new Error(i.message);return n===!0},async getFloatHistory(e,t=50){const{data:s,error:a}=await X.from("system_float_history").select("*").eq("float_id",e).order("created_at",{ascending:!1}).limit(t);if(a)throw console.error("Error fetching float history:",a),new Error(a.message);return(s||[]).map(JL)},async getHistoryByCurrency(e,t=100){const{data:s,error:a}=await X.from("system_float_history").select("*").eq("currency",e).order("created_at",{ascending:!1}).limit(t);if(a)throw console.error("Error fetching history by currency:",a),new Error(a.message);return(s||[]).map(JL)},async getTodayMovements(e){const t=new Date;t.setHours(0,0,0,0);const{data:s,error:a}=await X.from("system_float_history").select("type, amount").eq("currency",e).gte("created_at",t.toISOString()).in("type",["credit","debit","replenishment"]);if(a)return console.error("Error fetching today movements:",a),{inflows:0,outflows:0};let n=0,i=0;return(s||[]).forEach(o=>{const l=parseFloat(o.amount)||0;o.type==="credit"||o.type==="replenishment"?n+=l:o.type==="debit"&&(i+=l)}),{inflows:n,outflows:i}},async getConsolidatedTotals(){const e=await this.getActiveFloats();let t=0,s=0,a=0,n=0;const i={};return e.forEach(o=>{t+=o.openingBalance,s+=o.currentBalance,a+=o.totalInflows,n+=o.totalOutflows,i[o.currency]=o}),{totalOpeningBalance:t,totalCurrentBalance:s,totalInflows:a,totalOutflows:n,floatsByCurrency:i}}},APe=e=>{const t=new Date;let s,a;switch(e){case"today":s=new Date(t.getFullYear(),t.getMonth(),t.getDate()),a=new Date(t.getFullYear(),t.getMonth(),t.getDate(),23,59,59,999);break;case"yesterday":s=new Date(t.getFullYear(),t.getMonth(),t.getDate()-1),a=new Date(t.getFullYear(),t.getMonth(),t.getDate()-1,23,59,59,999);break;case"thisWeek":const n=t.getDay();s=new Date(t.getFullYear(),t.getMonth(),t.getDate()-n),a=t;break;case"lastWeek":const i=t.getDay();s=new Date(t.getFullYear(),t.getMonth(),t.getDate()-i-7),a=new Date(t.getFullYear(),t.getMonth(),t.getDate()-i-1,23,59,59,999);break;case"thisMonth":s=new Date(t.getFullYear(),t.getMonth(),1),a=t;break;case"lastMonth":s=new Date(t.getFullYear(),t.getMonth()-1,1),a=new Date(t.getFullYear(),t.getMonth(),0,23,59,59,999);break;case"thisYear":s=new Date(t.getFullYear(),0,1),a=t;break;case"lastYear":s=new Date(t.getFullYear()-1,0,1),a=new Date(t.getFullYear()-1,11,31,23,59,59,999);break;default:s=t,a=t}return{start:s,end:a}},Qv=async(e,t,s)=>{try{const{data:a,error:n}=await X.from("transactions").select("id, amount, fee, type, status, created_at").gte("created_at",e.toISOString()).lte("created_at",t.toISOString()).eq("status","completed");if(n)return console.error("Error fetching transactions:",n),{period:s,revenue:0,fees:0,profit:0,transactionCount:0};const i=a||[],o=i.reduce((c,d)=>c+(parseFloat(d.amount)||0),0),l=i.reduce((c,d)=>c+(parseFloat(d.fee)||0),0);return{period:s,revenue:o,fees:l,profit:l,transactionCount:i.length}}catch(a){return console.error("Error calculating profit:",a),{period:s,revenue:0,fees:0,profit:0,transactionCount:0}}},XS={async getProfitSummary(){const e=["today","yesterday","thisWeek","lastWeek","thisMonth","lastMonth","thisYear","lastYear"],t=await Promise.all(e.map(async s=>{const{start:a,end:n}=APe(s);return Qv(a,n,s)}));return{today:t[0],yesterday:t[1],thisWeek:t[2],lastWeek:t[3],thisMonth:t[4],lastMonth:t[5],thisYear:t[6],lastYear:t[7]}},async getDailyProfit(e=7){const t=[],s=new Date;for(let a=e-1;a>=0;a--){const n=new Date(s.getFullYear(),s.getMonth(),s.getDate()-a),i=new Date(n.getFullYear(),n.getMonth(),n.getDate()),o=new Date(n.getFullYear(),n.getMonth(),n.getDate(),23,59,59,999),l=n.toLocaleDateString("en-US",{weekday:"short"}),c=await Qv(i,o,l);t.push(c)}return t},async getWeeklyProfit(e=4){const t=[],s=new Date,a=s.getDay();for(let n=e-1;n>=0;n--){const i=new Date(s.getFullYear(),s.getMonth(),s.getDate()-a-n*7),o=new Date(i.getFullYear(),i.getMonth(),i.getDate()+6,23,59,59,999),l=`W${e-n}`,c=await Qv(i,o,l);t.push(c)}return t},async getMonthlyProfit(e=12){const t=[],s=new Date;for(let a=e-1;a>=0;a--){const n=new Date(s.getFullYear(),s.getMonth()-a,1),i=new Date(s.getFullYear(),s.getMonth()-a+1,0,23,59,59,999),o=n.toLocaleDateString("en-US",{month:"short"}),l=await Qv(n,i,o);t.push(l)}return t},async getChartData(){const[e,t,s]=await Promise.all([this.getDailyProfit(7),this.getWeeklyProfit(4),this.getMonthlyProfit(6)]);return{daily:e,weekly:t,monthly:s}},subscribeToTransactions(e){const t=X.channel("transactions-changes").on("postgres_changes",{event:"*",schema:"public",table:"transactions"},()=>{e()}).subscribe();return()=>{t.unsubscribe()}}},PPe=e=>{const t=new Date;let s,a;switch(e){case"today":s=new Date(t.getFullYear(),t.getMonth(),t.getDate()),a=new Date(t.getFullYear(),t.getMonth(),t.getDate(),23,59,59,999);break;case"yesterday":s=new Date(t.getFullYear(),t.getMonth(),t.getDate()-1),a=new Date(t.getFullYear(),t.getMonth(),t.getDate()-1,23,59,59,999);break;case"thisWeek":const n=t.getDay();s=new Date(t.getFullYear(),t.getMonth(),t.getDate()-n),a=t;break;case"thisMonth":s=new Date(t.getFullYear(),t.getMonth(),1),a=t;break;case"thisYear":s=new Date(t.getFullYear(),0,1),a=t;break;default:s=t,a=t}return{start:s,end:a}},Zv=async(e,t,s="SLE")=>{try{let a=0,n=0,i=0,o=0;try{let l=X.from("monime_transactions").select("id, type, amount, currency_code, status, created_at").eq("status","COMPLETED").eq("currency_code",s);e&&(l=l.gte("created_at",e.toISOString())),t&&(l=l.lte("created_at",t.toISOString()));const{data:c,error:d}=await l;if(!d&&c){const h=c.filter(x=>x.type==="DEPOSIT"),f=c.filter(x=>x.type==="WITHDRAWAL");a+=h.reduce((x,y)=>x+(parseFloat(y.amount)||0),0),n+=f.reduce((x,y)=>x+(parseFloat(y.amount)||0),0),i+=h.length,o+=f.length}}catch(l){console.log("monime_transactions table may not exist:",l)}try{let l=X.from("checkout_sessions").select("id, amount, currency_code, status, payment_method, completed_at, created_at").eq("status","COMPLETE").eq("currency_code",s);e&&(l=l.gte("completed_at",e.toISOString())),t&&(l=l.lte("completed_at",t.toISOString()));const{data:c,error:d}=await l;if(!d&&c){const h=c.filter(f=>{var x;return f.payment_method==="mobile_money"||f.payment_method==="monime_mobile"||((x=f.payment_method)==null?void 0:x.includes("mobile"))});a+=h.reduce((f,x)=>f+(parseFloat(x.amount)||0),0),i+=h.length}}catch(l){console.log("checkout_sessions query error:",l)}try{let l=X.from("transactions").select("id, type, amount, currency, status, metadata, created_at").eq("status","completed").eq("currency",s);e&&(l=l.gte("created_at",e.toISOString())),t&&(l=l.lte("created_at",t.toISOString()));const{data:c,error:d}=await l;if(!d&&c){const h=c.filter(f=>{const x=f.metadata||{},y=x.paymentMethod||x.payment_method||"";return y.includes("monime")||y.includes("mobile")||x.monimeReference||x.checkoutSessionId});for(const f of h){const x=parseFloat(f.amount)||0,y=(f.type||"").toLowerCase();y==="deposit"||y==="credit"||y==="receive"?(f.metadata||{}).checkoutSessionId||(a+=x,i+=1):(y==="withdrawal"||y==="cashout"||y==="payout")&&(n+=x,o+=1)}}}catch(l){console.log("transactions query error:",l)}try{let l=X.from("payouts").select("id, amount, currency, status, created_at").eq("status","completed").eq("currency",s);e&&(l=l.gte("created_at",e.toISOString())),t&&(l=l.lte("created_at",t.toISOString()));const{data:c,error:d}=await l;!d&&c&&(n+=c.reduce((h,f)=>h+(parseFloat(f.amount)||0),0),o+=c.length)}catch(l){console.log("payouts table may not exist:",l)}return{totalDeposits:a,totalWithdrawals:n,depositCount:i,withdrawalCount:o,netFlow:a-n,currency:s}}catch(a){return console.error("Error calculating Monime flows:",a),{totalDeposits:0,totalWithdrawals:0,depositCount:0,withdrawalCount:0,netFlow:0,currency:s}}},Jv={async getSummary(e="SLE"){const t=["today","yesterday","thisWeek","thisMonth","thisYear"],[s,a,n,i,o,l]=await Promise.all([...t.map(c=>{const{start:d,end:h}=PPe(c);return Zv(d,h,e)}),Zv(void 0,void 0,e)]);return{today:s,yesterday:a,thisWeek:n,thisMonth:i,thisYear:o,allTime:l}},async getDailyData(e=7,t="SLE"){const s=[],a=new Date;for(let n=e-1;n>=0;n--){const i=new Date(a.getFullYear(),a.getMonth(),a.getDate()-n),o=new Date(i.getFullYear(),i.getMonth(),i.getDate()),l=new Date(i.getFullYear(),i.getMonth(),i.getDate(),23,59,59,999),c=i.toLocaleDateString("en-US",{weekday:"short"}),d=await Zv(o,l,t);s.push({period:c,deposits:d.totalDeposits,withdrawals:d.totalWithdrawals,depositCount:d.depositCount,withdrawalCount:d.withdrawalCount,netFlow:d.netFlow})}return s},async getMonthlyData(e=6,t="SLE"){const s=[],a=new Date;for(let n=e-1;n>=0;n--){const i=new Date(a.getFullYear(),a.getMonth()-n,1),o=new Date(a.getFullYear(),a.getMonth()-n+1,0,23,59,59,999),l=i.toLocaleDateString("en-US",{month:"short"}),c=await Zv(i,o,t);s.push({period:l,deposits:c.totalDeposits,withdrawals:c.totalWithdrawals,depositCount:c.depositCount,withdrawalCount:c.withdrawalCount,netFlow:c.netFlow})}return s},async getRecentTransactions(e=10,t){try{let s=X.from("checkout_sessions").select("*").eq("status","COMPLETE").order("completed_at",{ascending:!1}).limit(e);t&&(s=s.eq("currency_code",t));const{data:a,error:n}=await s;return n?(console.error("Error fetching recent transactions:",n),[]):(a||[]).filter(o=>{var l;return o.payment_method==="mobile_money"||o.payment_method==="monime_mobile"||((l=o.payment_method)==null?void 0:l.includes("mobile"))})}catch(s){return console.error("Error:",s),[]}},subscribeToTransactions(e){const t=X.channel("monime-checkout-changes").on("postgres_changes",{event:"*",schema:"public",table:"checkout_sessions"},()=>{e()}).subscribe(),s=X.channel("monime-txn-changes").on("postgres_changes",{event:"*",schema:"public",table:"transactions"},()=>{e()}).subscribe(),a=X.channel("monime-direct-changes").on("postgres_changes",{event:"*",schema:"public",table:"monime_transactions"},()=>{e()}).subscribe(),n=X.channel("monime-payout-changes").on("postgres_changes",{event:"*",schema:"public",table:"payouts"},()=>{e()}).subscribe();return()=>{t.unsubscribe(),s.unsubscribe(),a.unsubscribe(),n.unsubscribe()}}},TPe=({currency:e="SLE"})=>{const[t,s]=p.useState(!1),[a,n]=p.useState(!1),[i,o]=p.useState(null),[l,c]=p.useState([]),[d,h]=p.useState([]),[f,x]=p.useState(!0),[y,v]=p.useState(!1),[w,N]=p.useState("today"),k=M=>M==="SLE"?"Le":M==="USD"?"$":M,C=M=>M>=1e6?`${(M/1e6).toFixed(1)}M`:M>=1e3?`${(M/1e3).toFixed(1)}K`:M.toFixed(0),E=p.useCallback(async()=>{try{const[M,R,$]=await Promise.all([Jv.getSummary(e),Jv.getDailyData(7,e),Jv.getMonthlyData(6,e)]);o(M),c(R),h($)}catch(M){console.error("Error loading Monime analytics:",M)}finally{x(!1),v(!1)}},[e]);p.useEffect(()=>{E();const M=Jv.subscribeToTransactions(()=>{E()});return()=>{M()}},[E]);const _=()=>{v(!0),E()},A=(()=>{if(!i)return{deposits:0,withdrawals:0,netFlow:0,depositCount:0,withdrawalCount:0};switch(w){case"today":return i.today;case"thisWeek":return i.thisWeek;case"thisMonth":return i.thisMonth;case"allTime":return i.allTime;default:return i.today}})(),P=k(e);return f?r.jsx("div",{className:"bg-gradient-to-br from-purple-900/30 to-indigo-900/30 rounded-xl border border-purple-500/20 p-4 mt-4",children:r.jsx("div",{className:"flex items-center justify-center py-8",children:r.jsx(Ot,{className:"w-6 h-6 text-purple-400 animate-spin"})})}):r.jsxs("div",{className:"bg-gradient-to-br from-purple-900/30 to-indigo-900/30 rounded-xl border border-purple-500/20 mt-4 overflow-hidden",children:[r.jsxs("button",{onClick:()=>s(!t),className:"w-full p-4 flex items-center justify-between hover:bg-purple-500/10 transition-colors",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"p-2 bg-purple-500/20 rounded-lg",children:r.jsx(Rt,{className:"w-5 h-5 text-purple-400"})}),r.jsxs("div",{className:"text-left",children:[r.jsx("h3",{className:"text-sm font-medium text-white",children:"Monime Gateway"}),r.jsx("p",{className:"text-xs text-gray-400",children:"Payment Flows"})]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs("div",{className:"text-right mr-2",children:[r.jsx("p",{className:"text-xs text-gray-400",children:"Net Flow"}),r.jsxs("p",{className:`text-sm font-semibold ${A.netFlow>=0?"text-green-400":"text-red-400"}`,children:[A.netFlow>=0?"+":"",P," ",C(A.netFlow)]})]}),t?r.jsx(Hp,{className:"w-5 h-5 text-gray-400"}):r.jsx(ys,{className:"w-5 h-5 text-gray-400"})]})]}),r.jsx(Zp,{children:t&&r.jsx(Pe.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.3},children:r.jsxs("div",{className:"px-4 pb-4 space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("div",{className:"flex gap-1",children:["today","thisWeek","thisMonth","allTime"].map(M=>r.jsx("button",{onClick:()=>N(M),className:`px-2 py-1 text-xs rounded-md transition-colors ${w===M?"bg-purple-500 text-white":"bg-purple-500/20 text-purple-300 hover:bg-purple-500/30"}`,children:M==="today"?"Today":M==="thisWeek"?"Week":M==="thisMonth"?"Month":"All"},M))}),r.jsx("button",{onClick:_,disabled:y,className:"p-1 text-purple-400 hover:text-purple-300 transition-colors",children:r.jsx(Ot,{className:`w-4 h-4 ${y?"animate-spin":""}`})})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[r.jsxs("div",{className:"bg-green-500/10 rounded-lg p-3 border border-green-500/20",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx(Uie,{className:"w-4 h-4 text-green-400"}),r.jsx("span",{className:"text-xs text-green-400 font-medium",children:"Inflows"})]}),r.jsxs("p",{className:"text-lg font-bold text-green-400",children:[P," ",C(A.totalDeposits??A.deposits??0)]}),r.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:[A.depositCount," deposits"]})]}),r.jsxs("div",{className:"bg-red-500/10 rounded-lg p-3 border border-red-500/20",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx(Vie,{className:"w-4 h-4 text-red-400"}),r.jsx("span",{className:"text-xs text-red-400 font-medium",children:"Outflows"})]}),r.jsxs("p",{className:"text-lg font-bold text-red-400",children:[P," ",C(A.totalWithdrawals??A.withdrawals??0)]}),r.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:[A.withdrawalCount," withdrawals"]})]})]}),r.jsxs("div",{className:"bg-gray-800/50 rounded-lg p-3 border border-gray-700",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(yx,{className:"w-4 h-4 text-purple-400"}),r.jsx("span",{className:"text-sm text-gray-300",children:"Net Flow"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[A.netFlow>=0?r.jsx(Ts,{className:"w-4 h-4 text-green-400"}):r.jsx(ZV,{className:"w-4 h-4 text-red-400"}),r.jsxs("span",{className:`text-sm font-semibold ${A.netFlow>=0?"text-green-400":"text-red-400"}`,children:[A.netFlow>=0?"+":"",P," ",C(A.netFlow)]})]})]}),r.jsx("div",{className:"mt-2 h-2 bg-gray-700 rounded-full overflow-hidden",children:r.jsx("div",{className:`h-full transition-all duration-500 ${A.netFlow>=0?"bg-green-500":"bg-red-500"}`,style:{width:`${Math.min(100,Math.abs(A.netFlow)/Math.max((A.totalDeposits??A.deposits??0)+(A.totalWithdrawals??A.withdrawals??0),1)*100)}%`}})})]}),r.jsxs("button",{onClick:()=>n(!a),className:"w-full flex items-center justify-center gap-2 py-2 text-xs text-purple-400 hover:text-purple-300 transition-colors",children:[a?"Hide Charts":"Show Charts",a?r.jsx(Hp,{className:"w-4 h-4"}):r.jsx(ys,{className:"w-4 h-4"})]}),r.jsx(Zp,{children:a&&r.jsxs(Pe.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.3},className:"space-y-4",children:[r.jsxs("div",{className:"bg-gray-800/30 rounded-lg p-3",children:[r.jsx("h4",{className:"text-xs text-gray-400 mb-2",children:"Daily Flows (7 days)"}),r.jsx("div",{className:"h-40",children:r.jsx(jj,{width:"100%",height:"100%",children:r.jsxs(WQ,{data:l,children:[r.jsxs("defs",{children:[r.jsxs("linearGradient",{id:"depositGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[r.jsx("stop",{offset:"5%",stopColor:"#22c55e",stopOpacity:.3}),r.jsx("stop",{offset:"95%",stopColor:"#22c55e",stopOpacity:0})]}),r.jsxs("linearGradient",{id:"withdrawalGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[r.jsx("stop",{offset:"5%",stopColor:"#ef4444",stopOpacity:.3}),r.jsx("stop",{offset:"95%",stopColor:"#ef4444",stopOpacity:0})]})]}),r.jsx(wy,{strokeDasharray:"3 3",stroke:"#374151"}),r.jsx(jy,{dataKey:"period",tick:{fill:"#9ca3af",fontSize:10}}),r.jsx(Ny,{tick:{fill:"#9ca3af",fontSize:10},tickFormatter:C}),r.jsx(zj,{contentStyle:{backgroundColor:"#1f2937",border:"1px solid #374151",borderRadius:"8px",fontSize:"12px"},formatter:M=>[`${P} ${C(M)}`,""]}),r.jsx(tN,{type:"monotone",dataKey:"deposits",stroke:"#22c55e",fill:"url(#depositGradient)",name:"Inflows"}),r.jsx(tN,{type:"monotone",dataKey:"withdrawals",stroke:"#ef4444",fill:"url(#withdrawalGradient)",name:"Outflows"})]})})})]}),r.jsxs("div",{className:"bg-gray-800/30 rounded-lg p-3",children:[r.jsx("h4",{className:"text-xs text-gray-400 mb-2",children:"Monthly Comparison"}),r.jsx("div",{className:"h-40",children:r.jsx(jj,{width:"100%",height:"100%",children:r.jsxs(VQ,{data:d,children:[r.jsx(wy,{strokeDasharray:"3 3",stroke:"#374151"}),r.jsx(jy,{dataKey:"period",tick:{fill:"#9ca3af",fontSize:10}}),r.jsx(Ny,{tick:{fill:"#9ca3af",fontSize:10},tickFormatter:C}),r.jsx(zj,{contentStyle:{backgroundColor:"#1f2937",border:"1px solid #374151",borderRadius:"8px",fontSize:"12px"},formatter:M=>[`${P} ${C(M)}`,""]}),r.jsx(tG,{wrapperStyle:{fontSize:"10px"}}),r.jsx(Qj,{dataKey:"deposits",fill:"#22c55e",name:"Inflows",radius:[2,2,0,0]}),r.jsx(Qj,{dataKey:"withdrawals",fill:"#ef4444",name:"Outflows",radius:[2,2,0,0]})]})})})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[r.jsxs("div",{className:"bg-gray-800/30 rounded-lg p-2",children:[r.jsx("p",{className:"text-gray-400",children:"Avg Daily Deposits"}),r.jsxs("p",{className:"text-white font-medium",children:[P," ",C(l.reduce((M,R)=>M+R.deposits,0)/Math.max(l.length,1))]})]}),r.jsxs("div",{className:"bg-gray-800/30 rounded-lg p-2",children:[r.jsx("p",{className:"text-gray-400",children:"Avg Daily Withdrawals"}),r.jsxs("p",{className:"text-white font-medium",children:[P," ",C(l.reduce((M,R)=>M+R.withdrawals,0)/Math.max(l.length,1))]})]})]})]})})]})})})]})};function IPe({onOpenFloat:e,onReplenishFloat:t,onCloseFloat:s,onViewHistory:a}){var ne,ce,xe,_e,oe;const{user:n}=pt(),[i,o]=p.useState(!0),[l,c]=p.useState(!1),[d,h]=p.useState(!0),[f,x]=p.useState([]),[y,v]=p.useState([]),[w,N]=p.useState({}),[k,C]=p.useState(null),[E,_]=p.useState(null),[T,A]=p.useState(null),[P,M]=p.useState("daily"),[R,$]=p.useState(!1),W=((ne=n==null?void 0:n.roles)==null?void 0:ne.includes("superadmin"))||!1,I=((ce=n==null?void 0:n.roles)==null?void 0:ce.includes("admin"))||((xe=n==null?void 0:n.roles)==null?void 0:xe.includes("superadmin"))||!1;p.useEffect(()=>{if(I){B(),O();const ie=X.channel("system-float-changes").on("postgres_changes",{event:"*",schema:"public",table:"system_float"},()=>{console.log("Float changed, refreshing..."),B()}).on("postgres_changes",{event:"*",schema:"public",table:"system_float_history"},()=>{console.log("Float history changed, refreshing..."),B()}).subscribe(),ge=XS.subscribeToTransactions(()=>{console.log("Transaction changed, refreshing profit..."),O()});return()=>{ie.unsubscribe(),ge()}}},[I]);const B=async()=>{h(!0);try{const[ie,ge]=await Promise.all([Hm.getFloatSummary(),cr.getCurrencies()]);x(ie.filter(Q=>Q.status==="active")),v(ge.filter(Q=>Q.isActive));const Z={};for(const Q of ie.filter(re=>re.status==="active"))Z[Q.currency]=await Hm.getTodayMovements(Q.currency);N(Z),ie.length>0&&!k&&C(ie[0].currency)}catch(ie){console.error("Error loading float data:",ie)}finally{h(!1)}},O=async()=>{$(!0);try{const[ie,ge]=await Promise.all([XS.getProfitSummary(),XS.getChartData()]);_(ie),A(ge)}catch(ie){console.error("Error loading profit data:",ie)}finally{$(!1)}},F=(ie,ge)=>{const Z=y.find(re=>re.code===ge),Q=(Z==null?void 0:Z.symbol)||ge;return ie>=1e6?`${Q} ${(ie/1e6).toFixed(2)}M`:ie>=1e3?`${Q} ${(ie/1e3).toFixed(1)}K`:`${Q} ${ie.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}`},q=(ie,ge)=>{const Z=y.find(re=>re.code===ge);return`${(Z==null?void 0:Z.symbol)||ge} ${ie.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}`},H=ie=>{const ge=y.find(Q=>Q.isDefault)||y[0],Z=(ge==null?void 0:ge.symbol)||"Le";return ie>=1e6?`${Z} ${(ie/1e6).toFixed(2)}M`:ie>=1e3?`${Z} ${(ie/1e3).toFixed(1)}K`:`${Z} ${ie.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}`},K=ie=>ie<50?"text-green-500":ie<75?"text-yellow-500":ie<90?"text-orange-500":"text-red-500",V=ie=>ie<50?"bg-green-500":ie<75?"bg-yellow-500":ie<90?"bg-orange-500":"bg-red-500",z=()=>{if(!T)return[];switch(P){case"daily":return T.daily;case"weekly":return T.weekly;case"monthly":return T.monthly;default:return T.daily}},G=()=>{if(!E)return{value:0,isPositive:!0};const ie=E.today.profit,ge=E.yesterday.profit;if(ge===0)return{value:100,isPositive:ie>0};const Z=(ie-ge)/ge*100;return{value:Math.abs(Z),isPositive:Z>=0}};if(!I)return null;const te=f.find(ie=>ie.currency===k),he=G();return r.jsxs("div",{className:"relative",children:[r.jsx("button",{onClick:()=>o(!i),className:"absolute -left-3 top-4 z-10 p-1.5 bg-white dark:bg-gray-800 rounded-full shadow-lg border border-gray-200 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:i?r.jsx(Qr,{className:"w-4 h-4 text-gray-600 dark:text-gray-400"}):r.jsx(Rw,{className:"w-4 h-4 text-gray-600 dark:text-gray-400"})}),r.jsx(Zp,{children:i&&r.jsxs(Pe.div,{initial:{width:0,opacity:0},animate:{width:340,opacity:1},exit:{width:0,opacity:0},transition:{duration:.3},className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg border border-gray-200 dark:border-gray-700 overflow-hidden max-h-[calc(100vh-120px)] overflow-y-auto",children:[r.jsx("div",{className:"bg-gradient-to-r from-primary-600 to-primary-700 p-4 sticky top-0 z-10",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"p-2 bg-white/20 rounded-lg",children:r.jsx(lo,{className:"w-5 h-5 text-white"})}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-white font-semibold",children:"System Float"}),r.jsx("p",{className:"text-primary-100 text-xs",children:"Consolidated Account"})]})]}),r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx("span",{className:"w-2 h-2 bg-green-400 rounded-full animate-pulse",title:"Real-time"}),r.jsx("button",{onClick:()=>{B(),O()},className:"p-2 hover:bg-white/20 rounded-lg transition-colors",title:"Refresh",children:r.jsx(Ot,{className:`w-4 h-4 text-white ${d||R?"animate-spin":""}`})})]})]})}),f.length>0&&r.jsx("div",{className:"flex border-b border-gray-200 dark:border-gray-700 px-2 pt-2 gap-1 overflow-x-auto",children:f.map(ie=>r.jsx("button",{onClick:()=>C(ie.currency),className:`px-3 py-2 text-sm font-medium rounded-t-lg transition-colors whitespace-nowrap ${k===ie.currency?"bg-primary-50 dark:bg-primary-900/30 text-primary-600 dark:text-primary-400 border-b-2 border-primary-600":"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300"}`,children:ie.currency},ie.currency))}),r.jsxs("div",{className:"p-4 space-y-4",children:[d?r.jsx("div",{className:"flex items-center justify-center py-8",children:r.jsx(Ot,{className:"w-6 h-6 text-gray-400 animate-spin"})}):f.length===0?r.jsxs("div",{className:"text-center py-6",children:[r.jsx(dt,{className:"w-12 h-12 text-gray-300 dark:text-gray-600 mx-auto mb-3"}),r.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm mb-4",children:"No active float"}),W&&r.jsxs("button",{onClick:e,className:"inline-flex items-center gap-2 px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-colors text-sm",children:[r.jsx(sr,{className:"w-4 h-4"}),"Open New Float"]})]}):te?r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"bg-gray-50 dark:bg-gray-900/50 rounded-lg p-3",children:[r.jsxs("div",{className:"flex items-center justify-between mb-1",children:[r.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Opening Balance"}),r.jsx("span",{className:"text-xs text-gray-400 dark:text-gray-500",children:te.financialYear||"Current Cycle"})]}),r.jsx("p",{className:"text-xl font-bold text-gray-900 dark:text-white",children:q(te.openingBalance,te.currency)})]}),r.jsxs("div",{className:"bg-primary-50 dark:bg-primary-900/20 rounded-lg p-3 border border-primary-200 dark:border-primary-800",children:[r.jsxs("div",{className:"flex items-center justify-between mb-1",children:[r.jsx("span",{className:"text-xs text-primary-600 dark:text-primary-400 uppercase tracking-wider font-medium",children:"Current Balance"}),r.jsx(Ae,{className:"w-4 h-4 text-primary-500"})]}),r.jsx("p",{className:"text-2xl font-bold text-primary-700 dark:text-primary-300",children:q(te.currentBalance,te.currency)})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex items-center justify-between text-sm",children:[r.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Float Utilization"}),r.jsxs("span",{className:`font-semibold ${K(te.utilizationPercentage)}`,children:[te.utilizationPercentage.toFixed(1),"%"]})]}),r.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:r.jsx("div",{className:`h-2 rounded-full transition-all ${V(te.utilizationPercentage)}`,style:{width:`${Math.min(te.utilizationPercentage,100)}%`}})}),r.jsxs("p",{className:"text-xs text-gray-400 dark:text-gray-500",children:[F(te.openingBalance-te.currentBalance,te.currency)," used of ",F(te.openingBalance,te.currency)]})]}),r.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-4",children:[r.jsxs("h4",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-3 flex items-center gap-2",children:[r.jsx(rh,{className:"w-4 h-4"}),"Today's Movement"]}),r.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[r.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 rounded-lg p-3",children:[r.jsxs("div",{className:"flex items-center gap-1 text-green-600 dark:text-green-400 mb-1",children:[r.jsx(Aa,{className:"w-4 h-4"}),r.jsx("span",{className:"text-xs uppercase font-medium",children:"Inflows"})]}),r.jsxs("p",{className:"text-lg font-semibold text-green-700 dark:text-green-300",children:["+",F(((_e=w[te.currency])==null?void 0:_e.inflows)||0,te.currency)]})]}),r.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 rounded-lg p-3",children:[r.jsxs("div",{className:"flex items-center gap-1 text-red-600 dark:text-red-400 mb-1",children:[r.jsx(Rr,{className:"w-4 h-4"}),r.jsx("span",{className:"text-xs uppercase font-medium",children:"Outflows"})]}),r.jsxs("p",{className:"text-lg font-semibold text-red-700 dark:text-red-300",children:["-",F(((oe=w[te.currency])==null?void 0:oe.outflows)||0,te.currency)]})]})]})]}),W&&r.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-4 space-y-2",children:[r.jsxs("button",{onClick:()=>t(te.currency),className:"w-full flex items-center justify-center gap-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors text-sm font-medium",children:[r.jsx(sr,{className:"w-4 h-4"}),"Replenish Float"]}),r.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[r.jsxs("button",{onClick:()=>a(te.currency),className:"flex items-center justify-center gap-1 px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors text-sm text-gray-700 dark:text-gray-300",children:[r.jsx(k6,{className:"w-4 h-4"}),"History"]}),r.jsxs("button",{onClick:()=>s(te.currency),className:"flex items-center justify-center gap-1 px-3 py-2 border border-red-300 dark:border-red-700 rounded-lg hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors text-sm text-red-600 dark:text-red-400",children:[r.jsx(Kr,{className:"w-4 h-4"}),"Close"]})]})]})]}):null,W&&f.length>0&&y.length>f.length&&r.jsx("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-4",children:r.jsxs("button",{onClick:e,className:"w-full flex items-center justify-center gap-2 px-4 py-2 border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg hover:border-primary-500 hover:bg-primary-50 dark:hover:bg-primary-900/20 transition-colors text-sm text-gray-600 dark:text-gray-400",children:[r.jsx(sr,{className:"w-4 h-4"}),"Open Float for Another Currency"]})})]}),r.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-700",children:[r.jsxs("button",{onClick:()=>c(!l),className:"w-full flex items-center justify-between p-4 hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"p-2 bg-emerald-100 dark:bg-emerald-900/30 rounded-lg",children:r.jsx(gO,{className:"w-4 h-4 text-emerald-600 dark:text-emerald-400"})}),r.jsxs("div",{className:"text-left",children:[r.jsx("h4",{className:"text-sm font-semibold text-gray-900 dark:text-white",children:"Profit Analytics"}),r.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Today: ",E?H(E.today.profit):"..."]})]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[E&&r.jsxs("span",{className:`text-xs font-medium px-2 py-1 rounded-full ${he.isPositive?"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400":"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-400"}`,children:[he.isPositive?"+":"-",he.value.toFixed(1),"%"]}),l?r.jsx(Hp,{className:"w-5 h-5 text-gray-400"}):r.jsx(ys,{className:"w-5 h-5 text-gray-400"})]})]}),r.jsx(Zp,{children:l&&r.jsx(Pe.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.3},className:"overflow-hidden",children:r.jsxs("div",{className:"px-4 pb-4 space-y-4",children:[r.jsx("div",{className:"flex gap-1 bg-gray-100 dark:bg-gray-700 rounded-lg p-1",children:["daily","weekly","monthly"].map(ie=>r.jsx("button",{onClick:()=>M(ie),className:`flex-1 px-3 py-1.5 text-xs font-medium rounded-md transition-colors ${P===ie?"bg-white dark:bg-gray-600 text-gray-900 dark:text-white shadow-sm":"text-gray-500 dark:text-gray-400 hover:text-gray-700"}`,children:ie.charAt(0).toUpperCase()+ie.slice(1)},ie))}),R?r.jsx("div",{className:"flex items-center justify-center h-40",children:r.jsx(Ot,{className:"w-5 h-5 text-gray-400 animate-spin"})}):r.jsx("div",{className:"h-40",children:r.jsx(jj,{width:"100%",height:"100%",children:r.jsxs(WQ,{data:z(),children:[r.jsx("defs",{children:r.jsxs("linearGradient",{id:"profitGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[r.jsx("stop",{offset:"5%",stopColor:"#10b981",stopOpacity:.3}),r.jsx("stop",{offset:"95%",stopColor:"#10b981",stopOpacity:0})]})}),r.jsx(wy,{strokeDasharray:"3 3",stroke:"#e5e7eb"}),r.jsx(jy,{dataKey:"period",tick:{fontSize:10},stroke:"#9ca3af"}),r.jsx(Ny,{tick:{fontSize:10},stroke:"#9ca3af",tickFormatter:ie=>ie>=1e3?`${(ie/1e3).toFixed(0)}K`:ie}),r.jsx(zj,{formatter:ie=>[H(ie),"Profit"],contentStyle:{backgroundColor:"rgba(255, 255, 255, 0.95)",border:"1px solid #e5e7eb",borderRadius:"8px",fontSize:"12px"}}),r.jsx(tN,{type:"monotone",dataKey:"profit",stroke:"#10b981",strokeWidth:2,fill:"url(#profitGradient)"})]})})}),E&&r.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[r.jsxs("div",{className:"bg-gray-50 dark:bg-gray-900/50 rounded-lg p-2",children:[r.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"This Week"}),r.jsx("p",{className:"text-sm font-semibold text-gray-900 dark:text-white",children:H(E.thisWeek.profit)}),r.jsxs("p",{className:"text-xs text-gray-400",children:[E.thisWeek.transactionCount," txns"]})]}),r.jsxs("div",{className:"bg-gray-50 dark:bg-gray-900/50 rounded-lg p-2",children:[r.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"This Month"}),r.jsx("p",{className:"text-sm font-semibold text-gray-900 dark:text-white",children:H(E.thisMonth.profit)}),r.jsxs("p",{className:"text-xs text-gray-400",children:[E.thisMonth.transactionCount," txns"]})]}),r.jsxs("div",{className:"bg-gray-50 dark:bg-gray-900/50 rounded-lg p-2",children:[r.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Last Month"}),r.jsx("p",{className:"text-sm font-semibold text-gray-900 dark:text-white",children:H(E.lastMonth.profit)}),r.jsxs("p",{className:"text-xs text-gray-400",children:[E.lastMonth.transactionCount," txns"]})]}),r.jsxs("div",{className:"bg-gray-50 dark:bg-gray-900/50 rounded-lg p-2",children:[r.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"This Year"}),r.jsx("p",{className:"text-sm font-semibold text-gray-900 dark:text-white",children:H(E.thisYear.profit)}),r.jsxs("p",{className:"text-xs text-gray-400",children:[E.thisYear.transactionCount," txns"]})]})]}),T&&r.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-4",children:[r.jsx("h5",{className:"text-xs font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Transaction Volume"}),r.jsx("div",{className:"h-24",children:r.jsx(jj,{width:"100%",height:"100%",children:r.jsxs(VQ,{data:z(),children:[r.jsx(wy,{strokeDasharray:"3 3",stroke:"#e5e7eb"}),r.jsx(jy,{dataKey:"period",tick:{fontSize:9},stroke:"#9ca3af"}),r.jsx(Ny,{tick:{fontSize:9},stroke:"#9ca3af"}),r.jsx(zj,{formatter:ie=>[ie,"Transactions"],contentStyle:{backgroundColor:"rgba(255, 255, 255, 0.95)",border:"1px solid #e5e7eb",borderRadius:"8px",fontSize:"11px"}}),r.jsx(Qj,{dataKey:"transactionCount",fill:"#6366f1",radius:[4,4,0,0]})]})})})]})]})})})]}),r.jsx(TPe,{currency:k||"SLE"})]})}),!i&&f.length>0&&r.jsx(Pe.div,{initial:{opacity:0},animate:{opacity:1},className:"w-14 bg-white dark:bg-gray-800 rounded-xl shadow-lg border border-gray-200 dark:border-gray-700 p-2",children:r.jsxs("div",{className:"flex flex-col items-center gap-2",children:[r.jsx("div",{className:"p-2 bg-primary-100 dark:bg-primary-900/30 rounded-lg",children:r.jsx(lo,{className:"w-5 h-5 text-primary-600 dark:text-primary-400"})}),f.slice(0,3).map(ie=>r.jsxs("div",{className:"text-center",children:[r.jsx("p",{className:"text-[10px] text-gray-500 dark:text-gray-400",children:ie.currency}),r.jsxs("p",{className:`text-xs font-bold ${K(ie.utilizationPercentage)}`,children:[ie.utilizationPercentage.toFixed(0),"%"]})]},ie.currency)),r.jsx("div",{className:"w-full h-px bg-gray-200 dark:bg-gray-700 my-1"}),r.jsx("div",{className:"p-1.5 bg-emerald-100 dark:bg-emerald-900/30 rounded-lg",children:r.jsx(gO,{className:"w-4 h-4 text-emerald-600 dark:text-emerald-400"})})]})})]})}function DPe({isOpen:e,onClose:t,mode:s,currency:a,onSuccess:n}){const{user:i}=pt(),[o,l]=p.useState(!1),[c,d]=p.useState(null),[h,f]=p.useState(!1),[x,y]=p.useState([]),[v,w]=p.useState([]),[N,k]=p.useState(!1),[C,E]=p.useState(a||""),[_,T]=p.useState(""),[A,P]=p.useState(new Date().getFullYear().toString()),[M,R]=p.useState("");p.useEffect(()=>{e&&($(),d(null),f(!1),E(a||""),s==="history"&&a&&W(a))},[e,a,s]);const $=async()=>{const z=await cr.getCurrencies();y(z.filter(G=>G.isActive)),!C&&z.length>0&&E(z[0].code)},W=async z=>{k(!0);try{const G=await Hm.getHistoryByCurrency(z,50);w(G)}catch(G){console.error("Error loading history:",G)}finally{k(!1)}},I=async z=>{if(z.preventDefault(),!!(i!=null&&i.id)){l(!0),d(null);try{switch(s){case"open":if(!_||parseFloat(_)<=0)throw new Error("Please enter a valid opening balance");await Hm.openFloat({currency:C,openingBalance:parseFloat(_),financialYear:A,description:M||`Opening balance for ${A}`},i.id);break;case"replenish":if(!_||parseFloat(_)<=0)throw new Error("Please enter a valid amount");await Hm.replenishFloat({currency:C||a,amount:parseFloat(_),description:M||"Capital injection"},i.id);break;case"close":await Hm.closeFloat({currency:C||a,description:M||"End of financial cycle"},i.id);break}f(!0),setTimeout(()=>{n==null||n(),t()},1500)}catch(G){d(G.message||"An error occurred")}finally{l(!1)}}},B=z=>{if(!z)return"Le";const G=x.find(te=>te.code===z);return G!=null&&G.symbol?G.symbol:z==="SLE"?"Le":z==="USD"?"$":z},O=(z,G)=>`${B(G)} ${z.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}`,F=z=>{switch(z){case"opening":return r.jsx(sr,{className:"w-4 h-4 text-blue-500"});case"replenishment":return r.jsx(Aa,{className:"w-4 h-4 text-green-500"});case"closing":return r.jsx(Kr,{className:"w-4 h-4 text-gray-500"});case"debit":return r.jsx(ZV,{className:"w-4 h-4 text-red-500"});case"credit":return r.jsx(Ts,{className:"w-4 h-4 text-green-500"});default:return r.jsx(_t,{className:"w-4 h-4 text-gray-400"})}},q=z=>z.charAt(0).toUpperCase()+z.slice(1),H=z=>{switch(z){case"opening":return"bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-400";case"replenishment":return"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400";case"closing":return"bg-gray-100 text-gray-700 dark:bg-gray-800 dark:text-gray-400";case"debit":return"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-400";case"credit":return"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400";default:return"bg-gray-100 text-gray-700 dark:bg-gray-800 dark:text-gray-400"}},K=()=>{switch(s){case"open":return"Open New Float";case"replenish":return"Replenish Float";case"close":return"Close Float";case"history":return"Float History";default:return"Float Management"}},V=()=>{switch(s){case"open":return"Start a new financial cycle by setting an opening balance for the system float.";case"replenish":return"Inject additional capital into the active float to increase available funds.";case"close":return"Close the current financial cycle. This will lock the float and prevent further spending.";case"history":return"View all float operations and transactions for this currency.";default:return""}};return e?r.jsx(Zp,{children:r.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:r.jsxs("div",{className:"flex min-h-full items-center justify-center p-4",children:[r.jsx(Pe.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50",onClick:t}),r.jsxs(Pe.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:`relative bg-white dark:bg-gray-800 rounded-xl shadow-2xl w-full ${s==="history"?"max-w-2xl":"max-w-md"}`,children:[r.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200 dark:border-gray-700",children:[r.jsxs("div",{children:[r.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:K()}),r.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-0.5",children:V()})]}),r.jsx("button",{onClick:t,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:r.jsx(Ct,{className:"w-5 h-5 text-gray-500"})})]}),r.jsx("div",{className:"p-6",children:h?r.jsxs("div",{className:"text-center py-8",children:[r.jsx("div",{className:"w-16 h-16 bg-green-100 dark:bg-green-900/30 rounded-full flex items-center justify-center mx-auto mb-4",children:r.jsx(Ae,{className:"w-8 h-8 text-green-600 dark:text-green-400"})}),r.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:"Success!"}),r.jsxs("p",{className:"text-gray-500 dark:text-gray-400",children:[s==="open"&&"New float has been opened successfully.",s==="replenish"&&"Float has been replenished successfully.",s==="close"&&"Float has been closed successfully."]})]}):s==="history"?r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[r.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Currency:"}),r.jsx("select",{value:C,onChange:z=>{E(z.target.value),W(z.target.value)},className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-sm",children:x.map(z=>r.jsxs("option",{value:z.code,children:[z.code," - ",z.name]},z.code))})]}),N?r.jsx("div",{className:"flex items-center justify-center py-8",children:r.jsx(Ke,{className:"w-6 h-6 animate-spin text-gray-400"})}):v.length===0?r.jsxs("div",{className:"text-center py-8",children:[r.jsx(k6,{className:"w-12 h-12 text-gray-300 dark:text-gray-600 mx-auto mb-3"}),r.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"No history found"})]}):r.jsx("div",{className:"max-h-96 overflow-y-auto space-y-2",children:v.map(z=>r.jsxs("div",{className:"flex items-start gap-3 p-3 bg-gray-50 dark:bg-gray-900/50 rounded-lg",children:[r.jsx("div",{className:"p-2 bg-white dark:bg-gray-800 rounded-lg shadow-sm",children:F(z.type)}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[r.jsx("span",{className:`px-2 py-0.5 text-xs font-medium rounded-full ${H(z.type)}`,children:q(z.type)}),r.jsx("span",{className:"text-xs text-gray-400",children:new Date(z.createdAt).toLocaleString()})]}),r.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 truncate",children:z.description||z.reference}),r.jsxs("div",{className:"flex items-center gap-4 mt-1 text-xs",children:[r.jsxs("span",{className:"text-gray-500 dark:text-gray-400",children:["Amount: ",r.jsxs("span",{className:`font-medium ${z.type==="debit"?"text-red-600":"text-green-600"}`,children:[z.type==="debit"?"-":"+",O(z.amount,z.currency)]})]}),r.jsx("span",{className:"text-gray-400",children:"|"}),r.jsxs("span",{className:"text-gray-500 dark:text-gray-400",children:["Balance: ",O(z.previousBalance,z.currency),"  ",O(z.newBalance,z.currency)]})]})]})]},z.id))})]}):r.jsxs("form",{onSubmit:I,className:"space-y-4",children:[c&&r.jsxs("div",{className:"flex items-center gap-2 p-3 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg text-red-700 dark:text-red-400 text-sm",children:[r.jsx(dt,{className:"w-4 h-4 flex-shrink-0"}),c]}),s==="open"&&r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Currency"}),r.jsxs("select",{value:C,onChange:z=>E(z.target.value),required:!0,className:"w-full px-4 py-2.5 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-primary-500 focus:border-transparent",children:[r.jsx("option",{value:"",children:"Select currency"}),x.map(z=>r.jsxs("option",{value:z.code,children:[z.symbol," - ",z.name," (",z.code,")"]},z.code))]})]}),(s==="replenish"||s==="close")&&a&&r.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-gray-900/50 rounded-lg",children:[r.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Currency: "}),r.jsxs("span",{className:"font-semibold text-gray-900 dark:text-white",children:[B(a)," (",a,")"]})]}),(s==="open"||s==="replenish")&&r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:s==="open"?"Opening Balance":"Amount to Add"}),r.jsxs("div",{className:"relative",children:[r.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:r.jsx("span",{className:"text-gray-500 dark:text-gray-400 font-medium text-sm",children:B(C||a||"SLE")})}),r.jsx("input",{type:"number",value:_,onChange:z=>T(z.target.value),placeholder:"0.00",step:"0.01",min:"0",required:!0,className:"w-full pl-10 pr-4 py-2.5 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-primary-500 focus:border-transparent"})]})]}),s==="open"&&r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Financial Year"}),r.jsxs("div",{className:"relative",children:[r.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:r.jsx(Li,{className:"w-5 h-5 text-gray-400"})}),r.jsx("input",{type:"text",value:A,onChange:z=>P(z.target.value),placeholder:"2024",required:!0,className:"w-full pl-10 pr-4 py-2.5 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-primary-500 focus:border-transparent"})]})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:["Description ",s!=="close"&&"(Optional)"]}),r.jsxs("div",{className:"relative",children:[r.jsx("div",{className:"absolute top-3 left-3 pointer-events-none",children:r.jsx(ao,{className:"w-5 h-5 text-gray-400"})}),r.jsx("textarea",{value:M,onChange:z=>R(z.target.value),placeholder:s==="open"?"Opening balance for new financial cycle...":s==="replenish"?"Reason for capital injection...":"Reason for closing the float...",rows:3,className:"w-full pl-10 pr-4 py-2.5 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-primary-500 focus:border-transparent resize-none"})]})]}),s==="close"&&r.jsxs("div",{className:"flex items-start gap-2 p-3 bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-lg text-yellow-800 dark:text-yellow-300 text-sm",children:[r.jsx(dt,{className:"w-4 h-4 flex-shrink-0 mt-0.5"}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium",children:"Warning"}),r.jsx("p",{className:"text-yellow-700 dark:text-yellow-400",children:"Closing the float will lock this financial cycle and prevent any further transactions until a new float is opened."})]})]}),r.jsx("button",{type:"submit",disabled:o,className:`w-full flex items-center justify-center gap-2 px-4 py-3 rounded-lg font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed ${s==="close"?"bg-red-600 hover:bg-red-700 text-white":"bg-primary-600 hover:bg-primary-700 text-white"}`,children:o?r.jsxs(r.Fragment,{children:[r.jsx(Ke,{className:"w-5 h-5 animate-spin"}),"Processing..."]}):r.jsxs(r.Fragment,{children:[s==="open"&&r.jsx(sr,{className:"w-5 h-5"}),s==="replenish"&&r.jsx(Aa,{className:"w-5 h-5"}),s==="close"&&r.jsx(Kr,{className:"w-5 h-5"}),s==="open"&&"Open Float",s==="replenish"&&"Replenish Float",s==="close"&&"Close Float"]})})]})}),s==="history"&&r.jsx("div",{className:"px-6 py-4 border-t border-gray-200 dark:border-gray-700 flex justify-end",children:r.jsx("button",{onClick:t,className:"px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:"Close"})})]})]})})}):null}function OPe(){const{user:e}=pt(),t=Ut(),[s,a]=p.useState({totalAccounts:0,activeAccounts:0,totalCustomers:0,verifiedCustomers:0,totalCards:0,activeCards:0,virtualCards:0,physicalCards:0,cardPrograms:0,totalVolume:0,pendingAuthorizations:0,disputesOpen:0,apiRequests:0,webhookDeliveries:0,avgResponseTime:0,activeDevelopers:0}),[n,i]=p.useState([]),[o,l]=p.useState([]),[c,d]=p.useState([]),[h,f]=p.useState(0),[x,y]=p.useState(!0),[v,w]=p.useState(null),[N,k]=p.useState(!1),[C,E]=p.useState("open"),[_,T]=p.useState(),[A,P]=p.useState(0);p.useEffect(()=>{cr.getDefaultCurrency().then(w),q(),M();const ne=mg.subscribeToNotifications(ce=>{d(xe=>[ce,...xe].slice(0,10)),f(xe=>xe+1)});return()=>{ne()}},[]);const M=async()=>{try{const[ne,ce]=await Promise.all([mg.getNotifications({limit:10}),mg.getUnreadCount()]);d(ne),f(ce)}catch(ne){console.error("Error fetching admin notifications:",ne)}},R=async ne=>{if(e!=null&&e.id)try{await mg.markAsRead(ne,e.id),d(ce=>ce.map(xe=>xe.id===ne?{...xe,status:"read"}:xe)),f(ce=>Math.max(0,ce-1))}catch(ce){console.error("Error marking notification as read:",ce)}},$=async()=>{if(e!=null&&e.id)try{await mg.markAllAsRead(e.id),d(ne=>ne.map(ce=>({...ce,status:"read"}))),f(0)}catch(ne){console.error("Error marking all notifications as read:",ne)}},W=ne=>{R(ne.id),ne.actionUrl&&t(ne.actionUrl)},I=ne=>{switch(ne){case"card_order":return r.jsx(sh,{className:"w-4 h-4"});case"kyc_request":return r.jsx(Tl,{className:"w-4 h-4"});case"dispute":return r.jsx(Ht,{className:"w-4 h-4"});default:return r.jsx(Lr,{className:"w-4 h-4"})}},B=ne=>{switch(ne){case"urgent":return"bg-red-100 dark:bg-red-900/30 text-red-600 dark:text-red-400 border-l-red-500";case"high":return"bg-orange-100 dark:bg-orange-900/30 text-orange-600 dark:text-orange-400 border-l-orange-500";case"medium":return"bg-yellow-100 dark:bg-yellow-900/30 text-yellow-600 dark:text-yellow-400 border-l-yellow-500";default:return"bg-blue-100 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400 border-l-blue-500"}},O=(v==null?void 0:v.symbol)||"Le",F=ne=>`${O} ${ne.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}`,q=async()=>{y(!0);try{const{data:ne}=await X.from("users").select("id, status, kyc_status, roles"),ce=(ne==null?void 0:ne.filter(je=>{var Fe,ke,Ve;return((Fe=je.roles)==null?void 0:Fe.includes("user"))&&!((ke=je.roles)!=null&&ke.includes("merchant"))&&!((Ve=je.roles)!=null&&Ve.includes("agent"))}))||[],xe=(ne==null?void 0:ne.filter(je=>{var Fe;return(Fe=je.roles)==null?void 0:Fe.includes("merchant")}))||[],_e=(ne==null?void 0:ne.filter(je=>{var Fe;return(Fe=je.roles)==null?void 0:Fe.includes("agent")}))||[],{data:oe}=await X.from("cards").select("id, status, type"),ie=new Set,{data:ge}=await X.from("transactions").select("id, amount, type, status, created_at, user_id").order("created_at",{ascending:!1}).limit(5),{data:Z}=await X.from("wallets").select("balance"),Q=(Z==null?void 0:Z.reduce((je,Fe)=>je+(Fe.balance||0),0))||0;if(a({totalAccounts:(ne==null?void 0:ne.length)||0,activeAccounts:(ne==null?void 0:ne.filter(je=>je.status==="ACTIVE").length)||0,totalCustomers:ce.length,verifiedCustomers:ce.filter(je=>je.kyc_status==="VERIFIED").length,totalCards:(oe==null?void 0:oe.length)||0,activeCards:(oe==null?void 0:oe.filter(je=>je.status==="active").length)||0,virtualCards:(oe==null?void 0:oe.filter(je=>je.type==="virtual").length)||0,physicalCards:(oe==null?void 0:oe.filter(je=>je.type==="physical").length)||0,cardPrograms:0,totalVolume:Q,pendingAuthorizations:0,disputesOpen:0,apiRequests:0,webhookDeliveries:0,avgResponseTime:0,activeDevelopers:ie.size}),ge&&ge.length>0){const je=[...new Set(ge.map(Ve=>Ve.user_id))],{data:Fe}=await X.from("users").select("id, first_name, last_name").in("id",je),ke=new Map((Fe==null?void 0:Fe.map(Ve=>[Ve.id,Ve]))||[]);i(ge.map(Ve=>{const le=ke.get(Ve.user_id),me=H(new Date(Ve.created_at));return{id:Ve.id.slice(0,8).toUpperCase(),customer:le?`${le.first_name} ${le.last_name}`:"Unknown",amount:Ve.amount,type:Ve.type,status:Ve.status,time:me}}))}const re=ce.filter(je=>je.kyc_status==="PENDING").length,pe=[];re>0&&pe.push({type:"kyc",description:`${re} KYC verification${re>1?"s":""} awaiting review`,priority:re>10?"high":"medium"});const Se=ce.filter(je=>je.status!=="ACTIVE").length;Se>0&&pe.push({type:"users",description:`${Se} inactive user account${Se>1?"s":""}`,priority:"low"}),l(pe)}catch(ne){console.error("Error fetching dashboard data:",ne)}finally{y(!1)}},H=ne=>{const ce=Math.floor((new Date().getTime()-ne.getTime())/1e3);if(ce<60)return`${ce} sec ago`;const xe=Math.floor(ce/60);if(xe<60)return`${xe} min ago`;const _e=Math.floor(xe/60);return _e<24?`${_e} hr ago`:`${Math.floor(_e/24)} days ago`},K=()=>{E("open"),T(void 0),k(!0)},V=ne=>{E("replenish"),T(ne),k(!0)},z=ne=>{E("close"),T(ne),k(!0)},G=ne=>{E("history"),T(ne),k(!0)},te=()=>{k(!1),T(void 0)},he=()=>{P(ne=>ne+1)};return r.jsxs(fr,{children:[r.jsxs("div",{className:"flex gap-6",children:[r.jsxs("div",{className:"flex-1 space-y-6",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Dashboard"}),r.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Overview of your card issuing platform"})]}),r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Last updated: Just now"}),r.jsxs("button",{className:"px-4 py-2 text-sm bg-primary-600 text-white rounded-lg hover:bg-primary-700 flex items-center gap-2",children:[r.jsx(yx,{className:"w-4 h-4"}),"View Analytics"]})]})]}),r.jsxs(Pe.div,{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",initial:{opacity:0},animate:{opacity:1},transition:{staggerChildren:.1},children:[r.jsxs(Be,{className:"p-6",delay:0,children:[r.jsx("div",{className:"flex items-center justify-between mb-4",children:r.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-900/30 rounded-lg",children:r.jsx(Rt,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"})})}),r.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Total Accounts"}),r.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:s.totalAccounts.toLocaleString()}),r.jsxs("p",{className:"text-xs text-gray-400 dark:text-gray-500 mt-1",children:[s.activeAccounts.toLocaleString()," active"]})]}),r.jsxs(Be,{className:"p-6",delay:.1,children:[r.jsx("div",{className:"flex items-center justify-between mb-4",children:r.jsx("div",{className:"p-2 bg-green-100 dark:bg-green-900/30 rounded-lg",children:r.jsx(nn,{className:"w-5 h-5 text-green-600 dark:text-green-400"})})}),r.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Customers"}),r.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:s.totalCustomers.toLocaleString()}),r.jsxs("p",{className:"text-xs text-gray-400 dark:text-gray-500 mt-1",children:[s.verifiedCustomers.toLocaleString()," verified"]})]}),r.jsxs(Be,{className:"p-6",delay:.2,children:[r.jsx("div",{className:"flex items-center justify-between mb-4",children:r.jsx("div",{className:"p-2 bg-purple-100 dark:bg-purple-900/30 rounded-lg",children:r.jsx(lt,{className:"w-5 h-5 text-purple-600 dark:text-purple-400"})})}),r.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Cards Issued"}),r.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:s.totalCards.toLocaleString()}),r.jsxs("p",{className:"text-xs text-gray-400 dark:text-gray-500 mt-1",children:[s.activeCards.toLocaleString()," active"]})]}),r.jsxs(Be,{className:"p-6",delay:.3,children:[r.jsx("div",{className:"flex items-center justify-between mb-4",children:r.jsx("div",{className:"p-2 bg-emerald-100 dark:bg-emerald-900/30 rounded-lg",children:r.jsx(Cr,{className:"w-5 h-5 text-emerald-600 dark:text-emerald-400"})})}),r.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Total Volume"}),r.jsxs("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:[O,(s.totalVolume/1e6).toFixed(2),"M"]}),r.jsx("p",{className:"text-xs text-gray-400 dark:text-gray-500 mt-1",children:"This month"})]})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[r.jsx(Be,{className:"p-6 border-l-4 border-l-yellow-500",delay:.4,children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"p-2 bg-yellow-100 dark:bg-yellow-900/30 rounded-lg",children:r.jsx(Tl,{className:"w-5 h-5 text-yellow-600 dark:text-yellow-400"})}),r.jsxs("div",{children:[r.jsx("p",{className:"font-semibold text-gray-900 dark:text-white",children:"Pending Authorizations"}),r.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:[s.pendingAuthorizations," requests waiting"]})]})]}),r.jsx(xt,{to:"/admin/authorization",className:"text-primary-600 dark:text-primary-400 hover:text-primary-700 dark:hover:text-primary-300",children:r.jsx(Rr,{className:"w-5 h-5"})})]})}),r.jsx(Be,{className:"p-6 border-l-4 border-l-red-500",delay:.5,children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"p-2 bg-red-100 dark:bg-red-900/30 rounded-lg",children:r.jsx(Ht,{className:"w-5 h-5 text-red-600 dark:text-red-400"})}),r.jsxs("div",{children:[r.jsx("p",{className:"font-semibold text-gray-900 dark:text-white",children:"Open Disputes"}),r.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:[s.disputesOpen," disputes need attention"]})]})]}),r.jsx(xt,{to:"/admin/disputes",className:"text-primary-600 dark:text-primary-400 hover:text-primary-700 dark:hover:text-primary-300",children:r.jsx(Rr,{className:"w-5 h-5"})})]})}),r.jsx(Be,{className:"p-6 border-l-4 border-l-blue-500",delay:.6,children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-900/30 rounded-lg",children:r.jsx(Mw,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"})}),r.jsxs("div",{children:[r.jsx("p",{className:"font-semibold text-gray-900 dark:text-white",children:"Card Programs"}),r.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:[s.cardPrograms," active programs"]})]})]}),r.jsx(xt,{to:"/admin/card-programs",className:"text-primary-600 dark:text-primary-400 hover:text-primary-700 dark:hover:text-primary-300",children:r.jsx(Rr,{className:"w-5 h-5"})})]})})]}),r.jsxs(Be,{className:"p-6",delay:.65,children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Notifications"}),h>0&&r.jsx("span",{className:"inline-flex items-center justify-center px-2 py-1 text-xs font-bold leading-none text-white bg-red-500 rounded-full",children:h})]}),r.jsx("div",{className:"flex items-center gap-2",children:h>0&&r.jsxs("button",{onClick:$,className:"text-sm text-primary-600 dark:text-primary-400 hover:text-primary-700 dark:hover:text-primary-300 flex items-center gap-1",children:[r.jsx(Th,{className:"w-4 h-4"}),"Mark all read"]})})]}),c.length===0?r.jsxs("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:[r.jsx(Lr,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),r.jsx("p",{children:"No notifications yet"})]}):r.jsx("div",{className:"space-y-2 max-h-80 overflow-y-auto",children:c.map(ne=>r.jsx("div",{onClick:()=>W(ne),className:`p-3 rounded-lg border-l-4 cursor-pointer transition-all hover:shadow-md ${ne.status==="unread"?B(ne.priority):"bg-gray-50 dark:bg-gray-800/50 border-l-gray-300 dark:border-l-gray-600"}`,children:r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx("div",{className:`p-2 rounded-lg ${ne.status==="unread"?B(ne.priority).split(" ").slice(0,2).join(" "):"bg-gray-200 dark:bg-gray-700"}`,children:I(ne.type)}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("p",{className:`text-sm font-medium ${ne.status==="unread"?"text-gray-900 dark:text-white":"text-gray-600 dark:text-gray-400"}`,children:ne.title}),ne.status==="unread"&&r.jsx("span",{className:"w-2 h-2 bg-blue-500 rounded-full flex-shrink-0"})]}),r.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-0.5 truncate",children:ne.message}),r.jsx("p",{className:"text-xs text-gray-400 dark:text-gray-500 mt-1",children:H(new Date(ne.createdAt))})]})]})},ne.id))})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[r.jsxs(Be,{className:"lg:col-span-2 p-6",delay:.7,children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Recent Transactions"}),r.jsxs(xt,{to:"/admin/transactions",className:"text-sm text-primary-600 dark:text-primary-400 hover:text-primary-700 dark:hover:text-primary-300 flex items-center gap-1",children:["View all",r.jsx(Rr,{className:"w-4 h-4"})]})]}),r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"text-left text-xs text-gray-500 dark:text-gray-400 border-b border-gray-200 dark:border-gray-700",children:[r.jsx("th",{className:"pb-3 font-medium",children:"Transaction ID"}),r.jsx("th",{className:"pb-3 font-medium",children:"Customer"}),r.jsx("th",{className:"pb-3 font-medium",children:"Amount"}),r.jsx("th",{className:"pb-3 font-medium",children:"Status"}),r.jsx("th",{className:"pb-3 font-medium",children:"Time"}),r.jsx("th",{className:"pb-3 font-medium"})]})}),r.jsx("tbody",{className:"divide-y divide-gray-100 dark:divide-gray-700",children:n.map(ne=>r.jsxs("tr",{className:"text-sm",children:[r.jsx("td",{className:"py-3 font-mono text-gray-600 dark:text-gray-400",children:ne.id}),r.jsx("td",{className:"py-3 text-gray-900 dark:text-white",children:ne.customer}),r.jsx("td",{className:"py-3 font-medium text-gray-900 dark:text-white",children:F(ne.amount)}),r.jsx("td",{className:"py-3",children:r.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium ${ne.status==="completed"?"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400":ne.status==="pending"?"bg-yellow-100 dark:bg-yellow-900/30 text-yellow-700 dark:text-yellow-400":"bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-400"}`,children:[ne.status==="completed"&&r.jsx(Ae,{className:"w-3 h-3"}),ne.status==="pending"&&r.jsx(_t,{className:"w-3 h-3"}),ne.status==="flagged"&&r.jsx(Ht,{className:"w-3 h-3"}),ne.status]})}),r.jsx("td",{className:"py-3 text-gray-500 dark:text-gray-400",children:ne.time}),r.jsx("td",{className:"py-3",children:r.jsx("button",{className:"p-1 hover:bg-gray-100 dark:hover:bg-gray-700 rounded",children:r.jsx(ir,{className:"w-4 h-4 text-gray-400 dark:text-gray-500"})})})]},ne.id))})]})})]}),r.jsxs(Be,{className:"p-6",delay:.8,children:[r.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Action Required"}),r.jsx("div",{className:"space-y-3",children:o.map((ne,ce)=>r.jsxs("div",{className:`p-3 rounded-lg border-l-4 ${ne.priority==="high"?"bg-red-50 dark:bg-red-900/20 border-l-red-500":ne.priority==="medium"?"bg-yellow-50 dark:bg-yellow-900/20 border-l-yellow-500":"bg-blue-50 dark:bg-blue-900/20 border-l-blue-500"}`,children:[r.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:ne.description}),r.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1 capitalize",children:[ne.priority," priority"]})]},ce))})]})]}),r.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[r.jsxs(Be,{className:"p-4 text-center",delay:.9,children:[r.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Virtual Cards"}),r.jsx("p",{className:"text-xl font-bold text-gray-900 dark:text-white",children:s.virtualCards.toLocaleString()}),r.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:[s.totalCards>0?Math.round(s.virtualCards/s.totalCards*100):0,"% of total"]})]}),r.jsxs(Be,{className:"p-4 text-center",delay:1,children:[r.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Physical Cards"}),r.jsx("p",{className:"text-xl font-bold text-gray-900 dark:text-white",children:s.physicalCards.toLocaleString()}),r.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:[s.totalCards>0?Math.round(s.physicalCards/s.totalCards*100):0,"% of total"]})]}),r.jsxs(Be,{className:"p-4 text-center",delay:1.1,children:[r.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Merchants"}),r.jsx("p",{className:"text-xl font-bold text-gray-900 dark:text-white",children:s.totalAccounts-s.totalCustomers}),r.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Business accounts"})]}),r.jsxs(Be,{className:"p-4 text-center",delay:1.2,children:[r.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Active Developers"}),r.jsx("p",{className:"text-xl font-bold text-gray-900 dark:text-white",children:s.activeDevelopers}),r.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"With API keys"})]})]})]}),r.jsx("div",{className:"hidden xl:block flex-shrink-0",children:r.jsx(IPe,{onOpenFloat:K,onReplenishFloat:V,onCloseFloat:z,onViewHistory:G},A)})]}),r.jsx(DPe,{isOpen:N,onClose:te,mode:C,currency:_,onSuccess:he})]})}function RPe(){const[e,t]=p.useState("all"),[s,a]=p.useState(""),[n,i]=p.useState(!0),[o,l]=p.useState([]),[c,d]=p.useState({totalToday:0,approved:0,declined:0,pending:0,avgResponseTime:"0ms",approvalRate:0});p.useEffect(()=>{h()},[]);const h=async()=>{i(!0);try{const v=new Date;v.setHours(0,0,0,0);const{data:w,error:N}=await X.from("transactions").select("*").gte("created_at",v.toISOString()).order("created_at",{ascending:!1});if(N){console.error("Error fetching transactions:",N),l([]),i(!1);return}const k=[...new Set((w==null?void 0:w.map(I=>I.user_id))||[])],{data:C}=await X.from("users").select("id, first_name, last_name").in("id",k),E=new Map((C==null?void 0:C.map(I=>[I.id,I]))||[]),_=[...new Set((w==null?void 0:w.map(I=>I.card_id).filter(Boolean))||[])],{data:T}=await X.from("cards").select("id, last_four").in("id",_),A=new Map((T==null?void 0:T.map(I=>[I.id,I]))||[]),P=(w||[]).map((I,B)=>{const O=E.get(I.user_id),F=I.card_id?A.get(I.card_id):null;let q="approved";return I.status==="pending"?q="pending":I.status==="failed"?q="declined":I.status==="completed"&&(q="approved"),{id:`AUTH-${I.id.slice(0,6).toUpperCase()}`,cardId:I.card_id||"",cardLast4:(F==null?void 0:F.last_four)||"****",customerId:I.user_id,customerName:O?`${O.first_name} ${O.last_name}`:"Unknown",amount:I.amount||0,currency:I.currency||"USD",merchantName:I.merchant_name||"N/A",merchantCategory:I.merchant_category||"General",location:I.location||"Unknown",status:q,riskScore:Math.floor(Math.random()*30),timestamp:I.created_at,expiresIn:q==="pending"?45:0}});l(P);const M=P.filter(I=>I.status==="approved").length,R=P.filter(I=>I.status==="declined").length,$=P.filter(I=>I.status==="pending").length,W=P.length;d({totalToday:W,approved:M,declined:R,pending:$,avgResponseTime:"-",approvalRate:W>0?Math.round(M/W*100*10)/10:0})}catch(v){console.error("Error fetching authorization data:",v)}finally{i(!1)}},f=v=>v<30?"text-green-600 bg-green-100":v<70?"text-yellow-600 bg-yellow-100":"text-red-600 bg-red-100",x=v=>{switch(v){case"approved":return r.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-700",children:[r.jsx(Ae,{className:"w-3 h-3"})," Approved"]});case"declined":return r.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium bg-red-100 text-red-700",children:[r.jsx(Wt,{className:"w-3 h-3"})," Declined"]});case"pending":return r.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium bg-yellow-100 text-yellow-700",children:[r.jsx(_t,{className:"w-3 h-3"})," Pending"]});default:return r.jsx("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-700",children:"Timeout"})}},y=o.filter(v=>!(e!=="all"&&v.status!==e||s&&!v.customerName.toLowerCase().includes(s.toLowerCase())&&!v.merchantName.toLowerCase().includes(s.toLowerCase())&&!v.id.toLowerCase().includes(s.toLowerCase())));return r.jsx(fr,{children:r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Authorization"}),r.jsx("p",{className:"text-gray-500",children:"Real-time card authorization management"})]}),r.jsxs("div",{className:"flex gap-3",children:[r.jsxs("button",{onClick:h,className:"px-4 py-2 text-sm bg-white border border-gray-300 rounded-lg hover:bg-gray-50 flex items-center gap-2",children:[r.jsx(Ot,{className:`w-4 h-4 ${n?"animate-spin":""}`}),"Refresh"]}),r.jsxs("button",{className:"px-4 py-2 text-sm bg-primary-600 text-white rounded-lg hover:bg-primary-700 flex items-center gap-2",children:[r.jsx(Tl,{className:"w-4 h-4"}),"Configure Rules"]})]})]}),r.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-6 gap-4",children:[r.jsxs(se,{className:"p-4",children:[r.jsx("p",{className:"text-sm text-gray-500",children:"Today's Requests"}),r.jsx("p",{className:"text-2xl font-bold",children:c.totalToday.toLocaleString()})]}),r.jsxs(se,{className:"p-4",children:[r.jsx("p",{className:"text-sm text-gray-500",children:"Approved"}),r.jsx("p",{className:"text-2xl font-bold text-green-600",children:c.approved.toLocaleString()})]}),r.jsxs(se,{className:"p-4",children:[r.jsx("p",{className:"text-sm text-gray-500",children:"Declined"}),r.jsx("p",{className:"text-2xl font-bold text-red-600",children:c.declined})]}),r.jsxs(se,{className:"p-4",children:[r.jsx("p",{className:"text-sm text-gray-500",children:"Pending"}),r.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:c.pending})]}),r.jsxs(se,{className:"p-4",children:[r.jsx("p",{className:"text-sm text-gray-500",children:"Avg Response"}),r.jsx("p",{className:"text-2xl font-bold",children:c.avgResponseTime})]}),r.jsxs(se,{className:"p-4",children:[r.jsx("p",{className:"text-sm text-gray-500",children:"Approval Rate"}),r.jsxs("p",{className:"text-2xl font-bold text-green-600",children:[c.approvalRate,"%"]})]})]}),r.jsx(se,{className:"p-4",children:r.jsxs("div",{className:"flex flex-wrap items-center gap-4",children:[r.jsx("div",{className:"flex-1 min-w-64",children:r.jsxs("div",{className:"relative",children:[r.jsx(Nr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),r.jsx("input",{type:"text",placeholder:"Search by customer, merchant, or ID...",value:s,onChange:v=>a(v.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500"})]})}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(el,{className:"w-4 h-4 text-gray-400"}),r.jsxs("select",{value:e,onChange:v=>t(v.target.value),className:"border border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-primary-500",children:[r.jsx("option",{value:"all",children:"All Status"}),r.jsx("option",{value:"pending",children:"Pending"}),r.jsx("option",{value:"approved",children:"Approved"}),r.jsx("option",{value:"declined",children:"Declined"})]})]})]})}),r.jsx(se,{className:"overflow-hidden",children:r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:r.jsxs("tr",{children:[r.jsx("th",{className:"text-left px-6 py-3 text-xs font-medium text-gray-500 uppercase",children:"Request ID"}),r.jsx("th",{className:"text-left px-6 py-3 text-xs font-medium text-gray-500 uppercase",children:"Customer"}),r.jsx("th",{className:"text-left px-6 py-3 text-xs font-medium text-gray-500 uppercase",children:"Card"}),r.jsx("th",{className:"text-left px-6 py-3 text-xs font-medium text-gray-500 uppercase",children:"Amount"}),r.jsx("th",{className:"text-left px-6 py-3 text-xs font-medium text-gray-500 uppercase",children:"Merchant"}),r.jsx("th",{className:"text-left px-6 py-3 text-xs font-medium text-gray-500 uppercase",children:"Location"}),r.jsx("th",{className:"text-left px-6 py-3 text-xs font-medium text-gray-500 uppercase",children:"Risk"}),r.jsx("th",{className:"text-left px-6 py-3 text-xs font-medium text-gray-500 uppercase",children:"Status"}),r.jsx("th",{className:"text-left px-6 py-3 text-xs font-medium text-gray-500 uppercase",children:"Actions"})]})}),r.jsx("tbody",{className:"divide-y divide-gray-200",children:n?r.jsx("tr",{children:r.jsxs("td",{colSpan:9,className:"px-6 py-12 text-center text-gray-500",children:[r.jsx(Ot,{className:"w-6 h-6 animate-spin mx-auto mb-2"}),"Loading authorization data..."]})}):y.length===0?r.jsx("tr",{children:r.jsxs("td",{colSpan:9,className:"px-6 py-12 text-center text-gray-500",children:[r.jsx(Tl,{className:"w-8 h-8 mx-auto mb-2 text-gray-300"}),"No authorization requests found"]})}):y.map(v=>r.jsxs("tr",{className:"hover:bg-gray-50",children:[r.jsx("td",{className:"px-6 py-4",children:r.jsx("span",{className:"font-mono text-sm",children:v.id})}),r.jsx("td",{className:"px-6 py-4",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(br,{className:"w-4 h-4 text-gray-400"}),r.jsx("span",{className:"text-sm",children:v.customerName})]})}),r.jsx("td",{className:"px-6 py-4",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(lt,{className:"w-4 h-4 text-gray-400"}),r.jsxs("span",{className:"font-mono text-sm",children:["****",v.cardLast4]})]})}),r.jsx("td",{className:"px-6 py-4",children:r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(Cr,{className:"w-4 h-4 text-gray-400"}),r.jsx("span",{className:"font-medium",children:v.amount.toLocaleString()}),r.jsx("span",{className:"text-gray-400 text-sm",children:v.currency})]})}),r.jsx("td",{className:"px-6 py-4",children:r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium",children:v.merchantName}),r.jsx("p",{className:"text-xs text-gray-500",children:v.merchantCategory})]})}),r.jsx("td",{className:"px-6 py-4",children:r.jsxs("div",{className:"flex items-center gap-1 text-sm text-gray-600",children:[r.jsx(Vi,{className:"w-4 h-4"}),v.location]})}),r.jsx("td",{className:"px-6 py-4",children:r.jsxs("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${f(v.riskScore)}`,children:[v.riskScore,"%"]})}),r.jsxs("td",{className:"px-6 py-4",children:[x(v.status),v.status==="pending"&&v.expiresIn>0&&r.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Expires in ",v.expiresIn,"s"]})]}),r.jsx("td",{className:"px-6 py-4",children:r.jsxs("div",{className:"flex items-center gap-2",children:[v.status==="pending"&&r.jsxs(r.Fragment,{children:[r.jsx("button",{className:"p-1 bg-green-100 text-green-600 rounded hover:bg-green-200",title:"Approve",children:r.jsx(Ae,{className:"w-4 h-4"})}),r.jsx("button",{className:"p-1 bg-red-100 text-red-600 rounded hover:bg-red-200",title:"Decline",children:r.jsx(Wt,{className:"w-4 h-4"})})]}),r.jsx("button",{className:"p-1 bg-gray-100 text-gray-600 rounded hover:bg-gray-200",title:"View Details",children:r.jsx(ir,{className:"w-4 h-4"})})]})})]},v.id))})]})})}),c.pending>0&&r.jsxs(se,{className:"p-6",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[r.jsx(Ht,{className:"w-5 h-5 text-yellow-600"}),r.jsx("h2",{className:"text-lg font-semibold",children:"Pending Authorizations"})]}),r.jsx("div",{className:"space-y-3",children:r.jsxs("div",{className:"p-3 bg-yellow-50 border-l-4 border-l-yellow-500 rounded-r-lg",children:[r.jsxs("p",{className:"text-sm font-medium text-yellow-800",children:[c.pending," authorization request",c.pending!==1?"s":""," awaiting review"]}),r.jsx("p",{className:"text-xs text-yellow-600",children:"Click the approve or decline buttons to process pending requests"})]})})]})]})})}function MPe(){const[e,t]=p.useState(!1),[s,a]=p.useState(null),[n,i]=p.useState({}),[o]=p.useState([]),[l]=p.useState([]),c=[{category:"Card",events:["card.created","card.updated","card.activated","card.frozen","card.terminated"]},{category:"Transaction",events:["transaction.created","transaction.authorized","transaction.cleared","transaction.declined","transaction.reversed"]},{category:"Customer",events:["customer.created","customer.updated","customer.kyc.submitted","customer.kyc.approved","customer.kyc.rejected"]},{category:"Account",events:["account.created","account.funded","account.debited","account.closed"]},{category:"Dispute",events:["dispute.created","dispute.updated","dispute.won","dispute.lost"]}],d=y=>{switch(y){case"active":return r.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-700",children:[r.jsx(Ae,{className:"w-3 h-3"})," Active"]});case"disabled":return r.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-700",children:[r.jsx(Wt,{className:"w-3 h-3"})," Disabled"]});case"failing":return r.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium bg-red-100 text-red-700",children:[r.jsx(Ht,{className:"w-3 h-3"})," Failing"]});default:return null}},h=y=>{switch(y){case"success":return r.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-700",children:[r.jsx(Ae,{className:"w-3 h-3"})," Success"]});case"failed":return r.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium bg-red-100 text-red-700",children:[r.jsx(Wt,{className:"w-3 h-3"})," Failed"]});case"pending":return r.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium bg-yellow-100 text-yellow-700",children:[r.jsx(_t,{className:"w-3 h-3"})," Pending"]});case"retrying":return r.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium bg-orange-100 text-orange-700",children:[r.jsx(Df,{className:"w-3 h-3"})," Retrying"]});default:return null}},f=y=>{navigator.clipboard.writeText(y)},x=y=>{i(v=>({...v,[y]:!v[y]}))};return r.jsx(fr,{children:r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Webhooks"}),r.jsx("p",{className:"text-gray-500",children:"Manage webhook endpoints and monitor deliveries"})]}),r.jsxs("div",{className:"flex gap-3",children:[r.jsxs("button",{className:"px-4 py-2 text-sm bg-white border border-gray-300 rounded-lg hover:bg-gray-50 flex items-center gap-2",children:[r.jsx(Ot,{className:"w-4 h-4"}),"Refresh"]}),r.jsxs("button",{onClick:()=>t(!0),className:"px-4 py-2 text-sm bg-primary-600 text-white rounded-lg hover:bg-primary-700 flex items-center gap-2",children:[r.jsx(sr,{className:"w-4 h-4"}),"Add Endpoint"]})]})]}),r.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[r.jsxs(se,{className:"p-4",children:[r.jsx("p",{className:"text-sm text-gray-500",children:"Total Endpoints"}),r.jsx("p",{className:"text-2xl font-bold",children:o.length})]}),r.jsxs(se,{className:"p-4",children:[r.jsx("p",{className:"text-sm text-gray-500",children:"Active"}),r.jsx("p",{className:"text-2xl font-bold text-green-600",children:o.filter(y=>y.status==="active").length})]}),r.jsxs(se,{className:"p-4",children:[r.jsx("p",{className:"text-sm text-gray-500",children:"Failing"}),r.jsx("p",{className:"text-2xl font-bold text-red-600",children:o.filter(y=>y.status==="failing").length})]}),r.jsxs(se,{className:"p-4",children:[r.jsx("p",{className:"text-sm text-gray-500",children:"Total Deliveries (24h)"}),r.jsx("p",{className:"text-2xl font-bold",children:"12,456"})]})]}),r.jsxs(se,{className:"overflow-hidden",children:[r.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:r.jsx("h2",{className:"text-lg font-semibold",children:"Webhook Endpoints"})}),r.jsx("div",{className:"divide-y divide-gray-200",children:o.map(y=>r.jsxs("div",{className:"p-6 hover:bg-gray-50",children:[r.jsxs("div",{className:"flex items-start justify-between mb-3",children:[r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx("div",{className:`p-2 rounded-lg ${y.status==="active"?"bg-green-100":y.status==="failing"?"bg-red-100":"bg-gray-100"}`,children:r.jsx(ph,{className:`w-5 h-5 ${y.status==="active"?"text-green-600":y.status==="failing"?"text-red-600":"text-gray-600"}`})}),r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[r.jsx("code",{className:"text-sm font-mono text-gray-900",children:y.url}),r.jsx("button",{onClick:()=>f(y.url),className:"p-1 hover:bg-gray-200 rounded",children:r.jsx(Pr,{className:"w-3 h-3 text-gray-400"})}),r.jsx("a",{href:y.url,target:"_blank",rel:"noopener noreferrer",className:"p-1 hover:bg-gray-200 rounded",children:r.jsx(da,{className:"w-3 h-3 text-gray-400"})})]}),r.jsx("p",{className:"text-sm text-gray-500",children:y.description})]})]}),r.jsxs("div",{className:"flex items-center gap-3",children:[d(y.status),r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx("button",{className:"p-2 hover:bg-gray-100 rounded-lg",title:"Edit",children:r.jsx(gh,{className:"w-4 h-4 text-gray-500"})}),r.jsx("button",{className:"p-2 hover:bg-gray-100 rounded-lg",title:"Settings",children:r.jsx(bs,{className:"w-4 h-4 text-gray-500"})}),r.jsx("button",{className:"p-2 hover:bg-gray-100 rounded-lg",title:"Delete",children:r.jsx(Js,{className:"w-4 h-4 text-red-500"})})]})]})]}),r.jsxs("div",{className:"grid grid-cols-4 gap-4 mt-4",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Events"}),r.jsxs("div",{className:"flex flex-wrap gap-1",children:[y.events.slice(0,3).map(v=>r.jsx("span",{className:"px-2 py-0.5 bg-gray-100 text-gray-600 rounded text-xs",children:v},v)),y.events.length>3&&r.jsxs("span",{className:"px-2 py-0.5 bg-gray-100 text-gray-600 rounded text-xs",children:["+",y.events.length-3," more"]})]})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Success Rate"}),r.jsxs("p",{className:`text-sm font-medium ${y.successRate>=95?"text-green-600":y.successRate>=80?"text-yellow-600":"text-red-600"}`,children:[y.successRate,"%"]})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Total Deliveries"}),r.jsx("p",{className:"text-sm font-medium",children:y.totalDeliveries.toLocaleString()})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Signing Secret"}),r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx("code",{className:"text-xs font-mono text-gray-600",children:n[y.id]?y.secret:""}),r.jsx("button",{onClick:()=>x(y.id),className:"p-1 hover:bg-gray-200 rounded",children:n[y.id]?r.jsx(Dn,{className:"w-3 h-3 text-gray-400"}):r.jsx(ir,{className:"w-3 h-3 text-gray-400"})}),r.jsx("button",{onClick:()=>f(y.secret),className:"p-1 hover:bg-gray-200 rounded",children:r.jsx(Pr,{className:"w-3 h-3 text-gray-400"})})]})]})]}),r.jsxs("div",{className:"flex items-center gap-4 mt-4 pt-4 border-t border-gray-100",children:[r.jsx("button",{onClick:()=>a(y),className:"text-sm text-primary-600 hover:text-primary-700 flex items-center gap-1",children:"View Deliveries"}),r.jsxs("button",{className:"text-sm text-gray-600 hover:text-gray-700 flex items-center gap-1",children:[r.jsx(Tn,{className:"w-3 h-3"}),"Send Test Event"]})]})]},y.id))})]}),r.jsxs(se,{className:"overflow-hidden",children:[r.jsxs("div",{className:"px-6 py-4 border-b border-gray-200 flex justify-between items-center",children:[r.jsx("h2",{className:"text-lg font-semibold",children:"Recent Deliveries"}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs("div",{className:"relative",children:[r.jsxs("select",{className:"appearance-none bg-white border border-gray-300 rounded-lg px-3 py-1.5 pr-8 text-sm focus:ring-2 focus:ring-primary-500",children:[r.jsx("option",{value:"all",children:"All Events"}),r.jsx("option",{value:"card",children:"Card Events"}),r.jsx("option",{value:"transaction",children:"Transaction Events"}),r.jsx("option",{value:"customer",children:"Customer Events"})]}),r.jsx(ys,{className:"absolute right-2 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400 pointer-events-none"})]}),r.jsxs("div",{className:"relative",children:[r.jsxs("select",{className:"appearance-none bg-white border border-gray-300 rounded-lg px-3 py-1.5 pr-8 text-sm focus:ring-2 focus:ring-primary-500",children:[r.jsx("option",{value:"all",children:"All Status"}),r.jsx("option",{value:"success",children:"Success"}),r.jsx("option",{value:"failed",children:"Failed"}),r.jsx("option",{value:"retrying",children:"Retrying"})]}),r.jsx(ys,{className:"absolute right-2 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400 pointer-events-none"})]})]})]}),r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:r.jsxs("tr",{children:[r.jsx("th",{className:"text-left px-6 py-3 text-xs font-medium text-gray-500 uppercase",children:"Event"}),r.jsx("th",{className:"text-left px-6 py-3 text-xs font-medium text-gray-500 uppercase",children:"Endpoint"}),r.jsx("th",{className:"text-left px-6 py-3 text-xs font-medium text-gray-500 uppercase",children:"Status"}),r.jsx("th",{className:"text-left px-6 py-3 text-xs font-medium text-gray-500 uppercase",children:"Response"}),r.jsx("th",{className:"text-left px-6 py-3 text-xs font-medium text-gray-500 uppercase",children:"Duration"}),r.jsx("th",{className:"text-left px-6 py-3 text-xs font-medium text-gray-500 uppercase",children:"Time"}),r.jsx("th",{className:"text-left px-6 py-3 text-xs font-medium text-gray-500 uppercase",children:"Actions"})]})}),r.jsx("tbody",{className:"divide-y divide-gray-200",children:l.map(y=>{var v;return r.jsxs("tr",{className:"hover:bg-gray-50",children:[r.jsx("td",{className:"px-6 py-4",children:r.jsx("span",{className:"px-2 py-1 bg-gray-100 text-gray-700 rounded text-xs font-mono",children:y.event})}),r.jsx("td",{className:"px-6 py-4",children:r.jsxs("span",{className:"text-sm text-gray-600 font-mono",children:[(v=o.find(w=>w.id===y.webhookId))==null?void 0:v.url.replace(/https?:\/\//,"").slice(0,30),"..."]})}),r.jsxs("td",{className:"px-6 py-4",children:[h(y.status),y.retries>0&&r.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[y.retries," retries"]})]}),r.jsx("td",{className:"px-6 py-4",children:r.jsx("span",{className:`text-sm font-medium ${y.statusCode&&y.statusCode>=200&&y.statusCode<300?"text-green-600":"text-red-600"}`,children:y.statusCode||"-"})}),r.jsx("td",{className:"px-6 py-4",children:r.jsx("span",{className:"text-sm text-gray-600",children:y.duration?`${y.duration}ms`:"-"})}),r.jsx("td",{className:"px-6 py-4",children:r.jsx("span",{className:"text-sm text-gray-500",children:new Date(y.timestamp).toLocaleTimeString()})}),r.jsx("td",{className:"px-6 py-4",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("button",{className:"p-1 bg-gray-100 text-gray-600 rounded hover:bg-gray-200",title:"View Details",children:r.jsx(ir,{className:"w-4 h-4"})}),y.status==="failed"&&r.jsx("button",{className:"p-1 bg-orange-100 text-orange-600 rounded hover:bg-orange-200",title:"Retry",children:r.jsx(Df,{className:"w-4 h-4"})})]})})]},y.id)})})]})})]}),r.jsxs(se,{className:"p-6",children:[r.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Available Event Types"}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4",children:c.map(y=>r.jsxs("div",{children:[r.jsx("h3",{className:"text-sm font-medium text-gray-900 mb-2",children:y.category}),r.jsx("div",{className:"space-y-1",children:y.events.map(v=>r.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-600 hover:text-primary-600 cursor-pointer",children:[r.jsx("span",{className:"w-1.5 h-1.5 bg-gray-300 rounded-full"}),v]},v))})]},y.category))})]}),e&&r.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:r.jsxs(se,{className:"w-full max-w-lg p-6",children:[r.jsxs("div",{className:"flex justify-between items-center mb-4",children:[r.jsx("h2",{className:"text-lg font-semibold",children:"Add Webhook Endpoint"}),r.jsx("button",{onClick:()=>t(!1),className:"p-2 hover:bg-gray-100 rounded-lg",children:r.jsx(Wt,{className:"w-5 h-5 text-gray-500"})})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Endpoint URL"}),r.jsx("input",{type:"url",placeholder:"https://example.com/webhooks",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),r.jsx("input",{type:"text",placeholder:"Brief description of this endpoint",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Events to Subscribe"}),r.jsxs("div",{className:"max-h-48 overflow-y-auto border border-gray-200 rounded-lg p-3 space-y-3",children:[r.jsxs("label",{className:"flex items-center gap-2",children:[r.jsx("input",{type:"checkbox",className:"rounded text-primary-600"}),r.jsx("span",{className:"text-sm font-medium",children:"All Events (*)"})]}),r.jsx("hr",{}),c.map(y=>r.jsxs("div",{children:[r.jsx("p",{className:"text-xs font-medium text-gray-500 mb-1",children:y.category}),r.jsx("div",{className:"space-y-1 ml-2",children:y.events.map(v=>r.jsxs("label",{className:"flex items-center gap-2",children:[r.jsx("input",{type:"checkbox",className:"rounded text-primary-600"}),r.jsx("span",{className:"text-sm text-gray-700",children:v})]},v))})]},y.category))]})]}),r.jsxs("div",{className:"flex gap-3 pt-4",children:[r.jsx("button",{onClick:()=>t(!1),className:"flex-1 px-4 py-2 bg-white border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50",children:"Cancel"}),r.jsx("button",{className:"flex-1 px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700",children:"Create Endpoint"})]})]})]})})]})})}function LPe(){const[e,t]=p.useState("kyc"),[s,a]=p.useState("all"),[n,i]=p.useState(""),[o]=p.useState({pendingKYC:0,approvedToday:0,rejectedToday:0,openAlerts:0,criticalAlerts:0,pendingReports:0}),[l]=p.useState([]),[c]=p.useState([]),[d]=p.useState([]),h=w=>{switch(w){case"approved":return r.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400",children:[r.jsx(Ae,{className:"w-3 h-3"})," Approved"]});case"rejected":return r.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-400",children:[r.jsx(Wt,{className:"w-3 h-3"})," Rejected"]});case"pending":return r.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium bg-yellow-100 dark:bg-yellow-900/30 text-yellow-700 dark:text-yellow-400",children:[r.jsx(_t,{className:"w-3 h-3"})," Pending"]});case"escalated":return r.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium bg-orange-100 dark:bg-orange-900/30 text-orange-700 dark:text-orange-400",children:[r.jsx(Ht,{className:"w-3 h-3"})," Escalated"]});default:return null}},f=w=>{switch(w){case"low":return r.jsx("span",{className:"px-2 py-0.5 rounded text-xs font-medium bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400",children:"Low"});case"medium":return r.jsx("span",{className:"px-2 py-0.5 rounded text-xs font-medium bg-yellow-100 dark:bg-yellow-900/30 text-yellow-700 dark:text-yellow-400",children:"Medium"});case"high":return r.jsx("span",{className:"px-2 py-0.5 rounded text-xs font-medium bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-400",children:"High"});default:return null}},x=w=>{switch(w){case"low":return r.jsx("span",{className:"px-2 py-0.5 rounded text-xs font-medium bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-400",children:"Low"});case"medium":return r.jsx("span",{className:"px-2 py-0.5 rounded text-xs font-medium bg-yellow-100 dark:bg-yellow-900/30 text-yellow-700 dark:text-yellow-400",children:"Medium"});case"high":return r.jsx("span",{className:"px-2 py-0.5 rounded text-xs font-medium bg-orange-100 dark:bg-orange-900/30 text-orange-700 dark:text-orange-400",children:"High"});case"critical":return r.jsx("span",{className:"px-2 py-0.5 rounded text-xs font-medium bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-400",children:"Critical"});default:return null}},y=w=>{switch(w){case"aml":return r.jsx(rr,{className:"w-4 h-4 text-purple-600 dark:text-purple-400"});case"pep":return r.jsx(Tf,{className:"w-4 h-4 text-blue-600 dark:text-blue-400"});case"sanctions":return r.jsx(_l,{className:"w-4 h-4 text-red-600 dark:text-red-400"});case"velocity":return r.jsx(Ts,{className:"w-4 h-4 text-orange-600 dark:text-orange-400"});case"fraud":return r.jsx(Ht,{className:"w-4 h-4 text-red-600 dark:text-red-400"});default:return r.jsx(dt,{className:"w-4 h-4 text-gray-600 dark:text-gray-400"})}},v=l.filter(w=>!(s!=="all"&&w.status!==s||n&&!w.customerName.toLowerCase().includes(n.toLowerCase())&&!w.customerEmail.toLowerCase().includes(n.toLowerCase())));return r.jsx(fr,{children:r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Compliance"}),r.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"KYC verifications, AML monitoring, and regulatory reporting"})]}),r.jsxs("div",{className:"flex gap-3",children:[r.jsxs("button",{className:"px-4 py-2 text-sm bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300 flex items-center gap-2",children:[r.jsx(gs,{className:"w-4 h-4"}),"Export"]}),r.jsxs("button",{className:"px-4 py-2 text-sm bg-primary-600 text-white rounded-lg hover:bg-primary-700 flex items-center gap-2",children:[r.jsx(W5,{className:"w-4 h-4"}),"Generate Report"]})]})]}),r.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-6 gap-4",children:[r.jsxs(Be,{className:"p-4",delay:0,children:[r.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Pending KYC"}),r.jsx("p",{className:"text-2xl font-bold text-yellow-600 dark:text-yellow-400",children:o.pendingKYC})]}),r.jsxs(Be,{className:"p-4",delay:.1,children:[r.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Approved Today"}),r.jsx("p",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:o.approvedToday})]}),r.jsxs(Be,{className:"p-4",delay:.2,children:[r.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Rejected Today"}),r.jsx("p",{className:"text-2xl font-bold text-red-600 dark:text-red-400",children:o.rejectedToday})]}),r.jsxs(Be,{className:"p-4",delay:.3,children:[r.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Open Alerts"}),r.jsx("p",{className:"text-2xl font-bold text-orange-600 dark:text-orange-400",children:o.openAlerts})]}),r.jsxs(Be,{className:"p-4",delay:.4,children:[r.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Critical Alerts"}),r.jsx("p",{className:"text-2xl font-bold text-red-600 dark:text-red-400",children:o.criticalAlerts})]}),r.jsxs(Be,{className:"p-4",delay:.5,children:[r.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Pending Reports"}),r.jsx("p",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:o.pendingReports})]})]}),r.jsx(se,{className:"p-1",children:r.jsx("div",{className:"flex gap-1",children:["kyc","aml","reports","sanctions"].map(w=>r.jsxs("button",{onClick:()=>t(w),className:`flex-1 px-4 py-2 text-sm font-medium rounded-lg transition-colors ${e===w?"bg-primary-600 text-white":"text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700"}`,children:[w==="kyc"&&"KYC Reviews",w==="aml"&&"AML Alerts",w==="reports"&&"Reports",w==="sanctions"&&"Sanctions Screening"]},w))})}),e==="kyc"&&r.jsxs(r.Fragment,{children:[r.jsx(se,{className:"p-4",children:r.jsxs("div",{className:"flex flex-wrap items-center gap-4",children:[r.jsx("div",{className:"flex-1 min-w-64",children:r.jsxs("div",{className:"relative",children:[r.jsx(Nr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),r.jsx("input",{type:"text",placeholder:"Search by name or email...",value:n,onChange:w=>i(w.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]})}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(el,{className:"w-4 h-4 text-gray-400"}),r.jsxs("select",{value:s,onChange:w=>a(w.target.value),className:"border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-primary-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[r.jsx("option",{value:"all",children:"All Status"}),r.jsx("option",{value:"pending",children:"Pending"}),r.jsx("option",{value:"approved",children:"Approved"}),r.jsx("option",{value:"rejected",children:"Rejected"})]})]})]})}),r.jsx(se,{className:"overflow-hidden",children:r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700/50 border-b border-gray-200 dark:border-gray-700",children:r.jsxs("tr",{children:[r.jsx("th",{className:"text-left px-6 py-3 text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Customer"}),r.jsx("th",{className:"text-left px-6 py-3 text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Document"}),r.jsx("th",{className:"text-left px-6 py-3 text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Submitted"}),r.jsx("th",{className:"text-left px-6 py-3 text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Risk Level"}),r.jsx("th",{className:"text-left px-6 py-3 text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Status"}),r.jsx("th",{className:"text-left px-6 py-3 text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Assigned To"}),r.jsx("th",{className:"text-left px-6 py-3 text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Actions"})]})}),r.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:v.map(w=>r.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700/50",children:[r.jsx("td",{className:"px-6 py-4",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-10 h-10 bg-gray-100 dark:bg-gray-700 rounded-full flex items-center justify-center",children:r.jsx(br,{className:"w-5 h-5 text-gray-500 dark:text-gray-400"})}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-sm text-gray-900 dark:text-white",children:w.customerName}),r.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:w.customerEmail})]})]})}),r.jsx("td",{className:"px-6 py-4",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(ao,{className:"w-4 h-4 text-gray-400"}),r.jsx("span",{className:"text-sm text-gray-900 dark:text-white",children:w.documentType})]})}),r.jsx("td",{className:"px-6 py-4",children:r.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-300",children:new Date(w.submittedAt).toLocaleDateString()})}),r.jsx("td",{className:"px-6 py-4",children:f(w.riskLevel)}),r.jsx("td",{className:"px-6 py-4",children:h(w.status)}),r.jsx("td",{className:"px-6 py-4",children:r.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-300",children:w.assignedTo||"Unassigned"})}),r.jsx("td",{className:"px-6 py-4",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("button",{className:"p-1 bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300 rounded hover:bg-gray-200 dark:hover:bg-gray-600",title:"View",children:r.jsx(ir,{className:"w-4 h-4"})}),w.status==="pending"&&r.jsxs(r.Fragment,{children:[r.jsx("button",{className:"p-1 bg-green-100 dark:bg-green-900/30 text-green-600 dark:text-green-400 rounded hover:bg-green-200 dark:hover:bg-green-900/50",title:"Approve",children:r.jsx(Ae,{className:"w-4 h-4"})}),r.jsx("button",{className:"p-1 bg-red-100 dark:bg-red-900/30 text-red-600 dark:text-red-400 rounded hover:bg-red-200 dark:hover:bg-red-900/50",title:"Reject",children:r.jsx(Wt,{className:"w-4 h-4"})})]})]})})]},w.id))})]})})})]}),e==="aml"&&r.jsxs(se,{className:"overflow-hidden",children:[r.jsxs("div",{className:"px-6 py-4 border-b border-gray-200 dark:border-gray-700 flex justify-between items-center",children:[r.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"AML/Fraud Alerts"}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs("div",{className:"relative",children:[r.jsxs("select",{className:"appearance-none bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-1.5 pr-8 text-sm focus:ring-2 focus:ring-primary-500 text-gray-900 dark:text-white",children:[r.jsx("option",{value:"all",children:"All Types"}),r.jsx("option",{value:"aml",children:"AML"}),r.jsx("option",{value:"pep",children:"PEP"}),r.jsx("option",{value:"sanctions",children:"Sanctions"}),r.jsx("option",{value:"velocity",children:"Velocity"}),r.jsx("option",{value:"fraud",children:"Fraud"})]}),r.jsx(ys,{className:"absolute right-2 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400 pointer-events-none"})]}),r.jsxs("div",{className:"relative",children:[r.jsxs("select",{className:"appearance-none bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-1.5 pr-8 text-sm focus:ring-2 focus:ring-primary-500 text-gray-900 dark:text-white",children:[r.jsx("option",{value:"all",children:"All Severity"}),r.jsx("option",{value:"critical",children:"Critical"}),r.jsx("option",{value:"high",children:"High"}),r.jsx("option",{value:"medium",children:"Medium"}),r.jsx("option",{value:"low",children:"Low"})]}),r.jsx(ys,{className:"absolute right-2 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400 pointer-events-none"})]})]})]}),r.jsx("div",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:c.map(w=>r.jsx("div",{className:`p-4 hover:bg-gray-50 dark:hover:bg-gray-700/50 ${w.severity==="critical"?"border-l-4 border-l-red-500":w.severity==="high"?"border-l-4 border-l-orange-500":""}`,children:r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx("div",{className:`p-2 rounded-lg ${w.type==="sanctions"||w.type==="fraud"?"bg-red-100 dark:bg-red-900/30":w.type==="aml"?"bg-purple-100 dark:bg-purple-900/30":w.type==="pep"?"bg-blue-100 dark:bg-blue-900/30":"bg-orange-100 dark:bg-orange-900/30"}`,children:y(w.type)}),r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[r.jsx("span",{className:"font-mono text-sm text-gray-500 dark:text-gray-400",children:w.id}),r.jsx("span",{className:"px-2 py-0.5 bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300 rounded text-xs uppercase",children:w.type}),x(w.severity)]}),r.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white mb-1",children:w.description}),r.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Customer: ",w.customerName," (",w.customerId,")"]})]})]}),r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${w.status==="open"?"bg-yellow-100 dark:bg-yellow-900/30 text-yellow-700 dark:text-yellow-400":w.status==="investigating"?"bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-400":w.status==="resolved"?"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400":"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300"}`,children:w.status}),r.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:new Date(w.createdAt).toLocaleTimeString()}),r.jsx("button",{className:"p-1 hover:bg-gray-200 dark:hover:bg-gray-600 rounded",children:r.jsx(ir,{className:"w-4 h-4 text-gray-500 dark:text-gray-400"})})]})]})},w.id))})]}),e==="reports"&&r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[r.jsx("div",{className:"lg:col-span-2",children:r.jsxs(se,{className:"overflow-hidden",children:[r.jsx("div",{className:"px-6 py-4 border-b border-gray-200 dark:border-gray-700",children:r.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Compliance Reports"})}),r.jsx("div",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:d.map(w=>r.jsx("div",{className:"p-4 hover:bg-gray-50 dark:hover:bg-gray-700/50",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"p-2 bg-gray-100 dark:bg-gray-700 rounded-lg",children:r.jsx(ao,{className:"w-5 h-5 text-gray-600 dark:text-gray-400"})}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-sm text-gray-900 dark:text-white",children:w.name}),r.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:[w.type," - ",w.period]})]})]}),r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsxs("div",{className:"text-right",children:[r.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Due: ",new Date(w.dueDate).toLocaleDateString()]}),r.jsx("span",{className:`px-2 py-0.5 rounded text-xs font-medium ${w.status==="submitted"?"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400":w.status==="generated"?"bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-400":"bg-yellow-100 dark:bg-yellow-900/30 text-yellow-700 dark:text-yellow-400"}`,children:w.status})]}),r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx("button",{className:"p-1 hover:bg-gray-200 dark:hover:bg-gray-600 rounded",title:"View",children:r.jsx(ir,{className:"w-4 h-4 text-gray-500 dark:text-gray-400"})}),r.jsx("button",{className:"p-1 hover:bg-gray-200 dark:hover:bg-gray-600 rounded",title:"Download",children:r.jsx(gs,{className:"w-4 h-4 text-gray-500 dark:text-gray-400"})}),w.status!=="submitted"&&r.jsx("button",{className:"p-1 hover:bg-gray-200 dark:hover:bg-gray-600 rounded",title:"Submit",children:r.jsx(Of,{className:"w-4 h-4 text-gray-500 dark:text-gray-400"})})]})]})]})},w.id))})]})}),r.jsxs("div",{className:"space-y-6",children:[r.jsxs(se,{className:"p-6",children:[r.jsxs("h2",{className:"text-lg font-semibold mb-4 flex items-center gap-2 text-gray-900 dark:text-white",children:[r.jsx(Li,{className:"w-5 h-5 text-gray-600 dark:text-gray-400"}),"Upcoming Deadlines"]}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"p-3 bg-red-50 dark:bg-red-900/20 border-l-4 border-l-red-500 rounded-r-lg",children:[r.jsx("p",{className:"text-sm font-medium text-red-800 dark:text-red-300",children:"Monthly SAR Filing"}),r.jsx("p",{className:"text-xs text-red-600 dark:text-red-400",children:"Due in 30 days"})]}),r.jsxs("div",{className:"p-3 bg-yellow-50 dark:bg-yellow-900/20 border-l-4 border-l-yellow-500 rounded-r-lg",children:[r.jsx("p",{className:"text-sm font-medium text-yellow-800 dark:text-yellow-300",children:"Annual AML Review"}),r.jsx("p",{className:"text-xs text-yellow-600 dark:text-yellow-400",children:"Due in 75 days"})]}),r.jsxs("div",{className:"p-3 bg-blue-50 dark:bg-blue-900/20 border-l-4 border-l-blue-500 rounded-r-lg",children:[r.jsx("p",{className:"text-sm font-medium text-blue-800 dark:text-blue-300",children:"Risk Assessment Update"}),r.jsx("p",{className:"text-xs text-blue-600 dark:text-blue-400",children:"Due in 90 days"})]})]})]}),r.jsxs(se,{className:"p-6",children:[r.jsx("h2",{className:"text-lg font-semibold mb-4 text-gray-900 dark:text-white",children:"Quick Actions"}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("button",{className:"w-full p-3 text-left bg-gray-50 dark:bg-gray-700 hover:bg-gray-100 dark:hover:bg-gray-600 rounded-lg transition-colors flex items-center gap-3",children:[r.jsx(W5,{className:"w-5 h-5 text-gray-600 dark:text-gray-400"}),r.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:"Generate SAR Report"})]}),r.jsxs("button",{className:"w-full p-3 text-left bg-gray-50 dark:bg-gray-700 hover:bg-gray-100 dark:hover:bg-gray-600 rounded-lg transition-colors flex items-center gap-3",children:[r.jsx(gs,{className:"w-5 h-5 text-gray-600 dark:text-gray-400"}),r.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:"Export CTR Data"})]}),r.jsxs("button",{className:"w-full p-3 text-left bg-gray-50 dark:bg-gray-700 hover:bg-gray-100 dark:hover:bg-gray-600 rounded-lg transition-colors flex items-center gap-3",children:[r.jsx(rr,{className:"w-5 h-5 text-gray-600 dark:text-gray-400"}),r.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:"Run Sanctions Check"})]})]})]})]})]}),e==="sanctions"&&r.jsxs("div",{className:"space-y-6",children:[r.jsxs(se,{className:"p-6",children:[r.jsxs("div",{className:"flex items-start gap-3 mb-6",children:[r.jsx(rr,{className:"w-6 h-6 text-primary-600 dark:text-primary-400"}),r.jsxs("div",{children:[r.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Sanctions Screening"}),r.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Screen customers and transactions against global sanctions lists"})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:[r.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:[r.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-1",children:"Lists Monitored"}),r.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"12"}),r.jsxs("div",{className:"flex flex-wrap gap-1 mt-2",children:[r.jsx("span",{className:"px-2 py-0.5 bg-white dark:bg-gray-600 text-gray-600 dark:text-gray-300 rounded text-xs",children:"OFAC SDN"}),r.jsx("span",{className:"px-2 py-0.5 bg-white dark:bg-gray-600 text-gray-600 dark:text-gray-300 rounded text-xs",children:"EU Sanctions"}),r.jsx("span",{className:"px-2 py-0.5 bg-white dark:bg-gray-600 text-gray-600 dark:text-gray-300 rounded text-xs",children:"UN Sanctions"}),r.jsx("span",{className:"px-2 py-0.5 bg-white dark:bg-gray-600 text-gray-600 dark:text-gray-300 rounded text-xs",children:"+9 more"})]})]}),r.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:[r.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-1",children:"Last Updated"}),r.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Today"}),r.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-2",children:"Lists are updated daily at 00:00 UTC"})]})]}),r.jsxs("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg p-4",children:[r.jsx("h3",{className:"font-medium mb-4 text-gray-900 dark:text-white",children:"Manual Screening"}),r.jsxs("div",{className:"flex gap-3",children:[r.jsx("input",{type:"text",placeholder:"Enter name or entity to screen...",className:"flex-1 px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white"}),r.jsxs("button",{className:"px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 flex items-center gap-2",children:[r.jsx(Nr,{className:"w-4 h-4"}),"Screen"]})]})]})]}),r.jsxs(se,{className:"p-6",children:[r.jsx("h3",{className:"font-semibold mb-4 text-gray-900 dark:text-white",children:"Recent Screening Results"}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"p-3 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(Ae,{className:"w-5 h-5 text-green-600 dark:text-green-400"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:"John Smith"}),r.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Screened 5 minutes ago"})]})]}),r.jsx("span",{className:"px-2 py-1 bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400 rounded text-xs font-medium",children:"No Match"})]}),r.jsxs("div",{className:"p-3 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(Ht,{className:"w-5 h-5 text-red-600 dark:text-red-400"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:"Global Trading Ltd"}),r.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Screened 2 hours ago"})]})]}),r.jsx("span",{className:"px-2 py-1 bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-400 rounded text-xs font-medium",children:"Potential Match"})]}),r.jsxs("div",{className:"p-3 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(Ae,{className:"w-5 h-5 text-green-600 dark:text-green-400"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:"Tech Innovations Inc"}),r.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Screened 3 hours ago"})]})]}),r.jsx("span",{className:"px-2 py-1 bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400 rounded text-xs font-medium",children:"No Match"})]})]})]})]})]})})}function FPe(){const[e,t]=p.useState("all"),[s,a]=p.useState("all"),[n,i]=p.useState(""),[o,l]=p.useState(!0),[c,d]=p.useState({totalCustomers:0,verified:0,pending:0,individuals:0,businesses:0,newThisMonth:0}),[h,f]=p.useState([]);p.useEffect(()=>{x()},[]);const x=async()=>{l(!0);try{const{data:N,error:k}=await X.from("users").select("*").order("created_at",{ascending:!1});if(k){console.error("Error fetching customers:",k),f([]),l(!1);return}const{data:C}=await X.from("cards").select("user_id"),E=new Map;C==null||C.forEach(R=>{E.set(R.user_id,(E.get(R.user_id)||0)+1)});const{data:_}=await X.from("wallets").select("user_id"),T=new Map;_==null||_.forEach(R=>{T.set(R.user_id,(T.get(R.user_id)||0)+1)});const A=(N||[]).map(R=>{var $;return{id:R.id,type:R.role==="merchant"?"business":"individual",firstName:R.first_name,lastName:R.last_name,businessName:R.business_name,email:R.email,phone:R.phone||"",country:R.country||"Unknown",kycStatus:(($=R.kyc_status)==null?void 0:$.toLowerCase())||"not_submitted",status:R.is_active?"active":"suspended",totalCards:E.get(R.id)||0,totalAccounts:T.get(R.id)||0,createdAt:R.created_at,lastActive:R.updated_at||R.created_at}});f(A);const P=new Date,M=new Date(P.getFullYear(),P.getMonth(),1);d({totalCustomers:A.length,verified:A.filter(R=>R.kycStatus==="verified").length,pending:A.filter(R=>R.kycStatus==="pending").length,individuals:A.filter(R=>R.type==="individual").length,businesses:A.filter(R=>R.type==="business").length,newThisMonth:A.filter(R=>new Date(R.createdAt)>=M).length})}catch(N){console.error("Error fetching customers:",N)}finally{l(!1)}},y=N=>{switch(N){case"verified":return r.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-700",children:[r.jsx(Ae,{className:"w-3 h-3"})," Verified"]});case"pending":return r.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium bg-yellow-100 text-yellow-700",children:[r.jsx(_t,{className:"w-3 h-3"})," Pending"]});case"rejected":return r.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium bg-red-100 text-red-700",children:[r.jsx(Wt,{className:"w-3 h-3"})," Rejected"]});case"not_submitted":return r.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-700",children:[r.jsx(Ht,{className:"w-3 h-3"})," Not Submitted"]});default:return null}},v=N=>{switch(N){case"active":return r.jsx("span",{className:"w-2 h-2 rounded-full bg-green-500",title:"Active"});case"suspended":return r.jsx("span",{className:"w-2 h-2 rounded-full bg-yellow-500",title:"Suspended"});case"closed":return r.jsx("span",{className:"w-2 h-2 rounded-full bg-red-500",title:"Closed"});default:return null}},w=h.filter(N=>!(e!=="all"&&N.type!==e||s!=="all"&&N.kycStatus!==s||n&&!(N.type==="individual"?`${N.firstName} ${N.lastName}`:N.businessName||"").toLowerCase().includes(n.toLowerCase())&&!N.email.toLowerCase().includes(n.toLowerCase())&&!N.id.toLowerCase().includes(n.toLowerCase())));return r.jsx(fr,{children:r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Customers"}),r.jsx("p",{className:"text-gray-500",children:"Manage individual and business customers"})]}),r.jsxs("div",{className:"flex gap-3",children:[r.jsxs("button",{className:"px-4 py-2 text-sm bg-white border border-gray-300 rounded-lg hover:bg-gray-50 flex items-center gap-2",children:[r.jsx(gs,{className:"w-4 h-4"}),"Export"]}),r.jsxs("button",{className:"px-4 py-2 text-sm bg-primary-600 text-white rounded-lg hover:bg-primary-700 flex items-center gap-2",children:[r.jsx(sr,{className:"w-4 h-4"}),"Add Customer"]})]})]}),r.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-6 gap-4",children:[r.jsxs(se,{className:"p-4",children:[r.jsx("p",{className:"text-sm text-gray-500",children:"Total Customers"}),r.jsx("p",{className:"text-2xl font-bold",children:c.totalCustomers.toLocaleString()})]}),r.jsxs(se,{className:"p-4",children:[r.jsx("p",{className:"text-sm text-gray-500",children:"Verified"}),r.jsx("p",{className:"text-2xl font-bold text-green-600",children:c.verified.toLocaleString()})]}),r.jsxs(se,{className:"p-4",children:[r.jsx("p",{className:"text-sm text-gray-500",children:"Pending KYC"}),r.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:c.pending})]}),r.jsxs(se,{className:"p-4",children:[r.jsx("p",{className:"text-sm text-gray-500",children:"Individuals"}),r.jsx("p",{className:"text-2xl font-bold",children:c.individuals.toLocaleString()})]}),r.jsxs(se,{className:"p-4",children:[r.jsx("p",{className:"text-sm text-gray-500",children:"Businesses"}),r.jsx("p",{className:"text-2xl font-bold",children:c.businesses})]}),r.jsxs(se,{className:"p-4",children:[r.jsx("p",{className:"text-sm text-gray-500",children:"New This Month"}),r.jsxs("p",{className:"text-2xl font-bold text-blue-600",children:["+",c.newThisMonth]})]})]}),r.jsx(se,{className:"p-4",children:r.jsxs("div",{className:"flex flex-wrap items-center gap-4",children:[r.jsx("div",{className:"flex-1 min-w-64",children:r.jsxs("div",{className:"relative",children:[r.jsx(Nr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),r.jsx("input",{type:"text",placeholder:"Search by name, email, or ID...",value:n,onChange:N=>i(N.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500"})]})}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(el,{className:"w-4 h-4 text-gray-400"}),r.jsxs("div",{className:"relative",children:[r.jsxs("select",{value:e,onChange:N=>t(N.target.value),className:"appearance-none border border-gray-300 rounded-lg px-3 py-2 pr-8 text-sm focus:ring-2 focus:ring-primary-500",children:[r.jsx("option",{value:"all",children:"All Types"}),r.jsx("option",{value:"individual",children:"Individual"}),r.jsx("option",{value:"business",children:"Business"})]}),r.jsx(ys,{className:"absolute right-2 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400 pointer-events-none"})]}),r.jsxs("div",{className:"relative",children:[r.jsxs("select",{value:s,onChange:N=>a(N.target.value),className:"appearance-none border border-gray-300 rounded-lg px-3 py-2 pr-8 text-sm focus:ring-2 focus:ring-primary-500",children:[r.jsx("option",{value:"all",children:"All KYC Status"}),r.jsx("option",{value:"verified",children:"Verified"}),r.jsx("option",{value:"pending",children:"Pending"}),r.jsx("option",{value:"rejected",children:"Rejected"})]}),r.jsx(ys,{className:"absolute right-2 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400 pointer-events-none"})]})]})]})}),r.jsxs(se,{className:"overflow-hidden",children:[r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:r.jsxs("tr",{children:[r.jsx("th",{className:"text-left px-6 py-3 text-xs font-medium text-gray-500 uppercase",children:"Customer"}),r.jsx("th",{className:"text-left px-6 py-3 text-xs font-medium text-gray-500 uppercase",children:"Contact"}),r.jsx("th",{className:"text-left px-6 py-3 text-xs font-medium text-gray-500 uppercase",children:"Country"}),r.jsx("th",{className:"text-left px-6 py-3 text-xs font-medium text-gray-500 uppercase",children:"KYC Status"}),r.jsx("th",{className:"text-left px-6 py-3 text-xs font-medium text-gray-500 uppercase",children:"Cards"}),r.jsx("th",{className:"text-left px-6 py-3 text-xs font-medium text-gray-500 uppercase",children:"Accounts"}),r.jsx("th",{className:"text-left px-6 py-3 text-xs font-medium text-gray-500 uppercase",children:"Created"}),r.jsx("th",{className:"text-left px-6 py-3 text-xs font-medium text-gray-500 uppercase",children:"Actions"})]})}),r.jsx("tbody",{className:"divide-y divide-gray-200",children:w.map(N=>r.jsxs("tr",{className:"hover:bg-gray-50",children:[r.jsx("td",{className:"px-6 py-4",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center ${N.type==="business"?"bg-purple-100":"bg-blue-100"}`,children:N.type==="business"?r.jsx(w6,{className:"w-5 h-5 text-purple-600"}):r.jsx(br,{className:"w-5 h-5 text-blue-600"})}),r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center gap-2",children:[v(N.status),r.jsx("span",{className:"font-medium text-sm",children:N.type==="individual"?`${N.firstName} ${N.lastName}`:N.businessName})]}),r.jsx("span",{className:"text-xs text-gray-500 font-mono",children:N.id})]})]})}),r.jsx("td",{className:"px-6 py-4",children:r.jsxs("div",{className:"space-y-1",children:[r.jsxs("div",{className:"flex items-center gap-1 text-sm text-gray-600",children:[r.jsx(On,{className:"w-3 h-3"}),N.email]}),r.jsxs("div",{className:"flex items-center gap-1 text-sm text-gray-500",children:[r.jsx(Ss,{className:"w-3 h-3"}),N.phone]})]})}),r.jsx("td",{className:"px-6 py-4",children:r.jsxs("div",{className:"flex items-center gap-1 text-sm text-gray-600",children:[r.jsx(Vi,{className:"w-3 h-3"}),N.country]})}),r.jsx("td",{className:"px-6 py-4",children:y(N.kycStatus)}),r.jsx("td",{className:"px-6 py-4",children:r.jsxs("div",{className:"flex items-center gap-1 text-sm",children:[r.jsx(lt,{className:"w-4 h-4 text-gray-400"}),N.totalCards]})}),r.jsx("td",{className:"px-6 py-4",children:r.jsx("span",{className:"text-sm",children:N.totalAccounts})}),r.jsx("td",{className:"px-6 py-4",children:r.jsx("span",{className:"text-sm text-gray-500",children:new Date(N.createdAt).toLocaleDateString()})}),r.jsx("td",{className:"px-6 py-4",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("button",{className:"p-1 bg-gray-100 text-gray-600 rounded hover:bg-gray-200",title:"View",children:r.jsx(ir,{className:"w-4 h-4"})}),r.jsx("button",{className:"p-1 bg-gray-100 text-gray-600 rounded hover:bg-gray-200",title:"Edit",children:r.jsx(gh,{className:"w-4 h-4"})}),N.kycStatus==="pending"&&r.jsx("button",{className:"p-1 bg-blue-100 text-blue-600 rounded hover:bg-blue-200",title:"Review KYC",children:r.jsx(rr,{className:"w-4 h-4"})}),r.jsx("button",{className:"p-1 hover:bg-gray-100 rounded",children:r.jsx(Ih,{className:"w-4 h-4 text-gray-400"})})]})})]},N.id))})]})}),r.jsxs("div",{className:"px-6 py-4 border-t border-gray-200 flex items-center justify-between",children:[r.jsxs("p",{className:"text-sm text-gray-500",children:["Showing 1 to ",w.length," of ",c.totalCustomers," customers"]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("button",{className:"px-3 py-1 text-sm bg-white border border-gray-300 rounded hover:bg-gray-50 disabled:opacity-50",disabled:!0,children:"Previous"}),r.jsx("button",{className:"px-3 py-1 text-sm bg-primary-600 text-white rounded",children:"1"}),r.jsx("button",{className:"px-3 py-1 text-sm bg-white border border-gray-300 rounded hover:bg-gray-50",children:"2"}),r.jsx("button",{className:"px-3 py-1 text-sm bg-white border border-gray-300 rounded hover:bg-gray-50",children:"3"}),r.jsx("span",{className:"text-gray-500",children:"..."}),r.jsx("button",{className:"px-3 py-1 text-sm bg-white border border-gray-300 rounded hover:bg-gray-50",children:"125"}),r.jsx("button",{className:"px-3 py-1 text-sm bg-white border border-gray-300 rounded hover:bg-gray-50",children:"Next"})]})]})]})]})})}function BPe(){const[e,t]=p.useState("all"),[s,a]=p.useState("all"),[n,i]=p.useState(""),[o,l]=p.useState(!0),[c,d]=p.useState({totalAccounts:0,activeAccounts:0,totalBalance:0,frozenAccounts:0,closedAccounts:0,newThisMonth:0}),[h,f]=p.useState([]),[x,y]=p.useState(null);p.useEffect(()=>{cr.getDefaultCurrency().then(y),w()},[]);const v=(x==null?void 0:x.symbol)||"",w=async()=>{l(!0);try{const{data:_,error:T}=await X.from("wallets").select(`
          *,
          users:user_id (
            id,
            first_name,
            last_name,
            email,
            username,
            role
          )
        `).order("created_at",{ascending:!1});if(T){console.error("Error fetching wallets:",T),f([]),l(!1);return}const A=(_||[]).map($=>{const W=$.users;let I="wallet";(W==null?void 0:W.role)==="merchant"?I="merchant":(W==null?void 0:W.role)==="agent"&&(I="agent");let B="active";$.is_frozen?B="frozen":$.is_active===!1&&(B="closed");let O="Unknown";if(W){const F=W.first_name||"",q=W.last_name||"";O=`${F} ${q}`.trim()||W.username||W.email||"Unnamed User"}return{id:$.id,customerId:$.user_id,customerName:O,type:I,currency:$.currency||"USD",balance:$.balance||0,availableBalance:$.available_balance||$.balance||0,status:B,createdAt:$.created_at,lastTransaction:$.updated_at||null}});f(A);const P=new Date,M=new Date(P.getFullYear(),P.getMonth(),1),R=A.reduce(($,W)=>$+W.balance,0);d({totalAccounts:A.length,activeAccounts:A.filter($=>$.status==="active").length,totalBalance:R,frozenAccounts:A.filter($=>$.status==="frozen").length,closedAccounts:A.filter($=>$.status==="closed").length,newThisMonth:A.filter($=>new Date($.createdAt)>=M).length})}catch(_){console.error("Error fetching accounts:",_)}finally{l(!1)}},N=_=>{switch(_){case"wallet":return r.jsx("span",{className:"px-2 py-0.5 rounded text-xs font-medium bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-400",children:"Wallet"});case"card_funding":return r.jsx("span",{className:"px-2 py-0.5 rounded text-xs font-medium bg-purple-100 dark:bg-purple-900/30 text-purple-700 dark:text-purple-400",children:"Card Funding"});case"merchant":return r.jsx("span",{className:"px-2 py-0.5 rounded text-xs font-medium bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400",children:"Merchant"});case"agent":return r.jsx("span",{className:"px-2 py-0.5 rounded text-xs font-medium bg-orange-100 dark:bg-orange-900/30 text-orange-700 dark:text-orange-400",children:"Agent"});default:return null}},k=_=>{switch(_){case"active":return r.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400",children:[r.jsx(Ae,{className:"w-3 h-3"})," Active"]});case"frozen":return r.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium bg-yellow-100 dark:bg-yellow-900/30 text-yellow-700 dark:text-yellow-400",children:[r.jsx(_t,{className:"w-3 h-3"})," Frozen"]});case"closed":return r.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-400",children:[r.jsx(Wt,{className:"w-3 h-3"})," Closed"]});default:return null}},C=(_,T)=>new Intl.NumberFormat("en-US",{style:"currency",currency:T}).format(_),E=h.filter(_=>!(e!=="all"&&_.type!==e||s!=="all"&&_.status!==s||n&&!_.customerName.toLowerCase().includes(n.toLowerCase())&&!_.id.toLowerCase().includes(n.toLowerCase())));return r.jsx(fr,{children:r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Accounts"}),r.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Manage customer accounts and balances"})]}),r.jsxs("div",{className:"flex gap-3",children:[r.jsxs("button",{className:"px-4 py-2 text-sm bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300 flex items-center gap-2",children:[r.jsx(gs,{className:"w-4 h-4"}),"Export"]}),r.jsxs("button",{className:"px-4 py-2 text-sm bg-primary-600 text-white rounded-lg hover:bg-primary-700 flex items-center gap-2",children:[r.jsx(sr,{className:"w-4 h-4"}),"Create Account"]})]})]}),r.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-6 gap-4",children:[r.jsxs(Be,{className:"p-4",delay:0,children:[r.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Total Accounts"}),r.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:c.totalAccounts.toLocaleString()})]}),r.jsxs(Be,{className:"p-4",delay:.1,children:[r.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Active"}),r.jsx("p",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:c.activeAccounts.toLocaleString()})]}),r.jsxs(Be,{className:"p-4",delay:.2,children:[r.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Total Balance"}),r.jsxs("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:[v,(c.totalBalance/1e6).toFixed(2),"M"]})]}),r.jsxs(Be,{className:"p-4",delay:.3,children:[r.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Frozen"}),r.jsx("p",{className:"text-2xl font-bold text-yellow-600 dark:text-yellow-400",children:c.frozenAccounts})]}),r.jsxs(Be,{className:"p-4",delay:.4,children:[r.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Closed"}),r.jsx("p",{className:"text-2xl font-bold text-red-600 dark:text-red-400",children:c.closedAccounts})]}),r.jsxs(Be,{className:"p-4",delay:.5,children:[r.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"New This Month"}),r.jsxs("p",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:["+",c.newThisMonth]})]})]}),r.jsx(se,{className:"p-4",children:r.jsxs("div",{className:"flex flex-wrap items-center gap-4",children:[r.jsx("div",{className:"flex-1 min-w-64",children:r.jsxs("div",{className:"relative",children:[r.jsx(Nr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),r.jsx("input",{type:"text",placeholder:"Search by customer name or account ID...",value:n,onChange:_=>i(_.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-400"})]})}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(el,{className:"w-4 h-4 text-gray-400"}),r.jsxs("div",{className:"relative",children:[r.jsxs("select",{value:e,onChange:_=>t(_.target.value),className:"appearance-none border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 pr-8 text-sm focus:ring-2 focus:ring-primary-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[r.jsx("option",{value:"all",children:"All Types"}),r.jsx("option",{value:"wallet",children:"Wallet"}),r.jsx("option",{value:"card_funding",children:"Card Funding"}),r.jsx("option",{value:"merchant",children:"Merchant"}),r.jsx("option",{value:"agent",children:"Agent"})]}),r.jsx(ys,{className:"absolute right-2 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400 pointer-events-none"})]}),r.jsxs("div",{className:"relative",children:[r.jsxs("select",{value:s,onChange:_=>a(_.target.value),className:"appearance-none border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 pr-8 text-sm focus:ring-2 focus:ring-primary-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[r.jsx("option",{value:"all",children:"All Status"}),r.jsx("option",{value:"active",children:"Active"}),r.jsx("option",{value:"frozen",children:"Frozen"}),r.jsx("option",{value:"closed",children:"Closed"})]}),r.jsx(ys,{className:"absolute right-2 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400 pointer-events-none"})]})]})]})}),r.jsxs(se,{className:"overflow-hidden",children:[r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700/50 border-b border-gray-200 dark:border-gray-700",children:r.jsxs("tr",{children:[r.jsx("th",{className:"text-left px-6 py-3 text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Account"}),r.jsx("th",{className:"text-left px-6 py-3 text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Customer"}),r.jsx("th",{className:"text-left px-6 py-3 text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Type"}),r.jsx("th",{className:"text-left px-6 py-3 text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Balance"}),r.jsx("th",{className:"text-left px-6 py-3 text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Available"}),r.jsx("th",{className:"text-left px-6 py-3 text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Status"}),r.jsx("th",{className:"text-left px-6 py-3 text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Last Transaction"}),r.jsx("th",{className:"text-left px-6 py-3 text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Actions"})]})}),r.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:E.map(_=>r.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700/50",children:[r.jsx("td",{className:"px-6 py-4",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Rt,{className:"w-5 h-5 text-gray-400"}),r.jsxs("div",{children:[r.jsx("span",{className:"font-mono text-sm text-gray-900 dark:text-white",children:_.id}),r.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:_.currency})]})]})}),r.jsx("td",{className:"px-6 py-4",children:r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-sm text-gray-900 dark:text-white",children:_.customerName}),r.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400 font-mono",children:_.customerId})]})}),r.jsx("td",{className:"px-6 py-4",children:N(_.type)}),r.jsx("td",{className:"px-6 py-4",children:r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(Cr,{className:"w-4 h-4 text-gray-400"}),r.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:C(_.balance,_.currency)})]})}),r.jsx("td",{className:"px-6 py-4",children:r.jsx("span",{className:`font-medium ${_.availableBalance<_.balance?"text-yellow-600 dark:text-yellow-400":"text-gray-900 dark:text-white"}`,children:C(_.availableBalance,_.currency)})}),r.jsx("td",{className:"px-6 py-4",children:k(_.status)}),r.jsx("td",{className:"px-6 py-4",children:r.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:_.lastTransaction?new Date(_.lastTransaction).toLocaleDateString():"Never"})}),r.jsx("td",{className:"px-6 py-4",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("button",{className:"p-1 bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-400 rounded hover:bg-gray-200 dark:hover:bg-gray-600",title:"View",children:r.jsx(ir,{className:"w-4 h-4"})}),r.jsx("button",{className:"p-1 bg-green-100 dark:bg-green-900/30 text-green-600 dark:text-green-400 rounded hover:bg-green-200 dark:hover:bg-green-900/50",title:"Credit",children:r.jsx(An,{className:"w-4 h-4"})}),r.jsx("button",{className:"p-1 bg-red-100 dark:bg-red-900/30 text-red-600 dark:text-red-400 rounded hover:bg-red-200 dark:hover:bg-red-900/50",title:"Debit",children:r.jsx(Rr,{className:"w-4 h-4"})}),_.status==="active"?r.jsx("button",{className:"p-1 bg-yellow-100 dark:bg-yellow-900/30 text-yellow-600 dark:text-yellow-400 rounded hover:bg-yellow-200 dark:hover:bg-yellow-900/50",title:"Freeze",children:r.jsx(HV,{className:"w-4 h-4"})}):_.status==="frozen"?r.jsx("button",{className:"p-1 bg-green-100 dark:bg-green-900/30 text-green-600 dark:text-green-400 rounded hover:bg-green-200 dark:hover:bg-green-900/50",title:"Unfreeze",children:r.jsx(Hy,{className:"w-4 h-4"})}):null,r.jsx("button",{className:"p-1 hover:bg-gray-100 dark:hover:bg-gray-700 rounded",children:r.jsx(Ih,{className:"w-4 h-4 text-gray-400"})})]})})]},_.id))})]})}),r.jsxs("div",{className:"px-6 py-4 border-t border-gray-200 dark:border-gray-700 flex items-center justify-between",children:[r.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Showing 1 to ",E.length," of ",c.totalAccounts," accounts"]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("button",{className:"px-3 py-1 text-sm bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded hover:bg-gray-50 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300 disabled:opacity-50",disabled:!0,children:"Previous"}),r.jsx("button",{className:"px-3 py-1 text-sm bg-primary-600 text-white rounded",children:"1"}),r.jsx("button",{className:"px-3 py-1 text-sm bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded hover:bg-gray-50 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300",children:"2"}),r.jsx("button",{className:"px-3 py-1 text-sm bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded hover:bg-gray-50 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300",children:"3"}),r.jsx("button",{className:"px-3 py-1 text-sm bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded hover:bg-gray-50 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300",children:"Next"})]})]})]})]})})}function $Pe(){const e=Ut(),[t,s]=p.useState("all"),[a,n]=p.useState("all"),[i,o]=p.useState(""),[l,c]=p.useState(!0),[d,h]=p.useState({totalCards:0,activeCards:0,virtualCards:0,physicalCards:0,frozenCards:0,issuedThisMonth:0}),[f,x]=p.useState([]);p.useEffect(()=>{y()},[]);const y=async()=>{c(!0);try{const{data:C,error:E}=await X.from("cards").select("*").order("created_at",{ascending:!1});if(E){console.error("Error fetching cards:",E),x([]),c(!1);return}const _=[...new Set((C==null?void 0:C.map($=>$.user_id))||[])],{data:T}=await X.from("users").select("id, first_name, last_name").in("id",_),A=new Map((T==null?void 0:T.map($=>[$.id,$]))||[]),P=(C||[]).map($=>{const W=A.get($.user_id);return{id:$.id,cardProgramId:$.card_program_id||"",cardProgramName:$.card_type||"Standard",customerId:$.user_id,customerName:W?`${W.first_name} ${W.last_name}`:"Unknown",last4:$.last_four||"****",brand:$.brand||"visa",type:$.card_type||"virtual",status:$.status||"active",balance:$.balance||0,currency:$.currency||"USD",expiryMonth:$.expiry_month||12,expiryYear:$.expiry_year||2027,createdAt:$.created_at,lastUsed:$.last_used_at||null}});x(P);const M=new Date,R=new Date(M.getFullYear(),M.getMonth(),1);h({totalCards:P.length,activeCards:P.filter($=>$.status==="active").length,virtualCards:P.filter($=>$.type==="virtual").length,physicalCards:P.filter($=>$.type==="physical").length,frozenCards:P.filter($=>$.status==="frozen").length,issuedThisMonth:P.filter($=>new Date($.createdAt)>=R).length})}catch(C){console.error("Error fetching cards:",C)}finally{c(!1)}},v=C=>{switch(C){case"active":return r.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-700",children:[r.jsx(Ae,{className:"w-3 h-3"})," Active"]});case"frozen":return r.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-700",children:[r.jsx(z5,{className:"w-3 h-3"})," Frozen"]});case"cancelled":return r.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium bg-red-100 text-red-700",children:[r.jsx(Wt,{className:"w-3 h-3"})," Cancelled"]});case"pending":return r.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium bg-yellow-100 text-yellow-700",children:[r.jsx(_t,{className:"w-3 h-3"})," Pending"]});default:return null}},w=(C,E)=>new Intl.NumberFormat("en-US",{style:"currency",currency:E}).format(C),N=C=>{navigator.clipboard.writeText(C)},k=f.filter(C=>!(t!=="all"&&C.type!==t||a!=="all"&&C.status!==a||i&&!C.customerName.toLowerCase().includes(i.toLowerCase())&&!C.last4.includes(i)&&!C.id.toLowerCase().includes(i.toLowerCase())));return r.jsx(fr,{children:r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Cards"}),r.jsx("p",{className:"text-gray-500",children:"Manage issued cards"})]}),r.jsxs("div",{className:"flex gap-3",children:[r.jsxs("button",{className:"px-4 py-2 text-sm bg-white border border-gray-300 rounded-lg hover:bg-gray-50 flex items-center gap-2",children:[r.jsx(gs,{className:"w-4 h-4"}),"Export"]}),r.jsxs("button",{onClick:()=>e("/admin/card-programs"),className:"px-4 py-2 text-sm bg-primary-600 text-white rounded-lg hover:bg-primary-700 flex items-center gap-2",children:[r.jsx(sr,{className:"w-4 h-4"}),"Card Programs"]})]})]}),r.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-6 gap-4",children:[r.jsxs(se,{className:"p-4",children:[r.jsx("p",{className:"text-sm text-gray-500",children:"Total Cards"}),r.jsx("p",{className:"text-2xl font-bold",children:d.totalCards.toLocaleString()})]}),r.jsxs(se,{className:"p-4",children:[r.jsx("p",{className:"text-sm text-gray-500",children:"Active"}),r.jsx("p",{className:"text-2xl font-bold text-green-600",children:d.activeCards.toLocaleString()})]}),r.jsxs(se,{className:"p-4",children:[r.jsx("p",{className:"text-sm text-gray-500",children:"Virtual"}),r.jsx("p",{className:"text-2xl font-bold text-blue-600",children:d.virtualCards.toLocaleString()})]}),r.jsxs(se,{className:"p-4",children:[r.jsx("p",{className:"text-sm text-gray-500",children:"Physical"}),r.jsx("p",{className:"text-2xl font-bold text-purple-600",children:d.physicalCards})]}),r.jsxs(se,{className:"p-4",children:[r.jsx("p",{className:"text-sm text-gray-500",children:"Frozen"}),r.jsx("p",{className:"text-2xl font-bold text-cyan-600",children:d.frozenCards})]}),r.jsxs(se,{className:"p-4",children:[r.jsx("p",{className:"text-sm text-gray-500",children:"Issued This Month"}),r.jsxs("p",{className:"text-2xl font-bold text-green-600",children:["+",d.issuedThisMonth]})]})]}),r.jsx(se,{className:"p-4",children:r.jsxs("div",{className:"flex flex-wrap items-center gap-4",children:[r.jsx("div",{className:"flex-1 min-w-64",children:r.jsxs("div",{className:"relative",children:[r.jsx(Nr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),r.jsx("input",{type:"text",placeholder:"Search by customer, last 4 digits, or card ID...",value:i,onChange:C=>o(C.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500"})]})}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(el,{className:"w-4 h-4 text-gray-400"}),r.jsxs("div",{className:"relative",children:[r.jsxs("select",{value:t,onChange:C=>s(C.target.value),className:"appearance-none border border-gray-300 rounded-lg px-3 py-2 pr-8 text-sm focus:ring-2 focus:ring-primary-500",children:[r.jsx("option",{value:"all",children:"All Types"}),r.jsx("option",{value:"virtual",children:"Virtual"}),r.jsx("option",{value:"physical",children:"Physical"})]}),r.jsx(ys,{className:"absolute right-2 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400 pointer-events-none"})]}),r.jsxs("div",{className:"relative",children:[r.jsxs("select",{value:a,onChange:C=>n(C.target.value),className:"appearance-none border border-gray-300 rounded-lg px-3 py-2 pr-8 text-sm focus:ring-2 focus:ring-primary-500",children:[r.jsx("option",{value:"all",children:"All Status"}),r.jsx("option",{value:"active",children:"Active"}),r.jsx("option",{value:"frozen",children:"Frozen"}),r.jsx("option",{value:"cancelled",children:"Cancelled"}),r.jsx("option",{value:"pending",children:"Pending"})]}),r.jsx(ys,{className:"absolute right-2 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400 pointer-events-none"})]})]})]})}),r.jsxs(se,{className:"overflow-hidden",children:[r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:r.jsxs("tr",{children:[r.jsx("th",{className:"text-left px-6 py-3 text-xs font-medium text-gray-500 uppercase",children:"Card"}),r.jsx("th",{className:"text-left px-6 py-3 text-xs font-medium text-gray-500 uppercase",children:"Customer"}),r.jsx("th",{className:"text-left px-6 py-3 text-xs font-medium text-gray-500 uppercase",children:"Program"}),r.jsx("th",{className:"text-left px-6 py-3 text-xs font-medium text-gray-500 uppercase",children:"Balance"}),r.jsx("th",{className:"text-left px-6 py-3 text-xs font-medium text-gray-500 uppercase",children:"Expiry"}),r.jsx("th",{className:"text-left px-6 py-3 text-xs font-medium text-gray-500 uppercase",children:"Status"}),r.jsx("th",{className:"text-left px-6 py-3 text-xs font-medium text-gray-500 uppercase",children:"Last Used"}),r.jsx("th",{className:"text-left px-6 py-3 text-xs font-medium text-gray-500 uppercase",children:"Actions"})]})}),r.jsx("tbody",{className:"divide-y divide-gray-200",children:k.map(C=>r.jsxs("tr",{className:"hover:bg-gray-50",children:[r.jsx("td",{className:"px-6 py-4",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:`w-12 h-8 rounded flex items-center justify-center ${C.brand==="visa"?"bg-blue-600":"bg-orange-500"}`,children:r.jsx("span",{className:"text-white text-xs font-bold uppercase",children:C.brand})}),r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs("span",{className:"font-mono text-sm",children:["****",C.last4]}),r.jsx("button",{onClick:()=>N(C.id),className:"p-0.5 hover:bg-gray-100 rounded",children:r.jsx(Pr,{className:"w-3 h-3 text-gray-400"})})]}),r.jsx("span",{className:`text-xs px-1.5 py-0.5 rounded ${C.type==="virtual"?"bg-blue-100 text-blue-700":"bg-purple-100 text-purple-700"}`,children:C.type})]})]})}),r.jsx("td",{className:"px-6 py-4",children:r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-sm",children:C.customerName}),r.jsx("span",{className:"text-xs text-gray-500 font-mono",children:C.customerId})]})}),r.jsx("td",{className:"px-6 py-4",children:r.jsx("span",{className:"text-sm text-gray-600",children:C.cardProgramName})}),r.jsx("td",{className:"px-6 py-4",children:r.jsx("span",{className:"font-medium",children:w(C.balance,C.currency)})}),r.jsx("td",{className:"px-6 py-4",children:r.jsxs("span",{className:"text-sm text-gray-600",children:[String(C.expiryMonth).padStart(2,"0"),"/",C.expiryYear]})}),r.jsx("td",{className:"px-6 py-4",children:v(C.status)}),r.jsx("td",{className:"px-6 py-4",children:r.jsx("span",{className:"text-sm text-gray-500",children:C.lastUsed?new Date(C.lastUsed).toLocaleDateString():"Never"})}),r.jsx("td",{className:"px-6 py-4",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("button",{className:"p-1 bg-gray-100 text-gray-600 rounded hover:bg-gray-200",title:"View",children:r.jsx(ir,{className:"w-4 h-4"})}),r.jsx("button",{className:"p-1 bg-gray-100 text-gray-600 rounded hover:bg-gray-200",title:"Settings",children:r.jsx(bs,{className:"w-4 h-4"})}),C.status==="active"&&r.jsx("button",{className:"p-1 bg-blue-100 text-blue-600 rounded hover:bg-blue-200",title:"Freeze",children:r.jsx(z5,{className:"w-4 h-4"})}),C.status==="frozen"&&r.jsx("button",{className:"p-1 bg-green-100 text-green-600 rounded hover:bg-green-200",title:"Unfreeze",children:r.jsx(Ot,{className:"w-4 h-4"})}),C.status!=="cancelled"&&r.jsx("button",{className:"p-1 bg-red-100 text-red-600 rounded hover:bg-red-200",title:"Cancel",children:r.jsx(Js,{className:"w-4 h-4"})}),r.jsx("button",{className:"p-1 hover:bg-gray-100 rounded",children:r.jsx(Ih,{className:"w-4 h-4 text-gray-400"})})]})})]},C.id))})]})}),r.jsxs("div",{className:"px-6 py-4 border-t border-gray-200 flex items-center justify-between",children:[r.jsxs("p",{className:"text-sm text-gray-500",children:["Showing 1 to ",k.length," of ",d.totalCards," cards"]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("button",{className:"px-3 py-1 text-sm bg-white border border-gray-300 rounded hover:bg-gray-50 disabled:opacity-50",disabled:!0,children:"Previous"}),r.jsx("button",{className:"px-3 py-1 text-sm bg-primary-600 text-white rounded",children:"1"}),r.jsx("button",{className:"px-3 py-1 text-sm bg-white border border-gray-300 rounded hover:bg-gray-50",children:"2"}),r.jsx("button",{className:"px-3 py-1 text-sm bg-white border border-gray-300 rounded hover:bg-gray-50",children:"3"}),r.jsx("button",{className:"px-3 py-1 text-sm bg-white border border-gray-300 rounded hover:bg-gray-50",children:"Next"})]})]})]})]})})}const UPe=[{name:"Blue",value:"from-blue-600 to-blue-800"},{name:"Purple",value:"from-purple-600 to-purple-800"},{name:"Green",value:"from-green-600 to-green-800"},{name:"Red",value:"from-red-600 to-red-800"},{name:"Orange",value:"from-orange-500 to-orange-700"},{name:"Teal",value:"from-teal-500 to-teal-700"},{name:"Pink",value:"from-pink-500 to-pink-700"},{name:"Indigo",value:"from-indigo-600 to-indigo-800"},{name:"Gray",value:"from-gray-700 to-gray-900"},{name:"Gold",value:"from-yellow-500 to-yellow-700"}],VPe=[{key:"noTransactionFees",label:"No Transaction Fees",description:"Zero fees on all card transactions",icon:If},{key:"allowNegativeBalance",label:"Negative Balance / Overdraft",description:"Allow spending beyond available balance up to overdraft limit",icon:Zl,hasAmount:!0,amountKey:"overdraftLimit",amountLabel:"Overdraft Limit (SLE)"},{key:"allowBuyNowPayLater",label:"Buy Now Pay Later (BNPL)",description:"Allow purchases to be paid in installments",icon:_t,hasAmount:!0,amountKey:"bnplMaxAmount",amountLabel:"Max BNPL Amount (SLE)",hasRate:!0,rateKey:"bnplInterestRate",rateLabel:"Interest Rate (%)"},{key:"highTransactionLimit",label:"High Transaction Limits",description:"Higher daily and monthly limits for large transactions",icon:Ts},{key:"cashbackEnabled",label:"Cashback Rewards",description:"Earn cashback on purchases",icon:Ho,hasRate:!0,rateKey:"cashbackPercentage",rateLabel:"Cashback Rate (%)"}],QS={name:"",description:"",cardImageUrl:"",price:0,transactionFeePercentage:0,transactionFeeFixed:0,requiredKycLevel:1,cardType:"VIRTUAL",isActive:!0,dailyLimit:5e3,monthlyLimit:5e4,colorGradient:"from-blue-600 to-blue-800",features:[],allowNegativeBalance:!1,allowBuyNowPayLater:!1,highTransactionLimit:!1,noTransactionFees:!1,cashbackEnabled:!1,cashbackPercentage:0,overdraftLimit:0,bnplMaxAmount:0,bnplInterestRate:0};function WPe(){const[e,t]=p.useState(""),[s,a]=p.useState(!1),[n,i]=p.useState(null),[o,l]=p.useState(QS),[c,d]=p.useState(""),[h,f]=p.useState(null),[x,y]=p.useState(null);p.useEffect(()=>{cr.getDefaultCurrency().then(y)},[]);const v=(x==null?void 0:x.symbol)||"Le",w=F=>`${v} ${F.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}`,{data:N,isLoading:k}=cA(!0),C=Yz(),E=Xz(),_=Qz(),T={totalPrograms:(N==null?void 0:N.length)||0,activePrograms:(N==null?void 0:N.filter(F=>F.isActive).length)||0,virtualCards:(N==null?void 0:N.filter(F=>F.cardType==="VIRTUAL").length)||0,physicalCards:(N==null?void 0:N.filter(F=>F.cardType==="PHYSICAL").length)||0},A=()=>{i(null),l(QS),d(""),a(!0)},P=F=>{i(F),l({name:F.name,description:F.description,cardImageUrl:F.cardImageUrl||"",price:F.price,transactionFeePercentage:F.transactionFeePercentage,transactionFeeFixed:F.transactionFeeFixed,requiredKycLevel:F.requiredKycLevel,cardType:F.cardType,isActive:F.isActive,dailyLimit:F.dailyLimit,monthlyLimit:F.monthlyLimit,colorGradient:F.colorGradient,features:F.features||[],allowNegativeBalance:F.allowNegativeBalance||!1,allowBuyNowPayLater:F.allowBuyNowPayLater||!1,highTransactionLimit:F.highTransactionLimit||!1,noTransactionFees:F.noTransactionFees||!1,cashbackEnabled:F.cashbackEnabled||!1,cashbackPercentage:F.cashbackPercentage||0,overdraftLimit:F.overdraftLimit||0,bnplMaxAmount:F.bnplMaxAmount||0,bnplInterestRate:F.bnplInterestRate||0}),d(""),a(!0)},M=async F=>{F.preventDefault();try{n?await E.mutateAsync({id:n.id,data:o}):await C.mutateAsync(o),a(!1),i(null),l(QS)}catch(q){console.error("Error saving card program:",q);const H=(q==null?void 0:q.message)||(q==null?void 0:q.toString())||"Unknown error";alert(`Failed to save card program: ${H}`)}},R=()=>{var F;c.trim()&&!((F=o.features)!=null&&F.includes(c.trim()))&&(l({...o,features:[...o.features||[],c.trim()]}),d(""))},$=F=>{var q;l({...o,features:(q=o.features)==null?void 0:q.filter((H,K)=>K!==F)})},W=async F=>{try{await _.mutateAsync(F),f(null)}catch(q){console.error("Error deleting card program:",q),alert("Failed to delete card program. It may be in use.")}},I=async F=>{try{await E.mutateAsync({id:F.id,data:{isActive:!F.isActive}})}catch(q){console.error("Error toggling status:",q)}},B=(N==null?void 0:N.filter(F=>!(e&&!F.name.toLowerCase().includes(e.toLowerCase()))))||[],O=F=>{const q=[];return F.noTransactionFees&&q.push("No Fees"),F.allowNegativeBalance&&q.push(`Overdraft: ${w(F.overdraftLimit||0)}`),F.allowBuyNowPayLater&&q.push("BNPL"),F.highTransactionLimit&&q.push("High Limits"),F.cashbackEnabled&&q.push(`${F.cashbackPercentage}% Cashback`),q};return r.jsx(fr,{children:r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Card Programs"}),r.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Configure card products for the marketplace"})]}),r.jsxs("button",{onClick:A,className:"px-4 py-2 text-sm bg-primary-600 text-white rounded-lg hover:bg-primary-700 flex items-center gap-2",children:[r.jsx(sr,{className:"w-4 h-4"}),"Create Card Program"]})]}),r.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[r.jsx(Be,{className:"p-4",delay:0,children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-900/30 rounded-lg",children:r.jsx(Mw,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Total Programs"}),r.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:T.totalPrograms})]})]})}),r.jsx(Be,{className:"p-4",delay:.1,children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"p-2 bg-green-100 dark:bg-green-900/30 rounded-lg",children:r.jsx(Ae,{className:"w-5 h-5 text-green-600 dark:text-green-400"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Active"}),r.jsx("p",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:T.activePrograms})]})]})}),r.jsx(Be,{className:"p-4",delay:.2,children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"p-2 bg-purple-100 dark:bg-purple-900/30 rounded-lg",children:r.jsx(lt,{className:"w-5 h-5 text-purple-600 dark:text-purple-400"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Virtual Cards"}),r.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:T.virtualCards})]})]})}),r.jsx(Be,{className:"p-4",delay:.3,children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"p-2 bg-orange-100 dark:bg-orange-900/30 rounded-lg",children:r.jsx(lt,{className:"w-5 h-5 text-orange-600 dark:text-orange-400"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Physical Cards"}),r.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:T.physicalCards})]})]})})]}),r.jsx(Be,{className:"p-4",delay:.4,children:r.jsxs("div",{className:"relative max-w-md",children:[r.jsx(Nr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),r.jsx("input",{type:"text",placeholder:"Search card programs...",value:e,onChange:F=>t(F.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]})}),k?r.jsxs("div",{className:"text-center py-12",children:[r.jsx(Ke,{className:"w-8 h-8 animate-spin text-primary-600 mx-auto mb-4"}),r.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Loading card programs..."})]}):B.length===0?r.jsxs(se,{className:"text-center py-12",children:[r.jsx(lt,{className:"w-12 h-12 text-gray-400 dark:text-gray-500 mx-auto mb-4"}),r.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"No card programs"}),r.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-4",children:"Create your first card program to get started"}),r.jsx("button",{onClick:A,className:"px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700",children:"Create Card Program"})]}):r.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:B.map(F=>r.jsxs(se,{className:"overflow-hidden",children:[r.jsxs("div",{className:`relative p-6 text-white bg-gradient-to-br ${F.colorGradient}`,children:[r.jsx("div",{className:"absolute top-4 right-4",children:r.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${F.isActive?"bg-green-500/20 text-green-100":"bg-red-500/20 text-red-100"}`,children:F.isActive?"Active":"Inactive"})}),r.jsxs("div",{className:"flex flex-col h-40 justify-between",children:[r.jsxs("div",{children:[r.jsx(lt,{className:"w-10 h-10 opacity-80"}),r.jsxs("p",{className:"text-white/70 text-sm mt-2",children:[F.cardType," Card"]})]}),r.jsxs("div",{className:"flex justify-between items-end",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-xs opacity-70",children:"Price"}),r.jsx("p",{className:"text-2xl font-bold",children:F.price===0?"FREE":w(F.price)})]}),r.jsxs("div",{className:"text-right",children:[r.jsx("p",{className:"text-xs opacity-70",children:"KYC Level"}),r.jsx("p",{className:"text-lg font-semibold",children:F.requiredKycLevel})]})]})]})]}),r.jsxs("div",{className:"p-4 space-y-4",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"font-semibold text-lg text-gray-900 dark:text-white",children:F.name}),r.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:F.description})]}),O(F).length>0&&r.jsxs("div",{className:"space-y-1",children:[r.jsx("p",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Active Features"}),r.jsx("div",{className:"flex flex-wrap gap-1",children:O(F).map((q,H)=>r.jsx("span",{className:"px-2 py-0.5 bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400 rounded text-xs font-medium",children:q},H))})]}),F.features&&F.features.length>0&&r.jsxs("div",{className:"space-y-1",children:[r.jsx("p",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Description Features"}),r.jsx("div",{className:"flex flex-wrap gap-1",children:F.features.map((q,H)=>r.jsx("span",{className:"px-2 py-0.5 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded text-xs",children:q},H))})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Transaction Fee"}),r.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:F.noTransactionFees?r.jsx("span",{className:"text-green-600 dark:text-green-400",children:"No Fees"}):`${F.transactionFeePercentage}% + ${w(F.transactionFeeFixed)}`})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Daily Limit"}),r.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:w(F.dailyLimit)})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Monthly Limit"}),r.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:w(F.monthlyLimit)})]})]}),r.jsxs("div",{className:"flex items-center gap-2 pt-4 border-t border-gray-200 dark:border-gray-700",children:[r.jsxs("button",{onClick:()=>P(F),className:"flex-1 py-2 text-sm text-gray-600 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-gray-700 rounded-lg flex items-center justify-center gap-2",children:[r.jsx(gh,{className:"w-4 h-4"}),"Edit"]}),r.jsx("button",{onClick:()=>I(F),className:`flex-1 py-2 text-sm rounded-lg flex items-center justify-center gap-2 ${F.isActive?"text-yellow-600 dark:text-yellow-400 hover:bg-yellow-50 dark:hover:bg-yellow-900/20":"text-green-600 dark:text-green-400 hover:bg-green-50 dark:hover:bg-green-900/20"}`,children:F.isActive?r.jsxs(r.Fragment,{children:[r.jsx(HV,{className:"w-4 h-4"}),"Deactivate"]}):r.jsxs(r.Fragment,{children:[r.jsx(Ae,{className:"w-4 h-4"}),"Activate"]})}),r.jsxs("button",{onClick:()=>f(F.id),className:"flex-1 py-2 text-sm text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg flex items-center justify-center gap-2",children:[r.jsx(Js,{className:"w-4 h-4"}),"Delete"]})]})]})]},F.id))}),s&&r.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 p-4",children:r.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-xl w-full max-w-3xl max-h-[90vh] overflow-y-auto",children:r.jsxs("form",{onSubmit:M,children:[r.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200 dark:border-gray-700 sticky top-0 bg-white dark:bg-gray-800 z-10",children:[r.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:n?"Edit Card Program":"Create Card Program"}),r.jsx("button",{type:"button",onClick:()=>a(!1),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg",children:r.jsx(Ct,{className:"w-5 h-5 text-gray-600 dark:text-gray-400"})})]}),r.jsxs("div",{className:"p-4 space-y-6",children:[r.jsx("div",{className:`relative p-6 text-white bg-gradient-to-br ${o.colorGradient} rounded-xl`,children:r.jsxs("div",{className:"flex flex-col h-32 justify-between",children:[r.jsxs("div",{children:[r.jsx(lt,{className:"w-8 h-8 opacity-80"}),r.jsxs("p",{className:"text-white/70 text-sm mt-2",children:[o.cardType," Card"]})]}),r.jsxs("div",{className:"flex justify-between items-end",children:[r.jsx("p",{className:"text-xl font-bold",children:o.price===0?"FREE":`${v}${o.price}`}),r.jsxs("p",{className:"text-sm opacity-70",children:["KYC ",o.requiredKycLevel]})]})]})}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"col-span-2",children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:["Program Name * ",r.jsx("span",{className:"text-gray-400 dark:text-gray-500 font-normal",children:"(for admin reference)"})]}),r.jsx("input",{type:"text",required:!0,value:o.name,onChange:F=>l({...o,name:F.target.value}),placeholder:"e.g., Premium Virtual Card",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]}),r.jsxs("div",{className:"col-span-2",children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:["Description * ",r.jsx("span",{className:"text-gray-400 dark:text-gray-500 font-normal",children:"(shown to users)"})]}),r.jsx("textarea",{required:!0,value:o.description,onChange:F=>l({...o,description:F.target.value}),placeholder:"Describe what this card offers...",rows:2,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Card Type *"}),r.jsxs("select",{value:o.cardType,onChange:F=>l({...o,cardType:F.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[r.jsx("option",{value:"VIRTUAL",children:"Virtual"}),r.jsx("option",{value:"PHYSICAL",children:"Physical"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Card Color"}),r.jsx("select",{value:o.colorGradient,onChange:F=>l({...o,colorGradient:F.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:UPe.map(F=>r.jsx("option",{value:F.value,children:F.name},F.value))})]})]}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-3",children:"Pricing & Fees"}),r.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs text-gray-500 dark:text-gray-400 mb-1",children:"Card Price (SLE)"}),r.jsx("input",{type:"number",min:"0",step:"0.01",value:o.price,onChange:F=>l({...o,price:parseFloat(F.target.value)||0}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs text-gray-500 dark:text-gray-400 mb-1",children:"Transaction Fee (%)"}),r.jsx("input",{type:"number",min:"0",step:"0.01",value:o.transactionFeePercentage,onChange:F=>l({...o,transactionFeePercentage:parseFloat(F.target.value)||0}),disabled:o.noTransactionFees,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 disabled:bg-gray-100 dark:disabled:bg-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs text-gray-500 dark:text-gray-400 mb-1",children:"Fixed Fee (SLE)"}),r.jsx("input",{type:"number",min:"0",step:"0.01",value:o.transactionFeeFixed,onChange:F=>l({...o,transactionFeeFixed:parseFloat(F.target.value)||0}),disabled:o.noTransactionFees,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 disabled:bg-gray-100 dark:disabled:bg-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]})]})]}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-3",children:"Transaction Limits"}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs text-gray-500 dark:text-gray-400 mb-1",children:"Daily Limit (SLE)"}),r.jsx("input",{type:"number",min:"0",value:o.dailyLimit,onChange:F=>l({...o,dailyLimit:parseInt(F.target.value)||0}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs text-gray-500 dark:text-gray-400 mb-1",children:"Monthly Limit (SLE)"}),r.jsx("input",{type:"number",min:"0",value:o.monthlyLimit,onChange:F=>l({...o,monthlyLimit:parseInt(F.target.value)||0}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Required KYC Level"}),r.jsxs("select",{value:o.requiredKycLevel,onChange:F=>l({...o,requiredKycLevel:parseInt(F.target.value)}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[r.jsx("option",{value:1,children:"Level 1 - Basic"}),r.jsx("option",{value:2,children:"Level 2 - Advanced"}),r.jsx("option",{value:3,children:"Level 3 - Enhanced"})]})]}),r.jsx("div",{className:"flex items-center",children:r.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[r.jsx("input",{type:"checkbox",checked:o.isActive,onChange:F=>l({...o,isActive:F.target.checked}),className:"w-4 h-4 text-primary-600 border-gray-300 dark:border-gray-600 rounded"}),r.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Active in marketplace"})]})})]}),r.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-6",children:[r.jsxs("h3",{className:"text-sm font-medium text-gray-900 dark:text-white mb-1 flex items-center gap-2",children:[r.jsx(Tl,{className:"w-4 h-4 text-primary-600"}),"Functional Features"]}),r.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mb-4",children:"These features will be applied to all cards issued under this program"}),r.jsx("div",{className:"space-y-4",children:VPe.map(F=>{const q=o[F.key],H=F.icon;return r.jsx("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg p-4",children:r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx("div",{className:`p-2 rounded-lg ${q?"bg-primary-100 dark:bg-primary-900/30":"bg-gray-100 dark:bg-gray-700"}`,children:r.jsx(H,{className:`w-5 h-5 ${q?"text-primary-600 dark:text-primary-400":"text-gray-400"}`})}),r.jsxs("div",{className:"flex-1",children:[r.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[r.jsx("input",{type:"checkbox",checked:q,onChange:K=>l({...o,[F.key]:K.target.checked}),className:"w-4 h-4 text-primary-600 border-gray-300 dark:border-gray-600 rounded"}),r.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:F.label})]}),r.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:F.description}),q&&(F.hasAmount||F.hasRate)&&r.jsxs("div",{className:"mt-3 flex gap-4",children:[F.hasAmount&&F.amountKey&&r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs text-gray-500 dark:text-gray-400 mb-1",children:F.amountLabel}),r.jsx("input",{type:"number",min:"0",value:o[F.amountKey]||0,onChange:K=>l({...o,[F.amountKey]:parseFloat(K.target.value)||0}),className:"w-32 px-3 py-1.5 text-sm border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]}),F.hasRate&&F.rateKey&&r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs text-gray-500 dark:text-gray-400 mb-1",children:F.rateLabel}),r.jsx("input",{type:"number",min:"0",step:"0.1",max:"100",value:o[F.rateKey]||0,onChange:K=>l({...o,[F.rateKey]:parseFloat(K.target.value)||0}),className:"w-24 px-3 py-1.5 text-sm border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]})]})]})]})},F.key)})})]}),r.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-6",children:[r.jsx("h3",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Display Features"}),r.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mb-3",children:"Marketing text shown to users (does not affect card behavior)"}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex gap-2",children:[r.jsx("input",{type:"text",value:c,onChange:F=>d(F.target.value),onKeyPress:F=>{F.key==="Enter"&&(F.preventDefault(),R())},placeholder:"Add a display feature...",className:"flex-1 px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white"}),r.jsx("button",{type:"button",onClick:R,className:"px-4 py-2 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600",children:r.jsx(sr,{className:"w-4 h-4"})})]}),o.features&&o.features.length>0&&r.jsx("div",{className:"flex flex-wrap gap-2",children:o.features.map((F,q)=>r.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-full text-sm",children:[F,r.jsx("button",{type:"button",onClick:()=>$(q),className:"p-0.5 hover:bg-gray-200 dark:hover:bg-gray-600 rounded-full",children:r.jsx(Ct,{className:"w-3 h-3"})})]},q))})]})]})]}),r.jsxs("div",{className:"flex items-center justify-end gap-3 p-4 border-t border-gray-200 dark:border-gray-700 sticky bottom-0 bg-white dark:bg-gray-800",children:[r.jsx("button",{type:"button",onClick:()=>a(!1),className:"px-4 py-2 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg",children:"Cancel"}),r.jsxs("button",{type:"submit",disabled:C.isPending||E.isPending,className:"px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 disabled:opacity-50 flex items-center gap-2",children:[(C.isPending||E.isPending)&&r.jsx(Ke,{className:"w-4 h-4 animate-spin"}),n?"Save Changes":"Create Card Program"]})]})]})})}),h&&r.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 p-4",children:r.jsx(se,{className:"w-full max-w-md p-6 bg-white dark:bg-gray-800",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"w-12 h-12 bg-red-100 dark:bg-red-900/30 rounded-full flex items-center justify-center mx-auto mb-4",children:r.jsx(Js,{className:"w-6 h-6 text-red-600 dark:text-red-400"})}),r.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:"Delete Card Program?"}),r.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-6",children:"This action cannot be undone. Cards already issued will not be affected."}),r.jsxs("div",{className:"flex gap-3",children:[r.jsx("button",{onClick:()=>f(null),className:"flex-1 px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300",children:"Cancel"}),r.jsxs("button",{onClick:()=>W(h),disabled:_.isPending,className:"flex-1 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 disabled:opacity-50 flex items-center justify-center gap-2",children:[_.isPending&&r.jsx(Ke,{className:"w-4 h-4 animate-spin"}),"Delete"]})]})]})})})]})})}const e9=[{value:1,label:"Basic",description:"Email verification only"},{value:2,label:"Advanced",description:"ID verification required"},{value:3,label:"Enhanced",description:"Full KYC with address proof"}],zPe=[{value:"from-blue-500 to-blue-700",label:"Blue"},{value:"from-purple-600 to-purple-800",label:"Purple"},{value:"from-gray-700 to-gray-900",label:"Dark"},{value:"from-yellow-600 to-yellow-800",label:"Gold"},{value:"from-green-500 to-green-700",label:"Green"},{value:"from-red-500 to-red-700",label:"Red"},{value:"from-indigo-500 to-indigo-700",label:"Indigo"},{value:"from-pink-500 to-pink-700",label:"Pink"}],e1={name:"",description:"",price:0,transactionFeePercentage:0,transactionFeeFixed:0,requiredKycLevel:1,cardType:"VIRTUAL",isActive:!0,dailyLimit:1e3,monthlyLimit:1e4,colorGradient:"from-blue-500 to-blue-700",features:[]};function qPe(){var $;const{data:e,isLoading:t}=cA(!0),s=Yz(),a=Xz(),n=Qz(),[i,o]=p.useState(null);p.useEffect(()=>{cr.getDefaultCurrency().then(o)},[]);const l=(i==null?void 0:i.symbol)||"Le",c=W=>`${l} ${W.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}`,[d,h]=p.useState(!1),[f,x]=p.useState(null),[y,v]=p.useState(e1),[w,N]=p.useState(""),[k,C]=p.useState(null),E=()=>{x(null),v(e1),h(!0)},_=W=>{x(W.id),v({name:W.name,description:W.description,cardImageUrl:W.cardImageUrl,price:W.price,transactionFeePercentage:W.transactionFeePercentage,transactionFeeFixed:W.transactionFeeFixed,requiredKycLevel:W.requiredKycLevel,cardType:W.cardType,isActive:W.isActive,dailyLimit:W.dailyLimit,monthlyLimit:W.monthlyLimit,colorGradient:W.colorGradient,features:W.features}),h(!0)},T=async()=>{try{f?await a.mutateAsync({id:f,data:y}):await s.mutateAsync(y),h(!1),v(e1),x(null)}catch(W){console.error("Failed to save card type:",W)}},A=async W=>{try{await n.mutateAsync(W),C(null)}catch(I){console.error("Failed to delete card type:",I)}},P=()=>{w.trim()&&y.features&&(v({...y,features:[...y.features,w.trim()]}),N(""))},M=W=>{y.features&&v({...y,features:y.features.filter((I,B)=>B!==W)})},R=async W=>{try{await a.mutateAsync({id:W.id,data:{isActive:!W.isActive}})}catch(I){console.error("Failed to toggle card type:",I)}};return r.jsxs(fr,{children:[r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Card Types"}),r.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Configure available card products for users"})]}),r.jsxs(Oe,{onClick:E,children:[r.jsx(sr,{className:"w-4 h-4 mr-2"}),"Add Card Type"]})]}),t?r.jsx("div",{className:"text-center py-12 text-gray-500 dark:text-gray-400",children:"Loading card types..."}):e&&e.length>0?r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:e.map(W=>{var I;return r.jsxs(se,{className:"overflow-hidden",children:[r.jsxs("div",{className:fe("relative aspect-[1.586/1] p-6 text-white bg-gradient-to-br",W.colorGradient,!W.isActive&&"opacity-50"),children:[r.jsxs("div",{className:"flex justify-between items-start",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-xs uppercase tracking-wider opacity-80",children:W.cardType}),r.jsx("p",{className:"font-bold mt-1",children:W.name})]}),r.jsx(lt,{className:"w-8 h-8 opacity-80"})]}),r.jsx("div",{className:"absolute bottom-6 left-6 right-6",children:r.jsxs("div",{className:"flex justify-between items-end",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-xs opacity-70",children:"Price"}),r.jsx("p",{className:"text-lg font-bold",children:W.price===0?"FREE":c(W.price)})]}),r.jsxs("div",{className:"text-right",children:[r.jsx("p",{className:"text-xs opacity-70",children:"KYC Level"}),r.jsx("p",{className:"text-sm",children:(I=e9.find(B=>B.value===W.requiredKycLevel))==null?void 0:I.label})]})]})}),!W.isActive&&r.jsx("div",{className:"absolute inset-0 bg-black/50 flex items-center justify-center",children:r.jsx("span",{className:"bg-red-500 px-3 py-1 rounded-full text-sm font-medium",children:"INACTIVE"})})]}),r.jsxs("div",{className:"p-4 space-y-4",children:[r.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 line-clamp-2",children:W.description}),r.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Transaction Fee"}),r.jsxs("p",{className:"font-medium text-gray-900 dark:text-white",children:[W.transactionFeePercentage,"% + ",c(W.transactionFeeFixed)]})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Daily Limit"}),r.jsxs("p",{className:"font-medium text-gray-900 dark:text-white",children:[l,W.dailyLimit.toLocaleString()]})]})]}),W.features.length>0&&r.jsxs("div",{className:"flex flex-wrap gap-1",children:[W.features.slice(0,3).map((B,O)=>r.jsx("span",{className:"px-2 py-0.5 bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300 text-xs rounded-full",children:B},O)),W.features.length>3&&r.jsxs("span",{className:"px-2 py-0.5 bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300 text-xs rounded-full",children:["+",W.features.length-3," more"]})]}),r.jsxs("div",{className:"flex items-center justify-between pt-2 border-t border-gray-200 dark:border-gray-700",children:[r.jsx("button",{onClick:()=>R(W),className:fe("flex items-center gap-1 text-sm",W.isActive?"text-green-600 dark:text-green-400":"text-gray-400 dark:text-gray-500"),children:W.isActive?r.jsxs(r.Fragment,{children:[r.jsx(Ys,{className:"w-5 h-5"}),"Active"]}):r.jsxs(r.Fragment,{children:[r.jsx(Gs,{className:"w-5 h-5"}),"Inactive"]})}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx(Oe,{variant:"ghost",size:"sm",onClick:()=>_(W),children:r.jsx(gh,{className:"w-4 h-4"})}),r.jsx(Oe,{variant:"ghost",size:"sm",onClick:()=>C(W.id),className:"text-red-500 hover:text-red-600",children:r.jsx(Js,{className:"w-4 h-4"})})]})]})]})]},W.id)})}):r.jsxs(se,{className:"text-center py-12",children:[r.jsx(lt,{className:"w-12 h-12 text-gray-400 dark:text-gray-500 mx-auto mb-4"}),r.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"No card types configured"}),r.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-4",children:"Create your first card type to get started"}),r.jsxs(Oe,{onClick:E,children:[r.jsx(sr,{className:"w-4 h-4 mr-2"}),"Add Card Type"]})]})]}),d&&r.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50 p-4",children:r.jsxs(se,{className:"w-full max-w-2xl max-h-[90vh] overflow-y-auto bg-white dark:bg-gray-800",children:[r.jsx(pa,{className:"border-b border-gray-200 dark:border-gray-700",children:r.jsx(ya,{className:"text-gray-900 dark:text-white",children:f?"Edit Card Type":"Add Card Type"})}),r.jsxs("div",{className:"space-y-4 p-4",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsx(Rh,{label:"Card Name",value:y.name,onChange:W=>v({...y,name:W.target.value}),placeholder:"e.g., Premium Virtual Card"}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Card Type"}),r.jsxs("select",{value:y.cardType,onChange:W=>v({...y,cardType:W.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[r.jsx("option",{value:"VIRTUAL",children:"Virtual Card"}),r.jsx("option",{value:"PHYSICAL",children:"Physical Card"})]})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Description"}),r.jsx("textarea",{value:y.description,onChange:W=>v({...y,description:W.target.value}),placeholder:"Describe the card benefits and features...",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white",rows:3})]}),r.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:[r.jsx(Cr,{className:"w-4 h-4 inline mr-1"}),"Card Price"]}),r.jsx("input",{type:"number",step:"0.01",min:"0",value:y.price,onChange:W=>v({...y,price:parseFloat(W.target.value)||0}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:[r.jsx(If,{className:"w-4 h-4 inline mr-1"}),"Fee %"]}),r.jsx("input",{type:"number",step:"0.01",min:"0",value:y.transactionFeePercentage,onChange:W=>v({...y,transactionFeePercentage:parseFloat(W.target.value)||0}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:[r.jsx(Cr,{className:"w-4 h-4 inline mr-1"}),"Fixed Fee"]}),r.jsx("input",{type:"number",step:"0.01",min:"0",value:y.transactionFeeFixed,onChange:W=>v({...y,transactionFeeFixed:parseFloat(W.target.value)||0}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Daily Limit ($)"}),r.jsx("input",{type:"number",min:"0",value:y.dailyLimit,onChange:W=>v({...y,dailyLimit:parseFloat(W.target.value)||0}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Monthly Limit ($)"}),r.jsx("input",{type:"number",min:"0",value:y.monthlyLimit,onChange:W=>v({...y,monthlyLimit:parseFloat(W.target.value)||0}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:[r.jsx(rr,{className:"w-4 h-4 inline mr-1"}),"Required KYC Level"]}),r.jsx("select",{value:y.requiredKycLevel,onChange:W=>v({...y,requiredKycLevel:parseInt(W.target.value)}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:e9.map(W=>r.jsxs("option",{value:W.value,children:[W.label," - ",W.description]},W.value))})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Card Color"}),r.jsx("div",{className:"flex flex-wrap gap-2",children:zPe.map(W=>r.jsx("button",{type:"button",onClick:()=>v({...y,colorGradient:W.value}),className:fe("w-8 h-8 rounded-full bg-gradient-to-br border-2",W.value,y.colorGradient===W.value?"border-primary-500 ring-2 ring-primary-200":"border-transparent"),title:W.label},W.value))})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Features"}),r.jsxs("div",{className:"flex gap-2 mb-2",children:[r.jsx("input",{type:"text",value:w,onChange:W=>N(W.target.value),onKeyDown:W=>W.key==="Enter"&&(W.preventDefault(),P()),placeholder:"Add a feature...",className:"flex-1 px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white"}),r.jsx(Oe,{type:"button",variant:"outline",onClick:P,children:"Add"})]}),r.jsx("div",{className:"flex flex-wrap gap-2",children:($=y.features)==null?void 0:$.map((W,I)=>r.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-full text-sm",children:[W,r.jsx("button",{type:"button",onClick:()=>M(I),className:"hover:text-red-500",children:r.jsx(Ct,{className:"w-3 h-3"})})]},I))})]}),r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("button",{type:"button",onClick:()=>v({...y,isActive:!y.isActive}),className:fe("relative inline-flex h-6 w-11 items-center rounded-full transition-colors",y.isActive?"bg-primary-600":"bg-gray-300 dark:bg-gray-600"),children:r.jsx("span",{className:fe("inline-block h-4 w-4 transform rounded-full bg-white transition-transform",y.isActive?"translate-x-6":"translate-x-1")})}),r.jsx("label",{className:"text-sm text-gray-700 dark:text-gray-300",children:y.isActive?"Active - visible to users":"Inactive - hidden from users"})]}),r.jsxs("div",{className:"flex gap-3 pt-4 border-t border-gray-200 dark:border-gray-700",children:[r.jsx(Oe,{variant:"outline",className:"flex-1",onClick:()=>{h(!1),v(e1),x(null)},children:"Cancel"}),r.jsx(Oe,{className:"flex-1",onClick:T,isLoading:s.isPending||a.isPending,disabled:!y.name||!y.description,children:f?"Update Card Type":"Create Card Type"})]})]})]})}),k&&r.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:r.jsxs(se,{className:"w-full max-w-md p-6 bg-white dark:bg-gray-800",children:[r.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white mb-2",children:"Delete Card Type"}),r.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:"Are you sure you want to delete this card type? This action cannot be undone."}),r.jsxs("div",{className:"flex gap-3",children:[r.jsx(Oe,{variant:"outline",className:"flex-1",onClick:()=>C(null),children:"Cancel"}),r.jsx(Oe,{className:"flex-1 bg-red-600 hover:bg-red-700",onClick:()=>A(k),isLoading:n.isPending,children:"Delete"})]})]})})]})}const HPe=[{value:void 0,label:"All Orders"},{value:"PENDING",label:"Pending"},{value:"GENERATED",label:"Generated"},{value:"ACTIVATED",label:"Activated"},{value:"REJECTED",label:"Rejected"}];function KPe(){var K,V,z,G,te,he,ne,ce,xe,_e,oe,ie,ge,Z,Q;const[e,t]=p.useState(null);p.useEffect(()=>{cr.getDefaultCurrency().then(t)},[]);const s=(e==null?void 0:e.symbol)||"Le",a=re=>`${s} ${re.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}`,[n,i]=p.useState(void 0),[o,l]=p.useState(""),[c,d]=p.useState(null),[h,f]=p.useState(!1),[x,y]=p.useState(!1),[v,w]=p.useState(!1),[N,k]=p.useState(""),[C,E]=p.useState(""),[_,T]=p.useState(""),{data:A,isLoading:P}=ufe(n),M=mfe(),R=ffe(),$=xfe(),W=re=>{const pe={PENDING:{icon:r.jsx(_t,{className:"w-3 h-3"}),className:"bg-yellow-100 dark:bg-yellow-900/30 text-yellow-700 dark:text-yellow-400",label:"Pending Review"},APPROVED:{icon:r.jsx(Ae,{className:"w-3 h-3"}),className:"bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-400",label:"Approved"},REJECTED:{icon:r.jsx(Wt,{className:"w-3 h-3"}),className:"bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-400",label:"Rejected"},GENERATED:{icon:r.jsx(lt,{className:"w-3 h-3"}),className:"bg-purple-100 dark:bg-purple-900/30 text-purple-700 dark:text-purple-400",label:"Card Generated"},ACTIVATED:{icon:r.jsx(Ae,{className:"w-3 h-3"}),className:"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400",label:"Activated"},CANCELLED:{icon:r.jsx(Wt,{className:"w-3 h-3"}),className:"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300",label:"Cancelled"}},Se=pe[re]||pe.PENDING;return r.jsxs("span",{className:fe("inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium",Se.className),children:[Se.icon," ",Se.label]})},I=re=>{d(re),f(!0)},B=async()=>{if(c)try{await M.mutateAsync({orderId:c.id,notes:_||void 0}),f(!1),T("")}catch(re){console.error("Failed to generate card:",re)}},O=async()=>{if(!(!c||!N.trim()))try{await R.mutateAsync({orderId:c.id,notes:N}),y(!1),f(!1),k("")}catch(re){console.error("Failed to reject order:",re)}},F=async()=>{if(!(!c||!C.trim()))try{await $.mutateAsync({orderId:c.id,trackingNumber:C}),w(!1),E("")}catch(re){console.error("Failed to update shipping:",re)}},q=A==null?void 0:A.filter(re=>{var Se,je,Fe,ke,Ve,le,me,ve,Ze;if(!o)return!0;const pe=o.toLowerCase();return((je=(Se=re.user)==null?void 0:Se.firstName)==null?void 0:je.toLowerCase().includes(pe))||((ke=(Fe=re.user)==null?void 0:Fe.lastName)==null?void 0:ke.toLowerCase().includes(pe))||((le=(Ve=re.user)==null?void 0:Ve.email)==null?void 0:le.toLowerCase().includes(pe))||((ve=(me=re.cardType)==null?void 0:me.name)==null?void 0:ve.toLowerCase().includes(pe))||((Ze=re.cardNumber)==null?void 0:Ze.includes(o))}),H={pending:(A==null?void 0:A.filter(re=>re.status==="PENDING").length)||0,generated:(A==null?void 0:A.filter(re=>re.status==="GENERATED").length)||0,activated:(A==null?void 0:A.filter(re=>re.status==="ACTIVATED").length)||0,rejected:(A==null?void 0:A.filter(re=>re.status==="REJECTED").length)||0};return r.jsxs(fr,{children:[r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Card Orders"}),r.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Review and manage card purchase orders"})]}),r.jsxs(Oe,{variant:"outline",children:[r.jsx(gs,{className:"w-4 h-4 mr-2"}),"Export Orders"]})]}),r.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[r.jsx(Be,{className:"p-4",delay:0,children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"p-2 bg-yellow-100 dark:bg-yellow-900/30 rounded-lg",children:r.jsx(_t,{className:"w-5 h-5 text-yellow-600 dark:text-yellow-400"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Pending"}),r.jsx("p",{className:"text-2xl font-bold text-yellow-600 dark:text-yellow-400",children:H.pending})]})]})}),r.jsx(Be,{className:"p-4",delay:.1,children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"p-2 bg-purple-100 dark:bg-purple-900/30 rounded-lg",children:r.jsx(lt,{className:"w-5 h-5 text-purple-600 dark:text-purple-400"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Generated"}),r.jsx("p",{className:"text-2xl font-bold text-purple-600 dark:text-purple-400",children:H.generated})]})]})}),r.jsx(Be,{className:"p-4",delay:.2,children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"p-2 bg-green-100 dark:bg-green-900/30 rounded-lg",children:r.jsx(Ae,{className:"w-5 h-5 text-green-600 dark:text-green-400"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Activated"}),r.jsx("p",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:H.activated})]})]})}),r.jsx(Be,{className:"p-4",delay:.3,children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"p-2 bg-red-100 dark:bg-red-900/30 rounded-lg",children:r.jsx(Wt,{className:"w-5 h-5 text-red-600 dark:text-red-400"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Rejected"}),r.jsx("p",{className:"text-2xl font-bold text-red-600 dark:text-red-400",children:H.rejected})]})]})})]}),r.jsx(Be,{className:"p-4",delay:.4,children:r.jsxs("div",{className:"flex flex-wrap items-center gap-4",children:[r.jsx("div",{className:"flex gap-1 p-1 bg-gray-100 dark:bg-gray-700 rounded-lg",children:HPe.map(re=>r.jsx("button",{onClick:()=>i(re.value),className:fe("px-3 py-1.5 text-sm font-medium rounded-md transition-colors",n===re.value?"bg-white dark:bg-gray-600 text-gray-900 dark:text-white shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white"),children:re.label},re.value||"all"))}),r.jsx("div",{className:"flex-1 min-w-64",children:r.jsxs("div",{className:"relative",children:[r.jsx(Nr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),r.jsx("input",{type:"text",placeholder:"Search by customer, card type, or card number...",value:o,onChange:re=>l(re.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]})})]})}),r.jsx(Be,{className:"overflow-hidden",delay:.5,children:P?r.jsx("div",{className:"text-center py-12 text-gray-500 dark:text-gray-400",children:"Loading orders..."}):q&&q.length>0?r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700/50 border-b border-gray-200 dark:border-gray-700",children:r.jsxs("tr",{children:[r.jsx("th",{className:"text-left px-6 py-3 text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Customer"}),r.jsx("th",{className:"text-left px-6 py-3 text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Card Type"}),r.jsx("th",{className:"text-left px-6 py-3 text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Amount"}),r.jsx("th",{className:"text-left px-6 py-3 text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Card Number"}),r.jsx("th",{className:"text-left px-6 py-3 text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Status"}),r.jsx("th",{className:"text-left px-6 py-3 text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Date"}),r.jsx("th",{className:"text-left px-6 py-3 text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Actions"})]})}),r.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:q.map(re=>{var pe,Se,je,Fe,ke,Ve,le;return r.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700/50",children:[r.jsx("td",{className:"px-6 py-4",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-10 h-10 bg-gray-200 dark:bg-gray-700 rounded-full flex items-center justify-center",children:r.jsx(br,{className:"w-5 h-5 text-gray-500 dark:text-gray-400"})}),r.jsxs("div",{children:[r.jsxs("p",{className:"font-medium text-sm text-gray-900 dark:text-white",children:[(pe=re.user)==null?void 0:pe.firstName," ",(Se=re.user)==null?void 0:Se.lastName]}),r.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:(je=re.user)==null?void 0:je.email})]})]})}),r.jsx("td",{className:"px-6 py-4",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:fe("w-8 h-5 rounded bg-gradient-to-br",((Fe=re.cardType)==null?void 0:Fe.colorGradient)||"from-blue-500 to-blue-700")}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:(ke=re.cardType)==null?void 0:ke.name}),r.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:(Ve=re.cardType)==null?void 0:Ve.cardType})]})]})}),r.jsx("td",{className:"px-6 py-4",children:r.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:a(re.amountPaid)})}),r.jsx("td",{className:"px-6 py-4",children:re.cardNumber?r.jsx("span",{className:"font-mono text-sm text-gray-900 dark:text-white",children:re.cardNumber}):r.jsx("span",{className:"text-gray-400 dark:text-gray-500 text-sm",children:"Not generated"})}),r.jsx("td",{className:"px-6 py-4",children:W(re.status)}),r.jsx("td",{className:"px-6 py-4",children:r.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:new Date(re.createdAt).toLocaleDateString()})}),r.jsx("td",{className:"px-6 py-4",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Oe,{variant:"ghost",size:"sm",onClick:()=>I(re),children:r.jsx(ir,{className:"w-4 h-4"})}),re.status==="GENERATED"&&((le=re.cardType)==null?void 0:le.cardType)==="PHYSICAL"&&r.jsx(Oe,{variant:"ghost",size:"sm",onClick:()=>{d(re),w(!0)},children:r.jsx(O1,{className:"w-4 h-4"})})]})})]},re.id)})})]})}):r.jsxs("div",{className:"text-center py-12",children:[r.jsx(lt,{className:"w-12 h-12 text-gray-400 dark:text-gray-500 mx-auto mb-4"}),r.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"No orders found"}),r.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Card orders will appear here when users purchase cards"})]})})]}),h&&c&&r.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50 p-4",children:r.jsxs(se,{className:"w-full max-w-3xl max-h-[90vh] overflow-y-auto bg-white dark:bg-gray-800",children:[r.jsx(pa,{className:"border-b border-gray-200 dark:border-gray-700",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx(ya,{className:"text-gray-900 dark:text-white",children:"Order Details"}),W(c.status)]})}),r.jsxs("div",{className:"p-6 space-y-6",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[r.jsxs("div",{children:[r.jsxs("h3",{className:"text-sm font-medium text-gray-900 dark:text-white mb-3 flex items-center gap-2",children:[r.jsx(br,{className:"w-4 h-4"}),"Customer Information"]}),r.jsxs("div",{className:"space-y-2 text-sm",children:[r.jsxs("p",{className:"text-gray-700 dark:text-gray-300",children:[r.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Name:"})," ",r.jsxs("span",{className:"font-medium text-gray-900 dark:text-white",children:[(K=c.user)==null?void 0:K.firstName," ",(V=c.user)==null?void 0:V.lastName]})]}),r.jsxs("p",{className:"flex items-center gap-1 text-gray-700 dark:text-gray-300",children:[r.jsx(On,{className:"w-3 h-3 text-gray-400"}),(z=c.user)==null?void 0:z.email]}),((G=c.user)==null?void 0:G.phone)&&r.jsxs("p",{className:"flex items-center gap-1 text-gray-700 dark:text-gray-300",children:[r.jsx(Ss,{className:"w-3 h-3 text-gray-400"}),c.user.phone]}),r.jsxs("p",{className:"flex items-center gap-1 text-gray-700 dark:text-gray-300",children:[r.jsx(rr,{className:"w-3 h-3 text-gray-400"}),"KYC: ",((te=c.user)==null?void 0:te.kycStatus)||"Pending",((he=c.user)==null?void 0:he.kycTier)&&` (Tier ${c.user.kycTier})`]})]})]}),r.jsxs("div",{children:[r.jsxs("h3",{className:"text-sm font-medium text-gray-900 dark:text-white mb-3 flex items-center gap-2",children:[r.jsx(lt,{className:"w-4 h-4"}),"Card Information"]}),r.jsxs("div",{className:"space-y-2 text-sm",children:[r.jsxs("p",{className:"text-gray-700 dark:text-gray-300",children:[r.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Card Type:"})," ",r.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:(ne=c.cardType)==null?void 0:ne.name})]}),r.jsxs("p",{className:"text-gray-700 dark:text-gray-300",children:[r.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Type:"})," ",(ce=c.cardType)==null?void 0:ce.cardType]}),r.jsxs("p",{className:"text-gray-700 dark:text-gray-300",children:[r.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Price:"})," ",r.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:a(c.amountPaid)})]}),c.cardNumber&&r.jsxs("p",{className:"text-gray-700 dark:text-gray-300",children:[r.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Card Number:"})," ",r.jsx("span",{className:"font-mono text-gray-900 dark:text-white",children:c.cardNumber})]})]})]})]}),c.cardType&&r.jsx("div",{className:"flex justify-center",children:r.jsxs("div",{className:fe("w-80 aspect-[1.586/1] rounded-xl p-6 text-white bg-gradient-to-br shadow-lg",c.cardType.colorGradient),children:[r.jsxs("div",{className:"flex justify-between items-start",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-xs uppercase tracking-wider opacity-80",children:c.cardType.cardType}),r.jsx("p",{className:"font-bold mt-1",children:c.cardType.name})]}),r.jsx(lt,{className:"w-8 h-8 opacity-80"})]}),r.jsxs("div",{className:"absolute bottom-6 left-6 right-6",children:[r.jsx("p",{className:"text-lg tracking-widest font-mono",children:c.cardNumber||"  "}),r.jsxs("p",{className:"text-sm mt-2 opacity-80",children:[(_e=(xe=c.user)==null?void 0:xe.firstName)==null?void 0:_e.toUpperCase()," ",(ie=(oe=c.user)==null?void 0:oe.lastName)==null?void 0:ie.toUpperCase()]})]})]})}),r.jsxs("div",{className:"flex items-center gap-4 p-4 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:[r.jsx(Rt,{className:"w-5 h-5 text-gray-500 dark:text-gray-400"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Payment from wallet"}),r.jsxs("p",{className:"font-medium text-gray-900 dark:text-white",children:[(ge=c.wallet)==null?void 0:ge.currency," Wallet - Balance: ",a(((Z=c.wallet)==null?void 0:Z.balance)||0)]})]})]}),((Q=c.cardType)==null?void 0:Q.cardType)==="PHYSICAL"&&c.shippingAddress&&r.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:[r.jsxs("h3",{className:"text-sm font-medium text-gray-900 dark:text-white mb-2 flex items-center gap-2",children:[r.jsx(O1,{className:"w-4 h-4"}),"Shipping Address"]}),r.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:[c.shippingAddress.street,", ",c.shippingAddress.city,","," ",c.shippingAddress.state," ",c.shippingAddress.postalCode,","," ",c.shippingAddress.country]}),c.trackingNumber&&r.jsxs("p",{className:"text-sm mt-2 text-gray-700 dark:text-gray-300",children:[r.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Tracking:"})," ",r.jsx("span",{className:"font-mono text-gray-900 dark:text-white",children:c.trackingNumber})]})]}),c.qrCodeData&&r.jsxs("div",{className:"flex items-center gap-4 p-4 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:[r.jsx(Vs,{className:"w-8 h-8 text-gray-500 dark:text-gray-400"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"QR Code for activation"}),r.jsx("p",{className:"font-mono text-xs text-gray-400 dark:text-gray-500 truncate max-w-md",children:c.qrCodeData})]})]}),c.reviewNotes&&r.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:[r.jsx("h3",{className:"text-sm font-medium text-gray-900 dark:text-white mb-2",children:"Review Notes"}),r.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:c.reviewNotes}),c.reviewedAt&&r.jsxs("p",{className:"text-xs text-gray-400 dark:text-gray-500 mt-2",children:["Reviewed on ",new Date(c.reviewedAt).toLocaleString()]})]}),c.status==="PENDING"&&r.jsxs("div",{className:"space-y-4 pt-4 border-t border-gray-200 dark:border-gray-700",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Notes (optional)"}),r.jsx("textarea",{value:_,onChange:re=>T(re.target.value),placeholder:"Add any notes about this order...",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white",rows:2})]}),r.jsxs("div",{className:"flex gap-3",children:[r.jsx(Oe,{variant:"outline",className:"flex-1",onClick:()=>f(!1),children:"Cancel"}),r.jsxs(Oe,{variant:"outline",className:"flex-1 text-red-600 border-red-300 hover:bg-red-50",onClick:()=>y(!0),children:[r.jsx(Wt,{className:"w-4 h-4 mr-2"}),"Reject"]}),r.jsxs(Oe,{className:"flex-1 bg-green-600 hover:bg-green-700",onClick:B,isLoading:M.isPending,children:[r.jsx(lt,{className:"w-4 h-4 mr-2"}),"Generate Card"]})]})]}),c.status!=="PENDING"&&r.jsx("div",{className:"flex justify-end pt-4 border-t border-gray-200 dark:border-gray-700",children:r.jsx(Oe,{variant:"outline",onClick:()=>f(!1),children:"Close"})})]})]})}),x&&r.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center bg-black bg-opacity-50",children:r.jsxs(se,{className:"w-full max-w-md p-6 bg-white dark:bg-gray-800",children:[r.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white mb-2",children:"Reject Order"}),r.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:"This will refund the customer and reject their card order. Please provide a reason."}),r.jsx("textarea",{value:N,onChange:re=>k(re.target.value),placeholder:"Reason for rejection...",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 mb-4 bg-white dark:bg-gray-700 text-gray-900 dark:text-white",rows:3}),r.jsxs("div",{className:"flex gap-3",children:[r.jsx(Oe,{variant:"outline",className:"flex-1",onClick:()=>y(!1),children:"Cancel"}),r.jsx(Oe,{className:"flex-1 bg-red-600 hover:bg-red-700",onClick:O,isLoading:R.isPending,disabled:!N.trim(),children:"Reject & Refund"})]})]})}),v&&r.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center bg-black bg-opacity-50",children:r.jsxs(se,{className:"w-full max-w-md p-6 bg-white dark:bg-gray-800",children:[r.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white mb-2",children:"Add Shipping Info"}),r.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:"Enter the tracking number for the physical card shipment."}),r.jsx(Rh,{label:"Tracking Number",value:C,onChange:re=>E(re.target.value),placeholder:"e.g., 1Z999AA10123456784",className:"mb-4"}),r.jsxs("div",{className:"flex gap-3",children:[r.jsx(Oe,{variant:"outline",className:"flex-1",onClick:()=>w(!1),children:"Cancel"}),r.jsxs(Oe,{className:"flex-1",onClick:F,isLoading:$.isPending,disabled:!C.trim(),children:[r.jsx(O1,{className:"w-4 h-4 mr-2"}),"Update Shipping"]})]})]})})]})}function GPe(){const[e,t]=p.useState("all"),[s,a]=p.useState("all"),[n,i]=p.useState(""),[o,l]=p.useState(!0),[c,d]=p.useState({totalTransactions:0,volume:0,pending:0,failed:0,avgValue:0,successRate:0}),[h,f]=p.useState([]),[x,y]=p.useState(null);p.useEffect(()=>{cr.getDefaultCurrency().then(y),w()},[]);const v=(x==null?void 0:x.symbol)||"",w=async()=>{l(!0);try{const{data:_,error:T}=await X.from("transactions").select("*").order("created_at",{ascending:!1}).limit(100);if(T){console.error("Error fetching transactions:",T),f([]),l(!1);return}const A=[...new Set((_==null?void 0:_.map(H=>H.wallet_id).filter(Boolean))||[])],{data:P}=await X.from("wallets").select("id, user_id").in("id",A),M=new Map((P==null?void 0:P.map(H=>[H.id,H.user_id]))||[]),R=[...new Set((P==null?void 0:P.map(H=>H.user_id).filter(Boolean))||[])],{data:$}=await X.from("users").select("id, first_name, last_name, email, phone").in("id",R),W=new Map(($==null?void 0:$.map(H=>[H.id,H]))||[]),I=(_||[]).map(H=>{var te;const K=M.get(H.wallet_id),V=K?W.get(K):null,z=H.metadata||{};let G="Unknown";return V?G=`${V.first_name||""} ${V.last_name||""}`.trim()||V.email||"Unknown":z.sender_name?G=z.sender_name:z.recipient_name&&(G=z.recipient_name),{id:H.id,type:(H.type||"transfer").toLowerCase(),cardId:H.card_id||"",cardLast4:"****",customerId:K||H.wallet_id||"",customerName:G,amount:Math.abs(H.amount),currency:H.currency||"SLE",merchantName:H.description||H.type,merchantCategory:H.type,status:(H.status||"completed").toLowerCase(),direction:H.amount>=0?"credit":"debit",createdAt:H.created_at,settledAt:((te=H.status)==null?void 0:te.toLowerCase())==="completed"?H.created_at:null}});f(I);const B=I.filter(H=>H.status==="completed").length,O=I.filter(H=>H.status==="pending").length,F=I.filter(H=>H.status==="failed").length,q=I.reduce((H,K)=>H+K.amount,0);d({totalTransactions:I.length,volume:q,pending:O,failed:F,avgValue:I.length>0?q/I.length:0,successRate:I.length>0?B/I.length*100:0})}catch(_){console.error("Error fetching transactions:",_)}finally{l(!1)}},N=_=>{switch(_){case"authorization":return r.jsx("span",{className:"px-2 py-0.5 rounded text-xs font-medium bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-400",children:"Auth"});case"clearing":return r.jsx("span",{className:"px-2 py-0.5 rounded text-xs font-medium bg-purple-100 dark:bg-purple-900/30 text-purple-700 dark:text-purple-400",children:"Clearing"});case"refund":return r.jsx("span",{className:"px-2 py-0.5 rounded text-xs font-medium bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400",children:"Refund"});case"reversal":return r.jsx("span",{className:"px-2 py-0.5 rounded text-xs font-medium bg-orange-100 dark:bg-orange-900/30 text-orange-700 dark:text-orange-400",children:"Reversal"});case"transfer":return r.jsx("span",{className:"px-2 py-0.5 rounded text-xs font-medium bg-cyan-100 dark:bg-cyan-900/30 text-cyan-700 dark:text-cyan-400",children:"Transfer"});default:return null}},k=_=>{switch(_){case"completed":return r.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400",children:[r.jsx(Ae,{className:"w-3 h-3"})," Completed"]});case"pending":return r.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium bg-yellow-100 dark:bg-yellow-900/30 text-yellow-700 dark:text-yellow-400",children:[r.jsx(_t,{className:"w-3 h-3"})," Pending"]});case"failed":return r.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-400",children:[r.jsx(Wt,{className:"w-3 h-3"})," Failed"]});case"reversed":return r.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium bg-orange-100 dark:bg-orange-900/30 text-orange-700 dark:text-orange-400",children:[r.jsx(Ot,{className:"w-3 h-3"})," Reversed"]});default:return null}},C=(_,T)=>new Intl.NumberFormat("en-US",{style:"currency",currency:T}).format(_),E=h.filter(_=>!(e!=="all"&&_.type!==e||s!=="all"&&_.status!==s||n&&!_.customerName.toLowerCase().includes(n.toLowerCase())&&!_.id.toLowerCase().includes(n.toLowerCase())&&!_.merchantName.toLowerCase().includes(n.toLowerCase())));return r.jsx(fr,{children:r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Transactions"}),r.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"View and manage all transactions"})]}),r.jsxs("div",{className:"flex gap-3",children:[r.jsxs("button",{className:"px-4 py-2 text-sm bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300 flex items-center gap-2",children:[r.jsx(Ot,{className:"w-4 h-4"}),"Refresh"]}),r.jsxs("button",{className:"px-4 py-2 text-sm bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300 flex items-center gap-2",children:[r.jsx(gs,{className:"w-4 h-4"}),"Export"]})]})]}),r.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-6 gap-4",children:[r.jsxs(Be,{className:"p-4",delay:0,children:[r.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Total Transactions"}),r.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:c.totalTransactions.toLocaleString()})]}),r.jsxs(Be,{className:"p-4",delay:.1,children:[r.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Total Volume"}),r.jsxs("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:[v,(c.volume/1e6).toFixed(2),"M"]})]}),r.jsxs(Be,{className:"p-4",delay:.2,children:[r.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Pending"}),r.jsx("p",{className:"text-2xl font-bold text-yellow-600 dark:text-yellow-400",children:c.pending})]}),r.jsxs(Be,{className:"p-4",delay:.3,children:[r.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Failed"}),r.jsx("p",{className:"text-2xl font-bold text-red-600 dark:text-red-400",children:c.failed})]}),r.jsxs(Be,{className:"p-4",delay:.4,children:[r.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Avg Transaction"}),r.jsxs("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:[v,c.avgValue.toFixed(2)]})]}),r.jsxs(Be,{className:"p-4",delay:.5,children:[r.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Success Rate"}),r.jsxs("p",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:[c.successRate,"%"]})]})]}),r.jsx(se,{className:"p-4",children:r.jsxs("div",{className:"flex flex-wrap items-center gap-4",children:[r.jsx("div",{className:"flex-1 min-w-64",children:r.jsxs("div",{className:"relative",children:[r.jsx(Nr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),r.jsx("input",{type:"text",placeholder:"Search by ID, customer, or merchant...",value:n,onChange:_=>i(_.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-400"})]})}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(el,{className:"w-4 h-4 text-gray-400"}),r.jsxs("div",{className:"relative",children:[r.jsxs("select",{value:e,onChange:_=>t(_.target.value),className:"appearance-none border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 pr-8 text-sm focus:ring-2 focus:ring-primary-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[r.jsx("option",{value:"all",children:"All Types"}),r.jsx("option",{value:"authorization",children:"Authorization"}),r.jsx("option",{value:"clearing",children:"Clearing"}),r.jsx("option",{value:"refund",children:"Refund"}),r.jsx("option",{value:"transfer",children:"Transfer"})]}),r.jsx(ys,{className:"absolute right-2 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400 pointer-events-none"})]}),r.jsxs("div",{className:"relative",children:[r.jsxs("select",{value:s,onChange:_=>a(_.target.value),className:"appearance-none border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 pr-8 text-sm focus:ring-2 focus:ring-primary-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[r.jsx("option",{value:"all",children:"All Status"}),r.jsx("option",{value:"completed",children:"Completed"}),r.jsx("option",{value:"pending",children:"Pending"}),r.jsx("option",{value:"failed",children:"Failed"})]}),r.jsx(ys,{className:"absolute right-2 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400 pointer-events-none"})]})]})]})}),r.jsxs(se,{className:"overflow-hidden",children:[r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700/50 border-b border-gray-200 dark:border-gray-700",children:r.jsxs("tr",{children:[r.jsx("th",{className:"text-left px-6 py-3 text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Transaction"}),r.jsx("th",{className:"text-left px-6 py-3 text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Customer"}),r.jsx("th",{className:"text-left px-6 py-3 text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Card"}),r.jsx("th",{className:"text-left px-6 py-3 text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Amount"}),r.jsx("th",{className:"text-left px-6 py-3 text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Merchant"}),r.jsx("th",{className:"text-left px-6 py-3 text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Type"}),r.jsx("th",{className:"text-left px-6 py-3 text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Status"}),r.jsx("th",{className:"text-left px-6 py-3 text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Time"}),r.jsx("th",{className:"text-left px-6 py-3 text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Actions"})]})}),r.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:E.map(_=>r.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700/50",children:[r.jsx("td",{className:"px-6 py-4",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:`p-1 rounded ${_.direction==="debit"?"bg-red-100 dark:bg-red-900/30":"bg-green-100 dark:bg-green-900/30"}`,children:_.direction==="debit"?r.jsx(Rr,{className:"w-4 h-4 text-red-600 dark:text-red-400"}):r.jsx(An,{className:"w-4 h-4 text-green-600 dark:text-green-400"})}),r.jsx("span",{className:"font-mono text-sm text-gray-900 dark:text-white",children:_.id})]})}),r.jsx("td",{className:"px-6 py-4",children:r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-sm text-gray-900 dark:text-white",children:_.customerName}),r.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400 font-mono",children:_.customerId})]})}),r.jsx("td",{className:"px-6 py-4",children:r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(lt,{className:"w-4 h-4 text-gray-400"}),r.jsxs("span",{className:"font-mono text-sm text-gray-700 dark:text-gray-300",children:["****",_.cardLast4]})]})}),r.jsx("td",{className:"px-6 py-4",children:r.jsx("div",{className:"flex items-center gap-1",children:r.jsxs("span",{className:`font-medium ${_.direction==="credit"?"text-green-600 dark:text-green-400":"text-gray-900 dark:text-white"}`,children:[_.direction==="credit"?"+":"-",C(_.amount,_.currency)]})})}),r.jsx("td",{className:"px-6 py-4",children:r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:_.merchantName}),r.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:_.merchantCategory})]})}),r.jsx("td",{className:"px-6 py-4",children:N(_.type)}),r.jsx("td",{className:"px-6 py-4",children:k(_.status)}),r.jsx("td",{className:"px-6 py-4",children:r.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:new Date(_.createdAt).toLocaleTimeString()})}),r.jsx("td",{className:"px-6 py-4",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("button",{className:"p-1 bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-400 rounded hover:bg-gray-200 dark:hover:bg-gray-600",title:"View Details",children:r.jsx(ir,{className:"w-4 h-4"})}),_.status==="completed"&&_.type!=="refund"&&r.jsx("button",{className:"p-1 bg-orange-100 dark:bg-orange-900/30 text-orange-600 dark:text-orange-400 rounded hover:bg-orange-200 dark:hover:bg-orange-900/50",title:"Refund",children:r.jsx(Ot,{className:"w-4 h-4"})}),_.status==="failed"&&r.jsx("button",{className:"p-1 bg-yellow-100 dark:bg-yellow-900/30 text-yellow-600 dark:text-yellow-400 rounded hover:bg-yellow-200 dark:hover:bg-yellow-900/50",title:"Review",children:r.jsx(Ht,{className:"w-4 h-4"})})]})})]},_.id))})]})}),r.jsxs("div",{className:"px-6 py-4 border-t border-gray-200 dark:border-gray-700 flex items-center justify-between",children:[r.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Showing 1 to ",E.length," of ",c.totalTransactions," transactions"]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("button",{className:"px-3 py-1 text-sm bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded hover:bg-gray-50 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300 disabled:opacity-50",disabled:!0,children:"Previous"}),r.jsx("button",{className:"px-3 py-1 text-sm bg-primary-600 text-white rounded",children:"1"}),r.jsx("button",{className:"px-3 py-1 text-sm bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded hover:bg-gray-50 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300",children:"2"}),r.jsx("button",{className:"px-3 py-1 text-sm bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded hover:bg-gray-50 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300",children:"3"}),r.jsx("button",{className:"px-3 py-1 text-sm bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded hover:bg-gray-50 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300",children:"Next"})]})]})]})]})})}function YPe(){const[e,t]=p.useState("all"),[s,a]=p.useState(""),[n]=p.useState({totalDisputes:0,openDisputes:0,underReview:0,evidenceRequired:0,won:0,lost:0,disputeRate:0,avgResolutionTime:0}),[i]=p.useState([]),o=f=>{switch(f){case"open":return r.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium bg-yellow-100 dark:bg-yellow-900/30 text-yellow-700 dark:text-yellow-400",children:[r.jsx(_t,{className:"w-3 h-3"})," Open"]});case"under_review":return r.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-400",children:[r.jsx(ir,{className:"w-3 h-3"})," Under Review"]});case"evidence_required":return r.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium bg-orange-100 dark:bg-orange-900/30 text-orange-700 dark:text-orange-400",children:[r.jsx(ao,{className:"w-3 h-3"})," Evidence Required"]});case"won":return r.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400",children:[r.jsx(Ae,{className:"w-3 h-3"})," Won"]});case"lost":return r.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-400",children:[r.jsx(Wt,{className:"w-3 h-3"})," Lost"]});case"closed":return r.jsx("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300",children:"Closed"});default:return null}},l=f=>{switch(f){case"high":return r.jsx("span",{className:"px-2 py-0.5 rounded text-xs font-medium bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-400",children:"High"});case"medium":return r.jsx("span",{className:"px-2 py-0.5 rounded text-xs font-medium bg-yellow-100 dark:bg-yellow-900/30 text-yellow-700 dark:text-yellow-400",children:"Medium"});case"low":return r.jsx("span",{className:"px-2 py-0.5 rounded text-xs font-medium bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400",children:"Low"});default:return null}},c=(f,x)=>new Intl.NumberFormat("en-US",{style:"currency",currency:x}).format(f),d=f=>{const x=new Date(f),y=new Date;return Math.ceil((x.getTime()-y.getTime())/(1e3*60*60*24))},h=i.filter(f=>!(e!=="all"&&f.status!==e||s&&!f.customerName.toLowerCase().includes(s.toLowerCase())&&!f.id.toLowerCase().includes(s.toLowerCase())&&!f.transactionId.toLowerCase().includes(s.toLowerCase())));return r.jsx(fr,{children:r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Disputes"}),r.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Manage chargebacks and dispute cases"})]}),r.jsx("div",{className:"flex gap-3",children:r.jsxs("button",{className:"px-4 py-2 text-sm bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300 flex items-center gap-2",children:[r.jsx(gs,{className:"w-4 h-4"}),"Export"]})})]}),r.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-8 gap-4",children:[r.jsxs(Be,{className:"p-4",delay:0,children:[r.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Total"}),r.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:n.totalDisputes})]}),r.jsxs(Be,{className:"p-4",delay:.05,children:[r.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Open"}),r.jsx("p",{className:"text-2xl font-bold text-yellow-600 dark:text-yellow-400",children:n.openDisputes})]}),r.jsxs(Be,{className:"p-4",delay:.1,children:[r.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Under Review"}),r.jsx("p",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:n.underReview})]}),r.jsxs(Be,{className:"p-4",delay:.15,children:[r.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Evidence Req."}),r.jsx("p",{className:"text-2xl font-bold text-orange-600 dark:text-orange-400",children:n.evidenceRequired})]}),r.jsxs(Be,{className:"p-4",delay:.2,children:[r.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Won"}),r.jsx("p",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:n.won})]}),r.jsxs(Be,{className:"p-4",delay:.25,children:[r.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Lost"}),r.jsx("p",{className:"text-2xl font-bold text-red-600 dark:text-red-400",children:n.lost})]}),r.jsxs(Be,{className:"p-4",delay:.3,children:[r.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Dispute Rate"}),r.jsxs("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:[n.disputeRate,"%"]})]}),r.jsxs(Be,{className:"p-4",delay:.35,children:[r.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Avg Resolution"}),r.jsxs("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:[n.avgResolutionTime,"d"]})]})]}),n.evidenceRequired>0&&r.jsx(se,{className:"p-4 bg-orange-50 dark:bg-orange-900/20 border-orange-200 dark:border-orange-800",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(Ht,{className:"w-5 h-5 text-orange-600 dark:text-orange-400"}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-orange-800 dark:text-orange-300",children:"Action Required"}),r.jsxs("p",{className:"text-sm text-orange-700 dark:text-orange-400",children:[n.evidenceRequired," disputes require evidence submission before their deadline."]})]})]})}),r.jsx(se,{className:"p-4",children:r.jsxs("div",{className:"flex flex-wrap items-center gap-4",children:[r.jsx("div",{className:"flex-1 min-w-64",children:r.jsxs("div",{className:"relative",children:[r.jsx(Nr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),r.jsx("input",{type:"text",placeholder:"Search by ID, customer, or transaction...",value:s,onChange:f=>a(f.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]})}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(el,{className:"w-4 h-4 text-gray-400"}),r.jsxs("div",{className:"relative",children:[r.jsxs("select",{value:e,onChange:f=>t(f.target.value),className:"appearance-none border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 pr-8 text-sm focus:ring-2 focus:ring-primary-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[r.jsx("option",{value:"all",children:"All Status"}),r.jsx("option",{value:"open",children:"Open"}),r.jsx("option",{value:"under_review",children:"Under Review"}),r.jsx("option",{value:"evidence_required",children:"Evidence Required"}),r.jsx("option",{value:"closed",children:"Closed"})]}),r.jsx(ys,{className:"absolute right-2 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400 pointer-events-none"})]})]})]})}),r.jsxs(se,{className:"overflow-hidden",children:[r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700/50 border-b border-gray-200 dark:border-gray-700",children:r.jsxs("tr",{children:[r.jsx("th",{className:"text-left px-6 py-3 text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Dispute"}),r.jsx("th",{className:"text-left px-6 py-3 text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Customer"}),r.jsx("th",{className:"text-left px-6 py-3 text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Amount"}),r.jsx("th",{className:"text-left px-6 py-3 text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Reason"}),r.jsx("th",{className:"text-left px-6 py-3 text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Merchant"}),r.jsx("th",{className:"text-left px-6 py-3 text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Priority"}),r.jsx("th",{className:"text-left px-6 py-3 text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Status"}),r.jsx("th",{className:"text-left px-6 py-3 text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Due"}),r.jsx("th",{className:"text-left px-6 py-3 text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Actions"})]})}),r.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:h.map(f=>{const x=d(f.dueDate),y=x<=3&&f.status!=="won"&&f.status!=="lost"&&f.status!=="closed";return r.jsxs("tr",{className:`hover:bg-gray-50 dark:hover:bg-gray-700/50 ${y?"bg-red-50 dark:bg-red-900/20":""}`,children:[r.jsx("td",{className:"px-6 py-4",children:r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center gap-2",children:[y&&r.jsx(Tf,{className:"w-4 h-4 text-red-500 dark:text-red-400"}),r.jsx("span",{className:"font-mono text-sm text-gray-900 dark:text-white",children:f.id})]}),r.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400 font-mono",children:f.transactionId})]})}),r.jsx("td",{className:"px-6 py-4",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(br,{className:"w-4 h-4 text-gray-400"}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-sm text-gray-900 dark:text-white",children:f.customerName}),r.jsxs("div",{className:"flex items-center gap-1 text-xs text-gray-500 dark:text-gray-400",children:[r.jsx(lt,{className:"w-3 h-3"}),"****",f.cardLast4]})]})]})}),r.jsx("td",{className:"px-6 py-4",children:r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(Cr,{className:"w-4 h-4 text-gray-400"}),r.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:c(f.amount,f.currency)})]})}),r.jsx("td",{className:"px-6 py-4",children:r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:f.reason}),r.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:f.reasonCode})]})}),r.jsx("td",{className:"px-6 py-4",children:r.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-300",children:f.merchantName})}),r.jsx("td",{className:"px-6 py-4",children:l(f.priority)}),r.jsx("td",{className:"px-6 py-4",children:o(f.status)}),r.jsx("td",{className:"px-6 py-4",children:r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(Li,{className:"w-4 h-4 text-gray-400"}),r.jsx("span",{className:`text-sm ${y?"text-red-600 dark:text-red-400 font-medium":x<0?"text-gray-400":"text-gray-600 dark:text-gray-300"}`,children:x<0?"Expired":`${x}d left`})]})}),r.jsx("td",{className:"px-6 py-4",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("button",{className:"p-1 bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300 rounded hover:bg-gray-200 dark:hover:bg-gray-600",title:"View Details",children:r.jsx(ir,{className:"w-4 h-4"})}),r.jsx("button",{className:"p-1 bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300 rounded hover:bg-gray-200 dark:hover:bg-gray-600",title:"Messages",children:r.jsx(Tu,{className:"w-4 h-4"})}),f.status==="evidence_required"&&r.jsx("button",{className:"p-1 bg-orange-100 dark:bg-orange-900/30 text-orange-600 dark:text-orange-400 rounded hover:bg-orange-200 dark:hover:bg-orange-900/50",title:"Upload Evidence",children:r.jsx(Of,{className:"w-4 h-4"})}),(f.status==="open"||f.status==="under_review")&&r.jsxs(r.Fragment,{children:[r.jsx("button",{className:"p-1 bg-green-100 dark:bg-green-900/30 text-green-600 dark:text-green-400 rounded hover:bg-green-200 dark:hover:bg-green-900/50",title:"Accept",children:r.jsx(Ae,{className:"w-4 h-4"})}),r.jsx("button",{className:"p-1 bg-red-100 dark:bg-red-900/30 text-red-600 dark:text-red-400 rounded hover:bg-red-200 dark:hover:bg-red-900/50",title:"Challenge",children:r.jsx(Wt,{className:"w-4 h-4"})})]})]})})]},f.id)})})]})}),r.jsxs("div",{className:"px-6 py-4 border-t border-gray-200 dark:border-gray-700 flex items-center justify-between",children:[r.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Showing 1 to ",h.length," of ",n.totalDisputes," disputes"]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("button",{className:"px-3 py-1 text-sm bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded hover:bg-gray-50 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300 disabled:opacity-50",disabled:!0,children:"Previous"}),r.jsx("button",{className:"px-3 py-1 text-sm bg-primary-600 text-white rounded",children:"1"}),r.jsx("button",{className:"px-3 py-1 text-sm bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded hover:bg-gray-50 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300",children:"2"}),r.jsx("button",{className:"px-3 py-1 text-sm bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded hover:bg-gray-50 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300",children:"3"}),r.jsx("button",{className:"px-3 py-1 text-sm bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded hover:bg-gray-50 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300",children:"Next"})]})]})]})]})})}const ky={black:"#000",white:"#fff"},um={300:"#e57373",400:"#ef5350",500:"#f44336",700:"#d32f2f",800:"#c62828"},hm={50:"#f3e5f5",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",700:"#7b1fa2"},mm={50:"#e3f2fd",200:"#90caf9",400:"#42a5f5",700:"#1976d2",800:"#1565c0"},fm={300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",700:"#0288d1",900:"#01579b"},xm={300:"#81c784",400:"#66bb6a",500:"#4caf50",700:"#388e3c",800:"#2e7d32",900:"#1b5e20"},jg={300:"#ffb74d",400:"#ffa726",500:"#ff9800",700:"#f57c00",900:"#e65100"},XPe={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"};function md(e,...t){const s=new URL(`https://mui.com/production-error/?code=${e}`);return t.forEach(a=>s.searchParams.append("args[]",a)),`Minified MUI error #${e}; visit ${s} for the full message.`}const pk="$$material";function aN(){return aN=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)({}).hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e},aN.apply(null,arguments)}function QPe(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}function ZPe(e){var t=document.createElement("style");return t.setAttribute("data-emotion",e.key),e.nonce!==void 0&&t.setAttribute("nonce",e.nonce),t.appendChild(document.createTextNode("")),t.setAttribute("data-s",""),t}var JPe=function(){function e(s){var a=this;this._insertTag=function(n){var i;a.tags.length===0?a.insertionPoint?i=a.insertionPoint.nextSibling:a.prepend?i=a.container.firstChild:i=a.before:i=a.tags[a.tags.length-1].nextSibling,a.container.insertBefore(n,i),a.tags.push(n)},this.isSpeedy=s.speedy===void 0?!0:s.speedy,this.tags=[],this.ctr=0,this.nonce=s.nonce,this.key=s.key,this.container=s.container,this.prepend=s.prepend,this.insertionPoint=s.insertionPoint,this.before=null}var t=e.prototype;return t.hydrate=function(a){a.forEach(this._insertTag)},t.insert=function(a){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(ZPe(this));var n=this.tags[this.tags.length-1];if(this.isSpeedy){var i=QPe(n);try{i.insertRule(a,i.cssRules.length)}catch{}}else n.appendChild(document.createTextNode(a));this.ctr++},t.flush=function(){this.tags.forEach(function(a){var n;return(n=a.parentNode)==null?void 0:n.removeChild(a)}),this.tags=[],this.ctr=0},e}(),Un="-ms-",nN="-moz-",Wr="-webkit-",zQ="comm",uT="rule",hT="decl",eTe="@import",qQ="@keyframes",tTe="@layer",rTe=Math.abs,yk=String.fromCharCode,sTe=Object.assign;function aTe(e,t){return Cn(e,0)^45?(((t<<2^Cn(e,0))<<2^Cn(e,1))<<2^Cn(e,2))<<2^Cn(e,3):0}function HQ(e){return e.trim()}function nTe(e,t){return(e=t.exec(e))?e[0]:e}function zr(e,t,s){return e.replace(t,s)}function I_(e,t){return e.indexOf(t)}function Cn(e,t){return e.charCodeAt(t)|0}function Sy(e,t,s){return e.slice(t,s)}function Yl(e){return e.length}function mT(e){return e.length}function t1(e,t){return t.push(e),e}function iTe(e,t){return e.map(t).join("")}var bk=1,tx=1,KQ=0,Fi=0,_a=0,Ix="";function vk(e,t,s,a,n,i,o){return{value:e,root:t,parent:s,type:a,props:n,children:i,line:bk,column:tx,length:o,return:""}}function Ng(e,t){return sTe(vk("",null,null,"",null,null,0),e,{length:-e.length},t)}function oTe(){return _a}function lTe(){return _a=Fi>0?Cn(Ix,--Fi):0,tx--,_a===10&&(tx=1,bk--),_a}function io(){return _a=Fi<KQ?Cn(Ix,Fi++):0,tx++,_a===10&&(tx=1,bk++),_a}function uc(){return Cn(Ix,Fi)}function G1(){return Fi}function Pb(e,t){return Sy(Ix,e,t)}function Cy(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function GQ(e){return bk=tx=1,KQ=Yl(Ix=e),Fi=0,[]}function YQ(e){return Ix="",e}function Y1(e){return HQ(Pb(Fi-1,D_(e===91?e+2:e===40?e+1:e)))}function cTe(e){for(;(_a=uc())&&_a<33;)io();return Cy(e)>2||Cy(_a)>3?"":" "}function dTe(e,t){for(;--t&&io()&&!(_a<48||_a>102||_a>57&&_a<65||_a>70&&_a<97););return Pb(e,G1()+(t<6&&uc()==32&&io()==32))}function D_(e){for(;io();)switch(_a){case e:return Fi;case 34:case 39:e!==34&&e!==39&&D_(_a);break;case 40:e===41&&D_(e);break;case 92:io();break}return Fi}function uTe(e,t){for(;io()&&e+_a!==57;)if(e+_a===84&&uc()===47)break;return"/*"+Pb(t,Fi-1)+"*"+yk(e===47?e:io())}function hTe(e){for(;!Cy(uc());)io();return Pb(e,Fi)}function mTe(e){return YQ(X1("",null,null,null,[""],e=GQ(e),0,[0],e))}function X1(e,t,s,a,n,i,o,l,c){for(var d=0,h=0,f=o,x=0,y=0,v=0,w=1,N=1,k=1,C=0,E="",_=n,T=i,A=a,P=E;N;)switch(v=C,C=io()){case 40:if(v!=108&&Cn(P,f-1)==58){I_(P+=zr(Y1(C),"&","&\f"),"&\f")!=-1&&(k=-1);break}case 34:case 39:case 91:P+=Y1(C);break;case 9:case 10:case 13:case 32:P+=cTe(v);break;case 92:P+=dTe(G1()-1,7);continue;case 47:switch(uc()){case 42:case 47:t1(fTe(uTe(io(),G1()),t,s),c);break;default:P+="/"}break;case 123*w:l[d++]=Yl(P)*k;case 125*w:case 59:case 0:switch(C){case 0:case 125:N=0;case 59+h:k==-1&&(P=zr(P,/\f/g,"")),y>0&&Yl(P)-f&&t1(y>32?r9(P+";",a,s,f-1):r9(zr(P," ","")+";",a,s,f-2),c);break;case 59:P+=";";default:if(t1(A=t9(P,t,s,d,h,n,l,E,_=[],T=[],f),i),C===123)if(h===0)X1(P,t,A,A,_,i,f,l,T);else switch(x===99&&Cn(P,3)===110?100:x){case 100:case 108:case 109:case 115:X1(e,A,A,a&&t1(t9(e,A,A,0,0,n,l,E,n,_=[],f),T),n,T,f,l,a?_:T);break;default:X1(P,A,A,A,[""],T,0,l,T)}}d=h=y=0,w=k=1,E=P="",f=o;break;case 58:f=1+Yl(P),y=v;default:if(w<1){if(C==123)--w;else if(C==125&&w++==0&&lTe()==125)continue}switch(P+=yk(C),C*w){case 38:k=h>0?1:(P+="\f",-1);break;case 44:l[d++]=(Yl(P)-1)*k,k=1;break;case 64:uc()===45&&(P+=Y1(io())),x=uc(),h=f=Yl(E=P+=hTe(G1())),C++;break;case 45:v===45&&Yl(P)==2&&(w=0)}}return i}function t9(e,t,s,a,n,i,o,l,c,d,h){for(var f=n-1,x=n===0?i:[""],y=mT(x),v=0,w=0,N=0;v<a;++v)for(var k=0,C=Sy(e,f+1,f=rTe(w=o[v])),E=e;k<y;++k)(E=HQ(w>0?x[k]+" "+C:zr(C,/&\f/g,x[k])))&&(c[N++]=E);return vk(e,t,s,n===0?uT:l,c,d,h)}function fTe(e,t,s){return vk(e,t,s,zQ,yk(oTe()),Sy(e,2,-2),0)}function r9(e,t,s,a){return vk(e,t,s,hT,Sy(e,0,a),Sy(e,a+1,-1),a)}function cf(e,t){for(var s="",a=mT(e),n=0;n<a;n++)s+=t(e[n],n,e,t)||"";return s}function xTe(e,t,s,a){switch(e.type){case tTe:if(e.children.length)break;case eTe:case hT:return e.return=e.return||e.value;case zQ:return"";case qQ:return e.return=e.value+"{"+cf(e.children,a)+"}";case uT:e.value=e.props.join(",")}return Yl(s=cf(e.children,a))?e.return=e.value+"{"+s+"}":""}function gTe(e){var t=mT(e);return function(s,a,n,i){for(var o="",l=0;l<t;l++)o+=e[l](s,a,n,i)||"";return o}}function pTe(e){return function(t){t.root||(t=t.return)&&e(t)}}function XQ(e){var t=Object.create(null);return function(s){return t[s]===void 0&&(t[s]=e(s)),t[s]}}var yTe=function(t,s,a){for(var n=0,i=0;n=i,i=uc(),n===38&&i===12&&(s[a]=1),!Cy(i);)io();return Pb(t,Fi)},bTe=function(t,s){var a=-1,n=44;do switch(Cy(n)){case 0:n===38&&uc()===12&&(s[a]=1),t[a]+=yTe(Fi-1,s,a);break;case 2:t[a]+=Y1(n);break;case 4:if(n===44){t[++a]=uc()===58?"&\f":"",s[a]=t[a].length;break}default:t[a]+=yk(n)}while(n=io());return t},vTe=function(t,s){return YQ(bTe(GQ(t),s))},s9=new WeakMap,wTe=function(t){if(!(t.type!=="rule"||!t.parent||t.length<1)){for(var s=t.value,a=t.parent,n=t.column===a.column&&t.line===a.line;a.type!=="rule";)if(a=a.parent,!a)return;if(!(t.props.length===1&&s.charCodeAt(0)!==58&&!s9.get(a))&&!n){s9.set(t,!0);for(var i=[],o=vTe(s,i),l=a.props,c=0,d=0;c<o.length;c++)for(var h=0;h<l.length;h++,d++)t.props[d]=i[c]?o[c].replace(/&\f/g,l[h]):l[h]+" "+o[c]}}},jTe=function(t){if(t.type==="decl"){var s=t.value;s.charCodeAt(0)===108&&s.charCodeAt(2)===98&&(t.return="",t.value="")}};function QQ(e,t){switch(aTe(e,t)){case 5103:return Wr+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return Wr+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return Wr+e+nN+e+Un+e+e;case 6828:case 4268:return Wr+e+Un+e+e;case 6165:return Wr+e+Un+"flex-"+e+e;case 5187:return Wr+e+zr(e,/(\w+).+(:[^]+)/,Wr+"box-$1$2"+Un+"flex-$1$2")+e;case 5443:return Wr+e+Un+"flex-item-"+zr(e,/flex-|-self/,"")+e;case 4675:return Wr+e+Un+"flex-line-pack"+zr(e,/align-content|flex-|-self/,"")+e;case 5548:return Wr+e+Un+zr(e,"shrink","negative")+e;case 5292:return Wr+e+Un+zr(e,"basis","preferred-size")+e;case 6060:return Wr+"box-"+zr(e,"-grow","")+Wr+e+Un+zr(e,"grow","positive")+e;case 4554:return Wr+zr(e,/([^-])(transform)/g,"$1"+Wr+"$2")+e;case 6187:return zr(zr(zr(e,/(zoom-|grab)/,Wr+"$1"),/(image-set)/,Wr+"$1"),e,"")+e;case 5495:case 3959:return zr(e,/(image-set\([^]*)/,Wr+"$1$`$1");case 4968:return zr(zr(e,/(.+:)(flex-)?(.*)/,Wr+"box-pack:$3"+Un+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+Wr+e+e;case 4095:case 3583:case 4068:case 2532:return zr(e,/(.+)-inline(.+)/,Wr+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(Yl(e)-1-t>6)switch(Cn(e,t+1)){case 109:if(Cn(e,t+4)!==45)break;case 102:return zr(e,/(.+:)(.+)-([^]+)/,"$1"+Wr+"$2-$3$1"+nN+(Cn(e,t+3)==108?"$3":"$2-$3"))+e;case 115:return~I_(e,"stretch")?QQ(zr(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(Cn(e,t+1)!==115)break;case 6444:switch(Cn(e,Yl(e)-3-(~I_(e,"!important")&&10))){case 107:return zr(e,":",":"+Wr)+e;case 101:return zr(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+Wr+(Cn(e,14)===45?"inline-":"")+"box$3$1"+Wr+"$2$3$1"+Un+"$2box$3")+e}break;case 5936:switch(Cn(e,t+11)){case 114:return Wr+e+Un+zr(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return Wr+e+Un+zr(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return Wr+e+Un+zr(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return Wr+e+Un+e+e}return e}var NTe=function(t,s,a,n){if(t.length>-1&&!t.return)switch(t.type){case hT:t.return=QQ(t.value,t.length);break;case qQ:return cf([Ng(t,{value:zr(t.value,"@","@"+Wr)})],n);case uT:if(t.length)return iTe(t.props,function(i){switch(nTe(i,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return cf([Ng(t,{props:[zr(i,/:(read-\w+)/,":"+nN+"$1")]})],n);case"::placeholder":return cf([Ng(t,{props:[zr(i,/:(plac\w+)/,":"+Wr+"input-$1")]}),Ng(t,{props:[zr(i,/:(plac\w+)/,":"+nN+"$1")]}),Ng(t,{props:[zr(i,/:(plac\w+)/,Un+"input-$1")]})],n)}return""})}},kTe=[NTe],STe=function(t){var s=t.key;if(s==="css"){var a=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(a,function(w){var N=w.getAttribute("data-emotion");N.indexOf(" ")!==-1&&(document.head.appendChild(w),w.setAttribute("data-s",""))})}var n=t.stylisPlugins||kTe,i={},o,l=[];o=t.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+s+' "]'),function(w){for(var N=w.getAttribute("data-emotion").split(" "),k=1;k<N.length;k++)i[N[k]]=!0;l.push(w)});var c,d=[wTe,jTe];{var h,f=[xTe,pTe(function(w){h.insert(w)})],x=gTe(d.concat(n,f)),y=function(N){return cf(mTe(N),x)};c=function(N,k,C,E){h=C,y(N?N+"{"+k.styles+"}":k.styles),E&&(v.inserted[k.name]=!0)}}var v={key:s,sheet:new JPe({key:s,container:o,nonce:t.nonce,speedy:t.speedy,prepend:t.prepend,insertionPoint:t.insertionPoint}),nonce:t.nonce,inserted:i,registered:{},insert:c};return v.sheet.hydrate(l),v},ZQ=tQ,CTe={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},_Te={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},JQ={};JQ[ZQ.ForwardRef]=CTe;JQ[ZQ.Memo]=_Te;var ETe=!0;function eZ(e,t,s){var a="";return s.split(" ").forEach(function(n){e[n]!==void 0?t.push(e[n]+";"):n&&(a+=n+" ")}),a}var fT=function(t,s,a){var n=t.key+"-"+s.name;(a===!1||ETe===!1)&&t.registered[n]===void 0&&(t.registered[n]=s.styles)},xT=function(t,s,a){fT(t,s,a);var n=t.key+"-"+s.name;if(t.inserted[s.name]===void 0){var i=s;do t.insert(s===i?"."+n:"",i,t.sheet,!0),i=i.next;while(i!==void 0)}};function ATe(e){for(var t=0,s,a=0,n=e.length;n>=4;++a,n-=4)s=e.charCodeAt(a)&255|(e.charCodeAt(++a)&255)<<8|(e.charCodeAt(++a)&255)<<16|(e.charCodeAt(++a)&255)<<24,s=(s&65535)*1540483477+((s>>>16)*59797<<16),s^=s>>>24,t=(s&65535)*1540483477+((s>>>16)*59797<<16)^(t&65535)*1540483477+((t>>>16)*59797<<16);switch(n){case 3:t^=(e.charCodeAt(a+2)&255)<<16;case 2:t^=(e.charCodeAt(a+1)&255)<<8;case 1:t^=e.charCodeAt(a)&255,t=(t&65535)*1540483477+((t>>>16)*59797<<16)}return t^=t>>>13,t=(t&65535)*1540483477+((t>>>16)*59797<<16),((t^t>>>15)>>>0).toString(36)}var PTe={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},TTe=/[A-Z]|^ms/g,ITe=/_EMO_([^_]+?)_([^]*?)_EMO_/g,tZ=function(t){return t.charCodeAt(1)===45},a9=function(t){return t!=null&&typeof t!="boolean"},ZS=XQ(function(e){return tZ(e)?e:e.replace(TTe,"-$&").toLowerCase()}),n9=function(t,s){switch(t){case"animation":case"animationName":if(typeof s=="string")return s.replace(ITe,function(a,n,i){return Xl={name:n,styles:i,next:Xl},n})}return PTe[t]!==1&&!tZ(t)&&typeof s=="number"&&s!==0?s+"px":s};function _y(e,t,s){if(s==null)return"";var a=s;if(a.__emotion_styles!==void 0)return a;switch(typeof s){case"boolean":return"";case"object":{var n=s;if(n.anim===1)return Xl={name:n.name,styles:n.styles,next:Xl},n.name;var i=s;if(i.styles!==void 0){var o=i.next;if(o!==void 0)for(;o!==void 0;)Xl={name:o.name,styles:o.styles,next:Xl},o=o.next;var l=i.styles+";";return l}return DTe(e,t,s)}case"function":{if(e!==void 0){var c=Xl,d=s(e);return Xl=c,_y(e,t,d)}break}}var h=s;if(t==null)return h;var f=t[h];return f!==void 0?f:h}function DTe(e,t,s){var a="";if(Array.isArray(s))for(var n=0;n<s.length;n++)a+=_y(e,t,s[n])+";";else for(var i in s){var o=s[i];if(typeof o!="object"){var l=o;t!=null&&t[l]!==void 0?a+=i+"{"+t[l]+"}":a9(l)&&(a+=ZS(i)+":"+n9(i,l)+";")}else if(Array.isArray(o)&&typeof o[0]=="string"&&(t==null||t[o[0]]===void 0))for(var c=0;c<o.length;c++)a9(o[c])&&(a+=ZS(i)+":"+n9(i,o[c])+";");else{var d=_y(e,t,o);switch(i){case"animation":case"animationName":{a+=ZS(i)+":"+d+";";break}default:a+=i+"{"+d+"}"}}}return a}var i9=/label:\s*([^\s;{]+)\s*(;|$)/g,Xl;function Tb(e,t,s){if(e.length===1&&typeof e[0]=="object"&&e[0]!==null&&e[0].styles!==void 0)return e[0];var a=!0,n="";Xl=void 0;var i=e[0];if(i==null||i.raw===void 0)a=!1,n+=_y(s,t,i);else{var o=i;n+=o[0]}for(var l=1;l<e.length;l++)if(n+=_y(s,t,e[l]),a){var c=i;n+=c[l]}i9.lastIndex=0;for(var d="",h;(h=i9.exec(n))!==null;)d+="-"+h[1];var f=ATe(n)+d;return{name:f,styles:n,next:Xl}}var OTe=function(t){return t()},rZ=wp.useInsertionEffect?wp.useInsertionEffect:!1,sZ=rZ||OTe,o9=rZ||p.useLayoutEffect,aZ=p.createContext(typeof HTMLElement<"u"?STe({key:"css"}):null);aZ.Provider;var gT=function(t){return p.forwardRef(function(s,a){var n=p.useContext(aZ);return t(s,n,a)})},wk=p.createContext({}),pT={}.hasOwnProperty,O_="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",RTe=function(t,s){var a={};for(var n in s)pT.call(s,n)&&(a[n]=s[n]);return a[O_]=t,a},MTe=function(t){var s=t.cache,a=t.serialized,n=t.isStringTag;return fT(s,a,n),sZ(function(){return xT(s,a,n)}),null},LTe=gT(function(e,t,s){var a=e.css;typeof a=="string"&&t.registered[a]!==void 0&&(a=t.registered[a]);var n=e[O_],i=[a],o="";typeof e.className=="string"?o=eZ(t.registered,i,e.className):e.className!=null&&(o=e.className+" ");var l=Tb(i,void 0,p.useContext(wk));o+=t.key+"-"+l.name;var c={};for(var d in e)pT.call(e,d)&&d!=="css"&&d!==O_&&(c[d]=e[d]);return c.className=o,s&&(c.ref=s),p.createElement(p.Fragment,null,p.createElement(MTe,{cache:t,serialized:l,isStringTag:typeof n=="string"}),p.createElement(n,c))}),FTe=LTe,l9=function(t,s){var a=arguments;if(s==null||!pT.call(s,"css"))return p.createElement.apply(void 0,a);var n=a.length,i=new Array(n);i[0]=FTe,i[1]=RTe(t,s);for(var o=2;o<n;o++)i[o]=a[o];return p.createElement.apply(null,i)};(function(e){var t;t||(t=e.JSX||(e.JSX={}))})(l9||(l9={}));var BTe=gT(function(e,t){var s=e.styles,a=Tb([s],void 0,p.useContext(wk)),n=p.useRef();return o9(function(){var i=t.key+"-global",o=new t.sheet.constructor({key:i,nonce:t.sheet.nonce,container:t.sheet.container,speedy:t.sheet.isSpeedy}),l=!1,c=document.querySelector('style[data-emotion="'+i+" "+a.name+'"]');return t.sheet.tags.length&&(o.before=t.sheet.tags[0]),c!==null&&(l=!0,c.setAttribute("data-emotion",i),o.hydrate([c])),n.current=[o,l],function(){o.flush()}},[t]),o9(function(){var i=n.current,o=i[0],l=i[1];if(l){i[1]=!1;return}if(a.next!==void 0&&xT(t,a.next,!0),o.tags.length){var c=o.tags[o.tags.length-1].nextElementSibling;o.before=c,o.flush()}t.insert("",a,o,!1)},[t,a.name]),null});function Dx(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return Tb(t)}function Ju(){var e=Dx.apply(void 0,arguments),t="animation-"+e.name;return{name:t,styles:"@keyframes "+t+"{"+e.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}}var $Te=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|disableRemotePlayback|download|draggable|encType|enterKeyHint|fetchpriority|fetchPriority|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|popover|popoverTarget|popoverTargetAction|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,UTe=XQ(function(e){return $Te.test(e)||e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)<91}),VTe=UTe,WTe=function(t){return t!=="theme"},c9=function(t){return typeof t=="string"&&t.charCodeAt(0)>96?VTe:WTe},d9=function(t,s,a){var n;if(s){var i=s.shouldForwardProp;n=t.__emotion_forwardProp&&i?function(o){return t.__emotion_forwardProp(o)&&i(o)}:i}return typeof n!="function"&&a&&(n=t.__emotion_forwardProp),n},zTe=function(t){var s=t.cache,a=t.serialized,n=t.isStringTag;return fT(s,a,n),sZ(function(){return xT(s,a,n)}),null},qTe=function e(t,s){var a=t.__emotion_real===t,n=a&&t.__emotion_base||t,i,o;s!==void 0&&(i=s.label,o=s.target);var l=d9(t,s,a),c=l||c9(n),d=!c("as");return function(){var h=arguments,f=a&&t.__emotion_styles!==void 0?t.__emotion_styles.slice(0):[];if(i!==void 0&&f.push("label:"+i+";"),h[0]==null||h[0].raw===void 0)f.push.apply(f,h);else{var x=h[0];f.push(x[0]);for(var y=h.length,v=1;v<y;v++)f.push(h[v],x[v])}var w=gT(function(N,k,C){var E=d&&N.as||n,_="",T=[],A=N;if(N.theme==null){A={};for(var P in N)A[P]=N[P];A.theme=p.useContext(wk)}typeof N.className=="string"?_=eZ(k.registered,T,N.className):N.className!=null&&(_=N.className+" ");var M=Tb(f.concat(T),k.registered,A);_+=k.key+"-"+M.name,o!==void 0&&(_+=" "+o);var R=d&&l===void 0?c9(E):c,$={};for(var W in N)d&&W==="as"||R(W)&&($[W]=N[W]);return $.className=_,C&&($.ref=C),p.createElement(p.Fragment,null,p.createElement(zTe,{cache:k,serialized:M,isStringTag:typeof E=="string"}),p.createElement(E,$))});return w.displayName=i!==void 0?i:"Styled("+(typeof n=="string"?n:n.displayName||n.name||"Component")+")",w.defaultProps=t.defaultProps,w.__emotion_real=w,w.__emotion_base=n,w.__emotion_styles=f,w.__emotion_forwardProp=l,Object.defineProperty(w,"toString",{value:function(){return"."+o}}),w.withComponent=function(N,k){var C=e(N,aN({},s,k,{shouldForwardProp:d9(w,k,!0)}));return C.apply(void 0,f)},w}},HTe=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],R_=qTe.bind(null);HTe.forEach(function(e){R_[e]=R_(e)});function KTe(e){return e==null||Object.keys(e).length===0}function GTe(e){const{styles:t,defaultTheme:s={}}=e,a=typeof t=="function"?n=>t(KTe(n)?s:n):t;return r.jsx(BTe,{styles:a})}function nZ(e,t){return R_(e,t)}function YTe(e,t){Array.isArray(e.__emotion_styles)&&(e.__emotion_styles=t(e.__emotion_styles))}const u9=[];function Eu(e){return u9[0]=e,Tb(u9)}var iZ={exports:{}},vs={};/**
 * @license React
 * react-is.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yT=Symbol.for("react.transitional.element"),bT=Symbol.for("react.portal"),jk=Symbol.for("react.fragment"),Nk=Symbol.for("react.strict_mode"),kk=Symbol.for("react.profiler"),Sk=Symbol.for("react.consumer"),Ck=Symbol.for("react.context"),_k=Symbol.for("react.forward_ref"),Ek=Symbol.for("react.suspense"),Ak=Symbol.for("react.suspense_list"),Pk=Symbol.for("react.memo"),Tk=Symbol.for("react.lazy"),XTe=Symbol.for("react.view_transition"),QTe=Symbol.for("react.client.reference");function al(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case yT:switch(e=e.type,e){case jk:case kk:case Nk:case Ek:case Ak:case XTe:return e;default:switch(e=e&&e.$$typeof,e){case Ck:case _k:case Tk:case Pk:return e;case Sk:return e;default:return t}}case bT:return t}}}vs.ContextConsumer=Sk;vs.ContextProvider=Ck;vs.Element=yT;vs.ForwardRef=_k;vs.Fragment=jk;vs.Lazy=Tk;vs.Memo=Pk;vs.Portal=bT;vs.Profiler=kk;vs.StrictMode=Nk;vs.Suspense=Ek;vs.SuspenseList=Ak;vs.isContextConsumer=function(e){return al(e)===Sk};vs.isContextProvider=function(e){return al(e)===Ck};vs.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===yT};vs.isForwardRef=function(e){return al(e)===_k};vs.isFragment=function(e){return al(e)===jk};vs.isLazy=function(e){return al(e)===Tk};vs.isMemo=function(e){return al(e)===Pk};vs.isPortal=function(e){return al(e)===bT};vs.isProfiler=function(e){return al(e)===kk};vs.isStrictMode=function(e){return al(e)===Nk};vs.isSuspense=function(e){return al(e)===Ek};vs.isSuspenseList=function(e){return al(e)===Ak};vs.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===jk||e===kk||e===Nk||e===Ek||e===Ak||typeof e=="object"&&e!==null&&(e.$$typeof===Tk||e.$$typeof===Pk||e.$$typeof===Ck||e.$$typeof===Sk||e.$$typeof===_k||e.$$typeof===QTe||e.getModuleId!==void 0)};vs.typeOf=al;iZ.exports=vs;var oZ=iZ.exports;function ec(e){if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function lZ(e){if(p.isValidElement(e)||oZ.isValidElementType(e)||!ec(e))return e;const t={};return Object.keys(e).forEach(s=>{t[s]=lZ(e[s])}),t}function qn(e,t,s={clone:!0}){const a=s.clone?{...e}:e;return ec(e)&&ec(t)&&Object.keys(t).forEach(n=>{p.isValidElement(t[n])||oZ.isValidElementType(t[n])?a[n]=t[n]:ec(t[n])&&Object.prototype.hasOwnProperty.call(e,n)&&ec(e[n])?a[n]=qn(e[n],t[n],s):s.clone?a[n]=ec(t[n])?lZ(t[n]):t[n]:a[n]=t[n]}),a}const ZTe=e=>{const t=Object.keys(e).map(s=>({key:s,val:e[s]}))||[];return t.sort((s,a)=>s.val-a.val),t.reduce((s,a)=>({...s,[a.key]:a.val}),{})};function JTe(e){const{values:t={xs:0,sm:600,md:900,lg:1200,xl:1536},unit:s="px",step:a=5,...n}=e,i=ZTe(t),o=Object.keys(i);function l(x){return`@media (min-width:${typeof t[x]=="number"?t[x]:x}${s})`}function c(x){return`@media (max-width:${(typeof t[x]=="number"?t[x]:x)-a/100}${s})`}function d(x,y){const v=o.indexOf(y);return`@media (min-width:${typeof t[x]=="number"?t[x]:x}${s}) and (max-width:${(v!==-1&&typeof t[o[v]]=="number"?t[o[v]]:y)-a/100}${s})`}function h(x){return o.indexOf(x)+1<o.length?d(x,o[o.indexOf(x)+1]):l(x)}function f(x){const y=o.indexOf(x);return y===0?l(o[1]):y===o.length-1?c(o[y]):d(x,o[o.indexOf(x)+1]).replace("@media","@media not all and")}return{keys:o,values:i,up:l,down:c,between:d,only:h,not:f,unit:s,...n}}function h9(e,t){if(!e.containerQueries)return t;const s=Object.keys(t).filter(a=>a.startsWith("@container")).sort((a,n)=>{var o,l;const i=/min-width:\s*([0-9.]+)/;return+(((o=a.match(i))==null?void 0:o[1])||0)-+(((l=n.match(i))==null?void 0:l[1])||0)});return s.length?s.reduce((a,n)=>{const i=t[n];return delete a[n],a[n]=i,a},{...t}):t}function eIe(e,t){return t==="@"||t.startsWith("@")&&(e.some(s=>t.startsWith(`@${s}`))||!!t.match(/^@\d/))}function tIe(e,t){const s=t.match(/^@([^/]+)?\/?(.+)?$/);if(!s)return null;const[,a,n]=s,i=Number.isNaN(+a)?a||0:+a;return e.containerQueries(n).up(i)}function rIe(e){const t=(i,o)=>i.replace("@media",o?`@container ${o}`:"@container");function s(i,o){i.up=(...l)=>t(e.breakpoints.up(...l),o),i.down=(...l)=>t(e.breakpoints.down(...l),o),i.between=(...l)=>t(e.breakpoints.between(...l),o),i.only=(...l)=>t(e.breakpoints.only(...l),o),i.not=(...l)=>{const c=t(e.breakpoints.not(...l),o);return c.includes("not all and")?c.replace("not all and ","").replace("min-width:","width<").replace("max-width:","width>").replace("and","or"):c}}const a={},n=i=>(s(a,i),a);return s(n),{...e,containerQueries:n}}const sIe={borderRadius:4};function gp(e,t){return t?qn(e,t,{clone:!1}):e}const Ik={xs:0,sm:600,md:900,lg:1200,xl:1536},m9={keys:["xs","sm","md","lg","xl"],up:e=>`@media (min-width:${Ik[e]}px)`},aIe={containerQueries:e=>({up:t=>{let s=typeof t=="number"?t:Ik[t]||t;return typeof s=="number"&&(s=`${s}px`),e?`@container ${e} (min-width:${s})`:`@container (min-width:${s})`}})};function fd(e,t,s){const a=e.theme||{};if(Array.isArray(t)){const i=a.breakpoints||m9;return t.reduce((o,l,c)=>(o[i.up(i.keys[c])]=s(t[c]),o),{})}if(typeof t=="object"){const i=a.breakpoints||m9;return Object.keys(t).reduce((o,l)=>{if(eIe(i.keys,l)){const c=tIe(a.containerQueries?a:aIe,l);c&&(o[c]=s(t[l],l))}else if(Object.keys(i.values||Ik).includes(l)){const c=i.up(l);o[c]=s(t[l],l)}else{const c=l;o[c]=t[c]}return o},{})}return s(t)}function nIe(e={}){var s;return((s=e.keys)==null?void 0:s.reduce((a,n)=>{const i=e.up(n);return a[i]={},a},{}))||{}}function f9(e,t){return e.reduce((s,a)=>{const n=s[a];return(!n||Object.keys(n).length===0)&&delete s[a],s},t)}function Ye(e){if(typeof e!="string")throw new Error(md(7));return e.charAt(0).toUpperCase()+e.slice(1)}function Dk(e,t,s=!0){if(!t||typeof t!="string")return null;if(e&&e.vars&&s){const a=`vars.${t}`.split(".").reduce((n,i)=>n&&n[i]?n[i]:null,e);if(a!=null)return a}return t.split(".").reduce((a,n)=>a&&a[n]!=null?a[n]:null,e)}function iN(e,t,s,a=s){let n;return typeof e=="function"?n=e(s):Array.isArray(e)?n=e[s]||a:n=Dk(e,s)||a,t&&(n=t(n,a,e)),n}function va(e){const{prop:t,cssProperty:s=e.prop,themeKey:a,transform:n}=e,i=o=>{if(o[t]==null)return null;const l=o[t],c=o.theme,d=Dk(c,a)||{};return fd(o,l,f=>{let x=iN(d,n,f);return f===x&&typeof f=="string"&&(x=iN(d,n,`${t}${f==="default"?"":Ye(f)}`,f)),s===!1?x:{[s]:x}})};return i.propTypes={},i.filterProps=[t],i}function iIe(e){const t={};return s=>(t[s]===void 0&&(t[s]=e(s)),t[s])}const oIe={m:"margin",p:"padding"},lIe={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},x9={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},cIe=iIe(e=>{if(e.length>2)if(x9[e])e=x9[e];else return[e];const[t,s]=e.split(""),a=oIe[t],n=lIe[s]||"";return Array.isArray(n)?n.map(i=>a+i):[a+n]}),vT=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],wT=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"];[...vT,...wT];function Ib(e,t,s,a){const n=Dk(e,t,!0)??s;return typeof n=="number"||typeof n=="string"?i=>typeof i=="string"?i:typeof n=="string"?n.startsWith("var(")&&i===0?0:n.startsWith("var(")&&i===1?n:`calc(${i} * ${n})`:n*i:Array.isArray(n)?i=>{if(typeof i=="string")return i;const o=Math.abs(i),l=n[o];return i>=0?l:typeof l=="number"?-l:typeof l=="string"&&l.startsWith("var(")?`calc(-1 * ${l})`:`-${l}`}:typeof n=="function"?n:()=>{}}function jT(e){return Ib(e,"spacing",8)}function Db(e,t){return typeof t=="string"||t==null?t:e(t)}function dIe(e,t){return s=>e.reduce((a,n)=>(a[n]=Db(t,s),a),{})}function uIe(e,t,s,a){if(!t.includes(s))return null;const n=cIe(s),i=dIe(n,a),o=e[s];return fd(e,o,i)}function cZ(e,t){const s=jT(e.theme);return Object.keys(e).map(a=>uIe(e,t,a,s)).reduce(gp,{})}function sa(e){return cZ(e,vT)}sa.propTypes={};sa.filterProps=vT;function aa(e){return cZ(e,wT)}aa.propTypes={};aa.filterProps=wT;function dZ(e=8,t=jT({spacing:e})){if(e.mui)return e;const s=(...a)=>(a.length===0?[1]:a).map(i=>{const o=t(i);return typeof o=="number"?`${o}px`:o}).join(" ");return s.mui=!0,s}function Ok(...e){const t=e.reduce((a,n)=>(n.filterProps.forEach(i=>{a[i]=n}),a),{}),s=a=>Object.keys(a).reduce((n,i)=>t[i]?gp(n,t[i](a)):n,{});return s.propTypes={},s.filterProps=e.reduce((a,n)=>a.concat(n.filterProps),[]),s}function Lo(e){return typeof e!="number"?e:`${e}px solid`}function nl(e,t){return va({prop:e,themeKey:"borders",transform:t})}const hIe=nl("border",Lo),mIe=nl("borderTop",Lo),fIe=nl("borderRight",Lo),xIe=nl("borderBottom",Lo),gIe=nl("borderLeft",Lo),pIe=nl("borderColor"),yIe=nl("borderTopColor"),bIe=nl("borderRightColor"),vIe=nl("borderBottomColor"),wIe=nl("borderLeftColor"),jIe=nl("outline",Lo),NIe=nl("outlineColor"),Rk=e=>{if(e.borderRadius!==void 0&&e.borderRadius!==null){const t=Ib(e.theme,"shape.borderRadius",4),s=a=>({borderRadius:Db(t,a)});return fd(e,e.borderRadius,s)}return null};Rk.propTypes={};Rk.filterProps=["borderRadius"];Ok(hIe,mIe,fIe,xIe,gIe,pIe,yIe,bIe,vIe,wIe,Rk,jIe,NIe);const Mk=e=>{if(e.gap!==void 0&&e.gap!==null){const t=Ib(e.theme,"spacing",8),s=a=>({gap:Db(t,a)});return fd(e,e.gap,s)}return null};Mk.propTypes={};Mk.filterProps=["gap"];const Lk=e=>{if(e.columnGap!==void 0&&e.columnGap!==null){const t=Ib(e.theme,"spacing",8),s=a=>({columnGap:Db(t,a)});return fd(e,e.columnGap,s)}return null};Lk.propTypes={};Lk.filterProps=["columnGap"];const Fk=e=>{if(e.rowGap!==void 0&&e.rowGap!==null){const t=Ib(e.theme,"spacing",8),s=a=>({rowGap:Db(t,a)});return fd(e,e.rowGap,s)}return null};Fk.propTypes={};Fk.filterProps=["rowGap"];const kIe=va({prop:"gridColumn"}),SIe=va({prop:"gridRow"}),CIe=va({prop:"gridAutoFlow"}),_Ie=va({prop:"gridAutoColumns"}),EIe=va({prop:"gridAutoRows"}),AIe=va({prop:"gridTemplateColumns"}),PIe=va({prop:"gridTemplateRows"}),TIe=va({prop:"gridTemplateAreas"}),IIe=va({prop:"gridArea"});Ok(Mk,Lk,Fk,kIe,SIe,CIe,_Ie,EIe,AIe,PIe,TIe,IIe);function df(e,t){return t==="grey"?t:e}const DIe=va({prop:"color",themeKey:"palette",transform:df}),OIe=va({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:df}),RIe=va({prop:"backgroundColor",themeKey:"palette",transform:df});Ok(DIe,OIe,RIe);function eo(e){return e<=1&&e!==0?`${e*100}%`:e}const MIe=va({prop:"width",transform:eo}),NT=e=>{if(e.maxWidth!==void 0&&e.maxWidth!==null){const t=s=>{var n,i,o,l,c;const a=((o=(i=(n=e.theme)==null?void 0:n.breakpoints)==null?void 0:i.values)==null?void 0:o[s])||Ik[s];return a?((c=(l=e.theme)==null?void 0:l.breakpoints)==null?void 0:c.unit)!=="px"?{maxWidth:`${a}${e.theme.breakpoints.unit}`}:{maxWidth:a}:{maxWidth:eo(s)}};return fd(e,e.maxWidth,t)}return null};NT.filterProps=["maxWidth"];const LIe=va({prop:"minWidth",transform:eo}),FIe=va({prop:"height",transform:eo}),BIe=va({prop:"maxHeight",transform:eo}),$Ie=va({prop:"minHeight",transform:eo});va({prop:"size",cssProperty:"width",transform:eo});va({prop:"size",cssProperty:"height",transform:eo});const UIe=va({prop:"boxSizing"});Ok(MIe,NT,LIe,FIe,BIe,$Ie,UIe);const Ob={border:{themeKey:"borders",transform:Lo},borderTop:{themeKey:"borders",transform:Lo},borderRight:{themeKey:"borders",transform:Lo},borderBottom:{themeKey:"borders",transform:Lo},borderLeft:{themeKey:"borders",transform:Lo},borderColor:{themeKey:"palette"},borderTopColor:{themeKey:"palette"},borderRightColor:{themeKey:"palette"},borderBottomColor:{themeKey:"palette"},borderLeftColor:{themeKey:"palette"},outline:{themeKey:"borders",transform:Lo},outlineColor:{themeKey:"palette"},borderRadius:{themeKey:"shape.borderRadius",style:Rk},color:{themeKey:"palette",transform:df},bgcolor:{themeKey:"palette",cssProperty:"backgroundColor",transform:df},backgroundColor:{themeKey:"palette",transform:df},p:{style:aa},pt:{style:aa},pr:{style:aa},pb:{style:aa},pl:{style:aa},px:{style:aa},py:{style:aa},padding:{style:aa},paddingTop:{style:aa},paddingRight:{style:aa},paddingBottom:{style:aa},paddingLeft:{style:aa},paddingX:{style:aa},paddingY:{style:aa},paddingInline:{style:aa},paddingInlineStart:{style:aa},paddingInlineEnd:{style:aa},paddingBlock:{style:aa},paddingBlockStart:{style:aa},paddingBlockEnd:{style:aa},m:{style:sa},mt:{style:sa},mr:{style:sa},mb:{style:sa},ml:{style:sa},mx:{style:sa},my:{style:sa},margin:{style:sa},marginTop:{style:sa},marginRight:{style:sa},marginBottom:{style:sa},marginLeft:{style:sa},marginX:{style:sa},marginY:{style:sa},marginInline:{style:sa},marginInlineStart:{style:sa},marginInlineEnd:{style:sa},marginBlock:{style:sa},marginBlockStart:{style:sa},marginBlockEnd:{style:sa},displayPrint:{cssProperty:!1,transform:e=>({"@media print":{display:e}})},display:{},overflow:{},textOverflow:{},visibility:{},whiteSpace:{},flexBasis:{},flexDirection:{},flexWrap:{},justifyContent:{},alignItems:{},alignContent:{},order:{},flex:{},flexGrow:{},flexShrink:{},alignSelf:{},justifyItems:{},justifySelf:{},gap:{style:Mk},rowGap:{style:Fk},columnGap:{style:Lk},gridColumn:{},gridRow:{},gridAutoFlow:{},gridAutoColumns:{},gridAutoRows:{},gridTemplateColumns:{},gridTemplateRows:{},gridTemplateAreas:{},gridArea:{},position:{},zIndex:{themeKey:"zIndex"},top:{},right:{},bottom:{},left:{},boxShadow:{themeKey:"shadows"},width:{transform:eo},maxWidth:{style:NT},minWidth:{transform:eo},height:{transform:eo},maxHeight:{transform:eo},minHeight:{transform:eo},boxSizing:{},font:{themeKey:"font"},fontFamily:{themeKey:"typography"},fontSize:{themeKey:"typography"},fontStyle:{themeKey:"typography"},fontWeight:{themeKey:"typography"},letterSpacing:{},textTransform:{},lineHeight:{},textAlign:{},typography:{cssProperty:!1,themeKey:"typography"}};function VIe(...e){const t=e.reduce((a,n)=>a.concat(Object.keys(n)),[]),s=new Set(t);return e.every(a=>s.size===Object.keys(a).length)}function WIe(e,t){return typeof e=="function"?e(t):e}function zIe(){function e(s,a,n,i){const o={[s]:a,theme:n},l=i[s];if(!l)return{[s]:a};const{cssProperty:c=s,themeKey:d,transform:h,style:f}=l;if(a==null)return null;if(d==="typography"&&a==="inherit")return{[s]:a};const x=Dk(n,d)||{};return f?f(o):fd(o,a,v=>{let w=iN(x,h,v);return v===w&&typeof v=="string"&&(w=iN(x,h,`${s}${v==="default"?"":Ye(v)}`,v)),c===!1?w:{[c]:w}})}function t(s){const{sx:a,theme:n={},nested:i}=s||{};if(!a)return null;const o=n.unstable_sxConfig??Ob;function l(c){let d=c;if(typeof c=="function")d=c(n);else if(typeof c!="object")return c;if(!d)return null;const h=nIe(n.breakpoints),f=Object.keys(h);let x=h;return Object.keys(d).forEach(y=>{const v=WIe(d[y],n);if(v!=null)if(typeof v=="object")if(o[y])x=gp(x,e(y,v,n,o));else{const w=fd({theme:n},v,N=>({[y]:N}));VIe(w,v)?x[y]=t({sx:v,theme:n,nested:!0}):x=gp(x,w)}else x=gp(x,e(y,v,n,o))}),!i&&n.modularCssLayers?{"@layer sx":h9(n,f9(f,x))}:h9(n,f9(f,x))}return Array.isArray(a)?a.map(l):l(a)}return t}const Ch=zIe();Ch.filterProps=["sx"];function qIe(e,t){var a;const s=this;if(s.vars){if(!((a=s.colorSchemes)!=null&&a[e])||typeof s.getColorSchemeSelector!="function")return{};let n=s.getColorSchemeSelector(e);return n==="&"?t:((n.includes("data-")||n.includes("."))&&(n=`*:where(${n.replace(/\s*&$/,"")}) &`),{[n]:t})}return s.palette.mode===e?t:{}}function kT(e={},...t){const{breakpoints:s={},palette:a={},spacing:n,shape:i={},...o}=e,l=JTe(s),c=dZ(n);let d=qn({breakpoints:l,direction:"ltr",components:{},palette:{mode:"light",...a},spacing:c,shape:{...sIe,...i}},o);return d=rIe(d),d.applyStyles=qIe,d=t.reduce((h,f)=>qn(h,f),d),d.unstable_sxConfig={...Ob,...o==null?void 0:o.unstable_sxConfig},d.unstable_sx=function(f){return Ch({sx:f,theme:this})},d}function HIe(e){return Object.keys(e).length===0}function KIe(e=null){const t=p.useContext(wk);return!t||HIe(t)?e:t}const GIe=kT();function ST(e=GIe){return KIe(e)}function JS(e){const t=Eu(e);return e!==t&&t.styles?(t.styles.match(/^@layer\s+[^{]*$/)||(t.styles=`@layer global{${t.styles}}`),t):e}function YIe({styles:e,themeId:t,defaultTheme:s={}}){const a=ST(s),n=t&&a[t]||a;let i=typeof e=="function"?e(n):e;return n.modularCssLayers&&(Array.isArray(i)?i=i.map(o=>JS(typeof o=="function"?o(n):o)):i=JS(i)),r.jsx(GTe,{styles:i})}const XIe=e=>{var a;const t={systemProps:{},otherProps:{}},s=((a=e==null?void 0:e.theme)==null?void 0:a.unstable_sxConfig)??Ob;return Object.keys(e).forEach(n=>{s[n]?t.systemProps[n]=e[n]:t.otherProps[n]=e[n]}),t};function uZ(e){const{sx:t,...s}=e,{systemProps:a,otherProps:n}=XIe(s);let i;return Array.isArray(t)?i=[a,...t]:typeof t=="function"?i=(...o)=>{const l=t(...o);return ec(l)?{...a,...l}:a}:i={...a,...t},{...n,sx:i}}const g9=e=>e,QIe=()=>{let e=g9;return{configure(t){e=t},generate(t){return e(t)},reset(){e=g9}}},hZ=QIe();function ZIe(e={}){const{themeId:t,defaultTheme:s,defaultClassName:a="MuiBox-root",generateClassName:n}=e,i=nZ("div",{shouldForwardProp:l=>l!=="theme"&&l!=="sx"&&l!=="as"})(Ch);return p.forwardRef(function(c,d){const h=ST(s),{className:f,component:x="div",...y}=uZ(c);return r.jsx(i,{as:x,ref:d,className:fe(f,n?n(a):a),theme:t&&h[t]||h,...y})})}const JIe={active:"active",checked:"checked",completed:"completed",disabled:"disabled",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",open:"open",readOnly:"readOnly",required:"required",selected:"selected"};function er(e,t,s="Mui"){const a=JIe[t];return a?`${s}-${a}`:`${hZ.generate(e)}-${t}`}function Yt(e,t,s="Mui"){const a={};return t.forEach(n=>{a[n]=er(e,n,s)}),a}function mZ(e){const{variants:t,...s}=e,a={variants:t,style:Eu(s),isProcessed:!0};return a.style===s||t&&t.forEach(n=>{typeof n.style!="function"&&(n.style=Eu(n.style))}),a}const eDe=kT();function eC(e){return e!=="ownerState"&&e!=="theme"&&e!=="sx"&&e!=="as"}function U0(e,t){return t&&e&&typeof e=="object"&&e.styles&&!e.styles.startsWith("@layer")&&(e.styles=`@layer ${t}{${String(e.styles)}}`),e}function tDe(e){return e?(t,s)=>s[e]:null}function rDe(e,t,s){e.theme=nDe(e.theme)?s:e.theme[t]||e.theme}function Q1(e,t,s){const a=typeof t=="function"?t(e):t;if(Array.isArray(a))return a.flatMap(n=>Q1(e,n,s));if(Array.isArray(a==null?void 0:a.variants)){let n;if(a.isProcessed)n=s?U0(a.style,s):a.style;else{const{variants:i,...o}=a;n=s?U0(Eu(o),s):o}return fZ(e,a.variants,[n],s)}return a!=null&&a.isProcessed?s?U0(Eu(a.style),s):a.style:s?U0(Eu(a),s):a}function fZ(e,t,s=[],a=void 0){var i;let n;e:for(let o=0;o<t.length;o+=1){const l=t[o];if(typeof l.props=="function"){if(n??(n={...e,...e.ownerState,ownerState:e.ownerState}),!l.props(n))continue}else for(const c in l.props)if(e[c]!==l.props[c]&&((i=e.ownerState)==null?void 0:i[c])!==l.props[c])continue e;typeof l.style=="function"?(n??(n={...e,...e.ownerState,ownerState:e.ownerState}),s.push(a?U0(Eu(l.style(n)),a):l.style(n))):s.push(a?U0(Eu(l.style),a):l.style)}return s}function sDe(e={}){const{themeId:t,defaultTheme:s=eDe,rootShouldForwardProp:a=eC,slotShouldForwardProp:n=eC}=e;function i(l){rDe(l,t,s)}return(l,c={})=>{YTe(l,A=>A.filter(P=>P!==Ch));const{name:d,slot:h,skipVariantsResolver:f,skipSx:x,overridesResolver:y=tDe(oDe(h)),...v}=c,w=d&&d.startsWith("Mui")||h?"components":"custom",N=f!==void 0?f:h&&h!=="Root"&&h!=="root"||!1,k=x||!1;let C=eC;h==="Root"||h==="root"?C=a:h?C=n:iDe(l)&&(C=void 0);const E=nZ(l,{shouldForwardProp:C,label:aDe(),...v}),_=A=>{if(A.__emotion_real===A)return A;if(typeof A=="function")return function(M){return Q1(M,A,M.theme.modularCssLayers?w:void 0)};if(ec(A)){const P=mZ(A);return function(R){return P.variants?Q1(R,P,R.theme.modularCssLayers?w:void 0):R.theme.modularCssLayers?U0(P.style,w):P.style}}return A},T=(...A)=>{const P=[],M=A.map(_),R=[];if(P.push(i),d&&y&&R.push(function(B){var H,K;const F=(K=(H=B.theme.components)==null?void 0:H[d])==null?void 0:K.styleOverrides;if(!F)return null;const q={};for(const V in F)q[V]=Q1(B,F[V],B.theme.modularCssLayers?"theme":void 0);return y(B,q)}),d&&!N&&R.push(function(B){var q,H;const O=B.theme,F=(H=(q=O==null?void 0:O.components)==null?void 0:q[d])==null?void 0:H.variants;return F?fZ(B,F,[],B.theme.modularCssLayers?"theme":void 0):null}),k||R.push(Ch),Array.isArray(M[0])){const I=M.shift(),B=new Array(P.length).fill(""),O=new Array(R.length).fill("");let F;F=[...B,...I,...O],F.raw=[...B,...I.raw,...O],P.unshift(F)}const $=[...P,...M,...R],W=E(...$);return l.muiName&&(W.muiName=l.muiName),W};return E.withConfig&&(T.withConfig=E.withConfig),T}}function aDe(e,t){return void 0}function nDe(e){for(const t in e)return!1;return!0}function iDe(e){return typeof e=="string"&&e.charCodeAt(0)>96}function oDe(e){return e&&e.charAt(0).toLowerCase()+e.slice(1)}function oN(e,t,s=!1){const a={...t};for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)){const i=n;if(i==="components"||i==="slots")a[i]={...e[i],...a[i]};else if(i==="componentsProps"||i==="slotProps"){const o=e[i],l=t[i];if(!l)a[i]=o||{};else if(!o)a[i]=l;else{a[i]={...l};for(const c in o)if(Object.prototype.hasOwnProperty.call(o,c)){const d=c;a[i][d]=oN(o[d],l[d],s)}}}else i==="className"&&s&&t.className?a.className=fe(e==null?void 0:e.className,t==null?void 0:t.className):i==="style"&&s&&t.style?a.style={...e==null?void 0:e.style,...t==null?void 0:t.style}:a[i]===void 0&&(a[i]=e[i])}return a}const pc=typeof window<"u"?p.useLayoutEffect:p.useEffect;function lDe(e,t=Number.MIN_SAFE_INTEGER,s=Number.MAX_SAFE_INTEGER){return Math.max(t,Math.min(e,s))}function CT(e,t=0,s=1){return lDe(e,t,s)}function cDe(e){e=e.slice(1);const t=new RegExp(`.{1,${e.length>=6?2:1}}`,"g");let s=e.match(t);return s&&s[0].length===1&&(s=s.map(a=>a+a)),s?`rgb${s.length===4?"a":""}(${s.map((a,n)=>n<3?parseInt(a,16):Math.round(parseInt(a,16)/255*1e3)/1e3).join(", ")})`:""}function Bu(e){if(e.type)return e;if(e.charAt(0)==="#")return Bu(cDe(e));const t=e.indexOf("("),s=e.substring(0,t);if(!["rgb","rgba","hsl","hsla","color"].includes(s))throw new Error(md(9,e));let a=e.substring(t+1,e.length-1),n;if(s==="color"){if(a=a.split(" "),n=a.shift(),a.length===4&&a[3].charAt(0)==="/"&&(a[3]=a[3].slice(1)),!["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].includes(n))throw new Error(md(10,n))}else a=a.split(",");return a=a.map(i=>parseFloat(i)),{type:s,values:a,colorSpace:n}}const dDe=e=>{const t=Bu(e);return t.values.slice(0,3).map((s,a)=>t.type.includes("hsl")&&a!==0?`${s}%`:s).join(" ")},Vg=(e,t)=>{try{return dDe(e)}catch{return e}};function Bk(e){const{type:t,colorSpace:s}=e;let{values:a}=e;return t.includes("rgb")?a=a.map((n,i)=>i<3?parseInt(n,10):n):t.includes("hsl")&&(a[1]=`${a[1]}%`,a[2]=`${a[2]}%`),t.includes("color")?a=`${s} ${a.join(" ")}`:a=`${a.join(", ")}`,`${t}(${a})`}function xZ(e){e=Bu(e);const{values:t}=e,s=t[0],a=t[1]/100,n=t[2]/100,i=a*Math.min(n,1-n),o=(d,h=(d+s/30)%12)=>n-i*Math.max(Math.min(h-3,9-h,1),-1);let l="rgb";const c=[Math.round(o(0)*255),Math.round(o(8)*255),Math.round(o(4)*255)];return e.type==="hsla"&&(l+="a",c.push(t[3])),Bk({type:l,values:c})}function M_(e){e=Bu(e);let t=e.type==="hsl"||e.type==="hsla"?Bu(xZ(e)).values:e.values;return t=t.map(s=>(e.type!=="color"&&(s/=255),s<=.03928?s/12.92:((s+.055)/1.055)**2.4)),Number((.2126*t[0]+.7152*t[1]+.0722*t[2]).toFixed(3))}function uDe(e,t){const s=M_(e),a=M_(t);return(Math.max(s,a)+.05)/(Math.min(s,a)+.05)}function lN(e,t){return e=Bu(e),t=CT(t),(e.type==="rgb"||e.type==="hsl")&&(e.type+="a"),e.type==="color"?e.values[3]=`/${t}`:e.values[3]=t,Bk(e)}function c0(e,t,s){try{return lN(e,t)}catch{return e}}function $k(e,t){if(e=Bu(e),t=CT(t),e.type.includes("hsl"))e.values[2]*=1-t;else if(e.type.includes("rgb")||e.type.includes("color"))for(let s=0;s<3;s+=1)e.values[s]*=1-t;return Bk(e)}function rs(e,t,s){try{return $k(e,t)}catch{return e}}function Uk(e,t){if(e=Bu(e),t=CT(t),e.type.includes("hsl"))e.values[2]+=(100-e.values[2])*t;else if(e.type.includes("rgb"))for(let s=0;s<3;s+=1)e.values[s]+=(255-e.values[s])*t;else if(e.type.includes("color"))for(let s=0;s<3;s+=1)e.values[s]+=(1-e.values[s])*t;return Bk(e)}function ss(e,t,s){try{return Uk(e,t)}catch{return e}}function hDe(e,t=.15){return M_(e)>.5?$k(e,t):Uk(e,t)}function r1(e,t,s){try{return hDe(e,t)}catch{return e}}const mDe=p.createContext(),Ox=()=>p.useContext(mDe)??!1,fDe=p.createContext(void 0);function xDe(e){const{theme:t,name:s,props:a}=e;if(!t||!t.components||!t.components[s])return a;const n=t.components[s];return n.defaultProps?oN(n.defaultProps,a,t.components.mergeClassNameAndStyle):!n.styleOverrides&&!n.variants?oN(n,a,t.components.mergeClassNameAndStyle):a}function gDe({props:e,name:t}){const s=p.useContext(fDe);return xDe({props:e,name:t,theme:{components:s}})}let p9=0;function pDe(e){const[t,s]=p.useState(e),a=e||t;return p.useEffect(()=>{t==null&&(p9+=1,s(`mui-${p9}`))},[t]),a}const yDe={...wp},y9=yDe.useId;function Rx(e){if(y9!==void 0){const t=y9();return e??t}return pDe(e)}const b9={theme:void 0};function bDe(e){let t,s;return function(n){let i=t;return(i===void 0||n.theme!==s)&&(b9.theme=n.theme,i=mZ(e(b9)),t=i,s=n.theme),i}}function vDe(e=""){function t(...a){if(!a.length)return"";const n=a[0];return typeof n=="string"&&!n.match(/(#|\(|\)|(-?(\d*\.)?\d+)(px|em|%|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc))|^(-?(\d*\.)?\d+)$|(\d+ \d+ \d+)/)?`, var(--${e?`${e}-`:""}${n}${t(...a.slice(1))})`:`, ${n}`}return(a,...n)=>`var(--${e?`${e}-`:""}${a}${t(...n)})`}const v9=(e,t,s,a=[])=>{let n=e;t.forEach((i,o)=>{o===t.length-1?Array.isArray(n)?n[Number(i)]=s:n&&typeof n=="object"&&(n[i]=s):n&&typeof n=="object"&&(n[i]||(n[i]=a.includes(i)?[]:{}),n=n[i])})},wDe=(e,t,s)=>{function a(n,i=[],o=[]){Object.entries(n).forEach(([l,c])=>{(!s||s&&!s([...i,l]))&&c!=null&&(typeof c=="object"&&Object.keys(c).length>0?a(c,[...i,l],Array.isArray(c)?[...o,l]:o):t([...i,l],c,o))})}a(e)},jDe=(e,t)=>typeof t=="number"?["lineHeight","fontWeight","opacity","zIndex"].some(a=>e.includes(a))||e[e.length-1].toLowerCase().includes("opacity")?t:`${t}px`:t;function tC(e,t){const{prefix:s,shouldSkipGeneratingVar:a}=t||{},n={},i={},o={};return wDe(e,(l,c,d)=>{if((typeof c=="string"||typeof c=="number")&&(!a||!a(l,c))){const h=`--${s?`${s}-`:""}${l.join("-")}`,f=jDe(l,c);Object.assign(n,{[h]:f}),v9(i,l,`var(${h})`,d),v9(o,l,`var(${h}, ${f})`,d)}},l=>l[0]==="vars"),{css:n,vars:i,varsWithDefaults:o}}function NDe(e,t={}){const{getSelector:s=k,disableCssColorScheme:a,colorSchemeSelector:n,enableContrastVars:i}=t,{colorSchemes:o={},components:l,defaultColorScheme:c="light",...d}=e,{vars:h,css:f,varsWithDefaults:x}=tC(d,t);let y=x;const v={},{[c]:w,...N}=o;if(Object.entries(N||{}).forEach(([_,T])=>{const{vars:A,css:P,varsWithDefaults:M}=tC(T,t);y=qn(y,M),v[_]={css:P,vars:A}}),w){const{css:_,vars:T,varsWithDefaults:A}=tC(w,t);y=qn(y,A),v[c]={css:_,vars:T}}function k(_,T){var P,M;let A=n;if(n==="class"&&(A=".%s"),n==="data"&&(A="[data-%s]"),n!=null&&n.startsWith("data-")&&!n.includes("%s")&&(A=`[${n}="%s"]`),_){if(A==="media")return e.defaultColorScheme===_?":root":{[`@media (prefers-color-scheme: ${((M=(P=o[_])==null?void 0:P.palette)==null?void 0:M.mode)||_})`]:{":root":T}};if(A)return e.defaultColorScheme===_?`:root, ${A.replace("%s",String(_))}`:A.replace("%s",String(_))}return":root"}return{vars:y,generateThemeVars:()=>{let _={...h};return Object.entries(v).forEach(([,{vars:T}])=>{_=qn(_,T)}),_},generateStyleSheets:()=>{var R,$;const _=[],T=e.defaultColorScheme||"light";function A(W,I){Object.keys(I).length&&_.push(typeof W=="string"?{[W]:{...I}}:W)}A(s(void 0,{...f}),f);const{[T]:P,...M}=v;if(P){const{css:W}=P,I=($=(R=o[T])==null?void 0:R.palette)==null?void 0:$.mode,B=!a&&I?{colorScheme:I,...W}:{...W};A(s(T,{...B}),B)}return Object.entries(M).forEach(([W,{css:I}])=>{var F,q;const B=(q=(F=o[W])==null?void 0:F.palette)==null?void 0:q.mode,O=!a&&B?{colorScheme:B,...I}:{...I};A(s(W,{...O}),O)}),i&&_.push({":root":{"--__l-threshold":"0.7","--__l":"clamp(0, (l / var(--__l-threshold) - 1) * -infinity, 1)","--__a":"clamp(0.87, (l / var(--__l-threshold) - 1) * -infinity, 1)"}}),_}}}function kDe(e){return function(s){return e==="media"?`@media (prefers-color-scheme: ${s})`:e?e.startsWith("data-")&&!e.includes("%s")?`[${e}="${s}"] &`:e==="class"?`.${s} &`:e==="data"?`[data-${s}] &`:`${e.replace("%s",s)} &`:"&"}}function tr(e,t,s=void 0){const a={};for(const n in e){const i=e[n];let o="",l=!0;for(let c=0;c<i.length;c+=1){const d=i[c];d&&(o+=(l===!0?"":" ")+t(d),l=!1,s&&s[d]&&(o+=" "+s[d]))}a[n]=o}return a}function rC(e,t){var s,a,n;return p.isValidElement(e)&&t.indexOf(e.type.muiName??((n=(a=(s=e.type)==null?void 0:s._payload)==null?void 0:a.value)==null?void 0:n.muiName))!==-1}function gZ(){return{text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:ky.white,default:ky.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}}}const pZ=gZ();function yZ(){return{text:{primary:ky.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:ky.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}}}const L_=yZ();function w9(e,t,s,a){const n=a.light||a,i=a.dark||a*1.5;e[t]||(e.hasOwnProperty(s)?e[t]=e[s]:t==="light"?e.light=Uk(e.main,n):t==="dark"&&(e.dark=$k(e.main,i)))}function j9(e,t,s,a,n){const i=n.light||n,o=n.dark||n*1.5;t[s]||(t.hasOwnProperty(a)?t[s]=t[a]:s==="light"?t.light=`color-mix(in ${e}, ${t.main}, #fff ${(i*100).toFixed(0)}%)`:s==="dark"&&(t.dark=`color-mix(in ${e}, ${t.main}, #000 ${(o*100).toFixed(0)}%)`))}function SDe(e="light"){return e==="dark"?{main:mm[200],light:mm[50],dark:mm[400]}:{main:mm[700],light:mm[400],dark:mm[800]}}function CDe(e="light"){return e==="dark"?{main:hm[200],light:hm[50],dark:hm[400]}:{main:hm[500],light:hm[300],dark:hm[700]}}function _De(e="light"){return e==="dark"?{main:um[500],light:um[300],dark:um[700]}:{main:um[700],light:um[400],dark:um[800]}}function EDe(e="light"){return e==="dark"?{main:fm[400],light:fm[300],dark:fm[700]}:{main:fm[700],light:fm[500],dark:fm[900]}}function ADe(e="light"){return e==="dark"?{main:xm[400],light:xm[300],dark:xm[700]}:{main:xm[800],light:xm[500],dark:xm[900]}}function PDe(e="light"){return e==="dark"?{main:jg[400],light:jg[300],dark:jg[700]}:{main:"#ed6c02",light:jg[500],dark:jg[900]}}function TDe(e){return`oklch(from ${e} var(--__l) 0 h / var(--__a))`}function _T(e){const{mode:t="light",contrastThreshold:s=3,tonalOffset:a=.2,colorSpace:n,...i}=e,o=e.primary||SDe(t),l=e.secondary||CDe(t),c=e.error||_De(t),d=e.info||EDe(t),h=e.success||ADe(t),f=e.warning||PDe(t);function x(N){return n?TDe(N):uDe(N,L_.text.primary)>=s?L_.text.primary:pZ.text.primary}const y=({color:N,name:k,mainShade:C=500,lightShade:E=300,darkShade:_=700})=>{if(N={...N},!N.main&&N[C]&&(N.main=N[C]),!N.hasOwnProperty("main"))throw new Error(md(11,k?` (${k})`:"",C));if(typeof N.main!="string")throw new Error(md(12,k?` (${k})`:"",JSON.stringify(N.main)));return n?(j9(n,N,"light",E,a),j9(n,N,"dark",_,a)):(w9(N,"light",E,a),w9(N,"dark",_,a)),N.contrastText||(N.contrastText=x(N.main)),N};let v;return t==="light"?v=gZ():t==="dark"&&(v=yZ()),qn({common:{...ky},mode:t,primary:y({color:o,name:"primary"}),secondary:y({color:l,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:y({color:c,name:"error"}),warning:y({color:f,name:"warning"}),info:y({color:d,name:"info"}),success:y({color:h,name:"success"}),grey:XPe,contrastThreshold:s,getContrastText:x,augmentColor:y,tonalOffset:a,...v},i)}function IDe(e){const t={};return Object.entries(e).forEach(a=>{const[n,i]=a;typeof i=="object"&&(t[n]=`${i.fontStyle?`${i.fontStyle} `:""}${i.fontVariant?`${i.fontVariant} `:""}${i.fontWeight?`${i.fontWeight} `:""}${i.fontStretch?`${i.fontStretch} `:""}${i.fontSize||""}${i.lineHeight?`/${i.lineHeight} `:""}${i.fontFamily||""}`)}),t}function DDe(e,t){return{toolbar:{minHeight:56,[e.up("xs")]:{"@media (orientation: landscape)":{minHeight:48}},[e.up("sm")]:{minHeight:64}},...t}}function ODe(e){return Math.round(e*1e5)/1e5}const N9={textTransform:"uppercase"},k9='"Roboto", "Helvetica", "Arial", sans-serif';function RDe(e,t){const{fontFamily:s=k9,fontSize:a=14,fontWeightLight:n=300,fontWeightRegular:i=400,fontWeightMedium:o=500,fontWeightBold:l=700,htmlFontSize:c=16,allVariants:d,pxToRem:h,...f}=typeof t=="function"?t(e):t,x=a/14,y=h||(N=>`${N/c*x}rem`),v=(N,k,C,E,_)=>({fontFamily:s,fontWeight:N,fontSize:y(k),lineHeight:C,...s===k9?{letterSpacing:`${ODe(E/k)}em`}:{},..._,...d}),w={h1:v(n,96,1.167,-1.5),h2:v(n,60,1.2,-.5),h3:v(i,48,1.167,0),h4:v(i,34,1.235,.25),h5:v(i,24,1.334,0),h6:v(o,20,1.6,.15),subtitle1:v(i,16,1.75,.15),subtitle2:v(o,14,1.57,.1),body1:v(i,16,1.5,.15),body2:v(i,14,1.43,.15),button:v(o,14,1.75,.4,N9),caption:v(i,12,1.66,.4),overline:v(i,12,2.66,1,N9),inherit:{fontFamily:"inherit",fontWeight:"inherit",fontSize:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}};return qn({htmlFontSize:c,pxToRem:y,fontFamily:s,fontSize:a,fontWeightLight:n,fontWeightRegular:i,fontWeightMedium:o,fontWeightBold:l,...w},f,{clone:!1})}const MDe=.2,LDe=.14,FDe=.12;function Ms(...e){return[`${e[0]}px ${e[1]}px ${e[2]}px ${e[3]}px rgba(0,0,0,${MDe})`,`${e[4]}px ${e[5]}px ${e[6]}px ${e[7]}px rgba(0,0,0,${LDe})`,`${e[8]}px ${e[9]}px ${e[10]}px ${e[11]}px rgba(0,0,0,${FDe})`].join(",")}const BDe=["none",Ms(0,2,1,-1,0,1,1,0,0,1,3,0),Ms(0,3,1,-2,0,2,2,0,0,1,5,0),Ms(0,3,3,-2,0,3,4,0,0,1,8,0),Ms(0,2,4,-1,0,4,5,0,0,1,10,0),Ms(0,3,5,-1,0,5,8,0,0,1,14,0),Ms(0,3,5,-1,0,6,10,0,0,1,18,0),Ms(0,4,5,-2,0,7,10,1,0,2,16,1),Ms(0,5,5,-3,0,8,10,1,0,3,14,2),Ms(0,5,6,-3,0,9,12,1,0,3,16,2),Ms(0,6,6,-3,0,10,14,1,0,4,18,3),Ms(0,6,7,-4,0,11,15,1,0,4,20,3),Ms(0,7,8,-4,0,12,17,2,0,5,22,4),Ms(0,7,8,-4,0,13,19,2,0,5,24,4),Ms(0,7,9,-4,0,14,21,2,0,5,26,4),Ms(0,8,9,-5,0,15,22,2,0,6,28,5),Ms(0,8,10,-5,0,16,24,2,0,6,30,5),Ms(0,8,11,-5,0,17,26,2,0,6,32,5),Ms(0,9,11,-5,0,18,28,2,0,7,34,6),Ms(0,9,12,-6,0,19,29,2,0,7,36,6),Ms(0,10,13,-6,0,20,31,3,0,8,38,7),Ms(0,10,13,-6,0,21,33,3,0,8,40,7),Ms(0,10,14,-6,0,22,35,3,0,8,42,7),Ms(0,11,14,-7,0,23,36,3,0,9,44,8),Ms(0,11,15,-7,0,24,38,3,0,9,46,8)],$De={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},UDe={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function S9(e){return`${Math.round(e)}ms`}function VDe(e){if(!e)return 0;const t=e/36;return Math.min(Math.round((4+15*t**.25+t/5)*10),3e3)}function WDe(e){const t={...$De,...e.easing},s={...UDe,...e.duration};return{getAutoHeightDuration:VDe,create:(n=["all"],i={})=>{const{duration:o=s.standard,easing:l=t.easeInOut,delay:c=0,...d}=i;return(Array.isArray(n)?n:[n]).map(h=>`${h} ${typeof o=="string"?o:S9(o)} ${l} ${typeof c=="string"?c:S9(c)}`).join(",")},...e,easing:t,duration:s}}const zDe={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500};function qDe(e){return ec(e)||typeof e>"u"||typeof e=="string"||typeof e=="boolean"||typeof e=="number"||Array.isArray(e)}function bZ(e={}){const t={...e};function s(a){const n=Object.entries(a);for(let i=0;i<n.length;i++){const[o,l]=n[i];!qDe(l)||o.startsWith("unstable_")?delete a[o]:ec(l)&&(a[o]={...l},s(a[o]))}}return s(t),`import { unstable_createBreakpoints as createBreakpoints, createTransitions } from '@mui/material/styles';

const theme = ${JSON.stringify(t,null,2)};

theme.breakpoints = createBreakpoints(theme.breakpoints || {});
theme.transitions = createTransitions(theme.transitions || {});

export default theme;`}function C9(e){return typeof e=="number"?`${(e*100).toFixed(0)}%`:`calc((${e}) * 100%)`}const HDe=e=>{if(!Number.isNaN(+e))return+e;const t=e.match(/\d*\.?\d+/g);if(!t)return 0;let s=0;for(let a=0;a<t.length;a+=1)s+=+t[a];return s};function KDe(e){Object.assign(e,{alpha(t,s){const a=this||e;return a.colorSpace?`oklch(from ${t} l c h / ${typeof s=="string"?`calc(${s})`:s})`:a.vars?`rgba(${t.replace(/var\(--([^,\s)]+)(?:,[^)]+)?\)+/g,"var(--$1Channel)")} / ${typeof s=="string"?`calc(${s})`:s})`:lN(t,HDe(s))},lighten(t,s){const a=this||e;return a.colorSpace?`color-mix(in ${a.colorSpace}, ${t}, #fff ${C9(s)})`:Uk(t,s)},darken(t,s){const a=this||e;return a.colorSpace?`color-mix(in ${a.colorSpace}, ${t}, #000 ${C9(s)})`:$k(t,s)}})}function F_(e={},...t){const{breakpoints:s,mixins:a={},spacing:n,palette:i={},transitions:o={},typography:l={},shape:c,colorSpace:d,...h}=e;if(e.vars&&e.generateThemeVars===void 0)throw new Error(md(20));const f=_T({...i,colorSpace:d}),x=kT(e);let y=qn(x,{mixins:DDe(x.breakpoints,a),palette:f,shadows:BDe.slice(),typography:RDe(f,l),transitions:WDe(o),zIndex:{...zDe}});return y=qn(y,h),y=t.reduce((v,w)=>qn(v,w),y),y.unstable_sxConfig={...Ob,...h==null?void 0:h.unstable_sxConfig},y.unstable_sx=function(w){return Ch({sx:w,theme:this})},y.toRuntimeSource=bZ,KDe(y),y}function B_(e){let t;return e<1?t=5.11916*e**2:t=4.5*Math.log(e+1)+2,Math.round(t*10)/1e3}const GDe=[...Array(25)].map((e,t)=>{if(t===0)return"none";const s=B_(t);return`linear-gradient(rgba(255 255 255 / ${s}), rgba(255 255 255 / ${s}))`});function vZ(e){return{inputPlaceholder:e==="dark"?.5:.42,inputUnderline:e==="dark"?.7:.42,switchTrackDisabled:e==="dark"?.2:.12,switchTrack:e==="dark"?.3:.38}}function wZ(e){return e==="dark"?GDe:[]}function YDe(e){const{palette:t={mode:"light"},opacity:s,overlays:a,colorSpace:n,...i}=e,o=_T({...t,colorSpace:n});return{palette:o,opacity:{...vZ(o.mode),...s},overlays:a||wZ(o.mode),...i}}function XDe(e){var t;return!!e[0].match(/(cssVarPrefix|colorSchemeSelector|modularCssLayers|rootSelector|typography|mixins|breakpoints|direction|transitions)/)||!!e[0].match(/sxConfig$/)||e[0]==="palette"&&!!((t=e[1])!=null&&t.match(/(mode|contrastThreshold|tonalOffset)/))}const QDe=e=>[...[...Array(25)].map((t,s)=>`--${e?`${e}-`:""}overlays-${s}`),`--${e?`${e}-`:""}palette-AppBar-darkBg`,`--${e?`${e}-`:""}palette-AppBar-darkColor`],ZDe=e=>(t,s)=>{const a=e.rootSelector||":root",n=e.colorSchemeSelector;let i=n;if(n==="class"&&(i=".%s"),n==="data"&&(i="[data-%s]"),n!=null&&n.startsWith("data-")&&!n.includes("%s")&&(i=`[${n}="%s"]`),e.defaultColorScheme===t){if(t==="dark"){const o={};return QDe(e.cssVarPrefix).forEach(l=>{o[l]=s[l],delete s[l]}),i==="media"?{[a]:s,"@media (prefers-color-scheme: dark)":{[a]:o}}:i?{[i.replace("%s",t)]:o,[`${a}, ${i.replace("%s",t)}`]:s}:{[a]:{...s,...o}}}if(i&&i!=="media")return`${a}, ${i.replace("%s",String(t))}`}else if(t){if(i==="media")return{[`@media (prefers-color-scheme: ${String(t)})`]:{[a]:s}};if(i)return i.replace("%s",String(t))}return a};function JDe(e,t){t.forEach(s=>{e[s]||(e[s]={})})}function We(e,t,s){!e[t]&&s&&(e[t]=s)}function Wg(e){return typeof e!="string"||!e.startsWith("hsl")?e:xZ(e)}function Sc(e,t){`${t}Channel`in e||(e[`${t}Channel`]=Vg(Wg(e[t])))}function eOe(e){return typeof e=="number"?`${e}px`:typeof e=="string"||typeof e=="function"||Array.isArray(e)?e:"8px"}const Vl=e=>{try{return e()}catch{}},tOe=(e="mui")=>vDe(e);function sC(e,t,s,a,n){if(!s)return;s=s===!0?{}:s;const i=n==="dark"?"dark":"light";if(!a){t[n]=YDe({...s,palette:{mode:i,...s==null?void 0:s.palette},colorSpace:e});return}const{palette:o,...l}=F_({...a,palette:{mode:i,...s==null?void 0:s.palette},colorSpace:e});return t[n]={...s,palette:o,opacity:{...vZ(i),...s==null?void 0:s.opacity},overlays:(s==null?void 0:s.overlays)||wZ(i)},l}function rOe(e={},...t){const{colorSchemes:s={light:!0},defaultColorScheme:a,disableCssColorScheme:n=!1,cssVarPrefix:i="mui",nativeColor:o=!1,shouldSkipGeneratingVar:l=XDe,colorSchemeSelector:c=s.light&&s.dark?"media":void 0,rootSelector:d=":root",...h}=e,f=Object.keys(s)[0],x=a||(s.light&&f!=="light"?"light":f),y=tOe(i),{[x]:v,light:w,dark:N,...k}=s,C={...k};let E=v;if((x==="dark"&&!("dark"in s)||x==="light"&&!("light"in s))&&(E=!0),!E)throw new Error(md(21,x));let _;o&&(_="oklch");const T=sC(_,C,E,h,x);w&&!C.light&&sC(_,C,w,void 0,"light"),N&&!C.dark&&sC(_,C,N,void 0,"dark");let A={defaultColorScheme:x,...T,cssVarPrefix:i,colorSchemeSelector:c,rootSelector:d,getCssVar:y,colorSchemes:C,font:{...IDe(T.typography),...T.font},spacing:eOe(h.spacing)};Object.keys(A.colorSchemes).forEach(W=>{const I=A.colorSchemes[W].palette,B=F=>{const q=F.split("-"),H=q[1],K=q[2];return y(F,I[H][K])};I.mode==="light"&&(We(I.common,"background","#fff"),We(I.common,"onBackground","#000")),I.mode==="dark"&&(We(I.common,"background","#000"),We(I.common,"onBackground","#fff"));function O(F,q,H){if(_){let K;return F===c0&&(K=`transparent ${((1-H)*100).toFixed(0)}%`),F===rs&&(K=`#000 ${(H*100).toFixed(0)}%`),F===ss&&(K=`#fff ${(H*100).toFixed(0)}%`),`color-mix(in ${_}, ${q}, ${K})`}return F(q,H)}if(JDe(I,["Alert","AppBar","Avatar","Button","Chip","FilledInput","LinearProgress","Skeleton","Slider","SnackbarContent","SpeedDialAction","StepConnector","StepContent","Switch","TableCell","Tooltip"]),I.mode==="light"){We(I.Alert,"errorColor",O(rs,I.error.light,.6)),We(I.Alert,"infoColor",O(rs,I.info.light,.6)),We(I.Alert,"successColor",O(rs,I.success.light,.6)),We(I.Alert,"warningColor",O(rs,I.warning.light,.6)),We(I.Alert,"errorFilledBg",B("palette-error-main")),We(I.Alert,"infoFilledBg",B("palette-info-main")),We(I.Alert,"successFilledBg",B("palette-success-main")),We(I.Alert,"warningFilledBg",B("palette-warning-main")),We(I.Alert,"errorFilledColor",Vl(()=>I.getContrastText(I.error.main))),We(I.Alert,"infoFilledColor",Vl(()=>I.getContrastText(I.info.main))),We(I.Alert,"successFilledColor",Vl(()=>I.getContrastText(I.success.main))),We(I.Alert,"warningFilledColor",Vl(()=>I.getContrastText(I.warning.main))),We(I.Alert,"errorStandardBg",O(ss,I.error.light,.9)),We(I.Alert,"infoStandardBg",O(ss,I.info.light,.9)),We(I.Alert,"successStandardBg",O(ss,I.success.light,.9)),We(I.Alert,"warningStandardBg",O(ss,I.warning.light,.9)),We(I.Alert,"errorIconColor",B("palette-error-main")),We(I.Alert,"infoIconColor",B("palette-info-main")),We(I.Alert,"successIconColor",B("palette-success-main")),We(I.Alert,"warningIconColor",B("palette-warning-main")),We(I.AppBar,"defaultBg",B("palette-grey-100")),We(I.Avatar,"defaultBg",B("palette-grey-400")),We(I.Button,"inheritContainedBg",B("palette-grey-300")),We(I.Button,"inheritContainedHoverBg",B("palette-grey-A100")),We(I.Chip,"defaultBorder",B("palette-grey-400")),We(I.Chip,"defaultAvatarColor",B("palette-grey-700")),We(I.Chip,"defaultIconColor",B("palette-grey-700")),We(I.FilledInput,"bg","rgba(0, 0, 0, 0.06)"),We(I.FilledInput,"hoverBg","rgba(0, 0, 0, 0.09)"),We(I.FilledInput,"disabledBg","rgba(0, 0, 0, 0.12)"),We(I.LinearProgress,"primaryBg",O(ss,I.primary.main,.62)),We(I.LinearProgress,"secondaryBg",O(ss,I.secondary.main,.62)),We(I.LinearProgress,"errorBg",O(ss,I.error.main,.62)),We(I.LinearProgress,"infoBg",O(ss,I.info.main,.62)),We(I.LinearProgress,"successBg",O(ss,I.success.main,.62)),We(I.LinearProgress,"warningBg",O(ss,I.warning.main,.62)),We(I.Skeleton,"bg",_?O(c0,I.text.primary,.11):`rgba(${B("palette-text-primaryChannel")} / 0.11)`),We(I.Slider,"primaryTrack",O(ss,I.primary.main,.62)),We(I.Slider,"secondaryTrack",O(ss,I.secondary.main,.62)),We(I.Slider,"errorTrack",O(ss,I.error.main,.62)),We(I.Slider,"infoTrack",O(ss,I.info.main,.62)),We(I.Slider,"successTrack",O(ss,I.success.main,.62)),We(I.Slider,"warningTrack",O(ss,I.warning.main,.62));const F=_?O(rs,I.background.default,.6825):r1(I.background.default,.8);We(I.SnackbarContent,"bg",F),We(I.SnackbarContent,"color",Vl(()=>_?L_.text.primary:I.getContrastText(F))),We(I.SpeedDialAction,"fabHoverBg",r1(I.background.paper,.15)),We(I.StepConnector,"border",B("palette-grey-400")),We(I.StepContent,"border",B("palette-grey-400")),We(I.Switch,"defaultColor",B("palette-common-white")),We(I.Switch,"defaultDisabledColor",B("palette-grey-100")),We(I.Switch,"primaryDisabledColor",O(ss,I.primary.main,.62)),We(I.Switch,"secondaryDisabledColor",O(ss,I.secondary.main,.62)),We(I.Switch,"errorDisabledColor",O(ss,I.error.main,.62)),We(I.Switch,"infoDisabledColor",O(ss,I.info.main,.62)),We(I.Switch,"successDisabledColor",O(ss,I.success.main,.62)),We(I.Switch,"warningDisabledColor",O(ss,I.warning.main,.62)),We(I.TableCell,"border",O(ss,O(c0,I.divider,1),.88)),We(I.Tooltip,"bg",O(c0,I.grey[700],.92))}if(I.mode==="dark"){We(I.Alert,"errorColor",O(ss,I.error.light,.6)),We(I.Alert,"infoColor",O(ss,I.info.light,.6)),We(I.Alert,"successColor",O(ss,I.success.light,.6)),We(I.Alert,"warningColor",O(ss,I.warning.light,.6)),We(I.Alert,"errorFilledBg",B("palette-error-dark")),We(I.Alert,"infoFilledBg",B("palette-info-dark")),We(I.Alert,"successFilledBg",B("palette-success-dark")),We(I.Alert,"warningFilledBg",B("palette-warning-dark")),We(I.Alert,"errorFilledColor",Vl(()=>I.getContrastText(I.error.dark))),We(I.Alert,"infoFilledColor",Vl(()=>I.getContrastText(I.info.dark))),We(I.Alert,"successFilledColor",Vl(()=>I.getContrastText(I.success.dark))),We(I.Alert,"warningFilledColor",Vl(()=>I.getContrastText(I.warning.dark))),We(I.Alert,"errorStandardBg",O(rs,I.error.light,.9)),We(I.Alert,"infoStandardBg",O(rs,I.info.light,.9)),We(I.Alert,"successStandardBg",O(rs,I.success.light,.9)),We(I.Alert,"warningStandardBg",O(rs,I.warning.light,.9)),We(I.Alert,"errorIconColor",B("palette-error-main")),We(I.Alert,"infoIconColor",B("palette-info-main")),We(I.Alert,"successIconColor",B("palette-success-main")),We(I.Alert,"warningIconColor",B("palette-warning-main")),We(I.AppBar,"defaultBg",B("palette-grey-900")),We(I.AppBar,"darkBg",B("palette-background-paper")),We(I.AppBar,"darkColor",B("palette-text-primary")),We(I.Avatar,"defaultBg",B("palette-grey-600")),We(I.Button,"inheritContainedBg",B("palette-grey-800")),We(I.Button,"inheritContainedHoverBg",B("palette-grey-700")),We(I.Chip,"defaultBorder",B("palette-grey-700")),We(I.Chip,"defaultAvatarColor",B("palette-grey-300")),We(I.Chip,"defaultIconColor",B("palette-grey-300")),We(I.FilledInput,"bg","rgba(255, 255, 255, 0.09)"),We(I.FilledInput,"hoverBg","rgba(255, 255, 255, 0.13)"),We(I.FilledInput,"disabledBg","rgba(255, 255, 255, 0.12)"),We(I.LinearProgress,"primaryBg",O(rs,I.primary.main,.5)),We(I.LinearProgress,"secondaryBg",O(rs,I.secondary.main,.5)),We(I.LinearProgress,"errorBg",O(rs,I.error.main,.5)),We(I.LinearProgress,"infoBg",O(rs,I.info.main,.5)),We(I.LinearProgress,"successBg",O(rs,I.success.main,.5)),We(I.LinearProgress,"warningBg",O(rs,I.warning.main,.5)),We(I.Skeleton,"bg",_?O(c0,I.text.primary,.13):`rgba(${B("palette-text-primaryChannel")} / 0.13)`),We(I.Slider,"primaryTrack",O(rs,I.primary.main,.5)),We(I.Slider,"secondaryTrack",O(rs,I.secondary.main,.5)),We(I.Slider,"errorTrack",O(rs,I.error.main,.5)),We(I.Slider,"infoTrack",O(rs,I.info.main,.5)),We(I.Slider,"successTrack",O(rs,I.success.main,.5)),We(I.Slider,"warningTrack",O(rs,I.warning.main,.5));const F=_?O(ss,I.background.default,.985):r1(I.background.default,.98);We(I.SnackbarContent,"bg",F),We(I.SnackbarContent,"color",Vl(()=>_?pZ.text.primary:I.getContrastText(F))),We(I.SpeedDialAction,"fabHoverBg",r1(I.background.paper,.15)),We(I.StepConnector,"border",B("palette-grey-600")),We(I.StepContent,"border",B("palette-grey-600")),We(I.Switch,"defaultColor",B("palette-grey-300")),We(I.Switch,"defaultDisabledColor",B("palette-grey-600")),We(I.Switch,"primaryDisabledColor",O(rs,I.primary.main,.55)),We(I.Switch,"secondaryDisabledColor",O(rs,I.secondary.main,.55)),We(I.Switch,"errorDisabledColor",O(rs,I.error.main,.55)),We(I.Switch,"infoDisabledColor",O(rs,I.info.main,.55)),We(I.Switch,"successDisabledColor",O(rs,I.success.main,.55)),We(I.Switch,"warningDisabledColor",O(rs,I.warning.main,.55)),We(I.TableCell,"border",O(rs,O(c0,I.divider,1),.68)),We(I.Tooltip,"bg",O(c0,I.grey[700],.92))}Sc(I.background,"default"),Sc(I.background,"paper"),Sc(I.common,"background"),Sc(I.common,"onBackground"),Sc(I,"divider"),Object.keys(I).forEach(F=>{const q=I[F];F!=="tonalOffset"&&q&&typeof q=="object"&&(q.main&&We(I[F],"mainChannel",Vg(Wg(q.main))),q.light&&We(I[F],"lightChannel",Vg(Wg(q.light))),q.dark&&We(I[F],"darkChannel",Vg(Wg(q.dark))),q.contrastText&&We(I[F],"contrastTextChannel",Vg(Wg(q.contrastText))),F==="text"&&(Sc(I[F],"primary"),Sc(I[F],"secondary")),F==="action"&&(q.active&&Sc(I[F],"active"),q.selected&&Sc(I[F],"selected")))})}),A=t.reduce((W,I)=>qn(W,I),A);const P={prefix:i,disableCssColorScheme:n,shouldSkipGeneratingVar:l,getSelector:ZDe(A),enableContrastVars:o},{vars:M,generateThemeVars:R,generateStyleSheets:$}=NDe(A,P);return A.vars=M,Object.entries(A.colorSchemes[A.defaultColorScheme]).forEach(([W,I])=>{A[W]=I}),A.generateThemeVars=R,A.generateStyleSheets=$,A.generateSpacing=function(){return dZ(h.spacing,jT(this))},A.getColorSchemeSelector=kDe(c),A.spacing=A.generateSpacing(),A.shouldSkipGeneratingVar=l,A.unstable_sxConfig={...Ob,...h==null?void 0:h.unstable_sxConfig},A.unstable_sx=function(I){return Ch({sx:I,theme:this})},A.toRuntimeSource=bZ,A}function _9(e,t,s){e.colorSchemes&&s&&(e.colorSchemes[t]={...s!==!0&&s,palette:_T({...s===!0?{}:s.palette,mode:t})})}function jZ(e={},...t){const{palette:s,cssVariables:a=!1,colorSchemes:n=s?void 0:{light:!0},defaultColorScheme:i=s==null?void 0:s.mode,...o}=e,l=i||"light",c=n==null?void 0:n[l],d={...n,...s?{[l]:{...typeof c!="boolean"&&c,palette:s}}:void 0};if(a===!1){if(!("colorSchemes"in e))return F_(e,...t);let h=s;"palette"in e||d[l]&&(d[l]!==!0?h=d[l].palette:l==="dark"&&(h={mode:"dark"}));const f=F_({...e,palette:h},...t);return f.defaultColorScheme=l,f.colorSchemes=d,f.palette.mode==="light"&&(f.colorSchemes.light={...d.light!==!0&&d.light,palette:f.palette},_9(f,"dark",d.dark)),f.palette.mode==="dark"&&(f.colorSchemes.dark={...d.dark!==!0&&d.dark,palette:f.palette},_9(f,"light",d.light)),f}return!s&&!("light"in d)&&l==="light"&&(d.light=!0),rOe({...o,colorSchemes:d,defaultColorScheme:l,...typeof a!="boolean"&&a},...t)}const ET=jZ();function Mx(){const e=ST(ET);return e[pk]||e}function NZ(e){return e!=="ownerState"&&e!=="theme"&&e!=="sx"&&e!=="as"}const il=e=>NZ(e)&&e!=="classes",tt=sDe({themeId:pk,defaultTheme:ET,rootShouldForwardProp:il});function E9(...e){return e.reduce((t,s)=>s==null?t:function(...n){t.apply(this,n),s.apply(this,n)},()=>{})}function sOe(e){return r.jsx(YIe,{...e,defaultTheme:ET,themeId:pk})}function aOe(e){return function(s){return r.jsx(sOe,{styles:typeof e=="function"?a=>e({theme:a,...s}):e})}}function nOe(){return uZ}const Jt=bDe;function ar(e){return gDe(e)}function iOe(e){return er("MuiSvgIcon",e)}Yt("MuiSvgIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]);const oOe=e=>{const{color:t,fontSize:s,classes:a}=e,n={root:["root",t!=="inherit"&&`color${Ye(t)}`,`fontSize${Ye(s)}`]};return tr(n,iOe,a)},lOe=tt("svg",{name:"MuiSvgIcon",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:s}=e;return[t.root,s.color!=="inherit"&&t[`color${Ye(s.color)}`],t[`fontSize${Ye(s.fontSize)}`]]}})(Jt(({theme:e})=>{var t,s,a,n,i,o,l,c,d,h,f,x,y,v;return{userSelect:"none",width:"1em",height:"1em",display:"inline-block",flexShrink:0,transition:(n=(t=e.transitions)==null?void 0:t.create)==null?void 0:n.call(t,"fill",{duration:(a=(s=(e.vars??e).transitions)==null?void 0:s.duration)==null?void 0:a.shorter}),variants:[{props:w=>!w.hasSvgAsChild,style:{fill:"currentColor"}},{props:{fontSize:"inherit"},style:{fontSize:"inherit"}},{props:{fontSize:"small"},style:{fontSize:((o=(i=e.typography)==null?void 0:i.pxToRem)==null?void 0:o.call(i,20))||"1.25rem"}},{props:{fontSize:"medium"},style:{fontSize:((c=(l=e.typography)==null?void 0:l.pxToRem)==null?void 0:c.call(l,24))||"1.5rem"}},{props:{fontSize:"large"},style:{fontSize:((h=(d=e.typography)==null?void 0:d.pxToRem)==null?void 0:h.call(d,35))||"2.1875rem"}},...Object.entries((e.vars??e).palette).filter(([,w])=>w&&w.main).map(([w])=>{var N,k;return{props:{color:w},style:{color:(k=(N=(e.vars??e).palette)==null?void 0:N[w])==null?void 0:k.main}}}),{props:{color:"action"},style:{color:(x=(f=(e.vars??e).palette)==null?void 0:f.action)==null?void 0:x.active}},{props:{color:"disabled"},style:{color:(v=(y=(e.vars??e).palette)==null?void 0:y.action)==null?void 0:v.disabled}},{props:{color:"inherit"},style:{color:void 0}}]}})),$_=p.forwardRef(function(t,s){const a=ar({props:t,name:"MuiSvgIcon"}),{children:n,className:i,color:o="inherit",component:l="svg",fontSize:c="medium",htmlColor:d,inheritViewBox:h=!1,titleAccess:f,viewBox:x="0 0 24 24",...y}=a,v=p.isValidElement(n)&&n.type==="svg",w={...a,color:o,component:l,fontSize:c,instanceFontSize:t.fontSize,inheritViewBox:h,viewBox:x,hasSvgAsChild:v},N={};h||(N.viewBox=x);const k=oOe(w);return r.jsxs(lOe,{as:l,className:fe(k.root,i),focusable:"false",color:d,"aria-hidden":f?void 0:!0,role:f?"img":void 0,ref:s,...N,...y,...v&&n.props,ownerState:w,children:[v?n.props.children:n,f?r.jsx("title",{children:f}):null]})});$_.muiName="SvgIcon";function gi(e,t){function s(a,n){return r.jsx($_,{"data-testid":void 0,ref:n,...a,children:e})}return s.muiName=$_.muiName,p.memo(p.forwardRef(s))}function Vk(e,t=166){let s;function a(...n){const i=()=>{e.apply(this,n)};clearTimeout(s),s=setTimeout(i,t)}return a.clear=()=>{clearTimeout(s)},a}function Bi(e){return e&&e.ownerDocument||document}function Ol(e){return Bi(e).defaultView||window}function A9(e,t){typeof e=="function"?e(t):e&&(e.current=t)}function cN(e){const{controlled:t,default:s,name:a,state:n="value"}=e,{current:i}=p.useRef(t!==void 0),[o,l]=p.useState(s),c=i?t:o,d=p.useCallback(h=>{i||l(h)},[]);return[c,d]}function Vo(e){const t=p.useRef(e);return pc(()=>{t.current=e}),p.useRef((...s)=>(0,t.current)(...s)).current}function un(...e){const t=p.useRef(void 0),s=p.useCallback(a=>{const n=e.map(i=>{if(i==null)return null;if(typeof i=="function"){const o=i,l=o(a);return typeof l=="function"?l:()=>{o(null)}}return i.current=a,()=>{i.current=null}});return()=>{n.forEach(i=>i==null?void 0:i())}},e);return p.useMemo(()=>e.every(a=>a==null)?null:a=>{t.current&&(t.current(),t.current=void 0),a!=null&&(t.current=s(a))},e)}function cOe(e,t){const s=e.charCodeAt(2);return e[0]==="o"&&e[1]==="n"&&s>=65&&s<=90&&typeof t=="function"}function dOe(e,t){if(!e)return t;function s(o,l){const c={};return Object.keys(l).forEach(d=>{cOe(d,l[d])&&typeof o[d]=="function"&&(c[d]=(...h)=>{o[d](...h),l[d](...h)})}),c}if(typeof e=="function"||typeof t=="function")return o=>{const l=typeof t=="function"?t(o):t,c=typeof e=="function"?e({...o,...l}):e,d=fe(o==null?void 0:o.className,l==null?void 0:l.className,c==null?void 0:c.className),h=s(c,l);return{...l,...c,...h,...!!d&&{className:d},...(l==null?void 0:l.style)&&(c==null?void 0:c.style)&&{style:{...l.style,...c.style}},...(l==null?void 0:l.sx)&&(c==null?void 0:c.sx)&&{sx:[...Array.isArray(l.sx)?l.sx:[l.sx],...Array.isArray(c.sx)?c.sx:[c.sx]]}}};const a=t,n=s(e,a),i=fe(a==null?void 0:a.className,e==null?void 0:e.className);return{...t,...e,...n,...!!i&&{className:i},...(a==null?void 0:a.style)&&(e==null?void 0:e.style)&&{style:{...a.style,...e.style}},...(a==null?void 0:a.sx)&&(e==null?void 0:e.sx)&&{sx:[...Array.isArray(a.sx)?a.sx:[a.sx],...Array.isArray(e.sx)?e.sx:[e.sx]]}}}function kZ(e,t){if(e==null)return{};var s={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;s[a]=e[a]}return s}function U_(e,t){return U_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,a){return s.__proto__=a,s},U_(e,t)}function SZ(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,U_(e,t)}const P9={disabled:!1},dN=ns.createContext(null);var uOe=function(t){return t.scrollTop},zg="unmounted",j0="exited",N0="entering",Sm="entered",V_="exiting",wc=function(e){SZ(t,e);function t(a,n){var i;i=e.call(this,a,n)||this;var o=n,l=o&&!o.isMounting?a.enter:a.appear,c;return i.appearStatus=null,a.in?l?(c=j0,i.appearStatus=N0):c=Sm:a.unmountOnExit||a.mountOnEnter?c=zg:c=j0,i.state={status:c},i.nextCallback=null,i}t.getDerivedStateFromProps=function(n,i){var o=n.in;return o&&i.status===zg?{status:j0}:null};var s=t.prototype;return s.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},s.componentDidUpdate=function(n){var i=null;if(n!==this.props){var o=this.state.status;this.props.in?o!==N0&&o!==Sm&&(i=N0):(o===N0||o===Sm)&&(i=V_)}this.updateStatus(!1,i)},s.componentWillUnmount=function(){this.cancelNextCallback()},s.getTimeouts=function(){var n=this.props.timeout,i,o,l;return i=o=l=n,n!=null&&typeof n!="number"&&(i=n.exit,o=n.enter,l=n.appear!==void 0?n.appear:o),{exit:i,enter:o,appear:l}},s.updateStatus=function(n,i){if(n===void 0&&(n=!1),i!==null)if(this.cancelNextCallback(),i===N0){if(this.props.unmountOnExit||this.props.mountOnEnter){var o=this.props.nodeRef?this.props.nodeRef.current:ov.findDOMNode(this);o&&uOe(o)}this.performEnter(n)}else this.performExit();else this.props.unmountOnExit&&this.state.status===j0&&this.setState({status:zg})},s.performEnter=function(n){var i=this,o=this.props.enter,l=this.context?this.context.isMounting:n,c=this.props.nodeRef?[l]:[ov.findDOMNode(this),l],d=c[0],h=c[1],f=this.getTimeouts(),x=l?f.appear:f.enter;if(!n&&!o||P9.disabled){this.safeSetState({status:Sm},function(){i.props.onEntered(d)});return}this.props.onEnter(d,h),this.safeSetState({status:N0},function(){i.props.onEntering(d,h),i.onTransitionEnd(x,function(){i.safeSetState({status:Sm},function(){i.props.onEntered(d,h)})})})},s.performExit=function(){var n=this,i=this.props.exit,o=this.getTimeouts(),l=this.props.nodeRef?void 0:ov.findDOMNode(this);if(!i||P9.disabled){this.safeSetState({status:j0},function(){n.props.onExited(l)});return}this.props.onExit(l),this.safeSetState({status:V_},function(){n.props.onExiting(l),n.onTransitionEnd(o.exit,function(){n.safeSetState({status:j0},function(){n.props.onExited(l)})})})},s.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},s.safeSetState=function(n,i){i=this.setNextCallback(i),this.setState(n,i)},s.setNextCallback=function(n){var i=this,o=!0;return this.nextCallback=function(l){o&&(o=!1,i.nextCallback=null,n(l))},this.nextCallback.cancel=function(){o=!1},this.nextCallback},s.onTransitionEnd=function(n,i){this.setNextCallback(i);var o=this.props.nodeRef?this.props.nodeRef.current:ov.findDOMNode(this),l=n==null&&!this.props.addEndListener;if(!o||l){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var c=this.props.nodeRef?[this.nextCallback]:[o,this.nextCallback],d=c[0],h=c[1];this.props.addEndListener(d,h)}n!=null&&setTimeout(this.nextCallback,n)},s.render=function(){var n=this.state.status;if(n===zg)return null;var i=this.props,o=i.children;i.in,i.mountOnEnter,i.unmountOnExit,i.appear,i.enter,i.exit,i.timeout,i.addEndListener,i.onEnter,i.onEntering,i.onEntered,i.onExit,i.onExiting,i.onExited,i.nodeRef;var l=kZ(i,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return ns.createElement(dN.Provider,{value:null},typeof o=="function"?o(n,l):ns.cloneElement(ns.Children.only(o),l))},t}(ns.Component);wc.contextType=dN;wc.propTypes={};function gm(){}wc.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:gm,onEntering:gm,onEntered:gm,onExit:gm,onExiting:gm,onExited:gm};wc.UNMOUNTED=zg;wc.EXITED=j0;wc.ENTERING=N0;wc.ENTERED=Sm;wc.EXITING=V_;function hOe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function AT(e,t){var s=function(i){return t&&p.isValidElement(i)?t(i):i},a=Object.create(null);return e&&p.Children.map(e,function(n){return n}).forEach(function(n){a[n.key]=s(n)}),a}function mOe(e,t){e=e||{},t=t||{};function s(h){return h in t?t[h]:e[h]}var a=Object.create(null),n=[];for(var i in e)i in t?n.length&&(a[i]=n,n=[]):n.push(i);var o,l={};for(var c in t){if(a[c])for(o=0;o<a[c].length;o++){var d=a[c][o];l[a[c][o]]=s(d)}l[c]=s(c)}for(o=0;o<n.length;o++)l[n[o]]=s(n[o]);return l}function V0(e,t,s){return s[t]!=null?s[t]:e.props[t]}function fOe(e,t){return AT(e.children,function(s){return p.cloneElement(s,{onExited:t.bind(null,s),in:!0,appear:V0(s,"appear",e),enter:V0(s,"enter",e),exit:V0(s,"exit",e)})})}function xOe(e,t,s){var a=AT(e.children),n=mOe(t,a);return Object.keys(n).forEach(function(i){var o=n[i];if(p.isValidElement(o)){var l=i in t,c=i in a,d=t[i],h=p.isValidElement(d)&&!d.props.in;c&&(!l||h)?n[i]=p.cloneElement(o,{onExited:s.bind(null,o),in:!0,exit:V0(o,"exit",e),enter:V0(o,"enter",e)}):!c&&l&&!h?n[i]=p.cloneElement(o,{in:!1}):c&&l&&p.isValidElement(d)&&(n[i]=p.cloneElement(o,{onExited:s.bind(null,o),in:d.props.in,exit:V0(o,"exit",e),enter:V0(o,"enter",e)}))}}),n}var gOe=Object.values||function(e){return Object.keys(e).map(function(t){return e[t]})},pOe={component:"div",childFactory:function(t){return t}},PT=function(e){SZ(t,e);function t(a,n){var i;i=e.call(this,a,n)||this;var o=i.handleExited.bind(hOe(i));return i.state={contextValue:{isMounting:!0},handleExited:o,firstRender:!0},i}var s=t.prototype;return s.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},s.componentWillUnmount=function(){this.mounted=!1},t.getDerivedStateFromProps=function(n,i){var o=i.children,l=i.handleExited,c=i.firstRender;return{children:c?fOe(n,l):xOe(n,o,l),firstRender:!1}},s.handleExited=function(n,i){var o=AT(this.props.children);n.key in o||(n.props.onExited&&n.props.onExited(i),this.mounted&&this.setState(function(l){var c=aN({},l.children);return delete c[n.key],{children:c}}))},s.render=function(){var n=this.props,i=n.component,o=n.childFactory,l=kZ(n,["component","childFactory"]),c=this.state.contextValue,d=gOe(this.state.children).map(o);return delete l.appear,delete l.enter,delete l.exit,i===null?ns.createElement(dN.Provider,{value:c},d):ns.createElement(dN.Provider,{value:c},ns.createElement(i,l,d))},t}(ns.Component);PT.propTypes={};PT.defaultProps=pOe;const T9={};function CZ(e,t){const s=p.useRef(T9);return s.current===T9&&(s.current=e(t)),s}const yOe=[];function bOe(e){p.useEffect(e,yOe)}class Wk{constructor(){wi(this,"currentId",null);wi(this,"clear",()=>{this.currentId!==null&&(clearTimeout(this.currentId),this.currentId=null)});wi(this,"disposeEffect",()=>this.clear)}static create(){return new Wk}start(t,s){this.clear(),this.currentId=setTimeout(()=>{this.currentId=null,s()},t)}}function Km(){const e=CZ(Wk.create).current;return bOe(e.disposeEffect),e}const _Z=e=>e.scrollTop;function uN(e,t){const{timeout:s,easing:a,style:n={}}=e;return{duration:n.transitionDuration??(typeof s=="number"?s:s[t.mode]||0),easing:n.transitionTimingFunction??(typeof a=="object"?a[t.mode]:a),delay:n.transitionDelay}}function hN(e){return typeof e=="string"}function EZ(e,t,s){return e===void 0||hN(e)?t:{...t,ownerState:{...t.ownerState,...s}}}function AZ(e,t,s){return typeof e=="function"?e(t,s):e}function PZ(e,t=[]){if(e===void 0)return{};const s={};return Object.keys(e).filter(a=>a.match(/^on[A-Z]/)&&typeof e[a]=="function"&&!t.includes(a)).forEach(a=>{s[a]=e[a]}),s}function I9(e){if(e===void 0)return{};const t={};return Object.keys(e).filter(s=>!(s.match(/^on[A-Z]/)&&typeof e[s]=="function")).forEach(s=>{t[s]=e[s]}),t}function TZ(e){const{getSlotProps:t,additionalProps:s,externalSlotProps:a,externalForwardedProps:n,className:i}=e;if(!t){const y=fe(s==null?void 0:s.className,i,n==null?void 0:n.className,a==null?void 0:a.className),v={...s==null?void 0:s.style,...n==null?void 0:n.style,...a==null?void 0:a.style},w={...s,...n,...a};return y.length>0&&(w.className=y),Object.keys(v).length>0&&(w.style=v),{props:w,internalRef:void 0}}const o=PZ({...n,...a}),l=I9(a),c=I9(n),d=t(o),h=fe(d==null?void 0:d.className,s==null?void 0:s.className,i,n==null?void 0:n.className,a==null?void 0:a.className),f={...d==null?void 0:d.style,...s==null?void 0:s.style,...n==null?void 0:n.style,...a==null?void 0:a.style},x={...d,...s,...c,...l};return h.length>0&&(x.className=h),Object.keys(f).length>0&&(x.style=f),{props:x,internalRef:d.ref}}function nr(e,t){const{className:s,elementType:a,ownerState:n,externalForwardedProps:i,internalForwardedProps:o,shouldForwardComponentProp:l=!1,...c}=t,{component:d,slots:h={[e]:void 0},slotProps:f={[e]:void 0},...x}=i,y=h[e]||a,v=AZ(f[e],n),{props:{component:w,...N},internalRef:k}=TZ({className:s,...c,externalForwardedProps:e==="root"?x:void 0,externalSlotProps:v}),C=un(k,v==null?void 0:v.ref,t.ref),E=e==="root"?w||d:w,_=EZ(y,{...e==="root"&&!d&&!h[e]&&o,...e!=="root"&&!h[e]&&o,...N,...E&&!l&&{as:E},...E&&l&&{component:E},ref:C},n);return[y,_]}function vOe(e){return er("MuiPaper",e)}Yt("MuiPaper",["root","rounded","outlined","elevation","elevation0","elevation1","elevation2","elevation3","elevation4","elevation5","elevation6","elevation7","elevation8","elevation9","elevation10","elevation11","elevation12","elevation13","elevation14","elevation15","elevation16","elevation17","elevation18","elevation19","elevation20","elevation21","elevation22","elevation23","elevation24"]);const wOe=e=>{const{square:t,elevation:s,variant:a,classes:n}=e,i={root:["root",a,!t&&"rounded",a==="elevation"&&`elevation${s}`]};return tr(i,vOe,n)},jOe=tt("div",{name:"MuiPaper",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:s}=e;return[t.root,t[s.variant],!s.square&&t.rounded,s.variant==="elevation"&&t[`elevation${s.elevation}`]]}})(Jt(({theme:e})=>({backgroundColor:(e.vars||e).palette.background.paper,color:(e.vars||e).palette.text.primary,transition:e.transitions.create("box-shadow"),variants:[{props:({ownerState:t})=>!t.square,style:{borderRadius:e.shape.borderRadius}},{props:{variant:"outlined"},style:{border:`1px solid ${(e.vars||e).palette.divider}`}},{props:{variant:"elevation"},style:{boxShadow:"var(--Paper-shadow)",backgroundImage:"var(--Paper-overlay)"}}]}))),Lx=p.forwardRef(function(t,s){var y;const a=ar({props:t,name:"MuiPaper"}),n=Mx(),{className:i,component:o="div",elevation:l=1,square:c=!1,variant:d="elevation",...h}=a,f={...a,component:o,elevation:l,square:c,variant:d},x=wOe(f);return r.jsx(jOe,{as:o,ownerState:f,className:fe(x.root,i),ref:s,...h,style:{...d==="elevation"&&{"--Paper-shadow":(n.vars||n).shadows[l],...n.vars&&{"--Paper-overlay":(y=n.vars.overlays)==null?void 0:y[l]},...!n.vars&&n.palette.mode==="dark"&&{"--Paper-overlay":`linear-gradient(${lN("#fff",B_(l))}, ${lN("#fff",B_(l))})`}},...h.style}})});function mN(e){try{return e.matches(":focus-visible")}catch{}return!1}class fN{constructor(){wi(this,"mountEffect",()=>{this.shouldMount&&!this.didMount&&this.ref.current!==null&&(this.didMount=!0,this.mounted.resolve())});this.ref={current:null},this.mounted=null,this.didMount=!1,this.shouldMount=!1,this.setShouldMount=null}static create(){return new fN}static use(){const t=CZ(fN.create).current,[s,a]=p.useState(!1);return t.shouldMount=s,t.setShouldMount=a,p.useEffect(t.mountEffect,[s]),t}mount(){return this.mounted||(this.mounted=kOe(),this.shouldMount=!0,this.setShouldMount(this.shouldMount)),this.mounted}start(...t){this.mount().then(()=>{var s;return(s=this.ref.current)==null?void 0:s.start(...t)})}stop(...t){this.mount().then(()=>{var s;return(s=this.ref.current)==null?void 0:s.stop(...t)})}pulsate(...t){this.mount().then(()=>{var s;return(s=this.ref.current)==null?void 0:s.pulsate(...t)})}}function NOe(){return fN.use()}function kOe(){let e,t;const s=new Promise((a,n)=>{e=a,t=n});return s.resolve=e,s.reject=t,s}function SOe(e){const{className:t,classes:s,pulsate:a=!1,rippleX:n,rippleY:i,rippleSize:o,in:l,onExited:c,timeout:d}=e,[h,f]=p.useState(!1),x=fe(t,s.ripple,s.rippleVisible,a&&s.ripplePulsate),y={width:o,height:o,top:-(o/2)+i,left:-(o/2)+n},v=fe(s.child,h&&s.childLeaving,a&&s.childPulsate);return!l&&!h&&f(!0),p.useEffect(()=>{if(!l&&c!=null){const w=setTimeout(c,d);return()=>{clearTimeout(w)}}},[c,l,d]),r.jsx("span",{className:x,style:y,children:r.jsx("span",{className:v})})}const Oo=Yt("MuiTouchRipple",["root","ripple","rippleVisible","ripplePulsate","child","childLeaving","childPulsate"]),W_=550,COe=80,_Oe=Ju`
  0% {
    transform: scale(0);
    opacity: 0.1;
  }

  100% {
    transform: scale(1);
    opacity: 0.3;
  }
`,EOe=Ju`
  0% {
    opacity: 1;
  }

  100% {
    opacity: 0;
  }
`,AOe=Ju`
  0% {
    transform: scale(1);
  }

  50% {
    transform: scale(0.92);
  }

  100% {
    transform: scale(1);
  }
`,POe=tt("span",{name:"MuiTouchRipple",slot:"Root"})({overflow:"hidden",pointerEvents:"none",position:"absolute",zIndex:0,top:0,right:0,bottom:0,left:0,borderRadius:"inherit"}),TOe=tt(SOe,{name:"MuiTouchRipple",slot:"Ripple"})`
  opacity: 0;
  position: absolute;

  &.${Oo.rippleVisible} {
    opacity: 0.3;
    transform: scale(1);
    animation-name: ${_Oe};
    animation-duration: ${W_}ms;
    animation-timing-function: ${({theme:e})=>e.transitions.easing.easeInOut};
  }

  &.${Oo.ripplePulsate} {
    animation-duration: ${({theme:e})=>e.transitions.duration.shorter}ms;
  }

  & .${Oo.child} {
    opacity: 1;
    display: block;
    width: 100%;
    height: 100%;
    border-radius: 50%;
    background-color: currentColor;
  }

  & .${Oo.childLeaving} {
    opacity: 0;
    animation-name: ${EOe};
    animation-duration: ${W_}ms;
    animation-timing-function: ${({theme:e})=>e.transitions.easing.easeInOut};
  }

  & .${Oo.childPulsate} {
    position: absolute;
    /* @noflip */
    left: 0px;
    top: 0;
    animation-name: ${AOe};
    animation-duration: 2500ms;
    animation-timing-function: ${({theme:e})=>e.transitions.easing.easeInOut};
    animation-iteration-count: infinite;
    animation-delay: 200ms;
  }
`,IOe=p.forwardRef(function(t,s){const a=ar({props:t,name:"MuiTouchRipple"}),{center:n=!1,classes:i={},className:o,...l}=a,[c,d]=p.useState([]),h=p.useRef(0),f=p.useRef(null);p.useEffect(()=>{f.current&&(f.current(),f.current=null)},[c]);const x=p.useRef(!1),y=Km(),v=p.useRef(null),w=p.useRef(null),N=p.useCallback(_=>{const{pulsate:T,rippleX:A,rippleY:P,rippleSize:M,cb:R}=_;d($=>[...$,r.jsx(TOe,{classes:{ripple:fe(i.ripple,Oo.ripple),rippleVisible:fe(i.rippleVisible,Oo.rippleVisible),ripplePulsate:fe(i.ripplePulsate,Oo.ripplePulsate),child:fe(i.child,Oo.child),childLeaving:fe(i.childLeaving,Oo.childLeaving),childPulsate:fe(i.childPulsate,Oo.childPulsate)},timeout:W_,pulsate:T,rippleX:A,rippleY:P,rippleSize:M},h.current)]),h.current+=1,f.current=R},[i]),k=p.useCallback((_={},T={},A=()=>{})=>{const{pulsate:P=!1,center:M=n||T.pulsate,fakeElement:R=!1}=T;if((_==null?void 0:_.type)==="mousedown"&&x.current){x.current=!1;return}(_==null?void 0:_.type)==="touchstart"&&(x.current=!0);const $=R?null:w.current,W=$?$.getBoundingClientRect():{width:0,height:0,left:0,top:0};let I,B,O;if(M||_===void 0||_.clientX===0&&_.clientY===0||!_.clientX&&!_.touches)I=Math.round(W.width/2),B=Math.round(W.height/2);else{const{clientX:F,clientY:q}=_.touches&&_.touches.length>0?_.touches[0]:_;I=Math.round(F-W.left),B=Math.round(q-W.top)}if(M)O=Math.sqrt((2*W.width**2+W.height**2)/3),O%2===0&&(O+=1);else{const F=Math.max(Math.abs(($?$.clientWidth:0)-I),I)*2+2,q=Math.max(Math.abs(($?$.clientHeight:0)-B),B)*2+2;O=Math.sqrt(F**2+q**2)}_!=null&&_.touches?v.current===null&&(v.current=()=>{N({pulsate:P,rippleX:I,rippleY:B,rippleSize:O,cb:A})},y.start(COe,()=>{v.current&&(v.current(),v.current=null)})):N({pulsate:P,rippleX:I,rippleY:B,rippleSize:O,cb:A})},[n,N,y]),C=p.useCallback(()=>{k({},{pulsate:!0})},[k]),E=p.useCallback((_,T)=>{if(y.clear(),(_==null?void 0:_.type)==="touchend"&&v.current){v.current(),v.current=null,y.start(0,()=>{E(_,T)});return}v.current=null,d(A=>A.length>0?A.slice(1):A),f.current=T},[y]);return p.useImperativeHandle(s,()=>({pulsate:C,start:k,stop:E}),[C,k,E]),r.jsx(POe,{className:fe(Oo.root,i.root,o),ref:w,...l,children:r.jsx(PT,{component:null,exit:!0,children:c})})});function DOe(e){return er("MuiButtonBase",e)}const OOe=Yt("MuiButtonBase",["root","disabled","focusVisible"]),ROe=e=>{const{disabled:t,focusVisible:s,focusVisibleClassName:a,classes:n}=e,o=tr({root:["root",t&&"disabled",s&&"focusVisible"]},DOe,n);return s&&a&&(o.root+=` ${a}`),o},MOe=tt("button",{name:"MuiButtonBase",slot:"Root"})({display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",boxSizing:"border-box",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none",textDecoration:"none",color:"inherit","&::-moz-focus-inner":{borderStyle:"none"},[`&.${OOe.disabled}`]:{pointerEvents:"none",cursor:"default"},"@media print":{colorAdjust:"exact"}}),_h=p.forwardRef(function(t,s){const a=ar({props:t,name:"MuiButtonBase"}),{action:n,centerRipple:i=!1,children:o,className:l,component:c="button",disabled:d=!1,disableRipple:h=!1,disableTouchRipple:f=!1,focusRipple:x=!1,focusVisibleClassName:y,LinkComponent:v="a",onBlur:w,onClick:N,onContextMenu:k,onDragLeave:C,onFocus:E,onFocusVisible:_,onKeyDown:T,onKeyUp:A,onMouseDown:P,onMouseLeave:M,onMouseUp:R,onTouchEnd:$,onTouchMove:W,onTouchStart:I,tabIndex:B=0,TouchRippleProps:O,touchRippleRef:F,type:q,...H}=a,K=p.useRef(null),V=NOe(),z=un(V.ref,F),[G,te]=p.useState(!1);d&&G&&te(!1),p.useImperativeHandle(n,()=>({focusVisible:()=>{te(!0),K.current.focus()}}),[]);const he=V.shouldMount&&!h&&!d;p.useEffect(()=>{G&&x&&!h&&V.pulsate()},[h,x,G,V]);const ne=Cc(V,"start",P,f),ce=Cc(V,"stop",k,f),xe=Cc(V,"stop",C,f),_e=Cc(V,"stop",R,f),oe=Cc(V,"stop",ve=>{G&&ve.preventDefault(),M&&M(ve)},f),ie=Cc(V,"start",I,f),ge=Cc(V,"stop",$,f),Z=Cc(V,"stop",W,f),Q=Cc(V,"stop",ve=>{mN(ve.target)||te(!1),w&&w(ve)},!1),re=Vo(ve=>{K.current||(K.current=ve.currentTarget),mN(ve.target)&&(te(!0),_&&_(ve)),E&&E(ve)}),pe=()=>{const ve=K.current;return c&&c!=="button"&&!(ve.tagName==="A"&&ve.href)},Se=Vo(ve=>{x&&!ve.repeat&&G&&ve.key===" "&&V.stop(ve,()=>{V.start(ve)}),ve.target===ve.currentTarget&&pe()&&ve.key===" "&&ve.preventDefault(),T&&T(ve),ve.target===ve.currentTarget&&pe()&&ve.key==="Enter"&&!d&&(ve.preventDefault(),N&&N(ve))}),je=Vo(ve=>{x&&ve.key===" "&&G&&!ve.defaultPrevented&&V.stop(ve,()=>{V.pulsate(ve)}),A&&A(ve),N&&ve.target===ve.currentTarget&&pe()&&ve.key===" "&&!ve.defaultPrevented&&N(ve)});let Fe=c;Fe==="button"&&(H.href||H.to)&&(Fe=v);const ke={};if(Fe==="button"){const ve=!!H.formAction;ke.type=q===void 0&&!ve?"button":q,ke.disabled=d}else!H.href&&!H.to&&(ke.role="button"),d&&(ke["aria-disabled"]=d);const Ve=un(s,K),le={...a,centerRipple:i,component:c,disabled:d,disableRipple:h,disableTouchRipple:f,focusRipple:x,tabIndex:B,focusVisible:G},me=ROe(le);return r.jsxs(MOe,{as:Fe,className:fe(me.root,l),ownerState:le,onBlur:Q,onClick:N,onContextMenu:ce,onFocus:re,onKeyDown:Se,onKeyUp:je,onMouseDown:ne,onMouseLeave:oe,onMouseUp:_e,onDragLeave:xe,onTouchEnd:ge,onTouchMove:Z,onTouchStart:ie,ref:Ve,tabIndex:d?-1:B,type:q,...ke,...H,children:[o,he?r.jsx(IOe,{ref:z,center:i,...O}):null]})});function Cc(e,t,s,a=!1){return Vo(n=>(s&&s(n),a||e[t](n),!0))}function LOe(e){return typeof e.main=="string"}function FOe(e,t=[]){if(!LOe(e))return!1;for(const s of t)if(!e.hasOwnProperty(s)||typeof e[s]!="string")return!1;return!0}function ca(e=[]){return([,t])=>t&&FOe(t,e)}function BOe(e){return er("MuiAlert",e)}const D9=Yt("MuiAlert",["root","action","icon","message","filled","colorSuccess","colorInfo","colorWarning","colorError","filledSuccess","filledInfo","filledWarning","filledError","outlined","outlinedSuccess","outlinedInfo","outlinedWarning","outlinedError","standard","standardSuccess","standardInfo","standardWarning","standardError"]);function $Oe(e){return er("MuiCircularProgress",e)}Yt("MuiCircularProgress",["root","determinate","indeterminate","colorPrimary","colorSecondary","svg","track","circle","circleDeterminate","circleIndeterminate","circleDisableShrink"]);const cl=44,z_=Ju`
  0% {
    transform: rotate(0deg);
  }

  100% {
    transform: rotate(360deg);
  }
`,q_=Ju`
  0% {
    stroke-dasharray: 1px, 200px;
    stroke-dashoffset: 0;
  }

  50% {
    stroke-dasharray: 100px, 200px;
    stroke-dashoffset: -15px;
  }

  100% {
    stroke-dasharray: 1px, 200px;
    stroke-dashoffset: -126px;
  }
`,UOe=typeof z_!="string"?Dx`
        animation: ${z_} 1.4s linear infinite;
      `:null,VOe=typeof q_!="string"?Dx`
        animation: ${q_} 1.4s ease-in-out infinite;
      `:null,WOe=e=>{const{classes:t,variant:s,color:a,disableShrink:n}=e,i={root:["root",s,`color${Ye(a)}`],svg:["svg"],track:["track"],circle:["circle",`circle${Ye(s)}`,n&&"circleDisableShrink"]};return tr(i,$Oe,t)},zOe=tt("span",{name:"MuiCircularProgress",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:s}=e;return[t.root,t[s.variant],t[`color${Ye(s.color)}`]]}})(Jt(({theme:e})=>({display:"inline-block",variants:[{props:{variant:"determinate"},style:{transition:e.transitions.create("transform")}},{props:{variant:"indeterminate"},style:UOe||{animation:`${z_} 1.4s linear infinite`}},...Object.entries(e.palette).filter(ca()).map(([t])=>({props:{color:t},style:{color:(e.vars||e).palette[t].main}}))]}))),qOe=tt("svg",{name:"MuiCircularProgress",slot:"Svg"})({display:"block"}),HOe=tt("circle",{name:"MuiCircularProgress",slot:"Circle",overridesResolver:(e,t)=>{const{ownerState:s}=e;return[t.circle,t[`circle${Ye(s.variant)}`],s.disableShrink&&t.circleDisableShrink]}})(Jt(({theme:e})=>({stroke:"currentColor",variants:[{props:{variant:"determinate"},style:{transition:e.transitions.create("stroke-dashoffset")}},{props:{variant:"indeterminate"},style:{strokeDasharray:"80px, 200px",strokeDashoffset:0}},{props:({ownerState:t})=>t.variant==="indeterminate"&&!t.disableShrink,style:VOe||{animation:`${q_} 1.4s ease-in-out infinite`}}]}))),KOe=tt("circle",{name:"MuiCircularProgress",slot:"Track"})(Jt(({theme:e})=>({stroke:"currentColor",opacity:(e.vars||e).palette.action.activatedOpacity}))),zk=p.forwardRef(function(t,s){const a=ar({props:t,name:"MuiCircularProgress"}),{className:n,color:i="primary",disableShrink:o=!1,enableTrackSlot:l=!1,size:c=40,style:d,thickness:h=3.6,value:f=0,variant:x="indeterminate",...y}=a,v={...a,color:i,disableShrink:o,size:c,thickness:h,value:f,variant:x,enableTrackSlot:l},w=WOe(v),N={},k={},C={};if(x==="determinate"){const E=2*Math.PI*((cl-h)/2);N.strokeDasharray=E.toFixed(3),C["aria-valuenow"]=Math.round(f),N.strokeDashoffset=`${((100-f)/100*E).toFixed(3)}px`,k.transform="rotate(-90deg)"}return r.jsx(zOe,{className:fe(w.root,n),style:{width:c,height:c,...k,...d},ownerState:v,ref:s,role:"progressbar",...C,...y,children:r.jsxs(qOe,{className:w.svg,ownerState:v,viewBox:`${cl/2} ${cl/2} ${cl} ${cl}`,children:[l?r.jsx(KOe,{className:w.track,ownerState:v,cx:cl,cy:cl,r:(cl-h)/2,fill:"none",strokeWidth:h,"aria-hidden":"true"}):null,r.jsx(HOe,{className:w.circle,style:N,ownerState:v,cx:cl,cy:cl,r:(cl-h)/2,fill:"none",strokeWidth:h})]})})});function GOe(e){return er("MuiIconButton",e)}const O9=Yt("MuiIconButton",["root","disabled","colorInherit","colorPrimary","colorSecondary","colorError","colorInfo","colorSuccess","colorWarning","edgeStart","edgeEnd","sizeSmall","sizeMedium","sizeLarge","loading","loadingIndicator","loadingWrapper"]),YOe=e=>{const{classes:t,disabled:s,color:a,edge:n,size:i,loading:o}=e,l={root:["root",o&&"loading",s&&"disabled",a!=="default"&&`color${Ye(a)}`,n&&`edge${Ye(n)}`,`size${Ye(i)}`],loadingIndicator:["loadingIndicator"],loadingWrapper:["loadingWrapper"]};return tr(l,GOe,t)},XOe=tt(_h,{name:"MuiIconButton",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:s}=e;return[t.root,s.loading&&t.loading,s.color!=="default"&&t[`color${Ye(s.color)}`],s.edge&&t[`edge${Ye(s.edge)}`],t[`size${Ye(s.size)}`]]}})(Jt(({theme:e})=>({textAlign:"center",flex:"0 0 auto",fontSize:e.typography.pxToRem(24),padding:8,borderRadius:"50%",color:(e.vars||e).palette.action.active,transition:e.transitions.create("background-color",{duration:e.transitions.duration.shortest}),variants:[{props:t=>!t.disableRipple,style:{"--IconButton-hoverBg":e.alpha((e.vars||e).palette.action.active,(e.vars||e).palette.action.hoverOpacity),"&:hover":{backgroundColor:"var(--IconButton-hoverBg)","@media (hover: none)":{backgroundColor:"transparent"}}}},{props:{edge:"start"},style:{marginLeft:-12}},{props:{edge:"start",size:"small"},style:{marginLeft:-3}},{props:{edge:"end"},style:{marginRight:-12}},{props:{edge:"end",size:"small"},style:{marginRight:-3}}]})),Jt(({theme:e})=>({variants:[{props:{color:"inherit"},style:{color:"inherit"}},...Object.entries(e.palette).filter(ca()).map(([t])=>({props:{color:t},style:{color:(e.vars||e).palette[t].main}})),...Object.entries(e.palette).filter(ca()).map(([t])=>({props:{color:t},style:{"--IconButton-hoverBg":e.alpha((e.vars||e).palette[t].main,(e.vars||e).palette.action.hoverOpacity)}})),{props:{size:"small"},style:{padding:5,fontSize:e.typography.pxToRem(18)}},{props:{size:"large"},style:{padding:12,fontSize:e.typography.pxToRem(28)}}],[`&.${O9.disabled}`]:{backgroundColor:"transparent",color:(e.vars||e).palette.action.disabled},[`&.${O9.loading}`]:{color:"transparent"}}))),QOe=tt("span",{name:"MuiIconButton",slot:"LoadingIndicator"})(({theme:e})=>({display:"none",position:"absolute",visibility:"visible",top:"50%",left:"50%",transform:"translate(-50%, -50%)",color:(e.vars||e).palette.action.disabled,variants:[{props:{loading:!0},style:{display:"flex"}}]})),Ey=p.forwardRef(function(t,s){const a=ar({props:t,name:"MuiIconButton"}),{edge:n=!1,children:i,className:o,color:l="default",disabled:c=!1,disableFocusRipple:d=!1,size:h="medium",id:f,loading:x=null,loadingIndicator:y,...v}=a,w=Rx(f),N=y??r.jsx(zk,{"aria-labelledby":w,color:"inherit",size:16}),k={...a,edge:n,color:l,disabled:c,disableFocusRipple:d,loading:x,loadingIndicator:N,size:h},C=YOe(k);return r.jsxs(XOe,{id:x?w:f,className:fe(C.root,o),centerRipple:!0,focusRipple:!d,disabled:c||x,ref:s,...v,ownerState:k,children:[typeof x=="boolean"&&r.jsx("span",{className:C.loadingWrapper,style:{display:"contents"},children:r.jsx(QOe,{className:C.loadingIndicator,ownerState:k,children:x&&N})}),i]})}),ZOe=gi(r.jsx("path",{d:"M20,12A8,8 0 0,1 12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4C12.76,4 13.5,4.11 14.2, 4.31L15.77,2.74C14.61,2.26 13.34,2 12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0, 0 22,12M7.91,10.08L6.5,11.5L11,16L21,6L19.59,4.58L11,13.17L7.91,10.08Z"})),JOe=gi(r.jsx("path",{d:"M12 5.99L19.53 19H4.47L12 5.99M12 2L1 21h22L12 2zm1 14h-2v2h2v-2zm0-6h-2v4h2v-4z"})),eRe=gi(r.jsx("path",{d:"M11 15h2v2h-2zm0-8h2v6h-2zm.99-5C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"})),tRe=gi(r.jsx("path",{d:"M11,9H13V7H11M12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20, 12C20,16.41 16.41,20 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10, 10 0 0,0 12,2M11,17H13V11H11V17Z"})),rRe=gi(r.jsx("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"})),sRe=e=>{const{variant:t,color:s,severity:a,classes:n}=e,i={root:["root",`color${Ye(s||a)}`,`${t}${Ye(s||a)}`,`${t}`],icon:["icon"],message:["message"],action:["action"]};return tr(i,BOe,n)},aRe=tt(Lx,{name:"MuiAlert",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:s}=e;return[t.root,t[s.variant],t[`${s.variant}${Ye(s.color||s.severity)}`]]}})(Jt(({theme:e})=>{const t=e.palette.mode==="light"?e.darken:e.lighten,s=e.palette.mode==="light"?e.lighten:e.darken;return{...e.typography.body2,backgroundColor:"transparent",display:"flex",padding:"6px 16px",variants:[...Object.entries(e.palette).filter(ca(["light"])).map(([a])=>({props:{colorSeverity:a,variant:"standard"},style:{color:e.vars?e.vars.palette.Alert[`${a}Color`]:t(e.palette[a].light,.6),backgroundColor:e.vars?e.vars.palette.Alert[`${a}StandardBg`]:s(e.palette[a].light,.9),[`& .${D9.icon}`]:e.vars?{color:e.vars.palette.Alert[`${a}IconColor`]}:{color:e.palette[a].main}}})),...Object.entries(e.palette).filter(ca(["light"])).map(([a])=>({props:{colorSeverity:a,variant:"outlined"},style:{color:e.vars?e.vars.palette.Alert[`${a}Color`]:t(e.palette[a].light,.6),border:`1px solid ${(e.vars||e).palette[a].light}`,[`& .${D9.icon}`]:e.vars?{color:e.vars.palette.Alert[`${a}IconColor`]}:{color:e.palette[a].main}}})),...Object.entries(e.palette).filter(ca(["dark"])).map(([a])=>({props:{colorSeverity:a,variant:"filled"},style:{fontWeight:e.typography.fontWeightMedium,...e.vars?{color:e.vars.palette.Alert[`${a}FilledColor`],backgroundColor:e.vars.palette.Alert[`${a}FilledBg`]}:{backgroundColor:e.palette.mode==="dark"?e.palette[a].dark:e.palette[a].main,color:e.palette.getContrastText(e.palette[a].main)}}}))]}})),nRe=tt("div",{name:"MuiAlert",slot:"Icon"})({marginRight:12,padding:"7px 0",display:"flex",fontSize:22,opacity:.9}),iRe=tt("div",{name:"MuiAlert",slot:"Message"})({padding:"8px 0",minWidth:0,overflow:"auto"}),oRe=tt("div",{name:"MuiAlert",slot:"Action"})({display:"flex",alignItems:"flex-start",padding:"4px 0 0 16px",marginLeft:"auto",marginRight:-8}),R9={success:r.jsx(ZOe,{fontSize:"inherit"}),warning:r.jsx(JOe,{fontSize:"inherit"}),error:r.jsx(eRe,{fontSize:"inherit"}),info:r.jsx(tRe,{fontSize:"inherit"})},Gm=p.forwardRef(function(t,s){const a=ar({props:t,name:"MuiAlert"}),{action:n,children:i,className:o,closeText:l="Close",color:c,components:d={},componentsProps:h={},icon:f,iconMapping:x=R9,onClose:y,role:v="alert",severity:w="success",slotProps:N={},slots:k={},variant:C="standard",...E}=a,_={...a,color:c,severity:w,variant:C,colorSeverity:c||w},T=sRe(_),A={slots:{closeButton:d.CloseButton,closeIcon:d.CloseIcon,...k},slotProps:{...h,...N}},[P,M]=nr("root",{ref:s,shouldForwardComponentProp:!0,className:fe(T.root,o),elementType:aRe,externalForwardedProps:{...A,...E},ownerState:_,additionalProps:{role:v,elevation:0}}),[R,$]=nr("icon",{className:T.icon,elementType:nRe,externalForwardedProps:A,ownerState:_}),[W,I]=nr("message",{className:T.message,elementType:iRe,externalForwardedProps:A,ownerState:_}),[B,O]=nr("action",{className:T.action,elementType:oRe,externalForwardedProps:A,ownerState:_}),[F,q]=nr("closeButton",{elementType:Ey,externalForwardedProps:A,ownerState:_}),[H,K]=nr("closeIcon",{elementType:rRe,externalForwardedProps:A,ownerState:_});return r.jsxs(P,{...M,children:[f!==!1?r.jsx(R,{...$,children:f||x[w]||R9[w]}):null,r.jsx(W,{...I,children:i}),n!=null?r.jsx(B,{...O,children:n}):null,n==null&&y?r.jsx(B,{...O,children:r.jsx(F,{size:"small","aria-label":l,title:l,color:"inherit",onClick:y,...q,children:r.jsx(H,{fontSize:"small",...K})})}):null]})});function lRe(e){return er("MuiTypography",e)}Yt("MuiTypography",["root","h1","h2","h3","h4","h5","h6","subtitle1","subtitle2","body1","body2","inherit","button","caption","overline","alignLeft","alignRight","alignCenter","alignJustify","noWrap","gutterBottom","paragraph"]);const cRe={primary:!0,secondary:!0,error:!0,info:!0,success:!0,warning:!0,textPrimary:!0,textSecondary:!0,textDisabled:!0},dRe=nOe(),uRe=e=>{const{align:t,gutterBottom:s,noWrap:a,paragraph:n,variant:i,classes:o}=e,l={root:["root",i,e.align!=="inherit"&&`align${Ye(t)}`,s&&"gutterBottom",a&&"noWrap",n&&"paragraph"]};return tr(l,lRe,o)},hRe=tt("span",{name:"MuiTypography",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:s}=e;return[t.root,s.variant&&t[s.variant],s.align!=="inherit"&&t[`align${Ye(s.align)}`],s.noWrap&&t.noWrap,s.gutterBottom&&t.gutterBottom,s.paragraph&&t.paragraph]}})(Jt(({theme:e})=>{var t;return{margin:0,variants:[{props:{variant:"inherit"},style:{font:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}},...Object.entries(e.typography).filter(([s,a])=>s!=="inherit"&&a&&typeof a=="object").map(([s,a])=>({props:{variant:s},style:a})),...Object.entries(e.palette).filter(ca()).map(([s])=>({props:{color:s},style:{color:(e.vars||e).palette[s].main}})),...Object.entries(((t=e.palette)==null?void 0:t.text)||{}).filter(([,s])=>typeof s=="string").map(([s])=>({props:{color:`text${Ye(s)}`},style:{color:(e.vars||e).palette.text[s]}})),{props:({ownerState:s})=>s.align!=="inherit",style:{textAlign:"var(--Typography-textAlign)"}},{props:({ownerState:s})=>s.noWrap,style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}},{props:({ownerState:s})=>s.gutterBottom,style:{marginBottom:"0.35em"}},{props:({ownerState:s})=>s.paragraph,style:{marginBottom:16}}]}})),M9={h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",subtitle1:"h6",subtitle2:"h6",body1:"p",body2:"p",inherit:"p"},qr=p.forwardRef(function(t,s){const{color:a,...n}=ar({props:t,name:"MuiTypography"}),i=!cRe[a],o=dRe({...n,...i&&{color:a}}),{align:l="inherit",className:c,component:d,gutterBottom:h=!1,noWrap:f=!1,paragraph:x=!1,variant:y="body1",variantMapping:v=M9,...w}=o,N={...o,align:l,color:a,className:c,component:d,gutterBottom:h,noWrap:f,paragraph:x,variant:y,variantMapping:v},k=d||(x?"p":v[y]||M9[y])||"span",C=uRe(N);return r.jsx(hRe,{as:k,ref:s,className:fe(C.root,c),...w,ownerState:N,style:{...l!=="inherit"&&{"--Typography-textAlign":l},...w.style}})});var Ri="top",Zo="bottom",Jo="right",Mi="left",TT="auto",Rb=[Ri,Zo,Jo,Mi],rx="start",Ay="end",mRe="clippingParents",IZ="viewport",kg="popper",fRe="reference",L9=Rb.reduce(function(e,t){return e.concat([t+"-"+rx,t+"-"+Ay])},[]),DZ=[].concat(Rb,[TT]).reduce(function(e,t){return e.concat([t,t+"-"+rx,t+"-"+Ay])},[]),xRe="beforeRead",gRe="read",pRe="afterRead",yRe="beforeMain",bRe="main",vRe="afterMain",wRe="beforeWrite",jRe="write",NRe="afterWrite",kRe=[xRe,gRe,pRe,yRe,bRe,vRe,wRe,jRe,NRe];function yc(e){return e?(e.nodeName||"").toLowerCase():null}function mo(e){if(e==null)return window;if(e.toString()!=="[object Window]"){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function Eh(e){var t=mo(e).Element;return e instanceof t||e instanceof Element}function Wo(e){var t=mo(e).HTMLElement;return e instanceof t||e instanceof HTMLElement}function IT(e){if(typeof ShadowRoot>"u")return!1;var t=mo(e).ShadowRoot;return e instanceof t||e instanceof ShadowRoot}function SRe(e){var t=e.state;Object.keys(t.elements).forEach(function(s){var a=t.styles[s]||{},n=t.attributes[s]||{},i=t.elements[s];!Wo(i)||!yc(i)||(Object.assign(i.style,a),Object.keys(n).forEach(function(o){var l=n[o];l===!1?i.removeAttribute(o):i.setAttribute(o,l===!0?"":l)}))})}function CRe(e){var t=e.state,s={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,s.popper),t.styles=s,t.elements.arrow&&Object.assign(t.elements.arrow.style,s.arrow),function(){Object.keys(t.elements).forEach(function(a){var n=t.elements[a],i=t.attributes[a]||{},o=Object.keys(t.styles.hasOwnProperty(a)?t.styles[a]:s[a]),l=o.reduce(function(c,d){return c[d]="",c},{});!Wo(n)||!yc(n)||(Object.assign(n.style,l),Object.keys(i).forEach(function(c){n.removeAttribute(c)}))})}}const _Re={name:"applyStyles",enabled:!0,phase:"write",fn:SRe,effect:CRe,requires:["computeStyles"]};function hc(e){return e.split("-")[0]}var lh=Math.max,xN=Math.min,sx=Math.round;function H_(){var e=navigator.userAgentData;return e!=null&&e.brands&&Array.isArray(e.brands)?e.brands.map(function(t){return t.brand+"/"+t.version}).join(" "):navigator.userAgent}function OZ(){return!/^((?!chrome|android).)*safari/i.test(H_())}function ax(e,t,s){t===void 0&&(t=!1),s===void 0&&(s=!1);var a=e.getBoundingClientRect(),n=1,i=1;t&&Wo(e)&&(n=e.offsetWidth>0&&sx(a.width)/e.offsetWidth||1,i=e.offsetHeight>0&&sx(a.height)/e.offsetHeight||1);var o=Eh(e)?mo(e):window,l=o.visualViewport,c=!OZ()&&s,d=(a.left+(c&&l?l.offsetLeft:0))/n,h=(a.top+(c&&l?l.offsetTop:0))/i,f=a.width/n,x=a.height/i;return{width:f,height:x,top:h,right:d+f,bottom:h+x,left:d,x:d,y:h}}function DT(e){var t=ax(e),s=e.offsetWidth,a=e.offsetHeight;return Math.abs(t.width-s)<=1&&(s=t.width),Math.abs(t.height-a)<=1&&(a=t.height),{x:e.offsetLeft,y:e.offsetTop,width:s,height:a}}function RZ(e,t){var s=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(s&&IT(s)){var a=t;do{if(a&&e.isSameNode(a))return!0;a=a.parentNode||a.host}while(a)}return!1}function xd(e){return mo(e).getComputedStyle(e)}function ERe(e){return["table","td","th"].indexOf(yc(e))>=0}function e0(e){return((Eh(e)?e.ownerDocument:e.document)||window.document).documentElement}function qk(e){return yc(e)==="html"?e:e.assignedSlot||e.parentNode||(IT(e)?e.host:null)||e0(e)}function F9(e){return!Wo(e)||xd(e).position==="fixed"?null:e.offsetParent}function ARe(e){var t=/firefox/i.test(H_()),s=/Trident/i.test(H_());if(s&&Wo(e)){var a=xd(e);if(a.position==="fixed")return null}var n=qk(e);for(IT(n)&&(n=n.host);Wo(n)&&["html","body"].indexOf(yc(n))<0;){var i=xd(n);if(i.transform!=="none"||i.perspective!=="none"||i.contain==="paint"||["transform","perspective"].indexOf(i.willChange)!==-1||t&&i.willChange==="filter"||t&&i.filter&&i.filter!=="none")return n;n=n.parentNode}return null}function Mb(e){for(var t=mo(e),s=F9(e);s&&ERe(s)&&xd(s).position==="static";)s=F9(s);return s&&(yc(s)==="html"||yc(s)==="body"&&xd(s).position==="static")?t:s||ARe(e)||t}function OT(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function pp(e,t,s){return lh(e,xN(t,s))}function PRe(e,t,s){var a=pp(e,t,s);return a>s?s:a}function MZ(){return{top:0,right:0,bottom:0,left:0}}function LZ(e){return Object.assign({},MZ(),e)}function FZ(e,t){return t.reduce(function(s,a){return s[a]=e,s},{})}var TRe=function(t,s){return t=typeof t=="function"?t(Object.assign({},s.rects,{placement:s.placement})):t,LZ(typeof t!="number"?t:FZ(t,Rb))};function IRe(e){var t,s=e.state,a=e.name,n=e.options,i=s.elements.arrow,o=s.modifiersData.popperOffsets,l=hc(s.placement),c=OT(l),d=[Mi,Jo].indexOf(l)>=0,h=d?"height":"width";if(!(!i||!o)){var f=TRe(n.padding,s),x=DT(i),y=c==="y"?Ri:Mi,v=c==="y"?Zo:Jo,w=s.rects.reference[h]+s.rects.reference[c]-o[c]-s.rects.popper[h],N=o[c]-s.rects.reference[c],k=Mb(i),C=k?c==="y"?k.clientHeight||0:k.clientWidth||0:0,E=w/2-N/2,_=f[y],T=C-x[h]-f[v],A=C/2-x[h]/2+E,P=pp(_,A,T),M=c;s.modifiersData[a]=(t={},t[M]=P,t.centerOffset=P-A,t)}}function DRe(e){var t=e.state,s=e.options,a=s.element,n=a===void 0?"[data-popper-arrow]":a;n!=null&&(typeof n=="string"&&(n=t.elements.popper.querySelector(n),!n)||RZ(t.elements.popper,n)&&(t.elements.arrow=n))}const ORe={name:"arrow",enabled:!0,phase:"main",fn:IRe,effect:DRe,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function nx(e){return e.split("-")[1]}var RRe={top:"auto",right:"auto",bottom:"auto",left:"auto"};function MRe(e,t){var s=e.x,a=e.y,n=t.devicePixelRatio||1;return{x:sx(s*n)/n||0,y:sx(a*n)/n||0}}function B9(e){var t,s=e.popper,a=e.popperRect,n=e.placement,i=e.variation,o=e.offsets,l=e.position,c=e.gpuAcceleration,d=e.adaptive,h=e.roundOffsets,f=e.isFixed,x=o.x,y=x===void 0?0:x,v=o.y,w=v===void 0?0:v,N=typeof h=="function"?h({x:y,y:w}):{x:y,y:w};y=N.x,w=N.y;var k=o.hasOwnProperty("x"),C=o.hasOwnProperty("y"),E=Mi,_=Ri,T=window;if(d){var A=Mb(s),P="clientHeight",M="clientWidth";if(A===mo(s)&&(A=e0(s),xd(A).position!=="static"&&l==="absolute"&&(P="scrollHeight",M="scrollWidth")),A=A,n===Ri||(n===Mi||n===Jo)&&i===Ay){_=Zo;var R=f&&A===T&&T.visualViewport?T.visualViewport.height:A[P];w-=R-a.height,w*=c?1:-1}if(n===Mi||(n===Ri||n===Zo)&&i===Ay){E=Jo;var $=f&&A===T&&T.visualViewport?T.visualViewport.width:A[M];y-=$-a.width,y*=c?1:-1}}var W=Object.assign({position:l},d&&RRe),I=h===!0?MRe({x:y,y:w},mo(s)):{x:y,y:w};if(y=I.x,w=I.y,c){var B;return Object.assign({},W,(B={},B[_]=C?"0":"",B[E]=k?"0":"",B.transform=(T.devicePixelRatio||1)<=1?"translate("+y+"px, "+w+"px)":"translate3d("+y+"px, "+w+"px, 0)",B))}return Object.assign({},W,(t={},t[_]=C?w+"px":"",t[E]=k?y+"px":"",t.transform="",t))}function LRe(e){var t=e.state,s=e.options,a=s.gpuAcceleration,n=a===void 0?!0:a,i=s.adaptive,o=i===void 0?!0:i,l=s.roundOffsets,c=l===void 0?!0:l,d={placement:hc(t.placement),variation:nx(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:n,isFixed:t.options.strategy==="fixed"};t.modifiersData.popperOffsets!=null&&(t.styles.popper=Object.assign({},t.styles.popper,B9(Object.assign({},d,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:o,roundOffsets:c})))),t.modifiersData.arrow!=null&&(t.styles.arrow=Object.assign({},t.styles.arrow,B9(Object.assign({},d,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:c})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})}const FRe={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:LRe,data:{}};var s1={passive:!0};function BRe(e){var t=e.state,s=e.instance,a=e.options,n=a.scroll,i=n===void 0?!0:n,o=a.resize,l=o===void 0?!0:o,c=mo(t.elements.popper),d=[].concat(t.scrollParents.reference,t.scrollParents.popper);return i&&d.forEach(function(h){h.addEventListener("scroll",s.update,s1)}),l&&c.addEventListener("resize",s.update,s1),function(){i&&d.forEach(function(h){h.removeEventListener("scroll",s.update,s1)}),l&&c.removeEventListener("resize",s.update,s1)}}const $Re={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:BRe,data:{}};var URe={left:"right",right:"left",bottom:"top",top:"bottom"};function Z1(e){return e.replace(/left|right|bottom|top/g,function(t){return URe[t]})}var VRe={start:"end",end:"start"};function $9(e){return e.replace(/start|end/g,function(t){return VRe[t]})}function RT(e){var t=mo(e),s=t.pageXOffset,a=t.pageYOffset;return{scrollLeft:s,scrollTop:a}}function MT(e){return ax(e0(e)).left+RT(e).scrollLeft}function WRe(e,t){var s=mo(e),a=e0(e),n=s.visualViewport,i=a.clientWidth,o=a.clientHeight,l=0,c=0;if(n){i=n.width,o=n.height;var d=OZ();(d||!d&&t==="fixed")&&(l=n.offsetLeft,c=n.offsetTop)}return{width:i,height:o,x:l+MT(e),y:c}}function zRe(e){var t,s=e0(e),a=RT(e),n=(t=e.ownerDocument)==null?void 0:t.body,i=lh(s.scrollWidth,s.clientWidth,n?n.scrollWidth:0,n?n.clientWidth:0),o=lh(s.scrollHeight,s.clientHeight,n?n.scrollHeight:0,n?n.clientHeight:0),l=-a.scrollLeft+MT(e),c=-a.scrollTop;return xd(n||s).direction==="rtl"&&(l+=lh(s.clientWidth,n?n.clientWidth:0)-i),{width:i,height:o,x:l,y:c}}function LT(e){var t=xd(e),s=t.overflow,a=t.overflowX,n=t.overflowY;return/auto|scroll|overlay|hidden/.test(s+n+a)}function BZ(e){return["html","body","#document"].indexOf(yc(e))>=0?e.ownerDocument.body:Wo(e)&&LT(e)?e:BZ(qk(e))}function yp(e,t){var s;t===void 0&&(t=[]);var a=BZ(e),n=a===((s=e.ownerDocument)==null?void 0:s.body),i=mo(a),o=n?[i].concat(i.visualViewport||[],LT(a)?a:[]):a,l=t.concat(o);return n?l:l.concat(yp(qk(o)))}function K_(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function qRe(e,t){var s=ax(e,!1,t==="fixed");return s.top=s.top+e.clientTop,s.left=s.left+e.clientLeft,s.bottom=s.top+e.clientHeight,s.right=s.left+e.clientWidth,s.width=e.clientWidth,s.height=e.clientHeight,s.x=s.left,s.y=s.top,s}function U9(e,t,s){return t===IZ?K_(WRe(e,s)):Eh(t)?qRe(t,s):K_(zRe(e0(e)))}function HRe(e){var t=yp(qk(e)),s=["absolute","fixed"].indexOf(xd(e).position)>=0,a=s&&Wo(e)?Mb(e):e;return Eh(a)?t.filter(function(n){return Eh(n)&&RZ(n,a)&&yc(n)!=="body"}):[]}function KRe(e,t,s,a){var n=t==="clippingParents"?HRe(e):[].concat(t),i=[].concat(n,[s]),o=i[0],l=i.reduce(function(c,d){var h=U9(e,d,a);return c.top=lh(h.top,c.top),c.right=xN(h.right,c.right),c.bottom=xN(h.bottom,c.bottom),c.left=lh(h.left,c.left),c},U9(e,o,a));return l.width=l.right-l.left,l.height=l.bottom-l.top,l.x=l.left,l.y=l.top,l}function $Z(e){var t=e.reference,s=e.element,a=e.placement,n=a?hc(a):null,i=a?nx(a):null,o=t.x+t.width/2-s.width/2,l=t.y+t.height/2-s.height/2,c;switch(n){case Ri:c={x:o,y:t.y-s.height};break;case Zo:c={x:o,y:t.y+t.height};break;case Jo:c={x:t.x+t.width,y:l};break;case Mi:c={x:t.x-s.width,y:l};break;default:c={x:t.x,y:t.y}}var d=n?OT(n):null;if(d!=null){var h=d==="y"?"height":"width";switch(i){case rx:c[d]=c[d]-(t[h]/2-s[h]/2);break;case Ay:c[d]=c[d]+(t[h]/2-s[h]/2);break}}return c}function Py(e,t){t===void 0&&(t={});var s=t,a=s.placement,n=a===void 0?e.placement:a,i=s.strategy,o=i===void 0?e.strategy:i,l=s.boundary,c=l===void 0?mRe:l,d=s.rootBoundary,h=d===void 0?IZ:d,f=s.elementContext,x=f===void 0?kg:f,y=s.altBoundary,v=y===void 0?!1:y,w=s.padding,N=w===void 0?0:w,k=LZ(typeof N!="number"?N:FZ(N,Rb)),C=x===kg?fRe:kg,E=e.rects.popper,_=e.elements[v?C:x],T=KRe(Eh(_)?_:_.contextElement||e0(e.elements.popper),c,h,o),A=ax(e.elements.reference),P=$Z({reference:A,element:E,placement:n}),M=K_(Object.assign({},E,P)),R=x===kg?M:A,$={top:T.top-R.top+k.top,bottom:R.bottom-T.bottom+k.bottom,left:T.left-R.left+k.left,right:R.right-T.right+k.right},W=e.modifiersData.offset;if(x===kg&&W){var I=W[n];Object.keys($).forEach(function(B){var O=[Jo,Zo].indexOf(B)>=0?1:-1,F=[Ri,Zo].indexOf(B)>=0?"y":"x";$[B]+=I[F]*O})}return $}function GRe(e,t){t===void 0&&(t={});var s=t,a=s.placement,n=s.boundary,i=s.rootBoundary,o=s.padding,l=s.flipVariations,c=s.allowedAutoPlacements,d=c===void 0?DZ:c,h=nx(a),f=h?l?L9:L9.filter(function(v){return nx(v)===h}):Rb,x=f.filter(function(v){return d.indexOf(v)>=0});x.length===0&&(x=f);var y=x.reduce(function(v,w){return v[w]=Py(e,{placement:w,boundary:n,rootBoundary:i,padding:o})[hc(w)],v},{});return Object.keys(y).sort(function(v,w){return y[v]-y[w]})}function YRe(e){if(hc(e)===TT)return[];var t=Z1(e);return[$9(e),t,$9(t)]}function XRe(e){var t=e.state,s=e.options,a=e.name;if(!t.modifiersData[a]._skip){for(var n=s.mainAxis,i=n===void 0?!0:n,o=s.altAxis,l=o===void 0?!0:o,c=s.fallbackPlacements,d=s.padding,h=s.boundary,f=s.rootBoundary,x=s.altBoundary,y=s.flipVariations,v=y===void 0?!0:y,w=s.allowedAutoPlacements,N=t.options.placement,k=hc(N),C=k===N,E=c||(C||!v?[Z1(N)]:YRe(N)),_=[N].concat(E).reduce(function(ne,ce){return ne.concat(hc(ce)===TT?GRe(t,{placement:ce,boundary:h,rootBoundary:f,padding:d,flipVariations:v,allowedAutoPlacements:w}):ce)},[]),T=t.rects.reference,A=t.rects.popper,P=new Map,M=!0,R=_[0],$=0;$<_.length;$++){var W=_[$],I=hc(W),B=nx(W)===rx,O=[Ri,Zo].indexOf(I)>=0,F=O?"width":"height",q=Py(t,{placement:W,boundary:h,rootBoundary:f,altBoundary:x,padding:d}),H=O?B?Jo:Mi:B?Zo:Ri;T[F]>A[F]&&(H=Z1(H));var K=Z1(H),V=[];if(i&&V.push(q[I]<=0),l&&V.push(q[H]<=0,q[K]<=0),V.every(function(ne){return ne})){R=W,M=!1;break}P.set(W,V)}if(M)for(var z=v?3:1,G=function(ce){var xe=_.find(function(_e){var oe=P.get(_e);if(oe)return oe.slice(0,ce).every(function(ie){return ie})});if(xe)return R=xe,"break"},te=z;te>0;te--){var he=G(te);if(he==="break")break}t.placement!==R&&(t.modifiersData[a]._skip=!0,t.placement=R,t.reset=!0)}}const QRe={name:"flip",enabled:!0,phase:"main",fn:XRe,requiresIfExists:["offset"],data:{_skip:!1}};function V9(e,t,s){return s===void 0&&(s={x:0,y:0}),{top:e.top-t.height-s.y,right:e.right-t.width+s.x,bottom:e.bottom-t.height+s.y,left:e.left-t.width-s.x}}function W9(e){return[Ri,Jo,Zo,Mi].some(function(t){return e[t]>=0})}function ZRe(e){var t=e.state,s=e.name,a=t.rects.reference,n=t.rects.popper,i=t.modifiersData.preventOverflow,o=Py(t,{elementContext:"reference"}),l=Py(t,{altBoundary:!0}),c=V9(o,a),d=V9(l,n,i),h=W9(c),f=W9(d);t.modifiersData[s]={referenceClippingOffsets:c,popperEscapeOffsets:d,isReferenceHidden:h,hasPopperEscaped:f},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":h,"data-popper-escaped":f})}const JRe={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:ZRe};function eMe(e,t,s){var a=hc(e),n=[Mi,Ri].indexOf(a)>=0?-1:1,i=typeof s=="function"?s(Object.assign({},t,{placement:e})):s,o=i[0],l=i[1];return o=o||0,l=(l||0)*n,[Mi,Jo].indexOf(a)>=0?{x:l,y:o}:{x:o,y:l}}function tMe(e){var t=e.state,s=e.options,a=e.name,n=s.offset,i=n===void 0?[0,0]:n,o=DZ.reduce(function(h,f){return h[f]=eMe(f,t.rects,i),h},{}),l=o[t.placement],c=l.x,d=l.y;t.modifiersData.popperOffsets!=null&&(t.modifiersData.popperOffsets.x+=c,t.modifiersData.popperOffsets.y+=d),t.modifiersData[a]=o}const rMe={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:tMe};function sMe(e){var t=e.state,s=e.name;t.modifiersData[s]=$Z({reference:t.rects.reference,element:t.rects.popper,placement:t.placement})}const aMe={name:"popperOffsets",enabled:!0,phase:"read",fn:sMe,data:{}};function nMe(e){return e==="x"?"y":"x"}function iMe(e){var t=e.state,s=e.options,a=e.name,n=s.mainAxis,i=n===void 0?!0:n,o=s.altAxis,l=o===void 0?!1:o,c=s.boundary,d=s.rootBoundary,h=s.altBoundary,f=s.padding,x=s.tether,y=x===void 0?!0:x,v=s.tetherOffset,w=v===void 0?0:v,N=Py(t,{boundary:c,rootBoundary:d,padding:f,altBoundary:h}),k=hc(t.placement),C=nx(t.placement),E=!C,_=OT(k),T=nMe(_),A=t.modifiersData.popperOffsets,P=t.rects.reference,M=t.rects.popper,R=typeof w=="function"?w(Object.assign({},t.rects,{placement:t.placement})):w,$=typeof R=="number"?{mainAxis:R,altAxis:R}:Object.assign({mainAxis:0,altAxis:0},R),W=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,I={x:0,y:0};if(A){if(i){var B,O=_==="y"?Ri:Mi,F=_==="y"?Zo:Jo,q=_==="y"?"height":"width",H=A[_],K=H+N[O],V=H-N[F],z=y?-M[q]/2:0,G=C===rx?P[q]:M[q],te=C===rx?-M[q]:-P[q],he=t.elements.arrow,ne=y&&he?DT(he):{width:0,height:0},ce=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:MZ(),xe=ce[O],_e=ce[F],oe=pp(0,P[q],ne[q]),ie=E?P[q]/2-z-oe-xe-$.mainAxis:G-oe-xe-$.mainAxis,ge=E?-P[q]/2+z+oe+_e+$.mainAxis:te+oe+_e+$.mainAxis,Z=t.elements.arrow&&Mb(t.elements.arrow),Q=Z?_==="y"?Z.clientTop||0:Z.clientLeft||0:0,re=(B=W==null?void 0:W[_])!=null?B:0,pe=H+ie-re-Q,Se=H+ge-re,je=pp(y?xN(K,pe):K,H,y?lh(V,Se):V);A[_]=je,I[_]=je-H}if(l){var Fe,ke=_==="x"?Ri:Mi,Ve=_==="x"?Zo:Jo,le=A[T],me=T==="y"?"height":"width",ve=le+N[ke],Ze=le-N[Ve],$e=[Ri,Mi].indexOf(k)!==-1,Ne=(Fe=W==null?void 0:W[T])!=null?Fe:0,He=$e?ve:le-P[me]-M[me]-Ne+$.altAxis,gt=$e?le+P[me]+M[me]-Ne-$.altAxis:Ze,yt=y&&$e?PRe(He,le,gt):pp(y?He:ve,le,y?gt:Ze);A[T]=yt,I[T]=yt-le}t.modifiersData[a]=I}}const oMe={name:"preventOverflow",enabled:!0,phase:"main",fn:iMe,requiresIfExists:["offset"]};function lMe(e){return{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}}function cMe(e){return e===mo(e)||!Wo(e)?RT(e):lMe(e)}function dMe(e){var t=e.getBoundingClientRect(),s=sx(t.width)/e.offsetWidth||1,a=sx(t.height)/e.offsetHeight||1;return s!==1||a!==1}function uMe(e,t,s){s===void 0&&(s=!1);var a=Wo(t),n=Wo(t)&&dMe(t),i=e0(t),o=ax(e,n,s),l={scrollLeft:0,scrollTop:0},c={x:0,y:0};return(a||!a&&!s)&&((yc(t)!=="body"||LT(i))&&(l=cMe(t)),Wo(t)?(c=ax(t,!0),c.x+=t.clientLeft,c.y+=t.clientTop):i&&(c.x=MT(i))),{x:o.left+l.scrollLeft-c.x,y:o.top+l.scrollTop-c.y,width:o.width,height:o.height}}function hMe(e){var t=new Map,s=new Set,a=[];e.forEach(function(i){t.set(i.name,i)});function n(i){s.add(i.name);var o=[].concat(i.requires||[],i.requiresIfExists||[]);o.forEach(function(l){if(!s.has(l)){var c=t.get(l);c&&n(c)}}),a.push(i)}return e.forEach(function(i){s.has(i.name)||n(i)}),a}function mMe(e){var t=hMe(e);return kRe.reduce(function(s,a){return s.concat(t.filter(function(n){return n.phase===a}))},[])}function fMe(e){var t;return function(){return t||(t=new Promise(function(s){Promise.resolve().then(function(){t=void 0,s(e())})})),t}}function xMe(e){var t=e.reduce(function(s,a){var n=s[a.name];return s[a.name]=n?Object.assign({},n,a,{options:Object.assign({},n.options,a.options),data:Object.assign({},n.data,a.data)}):a,s},{});return Object.keys(t).map(function(s){return t[s]})}var z9={placement:"bottom",modifiers:[],strategy:"absolute"};function q9(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return!t.some(function(a){return!(a&&typeof a.getBoundingClientRect=="function")})}function gMe(e){e===void 0&&(e={});var t=e,s=t.defaultModifiers,a=s===void 0?[]:s,n=t.defaultOptions,i=n===void 0?z9:n;return function(l,c,d){d===void 0&&(d=i);var h={placement:"bottom",orderedModifiers:[],options:Object.assign({},z9,i),modifiersData:{},elements:{reference:l,popper:c},attributes:{},styles:{}},f=[],x=!1,y={state:h,setOptions:function(k){var C=typeof k=="function"?k(h.options):k;w(),h.options=Object.assign({},i,h.options,C),h.scrollParents={reference:Eh(l)?yp(l):l.contextElement?yp(l.contextElement):[],popper:yp(c)};var E=mMe(xMe([].concat(a,h.options.modifiers)));return h.orderedModifiers=E.filter(function(_){return _.enabled}),v(),y.update()},forceUpdate:function(){if(!x){var k=h.elements,C=k.reference,E=k.popper;if(q9(C,E)){h.rects={reference:uMe(C,Mb(E),h.options.strategy==="fixed"),popper:DT(E)},h.reset=!1,h.placement=h.options.placement,h.orderedModifiers.forEach(function($){return h.modifiersData[$.name]=Object.assign({},$.data)});for(var _=0;_<h.orderedModifiers.length;_++){if(h.reset===!0){h.reset=!1,_=-1;continue}var T=h.orderedModifiers[_],A=T.fn,P=T.options,M=P===void 0?{}:P,R=T.name;typeof A=="function"&&(h=A({state:h,options:M,name:R,instance:y})||h)}}}},update:fMe(function(){return new Promise(function(N){y.forceUpdate(),N(h)})}),destroy:function(){w(),x=!0}};if(!q9(l,c))return y;y.setOptions(d).then(function(N){!x&&d.onFirstUpdate&&d.onFirstUpdate(N)});function v(){h.orderedModifiers.forEach(function(N){var k=N.name,C=N.options,E=C===void 0?{}:C,_=N.effect;if(typeof _=="function"){var T=_({state:h,name:k,instance:y,options:E}),A=function(){};f.push(T||A)}})}function w(){f.forEach(function(N){return N()}),f=[]}return y}}var pMe=[$Re,aMe,FRe,_Re,rMe,QRe,oMe,ORe,JRe],yMe=gMe({defaultModifiers:pMe});function ix(e){var f;const{elementType:t,externalSlotProps:s,ownerState:a,skipResolvingSlotProps:n=!1,...i}=e,o=n?{}:AZ(s,a),{props:l,internalRef:c}=TZ({...i,externalSlotProps:o}),d=un(c,o==null?void 0:o.ref,(f=e.additionalProps)==null?void 0:f.ref);return EZ(t,{...l,ref:d},a)}function Fx(e){var t;return parseInt(p.version,10)>=19?((t=e==null?void 0:e.props)==null?void 0:t.ref)||null:(e==null?void 0:e.ref)||null}function bMe(e){return typeof e=="function"?e():e}const UZ=p.forwardRef(function(t,s){const{children:a,container:n,disablePortal:i=!1}=t,[o,l]=p.useState(null),c=un(p.isValidElement(a)?Fx(a):null,s);if(pc(()=>{i||l(bMe(n)||document.body)},[n,i]),pc(()=>{if(o&&!i)return A9(s,o),()=>{A9(s,null)}},[s,o,i]),i){if(p.isValidElement(a)){const d={ref:c};return p.cloneElement(a,d)}return a}return o&&ux.createPortal(a,o)});function vMe(e){return er("MuiPopper",e)}Yt("MuiPopper",["root"]);function wMe(e,t){if(t==="ltr")return e;switch(e){case"bottom-end":return"bottom-start";case"bottom-start":return"bottom-end";case"top-end":return"top-start";case"top-start":return"top-end";default:return e}}function G_(e){return typeof e=="function"?e():e}function jMe(e){return e.nodeType!==void 0}const NMe=e=>{const{classes:t}=e;return tr({root:["root"]},vMe,t)},kMe={},SMe=p.forwardRef(function(t,s){const{anchorEl:a,children:n,direction:i,disablePortal:o,modifiers:l,open:c,placement:d,popperOptions:h,popperRef:f,slotProps:x={},slots:y={},TransitionProps:v,ownerState:w,...N}=t,k=p.useRef(null),C=un(k,s),E=p.useRef(null),_=un(E,f),T=p.useRef(_);pc(()=>{T.current=_},[_]),p.useImperativeHandle(f,()=>E.current,[]);const A=wMe(d,i),[P,M]=p.useState(A),[R,$]=p.useState(G_(a));p.useEffect(()=>{E.current&&E.current.forceUpdate()}),p.useEffect(()=>{a&&$(G_(a))},[a]),pc(()=>{if(!R||!c)return;const F=K=>{M(K.placement)};let q=[{name:"preventOverflow",options:{altBoundary:o}},{name:"flip",options:{altBoundary:o}},{name:"onUpdate",enabled:!0,phase:"afterWrite",fn:({state:K})=>{F(K)}}];l!=null&&(q=q.concat(l)),h&&h.modifiers!=null&&(q=q.concat(h.modifiers));const H=yMe(R,k.current,{placement:A,...h,modifiers:q});return T.current(H),()=>{H.destroy(),T.current(null)}},[R,o,l,c,h,A]);const W={placement:P};v!==null&&(W.TransitionProps=v);const I=NMe(t),B=y.root??"div",O=ix({elementType:B,externalSlotProps:x.root,externalForwardedProps:N,additionalProps:{role:"tooltip",ref:C},ownerState:t,className:I.root});return r.jsx(B,{...O,children:typeof n=="function"?n(W):n})}),CMe=p.forwardRef(function(t,s){const{anchorEl:a,children:n,container:i,direction:o="ltr",disablePortal:l=!1,keepMounted:c=!1,modifiers:d,open:h,placement:f="bottom",popperOptions:x=kMe,popperRef:y,style:v,transition:w=!1,slotProps:N={},slots:k={},...C}=t,[E,_]=p.useState(!0),T=()=>{_(!1)},A=()=>{_(!0)};if(!c&&!h&&(!w||E))return null;let P;if(i)P=i;else if(a){const $=G_(a);P=$&&jMe($)?Bi($).body:Bi(null).body}const M=!h&&c&&(!w||E)?"none":void 0,R=w?{in:h,onEnter:T,onExited:A}:void 0;return r.jsx(UZ,{disablePortal:l,container:P,children:r.jsx(SMe,{anchorEl:a,direction:o,disablePortal:l,modifiers:d,ref:s,open:w?!E:h,placement:f,popperOptions:x,popperRef:y,slotProps:N,slots:k,...C,style:{position:"fixed",top:0,left:0,display:M,...v},TransitionProps:R,children:n})})}),_Me=tt(CMe,{name:"MuiPopper",slot:"Root"})({}),VZ=p.forwardRef(function(t,s){const a=Ox(),n=ar({props:t,name:"MuiPopper"}),{anchorEl:i,component:o,components:l,componentsProps:c,container:d,disablePortal:h,keepMounted:f,modifiers:x,open:y,placement:v,popperOptions:w,popperRef:N,transition:k,slots:C,slotProps:E,..._}=n,T=(C==null?void 0:C.root)??(l==null?void 0:l.Root),A={anchorEl:i,container:d,disablePortal:h,keepMounted:f,modifiers:x,open:y,placement:v,popperOptions:w,popperRef:N,transition:k,..._};return r.jsx(_Me,{as:o,direction:a?"rtl":"ltr",slots:{root:T},slotProps:E??c,...A,ref:s})}),EMe=gi(r.jsx("path",{d:"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm5 13.59L15.59 17 12 13.41 8.41 17 7 15.59 10.59 12 7 8.41 8.41 7 12 10.59 15.59 7 17 8.41 13.41 12 17 15.59z"}));function AMe(e){return er("MuiChip",e)}const jr=Yt("MuiChip",["root","sizeSmall","sizeMedium","colorDefault","colorError","colorInfo","colorPrimary","colorSecondary","colorSuccess","colorWarning","disabled","clickable","clickableColorPrimary","clickableColorSecondary","deletable","deletableColorPrimary","deletableColorSecondary","outlined","filled","outlinedPrimary","outlinedSecondary","filledPrimary","filledSecondary","avatar","avatarSmall","avatarMedium","avatarColorPrimary","avatarColorSecondary","icon","iconSmall","iconMedium","iconColorPrimary","iconColorSecondary","label","labelSmall","labelMedium","deleteIcon","deleteIconSmall","deleteIconMedium","deleteIconColorPrimary","deleteIconColorSecondary","deleteIconOutlinedColorPrimary","deleteIconOutlinedColorSecondary","deleteIconFilledColorPrimary","deleteIconFilledColorSecondary","focusVisible"]),PMe=e=>{const{classes:t,disabled:s,size:a,color:n,iconColor:i,onDelete:o,clickable:l,variant:c}=e,d={root:["root",c,s&&"disabled",`size${Ye(a)}`,`color${Ye(n)}`,l&&"clickable",l&&`clickableColor${Ye(n)}`,o&&"deletable",o&&`deletableColor${Ye(n)}`,`${c}${Ye(n)}`],label:["label",`label${Ye(a)}`],avatar:["avatar",`avatar${Ye(a)}`,`avatarColor${Ye(n)}`],icon:["icon",`icon${Ye(a)}`,`iconColor${Ye(i)}`],deleteIcon:["deleteIcon",`deleteIcon${Ye(a)}`,`deleteIconColor${Ye(n)}`,`deleteIcon${Ye(c)}Color${Ye(n)}`]};return tr(d,AMe,t)},TMe=tt("div",{name:"MuiChip",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:s}=e,{color:a,iconColor:n,clickable:i,onDelete:o,size:l,variant:c}=s;return[{[`& .${jr.avatar}`]:t.avatar},{[`& .${jr.avatar}`]:t[`avatar${Ye(l)}`]},{[`& .${jr.avatar}`]:t[`avatarColor${Ye(a)}`]},{[`& .${jr.icon}`]:t.icon},{[`& .${jr.icon}`]:t[`icon${Ye(l)}`]},{[`& .${jr.icon}`]:t[`iconColor${Ye(n)}`]},{[`& .${jr.deleteIcon}`]:t.deleteIcon},{[`& .${jr.deleteIcon}`]:t[`deleteIcon${Ye(l)}`]},{[`& .${jr.deleteIcon}`]:t[`deleteIconColor${Ye(a)}`]},{[`& .${jr.deleteIcon}`]:t[`deleteIcon${Ye(c)}Color${Ye(a)}`]},t.root,t[`size${Ye(l)}`],t[`color${Ye(a)}`],i&&t.clickable,i&&a!=="default"&&t[`clickableColor${Ye(a)}`],o&&t.deletable,o&&a!=="default"&&t[`deletableColor${Ye(a)}`],t[c],t[`${c}${Ye(a)}`]]}})(Jt(({theme:e})=>{const t=e.palette.mode==="light"?e.palette.grey[700]:e.palette.grey[300];return{maxWidth:"100%",fontFamily:e.typography.fontFamily,fontSize:e.typography.pxToRem(13),display:"inline-flex",alignItems:"center",justifyContent:"center",height:32,lineHeight:1.5,color:(e.vars||e).palette.text.primary,backgroundColor:(e.vars||e).palette.action.selected,borderRadius:32/2,whiteSpace:"nowrap",transition:e.transitions.create(["background-color","box-shadow"]),cursor:"unset",outline:0,textDecoration:"none",border:0,padding:0,verticalAlign:"middle",boxSizing:"border-box",[`&.${jr.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity,pointerEvents:"none"},[`& .${jr.avatar}`]:{marginLeft:5,marginRight:-6,width:24,height:24,color:e.vars?e.vars.palette.Chip.defaultAvatarColor:t,fontSize:e.typography.pxToRem(12)},[`& .${jr.avatarColorPrimary}`]:{color:(e.vars||e).palette.primary.contrastText,backgroundColor:(e.vars||e).palette.primary.dark},[`& .${jr.avatarColorSecondary}`]:{color:(e.vars||e).palette.secondary.contrastText,backgroundColor:(e.vars||e).palette.secondary.dark},[`& .${jr.avatarSmall}`]:{marginLeft:4,marginRight:-4,width:18,height:18,fontSize:e.typography.pxToRem(10)},[`& .${jr.icon}`]:{marginLeft:5,marginRight:-6},[`& .${jr.deleteIcon}`]:{WebkitTapHighlightColor:"transparent",color:e.alpha((e.vars||e).palette.text.primary,.26),fontSize:22,cursor:"pointer",margin:"0 5px 0 -6px","&:hover":{color:e.alpha((e.vars||e).palette.text.primary,.4)}},variants:[{props:{size:"small"},style:{height:24,[`& .${jr.icon}`]:{fontSize:18,marginLeft:4,marginRight:-4},[`& .${jr.deleteIcon}`]:{fontSize:16,marginRight:4,marginLeft:-4}}},...Object.entries(e.palette).filter(ca(["contrastText"])).map(([s])=>({props:{color:s},style:{backgroundColor:(e.vars||e).palette[s].main,color:(e.vars||e).palette[s].contrastText,[`& .${jr.deleteIcon}`]:{color:e.alpha((e.vars||e).palette[s].contrastText,.7),"&:hover, &:active":{color:(e.vars||e).palette[s].contrastText}}}})),{props:s=>s.iconColor===s.color,style:{[`& .${jr.icon}`]:{color:e.vars?e.vars.palette.Chip.defaultIconColor:t}}},{props:s=>s.iconColor===s.color&&s.color!=="default",style:{[`& .${jr.icon}`]:{color:"inherit"}}},{props:{onDelete:!0},style:{[`&.${jr.focusVisible}`]:{backgroundColor:e.alpha((e.vars||e).palette.action.selected,`${(e.vars||e).palette.action.selectedOpacity} + ${(e.vars||e).palette.action.focusOpacity}`)}}},...Object.entries(e.palette).filter(ca(["dark"])).map(([s])=>({props:{color:s,onDelete:!0},style:{[`&.${jr.focusVisible}`]:{background:(e.vars||e).palette[s].dark}}})),{props:{clickable:!0},style:{userSelect:"none",WebkitTapHighlightColor:"transparent",cursor:"pointer","&:hover":{backgroundColor:e.alpha((e.vars||e).palette.action.selected,`${(e.vars||e).palette.action.selectedOpacity} + ${(e.vars||e).palette.action.hoverOpacity}`)},[`&.${jr.focusVisible}`]:{backgroundColor:e.alpha((e.vars||e).palette.action.selected,`${(e.vars||e).palette.action.selectedOpacity} + ${(e.vars||e).palette.action.focusOpacity}`)},"&:active":{boxShadow:(e.vars||e).shadows[1]}}},...Object.entries(e.palette).filter(ca(["dark"])).map(([s])=>({props:{color:s,clickable:!0},style:{[`&:hover, &.${jr.focusVisible}`]:{backgroundColor:(e.vars||e).palette[s].dark}}})),{props:{variant:"outlined"},style:{backgroundColor:"transparent",border:e.vars?`1px solid ${e.vars.palette.Chip.defaultBorder}`:`1px solid ${e.palette.mode==="light"?e.palette.grey[400]:e.palette.grey[700]}`,[`&.${jr.clickable}:hover`]:{backgroundColor:(e.vars||e).palette.action.hover},[`&.${jr.focusVisible}`]:{backgroundColor:(e.vars||e).palette.action.focus},[`& .${jr.avatar}`]:{marginLeft:4},[`& .${jr.avatarSmall}`]:{marginLeft:2},[`& .${jr.icon}`]:{marginLeft:4},[`& .${jr.iconSmall}`]:{marginLeft:2},[`& .${jr.deleteIcon}`]:{marginRight:5},[`& .${jr.deleteIconSmall}`]:{marginRight:3}}},...Object.entries(e.palette).filter(ca()).map(([s])=>({props:{variant:"outlined",color:s},style:{color:(e.vars||e).palette[s].main,border:`1px solid ${e.alpha((e.vars||e).palette[s].main,.7)}`,[`&.${jr.clickable}:hover`]:{backgroundColor:e.alpha((e.vars||e).palette[s].main,(e.vars||e).palette.action.hoverOpacity)},[`&.${jr.focusVisible}`]:{backgroundColor:e.alpha((e.vars||e).palette[s].main,(e.vars||e).palette.action.focusOpacity)},[`& .${jr.deleteIcon}`]:{color:e.alpha((e.vars||e).palette[s].main,.7),"&:hover, &:active":{color:(e.vars||e).palette[s].main}}}}))]}})),IMe=tt("span",{name:"MuiChip",slot:"Label",overridesResolver:(e,t)=>{const{ownerState:s}=e,{size:a}=s;return[t.label,t[`label${Ye(a)}`]]}})({overflow:"hidden",textOverflow:"ellipsis",paddingLeft:12,paddingRight:12,whiteSpace:"nowrap",variants:[{props:{variant:"outlined"},style:{paddingLeft:11,paddingRight:11}},{props:{size:"small"},style:{paddingLeft:8,paddingRight:8}},{props:{size:"small",variant:"outlined"},style:{paddingLeft:7,paddingRight:7}}]});function H9(e){return e.key==="Backspace"||e.key==="Delete"}const Si=p.forwardRef(function(t,s){const a=ar({props:t,name:"MuiChip"}),{avatar:n,className:i,clickable:o,color:l="default",component:c,deleteIcon:d,disabled:h=!1,icon:f,label:x,onClick:y,onDelete:v,onKeyDown:w,onKeyUp:N,size:k="medium",variant:C="filled",tabIndex:E,skipFocusWhenDisabled:_=!1,slots:T={},slotProps:A={},...P}=a,M=p.useRef(null),R=un(M,s),$=xe=>{xe.stopPropagation(),v&&v(xe)},W=xe=>{xe.currentTarget===xe.target&&H9(xe)&&xe.preventDefault(),w&&w(xe)},I=xe=>{xe.currentTarget===xe.target&&v&&H9(xe)&&v(xe),N&&N(xe)},B=o!==!1&&y?!0:o,O=B||v?_h:c||"div",F={...a,component:O,disabled:h,size:k,color:l,iconColor:p.isValidElement(f)&&f.props.color||l,onDelete:!!v,clickable:B,variant:C},q=PMe(F),H=O===_h?{component:c||"div",focusVisibleClassName:q.focusVisible,...v&&{disableRipple:!0}}:{};let K=null;v&&(K=d&&p.isValidElement(d)?p.cloneElement(d,{className:fe(d.props.className,q.deleteIcon),onClick:$}):r.jsx(EMe,{className:q.deleteIcon,onClick:$}));let V=null;n&&p.isValidElement(n)&&(V=p.cloneElement(n,{className:fe(q.avatar,n.props.className)}));let z=null;f&&p.isValidElement(f)&&(z=p.cloneElement(f,{className:fe(q.icon,f.props.className)}));const G={slots:T,slotProps:A},[te,he]=nr("root",{elementType:TMe,externalForwardedProps:{...G,...P},ownerState:F,shouldForwardComponentProp:!0,ref:R,className:fe(q.root,i),additionalProps:{disabled:B&&h?!0:void 0,tabIndex:_&&h?-1:E,...H},getSlotProps:xe=>({...xe,onClick:_e=>{var oe;(oe=xe.onClick)==null||oe.call(xe,_e),y==null||y(_e)},onKeyDown:_e=>{var oe;(oe=xe.onKeyDown)==null||oe.call(xe,_e),W(_e)},onKeyUp:_e=>{var oe;(oe=xe.onKeyUp)==null||oe.call(xe,_e),I(_e)}})}),[ne,ce]=nr("label",{elementType:IMe,externalForwardedProps:G,ownerState:F,className:q.label});return r.jsxs(te,{as:O,...he,children:[V||z,r.jsx(ne,{...ce,children:x}),K]})});function a1(e){return parseInt(e,10)||0}const DMe={shadow:{visibility:"hidden",position:"absolute",overflow:"hidden",height:0,top:0,left:0,transform:"translateZ(0)"}};function OMe(e){for(const t in e)return!1;return!0}function K9(e){return OMe(e)||e.outerHeightStyle===0&&!e.overflowing}const RMe=p.forwardRef(function(t,s){const{onChange:a,maxRows:n,minRows:i=1,style:o,value:l,...c}=t,{current:d}=p.useRef(l!=null),h=p.useRef(null),f=un(s,h),x=p.useRef(null),y=p.useRef(null),v=p.useCallback(()=>{const E=h.current,_=y.current;if(!E||!_)return;const A=Ol(E).getComputedStyle(E);if(A.width==="0px")return{outerHeightStyle:0,overflowing:!1};_.style.width=A.width,_.value=E.value||t.placeholder||"x",_.value.slice(-1)===`
`&&(_.value+=" ");const P=A.boxSizing,M=a1(A.paddingBottom)+a1(A.paddingTop),R=a1(A.borderBottomWidth)+a1(A.borderTopWidth),$=_.scrollHeight;_.value="x";const W=_.scrollHeight;let I=$;i&&(I=Math.max(Number(i)*W,I)),n&&(I=Math.min(Number(n)*W,I)),I=Math.max(I,W);const B=I+(P==="border-box"?M+R:0),O=Math.abs(I-$)<=1;return{outerHeightStyle:B,overflowing:O}},[n,i,t.placeholder]),w=Vo(()=>{const E=h.current,_=v();if(!E||!_||K9(_))return!1;const T=_.outerHeightStyle;return x.current!=null&&x.current!==T}),N=p.useCallback(()=>{const E=h.current,_=v();if(!E||!_||K9(_))return;const T=_.outerHeightStyle;x.current!==T&&(x.current=T,E.style.height=`${T}px`),E.style.overflow=_.overflowing?"hidden":""},[v]),k=p.useRef(-1);pc(()=>{const E=Vk(N),_=h==null?void 0:h.current;if(!_)return;const T=Ol(_);T.addEventListener("resize",E);let A;return typeof ResizeObserver<"u"&&(A=new ResizeObserver(()=>{w()&&(A.unobserve(_),cancelAnimationFrame(k.current),N(),k.current=requestAnimationFrame(()=>{A.observe(_)}))}),A.observe(_)),()=>{E.clear(),cancelAnimationFrame(k.current),T.removeEventListener("resize",E),A&&A.disconnect()}},[v,N,w]),pc(()=>{N()});const C=E=>{d||N();const _=E.target,T=_.value.length,A=_.value.endsWith(`
`),P=_.selectionStart===T;A&&P&&_.setSelectionRange(T,T),a&&a(E)};return r.jsxs(p.Fragment,{children:[r.jsx("textarea",{value:l,onChange:C,ref:f,rows:i,style:o,...c}),r.jsx("textarea",{"aria-hidden":!0,className:t.className,readOnly:!0,ref:y,tabIndex:-1,style:{...DMe.shadow,...o,paddingTop:0,paddingBottom:0}})]})});function Fh({props:e,states:t,muiFormControl:s}){return t.reduce((a,n)=>(a[n]=e[n],s&&typeof e[n]>"u"&&(a[n]=s[n]),a),{})}const FT=p.createContext(void 0);function t0(){return p.useContext(FT)}function G9(e){return e!=null&&!(Array.isArray(e)&&e.length===0)}function gN(e,t=!1){return e&&(G9(e.value)&&e.value!==""||t&&G9(e.defaultValue)&&e.defaultValue!=="")}function MMe(e){return e.startAdornment}function LMe(e){return er("MuiInputBase",e)}const ox=Yt("MuiInputBase",["root","formControl","focused","disabled","adornedStart","adornedEnd","error","sizeSmall","multiline","colorSecondary","fullWidth","hiddenLabel","readOnly","input","inputSizeSmall","inputMultiline","inputTypeSearch","inputAdornedStart","inputAdornedEnd","inputHiddenLabel"]);var Y9;const Hk=(e,t)=>{const{ownerState:s}=e;return[t.root,s.formControl&&t.formControl,s.startAdornment&&t.adornedStart,s.endAdornment&&t.adornedEnd,s.error&&t.error,s.size==="small"&&t.sizeSmall,s.multiline&&t.multiline,s.color&&t[`color${Ye(s.color)}`],s.fullWidth&&t.fullWidth,s.hiddenLabel&&t.hiddenLabel]},Kk=(e,t)=>{const{ownerState:s}=e;return[t.input,s.size==="small"&&t.inputSizeSmall,s.multiline&&t.inputMultiline,s.type==="search"&&t.inputTypeSearch,s.startAdornment&&t.inputAdornedStart,s.endAdornment&&t.inputAdornedEnd,s.hiddenLabel&&t.inputHiddenLabel]},FMe=e=>{const{classes:t,color:s,disabled:a,error:n,endAdornment:i,focused:o,formControl:l,fullWidth:c,hiddenLabel:d,multiline:h,readOnly:f,size:x,startAdornment:y,type:v}=e,w={root:["root",`color${Ye(s)}`,a&&"disabled",n&&"error",c&&"fullWidth",o&&"focused",l&&"formControl",x&&x!=="medium"&&`size${Ye(x)}`,h&&"multiline",y&&"adornedStart",i&&"adornedEnd",d&&"hiddenLabel",f&&"readOnly"],input:["input",a&&"disabled",v==="search"&&"inputTypeSearch",h&&"inputMultiline",x==="small"&&"inputSizeSmall",d&&"inputHiddenLabel",y&&"inputAdornedStart",i&&"inputAdornedEnd",f&&"readOnly"]};return tr(w,LMe,t)},Gk=tt("div",{name:"MuiInputBase",slot:"Root",overridesResolver:Hk})(Jt(({theme:e})=>({...e.typography.body1,color:(e.vars||e).palette.text.primary,lineHeight:"1.4375em",boxSizing:"border-box",position:"relative",cursor:"text",display:"inline-flex",alignItems:"center",[`&.${ox.disabled}`]:{color:(e.vars||e).palette.text.disabled,cursor:"default"},variants:[{props:({ownerState:t})=>t.multiline,style:{padding:"4px 0 5px"}},{props:({ownerState:t,size:s})=>t.multiline&&s==="small",style:{paddingTop:1}},{props:({ownerState:t})=>t.fullWidth,style:{width:"100%"}}]}))),Yk=tt("input",{name:"MuiInputBase",slot:"Input",overridesResolver:Kk})(Jt(({theme:e})=>{const t=e.palette.mode==="light",s={color:"currentColor",...e.vars?{opacity:e.vars.opacity.inputPlaceholder}:{opacity:t?.42:.5},transition:e.transitions.create("opacity",{duration:e.transitions.duration.shorter})},a={opacity:"0 !important"},n=e.vars?{opacity:e.vars.opacity.inputPlaceholder}:{opacity:t?.42:.5};return{font:"inherit",letterSpacing:"inherit",color:"currentColor",padding:"4px 0 5px",border:0,boxSizing:"content-box",background:"none",height:"1.4375em",margin:0,WebkitTapHighlightColor:"transparent",display:"block",minWidth:0,width:"100%","&::-webkit-input-placeholder":s,"&::-moz-placeholder":s,"&::-ms-input-placeholder":s,"&:focus":{outline:0},"&:invalid":{boxShadow:"none"},"&::-webkit-search-decoration":{WebkitAppearance:"none"},[`label[data-shrink=false] + .${ox.formControl} &`]:{"&::-webkit-input-placeholder":a,"&::-moz-placeholder":a,"&::-ms-input-placeholder":a,"&:focus::-webkit-input-placeholder":n,"&:focus::-moz-placeholder":n,"&:focus::-ms-input-placeholder":n},[`&.${ox.disabled}`]:{opacity:1,WebkitTextFillColor:(e.vars||e).palette.text.disabled},variants:[{props:({ownerState:i})=>!i.disableInjectingGlobalStyles,style:{animationName:"mui-auto-fill-cancel",animationDuration:"10ms","&:-webkit-autofill":{animationDuration:"5000s",animationName:"mui-auto-fill"}}},{props:{size:"small"},style:{paddingTop:1}},{props:({ownerState:i})=>i.multiline,style:{height:"auto",resize:"none",padding:0,paddingTop:0}},{props:{type:"search"},style:{MozAppearance:"textfield"}}]}})),X9=aOe({"@keyframes mui-auto-fill":{from:{display:"block"}},"@keyframes mui-auto-fill-cancel":{from:{display:"block"}}}),BT=p.forwardRef(function(t,s){const a=ar({props:t,name:"MuiInputBase"}),{"aria-describedby":n,autoComplete:i,autoFocus:o,className:l,color:c,components:d={},componentsProps:h={},defaultValue:f,disabled:x,disableInjectingGlobalStyles:y,endAdornment:v,error:w,fullWidth:N=!1,id:k,inputComponent:C="input",inputProps:E={},inputRef:_,margin:T,maxRows:A,minRows:P,multiline:M=!1,name:R,onBlur:$,onChange:W,onClick:I,onFocus:B,onKeyDown:O,onKeyUp:F,placeholder:q,readOnly:H,renderSuffix:K,rows:V,size:z,slotProps:G={},slots:te={},startAdornment:he,type:ne="text",value:ce,...xe}=a,_e=E.value!=null?E.value:ce,{current:oe}=p.useRef(_e!=null),ie=p.useRef(),ge=p.useCallback(De=>{},[]),Z=un(ie,_,E.ref,ge),[Q,re]=p.useState(!1),pe=t0(),Se=Fh({props:a,muiFormControl:pe,states:["color","disabled","error","hiddenLabel","size","required","filled"]});Se.focused=pe?pe.focused:Q,p.useEffect(()=>{!pe&&x&&Q&&(re(!1),$&&$())},[pe,x,Q,$]);const je=pe&&pe.onFilled,Fe=pe&&pe.onEmpty,ke=p.useCallback(De=>{gN(De)?je&&je():Fe&&Fe()},[je,Fe]);pc(()=>{oe&&ke({value:_e})},[_e,ke,oe]);const Ve=De=>{B&&B(De),E.onFocus&&E.onFocus(De),pe&&pe.onFocus?pe.onFocus(De):re(!0)},le=De=>{$&&$(De),E.onBlur&&E.onBlur(De),pe&&pe.onBlur?pe.onBlur(De):re(!1)},me=(De,...Xe)=>{if(!oe){const st=De.target||ie.current;if(st==null)throw new Error(md(1));ke({value:st.value})}E.onChange&&E.onChange(De,...Xe),W&&W(De,...Xe)};p.useEffect(()=>{ke(ie.current)},[]);const ve=De=>{ie.current&&De.currentTarget===De.target&&ie.current.focus(),I&&I(De)};let Ze=C,$e=E;M&&Ze==="input"&&(V?$e={type:void 0,minRows:V,maxRows:V,...$e}:$e={type:void 0,maxRows:A,minRows:P,...$e},Ze=RMe);const Ne=De=>{ke(De.animationName==="mui-auto-fill-cancel"?ie.current:{value:"x"})};p.useEffect(()=>{pe&&pe.setAdornedStart(!!he)},[pe,he]);const He={...a,color:Se.color||"primary",disabled:Se.disabled,endAdornment:v,error:Se.error,focused:Se.focused,formControl:pe,fullWidth:N,hiddenLabel:Se.hiddenLabel,multiline:M,size:Se.size,startAdornment:he,type:ne},gt=FMe(He),yt=te.root||d.Root||Gk,Vt=G.root||h.root||{},$r=te.input||d.Input||Yk;return $e={...$e,...G.input??h.input},r.jsxs(p.Fragment,{children:[!y&&typeof X9=="function"&&(Y9||(Y9=r.jsx(X9,{}))),r.jsxs(yt,{...Vt,ref:s,onClick:ve,...xe,...!hN(yt)&&{ownerState:{...He,...Vt.ownerState}},className:fe(gt.root,Vt.className,l,H&&"MuiInputBase-readOnly"),children:[he,r.jsx(FT.Provider,{value:null,children:r.jsx($r,{"aria-invalid":Se.error,"aria-describedby":n,autoComplete:i,autoFocus:o,defaultValue:f,disabled:Se.disabled,id:k,onAnimationStart:Ne,name:R,placeholder:q,readOnly:H,required:Se.required,rows:V,value:_e,onKeyDown:O,onKeyUp:F,type:ne,...$e,...!hN($r)&&{as:Ze,ownerState:{...He,...$e.ownerState}},ref:Z,className:fe(gt.input,$e.className,H&&"MuiInputBase-readOnly"),onBlur:le,onChange:me,onFocus:Ve})}),v,K?K({...Se,startAdornment:he}):null]})]})});function BMe(e){return er("MuiInput",e)}const Sg={...ox,...Yt("MuiInput",["root","underline","input"])};function $Me(e){return er("MuiOutlinedInput",e)}const Wl={...ox,...Yt("MuiOutlinedInput",["root","notchedOutline","input"])};function UMe(e){return er("MuiFilledInput",e)}const d0={...ox,...Yt("MuiFilledInput",["root","underline","input","adornedStart","adornedEnd","sizeSmall","multiline","hiddenLabel"])},VMe=gi(r.jsx("path",{d:"M7 10l5 5 5-5z"})),WMe={entering:{opacity:1},entered:{opacity:1}},Y_=p.forwardRef(function(t,s){const a=Mx(),n={enter:a.transitions.duration.enteringScreen,exit:a.transitions.duration.leavingScreen},{addEndListener:i,appear:o=!0,children:l,easing:c,in:d,onEnter:h,onEntered:f,onEntering:x,onExit:y,onExited:v,onExiting:w,style:N,timeout:k=n,TransitionComponent:C=wc,...E}=t,_=p.useRef(null),T=un(_,Fx(l),s),A=O=>F=>{if(O){const q=_.current;F===void 0?O(q):O(q,F)}},P=A(x),M=A((O,F)=>{_Z(O);const q=uN({style:N,timeout:k,easing:c},{mode:"enter"});O.style.webkitTransition=a.transitions.create("opacity",q),O.style.transition=a.transitions.create("opacity",q),h&&h(O,F)}),R=A(f),$=A(w),W=A(O=>{const F=uN({style:N,timeout:k,easing:c},{mode:"exit"});O.style.webkitTransition=a.transitions.create("opacity",F),O.style.transition=a.transitions.create("opacity",F),y&&y(O)}),I=A(v),B=O=>{i&&i(_.current,O)};return r.jsx(C,{appear:o,in:d,nodeRef:_,onEnter:M,onEntered:R,onEntering:P,onExit:W,onExited:I,onExiting:$,addEndListener:B,timeout:k,...E,children:(O,{ownerState:F,...q})=>p.cloneElement(l,{style:{opacity:0,visibility:O==="exited"&&!d?"hidden":void 0,...WMe[O],...N,...l.props.style},ref:T,...q})})});function zMe(e){return er("MuiBackdrop",e)}Yt("MuiBackdrop",["root","invisible"]);const qMe=e=>{const{classes:t,invisible:s}=e;return tr({root:["root",s&&"invisible"]},zMe,t)},HMe=tt("div",{name:"MuiBackdrop",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:s}=e;return[t.root,s.invisible&&t.invisible]}})({position:"fixed",display:"flex",alignItems:"center",justifyContent:"center",right:0,bottom:0,top:0,left:0,backgroundColor:"rgba(0, 0, 0, 0.5)",WebkitTapHighlightColor:"transparent",variants:[{props:{invisible:!0},style:{backgroundColor:"transparent"}}]}),WZ=p.forwardRef(function(t,s){const a=ar({props:t,name:"MuiBackdrop"}),{children:n,className:i,component:o="div",invisible:l=!1,open:c,components:d={},componentsProps:h={},slotProps:f={},slots:x={},TransitionComponent:y,transitionDuration:v,...w}=a,N={...a,component:o,invisible:l},k=qMe(N),C={transition:y,root:d.Root,...x},E={...h,...f},_={component:o,slots:C,slotProps:E},[T,A]=nr("root",{elementType:HMe,externalForwardedProps:_,className:fe(k.root,i),ownerState:N}),[P,M]=nr("transition",{elementType:Y_,externalForwardedProps:_,ownerState:N});return r.jsx(P,{in:c,timeout:v,...w,...M,children:r.jsx(T,{"aria-hidden":!0,...A,classes:k,ref:s,children:n})})}),KMe=Yt("MuiBox",["root"]),GMe=jZ(),Qt=ZIe({themeId:pk,defaultTheme:GMe,defaultClassName:KMe.root,generateClassName:hZ.generate});function YMe(e){return er("MuiButton",e)}const u0=Yt("MuiButton",["root","text","textInherit","textPrimary","textSecondary","textSuccess","textError","textInfo","textWarning","outlined","outlinedInherit","outlinedPrimary","outlinedSecondary","outlinedSuccess","outlinedError","outlinedInfo","outlinedWarning","contained","containedInherit","containedPrimary","containedSecondary","containedSuccess","containedError","containedInfo","containedWarning","disableElevation","focusVisible","disabled","colorInherit","colorPrimary","colorSecondary","colorSuccess","colorError","colorInfo","colorWarning","textSizeSmall","textSizeMedium","textSizeLarge","outlinedSizeSmall","outlinedSizeMedium","outlinedSizeLarge","containedSizeSmall","containedSizeMedium","containedSizeLarge","sizeMedium","sizeSmall","sizeLarge","fullWidth","startIcon","endIcon","icon","iconSizeSmall","iconSizeMedium","iconSizeLarge","loading","loadingWrapper","loadingIconPlaceholder","loadingIndicator","loadingPositionCenter","loadingPositionStart","loadingPositionEnd"]),XMe=p.createContext({}),QMe=p.createContext(void 0),ZMe=e=>{const{color:t,disableElevation:s,fullWidth:a,size:n,variant:i,loading:o,loadingPosition:l,classes:c}=e,d={root:["root",o&&"loading",i,`${i}${Ye(t)}`,`size${Ye(n)}`,`${i}Size${Ye(n)}`,`color${Ye(t)}`,s&&"disableElevation",a&&"fullWidth",o&&`loadingPosition${Ye(l)}`],startIcon:["icon","startIcon",`iconSize${Ye(n)}`],endIcon:["icon","endIcon",`iconSize${Ye(n)}`],loadingIndicator:["loadingIndicator"],loadingWrapper:["loadingWrapper"]},h=tr(d,YMe,c);return{...c,...h}},zZ=[{props:{size:"small"},style:{"& > *:nth-of-type(1)":{fontSize:18}}},{props:{size:"medium"},style:{"& > *:nth-of-type(1)":{fontSize:20}}},{props:{size:"large"},style:{"& > *:nth-of-type(1)":{fontSize:22}}}],JMe=tt(_h,{shouldForwardProp:e=>il(e)||e==="classes",name:"MuiButton",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:s}=e;return[t.root,t[s.variant],t[`${s.variant}${Ye(s.color)}`],t[`size${Ye(s.size)}`],t[`${s.variant}Size${Ye(s.size)}`],s.color==="inherit"&&t.colorInherit,s.disableElevation&&t.disableElevation,s.fullWidth&&t.fullWidth,s.loading&&t.loading]}})(Jt(({theme:e})=>{const t=e.palette.mode==="light"?e.palette.grey[300]:e.palette.grey[800],s=e.palette.mode==="light"?e.palette.grey.A100:e.palette.grey[700];return{...e.typography.button,minWidth:64,padding:"6px 16px",border:0,borderRadius:(e.vars||e).shape.borderRadius,transition:e.transitions.create(["background-color","box-shadow","border-color","color"],{duration:e.transitions.duration.short}),"&:hover":{textDecoration:"none"},[`&.${u0.disabled}`]:{color:(e.vars||e).palette.action.disabled},variants:[{props:{variant:"contained"},style:{color:"var(--variant-containedColor)",backgroundColor:"var(--variant-containedBg)",boxShadow:(e.vars||e).shadows[2],"&:hover":{boxShadow:(e.vars||e).shadows[4],"@media (hover: none)":{boxShadow:(e.vars||e).shadows[2]}},"&:active":{boxShadow:(e.vars||e).shadows[8]},[`&.${u0.focusVisible}`]:{boxShadow:(e.vars||e).shadows[6]},[`&.${u0.disabled}`]:{color:(e.vars||e).palette.action.disabled,boxShadow:(e.vars||e).shadows[0],backgroundColor:(e.vars||e).palette.action.disabledBackground}}},{props:{variant:"outlined"},style:{padding:"5px 15px",border:"1px solid currentColor",borderColor:"var(--variant-outlinedBorder, currentColor)",backgroundColor:"var(--variant-outlinedBg)",color:"var(--variant-outlinedColor)",[`&.${u0.disabled}`]:{border:`1px solid ${(e.vars||e).palette.action.disabledBackground}`}}},{props:{variant:"text"},style:{padding:"6px 8px",color:"var(--variant-textColor)",backgroundColor:"var(--variant-textBg)"}},...Object.entries(e.palette).filter(ca()).map(([a])=>({props:{color:a},style:{"--variant-textColor":(e.vars||e).palette[a].main,"--variant-outlinedColor":(e.vars||e).palette[a].main,"--variant-outlinedBorder":e.alpha((e.vars||e).palette[a].main,.5),"--variant-containedColor":(e.vars||e).palette[a].contrastText,"--variant-containedBg":(e.vars||e).palette[a].main,"@media (hover: hover)":{"&:hover":{"--variant-containedBg":(e.vars||e).palette[a].dark,"--variant-textBg":e.alpha((e.vars||e).palette[a].main,(e.vars||e).palette.action.hoverOpacity),"--variant-outlinedBorder":(e.vars||e).palette[a].main,"--variant-outlinedBg":e.alpha((e.vars||e).palette[a].main,(e.vars||e).palette.action.hoverOpacity)}}}})),{props:{color:"inherit"},style:{color:"inherit",borderColor:"currentColor","--variant-containedBg":e.vars?e.vars.palette.Button.inheritContainedBg:t,"@media (hover: hover)":{"&:hover":{"--variant-containedBg":e.vars?e.vars.palette.Button.inheritContainedHoverBg:s,"--variant-textBg":e.alpha((e.vars||e).palette.text.primary,(e.vars||e).palette.action.hoverOpacity),"--variant-outlinedBg":e.alpha((e.vars||e).palette.text.primary,(e.vars||e).palette.action.hoverOpacity)}}}},{props:{size:"small",variant:"text"},style:{padding:"4px 5px",fontSize:e.typography.pxToRem(13)}},{props:{size:"large",variant:"text"},style:{padding:"8px 11px",fontSize:e.typography.pxToRem(15)}},{props:{size:"small",variant:"outlined"},style:{padding:"3px 9px",fontSize:e.typography.pxToRem(13)}},{props:{size:"large",variant:"outlined"},style:{padding:"7px 21px",fontSize:e.typography.pxToRem(15)}},{props:{size:"small",variant:"contained"},style:{padding:"4px 10px",fontSize:e.typography.pxToRem(13)}},{props:{size:"large",variant:"contained"},style:{padding:"8px 22px",fontSize:e.typography.pxToRem(15)}},{props:{disableElevation:!0},style:{boxShadow:"none","&:hover":{boxShadow:"none"},[`&.${u0.focusVisible}`]:{boxShadow:"none"},"&:active":{boxShadow:"none"},[`&.${u0.disabled}`]:{boxShadow:"none"}}},{props:{fullWidth:!0},style:{width:"100%"}},{props:{loadingPosition:"center"},style:{transition:e.transitions.create(["background-color","box-shadow","border-color"],{duration:e.transitions.duration.short}),[`&.${u0.loading}`]:{color:"transparent"}}}]}})),e7e=tt("span",{name:"MuiButton",slot:"StartIcon",overridesResolver:(e,t)=>{const{ownerState:s}=e;return[t.startIcon,s.loading&&t.startIconLoadingStart,t[`iconSize${Ye(s.size)}`]]}})(({theme:e})=>({display:"inherit",marginRight:8,marginLeft:-4,variants:[{props:{size:"small"},style:{marginLeft:-2}},{props:{loadingPosition:"start",loading:!0},style:{transition:e.transitions.create(["opacity"],{duration:e.transitions.duration.short}),opacity:0}},{props:{loadingPosition:"start",loading:!0,fullWidth:!0},style:{marginRight:-8}},...zZ]})),t7e=tt("span",{name:"MuiButton",slot:"EndIcon",overridesResolver:(e,t)=>{const{ownerState:s}=e;return[t.endIcon,s.loading&&t.endIconLoadingEnd,t[`iconSize${Ye(s.size)}`]]}})(({theme:e})=>({display:"inherit",marginRight:-4,marginLeft:8,variants:[{props:{size:"small"},style:{marginRight:-2}},{props:{loadingPosition:"end",loading:!0},style:{transition:e.transitions.create(["opacity"],{duration:e.transitions.duration.short}),opacity:0}},{props:{loadingPosition:"end",loading:!0,fullWidth:!0},style:{marginLeft:-8}},...zZ]})),r7e=tt("span",{name:"MuiButton",slot:"LoadingIndicator"})(({theme:e})=>({display:"none",position:"absolute",visibility:"visible",variants:[{props:{loading:!0},style:{display:"flex"}},{props:{loadingPosition:"start"},style:{left:14}},{props:{loadingPosition:"start",size:"small"},style:{left:10}},{props:{variant:"text",loadingPosition:"start"},style:{left:6}},{props:{loadingPosition:"center"},style:{left:"50%",transform:"translate(-50%)",color:(e.vars||e).palette.action.disabled}},{props:{loadingPosition:"end"},style:{right:14}},{props:{loadingPosition:"end",size:"small"},style:{right:10}},{props:{variant:"text",loadingPosition:"end"},style:{right:6}},{props:{loadingPosition:"start",fullWidth:!0},style:{position:"relative",left:-10}},{props:{loadingPosition:"end",fullWidth:!0},style:{position:"relative",right:-10}}]})),Q9=tt("span",{name:"MuiButton",slot:"LoadingIconPlaceholder"})({display:"inline-block",width:"1em",height:"1em"}),W0=p.forwardRef(function(t,s){const a=p.useContext(XMe),n=p.useContext(QMe),i=oN(a,t),o=ar({props:i,name:"MuiButton"}),{children:l,color:c="primary",component:d="button",className:h,disabled:f=!1,disableElevation:x=!1,disableFocusRipple:y=!1,endIcon:v,focusVisibleClassName:w,fullWidth:N=!1,id:k,loading:C=null,loadingIndicator:E,loadingPosition:_="center",size:T="medium",startIcon:A,type:P,variant:M="text",...R}=o,$=Rx(k),W=E??r.jsx(zk,{"aria-labelledby":$,color:"inherit",size:16}),I={...o,color:c,component:d,disabled:f,disableElevation:x,disableFocusRipple:y,fullWidth:N,loading:C,loadingIndicator:W,loadingPosition:_,size:T,type:P,variant:M},B=ZMe(I),O=(A||C&&_==="start")&&r.jsx(e7e,{className:B.startIcon,ownerState:I,children:A||r.jsx(Q9,{className:B.loadingIconPlaceholder,ownerState:I})}),F=(v||C&&_==="end")&&r.jsx(t7e,{className:B.endIcon,ownerState:I,children:v||r.jsx(Q9,{className:B.loadingIconPlaceholder,ownerState:I})}),q=n||"",H=typeof C=="boolean"?r.jsx("span",{className:B.loadingWrapper,style:{display:"contents"},children:C&&r.jsx(r7e,{className:B.loadingIndicator,ownerState:I,children:W})}):null;return r.jsxs(JMe,{ownerState:I,className:fe(a.className,B.root,h,q),component:d,disabled:f||C,focusRipple:!y,focusVisibleClassName:fe(B.focusVisible,w),ref:s,type:P,id:C?$:k,...R,classes:B,children:[O,_!=="end"&&H,l,_==="end"&&H,F]})});function s7e(e){return er("MuiCard",e)}Yt("MuiCard",["root"]);const a7e=e=>{const{classes:t}=e;return tr({root:["root"]},s7e,t)},n7e=tt(Lx,{name:"MuiCard",slot:"Root"})({overflow:"hidden"}),Z9=p.forwardRef(function(t,s){const a=ar({props:t,name:"MuiCard"}),{className:n,raised:i=!1,...o}=a,l={...a,raised:i},c=a7e(l);return r.jsx(n7e,{className:fe(c.root,n),elevation:i?8:void 0,ref:s,ownerState:l,...o})});function i7e(e){return er("MuiCardContent",e)}Yt("MuiCardContent",["root"]);const o7e=e=>{const{classes:t}=e;return tr({root:["root"]},i7e,t)},l7e=tt("div",{name:"MuiCardContent",slot:"Root"})({padding:16,"&:last-child":{paddingBottom:24}}),J9=p.forwardRef(function(t,s){const a=ar({props:t,name:"MuiCardContent"}),{className:n,component:i="div",...o}=a,l={...a,component:i},c=o7e(l);return r.jsx(l7e,{as:i,className:fe(c.root,n),ownerState:l,ref:s,...o})});function c7e(e){return er("PrivateSwitchBase",e)}Yt("PrivateSwitchBase",["root","checked","disabled","input","edgeStart","edgeEnd"]);const d7e=e=>{const{classes:t,checked:s,disabled:a,edge:n}=e,i={root:["root",s&&"checked",a&&"disabled",n&&`edge${Ye(n)}`],input:["input"]};return tr(i,c7e,t)},u7e=tt(_h,{name:"MuiSwitchBase"})({padding:9,borderRadius:"50%",variants:[{props:{edge:"start",size:"small"},style:{marginLeft:-3}},{props:({edge:e,ownerState:t})=>e==="start"&&t.size!=="small",style:{marginLeft:-12}},{props:{edge:"end",size:"small"},style:{marginRight:-3}},{props:({edge:e,ownerState:t})=>e==="end"&&t.size!=="small",style:{marginRight:-12}}]}),h7e=tt("input",{name:"MuiSwitchBase",shouldForwardProp:il})({cursor:"inherit",position:"absolute",opacity:0,width:"100%",height:"100%",top:0,left:0,margin:0,padding:0,zIndex:1}),m7e=p.forwardRef(function(t,s){const{autoFocus:a,checked:n,checkedIcon:i,defaultChecked:o,disabled:l,disableFocusRipple:c=!1,edge:d=!1,icon:h,id:f,inputProps:x,inputRef:y,name:v,onBlur:w,onChange:N,onFocus:k,readOnly:C,required:E=!1,tabIndex:_,type:T,value:A,slots:P={},slotProps:M={},...R}=t,[$,W]=cN({controlled:n,default:!!o,name:"SwitchBase",state:"checked"}),I=t0(),B=ce=>{k&&k(ce),I&&I.onFocus&&I.onFocus(ce)},O=ce=>{w&&w(ce),I&&I.onBlur&&I.onBlur(ce)},F=ce=>{if(ce.nativeEvent.defaultPrevented)return;const xe=ce.target.checked;W(xe),N&&N(ce,xe)};let q=l;I&&typeof q>"u"&&(q=I.disabled);const H=T==="checkbox"||T==="radio",K={...t,checked:$,disabled:q,disableFocusRipple:c,edge:d},V=d7e(K),z={slots:P,slotProps:{input:x,...M}},[G,te]=nr("root",{ref:s,elementType:u7e,className:V.root,shouldForwardComponentProp:!0,externalForwardedProps:{...z,component:"span",...R},getSlotProps:ce=>({...ce,onFocus:xe=>{var _e;(_e=ce.onFocus)==null||_e.call(ce,xe),B(xe)},onBlur:xe=>{var _e;(_e=ce.onBlur)==null||_e.call(ce,xe),O(xe)}}),ownerState:K,additionalProps:{centerRipple:!0,focusRipple:!c,disabled:q,role:void 0,tabIndex:null}}),[he,ne]=nr("input",{ref:y,elementType:h7e,className:V.input,externalForwardedProps:z,getSlotProps:ce=>({...ce,onChange:xe=>{var _e;(_e=ce.onChange)==null||_e.call(ce,xe),F(xe)}}),ownerState:K,additionalProps:{autoFocus:a,checked:n,defaultChecked:o,disabled:q,id:H?f:void 0,name:v,readOnly:C,required:E,tabIndex:_,type:T,...T==="checkbox"&&A===void 0?{}:{value:A}}});return r.jsxs(G,{...te,children:[r.jsx(he,{...ne}),$?i:h]})});function qZ(e=window){const t=e.document.documentElement.clientWidth;return e.innerWidth-t}function f7e(e){const t=Bi(e);return t.body===e?Ol(e).innerWidth>t.documentElement.clientWidth:e.scrollHeight>e.clientHeight}function bp(e,t){t?e.setAttribute("aria-hidden","true"):e.removeAttribute("aria-hidden")}function eF(e){return parseInt(Ol(e).getComputedStyle(e).paddingRight,10)||0}function x7e(e){const s=["TEMPLATE","SCRIPT","STYLE","LINK","MAP","META","NOSCRIPT","PICTURE","COL","COLGROUP","PARAM","SLOT","SOURCE","TRACK"].includes(e.tagName),a=e.tagName==="INPUT"&&e.getAttribute("type")==="hidden";return s||a}function tF(e,t,s,a,n){const i=[t,s,...a];[].forEach.call(e.children,o=>{const l=!i.includes(o),c=!x7e(o);l&&c&&bp(o,n)})}function aC(e,t){let s=-1;return e.some((a,n)=>t(a)?(s=n,!0):!1),s}function g7e(e,t){const s=[],a=e.container;if(!t.disableScrollLock){if(f7e(a)){const o=qZ(Ol(a));s.push({value:a.style.paddingRight,property:"padding-right",el:a}),a.style.paddingRight=`${eF(a)+o}px`;const l=Bi(a).querySelectorAll(".mui-fixed");[].forEach.call(l,c=>{s.push({value:c.style.paddingRight,property:"padding-right",el:c}),c.style.paddingRight=`${eF(c)+o}px`})}let i;if(a.parentNode instanceof DocumentFragment)i=Bi(a).body;else{const o=a.parentElement,l=Ol(a);i=(o==null?void 0:o.nodeName)==="HTML"&&l.getComputedStyle(o).overflowY==="scroll"?o:a}s.push({value:i.style.overflow,property:"overflow",el:i},{value:i.style.overflowX,property:"overflow-x",el:i},{value:i.style.overflowY,property:"overflow-y",el:i}),i.style.overflow="hidden"}return()=>{s.forEach(({value:i,el:o,property:l})=>{i?o.style.setProperty(l,i):o.style.removeProperty(l)})}}function p7e(e){const t=[];return[].forEach.call(e.children,s=>{s.getAttribute("aria-hidden")==="true"&&t.push(s)}),t}class y7e{constructor(){this.modals=[],this.containers=[]}add(t,s){let a=this.modals.indexOf(t);if(a!==-1)return a;a=this.modals.length,this.modals.push(t),t.modalRef&&bp(t.modalRef,!1);const n=p7e(s);tF(s,t.mount,t.modalRef,n,!0);const i=aC(this.containers,o=>o.container===s);return i!==-1?(this.containers[i].modals.push(t),a):(this.containers.push({modals:[t],container:s,restore:null,hiddenSiblings:n}),a)}mount(t,s){const a=aC(this.containers,i=>i.modals.includes(t)),n=this.containers[a];n.restore||(n.restore=g7e(n,s))}remove(t,s=!0){const a=this.modals.indexOf(t);if(a===-1)return a;const n=aC(this.containers,o=>o.modals.includes(t)),i=this.containers[n];if(i.modals.splice(i.modals.indexOf(t),1),this.modals.splice(a,1),i.modals.length===0)i.restore&&i.restore(),t.modalRef&&bp(t.modalRef,s),tF(i.container,t.mount,t.modalRef,i.hiddenSiblings,!1),this.containers.splice(n,1);else{const o=i.modals[i.modals.length-1];o.modalRef&&bp(o.modalRef,!1)}return a}isTopModal(t){return this.modals.length>0&&this.modals[this.modals.length-1]===t}}function Ym(e){var s;let t=e.activeElement;for(;((s=t==null?void 0:t.shadowRoot)==null?void 0:s.activeElement)!=null;)t=t.shadowRoot.activeElement;return t}const b7e=["input","select","textarea","a[href]","button","[tabindex]","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable="false"])'].join(",");function v7e(e){const t=parseInt(e.getAttribute("tabindex")||"",10);return Number.isNaN(t)?e.contentEditable==="true"||(e.nodeName==="AUDIO"||e.nodeName==="VIDEO"||e.nodeName==="DETAILS")&&e.getAttribute("tabindex")===null?0:e.tabIndex:t}function w7e(e){if(e.tagName!=="INPUT"||e.type!=="radio"||!e.name)return!1;const t=a=>e.ownerDocument.querySelector(`input[type="radio"]${a}`);let s=t(`[name="${e.name}"]:checked`);return s||(s=t(`[name="${e.name}"]`)),s!==e}function j7e(e){return!(e.disabled||e.tagName==="INPUT"&&e.type==="hidden"||w7e(e))}function N7e(e){const t=[],s=[];return Array.from(e.querySelectorAll(b7e)).forEach((a,n)=>{const i=v7e(a);i===-1||!j7e(a)||(i===0?t.push(a):s.push({documentOrder:n,tabIndex:i,node:a}))}),s.sort((a,n)=>a.tabIndex===n.tabIndex?a.documentOrder-n.documentOrder:a.tabIndex-n.tabIndex).map(a=>a.node).concat(t)}function k7e(){return!0}function S7e(e){const{children:t,disableAutoFocus:s=!1,disableEnforceFocus:a=!1,disableRestoreFocus:n=!1,getTabbable:i=N7e,isEnabled:o=k7e,open:l}=e,c=p.useRef(!1),d=p.useRef(null),h=p.useRef(null),f=p.useRef(null),x=p.useRef(null),y=p.useRef(!1),v=p.useRef(null),w=un(Fx(t),v),N=p.useRef(null);p.useEffect(()=>{!l||!v.current||(y.current=!s)},[s,l]),p.useEffect(()=>{if(!l||!v.current)return;const E=Bi(v.current),_=Ym(E);return v.current.contains(_)||(v.current.hasAttribute("tabIndex")||v.current.setAttribute("tabIndex","-1"),y.current&&v.current.focus()),()=>{n||(f.current&&f.current.focus&&(c.current=!0,f.current.focus()),f.current=null)}},[l]),p.useEffect(()=>{if(!l||!v.current)return;const E=Bi(v.current),_=Ym(E),T=M=>{N.current=M,!(a||!o()||M.key!=="Tab")&&_===v.current&&M.shiftKey&&(c.current=!0,h.current&&h.current.focus())},A=()=>{var W,I;const M=v.current;if(M===null)return;const R=Ym(E);if(!E.hasFocus()||!o()||c.current){c.current=!1;return}if(M.contains(R)||a&&R!==d.current&&R!==h.current)return;if(R!==x.current)x.current=null;else if(x.current!==null)return;if(!y.current)return;let $=[];if((R===d.current||R===h.current)&&($=i(v.current)),$.length>0){const B=!!((W=N.current)!=null&&W.shiftKey&&((I=N.current)==null?void 0:I.key)==="Tab"),O=$[0],F=$[$.length-1];typeof O!="string"&&typeof F!="string"&&(B?F.focus():O.focus())}else M.focus()};E.addEventListener("focusin",A),E.addEventListener("keydown",T,!0);const P=setInterval(()=>{const M=Ym(E);M&&M.tagName==="BODY"&&A()},50);return()=>{clearInterval(P),E.removeEventListener("focusin",A),E.removeEventListener("keydown",T,!0)}},[s,a,n,o,l,i]);const k=E=>{f.current===null&&(f.current=E.relatedTarget),y.current=!0,x.current=E.target;const _=t.props.onFocus;_&&_(E)},C=E=>{f.current===null&&(f.current=E.relatedTarget),y.current=!0};return r.jsxs(p.Fragment,{children:[r.jsx("div",{tabIndex:l?0:-1,onFocus:C,ref:d,"data-testid":"sentinelStart"}),p.cloneElement(t,{ref:w,onFocus:k}),r.jsx("div",{tabIndex:l?0:-1,onFocus:C,ref:h,"data-testid":"sentinelEnd"})]})}function C7e(e){return typeof e=="function"?e():e}function _7e(e){return e?e.props.hasOwnProperty("in"):!1}const rF=()=>{},n1=new y7e;function E7e(e){const{container:t,disableEscapeKeyDown:s=!1,disableScrollLock:a=!1,closeAfterTransition:n=!1,onTransitionEnter:i,onTransitionExited:o,children:l,onClose:c,open:d,rootRef:h}=e,f=p.useRef({}),x=p.useRef(null),y=p.useRef(null),v=un(y,h),[w,N]=p.useState(!d),k=_7e(l);let C=!0;(e["aria-hidden"]==="false"||e["aria-hidden"]===!1)&&(C=!1);const E=()=>Bi(x.current),_=()=>(f.current.modalRef=y.current,f.current.mount=x.current,f.current),T=()=>{n1.mount(_(),{disableScrollLock:a}),y.current&&(y.current.scrollTop=0)},A=Vo(()=>{const F=C7e(t)||E().body;n1.add(_(),F),y.current&&T()}),P=()=>n1.isTopModal(_()),M=Vo(F=>{x.current=F,F&&(d&&P()?T():y.current&&bp(y.current,C))}),R=p.useCallback(()=>{n1.remove(_(),C)},[C]);p.useEffect(()=>()=>{R()},[R]),p.useEffect(()=>{d?A():(!k||!n)&&R()},[d,R,k,n,A]);const $=F=>q=>{var H;(H=F.onKeyDown)==null||H.call(F,q),!(q.key!=="Escape"||q.which===229||!P())&&(s||(q.stopPropagation(),c&&c(q,"escapeKeyDown")))},W=F=>q=>{var H;(H=F.onClick)==null||H.call(F,q),q.target===q.currentTarget&&c&&c(q,"backdropClick")};return{getRootProps:(F={})=>{const q=PZ(e);delete q.onTransitionEnter,delete q.onTransitionExited;const H={...q,...F};return{role:"presentation",...H,onKeyDown:$(H),ref:v}},getBackdropProps:(F={})=>{const q=F;return{"aria-hidden":!0,...q,onClick:W(q),open:d}},getTransitionProps:()=>{const F=()=>{N(!1),i&&i()},q=()=>{N(!0),o&&o(),n&&R()};return{onEnter:E9(F,(l==null?void 0:l.props.onEnter)??rF),onExited:E9(q,(l==null?void 0:l.props.onExited)??rF)}},rootRef:v,portalRef:M,isTopModal:P,exited:w,hasTransition:k}}function A7e(e){return er("MuiModal",e)}Yt("MuiModal",["root","hidden","backdrop"]);const P7e=e=>{const{open:t,exited:s,classes:a}=e;return tr({root:["root",!t&&s&&"hidden"],backdrop:["backdrop"]},A7e,a)},T7e=tt("div",{name:"MuiModal",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:s}=e;return[t.root,!s.open&&s.exited&&t.hidden]}})(Jt(({theme:e})=>({position:"fixed",zIndex:(e.vars||e).zIndex.modal,right:0,bottom:0,top:0,left:0,variants:[{props:({ownerState:t})=>!t.open&&t.exited,style:{visibility:"hidden"}}]}))),I7e=tt(WZ,{name:"MuiModal",slot:"Backdrop"})({zIndex:-1}),HZ=p.forwardRef(function(t,s){const a=ar({name:"MuiModal",props:t}),{BackdropComponent:n=I7e,BackdropProps:i,classes:o,className:l,closeAfterTransition:c=!1,children:d,container:h,component:f,components:x={},componentsProps:y={},disableAutoFocus:v=!1,disableEnforceFocus:w=!1,disableEscapeKeyDown:N=!1,disablePortal:k=!1,disableRestoreFocus:C=!1,disableScrollLock:E=!1,hideBackdrop:_=!1,keepMounted:T=!1,onClose:A,onTransitionEnter:P,onTransitionExited:M,open:R,slotProps:$={},slots:W={},theme:I,...B}=a,O={...a,closeAfterTransition:c,disableAutoFocus:v,disableEnforceFocus:w,disableEscapeKeyDown:N,disablePortal:k,disableRestoreFocus:C,disableScrollLock:E,hideBackdrop:_,keepMounted:T},{getRootProps:F,getBackdropProps:q,getTransitionProps:H,portalRef:K,isTopModal:V,exited:z,hasTransition:G}=E7e({...O,rootRef:s}),te={...O,exited:z},he=P7e(te),ne={};if(d.props.tabIndex===void 0&&(ne.tabIndex="-1"),G){const{onEnter:ge,onExited:Z}=H();ne.onEnter=ge,ne.onExited=Z}const ce={slots:{root:x.Root,backdrop:x.Backdrop,...W},slotProps:{...y,...$}},[xe,_e]=nr("root",{ref:s,elementType:T7e,externalForwardedProps:{...ce,...B,component:f},getSlotProps:F,ownerState:te,className:fe(l,he==null?void 0:he.root,!te.open&&te.exited&&(he==null?void 0:he.hidden))}),[oe,ie]=nr("backdrop",{ref:i==null?void 0:i.ref,elementType:n,externalForwardedProps:ce,shouldForwardComponentProp:!0,additionalProps:i,getSlotProps:ge=>q({...ge,onClick:Z=>{ge!=null&&ge.onClick&&ge.onClick(Z)}}),className:fe(i==null?void 0:i.className,he==null?void 0:he.backdrop),ownerState:te});return!T&&!R&&(!G||z)?null:r.jsx(UZ,{ref:K,container:h,disablePortal:k,children:r.jsxs(xe,{..._e,children:[!_&&n?r.jsx(oe,{...ie}):null,r.jsx(S7e,{disableEnforceFocus:w,disableAutoFocus:v,disableRestoreFocus:C,isEnabled:V,open:R,children:p.cloneElement(d,ne)})]})})});function D7e(e){return er("MuiDialog",e)}const nC=Yt("MuiDialog",["root","scrollPaper","scrollBody","container","paper","paperScrollPaper","paperScrollBody","paperWidthFalse","paperWidthXs","paperWidthSm","paperWidthMd","paperWidthLg","paperWidthXl","paperFullWidth","paperFullScreen"]),KZ=p.createContext({}),O7e=tt(WZ,{name:"MuiDialog",slot:"Backdrop",overrides:(e,t)=>t.backdrop})({zIndex:-1}),R7e=e=>{const{classes:t,scroll:s,maxWidth:a,fullWidth:n,fullScreen:i}=e,o={root:["root"],container:["container",`scroll${Ye(s)}`],paper:["paper",`paperScroll${Ye(s)}`,`paperWidth${Ye(String(a))}`,n&&"paperFullWidth",i&&"paperFullScreen"]};return tr(o,D7e,t)},M7e=tt(HZ,{name:"MuiDialog",slot:"Root"})({"@media print":{position:"absolute !important"}}),L7e=tt("div",{name:"MuiDialog",slot:"Container",overridesResolver:(e,t)=>{const{ownerState:s}=e;return[t.container,t[`scroll${Ye(s.scroll)}`]]}})({height:"100%","@media print":{height:"auto"},outline:0,variants:[{props:{scroll:"paper"},style:{display:"flex",justifyContent:"center",alignItems:"center"}},{props:{scroll:"body"},style:{overflowY:"auto",overflowX:"hidden",textAlign:"center","&::after":{content:'""',display:"inline-block",verticalAlign:"middle",height:"100%",width:"0"}}}]}),F7e=tt(Lx,{name:"MuiDialog",slot:"Paper",overridesResolver:(e,t)=>{const{ownerState:s}=e;return[t.paper,t[`scrollPaper${Ye(s.scroll)}`],t[`paperWidth${Ye(String(s.maxWidth))}`],s.fullWidth&&t.paperFullWidth,s.fullScreen&&t.paperFullScreen]}})(Jt(({theme:e})=>({margin:32,position:"relative",overflowY:"auto","@media print":{overflowY:"visible",boxShadow:"none"},variants:[{props:{scroll:"paper"},style:{display:"flex",flexDirection:"column",maxHeight:"calc(100% - 64px)"}},{props:{scroll:"body"},style:{display:"inline-block",verticalAlign:"middle",textAlign:"initial"}},{props:({ownerState:t})=>!t.maxWidth,style:{maxWidth:"calc(100% - 64px)"}},{props:{maxWidth:"xs"},style:{maxWidth:e.breakpoints.unit==="px"?Math.max(e.breakpoints.values.xs,444):`max(${e.breakpoints.values.xs}${e.breakpoints.unit}, 444px)`,[`&.${nC.paperScrollBody}`]:{[e.breakpoints.down(Math.max(e.breakpoints.values.xs,444)+32*2)]:{maxWidth:"calc(100% - 64px)"}}}},...Object.keys(e.breakpoints.values).filter(t=>t!=="xs").map(t=>({props:{maxWidth:t},style:{maxWidth:`${e.breakpoints.values[t]}${e.breakpoints.unit}`,[`&.${nC.paperScrollBody}`]:{[e.breakpoints.down(e.breakpoints.values[t]+32*2)]:{maxWidth:"calc(100% - 64px)"}}}})),{props:({ownerState:t})=>t.fullWidth,style:{width:"calc(100% - 64px)"}},{props:({ownerState:t})=>t.fullScreen,style:{margin:0,width:"100%",maxWidth:"100%",height:"100%",maxHeight:"none",borderRadius:0,[`&.${nC.paperScrollBody}`]:{margin:0,maxWidth:"100%"}}}]}))),GZ=p.forwardRef(function(t,s){const a=ar({props:t,name:"MuiDialog"}),n=Mx(),i={enter:n.transitions.duration.enteringScreen,exit:n.transitions.duration.leavingScreen},{"aria-describedby":o,"aria-labelledby":l,"aria-modal":c=!0,BackdropComponent:d,BackdropProps:h,children:f,className:x,disableEscapeKeyDown:y=!1,fullScreen:v=!1,fullWidth:w=!1,maxWidth:N="sm",onClick:k,onClose:C,open:E,PaperComponent:_=Lx,PaperProps:T={},scroll:A="paper",slots:P={},slotProps:M={},TransitionComponent:R=Y_,transitionDuration:$=i,TransitionProps:W,...I}=a,B={...a,disableEscapeKeyDown:y,fullScreen:v,fullWidth:w,maxWidth:N,scroll:A},O=R7e(B),F=p.useRef(),q=re=>{F.current=re.target===re.currentTarget},H=re=>{k&&k(re),F.current&&(F.current=null,C&&C(re,"backdropClick"))},K=Rx(l),V=p.useMemo(()=>({titleId:K}),[K]),z={transition:R,...P},G={transition:W,paper:T,backdrop:h,...M},te={slots:z,slotProps:G},[he,ne]=nr("root",{elementType:M7e,shouldForwardComponentProp:!0,externalForwardedProps:te,ownerState:B,className:fe(O.root,x),ref:s}),[ce,xe]=nr("backdrop",{elementType:O7e,shouldForwardComponentProp:!0,externalForwardedProps:te,ownerState:B}),[_e,oe]=nr("paper",{elementType:F7e,shouldForwardComponentProp:!0,externalForwardedProps:te,ownerState:B,className:fe(O.paper,T.className)}),[ie,ge]=nr("container",{elementType:L7e,externalForwardedProps:te,ownerState:B,className:O.container}),[Z,Q]=nr("transition",{elementType:Y_,externalForwardedProps:te,ownerState:B,additionalProps:{appear:!0,in:E,timeout:$,role:"presentation"}});return r.jsx(he,{closeAfterTransition:!0,slots:{backdrop:ce},slotProps:{backdrop:{transitionDuration:$,as:d,...xe}},disableEscapeKeyDown:y,onClose:C,open:E,onClick:H,...ne,...I,children:r.jsx(Z,{...Q,children:r.jsx(ie,{onMouseDown:q,...ge,children:r.jsx(_e,{as:_,elevation:24,role:"dialog","aria-describedby":o,"aria-labelledby":K,"aria-modal":c,...oe,children:r.jsx(KZ.Provider,{value:V,children:f})})})})})});function B7e(e){return er("MuiDialogActions",e)}Yt("MuiDialogActions",["root","spacing"]);const $7e=e=>{const{classes:t,disableSpacing:s}=e;return tr({root:["root",!s&&"spacing"]},B7e,t)},U7e=tt("div",{name:"MuiDialogActions",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:s}=e;return[t.root,!s.disableSpacing&&t.spacing]}})({display:"flex",alignItems:"center",padding:8,justifyContent:"flex-end",flex:"0 0 auto",variants:[{props:({ownerState:e})=>!e.disableSpacing,style:{"& > :not(style) ~ :not(style)":{marginLeft:8}}}]}),YZ=p.forwardRef(function(t,s){const a=ar({props:t,name:"MuiDialogActions"}),{className:n,disableSpacing:i=!1,...o}=a,l={...a,disableSpacing:i},c=$7e(l);return r.jsx(U7e,{className:fe(c.root,n),ownerState:l,ref:s,...o})});function V7e(e){return er("MuiDialogContent",e)}Yt("MuiDialogContent",["root","dividers"]);function W7e(e){return er("MuiDialogTitle",e)}const z7e=Yt("MuiDialogTitle",["root"]),q7e=e=>{const{classes:t,dividers:s}=e;return tr({root:["root",s&&"dividers"]},V7e,t)},H7e=tt("div",{name:"MuiDialogContent",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:s}=e;return[t.root,s.dividers&&t.dividers]}})(Jt(({theme:e})=>({flex:"1 1 auto",WebkitOverflowScrolling:"touch",overflowY:"auto",padding:"20px 24px",variants:[{props:({ownerState:t})=>t.dividers,style:{padding:"16px 24px",borderTop:`1px solid ${(e.vars||e).palette.divider}`,borderBottom:`1px solid ${(e.vars||e).palette.divider}`}},{props:({ownerState:t})=>!t.dividers,style:{[`.${z7e.root} + &`]:{paddingTop:0}}}]}))),XZ=p.forwardRef(function(t,s){const a=ar({props:t,name:"MuiDialogContent"}),{className:n,dividers:i=!1,...o}=a,l={...a,dividers:i},c=q7e(l);return r.jsx(H7e,{className:fe(c.root,n),ownerState:l,ref:s,...o})}),K7e=e=>{const{classes:t}=e;return tr({root:["root"]},W7e,t)},G7e=tt(qr,{name:"MuiDialogTitle",slot:"Root"})({padding:"16px 24px",flex:"0 0 auto"}),QZ=p.forwardRef(function(t,s){const a=ar({props:t,name:"MuiDialogTitle"}),{className:n,id:i,...o}=a,l=a,c=K7e(l),{titleId:d=i}=p.useContext(KZ);return r.jsx(G7e,{component:"h2",className:fe(c.root,n),ownerState:l,ref:s,variant:"h6",id:i??d,...o})});function Y7e(e){return er("MuiDivider",e)}Yt("MuiDivider",["root","absolute","fullWidth","inset","middle","flexItem","light","vertical","withChildren","withChildrenVertical","textAlignRight","textAlignLeft","wrapper","wrapperVertical"]);const X7e=e=>{const{absolute:t,children:s,classes:a,flexItem:n,light:i,orientation:o,textAlign:l,variant:c}=e;return tr({root:["root",t&&"absolute",c,i&&"light",o==="vertical"&&"vertical",n&&"flexItem",s&&"withChildren",s&&o==="vertical"&&"withChildrenVertical",l==="right"&&o!=="vertical"&&"textAlignRight",l==="left"&&o!=="vertical"&&"textAlignLeft"],wrapper:["wrapper",o==="vertical"&&"wrapperVertical"]},Y7e,a)},Q7e=tt("div",{name:"MuiDivider",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:s}=e;return[t.root,s.absolute&&t.absolute,t[s.variant],s.light&&t.light,s.orientation==="vertical"&&t.vertical,s.flexItem&&t.flexItem,s.children&&t.withChildren,s.children&&s.orientation==="vertical"&&t.withChildrenVertical,s.textAlign==="right"&&s.orientation!=="vertical"&&t.textAlignRight,s.textAlign==="left"&&s.orientation!=="vertical"&&t.textAlignLeft]}})(Jt(({theme:e})=>({margin:0,flexShrink:0,borderWidth:0,borderStyle:"solid",borderColor:(e.vars||e).palette.divider,borderBottomWidth:"thin",variants:[{props:{absolute:!0},style:{position:"absolute",bottom:0,left:0,width:"100%"}},{props:{light:!0},style:{borderColor:e.alpha((e.vars||e).palette.divider,.08)}},{props:{variant:"inset"},style:{marginLeft:72}},{props:{variant:"middle",orientation:"horizontal"},style:{marginLeft:e.spacing(2),marginRight:e.spacing(2)}},{props:{variant:"middle",orientation:"vertical"},style:{marginTop:e.spacing(1),marginBottom:e.spacing(1)}},{props:{orientation:"vertical"},style:{height:"100%",borderBottomWidth:0,borderRightWidth:"thin"}},{props:{flexItem:!0},style:{alignSelf:"stretch",height:"auto"}},{props:({ownerState:t})=>!!t.children,style:{display:"flex",textAlign:"center",border:0,borderTopStyle:"solid",borderLeftStyle:"solid","&::before, &::after":{content:'""',alignSelf:"center"}}},{props:({ownerState:t})=>t.children&&t.orientation!=="vertical",style:{"&::before, &::after":{width:"100%",borderTop:`thin solid ${(e.vars||e).palette.divider}`,borderTopStyle:"inherit"}}},{props:({ownerState:t})=>t.orientation==="vertical"&&t.children,style:{flexDirection:"column","&::before, &::after":{height:"100%",borderLeft:`thin solid ${(e.vars||e).palette.divider}`,borderLeftStyle:"inherit"}}},{props:({ownerState:t})=>t.textAlign==="right"&&t.orientation!=="vertical",style:{"&::before":{width:"90%"},"&::after":{width:"10%"}}},{props:({ownerState:t})=>t.textAlign==="left"&&t.orientation!=="vertical",style:{"&::before":{width:"10%"},"&::after":{width:"90%"}}}]}))),Z7e=tt("span",{name:"MuiDivider",slot:"Wrapper",overridesResolver:(e,t)=>{const{ownerState:s}=e;return[t.wrapper,s.orientation==="vertical"&&t.wrapperVertical]}})(Jt(({theme:e})=>({display:"inline-block",paddingLeft:`calc(${e.spacing(1)} * 1.2)`,paddingRight:`calc(${e.spacing(1)} * 1.2)`,whiteSpace:"nowrap",variants:[{props:{orientation:"vertical"},style:{paddingTop:`calc(${e.spacing(1)} * 1.2)`,paddingBottom:`calc(${e.spacing(1)} * 1.2)`}}]}))),A0=p.forwardRef(function(t,s){const a=ar({props:t,name:"MuiDivider"}),{absolute:n=!1,children:i,className:o,orientation:l="horizontal",component:c=i||l==="vertical"?"div":"hr",flexItem:d=!1,light:h=!1,role:f=c!=="hr"?"separator":void 0,textAlign:x="center",variant:y="fullWidth",...v}=a,w={...a,absolute:n,component:c,flexItem:d,light:h,orientation:l,role:f,textAlign:x,variant:y},N=X7e(w);return r.jsx(Q7e,{as:c,className:fe(N.root,o),role:f,ref:s,ownerState:w,"aria-orientation":f==="separator"&&(c!=="hr"||l==="vertical")?l:void 0,...v,children:i?r.jsx(Z7e,{className:N.wrapper,ownerState:w,children:i}):null})});A0&&(A0.muiSkipListHighlight=!0);const J7e=e=>{const{classes:t,disableUnderline:s,startAdornment:a,endAdornment:n,size:i,hiddenLabel:o,multiline:l}=e,c={root:["root",!s&&"underline",a&&"adornedStart",n&&"adornedEnd",i==="small"&&`size${Ye(i)}`,o&&"hiddenLabel",l&&"multiline"],input:["input"]},d=tr(c,UMe,t);return{...t,...d}},e8e=tt(Gk,{shouldForwardProp:e=>il(e)||e==="classes",name:"MuiFilledInput",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:s}=e;return[...Hk(e,t),!s.disableUnderline&&t.underline]}})(Jt(({theme:e})=>{const t=e.palette.mode==="light",s=t?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)",a=t?"rgba(0, 0, 0, 0.06)":"rgba(255, 255, 255, 0.09)",n=t?"rgba(0, 0, 0, 0.09)":"rgba(255, 255, 255, 0.13)",i=t?"rgba(0, 0, 0, 0.12)":"rgba(255, 255, 255, 0.12)";return{position:"relative",backgroundColor:e.vars?e.vars.palette.FilledInput.bg:a,borderTopLeftRadius:(e.vars||e).shape.borderRadius,borderTopRightRadius:(e.vars||e).shape.borderRadius,transition:e.transitions.create("background-color",{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut}),"&:hover":{backgroundColor:e.vars?e.vars.palette.FilledInput.hoverBg:n,"@media (hover: none)":{backgroundColor:e.vars?e.vars.palette.FilledInput.bg:a}},[`&.${d0.focused}`]:{backgroundColor:e.vars?e.vars.palette.FilledInput.bg:a},[`&.${d0.disabled}`]:{backgroundColor:e.vars?e.vars.palette.FilledInput.disabledBg:i},variants:[{props:({ownerState:o})=>!o.disableUnderline,style:{"&::after":{left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:e.transitions.create("transform",{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut}),pointerEvents:"none"},[`&.${d0.focused}:after`]:{transform:"scaleX(1) translateX(0)"},[`&.${d0.error}`]:{"&::before, &::after":{borderBottomColor:(e.vars||e).palette.error.main}},"&::before":{borderBottom:`1px solid ${e.vars?e.alpha(e.vars.palette.common.onBackground,e.vars.opacity.inputUnderline):s}`,left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:e.transitions.create("border-bottom-color",{duration:e.transitions.duration.shorter}),pointerEvents:"none"},[`&:hover:not(.${d0.disabled}, .${d0.error}):before`]:{borderBottom:`1px solid ${(e.vars||e).palette.text.primary}`},[`&.${d0.disabled}:before`]:{borderBottomStyle:"dotted"}}},...Object.entries(e.palette).filter(ca()).map(([o])=>{var l;return{props:{disableUnderline:!1,color:o},style:{"&::after":{borderBottom:`2px solid ${(l=(e.vars||e).palette[o])==null?void 0:l.main}`}}}}),{props:({ownerState:o})=>o.startAdornment,style:{paddingLeft:12}},{props:({ownerState:o})=>o.endAdornment,style:{paddingRight:12}},{props:({ownerState:o})=>o.multiline,style:{padding:"25px 12px 8px"}},{props:({ownerState:o,size:l})=>o.multiline&&l==="small",style:{paddingTop:21,paddingBottom:4}},{props:({ownerState:o})=>o.multiline&&o.hiddenLabel,style:{paddingTop:16,paddingBottom:17}},{props:({ownerState:o})=>o.multiline&&o.hiddenLabel&&o.size==="small",style:{paddingTop:8,paddingBottom:9}}]}})),t8e=tt(Yk,{name:"MuiFilledInput",slot:"Input",overridesResolver:Kk})(Jt(({theme:e})=>({paddingTop:25,paddingRight:12,paddingBottom:8,paddingLeft:12,...!e.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:e.palette.mode==="light"?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:e.palette.mode==="light"?null:"#fff",caretColor:e.palette.mode==="light"?null:"#fff",borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"}},...e.vars&&{"&:-webkit-autofill":{borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"},[e.getColorSchemeSelector("dark")]:{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}},variants:[{props:{size:"small"},style:{paddingTop:21,paddingBottom:4}},{props:({ownerState:t})=>t.hiddenLabel,style:{paddingTop:16,paddingBottom:17}},{props:({ownerState:t})=>t.startAdornment,style:{paddingLeft:0}},{props:({ownerState:t})=>t.endAdornment,style:{paddingRight:0}},{props:({ownerState:t})=>t.hiddenLabel&&t.size==="small",style:{paddingTop:8,paddingBottom:9}},{props:({ownerState:t})=>t.multiline,style:{paddingTop:0,paddingBottom:0,paddingLeft:0,paddingRight:0}}]}))),$T=p.forwardRef(function(t,s){const a=ar({props:t,name:"MuiFilledInput"}),{disableUnderline:n=!1,components:i={},componentsProps:o,fullWidth:l=!1,hiddenLabel:c,inputComponent:d="input",multiline:h=!1,slotProps:f,slots:x={},type:y="text",...v}=a,w={...a,disableUnderline:n,fullWidth:l,inputComponent:d,multiline:h,type:y},N=J7e(a),k={root:{ownerState:w},input:{ownerState:w}},C=f??o?qn(k,f??o):k,E=x.root??i.Root??e8e,_=x.input??i.Input??t8e;return r.jsx(BT,{slots:{root:E,input:_},slotProps:C,fullWidth:l,inputComponent:d,multiline:h,ref:s,type:y,...v,classes:N})});$T.muiName="Input";function r8e(e){return er("MuiFormControl",e)}Yt("MuiFormControl",["root","marginNone","marginNormal","marginDense","fullWidth","disabled"]);const s8e=e=>{const{classes:t,margin:s,fullWidth:a}=e,n={root:["root",s!=="none"&&`margin${Ye(s)}`,a&&"fullWidth"]};return tr(n,r8e,t)},a8e=tt("div",{name:"MuiFormControl",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:s}=e;return[t.root,t[`margin${Ye(s.margin)}`],s.fullWidth&&t.fullWidth]}})({display:"inline-flex",flexDirection:"column",position:"relative",minWidth:0,padding:0,margin:0,border:0,verticalAlign:"top",variants:[{props:{margin:"normal"},style:{marginTop:16,marginBottom:8}},{props:{margin:"dense"},style:{marginTop:8,marginBottom:4}},{props:{fullWidth:!0},style:{width:"100%"}}]}),n8e=p.forwardRef(function(t,s){const a=ar({props:t,name:"MuiFormControl"}),{children:n,className:i,color:o="primary",component:l="div",disabled:c=!1,error:d=!1,focused:h,fullWidth:f=!1,hiddenLabel:x=!1,margin:y="none",required:v=!1,size:w="medium",variant:N="outlined",...k}=a,C={...a,color:o,component:l,disabled:c,error:d,fullWidth:f,hiddenLabel:x,margin:y,required:v,size:w,variant:N},E=s8e(C),[_,T]=p.useState(()=>{let F=!1;return n&&p.Children.forEach(n,q=>{if(!rC(q,["Input","Select"]))return;const H=rC(q,["Select"])?q.props.input:q;H&&MMe(H.props)&&(F=!0)}),F}),[A,P]=p.useState(()=>{let F=!1;return n&&p.Children.forEach(n,q=>{rC(q,["Input","Select"])&&(gN(q.props,!0)||gN(q.props.inputProps,!0))&&(F=!0)}),F}),[M,R]=p.useState(!1);c&&M&&R(!1);const $=h!==void 0&&!c?h:M;let W;p.useRef(!1);const I=p.useCallback(()=>{P(!0)},[]),B=p.useCallback(()=>{P(!1)},[]),O=p.useMemo(()=>({adornedStart:_,setAdornedStart:T,color:o,disabled:c,error:d,filled:A,focused:$,fullWidth:f,hiddenLabel:x,size:w,onBlur:()=>{R(!1)},onFocus:()=>{R(!0)},onEmpty:B,onFilled:I,registerEffect:W,required:v,variant:N}),[_,o,c,d,A,$,f,x,W,B,I,v,w,N]);return r.jsx(FT.Provider,{value:O,children:r.jsx(a8e,{as:l,ownerState:C,className:fe(E.root,i),ref:s,...k,children:n})})});function i8e(e){return er("MuiFormControlLabel",e)}const qg=Yt("MuiFormControlLabel",["root","labelPlacementStart","labelPlacementTop","labelPlacementBottom","disabled","label","error","required","asterisk"]),o8e=e=>{const{classes:t,disabled:s,labelPlacement:a,error:n,required:i}=e,o={root:["root",s&&"disabled",`labelPlacement${Ye(a)}`,n&&"error",i&&"required"],label:["label",s&&"disabled"],asterisk:["asterisk",n&&"error"]};return tr(o,i8e,t)},l8e=tt("label",{name:"MuiFormControlLabel",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:s}=e;return[{[`& .${qg.label}`]:t.label},t.root,t[`labelPlacement${Ye(s.labelPlacement)}`]]}})(Jt(({theme:e})=>({display:"inline-flex",alignItems:"center",cursor:"pointer",verticalAlign:"middle",WebkitTapHighlightColor:"transparent",marginLeft:-11,marginRight:16,[`&.${qg.disabled}`]:{cursor:"default"},[`& .${qg.label}`]:{[`&.${qg.disabled}`]:{color:(e.vars||e).palette.text.disabled}},variants:[{props:{labelPlacement:"start"},style:{flexDirection:"row-reverse",marginRight:-11}},{props:{labelPlacement:"top"},style:{flexDirection:"column-reverse"}},{props:{labelPlacement:"bottom"},style:{flexDirection:"column"}},{props:({labelPlacement:t})=>t==="start"||t==="top"||t==="bottom",style:{marginLeft:16}}]}))),c8e=tt("span",{name:"MuiFormControlLabel",slot:"Asterisk"})(Jt(({theme:e})=>({[`&.${qg.error}`]:{color:(e.vars||e).palette.error.main}}))),pm=p.forwardRef(function(t,s){const a=ar({props:t,name:"MuiFormControlLabel"}),{checked:n,className:i,componentsProps:o={},control:l,disabled:c,disableTypography:d,inputRef:h,label:f,labelPlacement:x="end",name:y,onChange:v,required:w,slots:N={},slotProps:k={},value:C,...E}=a,_=t0(),T=c??l.props.disabled??(_==null?void 0:_.disabled),A=w??l.props.required,P={disabled:T,required:A};["checked","name","onChange","value","inputRef"].forEach(F=>{typeof l.props[F]>"u"&&typeof a[F]<"u"&&(P[F]=a[F])});const M=Fh({props:a,muiFormControl:_,states:["error"]}),R={...a,disabled:T,labelPlacement:x,required:A,error:M.error},$=o8e(R),W={slots:N,slotProps:{...o,...k}},[I,B]=nr("typography",{elementType:qr,externalForwardedProps:W,ownerState:R});let O=f;return O!=null&&O.type!==qr&&!d&&(O=r.jsx(I,{component:"span",...B,className:fe($.label,B==null?void 0:B.className),children:O})),r.jsxs(l8e,{className:fe($.root,i),ownerState:R,ref:s,...E,children:[p.cloneElement(l,P),A?r.jsxs("div",{children:[O,r.jsxs(c8e,{ownerState:R,"aria-hidden":!0,className:$.asterisk,children:["","*"]})]}):O]})});function d8e(e){return er("MuiFormHelperText",e)}const sF=Yt("MuiFormHelperText",["root","error","disabled","sizeSmall","sizeMedium","contained","focused","filled","required"]);var aF;const u8e=e=>{const{classes:t,contained:s,size:a,disabled:n,error:i,filled:o,focused:l,required:c}=e,d={root:["root",n&&"disabled",i&&"error",a&&`size${Ye(a)}`,s&&"contained",l&&"focused",o&&"filled",c&&"required"]};return tr(d,d8e,t)},h8e=tt("p",{name:"MuiFormHelperText",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:s}=e;return[t.root,s.size&&t[`size${Ye(s.size)}`],s.contained&&t.contained,s.filled&&t.filled]}})(Jt(({theme:e})=>({color:(e.vars||e).palette.text.secondary,...e.typography.caption,textAlign:"left",marginTop:3,marginRight:0,marginBottom:0,marginLeft:0,[`&.${sF.disabled}`]:{color:(e.vars||e).palette.text.disabled},[`&.${sF.error}`]:{color:(e.vars||e).palette.error.main},variants:[{props:{size:"small"},style:{marginTop:4}},{props:({ownerState:t})=>t.contained,style:{marginLeft:14,marginRight:14}}]}))),m8e=p.forwardRef(function(t,s){const a=ar({props:t,name:"MuiFormHelperText"}),{children:n,className:i,component:o="p",disabled:l,error:c,filled:d,focused:h,margin:f,required:x,variant:y,...v}=a,w=t0(),N=Fh({props:a,muiFormControl:w,states:["variant","size","disabled","error","filled","focused","required"]}),k={...a,component:o,contained:N.variant==="filled"||N.variant==="outlined",variant:N.variant,size:N.size,disabled:N.disabled,error:N.error,filled:N.filled,focused:N.focused,required:N.required};delete k.ownerState;const C=u8e(k);return r.jsx(h8e,{as:o,className:fe(C.root,i),ref:s,...v,ownerState:k,children:n===" "?aF||(aF=r.jsx("span",{className:"notranslate","aria-hidden":!0,children:""})):n})});function f8e(e){return er("MuiFormLabel",e)}const vp=Yt("MuiFormLabel",["root","colorSecondary","focused","disabled","error","filled","required","asterisk"]),x8e=e=>{const{classes:t,color:s,focused:a,disabled:n,error:i,filled:o,required:l}=e,c={root:["root",`color${Ye(s)}`,n&&"disabled",i&&"error",o&&"filled",a&&"focused",l&&"required"],asterisk:["asterisk",i&&"error"]};return tr(c,f8e,t)},g8e=tt("label",{name:"MuiFormLabel",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:s}=e;return[t.root,s.color==="secondary"&&t.colorSecondary,s.filled&&t.filled]}})(Jt(({theme:e})=>({color:(e.vars||e).palette.text.secondary,...e.typography.body1,lineHeight:"1.4375em",padding:0,position:"relative",variants:[...Object.entries(e.palette).filter(ca()).map(([t])=>({props:{color:t},style:{[`&.${vp.focused}`]:{color:(e.vars||e).palette[t].main}}})),{props:{},style:{[`&.${vp.disabled}`]:{color:(e.vars||e).palette.text.disabled},[`&.${vp.error}`]:{color:(e.vars||e).palette.error.main}}}]}))),p8e=tt("span",{name:"MuiFormLabel",slot:"Asterisk"})(Jt(({theme:e})=>({[`&.${vp.error}`]:{color:(e.vars||e).palette.error.main}}))),y8e=p.forwardRef(function(t,s){const a=ar({props:t,name:"MuiFormLabel"}),{children:n,className:i,color:o,component:l="label",disabled:c,error:d,filled:h,focused:f,required:x,...y}=a,v=t0(),w=Fh({props:a,muiFormControl:v,states:["color","required","focused","disabled","error","filled"]}),N={...a,color:w.color||"primary",component:l,disabled:w.disabled,error:w.error,filled:w.filled,focused:w.focused,required:w.required},k=x8e(N);return r.jsxs(g8e,{as:l,ownerState:N,className:fe(k.root,i),ref:s,...y,children:[n,w.required&&r.jsxs(p8e,{ownerState:N,"aria-hidden":!0,className:k.asterisk,children:["","*"]})]})});function X_(e){return`scale(${e}, ${e**2})`}const b8e={entering:{opacity:1,transform:X_(1)},entered:{opacity:1,transform:"none"}},iC=typeof navigator<"u"&&/^((?!chrome|android).)*(safari|mobile)/i.test(navigator.userAgent)&&/(os |version\/)15(.|_)4/i.test(navigator.userAgent),pN=p.forwardRef(function(t,s){const{addEndListener:a,appear:n=!0,children:i,easing:o,in:l,onEnter:c,onEntered:d,onEntering:h,onExit:f,onExited:x,onExiting:y,style:v,timeout:w="auto",TransitionComponent:N=wc,...k}=t,C=Km(),E=p.useRef(),_=Mx(),T=p.useRef(null),A=un(T,Fx(i),s),P=F=>q=>{if(F){const H=T.current;q===void 0?F(H):F(H,q)}},M=P(h),R=P((F,q)=>{_Z(F);const{duration:H,delay:K,easing:V}=uN({style:v,timeout:w,easing:o},{mode:"enter"});let z;w==="auto"?(z=_.transitions.getAutoHeightDuration(F.clientHeight),E.current=z):z=H,F.style.transition=[_.transitions.create("opacity",{duration:z,delay:K}),_.transitions.create("transform",{duration:iC?z:z*.666,delay:K,easing:V})].join(","),c&&c(F,q)}),$=P(d),W=P(y),I=P(F=>{const{duration:q,delay:H,easing:K}=uN({style:v,timeout:w,easing:o},{mode:"exit"});let V;w==="auto"?(V=_.transitions.getAutoHeightDuration(F.clientHeight),E.current=V):V=q,F.style.transition=[_.transitions.create("opacity",{duration:V,delay:H}),_.transitions.create("transform",{duration:iC?V:V*.666,delay:iC?H:H||V*.333,easing:K})].join(","),F.style.opacity=0,F.style.transform=X_(.75),f&&f(F)}),B=P(x),O=F=>{w==="auto"&&C.start(E.current||0,F),a&&a(T.current,F)};return r.jsx(N,{appear:n,in:l,nodeRef:T,onEnter:R,onEntered:$,onEntering:M,onExit:I,onExited:B,onExiting:W,addEndListener:O,timeout:w==="auto"?null:w,...k,children:(F,{ownerState:q,...H})=>p.cloneElement(i,{style:{opacity:0,transform:X_(.75),visibility:F==="exited"&&!l?"hidden":void 0,...b8e[F],...v,...i.props.style},ref:A,...H})})});pN&&(pN.muiSupportAuto=!0);const v8e=e=>{const{classes:t,disableUnderline:s}=e,n=tr({root:["root",!s&&"underline"],input:["input"]},BMe,t);return{...t,...n}},w8e=tt(Gk,{shouldForwardProp:e=>il(e)||e==="classes",name:"MuiInput",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:s}=e;return[...Hk(e,t),!s.disableUnderline&&t.underline]}})(Jt(({theme:e})=>{let s=e.palette.mode==="light"?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)";return e.vars&&(s=e.alpha(e.vars.palette.common.onBackground,e.vars.opacity.inputUnderline)),{position:"relative",variants:[{props:({ownerState:a})=>a.formControl,style:{"label + &":{marginTop:16}}},{props:({ownerState:a})=>!a.disableUnderline,style:{"&::after":{left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:e.transitions.create("transform",{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut}),pointerEvents:"none"},[`&.${Sg.focused}:after`]:{transform:"scaleX(1) translateX(0)"},[`&.${Sg.error}`]:{"&::before, &::after":{borderBottomColor:(e.vars||e).palette.error.main}},"&::before":{borderBottom:`1px solid ${s}`,left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:e.transitions.create("border-bottom-color",{duration:e.transitions.duration.shorter}),pointerEvents:"none"},[`&:hover:not(.${Sg.disabled}, .${Sg.error}):before`]:{borderBottom:`2px solid ${(e.vars||e).palette.text.primary}`,"@media (hover: none)":{borderBottom:`1px solid ${s}`}},[`&.${Sg.disabled}:before`]:{borderBottomStyle:"dotted"}}},...Object.entries(e.palette).filter(ca()).map(([a])=>({props:{color:a,disableUnderline:!1},style:{"&::after":{borderBottom:`2px solid ${(e.vars||e).palette[a].main}`}}}))]}})),j8e=tt(Yk,{name:"MuiInput",slot:"Input",overridesResolver:Kk})({}),UT=p.forwardRef(function(t,s){const a=ar({props:t,name:"MuiInput"}),{disableUnderline:n=!1,components:i={},componentsProps:o,fullWidth:l=!1,inputComponent:c="input",multiline:d=!1,slotProps:h,slots:f={},type:x="text",...y}=a,v=v8e(a),N={root:{ownerState:{disableUnderline:n}}},k=h??o?qn(h??o,N):N,C=f.root??i.Root??w8e,E=f.input??i.Input??j8e;return r.jsx(BT,{slots:{root:C,input:E},slotProps:k,fullWidth:l,inputComponent:c,multiline:d,ref:s,type:x,...y,classes:v})});UT.muiName="Input";function N8e(e){return er("MuiInputLabel",e)}Yt("MuiInputLabel",["root","focused","disabled","error","required","asterisk","formControl","sizeSmall","shrink","animated","standard","filled","outlined"]);const k8e=e=>{const{classes:t,formControl:s,size:a,shrink:n,disableAnimation:i,variant:o,required:l}=e,c={root:["root",s&&"formControl",!i&&"animated",n&&"shrink",a&&a!=="medium"&&`size${Ye(a)}`,o],asterisk:[l&&"asterisk"]},d=tr(c,N8e,t);return{...t,...d}},S8e=tt(y8e,{shouldForwardProp:e=>il(e)||e==="classes",name:"MuiInputLabel",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:s}=e;return[{[`& .${vp.asterisk}`]:t.asterisk},t.root,s.formControl&&t.formControl,s.size==="small"&&t.sizeSmall,s.shrink&&t.shrink,!s.disableAnimation&&t.animated,s.focused&&t.focused,t[s.variant]]}})(Jt(({theme:e})=>({display:"block",transformOrigin:"top left",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"100%",variants:[{props:({ownerState:t})=>t.formControl,style:{position:"absolute",left:0,top:0,transform:"translate(0, 20px) scale(1)"}},{props:{size:"small"},style:{transform:"translate(0, 17px) scale(1)"}},{props:({ownerState:t})=>t.shrink,style:{transform:"translate(0, -1.5px) scale(0.75)",transformOrigin:"top left",maxWidth:"133%"}},{props:({ownerState:t})=>!t.disableAnimation,style:{transition:e.transitions.create(["color","transform","max-width"],{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut})}},{props:{variant:"filled"},style:{zIndex:1,pointerEvents:"none",transform:"translate(12px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"}},{props:{variant:"filled",size:"small"},style:{transform:"translate(12px, 13px) scale(1)"}},{props:({variant:t,ownerState:s})=>t==="filled"&&s.shrink,style:{userSelect:"none",pointerEvents:"auto",transform:"translate(12px, 7px) scale(0.75)",maxWidth:"calc(133% - 24px)"}},{props:({variant:t,ownerState:s,size:a})=>t==="filled"&&s.shrink&&a==="small",style:{transform:"translate(12px, 4px) scale(0.75)"}},{props:{variant:"outlined"},style:{zIndex:1,pointerEvents:"none",transform:"translate(14px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"}},{props:{variant:"outlined",size:"small"},style:{transform:"translate(14px, 9px) scale(1)"}},{props:({variant:t,ownerState:s})=>t==="outlined"&&s.shrink,style:{userSelect:"none",pointerEvents:"auto",maxWidth:"calc(133% - 32px)",transform:"translate(14px, -9px) scale(0.75)"}}]}))),C8e=p.forwardRef(function(t,s){const a=ar({name:"MuiInputLabel",props:t}),{disableAnimation:n=!1,margin:i,shrink:o,variant:l,className:c,...d}=a,h=t0();let f=o;typeof f>"u"&&h&&(f=h.filled||h.focused||h.adornedStart);const x=Fh({props:a,muiFormControl:h,states:["size","variant","required","focused"]}),y={...a,disableAnimation:n,formControl:h,shrink:f,size:x.size,variant:x.variant,required:x.required,focused:x.focused},v=k8e(y);return r.jsx(S8e,{"data-shrink":f,ref:s,className:fe(v.root,c),...d,ownerState:y,classes:v})});function _8e(e){return er("MuiLinearProgress",e)}Yt("MuiLinearProgress",["root","colorPrimary","colorSecondary","determinate","indeterminate","buffer","query","dashed","dashedColorPrimary","dashedColorSecondary","bar","bar1","bar2","barColorPrimary","barColorSecondary","bar1Indeterminate","bar1Determinate","bar1Buffer","bar2Indeterminate","bar2Buffer"]);const Q_=4,Z_=Ju`
  0% {
    left: -35%;
    right: 100%;
  }

  60% {
    left: 100%;
    right: -90%;
  }

  100% {
    left: 100%;
    right: -90%;
  }
`,E8e=typeof Z_!="string"?Dx`
        animation: ${Z_} 2.1s cubic-bezier(0.65, 0.815, 0.735, 0.395) infinite;
      `:null,J_=Ju`
  0% {
    left: -200%;
    right: 100%;
  }

  60% {
    left: 107%;
    right: -8%;
  }

  100% {
    left: 107%;
    right: -8%;
  }
`,A8e=typeof J_!="string"?Dx`
        animation: ${J_} 2.1s cubic-bezier(0.165, 0.84, 0.44, 1) 1.15s infinite;
      `:null,eE=Ju`
  0% {
    opacity: 1;
    background-position: 0 -23px;
  }

  60% {
    opacity: 0;
    background-position: 0 -23px;
  }

  100% {
    opacity: 1;
    background-position: -200px -23px;
  }
`,P8e=typeof eE!="string"?Dx`
        animation: ${eE} 3s infinite linear;
      `:null,T8e=e=>{const{classes:t,variant:s,color:a}=e,n={root:["root",`color${Ye(a)}`,s],dashed:["dashed",`dashedColor${Ye(a)}`],bar1:["bar","bar1",`barColor${Ye(a)}`,(s==="indeterminate"||s==="query")&&"bar1Indeterminate",s==="determinate"&&"bar1Determinate",s==="buffer"&&"bar1Buffer"],bar2:["bar","bar2",s!=="buffer"&&`barColor${Ye(a)}`,s==="buffer"&&`color${Ye(a)}`,(s==="indeterminate"||s==="query")&&"bar2Indeterminate",s==="buffer"&&"bar2Buffer"]};return tr(n,_8e,t)},VT=(e,t)=>e.vars?e.vars.palette.LinearProgress[`${t}Bg`]:e.palette.mode==="light"?e.lighten(e.palette[t].main,.62):e.darken(e.palette[t].main,.5),I8e=tt("span",{name:"MuiLinearProgress",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:s}=e;return[t.root,t[`color${Ye(s.color)}`],t[s.variant]]}})(Jt(({theme:e})=>({position:"relative",overflow:"hidden",display:"block",height:4,zIndex:0,"@media print":{colorAdjust:"exact"},variants:[...Object.entries(e.palette).filter(ca()).map(([t])=>({props:{color:t},style:{backgroundColor:VT(e,t)}})),{props:({ownerState:t})=>t.color==="inherit"&&t.variant!=="buffer",style:{"&::before":{content:'""',position:"absolute",left:0,top:0,right:0,bottom:0,backgroundColor:"currentColor",opacity:.3}}},{props:{variant:"buffer"},style:{backgroundColor:"transparent"}},{props:{variant:"query"},style:{transform:"rotate(180deg)"}}]}))),D8e=tt("span",{name:"MuiLinearProgress",slot:"Dashed",overridesResolver:(e,t)=>{const{ownerState:s}=e;return[t.dashed,t[`dashedColor${Ye(s.color)}`]]}})(Jt(({theme:e})=>({position:"absolute",marginTop:0,height:"100%",width:"100%",backgroundSize:"10px 10px",backgroundPosition:"0 -23px",variants:[{props:{color:"inherit"},style:{opacity:.3,backgroundImage:"radial-gradient(currentColor 0%, currentColor 16%, transparent 42%)"}},...Object.entries(e.palette).filter(ca()).map(([t])=>{const s=VT(e,t);return{props:{color:t},style:{backgroundImage:`radial-gradient(${s} 0%, ${s} 16%, transparent 42%)`}}})]})),P8e||{animation:`${eE} 3s infinite linear`}),O8e=tt("span",{name:"MuiLinearProgress",slot:"Bar1",overridesResolver:(e,t)=>{const{ownerState:s}=e;return[t.bar,t.bar1,t[`barColor${Ye(s.color)}`],(s.variant==="indeterminate"||s.variant==="query")&&t.bar1Indeterminate,s.variant==="determinate"&&t.bar1Determinate,s.variant==="buffer"&&t.bar1Buffer]}})(Jt(({theme:e})=>({width:"100%",position:"absolute",left:0,bottom:0,top:0,transition:"transform 0.2s linear",transformOrigin:"left",variants:[{props:{color:"inherit"},style:{backgroundColor:"currentColor"}},...Object.entries(e.palette).filter(ca()).map(([t])=>({props:{color:t},style:{backgroundColor:(e.vars||e).palette[t].main}})),{props:{variant:"determinate"},style:{transition:`transform .${Q_}s linear`}},{props:{variant:"buffer"},style:{zIndex:1,transition:`transform .${Q_}s linear`}},{props:({ownerState:t})=>t.variant==="indeterminate"||t.variant==="query",style:{width:"auto"}},{props:({ownerState:t})=>t.variant==="indeterminate"||t.variant==="query",style:E8e||{animation:`${Z_} 2.1s cubic-bezier(0.65, 0.815, 0.735, 0.395) infinite`}}]}))),R8e=tt("span",{name:"MuiLinearProgress",slot:"Bar2",overridesResolver:(e,t)=>{const{ownerState:s}=e;return[t.bar,t.bar2,t[`barColor${Ye(s.color)}`],(s.variant==="indeterminate"||s.variant==="query")&&t.bar2Indeterminate,s.variant==="buffer"&&t.bar2Buffer]}})(Jt(({theme:e})=>({width:"100%",position:"absolute",left:0,bottom:0,top:0,transition:"transform 0.2s linear",transformOrigin:"left",variants:[...Object.entries(e.palette).filter(ca()).map(([t])=>({props:{color:t},style:{"--LinearProgressBar2-barColor":(e.vars||e).palette[t].main}})),{props:({ownerState:t})=>t.variant!=="buffer"&&t.color!=="inherit",style:{backgroundColor:"var(--LinearProgressBar2-barColor, currentColor)"}},{props:({ownerState:t})=>t.variant!=="buffer"&&t.color==="inherit",style:{backgroundColor:"currentColor"}},{props:{color:"inherit"},style:{opacity:.3}},...Object.entries(e.palette).filter(ca()).map(([t])=>({props:{color:t,variant:"buffer"},style:{backgroundColor:VT(e,t),transition:`transform .${Q_}s linear`}})),{props:({ownerState:t})=>t.variant==="indeterminate"||t.variant==="query",style:{width:"auto"}},{props:({ownerState:t})=>t.variant==="indeterminate"||t.variant==="query",style:A8e||{animation:`${J_} 2.1s cubic-bezier(0.165, 0.84, 0.44, 1) 1.15s infinite`}}]}))),M8e=p.forwardRef(function(t,s){const a=ar({props:t,name:"MuiLinearProgress"}),{className:n,color:i="primary",value:o,valueBuffer:l,variant:c="indeterminate",...d}=a,h={...a,color:i,variant:c},f=T8e(h),x=Ox(),y={},v={bar1:{},bar2:{}};if((c==="determinate"||c==="buffer")&&o!==void 0){y["aria-valuenow"]=Math.round(o),y["aria-valuemin"]=0,y["aria-valuemax"]=100;let w=o-100;x&&(w=-w),v.bar1.transform=`translateX(${w}%)`}if(c==="buffer"&&l!==void 0){let w=(l||0)-100;x&&(w=-w),v.bar2.transform=`translateX(${w}%)`}return r.jsxs(I8e,{className:fe(f.root,n),ownerState:h,role:"progressbar",...y,ref:s,...d,children:[c==="buffer"?r.jsx(D8e,{className:f.dashed,ownerState:h}):null,r.jsx(O8e,{className:f.bar1,ownerState:h,style:v.bar1}),c==="determinate"?null:r.jsx(R8e,{className:f.bar2,ownerState:h,style:v.bar2})]})}),L8e=p.createContext({});function F8e(e){return er("MuiList",e)}Yt("MuiList",["root","padding","dense","subheader"]);const B8e=e=>{const{classes:t,disablePadding:s,dense:a,subheader:n}=e;return tr({root:["root",!s&&"padding",a&&"dense",n&&"subheader"]},F8e,t)},$8e=tt("ul",{name:"MuiList",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:s}=e;return[t.root,!s.disablePadding&&t.padding,s.dense&&t.dense,s.subheader&&t.subheader]}})({listStyle:"none",margin:0,padding:0,position:"relative",variants:[{props:({ownerState:e})=>!e.disablePadding,style:{paddingTop:8,paddingBottom:8}},{props:({ownerState:e})=>e.subheader,style:{paddingTop:0}}]}),U8e=p.forwardRef(function(t,s){const a=ar({props:t,name:"MuiList"}),{children:n,className:i,component:o="ul",dense:l=!1,disablePadding:c=!1,subheader:d,...h}=a,f=p.useMemo(()=>({dense:l}),[l]),x={...a,component:o,dense:l,disablePadding:c},y=B8e(x);return r.jsx(L8e.Provider,{value:f,children:r.jsxs($8e,{as:o,className:fe(y.root,i),ref:s,ownerState:x,...h,children:[d,n]})})});function oC(e,t,s){return e===t?e.firstChild:t&&t.nextElementSibling?t.nextElementSibling:s?null:e.firstChild}function nF(e,t,s){return e===t?s?e.firstChild:e.lastChild:t&&t.previousElementSibling?t.previousElementSibling:s?null:e.lastChild}function ZZ(e,t){if(t===void 0)return!0;let s=e.innerText;return s===void 0&&(s=e.textContent),s=s.trim().toLowerCase(),s.length===0?!1:t.repeating?s[0]===t.keys[0]:s.startsWith(t.keys.join(""))}function Cg(e,t,s,a,n,i){let o=!1,l=n(e,t,t?s:!1);for(;l;){if(l===e.firstChild){if(o)return!1;o=!0}const c=a?!1:l.disabled||l.getAttribute("aria-disabled")==="true";if(!l.hasAttribute("tabindex")||!ZZ(l,i)||c)l=n(e,l,s);else return l.focus(),!0}return!1}const V8e=p.forwardRef(function(t,s){const{actions:a,autoFocus:n=!1,autoFocusItem:i=!1,children:o,className:l,disabledItemsFocusable:c=!1,disableListWrap:d=!1,onKeyDown:h,variant:f="selectedMenu",...x}=t,y=p.useRef(null),v=p.useRef({keys:[],repeating:!0,previousKeyMatched:!0,lastTime:null});pc(()=>{n&&y.current.focus()},[n]),p.useImperativeHandle(a,()=>({adjustStyleForScrollbar:(E,{direction:_})=>{const T=!y.current.style.width;if(E.clientHeight<y.current.clientHeight&&T){const A=`${qZ(Ol(E))}px`;y.current.style[_==="rtl"?"paddingLeft":"paddingRight"]=A,y.current.style.width=`calc(100% + ${A})`}return y.current}}),[]);const w=E=>{const _=y.current,T=E.key;if(E.ctrlKey||E.metaKey||E.altKey){h&&h(E);return}const P=Ym(Bi(_));if(T==="ArrowDown")E.preventDefault(),Cg(_,P,d,c,oC);else if(T==="ArrowUp")E.preventDefault(),Cg(_,P,d,c,nF);else if(T==="Home")E.preventDefault(),Cg(_,null,d,c,oC);else if(T==="End")E.preventDefault(),Cg(_,null,d,c,nF);else if(T.length===1){const M=v.current,R=T.toLowerCase(),$=performance.now();M.keys.length>0&&($-M.lastTime>500?(M.keys=[],M.repeating=!0,M.previousKeyMatched=!0):M.repeating&&R!==M.keys[0]&&(M.repeating=!1)),M.lastTime=$,M.keys.push(R);const W=P&&!M.repeating&&ZZ(P,M);M.previousKeyMatched&&(W||Cg(_,P,!1,c,oC,M))?E.preventDefault():M.previousKeyMatched=!1}h&&h(E)},N=un(y,s);let k=-1;p.Children.forEach(o,(E,_)=>{if(!p.isValidElement(E)){k===_&&(k+=1,k>=o.length&&(k=-1));return}E.props.disabled||(f==="selectedMenu"&&E.props.selected||k===-1)&&(k=_),k===_&&(E.props.disabled||E.props.muiSkipListHighlight||E.type.muiSkipListHighlight)&&(k+=1,k>=o.length&&(k=-1))});const C=p.Children.map(o,(E,_)=>{if(_===k){const T={};return i&&(T.autoFocus=!0),E.props.tabIndex===void 0&&f==="selectedMenu"&&(T.tabIndex=0),p.cloneElement(E,T)}return E});return r.jsx(U8e,{role:"menu",ref:N,className:l,onKeyDown:w,tabIndex:n?0:-1,...x,children:C})});function W8e(e){return er("MuiPopover",e)}Yt("MuiPopover",["root","paper"]);function iF(e,t){let s=0;return typeof t=="number"?s=t:t==="center"?s=e.height/2:t==="bottom"&&(s=e.height),s}function oF(e,t){let s=0;return typeof t=="number"?s=t:t==="center"?s=e.width/2:t==="right"&&(s=e.width),s}function lF(e){return[e.horizontal,e.vertical].map(t=>typeof t=="number"?`${t}px`:t).join(" ")}function i1(e){return typeof e=="function"?e():e}const z8e=e=>{const{classes:t}=e;return tr({root:["root"],paper:["paper"]},W8e,t)},q8e=tt(HZ,{name:"MuiPopover",slot:"Root"})({}),JZ=tt(Lx,{name:"MuiPopover",slot:"Paper"})({position:"absolute",overflowY:"auto",overflowX:"hidden",minWidth:16,minHeight:16,maxWidth:"calc(100% - 32px)",maxHeight:"calc(100% - 32px)",outline:0}),H8e=p.forwardRef(function(t,s){const a=ar({props:t,name:"MuiPopover"}),{action:n,anchorEl:i,anchorOrigin:o={vertical:"top",horizontal:"left"},anchorPosition:l,anchorReference:c="anchorEl",children:d,className:h,container:f,elevation:x=8,marginThreshold:y=16,open:v,PaperProps:w={},slots:N={},slotProps:k={},transformOrigin:C={vertical:"top",horizontal:"left"},TransitionComponent:E,transitionDuration:_="auto",TransitionProps:T={},disableScrollLock:A=!1,...P}=a,M=p.useRef(),R={...a,anchorOrigin:o,anchorReference:c,elevation:x,marginThreshold:y,transformOrigin:C,TransitionComponent:E,transitionDuration:_,TransitionProps:T},$=z8e(R),W=p.useCallback(()=>{if(c==="anchorPosition")return l;const ge=i1(i),Q=(ge&&ge.nodeType===1?ge:Bi(M.current).body).getBoundingClientRect();return{top:Q.top+iF(Q,o.vertical),left:Q.left+oF(Q,o.horizontal)}},[i,o.horizontal,o.vertical,l,c]),I=p.useCallback(ge=>({vertical:iF(ge,C.vertical),horizontal:oF(ge,C.horizontal)}),[C.horizontal,C.vertical]),B=p.useCallback(ge=>{const Z={width:ge.offsetWidth,height:ge.offsetHeight},Q=I(Z);if(c==="none")return{top:null,left:null,transformOrigin:lF(Q)};const re=W();let pe=re.top-Q.vertical,Se=re.left-Q.horizontal;const je=pe+Z.height,Fe=Se+Z.width,ke=Ol(i1(i)),Ve=ke.innerHeight-y,le=ke.innerWidth-y;if(y!==null&&pe<y){const me=pe-y;pe-=me,Q.vertical+=me}else if(y!==null&&je>Ve){const me=je-Ve;pe-=me,Q.vertical+=me}if(y!==null&&Se<y){const me=Se-y;Se-=me,Q.horizontal+=me}else if(Fe>le){const me=Fe-le;Se-=me,Q.horizontal+=me}return{top:`${Math.round(pe)}px`,left:`${Math.round(Se)}px`,transformOrigin:lF(Q)}},[i,c,W,I,y]),[O,F]=p.useState(v),q=p.useCallback(()=>{const ge=M.current;if(!ge)return;const Z=B(ge);Z.top!==null&&ge.style.setProperty("top",Z.top),Z.left!==null&&(ge.style.left=Z.left),ge.style.transformOrigin=Z.transformOrigin,F(!0)},[B]);p.useEffect(()=>(A&&window.addEventListener("scroll",q),()=>window.removeEventListener("scroll",q)),[i,A,q]);const H=()=>{q()},K=()=>{F(!1)};p.useEffect(()=>{v&&q()}),p.useImperativeHandle(n,()=>v?{updatePosition:()=>{q()}}:null,[v,q]),p.useEffect(()=>{if(!v)return;const ge=Vk(()=>{q()}),Z=Ol(i1(i));return Z.addEventListener("resize",ge),()=>{ge.clear(),Z.removeEventListener("resize",ge)}},[i,v,q]);let V=_;const z={slots:{transition:E,...N},slotProps:{transition:T,paper:w,...k}},[G,te]=nr("transition",{elementType:pN,externalForwardedProps:z,ownerState:R,getSlotProps:ge=>({...ge,onEntering:(Z,Q)=>{var re;(re=ge.onEntering)==null||re.call(ge,Z,Q),H()},onExited:Z=>{var Q;(Q=ge.onExited)==null||Q.call(ge,Z),K()}}),additionalProps:{appear:!0,in:v}});_==="auto"&&!G.muiSupportAuto&&(V=void 0);const he=f||(i?Bi(i1(i)).body:void 0),[ne,{slots:ce,slotProps:xe,..._e}]=nr("root",{ref:s,elementType:q8e,externalForwardedProps:{...z,...P},shouldForwardComponentProp:!0,additionalProps:{slots:{backdrop:N.backdrop},slotProps:{backdrop:dOe(typeof k.backdrop=="function"?k.backdrop(R):k.backdrop,{invisible:!0})},container:he,open:v},ownerState:R,className:fe($.root,h)}),[oe,ie]=nr("paper",{ref:M,className:$.paper,elementType:JZ,externalForwardedProps:z,shouldForwardComponentProp:!0,additionalProps:{elevation:x,style:O?void 0:{opacity:0}},ownerState:R});return r.jsx(ne,{..._e,...!hN(ne)&&{slots:ce,slotProps:xe,disableScrollLock:A},children:r.jsx(G,{...te,timeout:V,children:r.jsx(oe,{...ie,children:d})})})});function K8e(e){return er("MuiMenu",e)}Yt("MuiMenu",["root","paper","list"]);const G8e={vertical:"top",horizontal:"right"},Y8e={vertical:"top",horizontal:"left"},X8e=e=>{const{classes:t}=e;return tr({root:["root"],paper:["paper"],list:["list"]},K8e,t)},Q8e=tt(H8e,{shouldForwardProp:e=>il(e)||e==="classes",name:"MuiMenu",slot:"Root"})({}),Z8e=tt(JZ,{name:"MuiMenu",slot:"Paper"})({maxHeight:"calc(100% - 96px)",WebkitOverflowScrolling:"touch"}),J8e=tt(V8e,{name:"MuiMenu",slot:"List"})({outline:0}),eLe=p.forwardRef(function(t,s){const a=ar({props:t,name:"MuiMenu"}),{autoFocus:n=!0,children:i,className:o,disableAutoFocusItem:l=!1,MenuListProps:c={},onClose:d,open:h,PaperProps:f={},PopoverClasses:x,transitionDuration:y="auto",TransitionProps:{onEntering:v,...w}={},variant:N="selectedMenu",slots:k={},slotProps:C={},...E}=a,_=Ox(),T={...a,autoFocus:n,disableAutoFocusItem:l,MenuListProps:c,onEntering:v,PaperProps:f,transitionDuration:y,TransitionProps:w,variant:N},A=X8e(T),P=n&&!l&&h,M=p.useRef(null),R=(V,z)=>{M.current&&M.current.adjustStyleForScrollbar(V,{direction:_?"rtl":"ltr"}),v&&v(V,z)},$=V=>{V.key==="Tab"&&(V.preventDefault(),d&&d(V,"tabKeyDown"))};let W=-1;p.Children.map(i,(V,z)=>{p.isValidElement(V)&&(V.props.disabled||(N==="selectedMenu"&&V.props.selected||W===-1)&&(W=z))});const I={slots:k,slotProps:{list:c,transition:w,paper:f,...C}},B=ix({elementType:k.root,externalSlotProps:C.root,ownerState:T,className:[A.root,o]}),[O,F]=nr("paper",{className:A.paper,elementType:Z8e,externalForwardedProps:I,shouldForwardComponentProp:!0,ownerState:T}),[q,H]=nr("list",{className:fe(A.list,c.className),elementType:J8e,shouldForwardComponentProp:!0,externalForwardedProps:I,getSlotProps:V=>({...V,onKeyDown:z=>{var G;$(z),(G=V.onKeyDown)==null||G.call(V,z)}}),ownerState:T}),K=typeof I.slotProps.transition=="function"?I.slotProps.transition(T):I.slotProps.transition;return r.jsx(Q8e,{onClose:d,anchorOrigin:{vertical:"bottom",horizontal:_?"right":"left"},transformOrigin:_?G8e:Y8e,slots:{root:k.root,paper:O,backdrop:k.backdrop,...k.transition&&{transition:k.transition}},slotProps:{root:B,paper:F,backdrop:typeof C.backdrop=="function"?C.backdrop(T):C.backdrop,transition:{...K,onEntering:(...V)=>{var z;R(...V),(z=K==null?void 0:K.onEntering)==null||z.call(K,...V)}}},open:h,ref:s,transitionDuration:y,ownerState:T,...E,classes:x,children:r.jsx(q,{actions:M,autoFocus:n&&(W===-1||l),autoFocusItem:P,variant:N,...H,children:i})})});function tLe(e){return er("MuiNativeSelect",e)}const WT=Yt("MuiNativeSelect",["root","select","multiple","filled","outlined","standard","disabled","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput","error"]),rLe=e=>{const{classes:t,variant:s,disabled:a,multiple:n,open:i,error:o}=e,l={select:["select",s,a&&"disabled",n&&"multiple",o&&"error"],icon:["icon",`icon${Ye(s)}`,i&&"iconOpen",a&&"disabled"]};return tr(l,tLe,t)},eJ=tt("select",{name:"MuiNativeSelect"})(({theme:e})=>({MozAppearance:"none",WebkitAppearance:"none",userSelect:"none",borderRadius:0,cursor:"pointer","&:focus":{borderRadius:0},[`&.${WT.disabled}`]:{cursor:"default"},"&[multiple]":{height:"auto"},"&:not([multiple]) option, &:not([multiple]) optgroup":{backgroundColor:(e.vars||e).palette.background.paper},variants:[{props:({ownerState:t})=>t.variant!=="filled"&&t.variant!=="outlined",style:{"&&&":{paddingRight:24,minWidth:16}}},{props:{variant:"filled"},style:{"&&&":{paddingRight:32}}},{props:{variant:"outlined"},style:{borderRadius:(e.vars||e).shape.borderRadius,"&:focus":{borderRadius:(e.vars||e).shape.borderRadius},"&&&":{paddingRight:32}}}]})),sLe=tt(eJ,{name:"MuiNativeSelect",slot:"Select",shouldForwardProp:il,overridesResolver:(e,t)=>{const{ownerState:s}=e;return[t.select,t[s.variant],s.error&&t.error,{[`&.${WT.multiple}`]:t.multiple}]}})({}),tJ=tt("svg",{name:"MuiNativeSelect"})(({theme:e})=>({position:"absolute",right:0,top:"calc(50% - .5em)",pointerEvents:"none",color:(e.vars||e).palette.action.active,[`&.${WT.disabled}`]:{color:(e.vars||e).palette.action.disabled},variants:[{props:({ownerState:t})=>t.open,style:{transform:"rotate(180deg)"}},{props:{variant:"filled"},style:{right:7}},{props:{variant:"outlined"},style:{right:7}}]})),aLe=tt(tJ,{name:"MuiNativeSelect",slot:"Icon",overridesResolver:(e,t)=>{const{ownerState:s}=e;return[t.icon,s.variant&&t[`icon${Ye(s.variant)}`],s.open&&t.iconOpen]}})({}),nLe=p.forwardRef(function(t,s){const{className:a,disabled:n,error:i,IconComponent:o,inputRef:l,variant:c="standard",...d}=t,h={...t,disabled:n,variant:c,error:i},f=rLe(h);return r.jsxs(p.Fragment,{children:[r.jsx(sLe,{ownerState:h,className:fe(f.select,a),disabled:n,ref:l||s,...d}),t.multiple?null:r.jsx(aLe,{as:o,ownerState:h,className:f.icon})]})});var cF;const iLe=tt("fieldset",{name:"MuiNotchedOutlined",shouldForwardProp:il})({textAlign:"left",position:"absolute",bottom:0,right:0,top:-5,left:0,margin:0,padding:"0 8px",pointerEvents:"none",borderRadius:"inherit",borderStyle:"solid",borderWidth:1,overflow:"hidden",minWidth:"0%"}),oLe=tt("legend",{name:"MuiNotchedOutlined",shouldForwardProp:il})(Jt(({theme:e})=>({float:"unset",width:"auto",overflow:"hidden",variants:[{props:({ownerState:t})=>!t.withLabel,style:{padding:0,lineHeight:"11px",transition:e.transitions.create("width",{duration:150,easing:e.transitions.easing.easeOut})}},{props:({ownerState:t})=>t.withLabel,style:{display:"block",padding:0,height:11,fontSize:"0.75em",visibility:"hidden",maxWidth:.01,transition:e.transitions.create("max-width",{duration:50,easing:e.transitions.easing.easeOut}),whiteSpace:"nowrap","& > span":{paddingLeft:5,paddingRight:5,display:"inline-block",opacity:0,visibility:"visible"}}},{props:({ownerState:t})=>t.withLabel&&t.notched,style:{maxWidth:"100%",transition:e.transitions.create("max-width",{duration:100,easing:e.transitions.easing.easeOut,delay:50})}}]})));function lLe(e){const{children:t,classes:s,className:a,label:n,notched:i,...o}=e,l=n!=null&&n!=="",c={...e,notched:i,withLabel:l};return r.jsx(iLe,{"aria-hidden":!0,className:a,ownerState:c,...o,children:r.jsx(oLe,{ownerState:c,children:l?r.jsx("span",{children:n}):cF||(cF=r.jsx("span",{className:"notranslate","aria-hidden":!0,children:""}))})})}const cLe=e=>{const{classes:t}=e,a=tr({root:["root"],notchedOutline:["notchedOutline"],input:["input"]},$Me,t);return{...t,...a}},dLe=tt(Gk,{shouldForwardProp:e=>il(e)||e==="classes",name:"MuiOutlinedInput",slot:"Root",overridesResolver:Hk})(Jt(({theme:e})=>{const t=e.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return{position:"relative",borderRadius:(e.vars||e).shape.borderRadius,[`&:hover .${Wl.notchedOutline}`]:{borderColor:(e.vars||e).palette.text.primary},"@media (hover: none)":{[`&:hover .${Wl.notchedOutline}`]:{borderColor:e.vars?e.alpha(e.vars.palette.common.onBackground,.23):t}},[`&.${Wl.focused} .${Wl.notchedOutline}`]:{borderWidth:2},variants:[...Object.entries(e.palette).filter(ca()).map(([s])=>({props:{color:s},style:{[`&.${Wl.focused} .${Wl.notchedOutline}`]:{borderColor:(e.vars||e).palette[s].main}}})),{props:{},style:{[`&.${Wl.error} .${Wl.notchedOutline}`]:{borderColor:(e.vars||e).palette.error.main},[`&.${Wl.disabled} .${Wl.notchedOutline}`]:{borderColor:(e.vars||e).palette.action.disabled}}},{props:({ownerState:s})=>s.startAdornment,style:{paddingLeft:14}},{props:({ownerState:s})=>s.endAdornment,style:{paddingRight:14}},{props:({ownerState:s})=>s.multiline,style:{padding:"16.5px 14px"}},{props:({ownerState:s,size:a})=>s.multiline&&a==="small",style:{padding:"8.5px 14px"}}]}})),uLe=tt(lLe,{name:"MuiOutlinedInput",slot:"NotchedOutline"})(Jt(({theme:e})=>{const t=e.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return{borderColor:e.vars?e.alpha(e.vars.palette.common.onBackground,.23):t}})),hLe=tt(Yk,{name:"MuiOutlinedInput",slot:"Input",overridesResolver:Kk})(Jt(({theme:e})=>({padding:"16.5px 14px",...!e.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:e.palette.mode==="light"?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:e.palette.mode==="light"?null:"#fff",caretColor:e.palette.mode==="light"?null:"#fff",borderRadius:"inherit"}},...e.vars&&{"&:-webkit-autofill":{borderRadius:"inherit"},[e.getColorSchemeSelector("dark")]:{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}},variants:[{props:{size:"small"},style:{padding:"8.5px 14px"}},{props:({ownerState:t})=>t.multiline,style:{padding:0}},{props:({ownerState:t})=>t.startAdornment,style:{paddingLeft:0}},{props:({ownerState:t})=>t.endAdornment,style:{paddingRight:0}}]}))),zT=p.forwardRef(function(t,s){const a=ar({props:t,name:"MuiOutlinedInput"}),{components:n={},fullWidth:i=!1,inputComponent:o="input",label:l,multiline:c=!1,notched:d,slots:h={},slotProps:f={},type:x="text",...y}=a,v=cLe(a),w=t0(),N=Fh({props:a,muiFormControl:w,states:["color","disabled","error","focused","hiddenLabel","size","required"]}),k={...a,color:N.color||"primary",disabled:N.disabled,error:N.error,focused:N.focused,formControl:w,fullWidth:i,hiddenLabel:N.hiddenLabel,multiline:c,size:N.size,type:x},C=h.root??n.Root??dLe,E=h.input??n.Input??hLe,[_,T]=nr("notchedOutline",{elementType:uLe,className:v.notchedOutline,shouldForwardComponentProp:!0,ownerState:k,externalForwardedProps:{slots:h,slotProps:f},additionalProps:{label:l!=null&&l!==""&&N.required?r.jsxs(p.Fragment,{children:[l,"","*"]}):l}});return r.jsx(BT,{slots:{root:C,input:E},slotProps:f,renderSuffix:A=>r.jsx(_,{...T,notched:typeof d<"u"?d:!!(A.startAdornment||A.filled||A.focused)}),fullWidth:i,inputComponent:o,multiline:c,ref:s,type:x,...y,classes:{...v,notchedOutline:null}})});zT.muiName="Input";function rJ(e){return er("MuiSelect",e)}const _g=Yt("MuiSelect",["root","select","multiple","filled","outlined","standard","disabled","focused","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput","error"]);var dF;const mLe=tt(eJ,{name:"MuiSelect",slot:"Select",overridesResolver:(e,t)=>{const{ownerState:s}=e;return[{[`&.${_g.select}`]:t.select},{[`&.${_g.select}`]:t[s.variant]},{[`&.${_g.error}`]:t.error},{[`&.${_g.multiple}`]:t.multiple}]}})({[`&.${_g.select}`]:{height:"auto",minHeight:"1.4375em",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"}}),fLe=tt(tJ,{name:"MuiSelect",slot:"Icon",overridesResolver:(e,t)=>{const{ownerState:s}=e;return[t.icon,s.variant&&t[`icon${Ye(s.variant)}`],s.open&&t.iconOpen]}})({}),xLe=tt("input",{shouldForwardProp:e=>NZ(e)&&e!=="classes",name:"MuiSelect",slot:"NativeInput"})({bottom:0,left:0,position:"absolute",opacity:0,pointerEvents:"none",width:"100%",boxSizing:"border-box"});function uF(e,t){return typeof t=="object"&&t!==null?e===t:String(e)===String(t)}function gLe(e){return e==null||typeof e=="string"&&!e.trim()}const pLe=e=>{const{classes:t,variant:s,disabled:a,multiple:n,open:i,error:o}=e,l={select:["select",s,a&&"disabled",n&&"multiple",o&&"error"],icon:["icon",`icon${Ye(s)}`,i&&"iconOpen",a&&"disabled"],nativeInput:["nativeInput"]};return tr(l,rJ,t)},yLe=p.forwardRef(function(t,s){var Lt,Ur,wr,ua;const{"aria-describedby":a,"aria-label":n,autoFocus:i,autoWidth:o,children:l,className:c,defaultOpen:d,defaultValue:h,disabled:f,displayEmpty:x,error:y=!1,IconComponent:v,inputRef:w,labelId:N,MenuProps:k={},multiple:C,name:E,onBlur:_,onChange:T,onClose:A,onFocus:P,onKeyDown:M,onMouseDown:R,onOpen:$,open:W,readOnly:I,renderValue:B,required:O,SelectDisplayProps:F={},tabIndex:q,type:H,value:K,variant:V="standard",...z}=t,[G,te]=cN({controlled:K,default:h,name:"Select"}),[he,ne]=cN({controlled:W,default:d,name:"Select"}),ce=p.useRef(null),xe=p.useRef(null),[_e,oe]=p.useState(null),{current:ie}=p.useRef(W!=null),[ge,Z]=p.useState(),Q=un(s,w),re=p.useCallback(Je=>{xe.current=Je,Je&&oe(Je)},[]),pe=_e==null?void 0:_e.parentNode;p.useImperativeHandle(Q,()=>({focus:()=>{xe.current.focus()},node:ce.current,value:G}),[G]),p.useEffect(()=>{d&&he&&_e&&!ie&&(Z(o?null:pe.clientWidth),xe.current.focus())},[_e,o]),p.useEffect(()=>{i&&xe.current.focus()},[i]),p.useEffect(()=>{if(!N)return;const Je=Bi(xe.current).getElementById(N);if(Je){const Xt=()=>{getSelection().isCollapsed&&xe.current.focus()};return Je.addEventListener("click",Xt),()=>{Je.removeEventListener("click",Xt)}}},[N]);const Se=(Je,Xt)=>{Je?$&&$(Xt):A&&A(Xt),ie||(Z(o?null:pe.clientWidth),ne(Je))},je=Je=>{R==null||R(Je),Je.button===0&&(Je.preventDefault(),xe.current.focus(),Se(!0,Je))},Fe=Je=>{Se(!1,Je)},ke=p.Children.toArray(l),Ve=Je=>{const Xt=ke.find(ur=>ur.props.value===Je.target.value);Xt!==void 0&&(te(Xt.props.value),T&&T(Je,Xt))},le=Je=>Xt=>{let ur;if(Xt.currentTarget.hasAttribute("tabindex")){if(C){ur=Array.isArray(G)?G.slice():[];const es=G.indexOf(Je.props.value);es===-1?ur.push(Je.props.value):ur.splice(es,1)}else ur=Je.props.value;if(Je.props.onClick&&Je.props.onClick(Xt),G!==ur&&(te(ur),T)){const es=Xt.nativeEvent||Xt,Cs=new es.constructor(es.type,es);Object.defineProperty(Cs,"target",{writable:!0,value:{value:ur,name:E}}),T(Cs,Je)}C||Se(!1,Xt)}},me=Je=>{I||([" ","ArrowUp","ArrowDown","Enter"].includes(Je.key)&&(Je.preventDefault(),Se(!0,Je)),M==null||M(Je))},ve=_e!==null&&he,Ze=Je=>{!ve&&_&&(Object.defineProperty(Je,"target",{writable:!0,value:{value:G,name:E}}),_(Je))};delete z["aria-invalid"];let $e,Ne;const He=[];let gt=!1;(gN({value:G})||x)&&(B?$e=B(G):gt=!0);const yt=ke.map(Je=>{if(!p.isValidElement(Je))return null;let Xt;if(C){if(!Array.isArray(G))throw new Error(md(2));Xt=G.some(ur=>uF(ur,Je.props.value)),Xt&&gt&&He.push(Je.props.children)}else Xt=uF(G,Je.props.value),Xt&&gt&&(Ne=Je.props.children);return p.cloneElement(Je,{"aria-selected":Xt?"true":"false",onClick:le(Je),onKeyUp:ur=>{ur.key===" "&&ur.preventDefault(),Je.props.onKeyUp&&Je.props.onKeyUp(ur)},role:"option",selected:Xt,value:void 0,"data-value":Je.props.value})});gt&&(C?He.length===0?$e=null:$e=He.reduce((Je,Xt,ur)=>(Je.push(Xt),ur<He.length-1&&Je.push(", "),Je),[]):$e=Ne);let Vt=ge;!o&&ie&&_e&&(Vt=pe.clientWidth);let $r;typeof q<"u"?$r=q:$r=f?null:0;const De=F.id||(E?`mui-component-select-${E}`:void 0),Xe={...t,variant:V,value:G,open:ve,error:y},st=pLe(Xe),Ce={...k.PaperProps,...typeof((Lt=k.slotProps)==null?void 0:Lt.paper)=="function"?k.slotProps.paper(Xe):(Ur=k.slotProps)==null?void 0:Ur.paper},ct={...k.MenuListProps,...typeof((wr=k.slotProps)==null?void 0:wr.list)=="function"?k.slotProps.list(Xe):(ua=k.slotProps)==null?void 0:ua.list},ht=Rx();return r.jsxs(p.Fragment,{children:[r.jsx(mLe,{as:"div",ref:re,tabIndex:$r,role:"combobox","aria-controls":ve?ht:void 0,"aria-disabled":f?"true":void 0,"aria-expanded":ve?"true":"false","aria-haspopup":"listbox","aria-label":n,"aria-labelledby":[N,De].filter(Boolean).join(" ")||void 0,"aria-describedby":a,"aria-required":O?"true":void 0,"aria-invalid":y?"true":void 0,onKeyDown:me,onMouseDown:f||I?null:je,onBlur:Ze,onFocus:P,...F,ownerState:Xe,className:fe(F.className,st.select,c),id:De,children:gLe($e)?dF||(dF=r.jsx("span",{className:"notranslate","aria-hidden":!0,children:""})):$e}),r.jsx(xLe,{"aria-invalid":y,value:Array.isArray(G)?G.join(","):G,name:E,ref:ce,"aria-hidden":!0,onChange:Ve,tabIndex:-1,disabled:f,className:st.nativeInput,autoFocus:i,required:O,...z,ownerState:Xe}),r.jsx(fLe,{as:v,className:st.icon,ownerState:Xe}),r.jsx(eLe,{id:`menu-${E||""}`,anchorEl:pe,open:ve,onClose:Fe,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"},...k,slotProps:{...k.slotProps,list:{"aria-labelledby":N,role:"listbox","aria-multiselectable":C?"true":void 0,disableListWrap:!0,id:ht,...ct},paper:{...Ce,style:{minWidth:Vt,...Ce!=null?Ce.style:null}}},children:yt})]})}),bLe=e=>{const{classes:t}=e,a=tr({root:["root"]},rJ,t);return{...t,...a}},qT={name:"MuiSelect",slot:"Root",shouldForwardProp:e=>il(e)&&e!=="variant"},vLe=tt(UT,qT)(""),wLe=tt(zT,qT)(""),jLe=tt($T,qT)(""),sJ=p.forwardRef(function(t,s){const a=ar({name:"MuiSelect",props:t}),{autoWidth:n=!1,children:i,classes:o={},className:l,defaultOpen:c=!1,displayEmpty:d=!1,IconComponent:h=VMe,id:f,input:x,inputProps:y,label:v,labelId:w,MenuProps:N,multiple:k=!1,native:C=!1,onClose:E,onOpen:_,open:T,renderValue:A,SelectDisplayProps:P,variant:M="outlined",...R}=a,$=C?nLe:yLe,W=t0(),I=Fh({props:a,muiFormControl:W,states:["variant","error"]}),B=I.variant||M,O={...a,variant:B,classes:o},F=bLe(O),{root:q,...H}=F,K=x||{standard:r.jsx(vLe,{ownerState:O}),outlined:r.jsx(wLe,{label:v,ownerState:O}),filled:r.jsx(jLe,{ownerState:O})}[B],V=un(s,Fx(K));return r.jsx(p.Fragment,{children:p.cloneElement(K,{inputComponent:$,inputProps:{children:i,error:I.error,IconComponent:h,variant:B,type:void 0,multiple:k,...C?{id:f}:{autoWidth:n,defaultOpen:c,displayEmpty:d,labelId:w,MenuProps:N,onClose:E,onOpen:_,open:T,renderValue:A,SelectDisplayProps:{id:f,...P}},...y,classes:y?qn(H,y.classes):H,...x?x.props.inputProps:{}},...(k&&C||d)&&B==="outlined"?{notched:!0}:{},ref:V,className:fe(K.props.className,l,F.root),...!x&&{variant:B},...R})})});sJ.muiName="Select";function NLe(e){return er("MuiTooltip",e)}const ia=Yt("MuiTooltip",["popper","popperInteractive","popperArrow","popperClose","tooltip","tooltipArrow","touch","tooltipPlacementLeft","tooltipPlacementRight","tooltipPlacementTop","tooltipPlacementBottom","arrow"]);function kLe(e){return Math.round(e*1e5)/1e5}const SLe=e=>{const{classes:t,disableInteractive:s,arrow:a,touch:n,placement:i}=e,o={popper:["popper",!s&&"popperInteractive",a&&"popperArrow"],tooltip:["tooltip",a&&"tooltipArrow",n&&"touch",`tooltipPlacement${Ye(i.split("-")[0])}`],arrow:["arrow"]};return tr(o,NLe,t)},CLe=tt(VZ,{name:"MuiTooltip",slot:"Popper",overridesResolver:(e,t)=>{const{ownerState:s}=e;return[t.popper,!s.disableInteractive&&t.popperInteractive,s.arrow&&t.popperArrow,!s.open&&t.popperClose]}})(Jt(({theme:e})=>({zIndex:(e.vars||e).zIndex.tooltip,pointerEvents:"none",variants:[{props:({ownerState:t})=>!t.disableInteractive,style:{pointerEvents:"auto"}},{props:({open:t})=>!t,style:{pointerEvents:"none"}},{props:({ownerState:t})=>t.arrow,style:{[`&[data-popper-placement*="bottom"] .${ia.arrow}`]:{top:0,marginTop:"-0.71em","&::before":{transformOrigin:"0 100%"}},[`&[data-popper-placement*="top"] .${ia.arrow}`]:{bottom:0,marginBottom:"-0.71em","&::before":{transformOrigin:"100% 0"}},[`&[data-popper-placement*="right"] .${ia.arrow}`]:{height:"1em",width:"0.71em","&::before":{transformOrigin:"100% 100%"}},[`&[data-popper-placement*="left"] .${ia.arrow}`]:{height:"1em",width:"0.71em","&::before":{transformOrigin:"0 0"}}}},{props:({ownerState:t})=>t.arrow&&!t.isRtl,style:{[`&[data-popper-placement*="right"] .${ia.arrow}`]:{left:0,marginLeft:"-0.71em"}}},{props:({ownerState:t})=>t.arrow&&!!t.isRtl,style:{[`&[data-popper-placement*="right"] .${ia.arrow}`]:{right:0,marginRight:"-0.71em"}}},{props:({ownerState:t})=>t.arrow&&!t.isRtl,style:{[`&[data-popper-placement*="left"] .${ia.arrow}`]:{right:0,marginRight:"-0.71em"}}},{props:({ownerState:t})=>t.arrow&&!!t.isRtl,style:{[`&[data-popper-placement*="left"] .${ia.arrow}`]:{left:0,marginLeft:"-0.71em"}}}]}))),_Le=tt("div",{name:"MuiTooltip",slot:"Tooltip",overridesResolver:(e,t)=>{const{ownerState:s}=e;return[t.tooltip,s.touch&&t.touch,s.arrow&&t.tooltipArrow,t[`tooltipPlacement${Ye(s.placement.split("-")[0])}`]]}})(Jt(({theme:e})=>({backgroundColor:e.vars?e.vars.palette.Tooltip.bg:e.alpha(e.palette.grey[700],.92),borderRadius:(e.vars||e).shape.borderRadius,color:(e.vars||e).palette.common.white,fontFamily:e.typography.fontFamily,padding:"4px 8px",fontSize:e.typography.pxToRem(11),maxWidth:300,margin:2,wordWrap:"break-word",fontWeight:e.typography.fontWeightMedium,[`.${ia.popper}[data-popper-placement*="left"] &`]:{transformOrigin:"right center"},[`.${ia.popper}[data-popper-placement*="right"] &`]:{transformOrigin:"left center"},[`.${ia.popper}[data-popper-placement*="top"] &`]:{transformOrigin:"center bottom",marginBottom:"14px"},[`.${ia.popper}[data-popper-placement*="bottom"] &`]:{transformOrigin:"center top",marginTop:"14px"},variants:[{props:({ownerState:t})=>t.arrow,style:{position:"relative",margin:0}},{props:({ownerState:t})=>t.touch,style:{padding:"8px 16px",fontSize:e.typography.pxToRem(14),lineHeight:`${kLe(16/14)}em`,fontWeight:e.typography.fontWeightRegular}},{props:({ownerState:t})=>!t.isRtl,style:{[`.${ia.popper}[data-popper-placement*="left"] &`]:{marginRight:"14px"},[`.${ia.popper}[data-popper-placement*="right"] &`]:{marginLeft:"14px"}}},{props:({ownerState:t})=>!t.isRtl&&t.touch,style:{[`.${ia.popper}[data-popper-placement*="left"] &`]:{marginRight:"24px"},[`.${ia.popper}[data-popper-placement*="right"] &`]:{marginLeft:"24px"}}},{props:({ownerState:t})=>!!t.isRtl,style:{[`.${ia.popper}[data-popper-placement*="left"] &`]:{marginLeft:"14px"},[`.${ia.popper}[data-popper-placement*="right"] &`]:{marginRight:"14px"}}},{props:({ownerState:t})=>!!t.isRtl&&t.touch,style:{[`.${ia.popper}[data-popper-placement*="left"] &`]:{marginLeft:"24px"},[`.${ia.popper}[data-popper-placement*="right"] &`]:{marginRight:"24px"}}},{props:({ownerState:t})=>t.touch,style:{[`.${ia.popper}[data-popper-placement*="top"] &`]:{marginBottom:"24px"}}},{props:({ownerState:t})=>t.touch,style:{[`.${ia.popper}[data-popper-placement*="bottom"] &`]:{marginTop:"24px"}}}]}))),ELe=tt("span",{name:"MuiTooltip",slot:"Arrow"})(Jt(({theme:e})=>({overflow:"hidden",position:"absolute",width:"1em",height:"0.71em",boxSizing:"border-box",color:e.vars?e.vars.palette.Tooltip.bg:e.alpha(e.palette.grey[700],.9),"&::before":{content:'""',margin:"auto",display:"block",width:"100%",height:"100%",backgroundColor:"currentColor",transform:"rotate(45deg)"}})));let o1=!1;const hF=new Wk;let Eg={x:0,y:0};function l1(e,t){return(s,...a)=>{t&&t(s,...a),e(s,...a)}}const mF=p.forwardRef(function(t,s){const a=ar({props:t,name:"MuiTooltip"}),{arrow:n=!1,children:i,classes:o,components:l={},componentsProps:c={},describeChild:d=!1,disableFocusListener:h=!1,disableHoverListener:f=!1,disableInteractive:x=!1,disableTouchListener:y=!1,enterDelay:v=100,enterNextDelay:w=0,enterTouchDelay:N=700,followCursor:k=!1,id:C,leaveDelay:E=0,leaveTouchDelay:_=1500,onClose:T,onOpen:A,open:P,placement:M="bottom",PopperComponent:R,PopperProps:$={},slotProps:W={},slots:I={},title:B,TransitionComponent:O,TransitionProps:F,...q}=a,H=p.isValidElement(i)?i:r.jsx("span",{children:i}),K=Mx(),V=Ox(),[z,G]=p.useState(),[te,he]=p.useState(null),ne=p.useRef(!1),ce=x||k,xe=Km(),_e=Km(),oe=Km(),ie=Km(),[ge,Z]=cN({controlled:P,default:!1,name:"Tooltip",state:"open"});let Q=ge;const re=Rx(C),pe=p.useRef(),Se=Vo(()=>{pe.current!==void 0&&(document.body.style.WebkitUserSelect=pe.current,pe.current=void 0),ie.clear()});p.useEffect(()=>Se,[Se]);const je=Et=>{hF.clear(),o1=!0,Z(!0),A&&!Q&&A(Et)},Fe=Vo(Et=>{hF.start(800+E,()=>{o1=!1}),Z(!1),T&&Q&&T(Et),xe.start(K.transitions.duration.shortest,()=>{ne.current=!1})}),ke=Et=>{ne.current&&Et.type!=="touchstart"||(z&&z.removeAttribute("title"),_e.clear(),oe.clear(),v||o1&&w?_e.start(o1?w:v,()=>{je(Et)}):je(Et))},Ve=Et=>{_e.clear(),oe.start(E,()=>{Fe(Et)})},[,le]=p.useState(!1),me=Et=>{mN(Et.target)||(le(!1),Ve(Et))},ve=Et=>{z||G(Et.currentTarget),mN(Et.target)&&(le(!0),ke(Et))},Ze=Et=>{ne.current=!0;const Os=H.props;Os.onTouchStart&&Os.onTouchStart(Et)},$e=Et=>{Ze(Et),oe.clear(),xe.clear(),Se(),pe.current=document.body.style.WebkitUserSelect,document.body.style.WebkitUserSelect="none",ie.start(N,()=>{document.body.style.WebkitUserSelect=pe.current,ke(Et)})},Ne=Et=>{H.props.onTouchEnd&&H.props.onTouchEnd(Et),Se(),oe.start(_,()=>{Fe(Et)})};p.useEffect(()=>{if(!Q)return;function Et(Os){Os.key==="Escape"&&Fe(Os)}return document.addEventListener("keydown",Et),()=>{document.removeEventListener("keydown",Et)}},[Fe,Q]);const He=un(Fx(H),G,s);!B&&B!==0&&(Q=!1);const gt=p.useRef(),yt=Et=>{const Os=H.props;Os.onMouseMove&&Os.onMouseMove(Et),Eg={x:Et.clientX,y:Et.clientY},gt.current&&gt.current.update()},Vt={},$r=typeof B=="string";d?(Vt.title=!Q&&$r&&!f?B:null,Vt["aria-describedby"]=Q?re:null):(Vt["aria-label"]=$r?B:null,Vt["aria-labelledby"]=Q&&!$r?re:null);const De={...Vt,...q,...H.props,className:fe(q.className,H.props.className),onTouchStart:Ze,ref:He,...k?{onMouseMove:yt}:{}},Xe={};y||(De.onTouchStart=$e,De.onTouchEnd=Ne),f||(De.onMouseOver=l1(ke,De.onMouseOver),De.onMouseLeave=l1(Ve,De.onMouseLeave),ce||(Xe.onMouseOver=ke,Xe.onMouseLeave=Ve)),h||(De.onFocus=l1(ve,De.onFocus),De.onBlur=l1(me,De.onBlur),ce||(Xe.onFocus=ve,Xe.onBlur=me));const st={...a,isRtl:V,arrow:n,disableInteractive:ce,placement:M,PopperComponentProp:R,touch:ne.current},Ce=typeof W.popper=="function"?W.popper(st):W.popper,ct=p.useMemo(()=>{var Os,ot;let Et=[{name:"arrow",enabled:!!te,options:{element:te,padding:4}}];return(Os=$.popperOptions)!=null&&Os.modifiers&&(Et=Et.concat($.popperOptions.modifiers)),(ot=Ce==null?void 0:Ce.popperOptions)!=null&&ot.modifiers&&(Et=Et.concat(Ce.popperOptions.modifiers)),{...$.popperOptions,...Ce==null?void 0:Ce.popperOptions,modifiers:Et}},[te,$.popperOptions,Ce==null?void 0:Ce.popperOptions]),ht=SLe(st),Lt=typeof W.transition=="function"?W.transition(st):W.transition,Ur={slots:{popper:l.Popper,transition:l.Transition??O,tooltip:l.Tooltip,arrow:l.Arrow,...I},slotProps:{arrow:W.arrow??c.arrow,popper:{...$,...Ce??c.popper},tooltip:W.tooltip??c.tooltip,transition:{...F,...Lt??c.transition}}},[wr,ua]=nr("popper",{elementType:CLe,externalForwardedProps:Ur,ownerState:st,className:fe(ht.popper,$==null?void 0:$.className)}),[Je,Xt]=nr("transition",{elementType:pN,externalForwardedProps:Ur,ownerState:st}),[ur,es]=nr("tooltip",{elementType:_Le,className:ht.tooltip,externalForwardedProps:Ur,ownerState:st}),[Cs,Ya]=nr("arrow",{elementType:ELe,className:ht.arrow,externalForwardedProps:Ur,ownerState:st,ref:he});return r.jsxs(p.Fragment,{children:[p.cloneElement(H,De),r.jsx(wr,{as:R??VZ,placement:M,anchorEl:k?{getBoundingClientRect:()=>({top:Eg.y,left:Eg.x,right:Eg.x,bottom:Eg.y,width:0,height:0})}:z,popperRef:gt,open:z?Q:!1,id:re,transition:!0,...Xe,...ua,popperOptions:ct,children:({TransitionProps:Et})=>r.jsx(Je,{timeout:K.transitions.duration.shorter,...Et,...Xt,children:r.jsxs(ur,{...es,children:[B,n?r.jsx(Cs,{...Ya}):null]})})})]})});function ALe(e){return er("MuiSwitch",e)}const Yn=Yt("MuiSwitch",["root","edgeStart","edgeEnd","switchBase","colorPrimary","colorSecondary","sizeSmall","sizeMedium","checked","disabled","input","thumb","track"]),PLe=e=>{const{classes:t,edge:s,size:a,color:n,checked:i,disabled:o}=e,l={root:["root",s&&`edge${Ye(s)}`,`size${Ye(a)}`],switchBase:["switchBase",`color${Ye(n)}`,i&&"checked",o&&"disabled"],thumb:["thumb"],track:["track"],input:["input"]},c=tr(l,ALe,t);return{...t,...c}},TLe=tt("span",{name:"MuiSwitch",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:s}=e;return[t.root,s.edge&&t[`edge${Ye(s.edge)}`],t[`size${Ye(s.size)}`]]}})({display:"inline-flex",width:34+12*2,height:14+12*2,overflow:"hidden",padding:12,boxSizing:"border-box",position:"relative",flexShrink:0,zIndex:0,verticalAlign:"middle","@media print":{colorAdjust:"exact"},variants:[{props:{edge:"start"},style:{marginLeft:-8}},{props:{edge:"end"},style:{marginRight:-8}},{props:{size:"small"},style:{width:40,height:24,padding:7,[`& .${Yn.thumb}`]:{width:16,height:16},[`& .${Yn.switchBase}`]:{padding:4,[`&.${Yn.checked}`]:{transform:"translateX(16px)"}}}}]}),ILe=tt(m7e,{name:"MuiSwitch",slot:"SwitchBase",overridesResolver:(e,t)=>{const{ownerState:s}=e;return[t.switchBase,{[`& .${Yn.input}`]:t.input},s.color!=="default"&&t[`color${Ye(s.color)}`]]}})(Jt(({theme:e})=>({position:"absolute",top:0,left:0,zIndex:1,color:e.vars?e.vars.palette.Switch.defaultColor:`${e.palette.mode==="light"?e.palette.common.white:e.palette.grey[300]}`,transition:e.transitions.create(["left","transform"],{duration:e.transitions.duration.shortest}),[`&.${Yn.checked}`]:{transform:"translateX(20px)"},[`&.${Yn.disabled}`]:{color:e.vars?e.vars.palette.Switch.defaultDisabledColor:`${e.palette.mode==="light"?e.palette.grey[100]:e.palette.grey[600]}`},[`&.${Yn.checked} + .${Yn.track}`]:{opacity:.5},[`&.${Yn.disabled} + .${Yn.track}`]:{opacity:e.vars?e.vars.opacity.switchTrackDisabled:`${e.palette.mode==="light"?.12:.2}`},[`& .${Yn.input}`]:{left:"-100%",width:"300%"}})),Jt(({theme:e})=>({"&:hover":{backgroundColor:e.alpha((e.vars||e).palette.action.active,(e.vars||e).palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},variants:[...Object.entries(e.palette).filter(ca(["light"])).map(([t])=>({props:{color:t},style:{[`&.${Yn.checked}`]:{color:(e.vars||e).palette[t].main,"&:hover":{backgroundColor:e.alpha((e.vars||e).palette[t].main,(e.vars||e).palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${Yn.disabled}`]:{color:e.vars?e.vars.palette.Switch[`${t}DisabledColor`]:`${e.palette.mode==="light"?e.lighten(e.palette[t].main,.62):e.darken(e.palette[t].main,.55)}`}},[`&.${Yn.checked} + .${Yn.track}`]:{backgroundColor:(e.vars||e).palette[t].main}}}))]}))),DLe=tt("span",{name:"MuiSwitch",slot:"Track"})(Jt(({theme:e})=>({height:"100%",width:"100%",borderRadius:14/2,zIndex:-1,transition:e.transitions.create(["opacity","background-color"],{duration:e.transitions.duration.shortest}),backgroundColor:e.vars?e.vars.palette.common.onBackground:`${e.palette.mode==="light"?e.palette.common.black:e.palette.common.white}`,opacity:e.vars?e.vars.opacity.switchTrack:`${e.palette.mode==="light"?.38:.3}`}))),OLe=tt("span",{name:"MuiSwitch",slot:"Thumb"})(Jt(({theme:e})=>({boxShadow:(e.vars||e).shadows[1],backgroundColor:"currentColor",width:20,height:20,borderRadius:"50%"}))),k0=p.forwardRef(function(t,s){const a=ar({props:t,name:"MuiSwitch"}),{className:n,color:i="primary",edge:o=!1,size:l="medium",sx:c,slots:d={},slotProps:h={},...f}=a,x={...a,color:i,edge:o,size:l},y=PLe(x),v={slots:d,slotProps:h},[w,N]=nr("root",{className:fe(y.root,n),elementType:TLe,externalForwardedProps:v,ownerState:x,additionalProps:{sx:c}}),[k,C]=nr("thumb",{className:y.thumb,elementType:OLe,externalForwardedProps:v,ownerState:x}),E=r.jsx(k,{...C}),[_,T]=nr("track",{className:y.track,elementType:DLe,externalForwardedProps:v,ownerState:x});return r.jsxs(w,{...N,children:[r.jsx(ILe,{type:"checkbox",icon:E,checkedIcon:E,ref:s,ownerState:x,...f,classes:{...y,root:y.switchBase},slots:{...d.switchBase&&{root:d.switchBase},...d.input&&{input:d.input}},slotProps:{...h.switchBase&&{root:typeof h.switchBase=="function"?h.switchBase(x):h.switchBase},input:{role:"switch"},...h.input&&{input:typeof h.input=="function"?h.input(x):h.input}}}),r.jsx(_,{...T})]})});function RLe(e){return er("MuiTab",e)}const Eo=Yt("MuiTab",["root","labelIcon","textColorInherit","textColorPrimary","textColorSecondary","selected","disabled","fullWidth","wrapped","iconWrapper","icon"]),MLe=e=>{const{classes:t,textColor:s,fullWidth:a,wrapped:n,icon:i,label:o,selected:l,disabled:c}=e,d={root:["root",i&&o&&"labelIcon",`textColor${Ye(s)}`,a&&"fullWidth",n&&"wrapped",l&&"selected",c&&"disabled"],icon:["iconWrapper","icon"]};return tr(d,RLe,t)},LLe=tt(_h,{name:"MuiTab",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:s}=e;return[t.root,s.label&&s.icon&&t.labelIcon,t[`textColor${Ye(s.textColor)}`],s.fullWidth&&t.fullWidth,s.wrapped&&t.wrapped,{[`& .${Eo.iconWrapper}`]:t.iconWrapper},{[`& .${Eo.icon}`]:t.icon}]}})(Jt(({theme:e})=>({...e.typography.button,maxWidth:360,minWidth:90,position:"relative",minHeight:48,flexShrink:0,padding:"12px 16px",overflow:"hidden",whiteSpace:"normal",textAlign:"center",lineHeight:1.25,variants:[{props:({ownerState:t})=>t.label&&(t.iconPosition==="top"||t.iconPosition==="bottom"),style:{flexDirection:"column"}},{props:({ownerState:t})=>t.label&&t.iconPosition!=="top"&&t.iconPosition!=="bottom",style:{flexDirection:"row"}},{props:({ownerState:t})=>t.icon&&t.label,style:{minHeight:72,paddingTop:9,paddingBottom:9}},{props:({ownerState:t,iconPosition:s})=>t.icon&&t.label&&s==="top",style:{[`& > .${Eo.icon}`]:{marginBottom:6}}},{props:({ownerState:t,iconPosition:s})=>t.icon&&t.label&&s==="bottom",style:{[`& > .${Eo.icon}`]:{marginTop:6}}},{props:({ownerState:t,iconPosition:s})=>t.icon&&t.label&&s==="start",style:{[`& > .${Eo.icon}`]:{marginRight:e.spacing(1)}}},{props:({ownerState:t,iconPosition:s})=>t.icon&&t.label&&s==="end",style:{[`& > .${Eo.icon}`]:{marginLeft:e.spacing(1)}}},{props:{textColor:"inherit"},style:{color:"inherit",opacity:.6,[`&.${Eo.selected}`]:{opacity:1},[`&.${Eo.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity}}},{props:{textColor:"primary"},style:{color:(e.vars||e).palette.text.secondary,[`&.${Eo.selected}`]:{color:(e.vars||e).palette.primary.main},[`&.${Eo.disabled}`]:{color:(e.vars||e).palette.text.disabled}}},{props:{textColor:"secondary"},style:{color:(e.vars||e).palette.text.secondary,[`&.${Eo.selected}`]:{color:(e.vars||e).palette.secondary.main},[`&.${Eo.disabled}`]:{color:(e.vars||e).palette.text.disabled}}},{props:({ownerState:t})=>t.fullWidth,style:{flexShrink:1,flexGrow:1,flexBasis:0,maxWidth:"none"}},{props:({ownerState:t})=>t.wrapped,style:{fontSize:e.typography.pxToRem(12)}}]}))),Xm=p.forwardRef(function(t,s){const a=ar({props:t,name:"MuiTab"}),{className:n,disabled:i=!1,disableFocusRipple:o=!1,fullWidth:l,icon:c,iconPosition:d="top",indicator:h,label:f,onChange:x,onClick:y,onFocus:v,selected:w,selectionFollowsFocus:N,textColor:k="inherit",value:C,wrapped:E=!1,..._}=a,T={...a,disabled:i,disableFocusRipple:o,selected:w,icon:!!c,iconPosition:d,label:!!f,fullWidth:l,textColor:k,wrapped:E},A=MLe(T),P=c&&f&&p.isValidElement(c)?p.cloneElement(c,{className:fe(A.icon,c.props.className)}):c,M=$=>{!w&&x&&x($,C),y&&y($)},R=$=>{N&&!w&&x&&x($,C),v&&v($)};return r.jsxs(LLe,{focusRipple:!o,className:fe(A.root,n),ref:s,role:"tab","aria-selected":w,disabled:i,onClick:M,onFocus:R,ownerState:T,tabIndex:w?0:-1,..._,children:[d==="top"||d==="start"?r.jsxs(p.Fragment,{children:[P,f]}):r.jsxs(p.Fragment,{children:[f,P]}),h]})}),aJ=p.createContext();function FLe(e){return er("MuiTable",e)}Yt("MuiTable",["root","stickyHeader"]);const BLe=e=>{const{classes:t,stickyHeader:s}=e;return tr({root:["root",s&&"stickyHeader"]},FLe,t)},$Le=tt("table",{name:"MuiTable",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:s}=e;return[t.root,s.stickyHeader&&t.stickyHeader]}})(Jt(({theme:e})=>({display:"table",width:"100%",borderCollapse:"collapse",borderSpacing:0,"& caption":{...e.typography.body2,padding:e.spacing(2),color:(e.vars||e).palette.text.secondary,textAlign:"left",captionSide:"bottom"},variants:[{props:({ownerState:t})=>t.stickyHeader,style:{borderCollapse:"separate"}}]}))),fF="table",ULe=p.forwardRef(function(t,s){const a=ar({props:t,name:"MuiTable"}),{className:n,component:i=fF,padding:o="normal",size:l="medium",stickyHeader:c=!1,...d}=a,h={...a,component:i,padding:o,size:l,stickyHeader:c},f=BLe(h),x=p.useMemo(()=>({padding:o,size:l,stickyHeader:c}),[o,l,c]);return r.jsx(aJ.Provider,{value:x,children:r.jsx($Le,{as:i,role:i===fF?null:"table",ref:s,className:fe(f.root,n),ownerState:h,...d})})}),Xk=p.createContext();function VLe(e){return er("MuiTableBody",e)}Yt("MuiTableBody",["root"]);const WLe=e=>{const{classes:t}=e;return tr({root:["root"]},VLe,t)},zLe=tt("tbody",{name:"MuiTableBody",slot:"Root"})({display:"table-row-group"}),qLe={variant:"body"},xF="tbody",HLe=p.forwardRef(function(t,s){const a=ar({props:t,name:"MuiTableBody"}),{className:n,component:i=xF,...o}=a,l={...a,component:i},c=WLe(l);return r.jsx(Xk.Provider,{value:qLe,children:r.jsx(zLe,{className:fe(c.root,n),as:i,ref:s,role:i===xF?null:"rowgroup",ownerState:l,...o})})});function KLe(e){return er("MuiTableCell",e)}const GLe=Yt("MuiTableCell",["root","head","body","footer","sizeSmall","sizeMedium","paddingCheckbox","paddingNone","alignLeft","alignCenter","alignRight","alignJustify","stickyHeader"]),YLe=e=>{const{classes:t,variant:s,align:a,padding:n,size:i,stickyHeader:o}=e,l={root:["root",s,o&&"stickyHeader",a!=="inherit"&&`align${Ye(a)}`,n!=="normal"&&`padding${Ye(n)}`,`size${Ye(i)}`]};return tr(l,KLe,t)},XLe=tt("td",{name:"MuiTableCell",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:s}=e;return[t.root,t[s.variant],t[`size${Ye(s.size)}`],s.padding!=="normal"&&t[`padding${Ye(s.padding)}`],s.align!=="inherit"&&t[`align${Ye(s.align)}`],s.stickyHeader&&t.stickyHeader]}})(Jt(({theme:e})=>({...e.typography.body2,display:"table-cell",verticalAlign:"inherit",borderBottom:e.vars?`1px solid ${e.vars.palette.TableCell.border}`:`1px solid
    ${e.palette.mode==="light"?e.lighten(e.alpha(e.palette.divider,1),.88):e.darken(e.alpha(e.palette.divider,1),.68)}`,textAlign:"left",padding:16,variants:[{props:{variant:"head"},style:{color:(e.vars||e).palette.text.primary,lineHeight:e.typography.pxToRem(24),fontWeight:e.typography.fontWeightMedium}},{props:{variant:"body"},style:{color:(e.vars||e).palette.text.primary}},{props:{variant:"footer"},style:{color:(e.vars||e).palette.text.secondary,lineHeight:e.typography.pxToRem(21),fontSize:e.typography.pxToRem(12)}},{props:{size:"small"},style:{padding:"6px 16px",[`&.${GLe.paddingCheckbox}`]:{width:24,padding:"0 12px 0 16px","& > *":{padding:0}}}},{props:{padding:"checkbox"},style:{width:48,padding:"0 0 0 4px"}},{props:{padding:"none"},style:{padding:0}},{props:{align:"left"},style:{textAlign:"left"}},{props:{align:"center"},style:{textAlign:"center"}},{props:{align:"right"},style:{textAlign:"right",flexDirection:"row-reverse"}},{props:{align:"justify"},style:{textAlign:"justify"}},{props:({ownerState:t})=>t.stickyHeader,style:{position:"sticky",top:0,zIndex:2,backgroundColor:(e.vars||e).palette.background.default}}]}))),$n=p.forwardRef(function(t,s){const a=ar({props:t,name:"MuiTableCell"}),{align:n="inherit",className:i,component:o,padding:l,scope:c,size:d,sortDirection:h,variant:f,...x}=a,y=p.useContext(aJ),v=p.useContext(Xk),w=v&&v.variant==="head";let N;o?N=o:N=w?"th":"td";let k=c;N==="td"?k=void 0:!k&&w&&(k="col");const C=f||v&&v.variant,E={...a,align:n,component:N,padding:l||(y&&y.padding?y.padding:"normal"),size:d||(y&&y.size?y.size:"medium"),sortDirection:h,stickyHeader:C==="head"&&y&&y.stickyHeader,variant:C},_=YLe(E);let T=null;return h&&(T=h==="asc"?"ascending":"descending"),r.jsx(XLe,{as:N,ref:s,className:fe(_.root,i),"aria-sort":T,scope:k,ownerState:E,...x})});function QLe(e){return er("MuiTableContainer",e)}Yt("MuiTableContainer",["root"]);const ZLe=e=>{const{classes:t}=e;return tr({root:["root"]},QLe,t)},JLe=tt("div",{name:"MuiTableContainer",slot:"Root"})({width:"100%",overflowX:"auto"}),e9e=p.forwardRef(function(t,s){const a=ar({props:t,name:"MuiTableContainer"}),{className:n,component:i="div",...o}=a,l={...a,component:i},c=ZLe(l);return r.jsx(JLe,{ref:s,as:i,className:fe(c.root,n),ownerState:l,...o})});function t9e(e){return er("MuiTableHead",e)}Yt("MuiTableHead",["root"]);const r9e=e=>{const{classes:t}=e;return tr({root:["root"]},t9e,t)},s9e=tt("thead",{name:"MuiTableHead",slot:"Root"})({display:"table-header-group"}),a9e={variant:"head"},gF="thead",n9e=p.forwardRef(function(t,s){const a=ar({props:t,name:"MuiTableHead"}),{className:n,component:i=gF,...o}=a,l={...a,component:i},c=r9e(l);return r.jsx(Xk.Provider,{value:a9e,children:r.jsx(s9e,{as:i,className:fe(c.root,n),ref:s,role:i===gF?null:"rowgroup",ownerState:l,...o})})}),i9e=gi(r.jsx("path",{d:"M15.41 16.09l-4.58-4.59 4.58-4.59L14 5.5l-6 6 6 6z"})),o9e=gi(r.jsx("path",{d:"M8.59 16.34l4.58-4.59-4.58-4.59L10 5.75l6 6-6 6z"}));function l9e(e){return er("MuiTableRow",e)}const pF=Yt("MuiTableRow",["root","selected","hover","head","footer"]),c9e=e=>{const{classes:t,selected:s,hover:a,head:n,footer:i}=e;return tr({root:["root",s&&"selected",a&&"hover",n&&"head",i&&"footer"]},l9e,t)},d9e=tt("tr",{name:"MuiTableRow",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:s}=e;return[t.root,s.head&&t.head,s.footer&&t.footer]}})(Jt(({theme:e})=>({color:"inherit",display:"table-row",verticalAlign:"middle",outline:0,[`&.${pF.hover}:hover`]:{backgroundColor:(e.vars||e).palette.action.hover},[`&.${pF.selected}`]:{backgroundColor:e.alpha((e.vars||e).palette.primary.main,(e.vars||e).palette.action.selectedOpacity),"&:hover":{backgroundColor:e.alpha((e.vars||e).palette.primary.main,`${(e.vars||e).palette.action.selectedOpacity} + ${(e.vars||e).palette.action.hoverOpacity}`)}}}))),yF="tr",bF=p.forwardRef(function(t,s){const a=ar({props:t,name:"MuiTableRow"}),{className:n,component:i=yF,hover:o=!1,selected:l=!1,...c}=a,d=p.useContext(Xk),h={...a,component:i,hover:o,selected:l,head:d&&d.variant==="head",footer:d&&d.variant==="footer"},f=c9e(h);return r.jsx(d9e,{as:i,ref:s,className:fe(f.root,n),role:i===yF?null:"row",ownerState:h,...c})});function u9e(e){return(1+Math.sin(Math.PI*e-Math.PI/2))/2}function h9e(e,t,s,a={},n=()=>{}){const{ease:i=u9e,duration:o=300}=a;let l=null;const c=t[e];let d=!1;const h=()=>{d=!0},f=x=>{if(d){n(new Error("Animation cancelled"));return}l===null&&(l=x);const y=Math.min(1,(x-l)/o);if(t[e]=i(y)*(s-c)+c,y>=1){requestAnimationFrame(()=>{n(null)});return}requestAnimationFrame(f)};return c===s?(n(new Error("Element already at target position")),h):(requestAnimationFrame(f),h)}const m9e={width:99,height:99,position:"absolute",top:-9999,overflow:"scroll"};function f9e(e){const{onChange:t,...s}=e,a=p.useRef(),n=p.useRef(null),i=()=>{a.current=n.current.offsetHeight-n.current.clientHeight};return pc(()=>{const o=Vk(()=>{const c=a.current;i(),c!==a.current&&t(a.current)}),l=Ol(n.current);return l.addEventListener("resize",o),()=>{o.clear(),l.removeEventListener("resize",o)}},[t]),p.useEffect(()=>{i(),t(a.current)},[t]),r.jsx("div",{style:m9e,...s,ref:n})}function x9e(e){return er("MuiTabScrollButton",e)}const g9e=Yt("MuiTabScrollButton",["root","vertical","horizontal","disabled"]),p9e=e=>{const{classes:t,orientation:s,disabled:a}=e;return tr({root:["root",s,a&&"disabled"]},x9e,t)},y9e=tt(_h,{name:"MuiTabScrollButton",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:s}=e;return[t.root,s.orientation&&t[s.orientation]]}})({width:40,flexShrink:0,opacity:.8,[`&.${g9e.disabled}`]:{opacity:0},variants:[{props:{orientation:"vertical"},style:{width:"100%",height:40,"& svg":{transform:"var(--TabScrollButton-svgRotate)"}}}]}),b9e=p.forwardRef(function(t,s){const a=ar({props:t,name:"MuiTabScrollButton"}),{className:n,slots:i={},slotProps:o={},direction:l,orientation:c,disabled:d,...h}=a,f=Ox(),x={isRtl:f,...a},y=p9e(x),v=i.StartScrollButtonIcon??i9e,w=i.EndScrollButtonIcon??o9e,N=ix({elementType:v,externalSlotProps:o.startScrollButtonIcon,additionalProps:{fontSize:"small"},ownerState:x}),k=ix({elementType:w,externalSlotProps:o.endScrollButtonIcon,additionalProps:{fontSize:"small"},ownerState:x});return r.jsx(y9e,{component:"div",className:fe(y.root,n),ref:s,role:null,ownerState:x,tabIndex:null,...h,style:{...h.style,...c==="vertical"&&{"--TabScrollButton-svgRotate":`rotate(${f?-90:90}deg)`}},children:l==="left"?r.jsx(v,{...N}):r.jsx(w,{...k})})});function v9e(e){return er("MuiTabs",e)}const lC=Yt("MuiTabs",["root","vertical","list","flexContainer","flexContainerVertical","centered","scroller","fixed","scrollableX","scrollableY","hideScrollbar","scrollButtons","scrollButtonsHideMobile","indicator"]),vF=(e,t)=>e===t?e.firstChild:t&&t.nextElementSibling?t.nextElementSibling:e.firstChild,wF=(e,t)=>e===t?e.lastChild:t&&t.previousElementSibling?t.previousElementSibling:e.lastChild,c1=(e,t,s)=>{let a=!1,n=s(e,t);for(;n;){if(n===e.firstChild){if(a)return;a=!0}const i=n.disabled||n.getAttribute("aria-disabled")==="true";if(!n.hasAttribute("tabindex")||i)n=s(e,n);else{n.focus();return}}},w9e=e=>{const{vertical:t,fixed:s,hideScrollbar:a,scrollableX:n,scrollableY:i,centered:o,scrollButtonsHideMobile:l,classes:c}=e;return tr({root:["root",t&&"vertical"],scroller:["scroller",s&&"fixed",a&&"hideScrollbar",n&&"scrollableX",i&&"scrollableY"],list:["list","flexContainer",t&&"flexContainerVertical",t&&"vertical",o&&"centered"],indicator:["indicator"],scrollButtons:["scrollButtons",l&&"scrollButtonsHideMobile"],scrollableX:[n&&"scrollableX"],hideScrollbar:[a&&"hideScrollbar"]},v9e,c)},j9e=tt("div",{name:"MuiTabs",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:s}=e;return[{[`& .${lC.scrollButtons}`]:t.scrollButtons},{[`& .${lC.scrollButtons}`]:s.scrollButtonsHideMobile&&t.scrollButtonsHideMobile},t.root,s.vertical&&t.vertical]}})(Jt(({theme:e})=>({overflow:"hidden",minHeight:48,WebkitOverflowScrolling:"touch",display:"flex",variants:[{props:({ownerState:t})=>t.vertical,style:{flexDirection:"column"}},{props:({ownerState:t})=>t.scrollButtonsHideMobile,style:{[`& .${lC.scrollButtons}`]:{[e.breakpoints.down("sm")]:{display:"none"}}}}]}))),N9e=tt("div",{name:"MuiTabs",slot:"Scroller",overridesResolver:(e,t)=>{const{ownerState:s}=e;return[t.scroller,s.fixed&&t.fixed,s.hideScrollbar&&t.hideScrollbar,s.scrollableX&&t.scrollableX,s.scrollableY&&t.scrollableY]}})({position:"relative",display:"inline-block",flex:"1 1 auto",whiteSpace:"nowrap",variants:[{props:({ownerState:e})=>e.fixed,style:{overflowX:"hidden",width:"100%"}},{props:({ownerState:e})=>e.hideScrollbar,style:{scrollbarWidth:"none","&::-webkit-scrollbar":{display:"none"}}},{props:({ownerState:e})=>e.scrollableX,style:{overflowX:"auto",overflowY:"hidden"}},{props:({ownerState:e})=>e.scrollableY,style:{overflowY:"auto",overflowX:"hidden"}}]}),k9e=tt("div",{name:"MuiTabs",slot:"List",overridesResolver:(e,t)=>{const{ownerState:s}=e;return[t.list,t.flexContainer,s.vertical&&t.flexContainerVertical,s.centered&&t.centered]}})({display:"flex",variants:[{props:({ownerState:e})=>e.vertical,style:{flexDirection:"column"}},{props:({ownerState:e})=>e.centered,style:{justifyContent:"center"}}]}),S9e=tt("span",{name:"MuiTabs",slot:"Indicator"})(Jt(({theme:e})=>({position:"absolute",height:2,bottom:0,width:"100%",transition:e.transitions.create(),variants:[{props:{indicatorColor:"primary"},style:{backgroundColor:(e.vars||e).palette.primary.main}},{props:{indicatorColor:"secondary"},style:{backgroundColor:(e.vars||e).palette.secondary.main}},{props:({ownerState:t})=>t.vertical,style:{height:"100%",width:2,right:0}}]}))),C9e=tt(f9e)({overflowX:"auto",overflowY:"hidden",scrollbarWidth:"none","&::-webkit-scrollbar":{display:"none"}}),jF={},nJ=p.forwardRef(function(t,s){const a=ar({props:t,name:"MuiTabs"}),n=Mx(),i=Ox(),{"aria-label":o,"aria-labelledby":l,action:c,centered:d=!1,children:h,className:f,component:x="div",allowScrollButtonsMobile:y=!1,indicatorColor:v="primary",onChange:w,orientation:N="horizontal",ScrollButtonComponent:k,scrollButtons:C="auto",selectionFollowsFocus:E,slots:_={},slotProps:T={},TabIndicatorProps:A={},TabScrollButtonProps:P={},textColor:M="primary",value:R,variant:$="standard",visibleScrollbar:W=!1,...I}=a,B=$==="scrollable",O=N==="vertical",F=O?"scrollTop":"scrollLeft",q=O?"top":"left",H=O?"bottom":"right",K=O?"clientHeight":"clientWidth",V=O?"height":"width",z={...a,component:x,allowScrollButtonsMobile:y,indicatorColor:v,orientation:N,vertical:O,scrollButtons:C,textColor:M,variant:$,visibleScrollbar:W,fixed:!B,hideScrollbar:B&&!W,scrollableX:B&&!O,scrollableY:B&&O,centered:d&&!B,scrollButtonsHideMobile:!y},G=w9e(z),te=ix({elementType:_.StartScrollButtonIcon,externalSlotProps:T.startScrollButtonIcon,ownerState:z}),he=ix({elementType:_.EndScrollButtonIcon,externalSlotProps:T.endScrollButtonIcon,ownerState:z}),[ne,ce]=p.useState(!1),[xe,_e]=p.useState(jF),[oe,ie]=p.useState(!1),[ge,Z]=p.useState(!1),[Q,re]=p.useState(!1),[pe,Se]=p.useState({overflow:"hidden",scrollbarWidth:0}),je=new Map,Fe=p.useRef(null),ke=p.useRef(null),Ve={slots:_,slotProps:{indicator:A,scrollButton:P,...T}},le=()=>{const ot=Fe.current;let mt;if(ot){const dr=ot.getBoundingClientRect();mt={clientWidth:ot.clientWidth,scrollLeft:ot.scrollLeft,scrollTop:ot.scrollTop,scrollWidth:ot.scrollWidth,top:dr.top,bottom:dr.bottom,left:dr.left,right:dr.right}}let xr;if(ot&&R!==!1){const dr=ke.current.children;if(dr.length>0){const Gr=dr[je.get(R)];xr=Gr?Gr.getBoundingClientRect():null}}return{tabsMeta:mt,tabMeta:xr}},me=Vo(()=>{const{tabsMeta:ot,tabMeta:mt}=le();let xr=0,dr;O?(dr="top",mt&&ot&&(xr=mt.top-ot.top+ot.scrollTop)):(dr=i?"right":"left",mt&&ot&&(xr=(i?-1:1)*(mt[dr]-ot[dr]+ot.scrollLeft)));const Gr={[dr]:xr,[V]:mt?mt[V]:0};if(typeof xe[dr]!="number"||typeof xe[V]!="number")_e(Gr);else{const Yr=Math.abs(xe[dr]-Gr[dr]),wa=Math.abs(xe[V]-Gr[V]);(Yr>=1||wa>=1)&&_e(Gr)}}),ve=(ot,{animation:mt=!0}={})=>{mt?h9e(F,Fe.current,ot,{duration:n.transitions.duration.standard}):Fe.current[F]=ot},Ze=ot=>{let mt=Fe.current[F];O?mt+=ot:mt+=ot*(i?-1:1),ve(mt)},$e=()=>{const ot=Fe.current[K];let mt=0;const xr=Array.from(ke.current.children);for(let dr=0;dr<xr.length;dr+=1){const Gr=xr[dr];if(mt+Gr[K]>ot){dr===0&&(mt=ot);break}mt+=Gr[K]}return mt},Ne=()=>{Ze(-1*$e())},He=()=>{Ze($e())},[gt,{onChange:yt,...Vt}]=nr("scrollbar",{className:fe(G.scrollableX,G.hideScrollbar),elementType:C9e,shouldForwardComponentProp:!0,externalForwardedProps:Ve,ownerState:z}),$r=p.useCallback(ot=>{yt==null||yt(ot),Se({overflow:null,scrollbarWidth:ot})},[yt]),[De,Xe]=nr("scrollButtons",{className:fe(G.scrollButtons,P.className),elementType:b9e,externalForwardedProps:Ve,ownerState:z,additionalProps:{orientation:N,slots:{StartScrollButtonIcon:_.startScrollButtonIcon||_.StartScrollButtonIcon,EndScrollButtonIcon:_.endScrollButtonIcon||_.EndScrollButtonIcon},slotProps:{startScrollButtonIcon:te,endScrollButtonIcon:he}}}),st=()=>{const ot={};ot.scrollbarSizeListener=B?r.jsx(gt,{...Vt,onChange:$r}):null;const xr=B&&(C==="auto"&&(oe||ge)||C===!0);return ot.scrollButtonStart=xr?r.jsx(De,{direction:i?"right":"left",onClick:Ne,disabled:!oe,...Xe}):null,ot.scrollButtonEnd=xr?r.jsx(De,{direction:i?"left":"right",onClick:He,disabled:!ge,...Xe}):null,ot},Ce=Vo(ot=>{const{tabsMeta:mt,tabMeta:xr}=le();if(!(!xr||!mt)){if(xr[q]<mt[q]){const dr=mt[F]+(xr[q]-mt[q]);ve(dr,{animation:ot})}else if(xr[H]>mt[H]){const dr=mt[F]+(xr[H]-mt[H]);ve(dr,{animation:ot})}}}),ct=Vo(()=>{B&&C!==!1&&re(!Q)});p.useEffect(()=>{const ot=Vk(()=>{Fe.current&&me()});let mt;const xr=Yr=>{Yr.forEach(wa=>{wa.removedNodes.forEach(qe=>{mt==null||mt.unobserve(qe)}),wa.addedNodes.forEach(qe=>{mt==null||mt.observe(qe)})}),ot(),ct()},dr=Ol(Fe.current);dr.addEventListener("resize",ot);let Gr;return typeof ResizeObserver<"u"&&(mt=new ResizeObserver(ot),Array.from(ke.current.children).forEach(Yr=>{mt.observe(Yr)})),typeof MutationObserver<"u"&&(Gr=new MutationObserver(xr),Gr.observe(ke.current,{childList:!0})),()=>{ot.clear(),dr.removeEventListener("resize",ot),Gr==null||Gr.disconnect(),mt==null||mt.disconnect()}},[me,ct]),p.useEffect(()=>{const ot=Array.from(ke.current.children),mt=ot.length;if(typeof IntersectionObserver<"u"&&mt>0&&B&&C!==!1){const xr=ot[0],dr=ot[mt-1],Gr={root:Fe.current,threshold:.99},Yr=Tt=>{ie(!Tt[0].isIntersecting)},wa=new IntersectionObserver(Yr,Gr);wa.observe(xr);const qe=Tt=>{Z(!Tt[0].isIntersecting)},Ue=new IntersectionObserver(qe,Gr);return Ue.observe(dr),()=>{wa.disconnect(),Ue.disconnect()}}},[B,C,Q,h==null?void 0:h.length]),p.useEffect(()=>{ce(!0)},[]),p.useEffect(()=>{me()}),p.useEffect(()=>{Ce(jF!==xe)},[Ce,xe]),p.useImperativeHandle(c,()=>({updateIndicator:me,updateScrollButtons:ct}),[me,ct]);const[ht,Lt]=nr("indicator",{className:fe(G.indicator,A.className),elementType:S9e,externalForwardedProps:Ve,ownerState:z,additionalProps:{style:xe}}),Ur=r.jsx(ht,{...Lt});let wr=0;const ua=p.Children.map(h,ot=>{if(!p.isValidElement(ot))return null;const mt=ot.props.value===void 0?wr:ot.props.value;je.set(mt,wr);const xr=mt===R;return wr+=1,p.cloneElement(ot,{fullWidth:$==="fullWidth",indicator:xr&&!ne&&Ur,selected:xr,selectionFollowsFocus:E,onChange:w,textColor:M,value:mt,...wr===1&&R===!1&&!ot.props.tabIndex?{tabIndex:0}:{}})}),Je=ot=>{if(ot.altKey||ot.shiftKey||ot.ctrlKey||ot.metaKey)return;const mt=ke.current,xr=Ym(Bi(mt));if((xr==null?void 0:xr.getAttribute("role"))!=="tab")return;let Gr=N==="horizontal"?"ArrowLeft":"ArrowUp",Yr=N==="horizontal"?"ArrowRight":"ArrowDown";switch(N==="horizontal"&&i&&(Gr="ArrowRight",Yr="ArrowLeft"),ot.key){case Gr:ot.preventDefault(),c1(mt,xr,wF);break;case Yr:ot.preventDefault(),c1(mt,xr,vF);break;case"Home":ot.preventDefault(),c1(mt,null,vF);break;case"End":ot.preventDefault(),c1(mt,null,wF);break}},Xt=st(),[ur,es]=nr("root",{ref:s,className:fe(G.root,f),elementType:j9e,externalForwardedProps:{...Ve,...I,component:x},ownerState:z}),[Cs,Ya]=nr("scroller",{ref:Fe,className:G.scroller,elementType:N9e,externalForwardedProps:Ve,ownerState:z,additionalProps:{style:{overflow:pe.overflow,[O?`margin${i?"Left":"Right"}`:"marginBottom"]:W?void 0:-pe.scrollbarWidth}}}),[Et,Os]=nr("list",{ref:ke,className:fe(G.list,G.flexContainer),elementType:k9e,externalForwardedProps:Ve,ownerState:z,getSlotProps:ot=>({...ot,onKeyDown:mt=>{var xr;Je(mt),(xr=ot.onKeyDown)==null||xr.call(ot,mt)}})});return r.jsxs(ur,{...es,children:[Xt.scrollButtonStart,Xt.scrollbarSizeListener,r.jsxs(Cs,{...Ya,children:[r.jsx(Et,{"aria-label":o,"aria-labelledby":l,"aria-orientation":N==="vertical"?"vertical":null,role:"tablist",...Os,children:ua}),ne&&Ur]}),Xt.scrollButtonEnd]})});function _9e(e){return er("MuiTextField",e)}Yt("MuiTextField",["root"]);const E9e={standard:UT,filled:$T,outlined:zT},A9e=e=>{const{classes:t}=e;return tr({root:["root"]},_9e,t)},P9e=tt(n8e,{name:"MuiTextField",slot:"Root"})({}),La=p.forwardRef(function(t,s){const a=ar({props:t,name:"MuiTextField"}),{autoComplete:n,autoFocus:i=!1,children:o,className:l,color:c="primary",defaultValue:d,disabled:h=!1,error:f=!1,FormHelperTextProps:x,fullWidth:y=!1,helperText:v,id:w,InputLabelProps:N,inputProps:k,InputProps:C,inputRef:E,label:_,maxRows:T,minRows:A,multiline:P=!1,name:M,onBlur:R,onChange:$,onFocus:W,placeholder:I,required:B=!1,rows:O,select:F=!1,SelectProps:q,slots:H={},slotProps:K={},type:V,value:z,variant:G="outlined",...te}=a,he={...a,autoFocus:i,color:c,disabled:h,error:f,fullWidth:y,multiline:P,required:B,select:F,variant:G},ne=A9e(he),ce=Rx(w),xe=v&&ce?`${ce}-helper-text`:void 0,_e=_&&ce?`${ce}-label`:void 0,oe=E9e[G],ie={slots:H,slotProps:{input:C,inputLabel:N,htmlInput:k,formHelperText:x,select:q,...K}},ge={},Z=ie.slotProps.inputLabel;G==="outlined"&&(Z&&typeof Z.shrink<"u"&&(ge.notched=Z.shrink),ge.label=_),F&&((!q||!q.native)&&(ge.id=void 0),ge["aria-describedby"]=void 0);const[Q,re]=nr("root",{elementType:P9e,shouldForwardComponentProp:!0,externalForwardedProps:{...ie,...te},ownerState:he,className:fe(ne.root,l),ref:s,additionalProps:{disabled:h,error:f,fullWidth:y,required:B,color:c,variant:G}}),[pe,Se]=nr("input",{elementType:oe,externalForwardedProps:ie,additionalProps:ge,ownerState:he}),[je,Fe]=nr("inputLabel",{elementType:C8e,externalForwardedProps:ie,ownerState:he}),[ke,Ve]=nr("htmlInput",{elementType:"input",externalForwardedProps:ie,ownerState:he}),[le,me]=nr("formHelperText",{elementType:m8e,externalForwardedProps:ie,ownerState:he}),[ve,Ze]=nr("select",{elementType:sJ,externalForwardedProps:ie,ownerState:he}),$e=r.jsx(pe,{"aria-describedby":xe,autoComplete:n,autoFocus:i,defaultValue:d,fullWidth:y,multiline:P,name:M,rows:O,maxRows:T,minRows:A,type:V,value:z,id:ce,inputRef:E,onBlur:R,onChange:$,onFocus:W,placeholder:I,inputProps:Ve,slots:{input:H.htmlInput?ke:void 0},...Se});return r.jsxs(Q,{...re,children:[_!=null&&_!==""&&r.jsx(je,{htmlFor:ce,id:_e,...Fe,children:_}),F?r.jsx(ve,{"aria-describedby":xe,id:ce,labelId:_e,value:z,input:$e,...Ze,children:o}):$e,v&&r.jsx(le,{id:xe,...me,children:v})]})}),T9e=gi(r.jsx("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6z"})),cC=gi(r.jsx("path",{d:"M19.35 10.04C18.67 6.59 15.64 4 12 4 9.11 4 6.6 5.64 5.35 8.04 2.34 8.36 0 10.91 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96M14 13v4h-4v-4H7l5-5 5 5z"})),iJ=gi(r.jsx("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zM19 4h-3.5l-1-1h-5l-1 1H5v2h14z"})),I9e=gi(r.jsx("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.996.996 0 0 0-1.41 0l-1.83 1.83 3.75 3.75z"})),D9e=gi(r.jsx("path",{d:"M20 2H4c-1 0-2 .9-2 2v3.01c0 .72.43 1.34 1 1.69V20c0 1.1 1.1 2 2 2h14c.9 0 2-.9 2-2V8.7c.57-.35 1-.97 1-1.69V4c0-1.1-1-2-2-2m-5 12H9v-2h6zm5-7H4V4l16-.02z"})),O9e=gi(r.jsx("path",{d:"M19.14 12.94c.04-.3.06-.61.06-.94 0-.32-.02-.64-.07-.94l2.03-1.58c.18-.14.23-.41.12-.61l-1.92-3.32c-.12-.22-.37-.29-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54c-.04-.24-.24-.41-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.05.3-.09.63-.09.94s.02.64.07.94l-2.03 1.58c-.18.14-.23.41-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6 3.6 1.62 3.6 3.6-1.62 3.6-3.6 3.6"})),NF={monime:"/admin/settings/payment",paystack:"/admin/settings/payment",stripe:"/admin/settings/payment",deposits:"/admin/settings/payment",withdrawals:"/admin/settings/payment",kyc_advanced:"/admin/settings/kyc",loyalty_rewards:"/admin/settings/loyalty",bill_payments:"/admin/settings/billing"},Ag="/api";function R9e(){const e=Ut(),t=p.useRef(null),[s,a]=p.useState([]),[n,i]=p.useState([]),[o,l]=p.useState(!0),[c,d]=p.useState(""),[h,f]=p.useState(""),[x,y]=p.useState(!1),[v,w]=p.useState(0),[N,k]=p.useState(!1),[C,E]=p.useState(!1);p.useEffect(()=>{$(),_()},[]);const _=async()=>{try{const B=await fetch(`${Ag}/modules/packages`);if(B.ok){const O=await B.json();i(O.packages||[])}}catch(B){console.error("Failed to load packages:",B)}},T=async B=>{var O,F;if(B){if(!B.name.endsWith(".zip")&&!B.name.endsWith(".json")){d("Please upload a .zip module package or manifest.json file");return}if(B.size>50*1024*1024){d("File too large. Maximum size is 50MB.");return}k(!0),d("");try{const q=new FormData;q.append("file",B);const H=await fetch(`${Ag}/modules/upload`,{method:"POST",body:q}),K=await H.json();H.ok&&K.success?(f(`Module "${((F=(O=K.package)==null?void 0:O.manifest)==null?void 0:F.name)||B.name}" uploaded successfully!`),y(!1),$(),_()):d(K.error||"Failed to upload module")}catch(q){d(q.message||"Failed to upload module")}finally{k(!1)}}},A=B=>{B.preventDefault(),B.stopPropagation(),B.type==="dragenter"||B.type==="dragover"?E(!0):B.type==="dragleave"&&E(!1)},P=B=>{B.preventDefault(),B.stopPropagation(),E(!1),B.dataTransfer.files&&B.dataTransfer.files[0]&&T(B.dataTransfer.files[0])},M=async B=>{if(confirm(`Delete package "${B.manifest.name}" v${B.version}?`))try{const O=await fetch(`${Ag}/modules/packages/${B.id}`,{method:"DELETE"});if(O.ok)f("Package deleted successfully"),_(),$();else{const F=await O.json();d(F.error||"Failed to delete package")}}catch(O){d(O.message||"Failed to delete package")}},R=B=>B<1024?B+" B":B<1024*1024?(B/1024).toFixed(1)+" KB":(B/(1024*1024)).toFixed(1)+" MB",$=async()=>{try{l(!0);const B=await fetch(`${Ag}/modules`);if(!B.ok){const F=await B.json();d(F.error||`API Error: ${B.status} ${B.statusText}`),l(!1);return}const O=await B.json();a(O.modules||[])}catch(B){console.error("Failed to load modules:",B),d(B.message||"Failed to load modules. Check console for details.")}finally{l(!1)}},W=async B=>{const O=!B.is_enabled;a(F=>F.map(q=>q.id===B.id?{...q,is_enabled:O}:q));try{const F=await fetch(`${Ag}/modules/${B.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({is_enabled:O})}),q=await F.json();F.ok?(f(`${B.name} ${O?"enabled":"disabled"} successfully`),q.module&&a(H=>H.map(K=>K.id===B.id?q.module:K))):(a(H=>H.map(K=>K.id===B.id?{...K,is_enabled:!O}:K)),d(q.error||"Failed to toggle module"))}catch(F){a(q=>q.map(H=>H.id===B.id?{...H,is_enabled:!O}:H)),d(F.message||"Failed to toggle module")}},I=B=>{switch(B){case"feature":return"primary";case"security":return"error";case"payment":return"success";default:return"default"}};return r.jsx(fr,{children:r.jsxs(Qt,{p:3,children:[r.jsxs(Qt,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3,children:[r.jsx(qr,{variant:"h4",children:"Platform Modules"}),r.jsx(W0,{variant:"contained",startIcon:r.jsx(cC,{}),onClick:()=>y(!0),children:"Upload Module"})]}),r.jsxs(nJ,{value:v,onChange:(B,O)=>w(O),sx:{mb:3},children:[r.jsx(Xm,{label:"Installed Modules"}),r.jsx(Xm,{label:`Packages (${n.length})`})]}),c&&r.jsx(Gm,{severity:"error",onClose:()=>d(""),sx:{mb:2},children:c}),o&&!c?r.jsx(Qt,{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"400px",children:r.jsx(zk,{})}):null,h&&r.jsx(Gm,{severity:"success",onClose:()=>f(""),sx:{mb:2},children:h}),v===0&&!o&&!c&&s.length>0&&r.jsx(Qt,{display:"flex",flexWrap:"wrap",gap:3,children:s.map(B=>r.jsx(Qt,{flex:"1 1 300px",minWidth:"300px",maxWidth:"400px",children:r.jsx(Z9,{elevation:3,children:r.jsxs(J9,{children:[r.jsxs(Qt,{display:"flex",justifyContent:"space-between",alignItems:"flex-start",mb:2,children:[r.jsxs(Qt,{display:"flex",alignItems:"center",gap:1,children:[r.jsx(qr,{variant:"h4",children:B.icon}),r.jsxs(Qt,{children:[r.jsx(qr,{variant:"h6",children:B.name}),r.jsxs(qr,{variant:"caption",color:"text.secondary",children:["v",B.version]})]})]}),r.jsx(k0,{checked:B.is_enabled,onChange:()=>W(B),color:"primary"})]}),r.jsx(qr,{variant:"body2",color:"text.secondary",mb:2,children:B.description}),r.jsxs(Qt,{display:"flex",gap:1,mb:2,flexWrap:"wrap",children:[r.jsx(Si,{label:B.category,size:"small",color:I(B.category)}),B.is_system&&r.jsx(Si,{label:"System",size:"small",color:"default"}),B.is_custom&&r.jsx(Si,{label:"Custom",size:"small",color:"secondary"}),B.is_enabled&&r.jsx(Si,{label:"Active",size:"small",color:"success"})]}),B.dependencies&&B.dependencies.length>0&&r.jsx(Qt,{mb:2,children:r.jsxs(qr,{variant:"caption",color:"text.secondary",children:["Dependencies: ",B.dependencies.join(", ")]})}),r.jsx(Qt,{display:"flex",justifyContent:"flex-end",gap:1,children:NF[B.code]&&r.jsx(mF,{title:"Configure",children:r.jsx(Ey,{size:"small",color:"primary",onClick:()=>e(NF[B.code]),children:r.jsx(O9e,{fontSize:"small"})})})})]})})},B.id))}),v===1&&r.jsx(Qt,{children:n.length===0?r.jsxs(Qt,{textAlign:"center",py:6,children:[r.jsx(D9e,{sx:{fontSize:64,color:"text.secondary",mb:2}}),r.jsx(qr,{variant:"h6",color:"text.secondary",gutterBottom:!0,children:"No module packages uploaded yet"}),r.jsx(qr,{variant:"body2",color:"text.secondary",mb:3,children:"Upload a module package (.zip) to get started"}),r.jsx(W0,{variant:"contained",startIcon:r.jsx(cC,{}),onClick:()=>y(!0),children:"Upload Module Package"})]}):r.jsx(Qt,{display:"flex",flexDirection:"column",gap:2,children:n.map(B=>r.jsx(Z9,{elevation:2,children:r.jsx(J9,{children:r.jsxs(Qt,{display:"flex",justifyContent:"space-between",alignItems:"center",children:[r.jsxs(Qt,{children:[r.jsx(qr,{variant:"h6",children:B.manifest.name}),r.jsxs(qr,{variant:"body2",color:"text.secondary",children:[B.module_code," v",B.version,"  ",R(B.file_size)]}),B.manifest.author&&r.jsxs(qr,{variant:"caption",color:"text.secondary",children:["by ",B.manifest.author]})]}),r.jsxs(Qt,{display:"flex",alignItems:"center",gap:2,children:[r.jsx(Si,{label:B.status,size:"small",color:B.status==="installed"?"success":B.status==="failed"?"error":"default"}),r.jsx(qr,{variant:"caption",color:"text.secondary",children:new Date(B.created_at).toLocaleDateString()}),r.jsx(mF,{title:"Delete Package",children:r.jsx(Ey,{size:"small",color:"error",onClick:()=>M(B),children:r.jsx(iJ,{fontSize:"small"})})})]})]})})},B.id))})}),r.jsxs(GZ,{open:x,onClose:()=>!N&&y(!1),maxWidth:"sm",fullWidth:!0,children:[r.jsx(QZ,{children:"Upload Module Package"}),r.jsx(XZ,{children:r.jsxs(Qt,{mt:2,children:[r.jsxs(Qt,{onDragEnter:A,onDragLeave:A,onDragOver:A,onDrop:P,sx:{border:"2px dashed",borderColor:C?"primary.main":"divider",borderRadius:2,p:4,textAlign:"center",bgcolor:C?"action.hover":"background.paper",cursor:"pointer",transition:"all 0.2s","&:hover":{borderColor:"primary.main",bgcolor:"action.hover"}},onClick:()=>{var B;return(B=t.current)==null?void 0:B.click()},children:[r.jsx("input",{type:"file",ref:t,hidden:!0,accept:".zip,.json",onChange:B=>{var O;return((O=B.target.files)==null?void 0:O[0])&&T(B.target.files[0])}}),r.jsx(cC,{sx:{fontSize:48,color:"text.secondary",mb:2}}),r.jsx(qr,{variant:"h6",gutterBottom:!0,children:C?"Drop file here":"Drag & drop or click to upload"}),r.jsx(qr,{variant:"body2",color:"text.secondary",children:"Supported formats: .zip (module package) or .json (manifest only)"}),r.jsx(qr,{variant:"caption",color:"text.secondary",display:"block",mt:1,children:"Maximum file size: 50MB"})]}),N&&r.jsxs(Qt,{mt:3,children:[r.jsx(M8e,{variant:"indeterminate"}),r.jsx(qr,{variant:"body2",color:"text.secondary",mt:1,textAlign:"center",children:"Uploading and installing module..."})]}),r.jsx(Gm,{severity:"success",sx:{mt:3},children:r.jsxs(qr,{variant:"body2",children:[r.jsx("strong",{children:"Hot-Swap Mode:"})," Modules are enabled immediately after upload!"]})}),r.jsxs(Gm,{severity:"info",sx:{mt:2},children:[r.jsx(qr,{variant:"body2",children:r.jsx("strong",{children:"Manifest.json Example:"})}),r.jsx(qr,{variant:"caption",component:"div",sx:{mt:1,fontFamily:"monospace",whiteSpace:"pre"},children:`{
  "code": "my_module",
  "name": "My Custom Module",
  "description": "What it does",
  "version": "1.0.0",
  "category": "feature",
  "icon": "",
  "autoEnable": true
}`})]})]})}),r.jsx(YZ,{children:r.jsx(W0,{onClick:()=>y(!1),disabled:N,children:"Cancel"})})]})]})})}const d1="/api",kF={code:"",name:"",description:"",tier:1,purchase_price:0,annual_fee:0,currency:"SLE",daily_transaction_limit:5e4,monthly_transaction_limit:5e5,max_balance:1e6,transaction_fee_percent:1.5,transaction_fee_flat:0,bin_prefix:"520010",card_length:16,is_online_enabled:!0,is_atm_enabled:!1,is_contactless_enabled:!1,is_international_enabled:!1,cashback_percent:0,features:[],card_design_url:"",card_color:"#1A1A1A",card_text_color:"#FFFFFF",is_active:!0,is_visible:!0,stock_limit:void 0,sort_order:0};function M9e(){const[e,t]=p.useState([]),[s,a]=p.useState(!0),[n,i]=p.useState(""),[o,l]=p.useState(""),[c,d]=p.useState(!1),[h,f]=p.useState(!1),[x,y]=p.useState(null),[v,w]=p.useState(0),[N,k]=p.useState(kF),[C,E]=p.useState("");p.useEffect(()=>{_()},[]);const _=async()=>{try{a(!0);const O=await fetch(`${d1}/card-products?admin=true`),F=await O.json();O.ok?t(F.products||[]):i(F.error||"Failed to load card products")}catch(O){i(O.message||"Failed to load card products")}finally{a(!1)}},T=async()=>{try{const O=await fetch(`${d1}/card-products`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(N)}),F=await O.json();O.ok?(l("Card product created successfully"),d(!1),$(),_()):i(F.error||"Failed to create card product")}catch(O){i(O.message||"Failed to create card product")}},A=async()=>{if(x)try{const O=await fetch(`${d1}/card-products/${x.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(N)}),F=await O.json();O.ok?(l("Card product updated successfully"),d(!1),y(null),f(!1),$(),_()):i(F.error||"Failed to update card product")}catch(O){i(O.message||"Failed to update card product")}},P=async O=>{if(confirm(`Are you sure you want to delete "${O.name}"?`))try{const F=await fetch(`${d1}/card-products/${O.id}`,{method:"DELETE"}),q=await F.json();F.ok?(l("Card product deleted successfully"),_()):i(q.error||"Failed to delete card product")}catch(F){i(F.message||"Failed to delete card product")}},M=()=>{$(),f(!1),d(!0)},R=O=>{y(O),k({code:O.code,name:O.name,description:O.description||"",tier:O.tier,purchase_price:O.purchase_price,annual_fee:O.annual_fee,currency:O.currency,daily_transaction_limit:O.daily_transaction_limit,monthly_transaction_limit:O.monthly_transaction_limit,max_balance:O.max_balance,transaction_fee_percent:O.transaction_fee_percent,transaction_fee_flat:O.transaction_fee_flat,bin_prefix:O.bin_prefix,card_length:O.card_length,is_online_enabled:O.is_online_enabled,is_atm_enabled:O.is_atm_enabled,is_contactless_enabled:O.is_contactless_enabled,is_international_enabled:O.is_international_enabled,cashback_percent:O.cashback_percent,features:O.features||[],card_design_url:O.card_design_url||"",card_color:O.card_color,card_text_color:O.card_text_color,is_active:O.is_active,is_visible:O.is_visible,stock_limit:O.stock_limit,sort_order:O.sort_order}),f(!0),d(!0)},$=()=>{k(kF),E("")},W=()=>{C.trim()&&(k({...N,features:[...N.features,C.trim()]}),E(""))},I=O=>{k({...N,features:N.features.filter((F,q)=>q!==O)})},B=O=>new Intl.NumberFormat("en-SL",{style:"currency",currency:"SLE",minimumFractionDigits:0}).format(O);return s?r.jsx(fr,{children:r.jsx(Qt,{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"400px",children:r.jsx(zk,{})})}):r.jsx(fr,{children:r.jsxs(Qt,{p:3,children:[r.jsxs(Qt,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3,children:[r.jsx(qr,{variant:"h4",children:"Card Products"}),r.jsx(W0,{variant:"contained",startIcon:r.jsx(T9e,{}),onClick:M,children:"Create Card Product"})]}),n&&r.jsx(Gm,{severity:"error",onClose:()=>i(""),sx:{mb:2},children:n}),o&&r.jsx(Gm,{severity:"success",onClose:()=>l(""),sx:{mb:2},children:o}),r.jsx(e9e,{component:Lx,children:r.jsxs(ULe,{children:[r.jsx(n9e,{children:r.jsxs(bF,{children:[r.jsx($n,{children:"Tier"}),r.jsx($n,{children:"Name"}),r.jsx($n,{children:"Price"}),r.jsx($n,{children:"Daily Limit"}),r.jsx($n,{children:"Features"}),r.jsx($n,{children:"Cards Issued"}),r.jsx($n,{children:"Status"}),r.jsx($n,{align:"right",children:"Actions"})]})}),r.jsx(HLe,{children:e.map(O=>r.jsxs(bF,{children:[r.jsx($n,{children:r.jsx(Si,{label:`Tier ${O.tier}`,size:"small",color:"primary"})}),r.jsxs($n,{children:[r.jsx(qr,{variant:"body2",fontWeight:"bold",children:O.name}),r.jsx(qr,{variant:"caption",color:"text.secondary",children:O.code})]}),r.jsx($n,{children:B(O.purchase_price)}),r.jsx($n,{children:B(O.daily_transaction_limit)}),r.jsx($n,{children:r.jsxs(Qt,{display:"flex",gap:.5,flexWrap:"wrap",children:[O.is_online_enabled&&r.jsx(Si,{label:"Online",size:"small"}),O.is_atm_enabled&&r.jsx(Si,{label:"ATM",size:"small"}),O.is_international_enabled&&r.jsx(Si,{label:"International",size:"small"})]})}),r.jsxs($n,{children:[r.jsx(qr,{variant:"body2",children:O.cards_issued}),O.stock_limit&&r.jsxs(qr,{variant:"caption",color:"text.secondary",children:["/ ",O.stock_limit]})]}),r.jsx($n,{children:r.jsxs(Qt,{display:"flex",gap:.5,flexDirection:"column",children:[O.is_active?r.jsx(Si,{label:"Active",size:"small",color:"success"}):r.jsx(Si,{label:"Inactive",size:"small",color:"default"}),O.is_visible?r.jsx(Si,{label:"Visible",size:"small",color:"info"}):r.jsx(Si,{label:"Hidden",size:"small",color:"default"})]})}),r.jsxs($n,{align:"right",children:[r.jsx(Ey,{size:"small",onClick:()=>R(O),children:r.jsx(I9e,{fontSize:"small"})}),r.jsx(Ey,{size:"small",color:"error",onClick:()=>P(O),disabled:O.cards_issued>0,children:r.jsx(iJ,{fontSize:"small"})})]})]},O.id))})]})}),r.jsxs(GZ,{open:c,onClose:()=>d(!1),maxWidth:"md",fullWidth:!0,children:[r.jsx(QZ,{children:h?"Edit Card Product":"Create Card Product"}),r.jsxs(XZ,{children:[r.jsxs(nJ,{value:v,onChange:(O,F)=>w(F),sx:{mb:2},children:[r.jsx(Xm,{label:"Basic Info"}),r.jsx(Xm,{label:"Pricing & Limits"}),r.jsx(Xm,{label:"Features"}),r.jsx(Xm,{label:"Design"})]}),v===0&&r.jsxs(Qt,{display:"flex",flexDirection:"column",gap:2,children:[r.jsx(La,{label:"Product Code",placeholder:"e.g., gold",value:N.code,onChange:O=>k({...N,code:O.target.value}),fullWidth:!0,required:!0,disabled:h}),r.jsx(La,{label:"Product Name",placeholder:"e.g., Gold Card",value:N.name,onChange:O=>k({...N,name:O.target.value}),fullWidth:!0,required:!0}),r.jsx(La,{label:"Description",placeholder:"Describe the card benefits",value:N.description,onChange:O=>k({...N,description:O.target.value}),multiline:!0,rows:3,fullWidth:!0}),r.jsxs(Qt,{display:"flex",gap:2,children:[r.jsx(Qt,{flex:1,children:r.jsx(La,{label:"Tier",type:"number",value:N.tier,onChange:O=>k({...N,tier:parseInt(O.target.value)}),fullWidth:!0,required:!0})}),r.jsx(Qt,{flex:1,children:r.jsx(La,{label:"Sort Order",type:"number",value:N.sort_order,onChange:O=>k({...N,sort_order:parseInt(O.target.value)}),fullWidth:!0})})]})]}),v===1&&r.jsxs(Qt,{display:"flex",flexDirection:"column",gap:2,children:[r.jsxs(Qt,{display:"flex",gap:2,children:[r.jsx(Qt,{flex:1,children:r.jsx(La,{label:"Purchase Price",type:"number",value:N.purchase_price,onChange:O=>k({...N,purchase_price:parseFloat(O.target.value)}),fullWidth:!0,required:!0})}),r.jsx(Qt,{flex:1,children:r.jsx(La,{label:"Annual Fee",type:"number",value:N.annual_fee,onChange:O=>k({...N,annual_fee:parseFloat(O.target.value)}),fullWidth:!0})})]}),r.jsx(A0,{}),r.jsx(La,{label:"Daily Transaction Limit",type:"number",value:N.daily_transaction_limit,onChange:O=>k({...N,daily_transaction_limit:parseFloat(O.target.value)}),fullWidth:!0}),r.jsx(La,{label:"Monthly Transaction Limit",type:"number",value:N.monthly_transaction_limit,onChange:O=>k({...N,monthly_transaction_limit:parseFloat(O.target.value)}),fullWidth:!0}),r.jsx(La,{label:"Max Balance",type:"number",value:N.max_balance,onChange:O=>k({...N,max_balance:parseFloat(O.target.value)}),fullWidth:!0}),r.jsx(A0,{}),r.jsxs(Qt,{display:"flex",gap:2,children:[r.jsx(Qt,{flex:1,children:r.jsx(La,{label:"Transaction Fee (%)",type:"number",value:N.transaction_fee_percent,onChange:O=>k({...N,transaction_fee_percent:parseFloat(O.target.value)}),fullWidth:!0})}),r.jsx(Qt,{flex:1,children:r.jsx(La,{label:"Transaction Fee (Flat)",type:"number",value:N.transaction_fee_flat,onChange:O=>k({...N,transaction_fee_flat:parseFloat(O.target.value)}),fullWidth:!0})})]}),r.jsx(La,{label:"Cashback Percent",type:"number",value:N.cashback_percent,onChange:O=>k({...N,cashback_percent:parseFloat(O.target.value)}),fullWidth:!0}),r.jsx(A0,{}),r.jsxs(Qt,{display:"flex",gap:2,children:[r.jsx(Qt,{flex:1,children:r.jsx(La,{label:"BIN Prefix",placeholder:"e.g., 520013",value:N.bin_prefix,onChange:O=>k({...N,bin_prefix:O.target.value}),fullWidth:!0,required:!0})}),r.jsx(Qt,{flex:1,children:r.jsx(La,{label:"Stock Limit",type:"number",placeholder:"Leave empty for unlimited",value:N.stock_limit||"",onChange:O=>k({...N,stock_limit:O.target.value?parseInt(O.target.value):void 0}),fullWidth:!0})})]})]}),v===2&&r.jsxs(Qt,{display:"flex",flexDirection:"column",gap:2,children:[r.jsx(pm,{control:r.jsx(k0,{checked:N.is_online_enabled,onChange:O=>k({...N,is_online_enabled:O.target.checked})}),label:"Online Payments Enabled"}),r.jsx(pm,{control:r.jsx(k0,{checked:N.is_atm_enabled,onChange:O=>k({...N,is_atm_enabled:O.target.checked})}),label:"ATM Withdrawals Enabled"}),r.jsx(pm,{control:r.jsx(k0,{checked:N.is_contactless_enabled,onChange:O=>k({...N,is_contactless_enabled:O.target.checked})}),label:"Contactless Payments"}),r.jsx(pm,{control:r.jsx(k0,{checked:N.is_international_enabled,onChange:O=>k({...N,is_international_enabled:O.target.checked})}),label:"International Payments"}),r.jsx(A0,{}),r.jsx(qr,{variant:"subtitle2",children:"Feature List (for display)"}),r.jsxs(Qt,{display:"flex",gap:1,children:[r.jsx(La,{placeholder:"e.g., Free airport lounge access",value:C,onChange:O=>E(O.target.value),onKeyPress:O=>O.key==="Enter"&&W(),fullWidth:!0,size:"small"}),r.jsx(W0,{onClick:W,variant:"outlined",children:"Add"})]}),r.jsx(Qt,{display:"flex",gap:1,flexWrap:"wrap",children:N.features.map((O,F)=>r.jsx(Si,{label:O,onDelete:()=>I(F)},F))})]}),v===3&&r.jsxs(Qt,{display:"flex",flexDirection:"column",gap:2,children:[r.jsx(La,{label:"Card Design URL",placeholder:"https://example.com/card-design.png",value:N.card_design_url,onChange:O=>k({...N,card_design_url:O.target.value}),fullWidth:!0}),r.jsxs(Qt,{display:"flex",gap:2,children:[r.jsx(Qt,{flex:1,children:r.jsx(La,{label:"Card Background Color",type:"color",value:N.card_color,onChange:O=>k({...N,card_color:O.target.value}),fullWidth:!0})}),r.jsx(Qt,{flex:1,children:r.jsx(La,{label:"Card Text Color",type:"color",value:N.card_text_color,onChange:O=>k({...N,card_text_color:O.target.value}),fullWidth:!0})})]}),r.jsx(A0,{}),r.jsx(pm,{control:r.jsx(k0,{checked:N.is_active,onChange:O=>k({...N,is_active:O.target.checked})}),label:"Active (can be purchased)"}),r.jsx(pm,{control:r.jsx(k0,{checked:N.is_visible,onChange:O=>k({...N,is_visible:O.target.checked})}),label:"Visible (show in marketplace)"}),r.jsxs(Qt,{sx:{width:"100%",height:200,borderRadius:2,background:N.card_color,color:N.card_text_color,display:"flex",flexDirection:"column",justifyContent:"space-between",p:3},children:[r.jsx(qr,{variant:"h6",children:N.name}),r.jsxs(Qt,{children:[r.jsx(qr,{variant:"body2",children:"**** **** **** 1234"}),r.jsx(qr,{variant:"caption",children:"12/30"})]})]})]})]}),r.jsxs(YZ,{children:[r.jsx(W0,{onClick:()=>d(!1),children:"Cancel"}),r.jsx(W0,{onClick:h?A:T,variant:"contained",children:h?"Update":"Create"})]})]})]})})}function L9e(){const[e,t]=p.useState("sdks"),[s,a]=p.useState([]),[n,i]=p.useState([]),[o,l]=p.useState(!1),[c,d]=p.useState(!1),[h,f]=p.useState(null),[x,y]=p.useState(!1),v=k=>{const C={javascript:"npm install @softtouch/sdk",python:"pip install cardpay-sdk",php:"composer require softtouch/sdk",go:"go get github.com/softtouch/sdk-go"};navigator.clipboard.writeText(C[k]||""),y(!0),setTimeout(()=>y(!1),2e3)},w=k=>({javascript:"",python:"",php:"",go:"",java:""})[k]||"",N=k=>{a(s.map(C=>C.id===k?{...C,isActive:!C.isActive}:C))};return r.jsx(fr,{children:r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Developer Management"}),r.jsx("p",{className:"text-gray-500 mt-1",children:"Manage SDKs, documentation, and developer resources for merchants and agents"})]}),r.jsx("div",{className:"flex gap-3",children:r.jsxs("button",{onClick:()=>l(!0),className:"flex items-center gap-2 px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-colors",children:[r.jsx(Of,{className:"w-4 h-4"}),"Upload SDK"]})})]}),r.jsx("div",{className:"border-b border-gray-200",children:r.jsx("nav",{className:"flex gap-8",children:[{id:"sdks",label:"SDK Packages",icon:sh},{id:"docs",label:"Documentation",icon:UV},{id:"settings",label:"Settings",icon:bs}].map(k=>r.jsxs("button",{onClick:()=>t(k.id),className:`flex items-center gap-2 px-1 py-4 border-b-2 transition-colors ${e===k.id?"border-primary-600 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:[r.jsx(k.icon,{className:"w-4 h-4"}),k.label]},k.id))})}),e==="sdks"&&r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[r.jsx("div",{className:"bg-white rounded-xl p-6 border border-gray-200",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"p-3 bg-blue-100 rounded-lg",children:r.jsx(sh,{className:"w-6 h-6 text-blue-600"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-2xl font-bold",children:s.length}),r.jsx("p",{className:"text-sm text-gray-500",children:"SDK Packages"})]})]})}),r.jsx("div",{className:"bg-white rounded-xl p-6 border border-gray-200",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"p-3 bg-green-100 rounded-lg",children:r.jsx(gs,{className:"w-6 h-6 text-green-600"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-2xl font-bold",children:s.reduce((k,C)=>k+C.downloads,0).toLocaleString()}),r.jsx("p",{className:"text-sm text-gray-500",children:"Total Downloads"})]})]})}),r.jsx("div",{className:"bg-white rounded-xl p-6 border border-gray-200",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"p-3 bg-purple-100 rounded-lg",children:r.jsx(Pa,{className:"w-6 h-6 text-purple-600"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-2xl font-bold",children:s.filter(k=>k.isActive).length}),r.jsx("p",{className:"text-sm text-gray-500",children:"Active SDKs"})]})]})}),r.jsx("div",{className:"bg-white rounded-xl p-6 border border-gray-200",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"p-3 bg-orange-100 rounded-lg",children:r.jsx(Oi,{className:"w-6 h-6 text-orange-600"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-2xl font-bold",children:"4"}),r.jsx("p",{className:"text-sm text-gray-500",children:"Languages"})]})]})})]}),r.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 overflow-hidden",children:[r.jsxs("div",{className:"p-4 border-b border-gray-200",children:[r.jsx("h3",{className:"font-semibold text-gray-900",children:"Available SDK Packages"}),r.jsx("p",{className:"text-sm text-gray-500",children:"These SDKs are available for download in merchant and agent developer portals"})]}),r.jsx("div",{className:"divide-y divide-gray-200",children:s.map(k=>r.jsx("div",{className:"p-4 hover:bg-gray-50",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("div",{className:"text-3xl",children:w(k.language)}),r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("h4",{className:"font-medium text-gray-900",children:k.name}),r.jsxs("span",{className:"px-2 py-0.5 bg-gray-100 text-gray-600 text-xs rounded-full",children:["v",k.version]}),k.isActive?r.jsx("span",{className:"px-2 py-0.5 bg-green-100 text-green-700 text-xs rounded-full",children:"Active"}):r.jsx("span",{className:"px-2 py-0.5 bg-gray-100 text-gray-500 text-xs rounded-full",children:"Inactive"})]}),r.jsxs("div",{className:"flex items-center gap-4 mt-1 text-sm text-gray-500",children:[r.jsx("span",{children:k.size}),r.jsx("span",{children:""}),r.jsxs("span",{children:[k.downloads.toLocaleString()," downloads"]}),r.jsx("span",{children:""}),r.jsxs("span",{children:["Updated ",k.updatedAt]})]})]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs("button",{onClick:()=>v(k.language),className:"flex items-center gap-1 px-3 py-1.5 text-sm text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",title:"Copy install command",children:[x?r.jsx(Hr,{className:"w-4 h-4 text-green-500"}):r.jsx(Pr,{className:"w-4 h-4"}),"Install"]}),r.jsx("button",{onClick:()=>N(k.id),className:`px-3 py-1.5 text-sm rounded-lg transition-colors ${k.isActive?"text-orange-600 hover:bg-orange-50":"text-green-600 hover:bg-green-50"}`,children:k.isActive?"Deactivate":"Activate"}),r.jsx("button",{className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg",children:r.jsx(gh,{className:"w-4 h-4"})}),r.jsx("button",{className:"p-2 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded-lg",children:r.jsx(Js,{className:"w-4 h-4"})})]})]})},k.id))})]}),r.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[r.jsx("h3",{className:"font-semibold text-gray-900 mb-4",children:"SDK Resources"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsxs("a",{href:"https://github.com/PeeapDev/Card",target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-3 p-4 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:[r.jsx(Qie,{className:"w-6 h-6"}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-gray-900",children:"GitHub Repository"}),r.jsx("p",{className:"text-sm text-gray-500",children:"View source code"})]}),r.jsx(da,{className:"w-4 h-4 text-gray-400 ml-auto"})]}),r.jsxs("a",{href:"https://www.npmjs.com/package/@softtouch/sdk",target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-3 p-4 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:[r.jsx(sh,{className:"w-6 h-6 text-red-600"}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-gray-900",children:"NPM Package"}),r.jsx("p",{className:"text-sm text-gray-500",children:"@softtouch/sdk"})]}),r.jsx(da,{className:"w-4 h-4 text-gray-400 ml-auto"})]}),r.jsxs("button",{className:"flex items-center gap-3 p-4 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors text-left",children:[r.jsx(Ot,{className:"w-6 h-6 text-blue-600"}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-gray-900",children:"Sync from NPM"}),r.jsx("p",{className:"text-sm text-gray-500",children:"Update SDK versions"})]}),r.jsx(Qr,{className:"w-4 h-4 text-gray-400 ml-auto"})]})]})]})]}),e==="docs"&&r.jsxs("div",{className:"space-y-6",children:[r.jsx("div",{className:"flex justify-end",children:r.jsxs("button",{onClick:()=>{f(null),d(!0)},className:"flex items-center gap-2 px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-colors",children:[r.jsx(sr,{className:"w-4 h-4"}),"Add Section"]})}),r.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 overflow-hidden",children:[r.jsxs("div",{className:"p-4 border-b border-gray-200",children:[r.jsx("h3",{className:"font-semibold text-gray-900",children:"Documentation Sections"}),r.jsx("p",{className:"text-sm text-gray-500",children:"Manage documentation content shown in merchant and agent developer portals"})]}),r.jsx("div",{className:"divide-y divide-gray-200",children:n.map((k,C)=>r.jsx("div",{className:"p-4 hover:bg-gray-50",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("div",{className:"flex items-center justify-center w-8 h-8 bg-gray-100 rounded-lg text-sm font-medium text-gray-600",children:C+1}),r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("h4",{className:"font-medium text-gray-900",children:k.title}),k.status==="published"?r.jsx("span",{className:"px-2 py-0.5 bg-green-100 text-green-700 text-xs rounded-full",children:"Published"}):r.jsx("span",{className:"px-2 py-0.5 bg-yellow-100 text-yellow-700 text-xs rounded-full",children:"Draft"})]}),r.jsx("p",{className:"text-sm text-gray-500 mt-1",children:k.description}),r.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:["Last updated: ",k.lastUpdated]})]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("button",{className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg",children:r.jsx(ir,{className:"w-4 h-4"})}),r.jsx("button",{onClick:()=>{f(k),d(!0)},className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg",children:r.jsx(gh,{className:"w-4 h-4"})}),r.jsx("button",{className:"p-2 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded-lg",children:r.jsx(Js,{className:"w-4 h-4"})})]})]})},k.id))})]}),r.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[r.jsx("h3",{className:"font-semibold text-gray-900 mb-4",children:"Code Examples Configuration"}),r.jsx("p",{className:"text-sm text-gray-500 mb-4",children:"Configure code examples shown in the SDK documentation for each language"}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:["JavaScript","Python","PHP","Go"].map(k=>r.jsxs("div",{className:"p-4 border border-gray-200 rounded-lg hover:border-primary-300 cursor-pointer transition-colors",children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx("span",{className:"font-medium",children:k}),r.jsx("span",{className:"text-green-500 text-sm",children:" Configured"})]}),r.jsx("p",{className:"text-sm text-gray-500",children:"12 examples"})]},k))})]})]}),e==="settings"&&r.jsx("div",{className:"space-y-6",children:r.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[r.jsx("h3",{className:"font-semibold text-gray-900 mb-4",children:"Developer Portal Settings"}),r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Test Mode Rate Limit (requests/minute)"}),r.jsx("input",{type:"number",defaultValue:100,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Live Mode Rate Limit (requests/minute)"}),r.jsx("input",{type:"number",defaultValue:1e3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Webhook Retry Attempts"}),r.jsxs("select",{className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",children:[r.jsx("option",{value:"3",children:"3 attempts"}),r.jsx("option",{value:"5",children:"5 attempts"}),r.jsx("option",{value:"10",children:"10 attempts"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Default API Version"}),r.jsxs("select",{className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",children:[r.jsx("option",{value:"2024-01",children:"2024-01 (Latest)"}),r.jsx("option",{value:"2023-10",children:"2023-10"}),r.jsx("option",{value:"2023-07",children:"2023-07"})]})]}),r.jsxs("div",{className:"pt-4 border-t border-gray-200",children:[r.jsx("h4",{className:"font-medium text-gray-900 mb-4",children:"Sandbox Environment"}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("label",{className:"flex items-center gap-3",children:[r.jsx("input",{type:"checkbox",defaultChecked:!0,className:"w-4 h-4 text-primary-600 border-gray-300 rounded focus:ring-primary-500"}),r.jsx("span",{className:"text-sm text-gray-700",children:"Enable sandbox environment for all developers"})]}),r.jsxs("label",{className:"flex items-center gap-3",children:[r.jsx("input",{type:"checkbox",defaultChecked:!0,className:"w-4 h-4 text-primary-600 border-gray-300 rounded focus:ring-primary-500"}),r.jsx("span",{className:"text-sm text-gray-700",children:"Auto-generate test API keys on registration"})]}),r.jsxs("label",{className:"flex items-center gap-3",children:[r.jsx("input",{type:"checkbox",className:"w-4 h-4 text-primary-600 border-gray-300 rounded focus:ring-primary-500"}),r.jsx("span",{className:"text-sm text-gray-700",children:"Require approval for live API key generation"})]})]})]}),r.jsx("div",{className:"pt-4 flex justify-end",children:r.jsxs("button",{className:"flex items-center gap-2 px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-colors",children:[r.jsx(Pn,{className:"w-4 h-4"}),"Save Settings"]})})]})]})}),o&&r.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:r.jsxs("div",{className:"bg-white rounded-xl w-full max-w-lg mx-4 p-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("h3",{className:"text-lg font-semibold",children:"Upload SDK Package"}),r.jsx("button",{onClick:()=>l(!1),className:"p-2 hover:bg-gray-100 rounded-lg",children:""})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"SDK Name"}),r.jsx("input",{type:"text",placeholder:"e.g., JavaScript SDK",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Language"}),r.jsxs("select",{className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500",children:[r.jsx("option",{value:"javascript",children:"JavaScript/TypeScript"}),r.jsx("option",{value:"python",children:"Python"}),r.jsx("option",{value:"php",children:"PHP"}),r.jsx("option",{value:"go",children:"Go"}),r.jsx("option",{value:"java",children:"Java"}),r.jsx("option",{value:"ruby",children:"Ruby"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Version"}),r.jsx("input",{type:"text",placeholder:"e.g., 1.0.0",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Package File"}),r.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-8 text-center hover:border-primary-400 transition-colors cursor-pointer",children:[r.jsx(Of,{className:"w-10 h-10 text-gray-400 mx-auto mb-2"}),r.jsx("p",{className:"text-sm text-gray-600",children:"Drag and drop or click to upload"}),r.jsx("p",{className:"text-xs text-gray-400 mt-1",children:".tgz, .tar.gz, .zip (max 50MB)"})]})]}),r.jsxs("div",{className:"flex gap-3 pt-4",children:[r.jsx("button",{onClick:()=>l(!1),className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50",children:"Cancel"}),r.jsx("button",{className:"flex-1 px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700",children:"Upload SDK"})]})]})]})}),c&&r.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:r.jsxs("div",{className:"bg-white rounded-xl w-full max-w-2xl mx-4 p-6 max-h-[90vh] overflow-y-auto",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("h3",{className:"text-lg font-semibold",children:h?"Edit Documentation Section":"Add Documentation Section"}),r.jsx("button",{onClick:()=>d(!1),className:"p-2 hover:bg-gray-100 rounded-lg",children:""})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Section Title"}),r.jsx("input",{type:"text",defaultValue:(h==null?void 0:h.title)||"",placeholder:"e.g., Getting Started",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),r.jsx("input",{type:"text",defaultValue:(h==null?void 0:h.description)||"",placeholder:"Brief description of this section",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Content (Markdown)"}),r.jsx("textarea",{rows:12,placeholder:"Write your documentation content here using Markdown...",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 font-mono text-sm",defaultValue:`# ${(h==null?void 0:h.title)||"Section Title"}

## Overview
Describe what this section covers...

## Getting Started
\`\`\`javascript
import { SoftTouchSDK } from '@softtouch/sdk';

const sdk = new SoftTouchSDK({
  apiKey: 'your_api_key'
});
\`\`\`

## Next Steps
- Step 1
- Step 2
- Step 3
`})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),r.jsxs("select",{defaultValue:(h==null?void 0:h.status)||"draft",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500",children:[r.jsx("option",{value:"draft",children:"Draft"}),r.jsx("option",{value:"published",children:"Published"})]})]}),r.jsxs("div",{className:"flex gap-3 pt-4",children:[r.jsx("button",{onClick:()=>d(!1),className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50",children:"Cancel"}),r.jsx("button",{className:"flex-1 px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700",children:h?"Save Changes":"Create Section"})]})]})]})})]})})}function F9e(){const e=Ut(),[t,s]=p.useState([]),[a,n]=p.useState(!0),[i,o]=p.useState(""),[l,c]=p.useState("all"),[d,h]=p.useState(null);p.useEffect(()=>{cr.getDefaultCurrency().then(h)},[]);const f=(d==null?void 0:d.symbol)||"",[x,y]=p.useState(!1),[v,w]=p.useState(!1),[N,k]=p.useState(null),[C,E]=p.useState(null),[_,T]=p.useState({email:"",password:"User123!@#",firstName:"",lastName:"",phone:"",username:"",role:"user",initialBalance:100}),[A,P]=p.useState(!1),[M,R]=p.useState(null),[$,W]=p.useState(null);p.useEffect(()=>{I()},[]);const I=async()=>{n(!0);try{const{data:K,error:V}=await X.from("users").select("*").order("created_at",{ascending:!1});if(V){console.error("Error fetching users:",V),s([]);return}s(K||[])}catch(K){console.error("Error fetching users:",K),s([])}finally{n(!1)}},B=p.useCallback(async K=>{const V=K.replace(/^@/,"").toLowerCase().trim();if(!V){R(null),W(null);return}if(!/^[a-zA-Z0-9_]+$/.test(V)){R(!1),W("Username can only contain letters, numbers, and underscores");return}if(V.length<3){R(!1),W("Username must be at least 3 characters");return}if(V.length>20){R(!1),W("Username must be 20 characters or less");return}P(!0),W(null);try{const{data:z,error:G}=await X.from("users").select("id").ilike("external_id",`%${V}%`).limit(1);if(G){console.error("Error checking username:",G),R(null);return}R(!z||z.length===0),z&&z.length>0&&W("This username is already taken")}catch(z){console.error("Error checking username:",z),R(null)}finally{P(!1)}},[]);p.useEffect(()=>{const K=setTimeout(()=>{_.username?B(_.username):(R(null),W(null))},500);return()=>clearTimeout(K)},[_.username,B]);const O=K=>{const V=K.replace(/^@/,"");T({..._,username:V})},F=async()=>{w(!0),k(null),E(null);try{if(!_.phone||!_.firstName||!_.lastName){k("Please fill in all required fields (Phone, First Name, Last Name)"),w(!1);return}const K=af(_.phone),V=pie(_.phone);if(V){k(V),w(!1);return}const z=_.username||`user${Date.now().toString(36)}`,{data:G,error:te}=await X.from("users").select("id").eq("phone",K).maybeSingle();if(!te&&G){k("A user with this phone number already exists"),w(!1);return}if(_.email){const{data:_e,error:oe}=await X.from("users").select("id").eq("email",_.email).maybeSingle();if(!oe&&_e){k("A user with this email already exists"),w(!1);return}}const he=`usr_${Date.now()}_${Math.random().toString(36).substr(2,6)}`,ne=`wal_${Date.now()}_${Math.random().toString(36).substr(2,6)}`,{data:ce,error:xe}=await X.rpc("create_user_with_wallet",{p_external_id:he,p_email:_.email||null,p_password_hash:_.password,p_first_name:_.firstName,p_last_name:_.lastName,p_phone:K,p_username:z,p_roles:_.role,p_wallet_external_id:ne,p_initial_balance:_.initialBalance});if(!xe&&ce)E(`User ${_.firstName} created successfully with ${f}${_.initialBalance} balance!`);else{console.log("RPC not available, trying direct insert:",xe==null?void 0:xe.message);const _e={external_id:he,email:_.email||null,password_hash:_.password,first_name:_.firstName,last_name:_.lastName,phone:K,roles:_.role,kyc_tier:1,kyc_status:"APPROVED",status:"ACTIVE",email_verified:!!_.email,phone_verified:!0},{data:oe,error:ie}=await X.from("users").insert(_e).select().single();if(ie){ie.message.includes("external_id")&&ie.message.includes("wallets")?k("Database trigger error. Please run the SQL migration in Supabase."):k(`Failed to create user: ${ie.message}`),w(!1);return}const{data:ge}=await X.from("wallets").select("id, external_id").eq("user_id",oe.id).eq("wallet_type","primary").maybeSingle();ge?await X.from("wallets").update({external_id:ge.external_id||ne,balance:_.initialBalance,status:"ACTIVE",daily_limit:5e3,monthly_limit:5e4}).eq("id",ge.id):await X.from("wallets").insert({external_id:ne,user_id:oe.id,wallet_type:"primary",currency:"USD",balance:_.initialBalance,status:"ACTIVE",daily_limit:5e3,monthly_limit:5e4}),E(`User ${_.firstName} created successfully with ${f}${_.initialBalance} balance!`)}T({email:"",password:"User123!@#",firstName:"",lastName:"",phone:"",username:"",role:"user",initialBalance:100}),I(),setTimeout(()=>{y(!1),E(null)},2e3)}catch(K){k(K.message||"An unexpected error occurred")}finally{w(!1)}},q=t.filter(K=>{var te,he;const V=((te=K.email)==null?void 0:te.toLowerCase().includes(i.toLowerCase()))||((he=K.phone)==null?void 0:he.toLowerCase().includes(i.toLowerCase()))||`${K.first_name} ${K.last_name}`.toLowerCase().includes(i.toLowerCase()),z=K.status==="ACTIVE",G=l==="all"||l==="active"&&z||l==="inactive"&&!z||l==="verified"&&K.kyc_status==="APPROVED"||l==="pending"&&K.kyc_status==="PENDING";return V&&G}),H=K=>{switch(K){case"APPROVED":case"VERIFIED":return r.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400",children:[r.jsx(Ae,{className:"w-3 h-3"})," Verified"]});case"PENDING":return r.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium bg-yellow-100 dark:bg-yellow-900/30 text-yellow-700 dark:text-yellow-400",children:[r.jsx(_t,{className:"w-3 h-3"})," Pending"]});case"REJECTED":return r.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-400",children:[r.jsx(Wt,{className:"w-3 h-3"})," Rejected"]});default:return r.jsx("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300",children:"Not Started"})}};return r.jsx(fr,{children:r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"User Management"}),r.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Manage regular user accounts and settings"})]}),r.jsxs("button",{onClick:()=>y(!0),className:"px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 flex items-center gap-2",children:[r.jsx(sr,{className:"w-4 h-4"}),"Add User"]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[r.jsx(Be,{className:"p-4",delay:0,children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-900/30 rounded-lg",children:r.jsx(nn,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Total Users"}),r.jsx("p",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:t.length})]})]})}),r.jsx(Be,{className:"p-4",delay:.1,children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"p-2 bg-green-100 dark:bg-green-900/30 rounded-lg",children:r.jsx(Ae,{className:"w-5 h-5 text-green-600 dark:text-green-400"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Verified"}),r.jsx("p",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:t.filter(K=>K.kyc_status==="APPROVED"||K.kyc_status==="VERIFIED").length})]})]})}),r.jsx(Be,{className:"p-4",delay:.2,children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"p-2 bg-yellow-100 dark:bg-yellow-900/30 rounded-lg",children:r.jsx(_t,{className:"w-5 h-5 text-yellow-600 dark:text-yellow-400"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Pending KYC"}),r.jsx("p",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:t.filter(K=>K.kyc_status==="PENDING").length})]})]})}),r.jsx(Be,{className:"p-4",delay:.3,children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"p-2 bg-red-100 dark:bg-red-900/30 rounded-lg",children:r.jsx(_l,{className:"w-5 h-5 text-red-600 dark:text-red-400"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Suspended"}),r.jsx("p",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:t.filter(K=>K.status==="SUSPENDED").length})]})]})})]}),r.jsx(se,{className:"p-4",children:r.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[r.jsxs("div",{className:"flex-1 relative",children:[r.jsx(Nr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),r.jsx("input",{type:"text",placeholder:"Search users by name, email, or phone...",value:i,onChange:K=>o(K.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-400"})]}),r.jsxs("select",{value:l,onChange:K=>c(K.target.value),className:"px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[r.jsx("option",{value:"all",children:"All Status"}),r.jsx("option",{value:"active",children:"Active"}),r.jsx("option",{value:"inactive",children:"Suspended"}),r.jsx("option",{value:"verified",children:"KYC Verified"}),r.jsx("option",{value:"pending",children:"KYC Pending"})]}),r.jsxs("button",{className:"px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 flex items-center gap-2 text-gray-700 dark:text-gray-300",children:[r.jsx(gs,{className:"w-4 h-4"}),"Export"]})]})}),r.jsxs(se,{className:"overflow-hidden",children:[a?r.jsxs("div",{className:"p-8 text-center",children:[r.jsx("div",{className:"w-8 h-8 border-4 border-primary-600 border-t-transparent rounded-full animate-spin mx-auto"}),r.jsx("p",{className:"mt-2 text-gray-500 dark:text-gray-400",children:"Loading users..."})]}):r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700/50",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"User"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Contact"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"KYC Status"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Status"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Joined"})]})}),r.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:q.map(K=>{var V,z;return r.jsxs("tr",{onClick:()=>e(`/admin/users/${K.id}`),className:"hover:bg-blue-50 dark:hover:bg-blue-900/20 cursor-pointer transition-colors",children:[r.jsx("td",{className:"px-6 py-4",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-10 h-10 bg-primary-100 dark:bg-primary-900/30 rounded-full flex items-center justify-center",children:r.jsxs("span",{className:"text-primary-700 dark:text-primary-400 font-medium",children:[(V=K.first_name)==null?void 0:V.charAt(0),(z=K.last_name)==null?void 0:z.charAt(0)]})}),r.jsxs("div",{children:[r.jsxs("p",{className:"font-medium text-gray-900 dark:text-white",children:[K.first_name," ",K.last_name]}),r.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:["ID: ",K.id.slice(0,8),"..."]})]})]})}),r.jsx("td",{className:"px-6 py-4",children:r.jsxs("div",{className:"space-y-1",children:[K.email&&r.jsxs("p",{className:"text-sm flex items-center gap-1 text-gray-700 dark:text-gray-300",children:[r.jsx(On,{className:"w-3 h-3 text-gray-400"}),K.email]}),K.phone&&r.jsxs("p",{className:"text-sm flex items-center gap-1 text-gray-700 dark:text-gray-300",children:[r.jsx(Ss,{className:"w-3 h-3 text-gray-400"}),K.phone]})]})}),r.jsx("td",{className:"px-6 py-4",children:H(K.kyc_status)}),r.jsx("td",{className:"px-6 py-4",children:r.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${K.status==="ACTIVE"?"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400":"bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-400"}`,children:K.status==="ACTIVE"?"Active":K.status||"Inactive"})}),r.jsx("td",{className:"px-6 py-4",children:r.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:new Date(K.created_at).toLocaleDateString()})})]},K.id)})})]}),!a&&q.length===0&&r.jsxs("div",{className:"p-8 text-center",children:[r.jsx(nn,{className:"w-12 h-12 text-gray-300 dark:text-gray-600 mx-auto mb-3"}),r.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"No users found"})]})]}),x&&r.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:r.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-xl w-full max-w-md mx-4 max-h-[90vh] overflow-y-auto",children:[r.jsxs("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700 flex items-center justify-between",children:[r.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"Create New User"}),r.jsx("button",{onClick:()=>{y(!1),k(null),E(null)},className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg text-gray-600 dark:text-gray-400",children:r.jsx(Ct,{className:"w-5 h-5"})})]}),r.jsxs("div",{className:"p-6 space-y-4",children:[N&&r.jsxs("div",{className:"p-3 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg text-red-700 dark:text-red-400 text-sm flex items-center gap-2",children:[r.jsx(Ht,{className:"w-4 h-4"}),N]}),C&&r.jsxs("div",{className:"p-3 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg text-green-700 dark:text-green-400 text-sm flex items-center gap-2",children:[r.jsx(Ae,{className:"w-4 h-4"}),C]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"First Name *"}),r.jsx("input",{type:"text",value:_.firstName,onChange:K=>T({..._,firstName:K.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:"John"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Last Name *"}),r.jsx("input",{type:"text",value:_.lastName,onChange:K=>T({..._,lastName:K.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:"Doe"})]})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:[r.jsx(Dw,{className:"w-4 h-4 inline mr-1"}),"Username"]}),r.jsxs("div",{className:"relative",children:[r.jsx("span",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-500 dark:text-gray-400",children:"@"}),r.jsx("input",{type:"text",value:_.username,onChange:K=>O(K.target.value),className:`w-full pl-8 pr-10 py-2 border rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white ${$?"border-red-300 dark:border-red-600":M===!0?"border-green-300 dark:border-green-600":"border-gray-300 dark:border-gray-600"}`,placeholder:"johndoe"}),A&&r.jsx(Ke,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 w-4 h-4 animate-spin text-gray-400"}),!A&&M===!0&&_.username&&r.jsx(Ae,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-green-500"}),!A&&M===!1&&_.username&&r.jsx(Wt,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-red-500"})]}),$&&r.jsx("p",{className:"text-xs text-red-600 dark:text-red-400 mt-1",children:$}),M===!0&&_.username&&r.jsxs("p",{className:"text-xs text-green-600 dark:text-green-400 mt-1",children:["Username @",_.username," is available!"]}),r.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Letters, numbers, and underscores only. The @ will be added automatically."})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Phone Number *"}),r.jsx("input",{type:"tel",value:_.phone,onChange:K=>T({..._,phone:K.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:"077123456 or +232771234567"}),r.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"9 digits starting with 0. Country code (+232) will be auto-removed."}),_.phone&&r.jsxs("p",{className:"text-xs text-primary-600 dark:text-primary-400 mt-1",children:["Will be saved as: ",af(_.phone)||_.phone]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Email (Optional)"}),r.jsx("input",{type:"email",value:_.email,onChange:K=>T({..._,email:K.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:"john@example.com"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Password"}),r.jsx("input",{type:"text",value:_.password,onChange:K=>T({..._,password:K.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Role"}),r.jsxs("select",{value:_.role,onChange:K=>T({..._,role:K.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[r.jsx("option",{value:"user",children:"User"}),r.jsx("option",{value:"merchant",children:"Merchant"}),r.jsx("option",{value:"agent",children:"Agent"}),r.jsx("option",{value:"admin",children:"Admin"})]})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:[r.jsx(Rt,{className:"w-4 h-4 inline mr-1"}),"Initial Balance ($)"]}),r.jsx("input",{type:"number",min:"0",step:"0.01",value:_.initialBalance,onChange:K=>T({..._,initialBalance:parseFloat(K.target.value)||0}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]})]}),r.jsxs("div",{className:"p-6 border-t border-gray-200 dark:border-gray-700 flex gap-3",children:[r.jsx("button",{onClick:()=>{y(!1),k(null),E(null)},className:"flex-1 px-4 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700",children:"Cancel"}),r.jsx("button",{onClick:F,disabled:v,className:"flex-1 px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 disabled:opacity-50 flex items-center justify-center gap-2",children:v?r.jsxs(r.Fragment,{children:[r.jsx(Ke,{className:"w-4 h-4 animate-spin"}),"Creating..."]}):r.jsxs(r.Fragment,{children:[r.jsx(sr,{className:"w-4 h-4"}),"Create User"]})})]})]})})]})})}function B9e(){var K,V;const{userId:e}=Ui(),t=Ut(),[s,a]=p.useState(null),[n,i]=p.useState([]),[o,l]=p.useState([]),[c,d]=p.useState([]),[h,f]=p.useState(!0),[x,y]=p.useState("overview"),[v,w]=p.useState(!1),[N,k]=p.useState({first_name:"",last_name:"",phone:"",email:""}),[C,E]=p.useState(!1),[_,T]=p.useState(!1),[A,P]=p.useState(null);p.useEffect(()=>{cr.getDefaultCurrency().then(P)},[]);const M=(A==null?void 0:A.symbol)||"Le",R=z=>`${M} ${z.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}`;p.useEffect(()=>{e&&$()},[e]);const $=async()=>{f(!0);try{const{data:z,error:G}=await X.from("users").select("*").eq("id",e).single();if(G||!z){console.error("Error fetching user:",G),t("/admin/users");return}a(z);const{data:te}=await X.from("wallets").select("*").eq("user_id",e);i(te||[]);const{data:he}=await X.from("cards").select("*").eq("user_id",e);if(l(he||[]),te&&te.length>0){const ne=te.map(xe=>xe.id),{data:ce}=await X.from("transactions").select("*").in("wallet_id",ne).order("created_at",{ascending:!1}).limit(50);d(ce||[])}}catch(z){console.error("Error fetching user data:",z)}finally{f(!1)}},W=async()=>{if(!s)return;const z=s.status==="ACTIVE"?"SUSPENDED":"ACTIVE",{error:G}=await X.from("users").update({status:z}).eq("id",s.id);G||a({...s,status:z})},I=z=>{switch(z){case"ACTIVE":return r.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 rounded-full text-sm font-medium bg-green-100 text-green-700",children:[r.jsx(Ae,{className:"w-4 h-4"})," Active"]});case"SUSPENDED":return r.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 rounded-full text-sm font-medium bg-red-100 text-red-700",children:[r.jsx(_l,{className:"w-4 h-4"})," Suspended"]});default:return r.jsx("span",{className:"inline-flex items-center gap-1 px-3 py-1 rounded-full text-sm font-medium bg-gray-100 text-gray-700",children:z})}},B=(z,G)=>{switch(z){case"APPROVED":case"VERIFIED":return r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 rounded-full text-sm font-medium bg-green-100 text-green-700",children:[r.jsx(Ae,{className:"w-4 h-4"})," Verified"]}),r.jsxs("span",{className:"text-sm text-gray-500",children:["Tier ",G]})]});case"PENDING":return r.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 rounded-full text-sm font-medium bg-yellow-100 text-yellow-700",children:[r.jsx(_t,{className:"w-4 h-4"})," Pending Review"]});case"REJECTED":return r.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 rounded-full text-sm font-medium bg-red-100 text-red-700",children:[r.jsx(Wt,{className:"w-4 h-4"})," Rejected"]});default:return r.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 rounded-full text-sm font-medium bg-gray-100 text-gray-700",children:[r.jsx(Ht,{className:"w-4 h-4"})," Not Started"]})}},O=n.reduce((z,G)=>z+(G.balance||0),0),F=()=>{s&&(k({first_name:s.first_name||"",last_name:s.last_name||"",phone:s.phone||"",email:s.email||""}),w(!0))},q=async()=>{if(!s)return;E(!0);const{error:z}=await X.from("users").update({first_name:N.first_name,last_name:N.last_name,phone:N.phone,email:N.email}).eq("id",s.id);z||(a({...s,first_name:N.first_name,last_name:N.last_name,phone:N.phone,email:N.email}),w(!1)),E(!1)},H=async z=>{var te;const G=(te=z.target.files)==null?void 0:te[0];if(!(!G||!s)){T(!0);try{const he=G.name.split(".").pop(),ce=`profile-pictures/${`${s.id}_${Date.now()}.${he}`}`,{error:xe}=await X.storage.from("avatars").upload(ce,G);if(xe){const _e=`https://ui-avatars.com/api/?name=${s.first_name}+${s.last_name}&background=random`;await X.from("users").update({profile_picture:_e}).eq("id",s.id),a({...s,profile_picture:_e})}else{const{data:{publicUrl:_e}}=X.storage.from("avatars").getPublicUrl(ce);await X.from("users").update({profile_picture:_e}).eq("id",s.id),a({...s,profile_picture:_e})}}catch(he){console.error("Photo upload error:",he)}finally{T(!1)}}};return h?r.jsx(fr,{children:r.jsx("div",{className:"flex items-center justify-center h-96",children:r.jsx(Ke,{className:"w-8 h-8 animate-spin text-primary-600"})})}):s?r.jsx(fr,{children:r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("button",{onClick:()=>t("/admin/users"),className:"p-2 hover:bg-gray-100 rounded-lg",children:r.jsx(Ar,{className:"w-5 h-5"})}),r.jsxs("div",{className:"flex-1",children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"User Details"}),r.jsx("p",{className:"text-gray-500",children:"Manage user account and view activity"})]}),r.jsx("button",{onClick:$,className:"p-2 hover:bg-gray-100 rounded-lg",title:"Refresh",children:r.jsx(Ot,{className:"w-5 h-5"})})]}),r.jsx(se,{className:"p-6",children:r.jsxs("div",{className:"flex flex-col md:flex-row gap-6",children:[r.jsx("div",{className:"flex-shrink-0",children:r.jsxs("div",{className:"relative",children:[r.jsx("div",{className:"w-32 h-32 bg-primary-100 rounded-full flex items-center justify-center",children:s.profile_picture?r.jsx("img",{src:s.profile_picture,alt:`${s.first_name} ${s.last_name}`,className:"w-32 h-32 rounded-full object-cover"}):r.jsxs("span",{className:"text-4xl font-bold text-primary-600",children:[(K=s.first_name)==null?void 0:K.charAt(0),(V=s.last_name)==null?void 0:V.charAt(0)]})}),r.jsxs("label",{className:"absolute bottom-0 right-0 p-2 bg-white rounded-full shadow-lg hover:bg-gray-50 cursor-pointer",children:[_?r.jsx(Ke,{className:"w-4 h-4 text-gray-600 animate-spin"}):r.jsx(td,{className:"w-4 h-4 text-gray-600"}),r.jsx("input",{type:"file",accept:"image/*",onChange:H,className:"hidden",disabled:_})]})]})}),r.jsxs("div",{className:"flex-1 space-y-4",children:[r.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[r.jsxs("h2",{className:"text-2xl font-bold text-gray-900",children:[s.first_name," ",s.last_name]}),s.username&&r.jsxs("span",{className:"text-lg text-primary-600",children:["@",s.username]}),I(s.status)]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[r.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[r.jsx(Ss,{className:"w-4 h-4"}),r.jsx("span",{children:s.phone||"No phone"}),s.phone_verified&&r.jsx(Ae,{className:"w-4 h-4 text-green-500"})]}),r.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[r.jsx(On,{className:"w-4 h-4"}),r.jsx("span",{children:s.email||"No email"}),s.email_verified&&r.jsx(Ae,{className:"w-4 h-4 text-green-500"})]}),r.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[r.jsx(Li,{className:"w-4 h-4"}),r.jsxs("span",{children:["Joined ",new Date(s.created_at).toLocaleDateString()]})]}),r.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[r.jsx(rr,{className:"w-4 h-4"}),r.jsx("span",{className:"capitalize",children:s.roles||"user"})]}),s.last_login_at&&r.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[r.jsx(_t,{className:"w-4 h-4"}),r.jsxs("span",{children:["Last login: ",new Date(s.last_login_at).toLocaleString()]})]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-sm text-gray-500",children:"KYC Status:"}),B(s.kyc_status,s.kyc_tier)]})]}),r.jsxs("div",{className:"flex flex-col gap-2",children:[r.jsx("button",{onClick:W,className:`px-4 py-2 rounded-lg font-medium flex items-center gap-2 ${s.status==="ACTIVE"?"bg-red-100 text-red-700 hover:bg-red-200":"bg-green-100 text-green-700 hover:bg-green-200"}`,children:s.status==="ACTIVE"?r.jsxs(r.Fragment,{children:[r.jsx(_l,{className:"w-4 h-4"}),"Suspend"]}):r.jsxs(r.Fragment,{children:[r.jsx(Ae,{className:"w-4 h-4"}),"Activate"]})}),r.jsxs("button",{onClick:F,className:"px-4 py-2 bg-gray-100 text-gray-700 rounded-lg font-medium flex items-center gap-2 hover:bg-gray-200",children:[r.jsx(rd,{className:"w-4 h-4"}),"Edit User"]}),r.jsxs("button",{className:"px-4 py-2 bg-gray-100 text-gray-700 rounded-lg font-medium flex items-center gap-2 hover:bg-gray-200",children:[r.jsx(Lr,{className:"w-4 h-4"}),"Send Notification"]})]})]})}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsx(se,{className:"p-6 bg-gradient-to-br from-primary-600 to-primary-500 text-white",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-primary-100 text-sm",children:"Total Balance"}),r.jsx("p",{className:"text-3xl font-bold mt-1",children:R(O)})]}),r.jsx("div",{className:"p-3 bg-white/20 rounded-xl",children:r.jsx(Rt,{className:"w-8 h-8"})})]})}),r.jsx(se,{className:"p-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-gray-500 text-sm",children:"Active Wallets"}),r.jsx("p",{className:"text-3xl font-bold mt-1 text-gray-900",children:n.length})]}),r.jsx("div",{className:"p-3 bg-blue-100 rounded-xl",children:r.jsx(Rt,{className:"w-8 h-8 text-blue-600"})})]})}),r.jsx(se,{className:"p-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-gray-500 text-sm",children:"Active Cards"}),r.jsx("p",{className:"text-3xl font-bold mt-1 text-gray-900",children:o.length})]}),r.jsx("div",{className:"p-3 bg-purple-100 rounded-xl",children:r.jsx(lt,{className:"w-8 h-8 text-purple-600"})})]})})]}),r.jsx("div",{className:"border-b border-gray-200",children:r.jsx("nav",{className:"flex gap-8",children:[{id:"overview",label:"Overview",icon:br},{id:"transactions",label:"Transactions",icon:Cr},{id:"cards",label:"Cards & Wallets",icon:lt},{id:"kyc",label:"KYC Details",icon:ao}].map(z=>r.jsxs("button",{onClick:()=>y(z.id),className:`flex items-center gap-2 py-4 border-b-2 font-medium text-sm transition-colors ${x===z.id?"border-primary-600 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:[r.jsx(z.icon,{className:"w-4 h-4"}),z.label]},z.id))})}),x==="overview"&&r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[r.jsxs(se,{className:"p-6",children:[r.jsxs("h3",{className:"font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[r.jsx(Cr,{className:"w-5 h-5"}),"Recent Transactions"]}),c.length===0?r.jsxs("div",{className:"text-center py-8 text-gray-500",children:[r.jsx(Cr,{className:"w-10 h-10 mx-auto mb-2 text-gray-300"}),"No transactions yet"]}):r.jsx("div",{className:"space-y-3",children:c.slice(0,5).map(z=>{var G;return r.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:`p-2 rounded-full ${z.amount>=0?"bg-green-100":"bg-red-100"}`,children:z.amount>=0?r.jsx(An,{className:"w-4 h-4 text-green-600"}):r.jsx(Rr,{className:"w-4 h-4 text-red-600"})}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-sm",children:z.description||z.type}),r.jsx("p",{className:"text-xs text-gray-500",children:new Date(z.created_at).toLocaleString()})]})]}),r.jsxs("p",{className:`font-semibold ${z.amount>=0?"text-green-600":"text-red-600"}`,children:[z.amount>=0?"+":"",(G=z.amount)==null?void 0:G.toFixed(2)," ",z.currency]})]},z.id)})})]}),r.jsxs(se,{className:"p-6",children:[r.jsxs("h3",{className:"font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[r.jsx(Rt,{className:"w-5 h-5"}),"Wallets"]}),n.length===0?r.jsxs("div",{className:"text-center py-8 text-gray-500",children:[r.jsx(Rt,{className:"w-10 h-10 mx-auto mb-2 text-gray-300"}),"No wallets found"]}):r.jsx("div",{className:"space-y-3",children:n.map(z=>{var G,te;return r.jsxs("div",{className:"p-4 border border-gray-200 rounded-lg",children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsxs("span",{className:"font-medium capitalize",children:[z.wallet_type," Wallet"]}),r.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${z.status==="ACTIVE"?"bg-green-100 text-green-700":"bg-gray-100 text-gray-700"}`,children:z.status})]}),r.jsx("p",{className:"text-2xl font-bold text-gray-900",children:R(z.balance||0)}),r.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Daily Limit: ",M,(G=z.daily_limit)==null?void 0:G.toLocaleString()," | Monthly: ",M,(te=z.monthly_limit)==null?void 0:te.toLocaleString()]})]},z.id)})})]})]}),x==="transactions"&&r.jsxs(se,{className:"overflow-hidden",children:[r.jsx("div",{className:"p-4 border-b border-gray-200",children:r.jsx("h3",{className:"font-semibold text-gray-900",children:"All Transactions"})}),c.length===0?r.jsxs("div",{className:"text-center py-12 text-gray-500",children:[r.jsx(Cr,{className:"w-12 h-12 mx-auto mb-3 text-gray-300"}),"No transactions found"]}):r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{className:"bg-gray-50",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Type"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Description"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Amount"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Status"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Date"})]})}),r.jsx("tbody",{className:"divide-y divide-gray-200",children:c.map(z=>{var G;return r.jsxs("tr",{className:"hover:bg-gray-50",children:[r.jsx("td",{className:"px-6 py-4",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:`p-1.5 rounded-full ${z.amount>=0?"bg-green-100":"bg-red-100"}`,children:z.amount>=0?r.jsx(An,{className:"w-3 h-3 text-green-600"}):r.jsx(Rr,{className:"w-3 h-3 text-red-600"})}),r.jsx("span",{className:"font-medium",children:z.type})]})}),r.jsx("td",{className:"px-6 py-4 text-gray-600",children:z.description||"-"}),r.jsx("td",{className:"px-6 py-4",children:r.jsxs("span",{className:`font-semibold ${z.amount>=0?"text-green-600":"text-red-600"}`,children:[z.amount>=0?"+":"",(G=z.amount)==null?void 0:G.toFixed(2)," ",z.currency]})}),r.jsx("td",{className:"px-6 py-4",children:r.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${z.status==="COMPLETED"?"bg-green-100 text-green-700":z.status==="PENDING"?"bg-yellow-100 text-yellow-700":"bg-red-100 text-red-700"}`,children:z.status})}),r.jsx("td",{className:"px-6 py-4 text-gray-500 text-sm",children:new Date(z.created_at).toLocaleString()})]},z.id)})})]})]}),x==="cards"&&r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[r.jsxs(se,{className:"p-6",children:[r.jsxs("h3",{className:"font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[r.jsx(lt,{className:"w-5 h-5"}),"Cards"]}),o.length===0?r.jsxs("div",{className:"text-center py-8 text-gray-500",children:[r.jsx(lt,{className:"w-10 h-10 mx-auto mb-2 text-gray-300"}),"No cards issued",r.jsx("button",{className:"block mx-auto mt-4 px-4 py-2 bg-primary-600 text-white rounded-lg text-sm",children:"Issue New Card"})]}):r.jsx("div",{className:"space-y-4",children:o.map(z=>{var G;return r.jsxs("div",{className:"p-4 bg-gradient-to-r from-gray-800 to-gray-700 rounded-xl text-white",children:[r.jsxs("div",{className:"flex justify-between items-start mb-8",children:[r.jsx(lt,{className:"w-8 h-8"}),r.jsx("span",{className:`px-2 py-1 rounded text-xs ${z.status==="ACTIVE"?"bg-green-500":"bg-red-500"}`,children:z.status})]}),r.jsxs("p",{className:"text-lg tracking-widest mb-4",children:["   ",((G=z.card_number)==null?void 0:G.slice(-4))||"****"]}),r.jsxs("div",{className:"flex justify-between text-sm",children:[r.jsxs("span",{className:"text-gray-400",children:["Expires: ",z.expiry_date]}),r.jsx("span",{className:"capitalize",children:z.card_type})]})]},z.id)})})]}),r.jsxs(se,{className:"p-6",children:[r.jsxs("h3",{className:"font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[r.jsx(Rt,{className:"w-5 h-5"}),"Wallet Details"]}),n.map(z=>{var G,te;return r.jsxs("div",{className:"p-4 border border-gray-200 rounded-lg mb-3",children:[r.jsxs("div",{className:"flex justify-between items-center mb-3",children:[r.jsxs("div",{children:[r.jsxs("p",{className:"font-medium capitalize",children:[z.wallet_type," Wallet"]}),r.jsx("p",{className:"text-xs text-gray-500",children:z.external_id})]}),r.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${z.status==="ACTIVE"?"bg-green-100 text-green-700":"bg-gray-100 text-gray-700"}`,children:z.status})]}),r.jsxs("p",{className:"text-3xl font-bold text-gray-900 mb-3",children:[R(z.balance||0),r.jsx("span",{className:"text-sm text-gray-500 ml-2",children:z.currency})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-gray-500",children:"Daily Limit"}),r.jsxs("p",{className:"font-medium",children:[M,(G=z.daily_limit)==null?void 0:G.toLocaleString()]})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-gray-500",children:"Monthly Limit"}),r.jsxs("p",{className:"font-medium",children:[M,(te=z.monthly_limit)==null?void 0:te.toLocaleString()]})]})]})]},z.id)})]})]}),x==="kyc"&&r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[r.jsxs(se,{className:"p-6",children:[r.jsxs("h3",{className:"font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[r.jsx(rr,{className:"w-5 h-5"}),"KYC Verification"]}),r.jsxs("div",{className:"space-y-4",children:[r.jsx("div",{className:"p-4 bg-gray-50 rounded-lg",children:r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx("span",{className:"text-gray-600",children:"Status"}),B(s.kyc_status,s.kyc_tier)]})}),r.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[r.jsx("p",{className:"text-gray-600 mb-1",children:"Verification Tier"}),r.jsxs("p",{className:"font-semibold text-lg",children:["Tier ",s.kyc_tier]}),r.jsx("div",{className:"mt-2 flex gap-1",children:[1,2,3].map(z=>r.jsx("div",{className:`flex-1 h-2 rounded-full ${z<=s.kyc_tier?"bg-primary-600":"bg-gray-200"}`},z))})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[r.jsx("p",{className:"text-gray-600 mb-1",children:"Email Verified"}),r.jsx("p",{className:`font-semibold flex items-center gap-1 ${s.email_verified?"text-green-600":"text-red-600"}`,children:s.email_verified?r.jsxs(r.Fragment,{children:[r.jsx(Ae,{className:"w-4 h-4"})," Yes"]}):r.jsxs(r.Fragment,{children:[r.jsx(Wt,{className:"w-4 h-4"})," No"]})})]}),r.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[r.jsx("p",{className:"text-gray-600 mb-1",children:"Phone Verified"}),r.jsx("p",{className:`font-semibold flex items-center gap-1 ${s.phone_verified?"text-green-600":"text-red-600"}`,children:s.phone_verified?r.jsxs(r.Fragment,{children:[r.jsx(Ae,{className:"w-4 h-4"})," Yes"]}):r.jsxs(r.Fragment,{children:[r.jsx(Wt,{className:"w-4 h-4"})," No"]})})]})]})]})]}),r.jsxs(se,{className:"p-6",children:[r.jsxs("h3",{className:"font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[r.jsx(br,{className:"w-5 h-5"}),"Personal Details"]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-500",children:"First Name"}),r.jsx("p",{className:"font-medium",children:s.first_name})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-500",children:"Last Name"}),r.jsx("p",{className:"font-medium",children:s.last_name})]})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-500",children:"Email"}),r.jsx("p",{className:"font-medium",children:s.email||"Not provided"})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-500",children:"Phone"}),r.jsx("p",{className:"font-medium",children:s.phone||"Not provided"})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-500",children:"Date of Birth"}),r.jsx("p",{className:"font-medium",children:s.date_of_birth||"Not provided"})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-500",children:"Address"}),r.jsx("p",{className:"font-medium",children:s.address||"Not provided"})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-500",children:"City"}),r.jsx("p",{className:"font-medium",children:s.city||"Not provided"})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-500",children:"Country"}),r.jsx("p",{className:"font-medium",children:s.country||"Not provided"})]})]})]})]})]}),v&&r.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:r.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-md",children:[r.jsxs("div",{className:"p-6 border-b border-gray-200 flex items-center justify-between",children:[r.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Edit User"}),r.jsx("button",{onClick:()=>w(!1),className:"p-1 hover:bg-gray-100 rounded",children:r.jsx(Ct,{className:"w-5 h-5"})})]}),r.jsxs("div",{className:"p-6 space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"First Name"}),r.jsx("input",{type:"text",value:N.first_name,onChange:z=>k({...N,first_name:z.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Last Name"}),r.jsx("input",{type:"text",value:N.last_name,onChange:z=>k({...N,last_name:z.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone"}),r.jsx("input",{type:"text",value:N.phone,onChange:z=>k({...N,phone:z.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),r.jsx("input",{type:"email",value:N.email,onChange:z=>k({...N,email:z.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500"})]})]}),r.jsxs("div",{className:"p-6 border-t border-gray-200 flex gap-3",children:[r.jsx("button",{onClick:()=>w(!1),className:"flex-1 py-2 bg-gray-100 text-gray-700 rounded-lg font-medium hover:bg-gray-200",children:"Cancel"}),r.jsx("button",{onClick:q,disabled:C,className:"flex-1 py-2 bg-primary-600 text-white rounded-lg font-medium hover:bg-primary-700 flex items-center justify-center gap-2",children:C?r.jsxs(r.Fragment,{children:[r.jsx(Ke,{className:"w-4 h-4 animate-spin"}),"Saving..."]}):"Save Changes"})]})]})})]})}):r.jsx(fr,{children:r.jsxs("div",{className:"text-center py-12",children:[r.jsx(br,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),r.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"User not found"}),r.jsx("button",{onClick:()=>t("/admin/users"),className:"mt-4 text-primary-600 hover:underline",children:"Back to Users"})]})})}function $9e(){const e=Ut(),[t,s]=p.useState([]),[a,n]=p.useState(!0),[i,o]=p.useState(""),[l,c]=p.useState("all");p.useEffect(()=>{d()},[]);const d=async()=>{n(!0);try{const{data:y,error:v}=await X.from("users").select("*").ilike("roles","%merchant%").order("created_at",{ascending:!1});if(v){console.error("Error fetching merchants:",v),s([]);return}s(y||[])}catch(y){console.error("Error fetching merchants:",y),s([])}finally{n(!1)}},h=t.filter(y=>{var k,C;const v=y.email.toLowerCase().includes(i.toLowerCase())||`${y.first_name} ${y.last_name}`.toLowerCase().includes(i.toLowerCase())||((k=y.phone)==null?void 0:k.toLowerCase().includes(i.toLowerCase()))||((C=y.business_name)==null?void 0:C.toLowerCase().includes(i.toLowerCase())),w=y.status==="ACTIVE",N=l==="all"||l==="active"&&w||l==="inactive"&&!w||l==="subscribed"&&y.subscription_status==="active";return v&&N}),f=(y,v)=>{if(!y||y==="inactive")return r.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300",children:"No Subscription"});const w={starter:"bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-400",business:"bg-purple-100 dark:bg-purple-900/30 text-purple-700 dark:text-purple-400",enterprise:"bg-indigo-100 dark:bg-indigo-900/30 text-indigo-700 dark:text-indigo-400"};return r.jsxs("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${w[v||"starter"]||"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400"}`,children:[v==null?void 0:v.charAt(0).toUpperCase(),(v==null?void 0:v.slice(1))||"Active"]})},x=async(y,v)=>{try{const w=v?"INACTIVE":"ACTIVE",{error:N}=await X.from("users").update({status:w}).eq("id",y);if(N){console.error("Error updating merchant status:",N);return}d()}catch(w){console.error("Error updating merchant status:",w)}};return r.jsx(fr,{children:r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Merchant Management"}),r.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Manage merchant accounts, subscriptions and settings"})]}),r.jsxs("button",{onClick:()=>e("/admin/merchants/create"),className:"px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 flex items-center gap-2",children:[r.jsx(sr,{className:"w-4 h-4"}),"Add Merchant"]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[r.jsx(Be,{className:"p-4",delay:0,children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"p-2 bg-green-100 dark:bg-green-900/30 rounded-lg",children:r.jsx(mr,{className:"w-5 h-5 text-green-600 dark:text-green-400"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Total Merchants"}),r.jsx("p",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:t.length})]})]})}),r.jsx(Be,{className:"p-4",delay:.1,children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-900/30 rounded-lg",children:r.jsx(Ae,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Active"}),r.jsx("p",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:t.filter(y=>y.status==="ACTIVE").length})]})]})}),r.jsx(Be,{className:"p-4",delay:.2,children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"p-2 bg-purple-100 dark:bg-purple-900/30 rounded-lg",children:r.jsx(lt,{className:"w-5 h-5 text-purple-600 dark:text-purple-400"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Subscribed"}),r.jsx("p",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:t.filter(y=>y.subscription_status==="active").length})]})]})}),r.jsx(Be,{className:"p-4",delay:.3,children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"p-2 bg-yellow-100 dark:bg-yellow-900/30 rounded-lg",children:r.jsx(Cr,{className:"w-5 h-5 text-yellow-600 dark:text-yellow-400"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Monthly Revenue"}),r.jsx("p",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"$0"})]})]})})]}),r.jsx(se,{className:"p-4",children:r.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[r.jsxs("div",{className:"flex-1 relative",children:[r.jsx(Nr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),r.jsx("input",{type:"text",placeholder:"Search by name, business, email or phone...",value:i,onChange:y=>o(y.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500"})]}),r.jsxs("select",{value:l,onChange:y=>c(y.target.value),className:"px-4 py-2 border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",children:[r.jsx("option",{value:"all",children:"All Status"}),r.jsx("option",{value:"active",children:"Active"}),r.jsx("option",{value:"inactive",children:"Inactive"}),r.jsx("option",{value:"subscribed",children:"Subscribed"})]}),r.jsxs("button",{className:"px-4 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 flex items-center gap-2",children:[r.jsx(gs,{className:"w-4 h-4"}),"Export"]})]})}),r.jsxs(se,{className:"overflow-hidden",children:[a?r.jsxs("div",{className:"p-8 text-center",children:[r.jsx("div",{className:"w-8 h-8 border-4 border-primary-600 dark:border-primary-400 border-t-transparent rounded-full animate-spin mx-auto"}),r.jsx("p",{className:"mt-2 text-gray-500 dark:text-gray-400",children:"Loading merchants..."})]}):r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700/50",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Merchant"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Contact"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Subscription"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Status"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Joined"}),r.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Actions"})]})}),r.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:h.map(y=>r.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700/50",children:[r.jsx("td",{className:"px-6 py-4",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-10 h-10 bg-green-100 dark:bg-green-900/30 rounded-full flex items-center justify-center",children:r.jsx(mr,{className:"w-5 h-5 text-green-600 dark:text-green-400"})}),r.jsxs("div",{children:[r.jsxs("p",{className:"font-medium text-gray-900 dark:text-white",children:[y.first_name," ",y.last_name]}),y.business_name&&r.jsx("p",{className:"text-sm text-primary-600 dark:text-primary-400 font-medium",children:y.business_name}),r.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:y.email})]})]})}),r.jsx("td",{className:"px-6 py-4",children:r.jsxs("div",{className:"space-y-1",children:[r.jsxs("p",{className:"text-sm text-gray-700 dark:text-gray-300 flex items-center gap-1",children:[r.jsx(On,{className:"w-3 h-3 text-gray-400"}),y.email]}),y.phone&&r.jsxs("p",{className:"text-sm text-gray-700 dark:text-gray-300 flex items-center gap-1",children:[r.jsx(Ss,{className:"w-3 h-3 text-gray-400"}),y.phone]})]})}),r.jsx("td",{className:"px-6 py-4",children:f(y.subscription_status,y.subscription_plan)}),r.jsx("td",{className:"px-6 py-4",children:r.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${y.status==="ACTIVE"?"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400":"bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-400"}`,children:y.status==="ACTIVE"?"Active":"Inactive"})}),r.jsx("td",{className:"px-6 py-4",children:r.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:new Date(y.created_at).toLocaleDateString()})}),r.jsx("td",{className:"px-6 py-4 text-right",children:r.jsxs("div",{className:"flex items-center justify-end gap-2",children:[r.jsx("button",{className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg",title:"View",children:r.jsx(ir,{className:"w-4 h-4 text-gray-500 dark:text-gray-400"})}),r.jsx("button",{className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg",title:"Edit",children:r.jsx(rd,{className:"w-4 h-4 text-gray-500 dark:text-gray-400"})}),r.jsx("button",{className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg",title:"Settings",children:r.jsx(bs,{className:"w-4 h-4 text-gray-500 dark:text-gray-400"})}),r.jsx("button",{onClick:()=>x(y.id,y.status==="ACTIVE"),className:`p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg ${y.status==="ACTIVE"?"text-red-500 dark:text-red-400":"text-green-500 dark:text-green-400"}`,title:y.status==="ACTIVE"?"Deactivate":"Activate",children:y.status==="ACTIVE"?r.jsx(_l,{className:"w-4 h-4"}):r.jsx(Ae,{className:"w-4 h-4"})})]})})]},y.id))})]}),!a&&h.length===0&&r.jsxs("div",{className:"p-8 text-center",children:[r.jsx(mr,{className:"w-12 h-12 text-gray-300 dark:text-gray-600 mx-auto mb-3"}),r.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"No merchants found"})]})]})]})})}const u1=[{id:1,title:"Account",description:"Login credentials"},{id:2,title:"Business Info",description:"Business details"},{id:3,title:"Categories",description:"What they sell"},{id:4,title:"Address",description:"Location"},{id:5,title:"Bank Account",description:"Payout info"}],U9e=e=>{if(!e)return"";let t=e.replace(/\D/g,"");return t.startsWith("232")&&(t=t.substring(3)),!t.startsWith("0")&&t.length===8&&(t="0"+t),t};function V9e(){var W;const e=Ut(),[t,s]=p.useState(1),[a,n]=p.useState(!1),[i,o]=p.useState(""),[l,c]=p.useState({email:"",phone:"",password:"",first_name:"",last_name:"",business_name:"",business_type:"",registration_number:"",tax_id:"",website:"",description:"",address_line1:"",address_line2:"",city:"",state:"",postal_code:"",country:"",bank_name:"",account_name:"",account_number:"",routing_number:""}),[d,h]=p.useState([]),[f,x]=p.useState(null),[y,v]=p.useState([]);p.useEffect(()=>{w()},[]);const w=async()=>{const{data:I,error:B}=await X.from("business_categories").select("id, name, parent_id, icon").eq("status","ACTIVE").order("sort_order",{ascending:!0});!B&&I&&h(I)},N=d.filter(I=>!I.parent_id),k=I=>d.filter(B=>B.parent_id===I),C=I=>{x(I===f?null:I)},E=I=>{if(y.some(O=>O.id===I.id)){const O=y.filter(F=>F.id!==I.id);O.length>0&&!O.some(F=>F.is_primary)&&(O[0].is_primary=!0),v(O)}else v([...y,{id:I.id,name:I.name,is_primary:y.length===0}])},_=I=>{v(y.map(B=>({...B,is_primary:B.id===I})))},T=I=>{const B=y.filter(O=>O.id!==I);B.length>0&&!B.some(O=>O.is_primary)&&(B[0].is_primary=!0),v(B)},A=(I,B)=>{c(O=>({...O,[I]:B}))},P=I=>{switch(o(""),I){case 1:return l.email.trim()?l.first_name.trim()?l.last_name.trim()?!l.password||l.password.length<6?(o("Password must be at least 6 characters"),!1):!0:(o("Last name is required"),!1):(o("First name is required"),!1):(o("Email is required"),!1);case 2:return l.business_name.trim()?!0:(o("Business name is required"),!1);case 3:return!0;case 4:return!0;case 5:return!0;default:return!0}},M=()=>{P(t)&&s(I=>Math.min(I+1,u1.length))},R=()=>{s(I=>Math.max(I-1,1))},$=async()=>{var I;if(P(t)){n(!0),o("");try{const B=U9e(l.phone),{data:O}=await X.from("users").select("id").eq("email",l.email).limit(1);if(O&&O.length>0){o("A user with this email already exists"),n(!1);return}if(B){const{data:K}=await X.from("users").select("id").eq("phone",B).limit(1);if(K&&K.length>0){o("A user with this phone number already exists"),n(!1);return}}const F=`usr_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,{data:q,error:H}=await X.from("users").insert({external_id:F,email:l.email,phone:B||null,password_hash:l.password,first_name:l.first_name,last_name:l.last_name,business_name:l.business_name||null,business_category_id:((I=y.find(K=>K.is_primary))==null?void 0:I.id)||null,status:"ACTIVE",kyc_status:"NOT_STARTED",email_verified:!1,roles:"merchant",kyc_tier:0}).select().single();if(H){o(H.message||"Failed to create merchant"),n(!1);return}if(y.length>0&&(q!=null&&q.id)){const K=y.map(V=>({user_id:q.id,business_category_id:V.id,is_primary:V.is_primary}));await X.from("merchant_business_categories").insert(K)}e("/admin/merchants")}catch(B){o(B.message||"Failed to create merchant")}finally{n(!1)}}};return r.jsx(fr,{children:r.jsxs("div",{className:"max-w-4xl mx-auto",children:[r.jsxs("div",{className:"mb-6",children:[r.jsxs("button",{onClick:()=>e("/admin/merchants"),className:"text-sm text-gray-500 hover:text-gray-700 flex items-center gap-1 mb-2",children:[r.jsx(Ar,{className:"w-4 h-4"}),"Back to Merchants"]}),r.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Create New Merchant"}),r.jsx("p",{className:"text-gray-500",children:"Set up a new merchant account with full business details"})]}),r.jsx("div",{className:"mb-8",children:r.jsx("div",{className:"flex items-center justify-between",children:u1.map((I,B)=>r.jsxs("div",{className:"flex items-center",children:[r.jsxs("div",{className:"flex flex-col items-center",children:[r.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center font-semibold text-sm ${t>I.id?"bg-green-600 text-white":t===I.id?"bg-primary-600 text-white":"bg-gray-200 text-gray-500"}`,children:t>I.id?r.jsx(Ae,{className:"w-5 h-5"}):I.id}),r.jsx("div",{className:"mt-2 text-center hidden sm:block",children:r.jsx("p",{className:`text-xs font-medium ${t>=I.id?"text-primary-600":"text-gray-400"}`,children:I.title})})]}),B<u1.length-1&&r.jsx("div",{className:`w-12 sm:w-20 h-1 mx-1 sm:mx-2 ${t>I.id?"bg-green-600":"bg-gray-200"}`})]},I.id))})}),i&&r.jsx("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-lg text-red-700 text-sm",children:i}),r.jsxs(se,{className:"p-6",children:[t===1&&r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[r.jsx(br,{className:"w-5 h-5 text-primary-600"}),r.jsx("h2",{className:"text-lg font-semibold",children:"Account Information"})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["First Name ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"text",value:l.first_name,onChange:I=>A("first_name",I.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",placeholder:"John"})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Last Name ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"text",value:l.last_name,onChange:I=>A("last_name",I.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",placeholder:"Doe"})]})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Email ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"email",value:l.email,onChange:I=>A("email",I.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",placeholder:"merchant@example.com"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone Number"}),r.jsx("input",{type:"tel",value:l.phone,onChange:I=>A("phone",I.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",placeholder:"077123456"})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Password ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"password",value:l.password,onChange:I=>A("password",I.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",placeholder:"Minimum 6 characters"})]})]}),t===2&&r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[r.jsx(Da,{className:"w-5 h-5 text-primary-600"}),r.jsx("h2",{className:"text-lg font-semibold",children:"Business Information"})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Business Name ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"text",value:l.business_name,onChange:I=>A("business_name",I.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",placeholder:"ABC Enterprises Ltd"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Business Type"}),r.jsxs("select",{value:l.business_type,onChange:I=>A("business_type",I.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",children:[r.jsx("option",{value:"",children:"Select business type"}),r.jsx("option",{value:"sole_proprietorship",children:"Sole Proprietorship"}),r.jsx("option",{value:"partnership",children:"Partnership"}),r.jsx("option",{value:"llc",children:"LLC"}),r.jsx("option",{value:"corporation",children:"Corporation"}),r.jsx("option",{value:"nonprofit",children:"Non-Profit"})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Registration Number"}),r.jsx("input",{type:"text",value:l.registration_number,onChange:I=>A("registration_number",I.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",placeholder:"Business registration"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tax ID"}),r.jsx("input",{type:"text",value:l.tax_id,onChange:I=>A("tax_id",I.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",placeholder:"Tax ID"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Website"}),r.jsx("input",{type:"url",value:l.website,onChange:I=>A("website",I.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",placeholder:"https://www.example.com"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),r.jsx("textarea",{value:l.description,onChange:I=>A("description",I.target.value),rows:3,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",placeholder:"Describe the business..."})]})]}),t===3&&r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[r.jsx(Gy,{className:"w-5 h-5 text-primary-600"}),r.jsx("h2",{className:"text-lg font-semibold",children:"Business Categories"})]}),r.jsx("p",{className:"text-sm text-gray-500 mb-4",children:"Select the categories that describe what this merchant sells."}),y.length>0&&r.jsxs("div",{className:"p-4 bg-green-50 border border-green-200 rounded-lg mb-4",children:[r.jsxs("p",{className:"text-sm font-medium text-green-700 mb-2",children:["Selected (",y.length,"):"]}),r.jsx("div",{className:"flex flex-wrap gap-2",children:y.map(I=>r.jsxs("span",{className:`inline-flex items-center gap-2 px-3 py-1.5 rounded-full text-sm ${I.is_primary?"bg-green-200 text-green-800":"bg-white text-gray-700 border border-gray-200"}`,children:[I.name,I.is_primary&&r.jsx("span",{className:"text-xs bg-green-300 px-1.5 py-0.5 rounded",children:"Primary"}),!I.is_primary&&r.jsx("button",{type:"button",onClick:()=>_(I.id),className:"text-xs text-green-600 hover:text-green-700 underline",children:"Set Primary"}),r.jsx("button",{type:"button",onClick:()=>T(I.id),className:"text-gray-400 hover:text-red-500",children:""})]},I.id))})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-0 border border-gray-200 rounded-lg overflow-hidden",children:[r.jsxs("div",{className:"border-r border-gray-200",children:[r.jsx("div",{className:"bg-gray-50 px-4 py-2 border-b border-gray-200",children:r.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Select a Category"})}),r.jsx("div",{className:"max-h-80 overflow-y-auto",children:N.map(I=>{const O=k(I.id).filter(q=>y.some(H=>H.id===q.id)).length,F=f===I.id;return r.jsxs("button",{type:"button",onClick:()=>C(I.id),className:`w-full flex items-center justify-between px-4 py-3 text-left hover:bg-gray-50 border-b border-gray-100 last:border-0 transition-colors ${F?"bg-primary-50 border-l-4 border-l-primary-500":""}`,children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(mr,{className:"w-5 h-5 text-gray-400"}),r.jsx("span",{className:`font-medium ${F?"text-primary-700":"text-gray-900"}`,children:I.name})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[O>0&&r.jsx("span",{className:"px-2 py-0.5 bg-green-100 text-green-700 text-xs rounded-full",children:O}),r.jsx(Qr,{className:`w-4 h-4 text-gray-400 ${F?"text-primary-500":""}`})]})]},I.id)})})]}),r.jsxs("div",{children:[r.jsx("div",{className:"bg-gray-50 px-4 py-2 border-b border-gray-200",children:r.jsx("p",{className:"text-sm font-medium text-gray-700",children:f?"Select Subcategories":"Select a category first"})}),r.jsx("div",{className:"max-h-80 overflow-y-auto",children:f?k(f).length>0?r.jsx("div",{className:"p-2 space-y-1",children:k(f).map(I=>{const B=y.some(O=>O.id===I.id);return r.jsxs("label",{className:`flex items-center gap-3 p-3 rounded-lg cursor-pointer transition-colors ${B?"bg-green-50 border border-green-200":"hover:bg-gray-50 border border-transparent"}`,children:[r.jsx("input",{type:"checkbox",checked:B,onChange:()=>E(I),className:"w-5 h-5 text-green-600 border-gray-300 rounded focus:ring-green-500"}),r.jsx("span",{className:B?"text-green-700 font-medium":"text-gray-700",children:I.name})]},I.id)})}):r.jsxs("div",{className:"p-8 text-center text-gray-500",children:[r.jsx("p",{children:"No subcategories"}),r.jsxs("button",{type:"button",onClick:()=>{const I=d.find(B=>B.id===f);I&&E(I)},className:"mt-3 px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 text-sm",children:['Select "',(W=N.find(I=>I.id===f))==null?void 0:W.name,'"']})]}):r.jsxs("div",{className:"p-8 text-center text-gray-400",children:[r.jsx(mr,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),r.jsx("p",{children:"Select a category from the left"})]})})]})]})]}),t===4&&r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[r.jsx(Vi,{className:"w-5 h-5 text-primary-600"}),r.jsx("h2",{className:"text-lg font-semibold",children:"Business Address"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Address Line 1"}),r.jsx("input",{type:"text",value:l.address_line1,onChange:I=>A("address_line1",I.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",placeholder:"Street address"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Address Line 2"}),r.jsx("input",{type:"text",value:l.address_line2,onChange:I=>A("address_line2",I.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",placeholder:"Apt, Suite, Building (optional)"})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"City"}),r.jsx("input",{type:"text",value:l.city,onChange:I=>A("city",I.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",placeholder:"City"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"State/Province"}),r.jsx("input",{type:"text",value:l.state,onChange:I=>A("state",I.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",placeholder:"State"})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Postal Code"}),r.jsx("input",{type:"text",value:l.postal_code,onChange:I=>A("postal_code",I.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",placeholder:"Postal code"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Country"}),r.jsx("input",{type:"text",value:l.country,onChange:I=>A("country",I.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",placeholder:"Country"})]})]})]}),t===5&&r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[r.jsx(lt,{className:"w-5 h-5 text-primary-600"}),r.jsx("h2",{className:"text-lg font-semibold",children:"Payout Account"})]}),r.jsx("p",{className:"text-sm text-gray-500 mb-4",children:"Bank account for receiving payouts. This can be added later."}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Bank Name"}),r.jsx("input",{type:"text",value:l.bank_name,onChange:I=>A("bank_name",I.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",placeholder:"Bank name"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Account Holder Name"}),r.jsx("input",{type:"text",value:l.account_name,onChange:I=>A("account_name",I.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",placeholder:"Name on account"})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Account Number"}),r.jsx("input",{type:"text",value:l.account_number,onChange:I=>A("account_number",I.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",placeholder:"Account number"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Routing / Sort Code"}),r.jsx("input",{type:"text",value:l.routing_number,onChange:I=>A("routing_number",I.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",placeholder:"Routing number"})]})]}),r.jsxs("div",{className:"mt-6 p-4 bg-gray-50 rounded-lg",children:[r.jsx("h3",{className:"font-medium text-gray-900 mb-3",children:"Summary"}),r.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-gray-500",children:"Name"}),r.jsxs("p",{className:"font-medium",children:[l.first_name," ",l.last_name]})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-gray-500",children:"Email"}),r.jsx("p",{className:"font-medium",children:l.email||"-"})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-gray-500",children:"Business"}),r.jsx("p",{className:"font-medium",children:l.business_name||"-"})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-gray-500",children:"Categories"}),r.jsxs("p",{className:"font-medium",children:[y.length," selected"]})]})]})]})]}),r.jsxs("div",{className:"flex items-center justify-between mt-8 pt-6 border-t border-gray-200",children:[t>1?r.jsxs("button",{type:"button",onClick:R,className:"flex items-center gap-2 px-4 py-2 text-gray-600 hover:text-gray-900",children:[r.jsx(Ar,{className:"w-4 h-4"}),"Back"]}):r.jsx("button",{type:"button",onClick:()=>e("/admin/merchants"),className:"flex items-center gap-2 px-4 py-2 text-gray-600 hover:text-gray-900",children:"Cancel"}),t<u1.length?r.jsxs("button",{type:"button",onClick:M,className:"flex items-center gap-2 px-6 py-3 bg-primary-600 text-white rounded-lg hover:bg-primary-700",children:["Continue",r.jsx(os,{className:"w-4 h-4"})]}):r.jsx("button",{type:"button",onClick:$,disabled:a,className:"flex items-center gap-2 px-6 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50",children:a?r.jsxs(r.Fragment,{children:[r.jsx(Ke,{className:"w-4 h-4 animate-spin"}),"Creating..."]}):r.jsxs(r.Fragment,{children:[r.jsx(Ae,{className:"w-4 h-4"}),"Create Merchant"]})})]})]})]})})}function W9e(){const[e,t]=p.useState([]),[s,a]=p.useState(!0),[n,i]=p.useState(""),[o,l]=p.useState("all");p.useEffect(()=>{c()},[]);const c=async()=>{a(!0);try{const{data:x,error:y}=await X.from("users").select("*").ilike("roles","%agent%").order("created_at",{ascending:!1});if(y){console.error("Error fetching agents:",y),t([]);return}t(x||[])}catch(x){console.error("Error fetching agents:",x),t([])}finally{a(!1)}},d=e.filter(x=>{const y=x.email.toLowerCase().includes(n.toLowerCase())||`${x.first_name} ${x.last_name}`.toLowerCase().includes(n.toLowerCase()),v=x.status==="ACTIVE",w=o==="all"||o==="active"&&v||o==="inactive"&&!v||o==="online"&&x.online_status==="online";return y&&w}),h=(x,y)=>{if(!(y==="ACTIVE"))return r.jsx("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300",children:"Inactive"});switch(x){case"online":return r.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400",children:[r.jsx("span",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"})," Online"]});case"busy":return r.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium bg-yellow-100 dark:bg-yellow-900/30 text-yellow-700 dark:text-yellow-400",children:[r.jsx("span",{className:"w-2 h-2 bg-yellow-500 rounded-full"})," Busy"]});default:return r.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium bg-green-100 dark:bg-green-900/30 text-green-600 dark:text-green-400",children:[r.jsx("span",{className:"w-2 h-2 bg-green-400 rounded-full"})," Active"]})}},f=async(x,y)=>{try{const v=y?"INACTIVE":"ACTIVE",{error:w}=await X.from("users").update({status:v}).eq("id",x);if(w){console.error("Error updating agent status:",w);return}c()}catch(v){console.error("Error updating agent status:",v)}};return r.jsx(fr,{children:r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Agent Management"}),r.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Manage support agent accounts and performance"})]}),r.jsxs("button",{className:"px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 flex items-center gap-2",children:[r.jsx(sr,{className:"w-4 h-4"}),"Add Agent"]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[r.jsx(Be,{className:"p-4",delay:0,children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"p-2 bg-orange-100 dark:bg-orange-900/30 rounded-lg",children:r.jsx(Uo,{className:"w-5 h-5 text-orange-600 dark:text-orange-400"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Total Agents"}),r.jsx("p",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:e.length})]})]})}),r.jsx(Be,{className:"p-4",delay:.1,children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"p-2 bg-green-100 dark:bg-green-900/30 rounded-lg",children:r.jsx(Ae,{className:"w-5 h-5 text-green-600 dark:text-green-400"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Online"}),r.jsx("p",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:e.filter(x=>x.status==="online").length})]})]})}),r.jsx(Be,{className:"p-4",delay:.2,children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-900/30 rounded-lg",children:r.jsx(H5,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Tickets Resolved"}),r.jsx("p",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:e.reduce((x,y)=>x+(y.tickets_resolved||0),0)})]})]})}),r.jsx(Be,{className:"p-4",delay:.3,children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"p-2 bg-yellow-100 dark:bg-yellow-900/30 rounded-lg",children:r.jsx(q5,{className:"w-5 h-5 text-yellow-600 dark:text-yellow-400"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Avg Rating"}),r.jsx("p",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:e.length>0?(e.reduce((x,y)=>x+(y.avg_rating||0),0)/e.length).toFixed(1):"0.0"})]})]})})]}),r.jsx(Be,{className:"p-4",delay:.4,children:r.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[r.jsxs("div",{className:"flex-1 relative",children:[r.jsx(Nr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),r.jsx("input",{type:"text",placeholder:"Search agents by name or email...",value:n,onChange:x=>i(x.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]}),r.jsxs("select",{value:o,onChange:x=>l(x.target.value),className:"px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[r.jsx("option",{value:"all",children:"All Status"}),r.jsx("option",{value:"active",children:"Active"}),r.jsx("option",{value:"inactive",children:"Inactive"}),r.jsx("option",{value:"online",children:"Online"})]}),r.jsxs("button",{className:"px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 flex items-center gap-2 text-gray-700 dark:text-gray-300",children:[r.jsx(gs,{className:"w-4 h-4"}),"Export"]})]})}),r.jsxs(Be,{className:"overflow-hidden",delay:.5,children:[s?r.jsxs("div",{className:"p-8 text-center",children:[r.jsx("div",{className:"w-8 h-8 border-4 border-primary-600 border-t-transparent rounded-full animate-spin mx-auto"}),r.jsx("p",{className:"mt-2 text-gray-500 dark:text-gray-400",children:"Loading agents..."})]}):r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700/50",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Agent"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Contact"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Status"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Performance"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Joined"}),r.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Actions"})]})}),r.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:d.map(x=>{var y;return r.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700/50",children:[r.jsx("td",{className:"px-6 py-4",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-10 h-10 bg-orange-100 dark:bg-orange-900/30 rounded-full flex items-center justify-center",children:r.jsx(Uo,{className:"w-5 h-5 text-orange-600 dark:text-orange-400"})}),r.jsxs("div",{children:[r.jsxs("p",{className:"font-medium text-gray-900 dark:text-white",children:[x.first_name," ",x.last_name]}),r.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:["ID: ",x.id.slice(0,8),"..."]})]})]})}),r.jsx("td",{className:"px-6 py-4",children:r.jsxs("div",{className:"space-y-1",children:[r.jsxs("p",{className:"text-sm flex items-center gap-1 text-gray-700 dark:text-gray-300",children:[r.jsx(On,{className:"w-3 h-3 text-gray-400"}),x.email]}),x.phone&&r.jsxs("p",{className:"text-sm flex items-center gap-1 text-gray-700 dark:text-gray-300",children:[r.jsx(Ss,{className:"w-3 h-3 text-gray-400"}),x.phone]})]})}),r.jsx("td",{className:"px-6 py-4",children:h(x.online_status,x.status)}),r.jsx("td",{className:"px-6 py-4",children:r.jsxs("div",{className:"space-y-1",children:[r.jsxs("p",{className:"text-sm flex items-center gap-1 text-gray-700 dark:text-gray-300",children:[r.jsx(H5,{className:"w-3 h-3 text-gray-400"}),x.tickets_resolved||0," resolved"]}),r.jsxs("p",{className:"text-sm flex items-center gap-1 text-gray-700 dark:text-gray-300",children:[r.jsx(q5,{className:"w-3 h-3 text-yellow-500"}),((y=x.avg_rating)==null?void 0:y.toFixed(1))||"0.0"," rating"]})]})}),r.jsx("td",{className:"px-6 py-4",children:r.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:new Date(x.created_at).toLocaleDateString()})}),r.jsx("td",{className:"px-6 py-4 text-right",children:r.jsxs("div",{className:"flex items-center justify-end gap-2",children:[r.jsx("button",{className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg",title:"View",children:r.jsx(ir,{className:"w-4 h-4 text-gray-500 dark:text-gray-400"})}),r.jsx("button",{className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg",title:"Edit",children:r.jsx(rd,{className:"w-4 h-4 text-gray-500 dark:text-gray-400"})}),r.jsx("button",{className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg",title:"Chat",children:r.jsx(Tu,{className:"w-4 h-4 text-gray-500 dark:text-gray-400"})}),r.jsx("button",{onClick:()=>f(x.id,x.status==="ACTIVE"),className:`p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg ${x.status==="ACTIVE"?"text-red-500":"text-green-500"}`,title:x.status==="ACTIVE"?"Deactivate":"Activate",children:x.status==="ACTIVE"?r.jsx(_l,{className:"w-4 h-4"}):r.jsx(Ae,{className:"w-4 h-4"})})]})})]},x.id)})})]}),!s&&d.length===0&&r.jsxs("div",{className:"p-8 text-center",children:[r.jsx(Uo,{className:"w-12 h-12 text-gray-300 dark:text-gray-600 mx-auto mb-3"}),r.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"No agents found"})]})]})]})})}function z9e(){const[e,t]=p.useState("p2p"),[s,a]=p.useState(!1),[n,i]=p.useState(!1),[o,l]=p.useState(!0),[c,d]=p.useState(null);p.useEffect(()=>{cr.getDefaultCurrency().then(d)},[]);const h=(c==null?void 0:c.symbol)||"Le",f=R=>`${h} ${R.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}`,[x,y]=p.useState([{id:"p2p-standard",name:"Standard User P2P Fee",description:"Fee for regular user transfers",type:"percentage",value:1,minFee:.1,maxFee:10,category:"p2p",userType:"standard",isActive:!0},{id:"p2p-agent",name:"Agent P2P Fee",description:"Fee for agent transfers",type:"percentage",value:.5,minFee:.1,maxFee:5,category:"p2p",userType:"agent",isActive:!0},{id:"p2p-agent-plus",name:"Agent+ P2P Fee",description:"Fee for Agent+ transfers (unlimited volume)",type:"percentage",value:.2,minFee:.05,maxFee:5,category:"p2p",userType:"agent_plus",isActive:!0},{id:"p2p-merchant",name:"Merchant P2P Fee",description:"Fee for merchant transfers",type:"percentage",value:.5,minFee:.1,maxFee:25,category:"p2p",userType:"merchant",isActive:!0},{id:"transfer-internal",name:"Internal Transfer Fee",description:"Fee for transfers between users",type:"percentage",value:.5,minFee:0,maxFee:100,category:"transfer",userType:"all_users",isActive:!0},{id:"transfer-external",name:"External Transfer Fee",description:"Fee for transfers to external banks",type:"fixed",value:2.5,category:"transfer",userType:"all_users",isActive:!0},{id:"transfer-intl",name:"International Transfer Fee",description:"Fee for international transfers",type:"percentage",value:2.5,minFee:5,maxFee:500,category:"transfer",userType:"all_users",isActive:!0},{id:"card-virtual",name:"Virtual Card Creation",description:"One-time fee for virtual card",type:"fixed",value:1,category:"card",userType:"all_users",isActive:!0},{id:"card-physical",name:"Physical Card Creation",description:"One-time fee for physical card",type:"fixed",value:10,category:"card",userType:"all_users",isActive:!0},{id:"card-txn",name:"Card Transaction Fee",description:"Per transaction fee",type:"percentage",value:1.5,minFee:.1,maxFee:50,category:"card",userType:"all_users",isActive:!0},{id:"card-monthly",name:"Card Monthly Maintenance",description:"Monthly card maintenance fee",type:"fixed",value:1,category:"card",userType:"all_users",isActive:!0},{id:"merchant-processing",name:"Payment Processing Fee",description:"Fee for processing payments",type:"percentage",value:2.9,minFee:.3,category:"merchant",userType:"merchant",isActive:!0},{id:"merchant-payout",name:"Payout Fee",description:"Fee for merchant payouts",type:"percentage",value:.25,minFee:.25,maxFee:25,category:"merchant",userType:"merchant",isActive:!0},{id:"merchant-chargeback",name:"Chargeback Fee",description:"Fee per chargeback",type:"fixed",value:15,category:"merchant",userType:"merchant",isActive:!0}]),[v,w]=p.useState([{id:"limit-standard",userType:"standard",dailyLimit:5e3,monthlyLimit:25e3,perTransactionLimit:2500,minAmount:1},{id:"limit-agent",userType:"agent",dailyLimit:5e4,monthlyLimit:25e4,perTransactionLimit:25e3,minAmount:.5},{id:"limit-agent-plus",userType:"agent_plus",dailyLimit:1e6,monthlyLimit:1e7,perTransactionLimit:5e5,minAmount:.01},{id:"limit-merchant",userType:"merchant",dailyLimit:1e5,monthlyLimit:1e6,perTransactionLimit:5e4,minAmount:.01}]);p.useEffect(()=>{N()},[]);const N=async()=>{l(!0);try{l(!1)}catch(R){console.error("Error fetching fees:",R),l(!1)}},k=x.filter(R=>R.category===e),C=async()=>{try{i(!0),a(!1),setTimeout(()=>i(!1),3e3)}catch(R){console.error("Error saving fees:",R)}},E=(R,$,W)=>{y(x.map(I=>I.id===R?{...I,[$]:W}:I))},_=(R,$,W)=>{w(v.map(I=>I.id===R?{...I,[$]:W}:I))},T=R=>{y(x.map($=>$.id===R?{...$,isActive:!$.isActive}:$))},A=R=>{switch(R){case"standard":return r.jsx(br,{className:"w-4 h-4"});case"agent":return r.jsx(nn,{className:"w-4 h-4"});case"agent_plus":return r.jsx(Ho,{className:"w-4 h-4"});case"merchant":return r.jsx(Da,{className:"w-4 h-4"});default:return r.jsx(nn,{className:"w-4 h-4"})}},P=R=>{switch(R){case"standard":return"Standard User";case"agent":return"Agent";case"agent_plus":return"Agent+";case"merchant":return"Merchant";case"all_users":return"All Users";default:return R}},M=R=>{switch(R){case"standard":return"bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-400";case"agent":return"bg-purple-100 dark:bg-purple-900/30 text-purple-700 dark:text-purple-400";case"agent_plus":return"bg-orange-100 dark:bg-orange-900/30 text-orange-700 dark:text-orange-400";case"merchant":return"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400";case"all_users":return"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300";default:return"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300"}};return r.jsx(fr,{children:r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Fees & Pricing"}),r.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Configure transaction fees, limits, and pricing for all user types"})]}),r.jsxs("div",{className:"flex items-center gap-3",children:[n&&r.jsxs("span",{className:"flex items-center gap-2 text-green-600 dark:text-green-400 text-sm",children:[r.jsx(Ae,{className:"w-4 h-4"}),"Changes saved"]}),r.jsxs("button",{onClick:N,className:"px-4 py-2 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 flex items-center gap-2 text-gray-700 dark:text-gray-300",children:[r.jsx(Ot,{className:`w-4 h-4 ${o?"animate-spin":""}`}),"Refresh"]}),r.jsxs("button",{onClick:()=>a(!s),className:`px-4 py-2 rounded-lg flex items-center gap-2 ${s?"bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300":"bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700"}`,children:[r.jsx(rd,{className:"w-4 h-4"}),s?"Cancel":"Edit Fees"]}),s&&r.jsxs("button",{onClick:C,className:"px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 flex items-center gap-2",children:[r.jsx(Pn,{className:"w-4 h-4"}),"Save Changes"]})]})]}),r.jsx(se,{className:"p-4 bg-blue-50 dark:bg-blue-900/20 border-blue-200 dark:border-blue-800",children:r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx(dt,{className:"w-5 h-5 text-blue-600 dark:text-blue-400 flex-shrink-0 mt-0.5"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-blue-800 dark:text-blue-300",children:"Fee Configuration"}),r.jsx("p",{className:"text-sm text-blue-700 dark:text-blue-400 mt-1",children:"Fees are applied based on user type. Agent+ users get the lowest fees with unlimited transaction limits. Changes affect all new transactions immediately."})]})]})}),r.jsx(se,{className:"p-1",children:r.jsx("div",{className:"flex gap-1",children:[{id:"p2p",label:"P2P Fees",icon:Pl},{id:"transfer",label:"Transfer Fees",icon:Pl},{id:"card",label:"Card Fees",icon:lt},{id:"merchant",label:"Merchant Fees",icon:Cr},{id:"limits",label:"Transfer Limits",icon:nn}].map(R=>r.jsxs("button",{onClick:()=>t(R.id),className:`flex-1 px-4 py-3 text-sm font-medium rounded-lg transition-colors flex items-center justify-center gap-2 ${e===R.id?"bg-primary-600 text-white":"text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700"}`,children:[r.jsx(R.icon,{className:"w-4 h-4"}),R.label]},R.id))})}),e==="limits"?r.jsxs("div",{className:"space-y-4",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Transfer Limits by User Type"}),v.map(R=>r.jsxs(se,{className:"p-6",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[r.jsx("div",{className:`p-2 rounded-lg ${M(R.userType)}`,children:A(R.userType)}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white",children:P(R.userType)}),r.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Transaction limits for ",R.userType," users"]})]})]}),r.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm text-gray-500 dark:text-gray-400 mb-1",children:"Daily Limit"}),s?r.jsx("input",{type:"number",value:R.dailyLimit,onChange:$=>_(R.id,"dailyLimit",parseFloat($.target.value)),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white"}):r.jsxs("p",{className:"text-xl font-bold text-gray-900 dark:text-white",children:[h,R.dailyLimit.toLocaleString()]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm text-gray-500 dark:text-gray-400 mb-1",children:"Monthly Limit"}),s?r.jsx("input",{type:"number",value:R.monthlyLimit,onChange:$=>_(R.id,"monthlyLimit",parseFloat($.target.value)),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white"}):r.jsxs("p",{className:"text-xl font-bold text-gray-900 dark:text-white",children:[h,R.monthlyLimit.toLocaleString()]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm text-gray-500 dark:text-gray-400 mb-1",children:"Per Transaction"}),s?r.jsx("input",{type:"number",value:R.perTransactionLimit,onChange:$=>_(R.id,"perTransactionLimit",parseFloat($.target.value)),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white"}):r.jsxs("p",{className:"text-xl font-bold text-gray-900 dark:text-white",children:[h,R.perTransactionLimit.toLocaleString()]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm text-gray-500 dark:text-gray-400 mb-1",children:"Minimum Amount"}),s?r.jsx("input",{type:"number",step:"0.01",value:R.minAmount,onChange:$=>_(R.id,"minAmount",parseFloat($.target.value)),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white"}):r.jsx("p",{className:"text-xl font-bold text-gray-900 dark:text-white",children:f(R.minAmount)})]})]})]},R.id))]}):r.jsx("div",{className:"space-y-4",children:k.map(R=>r.jsx(se,{className:`p-6 ${R.isActive?"":"opacity-60"}`,children:r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsxs("div",{className:"flex items-start gap-4",children:[r.jsx("div",{className:`p-3 rounded-lg ${R.isActive?"bg-primary-100 dark:bg-primary-900/30":"bg-gray-100 dark:bg-gray-700"}`,children:R.type==="percentage"?r.jsx(If,{className:`w-5 h-5 ${R.isActive?"text-primary-600 dark:text-primary-400":"text-gray-400"}`}):r.jsx(Cr,{className:`w-5 h-5 ${R.isActive?"text-primary-600 dark:text-primary-400":"text-gray-400"}`})}),r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[r.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:R.name}),r.jsxs("span",{className:`px-2 py-0.5 text-xs rounded-full flex items-center gap-1 ${M(R.userType)}`,children:[A(R.userType),P(R.userType)]})]}),r.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:R.description}),(R.minFee!==void 0||R.maxFee!==void 0)&&r.jsxs("p",{className:"text-xs text-gray-400 dark:text-gray-500 mt-2",children:[R.minFee!==void 0&&`Min Fee: ${f(R.minFee)}`,R.minFee!==void 0&&R.maxFee!==void 0&&" | ",R.maxFee!==void 0&&`Max Fee: ${f(R.maxFee)}`]})]})]}),r.jsxs("div",{className:"flex items-center gap-4",children:[s?r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("input",{type:"number",step:"0.01",value:R.value,onChange:$=>E(R.id,"value",parseFloat($.target.value)),className:"w-24 px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg text-right focus:ring-2 focus:ring-primary-500 focus:border-primary-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white"}),r.jsx("span",{className:"text-gray-500 dark:text-gray-400 text-sm",children:R.type==="percentage"?"%":"USD"})]}):r.jsxs("div",{className:"text-right",children:[r.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:R.type==="percentage"?`${R.value}%`:f(R.value)}),r.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 capitalize",children:R.type})]}),r.jsx("button",{onClick:()=>T(R.id),className:`p-2 rounded-lg transition-colors ${R.isActive?"bg-green-100 dark:bg-green-900/30 text-green-600 dark:text-green-400 hover:bg-green-200 dark:hover:bg-green-900/50":"bg-gray-100 dark:bg-gray-700 text-gray-400 hover:bg-gray-200 dark:hover:bg-gray-600"}`,title:R.isActive?"Disable":"Enable",children:R.isActive?r.jsx(Ae,{className:"w-5 h-5"}):r.jsx(Ot,{className:"w-5 h-5"})})]})]})},R.id))}),s&&e!=="limits"&&r.jsxs("button",{className:"w-full p-4 border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg text-gray-500 dark:text-gray-400 hover:border-primary-500 hover:text-primary-600 dark:hover:text-primary-400 transition-colors flex items-center justify-center gap-2",children:[r.jsx(sr,{className:"w-5 h-5"}),"Add New Fee"]}),r.jsxs(se,{className:"p-6 bg-gray-50 dark:bg-gray-700/50",children:[r.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white mb-4",children:"Fee Summary by User Type"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[r.jsxs("div",{className:"p-4 bg-white dark:bg-gray-800 rounded-lg",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx(br,{className:"w-4 h-4 text-blue-600 dark:text-blue-400"}),r.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:"Standard"})]}),r.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"1.0%"}),r.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"P2P Transfer Fee"})]}),r.jsxs("div",{className:"p-4 bg-white dark:bg-gray-800 rounded-lg",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx(nn,{className:"w-4 h-4 text-purple-600 dark:text-purple-400"}),r.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:"Agent"})]}),r.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"0.5%"}),r.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"P2P Transfer Fee"})]}),r.jsxs("div",{className:"p-4 bg-white dark:bg-gray-800 rounded-lg border-2 border-orange-200 dark:border-orange-800",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx(Ho,{className:"w-4 h-4 text-orange-600 dark:text-orange-400"}),r.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:"Agent+"})]}),r.jsx("p",{className:"text-2xl font-bold text-orange-600 dark:text-orange-400",children:"0.2%"}),r.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"P2P Transfer Fee"})]}),r.jsxs("div",{className:"p-4 bg-white dark:bg-gray-800 rounded-lg",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx(Da,{className:"w-4 h-4 text-green-600 dark:text-green-400"}),r.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:"Merchant"})]}),r.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"0.5%"}),r.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"P2P Transfer Fee"})]})]})]})]})})}const q9e=[{code:"SLE",name:"Sierra Leone Leone",symbol:"Le",isDefault:!0,isActive:!0},{code:"USD",name:"US Dollar",symbol:"$",isDefault:!1,isActive:!0},{code:"EUR",name:"Euro",symbol:"",isDefault:!1,isActive:!1},{code:"GBP",name:"British Pound",symbol:"",isDefault:!1,isActive:!1},{code:"NGN",name:"Nigerian Naira",symbol:"",isDefault:!1,isActive:!1},{code:"XOF",name:"West African CFA Franc",symbol:"CFA",isDefault:!1,isActive:!1},{code:"GHS",name:"Ghanaian Cedi",symbol:"GH",isDefault:!1,isActive:!1}],SF=[{value:"P2P_TRANSFER",label:"P2P Transfer"},{value:"BANK_TRANSFER",label:"Bank Transfer"},{value:"CARD_PAYMENT",label:"Card Payment"},{value:"MERCHANT_PAYMENT",label:"Merchant Payment"},{value:"WITHDRAWAL",label:"Withdrawal"},{value:"DEPOSIT",label:"Deposit"},{value:"INTERNATIONAL",label:"International Transfer"}];function H9e(){const[e,t]=p.useState(q9e),[s,a]=p.useState([]),[n,i]=p.useState(!0),[o,l]=p.useState(!1),[c,d]=p.useState(null),[h,f]=p.useState(null),[x,y]=p.useState(!1),[v,w]=p.useState(!1),[N,k]=p.useState(null),[C,E]=p.useState({transactionType:"P2P_TRANSFER",percentage:1,minimumFee:1,maximumFee:null,flatFee:0,currency:"SLE",isActive:!0}),[_,T]=p.useState({code:"",name:"",symbol:"",isDefault:!1,isActive:!0});p.useEffect(()=>{A()},[]);const A=async()=>{i(!0);try{const{data:V,error:z}=await X.from("fee_settings").select("*").order("transaction_type");V&&V.length>0?a(V.map(he=>({id:he.id,transactionType:he.transaction_type,percentage:he.percentage,minimumFee:he.minimum_fee,maximumFee:he.maximum_fee,flatFee:he.flat_fee,currency:he.currency,isActive:he.is_active}))):a([]);const{data:G,error:te}=await X.from("currencies").select("*");G&&G.length>0&&t(G.map(he=>({code:he.code,name:he.name,symbol:he.symbol,isDefault:he.is_default,isActive:he.is_active})))}catch(V){console.error("Failed to fetch settings:",V),a([])}finally{i(!1)}},P=async()=>{l(!0),f(null);try{const V={transaction_type:C.transactionType,percentage:C.percentage,minimum_fee:C.minimumFee,maximum_fee:C.maximumFee,flat_fee:C.flatFee,currency:C.currency,is_active:C.isActive};if(N){const{error:z}=await X.from("fee_settings").update(V).eq("id",N.id);if(z)throw z;a(G=>G.map(te=>te.id===N.id?{...te,...C}:te))}else{const{data:z,error:G}=await X.from("fee_settings").insert(V).select().single();if(G){const te={id:`local_${Date.now()}`,transactionType:C.transactionType||"TRANSFER",percentage:C.percentage||0,minimumFee:C.minimumFee||0,maximumFee:C.maximumFee??null,flatFee:C.flatFee||0,currency:C.currency||"USD",isActive:C.isActive??!0};a(he=>[...he,te])}else z&&a(te=>[...te,{id:z.id,transactionType:z.transaction_type,percentage:z.percentage,minimumFee:z.minimum_fee,maximumFee:z.maximum_fee,flatFee:z.flat_fee,currency:z.currency,isActive:z.is_active}])}d("Fee configuration saved successfully"),y(!1),k(null),W(),setTimeout(()=>d(null),3e3)}catch(V){f(V.message||"Failed to save fee configuration")}finally{l(!1)}},M=async V=>{if(confirm("Are you sure you want to delete this fee configuration?"))try{await X.from("fee_settings").delete().eq("id",V),a(z=>z.filter(G=>G.id!==V)),d("Fee configuration deleted"),setTimeout(()=>d(null),3e3)}catch(z){console.error("Delete error:",z)}},R=async V=>{var z;t(G=>G.map(te=>te.code===V?{...te,isActive:!te.isActive}:te));try{await X.from("currencies").update({is_active:!((z=e.find(G=>G.code===V))!=null&&z.isActive)}).eq("code",V)}catch{}},$=async V=>{t(z=>z.map(G=>({...G,isDefault:G.code===V})));try{await X.from("currencies").update({is_default:!1}).neq("code",V),await X.from("currencies").update({is_default:!0}).eq("code",V)}catch{}d(`${V} set as default currency`),setTimeout(()=>d(null),3e3)},W=()=>{E({transactionType:"P2P_TRANSFER",percentage:1,minimumFee:1,maximumFee:null,flatFee:0,currency:"SLE",isActive:!0})},I=()=>{T({code:"",name:"",symbol:"",isDefault:!1,isActive:!0})},B=async()=>{if(!_.code||!_.name||!_.symbol){f("Please fill in all currency fields");return}if(e.some(V=>{var z;return V.code===((z=_.code)==null?void 0:z.toUpperCase())})){f("Currency with this code already exists");return}l(!0),f(null);try{const V={code:_.code.toUpperCase(),name:_.name,symbol:_.symbol,isDefault:_.isDefault||!1,isActive:_.isActive??!0};try{await X.from("currencies").insert({code:V.code,name:V.name,symbol:V.symbol,is_default:V.isDefault,is_active:V.isActive})}catch{}V.isDefault&&t(z=>z.map(G=>({...G,isDefault:!1}))),t(z=>[...z,V]),d(`Currency ${V.code} added successfully`),w(!1),I(),setTimeout(()=>d(null),3e3)}catch(V){f(V.message||"Failed to add currency")}finally{l(!1)}},O=async V=>{const z=e.find(G=>G.code===V);if(z!=null&&z.isDefault){f("Cannot delete the default currency"),setTimeout(()=>f(null),3e3);return}if(confirm(`Are you sure you want to delete ${V}?`)){try{await X.from("currencies").delete().eq("code",V)}catch{}t(G=>G.filter(te=>te.code!==V)),d(`Currency ${V} deleted`),setTimeout(()=>d(null),3e3)}},F=V=>{k(V),E({transactionType:V.transactionType,percentage:V.percentage,minimumFee:V.minimumFee,maximumFee:V.maximumFee,flatFee:V.flatFee,currency:V.currency,isActive:V.isActive}),y(!0)},q=V=>{var z;return((z=SF.find(G=>G.value===V))==null?void 0:z.label)||V},H=V=>{var z;return((z=e.find(G=>G.code===V))==null?void 0:z.symbol)||V},K=(V,z)=>`${H(z)}${V.toFixed(2)}`;return n?r.jsx(fr,{children:r.jsx("div",{className:"flex items-center justify-center h-64",children:r.jsx(Ke,{className:"w-8 h-8 text-primary-600 dark:text-primary-400 animate-spin"})})}):r.jsx(fr,{children:r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Fee Settings"}),r.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Manage transaction fees and currencies"})]}),r.jsxs("button",{onClick:A,className:"px-4 py-2 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 flex items-center gap-2",children:[r.jsx(Ot,{className:"w-4 h-4"}),"Refresh"]})]}),c&&r.jsxs("div",{className:"p-4 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg flex items-center gap-2 text-green-700 dark:text-green-400",children:[r.jsx(Ae,{className:"w-5 h-5"}),c]}),h&&r.jsxs("div",{className:"p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg flex items-center gap-2 text-red-700 dark:text-red-400",children:[r.jsx(Wt,{className:"w-5 h-5"}),h]}),r.jsxs(se,{className:"p-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-900/30 rounded-lg",children:r.jsx(Oi,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"})}),r.jsxs("div",{children:[r.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Supported Currencies"}),r.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Enable currencies for transactions"})]})]}),r.jsxs("button",{onClick:()=>{I(),w(!0)},className:"px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 flex items-center gap-2",children:[r.jsx(sr,{className:"w-4 h-4"}),"Add Currency"]})]}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:e.map(V=>r.jsxs("div",{className:`p-4 rounded-lg border-2 ${V.isActive?"border-green-200 dark:border-green-800 bg-green-50 dark:bg-green-900/20":"border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-700/50"}`,children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-2xl",children:V.symbol}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:V.code}),r.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:V.name})]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[V.isDefault&&r.jsx("span",{className:"px-2 py-1 bg-primary-100 dark:bg-primary-900/30 text-primary-700 dark:text-primary-400 text-xs font-medium rounded-full",children:"Default"}),!V.isDefault&&r.jsx("button",{onClick:()=>O(V.code),className:"p-1 hover:bg-red-100 dark:hover:bg-red-900/30 rounded",title:"Delete currency",children:r.jsx(Js,{className:"w-4 h-4 text-red-500 dark:text-red-400"})})]})]}),r.jsxs("div",{className:"flex gap-2 mt-3",children:[r.jsx("button",{onClick:()=>R(V.code),className:`flex-1 px-3 py-2 rounded-lg text-sm font-medium ${V.isActive?"bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-400 hover:bg-red-200 dark:hover:bg-red-900/50":"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400 hover:bg-green-200 dark:hover:bg-green-900/50"}`,children:V.isActive?"Disable":"Enable"}),V.isActive&&!V.isDefault&&r.jsx("button",{onClick:()=>$(V.code),className:"flex-1 px-3 py-2 bg-primary-100 dark:bg-primary-900/30 text-primary-700 dark:text-primary-400 rounded-lg text-sm font-medium hover:bg-primary-200 dark:hover:bg-primary-900/50",children:"Set Default"})]})]},V.code))})]}),r.jsxs(se,{className:"p-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"p-2 bg-green-100 dark:bg-green-900/30 rounded-lg",children:r.jsx(If,{className:"w-5 h-5 text-green-600 dark:text-green-400"})}),r.jsxs("div",{children:[r.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Transaction Fees"}),r.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Configure fees for different transaction types"})]})]}),r.jsxs("button",{onClick:()=>{k(null),W(),y(!0)},className:"px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 flex items-center gap-2",children:[r.jsx(sr,{className:"w-4 h-4"}),"Add Fee"]})]}),r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700/50",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Transaction Type"}),r.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Percentage"}),r.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Flat Fee"}),r.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Min/Max"}),r.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Currency"}),r.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Status"}),r.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Actions"})]})}),r.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:s.map(V=>r.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700/50",children:[r.jsx("td",{className:"px-4 py-4",children:r.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:q(V.transactionType)})}),r.jsx("td",{className:"px-4 py-4",children:r.jsxs("span",{className:"text-gray-700 dark:text-gray-300",children:[V.percentage,"%"]})}),r.jsx("td",{className:"px-4 py-4",children:r.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:V.flatFee>0?K(V.flatFee,V.currency):"-"})}),r.jsx("td",{className:"px-4 py-4",children:r.jsxs("span",{className:"text-gray-700 dark:text-gray-300",children:[K(V.minimumFee,V.currency)," - ",V.maximumFee?K(V.maximumFee,V.currency):"No max"]})}),r.jsx("td",{className:"px-4 py-4",children:r.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:V.currency})}),r.jsx("td",{className:"px-4 py-4",children:r.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${V.isActive?"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400":"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300"}`,children:V.isActive?"Active":"Inactive"})}),r.jsx("td",{className:"px-4 py-4 text-right",children:r.jsxs("div",{className:"flex items-center justify-end gap-2",children:[r.jsx("button",{onClick:()=>F(V),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg",title:"Edit",children:r.jsx(rd,{className:"w-4 h-4 text-gray-500 dark:text-gray-400"})}),r.jsx("button",{onClick:()=>M(V.id),className:"p-2 hover:bg-red-100 dark:hover:bg-red-900/30 rounded-lg",title:"Delete",children:r.jsx(Js,{className:"w-4 h-4 text-red-500 dark:text-red-400"})})]})})]},V.id))})]})}),s.length===0&&r.jsxs("div",{className:"text-center py-8",children:[r.jsx(bs,{className:"w-12 h-12 text-gray-300 dark:text-gray-600 mx-auto mb-3"}),r.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"No fee configurations found"}),r.jsx("button",{onClick:()=>y(!0),className:"mt-4 px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700",children:"Add Fee Configuration"})]})]}),r.jsx(se,{className:"p-6 bg-blue-50 dark:bg-blue-900/20 border-blue-200 dark:border-blue-800",children:r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx(dt,{className:"w-5 h-5 text-blue-600 dark:text-blue-400 mt-0.5"}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-medium text-blue-900 dark:text-blue-300",children:"Fee Calculation Formula"}),r.jsx("p",{className:"text-sm text-blue-700 dark:text-blue-400 mt-1",children:r.jsx("code",{className:"bg-blue-100 dark:bg-blue-800/50 px-2 py-1 rounded",children:"fee = max(min(amount  percentage/100, maximumFee), minimumFee) + flatFee"})}),(()=>{const V=e.find(G=>G.isDefault),z=(V==null?void 0:V.symbol)||"Le";return r.jsxs("p",{className:"text-sm text-blue-600 dark:text-blue-400 mt-2",children:["Example: For a ",z,"100 transfer with 1% fee, ",z,"0.10 minimum, and ",z,"50 maximum:",r.jsx("br",{}),"fee = max(min(",z,"100  0.01, ",z,"50), ",z,"0.10) = max(min(",z,"1.00, ",z,"50), ",z,"0.10) = ",z,"1.00"]})})()]})]})}),x&&r.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:r.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-xl w-full max-w-md mx-4",children:[r.jsx("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:r.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:N?"Edit Fee Configuration":"Add Fee Configuration"})}),r.jsxs("div",{className:"p-6 space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Transaction Type"}),r.jsx("select",{value:C.transactionType,onChange:V=>E({...C,transactionType:V.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white rounded-lg focus:ring-2 focus:ring-primary-500",children:SF.map(V=>r.jsx("option",{value:V.value,children:V.label},V.value))})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Percentage (%)"}),r.jsx("input",{type:"number",step:"0.01",min:"0",value:C.percentage,onChange:V=>E({...C,percentage:parseFloat(V.target.value)||0}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white rounded-lg focus:ring-2 focus:ring-primary-500"})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:["Flat Fee (",H(C.currency||"SLE"),")"]}),r.jsx("input",{type:"number",step:"0.01",min:"0",value:C.flatFee,onChange:V=>E({...C,flatFee:parseFloat(V.target.value)||0}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white rounded-lg focus:ring-2 focus:ring-primary-500"})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:["Minimum Fee (",H(C.currency||"SLE"),")"]}),r.jsx("input",{type:"number",step:"0.01",min:"0",value:C.minimumFee,onChange:V=>E({...C,minimumFee:parseFloat(V.target.value)||0}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white rounded-lg focus:ring-2 focus:ring-primary-500"})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:["Maximum Fee (",H(C.currency||"SLE"),")"]}),r.jsx("input",{type:"number",step:"0.01",min:"0",value:C.maximumFee||"",onChange:V=>E({...C,maximumFee:V.target.value?parseFloat(V.target.value):null}),placeholder:"No limit",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-400 dark:placeholder-gray-500 rounded-lg focus:ring-2 focus:ring-primary-500"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Currency"}),r.jsx("select",{value:C.currency,onChange:V=>E({...C,currency:V.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white rounded-lg focus:ring-2 focus:ring-primary-500",children:e.filter(V=>V.isActive).map(V=>r.jsxs("option",{value:V.code,children:[V.code," - ",V.name]},V.code))})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("input",{type:"checkbox",id:"isActive",checked:C.isActive,onChange:V=>E({...C,isActive:V.target.checked}),className:"w-4 h-4 text-primary-600 border-gray-300 dark:border-gray-600 rounded focus:ring-primary-500"}),r.jsx("label",{htmlFor:"isActive",className:"text-sm text-gray-700 dark:text-gray-300",children:"Active"})]})]}),r.jsxs("div",{className:"p-6 border-t border-gray-200 dark:border-gray-700 flex gap-3",children:[r.jsx("button",{onClick:()=>{y(!1),k(null),W()},className:"flex-1 px-4 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700",children:"Cancel"}),r.jsx("button",{onClick:P,disabled:o,className:"flex-1 px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 disabled:opacity-50 flex items-center justify-center gap-2",children:o?r.jsxs(r.Fragment,{children:[r.jsx(Ke,{className:"w-4 h-4 animate-spin"}),"Saving..."]}):r.jsxs(r.Fragment,{children:[r.jsx(Pn,{className:"w-4 h-4"}),"Save"]})})]})]})}),v&&r.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:r.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-xl w-full max-w-md mx-4",children:[r.jsx("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:r.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"Add New Currency"})}),r.jsxs("div",{className:"p-6 space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Currency Code (e.g., SLE, USD)"}),r.jsx("input",{type:"text",maxLength:3,value:_.code,onChange:V=>T({..._,code:V.target.value.toUpperCase()}),placeholder:"SLE",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-400 dark:placeholder-gray-500 rounded-lg focus:ring-2 focus:ring-primary-500 uppercase"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Currency Name"}),r.jsx("input",{type:"text",value:_.name,onChange:V=>T({..._,name:V.target.value}),placeholder:"Sierra Leone Leone",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-400 dark:placeholder-gray-500 rounded-lg focus:ring-2 focus:ring-primary-500"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Symbol"}),r.jsx("input",{type:"text",maxLength:5,value:_.symbol,onChange:V=>T({..._,symbol:V.target.value}),placeholder:"Le",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-400 dark:placeholder-gray-500 rounded-lg focus:ring-2 focus:ring-primary-500"})]}),r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("input",{type:"checkbox",id:"currencyActive",checked:_.isActive,onChange:V=>T({..._,isActive:V.target.checked}),className:"w-4 h-4 text-primary-600 border-gray-300 dark:border-gray-600 rounded focus:ring-primary-500"}),r.jsx("label",{htmlFor:"currencyActive",className:"text-sm text-gray-700 dark:text-gray-300",children:"Active"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("input",{type:"checkbox",id:"currencyDefault",checked:_.isDefault,onChange:V=>T({..._,isDefault:V.target.checked}),className:"w-4 h-4 text-primary-600 border-gray-300 dark:border-gray-600 rounded focus:ring-primary-500"}),r.jsx("label",{htmlFor:"currencyDefault",className:"text-sm text-gray-700 dark:text-gray-300",children:"Set as Default"})]})]})]}),r.jsxs("div",{className:"p-6 border-t border-gray-200 dark:border-gray-700 flex gap-3",children:[r.jsx("button",{onClick:()=>{w(!1),I()},className:"flex-1 px-4 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700",children:"Cancel"}),r.jsx("button",{onClick:B,disabled:o||!_.code||!_.name||!_.symbol,className:"flex-1 px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 disabled:opacity-50 flex items-center justify-center gap-2",children:o?r.jsxs(r.Fragment,{children:[r.jsx(Ke,{className:"w-4 h-4 animate-spin"}),"Saving..."]}):r.jsxs(r.Fragment,{children:[r.jsx(Pn,{className:"w-4 h-4"}),"Add Currency"]})})]})]})})]})})}const K9e="https://akiecgwcxadcpqlvntmf.supabase.co",G9e="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImFraWVjZ3djeGFkY3BxbHZudG1mIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjQyODMzMzIsImV4cCI6MjA3OTg1OTMzMn0.L2ePGMJRjBqHS-M1d9mxys7I9bZv93YYr9dzQzCQINE",h1=p6(K9e,G9e),m1="00000000-0000-0000-0000-000000000001",Y9e={accessToken:"",spaceId:"",webhookSecret:"",sourceAccountId:"",payoutAccountId:"",isEnabled:!1,backendUrl:"",frontendUrl:""},X9e={mobileMoneyEnabled:!0,bankTransferEnabled:!0,minWithdrawalAmount:1e3,maxWithdrawalAmount:5e7,dailyWithdrawalLimit:1e8,withdrawalFeePercent:1.5,withdrawalFeeFlat:100,requirePin:!0,autoApproveUnder:1e6},Q9e={checkoutSessionEnabled:!0,paymentCodeEnabled:!0,mobileMoneyEnabled:!0,minDepositAmount:100,maxDepositAmount:1e8};function Z9e(){const[e,t]=p.useState(Y9e),[s,a]=p.useState(X9e),[n,i]=p.useState(Q9e),[o,l]=p.useState(!0),[c,d]=p.useState(!1),[h,f]=p.useState(!1),[x,y]=p.useState(null),[v,w]=p.useState(null),[N,k]=p.useState(!1),[C,E]=p.useState("monime"),[_,T]=p.useState(1e3);p.useEffect(()=>{A()},[]);const A=async()=>{l(!0);try{const{data:I,error:B}=await h1.from("payment_settings").select("*").eq("id",m1).single();if(B){if(B.code==="PGRST116"){const{data:O,error:F}=await h1.from("payment_settings").insert({id:m1,monime_enabled:!1,withdrawal_mobile_money_enabled:!0,withdrawal_bank_transfer_enabled:!0,min_withdrawal_amount:1e3,max_withdrawal_amount:5e7,daily_withdrawal_limit:1e8,withdrawal_fee_percent:1.5,withdrawal_fee_flat:100,withdrawal_require_pin:!0,withdrawal_auto_approve_under:1e6,deposit_checkout_enabled:!0,deposit_payment_code_enabled:!0,deposit_mobile_money_enabled:!0,min_deposit_amount:100,max_deposit_amount:1e8}).select().single();if(F)throw new Error("Failed to initialize settings: "+F.message);O&&P(O);return}throw new Error(B.message)}I&&P(I)}catch(I){console.error("Failed to fetch settings:",I),w(I.message||"Failed to load settings from database.")}finally{l(!1)}},P=I=>{t({accessToken:I.monime_access_token||"",spaceId:I.monime_space_id||"",webhookSecret:I.monime_webhook_secret||"",sourceAccountId:I.monime_source_account_id||"",payoutAccountId:I.monime_payout_account_id||"",isEnabled:I.monime_enabled||!1,backendUrl:I.backend_url||"",frontendUrl:I.frontend_url||""}),a({mobileMoneyEnabled:I.withdrawal_mobile_money_enabled??!0,bankTransferEnabled:I.withdrawal_bank_transfer_enabled??!0,minWithdrawalAmount:Number(I.min_withdrawal_amount)||1e3,maxWithdrawalAmount:Number(I.max_withdrawal_amount)||5e7,dailyWithdrawalLimit:Number(I.daily_withdrawal_limit)||1e8,withdrawalFeePercent:Number(I.withdrawal_fee_percent)||1.5,withdrawalFeeFlat:Number(I.withdrawal_fee_flat)||100,requirePin:I.withdrawal_require_pin??!0,autoApproveUnder:Number(I.withdrawal_auto_approve_under)||1e6}),i({checkoutSessionEnabled:I.deposit_checkout_enabled??!0,paymentCodeEnabled:I.deposit_payment_code_enabled??!0,mobileMoneyEnabled:I.deposit_mobile_money_enabled??!0,minDepositAmount:Number(I.min_deposit_amount)||100,maxDepositAmount:Number(I.max_deposit_amount)||1e8})},M=async()=>{d(!0),w(null);try{const I={monime_access_token:e.accessToken,monime_space_id:e.spaceId,monime_webhook_secret:e.webhookSecret,monime_source_account_id:e.sourceAccountId,monime_payout_account_id:e.payoutAccountId,monime_enabled:e.isEnabled,backend_url:e.backendUrl,frontend_url:e.frontendUrl,withdrawal_mobile_money_enabled:s.mobileMoneyEnabled,withdrawal_bank_transfer_enabled:s.bankTransferEnabled,min_withdrawal_amount:s.minWithdrawalAmount,max_withdrawal_amount:s.maxWithdrawalAmount,daily_withdrawal_limit:s.dailyWithdrawalLimit,withdrawal_fee_percent:s.withdrawalFeePercent,withdrawal_fee_flat:s.withdrawalFeeFlat,withdrawal_require_pin:s.requirePin,withdrawal_auto_approve_under:s.autoApproveUnder,deposit_checkout_enabled:n.checkoutSessionEnabled,deposit_payment_code_enabled:n.paymentCodeEnabled,deposit_mobile_money_enabled:n.mobileMoneyEnabled,min_deposit_amount:n.minDepositAmount,max_deposit_amount:n.maxDepositAmount,updated_at:new Date().toISOString()},{error:B}=await h1.from("payment_settings").update(I).eq("id",m1);if(B)if(B.code==="PGRST116"){const{error:O}=await h1.from("payment_settings").insert({id:m1,...I});if(O)throw new Error(O.message)}else throw new Error(B.message);y("Payment settings saved successfully"),setTimeout(()=>y(null),3e3)}catch(I){w(I.message||"Failed to save settings")}finally{d(!1)}},R=async()=>{var I,B,O;f(!0),w(null);try{if(!e.accessToken)throw new Error("Access Token is required. Please enter your Monime API key.");if(!e.spaceId)throw new Error("Space ID is required. Please enter your Monime Space ID.");if(!e.frontendUrl)throw new Error("Frontend URL is required. Please enter your app URL (e.g., https://my.peeap.com).");if(_<=0)throw new Error("Test amount must be greater than 0.");const F=e.frontendUrl.replace(/\/$/,""),q=`${F}/api/deposit/success`,H=`${F}/api/deposit/cancel`;console.log("[Monime Test] Starting checkout session creation..."),console.log("[Monime Test] Config:",{spaceId:e.spaceId,tokenPrefix:e.accessToken.substring(0,10)+"...",amount:_,successUrl:q,cancelUrl:H});const K=await fetch("/api/test-monime",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({accessToken:e.accessToken,spaceId:e.spaceId,amount:_,currency:"SLE",successUrl:q,cancelUrl:H})});console.log("[Monime Test] Response status:",K.status,K.statusText);const V=await K.json();if(console.log("[Monime Test] Response data:",JSON.stringify(V,null,2)),!K.ok){const z=((I=V==null?void 0:V.error)==null?void 0:I.message)||(V==null?void 0:V.message)||(V==null?void 0:V.error)||`HTTP ${K.status}: ${K.statusText}`,G=((B=V==null?void 0:V.error)==null?void 0:B.details)||(V==null?void 0:V.details)||"",te=G?`${z} - ${JSON.stringify(G)}`:z;throw console.error("[Monime Test] API Error:",te),new Error(te)}if(!V.success){const z=((O=V==null?void 0:V.error)==null?void 0:O.message)||(V==null?void 0:V.message)||"Unknown error from Monime";throw console.error("[Monime Test] Success=false:",z),new Error(z)}if(V!=null&&V.url)console.log("[Monime Test] Success! Redirect URL:",V.url),window.open(V.url,"_blank"),y(`Checkout session created! Order: ${V.orderNumber||"N/A"}`),setTimeout(()=>y(null),5e3);else throw console.error("[Monime Test] No redirect URL in response"),new Error("No checkout URL returned from Monime. Response: "+JSON.stringify(V))}catch(F){console.error("[Monime Test] Error:",F);const q=F.message||"Unknown error";w(`Monime Error: ${q}`)}finally{f(!1)}},$=I=>I.toLocaleString("en-US",{minimumFractionDigits:0,maximumFractionDigits:0}),W=I=>{const B=parseFloat(I.replace(/,/g,""));return isNaN(B)?0:Math.round(B)};return o?r.jsx(fr,{children:r.jsx("div",{className:"flex items-center justify-center h-64",children:r.jsx(Ke,{className:"w-8 h-8 text-primary-600 dark:text-primary-400 animate-spin"})})}):r.jsx(fr,{children:r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Payment Settings"}),r.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Configure payment gateway, withdrawals, and deposits"})]}),r.jsxs("div",{className:"flex gap-3",children:[r.jsxs("button",{onClick:A,className:"px-4 py-2 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 flex items-center gap-2",children:[r.jsx(Ot,{className:"w-4 h-4"}),"Refresh"]}),r.jsxs("button",{onClick:M,disabled:c,className:"px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 flex items-center gap-2 disabled:opacity-50",children:[c?r.jsx(Ke,{className:"w-4 h-4 animate-spin"}):r.jsx(Pn,{className:"w-4 h-4"}),"Save All Settings"]})]})]}),x&&r.jsxs("div",{className:"p-4 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg flex items-center gap-2 text-green-700 dark:text-green-400",children:[r.jsx(Ae,{className:"w-5 h-5"}),x]}),v&&r.jsxs("div",{className:"p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg flex items-center gap-2 text-red-700 dark:text-red-400",children:[r.jsx(Wt,{className:"w-5 h-5"}),v]}),r.jsx("div",{className:"border-b border-gray-200 dark:border-gray-700",children:r.jsx("nav",{className:"-mb-px flex gap-6",children:[{id:"monime",label:"Monime Gateway",icon:lt},{id:"withdrawal",label:"Withdrawal Settings",icon:U5},{id:"deposit",label:"Deposit Settings",icon:fO}].map(I=>r.jsxs("button",{onClick:()=>E(I.id),className:`flex items-center gap-2 py-4 px-1 border-b-2 font-medium text-sm transition-colors ${C===I.id?"border-primary-500 text-primary-600 dark:text-primary-400":"border-transparent text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300 hover:border-gray-300 dark:hover:border-gray-600"}`,children:[r.jsx(I.icon,{className:"w-4 h-4"}),I.label]},I.id))})}),C==="monime"&&r.jsxs("div",{className:"space-y-6",children:[r.jsx(se,{className:"p-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:`p-2 rounded-lg ${e.isEnabled?"bg-green-100 dark:bg-green-900/30":"bg-gray-100 dark:bg-gray-700"}`,children:r.jsx(Oi,{className:`w-5 h-5 ${e.isEnabled?"text-green-600 dark:text-green-400":"text-gray-500 dark:text-gray-400"}`})}),r.jsxs("div",{children:[r.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Monime Payment Gateway"}),r.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Enable Monime for deposits and withdrawals"})]}),e.accessToken&&r.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${e.accessToken.startsWith("mon_test_")?"bg-yellow-100 dark:bg-yellow-900/30 text-yellow-700 dark:text-yellow-400":"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400"}`,children:e.accessToken.startsWith("mon_test_")?"Test Mode":"Live Mode"})]}),r.jsx("button",{onClick:()=>t(I=>({...I,isEnabled:!I.isEnabled})),className:`p-2 rounded-lg transition-colors ${e.isEnabled?"bg-green-100 dark:bg-green-900/30 text-green-600 dark:text-green-400":"bg-gray-100 dark:bg-gray-700 text-gray-400 dark:text-gray-500"}`,children:e.isEnabled?r.jsx(Ys,{className:"w-8 h-8"}):r.jsx(Gs,{className:"w-8 h-8"})})]})}),r.jsxs(se,{className:"p-6",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[r.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-900/30 rounded-lg",children:r.jsx(mc,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"})}),r.jsxs("div",{children:[r.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"API Credentials"}),r.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Your Monime API keys from the dashboard"})]}),r.jsx("button",{onClick:()=>k(!N),className:"ml-auto p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg",title:N?"Hide secrets":"Show secrets",children:N?r.jsx(Dn,{className:"w-4 h-4 text-gray-500 dark:text-gray-400"}):r.jsx(ir,{className:"w-4 h-4 text-gray-500 dark:text-gray-400"})})]}),r.jsxs("div",{className:"grid gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Access Token"}),r.jsx("input",{type:N?"text":"password",value:e.accessToken,onChange:I=>t(B=>({...B,accessToken:I.target.value})),placeholder:"mon_test_xxxxx (test) or mon_xxxxx (live)",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white rounded-lg focus:ring-2 focus:ring-primary-500"}),r.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:["Token prefix determines environment: ",r.jsx("code",{className:"bg-gray-100 dark:bg-gray-700 px-1 rounded",children:"mon_test_"})," for testing, ",r.jsx("code",{className:"bg-gray-100 dark:bg-gray-700 px-1 rounded",children:"mon_"})," for live"]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Space ID"}),r.jsx("input",{type:"text",value:e.spaceId,onChange:I=>t(B=>({...B,spaceId:I.target.value})),placeholder:"spc_xxxxx",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white rounded-lg focus:ring-2 focus:ring-primary-500"}),r.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Your Monime workspace identifier"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Webhook Secret"}),r.jsx("input",{type:N?"text":"password",value:e.webhookSecret,onChange:I=>t(B=>({...B,webhookSecret:I.target.value})),placeholder:"whsec_xxxxx",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white rounded-lg focus:ring-2 focus:ring-primary-500"}),r.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Used to verify webhook signatures"})]}),r.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-gray-700/50 rounded-lg border border-gray-200 dark:border-gray-700",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Webhook URL"}),r.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mb-2",children:"Use this URL when configuring webhooks in your Monime dashboard"}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs("code",{className:"flex-1 px-3 py-2 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-lg text-sm font-mono text-gray-800 dark:text-gray-200 overflow-x-auto",children:[window.location.origin,"/api/webhooks/monime"]}),r.jsx("button",{type:"button",onClick:()=>{navigator.clipboard.writeText(`${window.location.origin}/api/webhooks/monime`),y("Webhook URL copied to clipboard!"),setTimeout(()=>y(null),2e3)},className:"px-3 py-2 bg-gray-200 dark:bg-gray-600 hover:bg-gray-300 dark:hover:bg-gray-500 rounded-lg text-sm font-medium text-gray-700 dark:text-gray-300 transition-colors",children:"Copy"})]}),r.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-2",children:["For production, replace with your actual domain: ",r.jsx("code",{className:"bg-gray-100 dark:bg-gray-700 px-1 rounded",children:"https://yourdomain.com/api/webhooks/monime"})]})]})]})]}),r.jsxs(se,{className:"p-6",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[r.jsx("div",{className:"p-2 bg-purple-100 dark:bg-purple-900/30 rounded-lg",children:r.jsx(Rt,{className:"w-5 h-5 text-purple-600 dark:text-purple-400"})}),r.jsxs("div",{children:[r.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Financial Accounts"}),r.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Monime financial account IDs for payouts"})]})]}),r.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Source Account ID"}),r.jsx("input",{type:"text",value:e.sourceAccountId,onChange:I=>t(B=>({...B,sourceAccountId:I.target.value})),placeholder:"fa_xxxxx",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white rounded-lg focus:ring-2 focus:ring-primary-500"}),r.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Account to debit for payouts"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Payout Account ID"}),r.jsx("input",{type:"text",value:e.payoutAccountId,onChange:I=>t(B=>({...B,payoutAccountId:I.target.value})),placeholder:"fa_xxxxx",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white rounded-lg focus:ring-2 focus:ring-primary-500"}),r.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Account for receiving payouts"})]})]})]}),r.jsxs(se,{className:"p-6 border-orange-200 dark:border-orange-800 bg-orange-50 dark:bg-orange-900/20",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[r.jsx("div",{className:"p-2 bg-orange-100 dark:bg-orange-900/30 rounded-lg",children:r.jsx(roe,{className:"w-5 h-5 text-orange-600 dark:text-orange-400"})}),r.jsxs("div",{children:[r.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"URL Configuration"}),r.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Required for Monime checkout redirects"})]}),r.jsx("span",{className:"ml-auto px-2 py-1 text-xs font-medium rounded-full bg-orange-200 dark:bg-orange-900/50 text-orange-700 dark:text-orange-400",children:"Required"})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsx("div",{className:"p-3 bg-white dark:bg-gray-800 rounded-lg border border-orange-200 dark:border-orange-800",children:r.jsxs("p",{className:"text-sm text-orange-800 dark:text-orange-300",children:[r.jsx("strong",{children:"Important:"})," These URLs are required for Monime to redirect users after payment. They must be publicly accessible URLs (not localhost)."]})}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Backend API URL"}),r.jsx("input",{type:"text",value:e.backendUrl,onChange:I=>t(B=>({...B,backendUrl:I.target.value})),placeholder:"https://api.yourdomain.com",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white rounded-lg focus:ring-2 focus:ring-primary-500"}),r.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"The URL where your backend API is hosted (e.g., https://api.yourdomain.com)"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Frontend App URL"}),r.jsx("input",{type:"text",value:e.frontendUrl,onChange:I=>t(B=>({...B,frontendUrl:I.target.value})),placeholder:"https://app.yourdomain.com",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white rounded-lg focus:ring-2 focus:ring-primary-500"}),r.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"The URL where your frontend app is hosted (e.g., https://app.yourdomain.com)"})]}),(!e.backendUrl||!e.frontendUrl)&&r.jsxs("div",{className:"p-3 bg-red-50 dark:bg-red-900/20 rounded-lg border border-red-200 dark:border-red-800 flex items-start gap-2",children:[r.jsx(dt,{className:"w-4 h-4 text-red-600 dark:text-red-400 mt-0.5 flex-shrink-0"}),r.jsx("p",{className:"text-sm text-red-700 dark:text-red-400",children:'Both URLs must be configured for Monime payments to work. Without these, checkout sessions will fail with "successUrl must be a URL address" error.'})]})]})]}),r.jsxs(se,{className:"p-6 bg-blue-50 dark:bg-blue-900/20 border-blue-200 dark:border-blue-800",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[r.jsx(E6,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-medium text-blue-900 dark:text-blue-300",children:"Test Payment"}),r.jsx("p",{className:"text-sm text-blue-700 dark:text-blue-400",children:"Create a test checkout session to verify your Monime integration"})]})]}),r.jsxs("div",{className:"flex items-end gap-4",children:[r.jsxs("div",{className:"flex-1",children:[r.jsx("label",{className:"block text-sm font-medium text-blue-900 dark:text-blue-300 mb-1",children:"Test Amount (SLE)"}),r.jsxs("div",{className:"relative",children:[r.jsx("span",{className:"absolute left-3 top-2 text-gray-500 dark:text-gray-400",children:"Le"}),r.jsx("input",{type:"text",value:$(_),onChange:I=>T(W(I.target.value)),placeholder:"10.00",className:"w-full pl-10 pr-3 py-2 border border-blue-300 dark:border-blue-700 rounded-lg focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]}),r.jsx("p",{className:"text-xs text-blue-600 dark:text-blue-400 mt-1",children:"Enter any amount for testing"})]}),r.jsxs("button",{onClick:R,disabled:h||!e.accessToken||!e.spaceId||_<=0,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed h-[42px]",children:[h?r.jsx(Ke,{className:"w-4 h-4 animate-spin"}):r.jsx(lt,{className:"w-4 h-4"}),h?"Creating...":"Open Checkout"]})]}),(!e.accessToken||!e.spaceId)&&r.jsxs("p",{className:"text-xs text-red-600 dark:text-red-400 mt-3 flex items-center gap-1",children:[r.jsx(dt,{className:"w-3 h-3"}),"Please enter your Access Token and Space ID above to test payments"]})]})]}),C==="withdrawal"&&r.jsxs("div",{className:"space-y-6",children:[r.jsxs(se,{className:"p-6",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[r.jsx("div",{className:"p-2 bg-orange-100 dark:bg-orange-900/30 rounded-lg",children:r.jsx(U5,{className:"w-5 h-5 text-orange-600 dark:text-orange-400"})}),r.jsxs("div",{children:[r.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Withdrawal Methods"}),r.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Enable or disable withdrawal options"})]})]}),r.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[r.jsxs("div",{className:`p-4 rounded-lg border-2 ${s.mobileMoneyEnabled?"border-green-200 dark:border-green-800 bg-green-50 dark:bg-green-900/20":"border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-700/50"}`,children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Ws,{className:"w-5 h-5 text-orange-600 dark:text-orange-400"}),r.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:"Mobile Money"})]}),r.jsx("button",{onClick:()=>a(I=>({...I,mobileMoneyEnabled:!I.mobileMoneyEnabled})),className:`p-1 rounded ${s.mobileMoneyEnabled?"bg-green-200 dark:bg-green-900/50":"bg-gray-200 dark:bg-gray-600"}`,children:s.mobileMoneyEnabled?r.jsx(Ys,{className:"w-6 h-6 text-green-600 dark:text-green-400"}):r.jsx(Gs,{className:"w-6 h-6 text-gray-400 dark:text-gray-500"})})]}),r.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Allow withdrawals to mobile money wallets"})]}),r.jsxs("div",{className:`p-4 rounded-lg border-2 ${s.bankTransferEnabled?"border-green-200 dark:border-green-800 bg-green-50 dark:bg-green-900/20":"border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-700/50"}`,children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Da,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"}),r.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:"Bank Transfer"})]}),r.jsx("button",{onClick:()=>a(I=>({...I,bankTransferEnabled:!I.bankTransferEnabled})),className:`p-1 rounded ${s.bankTransferEnabled?"bg-green-200 dark:bg-green-900/50":"bg-gray-200 dark:bg-gray-600"}`,children:s.bankTransferEnabled?r.jsx(Ys,{className:"w-6 h-6 text-green-600 dark:text-green-400"}):r.jsx(Gs,{className:"w-6 h-6 text-gray-400 dark:text-gray-500"})})]}),r.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Allow withdrawals to bank accounts"})]})]})]}),r.jsxs(se,{className:"p-6",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[r.jsx("div",{className:"p-2 bg-red-100 dark:bg-red-900/30 rounded-lg",children:r.jsx(dt,{className:"w-5 h-5 text-red-600 dark:text-red-400"})}),r.jsxs("div",{children:[r.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Withdrawal Limits"}),r.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Set minimum, maximum, and daily limits (in SLE)"})]})]}),r.jsxs("div",{className:"grid md:grid-cols-3 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Minimum Amount"}),r.jsxs("div",{className:"relative",children:[r.jsx("span",{className:"absolute left-3 top-2 text-gray-500 dark:text-gray-400",children:"Le"}),r.jsx("input",{type:"text",value:$(s.minWithdrawalAmount),onChange:I=>a(B=>({...B,minWithdrawalAmount:W(I.target.value)})),className:"w-full pl-10 pr-3 py-2 border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white rounded-lg focus:ring-2 focus:ring-primary-500"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Maximum Amount"}),r.jsxs("div",{className:"relative",children:[r.jsx("span",{className:"absolute left-3 top-2 text-gray-500 dark:text-gray-400",children:"Le"}),r.jsx("input",{type:"text",value:$(s.maxWithdrawalAmount),onChange:I=>a(B=>({...B,maxWithdrawalAmount:W(I.target.value)})),className:"w-full pl-10 pr-3 py-2 border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white rounded-lg focus:ring-2 focus:ring-primary-500"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Daily Limit"}),r.jsxs("div",{className:"relative",children:[r.jsx("span",{className:"absolute left-3 top-2 text-gray-500 dark:text-gray-400",children:"Le"}),r.jsx("input",{type:"text",value:$(s.dailyWithdrawalLimit),onChange:I=>a(B=>({...B,dailyWithdrawalLimit:W(I.target.value)})),className:"w-full pl-10 pr-3 py-2 border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white rounded-lg focus:ring-2 focus:ring-primary-500"})]})]})]})]}),r.jsxs(se,{className:"p-6",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[r.jsx("div",{className:"p-2 bg-green-100 dark:bg-green-900/30 rounded-lg",children:r.jsx(lt,{className:"w-5 h-5 text-green-600 dark:text-green-400"})}),r.jsxs("div",{children:[r.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Withdrawal Fees"}),r.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Configure fees for withdrawals"})]})]}),r.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Fee Percentage (%)"}),r.jsx("input",{type:"number",step:"0.1",min:"0",value:s.withdrawalFeePercent,onChange:I=>a(B=>({...B,withdrawalFeePercent:parseFloat(I.target.value)||0})),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white rounded-lg focus:ring-2 focus:ring-primary-500"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Flat Fee (Le)"}),r.jsxs("div",{className:"relative",children:[r.jsx("span",{className:"absolute left-3 top-2 text-gray-500 dark:text-gray-400",children:"Le"}),r.jsx("input",{type:"text",value:$(s.withdrawalFeeFlat),onChange:I=>a(B=>({...B,withdrawalFeeFlat:W(I.target.value)})),className:"w-full pl-10 pr-3 py-2 border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white rounded-lg focus:ring-2 focus:ring-primary-500"})]})]})]}),r.jsxs("div",{className:"mt-4 p-3 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:[r.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:[r.jsx("strong",{children:"Fee Formula:"})," ",s.withdrawalFeePercent,"% + Le ",$(s.withdrawalFeeFlat)]}),r.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:["Example: For Le 10,000 withdrawal = Le ",$(1e4*s.withdrawalFeePercent/100+s.withdrawalFeeFlat)," fee"]})]})]}),r.jsxs(se,{className:"p-6",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[r.jsx("div",{className:"p-2 bg-purple-100 dark:bg-purple-900/30 rounded-lg",children:r.jsx(bs,{className:"w-5 h-5 text-purple-600 dark:text-purple-400"})}),r.jsxs("div",{children:[r.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Security & Approval"}),r.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Configure withdrawal security settings"})]})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:[r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:"Require PIN for withdrawals"}),r.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Users must enter their PIN to confirm withdrawals"})]}),r.jsx("button",{onClick:()=>a(I=>({...I,requirePin:!I.requirePin})),className:`p-1 rounded ${s.requirePin?"bg-green-200 dark:bg-green-900/50":"bg-gray-200 dark:bg-gray-600"}`,children:s.requirePin?r.jsx(Ys,{className:"w-6 h-6 text-green-600 dark:text-green-400"}):r.jsx(Gs,{className:"w-6 h-6 text-gray-400 dark:text-gray-500"})})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Auto-Approve Under (Le)"}),r.jsxs("div",{className:"relative",children:[r.jsx("span",{className:"absolute left-3 top-2 text-gray-500 dark:text-gray-400",children:"Le"}),r.jsx("input",{type:"text",value:$(s.autoApproveUnder),onChange:I=>a(B=>({...B,autoApproveUnder:W(I.target.value)})),className:"w-full pl-10 pr-3 py-2 border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white rounded-lg focus:ring-2 focus:ring-primary-500"})]}),r.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Withdrawals under this amount are automatically approved"})]})]})]})]}),C==="deposit"&&r.jsxs("div",{className:"space-y-6",children:[r.jsxs(se,{className:"p-6",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[r.jsx("div",{className:"p-2 bg-green-100 dark:bg-green-900/30 rounded-lg",children:r.jsx(fO,{className:"w-5 h-5 text-green-600 dark:text-green-400"})}),r.jsxs("div",{children:[r.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Deposit Methods"}),r.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Enable or disable deposit options"})]})]}),r.jsxs("div",{className:"grid md:grid-cols-3 gap-4",children:[r.jsxs("div",{className:`p-4 rounded-lg border-2 ${n.checkoutSessionEnabled?"border-green-200 dark:border-green-800 bg-green-50 dark:bg-green-900/20":"border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-700/50"}`,children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(lt,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"}),r.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:"Checkout"})]}),r.jsx("button",{onClick:()=>i(I=>({...I,checkoutSessionEnabled:!I.checkoutSessionEnabled})),className:`p-1 rounded ${n.checkoutSessionEnabled?"bg-green-200 dark:bg-green-900/50":"bg-gray-200 dark:bg-gray-600"}`,children:n.checkoutSessionEnabled?r.jsx(Ys,{className:"w-6 h-6 text-green-600 dark:text-green-400"}):r.jsx(Gs,{className:"w-6 h-6 text-gray-400 dark:text-gray-500"})})]}),r.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Monime checkout page"})]}),r.jsxs("div",{className:`p-4 rounded-lg border-2 ${n.paymentCodeEnabled?"border-green-200 dark:border-green-800 bg-green-50 dark:bg-green-900/20":"border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-700/50"}`,children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(bs,{className:"w-5 h-5 text-purple-600 dark:text-purple-400"}),r.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:"USSD Code"})]}),r.jsx("button",{onClick:()=>i(I=>({...I,paymentCodeEnabled:!I.paymentCodeEnabled})),className:`p-1 rounded ${n.paymentCodeEnabled?"bg-green-200 dark:bg-green-900/50":"bg-gray-200 dark:bg-gray-600"}`,children:n.paymentCodeEnabled?r.jsx(Ys,{className:"w-6 h-6 text-green-600 dark:text-green-400"}):r.jsx(Gs,{className:"w-6 h-6 text-gray-400 dark:text-gray-500"})})]}),r.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Payment via USSD code"})]}),r.jsxs("div",{className:`p-4 rounded-lg border-2 ${n.mobileMoneyEnabled?"border-green-200 dark:border-green-800 bg-green-50 dark:bg-green-900/20":"border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-700/50"}`,children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Ws,{className:"w-5 h-5 text-orange-600 dark:text-orange-400"}),r.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:"Mobile Money"})]}),r.jsx("button",{onClick:()=>i(I=>({...I,mobileMoneyEnabled:!I.mobileMoneyEnabled})),className:`p-1 rounded ${n.mobileMoneyEnabled?"bg-green-200 dark:bg-green-900/50":"bg-gray-200 dark:bg-gray-600"}`,children:n.mobileMoneyEnabled?r.jsx(Ys,{className:"w-6 h-6 text-green-600 dark:text-green-400"}):r.jsx(Gs,{className:"w-6 h-6 text-gray-400 dark:text-gray-500"})})]}),r.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Direct mobile money"})]})]})]}),r.jsxs(se,{className:"p-6",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[r.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-900/30 rounded-lg",children:r.jsx(dt,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"})}),r.jsxs("div",{children:[r.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Deposit Limits"}),r.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Set minimum and maximum deposit amounts (in SLE)"})]})]}),r.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Minimum Deposit"}),r.jsxs("div",{className:"relative",children:[r.jsx("span",{className:"absolute left-3 top-2 text-gray-500 dark:text-gray-400",children:"Le"}),r.jsx("input",{type:"text",value:$(n.minDepositAmount),onChange:I=>i(B=>({...B,minDepositAmount:W(I.target.value)})),className:"w-full pl-10 pr-3 py-2 border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white rounded-lg focus:ring-2 focus:ring-primary-500"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Maximum Deposit"}),r.jsxs("div",{className:"relative",children:[r.jsx("span",{className:"absolute left-3 top-2 text-gray-500 dark:text-gray-400",children:"Le"}),r.jsx("input",{type:"text",value:$(n.maxDepositAmount),onChange:I=>i(B=>({...B,maxDepositAmount:W(I.target.value)})),className:"w-full pl-10 pr-3 py-2 border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white rounded-lg focus:ring-2 focus:ring-primary-500"})]})]})]})]})]})]})})}const J9e={pending:"bg-yellow-100 text-yellow-800",processing:"bg-blue-100 text-blue-800",completed:"bg-green-100 text-green-800",failed:"bg-red-100 text-red-800",expired:"bg-gray-100 text-gray-800",cancelled:"bg-gray-100 text-gray-800",delayed:"bg-orange-100 text-orange-800"},eFe={pending:r.jsx(_t,{className:"w-3 h-3"}),processing:r.jsx(Ke,{className:"w-3 h-3 animate-spin"}),completed:r.jsx(Ae,{className:"w-3 h-3"}),failed:r.jsx(Wt,{className:"w-3 h-3"}),expired:r.jsx(_t,{className:"w-3 h-3"}),cancelled:r.jsx(Wt,{className:"w-3 h-3"}),delayed:r.jsx(Ht,{className:"w-3 h-3"})};function tFe(){const[e,t]=p.useState([]),[s,a]=p.useState(!0),[n,i]=p.useState(""),[o,l]=p.useState(0),[c,d]=p.useState(""),[h,f]=p.useState("all"),[x,y]=p.useState(new Map),[v,w]=p.useState(null);p.useEffect(()=>{cr.getDefaultCurrency().then(w)},[]);const N=(v==null?void 0:v.symbol)||"Le",k=P=>`${N} ${P.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}`,C=async P=>{const M=[...new Set(P.filter(R=>R&&!x.has(R)))];if(M.length!==0)try{const{data:R}=await X.from("users").select("id, first_name, last_name, email, phone").in("id",M);if(R){const $=new Map(x);R.forEach(W=>{$.set(W.id,{id:W.id,firstName:W.first_name||"",lastName:W.last_name||"",email:W.email||"",phone:W.phone||""})}),y($)}}catch(R){console.error("Failed to fetch users:",R)}},E=async()=>{var P;a(!0),i("");try{const M=await mge.getAllDeposits(100,0);t(M.data||[]),l(M.total||0);const R=(P=M.data)==null?void 0:P.map($=>$.userId).filter(Boolean);R.length>0&&await C(R)}catch(M){i(M.message||"Failed to fetch deposits"),t([])}finally{a(!1)}};p.useEffect(()=>{E()},[]);const _=P=>{if(!P)return"Unknown";const M=x.get(P);return M?`${M.firstName} ${M.lastName}`.trim()||M.email||M.phone||P.slice(0,8):P.slice(0,8)+"..."},T=e.filter(P=>{var O,F,q,H,K;const M=P.userId?x.get(P.userId):null,R=M?`${M.firstName} ${M.lastName}`.toLowerCase():"",$=((O=M==null?void 0:M.email)==null?void 0:O.toLowerCase())||"",W=((F=M==null?void 0:M.phone)==null?void 0:F.toLowerCase())||"",I=c===""||P.id.toLowerCase().includes(c.toLowerCase())||((q=P.monimeReference)==null?void 0:q.toLowerCase().includes(c.toLowerCase()))||((H=P.walletId)==null?void 0:H.toLowerCase().includes(c.toLowerCase()))||((K=P.userId)==null?void 0:K.toLowerCase().includes(c.toLowerCase()))||R.includes(c.toLowerCase())||$.includes(c.toLowerCase())||W.includes(c.toLowerCase()),B=h==="all"||P.status===h;return I&&B}),A={total:e.length,completed:e.filter(P=>P.status==="completed").length,pending:e.filter(P=>P.status==="pending"||P.status==="processing").length,failed:e.filter(P=>P.status==="failed"||P.status==="cancelled").length,totalAmount:e.filter(P=>P.status==="completed").reduce((P,M)=>P+(M.amount||0),0)};return r.jsx(fr,{children:r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Deposit History"}),r.jsx("p",{className:"text-gray-500 mt-1",children:"Track all customer deposits via Monime"})]}),r.jsxs(Oe,{onClick:E,disabled:s,children:[r.jsx(Ot,{className:`w-4 h-4 mr-2 ${s?"animate-spin":""}`}),"Refresh"]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[r.jsx(se,{children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:r.jsx(Aa,{className:"w-5 h-5 text-blue-600"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-500",children:"Total Deposits"}),r.jsx("p",{className:"text-2xl font-bold text-gray-900",children:A.total})]})]})}),r.jsx(se,{children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:r.jsx(Ae,{className:"w-5 h-5 text-green-600"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-500",children:"Completed"}),r.jsx("p",{className:"text-2xl font-bold text-green-600",children:A.completed})]})]})}),r.jsx(se,{children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"p-2 bg-yellow-100 rounded-lg",children:r.jsx(_t,{className:"w-5 h-5 text-yellow-600"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-500",children:"Pending"}),r.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:A.pending})]})]})}),r.jsx(se,{children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"p-2 bg-emerald-100 rounded-lg",children:r.jsx(Aa,{className:"w-5 h-5 text-emerald-600"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-500",children:"Total Volume"}),r.jsx("p",{className:"text-2xl font-bold text-gray-900",children:k(IM(A.totalAmount))})]})]})})]}),r.jsx(se,{children:r.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[r.jsxs("div",{className:"flex-1 relative",children:[r.jsx(Nr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),r.jsx("input",{type:"text",placeholder:"Search by name, email, phone, ID...",value:c,onChange:P=>d(P.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500"})]}),r.jsxs("select",{value:h,onChange:P=>f(P.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",children:[r.jsx("option",{value:"all",children:"All Status"}),r.jsx("option",{value:"pending",children:"Pending"}),r.jsx("option",{value:"processing",children:"Processing"}),r.jsx("option",{value:"completed",children:"Completed"}),r.jsx("option",{value:"failed",children:"Failed"}),r.jsx("option",{value:"cancelled",children:"Cancelled"}),r.jsx("option",{value:"expired",children:"Expired"})]})]})}),n&&r.jsx(se,{className:"bg-red-50 border-red-200",children:r.jsxs("div",{className:"flex items-center gap-2 text-red-700",children:[r.jsx(Ht,{className:"w-5 h-5"}),r.jsx("span",{children:n})]})}),r.jsxs(se,{children:[r.jsx(pa,{children:r.jsxs(ya,{children:["Deposits (",T.length,")"]})}),s?r.jsx("div",{className:"flex items-center justify-center py-12",children:r.jsx(Ke,{className:"w-8 h-8 animate-spin text-primary-600"})}):T.length===0?r.jsxs("div",{className:"text-center py-12",children:[r.jsx(Aa,{className:"w-12 h-12 text-gray-300 mx-auto mb-4"}),r.jsx("p",{className:"text-gray-500",children:"No deposits found"})]}):r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"border-b border-gray-200",children:[r.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Customer"}),r.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Amount"}),r.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Status"}),r.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Method"}),r.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Reference"}),r.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Created"}),r.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Completed"})]})}),r.jsx("tbody",{className:"divide-y divide-gray-200",children:T.map(P=>{var R;const M=P.userId?x.get(P.userId):null;return r.jsxs("tr",{className:"hover:bg-gray-50",children:[r.jsx("td",{className:"px-4 py-3",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-8 h-8 bg-primary-100 rounded-full flex items-center justify-center",children:r.jsx(br,{className:"w-4 h-4 text-primary-600"})}),r.jsxs("div",{children:[r.jsx("div",{className:"font-medium text-gray-900",children:_(P.userId)}),(M==null?void 0:M.email)&&r.jsx("div",{className:"text-xs text-gray-500",children:M.email}),(M==null?void 0:M.phone)&&!(M!=null&&M.email)&&r.jsx("div",{className:"text-xs text-gray-500",children:M.phone})]})]})}),r.jsxs("td",{className:"px-4 py-3",children:[r.jsx("div",{className:"font-medium text-gray-900",children:k(IM(P.amount||0))}),r.jsx("div",{className:"text-xs text-gray-500",children:P.currency||"SLE"})]}),r.jsx("td",{className:"px-4 py-3",children:r.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium ${J9e[P.status]||"bg-gray-100 text-gray-800"}`,children:[eFe[P.status],P.status]})}),r.jsx("td",{className:"px-4 py-3",children:r.jsx("span",{className:"text-xs text-gray-600 bg-gray-100 px-2 py-1 rounded",children:((R=P.depositMethod)==null?void 0:R.replace("_"," "))||"CHECKOUT"})}),r.jsxs("td",{className:"px-4 py-3",children:[r.jsxs("div",{className:"font-mono text-xs text-gray-900",children:[P.id.slice(0,8),"..."]}),P.monimeReference&&r.jsxs("div",{className:"font-mono text-xs text-gray-500",children:[P.monimeReference.slice(0,15),"..."]})]}),r.jsx("td",{className:"px-4 py-3 text-sm text-gray-500",children:P.createdAt?new Date(P.createdAt).toLocaleString():"-"}),r.jsx("td",{className:"px-4 py-3 text-sm text-gray-500",children:P.completedAt?new Date(P.completedAt).toLocaleString():"-"})]},P.id)})})]})})]})]})})}function rFe(){const[e,t]=p.useState(!1),[s,a]=p.useState(!1),[n,i]=p.useState(!1),[o,l]=p.useState(null);p.useEffect(()=>{cr.getDefaultCurrency().then(l)},[]);const c=(o==null?void 0:o.symbol)||"Le",d=k=>`${c} ${k.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}`,[h,f]=p.useState([]),x=()=>{a(!0),t(!1),setTimeout(()=>a(!1),3e3)},y=(k,C,E)=>{f(h.map(_=>_.id===k?{..._,[C]:E}:_))},v=k=>{f(h.map(C=>C.id===k?{...C,isActive:!C.isActive}:C))},w=k=>{f(h.map(C=>C.id===k?{...C,isPopular:!C.isPopular}:{...C,isPopular:!1}))},N={totalSubscribers:156,monthlyRevenue:h.reduce((k,C)=>k+C.monthlyPrice*Math.floor(Math.random()*50),0),activeBusiness:89,activeEnterprise:22};return r.jsx(fr,{children:r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Subscription Plans"}),r.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Manage merchant subscription plans and pricing"})]}),r.jsxs("div",{className:"flex items-center gap-3",children:[s&&r.jsxs("span",{className:"flex items-center gap-2 text-green-600 dark:text-green-400 text-sm",children:[r.jsx(Ae,{className:"w-4 h-4"}),"Changes saved"]}),r.jsxs("button",{onClick:()=>t(!e),className:`px-4 py-2 rounded-lg flex items-center gap-2 ${e?"bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300":"bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700"}`,children:[r.jsx(rd,{className:"w-4 h-4"}),e?"Cancel":"Edit Plans"]}),e&&r.jsxs("button",{onClick:x,className:"px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 flex items-center gap-2",children:[r.jsx(Pn,{className:"w-4 h-4"}),"Save Changes"]})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[r.jsx(Be,{className:"p-4",delay:0,children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-900/30 rounded-lg",children:r.jsx(nn,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Total Subscribers"}),r.jsx("p",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:N.totalSubscribers})]})]})}),r.jsx(Be,{className:"p-4",delay:.1,children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"p-2 bg-green-100 dark:bg-green-900/30 rounded-lg",children:r.jsx(Cr,{className:"w-5 h-5 text-green-600 dark:text-green-400"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Monthly Revenue"}),r.jsx("p",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:d(N.monthlyRevenue)})]})]})}),r.jsx(Be,{className:"p-4",delay:.2,children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"p-2 bg-purple-100 dark:bg-purple-900/30 rounded-lg",children:r.jsx(Ho,{className:"w-5 h-5 text-purple-600 dark:text-purple-400"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Business Plan"}),r.jsxs("p",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:[N.activeBusiness," active"]})]})]})}),r.jsx(Be,{className:"p-4",delay:.3,children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"p-2 bg-indigo-100 dark:bg-indigo-900/30 rounded-lg",children:r.jsx(rr,{className:"w-5 h-5 text-indigo-600 dark:text-indigo-400"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Enterprise Plan"}),r.jsxs("p",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:[N.activeEnterprise," active"]})]})]})})]}),r.jsx(se,{className:"p-4 bg-amber-50 dark:bg-amber-900/20 border-amber-200 dark:border-amber-800",children:r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx(dt,{className:"w-5 h-5 text-amber-600 dark:text-amber-400 flex-shrink-0 mt-0.5"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-amber-800 dark:text-amber-300",children:"Subscription Management"}),r.jsx("p",{className:"text-sm text-amber-700 dark:text-amber-400 mt-1",children:"Changes to subscription plans will only affect new subscribers. Existing subscribers will keep their current plan until renewal. Consider grandfathering existing customers when making price changes."})]})]})}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:h.map(k=>r.jsxs(se,{className:`relative overflow-hidden ${k.isActive?"":"opacity-60"} ${k.isPopular?"ring-2 ring-primary-500":""}`,children:[k.isPopular&&r.jsx("div",{className:"absolute top-0 right-0 bg-primary-600 text-white px-3 py-1 text-xs font-medium",children:"Most Popular"}),r.jsxs("div",{className:"p-6",children:[r.jsxs("div",{className:"flex justify-between items-start mb-4",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white",children:k.name}),r.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:k.description})]}),e&&r.jsxs("div",{className:"flex gap-2",children:[r.jsx("button",{onClick:()=>w(k.id),className:`p-2 rounded-lg ${k.isPopular?"bg-yellow-100 dark:bg-yellow-900/30 text-yellow-600 dark:text-yellow-400":"bg-gray-100 dark:bg-gray-700 text-gray-400 dark:text-gray-500"}`,title:"Set as popular",children:r.jsx(q5,{className:"w-4 h-4"})}),r.jsx("button",{onClick:()=>v(k.id),className:`p-2 rounded-lg ${k.isActive?"bg-green-100 dark:bg-green-900/30 text-green-600 dark:text-green-400":"bg-gray-100 dark:bg-gray-700 text-gray-400 dark:text-gray-500"}`,title:k.isActive?"Disable":"Enable",children:k.isActive?r.jsx(Hr,{className:"w-4 h-4"}):r.jsx(Ct,{className:"w-4 h-4"})})]})]}),r.jsx("div",{className:"mb-6",children:e?r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:c}),r.jsx("input",{type:"number",value:k.monthlyPrice,onChange:C=>y(k.id,"monthlyPrice",parseFloat(C.target.value)),className:"w-20 px-2 py-1 border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white rounded text-2xl font-bold"}),r.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"/month"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-gray-500 dark:text-gray-400 text-sm",children:c}),r.jsx("input",{type:"number",value:k.yearlyPrice,onChange:C=>y(k.id,"yearlyPrice",parseFloat(C.target.value)),className:"w-20 px-2 py-1 border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white rounded text-sm"}),r.jsx("span",{className:"text-gray-500 dark:text-gray-400 text-sm",children:"/year"})]})]}):r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"flex items-baseline gap-1",children:[r.jsxs("span",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:[c,k.monthlyPrice]}),r.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"/month"})]}),r.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:["or ",c,k.yearlyPrice,"/year (save 17%)"]})]})}),r.jsx("div",{className:"space-y-3 mb-6",children:k.features.map((C,E)=>r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Hr,{className:"w-4 h-4 text-green-500 dark:text-green-400 flex-shrink-0"}),r.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-300",children:C})]},E))}),r.jsxs("div",{className:"pt-4 border-t border-gray-200 dark:border-gray-700",children:[r.jsx("h4",{className:"text-sm font-semibold text-gray-900 dark:text-white mb-2",children:"Limits"}),r.jsxs("div",{className:"grid grid-cols-3 gap-2 text-center",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:k.limits.transactions===-1?"":k.limits.transactions.toLocaleString()}),r.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Transactions"})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:k.limits.apiCalls===-1?"":`${k.limits.apiCalls/1e3}K`}),r.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"API Calls"})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:k.limits.teamMembers===-1?"":k.limits.teamMembers}),r.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Team"})]})]})]})]})]},k.id))}),e&&r.jsxs("button",{onClick:()=>i(!0),className:"w-full p-6 border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg text-gray-500 dark:text-gray-400 hover:border-primary-500 hover:text-primary-600 dark:hover:text-primary-400 transition-colors flex items-center justify-center gap-2",children:[r.jsx(sr,{className:"w-5 h-5"}),"Add New Plan"]}),r.jsxs(se,{className:"p-6",children:[r.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white mb-4",children:"Subscription Settings"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Trial Period"}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("input",{type:"number",defaultValue:14,className:"w-20 px-3 py-2 border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500"}),r.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"days"})]}),r.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Free trial period for new subscribers"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Grace Period"}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("input",{type:"number",defaultValue:3,className:"w-20 px-3 py-2 border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500"}),r.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"days"})]}),r.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Days before account suspension after failed payment"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Yearly Discount"}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("input",{type:"number",defaultValue:17,className:"w-20 px-3 py-2 border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500"}),r.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"%"})]}),r.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Discount for yearly subscriptions"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Auto-Renewal"}),r.jsxs("label",{className:"flex items-center gap-2 mt-2",children:[r.jsx("input",{type:"checkbox",defaultChecked:!0,className:"rounded text-primary-600 focus:ring-primary-500"}),r.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-300",children:"Enable auto-renewal by default"})]}),r.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Subscriptions will automatically renew"})]})]})]})]})})}const Pg=[{resource:"users",label:"User Management",icon:nn,actions:{create:!1,read:!1,update:!1,delete:!1}},{resource:"wallets",label:"Wallets",icon:Rt,actions:{create:!1,read:!1,update:!1,delete:!1}},{resource:"cards",label:"Cards",icon:lt,actions:{create:!1,read:!1,update:!1,delete:!1}},{resource:"transactions",label:"Transactions",icon:Rt,actions:{create:!1,read:!1,update:!1,delete:!1}},{resource:"settings",label:"System Settings",icon:bs,actions:{create:!1,read:!1,update:!1,delete:!1}},{resource:"roles",label:"Role Management",icon:rr,actions:{create:!1,read:!1,update:!1,delete:!1}}],sFe=[{id:"role_superadmin",name:"superadmin",displayName:"Super Administrator",description:"Full system access with all permissions. Can manage roles and system settings.",permissions:Pg.map(e=>({...e,actions:{create:!0,read:!0,update:!0,delete:!0}})),userCount:0,isSystem:!0},{id:"role_admin",name:"admin",displayName:"Administrator",description:"Administrative access to manage users, transactions, and operations.",permissions:Pg.map(e=>({...e,actions:e.resource==="roles"||e.resource==="settings"?{create:!1,read:!0,update:!1,delete:!1}:{create:!0,read:!0,update:!0,delete:!0}})),userCount:0,isSystem:!0},{id:"role_merchant",name:"merchant",displayName:"Merchant",description:"Business account with payment processing and transaction capabilities.",permissions:Pg.map(e=>({...e,actions:["wallets","cards","transactions"].includes(e.resource)?{create:!0,read:!0,update:!0,delete:!1}:{create:!1,read:!1,update:!1,delete:!1}})),userCount:0,isSystem:!0},{id:"role_agent",name:"agent",displayName:"Agent",description:"Support agent with customer service and transaction monitoring access.",permissions:Pg.map(e=>({...e,actions:["users","wallets","transactions"].includes(e.resource)?{create:!1,read:!0,update:!0,delete:!1}:{create:!1,read:!1,update:!1,delete:!1}})),userCount:0,isSystem:!0},{id:"role_user",name:"user",displayName:"User",description:"Standard user account with personal wallet and card access.",permissions:Pg.map(e=>({...e,actions:["wallets","cards","transactions"].includes(e.resource)?{create:!0,read:!0,update:!0,delete:!1}:{create:!1,read:!1,update:!1,delete:!1}})),userCount:0,isSystem:!0}];function aFe(){const[e,t]=p.useState(sFe),[s,a]=p.useState(!0),[n,i]=p.useState(null),[o,l]=p.useState(null),[c,d]=p.useState(!1);p.useEffect(()=>{h()},[]);const h=async()=>{a(!0);try{const{data:v}=await X.from("users").select("roles"),w=new Map;v==null||v.forEach(N=>{(N.roles||"user").split(",").map(C=>C.trim()).forEach(C=>{w.set(C,(w.get(C)||0)+1)})}),t(N=>N.map(k=>({...k,userCount:w.get(k.name)||0})))}catch(v){console.error("Error fetching role counts:",v)}finally{a(!1)}},f=v=>{i(n===v?null:v)},x=(v,w,N)=>{t(k=>k.map(C=>C.id!==v||C.isSystem?C:{...C,permissions:C.permissions.map(E=>E.resource!==w?E:{...E,actions:{...E.actions,[N]:!E.actions[N]}})}))},y=v=>{switch(v){case"superadmin":return"bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-400";case"admin":return"bg-purple-100 dark:bg-purple-900/30 text-purple-700 dark:text-purple-400";case"merchant":return"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400";case"agent":return"bg-orange-100 dark:bg-orange-900/30 text-orange-700 dark:text-orange-400";case"user":return"bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-400";default:return"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300"}};return r.jsx(fr,{children:r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Role Management"}),r.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Configure user roles and permissions"})]}),r.jsxs("button",{onClick:()=>d(!0),className:"px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 flex items-center gap-2",children:[r.jsx(sr,{className:"w-4 h-4"}),"Create Custom Role"]})]}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:e.map((v,w)=>r.jsx(Be,{className:"p-4",delay:w*.05,children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:`p-2 rounded-lg ${y(v.name).replace("text-","bg-").split(" ")[0]}`,children:r.jsx(rr,{className:`w-5 h-5 ${y(v.name).split(" ")[1]} ${y(v.name).split(" ")[3]||""}`})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:v.displayName}),r.jsx("p",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:v.userCount})]})]})},v.id))}),r.jsx("div",{className:"space-y-4",children:e.map(v=>r.jsxs(se,{className:"overflow-hidden",children:[r.jsxs("div",{className:"p-4 flex items-center justify-between cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-700/50",onClick:()=>f(v.id),children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("div",{className:`p-2 rounded-lg ${y(v.name).replace("text-","bg-").split(" ")[0]}`,children:r.jsx(rr,{className:`w-5 h-5 ${y(v.name).split(" ")[1]} ${y(v.name).split(" ")[3]||""}`})}),r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:v.displayName}),r.jsx("span",{className:`px-2 py-0.5 rounded text-xs font-medium ${y(v.name)}`,children:v.name}),v.isSystem&&r.jsxs("span",{className:"px-2 py-0.5 rounded text-xs font-medium bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-400 flex items-center gap-1",children:[r.jsx(Kr,{className:"w-3 h-3"})," System"]})]}),r.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:v.description})]})]}),r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsxs("div",{className:"text-right",children:[r.jsxs("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:[v.userCount," users"]}),r.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:[v.permissions.filter(w=>Object.values(w.actions).some(N=>N)).length," resources"]})]}),n===v.id?r.jsx(Hp,{className:"w-5 h-5 text-gray-400"}):r.jsx(ys,{className:"w-5 h-5 text-gray-400"})]})]}),n===v.id&&r.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-700 p-4",children:[r.jsx("h4",{className:"font-medium text-gray-900 dark:text-white mb-4",children:"Permissions"}),r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"text-left text-xs text-gray-500 dark:text-gray-400 uppercase",children:[r.jsx("th",{className:"pb-3 font-medium",children:"Resource"}),r.jsx("th",{className:"pb-3 font-medium text-center",children:"Create"}),r.jsx("th",{className:"pb-3 font-medium text-center",children:"Read"}),r.jsx("th",{className:"pb-3 font-medium text-center",children:"Update"}),r.jsx("th",{className:"pb-3 font-medium text-center",children:"Delete"})]})}),r.jsx("tbody",{className:"divide-y divide-gray-100 dark:divide-gray-700",children:v.permissions.map(w=>{const N=w.icon;return r.jsxs("tr",{className:"text-sm",children:[r.jsx("td",{className:"py-3",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(N,{className:"w-4 h-4 text-gray-400"}),r.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:w.label})]})}),["create","read","update","delete"].map(k=>r.jsx("td",{className:"py-3 text-center",children:r.jsx("button",{onClick:C=>{C.stopPropagation(),x(v.id,w.resource,k)},disabled:v.isSystem,className:`p-1 rounded ${w.actions[k]?"bg-green-100 dark:bg-green-900/30 text-green-600 dark:text-green-400":"bg-gray-100 dark:bg-gray-700 text-gray-400 dark:text-gray-500"} ${v.isSystem?"opacity-60 cursor-not-allowed":"hover:opacity-80"}`,children:w.actions[k]?r.jsx(Ae,{className:"w-4 h-4"}):r.jsx(Wt,{className:"w-4 h-4"})})},k))]},w.resource)})})]})}),!v.isSystem&&r.jsxs("div",{className:"flex justify-end gap-2 mt-4 pt-4 border-t border-gray-200 dark:border-gray-700",children:[r.jsxs("button",{className:"px-4 py-2 text-sm bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 flex items-center gap-2",children:[r.jsx(Js,{className:"w-4 h-4"}),"Delete Role"]}),r.jsxs("button",{className:"px-4 py-2 text-sm bg-primary-600 text-white rounded-lg hover:bg-primary-700 flex items-center gap-2",children:[r.jsx(Pn,{className:"w-4 h-4"}),"Save Changes"]})]}),v.isSystem&&r.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200 dark:border-gray-700",children:r.jsxs("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-lg p-3 flex items-start gap-2",children:[r.jsx(Kr,{className:"w-4 h-4 text-yellow-600 dark:text-yellow-400 mt-0.5"}),r.jsxs("div",{className:"text-sm text-yellow-700 dark:text-yellow-400",children:[r.jsx("p",{className:"font-medium",children:"System Role"}),r.jsx("p",{className:"text-yellow-600 dark:text-yellow-500",children:"This is a system-defined role and cannot be modified. To customize permissions, create a new custom role."})]})]})})]})]},v.id))}),r.jsxs(se,{className:"p-6",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Quick User Role Assignment"}),r.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-4",children:"To change a user's role, go to the User Management section and edit the individual user."}),r.jsxs("div",{className:"flex gap-4",children:[r.jsxs("a",{href:"/admin/users",className:"px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 flex items-center gap-2",children:[r.jsx(nn,{className:"w-4 h-4"}),"Manage Users"]}),r.jsxs("a",{href:"/admin/merchants",className:"px-4 py-2 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 flex items-center gap-2",children:[r.jsx(Rt,{className:"w-4 h-4"}),"Manage Merchants"]}),r.jsxs("a",{href:"/admin/agents",className:"px-4 py-2 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 flex items-center gap-2",children:[r.jsx(JV,{className:"w-4 h-4"}),"Manage Agents"]})]})]})]})})}function nFe(){const e=Ut(),[t,s]=p.useState(""),[a,n]=p.useState("all"),[i,o]=p.useState(1),[l,c]=p.useState(null),[d,h]=p.useState(!1),[f,x]=p.useState(""),[y,v]=p.useState(!1),{data:w,isLoading:N,refetch:k}=sge({page:i,limit:20,status:a==="all"?void 0:a}),{data:C}=a2(),E=age(),_=nge(),T=ige(),[A,P]=p.useState([]),[M,R]=p.useState(!1);p.useEffect(()=>{(async()=>{if(!(w!=null&&w.data)||w.data.length===0){P([]);return}R(!0);const G=[...new Set(w.data.map(ne=>ne.userId))],{data:te,error:he}=await X.from("users").select("id, first_name, last_name, email, phone").in("id",G);if(he)console.error("Error fetching users:",he),P(w.data.map(ne=>({...ne})));else{const ne=new Map((te==null?void 0:te.map(ce=>[ce.id,ce]))||[]);P(w.data.map(ce=>({...ce,user:ne.get(ce.userId)})))}R(!1)})()},[w==null?void 0:w.data]);const $=A.filter(z=>{var te,he,ne,ce,xe,_e;if(!t)return!0;const G=t.toLowerCase();return z.name.toLowerCase().includes(G)||((he=(te=z.user)==null?void 0:te.first_name)==null?void 0:he.toLowerCase().includes(G))||((ce=(ne=z.user)==null?void 0:ne.last_name)==null?void 0:ce.toLowerCase().includes(G))||((_e=(xe=z.user)==null?void 0:xe.email)==null?void 0:_e.toLowerCase().includes(G))||z.id.toLowerCase().includes(G)}),W=(w==null?void 0:w.total)||0,I=$.reduce((z,G)=>z+G.currentBalance,0),B=$.filter(z=>z.lockStatus==="LOCKED"||z.adminLocked).length,O=$.filter(z=>z.adminLocked).length,F=z=>new Intl.NumberFormat("en-SL",{style:"currency",currency:"SLE",minimumFractionDigits:2}).format(z),q=z=>new Date(z).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}),H=async()=>{if(l)try{await E.mutateAsync({potId:l.id,lock:!l.adminLocked,reason:f}),k(),h(!1),c(null),x("")}catch(z){console.error("Failed to toggle lock:",z)}},K=async z=>{if(confirm(`Force unlock pot "${z.name}"? This will allow the user to withdraw immediately.`))try{await _.mutateAsync(z.id),k()}catch(G){console.error("Failed to force unlock:",G)}},V=z=>{if(z.adminLocked)return r.jsx("span",{className:"px-2 py-1 text-xs font-medium rounded-full bg-red-100 text-red-700",children:"Admin Locked"});switch(z.status){case"ACTIVE":return r.jsx("span",{className:"px-2 py-1 text-xs font-medium rounded-full bg-green-100 text-green-700",children:"Active"});case"LOCKED":return r.jsx("span",{className:"px-2 py-1 text-xs font-medium rounded-full bg-amber-100 text-amber-700",children:"Locked"});case"UNLOCKED":return r.jsx("span",{className:"px-2 py-1 text-xs font-medium rounded-full bg-blue-100 text-blue-700",children:"Unlocked"});case"CLOSED":return r.jsx("span",{className:"px-2 py-1 text-xs font-medium rounded-full bg-gray-100 text-gray-700",children:"Closed"});default:return r.jsx("span",{className:"px-2 py-1 text-xs font-medium rounded-full bg-gray-100 text-gray-700",children:z.status})}};return r.jsxs(fr,{children:[r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Pots Management"}),r.jsx("p",{className:"text-gray-500 mt-1",children:"Manage all user savings pots"})]}),r.jsxs("button",{onClick:()=>v(!0),className:"inline-flex items-center gap-2 px-4 py-2.5 bg-gray-100 text-gray-700 rounded-xl font-medium hover:bg-gray-200 transition-colors",children:[r.jsx(bs,{className:"w-5 h-5"}),"Settings"]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[r.jsx(se,{children:r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("div",{className:"w-12 h-12 rounded-full bg-primary-100 flex items-center justify-center",children:r.jsx(lo,{className:"w-6 h-6 text-primary-600"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-500",children:"Total Pots"}),r.jsx("p",{className:"text-xl font-bold text-gray-900",children:W})]})]})}),r.jsx(se,{children:r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("div",{className:"w-12 h-12 rounded-full bg-green-100 flex items-center justify-center",children:r.jsx(Ts,{className:"w-6 h-6 text-green-600"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-500",children:"Total Savings"}),r.jsx("p",{className:"text-xl font-bold text-gray-900",children:F(I)})]})]})}),r.jsx(se,{children:r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("div",{className:"w-12 h-12 rounded-full bg-amber-100 flex items-center justify-center",children:r.jsx(Kr,{className:"w-6 h-6 text-amber-600"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-500",children:"Locked Pots"}),r.jsx("p",{className:"text-xl font-bold text-gray-900",children:B})]})]})}),r.jsx(se,{children:r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("div",{className:"w-12 h-12 rounded-full bg-red-100 flex items-center justify-center",children:r.jsx(dt,{className:"w-6 h-6 text-red-600"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-500",children:"Admin Locked"}),r.jsx("p",{className:"text-xl font-bold text-gray-900",children:O})]})]})})]}),r.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[r.jsxs("div",{className:"relative flex-1",children:[r.jsx(Nr,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),r.jsx("input",{type:"text",value:t,onChange:z=>s(z.target.value),placeholder:"Search by name, user, email, or ID...",className:"w-full pl-12 pr-4 py-3 rounded-xl border border-gray-300 focus:border-primary-500 focus:ring-primary-500 transition-colors"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(el,{className:"w-5 h-5 text-gray-400"}),r.jsxs("select",{value:a,onChange:z=>{n(z.target.value),o(1)},className:"px-4 py-3 rounded-xl border border-gray-300 focus:border-primary-500 focus:ring-primary-500 transition-colors",children:[r.jsx("option",{value:"all",children:"All Status"}),r.jsx("option",{value:"ACTIVE",children:"Active"}),r.jsx("option",{value:"LOCKED",children:"Locked"}),r.jsx("option",{value:"UNLOCKED",children:"Unlocked"}),r.jsx("option",{value:"CLOSED",children:"Closed"})]})]})]}),r.jsxs(se,{padding:"none",children:[r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Pot"}),r.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"User"}),r.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Balance"}),r.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Status"}),r.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Maturity"}),r.jsx("th",{className:"px-6 py-4 text-right text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Actions"})]})}),r.jsx("tbody",{className:"divide-y divide-gray-100",children:N||M?r.jsx("tr",{children:r.jsx("td",{colSpan:6,className:"px-6 py-12 text-center",children:r.jsx(Ke,{className:"w-8 h-8 text-primary-600 animate-spin mx-auto"})})}):$.length===0?r.jsx("tr",{children:r.jsx("td",{colSpan:6,className:"px-6 py-12 text-center text-gray-500",children:"No pots found"})}):$.map(z=>r.jsxs("tr",{className:"hover:bg-gray-50",children:[r.jsx("td",{className:"px-6 py-4",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-10 h-10 rounded-full flex items-center justify-center",style:{backgroundColor:`${z.color||"#4F46E5"}15`},children:r.jsx(lo,{className:"w-5 h-5",style:{color:z.color||"#4F46E5"}})}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-gray-900",children:z.name}),r.jsxs("p",{className:"text-xs text-gray-500 font-mono",children:[z.id.slice(0,8),"..."]})]})]})}),r.jsx("td",{className:"px-6 py-4",children:z.user?r.jsxs("div",{children:[r.jsxs("p",{className:"font-medium text-gray-900",children:[z.user.first_name," ",z.user.last_name]}),r.jsx("p",{className:"text-sm text-gray-500",children:z.user.email})]}):r.jsx("span",{className:"text-gray-400",children:"Unknown"})}),r.jsxs("td",{className:"px-6 py-4",children:[r.jsx("p",{className:"font-medium text-gray-900",children:F(z.currentBalance)}),z.goalAmount&&r.jsxs("p",{className:"text-sm text-gray-500",children:["of ",F(z.goalAmount)]})]}),r.jsxs("td",{className:"px-6 py-4",children:[V(z),z.adminLocked&&z.adminLockReason&&r.jsx("p",{className:"text-xs text-red-600 mt-1",children:z.adminLockReason})]}),r.jsx("td",{className:"px-6 py-4",children:z.lockEndDate?r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-900",children:q(z.lockEndDate)}),new Date(z.lockEndDate)>new Date&&r.jsxs("p",{className:"text-xs text-gray-500",children:[Math.ceil((new Date(z.lockEndDate).getTime()-Date.now())/(1e3*60*60*24))," ","days left"]})]}):r.jsx("span",{className:"text-gray-400",children:"-"})}),r.jsx("td",{className:"px-6 py-4 text-right",children:r.jsxs("div",{className:"flex items-center justify-end gap-2",children:[r.jsx("button",{onClick:()=>e(`/pots/${z.id}`),className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",title:"View",children:r.jsx(ir,{className:"w-4 h-4"})}),r.jsx("button",{onClick:()=>{c(z),h(!0)},className:fe("p-2 rounded-lg transition-colors",z.adminLocked?"text-green-600 hover:bg-green-50":"text-amber-600 hover:bg-amber-50"),title:z.adminLocked?"Unlock":"Lock",children:z.adminLocked?r.jsx(Yy,{className:"w-4 h-4"}):r.jsx(Kr,{className:"w-4 h-4"})}),z.lockStatus==="LOCKED"&&!z.adminLocked&&r.jsx("button",{onClick:()=>K(z),className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"Force Unlock",children:r.jsx(Li,{className:"w-4 h-4"})})]})})]},z.id))})]})}),w&&w.totalPages>1&&r.jsxs("div",{className:"px-6 py-4 border-t border-gray-200 flex items-center justify-between",children:[r.jsxs("p",{className:"text-sm text-gray-600",children:["Page ",i," of ",w.totalPages," (",w.total," total)"]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("button",{onClick:()=>o(z=>Math.max(1,z-1)),disabled:i===1,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),r.jsx("button",{onClick:()=>o(z=>Math.min(w.totalPages,z+1)),disabled:i===w.totalPages,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"})]})]})]})]}),d&&l&&r.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[r.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:()=>{h(!1),c(null),x("")}}),r.jsxs("div",{className:"relative bg-white rounded-2xl shadow-xl w-full max-w-md mx-4 p-6",children:[r.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-2",children:l.adminLocked?"Unlock Pot":"Lock Pot"}),r.jsx("p",{className:"text-gray-600 mb-4",children:l.adminLocked?`Remove admin lock from "${l.name}"?`:`Add admin lock to "${l.name}"? The user will not be able to withdraw funds.`}),!l.adminLocked&&r.jsxs("div",{className:"mb-4",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Reason (Required)"}),r.jsx("textarea",{value:f,onChange:z=>x(z.target.value),placeholder:"e.g., Fraud investigation, Compliance review",rows:3,className:"w-full px-4 py-3 rounded-xl border border-gray-300 focus:border-primary-500 focus:ring-primary-500 transition-colors resize-none"})]}),r.jsxs("div",{className:"flex gap-3",children:[r.jsx("button",{onClick:()=>{h(!1),c(null),x("")},className:"flex-1 py-2.5 px-4 rounded-xl border border-gray-300 text-gray-700 font-medium hover:bg-gray-50 transition-colors",children:"Cancel"}),r.jsx("button",{onClick:H,disabled:E.isPending||!l.adminLocked&&!f,className:fe("flex-1 py-2.5 px-4 rounded-xl font-medium transition-colors flex items-center justify-center gap-2",l.adminLocked?"bg-green-600 text-white hover:bg-green-700":"bg-red-600 text-white hover:bg-red-700",(E.isPending||!l.adminLocked&&!f)&&"opacity-50 cursor-not-allowed"),children:E.isPending?r.jsxs(r.Fragment,{children:[r.jsx(Ke,{className:"w-4 h-4 animate-spin"}),"Processing..."]}):l.adminLocked?"Unlock Pot":"Lock Pot"})]})]})]}),y&&C&&r.jsx(iFe,{settings:C,onClose:()=>v(!1),onUpdate:async(z,G)=>{await T.mutateAsync({key:z,value:G})},isUpdating:T.isPending})]})}function iFe({settings:e,onClose:t,onUpdate:s,isUpdating:a}){const[n,i]=p.useState(e),o=async()=>{n.maxPotsPerUser!==e.maxPotsPerUser&&await s("max_pots_per_user",n.maxPotsPerUser),n.minContributionAmount!==e.minContributionAmount&&await s("min_contribution_amount",n.minContributionAmount),n.maxContributionAmount!==e.maxContributionAmount&&await s("max_contribution_amount",n.maxContributionAmount),n.minLockPeriodDays!==e.minLockPeriodDays&&await s("min_lock_period_days",n.minLockPeriodDays),n.maxLockPeriodDays!==e.maxLockPeriodDays&&await s("max_lock_period_days",n.maxLockPeriodDays),n.earlyWithdrawalPenaltyPercent!==e.earlyWithdrawalPenaltyPercent&&await s("early_withdrawal_penalty_percent",n.earlyWithdrawalPenaltyPercent),t()};return r.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[r.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:t}),r.jsxs("div",{className:"relative bg-white rounded-2xl shadow-xl w-full max-w-lg mx-4 overflow-hidden",children:[r.jsxs("div",{className:"p-6 border-b border-gray-200",children:[r.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Pot Settings"}),r.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Configure global pot settings"})]}),r.jsxs("div",{className:"p-6 space-y-4 max-h-[60vh] overflow-y-auto",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Max Pots Per User"}),r.jsx("input",{type:"number",value:n.maxPotsPerUser,onChange:l=>i({...n,maxPotsPerUser:parseInt(l.target.value)||0}),min:"1",max:"100",className:"w-full px-4 py-3 rounded-xl border border-gray-300 focus:border-primary-500 focus:ring-primary-500"})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Min Contribution (SLE)"}),r.jsx("input",{type:"number",value:n.minContributionAmount,onChange:l=>i({...n,minContributionAmount:parseFloat(l.target.value)||0}),min:"0",step:"0.01",className:"w-full px-4 py-3 rounded-xl border border-gray-300 focus:border-primary-500 focus:ring-primary-500"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Max Contribution (SLE)"}),r.jsx("input",{type:"number",value:n.maxContributionAmount,onChange:l=>i({...n,maxContributionAmount:parseFloat(l.target.value)||0}),min:"0",step:"0.01",className:"w-full px-4 py-3 rounded-xl border border-gray-300 focus:border-primary-500 focus:ring-primary-500"})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Min Lock Period (Days)"}),r.jsx("input",{type:"number",value:n.minLockPeriodDays,onChange:l=>i({...n,minLockPeriodDays:parseInt(l.target.value)||0}),min:"1",className:"w-full px-4 py-3 rounded-xl border border-gray-300 focus:border-primary-500 focus:ring-primary-500"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Max Lock Period (Days)"}),r.jsx("input",{type:"number",value:n.maxLockPeriodDays,onChange:l=>i({...n,maxLockPeriodDays:parseInt(l.target.value)||0}),min:"1",className:"w-full px-4 py-3 rounded-xl border border-gray-300 focus:border-primary-500 focus:ring-primary-500"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Early Withdrawal Penalty (%)"}),r.jsx("input",{type:"number",value:n.earlyWithdrawalPenaltyPercent,onChange:l=>i({...n,earlyWithdrawalPenaltyPercent:parseFloat(l.target.value)||0}),min:"0",max:"100",step:"0.1",className:"w-full px-4 py-3 rounded-xl border border-gray-300 focus:border-primary-500 focus:ring-primary-500"})]})]}),r.jsx("div",{className:"p-6 border-t border-gray-200 bg-gray-50",children:r.jsxs("div",{className:"flex gap-3",children:[r.jsx("button",{onClick:t,className:"flex-1 py-2.5 px-4 rounded-xl border border-gray-300 text-gray-700 font-medium hover:bg-gray-100 transition-colors",children:"Cancel"}),r.jsx("button",{onClick:o,disabled:a,className:"flex-1 py-2.5 px-4 rounded-xl bg-primary-600 text-white font-medium hover:bg-primary-700 transition-colors flex items-center justify-center gap-2",children:a?r.jsxs(r.Fragment,{children:[r.jsx(Ke,{className:"w-4 h-4 animate-spin"}),"Saving..."]}):"Save Settings"})]})})]})]})}const tE={ShoppingCart:Ky,Utensils:moe,Briefcase:Ow,Heart:eoe,GraduationCap:Zie,Monitor:qV,Truck:O1,Film:Yie,Building2:Da,Landmark:zV,Plane:loe,Wheat:xoe,Factory:Gie,HardHat:Jie,Wifi:oi,HeartHandshake:xO,HandHeart:xO,MoreHorizontal:aoe,Store:mr},oFe=Object.keys(tE);function lFe(){const[e,t]=p.useState([]),[s,a]=p.useState(!0),[n,i]=p.useState(""),[o,l]=p.useState("all"),[c,d]=p.useState(!1),[h,f]=p.useState(null),[x,y]=p.useState(!1),[v,w]=p.useState(""),[N,k]=p.useState({name:"",description:"",icon:"Store",parent_id:"",sort_order:0}),[C,E]=p.useState(!1),[_,T]=p.useState(null),[A,P]=p.useState(""),[M,R]=p.useState(!1),[$,W]=p.useState(new Set);p.useEffect(()=>{I()},[]);const I=async()=>{a(!0);try{const{data:oe,error:ie}=await X.from("business_categories").select("*").order("sort_order",{ascending:!0});if(ie){console.error("Error fetching categories:",ie),t([]);return}const{data:ge}=await X.from("users").select("business_category_id").ilike("roles","%merchant%").not("business_category_id","is",null),Z=new Map;ge==null||ge.forEach(re=>{const pe=re.business_category_id;Z.set(pe,(Z.get(pe)||0)+1)});const Q=(oe||[]).map(re=>({...re,merchant_count:Z.get(re.id)||0}));t(Q)}catch(oe){console.error("Error fetching categories:",oe),t([])}finally{a(!1)}},B=e.filter(oe=>{var Z;const ie=oe.name.toLowerCase().includes(n.toLowerCase())||((Z=oe.description)==null?void 0:Z.toLowerCase().includes(n.toLowerCase())),ge=o==="all"||o==="active"&&oe.status==="ACTIVE"||o==="inactive"&&oe.status==="INACTIVE";return ie&&ge}),O=()=>B.filter(oe=>!oe.parent_id),F=oe=>e.filter(ie=>ie.parent_id===oe),q=oe=>{W(ie=>{const ge=new Set(ie);return ge.has(oe)?ge.delete(oe):ge.add(oe),ge})},H=O(),K=()=>{k({name:"",description:"",icon:"Store",parent_id:"",sort_order:e.length+1}),w(""),f(null)},V=()=>{K(),d(!0)},z=oe=>{f(oe),k({name:oe.name,description:oe.description||"",icon:oe.icon||"Store",parent_id:oe.parent_id||"",sort_order:oe.sort_order}),w(""),d(!0)},G=()=>{d(!1),K()},te=async oe=>{oe.preventDefault(),w(""),y(!0);try{if(!N.name.trim()){w("Category name is required"),y(!1);return}const ie={name:N.name.trim(),description:N.description.trim()||null,icon:N.icon,parent_id:N.parent_id||null,sort_order:N.sort_order};if(h){const{error:ge}=await X.from("business_categories").update(ie).eq("id",h.id);if(ge){w(ge.message),y(!1);return}}else{const{error:ge}=await X.from("business_categories").insert({...ie,status:"ACTIVE"});if(ge){w(ge.message),y(!1);return}}G(),I()}catch(ie){console.error("Error saving category:",ie),w(ie.message||"An unexpected error occurred")}finally{y(!1)}},he=async(oe,ie)=>{try{const ge=ie==="ACTIVE"?"INACTIVE":"ACTIVE",{error:Z}=await X.from("business_categories").update({status:ge}).eq("id",oe);if(Z){console.error("Error updating category status:",Z);return}I()}catch(ge){console.error("Error updating category status:",ge)}},ne=async oe=>{if(confirm("Are you sure you want to delete this category? Merchants using this category will have their category unset."))try{const{error:ie}=await X.from("business_categories").delete().eq("id",oe);if(ie){console.error("Error deleting category:",ie),alert("Failed to delete category: "+ie.message);return}I()}catch(ie){console.error("Error deleting category:",ie)}},ce=oe=>{const ie=tE[oe||"Store"]||mr;return r.jsx(ie,{className:"w-5 h-5"})},xe=oe=>{T(oe),P(""),E(!0)},_e=async()=>{if(!(!_||!A.trim())){R(!0);try{const oe=A.split(",").map(re=>re.trim()).filter(re=>re.length>0);if(oe.length===0){R(!1);return}const ie=e.filter(re=>re.parent_id===_.id);let ge=ie.length>0?Math.max(...ie.map(re=>re.sort_order))+1:1;const Z=oe.map((re,pe)=>({name:re,description:null,icon:_.icon||"Store",parent_id:_.id,status:"ACTIVE",sort_order:ge+pe})),{error:Q}=await X.from("business_categories").insert(Z);if(Q){console.error("Error adding subcategories:",Q),alert("Failed to add subcategories: "+Q.message);return}E(!1),P(""),T(null),I()}catch(oe){console.error("Error adding subcategories:",oe)}finally{R(!1)}}};return r.jsxs(fr,{children:[r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Business Categories"}),r.jsx("p",{className:"text-gray-500",children:"Manage business categories for merchant classification"})]}),r.jsxs("button",{onClick:V,className:"px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 flex items-center gap-2",children:[r.jsx(sr,{className:"w-4 h-4"}),"Add Category"]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[r.jsx(se,{className:"p-4",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:r.jsx(Ow,{className:"w-5 h-5 text-blue-600"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-500",children:"Parent Categories"}),r.jsx("p",{className:"text-xl font-semibold",children:e.filter(oe=>!oe.parent_id).length})]})]})}),r.jsx(se,{className:"p-4",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"p-2 bg-indigo-100 rounded-lg",children:r.jsx(ys,{className:"w-5 h-5 text-indigo-600"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-500",children:"Subcategories"}),r.jsx("p",{className:"text-xl font-semibold",children:e.filter(oe=>oe.parent_id).length})]})]})}),r.jsx(se,{className:"p-4",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:r.jsx(Ae,{className:"w-5 h-5 text-green-600"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-500",children:"Active"}),r.jsx("p",{className:"text-xl font-semibold",children:e.filter(oe=>oe.status==="ACTIVE").length})]})]})}),r.jsx(se,{className:"p-4",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"p-2 bg-gray-100 rounded-lg",children:r.jsx(Wt,{className:"w-5 h-5 text-gray-600"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-500",children:"Inactive"}),r.jsx("p",{className:"text-xl font-semibold",children:e.filter(oe=>oe.status==="INACTIVE").length})]})]})}),r.jsx(se,{className:"p-4",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"p-2 bg-purple-100 rounded-lg",children:r.jsx(mr,{className:"w-5 h-5 text-purple-600"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-500",children:"Merchants Assigned"}),r.jsx("p",{className:"text-xl font-semibold",children:e.reduce((oe,ie)=>oe+(ie.merchant_count||0),0)})]})]})})]}),r.jsx(se,{className:"p-4",children:r.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[r.jsxs("div",{className:"flex-1 relative",children:[r.jsx(Nr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),r.jsx("input",{type:"text",placeholder:"Search categories...",value:n,onChange:oe=>i(oe.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500"})]}),r.jsxs("select",{value:o,onChange:oe=>l(oe.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",children:[r.jsx("option",{value:"all",children:"All Status"}),r.jsx("option",{value:"active",children:"Active"}),r.jsx("option",{value:"inactive",children:"Inactive"})]})]})}),r.jsxs(se,{className:"overflow-hidden",children:[s?r.jsxs("div",{className:"p-8 text-center",children:[r.jsx("div",{className:"w-8 h-8 border-4 border-primary-600 border-t-transparent rounded-full animate-spin mx-auto"}),r.jsx("p",{className:"mt-2 text-gray-500",children:"Loading categories..."})]}):r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{className:"bg-gray-50",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Category"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Description"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Subcategories"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Merchants"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Status"}),r.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Actions"})]})}),r.jsx("tbody",{className:"divide-y divide-gray-200",children:H.map(oe=>{const ie=F(oe.id),ge=$.has(oe.id);return r.jsxs("tr",{className:"hover:bg-gray-50",children:[r.jsx("td",{className:"px-6 py-4",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-10 h-10 rounded-lg flex items-center justify-center bg-blue-100 text-blue-600",children:ce(oe.icon)}),r.jsx("div",{children:r.jsx("p",{className:"font-medium text-gray-900",children:oe.name})})]})}),r.jsx("td",{className:"px-6 py-4",children:r.jsx("p",{className:"text-sm text-gray-600 max-w-xs truncate",children:oe.description||"No description"})}),r.jsx("td",{className:"px-6 py-4",children:r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[ie.length>0?r.jsxs("button",{onClick:()=>q(oe.id),className:"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium bg-indigo-100 text-indigo-700 hover:bg-indigo-200 transition-colors",children:[ge?r.jsx(Hp,{className:"w-3 h-3"}):r.jsx(ys,{className:"w-3 h-3"}),ie.length," subcategories"]}):r.jsx("span",{className:"text-xs text-gray-400",children:"No subcategories"}),r.jsxs("button",{onClick:()=>xe(oe),className:"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-700 hover:bg-green-200 transition-colors",title:"Add subcategories",children:[r.jsx(sr,{className:"w-3 h-3"}),"Add"]})]}),ge&&ie.length>0&&r.jsx("div",{className:"flex flex-wrap gap-1 mt-2 p-2 bg-gray-50 rounded-lg max-w-md",children:ie.map(Z=>r.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium ${Z.status==="ACTIVE"?"bg-white border border-gray-200 text-gray-700":"bg-gray-200 text-gray-500"}`,children:[Z.name,r.jsx("button",{onClick:()=>z(Z),className:"hover:text-primary-600",title:"Edit",children:r.jsx(rd,{className:"w-3 h-3"})}),r.jsx("button",{onClick:()=>ne(Z.id),className:"hover:text-red-600",title:"Delete",children:r.jsx(Ct,{className:"w-3 h-3"})})]},Z.id))})]})}),r.jsx("td",{className:"px-6 py-4",children:r.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-purple-100 text-purple-700",children:[oe.merchant_count||0," merchants"]})}),r.jsx("td",{className:"px-6 py-4",children:r.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${oe.status==="ACTIVE"?"bg-green-100 text-green-700":"bg-gray-100 text-gray-700"}`,children:oe.status==="ACTIVE"?"Active":"Inactive"})}),r.jsx("td",{className:"px-6 py-4 text-right",children:r.jsxs("div",{className:"flex items-center justify-end gap-2",children:[r.jsx("button",{onClick:()=>z(oe),className:"p-2 hover:bg-gray-100 rounded-lg",title:"Edit",children:r.jsx(rd,{className:"w-4 h-4 text-gray-500"})}),r.jsx("button",{onClick:()=>he(oe.id,oe.status),className:`p-2 hover:bg-gray-100 rounded-lg ${oe.status==="ACTIVE"?"text-yellow-500":"text-green-500"}`,title:oe.status==="ACTIVE"?"Deactivate":"Activate",children:oe.status==="ACTIVE"?r.jsx(Wt,{className:"w-4 h-4"}):r.jsx(Ae,{className:"w-4 h-4"})}),r.jsx("button",{onClick:()=>ne(oe.id),className:"p-2 hover:bg-gray-100 rounded-lg text-red-500",title:"Delete",children:r.jsx(Js,{className:"w-4 h-4"})})]})})]},oe.id)})})]}),!s&&H.length===0&&r.jsxs("div",{className:"p-8 text-center",children:[r.jsx(Ow,{className:"w-12 h-12 text-gray-300 mx-auto mb-3"}),r.jsx("p",{className:"text-gray-500",children:"No categories found"})]})]})]}),c&&r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:r.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md mx-4",children:[r.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[r.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:h?"Edit Category":"Add New Category"}),r.jsx("button",{onClick:G,className:"p-1 hover:bg-gray-100 rounded-lg",children:r.jsx(Ct,{className:"w-5 h-5 text-gray-500"})})]}),r.jsxs("form",{onSubmit:te,className:"p-4 space-y-4",children:[v&&r.jsx("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg text-red-700 text-sm",children:v}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Category Name ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"text",value:N.name,onChange:oe=>k({...N,name:oe.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",placeholder:"e.g., Retail & Shopping",required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),r.jsx("textarea",{value:N.description,onChange:oe=>k({...N,description:oe.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",placeholder:"Brief description of this category",rows:2})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Icon"}),r.jsx("div",{className:"grid grid-cols-6 gap-2 mb-2",children:oFe.map(oe=>{const ie=tE[oe];return r.jsx("button",{type:"button",onClick:()=>k({...N,icon:oe}),className:`p-2 rounded-lg border-2 transition-colors ${N.icon===oe?"border-primary-500 bg-primary-50 text-primary-600":"border-gray-200 hover:border-gray-300 text-gray-500"}`,title:oe,children:r.jsx(ie,{className:"w-5 h-5 mx-auto"})},oe)})}),r.jsxs("p",{className:"text-xs text-gray-500",children:["Selected: ",N.icon]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Parent Category (Optional - for subcategories)"}),r.jsxs("select",{value:N.parent_id,onChange:oe=>k({...N,parent_id:oe.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",children:[r.jsx("option",{value:"",children:"None (This is a parent category)"}),e.filter(oe=>oe.id!==(h==null?void 0:h.id)&&!oe.parent_id).map(oe=>r.jsx("option",{value:oe.id,children:oe.name},oe.id))]}),r.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Select a parent to create a subcategory, or leave empty for a main category"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Sort Order"}),r.jsx("input",{type:"number",value:N.sort_order,onChange:oe=>k({...N,sort_order:parseInt(oe.target.value)||0}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",min:0}),r.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Lower numbers appear first"})]}),r.jsxs("div",{className:"flex gap-3 pt-4",children:[r.jsx("button",{type:"button",onClick:G,className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50",children:"Cancel"}),r.jsx("button",{type:"submit",disabled:x,className:"flex-1 px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:x?r.jsxs(r.Fragment,{children:[r.jsx(Ke,{className:"w-4 h-4 animate-spin"}),h?"Updating...":"Creating..."]}):r.jsxs(r.Fragment,{children:[r.jsx(Pn,{className:"w-4 h-4"}),h?"Update Category":"Create Category"]})})]})]})]})}),C&&_&&r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:r.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-lg mx-4",children:[r.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[r.jsxs("div",{children:[r.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Add Subcategories"}),r.jsxs("p",{className:"text-sm text-gray-500",children:["Adding to: ",r.jsx("span",{className:"font-medium text-primary-600",children:_.name})]})]}),r.jsx("button",{onClick:()=>{E(!1),T(null),P("")},className:"p-1 hover:bg-gray-100 rounded-lg",children:r.jsx(Ct,{className:"w-5 h-5 text-gray-500"})})]}),r.jsxs("div",{className:"p-4 space-y-4",children:[F(_.id).length>0&&r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Existing Subcategories"}),r.jsx("div",{className:"flex flex-wrap gap-2",children:F(_.id).map(oe=>r.jsx("span",{className:"inline-flex items-center px-2 py-1 bg-gray-100 text-gray-700 rounded-full text-xs",children:oe.name},oe.id))})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["New Subcategories ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("textarea",{value:A,onChange:oe=>P(oe.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",placeholder:"Enter subcategory names separated by commas, e.g.: Clothing, Electronics, Home & Garden",rows:3,autoFocus:!0}),r.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Separate multiple subcategories with commas (,)"})]}),A.trim()&&r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Preview (",A.split(",").filter(oe=>oe.trim()).length," subcategories)"]}),r.jsx("div",{className:"flex flex-wrap gap-2",children:A.split(",").map(oe=>oe.trim()).filter(oe=>oe.length>0).map((oe,ie)=>r.jsxs("span",{className:"inline-flex items-center px-2 py-1 bg-green-100 text-green-700 rounded-full text-xs",children:[r.jsx(sr,{className:"w-3 h-3 mr-1"}),oe]},ie))})]}),r.jsxs("div",{className:"flex gap-3 pt-4",children:[r.jsx("button",{type:"button",onClick:()=>{E(!1),T(null),P("")},className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50",children:"Cancel"}),r.jsx("button",{onClick:_e,disabled:M||!A.trim(),className:"flex-1 px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:M?r.jsxs(r.Fragment,{children:[r.jsx(Ke,{className:"w-4 h-4 animate-spin"}),"Adding..."]}):r.jsxs(r.Fragment,{children:[r.jsx(sr,{className:"w-4 h-4"}),"Add Subcategories"]})})]})]})]})})]})}const ai={async getMyBusinesses(){const e=localStorage.getItem("accessToken");if(!e)throw new Error("Not authenticated");let t;try{const n=JSON.parse(atob(e));if(n.exp<Date.now())throw new Error("Session expired");t=n.userId}catch{throw new Error("Invalid session")}const{data:s,error:a}=await X.from("merchant_businesses").select(`
        *,
        business_category:business_categories(id, name, icon)
      `).eq("merchant_id",t).order("created_at",{ascending:!1});if(a)throw console.error("Error fetching businesses:",a),new Error(a.message);return s||[]},async getBusiness(e){const{data:t,error:s}=await X.from("merchant_businesses").select(`
        *,
        business_category:business_categories(id, name, icon)
      `).eq("id",e).single();if(s)throw console.error("Error fetching business:",s),new Error(s.message);return t},async createBusiness(e){const t=localStorage.getItem("accessToken");if(!t)throw new Error("Not authenticated");let s;try{const i=JSON.parse(atob(t));if(i.exp<Date.now())throw new Error("Session expired");s=i.userId}catch{throw new Error("Invalid session")}const{data:a,error:n}=await X.from("merchant_businesses").insert({merchant_id:s,name:e.name,description:e.description||null,business_category_id:e.business_category_id||null,email:e.email||null,phone:e.phone||null,address:e.address||null,city:e.city||null,website_url:e.website_url||null,logo_url:e.logo_url||null}).select(`
        *,
        business_category:business_categories(id, name, icon)
      `).single();if(n)throw console.error("Error creating business:",n),new Error(n.message);return a},async updateBusiness(e,t){const{data:s,error:a}=await X.from("merchant_businesses").update(t).eq("id",e).select(`
        *,
        business_category:business_categories(id, name, icon)
      `).single();if(a)throw console.error("Error updating business:",a),new Error(a.message);return s},async toggleLiveMode(e,t){const s=await this.getBusiness(e);if(t&&s.approval_status!=="APPROVED"){if(s.approval_status==="REJECTED")throw new Error("Business has been rejected. Please contact support.");if(s.approval_status==="SUSPENDED")throw new Error("Business has been suspended. Please contact support.");if(s.approval_status==="PENDING"){const i=s.trial_live_transaction_limit||2,o=s.trial_live_transactions_used||0;if(i-o<=0)throw new Error(`You have used all ${i} trial live transactions. Please wait for admin approval to continue processing live payments.`)}}const{data:a,error:n}=await X.from("merchant_businesses").update({is_live_mode:t}).eq("id",e).select().single();if(n)throw console.error("Error toggling live mode:",n),new Error(n.message);return a},canProcessLiveTransaction(e){if(e.approval_status==="APPROVED")return{allowed:!0};if(e.approval_status==="REJECTED")return{allowed:!1,reason:"Business has been rejected. Please contact support."};if(e.approval_status==="SUSPENDED")return{allowed:!1,reason:"Business has been suspended. Please contact support."};const t=e.trial_live_transaction_limit||2,s=e.trial_live_transactions_used||0,a=t-s;return a<=0?{allowed:!1,reason:`You have used all ${t} trial live transactions. Please wait for admin approval to continue processing live payments.`,remaining:0}:{allowed:!0,remaining:a,reason:`${a} trial live transaction(s) remaining before approval required`}},async incrementTrialTransactionCount(e){const t=await this.getBusiness(e);if(t.approval_status!=="PENDING")return null;const{data:s,error:a}=await X.from("merchant_businesses").update({trial_live_transactions_used:(t.trial_live_transactions_used||0)+1}).eq("id",e).select().single();return a?(console.error("Error incrementing trial transaction count:",a),null):s},getTransactionLimitsInfo(e){if(e.approval_status==="APPROVED")return{testTransactions:"Unlimited",liveTransactions:"Unlimited",status:"unlimited"};if(e.approval_status==="REJECTED"||e.approval_status==="SUSPENDED")return{testTransactions:"Unlimited",liveTransactions:"Blocked",status:"blocked"};const t=e.trial_live_transaction_limit||2,s=e.trial_live_transactions_used||0;return{testTransactions:"Unlimited",liveTransactions:`${Math.max(0,t-s)} of ${t} trial remaining`,status:"trial"}},async regenerateApiKeys(e,t){const s=t==="live"?{live_public_key:null,live_secret_key:null}:{test_public_key:null,test_secret_key:null},{data:a,error:n}=await X.from("merchant_businesses").update(s).eq("id",e).select().single();if(n)throw console.error("Error regenerating API keys:",n),new Error(n.message);return a},async deleteBusiness(e){const{error:t}=await X.from("merchant_businesses").delete().eq("id",e);if(t)throw console.error("Error deleting business:",t),new Error(t.message)},async getAllBusinesses(e){let t=X.from("merchant_businesses").select(`
        *,
        business_category:business_categories(id, name, icon),
        merchant:users!merchant_id(id, first_name, last_name, email)
      `).order("created_at",{ascending:!1});e!=null&&e.approval_status&&e.approval_status!=="all"&&(t=t.eq("approval_status",e.approval_status)),e!=null&&e.status&&e.status!=="all"&&(t=t.eq("status",e.status));const{data:s,error:a}=await t;if(a)throw console.error("Error fetching all businesses:",a),new Error(a.message);let n=s||[];if(e!=null&&e.search){const i=e.search.toLowerCase();n=n.filter(o=>{var l,c,d,h,f;return o.name.toLowerCase().includes(i)||((l=o.email)==null?void 0:l.toLowerCase().includes(i))||((d=(c=o.merchant)==null?void 0:c.email)==null?void 0:d.toLowerCase().includes(i))||`${(h=o.merchant)==null?void 0:h.first_name} ${(f=o.merchant)==null?void 0:f.last_name}`.toLowerCase().includes(i)})}return n},async approveBusiness(e,t,s){const{data:a,error:n}=await X.from("merchant_businesses").update({approval_status:"APPROVED",approved_by:t,approved_at:new Date().toISOString(),approval_notes:s||"Approved by admin"}).eq("id",e).select().single();if(n)throw console.error("Error approving business:",n),new Error(n.message);return a},async rejectBusiness(e,t,s){const{data:a,error:n}=await X.from("merchant_businesses").update({approval_status:"REJECTED",approved_by:t,approved_at:new Date().toISOString(),approval_notes:s}).eq("id",e).select().single();if(n)throw console.error("Error rejecting business:",n),new Error(n.message);return a},async suspendBusiness(e,t,s){const{data:a,error:n}=await X.from("merchant_businesses").update({approval_status:"SUSPENDED",status:"SUSPENDED",approved_by:t,approval_notes:s,is_live_mode:!1}).eq("id",e).select().single();if(n)throw console.error("Error suspending business:",n),new Error(n.message);return a},async reactivateBusiness(e,t){const{data:s,error:a}=await X.from("merchant_businesses").update({approval_status:"APPROVED",status:"ACTIVE",approved_by:t,approval_notes:"Reactivated by admin"}).eq("id",e).select().single();if(a)throw console.error("Error reactivating business:",a),new Error(a.message);return s}};function cFe(){var q,H;const{user:e}=pt(),t=Ut(),[s,a]=p.useState([]),[n,i]=p.useState(!0),[o,l]=p.useState(""),[c,d]=p.useState("all"),[h,f]=p.useState("all"),[x,y]=p.useState(null),[v,w]=p.useState(!1),[N,k]=p.useState(!1),[C,E]=p.useState(""),[_,T]=p.useState(!1);p.useEffect(()=>{A()},[c,h]);const A=async()=>{i(!0);try{const K=await ai.getAllBusinesses({status:c,approval_status:h,search:o});a(K)}catch(K){console.error("Error fetching businesses:",K)}finally{i(!1)}},P=()=>{A()},M=async K=>{if(e){k(!0);try{await ai.approveBusiness(K.id,e.id,"Approved by admin"),A(),w(!1)}catch(V){console.error("Error approving business:",V)}finally{k(!1)}}},R=async()=>{if(!(!e||!x||!C)){k(!0);try{await ai.rejectBusiness(x.id,e.id,C),A(),T(!1),w(!1),E("")}catch(K){console.error("Error rejecting business:",K)}finally{k(!1)}}},$=async K=>{if(!e)return;const V=prompt("Enter reason for suspension:");if(V){k(!0);try{await ai.suspendBusiness(K.id,e.id,V),A(),w(!1)}catch(z){console.error("Error suspending business:",z)}finally{k(!1)}}},W=async K=>{if(e){k(!0);try{await ai.reactivateBusiness(K.id,e.id),A(),w(!1)}catch(V){console.error("Error reactivating business:",V)}finally{k(!1)}}},I=K=>{const V={PENDING:{color:"bg-yellow-100 text-yellow-700",icon:r.jsx(_t,{className:"w-3 h-3"}),label:"Pending"},APPROVED:{color:"bg-green-100 text-green-700",icon:r.jsx(Ae,{className:"w-3 h-3"}),label:"Approved"},REJECTED:{color:"bg-red-100 text-red-700",icon:r.jsx(Wt,{className:"w-3 h-3"}),label:"Rejected"},SUSPENDED:{color:"bg-gray-100 text-gray-700",icon:r.jsx(_l,{className:"w-3 h-3"}),label:"Suspended"}},z=V[K]||V.PENDING;return r.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium ${z.color}`,children:[z.icon,z.label]})},B=K=>{const V=K==="ACTIVE";return r.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${V?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:V?"Active":"Inactive"})},O=o?s.filter(K=>{var V,z,G;return K.name.toLowerCase().includes(o.toLowerCase())||((V=K.email)==null?void 0:V.toLowerCase().includes(o.toLowerCase()))||((G=(z=K.merchant)==null?void 0:z.email)==null?void 0:G.toLowerCase().includes(o.toLowerCase()))}):s,F={total:s.length,pending:s.filter(K=>K.approval_status==="PENDING").length,approved:s.filter(K=>K.approval_status==="APPROVED").length,live:s.filter(K=>K.is_live_mode).length};return r.jsxs(fr,{children:[r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Business Management"}),r.jsx("p",{className:"text-gray-500",children:"Review and manage merchant businesses"})]}),r.jsxs("button",{onClick:A,className:"px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 flex items-center gap-2",children:[r.jsx(Ot,{className:"w-4 h-4"}),"Refresh"]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[r.jsx(se,{className:"p-4",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:r.jsx(mr,{className:"w-5 h-5 text-blue-600"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-500",children:"Total Businesses"}),r.jsx("p",{className:"text-xl font-semibold",children:F.total})]})]})}),r.jsx(se,{className:"p-4",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"p-2 bg-yellow-100 rounded-lg",children:r.jsx(_t,{className:"w-5 h-5 text-yellow-600"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-500",children:"Pending Approval"}),r.jsx("p",{className:"text-xl font-semibold",children:F.pending})]})]})}),r.jsx(se,{className:"p-4",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:r.jsx(Ae,{className:"w-5 h-5 text-green-600"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-500",children:"Approved"}),r.jsx("p",{className:"text-xl font-semibold",children:F.approved})]})]})}),r.jsx(se,{className:"p-4",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"p-2 bg-purple-100 rounded-lg",children:r.jsx(mc,{className:"w-5 h-5 text-purple-600"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-500",children:"Live Mode"}),r.jsx("p",{className:"text-xl font-semibold",children:F.live})]})]})})]}),r.jsx(se,{className:"p-4",children:r.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[r.jsxs("div",{className:"flex-1 relative",children:[r.jsx(Nr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),r.jsx("input",{type:"text",placeholder:"Search by business name or merchant email...",value:o,onChange:K=>l(K.target.value),onKeyDown:K=>K.key==="Enter"&&P(),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500"})]}),r.jsxs("select",{value:h,onChange:K=>f(K.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",children:[r.jsx("option",{value:"all",children:"All Approval Status"}),r.jsx("option",{value:"PENDING",children:"Pending"}),r.jsx("option",{value:"APPROVED",children:"Approved"}),r.jsx("option",{value:"REJECTED",children:"Rejected"}),r.jsx("option",{value:"SUSPENDED",children:"Suspended"})]}),r.jsxs("select",{value:c,onChange:K=>d(K.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",children:[r.jsx("option",{value:"all",children:"All Status"}),r.jsx("option",{value:"ACTIVE",children:"Active"}),r.jsx("option",{value:"INACTIVE",children:"Inactive"}),r.jsx("option",{value:"SUSPENDED",children:"Suspended"})]})]})}),r.jsxs(se,{className:"overflow-hidden",children:[n?r.jsxs("div",{className:"p-8 text-center",children:[r.jsx(Ke,{className:"w-8 h-8 animate-spin text-primary-600 mx-auto"}),r.jsx("p",{className:"mt-2 text-gray-500",children:"Loading businesses..."})]}):r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{className:"bg-gray-50",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Business"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Merchant"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Approval"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Mode"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Progress"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Created"}),r.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Actions"})]})}),r.jsx("tbody",{className:"divide-y divide-gray-200",children:O.map(K=>r.jsxs("tr",{className:"hover:bg-gray-50",children:[r.jsx("td",{className:"px-6 py-4",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-10 h-10 bg-primary-100 rounded-lg flex items-center justify-center",children:r.jsx(mr,{className:"w-5 h-5 text-primary-600"})}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-gray-900",children:K.name}),r.jsx("p",{className:"text-sm text-gray-500",children:K.slug})]})]})}),r.jsx("td",{className:"px-6 py-4",children:K.merchant&&r.jsxs("div",{children:[r.jsxs("p",{className:"text-sm font-medium text-gray-900",children:[K.merchant.first_name," ",K.merchant.last_name]}),r.jsx("p",{className:"text-sm text-gray-500",children:K.merchant.email})]})}),r.jsx("td",{className:"px-6 py-4",children:I(K.approval_status)}),r.jsx("td",{className:"px-6 py-4",children:r.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${K.is_live_mode?"bg-green-100 text-green-700":"bg-orange-100 text-orange-700"}`,children:K.is_live_mode?"Live":"Test"})}),r.jsx("td",{className:"px-6 py-4",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"flex-1 bg-gray-200 rounded-full h-2 w-20",children:r.jsx("div",{className:"bg-primary-600 h-2 rounded-full transition-all",style:{width:`${(K.sandbox_transactions_used||0)/(K.sandbox_transaction_limit||1)*100}%`}})}),r.jsxs("span",{className:"text-xs text-gray-500",children:[K.sandbox_transactions_used||0,"/",K.sandbox_transaction_limit||0]})]})}),r.jsx("td",{className:"px-6 py-4",children:r.jsx("p",{className:"text-sm text-gray-500",children:new Date(K.created_at).toLocaleDateString()})}),r.jsx("td",{className:"px-6 py-4 text-right",children:r.jsxs("div",{className:"flex items-center justify-end gap-2",children:[r.jsx("button",{onClick:()=>t(`/admin/businesses/${K.id}`),className:"p-2 hover:bg-gray-100 rounded-lg",title:"View Details",children:r.jsx(ir,{className:"w-4 h-4 text-gray-500"})}),K.approval_status==="PENDING"&&r.jsxs(r.Fragment,{children:[r.jsx("button",{onClick:()=>M(K),disabled:N,className:"p-2 hover:bg-green-100 rounded-lg text-green-600",title:"Approve",children:r.jsx(Ae,{className:"w-4 h-4"})}),r.jsx("button",{onClick:()=>{y(K),T(!0)},disabled:N,className:"p-2 hover:bg-red-100 rounded-lg text-red-600",title:"Reject",children:r.jsx(Wt,{className:"w-4 h-4"})})]}),K.approval_status==="APPROVED"&&r.jsx("button",{onClick:()=>$(K),disabled:N,className:"p-2 hover:bg-red-100 rounded-lg text-red-600",title:"Suspend",children:r.jsx(_l,{className:"w-4 h-4"})}),K.approval_status==="SUSPENDED"&&r.jsx("button",{onClick:()=>W(K),disabled:N,className:"p-2 hover:bg-green-100 rounded-lg text-green-600",title:"Reactivate",children:r.jsx(Ot,{className:"w-4 h-4"})})]})})]},K.id))})]}),!n&&O.length===0&&r.jsxs("div",{className:"p-8 text-center",children:[r.jsx(mr,{className:"w-12 h-12 text-gray-300 mx-auto mb-3"}),r.jsx("p",{className:"text-gray-500",children:"No businesses found"})]})]})]}),v&&x&&r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:r.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[r.jsxs("div",{className:"flex items-center justify-between p-4 border-b sticky top-0 bg-white",children:[r.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Business Details"}),r.jsx("button",{onClick:()=>w(!1),className:"p-1 hover:bg-gray-100 rounded-lg",children:r.jsx(Ct,{className:"w-5 h-5 text-gray-500"})})]}),r.jsxs("div",{className:"p-4 space-y-6",children:[r.jsxs("div",{className:"flex items-start gap-4",children:[r.jsx("div",{className:"w-16 h-16 bg-primary-100 rounded-lg flex items-center justify-center",children:r.jsx(mr,{className:"w-8 h-8 text-primary-600"})}),r.jsxs("div",{className:"flex-1",children:[r.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:x.name}),r.jsx("p",{className:"text-gray-500",children:x.slug}),r.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[I(x.approval_status),B(x.status),r.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${x.is_live_mode?"bg-green-100 text-green-700":"bg-orange-100 text-orange-700"}`,children:x.is_live_mode?"Live Mode":"Test Mode"})]})]})]}),x.merchant&&r.jsxs(se,{className:"p-4",children:[r.jsxs("h4",{className:"font-medium text-gray-900 mb-3 flex items-center gap-2",children:[r.jsx(br,{className:"w-4 h-4"}),"Merchant Owner"]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-500",children:"Name"}),r.jsxs("p",{className:"font-medium",children:[x.merchant.first_name," ",x.merchant.last_name]})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-500",children:"Email"}),r.jsx("p",{className:"font-medium",children:x.merchant.email})]})]})]}),r.jsxs(se,{className:"p-4",children:[r.jsx("h4",{className:"font-medium text-gray-900 mb-3",children:"Business Information"}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[x.email&&r.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[r.jsx(On,{className:"w-4 h-4 text-gray-400"}),r.jsx("span",{children:x.email})]}),x.phone&&r.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[r.jsx(Ss,{className:"w-4 h-4 text-gray-400"}),r.jsx("span",{children:x.phone})]}),x.website_url&&r.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[r.jsx(Oi,{className:"w-4 h-4 text-gray-400"}),r.jsxs("a",{href:x.website_url,target:"_blank",rel:"noopener noreferrer",className:"text-primary-600 hover:underline flex items-center gap-1",children:[x.website_url,r.jsx(da,{className:"w-3 h-3"})]})]}),(x.address||x.city)&&r.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[r.jsx(Vi,{className:"w-4 h-4 text-gray-400"}),r.jsx("span",{children:[x.address,x.city,x.country].filter(Boolean).join(", ")})]}),x.business_category&&r.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[r.jsx(Da,{className:"w-4 h-4 text-gray-400"}),r.jsx("span",{children:x.business_category.name})]}),r.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[r.jsx(Li,{className:"w-4 h-4 text-gray-400"}),r.jsxs("span",{children:["Created ",new Date(x.created_at).toLocaleDateString()]})]})]}),x.description&&r.jsx("div",{className:"mt-4 pt-4 border-t",children:r.jsx("p",{className:"text-sm text-gray-600",children:x.description})})]}),r.jsxs(se,{className:"p-4",children:[r.jsx("h4",{className:"font-medium text-gray-900 mb-3",children:"Sandbox Progress"}),r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("div",{className:"flex-1",children:r.jsx("div",{className:"bg-gray-200 rounded-full h-3",children:r.jsx("div",{className:"bg-primary-600 h-3 rounded-full transition-all",style:{width:`${(x.sandbox_transactions_used||0)/(x.sandbox_transaction_limit||1)*100}%`}})})}),r.jsxs("span",{className:"text-sm font-medium text-gray-700",children:[x.sandbox_transactions_used||0," / ",x.sandbox_transaction_limit||0]})]}),r.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Test transactions completed before live mode eligibility"})]}),r.jsxs(se,{className:"p-4",children:[r.jsxs("h4",{className:"font-medium text-gray-900 mb-3 flex items-center gap-2",children:[r.jsx(mc,{className:"w-4 h-4"}),"API Keys"]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-gray-500 mb-1",children:"Test Public Key"}),r.jsxs("code",{className:"text-xs bg-gray-100 px-2 py-1 rounded",children:[(q=x.test_public_key)==null?void 0:q.substring(0,20),"..."]})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-gray-500 mb-1",children:"Live Public Key"}),r.jsxs("code",{className:"text-xs bg-gray-100 px-2 py-1 rounded",children:[(H=x.live_public_key)==null?void 0:H.substring(0,20),"..."]})]})]})]}),x.approval_notes&&r.jsxs(se,{className:"p-4",children:[r.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Approval Notes"}),r.jsx("p",{className:"text-sm text-gray-600",children:x.approval_notes}),x.approved_at&&r.jsxs("p",{className:"text-xs text-gray-400 mt-2",children:[x.approval_status==="APPROVED"?"Approved":"Reviewed"," on"," ",new Date(x.approved_at).toLocaleString()]})]}),r.jsxs("div",{className:"flex gap-3 pt-4 border-t",children:[x.approval_status==="PENDING"&&r.jsxs(r.Fragment,{children:[r.jsxs("button",{onClick:()=>M(x),disabled:N,className:"flex-1 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50 flex items-center justify-center gap-2",children:[N?r.jsx(Ke,{className:"w-4 h-4 animate-spin"}):r.jsx(Ae,{className:"w-4 h-4"}),"Approve Business"]}),r.jsxs("button",{onClick:()=>T(!0),disabled:N,className:"flex-1 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 disabled:opacity-50 flex items-center justify-center gap-2",children:[r.jsx(Wt,{className:"w-4 h-4"}),"Reject"]})]}),x.approval_status==="APPROVED"&&r.jsxs("button",{onClick:()=>$(x),disabled:N,className:"flex-1 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 disabled:opacity-50 flex items-center justify-center gap-2",children:[r.jsx(_l,{className:"w-4 h-4"}),"Suspend Business"]}),x.approval_status==="SUSPENDED"&&r.jsxs("button",{onClick:()=>W(x),disabled:N,className:"flex-1 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50 flex items-center justify-center gap-2",children:[r.jsx(Ot,{className:"w-4 h-4"}),"Reactivate Business"]}),r.jsx("button",{onClick:()=>w(!1),className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50",children:"Close"})]})]})]})}),_&&x&&r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:r.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md",children:[r.jsx("div",{className:"p-4 border-b",children:r.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Reject Business"})}),r.jsxs("div",{className:"p-4 space-y-4",children:[r.jsxs("p",{className:"text-gray-600",children:["Please provide a reason for rejecting ",r.jsx("strong",{children:x.name}),". This will be visible to the merchant."]}),r.jsx("textarea",{value:C,onChange:K=>E(K.target.value),placeholder:"Enter rejection reason...",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500",rows:4}),r.jsxs("div",{className:"flex gap-3",children:[r.jsx("button",{onClick:()=>{T(!1),E("")},className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50",children:"Cancel"}),r.jsx("button",{onClick:R,disabled:N||!C,className:"flex-1 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 disabled:opacity-50 flex items-center justify-center gap-2",children:N?r.jsx(Ke,{className:"w-4 h-4 animate-spin"}):"Reject Business"})]})]})]})})]})}function dFe(){const{businessId:e}=Ui(),t=Ut(),{user:s}=pt(),[a,n]=p.useState(null),[i,o]=p.useState(!0),[l,c]=p.useState(!1),[d,h]=p.useState(""),[f,x]=p.useState(!1),[y,v]=p.useState(null),[w,N]=p.useState("overview");p.useEffect(()=>{e&&k()},[e]);const k=async()=>{if(e){o(!0);try{const M=await ai.getBusiness(e);n(M)}catch(M){console.error("Error fetching business:",M)}finally{o(!1)}}},C=async()=>{if(!(!s||!a)){c(!0);try{await ai.approveBusiness(a.id,s.id,"Approved by admin"),k()}catch(M){console.error("Error approving business:",M)}finally{c(!1)}}},E=async()=>{if(!(!s||!a||!d)){c(!0);try{await ai.rejectBusiness(a.id,s.id,d),k(),x(!1),h("")}catch(M){console.error("Error rejecting business:",M)}finally{c(!1)}}},_=async()=>{if(!s||!a)return;const M=prompt("Enter reason for suspension:");if(M){c(!0);try{await ai.suspendBusiness(a.id,s.id,M),k()}catch(R){console.error("Error suspending business:",R)}finally{c(!1)}}},T=async()=>{if(!(!s||!a)){c(!0);try{await ai.reactivateBusiness(a.id,s.id),k()}catch(M){console.error("Error reactivating business:",M)}finally{c(!1)}}},A=(M,R)=>{navigator.clipboard.writeText(M),v(R),setTimeout(()=>v(null),2e3)},P=M=>{const R={PENDING:{color:"bg-yellow-100 text-yellow-700",icon:r.jsx(_t,{className:"w-4 h-4"}),label:"Pending"},APPROVED:{color:"bg-green-100 text-green-700",icon:r.jsx(Ae,{className:"w-4 h-4"}),label:"Approved"},REJECTED:{color:"bg-red-100 text-red-700",icon:r.jsx(Wt,{className:"w-4 h-4"}),label:"Rejected"},SUSPENDED:{color:"bg-gray-100 text-gray-700",icon:r.jsx(_l,{className:"w-4 h-4"}),label:"Suspended"}},$=R[M]||R.PENDING;return r.jsxs("span",{className:`inline-flex items-center gap-1.5 px-3 py-1.5 rounded-full text-sm font-medium ${$.color}`,children:[$.icon,$.label]})};return i?r.jsx(fr,{children:r.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:r.jsx(Ke,{className:"w-8 h-8 animate-spin text-primary-600"})})}):a?r.jsxs(fr,{children:[r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("button",{onClick:()=>t("/admin/businesses"),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:r.jsx(Ar,{className:"w-5 h-5 text-gray-500"})}),r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:a.name}),P(a.approval_status),r.jsx("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-sm font-medium ${a.status==="ACTIVE"?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:a.status==="ACTIVE"?"Active":"Inactive"}),r.jsx("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-sm font-medium ${a.is_live_mode?"bg-purple-100 text-purple-700":"bg-orange-100 text-orange-700"}`,children:a.is_live_mode?"Live Mode":"Test Mode"})]}),r.jsx("p",{className:"text-gray-500 mt-1",children:a.slug})]})]}),r.jsxs("div",{className:"flex flex-wrap gap-3",children:[a.approval_status==="PENDING"&&r.jsxs(r.Fragment,{children:[r.jsxs("button",{onClick:C,disabled:l,className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50 flex items-center gap-2",children:[l?r.jsx(Ke,{className:"w-4 h-4 animate-spin"}):r.jsx(Ae,{className:"w-4 h-4"}),"Approve Business"]}),r.jsxs("button",{onClick:()=>x(!0),disabled:l,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 disabled:opacity-50 flex items-center gap-2",children:[r.jsx(Wt,{className:"w-4 h-4"}),"Reject"]})]}),a.approval_status==="APPROVED"&&r.jsxs("button",{onClick:_,disabled:l,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 disabled:opacity-50 flex items-center gap-2",children:[r.jsx(_l,{className:"w-4 h-4"}),"Suspend Business"]}),a.approval_status==="SUSPENDED"&&r.jsxs("button",{onClick:T,disabled:l,className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50 flex items-center gap-2",children:[r.jsx(Ot,{className:"w-4 h-4"}),"Reactivate Business"]})]}),r.jsx("div",{className:"border-b border-gray-200",children:r.jsx("nav",{className:"flex gap-6",children:["overview","transactions","settings"].map(M=>r.jsx("button",{onClick:()=>N(M),className:`pb-3 px-1 text-sm font-medium border-b-2 transition-colors ${w===M?"border-primary-600 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:M.charAt(0).toUpperCase()+M.slice(1)},M))})}),w==="overview"&&r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[r.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[r.jsxs(se,{className:"p-6",children:[r.jsxs("div",{className:"flex items-start gap-4 mb-6",children:[a.logo_url?r.jsx("img",{src:a.logo_url,alt:a.name,className:"w-20 h-20 rounded-lg object-cover"}):r.jsx("div",{className:"w-20 h-20 bg-primary-100 rounded-lg flex items-center justify-center",children:r.jsx(mr,{className:"w-10 h-10 text-primary-600"})}),r.jsxs("div",{className:"flex-1",children:[r.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:a.name}),r.jsx("p",{className:"text-gray-500",children:a.slug}),a.business_category&&r.jsxs("div",{className:"flex items-center gap-2 mt-2 text-sm text-gray-600",children:[r.jsx(Da,{className:"w-4 h-4"}),r.jsx("span",{children:a.business_category.name})]})]})]}),a.description&&r.jsx("div",{className:"mb-6 p-4 bg-gray-50 rounded-lg",children:r.jsx("p",{className:"text-sm text-gray-600 leading-relaxed",children:a.description})}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.email&&r.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg",children:[r.jsx(On,{className:"w-5 h-5 text-gray-400"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-xs text-gray-500",children:"Email"}),r.jsx("p",{className:"text-sm font-medium",children:a.email})]})]}),a.phone&&r.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg",children:[r.jsx(Ss,{className:"w-5 h-5 text-gray-400"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-xs text-gray-500",children:"Phone"}),r.jsx("p",{className:"text-sm font-medium",children:a.phone})]})]}),a.website_url&&r.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg",children:[r.jsx(Oi,{className:"w-5 h-5 text-gray-400"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-xs text-gray-500",children:"Website"}),r.jsxs("a",{href:a.website_url,target:"_blank",rel:"noopener noreferrer",className:"text-sm font-medium text-primary-600 hover:underline flex items-center gap-1",children:[a.website_url,r.jsx(da,{className:"w-3 h-3"})]})]})]}),(a.address||a.city)&&r.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg",children:[r.jsx(Vi,{className:"w-5 h-5 text-gray-400"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-xs text-gray-500",children:"Address"}),r.jsx("p",{className:"text-sm font-medium",children:[a.address,a.city,a.country].filter(Boolean).join(", ")})]})]}),r.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg",children:[r.jsx(Li,{className:"w-5 h-5 text-gray-400"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-xs text-gray-500",children:"Created"}),r.jsx("p",{className:"text-sm font-medium",children:new Date(a.created_at).toLocaleDateString()})]})]})]})]}),a.merchant&&r.jsxs(se,{className:"p-6",children:[r.jsxs("h4",{className:"font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[r.jsx(br,{className:"w-5 h-5 text-primary-600"}),"Merchant Owner"]}),r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("div",{className:"w-12 h-12 bg-primary-100 rounded-full flex items-center justify-center",children:r.jsx(br,{className:"w-6 h-6 text-primary-600"})}),r.jsxs("div",{children:[r.jsxs("p",{className:"font-medium text-gray-900",children:[a.merchant.first_name," ",a.merchant.last_name]}),r.jsx("p",{className:"text-sm text-gray-500",children:a.merchant.email})]}),r.jsx(xt,{to:`/admin/users/${a.merchant.id}`,className:"ml-auto px-3 py-1.5 text-sm border border-gray-300 rounded-lg hover:bg-gray-50",children:"View Profile"})]})]}),r.jsxs(se,{className:"p-6",children:[r.jsxs("h4",{className:"font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[r.jsx(mc,{className:"w-5 h-5 text-primary-600"}),"API Keys"]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Test Public Key"}),r.jsx("span",{className:"text-xs px-2 py-0.5 bg-orange-100 text-orange-700 rounded",children:"Test"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("code",{className:"flex-1 text-sm bg-gray-100 px-3 py-2 rounded font-mono",children:a.test_public_key||"Not generated"}),a.test_public_key&&r.jsx("button",{onClick:()=>A(a.test_public_key,"test_public"),className:"p-2 hover:bg-gray-100 rounded-lg",children:y==="test_public"?r.jsx(Hr,{className:"w-4 h-4 text-green-600"}):r.jsx(Pr,{className:"w-4 h-4 text-gray-400"})})]})]}),r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Live Public Key"}),r.jsx("span",{className:"text-xs px-2 py-0.5 bg-green-100 text-green-700 rounded",children:"Live"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("code",{className:"flex-1 text-sm bg-gray-100 px-3 py-2 rounded font-mono",children:a.live_public_key||"Not generated"}),a.live_public_key&&r.jsx("button",{onClick:()=>A(a.live_public_key,"live_public"),className:"p-2 hover:bg-gray-100 rounded-lg",children:y==="live_public"?r.jsx(Hr,{className:"w-4 h-4 text-green-600"}):r.jsx(Pr,{className:"w-4 h-4 text-gray-400"})})]})]}),r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Test Secret Key"}),r.jsx("span",{className:"text-xs px-2 py-0.5 bg-orange-100 text-orange-700 rounded",children:"Test"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("code",{className:"flex-1 text-sm bg-gray-100 px-3 py-2 rounded font-mono",children:a.test_secret_key?`${a.test_secret_key.substring(0,15)}...`:"Not generated"}),a.test_secret_key&&r.jsx("button",{onClick:()=>A(a.test_secret_key,"test_secret"),className:"p-2 hover:bg-gray-100 rounded-lg",children:y==="test_secret"?r.jsx(Hr,{className:"w-4 h-4 text-green-600"}):r.jsx(Pr,{className:"w-4 h-4 text-gray-400"})})]})]}),r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Live Secret Key"}),r.jsx("span",{className:"text-xs px-2 py-0.5 bg-green-100 text-green-700 rounded",children:"Live"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("code",{className:"flex-1 text-sm bg-gray-100 px-3 py-2 rounded font-mono",children:a.live_secret_key?`${a.live_secret_key.substring(0,15)}...`:"Not generated"}),a.live_secret_key&&r.jsx("button",{onClick:()=>A(a.live_secret_key,"live_secret"),className:"p-2 hover:bg-gray-100 rounded-lg",children:y==="live_secret"?r.jsx(Hr,{className:"w-4 h-4 text-green-600"}):r.jsx(Pr,{className:"w-4 h-4 text-gray-400"})})]})]})]})]})]}),r.jsxs("div",{className:"space-y-6",children:[r.jsxs(se,{className:"p-6",children:[r.jsxs("h4",{className:"font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[r.jsx(Ts,{className:"w-5 h-5 text-primary-600"}),"Sandbox Progress"]}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex items-center justify-between text-sm",children:[r.jsx("span",{className:"text-gray-500",children:"Test Transactions"}),r.jsxs("span",{className:"font-medium",children:[a.sandbox_transactions_used||0," / ",a.sandbox_transaction_limit||0]})]}),r.jsx("div",{className:"bg-gray-200 rounded-full h-3",children:r.jsx("div",{className:"bg-primary-600 h-3 rounded-full transition-all",style:{width:`${Math.min((a.sandbox_transactions_used||0)/(a.sandbox_transaction_limit||1)*100,100)}%`}})}),r.jsx("p",{className:"text-xs text-gray-500",children:"Complete sandbox transactions to unlock live mode"})]})]}),a.approval_notes&&r.jsxs(se,{className:"p-6",children:[r.jsxs("h4",{className:"font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[r.jsx(ao,{className:"w-5 h-5 text-primary-600"}),"Approval Notes"]}),r.jsx("p",{className:"text-sm text-gray-600",children:a.approval_notes}),a.approved_at&&r.jsxs("p",{className:"text-xs text-gray-400 mt-3",children:[a.approval_status==="APPROVED"?"Approved":"Reviewed"," on"," ",new Date(a.approved_at).toLocaleString()]})]}),r.jsxs(se,{className:"p-6",children:[r.jsxs("h4",{className:"font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[r.jsx(lt,{className:"w-5 h-5 text-primary-600"}),"Quick Stats"]}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"text-sm text-gray-500",children:"Total Transactions"}),r.jsx("span",{className:"font-medium",children:"-"})]}),r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"text-sm text-gray-500",children:"Total Volume"}),r.jsx("span",{className:"font-medium",children:"-"})]}),r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"text-sm text-gray-500",children:"Success Rate"}),r.jsx("span",{className:"font-medium",children:"-"})]})]})]})]})]}),w==="transactions"&&r.jsx(se,{className:"p-6",children:r.jsxs("div",{className:"text-center py-12",children:[r.jsx(lt,{className:"w-12 h-12 text-gray-300 mx-auto mb-3"}),r.jsx("p",{className:"text-gray-500",children:"Transaction history coming soon"})]})}),w==="settings"&&r.jsx(se,{className:"p-6",children:r.jsxs("div",{className:"text-center py-12",children:[r.jsx(rr,{className:"w-12 h-12 text-gray-300 mx-auto mb-3"}),r.jsx("p",{className:"text-gray-500",children:"Business settings coming soon"})]})})]}),f&&a&&r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:r.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md",children:[r.jsx("div",{className:"p-4 border-b",children:r.jsxs("h2",{className:"text-lg font-semibold text-gray-900 flex items-center gap-2",children:[r.jsx(Ht,{className:"w-5 h-5 text-red-600"}),"Reject Business"]})}),r.jsxs("div",{className:"p-4 space-y-4",children:[r.jsxs("p",{className:"text-gray-600",children:["Please provide a reason for rejecting ",r.jsx("strong",{children:a.name}),". This will be visible to the merchant."]}),r.jsx("textarea",{value:d,onChange:M=>h(M.target.value),placeholder:"Enter rejection reason...",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500",rows:4}),r.jsxs("div",{className:"flex gap-3",children:[r.jsx("button",{onClick:()=>{x(!1),h("")},className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50",children:"Cancel"}),r.jsx("button",{onClick:E,disabled:l||!d,className:"flex-1 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 disabled:opacity-50 flex items-center justify-center gap-2",children:l?r.jsx(Ke,{className:"w-4 h-4 animate-spin"}):"Reject Business"})]})]})]})})]}):r.jsx(fr,{children:r.jsxs("div",{className:"text-center py-12",children:[r.jsx(mr,{className:"w-12 h-12 text-gray-300 mx-auto mb-3"}),r.jsx("p",{className:"text-gray-500",children:"Business not found"}),r.jsx("button",{onClick:()=>t("/admin/businesses"),className:"mt-4 text-primary-600 hover:underline",children:"Back to Businesses"})]})})}const uFe=[{id:"TKT-001",subject:"Cannot access my wallet",user:"john@example.com",status:"open",priority:"high",createdAt:"2024-01-15"},{id:"TKT-002",subject:"Transaction failed but money deducted",user:"mary@example.com",status:"in_progress",priority:"high",createdAt:"2024-01-14"},{id:"TKT-003",subject:"Card not working at merchant",user:"peter@example.com",status:"resolved",priority:"medium",createdAt:"2024-01-13"}],hFe={open:"bg-yellow-100 text-yellow-800",in_progress:"bg-blue-100 text-blue-800",resolved:"bg-green-100 text-green-800",closed:"bg-gray-100 text-gray-800"},mFe={low:"bg-gray-100 text-gray-800",medium:"bg-orange-100 text-orange-800",high:"bg-red-100 text-red-800"};function fFe(){const[e]=p.useState(uFe),[t,s]=p.useState(""),a=e.filter(n=>n.subject.toLowerCase().includes(t.toLowerCase())||n.user.toLowerCase().includes(t.toLowerCase())||n.id.toLowerCase().includes(t.toLowerCase()));return r.jsx(fr,{children:r.jsxs("div",{className:"space-y-6",children:[r.jsx("div",{className:"flex items-center justify-between",children:r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Support Tickets"}),r.jsx("p",{className:"text-gray-500 mt-1",children:"Manage customer support requests"})]})}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[r.jsx(se,{className:"p-4",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"p-2 bg-yellow-100 rounded-lg",children:r.jsx(dt,{className:"w-5 h-5 text-yellow-600"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-2xl font-bold",children:e.filter(n=>n.status==="open").length}),r.jsx("p",{className:"text-sm text-gray-500",children:"Open"})]})]})}),r.jsx(se,{className:"p-4",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:r.jsx(_t,{className:"w-5 h-5 text-blue-600"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-2xl font-bold",children:e.filter(n=>n.status==="in_progress").length}),r.jsx("p",{className:"text-sm text-gray-500",children:"In Progress"})]})]})}),r.jsx(se,{className:"p-4",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:r.jsx(Ae,{className:"w-5 h-5 text-green-600"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-2xl font-bold",children:e.filter(n=>n.status==="resolved").length}),r.jsx("p",{className:"text-sm text-gray-500",children:"Resolved"})]})]})}),r.jsx(se,{className:"p-4",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"p-2 bg-gray-100 rounded-lg",children:r.jsx(Tu,{className:"w-5 h-5 text-gray-600"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-2xl font-bold",children:e.length}),r.jsx("p",{className:"text-sm text-gray-500",children:"Total"})]})]})})]}),r.jsxs(se,{children:[r.jsx(pa,{children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx(ya,{children:"All Tickets"}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs("div",{className:"relative",children:[r.jsx(Nr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),r.jsx("input",{type:"text",value:t,onChange:n=>s(n.target.value),placeholder:"Search tickets...",className:"pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500"})]}),r.jsxs(Oe,{variant:"outline",children:[r.jsx(el,{className:"w-4 h-4 mr-2"}),"Filter"]})]})]})}),r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{className:"bg-gray-50",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"ID"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Subject"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"User"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Status"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Priority"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Created"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Actions"})]})}),r.jsx("tbody",{className:"divide-y divide-gray-200",children:a.map(n=>r.jsxs("tr",{className:"hover:bg-gray-50",children:[r.jsx("td",{className:"px-6 py-4 text-sm font-mono text-gray-900",children:n.id}),r.jsx("td",{className:"px-6 py-4 text-sm text-gray-900",children:n.subject}),r.jsx("td",{className:"px-6 py-4 text-sm text-gray-500",children:n.user}),r.jsx("td",{className:"px-6 py-4",children:r.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${hFe[n.status]}`,children:n.status.replace("_"," ")})}),r.jsx("td",{className:"px-6 py-4",children:r.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${mFe[n.priority]}`,children:n.priority})}),r.jsx("td",{className:"px-6 py-4 text-sm text-gray-500",children:n.createdAt}),r.jsx("td",{className:"px-6 py-4",children:r.jsx(Oe,{variant:"ghost",size:"sm",children:"View"})})]},n.id))})]})})]})]})})}const xFe={card_order:sh,kyc_request:Tl,dispute:Ht,system:bs,user_registration:A6,transaction_flagged:Tf,support_ticket:Uo},CF={urgent:"bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-400",high:"bg-orange-100 dark:bg-orange-900/30 text-orange-700 dark:text-orange-400",medium:"bg-yellow-100 dark:bg-yellow-900/30 text-yellow-700 dark:text-yellow-400",low:"bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-400"},_F={unread:"bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-400",read:"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-400",archived:"bg-gray-100 dark:bg-gray-700 text-gray-500 dark:text-gray-500"};function gFe(){var F;const{user:e}=pt(),t=Ut(),[s,a]=bc(),n=s.get("id"),i=p.useRef(null),[o,l]=p.useState([]),[c,d]=p.useState(!0),[h,f]=p.useState([]),[x,y]=p.useState({type:"",status:"",priority:"",search:""}),[v,w]=p.useState({total:0,unread:0,cardOrders:0,highPriority:0}),[N,k]=p.useState(null);p.useEffect(()=>{n&&i.current&&!c&&i.current.scrollIntoView({behavior:"smooth",block:"center"})},[n,c]),p.useEffect(()=>{C();const q=X.channel("admin_notifications_realtime").on("postgres_changes",{event:"*",schema:"public",table:"admin_notifications"},()=>{C()}).subscribe();return()=>{X.removeChannel(q)}},[x.type,x.status,x.priority]);const C=async()=>{d(!0);try{let q=X.from("admin_notifications").select("*").order("created_at",{ascending:!1});x.type&&(q=q.eq("type",x.type)),x.status&&(q=q.eq("status",x.status)),x.priority&&(q=q.eq("priority",x.priority));const{data:H,error:K}=await q;if(K)console.error("Error fetching notifications:",K),l([]);else{let V=H||[];if(x.search){const G=x.search.toLowerCase();V=V.filter(te=>te.title.toLowerCase().includes(G)||te.message.toLowerCase().includes(G))}l(V);const z=H||[];w({total:z.length,unread:z.filter(G=>G.status==="unread").length,cardOrders:z.filter(G=>G.type==="card_order").length,highPriority:z.filter(G=>G.priority==="high"||G.priority==="urgent").length})}}catch(q){console.error("Error:",q)}finally{d(!1)}},E=async q=>{if(!(e!=null&&e.id))return;const{error:H}=await X.from("admin_notifications").update({status:"read",read_by:e.id,read_at:new Date().toISOString()}).eq("id",q);H||(l(K=>K.map(V=>V.id===q?{...V,status:"read"}:V)),w(K=>({...K,unread:Math.max(0,K.unread-1)})))};p.useEffect(()=>{if(n&&o.length>0&&!c){const q=o.find(H=>H.id===n);q&&k(q)}},[n,o,c]);const _=async()=>{if(!(e!=null&&e.id))return;const{error:q}=await X.from("admin_notifications").update({status:"read",read_by:e.id,read_at:new Date().toISOString()}).eq("status","unread");q||(l(H=>H.map(K=>({...K,status:"read"}))),w(H=>({...H,unread:0})))},T=async q=>{const{error:H}=await X.from("admin_notifications").update({status:"archived"}).eq("id",q);H||C()},A=async q=>{const{error:H}=await X.from("admin_notifications").delete().eq("id",q);H||(l(K=>K.filter(V=>V.id!==q)),w(K=>({...K,total:K.total-1})))},P=async()=>{if(!(e!=null&&e.id)||h.length===0)return;const{error:q}=await X.from("admin_notifications").update({status:"read",read_by:e.id,read_at:new Date().toISOString()}).in("id",h);q||(C(),f([]))},M=async()=>{if(h.length===0)return;const{error:q}=await X.from("admin_notifications").delete().in("id",h);q||(C(),f([]))},R=q=>{q.status==="unread"&&E(q.id),k(q)},$=()=>{k(null),n&&a({})},W=q=>{q.action_url&&t(q.action_url)},I=()=>{h.length===o.length?f([]):f(o.map(q=>q.id))},B=q=>{f(H=>H.includes(q)?H.filter(K=>K!==q):[...H,q])},O=q=>{const H=xFe[q]||Lr;return r.jsx(H,{className:"w-5 h-5"})};return r.jsxs(fr,{children:[r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Notifications"}),r.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Manage admin notifications and alerts"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs("button",{onClick:C,className:"px-3 py-2 text-sm bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 flex items-center gap-2",children:[r.jsx(Ot,{className:"w-4 h-4"}),"Refresh"]}),v.unread>0&&r.jsxs("button",{onClick:_,className:"px-3 py-2 text-sm bg-primary-600 text-white rounded-lg hover:bg-primary-700 flex items-center gap-2",children:[r.jsx(Th,{className:"w-4 h-4"}),"Mark All Read"]})]})]}),r.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[r.jsx(Be,{className:"p-4",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-900/30 rounded-lg",children:r.jsx(Lr,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:v.total}),r.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Total"})]})]})}),r.jsx(Be,{className:"p-4",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"p-2 bg-yellow-100 dark:bg-yellow-900/30 rounded-lg",children:r.jsx(ir,{className:"w-5 h-5 text-yellow-600 dark:text-yellow-400"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:v.unread}),r.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Unread"})]})]})}),r.jsx(Be,{className:"p-4",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"p-2 bg-purple-100 dark:bg-purple-900/30 rounded-lg",children:r.jsx(sh,{className:"w-5 h-5 text-purple-600 dark:text-purple-400"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:v.cardOrders}),r.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Card Orders"})]})]})}),r.jsx(Be,{className:"p-4",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"p-2 bg-red-100 dark:bg-red-900/30 rounded-lg",children:r.jsx(Ht,{className:"w-5 h-5 text-red-600 dark:text-red-400"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:v.highPriority}),r.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"High Priority"})]})]})})]}),r.jsx(Be,{className:"p-4",children:r.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[r.jsx("div",{className:"flex-1",children:r.jsxs("div",{className:"relative",children:[r.jsx(Nr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),r.jsx("input",{type:"text",placeholder:"Search notifications...",value:x.search,onChange:q=>y(H=>({...H,search:q.target.value})),className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-primary-500"})]})}),r.jsxs("div",{className:"flex gap-2",children:[r.jsxs("select",{value:x.type,onChange:q=>y(H=>({...H,type:q.target.value})),className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white text-sm",children:[r.jsx("option",{value:"",children:"All Types"}),r.jsx("option",{value:"card_order",children:"Card Orders"}),r.jsx("option",{value:"kyc_request",children:"KYC Requests"}),r.jsx("option",{value:"dispute",children:"Disputes"}),r.jsx("option",{value:"system",children:"System"}),r.jsx("option",{value:"user_registration",children:"User Registration"}),r.jsx("option",{value:"transaction_flagged",children:"Flagged Transactions"}),r.jsx("option",{value:"support_ticket",children:"Support Tickets"})]}),r.jsxs("select",{value:x.status,onChange:q=>y(H=>({...H,status:q.target.value})),className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white text-sm",children:[r.jsx("option",{value:"",children:"All Status"}),r.jsx("option",{value:"unread",children:"Unread"}),r.jsx("option",{value:"read",children:"Read"}),r.jsx("option",{value:"archived",children:"Archived"})]}),r.jsxs("select",{value:x.priority,onChange:q=>y(H=>({...H,priority:q.target.value})),className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white text-sm",children:[r.jsx("option",{value:"",children:"All Priority"}),r.jsx("option",{value:"urgent",children:"Urgent"}),r.jsx("option",{value:"high",children:"High"}),r.jsx("option",{value:"medium",children:"Medium"}),r.jsx("option",{value:"low",children:"Low"})]})]})]})}),h.length>0&&r.jsxs("div",{className:"flex items-center gap-4 p-3 bg-primary-50 dark:bg-primary-900/20 rounded-lg",children:[r.jsxs("span",{className:"text-sm text-primary-700 dark:text-primary-300",children:[h.length," selected"]}),r.jsx("button",{onClick:P,className:"px-3 py-1.5 text-sm bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-300 rounded border border-gray-300 dark:border-gray-600 hover:bg-gray-50 dark:hover:bg-gray-700",children:"Mark as Read"}),r.jsx("button",{onClick:M,className:"px-3 py-1.5 text-sm bg-red-600 text-white rounded hover:bg-red-700",children:"Delete"}),r.jsx("button",{onClick:()=>f([]),className:"px-3 py-1.5 text-sm text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200",children:"Cancel"})]}),r.jsx(Be,{className:"overflow-hidden",children:c?r.jsxs("div",{className:"p-12 text-center",children:[r.jsx("div",{className:"w-8 h-8 border-2 border-primary-500 border-t-transparent rounded-full animate-spin mx-auto mb-3"}),r.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Loading notifications..."})]}):o.length===0?r.jsxs("div",{className:"p-12 text-center",children:[r.jsx(Lr,{className:"w-12 h-12 text-gray-300 dark:text-gray-600 mx-auto mb-3"}),r.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"No notifications found"}),r.jsx("p",{className:"text-sm text-gray-400 dark:text-gray-500 mt-1",children:"Notifications will appear here when users place card orders"})]}):r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{className:"bg-gray-50 dark:bg-gray-800",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-4 py-3 text-left",children:r.jsx("input",{type:"checkbox",checked:h.length===o.length,onChange:I,className:"rounded border-gray-300 dark:border-gray-600"})}),r.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Notification"}),r.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Type"}),r.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Priority"}),r.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Status"}),r.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Date"}),r.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Actions"})]})}),r.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:o.map(q=>r.jsxs("tr",{ref:q.id===n?i:null,className:fe("hover:bg-gray-50 dark:hover:bg-gray-800/50 transition-colors",q.status==="unread"&&"bg-blue-50/50 dark:bg-blue-900/10",q.id===n&&"ring-2 ring-primary-500 bg-primary-50 dark:bg-primary-900/20"),children:[r.jsx("td",{className:"px-4 py-3",children:r.jsx("input",{type:"checkbox",checked:h.includes(q.id),onChange:()=>B(q.id),className:"rounded border-gray-300 dark:border-gray-600"})}),r.jsx("td",{className:"px-4 py-3",children:r.jsxs("div",{className:"flex items-start gap-3 cursor-pointer",onClick:()=>R(q),children:[r.jsx("div",{className:fe("p-2 rounded-lg",q.type==="card_order"&&"bg-purple-100 dark:bg-purple-900/30 text-purple-600 dark:text-purple-400",q.type==="kyc_request"&&"bg-blue-100 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400",q.type==="dispute"&&"bg-red-100 dark:bg-red-900/30 text-red-600 dark:text-red-400",!["card_order","kyc_request","dispute"].includes(q.type)&&"bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-400"),children:O(q.type)}),r.jsxs("div",{className:"min-w-0",children:[r.jsx("p",{className:fe("text-sm",q.status==="unread"?"font-medium text-gray-900 dark:text-white":"text-gray-700 dark:text-gray-300"),children:q.title}),r.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 truncate max-w-md",children:q.message})]})]})}),r.jsx("td",{className:"px-4 py-3",children:r.jsx("span",{className:"px-2 py-1 text-xs rounded-full bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 capitalize",children:q.type.replace("_"," ")})}),r.jsx("td",{className:"px-4 py-3",children:r.jsx("span",{className:fe("px-2 py-1 text-xs rounded-full capitalize",CF[q.priority]),children:q.priority})}),r.jsx("td",{className:"px-4 py-3",children:r.jsx("span",{className:fe("px-2 py-1 text-xs rounded-full capitalize",_F[q.status]),children:q.status})}),r.jsxs("td",{className:"px-4 py-3 text-sm text-gray-500 dark:text-gray-400",children:[r.jsx("div",{children:nf(new Date(q.created_at),"MMM d, yyyy")}),r.jsx("div",{className:"text-xs",children:bx(new Date(q.created_at),{addSuffix:!0})})]}),r.jsx("td",{className:"px-4 py-3",children:r.jsxs("div",{className:"flex items-center justify-end gap-1",children:[r.jsx("button",{onClick:()=>R(q),className:"p-1.5 text-gray-400 hover:text-primary-600 dark:hover:text-primary-400 hover:bg-gray-100 dark:hover:bg-gray-700 rounded",title:"View details",children:r.jsx(ir,{className:"w-4 h-4"})}),q.status!=="archived"&&r.jsx("button",{onClick:()=>T(q.id),className:"p-1.5 text-gray-400 hover:text-yellow-600 dark:hover:text-yellow-400 hover:bg-gray-100 dark:hover:bg-gray-700 rounded",title:"Archive",children:r.jsx($ie,{className:"w-4 h-4"})}),r.jsx("button",{onClick:()=>A(q.id),className:"p-1.5 text-gray-400 hover:text-red-600 dark:hover:text-red-400 hover:bg-gray-100 dark:hover:bg-gray-700 rounded",title:"Delete",children:r.jsx(Js,{className:"w-4 h-4"})})]})})]},q.id))})]})})})]}),N&&r.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:r.jsxs("div",{className:"flex min-h-full items-center justify-center p-4",children:[r.jsx("div",{className:"fixed inset-0 bg-black/50 transition-opacity",onClick:$}),r.jsxs("div",{className:"relative bg-white dark:bg-gray-800 rounded-xl shadow-xl max-w-2xl w-full max-h-[90vh] overflow-hidden",children:[r.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b border-gray-200 dark:border-gray-700",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:fe("p-2 rounded-lg",N.type==="card_order"&&"bg-purple-100 dark:bg-purple-900/30 text-purple-600 dark:text-purple-400",N.type==="kyc_request"&&"bg-blue-100 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400",N.type==="dispute"&&"bg-red-100 dark:bg-red-900/30 text-red-600 dark:text-red-400",!["card_order","kyc_request","dispute"].includes(N.type)&&"bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-400"),children:O(N.type)}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:N.title}),r.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 capitalize",children:N.type.replace("_"," ")})]})]}),r.jsx("button",{onClick:$,className:"p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg",children:r.jsx(Ct,{className:"w-5 h-5"})})]}),r.jsxs("div",{className:"px-6 py-4 overflow-y-auto max-h-[60vh]",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[r.jsxs("span",{className:fe("px-2 py-1 text-xs rounded-full capitalize",CF[N.priority]),children:[N.priority," priority"]}),r.jsx("span",{className:fe("px-2 py-1 text-xs rounded-full capitalize",_F[N.status]),children:N.status})]}),r.jsxs("div",{className:"mb-6",children:[r.jsx("h4",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Message"}),r.jsx("p",{className:"text-gray-900 dark:text-white bg-gray-50 dark:bg-gray-900 rounded-lg p-4",children:N.message})]}),N.metadata&&Object.keys(N.metadata).length>0&&r.jsxs("div",{className:"mb-6",children:[r.jsx("h4",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Details"}),r.jsx("div",{className:"bg-gray-50 dark:bg-gray-900 rounded-lg p-4 space-y-2",children:Object.entries(N.metadata).map(([q,H])=>r.jsxs("div",{className:"flex justify-between text-sm",children:[r.jsx("span",{className:"text-gray-500 dark:text-gray-400 capitalize",children:q.replace(/_/g," ")}),r.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:typeof H=="object"?JSON.stringify(H):String(H)})]},q))})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[r.jsxs("div",{className:"flex items-center gap-2 text-gray-500 dark:text-gray-400",children:[r.jsx(_t,{className:"w-4 h-4"}),r.jsxs("span",{children:["Created: ",nf(new Date(N.created_at),"MMM d, yyyy h:mm a")]})]}),N.read_at&&r.jsxs("div",{className:"flex items-center gap-2 text-gray-500 dark:text-gray-400",children:[r.jsx(ir,{className:"w-4 h-4"}),r.jsxs("span",{children:["Read: ",nf(new Date(N.read_at),"MMM d, yyyy h:mm a")]})]})]})]}),r.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-t border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-900",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[N.status==="unread"&&r.jsxs("button",{onClick:()=>{E(N.id),k({...N,status:"read"})},className:"px-3 py-2 text-sm bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-300 rounded-lg border border-gray-300 dark:border-gray-600 hover:bg-gray-50 dark:hover:bg-gray-700 flex items-center gap-2",children:[r.jsx(ir,{className:"w-4 h-4"}),"Mark as Read"]}),r.jsxs("button",{onClick:()=>{A(N.id),$()},className:"px-3 py-2 text-sm text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg flex items-center gap-2",children:[r.jsx(Js,{className:"w-4 h-4"}),"Delete"]})]}),N.action_url&&r.jsxs("button",{onClick:()=>W(N),className:"px-4 py-2 text-sm bg-primary-600 text-white rounded-lg hover:bg-primary-700 flex items-center gap-2",children:[r.jsx(da,{className:"w-4 h-4"}),"Go to ",((F=N.related_entity_type)==null?void 0:F.replace("_"," "))||"Details"]})]})]})]})})]})}const pFe="https://akiecgwcxadcpqlvntmf.supabase.co",yFe="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImFraWVjZ3djeGFkY3BxbHZudG1mIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjQyODMzMzIsImV4cCI6MjA3OTg1OTMzMn0.L2ePGMJRjBqHS-M1d9mxys7I9bZv93YYr9dzQzCQINE",dC=p6(pFe,yFe),uC="00000000-0000-0000-0000-000000000001",bFe={host:"smtp.gmail.com",port:587,secure:!1,username:"",password:"",fromEmail:"",fromName:"Peeap",isEnabled:!1},vFe={transactionReceived:!0,transactionSent:!0,loginSuccess:!1,loginFailed:!0,emailVerification:!0,passwordReset:!0,paymentReceived:!0,withdrawalCompleted:!0,kycApproved:!0,kycRejected:!0};function wFe(){const[e,t]=p.useState(bFe),[s,a]=p.useState(vFe),[n,i]=p.useState(!0),[o,l]=p.useState(!1),[c,d]=p.useState(!1),[h,f]=p.useState(null),[x,y]=p.useState(null),[v,w]=p.useState(!1),[N,k]=p.useState(""),[C,E]=p.useState("smtp");p.useEffect(()=>{_()},[]);const _=async()=>{i(!0);try{const{data:P,error:M}=await dC.from("payment_settings").select("*").eq("id",uC).single();if(M&&M.code!=="PGRST116")throw new Error(M.message);P&&(t({host:P.smtp_host||"smtp.gmail.com",port:P.smtp_port||587,secure:P.smtp_secure??!1,username:P.smtp_username||"",password:P.smtp_password||"",fromEmail:P.smtp_from_email||"",fromName:P.smtp_from_name||"Peeap",isEnabled:P.smtp_enabled??!1}),a({transactionReceived:P.notify_transaction_received??!0,transactionSent:P.notify_transaction_sent??!0,loginSuccess:P.notify_login_success??!1,loginFailed:P.notify_login_failed??!0,emailVerification:P.notify_email_verification??!0,passwordReset:P.notify_password_reset??!0,paymentReceived:P.notify_payment_received??!0,withdrawalCompleted:P.notify_withdrawal_completed??!0,kycApproved:P.notify_kyc_approved??!0,kycRejected:P.notify_kyc_rejected??!0}))}catch(P){console.error("Failed to fetch settings:",P),y(P.message||"Failed to load settings")}finally{i(!1)}},T=async()=>{l(!0),y(null);try{const P={smtp_host:e.host,smtp_port:e.port,smtp_secure:e.secure,smtp_username:e.username,smtp_password:e.password,smtp_from_email:e.fromEmail,smtp_from_name:e.fromName,smtp_enabled:e.isEnabled,notify_transaction_received:s.transactionReceived,notify_transaction_sent:s.transactionSent,notify_login_success:s.loginSuccess,notify_login_failed:s.loginFailed,notify_email_verification:s.emailVerification,notify_password_reset:s.passwordReset,notify_payment_received:s.paymentReceived,notify_withdrawal_completed:s.withdrawalCompleted,notify_kyc_approved:s.kycApproved,notify_kyc_rejected:s.kycRejected,updated_at:new Date().toISOString()},{error:M}=await dC.from("payment_settings").update(P).eq("id",uC);if(M)if(M.code==="PGRST116"){const{error:R}=await dC.from("payment_settings").insert({id:uC,...P});if(R)throw new Error(R.message)}else throw new Error(M.message);f("SMTP settings saved successfully"),setTimeout(()=>f(null),3e3)}catch(P){y(P.message||"Failed to save settings")}finally{l(!1)}},A=async()=>{if(!N||!N.includes("@")){y("Please enter a valid email address");return}d(!0),y(null);try{const P=await fetch("/api/test-email",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({to:N,subject:"Peeap SMTP Test",html:`
            <div style="font-family: Arial, sans-serif; max-width: 600px; margin: 0 auto;">
              <div style="background: linear-gradient(135deg, #6366f1 0%, #4f46e5 100%); padding: 30px; text-align: center;">
                <h1 style="color: white; margin: 0;">Peeap</h1>
              </div>
              <div style="padding: 30px; background: #f9fafb;">
                <h2 style="color: #1f2937;">SMTP Test Successful!</h2>
                <p style="color: #4b5563;">
                  This is a test email to verify your SMTP configuration is working correctly.
                </p>
                <p style="color: #4b5563;">
                  If you received this email, your email notifications are properly configured.
                </p>
                <div style="margin-top: 30px; padding-top: 20px; border-top: 1px solid #e5e7eb;">
                  <p style="color: #9ca3af; font-size: 12px; margin: 0;">
                    Sent from Peeap Payment Gateway
                  </p>
                </div>
              </div>
            </div>
          `,smtpConfig:e})}),M=await P.json();if(!P.ok)throw new Error(M.error||"Failed to send test email");f(`Test email sent to ${N}`),setTimeout(()=>f(null),5e3)}catch(P){y(P.message||"Failed to send test email")}finally{d(!1)}};return n?r.jsx(fr,{children:r.jsx("div",{className:"flex items-center justify-center h-64",children:r.jsx(Ke,{className:"w-8 h-8 text-primary-600 dark:text-primary-400 animate-spin"})})}):r.jsx(fr,{children:r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Email Settings"}),r.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Configure SMTP and email notifications"})]}),r.jsxs("div",{className:"flex gap-3",children:[r.jsxs("button",{onClick:_,className:"px-4 py-2 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 flex items-center gap-2",children:[r.jsx(Ot,{className:"w-4 h-4"}),"Refresh"]}),r.jsxs("button",{onClick:T,disabled:o,className:"px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 flex items-center gap-2 disabled:opacity-50",children:[o?r.jsx(Ke,{className:"w-4 h-4 animate-spin"}):r.jsx(Pn,{className:"w-4 h-4"}),"Save Settings"]})]})]}),h&&r.jsxs("div",{className:"p-4 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg flex items-center gap-2 text-green-700 dark:text-green-400",children:[r.jsx(Ae,{className:"w-5 h-5"}),h]}),x&&r.jsxs("div",{className:"p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg flex items-center gap-2 text-red-700 dark:text-red-400",children:[r.jsx(Wt,{className:"w-5 h-5"}),x]}),r.jsx("div",{className:"border-b border-gray-200 dark:border-gray-700",children:r.jsx("nav",{className:"-mb-px flex gap-6",children:[{id:"smtp",label:"SMTP Configuration",icon:yO},{id:"notifications",label:"Email Notifications",icon:Lr}].map(P=>r.jsxs("button",{onClick:()=>E(P.id),className:`flex items-center gap-2 py-4 px-1 border-b-2 font-medium text-sm transition-colors ${C===P.id?"border-primary-500 text-primary-600 dark:text-primary-400":"border-transparent text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300"}`,children:[r.jsx(P.icon,{className:"w-4 h-4"}),P.label]},P.id))})}),C==="smtp"&&r.jsxs("div",{className:"space-y-6",children:[r.jsx(se,{className:"p-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:`p-2 rounded-lg ${e.isEnabled?"bg-green-100 dark:bg-green-900/30":"bg-gray-100 dark:bg-gray-700"}`,children:r.jsx(On,{className:`w-5 h-5 ${e.isEnabled?"text-green-600 dark:text-green-400":"text-gray-500 dark:text-gray-400"}`})}),r.jsxs("div",{children:[r.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Email Notifications"}),r.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Enable email notifications for users"})]})]}),r.jsx("button",{onClick:()=>t(P=>({...P,isEnabled:!P.isEnabled})),className:`p-2 rounded-lg transition-colors ${e.isEnabled?"bg-green-100 dark:bg-green-900/30 text-green-600 dark:text-green-400":"bg-gray-100 dark:bg-gray-700 text-gray-400 dark:text-gray-500"}`,children:e.isEnabled?r.jsx(Ys,{className:"w-8 h-8"}):r.jsx(Gs,{className:"w-8 h-8"})})]})}),r.jsxs(se,{className:"p-6",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[r.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-900/30 rounded-lg",children:r.jsx(yO,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"})}),r.jsxs("div",{children:[r.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"SMTP Server"}),r.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Configure your email server settings"})]})]}),r.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"SMTP Host"}),r.jsx("input",{type:"text",value:e.host,onChange:P=>t(M=>({...M,host:P.target.value})),placeholder:"smtp.gmail.com",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white rounded-lg focus:ring-2 focus:ring-primary-500"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"SMTP Port"}),r.jsx("input",{type:"number",value:e.port,onChange:P=>t(M=>({...M,port:parseInt(P.target.value)||587})),placeholder:"587",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white rounded-lg focus:ring-2 focus:ring-primary-500"})]}),r.jsxs("div",{className:"flex items-center gap-3 p-4 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:[r.jsx("button",{onClick:()=>t(P=>({...P,secure:!P.secure})),className:`p-1 rounded ${e.secure?"bg-green-200 dark:bg-green-900/50":"bg-gray-200 dark:bg-gray-600"}`,children:e.secure?r.jsx(Ys,{className:"w-6 h-6 text-green-600 dark:text-green-400"}):r.jsx(Gs,{className:"w-6 h-6 text-gray-400"})}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:"Use SSL/TLS"}),r.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Enable for port 465, disable for port 587"})]})]})]})]}),r.jsxs(se,{className:"p-6",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[r.jsx("div",{className:"p-2 bg-purple-100 dark:bg-purple-900/30 rounded-lg",children:r.jsx(Kr,{className:"w-5 h-5 text-purple-600 dark:text-purple-400"})}),r.jsxs("div",{children:[r.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Authentication"}),r.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"SMTP login credentials"})]}),r.jsx("button",{onClick:()=>w(!v),className:"ml-auto p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg",children:v?r.jsx(Dn,{className:"w-4 h-4 text-gray-500"}):r.jsx(ir,{className:"w-4 h-4 text-gray-500"})})]}),r.jsxs("div",{className:"grid gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Username / Email"}),r.jsx("input",{type:"text",value:e.username,onChange:P=>t(M=>({...M,username:P.target.value})),placeholder:"your-email@gmail.com",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white rounded-lg focus:ring-2 focus:ring-primary-500"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Password / App Password"}),r.jsx("input",{type:v?"text":"password",value:e.password,onChange:P=>t(M=>({...M,password:P.target.value})),placeholder:"Your SMTP password or app password",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white rounded-lg focus:ring-2 focus:ring-primary-500"}),r.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"For Gmail, use an App Password from Google Account settings"})]})]})]}),r.jsxs(se,{className:"p-6",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[r.jsx("div",{className:"p-2 bg-orange-100 dark:bg-orange-900/30 rounded-lg",children:r.jsx(br,{className:"w-5 h-5 text-orange-600 dark:text-orange-400"})}),r.jsxs("div",{children:[r.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Sender Information"}),r.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"How emails will appear to recipients"})]})]}),r.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"From Email"}),r.jsx("input",{type:"email",value:e.fromEmail,onChange:P=>t(M=>({...M,fromEmail:P.target.value})),placeholder:"noreply@peeap.com",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white rounded-lg focus:ring-2 focus:ring-primary-500"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"From Name"}),r.jsx("input",{type:"text",value:e.fromName,onChange:P=>t(M=>({...M,fromName:P.target.value})),placeholder:"Peeap",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white rounded-lg focus:ring-2 focus:ring-primary-500"})]})]})]}),r.jsxs(se,{className:"p-6 bg-blue-50 dark:bg-blue-900/20 border-blue-200 dark:border-blue-800",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[r.jsx(E6,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-medium text-blue-900 dark:text-blue-300",children:"Send Test Email"}),r.jsx("p",{className:"text-sm text-blue-700 dark:text-blue-400",children:"Verify your SMTP configuration is working"})]})]}),r.jsxs("div",{className:"flex items-end gap-4",children:[r.jsxs("div",{className:"flex-1",children:[r.jsx("label",{className:"block text-sm font-medium text-blue-900 dark:text-blue-300 mb-1",children:"Recipient Email"}),r.jsx("input",{type:"email",value:N,onChange:P=>k(P.target.value),placeholder:"test@example.com",className:"w-full px-3 py-2 border border-blue-300 dark:border-blue-700 rounded-lg focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]}),r.jsxs("button",{onClick:A,disabled:c||!e.host||!e.username,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed h-[42px]",children:[c?r.jsx(Ke,{className:"w-4 h-4 animate-spin"}):r.jsx(Tn,{className:"w-4 h-4"}),c?"Sending...":"Send Test"]})]})]}),r.jsxs(se,{className:"p-6",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[r.jsx("div",{className:"p-2 bg-red-100 dark:bg-red-900/30 rounded-lg",children:r.jsx(Oi,{className:"w-5 h-5 text-red-600 dark:text-red-400"})}),r.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:"Gmail SMTP Setup"})]}),r.jsxs("div",{className:"space-y-3 text-sm text-gray-600 dark:text-gray-400",children:[r.jsxs("p",{children:[r.jsx("strong",{children:"1."})," Go to your Google Account > Security"]}),r.jsxs("p",{children:[r.jsx("strong",{children:"2."})," Enable 2-Factor Authentication if not already enabled"]}),r.jsxs("p",{children:[r.jsx("strong",{children:"3."}),' Go to App Passwords and generate a new password for "Mail"']}),r.jsxs("p",{children:[r.jsx("strong",{children:"4."})," Use the generated 16-character password in the Password field above"]}),r.jsxs("p",{children:[r.jsx("strong",{children:"Settings:"})," Host: ",r.jsx("code",{className:"bg-gray-100 dark:bg-gray-700 px-1 rounded",children:"smtp.gmail.com"}),", Port: ",r.jsx("code",{className:"bg-gray-100 dark:bg-gray-700 px-1 rounded",children:"587"}),", SSL/TLS: Off"]})]})]})]}),C==="notifications"&&r.jsxs("div",{className:"space-y-6",children:[r.jsxs(se,{className:"p-6",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[r.jsx("div",{className:"p-2 bg-green-100 dark:bg-green-900/30 rounded-lg",children:r.jsx(Lr,{className:"w-5 h-5 text-green-600 dark:text-green-400"})}),r.jsxs("div",{children:[r.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Transaction Notifications"}),r.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Email users about their transactions"})]})]}),r.jsx("div",{className:"space-y-4",children:[{key:"transactionReceived",label:"Money Received",description:"When user receives money in their wallet"},{key:"transactionSent",label:"Money Sent",description:"When user sends money from their wallet"},{key:"paymentReceived",label:"Payment Received",description:"When merchant receives a payment"},{key:"withdrawalCompleted",label:"Withdrawal Completed",description:"When withdrawal is processed"}].map(P=>r.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:[r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:P.label}),r.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:P.description})]}),r.jsx("button",{onClick:()=>a(M=>({...M,[P.key]:!M[P.key]})),className:`p-1 rounded ${s[P.key]?"bg-green-200 dark:bg-green-900/50":"bg-gray-200 dark:bg-gray-600"}`,children:s[P.key]?r.jsx(Ys,{className:"w-6 h-6 text-green-600 dark:text-green-400"}):r.jsx(Gs,{className:"w-6 h-6 text-gray-400 dark:text-gray-500"})})]},P.key))})]}),r.jsxs(se,{className:"p-6",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[r.jsx("div",{className:"p-2 bg-yellow-100 dark:bg-yellow-900/30 rounded-lg",children:r.jsx(Tl,{className:"w-5 h-5 text-yellow-600 dark:text-yellow-400"})}),r.jsxs("div",{children:[r.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Security Notifications"}),r.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Email users about security events"})]})]}),r.jsx("div",{className:"space-y-4",children:[{key:"loginSuccess",label:"Successful Login",description:"When user logs in successfully"},{key:"loginFailed",label:"Failed Login Attempt",description:"When someone fails to log in"},{key:"emailVerification",label:"Email Verification",description:"Send verification emails to new users"},{key:"passwordReset",label:"Password Reset",description:"Send password reset links"},{key:"kycApproved",label:"KYC Approved",description:"When user KYC is approved"},{key:"kycRejected",label:"KYC Rejected",description:"When user KYC is rejected"}].map(P=>r.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:[r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:P.label}),r.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:P.description})]}),r.jsx("button",{onClick:()=>a(M=>({...M,[P.key]:!M[P.key]})),className:`p-1 rounded ${s[P.key]?"bg-green-200 dark:bg-green-900/50":"bg-gray-200 dark:bg-gray-600"}`,children:s[P.key]?r.jsx(Ys,{className:"w-6 h-6 text-green-600 dark:text-green-400"}):r.jsx(Gs,{className:"w-6 h-6 text-gray-400 dark:text-gray-500"})})]},P.key))})]})]})]})})}function EF(){const{token:e}=Ui(),t=Ut(),[s,a]=p.useState(null),[n,i]=p.useState("loading"),[o,l]=p.useState(null),[c,d]=p.useState(0),[h,f]=p.useState(!1),[x,y]=p.useState(!1),v=(E,_)=>_==="SLE"||_==="SLL"?`Le ${new Intl.NumberFormat("en-US",{minimumFractionDigits:0}).format(E)}`:new Intl.NumberFormat("en-US",{style:"currency",currency:_,minimumFractionDigits:2}).format(E/100),w=E=>{const _=Math.floor(E/60),T=E%60;return`${_}:${T.toString().padStart(2,"0")}`},N=p.useCallback(async()=>{var E,_,T,A,P,M;if(!e){l("Invalid payment link"),i("failed");return}try{const R=await fetch("/api/session/verify",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:e})});if(!R.ok)throw new Error("Failed to verify session");const $=await R.json();if(!$.valid){l($.error||"Invalid or expired payment link"),i("expired");return}const W={sessionId:((E=$.session)==null?void 0:E.id)||"ps_demo_123",merchantName:((_=$.session)==null?void 0:_.merchantName)||"Demo Store",amount:((T=$.session)==null?void 0:T.amount)||5e3,currency:((A=$.session)==null?void 0:A.currency)||"USD",description:((P=$.session)==null?void 0:P.description)||"Payment",expiresAt:((M=$.session)==null?void 0:M.expiresAt)||new Date(Date.now()+9e5).toISOString(),deepLink:`peeappay://pay?token=${e}`,universalLink:`https://pay.peeap.com/app/pay?token=${e}`,qrUrl:`https://pay.peeap.com/t/${e}`,isExpired:!1};a(W),i("ready");const I=new Date(W.expiresAt).getTime(),B=Math.max(0,Math.floor((I-Date.now())/1e3));d(B)}catch(R){console.error("Session fetch error:",R);const $={sessionId:"ps_demo_123",merchantName:"Demo Store",amount:5e3,currency:"USD",description:"Demo Payment",expiresAt:new Date(Date.now()+9e5).toISOString(),deepLink:`peeappay://pay?token=${e}`,universalLink:`https://pay.peeap.com/app/pay?token=${e}`,qrUrl:`https://pay.peeap.com/t/${e}`,isExpired:!1};a($),i("ready"),d(900)}},[e]);p.useEffect(()=>{f("NDEFReader"in window);const E=navigator.userAgent.toLowerCase(),_=/iphone|ipad|android/.test(E);y(_)},[]),p.useEffect(()=>{N()},[N]),p.useEffect(()=>{if(c<=0||n!=="ready")return;const E=setInterval(()=>{d(_=>_<=1?(i("expired"),0):_-1)},1e3);return()=>clearInterval(E)},[c,n]);const k=()=>{s&&(window.location.href=s.deepLink,setTimeout(()=>{window.location.href=s.universalLink},500))},C=()=>{i("processing"),setTimeout(()=>{i("success")},2e3)};return n==="loading"?r.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:r.jsxs("div",{className:"text-center",children:[r.jsx(Ke,{className:"w-12 h-12 text-primary-600 animate-spin mx-auto mb-4"}),r.jsx("p",{className:"text-gray-600",children:"Loading payment..."})]})}):n==="failed"||n==="expired"?r.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:r.jsxs("div",{className:"max-w-md w-full bg-white rounded-2xl shadow-lg p-8 text-center",children:[r.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:r.jsx(Wt,{className:"w-8 h-8 text-red-600"})}),r.jsx("h1",{className:"text-xl font-bold text-gray-900 mb-2",children:n==="expired"?"Payment Expired":"Payment Failed"}),r.jsx("p",{className:"text-gray-600 mb-6",children:o||"This payment link is no longer valid. Please request a new payment link."}),r.jsx("button",{onClick:()=>t("/"),className:"px-6 py-3 bg-gray-100 text-gray-700 rounded-lg font-medium hover:bg-gray-200 transition-colors",children:"Return Home"})]})}):n==="success"?r.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:r.jsxs("div",{className:"max-w-md w-full bg-white rounded-2xl shadow-lg p-8 text-center",children:[r.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:r.jsx(Ae,{className:"w-8 h-8 text-green-600"})}),r.jsx("h1",{className:"text-xl font-bold text-gray-900 mb-2",children:"Payment Successful!"}),r.jsxs("p",{className:"text-gray-600 mb-2",children:["Thank you for your payment to ",s==null?void 0:s.merchantName]}),r.jsx("p",{className:"text-2xl font-bold text-gray-900 mb-6",children:s&&v(s.amount,s.currency)}),r.jsxs("div",{className:"text-sm text-gray-500 mb-6",children:["Transaction ID: ",s==null?void 0:s.sessionId]}),r.jsx("button",{onClick:()=>t("/"),className:"px-6 py-3 bg-primary-600 text-white rounded-lg font-medium hover:bg-primary-700 transition-colors",children:"Done"})]})}):n==="processing"?r.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:r.jsxs("div",{className:"max-w-md w-full bg-white rounded-2xl shadow-lg p-8 text-center",children:[r.jsx(Ke,{className:"w-12 h-12 text-primary-600 animate-spin mx-auto mb-4"}),r.jsx("h1",{className:"text-xl font-bold text-gray-900 mb-2",children:"Processing Payment"}),r.jsx("p",{className:"text-gray-600",children:"Please wait while we process your payment..."})]})}):r.jsx("div",{className:"min-h-screen bg-gradient-to-b from-primary-600 to-primary-800 flex items-center justify-center p-4",children:r.jsxs("div",{className:"max-w-md w-full",children:[r.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl overflow-hidden",children:[r.jsxs("div",{className:"bg-primary-600 text-white p-6 text-center",children:[r.jsx("div",{className:"w-16 h-16 bg-white/20 rounded-full flex items-center justify-center mx-auto mb-4",children:r.jsx(lt,{className:"w-8 h-8"})}),r.jsx("h1",{className:"text-xl font-bold mb-1",children:"Peeap Pay"}),r.jsx("p",{className:"text-primary-100 text-sm",children:"Secure Payment"})]}),r.jsxs("div",{className:"p-6 text-center border-b border-gray-100",children:[r.jsxs("p",{className:"text-sm text-gray-500 mb-1",children:["Pay to ",s==null?void 0:s.merchantName]}),r.jsx("p",{className:"text-4xl font-bold text-gray-900",children:s&&v(s.amount,s.currency)}),(s==null?void 0:s.description)&&r.jsx("p",{className:"text-sm text-gray-500 mt-2",children:s.description})]}),r.jsxs("div",{className:"px-6 py-3 bg-yellow-50 border-b border-yellow-100 flex items-center justify-center gap-2",children:[r.jsx(_t,{className:"w-4 h-4 text-yellow-600"}),r.jsxs("span",{className:"text-sm text-yellow-700",children:["Expires in ",w(c)]})]}),r.jsxs("div",{className:"p-6 space-y-4",children:[r.jsxs("div",{className:"bg-gray-50 rounded-xl p-4 text-center",children:[r.jsxs("div",{className:"flex items-center justify-center gap-2 mb-3",children:[r.jsx(Vs,{className:"w-5 h-5 text-gray-600"}),r.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Scan to Pay"})]}),r.jsx("div",{className:"bg-white p-4 rounded-lg inline-block",children:r.jsx("div",{className:"w-40 h-40 bg-gray-200 rounded flex items-center justify-center",children:r.jsx(Vs,{className:"w-20 h-20 text-gray-400"})})}),r.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Open Peeap app and scan this code"})]}),r.jsxs("button",{onClick:k,className:"w-full py-4 bg-primary-600 text-white rounded-xl font-semibold flex items-center justify-center gap-2 hover:bg-primary-700 transition-colors",children:[r.jsx(Ws,{className:"w-5 h-5"}),"Open Peeap App",r.jsx(da,{className:"w-4 h-4"})]}),h&&r.jsx("div",{className:"text-center py-3",children:r.jsxs("div",{className:"flex items-center justify-center gap-2 text-gray-500",children:[r.jsx(oi,{className:"w-5 h-5"}),r.jsx("span",{className:"text-sm",children:"or tap your NFC card"})]})}),r.jsxs("div",{className:"relative",children:[r.jsx("div",{className:"absolute inset-0 flex items-center",children:r.jsx("div",{className:"w-full border-t border-gray-200"})}),r.jsx("div",{className:"relative flex justify-center text-sm",children:r.jsx("span",{className:"px-2 bg-white text-gray-500",children:"or"})})]}),r.jsxs("button",{onClick:C,className:"w-full py-4 bg-gray-100 text-gray-700 rounded-xl font-semibold flex items-center justify-center gap-2 hover:bg-gray-200 transition-colors",children:[r.jsx(lt,{className:"w-5 h-5"}),"Pay with Card"]}),r.jsx("div",{className:"text-center",children:r.jsxs("a",{href:"https://peeap.com/download",className:"inline-flex items-center gap-1 text-sm text-primary-600 hover:text-primary-700",children:[r.jsx(gs,{className:"w-4 h-4"}),"Don't have the app? Download Peeap"]})})]}),r.jsx("div",{className:"px-6 py-4 bg-gray-50 border-t border-gray-100",children:r.jsxs("div",{className:"flex items-center justify-center gap-2 text-gray-500",children:[r.jsx(rr,{className:"w-4 h-4"}),r.jsx("span",{className:"text-xs",children:"Secured by Peeap Pay"})]})})]}),r.jsx("div",{className:"text-center mt-4",children:r.jsxs("p",{className:"text-xs text-white/60",children:["Session: ",s==null?void 0:s.sessionId]})})]})})}function jFe(){const[e]=bc(),t=Ut(),{user:s,isAuthenticated:a,isLoading:n}=pt(),[i,o]=p.useState("loading"),[l,c]=p.useState(null),[d,h]=p.useState(0),[f,x]=p.useState(""),[y,v]=p.useState(null),[w,N]=p.useState(null),[k,C]=p.useState(!1),[E,_]=p.useState(!1),[T,A]=p.useState(!1),[P,M]=p.useState(""),[R,$]=p.useState(0),[W,I]=p.useState(null);p.useEffect(()=>{cr.getDefaultCurrency().then(I)},[]);const B=(W==null?void 0:W.symbol)||"",O=re=>`${B} ${re.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}`,H=d>0?Math.max(d*(1/100),.1):0,K=e.get("to"),V=e.get("amount"),z=e.get("note"),G=e.get("qr"),te=e.get("username"),he=window.location.href,ne=`peeappay://pay?${e.toString()}`;p.useEffect(()=>{_("NDEFReader"in window),A(/iPhone|iPad|iPod|Android/i.test(navigator.userAgent)),ce()},[K,G,te]),p.useEffect(()=>{a&&(s!=null&&s.id)&&i==="login"&&(oe(),o("confirm"))},[a,s==null?void 0:s.id]);const ce=async()=>{try{let re=null;if(te){const Se=te.replace("@","");re=await _e(Se)}else K?re=await xe(K):G&&(re=await xe(G));if(!re){v("Recipient not found"),o("error");return}c(re);const pe=V?parseFloat(V):0;if(V&&h(pe),z&&x(z),pe>0)try{const Fe=await(await fetch("https://api.peeap.com/router/checkout/sessions",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({amount:pe,currency:"SLE",description:z||`Payment to ${re.name}`,recipientId:re.id,recipientWalletId:re.walletId,recipientName:re.name,successUrl:`${window.location.origin}/payment/success`,cancelUrl:`${window.location.origin}/payment/cancel`})})).json();if(Fe.sessionId){t(`/checkout/pay/${Fe.sessionId}`);return}}catch(Se){console.error("Failed to create checkout session:",Se)}o("checkout")}catch(re){console.error("Payment init error:",re),v(re.message||"Failed to load payment"),o("error")}},xe=async re=>{const{data:pe,error:Se}=await X.from("users").select("id, first_name, last_name, email, phone").eq("id",re).single();if(Se||!pe)return console.error("Error fetching recipient:",Se),null;const{data:je}=await X.from("wallets").select("id").eq("user_id",re).eq("wallet_type","primary").single();return{id:pe.id,name:`${pe.first_name} ${pe.last_name}`,username:void 0,email:pe.email,phone:pe.phone,walletId:(je==null?void 0:je.id)||""}},_e=async re=>{try{const{data:pe,error:Se}=await X.from("users").select("id, first_name, last_name, email, phone").or(`phone.eq.${re},first_name.ilike.%${re}%,last_name.ilike.%${re}%`).limit(1).single();if(Se||!pe)return console.error("Error fetching recipient by username:",Se),null;const{data:je}=await X.from("wallets").select("id").eq("user_id",pe.id).eq("wallet_type","primary").single();return{id:pe.id,name:`${pe.first_name} ${pe.last_name}`,username:void 0,email:pe.email,phone:pe.phone,walletId:(je==null?void 0:je.id)||""}}catch(pe){return console.error("Error in fetchRecipientByUsername:",pe),null}},oe=async()=>{if(!(s!=null&&s.id))return;const{data:re}=await X.from("wallets").select("id, balance").eq("user_id",s.id).eq("wallet_type","primary").single();re&&(M(re.id),$(re.balance))},ie=()=>{sessionStorage.setItem("paymentIntent",JSON.stringify({to:K||(l==null?void 0:l.id),username:te,amount:d||V,note:f||z,qr:G})),o("login")},ge=async()=>{if(!l||!d||!(s!=null&&s.id)||!P){v("Missing payment information");return}if(d>R){v("Insufficient balance");return}if(l.id===s.id){v("Cannot send money to yourself");return}o("processing");try{const{data:re}=await X.from("wallets").select("balance").eq("id",P).single();if(!re||re.balance<d){v("Insufficient balance"),o("error");return}const pe=`txn_${Date.now()}_${Math.random().toString(36).substr(2,9)}`;await X.from("wallets").update({balance:re.balance-d,updated_at:new Date().toISOString()}).eq("id",P);const{data:Se}=await X.from("wallets").select("balance").eq("id",l.walletId).single();if(Se){const je=d-H;await X.from("wallets").update({balance:Se.balance+je,updated_at:new Date().toISOString()}).eq("id",l.walletId)}await X.from("transactions").insert([{external_id:`${pe}_out`,wallet_id:P,type:"TRANSFER",amount:-d,fee:H,currency:"USD",status:"COMPLETED",description:f||`Transfer to ${l.name}`,metadata:{recipient_id:l.id,recipient_wallet:l.walletId,recipient_name:l.name,method:"payment_link"}},{external_id:`${pe}_in`,wallet_id:l.walletId,type:"TRANSFER",amount:d-H,currency:"USD",status:"COMPLETED",description:f||`Transfer from ${s.firstName} ${s.lastName}`,metadata:{sender_id:s.id,sender_wallet:P,sender_name:`${s.firstName} ${s.lastName}`,method:"payment_link"}}]),N(pe),o("success")}catch(re){console.error("Payment error:",re),v(re.message||"Payment failed"),o("error")}},Z=async()=>{await navigator.clipboard.writeText(he),C(!0),setTimeout(()=>C(!1),2e3)},Q=()=>{window.location.href=ne};return i==="loading"?r.jsx("div",{className:"min-h-screen bg-gradient-to-b from-primary-600 to-primary-800 flex items-center justify-center p-4",children:r.jsxs("div",{className:"text-center text-white",children:[r.jsx(Ke,{className:"w-12 h-12 animate-spin mx-auto mb-4"}),r.jsx("p",{children:"Loading payment..."})]})}):i==="error"?r.jsx("div",{className:"min-h-screen bg-gradient-to-b from-primary-600 to-primary-800 flex items-center justify-center p-4",children:r.jsxs(se,{className:"max-w-md w-full p-8 text-center",children:[r.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:r.jsx(Wt,{className:"w-8 h-8 text-red-600"})}),r.jsx("h1",{className:"text-xl font-bold text-gray-900 mb-2",children:"Payment Error"}),r.jsx("p",{className:"text-gray-600 mb-6",children:y||"Something went wrong"}),r.jsx("button",{onClick:()=>t("/"),className:"px-6 py-3 bg-primary-600 text-white rounded-xl font-medium hover:bg-primary-700",children:"Go Home"})]})}):i==="success"?r.jsx("div",{className:"min-h-screen bg-gradient-to-b from-green-600 to-green-800 flex items-center justify-center p-4",children:r.jsxs(se,{className:"max-w-md w-full p-8 text-center",children:[r.jsx("div",{className:"w-20 h-20 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:r.jsx(Ae,{className:"w-10 h-10 text-green-600"})}),r.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Payment Successful!"}),r.jsxs("p",{className:"text-gray-600 mb-4",children:["You sent ",O(d)," to ",l==null?void 0:l.name]}),w&&r.jsxs("p",{className:"text-xs text-gray-400 mb-6",children:["Transaction ID: ",w]}),r.jsx("button",{onClick:()=>t("/dashboard"),className:"w-full py-3 bg-primary-600 text-white rounded-xl font-semibold hover:bg-primary-700",children:"Go to Dashboard"})]})}):i==="processing"?r.jsx("div",{className:"min-h-screen bg-gradient-to-b from-primary-600 to-primary-800 flex items-center justify-center p-4",children:r.jsxs(se,{className:"max-w-md w-full p-8 text-center",children:[r.jsx(Ke,{className:"w-12 h-12 text-primary-600 animate-spin mx-auto mb-4"}),r.jsx("h1",{className:"text-xl font-bold text-gray-900 mb-2",children:"Processing Payment"}),r.jsx("p",{className:"text-gray-600",children:"Please wait..."})]})}):i==="login"?r.jsx("div",{className:"min-h-screen bg-gradient-to-b from-primary-600 to-primary-800 flex items-center justify-center p-4",children:r.jsxs(se,{className:"max-w-md w-full p-8 text-center",children:[r.jsx("div",{className:"w-16 h-16 bg-primary-100 rounded-full flex items-center justify-center mx-auto mb-4",children:r.jsx(Gp,{className:"w-8 h-8 text-primary-600"})}),r.jsx("h1",{className:"text-xl font-bold text-gray-900 mb-2",children:"Sign In to Complete Payment"}),r.jsxs("p",{className:"text-gray-600 mb-6",children:["Sign in to send ",O(d)," to ",l==null?void 0:l.name]}),r.jsx("button",{onClick:()=>t("/login?redirect="+encodeURIComponent(window.location.pathname+window.location.search)),className:"w-full py-3 bg-primary-600 text-white rounded-xl font-semibold hover:bg-primary-700 mb-3",children:"Sign In"}),r.jsxs("p",{className:"text-sm text-gray-500",children:["Don't have an account?"," ",r.jsx("a",{href:"/register",className:"text-primary-600 hover:underline",children:"Sign up"})]})]})}):i==="confirm"&&a?r.jsx("div",{className:"min-h-screen bg-gradient-to-b from-primary-600 to-primary-800 flex items-center justify-center p-4",children:r.jsxs(se,{className:"max-w-md w-full overflow-hidden",children:[r.jsxs("div",{className:"bg-primary-600 text-white p-6 text-center",children:[r.jsx(Tn,{className:"w-10 h-10 mx-auto mb-2"}),r.jsx("h1",{className:"text-xl font-bold",children:"Confirm Payment"})]}),r.jsx("div",{className:"p-6 border-b border-gray-100",children:r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("div",{className:"w-12 h-12 bg-primary-100 rounded-full flex items-center justify-center",children:r.jsx(br,{className:"w-6 h-6 text-primary-600"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-500",children:"Sending to"}),r.jsx("p",{className:"font-semibold text-gray-900",children:l==null?void 0:l.name}),(l==null?void 0:l.username)&&r.jsxs("p",{className:"text-sm text-primary-600",children:["@",l.username]})]})]})}),r.jsxs("div",{className:"p-6 text-center border-b border-gray-100",children:[r.jsx("p",{className:"text-4xl font-bold text-gray-900",children:O(d)}),r.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["Fee: ",O(H)]})]}),r.jsxs("div",{className:"p-4 bg-blue-50 flex items-center justify-between",children:[r.jsx("span",{className:"text-sm text-blue-700",children:"Your balance"}),r.jsx("span",{className:"font-semibold text-blue-700",children:O(R)})]}),d>R&&r.jsxs("div",{className:"p-4 bg-red-50 flex items-center gap-2 text-red-700",children:[r.jsx(dt,{className:"w-5 h-5"}),r.jsx("span",{className:"text-sm",children:"Insufficient balance"})]}),r.jsxs("div",{className:"p-6 space-y-3",children:[r.jsxs("button",{onClick:ge,disabled:d<=0||d>R,className:"w-full py-4 bg-primary-600 text-white rounded-xl font-semibold disabled:opacity-50",children:["Send ",O(d)]}),r.jsx("button",{onClick:()=>t(-1),className:"w-full py-3 bg-gray-100 text-gray-700 rounded-xl",children:"Cancel"})]})]})}):r.jsx("div",{className:"min-h-screen bg-gradient-to-b from-primary-600 to-primary-800 flex items-center justify-center p-4",children:r.jsxs("div",{className:"max-w-md w-full",children:[r.jsxs(se,{className:"overflow-hidden",children:[r.jsxs("div",{className:"bg-primary-600 text-white p-6 text-center",children:[r.jsx("div",{className:"w-16 h-16 bg-white/20 rounded-full flex items-center justify-center mx-auto mb-4",children:r.jsx(Cr,{className:"w-8 h-8"})}),r.jsx("h1",{className:"text-xl font-bold",children:"Payment Request"}),r.jsx("p",{className:"text-primary-100 text-sm",children:"Peeap Pay"})]}),r.jsx("div",{className:"p-6 border-b border-gray-100",children:r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("div",{className:"w-14 h-14 bg-primary-100 rounded-full flex items-center justify-center",children:r.jsx(br,{className:"w-7 h-7 text-primary-600"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-500",children:"Pay to"}),r.jsx("p",{className:"font-bold text-gray-900 text-lg",children:l==null?void 0:l.name}),(l==null?void 0:l.username)&&r.jsxs("p",{className:"text-primary-600 font-medium",children:["@",l.username]})]})]})}),d>0&&r.jsxs("div",{className:"p-6 text-center border-b border-gray-100 bg-gray-50",children:[r.jsx("p",{className:"text-sm text-gray-500",children:"Amount"}),r.jsx("p",{className:"text-4xl font-bold text-gray-900",children:O(d)}),f&&r.jsx("p",{className:"text-sm text-gray-500 mt-2",children:f})]}),r.jsxs("div",{className:"p-6 text-center border-b border-gray-100",children:[r.jsxs("div",{className:"flex items-center justify-center gap-2 mb-4",children:[r.jsx(Vs,{className:"w-5 h-5 text-gray-600"}),r.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Scan with Peeap App"})]}),r.jsx("div",{className:"bg-white p-4 rounded-xl inline-block shadow-sm border",children:r.jsx(wx,{value:he,size:180,level:"M"})}),r.jsx("p",{className:"text-xs text-gray-500 mt-3",children:"Open Peeap app and scan this code"})]}),T&&E&&r.jsx("div",{className:"p-4 bg-blue-50 border-b border-blue-100",children:r.jsxs("div",{className:"flex items-center justify-center gap-2 text-blue-700",children:[r.jsx(oi,{className:"w-5 h-5 animate-pulse"}),r.jsx("span",{className:"text-sm font-medium",children:"Ready for NFC tap"})]})}),r.jsxs("div",{className:"p-6 space-y-3",children:[T&&r.jsxs("button",{onClick:Q,className:"w-full py-4 bg-primary-600 text-white rounded-xl font-semibold flex items-center justify-center gap-2 hover:bg-primary-700",children:[r.jsx(Ws,{className:"w-5 h-5"}),"Open in Peeap App",r.jsx(da,{className:"w-4 h-4"})]}),r.jsxs("button",{onClick:ie,className:`w-full py-4 ${T?"bg-gray-100 text-gray-700":"bg-primary-600 text-white"} rounded-xl font-semibold flex items-center justify-center gap-2 hover:opacity-90`,children:[r.jsx(Gp,{className:"w-5 h-5"}),"Complete with Login"]}),r.jsx("button",{onClick:Z,className:"w-full py-3 bg-gray-100 text-gray-700 rounded-xl font-medium flex items-center justify-center gap-2 hover:bg-gray-200",children:k?r.jsxs(r.Fragment,{children:[r.jsx(Ae,{className:"w-5 h-5 text-green-600"}),"Link Copied!"]}):r.jsxs(r.Fragment,{children:[r.jsx(Pr,{className:"w-5 h-5"}),"Copy Payment Link"]})})]}),r.jsx("div",{className:"px-6 py-4 bg-gray-50 border-t border-gray-100",children:r.jsxs("div",{className:"flex items-center justify-center gap-2 text-gray-500",children:[r.jsx(rr,{className:"w-4 h-4"}),r.jsx("span",{className:"text-xs",children:"Secured by Peeap Pay"})]})})]}),r.jsx("div",{className:"text-center mt-4",children:r.jsx("a",{href:"https://peeap.com/download",className:"text-sm text-white/80 hover:text-white",children:"Don't have the app? Download Peeap"})})]})})}function NFe(){const[e]=bc(),t=Ut(),[s,a]=p.useState(5),n=e.get("sessionId"),i=e.get("status"),o=e.get("amount"),l=e.get("currency")||"SLE",c=e.get("orderNumber"),d=e.get("error");p.useEffect(()=>{if(s>0){const f=setTimeout(()=>a(s-1),1e3);return()=>clearTimeout(f)}else t("/admin/payment-settings")},[s,t]);const h=f=>{if(!f)return"0";const x=Number(f);return new Intl.NumberFormat("en-US",{minimumFractionDigits:0,maximumFractionDigits:0}).format(x)};return r.jsx("div",{className:"min-h-screen bg-gradient-to-br from-green-50 to-emerald-100 flex items-center justify-center p-4",children:r.jsxs("div",{className:"bg-white rounded-2xl shadow-xl max-w-md w-full p-8 text-center",children:[r.jsxs("div",{className:"mb-6",children:[r.jsx("div",{className:"w-20 h-20 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:r.jsx(Ae,{className:"w-12 h-12 text-green-600"})}),r.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Payment Successful!"}),r.jsx("p",{className:"text-gray-600",children:"Your payment has been processed successfully."})]}),d&&r.jsx("div",{className:"mb-6 p-4 bg-yellow-50 border border-yellow-200 rounded-lg",children:r.jsxs("p",{className:"text-sm text-yellow-800",children:["Note: ",d]})}),r.jsxs("div",{className:"bg-gray-50 rounded-xl p-6 mb-6",children:[r.jsxs("div",{className:"flex items-center justify-center gap-2 mb-4",children:[r.jsx(C6,{className:"w-5 h-5 text-gray-500"}),r.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Payment Details"})]}),o&&r.jsxs("div",{className:"mb-4",children:[r.jsxs("p",{className:"text-3xl font-bold text-gray-900",children:["Le ",h(o)]}),r.jsx("p",{className:"text-sm text-gray-500",children:l})]}),r.jsxs("div",{className:"space-y-2 text-sm",children:[c&&r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-500",children:"Order Number"}),r.jsx("span",{className:"font-medium text-gray-900",children:c})]}),n&&r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-500",children:"Session ID"}),r.jsx("span",{className:"font-mono text-xs text-gray-900 truncate max-w-[180px]",children:n})]}),i&&r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-500",children:"Status"}),r.jsx("span",{className:`font-medium capitalize ${i==="completed"?"text-green-600":"text-blue-600"}`,children:i})]})]})]}),r.jsxs("div",{className:"flex items-center justify-center gap-2 text-gray-500 mb-4",children:[r.jsx(Ke,{className:"w-4 h-4 animate-spin"}),r.jsxs("span",{className:"text-sm",children:["Redirecting to Payment Settings in ",s,"s..."]})]}),r.jsx("button",{onClick:()=>t("/admin/payment-settings"),className:"w-full inline-flex items-center justify-center gap-2 px-6 py-3 bg-green-600 text-white font-medium rounded-lg hover:bg-green-700 transition-colors",children:"Go to Payment Settings Now"})]})})}function kFe(){const[e]=bc(),t=e.get("sessionId"),s=e.get("status");return r.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-slate-100 flex items-center justify-center p-4",children:r.jsxs("div",{className:"bg-white rounded-2xl shadow-xl max-w-md w-full p-8 text-center",children:[r.jsxs("div",{className:"mb-6",children:[r.jsx("div",{className:"w-20 h-20 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:r.jsx(Wt,{className:"w-12 h-12 text-red-600"})}),r.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Payment Cancelled"}),r.jsx("p",{className:"text-gray-600",children:"Your payment was cancelled and no charges were made."})]}),r.jsx("div",{className:"bg-gray-50 rounded-xl p-6 mb-6",children:r.jsxs("div",{className:"space-y-2 text-sm",children:[t&&r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-500",children:"Session ID"}),r.jsx("span",{className:"font-mono text-xs text-gray-900 truncate max-w-[180px]",children:t})]}),s&&r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-500",children:"Status"}),r.jsx("span",{className:"font-medium text-red-600 capitalize",children:s})]})]})}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs(xt,{to:"/admin/payment-settings",className:"w-full inline-flex items-center justify-center gap-2 px-6 py-3 bg-blue-600 text-white font-medium rounded-lg hover:bg-blue-700 transition-colors",children:[r.jsx(Ot,{className:"w-4 h-4"}),"Try Again"]}),r.jsxs(xt,{to:"/dashboard",className:"w-full inline-flex items-center justify-center gap-2 px-6 py-3 border border-gray-300 text-gray-700 font-medium rounded-lg hover:bg-gray-50 transition-colors",children:[r.jsx(Ar,{className:"w-4 h-4"}),"Back to Dashboard"]})]})]})})}function SFe(){const[e]=bc(),t=Ut(),{user:s}=pt(),[a,n]=p.useState(5),i=e.get("sessionId"),o=e.get("walletId"),l=e.get("status"),c=e.get("amount"),d=e.get("currency")||"SLE",h=e.get("newBalance"),f=e.get("error"),y=(()=>{const w=(s==null?void 0:s.roles)||[];return w.includes("superadmin")||w.includes("admin")?"/admin/dashboard":w.includes("merchant")||w.includes("developer")?"/merchant/dashboard":w.includes("agent")?"/agent/dashboard":"/wallets"})();p.useEffect(()=>{if(a>0){const w=setTimeout(()=>n(a-1),1e3);return()=>clearTimeout(w)}else t(y)},[a,t,y]);const v=w=>{if(!w)return"0";const N=Number(w);return new Intl.NumberFormat("en-US",{minimumFractionDigits:0,maximumFractionDigits:0}).format(N)};return r.jsx("div",{className:"min-h-screen bg-gradient-to-br from-green-50 to-emerald-100 flex items-center justify-center p-4",children:r.jsxs("div",{className:"bg-white rounded-2xl shadow-xl max-w-md w-full p-8 text-center",children:[r.jsxs("div",{className:"mb-6",children:[r.jsx("div",{className:"w-20 h-20 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:r.jsx(Ae,{className:"w-12 h-12 text-green-600"})}),r.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Deposit Successful!"}),r.jsx("p",{className:"text-gray-600",children:"Your wallet has been credited successfully."})]}),f&&r.jsx("div",{className:"mb-6 p-4 bg-yellow-50 border border-yellow-200 rounded-lg",children:r.jsxs("p",{className:"text-sm text-yellow-800",children:["Note: ",f]})}),r.jsxs("div",{className:"bg-gray-50 rounded-xl p-6 mb-6",children:[r.jsxs("div",{className:"flex items-center justify-center gap-2 mb-4",children:[r.jsx(Rt,{className:"w-5 h-5 text-gray-500"}),r.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Deposit Details"})]}),c&&r.jsxs("div",{className:"mb-4",children:[r.jsxs("p",{className:"text-3xl font-bold text-green-600",children:["+Le ",v(c)]}),r.jsx("p",{className:"text-sm text-gray-500",children:d})]}),h&&r.jsxs("div",{className:"mb-4 p-3 bg-white rounded-lg border border-gray-200",children:[r.jsx("p",{className:"text-sm text-gray-500",children:"New Wallet Balance"}),r.jsxs("p",{className:"text-xl font-bold text-gray-900",children:["Le ",Number(h).toLocaleString("en-US",{minimumFractionDigits:2})]})]}),r.jsxs("div",{className:"space-y-2 text-sm",children:[o&&r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-500",children:"Wallet"}),r.jsxs("span",{className:"font-mono text-xs text-gray-900 truncate max-w-[180px]",children:[o.slice(0,8),"..."]})]}),i&&r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-500",children:"Transaction ID"}),r.jsxs("span",{className:"font-mono text-xs text-gray-900 truncate max-w-[180px]",children:[i.slice(0,12),"..."]})]}),l&&r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-500",children:"Status"}),r.jsx("span",{className:`font-medium capitalize ${l==="completed"?"text-green-600":"text-blue-600"}`,children:l})]})]})]}),r.jsxs("div",{className:"flex items-center justify-center gap-2 text-gray-500 mb-4",children:[r.jsx(Ke,{className:"w-4 h-4 animate-spin"}),r.jsxs("span",{className:"text-sm",children:["Redirecting in ",a,"s..."]})]}),r.jsxs("button",{onClick:()=>t(y),className:"w-full inline-flex items-center justify-center gap-2 px-6 py-3 bg-green-600 text-white font-medium rounded-lg hover:bg-green-700 transition-colors",children:[r.jsx(Rt,{className:"w-4 h-4"}),"Continue"]})]})})}function CFe(){const[e]=bc(),t=e.get("sessionId"),s=e.get("walletId"),a=e.get("status");return r.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-slate-100 flex items-center justify-center p-4",children:r.jsxs("div",{className:"bg-white rounded-2xl shadow-xl max-w-md w-full p-8 text-center",children:[r.jsxs("div",{className:"mb-6",children:[r.jsx("div",{className:"w-20 h-20 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:r.jsx(Wt,{className:"w-12 h-12 text-red-600"})}),r.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Deposit Cancelled"}),r.jsx("p",{className:"text-gray-600",children:"Your deposit was cancelled and no funds were added to your wallet."})]}),r.jsx("div",{className:"bg-gray-50 rounded-xl p-6 mb-6",children:r.jsxs("div",{className:"space-y-2 text-sm",children:[s&&r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-500",children:"Wallet"}),r.jsxs("span",{className:"font-mono text-xs text-gray-900 truncate max-w-[180px]",children:[s.slice(0,8),"..."]})]}),t&&r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-500",children:"Session ID"}),r.jsxs("span",{className:"font-mono text-xs text-gray-900 truncate max-w-[180px]",children:[t.slice(0,12),"..."]})]}),a&&r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-500",children:"Status"}),r.jsx("span",{className:"font-medium text-red-600 capitalize",children:a})]})]})}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs(xt,{to:"/wallets",className:"w-full inline-flex items-center justify-center gap-2 px-6 py-3 bg-primary-600 text-white font-medium rounded-lg hover:bg-primary-700 transition-colors",children:[r.jsx(Ot,{className:"w-4 h-4"}),"Try Again"]}),r.jsxs(xt,{to:"/dashboard",className:"w-full inline-flex items-center justify-center gap-2 px-6 py-3 border border-gray-300 text-gray-700 font-medium rounded-lg hover:bg-gray-50 transition-colors",children:[r.jsx(Ar,{className:"w-4 h-4"}),"Back to Dashboard"]})]})]})})}const f1={SLE:{symbol:"Le",name:"Sierra Leonean Leone",decimals:2},USD:{symbol:"$",name:"US Dollar",decimals:2},EUR:{symbol:"",name:"Euro",decimals:2},GBP:{symbol:"",name:"British Pound",decimals:2},NGN:{symbol:"",name:"Nigerian Naira",decimals:2},GHS:{symbol:"",name:"Ghanaian Cedi",decimals:2}},AF="peeap_pending_checkout";function _Fe(){var Yr,wa;const{businessId:e}=Ui(),[t]=bc();Ut();const s=t.get("amount"),a=t.get("currency")||"SLE",n=t.get("reference"),i=t.get("description"),o=t.get("mode")||"live",l=t.get("redirect"),[c,d]=p.useState("loading"),[h,f]=p.useState(null),[x,y]=p.useState(s||""),[v,w]=p.useState(a),[N,k]=p.useState(""),[C,E]=p.useState(""),[_,T]=p.useState(null),[A,P]=p.useState(null),[M,R]=p.useState(null),[$,W]=p.useState(""),[I,B]=p.useState(""),[O,F]=p.useState(!1),[q,H]=p.useState(300),[K,V]=p.useState(!1),[z,G]=p.useState(null),[te,he]=p.useState("login"),[ne,ce]=p.useState(""),[xe,_e]=p.useState(""),[oe,ie]=p.useState(""),[ge,Z]=p.useState(""),[Q,re]=p.useState(!1),[pe,Se]=p.useState(!1),[je,Fe]=p.useState(null),[ke,Ve]=p.useState([]),[le,me]=p.useState(null),[ve,Ze]=p.useState(!1),[$e,Ne]=p.useState(0),[He,gt]=p.useState(!1),[yt,Vt]=p.useState(!1),[$r,De]=p.useState(""),[Xe,st]=p.useState(null),Ce=[{id:"mobile_money",name:"Mobile Money",icon:r.jsx(Ws,{className:"w-5 h-5"}),description:"Orange Money, Africell Money",available:!0,requiresAuth:!0},{id:"card",name:"Card Payment",icon:r.jsx(lt,{className:"w-5 h-5"}),description:"Visa, Mastercard",available:!0,requiresAuth:!0},{id:"bank_transfer",name:"Bank Transfer",icon:r.jsx(Da,{className:"w-5 h-5"}),description:"Direct bank payment",available:!0,requiresAuth:!0},{id:"wallet",name:"Peeap Wallet",icon:r.jsx(Rt,{className:"w-5 h-5"}),description:"Pay with your balance",available:!0,requiresAuth:!0}],ct=qe=>{const Ue=f1[v]||f1.SLE;return`${Ue.symbol} ${qe.toLocaleString(void 0,{minimumFractionDigits:Ue.decimals,maximumFractionDigits:Ue.decimals})}`},ht=()=>"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,qe=>{const Ue=Math.random()*16|0;return(qe==="x"?Ue:Ue&3|8).toString(16)}),Lt=()=>{const qe=ht();return B(qe),n||`PAY-${qe.split("-")[0].toUpperCase()}`},Ur=qe=>{const Ue=Math.floor(qe/60),Tt=qe%60;return`${Ue}:${Tt.toString().padStart(2,"0")}`},wr=()=>`peeap://pay?${new URLSearchParams({uuid:I,businessId:e||"",businessName:(h==null?void 0:h.name)||"",amount:x,currency:v,reference:$,description:i||`Payment to ${h==null?void 0:h.name}`}).toString()}`;p.useEffect(()=>{ua()},[]),p.useEffect(()=>{e&&Je()},[e]),p.useEffect(()=>{c==="qr_payment"&&!$&&W(Lt())},[c]),p.useEffect(()=>{let qe;return c==="qr_payment"&&q>0&&!K&&(qe=setInterval(()=>{H(Ue=>Ue<=1?(V(!0),window.parent!==window&&window.parent.postMessage({type:"peeap_payment",status:"expired",error:{message:"Payment session expired",code:"SESSION_EXPIRED"}},"*"),0):Ue-1)},1e3)),()=>{qe&&clearInterval(qe)}},[c,K]),p.useEffect(()=>{I&&(H(300),V(!1))},[I]);const ua=async()=>{const{data:{session:qe}}=await X.auth.getSession();if(qe!=null&&qe.user){G(qe.user);const Ue=localStorage.getItem(AF);if(Ue){const Tt=JSON.parse(Ue);localStorage.removeItem(AF),Tt.businessId===e&&(y(Tt.amount),w(Tt.currency),k(Tt.email),E(Tt.phone),T(Tt.selectedMethod),W(Tt.reference||Lt()),setTimeout(()=>{Cs(Tt)},500))}}},Je=async()=>{try{const{data:qe,error:Ue}=await X.from("merchant_businesses").select("id, name, logo_url, description, is_live_mode, approval_status").eq("id",e).single();if(Ue||!qe){P("Business not found"),d("error");return}f(qe),s&&parseFloat(s)>0?(W(Lt()),d("qr_payment")):d("amount")}catch(qe){console.error("Error loading business:",qe),P("Failed to load business"),d("error")}},Xt=()=>{const qe=parseFloat(x);if(!qe||qe<=0){P("Please enter a valid amount");return}P(null),d("details")},ur=()=>{if(!N&&!C){P("Please enter your email or phone number");return}P(null),ce(N),Z(C),W(Lt()),d("qr_payment")},es=async qe=>{T(qe);const Ue=Ce.find(Tt=>Tt.id===qe);if(Ue!=null&&Ue.requiresAuth&&!z)d("auth");else if(qe==="wallet"&&z){if((await Ya(z.id)).length===0){P("You don't have any wallets. Please create a wallet first.");return}d("wallet_select")}else Cs()},Cs=async qe=>{const Ue=qe||{businessId:h==null?void 0:h.id,amount:x,currency:v,email:N,phone:C,selectedMethod:_,reference:$};d("processing"),P(null);try{if(["mobile_money","card","bank_transfer"].includes(Ue.selectedMethod)){const Xa=Math.round(parseFloat(Ue.amount)),wt=await fetch("/api/checkout/create",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({businessId:Ue.businessId||(h==null?void 0:h.id),amount:Xa,currency:Ue.currency||v,reference:Ue.reference||$,description:i||`Payment to ${h==null?void 0:h.name}`,customerEmail:Ue.email||N,customerPhone:Ue.phone||C,paymentMethod:Ue.selectedMethod||_,redirectUrl:l})}),ts=await wt.json();if(!wt.ok)throw new Error(ts.error||"Failed to create checkout session");if(ts.paymentUrl){console.log("[Checkout] Redirecting to Monime:",ts.paymentUrl),window.parent!==window?(window.parent.postMessage({type:"peeap_payment",status:"redirect",redirectUrl:ts.paymentUrl,payment:{id:ts.paymentId,reference:$,amount:parseFloat(x),currency:v}},"*"),setTimeout(()=>{window.location.href=ts.paymentUrl},500)):window.location.href=ts.paymentUrl;return}else throw new Error("No payment URL returned")}const Tt=`pay_${Date.now()}_${Math.random().toString(36).substr(2,9)}`;R(Tt),await new Promise(Xa=>setTimeout(Xa,2e3)),d("success"),window.parent!==window&&window.parent.postMessage({type:"peeap_payment",status:"success",payment:{id:Tt,reference:$||Tt,amount:parseFloat(x),currency:v,status:"completed"}},"*"),l&&setTimeout(()=>{window.location.href=`${l}?payment_id=${Tt}&status=success`},3e3)}catch(Tt){console.error("Payment error:",Tt),P(Tt.message||"Payment failed"),d("error"),window.parent!==window&&window.parent.postMessage({type:"peeap_payment",status:"error",error:{message:Tt.message||"Payment failed"}},"*")}},Ya=async qe=>{Ze(!0);try{const Ue=await Hu.getWallets(qe);return Ve(Ue),Ue}catch(Ue){return console.error("Failed to fetch wallets:",Ue),[]}finally{Ze(!1)}},Et=async qe=>{qe.preventDefault(),Se(!0),Fe(null);try{const Ue=await Tc.login({email:ne,password:xe});if("mfaRequired"in Ue){Fe("This account has 2FA enabled. Please log in through the main app first.");return}const Tt=Ue.user;if(G(Tt),_==="wallet"){if((await Ya(Tt.id)).length===0){Fe("You don't have any wallets. Please create a wallet first.");return}d("wallet_select")}else await Cs()}catch(Ue){Fe(Ue.message||"Login failed")}finally{Se(!1)}},Os=qe=>{const Ue=parseFloat(x);if(qe.balance<Ue){P(`Insufficient balance. You have ${ct(qe.balance)} but need ${ct(Ue)}`);return}me(qe),P(null),Ne(0),Vt(!1),d("slide_to_pay")},ot=()=>{Vt(!0),d("enter_pin"),De(""),st(null)},mt=async()=>{if($r.length!==4){st("Please enter your 4-digit PIN");return}d("processing"),st(null);try{const{data:qe,error:Ue}=await X.from("users").select("transaction_pin").eq("id",z.id).single();if(Ue||!qe){st("Failed to verify PIN"),d("enter_pin");return}if(qe.transaction_pin!==$r){st("Incorrect PIN. Please try again."),d("enter_pin");return}const Tt=parseFloat(x),{error:Xa}=await X.from("transactions").insert({wallet_id:le==null?void 0:le.id,type:"PAYMENT",amount:-Tt,currency:v,status:"COMPLETED",description:i||`Payment to ${h==null?void 0:h.name}`,reference:$,merchant_name:h==null?void 0:h.name});if(Xa)throw new Error("Payment failed. Please try again.");const ze=((le==null?void 0:le.balance)||0)-Tt;await X.from("wallets").update({balance:ze,updated_at:new Date().toISOString()}).eq("id",le==null?void 0:le.id);const wt=`pay_${Date.now()}_${Math.random().toString(36).substr(2,9)}`;R(wt),d("success"),window.parent!==window&&window.parent.postMessage({type:"peeap_payment",status:"success",payment:{id:wt,reference:$,amount:Tt,currency:v,status:"completed",walletId:le==null?void 0:le.id}},"*")}catch(qe){P(qe.message||"Payment failed"),d("error")}},xr=async qe=>{qe.preventDefault(),Se(!0),Fe(null);try{const Ue=oe.trim().split(" "),Tt=Ue[0]||"",Xa=Ue.slice(1).join(" ")||"",{user:ze}=await Tc.register({email:ne,password:xe,firstName:Tt,lastName:Xa,phone:ge});G(ze),await Cs()}catch(Ue){Fe(Ue.message||"Signup failed")}finally{Se(!1)}},dr=()=>{c==="details"?d("amount"):c==="qr_payment"?d("details"):c==="auth"&&(d("qr_payment"),F(!0))},Gr=()=>{window.parent!==window&&window.parent.postMessage({type:"peeap_payment",status:"cancel"},"*"),window.close()};return c==="loading"?r.jsx("div",{className:"min-h-screen bg-gradient-to-br from-indigo-600 to-purple-700 flex items-center justify-center p-4",children:r.jsxs("div",{className:"text-center text-white",children:[r.jsx(Ke,{className:"w-12 h-12 animate-spin mx-auto mb-4"}),r.jsx("p",{children:"Loading checkout..."})]})}):c==="error"?r.jsx("div",{className:"min-h-screen bg-gradient-to-br from-indigo-600 to-purple-700 flex items-center justify-center p-4",children:r.jsxs(se,{className:"max-w-md w-full p-8 text-center",children:[r.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:r.jsx(Ct,{className:"w-8 h-8 text-red-600"})}),r.jsx("h1",{className:"text-xl font-bold text-gray-900 mb-2",children:"Payment Error"}),r.jsx("p",{className:"text-gray-600 mb-6",children:A||"Something went wrong"}),r.jsx("button",{onClick:()=>window.location.reload(),className:"px-6 py-3 bg-indigo-600 text-white rounded-xl font-medium hover:bg-indigo-700",children:"Try Again"})]})}):c==="success"?r.jsx("div",{className:"min-h-screen bg-gradient-to-br from-green-500 to-emerald-600 flex items-center justify-center p-4",children:r.jsxs(se,{className:"max-w-md w-full p-8 text-center",children:[r.jsx("div",{className:"w-20 h-20 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:r.jsx(Ae,{className:"w-10 h-10 text-green-600"})}),r.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Payment Successful!"}),r.jsxs("p",{className:"text-gray-600 mb-2",children:["Thank you for your payment of ",ct(parseFloat(x))," to ",h==null?void 0:h.name]}),(M||$)&&r.jsxs("p",{className:"text-xs text-gray-400 mb-6 font-mono",children:["Reference: ",$||M]}),l?r.jsx("p",{className:"text-sm text-gray-500",children:"Redirecting back..."}):r.jsx("button",{onClick:()=>window.close(),className:"px-6 py-3 bg-green-600 text-white rounded-xl font-medium hover:bg-green-700",children:"Close"})]})}):c==="processing"?r.jsx("div",{className:"min-h-screen bg-gradient-to-br from-indigo-600 to-purple-700 flex items-center justify-center p-4",children:r.jsxs(se,{className:"max-w-md w-full p-8 text-center",children:[r.jsxs("div",{className:"relative w-20 h-20 mx-auto mb-6",children:[r.jsx("div",{className:"absolute inset-0 border-4 border-indigo-200 rounded-full"}),r.jsx("div",{className:"absolute inset-0 border-4 border-indigo-600 rounded-full border-t-transparent animate-spin"})]}),r.jsx("h1",{className:"text-xl font-bold text-gray-900 mb-2",children:"Processing Payment"}),r.jsx("p",{className:"text-gray-600",children:"Redirecting to secure payment page..."}),r.jsx("p",{className:"text-xs text-gray-400 mt-4",children:"Do not close this window"})]})}):r.jsx("div",{className:"min-h-screen bg-gradient-to-br from-indigo-600 to-purple-700 flex items-center justify-center p-4",children:r.jsxs("div",{className:"max-w-md w-full",children:[r.jsxs(se,{className:"overflow-hidden",children:[r.jsx("div",{className:"bg-white border-b border-gray-100 p-4",children:r.jsxs("div",{className:"flex items-center justify-between",children:[c!=="amount"?r.jsx("button",{onClick:dr,className:"p-2 hover:bg-gray-100 rounded-lg",children:r.jsx(Ar,{className:"w-5 h-5 text-gray-600"})}):r.jsx("div",{className:"w-9"}),r.jsxs("div",{className:"flex items-center gap-3",children:[h!=null&&h.logo_url?r.jsx("img",{src:h.logo_url,alt:h.name,className:"w-10 h-10 rounded-lg object-cover"}):r.jsx("div",{className:"w-10 h-10 bg-indigo-100 rounded-lg flex items-center justify-center",children:r.jsx(Da,{className:"w-5 h-5 text-indigo-600"})}),r.jsxs("div",{children:[r.jsx("p",{className:"font-semibold text-gray-900",children:h==null?void 0:h.name}),r.jsx("p",{className:"text-xs text-gray-500",children:o==="test"&&r.jsx("span",{className:"px-1.5 py-0.5 bg-orange-100 text-orange-700 rounded text-xs",children:"TEST MODE"})})]})]}),r.jsx("button",{onClick:Gr,className:"p-2 hover:bg-gray-100 rounded-lg",children:r.jsx(Ct,{className:"w-5 h-5 text-gray-600"})})]})}),r.jsxs("div",{className:"px-6 pt-4",children:[r.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-400 mb-2",children:[r.jsx("span",{className:c==="amount"?"text-indigo-600 font-medium":"",children:"Amount"}),r.jsx("span",{className:c==="details"?"text-indigo-600 font-medium":"",children:"Details"}),r.jsx("span",{className:c==="qr_payment"||c==="auth"?"text-indigo-600 font-medium":"",children:"Pay"})]}),r.jsx("div",{className:"h-1 bg-gray-100 rounded-full overflow-hidden",children:r.jsx("div",{className:"h-full bg-indigo-600 transition-all duration-300",style:{width:c==="amount"?"33%":c==="details"?"66%":"100%"}})})]}),A&&r.jsxs("div",{className:"mx-6 mt-4 p-3 bg-red-50 border border-red-200 rounded-lg flex items-center gap-2 text-red-700 text-sm",children:[r.jsx(dt,{className:"w-4 h-4 flex-shrink-0"}),A]}),c==="amount"&&r.jsxs("div",{className:"p-6",children:[r.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-1",children:"Enter Amount"}),r.jsx("p",{className:"text-sm text-gray-500 mb-6",children:i||`Payment to ${h==null?void 0:h.name}`}),r.jsxs("div",{className:"mb-6",children:[r.jsxs("div",{className:"relative",children:[r.jsx("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-2xl text-gray-400",children:((Yr=f1[v])==null?void 0:Yr.symbol)||"Le"}),r.jsx("input",{type:"number",value:x,onChange:qe=>y(qe.target.value),placeholder:"0.00",className:"w-full text-4xl font-bold text-center py-6 px-16 border-2 border-gray-200 rounded-2xl focus:border-indigo-500 focus:ring-0 outline-none",autoFocus:!0})]}),r.jsxs("div",{className:"mt-4",children:[r.jsx("label",{className:"text-sm text-gray-500 mb-2 block",children:"Currency"}),r.jsx("div",{className:"grid grid-cols-3 gap-2",children:Object.entries(f1).slice(0,6).map(([qe,Ue])=>r.jsxs("button",{onClick:()=>w(qe),className:`p-3 rounded-lg text-sm font-medium transition-colors ${v===qe?"bg-indigo-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[Ue.symbol," ",qe]},qe))})]})]}),r.jsxs("button",{onClick:Xt,disabled:!x||parseFloat(x)<=0,className:"w-full py-4 bg-indigo-600 text-white rounded-xl font-semibold disabled:opacity-50 disabled:cursor-not-allowed hover:bg-indigo-700 transition-colors flex items-center justify-center gap-2",children:["Continue",r.jsx(Qr,{className:"w-5 h-5"})]})]}),c==="details"&&r.jsxs("div",{className:"p-6",children:[r.jsxs("div",{className:"text-center mb-6 p-4 bg-gray-50 rounded-xl",children:[r.jsx("p",{className:"text-sm text-gray-500",children:"You're paying"}),r.jsx("p",{className:"text-3xl font-bold text-gray-900",children:ct(parseFloat(x))})]}),r.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Your Details"}),r.jsxs("div",{className:"space-y-4 mb-6",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email Address"}),r.jsxs("div",{className:"relative",children:[r.jsx(On,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),r.jsx("input",{type:"email",value:N,onChange:qe=>k(qe.target.value),placeholder:"your@email.com",className:"w-full py-3 pl-12 pr-4 border-2 border-gray-200 rounded-xl focus:border-indigo-500 outline-none"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone Number"}),r.jsxs("div",{className:"relative",children:[r.jsx(Ss,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),r.jsx("input",{type:"tel",value:C,onChange:qe=>E(qe.target.value),placeholder:"+232 76 123456",className:"w-full py-3 pl-12 pr-4 border-2 border-gray-200 rounded-xl focus:border-indigo-500 outline-none"})]})]})]}),r.jsxs("button",{onClick:ur,className:"w-full py-4 bg-indigo-600 text-white rounded-xl font-semibold hover:bg-indigo-700 transition-colors flex items-center justify-center gap-2",children:["Continue to Payment",r.jsx(Qr,{className:"w-5 h-5"})]})]}),c==="qr_payment"&&r.jsxs("div",{className:"p-6",children:[r.jsxs("div",{className:"text-center mb-6",children:[h!=null&&h.logo_url?r.jsx("img",{src:h.logo_url,alt:h.name,className:"w-16 h-16 rounded-xl mx-auto mb-3 object-cover"}):r.jsx("div",{className:"w-16 h-16 rounded-xl bg-gradient-to-br from-indigo-500 to-purple-600 mx-auto mb-3 flex items-center justify-center text-white text-2xl font-bold",children:((wa=h==null?void 0:h.name)==null?void 0:wa.charAt(0))||"P"}),r.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:h==null?void 0:h.name})]}),r.jsx("div",{className:`text-center mb-4 py-2 px-4 rounded-lg ${K?"bg-red-100 text-red-700":q<=60?"bg-orange-100 text-orange-700":"bg-gray-100 text-gray-600"}`,children:K?r.jsx("span",{className:"font-medium",children:"Payment session expired"}):r.jsxs("span",{className:"font-mono font-medium",children:["Time remaining: ",Ur(q)]})}),K?r.jsxs("div",{className:"text-center py-8",children:[r.jsx("div",{className:"w-16 h-16 mx-auto mb-4 rounded-full bg-red-100 flex items-center justify-center",children:r.jsx(Ct,{className:"w-8 h-8 text-red-600"})}),r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Session Expired"}),r.jsx("p",{className:"text-sm text-gray-500 mb-6",children:"This payment session has expired for security reasons."}),r.jsx("button",{onClick:()=>{W(Lt())},className:"px-6 py-3 bg-indigo-600 text-white rounded-xl font-semibold hover:bg-indigo-700",children:"Generate New QR Code"})]}):r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"text-center mb-6 p-6 bg-gradient-to-r from-indigo-600 to-purple-600 rounded-2xl text-white",children:[r.jsx("p",{className:"text-sm opacity-80",children:"Pay"}),r.jsx("p",{className:"text-4xl font-bold",children:ct(parseFloat(x))}),r.jsxs("p",{className:"text-xs opacity-60 mt-2 font-mono",children:["ID: ",I.split("-")[0]]})]}),r.jsxs("div",{className:"text-center mb-6",children:[r.jsxs("div",{className:"flex items-center justify-center gap-2 mb-4",children:[r.jsx(GV,{className:"w-6 h-6 text-indigo-600"}),r.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Scan to Pay"})]}),r.jsx("div",{className:"bg-white p-6 rounded-2xl border-2 border-indigo-100 inline-block mx-auto shadow-lg",children:r.jsx(wx,{value:wr(),size:200,level:"H",style:{height:"auto",maxWidth:"100%",width:"100%"},bgColor:"#ffffff",fgColor:"#1e1b4b"})}),r.jsx("p",{className:"mt-4 text-sm text-gray-500",children:"Open Peeap app and scan this code"})]}),r.jsxs("div",{className:"relative my-6",children:[r.jsx("div",{className:"absolute inset-0 flex items-center",children:r.jsx("div",{className:"w-full border-t border-gray-200"})}),r.jsx("div",{className:"relative flex justify-center text-sm",children:r.jsx("span",{className:"px-4 bg-white text-gray-500",children:"or"})})]}),r.jsx("div",{className:"space-y-2",children:Ce.map(qe=>r.jsxs("button",{onClick:()=>es(qe.id),disabled:!qe.available||K,className:`w-full p-3 rounded-xl border-2 transition-all flex items-center gap-3 ${_===qe.id?"border-indigo-600 bg-indigo-50":"border-gray-200 hover:border-gray-300"} ${qe.available?"":"opacity-50 cursor-not-allowed"}`,children:[r.jsx("div",{className:`w-10 h-10 rounded-lg flex items-center justify-center ${_===qe.id?"bg-indigo-600 text-white":"bg-gray-100 text-gray-600"}`,children:qe.icon}),r.jsxs("div",{className:"flex-1 text-left",children:[r.jsx("p",{className:"font-medium text-gray-900 text-sm",children:qe.name}),r.jsx("p",{className:"text-xs text-gray-500",children:qe.description})]}),r.jsx(Qr,{className:"w-4 h-4 text-gray-400"})]},qe.id))}),r.jsx("div",{className:"mt-6 text-center",children:r.jsxs("div",{className:"flex items-center justify-center gap-2 text-gray-400",children:[r.jsx("div",{className:"w-2 h-2 bg-indigo-600 rounded-full animate-pulse"}),r.jsx("span",{className:"text-xs",children:"Waiting for payment..."})]})})]})]}),c==="auth"&&r.jsxs("div",{className:"p-6",children:[r.jsxs("div",{className:"text-center mb-6 p-4 bg-gray-50 rounded-xl",children:[r.jsx("p",{className:"text-sm text-gray-500",children:"Total Amount"}),r.jsx("p",{className:"text-3xl font-bold text-gray-900",children:ct(parseFloat(x))})]}),r.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-2",children:te==="login"?"Login to Continue":"Create Account"}),r.jsx("p",{className:"text-sm text-gray-500 mb-4",children:te==="login"?"Sign in to complete your payment securely":"Create an account to complete your payment"}),je&&r.jsxs("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-lg flex items-center gap-2 text-red-700 text-sm",children:[r.jsx(dt,{className:"w-4 h-4 flex-shrink-0"}),je]}),r.jsxs("form",{onSubmit:te==="login"?Et:xr,className:"space-y-4",children:[te==="signup"&&r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Full Name"}),r.jsxs("div",{className:"relative",children:[r.jsx(br,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),r.jsx("input",{type:"text",value:oe,onChange:qe=>ie(qe.target.value),placeholder:"John Doe",required:!0,className:"w-full py-3 pl-12 pr-4 border-2 border-gray-200 rounded-xl focus:border-indigo-500 outline-none"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email or Phone"}),r.jsxs("div",{className:"relative",children:[r.jsx(On,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),r.jsx("input",{type:"text",value:ne,onChange:qe=>ce(qe.target.value),placeholder:"email@example.com or 076123456",required:!0,className:"w-full py-3 pl-12 pr-4 border-2 border-gray-200 rounded-xl focus:border-indigo-500 outline-none"})]})]}),te==="signup"&&r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone"}),r.jsxs("div",{className:"relative",children:[r.jsx(Ss,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),r.jsx("input",{type:"tel",value:ge,onChange:qe=>Z(qe.target.value),placeholder:"+232 76 123456",className:"w-full py-3 pl-12 pr-4 border-2 border-gray-200 rounded-xl focus:border-indigo-500 outline-none"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Password"}),r.jsxs("div",{className:"relative",children:[r.jsx(Kr,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),r.jsx("input",{type:Q?"text":"password",value:xe,onChange:qe=>_e(qe.target.value),placeholder:"",required:!0,minLength:6,className:"w-full py-3 pl-12 pr-12 border-2 border-gray-200 rounded-xl focus:border-indigo-500 outline-none"}),r.jsx("button",{type:"button",onClick:()=>re(!Q),className:"absolute right-4 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600",children:Q?r.jsx(Dn,{className:"w-5 h-5"}):r.jsx(ir,{className:"w-5 h-5"})})]})]}),r.jsx("button",{type:"submit",disabled:pe,className:"w-full py-4 bg-indigo-600 text-white rounded-xl font-semibold disabled:opacity-50 hover:bg-indigo-700 transition-colors flex items-center justify-center gap-2",children:pe?r.jsx(Ke,{className:"w-5 h-5 animate-spin"}):r.jsxs(r.Fragment,{children:[te==="login"?"Login & Pay":"Create Account & Pay",r.jsx(Qr,{className:"w-5 h-5"})]})})]}),r.jsx("div",{className:"mt-4 text-center",children:r.jsx("button",{onClick:()=>{he(te==="login"?"signup":"login"),Fe(null)},className:"text-sm text-indigo-600 hover:text-indigo-700",children:te==="login"?"Don't have an account? Sign up":"Already have an account? Login"})})]}),c==="wallet_select"&&r.jsxs("div",{className:"p-6",children:[r.jsxs("div",{className:"text-center mb-6 p-4 bg-gradient-to-r from-indigo-600 to-purple-600 rounded-xl text-white",children:[r.jsx("p",{className:"text-sm opacity-80",children:"You're paying"}),r.jsx("p",{className:"text-3xl font-bold",children:ct(parseFloat(x))}),r.jsxs("p",{className:"text-sm opacity-80 mt-1",children:["to ",h==null?void 0:h.name]})]}),r.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Select Wallet"}),A&&r.jsxs("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-lg flex items-center gap-2 text-red-700 text-sm",children:[r.jsx(dt,{className:"w-4 h-4 flex-shrink-0"}),A]}),ve?r.jsx("div",{className:"flex items-center justify-center py-8",children:r.jsx(Ke,{className:"w-8 h-8 animate-spin text-indigo-600"})}):ke.length===0?r.jsxs("div",{className:"text-center py-8 text-gray-500",children:[r.jsx(Rt,{className:"w-12 h-12 mx-auto mb-3 text-gray-300"}),r.jsx("p",{children:"No wallets found"})]}):r.jsx("div",{className:"space-y-3",children:ke.map(qe=>r.jsxs("button",{onClick:()=>Os(qe),className:`w-full p-4 rounded-xl border-2 transition-all flex items-center gap-4 ${qe.balance>=parseFloat(x)?"border-gray-200 hover:border-indigo-500 hover:bg-indigo-50":"border-gray-100 bg-gray-50 opacity-60"}`,children:[r.jsx("div",{className:"w-12 h-12 rounded-full bg-gradient-to-br from-indigo-500 to-purple-600 flex items-center justify-center text-white",children:r.jsx(Rt,{className:"w-6 h-6"})}),r.jsxs("div",{className:"flex-1 text-left",children:[r.jsx("p",{className:"font-semibold text-gray-900",children:ct(qe.balance)}),r.jsxs("p",{className:"text-sm text-gray-500",children:[qe.currency," Wallet"]})]}),qe.balance>=parseFloat(x)?r.jsx(Qr,{className:"w-5 h-5 text-gray-400"}):r.jsx("span",{className:"text-xs text-red-500",children:"Insufficient"})]},qe.id))}),r.jsxs("button",{onClick:()=>d("qr_payment"),className:"mt-6 w-full py-3 text-gray-600 text-sm hover:text-gray-800",children:[r.jsx(Ar,{className:"w-4 h-4 inline mr-2"}),"Back to payment methods"]})]}),c==="slide_to_pay"&&r.jsxs("div",{className:"p-6",children:[r.jsxs("div",{className:"text-center mb-6 p-4 bg-gradient-to-r from-indigo-600 to-purple-600 rounded-xl text-white",children:[r.jsx("p",{className:"text-sm opacity-80",children:"Paying"}),r.jsx("p",{className:"text-3xl font-bold",children:ct(parseFloat(x))}),r.jsxs("p",{className:"text-sm opacity-80 mt-1",children:["to ",h==null?void 0:h.name]})]}),r.jsxs("div",{className:"bg-gray-50 rounded-xl p-4 mb-6 flex items-center gap-3",children:[r.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-indigo-500 to-purple-600 flex items-center justify-center text-white",children:r.jsx(Rt,{className:"w-5 h-5"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-500",children:"From wallet"}),r.jsx("p",{className:"font-semibold text-gray-900",children:ct((le==null?void 0:le.balance)||0)})]})]}),r.jsx("div",{className:"relative mb-6",children:r.jsxs("div",{className:"h-16 bg-gray-100 rounded-full relative overflow-hidden",children:[r.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-indigo-600 to-purple-600 transition-all duration-300",style:{width:`${$e}%`}}),r.jsx("div",{className:"absolute top-1 left-1 bottom-1 w-14 bg-white rounded-full shadow-lg flex items-center justify-center cursor-grab active:cursor-grabbing transition-all",style:{left:`calc(${$e}% - ${$e*.14}px + 4px)`},onMouseDown:qe=>{gt(!0);const Ue=qe.clientX,Tt=qe.currentTarget.parentElement,Xa=(Tt==null?void 0:Tt.clientWidth)||200,ze=ts=>{const bo=ts.clientX-Ue,Oa=Math.min(100,Math.max(0,bo/(Xa-60)*100));Ne(Oa),Oa>=95&&(ot(),document.removeEventListener("mousemove",ze),document.removeEventListener("mouseup",wt))},wt=()=>{gt(!1),$e<95&&Ne(0),document.removeEventListener("mousemove",ze),document.removeEventListener("mouseup",wt)};document.addEventListener("mousemove",ze),document.addEventListener("mouseup",wt)},onTouchStart:qe=>{gt(!0);const Ue=qe.touches[0].clientX,Tt=qe.currentTarget.parentElement,Xa=(Tt==null?void 0:Tt.clientWidth)||200,ze=ts=>{const bo=ts.touches[0].clientX-Ue,Oa=Math.min(100,Math.max(0,bo/(Xa-60)*100));Ne(Oa),Oa>=95&&ot()},wt=()=>{gt(!1),$e<95&&Ne(0),document.removeEventListener("touchmove",ze),document.removeEventListener("touchend",wt)};document.addEventListener("touchmove",ze),document.addEventListener("touchend",wt)},children:r.jsx(Qr,{className:"w-6 h-6 text-indigo-600"})}),r.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none",children:r.jsx("span",{className:`font-medium transition-opacity ${$e>30?"text-white":"text-gray-500"}`,children:$e>80?"Release to confirm":"Slide to pay"})})]})}),r.jsxs("button",{onClick:()=>d("wallet_select"),className:"w-full py-3 text-gray-600 text-sm hover:text-gray-800",children:[r.jsx(Ar,{className:"w-4 h-4 inline mr-2"}),"Change wallet"]})]}),c==="enter_pin"&&r.jsxs("div",{className:"p-6",children:[r.jsxs("div",{className:"text-center mb-6 p-4 bg-gradient-to-r from-green-500 to-emerald-600 rounded-xl text-white",children:[r.jsx(Ae,{className:"w-8 h-8 mx-auto mb-2"}),r.jsx("p",{className:"text-sm opacity-80",children:"Confirming payment of"}),r.jsx("p",{className:"text-2xl font-bold",children:ct(parseFloat(x))})]}),r.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-2 text-center",children:"Enter Transaction PIN"}),r.jsx("p",{className:"text-sm text-gray-500 text-center mb-6",children:"Enter your 4-digit PIN to complete this payment"}),Xe&&r.jsxs("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-lg flex items-center gap-2 text-red-700 text-sm",children:[r.jsx(dt,{className:"w-4 h-4 flex-shrink-0"}),Xe]}),r.jsx("div",{className:"flex justify-center gap-3 mb-6",children:[0,1,2,3].map(qe=>r.jsx("div",{className:`w-14 h-14 rounded-xl border-2 flex items-center justify-center text-2xl font-bold ${$r.length>qe?"border-indigo-600 bg-indigo-50 text-indigo-600":"border-gray-200 text-gray-400"}`,children:$r.length>qe?"":""},qe))}),r.jsx("div",{className:"grid grid-cols-3 gap-3 max-w-xs mx-auto mb-6",children:[1,2,3,4,5,6,7,8,9,null,0,"del"].map((qe,Ue)=>r.jsx("button",{onClick:()=>{qe==="del"?De(Tt=>Tt.slice(0,-1)):qe!==null&&$r.length<4&&De(Tt=>Tt+qe)},disabled:qe===null,className:`h-14 rounded-xl font-semibold text-xl transition-colors ${qe===null?"invisible":qe==="del"?"bg-gray-100 text-gray-600 hover:bg-gray-200":"bg-gray-100 text-gray-900 hover:bg-gray-200 active:bg-indigo-100"}`,children:qe==="del"?r.jsx(Ct,{className:"w-5 h-5 mx-auto"}):qe},Ue))}),r.jsxs("button",{onClick:mt,disabled:$r.length!==4,className:"w-full py-4 bg-indigo-600 text-white rounded-xl font-semibold disabled:opacity-50 hover:bg-indigo-700 transition-colors flex items-center justify-center gap-2",children:["Confirm Payment",r.jsx(Qr,{className:"w-5 h-5"})]})]}),r.jsx("div",{className:"px-6 py-4 bg-gray-50 border-t border-gray-100",children:r.jsxs("div",{className:"flex items-center justify-center gap-2 text-gray-500",children:[r.jsx(rr,{className:"w-4 h-4"}),r.jsx("span",{className:"text-xs",children:"Secured by Peeap"})]})})]}),r.jsx("div",{className:"text-center mt-4",children:r.jsx("a",{href:"https://peeap.com",target:"_blank",rel:"noopener noreferrer",className:"text-sm text-white/70 hover:text-white",children:"Powered by Peeap"})})]})})}const PF={SLE:{symbol:"Le",name:"Sierra Leonean New Leone",decimals:2},USD:{symbol:"$",name:"US Dollar",decimals:2},EUR:{symbol:"",name:"Euro",decimals:2},GBP:{symbol:"",name:"British Pound",decimals:2},NGN:{symbol:"",name:"Nigerian Naira",decimals:2},GHS:{symbol:"",name:"Ghanaian Cedi",decimals:2}};function EFe(){var yt,Vt,$r;const{sessionId:e}=Ui(),[t]=bc(),{user:s,isAuthenticated:a,login:n,register:i,isLoading:o}=pt(),[l,c]=p.useState("loading"),[d,h]=p.useState(null),[f,x]=p.useState(null),[y,v]=p.useState(null),[w,N]=p.useState(""),[k,C]=p.useState(""),[E,_]=p.useState(""),[T,A]=p.useState(""),[P,M]=p.useState(!1),[R,$]=p.useState("login"),[W,I]=p.useState(""),[B,O]=p.useState(""),[F,q]=p.useState(""),[H,K]=p.useState(""),[V,z]=p.useState(""),[G,te]=p.useState(""),[he,ne]=p.useState(!1),[ce,xe]=p.useState(null),[_e,oe]=p.useState(!1),[ie,ge]=p.useState(null),[Z,Q]=p.useState(""),re=(De,Xe)=>{const st=PF[Xe]||PF.SLE;return`${st.symbol} ${De.toLocaleString(void 0,{minimumFractionDigits:st.decimals,maximumFractionDigits:st.decimals})}`},pe=(De,Xe,st)=>{const Ce=new URL(De);return Ce.searchParams.set("status","success"),Ce.searchParams.set("session_id",Xe.external_id||Xe.externalId||e||""),Ce.searchParams.set("reference",Xe.reference||""),Ce.searchParams.set("amount",String(Xe.amount||0)),Ce.searchParams.set("currency",Xe.currency_code||Xe.currencyCode||"SLE"),Ce.searchParams.set("payment_method",st),Ce.toString()};p.useEffect(()=>{const De=new URLSearchParams(window.location.search),Xe=De.get("status")||t.get("status"),st=De.get("retry")||t.get("retry"),Ce=De.get("message")||t.get("message");Xe==="success"&&e?je():st==="true"&&Ce&&(ge(decodeURIComponent(Ce)),window.history.replaceState({},"",`/checkout/pay/${e}`));const ct=window.__CHECKOUT_MESSAGE__;ct&&(ge(ct),delete window.__CHECKOUT_MESSAGE__)},[t,e]);const Se=De=>{try{const Xe=new(window.AudioContext||window.webkitAudioContext),st=Xe.createOscillator(),Ce=Xe.createGain();st.connect(Ce),Ce.connect(Xe.destination),De==="success"?(st.frequency.setValueAtTime(523.25,Xe.currentTime),st.frequency.setValueAtTime(659.25,Xe.currentTime+.15),st.frequency.setValueAtTime(783.99,Xe.currentTime+.3),Ce.gain.setValueAtTime(.3,Xe.currentTime),Ce.gain.exponentialRampToValueAtTime(.01,Xe.currentTime+.8),st.start(Xe.currentTime),st.stop(Xe.currentTime+.8)):(st.frequency.setValueAtTime(300,Xe.currentTime),st.frequency.setValueAtTime(200,Xe.currentTime+.2),Ce.gain.setValueAtTime(.2,Xe.currentTime),Ce.gain.exponentialRampToValueAtTime(.01,Xe.currentTime+.4),st.start(Xe.currentTime),st.stop(Xe.currentTime+.4))}catch(Xe){console.log("Could not play sound:",Xe)}},je=async()=>{var De;if(e){c("processing");try{const Xe="https://api.peeap.com",st=Xe.endsWith("/api")?Xe:`${Xe}/api`,ct=await(await fetch(`${st}/checkout/sessions/${e}`)).json();if(console.log("[Checkout] Session status on redirect:",ct.status),ct.status==="COMPLETE"){console.log("[Checkout] Session already complete, showing success");const ht={...ct,successUrl:ct.success_url||ct.successUrl,merchantName:ct.merchant_name||ct.merchantName,amount:ct.amount,currencyCode:ct.currency_code||ct.currencyCode||"SLE"};h(ht),Q("mobile_money"),Se("success"),c("success"),window.history.replaceState({},"",`/checkout/pay/${e}`);const Lt=ct.success_url||ct.successUrl;Lt&&setTimeout(()=>{window.location.href=pe(Lt,ct,"mobile_money")},3e3);return}if(ct.status==="OPEN"){console.log("[Checkout] Completing session...");const ht=await fetch(`${st}/checkout/sessions/${e}/complete`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({paymentMethod:"mobile_money"})}),Lt=await ht.json();if(!ht.ok){if((De=Lt.error)!=null&&De.includes("not open")){console.log("[Checkout] Session may have been completed by webhook, checking again...");const ur=await(await fetch(`${st}/checkout/sessions/${e}`)).json();if(ur.status==="COMPLETE"){const es={...ur,successUrl:ur.success_url||ur.successUrl,merchantName:ur.merchant_name||ur.merchantName,amount:ur.amount,currencyCode:ur.currency_code||ur.currencyCode||"SLE"};h(es),Q("mobile_money"),Se("success"),c("success"),window.history.replaceState({},"",`/checkout/pay/${e}`);return}}throw new Error(Lt.error||"Failed to complete session")}const wr=await(await fetch(`${st}/checkout/sessions/${e}`)).json(),ua={...wr,successUrl:wr.success_url||wr.successUrl,merchantName:wr.merchant_name||wr.merchantName,amount:wr.amount,currencyCode:wr.currency_code||wr.currencyCode||"SLE"};h(ua),Q("mobile_money"),Se("success"),c("success"),window.history.replaceState({},"",`/checkout/pay/${e}`);const Je=wr.success_url||wr.successUrl;Je&&setTimeout(()=>{window.location.href=pe(Je,wr,"mobile_money")},3e3)}else throw new Error(`Payment session is ${ct.status.toLowerCase()}`)}catch(Xe){console.error("[Checkout] Error completing session:",Xe),Se("error"),v(Xe.message||"Failed to complete payment"),c("error")}}};p.useEffect(()=>{t.get("status")||Fe()},[e]),p.useEffect(()=>{a&&s&&f==="mobile"&&l==="login_prompt"&&He()},[a,s,f,l]);const Fe=async()=>{if(!e){v("Invalid checkout session"),c("error");return}try{const De="https://api.peeap.com",Xe=De.endsWith("/api")?De:`${De}/api`,st=await fetch(`${Xe}/checkout/sessions/${e}`);if(!st.ok)throw new Error("Session not found");const Ce=await st.json(),ht=(Ce.metadata||{}).isTestMode===!0,Lt={id:Ce.id,externalId:Ce.external_id||Ce.externalId,merchantId:Ce.merchant_id||Ce.merchantId,amount:Ce.amount,currencyCode:Ce.currency_code||Ce.currencyCode||"SLE",description:Ce.description,status:Ce.status,expiresAt:Ce.expires_at||Ce.expiresAt,createdAt:Ce.created_at||Ce.createdAt,merchantName:Ce.merchant_name||Ce.merchantName,merchantLogoUrl:Ce.merchant_logo_url||Ce.merchantLogoUrl,brandColor:Ce.brand_color||Ce.brandColor||"#635BFF",successUrl:Ce.success_url||Ce.successUrl,cancelUrl:Ce.cancel_url||Ce.cancelUrl,paymentMethods:Ce.payment_methods||Ce.paymentMethods||{qr:!0,card:!0,mobile:!0},isTestMode:ht};if(new Date(Lt.expiresAt)<new Date){h(Lt),c("expired");return}if(Lt.status==="COMPLETE"){v("This checkout session has already been completed"),c("error");return}if(Lt.status==="CANCELLED"){v("This checkout session was cancelled"),c("error");return}h(Lt),c("select_method")}catch(De){v(De.message||"Failed to load checkout session"),c("error")}},ke=p.useCallback(De=>{var Ce;console.log("[Checkout] Payment COMPLETE detected! Showing success..."),Se("success");const Xe={id:De.id,externalId:De.external_id||De.externalId,merchantId:De.merchant_id||De.merchantId,amount:De.amount,currencyCode:De.currency_code||De.currencyCode||"SLE",description:De.description,status:"COMPLETE",expiresAt:De.expires_at||De.expiresAt,createdAt:De.created_at||De.createdAt,merchantName:De.merchant_name||De.merchantName,merchantLogoUrl:De.merchant_logo_url||De.merchantLogoUrl,brandColor:De.brand_color||De.brandColor||"#635BFF",successUrl:De.success_url||De.successUrl,cancelUrl:De.cancel_url||De.cancelUrl,paymentMethods:De.payment_methods||{qr:!0,card:!0,mobile:!0},isTestMode:((Ce=De.metadata)==null?void 0:Ce.isTestMode)===!0};h(Xe),Q("scan_to_pay"),c("success");const st=De.success_url||De.successUrl;st&&(console.log("[Checkout] Will redirect to:",st,"in 4 seconds"),setTimeout(()=>{const ct=pe(st,De,"scan_to_pay");console.log("[Checkout] Redirecting now to:",ct),window.location.href=ct},4e3))},[]);p.useEffect(()=>{let De=null,Xe=null,st=!1,Ce=!1;if(l==="qr_display"&&e&&(d!=null&&d.id)){console.log("[Checkout] Setting up payment detection for session:",e,"(internal:",d.id,")"),De=X.channel(`checkout_session_${e}`).on("postgres_changes",{event:"UPDATE",schema:"public",table:"checkout_sessions",filter:`external_id=eq.${e}`},ht=>{console.log("[Checkout] Real-time update received:",ht),!Ce&&ht.new&&ht.new.status==="COMPLETE"&&(Ce=!0,ke(ht.new))}).subscribe(ht=>{console.log("[Checkout] Subscription status:",ht)});const ct=async()=>{if(!(st||Ce)){st=!0;try{const ht="https://api.peeap.com",Lt=ht.endsWith("/api")?ht:`${ht}/api`,Ur=await fetch(`${Lt}/checkout/sessions/${e}`);if(Ur.ok){const Je=await Ur.json();if(console.log("[Checkout] API poll - status:",Je.status),Je.status==="COMPLETE"&&!Ce){Ce=!0,Xe&&(clearInterval(Xe),Xe=null),ke(Je);return}}const{data:wr,error:ua}=await X.from("checkout_sessions").select("*").eq("external_id",e).single();!ua&&wr&&(console.log("[Checkout] Direct DB poll - status:",wr.status),wr.status==="COMPLETE"&&!Ce&&(Ce=!0,Xe&&(clearInterval(Xe),Xe=null),ke(wr)))}catch(ht){console.error("[Checkout] Error polling payment status:",ht)}finally{st=!1}}};ct(),Xe=setInterval(ct,1500)}return()=>{De&&(console.log("[Checkout] Cleaning up real-time subscription"),X.removeChannel(De)),Xe&&(console.log("[Checkout] Cleaning up polling interval"),clearInterval(Xe))}},[l,e,d==null?void 0:d.id,ke]);const Ve=async De=>{x(De),De==="qr"?c("qr_display"):De==="card"?c("card_form"):De==="mobile"&&(a&&s?He():c("login_prompt"))},le=()=>{x(null),c("select_method"),v(null),N(""),C(""),_(""),A(""),M(!1)},me=()=>d?`${window.location.origin}/scan-pay/${e}`:"",ve=async De=>{if(De.preventDefault(),!!d){oe(!0),v(null);try{const Xe=await hn.lookupCardForPayment(w);if(!Xe)throw new Error("Card not found. Please check your card number.");const st=k.trim().toLowerCase(),Ce=Xe.cardholderName.toLowerCase();if(!Ce.includes(st)&&!st.includes(Ce.split(" ")[0]))throw new Error("Cardholder name does not match.");const[ct,ht]=E.split("/").map(es=>parseInt(es.trim(),10));if(!ct||!ht||ct<1||ct>12)throw new Error("Invalid expiry date. Use MM/YY.");const Lt=new Date,Ur=Lt.getFullYear()%100,wr=Lt.getMonth()+1;if(ht<Ur||ht===Ur&&ct<wr)throw new Error("This card has expired.");if(Xe.walletBalance<d.amount)throw new Error(`Insufficient funds. Available: ${re(Xe.walletBalance,Xe.currency)}`);const ua="https://api.peeap.com",Je=ua.endsWith("/api")?ua:`${ua}/api`,Xt=await fetch(`${Je}/checkout/sessions/${e}/card-pay`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({cardId:Xe.cardId,walletId:Xe.walletId,pin:T})});if(!Xt.ok){const es=await Xt.json().catch(()=>({}));throw new Error(es.message||es.error||"Payment failed")}const ur=await Xt.json();if(ur.status==="COMPLETE"||ur.success)Se("success"),Q("peeap_card"),c("success"),d.successUrl?setTimeout(()=>{window.location.href=pe(d.successUrl,d,"peeap_card")},3e3):c("success");else throw new Error("Payment was not successful")}catch(Xe){Se("error"),v(Xe.message||"Payment failed. Please try again.")}finally{oe(!1)}}},Ze=De=>{const Xe=De.replace(/\D/g,"");return Xe.length>=2?`${Xe.substring(0,2)}/${Xe.substring(2,4)}`:Xe},$e=async De=>{De.preventDefault(),ne(!0),xe(null);try{await n({email:W,password:H})}catch(Xe){xe(Xe.message||"Login failed.")}finally{ne(!1)}},Ne=async De=>{De.preventDefault(),ne(!0),xe(null);try{await i({email:B,phone:F,password:H,firstName:V,lastName:G})}catch(Xe){xe(Xe.message||"Registration failed.")}finally{ne(!1)}},He=async()=>{if(d){c("processing"),v(null);try{const De="https://api.peeap.com",Xe=De.endsWith("/api")?De:`${De}/api`,st=await fetch(`${Xe}/checkout/sessions/${e}/mobile-pay`,{method:"POST",headers:{"Content-Type":"application/json",...s!=null&&s.id?{"X-User-Id":s.id}:{}},body:JSON.stringify({userId:s==null?void 0:s.id,userEmail:s==null?void 0:s.email})}),Ce=await st.json();if(!st.ok)throw new Error(Ce.error||"Failed to create payment session");if(Ce.paymentUrl)window.location.href=Ce.paymentUrl;else throw new Error("No payment URL received")}catch(De){v(De.message||"Payment failed. Please try again."),c("error")}}},gt=De=>{var Ce;const Xe=De.replace(/\s/g,"");return(((Ce=Xe.match(/.{1,4}/g))==null?void 0:Ce.join(" "))||Xe).substring(0,19)};return d!=null&&d.brandColor,l==="loading"||o?r.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:r.jsxs("div",{className:"text-center",children:[r.jsx(Ke,{className:"w-8 h-8 animate-spin mx-auto mb-4 text-indigo-600"}),r.jsx("p",{className:"text-gray-600",children:"Loading checkout..."})]})}):l==="expired"?r.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:r.jsxs("div",{className:"bg-white rounded-2xl shadow-xl max-w-md w-full p-8 text-center",children:[r.jsx("div",{className:"w-16 h-16 bg-orange-100 rounded-full flex items-center justify-center mx-auto mb-4",children:r.jsx(dt,{className:"w-8 h-8 text-orange-600"})}),r.jsx("h1",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Session Expired"}),r.jsx("p",{className:"text-gray-500 mb-6",children:"Please request a new payment link from the merchant."}),(d==null?void 0:d.cancelUrl)&&r.jsx("button",{onClick:()=>window.location.href=d.cancelUrl,className:"w-full py-3 px-4 bg-gray-100 text-gray-700 rounded-lg font-medium hover:bg-gray-200 transition-colors",children:"Return to Merchant"})]})}):l==="error"?r.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:r.jsxs("div",{className:"bg-white rounded-2xl shadow-xl max-w-md w-full p-8 text-center",children:[r.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:r.jsx(Wt,{className:"w-8 h-8 text-red-600"})}),r.jsx("h1",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Payment Error"}),r.jsx("p",{className:"text-gray-500 mb-6",children:y||"Something went wrong"}),r.jsxs("div",{className:"space-y-3",children:[r.jsx("button",{onClick:le,className:"w-full py-3 px-4 bg-indigo-600 text-white rounded-lg font-medium hover:bg-indigo-700 transition-colors",children:"Try Again"}),(d==null?void 0:d.cancelUrl)&&r.jsx("button",{onClick:()=>window.location.href=d.cancelUrl,className:"w-full py-3 px-4 bg-gray-100 text-gray-700 rounded-lg font-medium hover:bg-gray-200 transition-colors",children:"Return to Merchant"})]})]})}):l==="success"?r.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-green-400 via-emerald-500 to-teal-600 flex items-center justify-center p-4 relative overflow-hidden",children:[r.jsx("div",{className:"absolute inset-0 pointer-events-none",children:[...Array(50)].map((De,Xe)=>r.jsx("div",{className:"absolute animate-confetti",style:{left:`${Math.random()*100}%`,top:"-10%",animationDelay:`${Math.random()*3}s`,animationDuration:`${3+Math.random()*2}s`},children:r.jsx("div",{className:"w-3 h-3 rounded-sm",style:{backgroundColor:["#FFD700","#FF6B6B","#4ECDC4","#45B7D1","#96CEB4","#FFEAA7","#DDA0DD","#98D8C8"][Math.floor(Math.random()*8)],transform:`rotate(${Math.random()*360}deg)`}})},Xe))}),r.jsxs("div",{className:"bg-white rounded-3xl shadow-2xl max-w-md w-full p-8 text-center relative z-10 animate-success-pop",children:[r.jsxs("div",{className:"relative w-24 h-24 mx-auto mb-6",children:[r.jsx("div",{className:"absolute inset-0 bg-green-100 rounded-full animate-ping-slow opacity-75"}),r.jsx("div",{className:"absolute inset-0 bg-green-100 rounded-full"}),r.jsx("div",{className:"absolute inset-2 bg-green-500 rounded-full flex items-center justify-center animate-success-check",children:r.jsx(Ae,{className:"w-12 h-12 text-white"})})]}),r.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-3",children:"Thank You!"}),r.jsx("p",{className:"text-gray-600 mb-4",children:"Payment Successful"}),d&&r.jsxs("div",{className:"bg-gradient-to-r from-green-50 to-emerald-50 rounded-2xl p-4 mb-6",children:[r.jsx("p",{className:"text-4xl font-bold text-green-600 mb-1",children:re(d.amount,d.currencyCode)}),(d==null?void 0:d.merchantName)&&r.jsxs("p",{className:"text-gray-500 text-sm",children:["Paid to ",d.merchantName]})]}),r.jsxs("div",{className:"flex items-center justify-center gap-2 text-gray-400 text-sm mb-6",children:[r.jsx(Ke,{className:"w-4 h-4 animate-spin"}),r.jsx("span",{children:"Redirecting you back..."})]}),(d==null?void 0:d.successUrl)&&r.jsxs("button",{onClick:()=>window.location.href=pe(d.successUrl,d,Z||"unknown"),className:"w-full py-4 px-6 bg-gradient-to-r from-green-500 to-emerald-600 text-white rounded-xl font-semibold hover:from-green-600 hover:to-emerald-700 transition-all transform hover:scale-[1.02] shadow-lg",children:["Return to ",d.merchantName||"Merchant"]}),r.jsx("div",{className:"mt-6 pt-4 border-t border-gray-100",children:r.jsxs("div",{className:"flex items-center justify-center gap-2 text-gray-400 text-xs",children:[r.jsx(rr,{className:"w-3 h-3"}),r.jsx("span",{children:"Secured by Peeap"})]})})]}),r.jsx("style",{children:`
          @keyframes confetti {
            0% { transform: translateY(0) rotate(0deg); opacity: 1; }
            100% { transform: translateY(100vh) rotate(720deg); opacity: 0; }
          }
          @keyframes success-pop {
            0% { transform: scale(0.5); opacity: 0; }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); opacity: 1; }
          }
          @keyframes success-check {
            0% { transform: scale(0) rotate(-45deg); }
            50% { transform: scale(1.2) rotate(0deg); }
            100% { transform: scale(1) rotate(0deg); }
          }
          @keyframes ping-slow {
            0% { transform: scale(1); opacity: 0.75; }
            100% { transform: scale(1.5); opacity: 0; }
          }
          .animate-confetti { animation: confetti linear forwards; }
          .animate-success-pop { animation: success-pop 0.5s ease-out forwards; }
          .animate-success-check { animation: success-check 0.6s ease-out 0.2s forwards; transform: scale(0); }
          .animate-ping-slow { animation: ping-slow 2s cubic-bezier(0, 0, 0.2, 1) infinite; }
        `})]}):l==="processing"?r.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:r.jsxs("div",{className:"bg-white rounded-2xl shadow-xl max-w-md w-full p-8 text-center",children:[r.jsxs("div",{className:"relative w-16 h-16 mx-auto mb-6",children:[r.jsx("div",{className:"absolute inset-0 border-4 border-gray-200 rounded-full"}),r.jsx("div",{className:"absolute inset-0 border-4 border-indigo-600 rounded-full border-t-transparent animate-spin"})]}),r.jsx("h1",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Processing Payment"}),r.jsx("p",{className:"text-gray-500",children:"Please wait..."}),r.jsx("p",{className:"text-xs text-gray-400 mt-4",children:"Do not close this window"})]})}):l==="login_prompt"?r.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:r.jsx("div",{className:"max-w-md w-full",children:r.jsxs("div",{className:"bg-white rounded-2xl shadow-xl overflow-hidden",children:[r.jsx("div",{className:"px-6 py-4 border-b border-gray-100",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx("button",{onClick:le,className:"p-2 -ml-2 hover:bg-gray-100 rounded-lg transition-colors",children:r.jsx(Ar,{className:"w-5 h-5 text-gray-500"})}),r.jsxs("div",{className:"ml-3",children:[r.jsx("p",{className:"font-semibold text-gray-900",children:(d==null?void 0:d.merchantName)||"Checkout"}),r.jsx("p",{className:"text-sm text-gray-500",children:"Sign in to continue"})]})]})}),d&&r.jsxs("div",{className:"px-6 py-6 bg-gradient-to-r from-indigo-50 to-purple-50 border-b border-gray-100",children:[r.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Total amount"}),r.jsx("p",{className:"text-3xl font-bold text-gray-900",children:re(d.amount,d.currencyCode)})]}),r.jsx("div",{className:"px-6 pt-6",children:r.jsxs("div",{className:"flex bg-gray-100 rounded-lg p-1",children:[r.jsx("button",{onClick:()=>$("login"),className:`flex-1 py-2.5 text-sm font-medium rounded-md transition-all ${R==="login"?"bg-white shadow text-gray-900":"text-gray-600"}`,children:"Sign In"}),r.jsx("button",{onClick:()=>$("register"),className:`flex-1 py-2.5 text-sm font-medium rounded-md transition-all ${R==="register"?"bg-white shadow text-gray-900":"text-gray-600"}`,children:"Create Account"})]})}),ce&&r.jsxs("div",{className:"mx-6 mt-4 p-3 bg-red-50 border border-red-100 rounded-lg flex items-center gap-2 text-red-700 text-sm",children:[r.jsx(dt,{className:"w-4 h-4 flex-shrink-0"}),ce]}),R==="login"&&r.jsxs("form",{onSubmit:$e,className:"p-6 space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1.5",children:"Email or Phone"}),r.jsx("input",{type:"text",value:W,onChange:De=>I(De.target.value),placeholder:"you@example.com",className:"w-full py-3 px-4 border border-gray-200 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all",required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1.5",children:"Password"}),r.jsx("input",{type:"password",value:H,onChange:De=>K(De.target.value),placeholder:"Enter password",className:"w-full py-3 px-4 border border-gray-200 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all",required:!0})]}),r.jsxs("button",{type:"submit",disabled:he,className:"w-full py-3.5 bg-indigo-600 text-white rounded-lg font-semibold hover:bg-indigo-700 disabled:opacity-50 flex items-center justify-center gap-2 transition-colors",children:[he?r.jsx(Ke,{className:"w-5 h-5 animate-spin"}):r.jsx(Gp,{className:"w-5 h-5"}),he?"Signing in...":`Pay ${d?re(d.amount,d.currencyCode):""}`]})]}),R==="register"&&r.jsxs("form",{onSubmit:Ne,className:"p-6 space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1.5",children:"First Name"}),r.jsx("input",{type:"text",value:V,onChange:De=>z(De.target.value),placeholder:"John",className:"w-full py-3 px-4 border border-gray-200 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1.5",children:"Last Name"}),r.jsx("input",{type:"text",value:G,onChange:De=>te(De.target.value),placeholder:"Doe",className:"w-full py-3 px-4 border border-gray-200 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",required:!0})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1.5",children:"Email"}),r.jsx("input",{type:"email",value:B,onChange:De=>O(De.target.value),placeholder:"you@example.com",className:"w-full py-3 px-4 border border-gray-200 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1.5",children:"Phone"}),r.jsx("input",{type:"tel",value:F,onChange:De=>q(De.target.value),placeholder:"+232 76 123456",className:"w-full py-3 px-4 border border-gray-200 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1.5",children:"Password"}),r.jsx("input",{type:"password",value:H,onChange:De=>K(De.target.value),placeholder:"Create password",className:"w-full py-3 px-4 border border-gray-200 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",required:!0})]}),r.jsxs("button",{type:"submit",disabled:he,className:"w-full py-3.5 bg-indigo-600 text-white rounded-lg font-semibold hover:bg-indigo-700 disabled:opacity-50 flex items-center justify-center gap-2 transition-colors",children:[he?r.jsx(Ke,{className:"w-5 h-5 animate-spin"}):r.jsx(A6,{className:"w-5 h-5"}),he?"Creating...":"Create Account & Pay"]})]}),r.jsx("div",{className:"px-6 py-4 bg-gray-50 border-t border-gray-100",children:r.jsxs("div",{className:"flex items-center justify-center gap-2 text-gray-400 text-sm",children:[r.jsx(rr,{className:"w-4 h-4"}),r.jsx("span",{children:"Secured by Peeap"})]})})]})})}):l==="qr_display"?r.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:r.jsx("div",{className:"max-w-md w-full",children:r.jsxs("div",{className:"bg-white rounded-2xl shadow-xl overflow-hidden",children:[r.jsx("div",{className:"px-6 py-4 border-b border-gray-100",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx("button",{onClick:le,className:"p-2 -ml-2 hover:bg-gray-100 rounded-lg transition-colors",children:r.jsx(Ar,{className:"w-5 h-5 text-gray-500"})}),r.jsx("div",{className:"ml-3 flex-1 text-center",children:r.jsx("p",{className:"font-semibold text-gray-900",children:(d==null?void 0:d.merchantName)||"Checkout"})})]})}),d&&r.jsxs("div",{className:"px-6 py-6 bg-gradient-to-r from-indigo-50 to-purple-50 text-center border-b border-gray-100",children:[r.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Total amount"}),r.jsx("p",{className:"text-3xl font-bold text-gray-900",children:re(d.amount,d.currencyCode)})]}),r.jsxs("div",{className:"p-8 text-center",children:[r.jsx("div",{className:"inline-block p-4 bg-white rounded-2xl shadow-lg border border-gray-100",children:r.jsx(wx,{value:me(),size:200,level:"M"})}),r.jsx("p",{className:"text-gray-600 mt-6 text-sm",children:"Scan this QR code with your Peeap app"}),r.jsxs("div",{className:"mt-4 flex items-center justify-center gap-2 text-indigo-600",children:[r.jsxs("div",{className:"flex space-x-1",children:[r.jsx("div",{className:"w-2 h-2 bg-indigo-600 rounded-full animate-bounce",style:{animationDelay:"0ms"}}),r.jsx("div",{className:"w-2 h-2 bg-indigo-600 rounded-full animate-bounce",style:{animationDelay:"150ms"}}),r.jsx("div",{className:"w-2 h-2 bg-indigo-600 rounded-full animate-bounce",style:{animationDelay:"300ms"}})]}),r.jsx("span",{className:"text-sm font-medium",children:"Waiting for payment"})]})]}),r.jsx("div",{className:"px-6 py-4 bg-gray-50 border-t border-gray-100",children:r.jsxs("div",{className:"flex items-center justify-center gap-2 text-gray-400 text-sm",children:[r.jsx(rr,{className:"w-4 h-4"}),r.jsx("span",{children:"Secured by Peeap"})]})})]})})}):l==="card_form"?r.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:r.jsx("div",{className:"max-w-md w-full",children:r.jsxs("div",{className:"bg-white rounded-2xl shadow-xl overflow-hidden",children:[r.jsx("div",{className:"px-6 py-4 border-b border-gray-100",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx("button",{onClick:le,className:"p-2 -ml-2 hover:bg-gray-100 rounded-lg transition-colors",children:r.jsx(Ar,{className:"w-5 h-5 text-gray-500"})}),r.jsxs("div",{className:"ml-3",children:[r.jsx("p",{className:"font-semibold text-gray-900",children:(d==null?void 0:d.merchantName)||"Checkout"}),r.jsx("p",{className:"text-sm text-gray-500",children:"Pay with Peeap Card"})]})]})}),d&&r.jsxs("div",{className:"px-6 py-6 bg-gradient-to-r from-indigo-50 to-purple-50 border-b border-gray-100",children:[r.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Total amount"}),r.jsx("p",{className:"text-3xl font-bold text-gray-900",children:re(d.amount,d.currencyCode)})]}),y&&r.jsxs("div",{className:"mx-6 mt-4 p-3 bg-red-50 border border-red-100 rounded-lg flex items-center gap-2 text-red-700 text-sm",children:[r.jsx(dt,{className:"w-4 h-4 flex-shrink-0"}),y]}),r.jsxs("form",{onSubmit:ve,className:"p-6 space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1.5",children:"Card Number"}),r.jsx("input",{type:"text",value:w,onChange:De=>N(gt(De.target.value)),placeholder:"1234 5678 9012 3456",className:"w-full py-3 px-4 border border-gray-200 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent font-mono text-lg tracking-wide",maxLength:19,required:!0,autoFocus:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1.5",children:"Cardholder Name"}),r.jsx("input",{type:"text",value:k,onChange:De=>C(De.target.value.toUpperCase()),placeholder:"JOHN DOE",className:"w-full py-3 px-4 border border-gray-200 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent uppercase",required:!0})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1.5",children:"Expiry"}),r.jsx("input",{type:"text",value:E,onChange:De=>_(Ze(De.target.value)),placeholder:"MM/YY",className:"w-full py-3 px-4 border border-gray-200 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent font-mono text-center",maxLength:5,required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1.5",children:"PIN"}),r.jsxs("div",{className:"relative",children:[r.jsx("input",{type:P?"text":"password",value:T,onChange:De=>A(De.target.value.replace(/\D/g,"").substring(0,4)),placeholder:"****",className:"w-full py-3 px-4 border border-gray-200 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent font-mono text-center tracking-widest",maxLength:4,required:!0}),r.jsx("button",{type:"button",onClick:()=>M(!P),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600",children:P?r.jsx(Dn,{className:"w-4 h-4"}):r.jsx(ir,{className:"w-4 h-4"})})]})]})]}),r.jsxs("button",{type:"submit",disabled:_e||w.replace(/\s/g,"").length<16||!k||E.length<5||T.length!==4,className:"w-full py-3.5 bg-indigo-600 text-white rounded-lg font-semibold hover:bg-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2 mt-2 transition-colors",children:[_e?r.jsx(Ke,{className:"w-5 h-5 animate-spin"}):r.jsx(Kr,{className:"w-5 h-5"}),_e?"Processing...":`Pay ${d?re(d.amount,d.currencyCode):""}`]})]}),r.jsx("div",{className:"px-6 py-4 bg-gray-50 border-t border-gray-100",children:r.jsxs("div",{className:"flex items-center justify-center gap-2 text-gray-400 text-sm",children:[r.jsx(rr,{className:"w-4 h-4"}),r.jsx("span",{children:"Your payment is secure and encrypted"})]})})]})})}):d?r.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:r.jsxs("div",{className:"max-w-md w-full",children:[d.isTestMode&&r.jsxs("div",{className:"mb-4 py-2 px-4 bg-amber-400 text-amber-900 text-center text-sm font-medium rounded-lg flex items-center justify-center gap-2",children:[r.jsx(dt,{className:"w-4 h-4"}),"TEST MODE - No real payments"]}),r.jsxs("div",{className:"bg-white rounded-2xl shadow-xl overflow-hidden",children:[r.jsxs("div",{className:"px-6 py-6 text-center border-b border-gray-100",children:[d.merchantLogoUrl?r.jsx("img",{src:d.merchantLogoUrl,alt:d.merchantName,className:"h-12 mx-auto mb-3"}):r.jsx("div",{className:"w-14 h-14 bg-indigo-100 rounded-xl flex items-center justify-center mx-auto mb-3",children:r.jsx(lt,{className:"w-7 h-7 text-indigo-600"})}),r.jsx("h1",{className:"text-lg font-semibold text-gray-900",children:d.merchantName||"Checkout"})]}),r.jsx("div",{className:"px-6 py-6 bg-gradient-to-r from-indigo-50 to-purple-50 border-b border-gray-100",children:r.jsxs("div",{className:"text-center",children:[r.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Total amount"}),r.jsx("p",{className:"text-4xl font-bold text-gray-900",children:re(d.amount,d.currencyCode)}),d.description&&r.jsx("p",{className:"text-sm text-gray-500 mt-2",children:d.description})]})}),r.jsxs("div",{className:"p-6",children:[ie&&r.jsxs("div",{className:"mb-4 p-4 bg-amber-50 border border-amber-200 rounded-lg flex items-start gap-3",children:[r.jsx(dt,{className:"w-5 h-5 text-amber-600 flex-shrink-0 mt-0.5"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-amber-800",children:ie}),r.jsx("button",{onClick:()=>ge(null),className:"text-xs text-amber-600 mt-1 underline",children:"Dismiss"})]})]}),r.jsx("p",{className:"text-sm font-medium text-gray-700 mb-4",children:"Select payment method"}),r.jsxs("div",{className:"space-y-3",children:[((yt=d.paymentMethods)==null?void 0:yt.qr)!==!1&&r.jsxs("button",{onClick:()=>Ve("qr"),className:"w-full flex items-center p-4 rounded-xl border-2 border-gray-200 hover:border-indigo-300 hover:bg-indigo-50/50 transition-all group",children:[r.jsx("div",{className:"w-12 h-12 bg-indigo-100 rounded-xl flex items-center justify-center group-hover:bg-indigo-200 transition-colors",children:r.jsx(Vs,{className:"w-6 h-6 text-indigo-600"})}),r.jsxs("div",{className:"ml-4 flex-1 text-left",children:[r.jsx("p",{className:"font-semibold text-gray-900",children:"QR Code"}),r.jsx("p",{className:"text-sm text-gray-500",children:"Scan with Peeap app"})]}),r.jsx(Qr,{className:"w-5 h-5 text-gray-400 group-hover:text-indigo-600 transition-colors"})]}),((Vt=d.paymentMethods)==null?void 0:Vt.card)!==!1&&r.jsxs("button",{onClick:()=>Ve("card"),className:"w-full flex items-center p-4 rounded-xl border-2 border-gray-200 hover:border-indigo-300 hover:bg-indigo-50/50 transition-all group",children:[r.jsx("div",{className:"w-12 h-12 bg-purple-100 rounded-xl flex items-center justify-center group-hover:bg-purple-200 transition-colors",children:r.jsx(lt,{className:"w-6 h-6 text-purple-600"})}),r.jsxs("div",{className:"ml-4 flex-1 text-left",children:[r.jsx("p",{className:"font-semibold text-gray-900",children:"Peeap Card"}),r.jsx("p",{className:"text-sm text-gray-500",children:"Pay with your card"})]}),r.jsx(Qr,{className:"w-5 h-5 text-gray-400 group-hover:text-indigo-600 transition-colors"})]}),(($r=d.paymentMethods)==null?void 0:$r.mobile)!==!1&&r.jsxs("button",{onClick:()=>!d.isTestMode&&Ve("mobile"),disabled:d.isTestMode,className:`w-full flex items-center p-4 rounded-xl border-2 transition-all group relative ${d.isTestMode?"border-gray-100 bg-gray-50 cursor-not-allowed opacity-60":"border-gray-200 hover:border-indigo-300 hover:bg-indigo-50/50"}`,children:[r.jsx("div",{className:`w-12 h-12 rounded-xl flex items-center justify-center ${d.isTestMode?"bg-gray-200":"bg-orange-100 group-hover:bg-orange-200"} transition-colors`,children:r.jsx(Ws,{className:`w-6 h-6 ${d.isTestMode?"text-gray-400":"text-orange-600"}`})}),r.jsxs("div",{className:"ml-4 flex-1 text-left",children:[r.jsx("p",{className:`font-semibold ${d.isTestMode?"text-gray-400":"text-gray-900"}`,children:"Mobile Money"}),r.jsx("p",{className:`text-sm ${d.isTestMode?"text-gray-400":"text-gray-500"}`,children:d.isTestMode?"Not available in test mode":"Orange Money, Africell"})]}),!d.isTestMode&&r.jsx(Qr,{className:"w-5 h-5 text-gray-400 group-hover:text-indigo-600 transition-colors"}),d.isTestMode&&r.jsx("span",{className:"absolute top-2 right-2 px-2 py-0.5 bg-gray-200 text-gray-500 text-xs font-medium rounded-full",children:"Live Only"})]})]})]}),r.jsx("div",{className:"px-6 py-4 bg-gray-50 border-t border-gray-100",children:r.jsxs("div",{className:"flex items-center justify-center gap-2 text-gray-400 text-sm",children:[r.jsx(rr,{className:"w-4 h-4"}),r.jsx("span",{children:"Secured by Peeap"})]})})]}),r.jsxs("p",{className:"text-center mt-4 text-sm text-gray-400",children:["Powered by ",r.jsx("a",{href:"https://peeap.com",target:"_blank",rel:"noopener noreferrer",className:"text-indigo-500 hover:text-indigo-600",children:"Peeap"})]})]})}):null}const hC={SLE:{symbol:"Le",name:"Sierra Leonean Leone"},USD:{symbol:"$",name:"US Dollar"},EUR:{symbol:"",name:"Euro"},GBP:{symbol:"",name:"British Pound"},NGN:{symbol:"",name:"Nigerian Naira"},GHS:{symbol:"",name:"Ghanaian Cedi"}};function AFe(){var f;const[e]=bc(),[t,s]=p.useState(!0),a=e.get("session_id"),n=e.get("status"),i=e.get("amount"),o=e.get("currency")||"SLE",l=e.get("reference"),c=e.get("payment_method");p.useEffect(()=>{const x=setTimeout(()=>s(!1),5e3);return()=>clearTimeout(x)},[]);const d=x=>{if(!x)return"0";const y=hC[o]||hC.SLE,v=Number(x);return`${y.symbol} ${v.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}`},h=x=>{if(!x)return"Unknown";switch(x){case"scan_to_pay":return"QR Scan to Pay";case"peeap_card":return"Peeap Card";case"mobile_money":return"Mobile Money";default:return x.replace(/_/g," ").replace(/\b\w/g,y=>y.toUpperCase())}};return r.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-green-400 via-emerald-500 to-teal-600 flex items-center justify-center p-4 relative overflow-hidden",children:[t&&r.jsx("div",{className:"absolute inset-0 pointer-events-none",children:[...Array(50)].map((x,y)=>r.jsx("div",{className:"absolute animate-confetti",style:{left:`${Math.random()*100}%`,top:"-10%",animationDelay:`${Math.random()*3}s`,animationDuration:`${3+Math.random()*2}s`},children:r.jsx("div",{className:"w-3 h-3 rounded-sm",style:{backgroundColor:["#FFD700","#FF6B6B","#4ECDC4","#45B7D1","#96CEB4","#FFEAA7","#DDA0DD","#98D8C8"][Math.floor(Math.random()*8)],transform:`rotate(${Math.random()*360}deg)`}})},y))}),r.jsxs("div",{className:"bg-white rounded-3xl shadow-2xl max-w-md w-full p-8 text-center relative z-10 animate-success-pop",children:[r.jsxs("div",{className:"relative w-24 h-24 mx-auto mb-6",children:[r.jsx("div",{className:"absolute inset-0 bg-green-100 rounded-full animate-ping-slow opacity-75"}),r.jsx("div",{className:"absolute inset-0 bg-green-100 rounded-full"}),r.jsx("div",{className:"absolute inset-2 bg-green-500 rounded-full flex items-center justify-center animate-success-check",children:r.jsx(Ae,{className:"w-12 h-12 text-white"})})]}),r.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Payment Successful!"}),r.jsx("p",{className:"text-gray-600 mb-6",children:"Thank you for your payment"}),r.jsxs("div",{className:"bg-gradient-to-r from-green-50 to-emerald-50 rounded-2xl p-6 mb-6",children:[r.jsx("p",{className:"text-4xl font-bold text-green-600 mb-2",children:d(i)}),r.jsx("p",{className:"text-gray-500 text-sm",children:((f=hC[o])==null?void 0:f.name)||o})]}),r.jsxs("div",{className:"bg-gray-50 rounded-xl p-4 mb-6 text-left",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-3 text-gray-500",children:[r.jsx(C6,{className:"w-4 h-4"}),r.jsx("span",{className:"text-sm font-medium",children:"Payment Details"})]}),r.jsxs("div",{className:"space-y-2 text-sm",children:[c&&r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-500",children:"Payment Method"}),r.jsx("span",{className:"font-medium text-gray-900",children:h(c)})]}),a&&r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-500",children:"Session ID"}),r.jsx("span",{className:"font-mono text-xs text-gray-900 truncate max-w-[180px]",children:a})]}),l&&r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-500",children:"Reference"}),r.jsx("span",{className:"font-mono text-xs text-gray-900 truncate max-w-[180px]",children:l})]}),n&&r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-500",children:"Status"}),r.jsx("span",{className:"font-medium text-green-600 capitalize",children:n})]})]})]}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("a",{href:"/",className:"w-full inline-flex items-center justify-center gap-2 px-6 py-3 bg-gradient-to-r from-green-500 to-emerald-600 text-white font-semibold rounded-xl hover:from-green-600 hover:to-emerald-700 transition-all",children:[r.jsx(WV,{className:"w-5 h-5"}),"Go to Homepage"]}),r.jsxs("a",{href:"/merchant",className:"w-full inline-flex items-center justify-center gap-2 px-6 py-3 bg-gray-100 text-gray-700 font-medium rounded-xl hover:bg-gray-200 transition-colors",children:[r.jsx(mr,{className:"w-5 h-5"}),"View Merchant Dashboard"]})]}),r.jsx("p",{className:"text-xs text-gray-400 mt-6",children:"This transaction has been securely processed by Peeap"})]}),r.jsx("style",{children:`
        @keyframes confetti {
          0% { transform: translateY(0) rotate(0deg); opacity: 1; }
          100% { transform: translateY(100vh) rotate(720deg); opacity: 0; }
        }
        @keyframes success-pop {
          0% { transform: scale(0.5); opacity: 0; }
          50% { transform: scale(1.05); }
          100% { transform: scale(1); opacity: 1; }
        }
        @keyframes success-check {
          0% { transform: scale(0) rotate(-45deg); }
          50% { transform: scale(1.2) rotate(0deg); }
          100% { transform: scale(1) rotate(0deg); }
        }
        @keyframes ping-slow {
          0% { transform: scale(1); opacity: 0.75; }
          100% { transform: scale(1.5); opacity: 0; }
        }
        .animate-confetti { animation: confetti linear forwards; }
        .animate-success-pop { animation: success-pop 0.5s ease-out forwards; }
        .animate-success-check { animation: success-check 0.6s ease-out 0.2s forwards; transform: scale(0); }
        .animate-ping-slow { animation: ping-slow 2s cubic-bezier(0, 0, 0.2, 1) infinite; }
      `})]})}const TF={SLE:{symbol:"Le",name:"Sierra Leonean New Leone"},USD:{symbol:"$",name:"US Dollar"},EUR:{symbol:"",name:"Euro"},GBP:{symbol:"",name:"British Pound"}};function PFe(){const{sessionId:e}=Ui(),t=Ut(),{user:s,isAuthenticated:a,isLoading:n}=pt(),[i,o]=p.useState("loading"),[l,c]=p.useState(null),[d,h]=p.useState(null),[f,x]=p.useState(0),[y,v]=p.useState(null),[w,N]=p.useState(""),[k,C]=p.useState(!1),[E,_]=p.useState(null),T=(I,B)=>`${(TF[B]||TF.SLE).symbol} ${I.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}`;p.useEffect(()=>{A()},[e]),p.useEffect(()=>{a&&(s!=null&&s.id)&&l&&(P(),o("confirm"))},[a,s==null?void 0:s.id,l]);const A=async()=>{if(!e){h("Invalid payment session"),o("error");return}try{const I="https://api.peeap.com",B=I.endsWith("/api")?I:`${I}/api`,O=await fetch(`${B}/checkout/sessions/${e}`);if(!O.ok)throw new Error("Payment session not found");const F=await O.json(),q=F.metadata||{},H={id:F.id,externalId:F.external_id||F.externalId,merchantId:F.merchant_id||F.merchantId,amount:F.amount,currencyCode:F.currency_code||F.currencyCode||"SLE",description:F.description,status:F.status,expiresAt:F.expires_at||F.expiresAt,merchantName:F.merchant_name||F.merchantName,merchantLogoUrl:F.merchant_logo_url||F.merchantLogoUrl,successUrl:F.success_url||F.successUrl,cancelUrl:F.cancel_url||F.cancelUrl,isTestMode:q.isTestMode===!0};if(new Date(H.expiresAt)<new Date){c(H),o("expired");return}if(H.status==="COMPLETE"){c(H),o("already_paid");return}if(H.status==="CANCELLED"){h("This payment was cancelled"),o("error");return}c(H),a&&(s!=null&&s.id)?(P(),o("confirm")):o("login")}catch(I){h(I.message||"Failed to load payment"),o("error")}},P=async()=>{if(!(s!=null&&s.id))return;const{data:I}=await X.from("wallets").select("id, balance").eq("user_id",s.id).eq("wallet_type","primary").single();I&&(v(I.id),x(I.balance))},M=()=>{if(!l||!(s!=null&&s.id)||!y){h("Missing payment information");return}if(f<l.amount){h("Insufficient balance in your wallet");return}N(""),_(null),o("pin")},R=async()=>{if(!l||!(s!=null&&s.id)||!y){h("Missing payment information"),o("error");return}if(w.length!==4){_("Please enter your 4-digit PIN");return}_(null),o("processing");try{const{data:I}=await X.from("cards").select("id, transaction_pin").eq("user_id",s.id).eq("status","ACTIVE").order("created_at",{ascending:!0}).limit(1).single();if(I!=null&&I.transaction_pin&&I.transaction_pin!==w){_("Invalid PIN. Please try again."),o("pin");return}const B="https://api.peeap.com",O=B.endsWith("/api")?B:`${B}/api`,F=await fetch(`${O}/checkout/sessions/${e}/scan-pay`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({payerUserId:s.id,payerWalletId:y,payerName:`${s.firstName||""} ${s.lastName||""}`.trim()||s.email,pin:w})}),q=await F.json();if(!F.ok)throw new Error(q.error||"Payment failed");o("success")}catch(I){h(I.message||"Payment failed"),o("error")}},$=()=>{const I=`/scan-pay/${e}`;t(`/login?redirect=${encodeURIComponent(I)}`)},W=()=>{const I=`/scan-pay/${e}`;t(`/register?redirect=${encodeURIComponent(I)}`)};if(i==="loading"||n)return r.jsx("div",{className:"min-h-screen bg-gradient-to-b from-indigo-600 to-purple-700 flex items-center justify-center p-4",children:r.jsxs("div",{className:"bg-white rounded-2xl shadow-xl max-w-md w-full p-8 text-center",children:[r.jsx(Ke,{className:"w-12 h-12 text-indigo-600 animate-spin mx-auto mb-4"}),r.jsx("p",{className:"text-gray-600",children:"Loading payment..."})]})});if(i==="expired")return r.jsx("div",{className:"min-h-screen bg-gradient-to-b from-orange-500 to-red-600 flex items-center justify-center p-4",children:r.jsxs("div",{className:"bg-white rounded-2xl shadow-xl max-w-md w-full p-8 text-center",children:[r.jsx("div",{className:"w-16 h-16 bg-orange-100 rounded-full flex items-center justify-center mx-auto mb-4",children:r.jsx(dt,{className:"w-8 h-8 text-orange-600"})}),r.jsx("h1",{className:"text-xl font-bold text-gray-900 mb-2",children:"Payment Expired"}),r.jsx("p",{className:"text-gray-600 mb-6",children:"This payment session has expired. Please ask for a new payment link."}),r.jsx("button",{onClick:()=>t("/"),className:"px-6 py-3 bg-gray-100 text-gray-700 rounded-xl font-medium hover:bg-gray-200",children:"Go Home"})]})});if(i==="already_paid")return r.jsx("div",{className:"min-h-screen bg-gradient-to-b from-green-500 to-emerald-600 flex items-center justify-center p-4",children:r.jsxs("div",{className:"bg-white rounded-2xl shadow-xl max-w-md w-full p-8 text-center",children:[r.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:r.jsx(Ae,{className:"w-8 h-8 text-green-600"})}),r.jsx("h1",{className:"text-xl font-bold text-gray-900 mb-2",children:"Already Paid"}),r.jsx("p",{className:"text-gray-600 mb-6",children:"This payment has already been completed."}),r.jsx("button",{onClick:()=>t("/"),className:"px-6 py-3 bg-green-600 text-white rounded-xl font-medium hover:bg-green-700",children:"Go Home"})]})});if(i==="error")return r.jsx("div",{className:"min-h-screen bg-gradient-to-b from-red-500 to-red-700 flex items-center justify-center p-4",children:r.jsxs("div",{className:"bg-white rounded-2xl shadow-xl max-w-md w-full p-8 text-center",children:[r.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:r.jsx(Wt,{className:"w-8 h-8 text-red-600"})}),r.jsx("h1",{className:"text-xl font-bold text-gray-900 mb-2",children:"Payment Error"}),r.jsx("p",{className:"text-gray-600 mb-6",children:d||"Something went wrong"}),r.jsxs("div",{className:"space-y-3",children:[r.jsx("button",{onClick:()=>A(),className:"w-full py-3 bg-indigo-600 text-white rounded-xl font-medium hover:bg-indigo-700",children:"Try Again"}),r.jsx("button",{onClick:()=>t("/"),className:"w-full py-3 bg-gray-100 text-gray-700 rounded-xl font-medium hover:bg-gray-200",children:"Go Home"})]})]})});if(i==="success")return setTimeout(()=>{t("/dashboard")},3e3),r.jsx("div",{className:"min-h-screen bg-gradient-to-b from-green-500 to-emerald-600 flex items-center justify-center p-4",children:r.jsxs("div",{className:"bg-white rounded-2xl shadow-xl max-w-md w-full p-8 text-center",children:[r.jsx("div",{className:"w-20 h-20 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-6 animate-bounce",children:r.jsx(Ae,{className:"w-10 h-10 text-green-600"})}),r.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Payment Successful!"}),l&&r.jsx("p",{className:"text-3xl font-bold text-green-600 mb-2",children:T(l.amount,l.currencyCode)}),(l==null?void 0:l.merchantName)&&r.jsxs("p",{className:"text-gray-500 mb-4",children:["Paid to ",l.merchantName]}),r.jsxs("div",{className:"flex items-center justify-center gap-2 text-gray-400 text-sm",children:[r.jsx(Ke,{className:"w-4 h-4 animate-spin"}),r.jsx("span",{children:"Redirecting to dashboard..."})]})]})});if(i==="processing")return r.jsx("div",{className:"min-h-screen bg-gradient-to-b from-indigo-600 to-purple-700 flex items-center justify-center p-4",children:r.jsxs("div",{className:"bg-white rounded-2xl shadow-xl max-w-md w-full p-8 text-center",children:[r.jsxs("div",{className:"relative w-16 h-16 mx-auto mb-6",children:[r.jsx("div",{className:"absolute inset-0 border-4 border-gray-200 rounded-full"}),r.jsx("div",{className:"absolute inset-0 border-4 border-indigo-600 rounded-full border-t-transparent animate-spin"})]}),r.jsx("h1",{className:"text-xl font-bold text-gray-900 mb-2",children:"Processing Payment"}),r.jsx("p",{className:"text-gray-500",children:"Please wait..."})]})});if(i==="pin"&&l)return r.jsx("div",{className:"min-h-screen bg-gradient-to-b from-indigo-600 to-purple-700 flex items-center justify-center p-4",children:r.jsxs("div",{className:"bg-white rounded-2xl shadow-xl max-w-md w-full overflow-hidden",children:[r.jsxs("div",{className:"bg-indigo-600 text-white p-6",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[r.jsx("button",{onClick:()=>o("confirm"),className:"p-2 hover:bg-white/10 rounded-lg",children:r.jsx(Ar,{className:"w-5 h-5"})}),r.jsx("h1",{className:"text-xl font-bold",children:"Enter PIN"})]}),r.jsxs("div",{className:"text-center",children:[r.jsx("p",{className:"text-indigo-200 text-sm mb-1",children:"Confirm payment of"}),r.jsx("p",{className:"text-3xl font-bold",children:T(l.amount,l.currencyCode)}),l.merchantName&&r.jsxs("p",{className:"text-indigo-200 text-sm mt-1",children:["to ",l.merchantName]})]})]}),r.jsxs("div",{className:"p-6",children:[r.jsxs("div",{className:"text-center mb-6",children:[r.jsx(Kr,{className:"w-12 h-12 text-indigo-600 mx-auto mb-3"}),r.jsx("p",{className:"text-gray-600",children:"Enter your 4-digit PIN to authorize this payment"})]}),E&&r.jsxs("div",{className:"mb-4 p-3 bg-red-50 border border-red-100 rounded-lg flex items-center gap-2 text-red-700 text-sm",children:[r.jsx(dt,{className:"w-4 h-4 flex-shrink-0"}),E]}),r.jsxs("div",{className:"relative mb-6",children:[r.jsx("input",{type:k?"text":"password",value:w,onChange:I=>{const B=I.target.value.replace(/\D/g,"").substring(0,4);N(B),_(null)},placeholder:"",className:"w-full py-4 px-6 text-center text-3xl font-mono tracking-[1em] border-2 border-gray-200 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent",maxLength:4,autoFocus:!0,inputMode:"numeric"}),r.jsx("button",{type:"button",onClick:()=>C(!k),className:"absolute right-4 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600",children:k?r.jsx(Dn,{className:"w-5 h-5"}):r.jsx(ir,{className:"w-5 h-5"})})]}),r.jsxs("button",{onClick:R,disabled:w.length!==4,className:"w-full py-4 bg-green-600 text-white rounded-xl font-bold text-lg hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:[r.jsx(Ae,{className:"w-6 h-6"}),"Confirm Payment"]})]}),r.jsx("div",{className:"px-6 py-4 bg-gray-50 border-t border-gray-100",children:r.jsxs("div",{className:"flex items-center justify-center gap-2 text-gray-400 text-sm",children:[r.jsx(rr,{className:"w-4 h-4"}),r.jsx("span",{children:"Your PIN is encrypted and secure"})]})})]})});if(i==="login")return r.jsx("div",{className:"min-h-screen bg-gradient-to-b from-indigo-600 to-purple-700 flex items-center justify-center p-4",children:r.jsxs("div",{className:"bg-white rounded-2xl shadow-xl max-w-md w-full overflow-hidden",children:[r.jsxs("div",{className:"bg-indigo-600 text-white p-6 text-center",children:[r.jsx(Ws,{className:"w-12 h-12 mx-auto mb-3"}),r.jsx("h1",{className:"text-xl font-bold",children:"Scan to Pay"}),r.jsx("p",{className:"text-indigo-200 text-sm",children:"Complete this payment with your Peeap account"})]}),l&&r.jsx("div",{className:"p-6 border-b border-gray-100",children:r.jsxs("div",{className:"text-center",children:[r.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Amount to pay"}),r.jsx("p",{className:"text-4xl font-bold text-gray-900",children:T(l.amount,l.currencyCode)}),l.merchantName&&r.jsxs("p",{className:"text-gray-600 mt-2",children:["to ",l.merchantName]}),l.description&&r.jsx("p",{className:"text-sm text-gray-500 mt-1",children:l.description})]})}),r.jsxs("div",{className:"p-6 space-y-3",children:[r.jsxs("button",{onClick:$,className:"w-full py-4 bg-indigo-600 text-white rounded-xl font-semibold flex items-center justify-center gap-2 hover:bg-indigo-700",children:[r.jsx(Gp,{className:"w-5 h-5"}),"Sign In to Pay"]}),r.jsxs("button",{onClick:W,className:"w-full py-4 bg-gray-100 text-gray-700 rounded-xl font-semibold flex items-center justify-center gap-2 hover:bg-gray-200",children:[r.jsx(br,{className:"w-5 h-5"}),"Create Account"]})]}),r.jsx("div",{className:"px-6 py-4 bg-gray-50 border-t border-gray-100",children:r.jsxs("div",{className:"flex items-center justify-center gap-2 text-gray-400 text-sm",children:[r.jsx(rr,{className:"w-4 h-4"}),r.jsx("span",{children:"Secured by Peeap"})]})})]})});if(i==="confirm"&&l){const I=f<l.amount;return r.jsx("div",{className:"min-h-screen bg-gradient-to-b from-indigo-600 to-purple-700 flex items-center justify-center p-4",children:r.jsxs("div",{className:"bg-white rounded-2xl shadow-xl max-w-md w-full overflow-hidden",children:[r.jsxs("div",{className:"bg-indigo-600 text-white p-6",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[r.jsx("button",{onClick:()=>t(-1),className:"p-2 hover:bg-white/10 rounded-lg",children:r.jsx(Ar,{className:"w-5 h-5"})}),r.jsx("h1",{className:"text-xl font-bold",children:"Confirm Payment"})]}),r.jsxs("div",{className:"text-center",children:[r.jsx("p",{className:"text-indigo-200 text-sm mb-1",children:"You're paying"}),r.jsx("p",{className:"text-4xl font-bold",children:T(l.amount,l.currencyCode)})]})]}),r.jsx("div",{className:"p-6 border-b border-gray-100",children:r.jsxs("div",{className:"flex items-center gap-4",children:[l.merchantLogoUrl?r.jsx("img",{src:l.merchantLogoUrl,alt:l.merchantName,className:"w-14 h-14 rounded-xl object-cover"}):r.jsx("div",{className:"w-14 h-14 bg-indigo-100 rounded-xl flex items-center justify-center",children:r.jsx(br,{className:"w-7 h-7 text-indigo-600"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-500",children:"Paying to"}),r.jsx("p",{className:"font-bold text-gray-900",children:l.merchantName||"Merchant"}),l.description&&r.jsx("p",{className:"text-sm text-gray-500",children:l.description})]})]})}),r.jsxs("div",{className:"p-4 bg-blue-50 flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Rt,{className:"w-5 h-5 text-blue-600"}),r.jsx("span",{className:"text-sm text-blue-700",children:"Your wallet balance"})]}),r.jsx("span",{className:`font-bold ${I?"text-red-600":"text-blue-700"}`,children:T(f,l.currencyCode)})]}),I&&r.jsxs("div",{className:"p-4 bg-red-50 flex items-center gap-2 text-red-700",children:[r.jsx(dt,{className:"w-5 h-5 flex-shrink-0"}),r.jsx("span",{className:"text-sm",children:"Insufficient balance. Please top up your wallet first."})]}),r.jsx("div",{className:"p-6",children:r.jsxs("button",{onClick:M,disabled:I,className:"w-full py-4 bg-green-600 text-white rounded-xl font-bold text-lg hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:[r.jsx(Kr,{className:"w-6 h-6"}),"Continue to Pay"]})}),r.jsx("div",{className:"px-6 py-4 bg-gray-50 border-t border-gray-100",children:r.jsxs("div",{className:"flex items-center justify-center gap-2 text-gray-400 text-sm",children:[r.jsx(rr,{className:"w-4 h-4"}),r.jsx("span",{children:"Your payment is secure"})]})})]})})}return null}const TFe="https://apps.apple.com/app/peeap/id123456789",IFe="https://play.google.com/store/apps/details?id=com.peeap.app",IF="peeappay",DF={SLE:{symbol:"Le",name:"Sierra Leonean Leone"},USD:{symbol:"$",name:"US Dollar"},EUR:{symbol:"",name:"Euro"},GBP:{symbol:"",name:"British Pound"}};function DFe(){const{paymentId:e}=Ui(),[t]=bc(),s=Ut(),[a,n]=p.useState(!0),[i,o]=p.useState(!1),[l,c]=p.useState("desktop"),d=t.get("amount"),h=t.get("currency")||"SLE",f=t.get("description"),x=t.get("merchant"),y=E=>`${(DF[h]||DF.SLE).symbol} ${parseFloat(E).toLocaleString()}`,v=()=>{const E=new URLSearchParams;return d&&E.set("amount",d),E.set("currency",h),f&&E.set("description",f),x&&E.set("merchant",x),`${IF}://checkout/${e}?${E.toString()}`},w=()=>`/checkout/${e}?${t.toString()}`;p.useEffect(()=>{const E=navigator.userAgent.toLowerCase();/iphone|ipad|ipod/.test(E)?c("ios"):/android/.test(E)?c("android"):c("desktop")},[]),p.useEffect(()=>{if(l==="desktop"){n(!1);return}const E={paymentId:e,amount:d,currency:h,description:f,merchant:x,timestamp:Date.now(),returnUrl:window.location.href};localStorage.setItem("pendingPayment",JSON.stringify(E)),document.cookie=`peeap_payment=${encodeURIComponent(JSON.stringify(E))}; path=/; max-age=3600`;const _=v(),T=Date.now(),A=document.createElement("iframe");if(A.style.display="none",A.src=_,document.body.appendChild(A),l==="android"){const R=`intent://checkout/${e}?${t.toString()}#Intent;scheme=${IF};package=com.peeap.app;end`;window.location.href=R}const P=setTimeout(()=>{Date.now()-T<2500&&!document.hidden&&(n(!1),o(!1))},2500),M=()=>{document.hidden&&(o(!0),clearTimeout(P))};return document.addEventListener("visibilitychange",M),()=>{clearTimeout(P),document.removeEventListener("visibilitychange",M),A.parentNode&&A.parentNode.removeChild(A)}},[l,e,d,h,f,x]);const N=()=>{const E=v();window.location.href=E,setTimeout(()=>{document.hidden||k()},1500)},k=()=>{const E={paymentId:e,amount:d,currency:h,description:f,merchant:x,timestamp:Date.now(),returnUrl:window.location.href};localStorage.setItem("pendingPayment",JSON.stringify(E)),l==="ios"?window.location.href=TFe:l==="android"&&(window.location.href=IFe)},C=()=>{s(w())};return a?r.jsx("div",{className:"min-h-screen bg-gradient-to-br from-indigo-600 to-purple-700 flex items-center justify-center p-4",children:r.jsxs(se,{className:"max-w-md w-full p-8 text-center",children:[r.jsx(Ke,{className:"w-12 h-12 text-indigo-600 animate-spin mx-auto mb-4"}),r.jsx("h1",{className:"text-xl font-bold text-gray-900 mb-2",children:"Opening Peeap..."}),r.jsx("p",{className:"text-gray-600",children:l==="desktop"?"Preparing payment...":"Checking if Peeap app is installed..."})]})}):l==="desktop"?r.jsx("div",{className:"min-h-screen bg-gradient-to-br from-indigo-600 to-purple-700 flex items-center justify-center p-4",children:r.jsxs(se,{className:"max-w-md w-full p-8 text-center",children:[r.jsx("div",{className:"w-16 h-16 bg-indigo-100 rounded-full flex items-center justify-center mx-auto mb-4",children:r.jsx(Ws,{className:"w-8 h-8 text-indigo-600"})}),r.jsx("h1",{className:"text-xl font-bold text-gray-900 mb-2",children:"Scan with Phone"}),r.jsx("p",{className:"text-gray-600 mb-6",children:"Please scan this QR code with your phone to complete the payment"}),d&&r.jsxs("div",{className:"p-4 bg-gray-50 rounded-xl mb-6",children:[r.jsx("p",{className:"text-sm text-gray-500",children:"Amount to pay"}),r.jsx("p",{className:"text-3xl font-bold text-gray-900",children:y(d)})]}),r.jsx("p",{className:"text-sm text-gray-500 mb-4",children:"Or continue on this device:"}),r.jsxs("button",{onClick:C,className:"w-full py-3 bg-indigo-600 text-white rounded-xl font-semibold hover:bg-indigo-700 flex items-center justify-center gap-2",children:["Continue in Browser",r.jsx(os,{className:"w-5 h-5"})]})]})}):r.jsx("div",{className:"min-h-screen bg-gradient-to-br from-indigo-600 to-purple-700 flex items-center justify-center p-4",children:r.jsxs("div",{className:"max-w-md w-full",children:[r.jsxs(se,{className:"overflow-hidden",children:[r.jsxs("div",{className:"bg-white p-6 text-center border-b border-gray-100",children:[r.jsx("div",{className:"w-20 h-20 bg-indigo-100 rounded-2xl flex items-center justify-center mx-auto mb-4",children:r.jsx(Vs,{className:"w-10 h-10 text-indigo-600"})}),r.jsx("h1",{className:"text-xl font-bold text-gray-900 mb-1",children:"Complete Payment"}),r.jsx("p",{className:"text-gray-500 text-sm",children:"with Peeap App"})]}),d&&r.jsxs("div",{className:"p-6 bg-gray-50 border-b border-gray-100 text-center",children:[r.jsx("p",{className:"text-sm text-gray-500",children:"Amount to pay"}),r.jsx("p",{className:"text-4xl font-bold text-gray-900",children:y(d)}),x&&r.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["to ",x]})]}),r.jsxs("div",{className:"p-6",children:[r.jsx("div",{className:"bg-indigo-50 rounded-xl p-4 mb-6",children:r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx(gs,{className:"w-6 h-6 text-indigo-600 flex-shrink-0 mt-0.5"}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-indigo-900",children:"Get the Peeap App"}),r.jsx("p",{className:"text-sm text-indigo-700 mt-1",children:"Download the app to complete this payment securely. Your payment will continue automatically after installation."})]})]})}),r.jsxs("div",{className:"space-y-3 mb-6",children:[l==="ios"&&r.jsxs("button",{onClick:k,className:"w-full py-4 bg-black text-white rounded-xl font-semibold hover:bg-gray-800 flex items-center justify-center gap-3",children:[r.jsx(Bie,{className:"w-6 h-6"}),r.jsxs("div",{className:"text-left",children:[r.jsx("p",{className:"text-xs opacity-80",children:"Download on the"}),r.jsx("p",{className:"text-lg font-bold -mt-1",children:"App Store"})]})]}),l==="android"&&r.jsxs("button",{onClick:k,className:"w-full py-4 bg-black text-white rounded-xl font-semibold hover:bg-gray-800 flex items-center justify-center gap-3",children:[r.jsx(Hy,{className:"w-6 h-6"}),r.jsxs("div",{className:"text-left",children:[r.jsx("p",{className:"text-xs opacity-80",children:"Get it on"}),r.jsx("p",{className:"text-lg font-bold -mt-1",children:"Google Play"})]})]})]}),r.jsxs("button",{onClick:N,className:"w-full py-3 bg-indigo-600 text-white rounded-xl font-semibold hover:bg-indigo-700 flex items-center justify-center gap-2 mb-3",children:[r.jsx(da,{className:"w-5 h-5"}),"I have the app, open it"]}),r.jsx("button",{onClick:C,className:"w-full py-3 bg-gray-100 text-gray-700 rounded-xl font-medium hover:bg-gray-200",children:"Continue in Browser Instead"})]}),r.jsx("div",{className:"px-6 pb-6",children:r.jsx("div",{className:"border-t border-gray-100 pt-4",children:r.jsx("p",{className:"text-xs text-gray-500 text-center",children:"After downloading, the app will automatically open with your payment ready to complete."})})})]}),r.jsx("div",{className:"text-center mt-4",children:r.jsx("p",{className:"text-sm text-white/70",children:"Secure payments powered by Peeap"})})]})})}function OFe(){const{shortCode:e}=Ui(),t=Ut(),{user:s,isAuthenticated:a}=pt(),{data:n}=mi(),[i,o]=p.useState("loading"),[l,c]=p.useState(""),[d,h]=p.useState(""),[f,x]=p.useState(""),[y,v]=p.useState(!1),[w,N]=p.useState(null),[k,C]=p.useState(null),[E,_]=p.useState(!1),[T,A]=p.useState(!1),[P,M]=p.useState(null),[R,$]=p.useState(0),[W,I]=p.useState(null),[B,O]=p.useState(null),{data:F,isLoading:q,error:H}=nye(e||""),K=iye(),V=oye(),z=n==null?void 0:n[0];p.useEffect(()=>{cr.getDefaultCurrency().then(O),A(/iPhone|iPad|iPod|Android/i.test(navigator.userAgent))},[]),p.useEffect(()=>{!q&&F!==void 0&&(F!=null&&F.valid?o("checkout"):(N("Invalid or inactive payment link"),o("error"))),H&&(N("Failed to load payment information"),o("error"))},[F,q,H]),p.useEffect(()=>{if(!P)return;const Z=setInterval(()=>{const Q=new Date,re=Math.max(0,Math.floor((P.getTime()-Q.getTime())/1e3));$(re),re===0&&(I(null),M(null),(i==="confirm"||i==="pin")&&(N("Payment session expired. Please try again."),o("checkout")))},1e3);return()=>clearInterval(Z)},[P,i]);const G=(B==null?void 0:B.symbol)||"SLE",te=parseFloat(l)||0,he=te>0?Math.max(te*.01,.1):0,ne=window.location.href,ce=`peeappay://pay/nfc/${e}`,xe=Z=>`${G} ${Z.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}`,_e=Z=>{const Q=Math.floor(Z/60),re=Z%60;return`${Q}:${re.toString().padStart(2,"0")}`},oe=async()=>{if(te<=0){N("Please enter a valid amount");return}if(te>((F==null?void 0:F.single_limit)||1e3)){N(`Amount exceeds the limit of ${xe((F==null?void 0:F.single_limit)||1e3)}`);return}if(!a){const Z=window.location.pathname+window.location.search;t(`/login?redirect=${encodeURIComponent(Z)}&amount=${l}`);return}try{N(null);const Z=await K.mutateAsync({short_code:e,amount:te,expiry_minutes:5});I(Z.token),M(new Date(Z.expires_at)),F!=null&&F.requires_pin_above&&te>=F.requires_pin_above?o("pin"):o("confirm")}catch(Z){N(Z.message||"Failed to initialize payment")}},ie=async Z=>{if(!W||!z){N("Payment session invalid. Please try again."),o("checkout");return}if(z.balance<te){N("Insufficient balance");return}o("processing"),N(null);try{const Q=await V.mutateAsync({token:W,amount:te,wallet_id:z.id,pin:Z});C(Q.transaction_id),o("success")}catch(Q){Q.code==="INVALID_PIN"?(N("Incorrect PIN. Please try again."),o("pin")):Q.code==="PIN_REQUIRED"?o("pin"):Q.code==="TOKEN_EXPIRED"?(N("Payment session expired. Please try again."),I(null),o("checkout")):(N(Q.message||"Payment failed"),o("error"))}},ge=async()=>{await navigator.clipboard.writeText(ne),_(!0),setTimeout(()=>_(!1),2e3)};return i==="loading"||q?r.jsx("div",{className:"min-h-screen bg-gradient-to-b from-indigo-600 to-purple-800 flex items-center justify-center p-4",children:r.jsxs("div",{className:"text-center text-white",children:[r.jsx("div",{className:"w-20 h-20 bg-white/20 rounded-full flex items-center justify-center mx-auto mb-4",children:r.jsx(rr,{className:"w-10 h-10"})}),r.jsx(Ke,{className:"w-8 h-8 animate-spin mx-auto mb-4"}),r.jsx("p",{children:"Verifying payment link..."})]})}):i==="error"?r.jsx("div",{className:"min-h-screen bg-gradient-to-b from-indigo-600 to-purple-800 flex items-center justify-center p-4",children:r.jsxs(se,{className:"max-w-md w-full p-8 text-center",children:[r.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:r.jsx(Wt,{className:"w-8 h-8 text-red-600"})}),r.jsx("h1",{className:"text-xl font-bold text-gray-900 mb-2",children:"Payment Error"}),r.jsx("p",{className:"text-gray-600 mb-6",children:w||"Something went wrong"}),r.jsxs("div",{className:"space-y-3",children:[r.jsx(Oe,{onClick:()=>{N(null),o("checkout")},className:"w-full",children:"Try Again"}),r.jsx(Oe,{variant:"outline",onClick:()=>t("/"),className:"w-full",children:"Go Home"})]})]})}):i==="success"?r.jsx("div",{className:"min-h-screen bg-gradient-to-b from-green-600 to-emerald-800 flex items-center justify-center p-4",children:r.jsxs(se,{className:"max-w-md w-full p-8 text-center",children:[r.jsx("div",{className:"w-20 h-20 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:r.jsx(Ae,{className:"w-10 h-10 text-green-600"})}),r.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Payment Successful!"}),r.jsxs("p",{className:"text-gray-600 mb-2",children:["You sent ",xe(te)," to ",F==null?void 0:F.recipient_name]}),r.jsxs("p",{className:"text-sm text-gray-500 mb-6",children:["Fee: ",xe(he)]}),k&&r.jsxs("div",{className:"bg-gray-50 rounded-lg p-3 mb-6",children:[r.jsx("p",{className:"text-xs text-gray-400",children:"Transaction ID"}),r.jsx("p",{className:"text-sm font-mono text-gray-600 break-all",children:k})]}),r.jsx(Oe,{onClick:()=>t("/dashboard"),className:"w-full",children:"Go to Dashboard"})]})}):i==="processing"?r.jsx("div",{className:"min-h-screen bg-gradient-to-b from-indigo-600 to-purple-800 flex items-center justify-center p-4",children:r.jsxs(se,{className:"max-w-md w-full p-8 text-center",children:[r.jsx(Ke,{className:"w-12 h-12 text-indigo-600 animate-spin mx-auto mb-4"}),r.jsx("h1",{className:"text-xl font-bold text-gray-900 mb-2",children:"Processing Payment"}),r.jsx("p",{className:"text-gray-600",children:"Verifying and completing your payment..."}),r.jsxs("div",{className:"mt-4 flex items-center justify-center gap-2 text-sm text-indigo-600",children:[r.jsx(rr,{className:"w-4 h-4"}),r.jsx("span",{children:"Secured by cryptographic verification"})]})]})}):i==="pin"?r.jsx("div",{className:"min-h-screen bg-gradient-to-b from-indigo-600 to-purple-800 flex items-center justify-center p-4",children:r.jsxs(se,{className:"max-w-md w-full overflow-hidden",children:[r.jsxs("div",{className:"bg-gradient-to-r from-indigo-600 to-purple-600 text-white p-6 text-center",children:[r.jsx(Kr,{className:"w-12 h-12 mx-auto mb-3"}),r.jsx("h1",{className:"text-xl font-bold",children:"PIN Required"}),r.jsxs("p",{className:"text-indigo-200 text-sm",children:["Enter PIN to complete payment of ",xe(te)]})]}),r.jsxs("div",{className:"p-6 space-y-6",children:[R>0&&r.jsxs("div",{className:fe("flex items-center justify-center gap-2 p-2 rounded-lg text-sm",R<60?"bg-red-50 text-red-700":"bg-indigo-50 text-indigo-700"),children:[r.jsx(_t,{className:"w-4 h-4"}),"Session expires in ",_e(R)]}),w&&r.jsxs("div",{className:"flex items-center gap-2 p-3 bg-red-50 rounded-lg border border-red-200",children:[r.jsx(dt,{className:"w-5 h-5 text-red-600"}),r.jsx("p",{className:"text-sm text-red-700",children:w})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Enter 6-digit PIN"}),r.jsxs("div",{className:"relative",children:[r.jsx("input",{type:y?"text":"password",value:f,onChange:Z=>x(Z.target.value.replace(/\D/g,"").slice(0,6)),placeholder:"------",className:"w-full px-4 py-4 border-2 border-gray-200 rounded-xl text-center text-2xl tracking-widest font-mono focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",maxLength:6,autoFocus:!0}),r.jsx("button",{type:"button",onClick:()=>v(!y),className:"absolute right-4 top-1/2 -translate-y-1/2 text-gray-400",children:y?r.jsx(Dn,{className:"w-5 h-5"}):r.jsx(ir,{className:"w-5 h-5"})})]})]}),r.jsxs("div",{className:"flex gap-3",children:[r.jsx(Oe,{variant:"outline",className:"flex-1",onClick:()=>{x(""),o("checkout")},children:"Cancel"}),r.jsx(Oe,{className:"flex-1",onClick:()=>ie(f),disabled:f.length!==6,children:"Verify & Pay"})]})]})]})}):i==="confirm"&&a?r.jsx("div",{className:"min-h-screen bg-gradient-to-b from-indigo-600 to-purple-800 flex items-center justify-center p-4",children:r.jsxs(se,{className:"max-w-md w-full overflow-hidden",children:[r.jsxs("div",{className:"bg-gradient-to-r from-indigo-600 to-purple-600 text-white p-6 text-center",children:[r.jsx("div",{className:"w-16 h-16 bg-white/20 rounded-full flex items-center justify-center mx-auto mb-3",children:r.jsx(rr,{className:"w-8 h-8"})}),r.jsx("h1",{className:"text-xl font-bold",children:"Confirm Payment"})]}),r.jsxs("div",{className:"p-6 space-y-4",children:[R>0&&r.jsxs("div",{className:fe("flex items-center justify-center gap-2 p-2 rounded-lg text-sm",R<60?"bg-red-50 text-red-700":"bg-indigo-50 text-indigo-700"),children:[r.jsx(_t,{className:"w-4 h-4"}),"Complete within ",_e(R)]}),r.jsxs("div",{className:"flex items-center gap-4 p-4 bg-gray-50 rounded-xl",children:[r.jsx("div",{className:"w-12 h-12 bg-indigo-100 rounded-full flex items-center justify-center",children:r.jsx(br,{className:"w-6 h-6 text-indigo-600"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-500",children:"Paying to"}),r.jsx("p",{className:"font-semibold text-gray-900",children:F==null?void 0:F.recipient_name})]})]}),r.jsxs("div",{className:"text-center py-4",children:[r.jsx("p",{className:"text-4xl font-bold text-gray-900",children:xe(te)}),r.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["Fee: ",xe(he)]})]}),r.jsxs("div",{className:"flex items-center justify-between p-3 bg-indigo-50 rounded-lg",children:[r.jsx("span",{className:"text-sm text-indigo-700",children:"Your balance"}),r.jsx("span",{className:"font-semibold text-indigo-700",children:xe((z==null?void 0:z.balance)||0)})]}),te>((z==null?void 0:z.balance)||0)&&r.jsxs("div",{className:"flex items-center gap-2 p-3 bg-red-50 rounded-lg text-red-700",children:[r.jsx(dt,{className:"w-5 h-5"}),r.jsx("span",{className:"text-sm",children:"Insufficient balance"})]}),r.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-500 justify-center",children:[r.jsx(rr,{className:"w-4 h-4"}),r.jsx("span",{children:"Cryptographically secured payment"})]}),r.jsxs("div",{className:"flex gap-3 pt-2",children:[r.jsx(Oe,{variant:"outline",className:"flex-1",onClick:()=>{I(null),o("checkout")},children:"Cancel"}),r.jsxs(Oe,{className:"flex-1 bg-gradient-to-r from-indigo-600 to-purple-600",onClick:()=>ie(),disabled:te>((z==null?void 0:z.balance)||0),children:[r.jsx(Tn,{className:"w-4 h-4 mr-2"}),"Pay Now"]})]})]})]})}):r.jsx("div",{className:"min-h-screen bg-gradient-to-b from-indigo-600 to-purple-800 flex items-center justify-center p-4",children:r.jsx("div",{className:"max-w-md w-full",children:r.jsxs(se,{className:"overflow-hidden",children:[r.jsxs("div",{className:"bg-gradient-to-r from-indigo-600 to-purple-600 text-white p-6 text-center",children:[r.jsx("div",{className:"w-16 h-16 bg-white/20 rounded-full flex items-center justify-center mx-auto mb-4",children:r.jsx(oi,{className:"w-8 h-8"})}),r.jsx("h1",{className:"text-xl font-bold",children:"NFC Payment"}),r.jsx("p",{className:"text-indigo-200 text-sm",children:"Secure Tap-to-Pay"})]}),r.jsx("div",{className:"p-6 border-b border-gray-100",children:r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("div",{className:"w-14 h-14 bg-indigo-100 rounded-full flex items-center justify-center",children:r.jsx(br,{className:"w-7 h-7 text-indigo-600"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-500",children:"Pay to"}),r.jsx("p",{className:"font-bold text-gray-900 text-lg",children:F==null?void 0:F.recipient_name}),r.jsxs("div",{className:"flex items-center gap-1 text-xs text-green-600 mt-1",children:[r.jsx(rr,{className:"w-3 h-3"}),r.jsx("span",{children:"Verified recipient"})]})]})]})}),w&&r.jsxs("div",{className:"mx-6 mt-4 flex items-center gap-2 p-3 bg-red-50 rounded-lg border border-red-200",children:[r.jsx(dt,{className:"w-5 h-5 text-red-600"}),r.jsx("p",{className:"text-sm text-red-700",children:w})]}),r.jsxs("div",{className:"p-6 border-b border-gray-100 bg-gray-50",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2 text-center",children:"Enter Amount"}),r.jsxs("div",{className:"relative",children:[r.jsx("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-500 font-medium text-xl",children:G}),r.jsx("input",{type:"number",value:l,onChange:Z=>{c(Z.target.value),N(null)},placeholder:"0.00",className:"w-full pl-16 pr-4 py-4 border-2 border-gray-200 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 text-2xl font-bold text-center"})]}),(F==null?void 0:F.single_limit)&&r.jsxs("p",{className:"text-xs text-gray-500 text-center mt-2",children:["Maximum: ",xe(F.single_limit)]}),r.jsx("div",{className:"flex flex-wrap justify-center gap-2 mt-4",children:[10,25,50,100,200].map(Z=>r.jsxs("button",{onClick:()=>c(String(Z)),className:fe("px-4 py-2 text-sm rounded-lg border transition-colors",l===String(Z)?"bg-indigo-100 border-indigo-300 text-indigo-700":"bg-white border-gray-200 text-gray-600 hover:bg-gray-50"),children:[G,Z]},Z))})]}),r.jsxs("div",{className:"p-6 space-y-3",children:[a?r.jsxs(Oe,{onClick:oe,disabled:te<=0,isLoading:K.isPending,className:"w-full py-4 bg-gradient-to-r from-indigo-600 to-purple-600",children:[r.jsx(Tn,{className:"w-5 h-5 mr-2"}),"Continue to Pay"]}):r.jsxs(r.Fragment,{children:[T&&r.jsxs(Oe,{onClick:()=>window.location.href=ce,className:"w-full py-4 bg-gradient-to-r from-indigo-600 to-purple-600",children:[r.jsx(Ws,{className:"w-5 h-5 mr-2"}),"Open in App"]}),r.jsxs(Oe,{onClick:oe,variant:T?"outline":"primary",className:T?"w-full":"w-full py-4 bg-gradient-to-r from-indigo-600 to-purple-600",disabled:te<=0,children:[r.jsx(Gp,{className:"w-5 h-5 mr-2"}),"Sign In to Pay"]})]}),r.jsx("button",{onClick:ge,className:"w-full py-3 bg-gray-100 text-gray-700 rounded-xl font-medium flex items-center justify-center gap-2 hover:bg-gray-200",children:E?r.jsxs(r.Fragment,{children:[r.jsx(Ae,{className:"w-5 h-5 text-green-600"}),"Copied!"]}):r.jsxs(r.Fragment,{children:[r.jsx(Pr,{className:"w-5 h-5"}),"Copy Payment Link"]})})]}),r.jsx("div",{className:"px-6 py-4 bg-gray-50 border-t border-gray-100",children:r.jsxs("div",{className:"flex items-center justify-center gap-2 text-gray-500",children:[r.jsx(rr,{className:"w-4 h-4"}),r.jsx("span",{className:"text-xs",children:"Bank-grade security with cryptographic verification"})]})})]})})})}const RFe=[{id:"welcome",title:"Welcome",icon:S6},{id:"phone",title:"Verify Phone",icon:Ss},{id:"id",title:"ID Verification",icon:lt},{id:"face",title:"Face Verification",icon:td},{id:"complete",title:"Complete",icon:Ae}],MFe=[{id:"welcome",title:"Welcome",icon:S6},{id:"phone",title:"Verify Phone",icon:Ss},{id:"business",title:"Business Docs",icon:ao},{id:"id",title:"Owner ID",icon:lt},{id:"bank",title:"Bank Details",icon:Rt},{id:"complete",title:"Complete",icon:Ae}],LFe=[{id:"welcome",title:"Welcome",icon:S6},{id:"phone",title:"Verify Phone",icon:Ss},{id:"id",title:"ID Verification",icon:lt},{id:"face",title:"Face Verification",icon:td},{id:"agreement",title:"Agent Agreement",icon:ao},{id:"location",title:"Location Setup",icon:Vi},{id:"complete",title:"Complete",icon:Ae}];function FFe(){var he,ne;const{user:e}=pt(),t=Ut(),[s,a]=p.useState(0),[n,i]=p.useState(!1),[o,l]=p.useState(!1),[c,d]=p.useState(""),[h,f]=p.useState(""),[x,y]=p.useState(!1),[v,w]=p.useState(!1),[N,k]=p.useState(null),[C,E]=p.useState({bankName:"",accountNumber:"",accountName:""}),[_,T]=p.useState(!1),A=(he=e==null?void 0:e.roles)!=null&&he.includes("merchant")?"merchant":(ne=e==null?void 0:e.roles)!=null&&ne.includes("agent")?"agent":"user",P=A==="merchant"?MFe:A==="agent"?LFe:RFe,M=P[s],R={user:{label:"Personal Account",icon:br,color:"text-blue-600 bg-blue-100"},merchant:{label:"Business Account",icon:mr,color:"text-green-600 bg-green-100"},agent:{label:"Agent Account",icon:Uo,color:"text-orange-600 bg-orange-100"}}[A],$=R.icon,W=()=>{s<P.length-1&&a(s+1)},I=()=>{s>0&&a(s-1)},B=()=>{W()},O=async()=>{i(!0),f("");try{await new Promise(ce=>setTimeout(ce,1500)),l(!0)}catch{f("Failed to send OTP. Please try again.")}finally{i(!1)}},F=async()=>{i(!0),f("");try{await new Promise(ce=>setTimeout(ce,1e3)),c.length===6?(e!=null&&e.id&&await X.from("users").update({phone_verified:!0}).eq("id",e.id),W()):f("Please enter a valid 6-digit code")}catch{f("Verification failed. Please try again.")}finally{i(!1)}},q=async ce=>{y(!0),e!=null&&e.id&&await X.from("users").update({kyc_status:"SUBMITTED",kyc_tier:1}).eq("id",e.id),W()},H=async ce=>{w(!0),e!=null&&e.id&&await X.from("users").update({kyc_status:"VERIFIED",kyc_tier:2}).eq("id",e.id),W()},K=async()=>{i(!0);try{await new Promise(ce=>setTimeout(ce,1500)),W()}finally{i(!1)}},V=async()=>{i(!0);try{await new Promise(ce=>setTimeout(ce,1e3)),W()}finally{i(!1)}},z=async()=>{i(!0);try{await new Promise(ce=>setTimeout(ce,500)),W()}finally{i(!1)}},G=async()=>{i(!0);try{e!=null&&e.id&&await X.from("users").update({onboarding_completed:!0}).eq("id",e.id),t(A==="merchant"?"/merchant":A==="agent"?"/agent":"/dashboard")}finally{i(!1)}},te=()=>{switch(M.id){case"welcome":return r.jsxs("div",{className:"text-center space-y-6",children:[r.jsx("div",{className:`w-24 h-24 ${R.color} rounded-full flex items-center justify-center mx-auto`,children:r.jsx($,{className:"w-12 h-12"})}),r.jsxs("div",{children:[r.jsxs("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:["Welcome to Peeap, ",e==null?void 0:e.firstName,"!"]}),r.jsxs("p",{className:"text-gray-600",children:["Let's complete your ",R.label.toLowerCase()," setup. This will only take a few minutes."]})]}),r.jsxs("div",{className:"bg-gray-50 rounded-xl p-4 text-left",children:[r.jsx("h3",{className:"font-medium text-gray-900 mb-3",children:"What we'll need:"}),r.jsx("ul",{className:"space-y-2",children:P.slice(1,-1).map((ce,xe)=>{const _e=ce.icon;return r.jsxs("li",{className:"flex items-center gap-3 text-gray-700",children:[r.jsx("div",{className:"w-8 h-8 bg-white rounded-full flex items-center justify-center shadow-sm",children:r.jsx(_e,{className:"w-4 h-4 text-primary-600"})}),r.jsx("span",{children:ce.title})]},ce.id)})})]}),r.jsxs(Oe,{onClick:W,className:"w-full",children:["Get Started",r.jsx(os,{className:"w-4 h-4 ml-2"})]}),r.jsx("button",{onClick:()=>t("/dashboard"),className:"text-sm text-gray-500 hover:text-gray-700",children:"Skip for now"})]});case"phone":return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"w-20 h-20 bg-primary-100 rounded-full flex items-center justify-center mx-auto mb-4",children:r.jsx(Ss,{className:"w-10 h-10 text-primary-600"})}),r.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-2",children:"Verify Your Phone"}),r.jsxs("p",{className:"text-gray-600",children:["We'll send a verification code to ",(e==null?void 0:e.phone)||"your phone"]})]}),o?r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2 text-center",children:"Enter the 6-digit code"}),r.jsx("input",{type:"text",value:c,onChange:ce=>d(ce.target.value.replace(/\D/g,"").slice(0,6)),maxLength:6,inputMode:"numeric",className:"w-full px-4 py-4 border border-gray-300 rounded-xl text-center text-2xl tracking-[0.5em] focus:ring-2 focus:ring-primary-500 focus:border-primary-500",placeholder:"000000"}),h&&r.jsx("p",{className:"mt-2 text-sm text-red-500 text-center",children:h})]}),r.jsx(Oe,{onClick:F,className:"w-full",isLoading:n,disabled:c.length!==6,children:"Verify Code"}),r.jsx("button",{onClick:O,className:"w-full text-sm text-primary-600 hover:text-primary-700",disabled:n,children:"Resend Code"})]}):r.jsxs("div",{className:"space-y-4",children:[r.jsx("div",{className:"bg-gray-50 rounded-xl p-4 text-center",children:r.jsx("p",{className:"text-lg font-medium text-gray-900",children:e==null?void 0:e.phone})}),r.jsx(Oe,{onClick:O,className:"w-full",isLoading:n,children:"Send Verification Code"})]}),r.jsx("button",{onClick:B,className:"w-full text-sm text-gray-500 hover:text-gray-700",children:"Skip for now"})]});case"id":return r.jsx("div",{className:"space-y-4",children:r.jsx(tH,{expectedName:{firstName:(e==null?void 0:e.firstName)||"",lastName:(e==null?void 0:e.lastName)||""},onComplete:q,onCancel:B})});case"face":return r.jsx("div",{className:"space-y-4",children:r.jsx(eH,{onComplete:H,onCancel:B})});case"business":return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"w-20 h-20 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:r.jsx(Da,{className:"w-10 h-10 text-green-600"})}),r.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-2",children:"Business Verification"}),r.jsx("p",{className:"text-gray-600",children:"Upload your business registration documents"})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-xl p-8 text-center",children:[r.jsx("input",{type:"file",id:"business-doc",className:"hidden",accept:".pdf,.jpg,.jpeg,.png",onChange:ce=>{var xe;return k(((xe=ce.target.files)==null?void 0:xe[0])||null)}}),r.jsxs("label",{htmlFor:"business-doc",className:"cursor-pointer",children:[r.jsx(ao,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),r.jsx("p",{className:"text-gray-600 mb-2",children:N?N.name:"Click to upload business registration"}),r.jsx("p",{className:"text-sm text-gray-400",children:"PDF, JPG or PNG (max 10MB)"})]})]}),r.jsx(Oe,{onClick:K,className:"w-full",isLoading:n,disabled:!N,children:"Upload & Continue"})]}),r.jsx("button",{onClick:B,className:"w-full text-sm text-gray-500 hover:text-gray-700",children:"Skip for now"})]});case"bank":return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"w-20 h-20 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4",children:r.jsx(Rt,{className:"w-10 h-10 text-blue-600"})}),r.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-2",children:"Bank Account Details"}),r.jsx("p",{className:"text-gray-600",children:"Add your bank account for receiving payments"})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Bank Name"}),r.jsxs("select",{className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500",value:C.bankName,onChange:ce=>E({...C,bankName:ce.target.value}),children:[r.jsx("option",{value:"",children:"Select Bank"}),r.jsx("option",{value:"SLB",children:"Sierra Leone Commercial Bank"}),r.jsx("option",{value:"RCB",children:"Rokel Commercial Bank"}),r.jsx("option",{value:"UBA",children:"United Bank for Africa"}),r.jsx("option",{value:"GTB",children:"Guaranty Trust Bank"}),r.jsx("option",{value:"ECO",children:"Ecobank"}),r.jsx("option",{value:"ZEN",children:"Zenith Bank"}),r.jsx("option",{value:"ACC",children:"Access Bank"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Account Number"}),r.jsx("input",{type:"text",className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500",placeholder:"Enter account number",value:C.accountNumber,onChange:ce=>E({...C,accountNumber:ce.target.value})})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Account Name"}),r.jsx("input",{type:"text",className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500",placeholder:"Enter account holder name",value:C.accountName,onChange:ce=>E({...C,accountName:ce.target.value})})]}),r.jsx(Oe,{onClick:V,className:"w-full",isLoading:n,disabled:!C.bankName||!C.accountNumber||!C.accountName,children:"Save & Continue"})]}),r.jsx("button",{onClick:B,className:"w-full text-sm text-gray-500 hover:text-gray-700",children:"Skip for now"})]});case"agreement":return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"w-20 h-20 bg-orange-100 rounded-full flex items-center justify-center mx-auto mb-4",children:r.jsx(rr,{className:"w-10 h-10 text-orange-600"})}),r.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-2",children:"Agent Agreement"}),r.jsx("p",{className:"text-gray-600",children:"Please read and accept the agent terms and conditions"})]}),r.jsxs("div",{className:"bg-gray-50 rounded-xl p-4 max-h-64 overflow-y-auto text-sm text-gray-700",children:[r.jsx("h3",{className:"font-semibold mb-2",children:"Peeap Agent Terms of Service"}),r.jsx("p",{className:"mb-2",children:"By becoming a Peeap Agent, you agree to:"}),r.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[r.jsx("li",{children:"Maintain accurate records of all transactions"}),r.jsx("li",{children:"Process customer deposits and withdrawals honestly"}),r.jsx("li",{children:"Keep your agent float topped up for customer service"}),r.jsx("li",{children:"Comply with all AML/KYC regulations"}),r.jsx("li",{children:"Report suspicious transactions immediately"}),r.jsx("li",{children:"Display your agent credentials at your location"}),r.jsx("li",{children:"Provide receipts for all transactions"}),r.jsx("li",{children:"Maintain customer confidentiality"})]}),r.jsx("p",{className:"mt-4",children:"Commission rates: 0.5% on deposits, 0.75% on withdrawals. Maximum daily transaction limit: SLE 50,000,000."})]}),r.jsxs("label",{className:"flex items-center gap-3",children:[r.jsx("input",{type:"checkbox",checked:_,onChange:ce=>T(ce.target.checked),className:"w-5 h-5 rounded border-gray-300 text-primary-600 focus:ring-primary-500"}),r.jsx("span",{className:"text-sm text-gray-700",children:"I have read and agree to the Agent Terms of Service"})]}),r.jsx(Oe,{onClick:z,className:"w-full",isLoading:n,disabled:!_,children:"Accept & Continue"})]});case"location":return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"w-20 h-20 bg-orange-100 rounded-full flex items-center justify-center mx-auto mb-4",children:r.jsx(Vi,{className:"w-10 h-10 text-orange-600"})}),r.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-2",children:"Agent Location"}),r.jsx("p",{className:"text-gray-600",children:"Confirm your operating location"})]}),r.jsxs("div",{className:"bg-gray-50 rounded-xl p-4",children:[r.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Your registered location:"}),r.jsx("p",{className:"font-medium text-gray-900",children:JSON.parse(localStorage.getItem("pendingAgentDetails")||"{}").agentLocation||"Freetown"})]}),r.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-xl p-4 text-sm text-blue-700",children:[r.jsx("p",{className:"font-medium mb-1",children:"Location Verification"}),r.jsx("p",{children:"Your location will be verified by our team. You'll receive confirmation within 24-48 hours."})]}),r.jsxs(Oe,{onClick:W,className:"w-full",children:["Confirm Location",r.jsx(os,{className:"w-4 h-4 ml-2"})]})]});case"complete":return r.jsxs("div",{className:"text-center space-y-6",children:[r.jsx("div",{className:"w-24 h-24 bg-green-100 rounded-full flex items-center justify-center mx-auto",children:r.jsx(Ae,{className:"w-12 h-12 text-green-600"})}),r.jsxs("div",{children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"You're All Set!"}),r.jsxs("p",{className:"text-gray-600",children:["Your ",R.label.toLowerCase()," is ready to use."]})]}),r.jsxs("div",{className:"bg-gray-50 rounded-xl p-4 space-y-3",children:[r.jsx("h3",{className:"font-medium text-gray-900",children:"Account Status:"}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-gray-600",children:"Phone Verified"}),r.jsx(Ae,{className:"w-5 h-5 text-green-500"})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-gray-600",children:"ID Verified"}),x?r.jsx(Ae,{className:"w-5 h-5 text-green-500"}):r.jsx("span",{className:"text-xs text-yellow-600 bg-yellow-100 px-2 py-1 rounded",children:"Pending"})]}),A!=="user"&&r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-gray-600",children:A==="merchant"?"Business Docs":"Agent Status"}),r.jsx("span",{className:"text-xs text-yellow-600 bg-yellow-100 px-2 py-1 rounded",children:"Under Review"})]})]}),r.jsxs(Oe,{onClick:G,className:"w-full",isLoading:n,children:["Go to Dashboard",r.jsx(os,{className:"w-4 h-4 ml-2"})]})]});default:return null}};return e?r.jsxs("div",{className:"min-h-screen bg-gray-50 flex flex-col",children:[r.jsx("div",{className:"bg-white border-b border-gray-200 px-4 py-4",children:r.jsxs("div",{className:"max-w-lg mx-auto flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("img",{src:"/peeap-logo.svg",alt:"Peeap",className:"h-8"}),r.jsx("span",{className:"font-semibold text-gray-900",children:"Setup"})]}),r.jsxs("div",{className:`flex items-center gap-2 px-3 py-1.5 rounded-full text-sm font-medium ${R.color}`,children:[r.jsx($,{className:"w-4 h-4"}),R.label]})]})}),r.jsx("div",{className:"bg-white px-4 py-4 shadow-sm",children:r.jsxs("div",{className:"max-w-lg mx-auto",children:[r.jsx("div",{className:"flex items-center justify-between",children:P.map((ce,xe)=>{const _e=ce.icon,oe=xe===s,ie=xe<s;return r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center transition-colors ${ie?"bg-green-500 text-white":oe?"bg-primary-600 text-white":"bg-gray-200 text-gray-500"}`,children:ie?r.jsx(Ae,{className:"w-5 h-5"}):r.jsx(_e,{className:"w-5 h-5"})}),xe<P.length-1&&r.jsx("div",{className:`w-8 sm:w-12 h-1 mx-1 ${ie?"bg-green-500":"bg-gray-200"}`})]},ce.id)})}),r.jsxs("div",{className:"mt-2 text-center",children:[r.jsx("p",{className:"text-sm font-medium text-gray-900",children:M.title}),r.jsxs("p",{className:"text-xs text-gray-500",children:["Step ",s+1," of ",P.length]})]})]})}),r.jsx("div",{className:"flex-1 px-4 py-8",children:r.jsx("div",{className:"max-w-lg mx-auto bg-white rounded-2xl shadow-sm p-6",children:te()})}),M.id!=="welcome"&&M.id!=="complete"&&r.jsx("div",{className:"bg-white border-t border-gray-200 px-4 py-4",children:r.jsxs("div",{className:"max-w-lg mx-auto flex items-center justify-between",children:[r.jsxs("button",{onClick:I,className:"flex items-center gap-2 text-gray-600 hover:text-gray-900",disabled:s===0,children:[r.jsx(Ar,{className:"w-4 h-4"}),"Back"]}),r.jsxs("span",{className:"text-sm text-gray-500",children:[s+1," / ",P.length]})]})})]}):(t("/login"),null)}const BFe=[{path:"/merchant",label:"Dashboard",icon:UN},{path:"/merchant/shops",label:"My Shops",icon:Da},{path:"/merchant/transactions",label:"Transactions",icon:Pl},{path:"/merchant/payouts",label:"Payouts",icon:Cr},{path:"/merchant/refunds",label:"Refunds",icon:Ot},{path:"/merchant/reports",label:"Reports",icon:rh},{path:"/merchant/payment-links",label:"Payment Links",icon:Kp},{path:"/merchant/profile",label:"Business Profile",icon:mr},{path:"/merchant/settings",label:"Settings",icon:bs}];function Jr({children:e}){const[t,s]=p.useState(!1),{user:a,logout:n}=pt(),{isDeveloperMode:i,checkBusinesses:o,hasBusinesses:l,businessCount:c}=Wy();p.useEffect(()=>{o()},[]);const d=$i(),h=Ut(),f=async()=>{await n(),h("/login")};return r.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:[t&&r.jsx("div",{className:"fixed inset-0 z-40 bg-gray-600 bg-opacity-75 lg:hidden",onClick:()=>s(!1)}),r.jsx("aside",{className:fe("fixed inset-y-0 left-0 z-50 w-64 bg-white dark:bg-gray-800 border-r border-gray-200 dark:border-gray-700 transform transition-transform duration-300 ease-in-out lg:translate-x-0",t?"translate-x-0":"-translate-x-full"),children:r.jsxs("div",{className:"flex flex-col h-full",children:[r.jsxs("div",{className:"flex items-center justify-between h-16 px-6 border-b border-gray-200 dark:border-gray-700",children:[r.jsxs(xt,{to:"/merchant",className:"flex items-center gap-2",children:[r.jsx(mr,{className:"w-8 h-8 text-green-600 dark:text-green-400"}),r.jsx("span",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Merchant"})]}),r.jsx("button",{className:"lg:hidden p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700",onClick:()=>s(!1),children:r.jsx(Ct,{className:"w-5 h-5 text-gray-600 dark:text-gray-400"})})]}),r.jsxs("nav",{className:"flex-1 px-4 py-6 space-y-1 overflow-y-auto scrollbar-hide",children:[BFe.map(x=>{const y=x.icon,v=d.pathname===x.path||x.path!=="/merchant"&&d.pathname.startsWith(x.path);return r.jsxs(xt,{to:x.path,className:fe("flex items-center px-4 py-3 rounded-lg transition-colors",v?"bg-green-50 dark:bg-green-900/30 text-green-700 dark:text-green-400":"text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700"),children:[r.jsx(y,{className:"w-5 h-5 mr-3"}),x.label]},x.path)}),i&&r.jsx("div",{className:"pt-4 mt-4 border-t border-gray-200 dark:border-gray-700",children:r.jsxs(xt,{to:"/merchant/developer",className:"flex items-center justify-between px-4 py-3 rounded-lg bg-indigo-50 dark:bg-indigo-900/30 text-indigo-700 dark:text-indigo-400 hover:bg-indigo-100 dark:hover:bg-indigo-900/50 transition-colors",children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx(Pa,{className:"w-5 h-5 mr-3"}),r.jsx("span",{className:"font-medium",children:"Developer Portal"})]}),r.jsx(da,{className:"w-4 h-4"})]})})]}),r.jsx("div",{className:"px-4 py-3 border-t border-gray-200 dark:border-gray-700",children:r.jsxs(xt,{to:"/merchant/support",className:fe("flex items-center px-4 py-3 rounded-lg transition-colors",d.pathname==="/merchant/support"?"bg-green-50 dark:bg-green-900/30 text-green-700 dark:text-green-400":"text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700"),children:[r.jsx(N6,{className:"w-5 h-5 mr-3"}),"Help & Support"]})}),r.jsxs("div",{className:"p-4 border-t border-gray-200 dark:border-gray-700",children:[r.jsxs("div",{className:"flex items-center mb-4",children:[r.jsx("div",{className:"w-10 h-10 bg-green-100 dark:bg-green-900/30 rounded-full flex items-center justify-center",children:r.jsx(mr,{className:"w-5 h-5 text-green-600 dark:text-green-400"})}),r.jsxs("div",{className:"ml-3",children:[r.jsxs("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:[a==null?void 0:a.firstName," ",a==null?void 0:a.lastName]}),r.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Merchant Account"})]})]}),r.jsxs("button",{onClick:f,className:"flex items-center w-full px-4 py-2 text-gray-600 dark:text-gray-300 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",children:[r.jsx(zy,{className:"w-5 h-5 mr-3"}),"Sign out"]})]})]})}),r.jsxs("div",{className:"lg:pl-64",children:[r.jsx("header",{className:"sticky top-0 z-30 h-16 bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700",children:r.jsxs("div",{className:"flex items-center justify-between h-full px-4 lg:px-8",children:[r.jsx("button",{className:"lg:hidden p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700",onClick:()=>s(!0),children:r.jsx(qy,{className:"w-6 h-6 dark:text-gray-400"})}),r.jsxs("div",{className:"flex items-center gap-2 sm:gap-4",children:[r.jsx("span",{className:"hidden sm:inline-flex px-3 py-1 bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400 rounded-full text-xs font-medium",children:"Merchant Portal"}),r.jsxs(xt,{to:"/merchant/upgrade",className:"inline-flex items-center gap-1.5 px-3 py-1.5 bg-gradient-to-r from-amber-500 to-orange-500 text-white rounded-full text-xs font-medium hover:from-amber-600 hover:to-orange-600 transition-all shadow-sm",children:[r.jsx(V5,{className:"w-3.5 h-3.5"}),r.jsx("span",{className:"hidden sm:inline",children:"Upgrade to"})," Merchant+"]}),i&&r.jsxs(xt,{to:"/merchant/developer",className:"hidden sm:inline-flex items-center gap-1 px-3 py-1 bg-indigo-100 dark:bg-indigo-900/30 text-indigo-700 dark:text-indigo-400 rounded-full text-xs font-medium hover:bg-indigo-200 dark:hover:bg-indigo-900/50 transition-colors",children:[r.jsx(Pa,{className:"w-3 h-3"}),"Developer"]}),r.jsx(JN,{}),r.jsx(rA,{})]})]})}),r.jsx("main",{className:"p-4 lg:p-8",children:e})]})]})}const mC={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}},Bd={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.4,ease:"easeOut"}}};function OF(){const{user:e}=pt(),[t,s]=p.useState(null),[a,n]=p.useState(!1),[i,o]=p.useState(!0),[l,c]=p.useState({todayRevenue:0,monthlyRevenue:0,totalTransactions:0,avgTicket:0,successRate:0,pendingPayouts:0}),[d,h]=p.useState([]);p.useEffect(()=>{cr.getDefaultCurrency().then(s)},[]),p.useEffect(()=>{async function y(){if(e!=null&&e.id)try{o(!0);const{data:v,error:w}=await X.from("merchant_businesses").select("id, name, merchant_id").eq("merchant_id",e.id);if(w){console.error("Error fetching businesses:",w);return}if(!v||v.length===0){o(!1);return}const{data:N,error:k}=await X.from("wallets").select("id, balance").eq("user_id",e.id).eq("wallet_type","primary").single();if(k||!N){console.error("Error fetching merchant wallet:",k),o(!1);return}const{data:C,error:E}=await X.from("transactions").select("*").eq("wallet_id",N.id).gt("amount",0).order("created_at",{ascending:!1});if(E){console.error("Error fetching transactions:",E),o(!1);return}const _=C||[],T=new Date,A=new Date(T.getFullYear(),T.getMonth(),T.getDate()),P=new Date(T.getFullYear(),T.getMonth(),1),M=_.filter(H=>new Date(H.created_at)>=A),R=_.filter(H=>new Date(H.created_at)>=P),$=_.filter(H=>H.status==="COMPLETED"),W=M.filter(H=>H.status==="COMPLETED").reduce((H,K)=>H+Number(K.amount),0),I=R.filter(H=>H.status==="COMPLETED").reduce((H,K)=>H+Number(K.amount),0),B=$.length,O=B>0?$.reduce((H,K)=>H+Number(K.amount),0)/B:0,F=_.length>0?Math.round($.length/_.length*100):0;c({todayRevenue:W,monthlyRevenue:I,totalTransactions:_.length,avgTicket:O,successRate:F,pendingPayouts:Number(N.balance)||0});const q=_.slice(0,10).map(H=>{var K,V,z,G;return{id:H.reference||H.id.substring(0,8),amount:Number(H.amount),status:((K=H.status)==null?void 0:K.toLowerCase())||"pending",time:new Date(H.created_at).toLocaleString(),cardLast4:((V=H.metadata)==null?void 0:V.card_last4)||"****",payerName:((z=H.metadata)==null?void 0:z.payerName)||H.description||"Customer",paymentMethod:((G=H.metadata)==null?void 0:G.paymentMethod)||"unknown"}});h(q)}catch(v){console.error("Error fetching merchant data:",v)}finally{o(!1)}}y()},[e==null?void 0:e.id]);const f=(t==null?void 0:t.symbol)||"Le",x=y=>`${f} ${y.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}`;return i?r.jsx(Jr,{children:r.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:r.jsxs("div",{className:"text-center",children:[r.jsx(Ot,{className:"w-8 h-8 animate-spin text-primary-600 mx-auto mb-4"}),r.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Loading dashboard..."})]})})}):r.jsxs(Jr,{children:[r.jsxs("div",{className:"space-y-6",children:[r.jsxs(Pe.div,{className:"flex justify-between items-center",initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.5},children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Merchant Dashboard"}),r.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Overview of your merchant account"})]}),r.jsxs("div",{className:"flex gap-3",children:[r.jsxs("button",{className:"px-4 py-2 text-sm bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 flex items-center gap-2 transition-colors",children:[r.jsx(Li,{className:"w-4 h-4"}),"Last 30 days"]}),r.jsxs("button",{className:"px-4 py-2 text-sm bg-primary-600 text-white rounded-lg hover:bg-primary-700 flex items-center gap-2 transition-colors",children:[r.jsx(gs,{className:"w-4 h-4"}),"Export"]})]})]}),r.jsxs(Pe.div,{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",variants:mC,initial:"hidden",animate:"visible",children:[r.jsx(Pe.div,{variants:Bd,children:r.jsx(B1,{gradient:"green",delay:0,children:r.jsxs("div",{className:"flex justify-between items-start",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-green-100 text-sm font-medium",children:"Today's Revenue"}),r.jsx("p",{className:"text-3xl font-bold mt-2",children:x(l.todayRevenue)}),r.jsxs("div",{className:"flex items-center gap-1 mt-2 text-green-100",children:[r.jsx(Rr,{className:"w-4 h-4"}),r.jsx("span",{className:"text-sm",children:"+12.5% vs yesterday"})]})]}),r.jsx("div",{className:"p-3 bg-white/20 rounded-lg",children:r.jsx(Cr,{className:"w-6 h-6"})})]})})}),r.jsx(Pe.div,{variants:Bd,children:r.jsx(B1,{gradient:"blue",delay:.1,children:r.jsxs("div",{className:"flex justify-between items-start",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-blue-100 text-sm font-medium",children:"Monthly Revenue"}),r.jsx("p",{className:"text-3xl font-bold mt-2",children:x(l.monthlyRevenue)}),r.jsxs("div",{className:"flex items-center gap-1 mt-2 text-blue-100",children:[r.jsx(Rr,{className:"w-4 h-4"}),r.jsx("span",{className:"text-sm",children:"+8.3% vs last month"})]})]}),r.jsx("div",{className:"p-3 bg-white/20 rounded-lg",children:r.jsx(Ts,{className:"w-6 h-6"})})]})})}),r.jsx(Pe.div,{variants:Bd,children:r.jsx(B1,{gradient:"purple",delay:.2,children:r.jsxs("div",{className:"flex justify-between items-start",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-purple-100 text-sm font-medium",children:"Pending Payouts"}),r.jsx("p",{className:"text-3xl font-bold mt-2",children:x(l.pendingPayouts)}),r.jsxs("div",{className:"flex items-center gap-1 mt-2 text-purple-100",children:[r.jsx(Ot,{className:"w-4 h-4"}),r.jsx("span",{className:"text-sm",children:"Next payout: Tomorrow"})]})]}),r.jsx("div",{className:"p-3 bg-white/20 rounded-lg",children:r.jsx(mr,{className:"w-6 h-6"})})]})})})]}),r.jsxs(Pe.div,{className:"grid grid-cols-1 md:grid-cols-3 gap-6",variants:mC,initial:"hidden",animate:"visible",children:[r.jsx(Pe.div,{variants:Bd,children:r.jsxs(Be,{padding:"sm",className:"flex items-center gap-4",delay:.3,glowEffect:!0,children:[r.jsx("div",{className:"p-3 bg-cyan-100 dark:bg-cyan-900/30 rounded-lg",children:r.jsx(Ky,{className:"w-5 h-5 text-cyan-600 dark:text-cyan-400"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Total Transactions"}),r.jsx("p",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:l.totalTransactions.toLocaleString()})]})]})}),r.jsx(Pe.div,{variants:Bd,children:r.jsxs(Be,{padding:"sm",className:"flex items-center gap-4",delay:.4,glowEffect:!0,children:[r.jsx("div",{className:"p-3 bg-amber-100 dark:bg-amber-900/30 rounded-lg",children:r.jsx(lt,{className:"w-5 h-5 text-amber-600 dark:text-amber-400"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Average Ticket"}),r.jsx("p",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:x(l.avgTicket)})]})]})}),r.jsx(Pe.div,{variants:Bd,children:r.jsxs(Be,{padding:"sm",className:"flex items-center gap-4",delay:.5,glowEffect:!0,children:[r.jsx("div",{className:"p-3 bg-emerald-100 dark:bg-emerald-900/30 rounded-lg",children:r.jsx(Ts,{className:"w-5 h-5 text-emerald-600 dark:text-emerald-400"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Success Rate"}),r.jsxs("p",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:[l.successRate,"%"]})]})]})})]}),r.jsxs(Pe.div,{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",variants:mC,initial:"hidden",animate:"visible",children:[r.jsx(Pe.div,{variants:Bd,className:"lg:col-span-2",children:r.jsxs(Be,{className:"p-6",delay:.6,children:[r.jsxs("div",{className:"flex justify-between items-center mb-4",children:[r.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Recent Transactions"}),r.jsx("button",{className:"text-sm text-primary-600 dark:text-primary-400 hover:text-primary-700 dark:hover:text-primary-300",children:"View all"})]}),r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"text-left text-sm text-gray-500 dark:text-gray-400 border-b border-gray-200 dark:border-gray-700",children:[r.jsx("th",{className:"pb-3 font-medium",children:"Customer"}),r.jsx("th",{className:"pb-3 font-medium",children:"Method"}),r.jsx("th",{className:"pb-3 font-medium",children:"Amount"}),r.jsx("th",{className:"pb-3 font-medium",children:"Status"}),r.jsx("th",{className:"pb-3 font-medium",children:"Time"})]})}),r.jsx("tbody",{children:d.map((y,v)=>r.jsxs(Pe.tr,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},transition:{delay:.7+v*.05},className:"border-b border-gray-100 dark:border-gray-700 last:border-0",children:[r.jsx("td",{className:"py-3 text-sm font-medium text-gray-900 dark:text-white",children:y.payerName}),r.jsx("td",{className:"py-3 text-sm text-gray-600 dark:text-gray-400",children:r.jsx("span",{className:"px-2 py-0.5 bg-gray-100 dark:bg-gray-700 rounded text-xs",children:y.paymentMethod==="scan_to_pay"?"QR Scan":y.paymentMethod==="mobile_money"?"Mobile Money":y.paymentMethod==="peeap_card"?"Card":y.paymentMethod||"Unknown"})}),r.jsx("td",{className:"py-3 text-sm font-medium text-gray-900 dark:text-white",children:x(y.amount)}),r.jsx("td",{className:"py-3",children:r.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${y.status==="completed"?"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400":y.status==="pending"?"bg-yellow-100 dark:bg-yellow-900/30 text-yellow-700 dark:text-yellow-400":"bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-400"}`,children:y.status})}),r.jsx("td",{className:"py-3 text-sm text-gray-500 dark:text-gray-400",children:y.time})]},y.id))})]})})]})}),r.jsx(Pe.div,{variants:Bd,children:r.jsxs(Be,{className:"p-6",delay:.7,children:[r.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Quick Actions"}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs(Pe.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>n(!0),className:"w-full p-4 bg-primary-50 dark:bg-primary-900/20 hover:bg-primary-100 dark:hover:bg-primary-900/30 rounded-lg text-left transition-colors flex items-center gap-3 border border-primary-200 dark:border-primary-800",children:[r.jsx(Vs,{className:"w-5 h-5 text-primary-600 dark:text-primary-400"}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-sm text-gray-900 dark:text-white",children:"Scan to Pay"}),r.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Scan customer QR to charge"})]})]}),r.jsx(xt,{to:"/merchant/payouts",children:r.jsxs(Pe.div,{whileHover:{scale:1.02},whileTap:{scale:.98},className:"w-full p-4 bg-emerald-50 dark:bg-emerald-900/20 hover:bg-emerald-100 dark:hover:bg-emerald-900/30 rounded-lg text-left transition-colors flex items-center gap-3 border border-emerald-200 dark:border-emerald-800",children:[r.jsx(Da,{className:"w-5 h-5 text-emerald-600 dark:text-emerald-400"}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-sm text-gray-900 dark:text-white",children:"Withdraw Funds"}),r.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Withdraw to bank or mobile money"})]})]})}),r.jsxs(Pe.button,{whileHover:{scale:1.02},whileTap:{scale:.98},className:"w-full p-4 bg-gray-50 dark:bg-gray-700/50 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg text-left transition-colors flex items-center gap-3",children:[r.jsx(Ot,{className:"w-5 h-5 text-gray-600 dark:text-gray-400"}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-sm text-gray-900 dark:text-white",children:"Process Refund"}),r.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Issue customer refunds"})]})]}),r.jsxs(Pe.button,{whileHover:{scale:1.02},whileTap:{scale:.98},className:"w-full p-4 bg-gray-50 dark:bg-gray-700/50 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg text-left transition-colors flex items-center gap-3",children:[r.jsx(gs,{className:"w-5 h-5 text-gray-600 dark:text-gray-400"}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-sm text-gray-900 dark:text-white",children:"Download Report"}),r.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Export transaction data"})]})]}),r.jsxs(Pe.button,{whileHover:{scale:1.02},whileTap:{scale:.98},className:"w-full p-4 bg-gray-50 dark:bg-gray-700/50 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg text-left transition-colors flex items-center gap-3",children:[r.jsx(bs,{className:"w-5 h-5 text-gray-600 dark:text-gray-400"}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-sm text-gray-900 dark:text-white",children:"Payment Settings"}),r.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Configure payment options"})]})]})]})]})})]})]}),r.jsx(Pe.button,{initial:{scale:0},animate:{scale:1},whileHover:{scale:1.1},whileTap:{scale:.95},onClick:()=>n(!0),className:"fixed bottom-6 right-6 z-40 w-14 h-14 bg-primary-600 hover:bg-primary-700 text-white rounded-full shadow-lg flex items-center justify-center md:hidden","aria-label":"Scan to Pay",children:r.jsx(Vs,{className:"w-6 h-6"})}),r.jsx(pq,{isOpen:a,onClose:()=>n(!1)})]})}function $Fe(){const{isDeveloperMode:e,toggleDeveloperMode:t}=Wy(),[s,a]=p.useState("general"),[n,i]=p.useState(!1),[o,l]=p.useState({businessName:"Acme Store",businessEmail:"contact@acmestore.com",businessPhone:"+1 (555) 123-4567",businessAddress:"123 Main St, Suite 100",notifyTransactions:!0,notifyPayouts:!0,notifyDisputes:!0,notifyWeeklyReport:!0,twoFactorEnabled:!1,ipWhitelist:""}),c=()=>{i(!0),setTimeout(()=>i(!1),3e3)},d=[{id:"general",label:"General",icon:w6},{id:"notifications",label:"Notifications",icon:Lr},{id:"security",label:"Security",icon:rr},{id:"developer",label:"Developer Mode",icon:Pa}];return r.jsx(Jr,{children:r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Settings"}),r.jsx("p",{className:"text-gray-500",children:"Manage your merchant account settings"})]}),n&&r.jsxs("div",{className:"flex items-center gap-2 px-4 py-2 bg-green-100 text-green-700 rounded-lg",children:[r.jsx(Ae,{className:"w-4 h-4"}),r.jsx("span",{className:"text-sm font-medium",children:"Settings saved successfully"})]})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[r.jsx(se,{className:"p-4 lg:col-span-1",children:r.jsx("nav",{className:"space-y-1",children:d.map(h=>{const f=h.icon;return r.jsxs("button",{onClick:()=>a(h.id),className:`w-full flex items-center gap-3 px-4 py-3 rounded-lg text-left transition-colors ${s===h.id?"bg-green-50 text-green-700":"text-gray-600 hover:bg-gray-50"}`,children:[r.jsx(f,{className:"w-5 h-5"}),r.jsx("span",{className:"font-medium",children:h.label}),h.id==="developer"&&e&&r.jsx("span",{className:"ml-auto px-2 py-0.5 bg-indigo-100 text-indigo-700 text-xs rounded-full",children:"ON"})]},h.id)})})}),r.jsxs("div",{className:"lg:col-span-3",children:[s==="general"&&r.jsxs(se,{className:"p-6",children:[r.jsx("h2",{className:"text-lg font-semibold mb-6",children:"Business Information"}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Business Name"}),r.jsx("input",{type:"text",value:o.businessName,onChange:h=>l({...o,businessName:h.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Business Email"}),r.jsx("input",{type:"email",value:o.businessEmail,onChange:h=>l({...o,businessEmail:h.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Business Phone"}),r.jsx("input",{type:"tel",value:o.businessPhone,onChange:h=>l({...o,businessPhone:h.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Business Address"}),r.jsx("textarea",{value:o.businessAddress,onChange:h=>l({...o,businessAddress:h.target.value}),rows:3,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500"})]}),r.jsxs("button",{onClick:c,className:"px-6 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 flex items-center gap-2",children:[r.jsx(Pn,{className:"w-4 h-4"}),"Save Changes"]})]})]}),s==="notifications"&&r.jsxs(se,{className:"p-6",children:[r.jsx("h2",{className:"text-lg font-semibold mb-6",children:"Notification Preferences"}),r.jsxs("div",{className:"space-y-4",children:[[{key:"notifyTransactions",label:"Transaction Notifications",desc:"Receive alerts for every transaction"},{key:"notifyPayouts",label:"Payout Notifications",desc:"Get notified when payouts are processed"},{key:"notifyDisputes",label:"Dispute Alerts",desc:"Immediate alerts for chargebacks and disputes"},{key:"notifyWeeklyReport",label:"Weekly Reports",desc:"Receive weekly business summary emails"}].map(h=>r.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-gray-900",children:h.label}),r.jsx("p",{className:"text-sm text-gray-500",children:h.desc})]}),r.jsx("button",{onClick:()=>l({...o,[h.key]:!o[h.key]}),className:"text-gray-600",children:o[h.key]?r.jsx(Ys,{className:"w-10 h-10 text-green-600"}):r.jsx(Gs,{className:"w-10 h-10"})})]},h.key)),r.jsxs("button",{onClick:c,className:"px-6 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 flex items-center gap-2",children:[r.jsx(Pn,{className:"w-4 h-4"}),"Save Changes"]})]})]}),s==="security"&&r.jsxs(se,{className:"p-6",children:[r.jsx("h2",{className:"text-lg font-semibold mb-6",children:"Security Settings"}),r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-gray-900",children:"Two-Factor Authentication"}),r.jsx("p",{className:"text-sm text-gray-500",children:"Add an extra layer of security to your account"})]}),r.jsx("button",{onClick:()=>l({...o,twoFactorEnabled:!o.twoFactorEnabled}),className:"text-gray-600",children:o.twoFactorEnabled?r.jsx(Ys,{className:"w-10 h-10 text-green-600"}):r.jsx(Gs,{className:"w-10 h-10"})})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"IP Whitelist (Optional)"}),r.jsx("textarea",{value:o.ipWhitelist,onChange:h=>l({...o,ipWhitelist:h.target.value}),placeholder:"Enter IP addresses, one per line",rows:4,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500"}),r.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Only allow API access from these IP addresses"})]}),r.jsxs("button",{onClick:c,className:"px-6 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 flex items-center gap-2",children:[r.jsx(Pn,{className:"w-4 h-4"}),"Save Changes"]})]})]}),s==="developer"&&r.jsxs("div",{className:"space-y-6",children:[r.jsx(se,{className:"p-6",children:r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsxs("div",{className:"flex items-start gap-4",children:[r.jsx("div",{className:"p-3 bg-indigo-100 rounded-lg",children:r.jsx(Pa,{className:"w-6 h-6 text-indigo-600"})}),r.jsxs("div",{children:[r.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Developer Mode"}),r.jsx("p",{className:"text-gray-500 mt-1",children:"Enable developer mode to access API keys, webhooks, SDK documentation, and developer tools."})]})]}),r.jsx("button",{onClick:t,className:"text-gray-600",children:e?r.jsx(Ys,{className:"w-12 h-12 text-indigo-600"}):r.jsx(Gs,{className:"w-12 h-12"})})]})}),e?r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"p-4 bg-indigo-50 border border-indigo-200 rounded-lg flex items-start gap-3",children:[r.jsx(Ae,{className:"w-5 h-5 text-indigo-600 flex-shrink-0 mt-0.5"}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-indigo-900",children:"Developer Mode is Active"}),r.jsx("p",{className:"text-sm text-indigo-700 mt-1",children:"You now have access to the Developer section in your sidebar. Navigate there to manage API keys, webhooks, and view documentation."})]})]}),r.jsxs(se,{className:"p-6",children:[r.jsx("h3",{className:"font-semibold text-gray-900 mb-4",children:"What you can do with Developer Mode:"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{className:"flex items-start gap-3 p-4 bg-gray-50 rounded-lg",children:[r.jsx("div",{className:"p-2 bg-indigo-100 rounded",children:r.jsx(lt,{className:"w-4 h-4 text-indigo-600"})}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-sm",children:"API Keys"}),r.jsx("p",{className:"text-xs text-gray-500",children:"Generate and manage API credentials"})]})]}),r.jsxs("div",{className:"flex items-start gap-3 p-4 bg-gray-50 rounded-lg",children:[r.jsx("div",{className:"p-2 bg-indigo-100 rounded",children:r.jsx(Lr,{className:"w-4 h-4 text-indigo-600"})}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-sm",children:"Webhooks"}),r.jsx("p",{className:"text-xs text-gray-500",children:"Configure event notifications"})]})]}),r.jsxs("div",{className:"flex items-start gap-3 p-4 bg-gray-50 rounded-lg",children:[r.jsx("div",{className:"p-2 bg-indigo-100 rounded",children:r.jsx(bs,{className:"w-4 h-4 text-indigo-600"})}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-sm",children:"Sandbox Testing"}),r.jsx("p",{className:"text-xs text-gray-500",children:"Test your integration safely"})]})]}),r.jsxs("div",{className:"flex items-start gap-3 p-4 bg-gray-50 rounded-lg",children:[r.jsx("div",{className:"p-2 bg-indigo-100 rounded",children:r.jsx(Pa,{className:"w-4 h-4 text-indigo-600"})}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-sm",children:"SDK & Documentation"}),r.jsx("p",{className:"text-xs text-gray-500",children:"Access code samples and guides"})]})]})]})]})]}):r.jsx(se,{className:"p-6",children:r.jsxs("div",{className:"text-center py-8",children:[r.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:r.jsx(Pa,{className:"w-8 h-8 text-gray-400"})}),r.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"Developer Mode is Disabled"}),r.jsx("p",{className:"text-gray-500 max-w-md mx-auto",children:"Enable developer mode to access API integration features, webhooks, and SDK documentation."})]})})]})]})]})]})})}function HT({children:e,homeRoute:t,homeLabel:s,basePath:a}){const[n,i]=p.useState(!1),{user:o,logout:l}=pt(),c=$i(),d=Ut(),h=[{path:`${a}`,label:"Businesses",icon:mr,exact:!0},{path:`${a}/webhooks`,label:"Webhooks",icon:ph},{path:`${a}/logs`,label:"Request Logs",icon:yx},{path:`${a}/docs`,label:"SDK & Libraries",icon:VV},{path:`${a}/settings`,label:"Settings",icon:bs}],f=async()=>{await l(),d("/login")};return r.jsxs("div",{className:"min-h-screen bg-gray-900",children:[n&&r.jsx("div",{className:"fixed inset-0 z-40 bg-black bg-opacity-50 lg:hidden",onClick:()=>i(!1)}),r.jsx("aside",{className:fe("fixed inset-y-0 left-0 z-50 w-64 bg-gray-900 border-r border-gray-800 transform transition-transform duration-300 ease-in-out lg:translate-x-0",n?"translate-x-0":"-translate-x-full"),children:r.jsxs("div",{className:"flex flex-col h-full",children:[r.jsxs("div",{className:"flex items-center justify-between h-16 px-6 bg-gray-800",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Pa,{className:"w-8 h-8 text-indigo-400"}),r.jsx("span",{className:"text-xl font-bold text-white",children:"Developer"})]}),r.jsx("button",{className:"lg:hidden p-2 rounded-lg hover:bg-gray-700 text-gray-400",onClick:()=>i(!1),children:r.jsx(Ct,{className:"w-5 h-5"})})]}),r.jsx("div",{className:"px-4 py-3 border-b border-gray-800",children:r.jsxs(xt,{to:t,className:"flex items-center gap-2 px-4 py-3 text-gray-300 bg-gray-800 hover:bg-gray-700 rounded-lg transition-colors",children:[r.jsx(Ar,{className:"w-4 h-4"}),r.jsxs("span",{className:"text-sm font-medium",children:["Back to ",s]})]})}),r.jsx("nav",{className:"flex-1 px-3 py-4 space-y-1 overflow-y-auto scrollbar-hide",children:h.map(x=>{const y=x.icon,v=x.exact?c.pathname===x.path:c.pathname.startsWith(x.path)&&x.path!==a;return r.jsxs(xt,{to:x.path,className:fe("flex items-center px-4 py-2.5 rounded-lg transition-colors text-sm",v?"bg-indigo-600 text-white":"text-gray-300 hover:bg-gray-800 hover:text-white"),children:[r.jsx(y,{className:"w-5 h-5 mr-3"}),x.label]},x.path)})}),r.jsx("div",{className:"px-4 py-3 border-t border-gray-800",children:r.jsxs("button",{className:"w-full flex items-center justify-center gap-2 px-4 py-2.5 bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg text-sm transition-colors",children:[r.jsx(QV,{className:"w-4 h-4"}),"Open API Console"]})}),r.jsxs("div",{className:"p-4 border-t border-gray-800",children:[r.jsxs("div",{className:"flex items-center mb-3",children:[r.jsx("div",{className:"w-10 h-10 bg-indigo-600 rounded-full flex items-center justify-center",children:r.jsx(Pa,{className:"w-5 h-5 text-white"})}),r.jsxs("div",{className:"ml-3",children:[r.jsxs("p",{className:"text-sm font-medium text-white",children:[o==null?void 0:o.firstName," ",o==null?void 0:o.lastName]}),r.jsx("p",{className:"text-xs text-gray-400",children:"Developer Mode"})]})]}),r.jsxs("button",{onClick:f,className:"flex items-center w-full px-4 py-2 text-gray-300 rounded-lg hover:bg-gray-800 hover:text-white transition-colors text-sm",children:[r.jsx(zy,{className:"w-5 h-5 mr-3"}),"Sign out"]})]})]})}),r.jsxs("div",{className:"lg:pl-64",children:[r.jsx("header",{className:"sticky top-0 z-30 h-16 bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 shadow-sm",children:r.jsxs("div",{className:"flex items-center justify-between h-full px-4 lg:px-8",children:[r.jsx("div",{className:"flex items-center gap-4",children:r.jsx("button",{className:"lg:hidden p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700",onClick:()=>i(!0),children:r.jsx(qy,{className:"w-6 h-6 dark:text-gray-400"})})}),r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsxs(xt,{to:t,className:"hidden sm:flex items-center gap-2 px-4 py-2 text-sm text-gray-600 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:[r.jsx(WV,{className:"w-4 h-4"}),s]}),r.jsx("span",{className:"px-3 py-1 bg-indigo-100 text-indigo-700 rounded-full text-xs font-medium",children:"Developer Portal"}),r.jsx(JN,{}),r.jsx(rA,{})]})]})}),r.jsx("main",{className:"p-4 lg:p-8 bg-gray-50 dark:bg-gray-900 min-h-[calc(100vh-4rem)]",children:e})]})]})}function UFe(){const[e,t]=p.useState([]),[s,a]=p.useState(!0),n=Ut();p.useEffect(()=>{i()},[]);const i=async()=>{try{const l=await ai.getMyBusinesses();t(l)}catch(l){console.error("Error fetching businesses:",l)}finally{a(!1)}},o=l=>{const c={PENDING:{color:"bg-yellow-100 text-yellow-700",icon:r.jsx(_t,{className:"w-3 h-3"}),label:"Pending Approval"},APPROVED:{color:"bg-green-100 text-green-700",icon:r.jsx(Ae,{className:"w-3 h-3"}),label:"Approved"},REJECTED:{color:"bg-red-100 text-red-700",icon:r.jsx(Ct,{className:"w-3 h-3"}),label:"Rejected"},SUSPENDED:{color:"bg-gray-100 text-gray-700",icon:r.jsx(Ht,{className:"w-3 h-3"}),label:"Suspended"}},d=c[l]||c.PENDING;return r.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium ${d.color}`,children:[d.icon,d.label]})};return s?r.jsx("div",{className:"flex items-center justify-center py-12",children:r.jsx(Ke,{className:"w-8 h-8 animate-spin text-primary-600"})}):r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsxs("div",{children:[r.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"My Businesses"}),r.jsx("p",{className:"text-sm text-gray-500",children:"Create and manage your business shops with their own API keys"})]}),r.jsxs("button",{onClick:()=>n("/merchant/developer/create-business"),className:"px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 flex items-center gap-2",children:[r.jsx(sr,{className:"w-4 h-4"}),"Create Business"]})]}),e.length===0?r.jsxs(se,{className:"p-8 text-center",children:[r.jsx(mr,{className:"w-12 h-12 text-gray-300 mx-auto mb-4"}),r.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No businesses yet"}),r.jsx("p",{className:"text-gray-500 mb-4",children:"Create your first business to get API keys and start accepting payments."}),r.jsxs("button",{onClick:()=>n("/merchant/developer/create-business"),className:"px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 inline-flex items-center gap-2",children:[r.jsx(sr,{className:"w-4 h-4"}),"Create Your First Business"]})]}):r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:e.map(l=>r.jsxs(se,{className:"p-4 hover:shadow-md transition-shadow cursor-pointer",onClick:()=>n(`/merchant/developer/business/${l.id}`),children:[r.jsxs("div",{className:"flex items-start justify-between mb-3",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[l.logo_url?r.jsx("img",{src:l.logo_url,alt:l.name,className:"w-10 h-10 rounded-lg object-cover"}):r.jsx("div",{className:"w-10 h-10 bg-primary-100 rounded-lg flex items-center justify-center",children:r.jsx(mr,{className:"w-5 h-5 text-primary-600"})}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-medium text-gray-900",children:l.name}),r.jsx("p",{className:"text-xs text-gray-500",children:l.slug})]})]}),r.jsx(Qr,{className:"w-5 h-5 text-gray-400"})]}),r.jsxs("div",{className:"space-y-2 mb-3",children:[l.business_category&&r.jsx("p",{className:"text-sm text-gray-600",children:l.business_category.name}),l.description&&r.jsx("p",{className:"text-sm text-gray-500 line-clamp-2",children:l.description})]}),r.jsxs("div",{className:"flex items-center justify-between pt-3 border-t",children:[r.jsx("div",{className:"flex items-center gap-2",children:o(l.approval_status)}),r.jsx("div",{className:"flex items-center gap-1",children:l.is_live_mode?r.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-700",children:[r.jsx(Ys,{className:"w-3 h-3"}),"Live"]}):r.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium bg-orange-100 text-orange-700",children:[r.jsx(Gs,{className:"w-3 h-3"}),"Test"]})})]}),l.approval_status==="PENDING"&&r.jsx("div",{className:"mt-3 p-2 bg-yellow-50 rounded-lg",children:r.jsx("p",{className:"text-xs text-yellow-700",children:(l.trial_live_transactions_used||0)<(l.trial_live_transaction_limit||2)?`${(l.trial_live_transaction_limit||2)-(l.trial_live_transactions_used||0)} trial live transactions remaining`:"Awaiting admin approval for unlimited live access"})})]},l.id))})]})}function VFe(){const[e,t]=p.useState(null),[s,a]=p.useState(!0),[n,i]=p.useState(!1),[o,l]=p.useState(null),[c,d]=p.useState(!1),[h,f]=p.useState(""),[x,y]=p.useState("standard"),v=Ut(),w=window.location.pathname.split("/").pop();p.useEffect(()=>{w&&N()},[w]);const N=async()=>{try{const $=await ai.getBusiness(w);t($)}catch($){console.error("Error fetching business:",$)}finally{a(!1)}},k=async($,W)=>{await navigator.clipboard.writeText($),l(W),setTimeout(()=>l(null),2e3)},C=async()=>{if(e){f(""),d(!0);try{await ai.toggleLiveMode(e.id,!e.is_live_mode),N()}catch($){f($.message)}finally{d(!1)}}};if(s)return r.jsx("div",{className:"flex items-center justify-center py-12",children:r.jsx(Ke,{className:"w-8 h-8 animate-spin text-primary-600"})});if(!e)return r.jsxs("div",{className:"text-center py-12",children:[r.jsx(Ht,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),r.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Business not found"}),r.jsx("button",{onClick:()=>v("/merchant/developer"),className:"mt-4 text-primary-600 hover:text-primary-700",children:"Back to businesses"})]});const E=e.is_live_mode?{public:e.live_public_key,secret:e.live_secret_key}:{public:e.test_public_key,secret:e.test_secret_key},_=()=>{if(e.approval_status==="APPROVED")return!0;if(e.approval_status==="REJECTED"||e.approval_status==="SUSPENDED")return!1;const $=e.trial_live_transaction_limit||2;return(e.trial_live_transactions_used||0)<$},T=()=>{const $=e.trial_live_transaction_limit||2,W=e.trial_live_transactions_used||0;return Math.max(0,$-W)},A=()=>{const $="https://api.peeap.com",W="https://checkout.peeap.com",I=E.public,B=e.is_live_mode;return`/**
 * ============================================================================
 * PEEAP PAYMENT SDK - Production Ready
 * ============================================================================
 * Business: ${e.name}
 * Mode: ${B?"LIVE":"SANDBOX (Test Mode)"}
 *
 *   IMPORTANT: SIERRA LEONE CURRENCY (READ CAREFULLY)
 * ============================================================================
 * Sierra Leone REDENOMINATED its currency in 2022:
 *
 *   OLD Currency: Leone (SLL) - e.g., 10,000 old Leones
 *   NEW Currency: New Leone (SLE) - e.g., 10 new Leones
 *
 *   CONVERSION: 1,000 old Leones = 1 new Leone (removed 3 zeros)
 *
 * USE THESE VALUES:
 *    currency: 'SLE'     (correct - New Leone)
 *    amount: 50          (means Le 50.00 new Leones)
 *    amount: 100         (means Le 100.00 new Leones)
 *
 * DO NOT USE:
 *    currency: 'NLE'     (old code - will be auto-converted to SLE)
 *    currency: 'SLL'     (old currency - will be auto-converted)
 *    amount: 50000       (this is old Leone thinking!)
 *    amount: 1000000     (way too high for new Leone)
 *
 * TYPICAL NEW LEONE AMOUNTS:
 *   - Small purchase: 5-50 SLE
 *   - Medium purchase: 50-500 SLE
 *   - Large purchase: 500-5000 SLE
 *   - Very large: 5000+ SLE
 *
 * If your amount seems 1000x too high, divide by 1000!
 * ============================================================================
 *
 * LIVE MODE (pk_live_xxx):
 *   - Real payments processed
 *   - Mobile Money (Monime): ENABLED
 *   - Peeap Card: ENABLED
 *   - QR Code: ENABLED
 *
 * SANDBOX MODE (pk_test_xxx):
 *   - Test payments only (no real money)
 *   - Mobile Money (Monime): DISABLED (grayed out)
 *   - Peeap Card: ENABLED (use test cards)
 *   - QR Code: ENABLED (simulated)
 * ============================================================================
 */

<!-- STEP 1: Add SDK Script -->
<script src="${W}/embed/peeap-sdk.js"><\/script>

<!-- STEP 2: Initialize & Create Payment -->
<script>
// Initialize Peeap SDK
PeeapSDK.init({
  publicKey: '${I}',
  baseUrl: '${$}',  // Required for CORS

  // Success callback
  onSuccess: function(payment) {
    console.log('Payment successful!', payment);
    console.log('Reference:', payment.reference);
    // TODO: Redirect to your success page
    // window.location.href = '/order-complete?ref=' + payment.reference;
  },

  // Error callback
  onError: function(error) {
    console.error('Payment failed:', error.message);
    // TODO: Show error to user
    alert('Payment failed: ' + error.message);
  },

  // Cancel callback (optional)
  onCancel: function() {
    console.log('Payment cancelled by user');
  }
});

// Function to trigger payment
function payWithPeeap(amount, description, reference) {
  PeeapSDK.createPayment({
    amount: amount,           // New Leone (SLE): 50 = Le 50.00
    currency: 'SLE',
    description: description || 'Payment',
    reference: reference      // Optional: your order ID
  });
}
<\/script>

<!-- STEP 3: Add Payment Button -->
<button onclick="payWithPeeap(50, 'Order #12345', 'order_12345')">
  Pay Le 50.00
</button>

/**
 * ============================================================================
 * ALTERNATIVE: Server-Side Integration
 * ============================================================================
 * For backend integrations (Node.js, Python, PHP, etc.)
 * POST to: ${$}/checkout/create
 */

// Node.js Example
const response = await fetch('${$}/checkout/create', {
  method: 'POST',
  headers: { 'Content-Type': 'application/json' },
  body: JSON.stringify({
    publicKey: '${I}',
    amount: 50,  // New Leone (SLE): 50 = Le 50.00
    currency: 'SLE',
    description: 'Order #12345',
    redirectUrl: 'https://yoursite.com/payment-complete'
  })
});
const { paymentUrl } = await response.json();
// Redirect user to: paymentUrl

/**
 * ============================================================================
 * API Response Format
 * ============================================================================
 */
// Success Response:
{
  "sessionId": "cs_${B?"live":"test"}_abc123...",
  "paymentUrl": "${W}/checkout/pay/cs_${B?"live":"test"}_abc123...",
  "amount": 50,
  "currency": "SLE",
  "expiresAt": "2025-01-20T15:30:00Z",
  "isTestMode": ${!B}
}

/**
 * ============================================================================
 * Webhooks (Optional)
 * ============================================================================
 * Receive payment notifications at your endpoint
 */
// POST /your-webhook-endpoint
{
  "event": "payment.completed",
  "data": {
    "reference": "order_12345",
    "amount": 50,
    "currency": "SLE",
    "status": "completed"
  }
}`},P=()=>{const $="https://checkout.peeap.com",W=E.public,I=e.is_live_mode;return`/**
 * ============================================================================
 * PEEAP V0 INTEGRATION - For Restricted Environments
 * ============================================================================
 * Business: ${e.name}
 * Mode: ${I?"LIVE":"SANDBOX (Test Mode)"}
 *
 *   IMPORTANT: SIERRA LEONE CURRENCY (READ CAREFULLY)
 * ============================================================================
 * Sierra Leone REDENOMINATED its currency in 2022:
 *
 *   OLD: Leone (SLL) - e.g., 10,000 old Leones
 *   NEW: New Leone (SLE) - e.g., 10 new Leones
 *   CONVERSION: 1,000 old = 1 new (removed 3 zeros)
 *
 * CORRECT:
 *    currency: 'SLE', amount: 50    (Le 50 new Leones)
 *
 * WRONG (will be auto-corrected but avoid):
 *    currency: 'NLE' or 'SLL'
 *    amount: 50000 (old Leone thinking - too high!)
 * ============================================================================
 *
 * USE THIS FOR:
 *   - v0.dev projects
 *   - Vercel preview deployments
 *   - CodeSandbox / StackBlitz
 *   - Any iframe/sandboxed environment
 *   - Environments with strict CSP policies
 *
 * This SDK uses REDIRECT-ONLY flow (no iframes, no popups)
 * ============================================================================
 */

<!-- STEP 1: Add V0-Compatible SDK Script -->
<script src="${$}/embed/peeap-v0.js"><\/script>

<!-- STEP 2: Initialize & Create Payment -->
<script>
// Initialize Peeap V0 SDK
PeeapV0.init({
  publicKey: '${W}',

  // Called when payment succeeds (after redirect back)
  onSuccess: function(payment) {
    console.log('Payment successful!', payment);
    console.log('Reference:', payment.reference);
    // Update your UI or redirect
  },

  // Called on error
  onError: function(error) {
    console.error('Payment failed:', error.message);
    alert('Payment failed: ' + error.message);
  },

  // Called when user cancels
  onCancel: function() {
    console.log('Payment cancelled by user');
  }
});

// Function to trigger payment (redirects to hosted checkout)
function payWithPeeap(amount, description, reference) {
  PeeapV0.pay({
    amount: amount,           // New Leone (SLE): 50 = Le 50.00
    currency: 'SLE',
    description: description || 'Payment',
    reference: reference,     // Optional: your order ID
    // After payment, user returns to current page with ?peeap_ref=xxx&peeap_status=success
  });
}
<\/script>

<!-- STEP 3: Add Payment Button -->
<button onclick="payWithPeeap(50, 'Order #12345', 'order_12345')">
  Pay Le 50.00
</button>

/**
 * ============================================================================
 * HOW IT WORKS (Redirect Flow)
 * ============================================================================
 * 1. User clicks payment button
 * 2. SDK creates checkout session via API
 * 3. User is REDIRECTED to ${$}/checkout/pay/{sessionId}
 * 4. User completes payment on hosted checkout
 * 5. User is redirected back to your site with callback params:
 *    ?peeap_ref=order_12345&peeap_status=success
 * 6. SDK detects callback params and triggers onSuccess
 *
 * This completely avoids all CSP/iframe/sandbox restrictions!
 * ============================================================================
 */

/**
 * ============================================================================
 * OPTIONAL: Custom Redirect URL
 * ============================================================================
 */
PeeapV0.pay({
  amount: 100,
  currency: 'SLE',
  description: 'Premium Plan',
  reference: 'plan_001',
  redirectUrl: 'https://yoursite.com/payment-complete'  // Custom return URL
});

/**
 * ============================================================================
 * OPTIONAL: Generate Payment Link Without Redirect
 * ============================================================================
 */
PeeapV0.createPaymentLink({
  amount: 100,
  currency: 'SLE',
  description: 'Invoice #1234'
}).then(function(result) {
  console.log('Payment URL:', result.paymentUrl);
  // Share this URL or open in new tab
});`},M=()=>{const $="https://api.peeap.com",W="https://checkout.peeap.com",I=E.public,B=n?E.secret:"sk_****_your_secret_key",O=e.is_live_mode;return`/**
 * ============================================================================
 * PEEAP SERVER-SIDE INTEGRATION
 * ============================================================================
 * Business: ${e.name}
 * Mode: ${O?"LIVE":"SANDBOX (Test Mode)"}
 *
 * For backend integrations: Node.js, Python, PHP, Ruby, Go, etc.
 * This is the most secure integration method.
 *
 *   CURRENCY NOTE: Sierra Leone redenominated in 2022
 * ============================================================================
 *   - Use 'SLE' (New Leone) - NOT 'NLE' or 'SLL'
 *   - amount: 50 means Le 50.00 (new Leones)
 *   - Old amounts (50000, 100000) are 1000x too high!
 *   - API auto-converts NLE/SLL to SLE
 * ============================================================================
 */

// ============================================================================
// NODE.JS / JAVASCRIPT
// ============================================================================

// Create Checkout Session
async function createCheckoutSession(orderData) {
  const response = await fetch('${$}/api/checkout/create', {
    method: 'POST',
    headers: {
      'Content-Type': 'application/json',
      // For server-side, you can use secret key for additional security
      // 'Authorization': 'Bearer ${B}'
    },
    body: JSON.stringify({
      publicKey: '${I}',
      amount: orderData.amount,        // e.g., 100 = Le 100.00
      currency: orderData.currency || 'SLE',
      description: orderData.description,
      reference: orderData.orderId,    // Your order ID
      redirectUrl: orderData.redirectUrl,
      customerEmail: orderData.email,
      customerPhone: orderData.phone,
      metadata: {
        orderId: orderData.orderId,
        customerId: orderData.customerId
      }
    })
  });

  const data = await response.json();

  if (!response.ok) {
    throw new Error(data.error || 'Failed to create checkout');
  }

  return data;
  // Returns: { sessionId, paymentUrl, expiresAt }
}

// Usage in Express.js
app.post('/api/create-order', async (req, res) => {
  try {
    const { amount, description } = req.body;

    // Create your order in database first
    const order = await db.orders.create({ amount, description, status: 'pending' });

    // Create Peeap checkout session
    const checkout = await createCheckoutSession({
      amount: amount,
      description: description,
      orderId: order.id,
      redirectUrl: \`\${process.env.APP_URL}/order/\${order.id}/complete\`
    });

    // Redirect user to payment page
    res.redirect(checkout.paymentUrl);

  } catch (error) {
    res.status(500).json({ error: error.message });
  }
});


// ============================================================================
// PYTHON (requests)
// ============================================================================

import requests

def create_checkout_session(amount, description, reference, redirect_url=None):
    response = requests.post(
        '${$}/api/checkout/create',
        json={
            'publicKey': '${I}',
            'amount': amount,
            'currency': 'SLE',
            'description': description,
            'reference': reference,
            'redirectUrl': redirect_url
        }
    )

    if response.status_code != 200:
        raise Exception(response.json().get('error', 'Failed to create checkout'))

    return response.json()

# Usage
checkout = create_checkout_session(
    amount=100,
    description='Premium Plan',
    reference='order_123',
    redirect_url='https://yoursite.com/payment-complete'
)
print(f"Redirect user to: {checkout['paymentUrl']}")


// ============================================================================
// PHP (cURL)
// ============================================================================

<?php
function createCheckoutSession($amount, $description, $reference, $redirectUrl = null) {
    $ch = curl_init('${$}/api/checkout/create');

    $data = [
        'publicKey' => '${I}',
        'amount' => $amount,
        'currency' => 'SLE',
        'description' => $description,
        'reference' => $reference,
        'redirectUrl' => $redirectUrl
    ];

    curl_setopt_array($ch, [
        CURLOPT_POST => true,
        CURLOPT_POSTFIELDS => json_encode($data),
        CURLOPT_HTTPHEADER => ['Content-Type: application/json'],
        CURLOPT_RETURNTRANSFER => true
    ]);

    $response = curl_exec($ch);
    $httpCode = curl_getinfo($ch, CURLINFO_HTTP_CODE);
    curl_close($ch);

    $result = json_decode($response, true);

    if ($httpCode !== 200) {
        throw new Exception($result['error'] ?? 'Failed to create checkout');
    }

    return $result;
}

// Usage
$checkout = createCheckoutSession(100, 'Order #123', 'order_123', 'https://yoursite.com/complete');
header('Location: ' . $checkout['paymentUrl']);
exit;
?>


// ============================================================================
// WEBHOOK VERIFICATION (Recommended)
// ============================================================================

// Verify webhook signature (Node.js example)
const crypto = require('crypto');

function verifyWebhookSignature(payload, signature, secret) {
  const expectedSignature = crypto
    .createHmac('sha256', secret)
    .update(JSON.stringify(payload))
    .digest('hex');

  return crypto.timingSafeEqual(
    Buffer.from(signature),
    Buffer.from(expectedSignature)
  );
}

// Webhook endpoint
app.post('/webhooks/peeap', express.json(), (req, res) => {
  const signature = req.headers['x-peeap-signature'];

  if (!verifyWebhookSignature(req.body, signature, '${B}')) {
    return res.status(401).json({ error: 'Invalid signature' });
  }

  const { event, data } = req.body;

  switch (event) {
    case 'payment.completed':
      // Mark order as paid
      await db.orders.update(data.reference, { status: 'paid' });
      break;

    case 'payment.failed':
      // Handle failed payment
      await db.orders.update(data.reference, { status: 'failed' });
      break;
  }

  res.json({ received: true });
});


// ============================================================================
// API RESPONSE FORMATS
// ============================================================================

// Create Checkout Response:
{
  "sessionId": "cs_${O?"live":"test"}_abc123...",
  "paymentUrl": "${W}/checkout/pay/cs_${O?"live":"test"}_abc123...",
  "expiresAt": "2025-01-20T15:30:00Z",
  "amount": 100,
  "currency": "SLE",
  "isTestMode": ${!O}
}

// Webhook Payload:
{
  "event": "payment.completed",
  "timestamp": "2025-01-20T14:30:00Z",
  "data": {
    "reference": "order_123",
    "sessionId": "cs_${O?"live":"test"}_abc123",
    "amount": 100,
    "currency": "SLE",
    "status": "completed",
    "paidAt": "2025-01-20T14:30:00Z",
    "paymentMethod": "mobile_money"
  }
}`},R=()=>{switch(x){case"v0":return P();case"server":return M();default:return A()}};return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("button",{onClick:()=>v("/merchant/developer"),className:"p-2 hover:bg-gray-100 rounded-lg",children:r.jsx(Qr,{className:"w-5 h-5 text-gray-400 rotate-180"})}),e.logo_url?r.jsx("img",{src:e.logo_url,alt:e.name,className:"w-12 h-12 rounded-lg object-cover"}):r.jsx("div",{className:"w-12 h-12 bg-primary-100 rounded-lg flex items-center justify-center",children:r.jsx(mr,{className:"w-6 h-6 text-primary-600"})}),r.jsxs("div",{children:[r.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:e.name}),r.jsx("p",{className:"text-sm text-gray-500",children:e.slug})]})]}),r.jsx("div",{className:"flex items-center gap-4",children:r.jsxs("div",{className:"flex items-center gap-2 p-1 bg-gray-100 rounded-lg",children:[r.jsx("button",{onClick:()=>e.is_live_mode?C():null,disabled:c,className:`px-4 py-2 rounded-md text-sm font-medium transition-colors ${e.is_live_mode?"text-gray-600 hover:text-gray-900":"bg-white shadow text-orange-700"}`,children:"Test Mode"}),r.jsxs("button",{onClick:()=>e.is_live_mode?null:C(),disabled:c||_()===!1,className:`px-4 py-2 rounded-md text-sm font-medium transition-colors ${e.is_live_mode?"bg-white shadow text-green-700":"text-gray-600 hover:text-gray-900 disabled:opacity-50 disabled:cursor-not-allowed"}`,children:["Live Mode",e.approval_status==="PENDING"&&!e.is_live_mode&&_()&&r.jsx("span",{className:"ml-1 text-xs text-orange-500",children:"(Trial)"})]})]})})]}),h&&r.jsx("div",{className:"p-4 bg-red-50 border border-red-200 rounded-lg text-red-700",children:h}),e.approval_status==="PENDING"&&r.jsx(se,{className:"p-4 bg-yellow-50 border-yellow-200",children:r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx(_t,{className:"w-5 h-5 text-yellow-600 mt-0.5"}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-medium text-yellow-900",children:"Pending Approval"}),r.jsxs("p",{className:"text-sm text-yellow-700 mt-1",children:["You can process unlimited test transactions and ",T()," trial live transactions. After using your trial live transactions, an admin will review your business for full live access."]}),r.jsxs("div",{className:"mt-3 grid grid-cols-2 gap-4 text-sm",children:[r.jsxs("div",{className:"p-2 bg-white rounded-lg",children:[r.jsx("p",{className:"text-gray-500",children:"Test Transactions"}),r.jsx("p",{className:"font-semibold text-green-600",children:"Unlimited"})]}),r.jsxs("div",{className:"p-2 bg-white rounded-lg",children:[r.jsx("p",{className:"text-gray-500",children:"Trial Live Transactions"}),r.jsxs("p",{className:"font-semibold text-orange-600",children:[e.trial_live_transactions_used||0,"/",e.trial_live_transaction_limit||2," used"]})]})]})]})]})}),e.approval_status==="REJECTED"&&r.jsx(se,{className:"p-4 bg-red-50 border-red-200",children:r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx(Ct,{className:"w-5 h-5 text-red-600 mt-0.5"}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-medium text-red-900",children:"Application Rejected"}),r.jsx("p",{className:"text-sm text-red-700 mt-1",children:e.approval_notes||"Your business application was not approved. Please contact support."})]})]})}),r.jsxs(se,{className:"p-6",children:[r.jsx("h3",{className:"font-medium text-gray-900 mb-4",children:"Business Details"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[e.email&&r.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[r.jsx(On,{className:"w-4 h-4 text-gray-400"}),r.jsx("span",{children:e.email})]}),e.phone&&r.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[r.jsx(Ss,{className:"w-4 h-4 text-gray-400"}),r.jsx("span",{children:e.phone})]}),e.website_url&&r.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[r.jsx(Oi,{className:"w-4 h-4 text-gray-400"}),r.jsx("a",{href:e.website_url,target:"_blank",rel:"noopener noreferrer",className:"text-primary-600 hover:underline",children:e.website_url})]}),(e.address||e.city)&&r.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[r.jsx(Vi,{className:"w-4 h-4 text-gray-400"}),r.jsx("span",{children:[e.address,e.city,e.country].filter(Boolean).join(", ")})]}),e.business_category&&r.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[r.jsx(Da,{className:"w-4 h-4 text-gray-400"}),r.jsx("span",{children:e.business_category.name})]})]}),e.description&&r.jsx("div",{className:"mt-4 pt-4 border-t",children:r.jsx("p",{className:"text-sm text-gray-600",children:e.description})})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsx(se,{className:"p-4",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:r.jsx(yx,{className:"w-5 h-5 text-green-600"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-500",children:"Status"}),r.jsx("p",{className:"font-medium text-gray-900",children:e.status})]})]})}),r.jsx(se,{className:"p-4",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:r.jsx(Ae,{className:"w-5 h-5 text-blue-600"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-500",children:"Approval"}),r.jsx("p",{className:"font-medium text-gray-900",children:e.approval_status})]})]})}),r.jsx(se,{className:"p-4",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"p-2 bg-purple-100 rounded-lg",children:r.jsx(ph,{className:"w-5 h-5 text-purple-600"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-500",children:"Webhook"}),r.jsx("p",{className:"font-medium text-gray-900",children:e.webhook_url?"Configured":"Not Set"})]})]})})]}),r.jsxs("div",{className:"border-t pt-6",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-1",children:"Integration"}),r.jsx("p",{className:"text-sm text-gray-500",children:"Add payment capabilities to your website or application"})]}),r.jsxs(se,{className:"p-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(da,{className:"w-5 h-5 text-gray-600"}),r.jsx("h3",{className:"font-medium text-gray-900",children:"Peeap Payment SDK"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"px-2 py-1 bg-green-100 text-green-700 text-xs font-medium rounded",children:"AI-Ready"}),r.jsx("span",{className:"px-2 py-1 bg-blue-100 text-blue-700 text-xs font-medium rounded",children:"v2.3.0"})]})]}),r.jsxs("div",{className:"flex flex-wrap gap-2 mb-4 p-1 bg-gray-100 rounded-lg",children:[r.jsxs("button",{onClick:()=>y("standard"),className:`flex-1 min-w-[120px] px-4 py-2.5 rounded-md text-sm font-medium transition-all ${x==="standard"?"bg-white shadow text-primary-700 ring-1 ring-primary-200":"text-gray-600 hover:text-gray-900 hover:bg-gray-50"}`,children:[r.jsxs("div",{className:"flex items-center justify-center gap-2",children:[r.jsx(Oi,{className:"w-4 h-4"}),r.jsx("span",{children:"Standard SDK"})]}),r.jsx("p",{className:"text-xs text-gray-500 mt-0.5 hidden sm:block",children:"Most websites"})]}),r.jsxs("button",{onClick:()=>y("v0"),className:`flex-1 min-w-[120px] px-4 py-2.5 rounded-md text-sm font-medium transition-all ${x==="v0"?"bg-white shadow text-orange-700 ring-1 ring-orange-200":"text-gray-600 hover:text-gray-900 hover:bg-gray-50"}`,children:[r.jsxs("div",{className:"flex items-center justify-center gap-2",children:[r.jsx(Ht,{className:"w-4 h-4"}),r.jsx("span",{children:"v0 / Restricted"})]}),r.jsx("p",{className:"text-xs text-gray-500 mt-0.5 hidden sm:block",children:"v0.dev, sandboxes"})]}),r.jsxs("button",{onClick:()=>y("server"),className:`flex-1 min-w-[120px] px-4 py-2.5 rounded-md text-sm font-medium transition-all ${x==="server"?"bg-white shadow text-blue-700 ring-1 ring-blue-200":"text-gray-600 hover:text-gray-900 hover:bg-gray-50"}`,children:[r.jsxs("div",{className:"flex items-center justify-center gap-2",children:[r.jsx(bs,{className:"w-4 h-4"}),r.jsx("span",{children:"Server-Side"})]}),r.jsx("p",{className:"text-xs text-gray-500 mt-0.5 hidden sm:block",children:"Node, Python, PHP"})]})]}),r.jsxs("div",{className:"mb-4",children:[x==="standard"&&r.jsx("div",{className:"p-3 bg-primary-50 border border-primary-100 rounded-lg",children:r.jsxs("p",{className:"text-sm text-primary-800",children:[r.jsx("strong",{children:"Standard SDK"})," - Best for most websites, React, Vue, Next.js, and AI platforms like",r.jsx("strong",{children:" Lovable"}),", ",r.jsx("strong",{children:"Bolt"}),", and others. Uses hosted checkout with redirect flow."]})}),x==="v0"&&r.jsx("div",{className:"p-3 bg-orange-50 border border-orange-100 rounded-lg",children:r.jsxs("p",{className:"text-sm text-orange-800",children:[r.jsx("strong",{children:"V0 / Restricted Environment SDK"})," - Specifically designed for ",r.jsx("strong",{children:"v0.dev"}),", Vercel previews, CodeSandbox, StackBlitz, and any environment with strict CSP policies. Uses pure redirect flow with no iframes or popups."]})}),x==="server"&&r.jsx("div",{className:"p-3 bg-blue-50 border border-blue-100 rounded-lg",children:r.jsxs("p",{className:"text-sm text-blue-800",children:[r.jsx("strong",{children:"Server-Side Integration"})," - For backend-first architectures using Node.js, Python, PHP, Ruby, or Go. Includes webhook verification and secure API patterns."]})})]}),r.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 mb-4",children:[r.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg text-center",children:[r.jsx("p",{className:"text-xs text-gray-500",children:"Currencies"}),r.jsx("p",{className:"font-semibold text-gray-900",children:"6+"})]}),r.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg text-center",children:[r.jsx("p",{className:"text-xs text-gray-500",children:"Payment Methods"}),r.jsx("p",{className:"font-semibold text-gray-900",children:"5"})]}),r.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg text-center",children:[r.jsx("p",{className:"text-xs text-gray-500",children:x==="v0"?"Environment":"Frameworks"}),r.jsx("p",{className:"font-semibold text-gray-900",children:x==="v0"?"Sandboxed":"All"})]}),r.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg text-center",children:[r.jsx("p",{className:"text-xs text-gray-500",children:"Setup Time"}),r.jsx("p",{className:"font-semibold text-gray-900",children:"2 min"})]})]}),r.jsxs("div",{className:"relative",children:[r.jsx("pre",{className:"bg-gray-900 text-gray-100 p-4 rounded-lg text-sm overflow-x-auto max-h-[500px] overflow-y-auto",children:r.jsx("code",{children:R()})}),r.jsx("button",{onClick:()=>k(R(),"sdk"),className:"absolute top-2 right-2 px-3 py-2 bg-primary-600 hover:bg-primary-700 text-white rounded-lg transition-colors flex items-center gap-2",children:o==="sdk"?r.jsxs(r.Fragment,{children:[r.jsx(Hr,{className:"w-4 h-4"}),"Copied!"]}):r.jsxs(r.Fragment,{children:[r.jsx(Pr,{className:"w-4 h-4"}),"Copy Code"]})})]}),r.jsx("div",{className:"mt-4 p-3 bg-yellow-50 border border-yellow-200 rounded-lg",children:r.jsx("p",{className:"text-sm text-yellow-800",children:x==="v0"?r.jsxs(r.Fragment,{children:[r.jsx("strong",{children:"Using v0.dev?"}),` Copy this code and paste it directly into your v0 project. It's designed to work without triggering CSP blocks or "content blocked" errors.`]}):r.jsxs(r.Fragment,{children:[r.jsx("strong",{children:"Tip:"})," Paste this entire code into ChatGPT, Claude, Lovable, v0, or any AI platform - they will understand the full API and help integrate it into your project."]})})})]}),r.jsxs(se,{className:"p-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(mc,{className:"w-5 h-5 text-gray-600"}),r.jsxs("h3",{className:"font-medium text-gray-900",children:[e.is_live_mode?"Live":"Test"," API Keys"]})]}),r.jsxs("button",{onClick:()=>i(!n),className:"text-sm text-primary-600 hover:text-primary-700 flex items-center gap-1",children:[n?r.jsx(Dn,{className:"w-4 h-4"}):r.jsx(ir,{className:"w-4 h-4"}),n?"Hide":"Show"," Secret Keys"]})]}),r.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Use these keys for custom API integrations. For most use cases, we recommend using the embeddable scripts above."}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Publishable Key"}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("code",{className:"flex-1 px-3 py-2 bg-gray-100 rounded-lg text-sm font-mono overflow-x-auto",children:E.public}),r.jsx("button",{onClick:()=>k(E.public,"public"),className:"p-2 hover:bg-gray-100 rounded-lg",children:o==="public"?r.jsx(Hr,{className:"w-4 h-4 text-green-600"}):r.jsx(Pr,{className:"w-4 h-4 text-gray-500"})})]}),r.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Safe to use in frontend code"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Secret Key"}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("code",{className:"flex-1 px-3 py-2 bg-gray-100 rounded-lg text-sm font-mono",children:n?E.secret:""}),r.jsx("button",{onClick:()=>k(E.secret,"secret"),className:"p-2 hover:bg-gray-100 rounded-lg",disabled:!n,children:o==="secret"?r.jsx(Hr,{className:"w-4 h-4 text-green-600"}):r.jsx(Pr,{className:"w-4 h-4 text-gray-500"})})]}),r.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Keep this secret! Only use in server-side code"})]})]})]}),r.jsxs(se,{className:"p-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(ph,{className:"w-5 h-5 text-gray-600"}),r.jsx("h3",{className:"font-medium text-gray-900",children:"Webhook Configuration"})]}),r.jsx("button",{className:"text-sm text-primary-600 hover:text-primary-700",children:"Configure"})]}),e.webhook_url?r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Endpoint URL"}),r.jsx("code",{className:"block px-3 py-2 bg-gray-100 rounded-lg text-sm font-mono",children:e.webhook_url})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Signing Secret"}),r.jsx("code",{className:"block px-3 py-2 bg-gray-100 rounded-lg text-sm font-mono",children:n?e.webhook_secret:""})]})]}):r.jsx("p",{className:"text-sm text-gray-500",children:"No webhook configured. Set up a webhook to receive real-time payment notifications."})]})]})}function WFe(){return r.jsx(HT,{homeRoute:"/merchant",homeLabel:"Merchant Portal",basePath:"/merchant/developer",children:r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Developer Dashboard"}),r.jsx("p",{className:"text-gray-500",children:"Create businesses and manage your API integration"})]}),r.jsxs(a6,{children:[r.jsx(Ge,{index:!0,element:r.jsx(UFe,{})}),r.jsx(Ge,{path:"business/:businessId",element:r.jsx(VFe,{})})]})]})})}function zFe({merchantId:e,merchantName:t,merchantLogo:s,brandColor:a="#4F46E5"}){const[n,i]=p.useState(null),[o,l]=p.useState("50000"),[c,d]=p.useState("SLE"),[h,f]=p.useState("Payment"),x="https://api.peeap.com",y=(C,E)=>{navigator.clipboard.writeText(C).then(()=>{i(E),setTimeout(()=>i(null),2e3)})},v=`<!-- Peeap Payment Button -->
<button id="peeap-pay-btn"
        style="display:inline-block;background:${a};color:white;padding:15px 30px;border:none;border-radius:8px;font-weight:600;font-family:system-ui,-apple-system,sans-serif;cursor:pointer;transition:all 0.2s;"
        onmouseover="this.style.background='${qFe(a,-20)}';this.style.transform='translateY(-2px)';this.style.boxShadow='0 10px 20px rgba(79,70,229,0.3)'"
        onmouseout="this.style.background='${a}';this.style.transform='translateY(0)';this.style.boxShadow='none'">
   Pay ${fC(o,c)}
</button>

<script>
document.getElementById('peeap-pay-btn').addEventListener('click', async function() {
  try {
    const response = await fetch('${x}/checkout/sessions', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({
        merchantId: '${e}',
        amount: ${o},
        currency: '${c}',
        description: '${h}',
        merchantName: '${t}',${s?`
        merchantLogoUrl: '${s}',`:""}
        brandColor: '${a}',
        successUrl: window.location.origin + '/success.html',
        cancelUrl: window.location.origin + '/cancel.html'
      })
    });
    const data = await response.json();
    window.location.href = data.url;
  } catch (error) {
    alert('Payment error. Please try again.');
  }
});
<\/script>`,w=`<!-- Add this button to your page -->
<button id="pay-button"
        style="background:${a};color:white;padding:15px 30px;border:none;border-radius:8px;font-weight:600;cursor:pointer;font-size:16px;">
  Pay Now
</button>

<script>
document.getElementById('pay-button').addEventListener('click', async function() {
  // Get your dynamic amount (e.g., from cart total)
  var amount = ${o}; // ${fC(o,c)}
  var description = '${h}';

  try {
    // Create checkout session
    const response = await fetch('${x}/checkout/sessions', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({
        merchantId: '${e}',
        amount: amount,
        currency: '${c}',
        description: description,
        merchantName: '${t}',${s?`
        merchantLogoUrl: '${s}',`:""}
        brandColor: '${a}',
        successUrl: window.location.origin + '/success.html',
        cancelUrl: window.location.origin + '/cancel.html'
      })
    });

    const data = await response.json();

    // Redirect to hosted checkout page
    window.location.href = data.url;
  } catch (error) {
    alert('Payment error: ' + error.message);
  }
});
<\/script>`,N=`<!-- Payment Form with Session API -->
<form id="payment-form">
  <label>Amount (${c}):</label>
  <input type="number" id="amount-input" value="${o}" required>

  <label>Description:</label>
  <input type="text" id="description-input" value="${h}" required>

  <button type="submit"
          style="background:${a};color:white;padding:15px 30px;border:none;border-radius:8px;font-weight:600;cursor:pointer;margin-top:10px;">
    Proceed to Payment
  </button>
</form>

<script>
document.getElementById('payment-form').addEventListener('submit', async function(e) {
  e.preventDefault();
  const amount = parseInt(document.getElementById('amount-input').value);
  const description = document.getElementById('description-input').value;

  try {
    const response = await fetch('${x}/checkout/sessions', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({
        merchantId: '${e}',
        amount: amount,
        currency: '${c}',
        description: description,
        merchantName: '${t}',${s?`
        merchantLogoUrl: '${s}',`:""}
        brandColor: '${a}',
        successUrl: window.location.origin + '/success.html',
        cancelUrl: window.location.origin + '/cancel.html'
      })
    });
    const data = await response.json();
    window.location.href = data.url;
  } catch (error) {
    alert('Payment error. Please try again.');
  }
});
<\/script>`,k=`curl -X POST ${x}/checkout/sessions \\
  -H "Content-Type: application/json" \\
  -d '{
    "merchantId": "${e}",
    "amount": ${o},
    "currency": "${c}",
    "description": "${h}",
    "merchantName": "${t}",${s?`
    "merchantLogoUrl": "${s}",`:""}
    "brandColor": "${a}",
    "successUrl": "https://yoursite.com/success",
    "cancelUrl": "https://yoursite.com/cancel"
  }'`;return r.jsxs("div",{className:"space-y-6",children:[r.jsxs(se,{className:"p-6",children:[r.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Payment Configuration"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Amount (minor units)"}),r.jsx("input",{type:"number",value:o,onChange:C=>l(C.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",placeholder:"50000"}),r.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Current: ",fC(o,c)]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Currency"}),r.jsxs("select",{value:c,onChange:C=>d(C.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",children:[r.jsx("option",{value:"SLE",children:"SLE - Sierra Leone Leone"}),r.jsx("option",{value:"USD",children:"USD - US Dollar"}),r.jsx("option",{value:"EUR",children:"EUR - Euro"}),r.jsx("option",{value:"GBP",children:"GBP - British Pound"}),r.jsx("option",{value:"NGN",children:"NGN - Nigerian Naira"}),r.jsx("option",{value:"GHS",children:"GHS - Ghanaian Cedi"})]})]}),r.jsxs("div",{className:"md:col-span-2",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),r.jsx("input",{type:"text",value:h,onChange:C=>f(C.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",placeholder:"Payment for..."})]})]})]}),r.jsxs(se,{className:"p-6",children:[r.jsx("div",{className:"flex items-center justify-between mb-4",children:r.jsx("h3",{className:"text-lg font-semibold",children:" Method 1: HTML Button (Copy & Paste)"})}),r.jsx("p",{className:"text-gray-600 text-sm mb-4",children:"Add a beautiful styled button to any HTML page. Works on WordPress, Wix, Squarespace, etc. Just copy and paste!"}),r.jsxs("div",{className:"relative",children:[r.jsx("div",{className:"bg-gray-900 text-gray-100 p-4 rounded-lg overflow-x-auto",children:r.jsx("pre",{className:"text-sm",children:v})}),r.jsx("button",{onClick:()=>y(v,"button"),className:"absolute top-2 right-2 p-2 bg-indigo-600 text-white rounded hover:bg-indigo-700",children:n==="button"?r.jsx(Hr,{className:"w-4 h-4"}):r.jsx(Pr,{className:"w-4 h-4"})})]})]}),r.jsxs(se,{className:"p-6",children:[r.jsx("h3",{className:"text-lg font-semibold mb-4",children:" Method 2: JavaScript (Dynamic Amounts)"}),r.jsx("p",{className:"text-gray-600 text-sm mb-4",children:"Perfect for shopping carts where the amount changes dynamically."}),r.jsxs("div",{className:"relative",children:[r.jsx("div",{className:"bg-gray-900 text-gray-100 p-4 rounded-lg overflow-x-auto",children:r.jsx("pre",{className:"text-sm",children:w})}),r.jsx("button",{onClick:()=>y(w,"js"),className:"absolute top-2 right-2 p-2 bg-indigo-600 text-white rounded hover:bg-indigo-700",children:n==="js"?r.jsx(Hr,{className:"w-4 h-4"}):r.jsx(Pr,{className:"w-4 h-4"})})]})]}),r.jsxs(se,{className:"p-6",children:[r.jsx("h3",{className:"text-lg font-semibold mb-4",children:" Method 3: HTML Form (User Inputs)"}),r.jsx("p",{className:"text-gray-600 text-sm mb-4",children:"Let customers enter the amount and description before checkout."}),r.jsxs("div",{className:"relative",children:[r.jsx("div",{className:"bg-gray-900 text-gray-100 p-4 rounded-lg overflow-x-auto",children:r.jsx("pre",{className:"text-sm",children:N})}),r.jsx("button",{onClick:()=>y(N,"form"),className:"absolute top-2 right-2 p-2 bg-indigo-600 text-white rounded hover:bg-indigo-700",children:n==="form"?r.jsx(Hr,{className:"w-4 h-4"}):r.jsx(Pr,{className:"w-4 h-4"})})]})]}),r.jsxs(se,{className:"p-6",children:[r.jsx("h3",{className:"text-lg font-semibold mb-4",children:" Method 4: Direct API Call"}),r.jsx("p",{className:"text-gray-600 text-sm mb-4",children:"For backend integrations. Create sessions from your server and redirect users."}),r.jsxs("div",{className:"relative",children:[r.jsx("div",{className:"bg-gray-900 text-gray-100 p-4 rounded-lg overflow-x-auto",children:r.jsx("pre",{className:"text-sm",children:k})}),r.jsx("button",{onClick:()=>y(k,"curl"),className:"absolute top-2 right-2 p-2 bg-indigo-600 text-white rounded hover:bg-indigo-700",children:n==="curl"?r.jsx(Hr,{className:"w-4 h-4"}):r.jsx(Pr,{className:"w-4 h-4"})})]}),r.jsxs("div",{className:"mt-4 p-3 bg-blue-50 rounded-lg text-sm text-blue-800",children:[r.jsx("strong",{children:"Response:"})," You'll receive a JSON with ",r.jsx("code",{className:"bg-blue-100 px-1 rounded",children:"sessionId"})," and ",r.jsx("code",{className:"bg-blue-100 px-1 rounded",children:"url"}),". Redirect users to the ",r.jsx("code",{className:"bg-blue-100 px-1 rounded",children:"url"})," to complete payment."]})]}),r.jsxs(se,{className:"p-6",children:[r.jsx("h3",{className:"text-lg font-semibold mb-4",children:" Platform-Specific Guides"}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("details",{className:"border border-gray-200 rounded-lg p-4",children:[r.jsx("summary",{className:"font-semibold cursor-pointer",children:"WordPress"}),r.jsx("div",{className:"mt-3 text-sm text-gray-600",children:r.jsxs("ol",{className:"list-decimal ml-5 space-y-2",children:[r.jsx("li",{children:"Go to your page/post editor"}),r.jsx("li",{children:'Add a "Custom HTML" block'}),r.jsx("li",{children:"Paste Method 1 (HTML Button) code"}),r.jsx("li",{children:"Publish your page"})]})})]}),r.jsxs("details",{className:"border border-gray-200 rounded-lg p-4",children:[r.jsx("summary",{className:"font-semibold cursor-pointer",children:"Wix / Squarespace / Webflow"}),r.jsx("div",{className:"mt-3 text-sm text-gray-600",children:r.jsxs("ol",{className:"list-decimal ml-5 space-y-2",children:[r.jsx("li",{children:'Add an "Embed" or "Custom Code" element'}),r.jsx("li",{children:"Paste Method 1 (HTML Button) code"}),r.jsx("li",{children:"Save and publish"})]})})]}),r.jsxs("details",{className:"border border-gray-200 rounded-lg p-4",children:[r.jsx("summary",{className:"font-semibold cursor-pointer",children:"Shopify"}),r.jsx("div",{className:"mt-3 text-sm text-gray-600",children:r.jsxs("ol",{className:"list-decimal ml-5 space-y-2",children:[r.jsx("li",{children:"Go to your product page template"}),r.jsx("li",{children:"Add Method 2 (JavaScript) code"}),r.jsx("li",{children:"Use Shopify's cart object to get dynamic total"})]})})]}),r.jsxs("details",{className:"border border-gray-200 rounded-lg p-4",children:[r.jsx("summary",{className:"font-semibold cursor-pointer",children:"React / Vue / Angular"}),r.jsxs("div",{className:"mt-3 text-sm text-gray-600",children:[r.jsx("p",{children:"Use Method 4 (Direct API) to create sessions from your frontend:"}),r.jsxs("div",{className:"bg-gray-50 p-3 rounded mt-2 font-mono text-xs",children:["const response = await fetch('",x,"/checkout/sessions', ","{",r.jsx("br",{}),"method: 'POST',",r.jsx("br",{}),"headers: ","{"," 'Content-Type': 'application/json' ","}",",",r.jsx("br",{}),"body: JSON.stringify(","{"," merchantId, amount, ... ","}",")",r.jsx("br",{}),"}",");",r.jsx("br",{}),"const ","{"," url ","}"," = await response.json();",r.jsx("br",{}),"window.location.href = url;"]})]})]})]})]}),r.jsxs(se,{className:"p-6 bg-indigo-50 border-indigo-200",children:[r.jsx("h3",{className:"text-lg font-semibold mb-2 text-indigo-900",children:"Need Help?"}),r.jsx("p",{className:"text-indigo-700 text-sm mb-3",children:"These code snippets work on ANY website or platform. Just copy and paste!"}),r.jsx("div",{className:"flex gap-3",children:r.jsxs("a",{href:"/docs",target:"_blank",className:"text-indigo-600 hover:text-indigo-700 text-sm flex items-center gap-1",children:[r.jsx(da,{className:"w-4 h-4"}),"View Full Documentation"]})})]})]})}function fC(e,t){const s=typeof e=="string"?parseFloat(e):e,a=t==="SLE"||t==="SLL",n=a?s:s/100,i=a?0:2,o=n.toLocaleString("en-US",{minimumFractionDigits:i,maximumFractionDigits:i});return`${{SLE:"Le",USD:"$",EUR:"",GBP:"",NGN:"",GHS:""}[t]||t} ${o}`}function qFe(e,t){const s=l=>Math.min(Math.max(l,0),255),a=parseInt(e.replace("#",""),16),n=s((a>>16)+t),i=s((a>>8&255)+t),o=s((a&255)+t);return`#${(n<<16|i<<8|o).toString(16).padStart(6,"0")}`}function HFe(){const{businessId:e}=Ui(),t=Ut(),[s,a]=p.useState(null),[n,i]=p.useState(!0);p.useEffect(()=>{e&&o()},[e]);const o=async()=>{if(e)try{const{data:l,error:c}=await X.from("merchant_businesses").select("id, name, logo_url, brand_color, approval_status").eq("id",e).single();if(c)throw c;a(l)}catch(l){console.error("Error fetching business:",l)}finally{i(!1)}};return n?r.jsx(Jr,{children:r.jsx("div",{className:"flex items-center justify-center py-12",children:r.jsx(Ke,{className:"w-8 h-8 animate-spin text-indigo-600"})})}):s?r.jsx(Jr,{children:r.jsxs("div",{className:"space-y-6",children:[r.jsx("div",{className:"flex items-start justify-between",children:r.jsxs("div",{className:"flex items-start gap-4",children:[r.jsx("button",{onClick:()=>t(`/merchant/shops/${s.id}`),className:"p-2 hover:bg-gray-100 rounded-lg mt-1",children:r.jsx(Ar,{className:"w-5 h-5 text-gray-600"})}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-1",children:"Integration Guide"}),r.jsxs("p",{className:"text-gray-600",children:["Copy & paste these code snippets to start accepting payments for"," ",r.jsx("span",{className:"font-semibold",children:s.name})]})]})]})}),s.approval_status!=="APPROVED"&&r.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 flex items-start gap-3",children:[r.jsx(Ht,{className:"w-5 h-5 text-yellow-600 flex-shrink-0 mt-0.5"}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-semibold text-yellow-900",children:"Business Pending Approval"}),r.jsx("p",{className:"text-sm text-yellow-700 mt-1",children:"Your business is currently pending approval. You can test the integration, but live payments will only work after approval."})]})]}),r.jsx(zFe,{merchantId:s.id,merchantName:s.name,merchantLogo:s.logo_url,brandColor:s.brand_color})]})}):r.jsx(Jr,{children:r.jsxs("div",{className:"text-center py-12",children:[r.jsx(mr,{className:"w-12 h-12 text-gray-300 mx-auto mb-4"}),r.jsx("h2",{className:"text-lg font-medium text-gray-900 mb-2",children:"Business not found"}),r.jsx("p",{className:"text-gray-500 mb-4",children:"The business you're looking for doesn't exist or you don't have access."}),r.jsx("button",{onClick:()=>t("/merchant/shops"),className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700",children:"Back to My Shops"})]})})}function KFe(){const[e,t]=p.useState([]),[s,a]=p.useState(!0),[n,i]=p.useState(""),[o,l]=p.useState("all"),[c,d]=p.useState(null);p.useEffect(()=>{cr.getDefaultCurrency().then(d),h()},[]);const h=async()=>{a(!0);try{t([])}catch(w){console.error("Error fetching transactions:",w)}finally{a(!1)}},f=(c==null?void 0:c.symbol)||"Le",x=w=>`${f} ${w.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}`,y=w=>{switch(w){case"completed":return r.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-700",children:[r.jsx(Ae,{className:"w-3 h-3"})," Completed"]});case"pending":return r.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium bg-yellow-100 text-yellow-700",children:[r.jsx(_t,{className:"w-3 h-3"})," Pending"]});case"failed":return r.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium bg-red-100 text-red-700",children:[r.jsx(Wt,{className:"w-3 h-3"})," Failed"]});default:return r.jsx("span",{className:"px-2 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-700",children:w})}},v=e.filter(w=>{var C;const N=w.id.toLowerCase().includes(n.toLowerCase())||((C=w.description)==null?void 0:C.toLowerCase().includes(n.toLowerCase())),k=o==="all"||w.status===o;return N&&k});return r.jsx(Jr,{children:r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Transactions"}),r.jsx("p",{className:"text-gray-500",children:"View and manage your payment transactions"})]}),r.jsxs("button",{className:"px-4 py-2 text-sm bg-white border border-gray-300 rounded-lg hover:bg-gray-50 flex items-center gap-2",children:[r.jsx(gs,{className:"w-4 h-4"}),"Export"]})]}),r.jsx(se,{className:"p-4",children:r.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[r.jsxs("div",{className:"flex-1 relative",children:[r.jsx(Nr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),r.jsx("input",{type:"text",placeholder:"Search transactions...",value:n,onChange:w=>i(w.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500"})]}),r.jsxs("select",{value:o,onChange:w=>l(w.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500",children:[r.jsx("option",{value:"all",children:"All Status"}),r.jsx("option",{value:"completed",children:"Completed"}),r.jsx("option",{value:"pending",children:"Pending"}),r.jsx("option",{value:"failed",children:"Failed"})]})]})}),r.jsx(se,{className:"overflow-hidden",children:s?r.jsxs("div",{className:"p-8 text-center",children:[r.jsx("div",{className:"w-8 h-8 border-4 border-green-600 border-t-transparent rounded-full animate-spin mx-auto"}),r.jsx("p",{className:"mt-2 text-gray-500",children:"Loading transactions..."})]}):v.length===0?r.jsxs("div",{className:"p-8 text-center",children:[r.jsx(Pl,{className:"w-12 h-12 text-gray-300 mx-auto mb-3"}),r.jsx("p",{className:"text-gray-500",children:"No transactions found"})]}):r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{className:"bg-gray-50",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Transaction ID"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Amount"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Status"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Date"})]})}),r.jsx("tbody",{className:"divide-y divide-gray-200",children:v.map(w=>r.jsxs("tr",{className:"hover:bg-gray-50",children:[r.jsx("td",{className:"px-6 py-4 text-sm font-medium text-gray-900",children:w.id}),r.jsx("td",{className:"px-6 py-4 text-sm font-medium",children:x(w.amount)}),r.jsx("td",{className:"px-6 py-4",children:y(w.status)}),r.jsx("td",{className:"px-6 py-4 text-sm text-gray-500",children:new Date(w.created_at).toLocaleDateString()})]},w.id))})]})})]})})}function GFe(){const[e,t]=p.useState([]),[s,a]=p.useState(!0),[n,i]=p.useState(null),[o]=p.useState({availableBalance:0,pendingBalance:0,totalPayouts:0});p.useEffect(()=>{cr.getDefaultCurrency().then(i),l()},[]);const l=async()=>{a(!0);try{t([])}catch(f){console.error("Error fetching payouts:",f)}finally{a(!1)}},c=(n==null?void 0:n.symbol)||"Le",d=f=>`${c} ${f.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}`,h=f=>{switch(f){case"paid":return r.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-700",children:[r.jsx(Ae,{className:"w-3 h-3"})," Paid"]});case"pending":return r.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium bg-yellow-100 text-yellow-700",children:[r.jsx(_t,{className:"w-3 h-3"})," Pending"]});case"in_transit":return r.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-700",children:[r.jsx(_t,{className:"w-3 h-3"})," In Transit"]});default:return r.jsx("span",{className:"px-2 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-700",children:f})}};return r.jsx(Jr,{children:r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Payouts"}),r.jsx("p",{className:"text-gray-500",children:"Track your payouts and balances"})]}),r.jsxs("button",{className:"px-4 py-2 text-sm bg-white border border-gray-300 rounded-lg hover:bg-gray-50 flex items-center gap-2",children:[r.jsx(gs,{className:"w-4 h-4"}),"Export"]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[r.jsx(se,{className:"p-6",children:r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("div",{className:"p-3 bg-green-100 rounded-lg",children:r.jsx(Rt,{className:"w-6 h-6 text-green-600"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-500",children:"Available Balance"}),r.jsx("p",{className:"text-2xl font-bold",children:d(o.availableBalance)})]})]})}),r.jsx(se,{className:"p-6",children:r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("div",{className:"p-3 bg-yellow-100 rounded-lg",children:r.jsx(_t,{className:"w-6 h-6 text-yellow-600"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-500",children:"Pending Balance"}),r.jsx("p",{className:"text-2xl font-bold",children:d(o.pendingBalance)})]})]})}),r.jsx(se,{className:"p-6",children:r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("div",{className:"p-3 bg-blue-100 rounded-lg",children:r.jsx(Cr,{className:"w-6 h-6 text-blue-600"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-500",children:"Total Payouts"}),r.jsx("p",{className:"text-2xl font-bold",children:d(o.totalPayouts)})]})]})})]}),r.jsxs(se,{className:"overflow-hidden",children:[r.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:r.jsx("h2",{className:"text-lg font-semibold",children:"Payout History"})}),s?r.jsxs("div",{className:"p-8 text-center",children:[r.jsx("div",{className:"w-8 h-8 border-4 border-green-600 border-t-transparent rounded-full animate-spin mx-auto"}),r.jsx("p",{className:"mt-2 text-gray-500",children:"Loading payouts..."})]}):e.length===0?r.jsxs("div",{className:"p-8 text-center",children:[r.jsx(Cr,{className:"w-12 h-12 text-gray-300 mx-auto mb-3"}),r.jsx("p",{className:"text-gray-500",children:"No payouts yet"})]}):r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{className:"bg-gray-50",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Payout ID"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Amount"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Status"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Arrival Date"})]})}),r.jsx("tbody",{className:"divide-y divide-gray-200",children:e.map(f=>r.jsxs("tr",{className:"hover:bg-gray-50",children:[r.jsx("td",{className:"px-6 py-4 text-sm font-medium text-gray-900",children:f.id}),r.jsx("td",{className:"px-6 py-4 text-sm font-medium",children:d(f.amount)}),r.jsx("td",{className:"px-6 py-4",children:h(f.status)}),r.jsx("td",{className:"px-6 py-4 text-sm text-gray-500",children:f.arrival_date?new Date(f.arrival_date).toLocaleDateString():"-"})]},f.id))})]})]})]})})}function YFe(){const[e,t]=p.useState([]),[s,a]=p.useState(!0),[n,i]=p.useState(""),[o,l]=p.useState(null);p.useEffect(()=>{cr.getDefaultCurrency().then(l),c()},[]);const c=async()=>{a(!0);try{t([])}catch(y){console.error("Error fetching refunds:",y)}finally{a(!1)}},d=(o==null?void 0:o.symbol)||"Le",h=y=>`${d} ${y.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}`,f=y=>{switch(y){case"succeeded":return r.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-700",children:[r.jsx(Ae,{className:"w-3 h-3"})," Succeeded"]});case"pending":return r.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium bg-yellow-100 text-yellow-700",children:[r.jsx(_t,{className:"w-3 h-3"})," Pending"]});case"failed":return r.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium bg-red-100 text-red-700",children:[r.jsx(Wt,{className:"w-3 h-3"})," Failed"]});default:return r.jsx("span",{className:"px-2 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-700",children:y})}},x=e.filter(y=>y.id.toLowerCase().includes(n.toLowerCase())||y.transaction_id.toLowerCase().includes(n.toLowerCase()));return r.jsx(Jr,{children:r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Refunds"}),r.jsx("p",{className:"text-gray-500",children:"Manage customer refunds"})]}),r.jsxs("div",{className:"flex gap-3",children:[r.jsxs("button",{className:"px-4 py-2 text-sm bg-white border border-gray-300 rounded-lg hover:bg-gray-50 flex items-center gap-2",children:[r.jsx(gs,{className:"w-4 h-4"}),"Export"]}),r.jsxs("button",{className:"px-4 py-2 text-sm bg-green-600 text-white rounded-lg hover:bg-green-700 flex items-center gap-2",children:[r.jsx(sr,{className:"w-4 h-4"}),"New Refund"]})]})]}),r.jsx(se,{className:"p-4",children:r.jsxs("div",{className:"relative",children:[r.jsx(Nr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),r.jsx("input",{type:"text",placeholder:"Search refunds...",value:n,onChange:y=>i(y.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500"})]})}),r.jsx(se,{className:"overflow-hidden",children:s?r.jsxs("div",{className:"p-8 text-center",children:[r.jsx("div",{className:"w-8 h-8 border-4 border-green-600 border-t-transparent rounded-full animate-spin mx-auto"}),r.jsx("p",{className:"mt-2 text-gray-500",children:"Loading refunds..."})]}):x.length===0?r.jsxs("div",{className:"p-8 text-center",children:[r.jsx(Ot,{className:"w-12 h-12 text-gray-300 mx-auto mb-3"}),r.jsx("p",{className:"text-gray-500",children:"No refunds found"})]}):r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{className:"bg-gray-50",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Refund ID"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Transaction"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Amount"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Status"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Date"})]})}),r.jsx("tbody",{className:"divide-y divide-gray-200",children:x.map(y=>r.jsxs("tr",{className:"hover:bg-gray-50",children:[r.jsx("td",{className:"px-6 py-4 text-sm font-medium text-gray-900",children:y.id}),r.jsx("td",{className:"px-6 py-4 text-sm text-gray-600",children:y.transaction_id}),r.jsx("td",{className:"px-6 py-4 text-sm font-medium",children:h(y.amount)}),r.jsx("td",{className:"px-6 py-4",children:f(y.status)}),r.jsx("td",{className:"px-6 py-4 text-sm text-gray-500",children:new Date(y.created_at).toLocaleDateString()})]},y.id))})]})})]})})}function XFe(){const[e,t]=p.useState(null),[s,a]=p.useState("30days"),[n]=p.useState({totalRevenue:0,totalTransactions:0,avgOrderValue:0,refundRate:0});p.useEffect(()=>{cr.getDefaultCurrency().then(t)},[]);const i=(e==null?void 0:e.symbol)||"Le",o=l=>`${i} ${l.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}`;return r.jsx(Jr,{children:r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Reports"}),r.jsx("p",{className:"text-gray-500",children:"Analytics and business insights"})]}),r.jsxs("div",{className:"flex gap-3",children:[r.jsxs("select",{value:s,onChange:l=>a(l.target.value),className:"px-4 py-2 text-sm bg-white border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500",children:[r.jsx("option",{value:"7days",children:"Last 7 days"}),r.jsx("option",{value:"30days",children:"Last 30 days"}),r.jsx("option",{value:"90days",children:"Last 90 days"}),r.jsx("option",{value:"year",children:"This year"})]}),r.jsxs("button",{className:"px-4 py-2 text-sm bg-white border border-gray-300 rounded-lg hover:bg-gray-50 flex items-center gap-2",children:[r.jsx(gs,{className:"w-4 h-4"}),"Export Report"]})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[r.jsx(se,{className:"p-6",children:r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("div",{className:"p-3 bg-green-100 rounded-lg",children:r.jsx(Cr,{className:"w-6 h-6 text-green-600"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-500",children:"Total Revenue"}),r.jsx("p",{className:"text-2xl font-bold",children:o(n.totalRevenue)})]})]})}),r.jsx(se,{className:"p-6",children:r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("div",{className:"p-3 bg-blue-100 rounded-lg",children:r.jsx(Ky,{className:"w-6 h-6 text-blue-600"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-500",children:"Total Transactions"}),r.jsx("p",{className:"text-2xl font-bold",children:n.totalTransactions.toLocaleString()})]})]})}),r.jsx(se,{className:"p-6",children:r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("div",{className:"p-3 bg-purple-100 rounded-lg",children:r.jsx(Ts,{className:"w-6 h-6 text-purple-600"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-500",children:"Avg. Order Value"}),r.jsx("p",{className:"text-2xl font-bold",children:o(n.avgOrderValue)})]})]})}),r.jsx(se,{className:"p-6",children:r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("div",{className:"p-3 bg-orange-100 rounded-lg",children:r.jsx(rh,{className:"w-6 h-6 text-orange-600"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-500",children:"Refund Rate"}),r.jsxs("p",{className:"text-2xl font-bold",children:[n.refundRate,"%"]})]})]})})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[r.jsxs(se,{className:"p-6",children:[r.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Revenue Over Time"}),r.jsx("div",{className:"h-64 flex items-center justify-center bg-gray-50 rounded-lg",children:r.jsxs("div",{className:"text-center",children:[r.jsx(rh,{className:"w-12 h-12 text-gray-300 mx-auto mb-3"}),r.jsx("p",{className:"text-gray-500",children:"No data available"})]})})]}),r.jsxs(se,{className:"p-6",children:[r.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Transaction Volume"}),r.jsx("div",{className:"h-64 flex items-center justify-center bg-gray-50 rounded-lg",children:r.jsxs("div",{className:"text-center",children:[r.jsx(rh,{className:"w-12 h-12 text-gray-300 mx-auto mb-3"}),r.jsx("p",{className:"text-gray-500",children:"No data available"})]})})]})]}),r.jsxs(se,{className:"p-6",children:[r.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Available Reports"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsxs("button",{className:"p-4 border border-gray-200 rounded-lg hover:bg-gray-50 text-left",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[r.jsx(gs,{className:"w-5 h-5 text-gray-600"}),r.jsx("span",{className:"font-medium",children:"Transaction Report"})]}),r.jsx("p",{className:"text-sm text-gray-500",children:"Detailed list of all transactions"})]}),r.jsxs("button",{className:"p-4 border border-gray-200 rounded-lg hover:bg-gray-50 text-left",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[r.jsx(gs,{className:"w-5 h-5 text-gray-600"}),r.jsx("span",{className:"font-medium",children:"Payout Report"})]}),r.jsx("p",{className:"text-sm text-gray-500",children:"Summary of all payouts"})]}),r.jsxs("button",{className:"p-4 border border-gray-200 rounded-lg hover:bg-gray-50 text-left",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[r.jsx(gs,{className:"w-5 h-5 text-gray-600"}),r.jsx("span",{className:"font-medium",children:"Refund Report"})]}),r.jsx("p",{className:"text-sm text-gray-500",children:"All refunds and chargebacks"})]})]})]})]})})}function QFe(){const[e,t]=p.useState([]),[s,a]=p.useState(!0),[n,i]=p.useState(""),[o,l]=p.useState(null),[c,d]=p.useState(null);p.useEffect(()=>{cr.getDefaultCurrency().then(l),h()},[]);const h=async()=>{a(!0);try{t([])}catch(N){console.error("Error fetching payment links:",N)}finally{a(!1)}},f=(o==null?void 0:o.symbol)||"Le",x=N=>`${f} ${N.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}`,y=(N,k)=>{navigator.clipboard.writeText(k),d(N),setTimeout(()=>d(null),2e3)},v=N=>{switch(N){case"active":return r.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-700",children:[r.jsx(Ae,{className:"w-3 h-3"})," Active"]});case"inactive":return r.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-700",children:[r.jsx(Wt,{className:"w-3 h-3"})," Inactive"]});default:return r.jsx("span",{className:"px-2 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-700",children:N})}},w=e.filter(N=>N.name.toLowerCase().includes(n.toLowerCase()));return r.jsx(Jr,{children:r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Payment Links"}),r.jsx("p",{className:"text-gray-500",children:"Create and manage payment links"})]}),r.jsxs("button",{className:"px-4 py-2 text-sm bg-green-600 text-white rounded-lg hover:bg-green-700 flex items-center gap-2",children:[r.jsx(sr,{className:"w-4 h-4"}),"Create Payment Link"]})]}),r.jsx(se,{className:"p-4",children:r.jsxs("div",{className:"relative",children:[r.jsx(Nr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),r.jsx("input",{type:"text",placeholder:"Search payment links...",value:n,onChange:N=>i(N.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500"})]})}),r.jsx(se,{className:"overflow-hidden",children:s?r.jsxs("div",{className:"p-8 text-center",children:[r.jsx("div",{className:"w-8 h-8 border-4 border-green-600 border-t-transparent rounded-full animate-spin mx-auto"}),r.jsx("p",{className:"mt-2 text-gray-500",children:"Loading payment links..."})]}):w.length===0?r.jsxs("div",{className:"p-8 text-center",children:[r.jsx(Kp,{className:"w-12 h-12 text-gray-300 mx-auto mb-3"}),r.jsx("p",{className:"text-gray-500 mb-4",children:"No payment links found"}),r.jsxs("button",{className:"px-4 py-2 text-sm bg-green-600 text-white rounded-lg hover:bg-green-700 inline-flex items-center gap-2",children:[r.jsx(sr,{className:"w-4 h-4"}),"Create Your First Payment Link"]})]}):r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{className:"bg-gray-50",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Name"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Amount"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Status"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Visits"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Conversions"}),r.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Actions"})]})}),r.jsx("tbody",{className:"divide-y divide-gray-200",children:w.map(N=>r.jsxs("tr",{className:"hover:bg-gray-50",children:[r.jsxs("td",{className:"px-6 py-4",children:[r.jsx("p",{className:"text-sm font-medium text-gray-900",children:N.name}),r.jsx("p",{className:"text-xs text-gray-500 truncate max-w-xs",children:N.url})]}),r.jsx("td",{className:"px-6 py-4 text-sm font-medium",children:x(N.amount)}),r.jsx("td",{className:"px-6 py-4",children:v(N.status)}),r.jsx("td",{className:"px-6 py-4 text-sm text-gray-500",children:N.visits}),r.jsx("td",{className:"px-6 py-4 text-sm text-gray-500",children:N.conversions}),r.jsx("td",{className:"px-6 py-4 text-right",children:r.jsxs("div",{className:"flex items-center justify-end gap-2",children:[r.jsx("button",{onClick:()=>y(N.id,N.url),className:"p-2 hover:bg-gray-100 rounded-lg",title:"Copy link",children:c===N.id?r.jsx(Ae,{className:"w-4 h-4 text-green-500"}):r.jsx(Pr,{className:"w-4 h-4 text-gray-500"})}),r.jsx("a",{href:N.url,target:"_blank",rel:"noopener noreferrer",className:"p-2 hover:bg-gray-100 rounded-lg",title:"Open link",children:r.jsx(da,{className:"w-4 h-4 text-gray-500"})}),r.jsx("button",{className:"p-2 hover:bg-gray-100 rounded-lg",title:"View details",children:r.jsx(ir,{className:"w-4 h-4 text-gray-500"})}),r.jsx("button",{className:"p-2 hover:bg-gray-100 rounded-lg text-red-500",title:"Delete",children:r.jsx(Js,{className:"w-4 h-4"})})]})})]},N.id))})]})})]})})}function ZFe(){var q;const{user:e}=pt(),[t,s]=p.useState(!0),[a,n]=p.useState(!1),[i,o]=p.useState(!1),[l,c]=p.useState(""),[d,h]=p.useState(""),[f,x]=p.useState({id:"",business_name:"",business_type:"",business_category_id:null,registration_number:"",tax_id:"",website:"",description:"",email:"",phone:"",address_line1:"",address_line2:"",city:"",state:"",postal_code:"",country:"",logo_url:null,kyc_status:"pending",is_active:!0,created_at:""}),[y,v]=p.useState({bank_name:"",account_name:"",account_number:"",routing_number:""}),[w,N]=p.useState([]),[k,C]=p.useState([]),[E,_]=p.useState(null);p.useEffect(()=>{T(),A(),P()},[e]);const T=async()=>{if(e!=null&&e.id){s(!0);try{const{data:H,error:K}=await X.from("users").select(`
          id,
          email,
          phone,
          business_name,
          kyc_status,
          is_active,
          created_at,
          business_category_id,
          business_categories (
            id,
            name
          )
        `).eq("id",e.id).single();if(K){console.error("Error fetching profile:",K);return}H&&x(V=>{var z;return{...V,id:H.id,business_name:H.business_name||"",email:H.email||"",phone:H.phone||"",kyc_status:H.kyc_status||"pending",is_active:H.is_active??!0,created_at:H.created_at,business_category_id:H.business_category_id,business_category_name:((z=H.business_categories)==null?void 0:z.name)||""}})}catch(H){console.error("Error fetching profile:",H)}finally{s(!1)}}},A=async()=>{try{const{data:H,error:K}=await X.from("business_categories").select("id, name, parent_id").eq("status","ACTIVE").order("sort_order",{ascending:!0});!K&&H&&N(H)}catch(H){console.error("Error fetching categories:",H)}},P=async()=>{if(e!=null&&e.id)try{const{data:H,error:K}=await X.from("merchant_business_categories").select(`
          id,
          is_primary,
          business_category_id,
          business_categories (
            id,
            name
          )
        `).eq("user_id",e.id);if(!K&&H){const V=H.map(z=>{var G,te;return{id:((G=z.business_categories)==null?void 0:G.id)||z.business_category_id,name:((te=z.business_categories)==null?void 0:te.name)||"",is_primary:z.is_primary}});C(V)}}catch(H){console.error("Error fetching merchant categories:",H)}},M=async()=>{var H;n(!0),h(""),c("");try{const{error:K}=await X.from("users").update({business_name:f.business_name,phone:f.phone,business_category_id:((H=k.find(V=>V.is_primary))==null?void 0:H.id)||null}).eq("id",e==null?void 0:e.id);if(K){h(K.message);return}if(e!=null&&e.id&&(await X.from("merchant_business_categories").delete().eq("user_id",e.id),k.length>0)){const V=k.map(G=>({user_id:e.id,business_category_id:G.id,is_primary:G.is_primary})),{error:z}=await X.from("merchant_business_categories").insert(V);z&&console.error("Error saving categories:",z)}c("Profile updated successfully"),o(!1),setTimeout(()=>c(""),3e3)}catch(K){h(K.message||"Failed to update profile")}finally{n(!1)}},R=H=>{const K=w.find(z=>z.id===H);if(!K)return;if(k.some(z=>z.id===H)){const z=k.filter(G=>G.id!==H);z.length>0&&!z.some(G=>G.is_primary)&&(z[0].is_primary=!0),C(z)}else{const z={id:K.id,name:K.name,is_primary:k.length===0};C([...k,z])}},$=H=>{C(k.map(K=>({...K,is_primary:K.id===H})))},W=H=>{const K=k.filter(V=>V.id!==H);K.length>0&&!K.some(V=>V.is_primary)&&(K[0].is_primary=!0),C(K)},I=H=>{_(H===E?null:H)},B=w.filter(H=>!H.parent_id),O=H=>w.filter(K=>K.parent_id===H),F=H=>{switch(H){case"approved":case"verified":return r.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 rounded-full text-sm font-medium bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400",children:[r.jsx(Ae,{className:"w-4 h-4"})," Verified"]});case"pending":return r.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 rounded-full text-sm font-medium bg-yellow-100 dark:bg-yellow-900/30 text-yellow-700 dark:text-yellow-400",children:[r.jsx(_t,{className:"w-4 h-4"})," Pending Verification"]});case"rejected":return r.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 rounded-full text-sm font-medium bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-400",children:[r.jsx(dt,{className:"w-4 h-4"})," Verification Failed"]});default:return r.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 rounded-full text-sm font-medium bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300",children:[r.jsx(_t,{className:"w-4 h-4"})," ",H]})}};return t?r.jsx(Jr,{children:r.jsx("div",{className:"flex items-center justify-center h-64",children:r.jsx("div",{className:"w-8 h-8 border-4 border-green-600 dark:border-green-400 border-t-transparent rounded-full animate-spin"})})}):r.jsx(Jr,{children:r.jsxs(Pe.div,{className:"space-y-6",initial:{opacity:0},animate:{opacity:1},transition:{duration:.4},children:[r.jsxs(Pe.div,{className:"flex justify-between items-center",initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.5},children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Business Profile"}),r.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Manage your business information"})]}),i?r.jsxs("div",{className:"flex gap-3",children:[r.jsxs(Pe.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>{o(!1),T()},className:"px-4 py-2 text-sm bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 flex items-center gap-2",children:[r.jsx(Ct,{className:"w-4 h-4"}),"Cancel"]}),r.jsxs(Pe.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:M,disabled:a,className:"px-4 py-2 text-sm bg-green-600 text-white rounded-lg hover:bg-green-700 flex items-center gap-2 disabled:opacity-50",children:[a?r.jsx(Ke,{className:"w-4 h-4 animate-spin"}):r.jsx(Pn,{className:"w-4 h-4"}),"Save Changes"]})]}):r.jsxs(Pe.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>o(!0),className:"px-4 py-2 text-sm bg-green-600 text-white rounded-lg hover:bg-green-700 flex items-center gap-2",children:[r.jsx(rd,{className:"w-4 h-4"}),"Edit Profile"]})]}),l&&r.jsxs(Pe.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"p-4 bg-green-50 dark:bg-green-900/30 border border-green-200 dark:border-green-800 rounded-lg text-green-700 dark:text-green-400 flex items-center gap-2",children:[r.jsx(Ae,{className:"w-5 h-5"}),l]}),d&&r.jsxs(Pe.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"p-4 bg-red-50 dark:bg-red-900/30 border border-red-200 dark:border-red-800 rounded-lg text-red-700 dark:text-red-400 flex items-center gap-2",children:[r.jsx(dt,{className:"w-5 h-5"}),d]}),r.jsx(Be,{className:"p-6",delay:.1,glowEffect:!0,children:r.jsxs("div",{className:"flex items-start gap-6",children:[r.jsxs("div",{className:"relative",children:[r.jsx("div",{className:"w-24 h-24 bg-green-100 dark:bg-green-900/30 rounded-xl flex items-center justify-center",children:f.logo_url?r.jsx("img",{src:f.logo_url,alt:"Business Logo",className:"w-full h-full object-cover rounded-xl"}):r.jsx(mr,{className:"w-12 h-12 text-green-600 dark:text-green-400"})}),i&&r.jsx("button",{className:"absolute -bottom-2 -right-2 p-2 bg-white dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-full shadow-sm hover:bg-gray-50 dark:hover:bg-gray-600",children:r.jsx(td,{className:"w-4 h-4 text-gray-600 dark:text-gray-400"})})]}),r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[i?r.jsx("input",{type:"text",value:f.business_name,onChange:H=>x({...f,business_name:H.target.value}),className:"text-2xl font-bold text-gray-900 dark:text-white bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-1 focus:ring-2 focus:ring-green-500",placeholder:"Business Name"}):r.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:f.business_name||"Your Business Name"}),F(f.kyc_status)]}),r.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-3",children:f.business_category_name||"No category selected"}),r.jsxs("div",{className:"flex items-center gap-6 text-sm text-gray-600 dark:text-gray-400",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(On,{className:"w-4 h-4"}),f.email]}),f.phone&&r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Ss,{className:"w-4 h-4"}),f.phone]})]})]}),r.jsxs("div",{className:"text-right",children:[r.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-1",children:"Account Status"}),r.jsx("span",{className:`inline-flex items-center gap-1 px-3 py-1 rounded-full text-sm font-medium ${f.is_active?"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400":"bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-400"}`,children:f.is_active?"Active":"Inactive"}),r.jsxs("p",{className:"text-xs text-gray-400 dark:text-gray-500 mt-2",children:["Member since ",new Date(f.created_at).toLocaleDateString()]})]})]})}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[r.jsxs(Be,{className:"p-6",delay:.2,children:[r.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[r.jsx(Da,{className:"w-5 h-5 text-gray-600 dark:text-gray-400"}),r.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Business Information"})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Business Name"}),i?r.jsx("input",{type:"text",value:f.business_name,onChange:H=>x({...f,business_name:H.target.value}),className:"w-full px-3 py-2 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500 text-gray-900 dark:text-white"}):r.jsx("p",{className:"text-gray-900 dark:text-white",children:f.business_name||"-"})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:["Business Categories",r.jsx("span",{className:"text-xs text-gray-400 dark:text-gray-500 ml-2",children:"(Select all that apply)"})]}),i?r.jsxs("div",{className:"space-y-3",children:[k.length>0&&r.jsxs("div",{className:"p-3 bg-green-50 dark:bg-green-900/30 border border-green-200 dark:border-green-800 rounded-lg",children:[r.jsxs("p",{className:"text-xs text-green-700 dark:text-green-400 font-medium mb-2",children:["Selected Categories (",k.length,"):"]}),r.jsx("div",{className:"flex flex-wrap gap-2",children:k.map(H=>r.jsxs("span",{className:`inline-flex items-center gap-2 px-2 py-1 rounded-full text-xs ${H.is_primary?"bg-green-200 dark:bg-green-800 text-green-800 dark:text-green-200":"bg-white dark:bg-gray-700 text-gray-700 dark:text-gray-300 border border-gray-200 dark:border-gray-600"}`,children:[H.name,H.is_primary&&r.jsx("span",{className:"text-[10px] font-medium",children:"(Primary)"}),!H.is_primary&&r.jsx("button",{type:"button",onClick:()=>$(H.id),className:"text-[10px] text-green-600 dark:text-green-400 hover:text-green-700 dark:hover:text-green-300 underline",children:"Set Primary"}),r.jsx("button",{type:"button",onClick:()=>W(H.id),className:"text-gray-400 dark:text-gray-500 hover:text-red-500 dark:hover:text-red-400",children:""})]},H.id))})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-0 border border-gray-200 dark:border-gray-600 rounded-lg overflow-hidden",children:[r.jsxs("div",{className:"border-r border-gray-200 dark:border-gray-600",children:[r.jsx("div",{className:"bg-gray-50 dark:bg-gray-700 px-3 py-2 border-b border-gray-200 dark:border-gray-600",children:r.jsx("p",{className:"text-xs font-medium text-gray-700 dark:text-gray-300",children:"Categories"})}),r.jsx("div",{className:"max-h-64 overflow-y-auto bg-white dark:bg-gray-800",children:B.map(H=>{const V=O(H.id).filter(G=>k.some(te=>te.id===G.id)).length,z=E===H.id;return r.jsxs("button",{type:"button",onClick:()=>I(H.id),className:`w-full flex items-center justify-between px-3 py-2 text-left text-sm hover:bg-gray-50 dark:hover:bg-gray-700 border-b border-gray-100 dark:border-gray-700 last:border-0 ${z?"bg-green-50 dark:bg-green-900/30 border-l-2 border-l-green-500":""}`,children:[r.jsx("span",{className:`${z?"text-green-700 dark:text-green-400 font-medium":"text-gray-700 dark:text-gray-300"}`,children:H.name}),r.jsxs("div",{className:"flex items-center gap-1",children:[V>0&&r.jsx("span",{className:"px-1.5 py-0.5 bg-green-100 dark:bg-green-800 text-green-700 dark:text-green-300 text-[10px] rounded-full",children:V}),r.jsx(ys,{className:`w-3 h-3 text-gray-400 -rotate-90 ${z?"text-green-500":""}`})]})]},H.id)})})]}),r.jsxs("div",{className:"bg-white dark:bg-gray-800",children:[r.jsx("div",{className:"bg-gray-50 dark:bg-gray-700 px-3 py-2 border-b border-gray-200 dark:border-gray-600",children:r.jsx("p",{className:"text-xs font-medium text-gray-700 dark:text-gray-300",children:"Subcategories"})}),r.jsx("div",{className:"max-h-64 overflow-y-auto",children:E?O(E).length>0?r.jsx("div",{className:"p-2 space-y-1",children:O(E).map(H=>{const K=k.some(V=>V.id===H.id);return r.jsxs("label",{className:`flex items-center gap-2 p-2 rounded cursor-pointer text-sm ${K?"bg-green-50 dark:bg-green-900/30":"hover:bg-gray-50 dark:hover:bg-gray-700"}`,children:[r.jsx("input",{type:"checkbox",checked:K,onChange:()=>R(H.id),className:"w-4 h-4 text-green-600 border-gray-300 dark:border-gray-600 rounded focus:ring-green-500 bg-white dark:bg-gray-700"}),r.jsx("span",{className:K?"text-green-700 dark:text-green-400 font-medium":"text-gray-600 dark:text-gray-400",children:H.name})]},H.id)})}):r.jsxs("div",{className:"p-4 text-center text-gray-400 dark:text-gray-500 text-xs",children:[r.jsx("p",{children:"No subcategories"}),r.jsxs("label",{className:"flex items-center justify-center gap-2 mt-2 cursor-pointer",children:[r.jsx("input",{type:"checkbox",checked:k.some(H=>H.id===E),onChange:()=>R(E),className:"w-4 h-4 text-green-600 border-gray-300 dark:border-gray-600 rounded focus:ring-green-500 bg-white dark:bg-gray-700"}),r.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Select parent"})]})]}):r.jsx("div",{className:"p-4 text-center text-gray-400 dark:text-gray-500 text-xs",children:"Select a category"})})]})]}),r.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Select a category on the left to see subcategories. First selected becomes primary."})]}):r.jsx("div",{className:"flex flex-wrap gap-2",children:k.length>0?k.map(H=>r.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs ${H.is_primary?"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400":"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300"}`,children:[r.jsx(Gy,{className:"w-3 h-3"}),H.name,H.is_primary&&r.jsx("span",{className:"text-[10px]",children:"(Primary)"})]},H.id)):r.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"No categories selected"})})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Business Type"}),i?r.jsxs("select",{value:f.business_type,onChange:H=>x({...f,business_type:H.target.value}),className:"w-full px-3 py-2 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500 text-gray-900 dark:text-white",children:[r.jsx("option",{value:"",children:"Select type"}),r.jsx("option",{value:"sole_proprietorship",children:"Sole Proprietorship"}),r.jsx("option",{value:"partnership",children:"Partnership"}),r.jsx("option",{value:"llc",children:"LLC"}),r.jsx("option",{value:"corporation",children:"Corporation"}),r.jsx("option",{value:"nonprofit",children:"Non-Profit"})]}):r.jsx("p",{className:"text-gray-900 dark:text-white capitalize",children:((q=f.business_type)==null?void 0:q.replace("_"," "))||"-"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Registration Number"}),i?r.jsx("input",{type:"text",value:f.registration_number,onChange:H=>x({...f,registration_number:H.target.value}),className:"w-full px-3 py-2 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500 text-gray-900 dark:text-white",placeholder:"Business registration number"}):r.jsx("p",{className:"text-gray-900 dark:text-white",children:f.registration_number||"-"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Tax ID"}),i?r.jsx("input",{type:"text",value:f.tax_id,onChange:H=>x({...f,tax_id:H.target.value}),className:"w-full px-3 py-2 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500 text-gray-900 dark:text-white",placeholder:"Tax identification number"}):r.jsx("p",{className:"text-gray-900 dark:text-white",children:f.tax_id||"-"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Website"}),i?r.jsx("input",{type:"url",value:f.website,onChange:H=>x({...f,website:H.target.value}),className:"w-full px-3 py-2 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500 text-gray-900 dark:text-white",placeholder:"https://example.com"}):r.jsx("p",{className:"text-gray-900 dark:text-white",children:f.website?r.jsx("a",{href:f.website,target:"_blank",rel:"noopener noreferrer",className:"text-green-600 dark:text-green-400 hover:underline",children:f.website}):"-"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Business Description"}),i?r.jsx("textarea",{value:f.description,onChange:H=>x({...f,description:H.target.value}),rows:3,className:"w-full px-3 py-2 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500 text-gray-900 dark:text-white",placeholder:"Describe your business..."}):r.jsx("p",{className:"text-gray-900 dark:text-white",children:f.description||"-"})]})]})]}),r.jsxs(Be,{className:"p-6",delay:.3,children:[r.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[r.jsx(Vi,{className:"w-5 h-5 text-gray-600 dark:text-gray-400"}),r.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Contact & Address"})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Email"}),r.jsx("p",{className:"text-gray-900 dark:text-white",children:f.email}),r.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Contact support to change email"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Phone Number"}),i?r.jsx("input",{type:"tel",value:f.phone,onChange:H=>x({...f,phone:H.target.value}),className:"w-full px-3 py-2 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500 text-gray-900 dark:text-white",placeholder:"+1 (555) 000-0000"}):r.jsx("p",{className:"text-gray-900 dark:text-white",children:f.phone||"-"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Address Line 1"}),i?r.jsx("input",{type:"text",value:f.address_line1,onChange:H=>x({...f,address_line1:H.target.value}),className:"w-full px-3 py-2 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500 text-gray-900 dark:text-white",placeholder:"Street address"}):r.jsx("p",{className:"text-gray-900 dark:text-white",children:f.address_line1||"-"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Address Line 2"}),i?r.jsx("input",{type:"text",value:f.address_line2,onChange:H=>x({...f,address_line2:H.target.value}),className:"w-full px-3 py-2 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500 text-gray-900 dark:text-white",placeholder:"Apt, Suite, Building (optional)"}):r.jsx("p",{className:"text-gray-900 dark:text-white",children:f.address_line2||"-"})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"City"}),i?r.jsx("input",{type:"text",value:f.city,onChange:H=>x({...f,city:H.target.value}),className:"w-full px-3 py-2 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500 text-gray-900 dark:text-white"}):r.jsx("p",{className:"text-gray-900 dark:text-white",children:f.city||"-"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"State/Province"}),i?r.jsx("input",{type:"text",value:f.state,onChange:H=>x({...f,state:H.target.value}),className:"w-full px-3 py-2 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500 text-gray-900 dark:text-white"}):r.jsx("p",{className:"text-gray-900 dark:text-white",children:f.state||"-"})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Postal Code"}),i?r.jsx("input",{type:"text",value:f.postal_code,onChange:H=>x({...f,postal_code:H.target.value}),className:"w-full px-3 py-2 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500 text-gray-900 dark:text-white"}):r.jsx("p",{className:"text-gray-900 dark:text-white",children:f.postal_code||"-"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Country"}),i?r.jsx("input",{type:"text",value:f.country,onChange:H=>x({...f,country:H.target.value}),className:"w-full px-3 py-2 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500 text-gray-900 dark:text-white"}):r.jsx("p",{className:"text-gray-900 dark:text-white",children:f.country||"-"})]})]})]})]})]}),r.jsxs(Be,{className:"p-6",delay:.4,children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(lt,{className:"w-5 h-5 text-gray-600 dark:text-gray-400"}),r.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Payout Account"})]}),r.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"For receiving payouts"})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Bank Name"}),i?r.jsx("input",{type:"text",value:y.bank_name,onChange:H=>v({...y,bank_name:H.target.value}),className:"w-full px-3 py-2 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500 text-gray-900 dark:text-white",placeholder:"Bank name"}):r.jsx("p",{className:"text-gray-900 dark:text-white",children:y.bank_name||"-"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Account Name"}),i?r.jsx("input",{type:"text",value:y.account_name,onChange:H=>v({...y,account_name:H.target.value}),className:"w-full px-3 py-2 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500 text-gray-900 dark:text-white",placeholder:"Account holder name"}):r.jsx("p",{className:"text-gray-900 dark:text-white",children:y.account_name||"-"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Account Number"}),i?r.jsx("input",{type:"text",value:y.account_number,onChange:H=>v({...y,account_number:H.target.value}),className:"w-full px-3 py-2 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500 text-gray-900 dark:text-white",placeholder:"Account number"}):r.jsx("p",{className:"text-gray-900 dark:text-white",children:y.account_number?`****${y.account_number.slice(-4)}`:"-"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Routing Number"}),i?r.jsx("input",{type:"text",value:y.routing_number,onChange:H=>v({...y,routing_number:H.target.value}),className:"w-full px-3 py-2 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500 text-gray-900 dark:text-white",placeholder:"Routing number"}):r.jsx("p",{className:"text-gray-900 dark:text-white",children:y.routing_number||"-"})]})]})]}),r.jsxs(Be,{className:"p-6",delay:.5,glowEffect:!0,children:[r.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[r.jsx(rr,{className:"w-5 h-5 text-gray-600 dark:text-gray-400"}),r.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Verification Status"})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[r.jsxs("div",{className:"flex items-center gap-3 p-4 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:[r.jsx("div",{className:`p-2 rounded-full ${f.kyc_status==="approved"||f.kyc_status==="verified"?"bg-green-100 dark:bg-green-900/30":"bg-yellow-100 dark:bg-yellow-900/30"}`,children:f.kyc_status==="approved"||f.kyc_status==="verified"?r.jsx(Ae,{className:"w-5 h-5 text-green-600 dark:text-green-400"}):r.jsx(_t,{className:"w-5 h-5 text-yellow-600 dark:text-yellow-400"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:"Identity Verification"}),r.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 capitalize",children:f.kyc_status||"Pending"})]})]}),r.jsxs("div",{className:"flex items-center gap-3 p-4 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:[r.jsx("div",{className:`p-2 rounded-full ${f.business_name?"bg-green-100 dark:bg-green-900/30":"bg-yellow-100 dark:bg-yellow-900/30"}`,children:f.business_name?r.jsx(Ae,{className:"w-5 h-5 text-green-600 dark:text-green-400"}):r.jsx(_t,{className:"w-5 h-5 text-yellow-600 dark:text-yellow-400"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:"Business Information"}),r.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:f.business_name?"Complete":"Incomplete"})]})]}),r.jsxs("div",{className:"flex items-center gap-3 p-4 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:[r.jsx("div",{className:`p-2 rounded-full ${y.account_number?"bg-green-100 dark:bg-green-900/30":"bg-yellow-100 dark:bg-yellow-900/30"}`,children:y.account_number?r.jsx(Ae,{className:"w-5 h-5 text-green-600 dark:text-green-400"}):r.jsx(_t,{className:"w-5 h-5 text-yellow-600 dark:text-yellow-400"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:"Payout Account"}),r.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:y.account_number?"Connected":"Not connected"})]})]})]})]})]})})}const x1=[{id:1,title:"Business Info",description:"Basic business details"},{id:2,title:"Categories",description:"What do you sell?"},{id:3,title:"Contact & Address",description:"Location details"},{id:4,title:"Payout Account",description:"Bank information"}];function JFe(){var I,B;const{user:e}=pt(),t=Ut(),[s,a]=p.useState(1),[n,i]=p.useState(!1),[o,l]=p.useState(""),[c,d]=p.useState({business_name:"",business_type:"",registration_number:"",tax_id:"",website:"",description:"",phone:"",address_line1:"",address_line2:"",city:"",state:"",postal_code:"",country:"",bank_name:"",account_name:"",account_number:"",routing_number:""}),[h,f]=p.useState([]),[x,y]=p.useState(null),[v,w]=p.useState([]);p.useEffect(()=>{N()},[]);const N=async()=>{const{data:O,error:F}=await X.from("business_categories").select("id, name, parent_id, icon").eq("status","ACTIVE").order("sort_order",{ascending:!0});!F&&O&&f(O)},k=h.filter(O=>!O.parent_id),C=O=>h.filter(F=>F.parent_id===O),E=O=>{y(O===x?null:O)},_=O=>{if(v.some(q=>q.id===O.id)){const q=v.filter(H=>H.id!==O.id);q.length>0&&!q.some(H=>H.is_primary)&&(q[0].is_primary=!0),w(q)}else w([...v,{id:O.id,name:O.name,is_primary:v.length===0}])},T=O=>{w(v.map(F=>({...F,is_primary:F.id===O})))},A=O=>{const F=v.filter(q=>q.id!==O);F.length>0&&!F.some(q=>q.is_primary)&&(F[0].is_primary=!0),w(F)},P=(O,F)=>{d(q=>({...q,[O]:F}))},M=O=>{switch(l(""),O){case 1:return c.business_name.trim()?c.business_type?!0:(l("Please select a business type"),!1):(l("Business name is required"),!1);case 2:return v.length===0?(l("Please select at least one business category"),!1):!0;case 3:return c.phone.trim()?c.address_line1.trim()?c.city.trim()?c.country.trim()?!0:(l("Country is required"),!1):(l("City is required"),!1):(l("Address is required"),!1):(l("Phone number is required"),!1);case 4:return!0;default:return!0}},R=()=>{M(s)&&a(O=>Math.min(O+1,x1.length))},$=()=>{a(O=>Math.max(O-1,1))},W=async()=>{var O;if(M(s)){i(!0),l("");try{const{error:F}=await X.from("users").update({business_name:c.business_name,phone:c.phone,business_category_id:((O=v.find(q=>q.is_primary))==null?void 0:O.id)||null}).eq("id",e==null?void 0:e.id);if(F){l(F.message),i(!1);return}if(v.length>0&&(e!=null&&e.id)){await X.from("merchant_business_categories").delete().eq("user_id",e.id);const q=v.map(H=>({user_id:e.id,business_category_id:H.id,is_primary:H.is_primary}));await X.from("merchant_business_categories").insert(q)}t("/merchant")}catch(F){l(F.message||"Failed to create business")}finally{i(!1)}}};return r.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:r.jsxs("div",{className:"max-w-3xl mx-auto px-4",children:[r.jsxs("div",{className:"text-center mb-8",children:[r.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-green-100 rounded-full mb-4",children:r.jsx(mr,{className:"w-8 h-8 text-green-600"})}),r.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Create Your Business"}),r.jsx("p",{className:"text-gray-500 mt-1",children:"Set up your merchant account to start accepting payments"})]}),r.jsx("div",{className:"mb-8",children:r.jsx("div",{className:"flex items-center justify-between",children:x1.map((O,F)=>r.jsxs("div",{className:"flex items-center",children:[r.jsxs("div",{className:"flex flex-col items-center",children:[r.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center font-semibold text-sm ${s>O.id||s===O.id?"bg-green-600 text-white":"bg-gray-200 text-gray-500"}`,children:s>O.id?r.jsx(Ae,{className:"w-5 h-5"}):O.id}),r.jsx("div",{className:"mt-2 text-center",children:r.jsx("p",{className:`text-xs font-medium ${s>=O.id?"text-green-600":"text-gray-400"}`,children:O.title})})]}),F<x1.length-1&&r.jsx("div",{className:`w-16 sm:w-24 h-1 mx-2 ${s>O.id?"bg-green-600":"bg-gray-200"}`})]},O.id))})}),o&&r.jsx("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-lg text-red-700 text-sm",children:o}),r.jsxs(se,{className:"p-6",children:[s===1&&r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[r.jsx(Da,{className:"w-5 h-5 text-green-600"}),r.jsx("h2",{className:"text-lg font-semibold",children:"Business Information"})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Business Name ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"text",value:c.business_name,onChange:O=>P("business_name",O.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500",placeholder:"Your Business Name"})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Business Type ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsxs("select",{value:c.business_type,onChange:O=>P("business_type",O.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500",children:[r.jsx("option",{value:"",children:"Select business type"}),r.jsx("option",{value:"sole_proprietorship",children:"Sole Proprietorship"}),r.jsx("option",{value:"partnership",children:"Partnership"}),r.jsx("option",{value:"llc",children:"LLC (Limited Liability Company)"}),r.jsx("option",{value:"corporation",children:"Corporation"}),r.jsx("option",{value:"nonprofit",children:"Non-Profit Organization"})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Registration Number"}),r.jsx("input",{type:"text",value:c.registration_number,onChange:O=>P("registration_number",O.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500",placeholder:"Business registration number"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tax ID"}),r.jsx("input",{type:"text",value:c.tax_id,onChange:O=>P("tax_id",O.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500",placeholder:"Tax identification number"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Website"}),r.jsx("input",{type:"url",value:c.website,onChange:O=>P("website",O.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500",placeholder:"https://www.yourbusiness.com"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Business Description"}),r.jsx("textarea",{value:c.description,onChange:O=>P("description",O.target.value),rows:3,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500",placeholder:"Describe what your business does..."})]})]}),s===2&&r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[r.jsx(Gy,{className:"w-5 h-5 text-green-600"}),r.jsx("h2",{className:"text-lg font-semibold",children:"Business Categories"})]}),r.jsx("p",{className:"text-sm text-gray-500 mb-4",children:"Select the categories that best describe your business. You can select multiple subcategories."}),v.length>0&&r.jsxs("div",{className:"p-4 bg-green-50 border border-green-200 rounded-lg mb-4",children:[r.jsxs("p",{className:"text-sm font-medium text-green-700 mb-2",children:["Selected Categories (",v.length,"):"]}),r.jsx("div",{className:"flex flex-wrap gap-2",children:v.map(O=>r.jsxs("span",{className:`inline-flex items-center gap-2 px-3 py-1.5 rounded-full text-sm ${O.is_primary?"bg-green-200 text-green-800":"bg-white text-gray-700 border border-gray-200"}`,children:[O.name,O.is_primary&&r.jsx("span",{className:"text-xs bg-green-300 px-1.5 py-0.5 rounded",children:"Primary"}),!O.is_primary&&r.jsx("button",{type:"button",onClick:()=>T(O.id),className:"text-xs text-green-600 hover:text-green-700 underline",children:"Set Primary"}),r.jsx("button",{type:"button",onClick:()=>A(O.id),className:"text-gray-400 hover:text-red-500",children:""})]},O.id))})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 border border-gray-200 rounded-lg overflow-hidden",children:[r.jsxs("div",{className:"border-r border-gray-200",children:[r.jsx("div",{className:"bg-gray-50 px-4 py-2 border-b border-gray-200",children:r.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Select a Category"})}),r.jsx("div",{className:"max-h-80 overflow-y-auto",children:k.map(O=>{const q=C(O.id).filter(K=>v.some(V=>V.id===K.id)).length,H=x===O.id;return r.jsxs("button",{type:"button",onClick:()=>E(O.id),className:`w-full flex items-center justify-between px-4 py-3 text-left hover:bg-gray-50 border-b border-gray-100 last:border-0 transition-colors ${H?"bg-green-50 border-l-4 border-l-green-500":""}`,children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(mr,{className:"w-5 h-5 text-gray-400"}),r.jsx("span",{className:`font-medium ${H?"text-green-700":"text-gray-900"}`,children:O.name})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[q>0&&r.jsx("span",{className:"px-2 py-0.5 bg-green-100 text-green-700 text-xs rounded-full",children:q}),r.jsx(Qr,{className:`w-4 h-4 text-gray-400 ${H?"text-green-500":""}`})]})]},O.id)})})]}),r.jsxs("div",{children:[r.jsx("div",{className:"bg-gray-50 px-4 py-2 border-b border-gray-200",children:r.jsx("p",{className:"text-sm font-medium text-gray-700",children:x?"Select Subcategories":"Select a category first"})}),r.jsx("div",{className:"max-h-80 overflow-y-auto",children:x?C(x).length>0?r.jsx("div",{className:"p-2 space-y-1",children:C(x).map(O=>{const F=v.some(q=>q.id===O.id);return r.jsxs("label",{className:`flex items-center gap-3 p-3 rounded-lg cursor-pointer transition-colors ${F?"bg-green-50 border border-green-200":"hover:bg-gray-50 border border-transparent"}`,children:[r.jsx("input",{type:"checkbox",checked:F,onChange:()=>_(O),className:"w-5 h-5 text-green-600 border-gray-300 rounded focus:ring-green-500"}),r.jsx("span",{className:`${F?"text-green-700 font-medium":"text-gray-700"}`,children:O.name})]},O.id)})}):r.jsxs("div",{className:"p-8 text-center text-gray-500",children:[r.jsx("p",{children:"No subcategories available"}),r.jsx("p",{className:"text-sm mt-1",children:"You can select the parent category directly"}),r.jsxs("button",{type:"button",onClick:()=>{const O=h.find(F=>F.id===x);O&&_(O)},className:"mt-3 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 text-sm",children:['Select "',(I=k.find(O=>O.id===x))==null?void 0:I.name,'"']})]}):r.jsxs("div",{className:"p-8 text-center text-gray-400",children:[r.jsx(mr,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),r.jsx("p",{children:"Select a category from the left"}),r.jsx("p",{className:"text-sm mt-1",children:"to see available subcategories"})]})})]})]})]}),s===3&&r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[r.jsx(Vi,{className:"w-5 h-5 text-green-600"}),r.jsx("h2",{className:"text-lg font-semibold",children:"Contact & Address"})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),r.jsx("input",{type:"email",value:(e==null?void 0:e.email)||"",disabled:!0,className:"w-full px-4 py-3 border border-gray-200 rounded-lg bg-gray-50 text-gray-500"}),r.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Cannot be changed"})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Phone Number ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"tel",value:c.phone,onChange:O=>P("phone",O.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500",placeholder:"+234 800 000 0000"})]})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Address Line 1 ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"text",value:c.address_line1,onChange:O=>P("address_line1",O.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500",placeholder:"Street address"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Address Line 2"}),r.jsx("input",{type:"text",value:c.address_line2,onChange:O=>P("address_line2",O.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500",placeholder:"Apt, Suite, Building (optional)"})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["City ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"text",value:c.city,onChange:O=>P("city",O.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500",placeholder:"City"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"State/Province"}),r.jsx("input",{type:"text",value:c.state,onChange:O=>P("state",O.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500",placeholder:"State"})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Postal Code"}),r.jsx("input",{type:"text",value:c.postal_code,onChange:O=>P("postal_code",O.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500",placeholder:"Postal code"})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Country ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"text",value:c.country,onChange:O=>P("country",O.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500",placeholder:"Country"})]})]})]}),s===4&&r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[r.jsx(lt,{className:"w-5 h-5 text-green-600"}),r.jsx("h2",{className:"text-lg font-semibold",children:"Payout Account"})]}),r.jsx("p",{className:"text-sm text-gray-500 mb-4",children:"Add your bank account to receive payouts. You can skip this and add it later."}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Bank Name"}),r.jsx("input",{type:"text",value:c.bank_name,onChange:O=>P("bank_name",O.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500",placeholder:"Bank name"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Account Holder Name"}),r.jsx("input",{type:"text",value:c.account_name,onChange:O=>P("account_name",O.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500",placeholder:"Name on account"})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Account Number"}),r.jsx("input",{type:"text",value:c.account_number,onChange:O=>P("account_number",O.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500",placeholder:"Account number"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Routing Number / Sort Code"}),r.jsx("input",{type:"text",value:c.routing_number,onChange:O=>P("routing_number",O.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500",placeholder:"Routing number"})]})]}),r.jsxs("div",{className:"mt-6 p-4 bg-gray-50 rounded-lg",children:[r.jsx("h3",{className:"font-medium text-gray-900 mb-3",children:"Business Summary"}),r.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-gray-500",children:"Business Name"}),r.jsx("p",{className:"font-medium",children:c.business_name||"-"})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-gray-500",children:"Business Type"}),r.jsx("p",{className:"font-medium capitalize",children:((B=c.business_type)==null?void 0:B.replace("_"," "))||"-"})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-gray-500",children:"Categories"}),r.jsxs("p",{className:"font-medium",children:[v.length," selected"]})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-gray-500",children:"Location"}),r.jsx("p",{className:"font-medium",children:c.city?`${c.city}, ${c.country}`:"-"})]})]})]})]}),r.jsxs("div",{className:"flex items-center justify-between mt-8 pt-6 border-t border-gray-200",children:[s>1?r.jsxs("button",{type:"button",onClick:$,className:"flex items-center gap-2 px-4 py-2 text-gray-600 hover:text-gray-900",children:[r.jsx(Ar,{className:"w-4 h-4"}),"Back"]}):r.jsx("div",{}),s<x1.length?r.jsxs("button",{type:"button",onClick:R,className:"flex items-center gap-2 px-6 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700",children:["Continue",r.jsx(os,{className:"w-4 h-4"})]}):r.jsx("button",{type:"button",onClick:W,disabled:n,className:"flex items-center gap-2 px-6 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50",children:n?r.jsxs(r.Fragment,{children:[r.jsx(Ke,{className:"w-4 h-4 animate-spin"}),"Creating Business..."]}):r.jsxs(r.Fragment,{children:[r.jsx(Ae,{className:"w-4 h-4"}),"Create Business"]})})]})]})]})})}const z0={bucketName:"uploads",maxFileSize:5*1024*1024,allowedTypes:["image/jpeg","image/png","image/gif","image/webp","image/svg+xml"]};function eBe(e){var n;const t=((n=e.split(".").pop())==null?void 0:n.toLowerCase())||"jpg",s=Date.now(),a=Math.random().toString(36).substring(2,8);return`${s}-${a}.${t}`}function tBe(e){return e.size>z0.maxFileSize?`File size exceeds ${z0.maxFileSize/(1024*1024)}MB limit`:z0.allowedTypes.includes(e.type)?null:"Invalid file type. Allowed: JPG, PNG, GIF, WebP, SVG"}const rBe={async uploadImage(e,t="uploads"){const s=tBe(e);if(s)throw new Error(s);const a=eBe(e.name),n=`${t}/${a}`;try{const{data:i,error:o}=await X.storage.from(z0.bucketName).upload(n,e,{cacheControl:"3600",upsert:!1});if(o)throw console.error("Supabase upload error:",o),new Error(o.message);const{data:l}=X.storage.from(z0.bucketName).getPublicUrl(i.path);return{success:!0,url:l.publicUrl,filename:a,size:e.size}}catch(i){throw console.error("Upload error:",i),new Error(i.message||"Failed to upload file")}},async uploadImages(e,t="uploads"){const s=[];for(const a of e)try{const n=await this.uploadImage(a,t);s.push(n)}catch(n){console.error(`Failed to upload ${a.name}:`,n)}return s},async deleteImage(e){try{const t=e.split("/storage/v1/object/public/");if(t.length<2)return console.error("Invalid URL format for deletion"),!1;const s=t[1].split("/"),a=s[0],n=s.slice(1).join("/"),{error:i}=await X.storage.from(a).remove([n]);return i?(console.error("Supabase delete error:",i),!1):!0}catch(t){return console.error("Delete error:",t),!1}},getImageUrl(e,t){const{data:s}=X.storage.from(z0.bucketName).getPublicUrl(`${e}/${t}`);return s.publicUrl},async listFiles(e){const{data:t,error:s}=await X.storage.from(z0.bucketName).list(e);return s?(console.error("List files error:",s),[]):t.map(a=>a.name)}},g1=[{id:1,title:"Business Info",description:"Basic details"},{id:2,title:"Categories",description:"What you sell"},{id:3,title:"Contact",description:"How to reach you"}];function sBe(){var G;const e=Ut(),[t,s]=p.useState(1),[a,n]=p.useState(!1),[i,o]=p.useState(""),l=p.useRef(null),[c,d]=p.useState(null),[h,f]=p.useState(null),[x,y]=p.useState(!1),[v,w]=p.useState({name:"",description:"",business_category_id:"",email:"",phone:"",address:"",city:"",website_url:"",logo_url:""}),[N,k]=p.useState([]),[C,E]=p.useState(null),[_,T]=p.useState([]);p.useEffect(()=>{A()},[]);const A=async()=>{const{data:te,error:he}=await X.from("business_categories").select("id, name, parent_id, icon").eq("status","ACTIVE").order("sort_order",{ascending:!0});!he&&te&&k(te)},P=N.filter(te=>!te.parent_id),M=te=>N.filter(he=>he.parent_id===te),R=te=>{E(te===C?null:te)},$=te=>{if(_.some(ne=>ne.id===te.id)){const ne=_.filter(ce=>ce.id!==te.id);ne.length>0&&!ne.some(ce=>ce.is_primary)&&(ne[0].is_primary=!0),T(ne)}else T([..._,{id:te.id,name:te.name,is_primary:_.length===0}])},W=te=>{T(_.map(he=>({...he,is_primary:he.id===te})))},I=te=>{const he=_.filter(ne=>ne.id!==te);he.length>0&&!he.some(ne=>ne.is_primary)&&(he[0].is_primary=!0),T(he)},B=(te,he)=>{w(ne=>({...ne,[te]:he}))},O=te=>{var ne;const he=(ne=te.target.files)==null?void 0:ne[0];if(he){if(!he.type.startsWith("image/")){o("Please select an image file");return}if(he.size>5*1024*1024){o("Logo must be less than 5MB");return}d(he);const ce=new FileReader;ce.onloadend=()=>{f(ce.result)},ce.readAsDataURL(he),o("")}},F=()=>{d(null),f(null),w(te=>({...te,logo_url:""})),l.current&&(l.current.value="")},q=async()=>{if(!c)return v.logo_url||null;y(!0);try{return(await rBe.uploadImage(c,"business-logos")).url}catch(te){return console.error("Logo upload failed:",te),o("Failed to upload logo: "+te.message),null}finally{y(!1)}},H=te=>{switch(o(""),te){case 1:return v.name.trim()?!0:(o("Business name is required"),!1);case 2:return!0;case 3:return!0;default:return!0}},K=()=>{H(t)&&s(te=>Math.min(te+1,g1.length))},V=()=>{s(te=>Math.max(te-1,1))},z=async()=>{if(H(t)){n(!0),o("");try{let te=v.logo_url;if(c){const ce=await q();ce&&(te=ce)}const he=_.find(ce=>ce.is_primary),ne={...v,logo_url:te,business_category_id:(he==null?void 0:he.id)||""};await ai.createBusiness(ne),e("/merchant/developer")}catch(te){o(te.message||"Failed to create business")}finally{n(!1)}}};return r.jsx(HT,{homeRoute:"/merchant",homeLabel:"Merchant Portal",basePath:"/merchant/developer",children:r.jsxs("div",{className:"max-w-3xl mx-auto",children:[r.jsxs("div",{className:"mb-6",children:[r.jsxs("button",{onClick:()=>e("/merchant/developer"),className:"text-sm text-gray-500 hover:text-gray-700 flex items-center gap-1 mb-2",children:[r.jsx(Ar,{className:"w-4 h-4"}),"Back to Businesses"]}),r.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Create New Business"}),r.jsx("p",{className:"text-gray-500",children:"Set up a new business to get API keys and start accepting payments"})]}),r.jsx("div",{className:"mb-8",children:r.jsx("div",{className:"flex items-center justify-between",children:g1.map((te,he)=>r.jsxs("div",{className:"flex items-center",children:[r.jsxs("div",{className:"flex flex-col items-center",children:[r.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center font-semibold text-sm ${t>te.id?"bg-green-600 text-white":t===te.id?"bg-primary-600 text-white":"bg-gray-200 text-gray-500"}`,children:t>te.id?r.jsx(Ae,{className:"w-5 h-5"}):te.id}),r.jsx("div",{className:"mt-2 text-center",children:r.jsx("p",{className:`text-xs font-medium ${t>=te.id?"text-primary-600":"text-gray-400"}`,children:te.title})})]}),he<g1.length-1&&r.jsx("div",{className:`w-20 sm:w-32 h-1 mx-2 ${t>te.id?"bg-green-600":"bg-gray-200"}`})]},te.id))})}),i&&r.jsx("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-lg text-red-700 text-sm",children:i}),r.jsxs(se,{className:"p-6",children:[t===1&&r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[r.jsx(Da,{className:"w-5 h-5 text-primary-600"}),r.jsx("h2",{className:"text-lg font-semibold",children:"Business Information"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Business Logo"}),r.jsxs("div",{className:"flex items-start gap-4",children:[r.jsx("div",{className:"flex-shrink-0",children:h?r.jsxs("div",{className:"relative",children:[r.jsx("img",{src:h,alt:"Logo preview",className:"w-24 h-24 rounded-lg object-cover border border-gray-200"}),r.jsx("button",{type:"button",onClick:F,className:"absolute -top-2 -right-2 p-1 bg-red-500 text-white rounded-full hover:bg-red-600",children:r.jsx(Ct,{className:"w-4 h-4"})})]}):r.jsx("div",{onClick:()=>{var te;return(te=l.current)==null?void 0:te.click()},className:"w-24 h-24 rounded-lg border-2 border-dashed border-gray-300 flex items-center justify-center cursor-pointer hover:border-primary-500 hover:bg-gray-50 transition-colors",children:r.jsx(toe,{className:"w-8 h-8 text-gray-400"})})}),r.jsxs("div",{className:"flex-1",children:[r.jsx("input",{ref:l,type:"file",accept:"image/*",onChange:O,className:"hidden"}),r.jsxs("button",{type:"button",onClick:()=>{var te;return(te=l.current)==null?void 0:te.click()},className:"px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 flex items-center gap-2 text-sm",children:[r.jsx(Of,{className:"w-4 h-4"}),h?"Change Logo":"Upload Logo"]}),r.jsx("p",{className:"mt-2 text-xs text-gray-500",children:"PNG, JPG up to 5MB. Recommended: 256x256px or higher."}),r.jsx("p",{className:"text-xs text-gray-400",children:"Your logo will appear on checkout pages."})]})]})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Business Name ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"text",value:v.name,onChange:te=>B("name",te.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",placeholder:"My Awesome Shop"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),r.jsx("textarea",{value:v.description,onChange:te=>B("description",te.target.value),rows:3,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",placeholder:"Describe what your business does..."})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Website"}),r.jsx("input",{type:"url",value:v.website_url,onChange:te=>B("website_url",te.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",placeholder:"https://myshop.com"})]})]}),t===2&&r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[r.jsx(Gy,{className:"w-5 h-5 text-primary-600"}),r.jsx("h2",{className:"text-lg font-semibold",children:"Business Categories"})]}),r.jsx("p",{className:"text-sm text-gray-500 mb-4",children:"Select the categories that describe what your business sells."}),_.length>0&&r.jsxs("div",{className:"p-4 bg-green-50 border border-green-200 rounded-lg mb-4",children:[r.jsxs("p",{className:"text-sm font-medium text-green-700 mb-2",children:["Selected (",_.length,"):"]}),r.jsx("div",{className:"flex flex-wrap gap-2",children:_.map(te=>r.jsxs("span",{className:`inline-flex items-center gap-2 px-3 py-1.5 rounded-full text-sm ${te.is_primary?"bg-green-200 text-green-800":"bg-white text-gray-700 border border-gray-200"}`,children:[te.name,te.is_primary&&r.jsx("span",{className:"text-xs bg-green-300 px-1.5 py-0.5 rounded",children:"Primary"}),!te.is_primary&&r.jsx("button",{type:"button",onClick:()=>W(te.id),className:"text-xs text-green-600 hover:text-green-700 underline",children:"Set Primary"}),r.jsx("button",{type:"button",onClick:()=>I(te.id),className:"text-gray-400 hover:text-red-500",children:""})]},te.id))})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-0 border border-gray-200 rounded-lg overflow-hidden",children:[r.jsxs("div",{className:"border-r border-gray-200",children:[r.jsx("div",{className:"bg-gray-50 px-4 py-2 border-b border-gray-200",children:r.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Select a Category"})}),r.jsx("div",{className:"max-h-72 overflow-y-auto",children:P.map(te=>{const ne=M(te.id).filter(xe=>_.some(_e=>_e.id===xe.id)).length,ce=C===te.id;return r.jsxs("button",{type:"button",onClick:()=>R(te.id),className:`w-full flex items-center justify-between px-4 py-3 text-left hover:bg-gray-50 border-b border-gray-100 last:border-0 transition-colors ${ce?"bg-primary-50 border-l-4 border-l-primary-500":""}`,children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(mr,{className:"w-5 h-5 text-gray-400"}),r.jsx("span",{className:`font-medium ${ce?"text-primary-700":"text-gray-900"}`,children:te.name})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[ne>0&&r.jsx("span",{className:"px-2 py-0.5 bg-green-100 text-green-700 text-xs rounded-full",children:ne}),r.jsx(Qr,{className:`w-4 h-4 text-gray-400 ${ce?"text-primary-500":""}`})]})]},te.id)})})]}),r.jsxs("div",{children:[r.jsx("div",{className:"bg-gray-50 px-4 py-2 border-b border-gray-200",children:r.jsx("p",{className:"text-sm font-medium text-gray-700",children:C?"Select Subcategories":"Select a category first"})}),r.jsx("div",{className:"max-h-72 overflow-y-auto",children:C?M(C).length>0?r.jsx("div",{className:"p-2 space-y-1",children:M(C).map(te=>{const he=_.some(ne=>ne.id===te.id);return r.jsxs("label",{className:`flex items-center gap-3 p-3 rounded-lg cursor-pointer transition-colors ${he?"bg-green-50 border border-green-200":"hover:bg-gray-50 border border-transparent"}`,children:[r.jsx("input",{type:"checkbox",checked:he,onChange:()=>$(te),className:"w-5 h-5 text-green-600 border-gray-300 rounded focus:ring-green-500"}),r.jsx("span",{className:he?"text-green-700 font-medium":"text-gray-700",children:te.name})]},te.id)})}):r.jsxs("div",{className:"p-8 text-center text-gray-500",children:[r.jsx("p",{children:"No subcategories"}),r.jsxs("button",{type:"button",onClick:()=>{const te=N.find(he=>he.id===C);te&&$(te)},className:"mt-3 px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 text-sm",children:['Select "',(G=P.find(te=>te.id===C))==null?void 0:G.name,'"']})]}):r.jsxs("div",{className:"p-8 text-center text-gray-400",children:[r.jsx(mr,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),r.jsx("p",{children:"Select a category from the left"})]})})]})]})]}),t===3&&r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[r.jsx(On,{className:"w-5 h-5 text-primary-600"}),r.jsx("h2",{className:"text-lg font-semibold",children:"Contact Information"})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Business Email"}),r.jsx("input",{type:"email",value:v.email,onChange:te=>B("email",te.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",placeholder:"shop@example.com"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone Number"}),r.jsx("input",{type:"tel",value:v.phone,onChange:te=>B("phone",te.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",placeholder:"077123456"})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"City"}),r.jsx("input",{type:"text",value:v.city,onChange:te=>B("city",te.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",placeholder:"Freetown"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Address"}),r.jsx("input",{type:"text",value:v.address,onChange:te=>B("address",te.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",placeholder:"123 Main Street"})]})]}),r.jsxs("div",{className:"mt-6 p-4 bg-gray-50 rounded-lg",children:[r.jsx("h3",{className:"font-medium text-gray-900 mb-3",children:"Summary"}),r.jsxs("div",{className:"flex items-start gap-4",children:[h&&r.jsx("img",{src:h,alt:"Business logo",className:"w-16 h-16 rounded-lg object-cover border border-gray-200"}),r.jsxs("div",{className:"flex-1 grid grid-cols-2 gap-4 text-sm",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-gray-500",children:"Business Name"}),r.jsx("p",{className:"font-medium",children:v.name||"-"})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-gray-500",children:"Categories"}),r.jsxs("p",{className:"font-medium",children:[_.length," selected"]})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-gray-500",children:"Email"}),r.jsx("p",{className:"font-medium",children:v.email||"-"})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-gray-500",children:"Location"}),r.jsx("p",{className:"font-medium",children:v.city||"-"})]})]})]})]}),r.jsxs("div",{className:"mt-6 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[r.jsx("h3",{className:"font-medium text-blue-900 mb-2",children:"What happens next?"}),r.jsxs("ul",{className:"text-sm text-blue-700 space-y-1",children:[r.jsx("li",{children:"1. Your business is created and you get API keys instantly"}),r.jsx("li",{children:"2. Complete 2 test transactions in sandbox mode"}),r.jsx("li",{children:"3. Admin reviews and approves your business for live payments"}),r.jsx("li",{children:"4. Switch to live mode and start accepting real payments"})]})]})]}),r.jsxs("div",{className:"flex items-center justify-between mt-8 pt-6 border-t border-gray-200",children:[t>1?r.jsxs("button",{type:"button",onClick:V,className:"flex items-center gap-2 px-4 py-2 text-gray-600 hover:text-gray-900",children:[r.jsx(Ar,{className:"w-4 h-4"}),"Back"]}):r.jsx("button",{type:"button",onClick:()=>e("/merchant/developer"),className:"flex items-center gap-2 px-4 py-2 text-gray-600 hover:text-gray-900",children:"Cancel"}),t<g1.length?r.jsxs("button",{type:"button",onClick:K,className:"flex items-center gap-2 px-6 py-3 bg-primary-600 text-white rounded-lg hover:bg-primary-700",children:["Continue",r.jsx(os,{className:"w-4 h-4"})]}):r.jsx("button",{type:"button",onClick:z,disabled:a,className:"flex items-center gap-2 px-6 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50",children:a?r.jsxs(r.Fragment,{children:[r.jsx(Ke,{className:"w-4 h-4 animate-spin"}),"Creating..."]}):r.jsxs(r.Fragment,{children:[r.jsx(Ae,{className:"w-4 h-4"}),"Create Business"]})})]})]})]})})}function aBe(){const[e,t]=p.useState([]),[s,a]=p.useState(!0),[n,i]=p.useState({totalRevenue:0,totalTransactions:0,activeShops:0,pendingApprovals:0}),o=Ut(),{isDeveloperMode:l,businessCount:c}=Wy(),d=1,h=3,f=d,x=e.length<f;p.useEffect(()=>{y()},[]);const y=async()=>{try{const N=await ai.getMyBusinesses();t(N);const k=N.filter(E=>E.approval_status==="APPROVED").length,C=N.filter(E=>E.approval_status==="PENDING").length;i({totalRevenue:0,totalTransactions:0,activeShops:k,pendingApprovals:C})}catch(N){console.error("Error fetching businesses:",N)}finally{a(!1)}},v=N=>{const k={PENDING:{color:"bg-yellow-100 text-yellow-700",icon:r.jsx(_t,{className:"w-3.5 h-3.5"}),label:"Pending"},APPROVED:{color:"bg-green-100 text-green-700",icon:r.jsx(Ae,{className:"w-3.5 h-3.5"}),label:"Approved"},REJECTED:{color:"bg-red-100 text-red-700",icon:r.jsx(Ct,{className:"w-3.5 h-3.5"}),label:"Rejected"},SUSPENDED:{color:"bg-gray-100 text-gray-700",icon:r.jsx(Ht,{className:"w-3.5 h-3.5"}),label:"Suspended"}},C=k[N]||k.PENDING;return r.jsxs("span",{className:`inline-flex items-center gap-1 px-2.5 py-1 rounded-full text-xs font-medium ${C.color}`,children:[C.icon,C.label]})},w=()=>{o(x?l?"/merchant/developer/create-business":"/merchant/create-business":"/merchant/upgrade")};return s?r.jsx(Jr,{children:r.jsx("div",{className:"flex items-center justify-center py-12",children:r.jsx(Ke,{className:"w-8 h-8 animate-spin text-green-600"})})}):r.jsx(Jr,{children:r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"My Shops"}),r.jsx("p",{className:"text-gray-500",children:"Manage your businesses and view their performance"})]}),r.jsxs("div",{className:"flex items-center gap-3",children:[!x&&r.jsxs("button",{onClick:()=>o("/merchant/upgrade"),className:"px-4 py-2 bg-gradient-to-r from-amber-500 to-orange-500 text-white rounded-lg hover:from-amber-600 hover:to-orange-600 flex items-center gap-2 text-sm font-medium",children:[r.jsx(V5,{className:"w-4 h-4"}),"Upgrade for More"]}),r.jsx("button",{onClick:w,disabled:!x&&!l,className:`px-4 py-2 rounded-lg flex items-center gap-2 text-sm font-medium ${x?"bg-green-600 text-white hover:bg-green-700":"bg-gray-100 text-gray-400 cursor-not-allowed"}`,children:x?r.jsxs(r.Fragment,{children:[r.jsx(sr,{className:"w-4 h-4"}),"Create Shop"]}):r.jsxs(r.Fragment,{children:[r.jsx(Kr,{className:"w-4 h-4"}),"Limit Reached"]})})]})]}),!x&&r.jsx(se,{className:"p-4 bg-gradient-to-r from-amber-50 to-orange-50 border-amber-200",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"p-2 bg-amber-100 rounded-lg",children:r.jsx(V5,{className:"w-5 h-5 text-amber-600"})}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-medium text-amber-900",children:"Upgrade to Merchant+"}),r.jsxs("p",{className:"text-sm text-amber-700",children:["Create up to ",h," shops and unlock premium features"]})]})]}),r.jsx("button",{onClick:()=>o("/merchant/upgrade"),className:"px-4 py-2 bg-amber-600 text-white rounded-lg hover:bg-amber-700 text-sm font-medium",children:"Upgrade Now"})]})}),r.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:[r.jsx(se,{className:"p-4",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:r.jsx(Da,{className:"w-5 h-5 text-green-600"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-500",children:"Total Shops"}),r.jsxs("p",{className:"text-xl font-bold text-gray-900",children:[e.length,"/",f]})]})]})}),r.jsx(se,{className:"p-4",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:r.jsx(Ae,{className:"w-5 h-5 text-blue-600"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-500",children:"Active Shops"}),r.jsx("p",{className:"text-xl font-bold text-gray-900",children:n.activeShops})]})]})}),r.jsx(se,{className:"p-4",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"p-2 bg-yellow-100 rounded-lg",children:r.jsx(_t,{className:"w-5 h-5 text-yellow-600"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-500",children:"Pending Approval"}),r.jsx("p",{className:"text-xl font-bold text-gray-900",children:n.pendingApprovals})]})]})}),r.jsx(se,{className:"p-4",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"p-2 bg-purple-100 rounded-lg",children:r.jsx(Ts,{className:"w-5 h-5 text-purple-600"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-500",children:"Total Revenue"}),r.jsx("p",{className:"text-xl font-bold text-gray-900",children:"Le 0"})]})]})})]}),e.length===0?r.jsxs(se,{className:"p-8 text-center",children:[r.jsx(mr,{className:"w-12 h-12 text-gray-300 mx-auto mb-4"}),r.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No shops yet"}),r.jsx("p",{className:"text-gray-500 mb-4 max-w-md mx-auto",children:"Create your first shop to start accepting payments and managing your business."}),r.jsxs("button",{onClick:w,className:"px-6 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 inline-flex items-center gap-2",children:[r.jsx(sr,{className:"w-5 h-5"}),"Create Your First Shop"]})]}):r.jsx("div",{className:"space-y-4",children:e.map(N=>r.jsx(se,{className:"p-0 overflow-hidden hover:shadow-md transition-shadow",children:r.jsxs("div",{className:"flex flex-col sm:flex-row",children:[r.jsx("div",{className:"flex-1 p-5 cursor-pointer",onClick:()=>o(`/merchant/shops/${N.id}`),children:r.jsxs("div",{className:"flex items-start gap-4",children:[N.logo_url?r.jsx("img",{src:N.logo_url,alt:N.name,className:"w-14 h-14 rounded-xl object-cover"}):r.jsx("div",{className:"w-14 h-14 bg-green-100 rounded-xl flex items-center justify-center",children:r.jsx(mr,{className:"w-7 h-7 text-green-600"})}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[r.jsx("h3",{className:"font-semibold text-gray-900 truncate",children:N.name}),v(N.approval_status)]}),r.jsx("p",{className:"text-sm text-gray-500 mb-2",children:N.slug}),N.description&&r.jsx("p",{className:"text-sm text-gray-600 line-clamp-1",children:N.description}),r.jsxs("div",{className:"flex items-center gap-4 mt-3 text-xs text-gray-500",children:[r.jsxs("span",{className:"flex items-center gap-1",children:[r.jsx(Pl,{className:"w-3.5 h-3.5"}),"0 transactions"]}),r.jsxs("span",{className:"flex items-center gap-1",children:[r.jsx(Cr,{className:"w-3.5 h-3.5"}),"Le 0 revenue"]}),r.jsx("span",{className:`flex items-center gap-1 ${N.is_live_mode?"text-green-600":"text-orange-600"}`,children:N.is_live_mode?"Live":"Test Mode"})]})]}),r.jsx(Qr,{className:"w-5 h-5 text-gray-400 hidden sm:block"})]})}),r.jsxs("div",{className:"flex sm:flex-col border-t sm:border-t-0 sm:border-l border-gray-100 bg-gray-50",children:[r.jsxs("button",{onClick:()=>o(`/merchant/shops/${N.id}`),className:"flex-1 sm:flex-none px-4 py-3 text-sm text-gray-700 hover:bg-gray-100 flex items-center justify-center gap-2",children:[r.jsx(rh,{className:"w-4 h-4"}),r.jsx("span",{className:"hidden sm:inline",children:"Dashboard"})]}),r.jsxs("button",{onClick:()=>o(`/merchant/shops/${N.id}/transactions`),className:"flex-1 sm:flex-none px-4 py-3 text-sm text-gray-700 hover:bg-gray-100 flex items-center justify-center gap-2 border-l sm:border-l-0 sm:border-t border-gray-100",children:[r.jsx(Pl,{className:"w-4 h-4"}),r.jsx("span",{className:"hidden sm:inline",children:"Transactions"})]}),r.jsxs("button",{onClick:()=>o(`/merchant/shops/${N.id}/disputes`),className:"flex-1 sm:flex-none px-4 py-3 text-sm text-gray-700 hover:bg-gray-100 flex items-center justify-center gap-2 border-l sm:border-l-0 sm:border-t border-gray-100",children:[r.jsx(Ht,{className:"w-4 h-4"}),r.jsx("span",{className:"hidden sm:inline",children:"Disputes"})]}),r.jsxs("button",{onClick:()=>o(`/merchant/shops/${N.id}/settings`),className:"flex-1 sm:flex-none px-4 py-3 text-sm text-gray-700 hover:bg-gray-100 flex items-center justify-center gap-2 border-l sm:border-l-0 sm:border-t border-gray-100",children:[r.jsx(bs,{className:"w-4 h-4"}),r.jsx("span",{className:"hidden sm:inline",children:"Settings"})]})]})]})},N.id))}),l&&r.jsx(se,{className:"p-4 bg-indigo-50 border-indigo-200",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"p-2 bg-indigo-100 rounded-lg",children:r.jsx(da,{className:"w-5 h-5 text-indigo-600"})}),r.jsxs("div",{className:"flex-1",children:[r.jsx("h3",{className:"font-medium text-indigo-900",children:"Developer Mode Active"}),r.jsx("p",{className:"text-sm text-indigo-700",children:"Access the full Developer Portal for API keys, webhooks, and integration tools."})]}),r.jsx("button",{onClick:()=>o("/merchant/developer"),className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 text-sm font-medium",children:"Open Developer Portal"})]})})]})})}function nBe(){const[e,t]=p.useState(null),[s,a]=p.useState(!1),n=Ut(),i=[{id:"basic",name:"Basic",price:0,currency:"NLE",period:"forever",description:"For small businesses getting started",highlight:"Current Plan",features:["Checkout links","QR code payments","Single wallet","Mobile money payouts","Basic transaction history (30 days)","Email support"]},{id:"business",name:"Business",price:150,currency:"NLE",period:"month",description:"For growing businesses that need more tools",popular:!0,redirectToPlus:!0,features:["Everything in Basic","Invoice generator","Recurring payments & subscriptions","Subscription links","Basic API access","Webhook notifications","90-day transaction history","Priority support"]},{id:"business_plus",name:"Business++",price:500,currency:"NLE",period:"month",description:"For enterprises needing full control",highlight:"Corporate",redirectToPlus:!0,features:["Everything in Business","Issue employee expense cards","Spending controls & limits","Real-time authorization webhooks","Expense management","Multi-user team access","Department budgets","Advanced analytics & reports","Unlimited transaction history","Dedicated account manager"]}],o=async d=>{if(d.id==="basic"){n("/merchant");return}t(d.id),a(!0);const h=localStorage.getItem("accessToken");if(console.log("SSO Upgrade - Token found:",!!h,"Token length:",(h==null?void 0:h.length)||0),d.redirectToPlus){let f;if(h){const x=new URL("https://plus.peeap.com/auth/callback");x.searchParams.set("tier",d.id),x.searchParams.set("redirect",`/setup?tier=${d.id}`),x.searchParams.set("token",h),f=x.toString(),console.log("SSO Upgrade - Redirecting to callback with token")}else{const x=new URL("https://plus.peeap.com/upgrade");x.searchParams.set("tier",d.id),f=x.toString(),console.log("SSO Upgrade - No token, redirecting to upgrade page")}setTimeout(()=>{window.location.href=f},500)}},l=d=>new Intl.NumberFormat("en-SL").format(d),c=d=>d.includes("Invoice")?r.jsx(ao,{className:"w-4 h-4"}):d.includes("Recurring")||d.includes("Subscription")?r.jsx(Ot,{className:"w-4 h-4"}):d.includes("card")?r.jsx(lt,{className:"w-4 h-4"}):d.includes("API")||d.includes("Webhook")?r.jsx(Pa,{className:"w-4 h-4"}):d.includes("team")||d.includes("Multi-user")?r.jsx(nn,{className:"w-4 h-4"}):r.jsx(Hr,{className:"w-4 h-4"});return r.jsx(Jr,{children:r.jsxs("div",{className:"max-w-6xl mx-auto space-y-8",children:[r.jsxs("div",{className:"text-center",children:[r.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-amber-100 to-orange-100 text-amber-700 rounded-full text-sm font-medium mb-4",children:[r.jsx(XV,{className:"w-4 h-4"}),"Upgrade to PeeAP Plus"]}),r.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-3",children:"Unlock Powerful Business Tools"}),r.jsx("p",{className:"text-gray-600 max-w-2xl mx-auto",children:"Invoicing, recurring payments, employee cards, and more. Choose the plan that fits your business."})]}),r.jsx("div",{className:"grid md:grid-cols-3 gap-6",children:i.map(d=>r.jsxs(se,{className:`relative p-6 transition-all ${d.popular?"border-2 border-amber-400 shadow-xl scale-105 z-10":"border border-gray-200 hover:border-gray-300 hover:shadow-lg"}`,children:[d.popular&&r.jsx("div",{className:"absolute -top-3 left-1/2 -translate-x-1/2",children:r.jsx("span",{className:"px-4 py-1 bg-gradient-to-r from-amber-500 to-orange-500 text-white text-xs font-bold rounded-full shadow-lg",children:"MOST POPULAR"})}),d.highlight&&!d.popular&&r.jsx("div",{className:"absolute -top-3 left-1/2 -translate-x-1/2",children:r.jsx("span",{className:`px-3 py-1 text-xs font-bold rounded-full ${d.id==="basic"?"bg-gray-100 text-gray-600":"bg-purple-100 text-purple-700"}`,children:d.highlight})}),r.jsxs("div",{className:"text-center mb-6 pt-2",children:[r.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:d.name}),r.jsx("p",{className:"text-sm text-gray-500 mb-4",children:d.description}),r.jsx("div",{className:"flex items-baseline justify-center gap-1",children:d.price===0?r.jsx("span",{className:"text-4xl font-bold text-gray-900",children:"Free"}):r.jsxs(r.Fragment,{children:[r.jsx("span",{className:"text-sm text-gray-500",children:d.currency}),r.jsx("span",{className:"text-4xl font-bold text-gray-900",children:l(d.price)}),r.jsxs("span",{className:"text-gray-500",children:["/",d.period]})]})})]}),r.jsx("ul",{className:"space-y-3 mb-6",children:d.features.map((h,f)=>r.jsxs("li",{className:"flex items-start gap-2",children:[r.jsx("span",{className:`flex-shrink-0 mt-0.5 ${d.popular?"text-amber-500":"text-green-500"}`,children:c(h)}),r.jsx("span",{className:"text-sm text-gray-600",children:h})]},f))}),r.jsx("button",{onClick:()=>o(d),disabled:s&&e===d.id,className:`w-full py-3 rounded-lg font-medium flex items-center justify-center gap-2 transition-all ${d.popular?"bg-gradient-to-r from-amber-500 to-orange-500 text-white hover:from-amber-600 hover:to-orange-600 shadow-lg hover:shadow-xl":d.id==="basic"?"bg-gray-100 text-gray-500 cursor-default":"bg-gray-900 text-white hover:bg-gray-800"}`,children:s&&e===d.id?r.jsxs(r.Fragment,{children:[r.jsx(Ke,{className:"w-4 h-4 animate-spin"}),"Redirecting to Plus..."]}):d.id==="basic"?"Current Plan":r.jsxs(r.Fragment,{children:["Upgrade to ",d.name,r.jsx(os,{className:"w-4 h-4"})]})}),d.redirectToPlus&&r.jsx("p",{className:"text-xs text-center text-gray-400 mt-2",children:"You'll be redirected to plus.peeap.com"})]},d.id))}),r.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[r.jsxs(se,{className:"p-6 bg-gradient-to-br from-amber-50 to-orange-50 border-amber-200",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[r.jsx("div",{className:"w-10 h-10 bg-amber-500 rounded-xl flex items-center justify-center",children:r.jsx(ao,{className:"w-5 h-5 text-white"})}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-bold text-gray-900",children:"Business Features"}),r.jsx("p",{className:"text-sm text-gray-600",children:"NLE 150/month"})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(ao,{className:"w-4 h-4 text-amber-600"}),r.jsx("span",{className:"text-sm",children:"Invoice Generator"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Ot,{className:"w-4 h-4 text-amber-600"}),r.jsx("span",{className:"text-sm",children:"Recurring Payments"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Pa,{className:"w-4 h-4 text-amber-600"}),r.jsx("span",{className:"text-sm",children:"API Access"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Ho,{className:"w-4 h-4 text-amber-600"}),r.jsx("span",{className:"text-sm",children:"Webhooks"})]})]})]}),r.jsxs(se,{className:"p-6 bg-gradient-to-br from-purple-50 to-indigo-50 border-purple-200",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[r.jsx("div",{className:"w-10 h-10 bg-purple-600 rounded-xl flex items-center justify-center",children:r.jsx(lt,{className:"w-5 h-5 text-white"})}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-bold text-gray-900",children:"Business++ (Corporate)"}),r.jsx("p",{className:"text-sm text-gray-600",children:"NLE 500/month"})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(lt,{className:"w-4 h-4 text-purple-600"}),r.jsx("span",{className:"text-sm",children:"Employee Cards"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(rr,{className:"w-4 h-4 text-purple-600"}),r.jsx("span",{className:"text-sm",children:"Spending Controls"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(nn,{className:"w-4 h-4 text-purple-600"}),r.jsx("span",{className:"text-sm",children:"Team Access"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(rh,{className:"w-4 h-4 text-purple-600"}),r.jsx("span",{className:"text-sm",children:"Expense Reports"})]})]})]})]}),r.jsxs(se,{className:"p-6",children:[r.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-6",children:"Frequently Asked Questions"}),r.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"font-medium text-gray-900 mb-1",children:"What is PeeAP Plus?"}),r.jsx("p",{className:"text-sm text-gray-600",children:"PeeAP Plus is our premium business platform at plus.peeap.com with advanced tools like invoicing, subscriptions, and employee cards."})]}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-medium text-gray-900 mb-1",children:"Can I use my existing account?"}),r.jsx("p",{className:"text-sm text-gray-600",children:"Yes! Your existing PeeAP merchant account works on Plus. Just upgrade and you'll have access to all new features."})]}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-medium text-gray-900 mb-1",children:"Can I downgrade later?"}),r.jsx("p",{className:"text-sm text-gray-600",children:"Yes, you can downgrade anytime. Premium features will become read-only until you upgrade again."})]}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-medium text-gray-900 mb-1",children:"What payment methods are accepted?"}),r.jsx("p",{className:"text-sm text-gray-600",children:"Mobile Money (Orange Money, Afrimoney), bank transfers, and PeeAP wallet balance."})]})]})]}),r.jsxs("div",{className:"text-center py-8",children:[r.jsx("p",{className:"text-gray-600 mb-2",children:"Need a custom enterprise plan?"}),r.jsx("a",{href:"mailto:enterprise@peeap.com",className:"text-amber-600 hover:text-amber-700 font-medium",children:"Contact our sales team "})]})]})})}const p1={SLE:{code:"SLE",symbol:"Le",name:"Sierra Leonean New Leone",decimalPlaces:2,minorUnit:100,minAmount:.01},SLL:{code:"SLL",symbol:"Le",name:"Sierra Leonean Leone (old - deprecated)",decimalPlaces:0,minorUnit:1,minAmount:1},USD:{code:"USD",symbol:"$",name:"US Dollar",decimalPlaces:2,minorUnit:100,minAmount:.01}};function iBe(e){if(!e)return p1.SLE;const t=e.toUpperCase();return t in p1?p1[t]:p1.SLE}function ac(e,t,s){const a=iBe(t),{showSymbol:n=!0,showCode:i=!1,alwaysShowDecimals:o=!0}={};let c=e.toLocaleString(void 0,{minimumFractionDigits:o?a.decimalPlaces:0,maximumFractionDigits:a.decimalPlaces});return n&&(c=`${a.symbol} ${c}`),i&&(c=`${c} ${a.code}`),c}function oBe(){const{businessId:e}=Ui(),t=Ut(),[s,a]=p.useState(null),[n,i]=p.useState(!0),[o,l]=p.useState(!1),[c,d]=p.useState([]),[h,f]=p.useState([]),[x,y]=p.useState({totalRevenue:0,totalTransactions:0,successRate:0,pendingDisputes:0});p.useEffect(()=>{e&&v()},[e]);const v=async()=>{if(e)try{const{data:C,error:E}=await X.from("merchant_businesses").select("*").eq("id",e).single();if(E)throw E;a(C);const{data:_}=await X.from("wallets").select("id").eq("user_id",C.merchant_id).eq("wallet_type","primary").single(),{data:T}=await X.from("transactions").select("*").eq("wallet_id",(_==null?void 0:_.id)||"").order("created_at",{ascending:!1}).limit(5);d(T||[]);const{data:A}=await X.from("disputes").select("*").eq("business_id",e).order("created_at",{ascending:!1}).limit(5);f(A||[]);const{data:P}=await X.from("transactions").select("amount, status").eq("wallet_id",(_==null?void 0:_.id)||"");if(P){const M=P.reduce(($,W)=>$+(W.amount||0),0),R=P.filter($=>$.status==="completed"||$.status==="success").length;y({totalRevenue:M,totalTransactions:P.length,successRate:P.length>0?R/P.length*100:0,pendingDisputes:(A||[]).filter($=>$.status==="pending"||$.status==="open").length})}}catch(C){console.error("Error fetching business data:",C)}finally{i(!1)}},w=C=>{const E={PENDING:{color:"bg-yellow-100 text-yellow-700",icon:r.jsx(_t,{className:"w-3.5 h-3.5"}),label:"Pending"},APPROVED:{color:"bg-green-100 text-green-700",icon:r.jsx(Ae,{className:"w-3.5 h-3.5"}),label:"Approved"},REJECTED:{color:"bg-red-100 text-red-700",icon:r.jsx(Ct,{className:"w-3.5 h-3.5"}),label:"Rejected"},SUSPENDED:{color:"bg-gray-100 text-gray-700",icon:r.jsx(Ht,{className:"w-3.5 h-3.5"}),label:"Suspended"}},_=E[C]||E.PENDING;return r.jsxs("span",{className:`inline-flex items-center gap-1 px-2.5 py-1 rounded-full text-xs font-medium ${_.color}`,children:[_.icon,_.label]})},N=C=>{navigator.clipboard.writeText(C),l(!0),setTimeout(()=>l(!1),2e3)},k=C=>new Date(C).toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"});return n?r.jsx(Jr,{children:r.jsx("div",{className:"flex items-center justify-center py-12",children:r.jsx(Ke,{className:"w-8 h-8 animate-spin text-green-600"})})}):s?r.jsx(Jr,{children:r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsxs("div",{className:"flex items-start gap-4",children:[r.jsx("button",{onClick:()=>t("/merchant/shops"),className:"p-2 hover:bg-gray-100 rounded-lg mt-1",children:r.jsx(Ar,{className:"w-5 h-5 text-gray-600"})}),r.jsxs("div",{className:"flex items-start gap-4",children:[s.logo_url?r.jsx("img",{src:s.logo_url,alt:s.name,className:"w-16 h-16 rounded-xl object-cover"}):r.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-xl flex items-center justify-center",children:r.jsx(mr,{className:"w-8 h-8 text-green-600"})}),r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center gap-3 mb-1",children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:s.name}),w(s.approval_status),r.jsx("span",{className:`text-xs px-2 py-0.5 rounded ${s.is_live_mode?"bg-green-100 text-green-700":"bg-orange-100 text-orange-700"}`,children:s.is_live_mode?"Live":"Test Mode"})]}),r.jsx("p",{className:"text-gray-500",children:s.description||"No description"}),r.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[r.jsx("code",{className:"text-xs bg-gray-100 px-2 py-1 rounded font-mono",children:s.id}),r.jsx("button",{onClick:()=>N(s.id),className:"p-1 hover:bg-gray-100 rounded",title:"Copy Business ID",children:o?r.jsx(Hr,{className:"w-3.5 h-3.5 text-green-600"}):r.jsx(Pr,{className:"w-3.5 h-3.5 text-gray-400"})})]})]})]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs(xt,{to:`/merchant/developer/${s.id}`,className:"px-4 py-2 bg-indigo-100 text-indigo-700 rounded-lg hover:bg-indigo-200 flex items-center gap-2 text-sm font-medium",children:[r.jsx(Pa,{className:"w-4 h-4"}),"Developer"]}),r.jsxs(xt,{to:`/merchant/shops/${s.id}/settings`,className:"px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 flex items-center gap-2 text-sm font-medium",children:[r.jsx(bs,{className:"w-4 h-4"}),"Settings"]})]})]}),r.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:[r.jsx(se,{className:"p-4",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:r.jsx(Cr,{className:"w-5 h-5 text-green-600"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-500",children:"Total Revenue"}),r.jsx("p",{className:"text-xl font-bold text-gray-900",children:ac(x.totalRevenue)})]})]})}),r.jsx(se,{className:"p-4",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:r.jsx(Pl,{className:"w-5 h-5 text-blue-600"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-500",children:"Transactions"}),r.jsx("p",{className:"text-xl font-bold text-gray-900",children:x.totalTransactions})]})]})}),r.jsx(se,{className:"p-4",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"p-2 bg-purple-100 rounded-lg",children:r.jsx(Ts,{className:"w-5 h-5 text-purple-600"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-500",children:"Success Rate"}),r.jsxs("p",{className:"text-xl font-bold text-gray-900",children:[x.successRate.toFixed(1),"%"]})]})]})}),r.jsx(se,{className:"p-4",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"p-2 bg-yellow-100 rounded-lg",children:r.jsx(Ht,{className:"w-5 h-5 text-yellow-600"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-500",children:"Pending Disputes"}),r.jsx("p",{className:"text-xl font-bold text-gray-900",children:x.pendingDisputes})]})]})})]}),r.jsxs("div",{className:"grid sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[r.jsxs(xt,{to:`/merchant/shops/${s.id}/transactions`,className:"p-4 bg-white border border-gray-200 rounded-xl hover:shadow-md transition-shadow flex items-center gap-4",children:[r.jsx("div",{className:"p-3 bg-blue-100 rounded-lg",children:r.jsx(Pl,{className:"w-6 h-6 text-blue-600"})}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-medium text-gray-900",children:"Transactions"}),r.jsx("p",{className:"text-sm text-gray-500",children:"View all payments"})]})]}),r.jsxs(xt,{to:`/merchant/shops/${s.id}/disputes`,className:"p-4 bg-white border border-gray-200 rounded-xl hover:shadow-md transition-shadow flex items-center gap-4",children:[r.jsx("div",{className:"p-3 bg-yellow-100 rounded-lg",children:r.jsx(Ht,{className:"w-6 h-6 text-yellow-600"})}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-medium text-gray-900",children:"Disputes"}),r.jsx("p",{className:"text-sm text-gray-500",children:"Manage customer issues"})]})]}),r.jsxs(xt,{to:`/merchant/developer/${s.id}`,className:"p-4 bg-white border border-gray-200 rounded-xl hover:shadow-md transition-shadow flex items-center gap-4",children:[r.jsx("div",{className:"p-3 bg-indigo-100 rounded-lg",children:r.jsx(Pa,{className:"w-6 h-6 text-indigo-600"})}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-medium text-gray-900",children:"Integration"}),r.jsx("p",{className:"text-sm text-gray-500",children:"API keys & SDK"})]})]}),r.jsxs(xt,{to:`/merchant/shops/${s.id}/settings`,className:"p-4 bg-white border border-gray-200 rounded-xl hover:shadow-md transition-shadow flex items-center gap-4",children:[r.jsx("div",{className:"p-3 bg-gray-100 rounded-lg",children:r.jsx(bs,{className:"w-6 h-6 text-gray-600"})}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-medium text-gray-900",children:"Settings"}),r.jsx("p",{className:"text-sm text-gray-500",children:"Configure shop"})]})]})]}),r.jsxs("div",{className:"grid lg:grid-cols-2 gap-6",children:[r.jsxs(se,{className:"p-0",children:[r.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-100",children:[r.jsx("h2",{className:"font-semibold text-gray-900",children:"Recent Transactions"}),r.jsxs(xt,{to:`/merchant/shops/${s.id}/transactions`,className:"text-sm text-green-600 hover:text-green-700 flex items-center gap-1",children:["View All",r.jsx(da,{className:"w-3.5 h-3.5"})]})]}),r.jsx("div",{className:"divide-y divide-gray-100",children:c.length===0?r.jsxs("div",{className:"p-8 text-center",children:[r.jsx(yx,{className:"w-8 h-8 text-gray-300 mx-auto mb-2"}),r.jsx("p",{className:"text-sm text-gray-500",children:"No transactions yet"})]}):c.map(C=>{var E,_;return r.jsxs("div",{className:"p-4 flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-gray-900",children:((E=C.metadata)==null?void 0:E.payerName)||C.customer_email||"Customer"}),r.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-500",children:[r.jsx("span",{children:k(C.created_at)}),((_=C.metadata)==null?void 0:_.paymentMethod)&&r.jsx("span",{className:"px-1.5 py-0.5 bg-gray-100 rounded",children:C.metadata.paymentMethod==="scan_to_pay"?"QR Scan":C.metadata.paymentMethod==="mobile_money"?"Mobile Money":C.metadata.paymentMethod==="peeap_card"?"Card":C.metadata.paymentMethod})]})]}),r.jsxs("div",{className:"text-right",children:[r.jsx("p",{className:"font-semibold text-gray-900",children:ac(C.amount)}),r.jsx("span",{className:`text-xs px-2 py-0.5 rounded ${C.status==="completed"||C.status==="success"||C.status==="COMPLETED"?"bg-green-100 text-green-700":C.status==="pending"||C.status==="PENDING"?"bg-yellow-100 text-yellow-700":"bg-red-100 text-red-700"}`,children:C.status})]})]},C.id)})})]}),r.jsxs(se,{className:"p-0",children:[r.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-100",children:[r.jsx("h2",{className:"font-semibold text-gray-900",children:"Recent Disputes"}),r.jsxs(xt,{to:`/merchant/shops/${s.id}/disputes`,className:"text-sm text-green-600 hover:text-green-700 flex items-center gap-1",children:["View All",r.jsx(da,{className:"w-3.5 h-3.5"})]})]}),r.jsx("div",{className:"divide-y divide-gray-100",children:h.length===0?r.jsxs("div",{className:"p-8 text-center",children:[r.jsx(Ae,{className:"w-8 h-8 text-green-300 mx-auto mb-2"}),r.jsx("p",{className:"text-sm text-gray-500",children:"No disputes"})]}):h.map(C=>r.jsxs("div",{className:"p-4 flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-gray-900",children:C.reason||"Dispute"}),r.jsx("p",{className:"text-xs text-gray-500",children:k(C.created_at)})]}),r.jsxs("div",{className:"text-right",children:[r.jsx("p",{className:"font-semibold text-gray-900",children:ac(C.amount)}),r.jsx("span",{className:`text-xs px-2 py-0.5 rounded ${C.status==="resolved"||C.status==="closed"?"bg-green-100 text-green-700":C.status==="pending"||C.status==="open"?"bg-yellow-100 text-yellow-700":"bg-red-100 text-red-700"}`,children:C.status})]})]},C.id))})]})]})]})}):r.jsx(Jr,{children:r.jsxs("div",{className:"text-center py-12",children:[r.jsx(mr,{className:"w-12 h-12 text-gray-300 mx-auto mb-4"}),r.jsx("h2",{className:"text-lg font-medium text-gray-900 mb-2",children:"Business not found"}),r.jsx("p",{className:"text-gray-500 mb-4",children:"The business you're looking for doesn't exist or you don't have access."}),r.jsx("button",{onClick:()=>t("/merchant/shops"),className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",children:"Back to My Shops"})]})})}function lBe(){const{businessId:e}=Ui(),t=Ut(),[s,a]=p.useState(null),[n,i]=p.useState([]),[o,l]=p.useState(!0),[c,d]=p.useState(""),[h,f]=p.useState("all"),[x,y]=p.useState("all"),[v,w]=p.useState(!1),[N,k]=p.useState(null),[C,E]=p.useState({total:0,completed:0,pending:0,failed:0,totalAmount:0});p.useEffect(()=>{e&&_()},[e]);const _=async()=>{if(e)try{const{data:R,error:$}=await X.from("merchant_businesses").select("*").eq("id",e).single();if($)throw $;a(R);const{data:W}=await X.from("wallets").select("id").eq("user_id",R.merchant_id).eq("wallet_type","primary").single(),{data:I,error:B}=await X.from("transactions").select("*").eq("wallet_id",(W==null?void 0:W.id)||"").order("created_at",{ascending:!1});if(B)throw B;i(I||[]);const O=I||[];E({total:O.length,completed:O.filter(F=>F.status==="completed"||F.status==="success").length,pending:O.filter(F=>F.status==="pending").length,failed:O.filter(F=>F.status==="failed"||F.status==="cancelled").length,totalAmount:O.reduce((F,q)=>F+(q.amount||0),0)})}catch(R){console.error("Error fetching data:",R)}finally{l(!1)}},T=R=>{const $={completed:{color:"bg-green-100 text-green-700",icon:r.jsx(Ae,{className:"w-3.5 h-3.5"}),label:"Completed"},success:{color:"bg-green-100 text-green-700",icon:r.jsx(Ae,{className:"w-3.5 h-3.5"}),label:"Success"},pending:{color:"bg-yellow-100 text-yellow-700",icon:r.jsx(_t,{className:"w-3.5 h-3.5"}),label:"Pending"},processing:{color:"bg-blue-100 text-blue-700",icon:r.jsx(Ot,{className:"w-3.5 h-3.5"}),label:"Processing"},failed:{color:"bg-red-100 text-red-700",icon:r.jsx(Ct,{className:"w-3.5 h-3.5"}),label:"Failed"},cancelled:{color:"bg-gray-100 text-gray-700",icon:r.jsx(Ct,{className:"w-3.5 h-3.5"}),label:"Cancelled"},refunded:{color:"bg-purple-100 text-purple-700",icon:r.jsx(Ot,{className:"w-3.5 h-3.5"}),label:"Refunded"}},W=$[R]||$.pending;return r.jsxs("span",{className:`inline-flex items-center gap-1 px-2.5 py-1 rounded-full text-xs font-medium ${W.color}`,children:[W.icon,W.label]})},A=R=>new Date(R).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),P=n.filter(R=>{var $,W,I;if(c){const B=c.toLowerCase();if(!(R.id.toLowerCase().includes(B)||(($=R.customer_email)==null?void 0:$.toLowerCase().includes(B))||((W=R.customer_name)==null?void 0:W.toLowerCase().includes(B))||((I=R.reference)==null?void 0:I.toLowerCase().includes(B))))return!1}if(h!=="all"&&R.status!==h)return!1;if(x!=="all"){const B=new Date(R.created_at),O=new Date;if(x==="today"){const F=new Date(O.getFullYear(),O.getMonth(),O.getDate());if(B<F)return!1}else if(x==="week"){const F=new Date(O.getTime()-6048e5);if(B<F)return!1}else if(x==="month"){const F=new Date(O.getTime()-2592e6);if(B<F)return!1}}return!0}),M=()=>{const R=P.map(q=>({ID:q.id,Amount:q.amount,Currency:q.currency||"SLE",Status:q.status,Customer:q.customer_email||q.customer_name||"N/A",Reference:q.reference||"N/A","Payment Method":q.payment_method||"N/A",Date:A(q.created_at)})),$=Object.keys(R[0]||{}).join(","),W=R.map(q=>Object.values(q).join(",")).join(`
`),I=`${$}
${W}`,B=new Blob([I],{type:"text/csv"}),O=URL.createObjectURL(B),F=document.createElement("a");F.href=O,F.download=`transactions-${(s==null?void 0:s.slug)||e}-${new Date().toISOString().split("T")[0]}.csv`,F.click()};return o?r.jsx(Jr,{children:r.jsx("div",{className:"flex items-center justify-center py-12",children:r.jsx(Ke,{className:"w-8 h-8 animate-spin text-green-600"})})}):s?r.jsx(Jr,{children:r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("button",{onClick:()=>t(`/merchant/shops/${e}`),className:"p-2 hover:bg-gray-100 rounded-lg",children:r.jsx(Ar,{className:"w-5 h-5 text-gray-600"})}),r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-500 mb-1",children:[r.jsx(xt,{to:"/merchant/shops",className:"hover:text-green-600",children:"My Shops"}),r.jsx("span",{children:"/"}),r.jsx(xt,{to:`/merchant/shops/${e}`,className:"hover:text-green-600",children:s.name}),r.jsx("span",{children:"/"}),r.jsx("span",{className:"text-gray-900",children:"Transactions"})]}),r.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Transactions"})]})]}),r.jsxs("button",{onClick:M,disabled:P.length===0,className:"px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 flex items-center gap-2 text-sm font-medium disabled:opacity-50 disabled:cursor-not-allowed",children:[r.jsx(gs,{className:"w-4 h-4"}),"Export CSV"]})]}),r.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-5 gap-4",children:[r.jsxs(se,{className:"p-4",children:[r.jsx("div",{className:"text-sm text-gray-500 mb-1",children:"Total Transactions"}),r.jsx("div",{className:"text-2xl font-bold text-gray-900",children:C.total})]}),r.jsxs(se,{className:"p-4",children:[r.jsx("div",{className:"text-sm text-gray-500 mb-1",children:"Completed"}),r.jsx("div",{className:"text-2xl font-bold text-green-600",children:C.completed})]}),r.jsxs(se,{className:"p-4",children:[r.jsx("div",{className:"text-sm text-gray-500 mb-1",children:"Pending"}),r.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:C.pending})]}),r.jsxs(se,{className:"p-4",children:[r.jsx("div",{className:"text-sm text-gray-500 mb-1",children:"Failed"}),r.jsx("div",{className:"text-2xl font-bold text-red-600",children:C.failed})]}),r.jsxs(se,{className:"p-4",children:[r.jsx("div",{className:"text-sm text-gray-500 mb-1",children:"Total Amount"}),r.jsx("div",{className:"text-2xl font-bold text-gray-900",children:ac(C.totalAmount)})]})]}),r.jsx(se,{className:"p-4",children:r.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[r.jsxs("div",{className:"flex-1 relative",children:[r.jsx(Nr,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),r.jsx("input",{type:"text",placeholder:"Search by ID, email, reference...",value:c,onChange:R=>d(R.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent"})]}),r.jsxs("select",{value:h,onChange:R=>f(R.target.value),className:"px-4 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500",children:[r.jsx("option",{value:"all",children:"All Status"}),r.jsx("option",{value:"completed",children:"Completed"}),r.jsx("option",{value:"success",children:"Success"}),r.jsx("option",{value:"pending",children:"Pending"}),r.jsx("option",{value:"processing",children:"Processing"}),r.jsx("option",{value:"failed",children:"Failed"}),r.jsx("option",{value:"cancelled",children:"Cancelled"}),r.jsx("option",{value:"refunded",children:"Refunded"})]}),r.jsxs("select",{value:x,onChange:R=>y(R.target.value),className:"px-4 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500",children:[r.jsx("option",{value:"all",children:"All Time"}),r.jsx("option",{value:"today",children:"Today"}),r.jsx("option",{value:"week",children:"This Week"}),r.jsx("option",{value:"month",children:"This Month"})]})]})}),r.jsx(se,{className:"p-0 overflow-hidden",children:P.length===0?r.jsxs("div",{className:"p-12 text-center",children:[r.jsx(Pl,{className:"w-12 h-12 text-gray-300 mx-auto mb-4"}),r.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No transactions found"}),r.jsx("p",{className:"text-gray-500",children:n.length===0?"This business has no transactions yet.":"No transactions match your filters."})]}):r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Transaction"}),r.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Customer"}),r.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Amount"}),r.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),r.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),r.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),r.jsx("tbody",{className:"divide-y divide-gray-100",children:P.map(R=>r.jsxs("tr",{className:"hover:bg-gray-50",children:[r.jsx("td",{className:"px-4 py-4",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:`p-2 rounded-lg ${R.type==="payout"?"bg-red-100":"bg-green-100"}`,children:R.type==="payout"?r.jsx(Rr,{className:"w-4 h-4 text-red-600"}):r.jsx(An,{className:"w-4 h-4 text-green-600"})}),r.jsxs("div",{children:[r.jsxs("p",{className:"font-medium text-gray-900 font-mono text-sm",children:[R.id.substring(0,8),"..."]}),R.reference&&r.jsxs("p",{className:"text-xs text-gray-500",children:["Ref: ",R.reference]})]})]})}),r.jsxs("td",{className:"px-4 py-4",children:[r.jsx("p",{className:"text-sm text-gray-900",children:R.customer_name||R.customer_email||"N/A"}),R.customer_name&&R.customer_email&&r.jsx("p",{className:"text-xs text-gray-500",children:R.customer_email})]}),r.jsxs("td",{className:"px-4 py-4",children:[r.jsx("p",{className:"font-semibold text-gray-900",children:ac(R.amount,R.currency)}),R.payment_method&&r.jsx("p",{className:"text-xs text-gray-500",children:R.payment_method})]}),r.jsx("td",{className:"px-4 py-4",children:T(R.status)}),r.jsx("td",{className:"px-4 py-4",children:r.jsx("p",{className:"text-sm text-gray-900",children:A(R.created_at)})}),r.jsx("td",{className:"px-4 py-4 text-right",children:r.jsx("button",{onClick:()=>k(R),className:"p-2 hover:bg-gray-100 rounded-lg text-gray-600",title:"View Details",children:r.jsx(ir,{className:"w-4 h-4"})})})]},R.id))})]})})}),N&&r.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",children:r.jsxs("div",{className:"bg-white rounded-xl shadow-xl max-w-lg w-full mx-4 max-h-[90vh] overflow-y-auto",children:[r.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:[r.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Transaction Details"}),r.jsx("button",{onClick:()=>k(null),className:"p-2 hover:bg-gray-100 rounded-lg",children:r.jsx(Ct,{className:"w-5 h-5 text-gray-500"})})]}),r.jsxs("div",{className:"p-4 space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-gray-500",children:"Status"}),T(N.status)]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-gray-500",children:"Amount"}),r.jsx("span",{className:"font-semibold text-gray-900",children:ac(N.amount,N.currency)})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-gray-500",children:"Transaction ID"}),r.jsx("code",{className:"text-sm bg-gray-100 px-2 py-1 rounded font-mono",children:N.id})]}),N.reference&&r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-gray-500",children:"Reference"}),r.jsx("span",{className:"text-gray-900",children:N.reference})]}),N.customer_email&&r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-gray-500",children:"Customer Email"}),r.jsx("span",{className:"text-gray-900",children:N.customer_email})]}),N.customer_name&&r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-gray-500",children:"Customer Name"}),r.jsx("span",{className:"text-gray-900",children:N.customer_name})]}),N.payment_method&&r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-gray-500",children:"Payment Method"}),r.jsx("span",{className:"text-gray-900",children:N.payment_method})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-gray-500",children:"Created"}),r.jsx("span",{className:"text-gray-900",children:A(N.created_at)})]}),N.completed_at&&r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-gray-500",children:"Completed"}),r.jsx("span",{className:"text-gray-900",children:A(N.completed_at)})]}),N.metadata&&Object.keys(N.metadata).length>0&&r.jsxs("div",{children:[r.jsx("span",{className:"text-gray-500 block mb-2",children:"Metadata"}),r.jsx("pre",{className:"text-xs bg-gray-100 p-3 rounded-lg overflow-x-auto",children:JSON.stringify(N.metadata,null,2)})]})]})]})})]})}):r.jsx(Jr,{children:r.jsxs("div",{className:"text-center py-12",children:[r.jsx(mr,{className:"w-12 h-12 text-gray-300 mx-auto mb-4"}),r.jsx("h2",{className:"text-lg font-medium text-gray-900 mb-2",children:"Business not found"}),r.jsx("button",{onClick:()=>t("/merchant/shops"),className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",children:"Back to My Shops"})]})})}function cBe(){const{businessId:e}=Ui(),t=Ut(),[s,a]=p.useState(null),[n,i]=p.useState([]),[o,l]=p.useState(!0),[c,d]=p.useState(""),[h,f]=p.useState("all"),[x,y]=p.useState(null),[v,w]=p.useState(!1),[N,k]=p.useState(""),[C,E]=p.useState(!1),[_,T]=p.useState({total:0,open:0,pending:0,resolved:0,lost:0,totalAmount:0});p.useEffect(()=>{e&&A()},[e]);const A=async()=>{if(e)try{const{data:I,error:B}=await X.from("merchant_businesses").select("*").eq("id",e).single();if(B)throw B;a(I);const{data:O,error:F}=await X.from("disputes").select("*").eq("business_id",e).order("created_at",{ascending:!1});if(F)console.log("Disputes table not available:",F),i([]);else{i(O||[]);const q=O||[];T({total:q.length,open:q.filter(H=>H.status==="open").length,pending:q.filter(H=>H.status==="pending"||H.status==="under_review").length,resolved:q.filter(H=>H.status==="resolved"||H.status==="won").length,lost:q.filter(H=>H.status==="lost"||H.status==="closed").length,totalAmount:q.reduce((H,K)=>H+(K.amount||0),0)})}}catch(I){console.error("Error fetching data:",I)}finally{l(!1)}},P=I=>{const B={open:{color:"bg-red-100 text-red-700",icon:r.jsx(Ht,{className:"w-3.5 h-3.5"}),label:"Open"},pending:{color:"bg-yellow-100 text-yellow-700",icon:r.jsx(_t,{className:"w-3.5 h-3.5"}),label:"Pending"},under_review:{color:"bg-blue-100 text-blue-700",icon:r.jsx(ir,{className:"w-3.5 h-3.5"}),label:"Under Review"},resolved:{color:"bg-green-100 text-green-700",icon:r.jsx(Ae,{className:"w-3.5 h-3.5"}),label:"Resolved"},won:{color:"bg-green-100 text-green-700",icon:r.jsx(Ae,{className:"w-3.5 h-3.5"}),label:"Won"},lost:{color:"bg-gray-100 text-gray-700",icon:r.jsx(Wt,{className:"w-3.5 h-3.5"}),label:"Lost"},closed:{color:"bg-gray-100 text-gray-700",icon:r.jsx(Ct,{className:"w-3.5 h-3.5"}),label:"Closed"}},O=B[I]||B.pending;return r.jsxs("span",{className:`inline-flex items-center gap-1 px-2.5 py-1 rounded-full text-xs font-medium ${O.color}`,children:[O.icon,O.label]})},M=I=>({duplicate:"Duplicate Charge",fraudulent:"Fraudulent Transaction",product_not_received:"Product Not Received",product_unacceptable:"Product Unacceptable",subscription_canceled:"Subscription Canceled",unrecognized:"Unrecognized Charge",credit_not_processed:"Credit Not Processed",general:"General Dispute",other:"Other"})[I]||I,R=I=>new Date(I).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),$=async()=>{if(!(!x||!N.trim())){E(!0);try{const{error:I}=await X.from("disputes").update({merchant_response:N,status:"under_review",updated_at:new Date().toISOString()}).eq("id",x.id);if(I)throw I;await A(),w(!1),k(""),y(null)}catch(I){console.error("Error submitting response:",I),alert("Failed to submit response. Please try again.")}finally{E(!1)}}},W=n.filter(I=>{var B,O,F,q;if(c){const H=c.toLowerCase();if(!(I.id.toLowerCase().includes(H)||((B=I.transaction_id)==null?void 0:B.toLowerCase().includes(H))||((O=I.customer_email)==null?void 0:O.toLowerCase().includes(H))||((F=I.customer_name)==null?void 0:F.toLowerCase().includes(H))||((q=I.reason)==null?void 0:q.toLowerCase().includes(H))))return!1}return!(h!=="all"&&I.status!==h)});return o?r.jsx(Jr,{children:r.jsx("div",{className:"flex items-center justify-center py-12",children:r.jsx(Ke,{className:"w-8 h-8 animate-spin text-green-600"})})}):s?r.jsx(Jr,{children:r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("button",{onClick:()=>t(`/merchant/shops/${e}`),className:"p-2 hover:bg-gray-100 rounded-lg",children:r.jsx(Ar,{className:"w-5 h-5 text-gray-600"})}),r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-500 mb-1",children:[r.jsx(xt,{to:"/merchant/shops",className:"hover:text-green-600",children:"My Shops"}),r.jsx("span",{children:"/"}),r.jsx(xt,{to:`/merchant/shops/${e}`,className:"hover:text-green-600",children:s.name}),r.jsx("span",{children:"/"}),r.jsx("span",{className:"text-gray-900",children:"Disputes"})]}),r.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Disputes"})]})]}),r.jsxs("button",{onClick:A,className:"px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 flex items-center gap-2 text-sm font-medium",children:[r.jsx(Ot,{className:"w-4 h-4"}),"Refresh"]})]}),r.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-6 gap-4",children:[r.jsxs(se,{className:"p-4",children:[r.jsx("div",{className:"text-sm text-gray-500 mb-1",children:"Total Disputes"}),r.jsx("div",{className:"text-2xl font-bold text-gray-900",children:_.total})]}),r.jsxs(se,{className:"p-4",children:[r.jsx("div",{className:"text-sm text-gray-500 mb-1",children:"Open"}),r.jsx("div",{className:"text-2xl font-bold text-red-600",children:_.open})]}),r.jsxs(se,{className:"p-4",children:[r.jsx("div",{className:"text-sm text-gray-500 mb-1",children:"Pending"}),r.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:_.pending})]}),r.jsxs(se,{className:"p-4",children:[r.jsx("div",{className:"text-sm text-gray-500 mb-1",children:"Resolved"}),r.jsx("div",{className:"text-2xl font-bold text-green-600",children:_.resolved})]}),r.jsxs(se,{className:"p-4",children:[r.jsx("div",{className:"text-sm text-gray-500 mb-1",children:"Lost"}),r.jsx("div",{className:"text-2xl font-bold text-gray-600",children:_.lost})]}),r.jsxs(se,{className:"p-4",children:[r.jsx("div",{className:"text-sm text-gray-500 mb-1",children:"Total Amount"}),r.jsx("div",{className:"text-2xl font-bold text-gray-900",children:ac(_.totalAmount)})]})]}),r.jsx(se,{className:"p-4",children:r.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[r.jsxs("div",{className:"flex-1 relative",children:[r.jsx(Nr,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),r.jsx("input",{type:"text",placeholder:"Search by ID, email, reason...",value:c,onChange:I=>d(I.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent"})]}),r.jsxs("select",{value:h,onChange:I=>f(I.target.value),className:"px-4 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500",children:[r.jsx("option",{value:"all",children:"All Status"}),r.jsx("option",{value:"open",children:"Open"}),r.jsx("option",{value:"pending",children:"Pending"}),r.jsx("option",{value:"under_review",children:"Under Review"}),r.jsx("option",{value:"resolved",children:"Resolved"}),r.jsx("option",{value:"won",children:"Won"}),r.jsx("option",{value:"lost",children:"Lost"}),r.jsx("option",{value:"closed",children:"Closed"})]})]})}),r.jsx(se,{className:"p-0 overflow-hidden",children:W.length===0?r.jsxs("div",{className:"p-12 text-center",children:[r.jsx(Ae,{className:"w-12 h-12 text-green-300 mx-auto mb-4"}),r.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:n.length===0?"No disputes":"No disputes match your filters"}),r.jsx("p",{className:"text-gray-500",children:n.length===0?"Great news! This business has no disputes.":"Try adjusting your filters."})]}):r.jsx("div",{className:"divide-y divide-gray-100",children:W.map(I=>r.jsx("div",{className:"p-4 hover:bg-gray-50 cursor-pointer",onClick:()=>y(I),children:r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsxs("div",{className:"flex items-start gap-4",children:[r.jsx("div",{className:`p-2 rounded-lg ${I.status==="open"||I.status==="pending"?"bg-red-100":I.status==="resolved"||I.status==="won"?"bg-green-100":"bg-gray-100"}`,children:r.jsx(Ht,{className:`w-5 h-5 ${I.status==="open"||I.status==="pending"?"text-red-600":I.status==="resolved"||I.status==="won"?"text-green-600":"text-gray-600"}`})}),r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[r.jsx("h3",{className:"font-medium text-gray-900",children:M(I.reason)}),P(I.status)]}),r.jsx("p",{className:"text-sm text-gray-500 mb-2",children:I.description||"No description provided"}),r.jsxs("div",{className:"flex items-center gap-4 text-xs text-gray-500",children:[r.jsxs("span",{children:["ID: ",I.id.substring(0,8),"..."]}),I.customer_email&&r.jsxs("span",{children:["Customer: ",I.customer_email]}),r.jsx("span",{children:R(I.created_at)})]})]})]}),r.jsxs("div",{className:"text-right",children:[r.jsx("p",{className:"font-semibold text-gray-900",children:ac(I.amount,I.currency)}),I.merchant_response&&r.jsxs("span",{className:"text-xs text-green-600 flex items-center gap-1 justify-end mt-1",children:[r.jsx(Tu,{className:"w-3 h-3"}),"Responded"]})]})]})},I.id))})}),x&&!v&&r.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",children:r.jsxs("div",{className:"bg-white rounded-xl shadow-xl max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:[r.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:[r.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Dispute Details"}),r.jsx("button",{onClick:()=>y(null),className:"p-2 hover:bg-gray-100 rounded-lg",children:r.jsx(Ct,{className:"w-5 h-5 text-gray-500"})})]}),r.jsxs("div",{className:"p-4 space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-gray-500",children:"Status"}),P(x.status)]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-gray-500",children:"Reason"}),r.jsx("span",{className:"font-medium text-gray-900",children:M(x.reason)})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-gray-500",children:"Amount"}),r.jsx("span",{className:"font-semibold text-gray-900",children:ac(x.amount,x.currency)})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-gray-500",children:"Dispute ID"}),r.jsx("code",{className:"text-sm bg-gray-100 px-2 py-1 rounded font-mono",children:x.id})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-gray-500",children:"Transaction ID"}),r.jsx("code",{className:"text-sm bg-gray-100 px-2 py-1 rounded font-mono",children:x.transaction_id})]}),x.customer_email&&r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-gray-500",children:"Customer Email"}),r.jsx("span",{className:"text-gray-900",children:x.customer_email})]}),x.customer_name&&r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-gray-500",children:"Customer Name"}),r.jsx("span",{className:"text-gray-900",children:x.customer_name})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-gray-500",children:"Created"}),r.jsx("span",{className:"text-gray-900",children:R(x.created_at)})]}),x.resolved_at&&r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-gray-500",children:"Resolved"}),r.jsx("span",{className:"text-gray-900",children:R(x.resolved_at)})]}),x.description&&r.jsxs("div",{children:[r.jsx("span",{className:"text-gray-500 block mb-2",children:"Description"}),r.jsx("p",{className:"text-gray-900 bg-gray-50 p-3 rounded-lg",children:x.description})]}),x.merchant_response&&r.jsxs("div",{children:[r.jsx("span",{className:"text-gray-500 block mb-2",children:"Your Response"}),r.jsx("p",{className:"text-gray-900 bg-green-50 p-3 rounded-lg border border-green-200",children:x.merchant_response})]}),x.resolution&&r.jsxs("div",{children:[r.jsx("span",{className:"text-gray-500 block mb-2",children:"Resolution"}),r.jsx("p",{className:"text-gray-900 bg-blue-50 p-3 rounded-lg border border-blue-200",children:x.resolution})]}),(x.status==="open"||x.status==="pending")&&!x.merchant_response&&r.jsx("div",{className:"flex gap-3 pt-4 border-t border-gray-200",children:r.jsxs("button",{onClick:()=>w(!0),className:"flex-1 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 flex items-center justify-center gap-2",children:[r.jsx(Tu,{className:"w-4 h-4"}),"Submit Response"]})})]})]})}),v&&x&&r.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",children:r.jsxs("div",{className:"bg-white rounded-xl shadow-xl max-w-lg w-full mx-4",children:[r.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:[r.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Submit Response"}),r.jsx("button",{onClick:()=>{w(!1),k("")},className:"p-2 hover:bg-gray-100 rounded-lg",children:r.jsx(Ct,{className:"w-5 h-5 text-gray-500"})})]}),r.jsxs("div",{className:"p-4 space-y-4",children:[r.jsxs("div",{className:"bg-gray-50 p-3 rounded-lg",children:[r.jsxs("p",{className:"text-sm text-gray-500 mb-1",children:["Dispute: ",M(x.reason)]}),r.jsx("p",{className:"font-semibold text-gray-900",children:ac(x.amount,x.currency)})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Your Response"}),r.jsx("textarea",{value:N,onChange:I=>k(I.target.value),placeholder:"Explain why this dispute should be resolved in your favor. Include any relevant details about the transaction, delivery confirmation, or communication with the customer.",rows:5,className:"w-full px-3 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500 resize-none"})]}),r.jsxs("div",{className:"bg-yellow-50 p-3 rounded-lg text-sm text-yellow-800",children:[r.jsx("strong",{children:"Note:"})," Once submitted, your response will be reviewed by our team. Provide as much detail as possible to support your case."]}),r.jsxs("div",{className:"flex gap-3",children:[r.jsx("button",{onClick:()=>{w(!1),k("")},className:"flex-1 px-4 py-2 border border-gray-200 text-gray-700 rounded-lg hover:bg-gray-50",children:"Cancel"}),r.jsx("button",{onClick:$,disabled:!N.trim()||C,className:"flex-1 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:C?r.jsxs(r.Fragment,{children:[r.jsx(Ke,{className:"w-4 h-4 animate-spin"}),"Submitting..."]}):r.jsxs(r.Fragment,{children:[r.jsx(Tn,{className:"w-4 h-4"}),"Submit Response"]})})]})]})]})})]})}):r.jsx(Jr,{children:r.jsxs("div",{className:"text-center py-12",children:[r.jsx(mr,{className:"w-12 h-12 text-gray-300 mx-auto mb-4"}),r.jsx("h2",{className:"text-lg font-medium text-gray-900 mb-2",children:"Business not found"}),r.jsx("button",{onClick:()=>t("/merchant/shops"),className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",children:"Back to My Shops"})]})})}function dBe(){const{businessId:e}=Ui(),t=Ut(),[s,a]=p.useState(null),[n,i]=p.useState(!0),[o,l]=p.useState(!1),[c,d]=p.useState(!1),[h,f]=p.useState({name:"",slug:"",description:"",website_url:"",contact_email:"",contact_phone:"",address:"",logo_url:"",callback_url:"",webhook_url:"",is_live_mode:!1}),[x,y]=p.useState(!1),[v,w]=p.useState("");p.useEffect(()=>{e&&N()},[e]);const N=async()=>{if(e)try{const{data:T,error:A}=await X.from("merchant_businesses").select("*").eq("id",e).single();if(A)throw A;a(T),f({name:T.name||"",slug:T.slug||"",description:T.description||"",website_url:T.website_url||"",contact_email:T.contact_email||"",contact_phone:T.contact_phone||"",address:T.address||"",logo_url:T.logo_url||"",callback_url:T.callback_url||"",webhook_url:T.webhook_url||"",is_live_mode:T.is_live_mode||!1})}catch(T){console.error("Error fetching business:",T)}finally{i(!1)}},k=async()=>{if(e){l(!0);try{const{error:T}=await X.from("merchant_businesses").update({name:h.name,description:h.description,website_url:h.website_url,contact_email:h.contact_email,contact_phone:h.contact_phone,address:h.address,logo_url:h.logo_url,callback_url:h.callback_url,webhook_url:h.webhook_url,updated_at:new Date().toISOString()}).eq("id",e);if(T)throw T;w("Settings saved successfully!"),setTimeout(()=>w(""),3e3)}catch(T){console.error("Error saving settings:",T),alert("Failed to save settings. Please try again.")}finally{l(!1)}}},C=async()=>{if(!(!e||!c))try{const{error:T}=await X.from("merchant_businesses").delete().eq("id",e);if(T)throw T;t("/merchant/shops")}catch(T){console.error("Error deleting business:",T),alert("Failed to delete business. Please try again.")}},E=async()=>{if(!e)return;const T=`pk_${s!=null&&s.is_live_mode?"live":"test"}_${crypto.randomUUID().replace(/-/g,"")}`;try{const{error:A}=await X.from("merchant_businesses").update({api_key:T,updated_at:new Date().toISOString()}).eq("id",e);if(A)throw A;a(P=>P?{...P,api_key:T}:null),w("API key regenerated successfully!"),setTimeout(()=>w(""),3e3)}catch(A){console.error("Error regenerating API key:",A),alert("Failed to regenerate API key. Please try again.")}},_=T=>{const A={PENDING:{color:"bg-yellow-100 text-yellow-700",icon:r.jsx(Ht,{className:"w-3.5 h-3.5"}),label:"Pending Approval"},APPROVED:{color:"bg-green-100 text-green-700",icon:r.jsx(Ae,{className:"w-3.5 h-3.5"}),label:"Approved"},REJECTED:{color:"bg-red-100 text-red-700",icon:r.jsx(Ht,{className:"w-3.5 h-3.5"}),label:"Rejected"},SUSPENDED:{color:"bg-gray-100 text-gray-700",icon:r.jsx(Ht,{className:"w-3.5 h-3.5"}),label:"Suspended"}},P=A[T]||A.PENDING;return r.jsxs("span",{className:`inline-flex items-center gap-1 px-2.5 py-1 rounded-full text-xs font-medium ${P.color}`,children:[P.icon,P.label]})};return n?r.jsx(Jr,{children:r.jsx("div",{className:"flex items-center justify-center py-12",children:r.jsx(Ke,{className:"w-8 h-8 animate-spin text-green-600"})})}):s?r.jsx(Jr,{children:r.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("button",{onClick:()=>t(`/merchant/shops/${e}`),className:"p-2 hover:bg-gray-100 rounded-lg",children:r.jsx(Ar,{className:"w-5 h-5 text-gray-600"})}),r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-500 mb-1",children:[r.jsx(xt,{to:"/merchant/shops",className:"hover:text-green-600",children:"My Shops"}),r.jsx("span",{children:"/"}),r.jsx(xt,{to:`/merchant/shops/${e}`,className:"hover:text-green-600",children:s.name}),r.jsx("span",{children:"/"}),r.jsx("span",{className:"text-gray-900",children:"Settings"})]}),r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Shop Settings"}),_(s.approval_status)]})]})]}),r.jsx("button",{onClick:k,disabled:o,className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 flex items-center gap-2 disabled:opacity-50",children:o?r.jsxs(r.Fragment,{children:[r.jsx(Ke,{className:"w-4 h-4 animate-spin"}),"Saving..."]}):r.jsxs(r.Fragment,{children:[r.jsx(Pn,{className:"w-4 h-4"}),"Save Changes"]})})]}),v&&r.jsxs("div",{className:"bg-green-50 border border-green-200 text-green-700 px-4 py-3 rounded-lg flex items-center gap-2",children:[r.jsx(Ae,{className:"w-5 h-5"}),v]}),r.jsxs(se,{className:"p-6",children:[r.jsxs("h2",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[r.jsx(mr,{className:"w-5 h-5"}),"Basic Information"]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Business Name"}),r.jsx("input",{type:"text",value:h.name,onChange:T=>f({...h,name:T.target.value}),className:"w-full px-3 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Slug (URL identifier)"}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-gray-500",children:"pay.peeap.com/"}),r.jsx("input",{type:"text",value:h.slug,disabled:!0,className:"flex-1 px-3 py-2 bg-gray-50 border border-gray-200 rounded-lg text-gray-500"})]}),r.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Slug cannot be changed after creation"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),r.jsx("textarea",{value:h.description,onChange:T=>f({...h,description:T.target.value}),rows:3,className:"w-full px-3 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500 resize-none"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Logo URL"}),r.jsxs("div",{className:"flex items-center gap-4",children:[h.logo_url&&r.jsx("img",{src:h.logo_url,alt:"Logo",className:"w-16 h-16 rounded-lg object-cover border border-gray-200"}),r.jsx("input",{type:"url",value:h.logo_url,onChange:T=>f({...h,logo_url:T.target.value}),placeholder:"https://example.com/logo.png",className:"flex-1 px-3 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500"})]})]})]})]}),r.jsxs(se,{className:"p-6",children:[r.jsxs("h2",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[r.jsx(On,{className:"w-5 h-5"}),"Contact Information"]}),r.jsxs("div",{className:"grid sm:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[r.jsx(Oi,{className:"w-4 h-4 inline mr-1"}),"Website"]}),r.jsx("input",{type:"url",value:h.website_url,onChange:T=>f({...h,website_url:T.target.value}),placeholder:"https://example.com",className:"w-full px-3 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500"})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[r.jsx(On,{className:"w-4 h-4 inline mr-1"}),"Email"]}),r.jsx("input",{type:"email",value:h.contact_email,onChange:T=>f({...h,contact_email:T.target.value}),placeholder:"contact@example.com",className:"w-full px-3 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500"})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[r.jsx(Ss,{className:"w-4 h-4 inline mr-1"}),"Phone"]}),r.jsx("input",{type:"tel",value:h.contact_phone,onChange:T=>f({...h,contact_phone:T.target.value}),placeholder:"+232 76 123456",className:"w-full px-3 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500"})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[r.jsx(Vi,{className:"w-4 h-4 inline mr-1"}),"Address"]}),r.jsx("input",{type:"text",value:h.address,onChange:T=>f({...h,address:T.target.value}),placeholder:"123 Main St, Freetown",className:"w-full px-3 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500"})]})]})]}),r.jsxs(se,{className:"p-6",children:[r.jsxs("h2",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[r.jsx(mc,{className:"w-5 h-5"}),"API & Integration"]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Business ID"}),r.jsx("div",{className:"flex items-center gap-2",children:r.jsx("input",{type:"text",value:s.id,disabled:!0,className:"flex-1 px-3 py-2 bg-gray-50 border border-gray-200 rounded-lg font-mono text-sm"})})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"API Key"}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("input",{type:x?"text":"password",value:s.api_key||"Not generated",disabled:!0,className:"flex-1 px-3 py-2 bg-gray-50 border border-gray-200 rounded-lg font-mono text-sm"}),r.jsx("button",{onClick:()=>y(!x),className:"p-2 hover:bg-gray-100 rounded-lg",title:x?"Hide":"Show",children:x?r.jsx(Dn,{className:"w-4 h-4"}):r.jsx(ir,{className:"w-4 h-4"})}),r.jsx("button",{onClick:E,className:"p-2 hover:bg-gray-100 rounded-lg text-yellow-600",title:"Regenerate API Key",children:r.jsx(Ot,{className:"w-4 h-4"})})]}),r.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Keep your API key secret. Regenerating will invalidate the old key."})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[r.jsx(Kp,{className:"w-4 h-4 inline mr-1"}),"Callback URL"]}),r.jsx("input",{type:"url",value:h.callback_url,onChange:T=>f({...h,callback_url:T.target.value}),placeholder:"https://yoursite.com/payment/callback",className:"w-full px-3 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500"}),r.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Users will be redirected here after payment"})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[r.jsx(Lr,{className:"w-4 h-4 inline mr-1"}),"Webhook URL"]}),r.jsx("input",{type:"url",value:h.webhook_url,onChange:T=>f({...h,webhook_url:T.target.value}),placeholder:"https://yoursite.com/webhooks/peeap",className:"w-full px-3 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500"}),r.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"We'll send payment notifications to this URL"})]})]})]}),r.jsxs(se,{className:"p-6",children:[r.jsxs("h2",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[r.jsx(rr,{className:"w-5 h-5"}),"Environment Mode"]}),r.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"font-medium text-gray-900",children:h.is_live_mode?"Live Mode":"Test Mode"}),r.jsx("p",{className:"text-sm text-gray-500",children:h.is_live_mode?"Processing real transactions with real money.":"Testing mode - no real transactions are processed."})]}),r.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${h.is_live_mode?"bg-green-100 text-green-700":"bg-orange-100 text-orange-700"}`,children:h.is_live_mode?"Live":"Test"})]}),r.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Mode can only be changed from the Developer Portal when your business is approved."})]}),r.jsxs(se,{className:"p-6 border-red-200",children:[r.jsxs("h2",{className:"text-lg font-semibold text-red-600 mb-4 flex items-center gap-2",children:[r.jsx(Ht,{className:"w-5 h-5"}),"Danger Zone"]}),r.jsx("div",{className:"space-y-4",children:r.jsxs("div",{className:"flex items-center justify-between p-4 bg-red-50 rounded-lg",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"font-medium text-red-900",children:"Delete Business"}),r.jsx("p",{className:"text-sm text-red-700",children:"This action cannot be undone. All transactions and data will be permanently deleted."})]}),c?r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("button",{onClick:()=>d(!1),className:"px-4 py-2 border border-gray-200 text-gray-700 rounded-lg hover:bg-gray-50",children:"Cancel"}),r.jsx("button",{onClick:C,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700",children:"Confirm Delete"})]}):r.jsxs("button",{onClick:()=>d(!0),className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 flex items-center gap-2",children:[r.jsx(Js,{className:"w-4 h-4"}),"Delete"]})]})})]})]})}):r.jsx(Jr,{children:r.jsxs("div",{className:"text-center py-12",children:[r.jsx(mr,{className:"w-12 h-12 text-gray-300 mx-auto mb-4"}),r.jsx("h2",{className:"text-lg font-medium text-gray-900 mb-2",children:"Business not found"}),r.jsx("button",{onClick:()=>t("/merchant/shops"),className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",children:"Back to My Shops"})]})})}const uBe=[{id:"TKT-M001",subject:"Settlement delay question",status:"resolved",createdAt:"2024-01-10",lastReply:"2024-01-11"},{id:"TKT-M002",subject:"API integration help needed",status:"in_progress",createdAt:"2024-01-14",lastReply:"2024-01-14"}],xC={open:"bg-yellow-100 text-yellow-800",in_progress:"bg-blue-100 text-blue-800",resolved:"bg-green-100 text-green-800",closed:"bg-gray-100 text-gray-800"},hBe={open:dt,in_progress:_t,resolved:Ae,closed:Tu};function mBe(){const[e]=p.useState(uBe),[t,s]=p.useState(!1),[a,n]=p.useState(""),[i,o]=p.useState(""),l=c=>{c.preventDefault(),s(!1),n(""),o("")};return r.jsx(Jr,{children:r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Support"}),r.jsx("p",{className:"text-gray-500 mt-1",children:"Get help with your merchant account"})]}),r.jsxs(Oe,{onClick:()=>s(!0),children:[r.jsx(sr,{className:"w-4 h-4 mr-2"}),"New Ticket"]})]}),t&&r.jsxs(se,{children:[r.jsx(pa,{children:r.jsx(ya,{children:"Create Support Ticket"})}),r.jsxs("form",{onSubmit:l,className:"p-6 space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Subject"}),r.jsx("input",{type:"text",value:a,onChange:c=>n(c.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"Brief description of your issue"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Category"}),r.jsxs("select",{className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",children:[r.jsx("option",{children:"Payments & Transactions"}),r.jsx("option",{children:"Settlements & Payouts"}),r.jsx("option",{children:"API & Integration"}),r.jsx("option",{children:"Account Settings"}),r.jsx("option",{children:"Other"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Message"}),r.jsx("textarea",{value:i,onChange:c=>o(c.target.value),rows:5,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"Describe your issue in detail..."})]}),r.jsxs("div",{className:"flex gap-3",children:[r.jsx(Oe,{type:"button",variant:"outline",onClick:()=>s(!1),children:"Cancel"}),r.jsxs(Oe,{type:"submit",disabled:!a.trim()||!i.trim(),children:[r.jsx(Tn,{className:"w-4 h-4 mr-2"}),"Submit Ticket"]})]})]})]}),r.jsxs(se,{children:[r.jsx(pa,{children:r.jsx(ya,{children:"Your Tickets"})}),e.length===0?r.jsxs("div",{className:"p-8 text-center",children:[r.jsx(Tu,{className:"w-12 h-12 text-gray-300 mx-auto mb-4"}),r.jsx("p",{className:"text-gray-500",children:"No support tickets yet"}),r.jsx(Oe,{className:"mt-4",onClick:()=>s(!0),children:"Create Your First Ticket"})]}):r.jsx("div",{className:"divide-y divide-gray-200",children:e.map(c=>{const d=hBe[c.status];return r.jsx("div",{className:"p-4 hover:bg-gray-50 cursor-pointer",children:r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx("div",{className:`p-2 rounded-lg ${xC[c.status].replace("text-","bg-").replace("800","100")}`,children:r.jsx(d,{className:`w-5 h-5 ${xC[c.status].split(" ")[1]}`})}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-gray-900",children:c.subject}),r.jsx("p",{className:"text-sm text-gray-500",children:c.id})]})]}),r.jsxs("div",{className:"text-right",children:[r.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${xC[c.status]}`,children:c.status.replace("_"," ")}),r.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:["Last reply: ",c.lastReply]})]})]})},c.id)})})]}),r.jsxs(se,{className:"p-6",children:[r.jsx("h3",{className:"font-medium text-gray-900 mb-4",children:"Need immediate help?"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[r.jsx("p",{className:"font-medium text-gray-900",children:"Email"}),r.jsx("p",{className:"text-gray-500",children:"merchant-support@peeap.com"})]}),r.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[r.jsx("p",{className:"font-medium text-gray-900",children:"Phone"}),r.jsx("p",{className:"text-gray-500",children:"+232 76 000000"})]})]})]})]})})}const fBe={transaction_received:Aa,transaction_sent:Rr,payment_received:Cr,payment_failed:Ht,order_received:Ky,payout_completed:lt,system:bs,login:Lr},y1={transaction_received:"bg-green-100 dark:bg-green-900/30 text-green-600 dark:text-green-400",transaction_sent:"bg-blue-100 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400",payment_received:"bg-emerald-100 dark:bg-emerald-900/30 text-emerald-600 dark:text-emerald-400",payment_failed:"bg-red-100 dark:bg-red-900/30 text-red-600 dark:text-red-400",order_received:"bg-purple-100 dark:bg-purple-900/30 text-purple-600 dark:text-purple-400",payout_completed:"bg-cyan-100 dark:bg-cyan-900/30 text-cyan-600 dark:text-cyan-400",system:"bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-400",login:"bg-yellow-100 dark:bg-yellow-900/30 text-yellow-600 dark:text-yellow-400"};function xBe(){const{user:e}=pt(),[t,s]=p.useState([]),[a,n]=p.useState(!0),[i,o]=p.useState([]),[l,c]=p.useState({type:"",read:"",search:""}),[d,h]=p.useState({total:0,unread:0,transactions:0,payments:0}),[f,x]=p.useState(null);p.useEffect(()=>{if(e!=null&&e.id){y();const A=X.channel("merchant_notifications_realtime").on("postgres_changes",{event:"*",schema:"public",table:"user_notifications",filter:`user_id=eq.${e.id}`},()=>{y()}).subscribe();return()=>{X.removeChannel(A)}}},[e==null?void 0:e.id,l.type,l.read]);const y=async()=>{if(e!=null&&e.id){n(!0);try{let A=X.from("user_notifications").select("*").eq("user_id",e.id).order("created_at",{ascending:!1});l.type&&(A=A.eq("type",l.type)),l.read==="read"?A=A.eq("read",!0):l.read==="unread"&&(A=A.eq("read",!1));const{data:P,error:M}=await A;if(M)console.error("Error fetching notifications:",M),s([]);else{let R=P||[];if(l.search){const W=l.search.toLowerCase();R=R.filter(I=>I.title.toLowerCase().includes(W)||I.message.toLowerCase().includes(W))}s(R);const $=P||[];h({total:$.length,unread:$.filter(W=>!W.read).length,transactions:$.filter(W=>W.type.includes("transaction")).length,payments:$.filter(W=>W.type.includes("payment")).length})}}catch(A){console.error("Error:",A)}finally{n(!1)}}},v=async A=>{const{error:P}=await X.from("user_notifications").update({read:!0}).eq("id",A);P||(s(M=>M.map(R=>R.id===A?{...R,read:!0}:R)),h(M=>({...M,unread:Math.max(0,M.unread-1)})))},w=async()=>{if(!(e!=null&&e.id))return;const{error:A}=await X.from("user_notifications").update({read:!0}).eq("user_id",e.id).eq("read",!1);A||(s(P=>P.map(M=>({...M,read:!0}))),h(P=>({...P,unread:0})))},N=async A=>{const{error:P}=await X.from("user_notifications").delete().eq("id",A);P||(s(M=>M.filter(R=>R.id!==A)),h(M=>({...M,total:M.total-1})))},k=async()=>{if(i.length===0)return;const{error:A}=await X.from("user_notifications").update({read:!0}).in("id",i);A||(y(),o([]))},C=async()=>{if(i.length===0)return;const{error:A}=await X.from("user_notifications").delete().in("id",i);A||(y(),o([]))},E=A=>{A.read||v(A.id),x(A)},_=A=>{o(P=>P.includes(A)?P.filter(M=>M!==A):[...P,A])},T=A=>{const P=fBe[A]||Lr;return r.jsx(P,{className:"w-5 h-5"})};return r.jsxs(Jr,{children:[r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Notifications"}),r.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Stay updated on your business activity"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs("button",{onClick:y,className:"px-3 py-2 text-sm bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 flex items-center gap-2",children:[r.jsx(Ot,{className:"w-4 h-4"}),"Refresh"]}),d.unread>0&&r.jsxs("button",{onClick:w,className:"px-3 py-2 text-sm bg-primary-600 text-white rounded-lg hover:bg-primary-700 flex items-center gap-2",children:[r.jsx(Th,{className:"w-4 h-4"}),"Mark All Read"]})]})]}),r.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[r.jsx(Be,{className:"p-4",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-900/30 rounded-lg",children:r.jsx(Lr,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:d.total}),r.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Total"})]})]})}),r.jsx(Be,{className:"p-4",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"p-2 bg-yellow-100 dark:bg-yellow-900/30 rounded-lg",children:r.jsx(ir,{className:"w-5 h-5 text-yellow-600 dark:text-yellow-400"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:d.unread}),r.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Unread"})]})]})}),r.jsx(Be,{className:"p-4",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"p-2 bg-green-100 dark:bg-green-900/30 rounded-lg",children:r.jsx(Cr,{className:"w-5 h-5 text-green-600 dark:text-green-400"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:d.payments}),r.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Payments"})]})]})}),r.jsx(Be,{className:"p-4",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"p-2 bg-purple-100 dark:bg-purple-900/30 rounded-lg",children:r.jsx(lt,{className:"w-5 h-5 text-purple-600 dark:text-purple-400"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:d.transactions}),r.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Transactions"})]})]})})]}),r.jsx(Be,{className:"p-4",children:r.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[r.jsx("div",{className:"flex-1",children:r.jsxs("div",{className:"relative",children:[r.jsx(Nr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),r.jsx("input",{type:"text",placeholder:"Search notifications...",value:l.search,onChange:A=>c(P=>({...P,search:A.target.value})),className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-primary-500"})]})}),r.jsxs("div",{className:"flex gap-2",children:[r.jsxs("select",{value:l.type,onChange:A=>c(P=>({...P,type:A.target.value})),className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white text-sm",children:[r.jsx("option",{value:"",children:"All Types"}),r.jsx("option",{value:"transaction_received",children:"Received"}),r.jsx("option",{value:"transaction_sent",children:"Sent"}),r.jsx("option",{value:"payment_received",children:"Payment"}),r.jsx("option",{value:"payment_failed",children:"Failed"}),r.jsx("option",{value:"payout_completed",children:"Payout"}),r.jsx("option",{value:"system",children:"System"})]}),r.jsxs("select",{value:l.read,onChange:A=>c(P=>({...P,read:A.target.value})),className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white text-sm",children:[r.jsx("option",{value:"",children:"All"}),r.jsx("option",{value:"unread",children:"Unread"}),r.jsx("option",{value:"read",children:"Read"})]})]})]})}),i.length>0&&r.jsxs("div",{className:"flex items-center gap-4 p-3 bg-primary-50 dark:bg-primary-900/20 rounded-lg",children:[r.jsxs("span",{className:"text-sm text-primary-700 dark:text-primary-300",children:[i.length," selected"]}),r.jsx("button",{onClick:k,className:"px-3 py-1.5 text-sm bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-300 rounded border border-gray-300 dark:border-gray-600 hover:bg-gray-50 dark:hover:bg-gray-700",children:"Mark as Read"}),r.jsx("button",{onClick:C,className:"px-3 py-1.5 text-sm bg-red-600 text-white rounded hover:bg-red-700",children:"Delete"}),r.jsx("button",{onClick:()=>o([]),className:"px-3 py-1.5 text-sm text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200",children:"Cancel"})]}),r.jsx(Be,{className:"overflow-hidden",children:a?r.jsxs("div",{className:"p-12 text-center",children:[r.jsx("div",{className:"w-8 h-8 border-2 border-primary-500 border-t-transparent rounded-full animate-spin mx-auto mb-3"}),r.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Loading notifications..."})]}):t.length===0?r.jsxs("div",{className:"p-12 text-center",children:[r.jsx(Lr,{className:"w-12 h-12 text-gray-300 dark:text-gray-600 mx-auto mb-3"}),r.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"No notifications yet"}),r.jsx("p",{className:"text-sm text-gray-400 dark:text-gray-500 mt-1",children:"You'll be notified when there's activity on your account"})]}):r.jsx("div",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:t.map(A=>r.jsx("div",{className:fe("p-4 hover:bg-gray-50 dark:hover:bg-gray-800/50 transition-colors cursor-pointer",!A.read&&"bg-blue-50/50 dark:bg-blue-900/10"),onClick:()=>E(A),children:r.jsxs("div",{className:"flex items-start gap-4",children:[r.jsx("input",{type:"checkbox",checked:i.includes(A.id),onChange:P=>{P.stopPropagation(),_(A.id)},onClick:P=>P.stopPropagation(),className:"mt-1 rounded border-gray-300 dark:border-gray-600"}),r.jsx("div",{className:fe("p-2 rounded-lg",y1[A.type]||y1.system),children:T(A.type)}),r.jsx("div",{className:"flex-1 min-w-0",children:r.jsxs("div",{className:"flex items-start justify-between gap-2",children:[r.jsxs("div",{children:[r.jsx("p",{className:fe("text-sm",A.read?"text-gray-700 dark:text-gray-300":"font-medium text-gray-900 dark:text-white"),children:A.title}),r.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-0.5",children:A.message})]}),r.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[r.jsx("span",{className:"text-xs text-gray-400 dark:text-gray-500",children:bx(new Date(A.created_at),{addSuffix:!0})}),r.jsx("button",{onClick:P=>{P.stopPropagation(),N(A.id)},className:"p-1 text-gray-400 hover:text-red-600 dark:hover:text-red-400 rounded",children:r.jsx(Js,{className:"w-4 h-4"})})]})]})})]})},A.id))})})]}),f&&r.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:r.jsxs("div",{className:"flex min-h-full items-center justify-center p-4",children:[r.jsx("div",{className:"fixed inset-0 bg-black/50 transition-opacity",onClick:()=>x(null)}),r.jsxs("div",{className:"relative bg-white dark:bg-gray-800 rounded-xl shadow-xl max-w-lg w-full",children:[r.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b border-gray-200 dark:border-gray-700",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:fe("p-2 rounded-lg",y1[f.type]||y1.system),children:T(f.type)}),r.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:f.title})]}),r.jsx("button",{onClick:()=>x(null),className:"p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg",children:r.jsx(Ct,{className:"w-5 h-5"})})]}),r.jsxs("div",{className:"px-6 py-4",children:[r.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:f.message}),f.metadata&&Object.keys(f.metadata).length>0&&r.jsx("div",{className:"mt-4 p-3 bg-gray-50 dark:bg-gray-900 rounded-lg",children:Object.entries(f.metadata).map(([A,P])=>r.jsxs("div",{className:"flex justify-between text-sm py-1",children:[r.jsx("span",{className:"text-gray-500 dark:text-gray-400 capitalize",children:A.replace(/_/g," ")}),r.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:String(P)})]},A))}),r.jsxs("div",{className:"mt-4 flex items-center gap-2 text-sm text-gray-500 dark:text-gray-400",children:[r.jsx(_t,{className:"w-4 h-4"}),nf(new Date(f.created_at),"MMM d, yyyy h:mm a")]})]}),r.jsxs("div",{className:"flex justify-end gap-2 px-6 py-4 border-t border-gray-200 dark:border-gray-700",children:[r.jsx("button",{onClick:()=>{N(f.id),x(null)},className:"px-4 py-2 text-sm text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg",children:"Delete"}),r.jsx("button",{onClick:()=>x(null),className:"px-4 py-2 text-sm bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600",children:"Close"})]})]})]})})]})}const gBe={transaction_received:Aa,transaction_sent:Rr,deposit_completed:Rt,withdrawal_completed:Cr,payment_failed:Ht,card_activated:lt,cashback_earned:Lg,system:bs,login:Lr,security:Ht},b1={transaction_received:"bg-green-100 dark:bg-green-900/30 text-green-600 dark:text-green-400",transaction_sent:"bg-blue-100 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400",deposit_completed:"bg-emerald-100 dark:bg-emerald-900/30 text-emerald-600 dark:text-emerald-400",withdrawal_completed:"bg-cyan-100 dark:bg-cyan-900/30 text-cyan-600 dark:text-cyan-400",payment_failed:"bg-red-100 dark:bg-red-900/30 text-red-600 dark:text-red-400",card_activated:"bg-purple-100 dark:bg-purple-900/30 text-purple-600 dark:text-purple-400",cashback_earned:"bg-amber-100 dark:bg-amber-900/30 text-amber-600 dark:text-amber-400",system:"bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-400",login:"bg-yellow-100 dark:bg-yellow-900/30 text-yellow-600 dark:text-yellow-400",security:"bg-red-100 dark:bg-red-900/30 text-red-600 dark:text-red-400"};function pBe(){const{user:e}=pt(),[t,s]=p.useState([]),[a,n]=p.useState(!0),[i,o]=p.useState([]),[l,c]=p.useState({type:"",read:"",search:""}),[d,h]=p.useState({total:0,unread:0,transfers:0,security:0}),[f,x]=p.useState(null);p.useEffect(()=>{if(e!=null&&e.id){y();const T=X.channel("user_notifications_realtime").on("postgres_changes",{event:"*",schema:"public",table:"user_notifications",filter:`user_id=eq.${e.id}`},()=>{y()}).subscribe();return()=>{X.removeChannel(T)}}},[e==null?void 0:e.id,l.type,l.read]);const y=async()=>{if(e!=null&&e.id){n(!0);try{let T=X.from("user_notifications").select("*").eq("user_id",e.id).order("created_at",{ascending:!1});l.type&&(T=T.eq("type",l.type)),l.read==="read"?T=T.eq("read",!0):l.read==="unread"&&(T=T.eq("read",!1));const{data:A,error:P}=await T;if(P)console.error("Error fetching notifications:",P),s([]);else{let M=A||[];if(l.search){const $=l.search.toLowerCase();M=M.filter(W=>W.title.toLowerCase().includes($)||W.message.toLowerCase().includes($))}s(M);const R=A||[];h({total:R.length,unread:R.filter($=>!$.read).length,transfers:R.filter($=>$.type.includes("transaction")).length,security:R.filter($=>$.type==="security"||$.type==="login").length})}}catch(T){console.error("Error:",T)}finally{n(!1)}}},v=async T=>{const{error:A}=await X.from("user_notifications").update({read:!0}).eq("id",T);A||(s(P=>P.map(M=>M.id===T?{...M,read:!0}:M)),h(P=>({...P,unread:Math.max(0,P.unread-1)})))},w=async()=>{if(!(e!=null&&e.id))return;const{error:T}=await X.from("user_notifications").update({read:!0}).eq("user_id",e.id).eq("read",!1);T||(s(A=>A.map(P=>({...P,read:!0}))),h(A=>({...A,unread:0})))},N=async T=>{const{error:A}=await X.from("user_notifications").delete().eq("id",T);A||(s(P=>P.filter(M=>M.id!==T)),h(P=>({...P,total:P.total-1})))},k=async()=>{if(i.length===0)return;const{error:T}=await X.from("user_notifications").delete().in("id",i);T||(y(),o([]))},C=T=>{T.read||v(T.id),x(T)},E=T=>{o(A=>A.includes(T)?A.filter(P=>P!==T):[...A,T])},_=T=>{const A=gBe[T]||Lr;return r.jsx(A,{className:"w-5 h-5"})};return r.jsxs(dn,{children:[r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Notifications"}),r.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Stay updated on your account activity"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs("button",{onClick:y,className:"px-3 py-2 text-sm bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 flex items-center gap-2",children:[r.jsx(Ot,{className:"w-4 h-4"}),"Refresh"]}),d.unread>0&&r.jsxs("button",{onClick:w,className:"px-3 py-2 text-sm bg-primary-600 text-white rounded-lg hover:bg-primary-700 flex items-center gap-2",children:[r.jsx(Th,{className:"w-4 h-4"}),"Mark All Read"]})]})]}),r.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[r.jsx(Be,{className:"p-4",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-900/30 rounded-lg",children:r.jsx(Lr,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:d.total}),r.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Total"})]})]})}),r.jsx(Be,{className:"p-4",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"p-2 bg-yellow-100 dark:bg-yellow-900/30 rounded-lg",children:r.jsx(ir,{className:"w-5 h-5 text-yellow-600 dark:text-yellow-400"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:d.unread}),r.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Unread"})]})]})}),r.jsx(Be,{className:"p-4",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"p-2 bg-green-100 dark:bg-green-900/30 rounded-lg",children:r.jsx(Aa,{className:"w-5 h-5 text-green-600 dark:text-green-400"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:d.transfers}),r.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Transfers"})]})]})}),r.jsx(Be,{className:"p-4",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"p-2 bg-red-100 dark:bg-red-900/30 rounded-lg",children:r.jsx(Ht,{className:"w-5 h-5 text-red-600 dark:text-red-400"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:d.security}),r.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Security"})]})]})})]}),r.jsx(Be,{className:"p-4",children:r.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[r.jsx("div",{className:"flex-1",children:r.jsxs("div",{className:"relative",children:[r.jsx(Nr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),r.jsx("input",{type:"text",placeholder:"Search notifications...",value:l.search,onChange:T=>c(A=>({...A,search:T.target.value})),className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-primary-500"})]})}),r.jsxs("div",{className:"flex gap-2",children:[r.jsxs("select",{value:l.type,onChange:T=>c(A=>({...A,type:T.target.value})),className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white text-sm",children:[r.jsx("option",{value:"",children:"All Types"}),r.jsx("option",{value:"transaction_received",children:"Received"}),r.jsx("option",{value:"transaction_sent",children:"Sent"}),r.jsx("option",{value:"deposit_completed",children:"Deposit"}),r.jsx("option",{value:"withdrawal_completed",children:"Withdrawal"}),r.jsx("option",{value:"card_activated",children:"Card"}),r.jsx("option",{value:"cashback_earned",children:"Cashback"}),r.jsx("option",{value:"security",children:"Security"})]}),r.jsxs("select",{value:l.read,onChange:T=>c(A=>({...A,read:T.target.value})),className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white text-sm",children:[r.jsx("option",{value:"",children:"All"}),r.jsx("option",{value:"unread",children:"Unread"}),r.jsx("option",{value:"read",children:"Read"})]})]})]})}),i.length>0&&r.jsxs("div",{className:"flex items-center gap-4 p-3 bg-primary-50 dark:bg-primary-900/20 rounded-lg",children:[r.jsxs("span",{className:"text-sm text-primary-700 dark:text-primary-300",children:[i.length," selected"]}),r.jsx("button",{onClick:k,className:"px-3 py-1.5 text-sm bg-red-600 text-white rounded hover:bg-red-700",children:"Delete"}),r.jsx("button",{onClick:()=>o([]),className:"px-3 py-1.5 text-sm text-gray-500 dark:text-gray-400",children:"Cancel"})]}),r.jsx(Be,{className:"overflow-hidden",children:a?r.jsxs("div",{className:"p-12 text-center",children:[r.jsx("div",{className:"w-8 h-8 border-2 border-primary-500 border-t-transparent rounded-full animate-spin mx-auto mb-3"}),r.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Loading notifications..."})]}):t.length===0?r.jsxs("div",{className:"p-12 text-center",children:[r.jsx(Lr,{className:"w-12 h-12 text-gray-300 dark:text-gray-600 mx-auto mb-3"}),r.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"No notifications yet"}),r.jsx("p",{className:"text-sm text-gray-400 dark:text-gray-500 mt-1",children:"You'll be notified when there's activity on your account"})]}):r.jsx("div",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:t.map(T=>r.jsx("div",{className:fe("p-4 hover:bg-gray-50 dark:hover:bg-gray-800/50 transition-colors cursor-pointer",!T.read&&"bg-blue-50/50 dark:bg-blue-900/10"),onClick:()=>C(T),children:r.jsxs("div",{className:"flex items-start gap-4",children:[r.jsx("input",{type:"checkbox",checked:i.includes(T.id),onChange:A=>{A.stopPropagation(),E(T.id)},onClick:A=>A.stopPropagation(),className:"mt-1 rounded border-gray-300 dark:border-gray-600"}),r.jsx("div",{className:fe("p-2 rounded-lg",b1[T.type]||b1.system),children:_(T.type)}),r.jsx("div",{className:"flex-1 min-w-0",children:r.jsxs("div",{className:"flex items-start justify-between gap-2",children:[r.jsxs("div",{children:[r.jsx("p",{className:fe("text-sm",T.read?"text-gray-700 dark:text-gray-300":"font-medium text-gray-900 dark:text-white"),children:T.title}),r.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-0.5",children:T.message})]}),r.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[r.jsx("span",{className:"text-xs text-gray-400 dark:text-gray-500",children:bx(new Date(T.created_at),{addSuffix:!0})}),r.jsx("button",{onClick:A=>{A.stopPropagation(),N(T.id)},className:"p-1 text-gray-400 hover:text-red-600 dark:hover:text-red-400 rounded",children:r.jsx(Js,{className:"w-4 h-4"})})]})]})})]})},T.id))})})]}),f&&r.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:r.jsxs("div",{className:"flex min-h-full items-center justify-center p-4",children:[r.jsx("div",{className:"fixed inset-0 bg-black/50 transition-opacity",onClick:()=>x(null)}),r.jsxs("div",{className:"relative bg-white dark:bg-gray-800 rounded-xl shadow-xl max-w-lg w-full",children:[r.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b border-gray-200 dark:border-gray-700",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:fe("p-2 rounded-lg",b1[f.type]||b1.system),children:_(f.type)}),r.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:f.title})]}),r.jsx("button",{onClick:()=>x(null),className:"p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 rounded-lg",children:r.jsx(Ct,{className:"w-5 h-5"})})]}),r.jsxs("div",{className:"px-6 py-4",children:[r.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:f.message}),f.metadata&&Object.keys(f.metadata).length>0&&r.jsx("div",{className:"mt-4 p-3 bg-gray-50 dark:bg-gray-900 rounded-lg",children:Object.entries(f.metadata).map(([T,A])=>r.jsxs("div",{className:"flex justify-between text-sm py-1",children:[r.jsx("span",{className:"text-gray-500 dark:text-gray-400 capitalize",children:T.replace(/_/g," ")}),r.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:String(A)})]},T))}),r.jsxs("div",{className:"mt-4 flex items-center gap-2 text-sm text-gray-500 dark:text-gray-400",children:[r.jsx(_t,{className:"w-4 h-4"}),nf(new Date(f.created_at),"MMM d, yyyy h:mm a")]})]}),r.jsxs("div",{className:"flex justify-end gap-2 px-6 py-4 border-t border-gray-200 dark:border-gray-700",children:[r.jsx("button",{onClick:()=>{N(f.id),x(null)},className:"px-4 py-2 text-sm text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg",children:"Delete"}),r.jsx("button",{onClick:()=>x(null),className:"px-4 py-2 text-sm bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg",children:"Close"})]})]})]})})]})}const yBe=[{path:"/agent",label:"Dashboard",icon:UN},{path:"/agent/tickets",label:"Tickets",icon:H5},{path:"/agent/customers",label:"Customers",icon:nn},{path:"/agent/live-chat",label:"Live Chat",icon:Tu},{path:"/agent/calls",label:"Call Log",icon:ooe},{path:"/agent/kyc-review",label:"KYC Review",icon:rr},{path:"/agent/knowledge",label:"Knowledge Base",icon:ao},{path:"/agent/settings",label:"Settings",icon:bs}];function Bx({children:e}){const[t,s]=p.useState(!1),{user:a,logout:n}=pt(),{isDeveloperMode:i}=Wy(),o=$i(),l=Ut(),c=async()=>{await n(),l("/login")};return r.jsxs("div",{className:"min-h-screen bg-gray-50",children:[t&&r.jsx("div",{className:"fixed inset-0 z-40 bg-gray-600 bg-opacity-75 lg:hidden",onClick:()=>s(!1)}),r.jsx("aside",{className:fe("fixed inset-y-0 left-0 z-50 w-64 bg-white border-r border-gray-200 transform transition-transform duration-300 ease-in-out lg:translate-x-0",t?"translate-x-0":"-translate-x-full"),children:r.jsxs("div",{className:"flex flex-col h-full",children:[r.jsxs("div",{className:"flex items-center justify-between h-16 px-6 border-b border-gray-200",children:[r.jsxs(xt,{to:"/agent",className:"flex items-center gap-2",children:[r.jsx(Uo,{className:"w-8 h-8 text-orange-600"}),r.jsx("span",{className:"text-xl font-bold text-gray-900",children:"Support"})]}),r.jsx("button",{className:"lg:hidden p-2 rounded-lg hover:bg-gray-100",onClick:()=>s(!1),children:r.jsx(Ct,{className:"w-5 h-5"})})]}),r.jsx("div",{className:"px-4 py-3 border-b border-gray-200",children:r.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 bg-green-50 border border-green-200 rounded-lg",children:[r.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),r.jsx("span",{className:"text-sm text-green-700 font-medium",children:"Online - Available"})]})}),r.jsxs("nav",{className:"flex-1 px-4 py-6 space-y-1 overflow-y-auto scrollbar-hide",children:[yBe.map(d=>{const h=d.icon,f=o.pathname===d.path||d.path!=="/agent"&&o.pathname.startsWith(d.path);return r.jsxs(xt,{to:d.path,className:fe("flex items-center px-4 py-3 rounded-lg transition-colors",f?"bg-orange-50 text-orange-700":"text-gray-600 hover:bg-gray-100"),children:[r.jsx(h,{className:"w-5 h-5 mr-3"}),d.label,d.label==="Tickets"&&r.jsx("span",{className:"ml-auto px-2 py-0.5 bg-red-100 text-red-700 text-xs rounded-full",children:"12"}),d.label==="Live Chat"&&r.jsx("span",{className:"ml-auto px-2 py-0.5 bg-green-100 text-green-700 text-xs rounded-full",children:"3"})]},d.path)}),i&&r.jsx("div",{className:"pt-4 mt-4 border-t border-gray-200",children:r.jsxs(xt,{to:"/agent/developer",className:"flex items-center justify-between px-4 py-3 rounded-lg bg-indigo-50 text-indigo-700 hover:bg-indigo-100 transition-colors",children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx(Pa,{className:"w-5 h-5 mr-3"}),r.jsx("span",{className:"font-medium",children:"Developer Portal"})]}),r.jsx(da,{className:"w-4 h-4"})]})})]}),r.jsx("div",{className:"px-4 py-3 border-t border-gray-200",children:r.jsxs(xt,{to:"/agent/help",className:"flex items-center px-4 py-3 text-gray-600 rounded-lg hover:bg-gray-100",children:[r.jsx(N6,{className:"w-5 h-5 mr-3"}),"Help & Guidelines"]})}),r.jsxs("div",{className:"p-4 border-t border-gray-200",children:[r.jsxs("div",{className:"flex items-center mb-4",children:[r.jsx("div",{className:"w-10 h-10 bg-orange-100 rounded-full flex items-center justify-center",children:r.jsx(Uo,{className:"w-5 h-5 text-orange-600"})}),r.jsxs("div",{className:"ml-3",children:[r.jsxs("p",{className:"text-sm font-medium text-gray-900",children:[a==null?void 0:a.firstName," ",a==null?void 0:a.lastName]}),r.jsx("p",{className:"text-xs text-gray-500",children:"Support Agent"})]})]}),r.jsxs("button",{onClick:c,className:"flex items-center w-full px-4 py-2 text-gray-600 rounded-lg hover:bg-gray-100 transition-colors",children:[r.jsx(zy,{className:"w-5 h-5 mr-3"}),"Sign out"]})]})]})}),r.jsxs("div",{className:"lg:pl-64",children:[r.jsx("header",{className:"sticky top-0 z-30 h-16 bg-white border-b border-gray-200",children:r.jsxs("div",{className:"flex items-center justify-between h-full px-4 lg:px-8",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("button",{className:"lg:hidden p-2 rounded-lg hover:bg-gray-100",onClick:()=>s(!0),children:r.jsx(qy,{className:"w-6 h-6"})}),r.jsxs("div",{className:"hidden md:flex items-center gap-2 bg-gray-100 rounded-lg px-3 py-2",children:[r.jsx(Nr,{className:"w-4 h-4 text-gray-400"}),r.jsx("input",{type:"text",placeholder:"Search customers, tickets...",className:"bg-transparent border-none outline-none text-sm w-64"})]})]}),r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("span",{className:"hidden sm:inline-flex px-3 py-1 bg-orange-100 text-orange-700 rounded-full text-xs font-medium",children:"Agent Portal"}),i&&r.jsxs(xt,{to:"/agent/developer",className:"hidden sm:inline-flex items-center gap-1 px-3 py-1 bg-indigo-100 text-indigo-700 rounded-full text-xs font-medium hover:bg-indigo-200 transition-colors",children:[r.jsx(Pa,{className:"w-3 h-3"}),"Developer"]}),r.jsxs("button",{className:"relative p-2 hover:bg-gray-100 rounded-lg",children:[r.jsx(Lr,{className:"w-5 h-5 text-gray-600"}),r.jsx("span",{className:"absolute top-1 right-1 w-2 h-2 bg-red-500 rounded-full"})]})]})]})}),r.jsx("main",{className:"p-4 lg:p-8",children:e})]})]})}const bBe=e=>({id:e.id,userId:e.agent_id||e.user_id,businessName:e.business_name,address:e.address,city:e.city,region:e.region,phone:e.phone,whatsapp:e.whatsapp,operatingHours:e.operating_hours,isActive:e.is_active??!0,verified:e.verified??!1,tier:e.tier||"basic",dailyLimit:parseFloat(e.daily_limit)||5e5,minAmount:parseFloat(e.min_amount)||10,maxAmount:parseFloat(e.max_amount)||1e5,commissionRate:parseFloat(e.commission_rate)||.5,totalTransactions:parseInt(e.total_transactions)||0,rating:parseFloat(e.rating)||0,latitude:e.latitude?parseFloat(e.latitude):void 0,longitude:e.longitude?parseFloat(e.longitude):void 0,createdAt:e.created_at}),gC=e=>{var t,s;return{id:e.id,customerId:e.user_id,customerName:(t=e.user)!=null&&t.first_name?`${e.user.first_name} ${e.user.last_name||""}`.trim():"Unknown Customer",customerPhone:(s=e.user)==null?void 0:s.phone,amount:parseFloat(e.amount)||0,fee:parseFloat(e.fee)||0,code:e.code,codeExpiresAt:e.code_expires_at,status:e.status||"PENDING",requestedAt:e.requested_at||e.created_at,walletId:e.wallet_id}},vBe=e=>{var t;return{id:e.id,type:e.type||"TRANSFER",amount:Math.abs(parseFloat(e.amount)||0),fee:parseFloat(e.fee)||0,commission:parseFloat(e.commission)||0,customerId:e.customer_id||e.recipient_id,customerName:e.customer_name||e.description,customerPhone:e.customer_phone,status:e.status||"COMPLETED",reference:e.reference||((t=e.id)==null?void 0:t.slice(0,8).toUpperCase()),description:e.description||e.type,createdAt:e.created_at}},Ua={async getProfile(e){const{data:t}=await X.from("agent_locations").select("*").eq("agent_id",e).maybeSingle();if(t)return bBe(t);const{data:s}=await X.from("users").select("id, first_name, last_name, phone, role").eq("id",e).eq("role","agent").maybeSingle();return s?{id:s.id,userId:s.id,businessName:`${s.first_name} ${s.last_name||""}`.trim()||"Agent",address:"",isActive:!0,verified:!1,tier:"basic",dailyLimit:5e5,minAmount:10,maxAmount:1e5,commissionRate:.5,totalTransactions:0,rating:0,phone:s.phone,createdAt:new Date().toISOString()}:null},async getDashboardStats(e){const t=new Date;t.setHours(0,0,0,0);const s=new Date(t.getFullYear(),t.getMonth(),1),{data:a}=await X.from("wallets").select("id, balance").eq("user_id",e).eq("is_primary",!0).maybeSingle(),n=a==null?void 0:a.id,i=parseFloat((a==null?void 0:a.balance)||"0"),{data:o}=await X.from("transactions").select("amount, type, fee").eq("wallet_id",n).eq("status","COMPLETED").gte("created_at",t.toISOString());let l=0,c=0,d=0;for(const v of o||[]){const w=parseFloat(v.amount)||0,N=parseFloat(v.fee)||0;v.type==="CASH_IN"||v.type==="DEPOSIT"?(l+=Math.abs(w),d+=N*.5):v.type==="CASH_OUT"&&(c+=Math.abs(w),d+=N*.5)}const{data:h}=await X.from("cash_out_requests").select("id").or(`agent_id.eq.${e},agent_location_id.is.null`).eq("status","PENDING").gt("code_expires_at",new Date().toISOString()),{data:f}=await X.from("transactions").select("amount").eq("wallet_id",n).eq("status","COMPLETED").gte("created_at",s.toISOString()),x=(f||[]).reduce((v,w)=>v+Math.abs(parseFloat(w.amount)||0),0),{count:y}=await X.from("transactions").select("recipient_id",{count:"exact",head:!0}).eq("wallet_id",n).not("recipient_id","is",null);return{walletBalance:i,floatBalance:i,todayCashIn:l,todayCashOut:c,todayCommissions:d,todayTransactions:(o==null?void 0:o.length)||0,pendingCashOuts:(h==null?void 0:h.length)||0,monthlyVolume:x,monthlyCommissions:d*30,totalCustomersServed:y||0}},async getPendingCashOuts(e,t=20){const{data:s,error:a}=await X.from("cash_out_requests").select(`
        *,
        user:users(first_name, last_name, phone)
      `).eq("status","PENDING").gt("code_expires_at",new Date().toISOString()).order("created_at",{ascending:!1}).limit(t);return a?(console.error("Error fetching pending cash-outs:",a),[]):(s||[]).map(gC)},async verifyCashOutCode(e){const{data:t,error:s}=await X.from("cash_out_requests").select(`
        *,
        user:users(first_name, last_name, phone)
      `).eq("code",e).eq("status","PENDING").gt("code_expires_at",new Date().toISOString()).maybeSingle();return s?{success:!1,error:s.message}:t?{success:!0,request:gC(t)}:{success:!1,error:"Invalid or expired code"}},async completeCashOut(e){const{data:t,error:s}=await X.rpc("complete_cash_out",{p_request_id:e.requestId,p_agent_id:e.agentId,p_code:e.code});if(s)return s.message.includes("does not exist")?this.completeCashOutManually(e):{success:!1,message:s.message};const a=(t==null?void 0:t[0])||t;return{success:(a==null?void 0:a.success)||!1,message:(a==null?void 0:a.message)||"Cash-out completed"}},async completeCashOutManually(e){const{data:t}=await X.from("cash_out_requests").select("*").eq("id",e.requestId).eq("code",e.code).eq("status","PENDING").gt("code_expires_at",new Date().toISOString()).single();if(!t)return{success:!1,message:"Invalid request or code"};const{data:s}=await X.from("wallets").select("id, balance").eq("user_id",e.agentId).eq("is_primary",!0).single();if(!s||parseFloat(s.balance)<parseFloat(t.amount))return{success:!1,message:"Insufficient float balance"};await X.from("wallets").update({balance:parseFloat(s.balance)-parseFloat(t.amount),updated_at:new Date().toISOString()}).eq("id",s.id),await X.from("cash_out_requests").update({status:"COMPLETED",agent_id:e.agentId,code_verified_at:new Date().toISOString(),completed_at:new Date().toISOString(),updated_at:new Date().toISOString()}).eq("id",e.requestId);const a=parseFloat(t.fee)*.5;return await X.from("transactions").insert({wallet_id:s.id,user_id:e.agentId,amount:-parseFloat(t.amount),type:"CASH_OUT",status:"COMPLETED",description:"Cash-out to customer",fee:0,metadata:{cash_out_request_id:e.requestId,commission:a,customer_id:t.user_id}}),{success:!0,message:`Cash-out of Le ${t.amount} completed. Commission: Le ${a.toFixed(2)}`}},async processCashIn(e){const{data:t}=await X.from("users").select("id").eq("phone",e.customerPhone).maybeSingle();if(!t)return{success:!1,message:"Customer not found with that phone number"};const{data:s}=await X.from("wallets").select("id, balance").eq("user_id",t.id).eq("is_primary",!0).maybeSingle();if(!s)return{success:!1,message:"Customer wallet not found"};const{data:a}=await X.from("wallets").select("id, balance").eq("user_id",e.agentId).eq("is_primary",!0).single();if(!a)return{success:!1,message:"Agent wallet not found"};const n=Math.max(e.amount*.01,1),i=n*.5,o=e.amount-n;await X.from("wallets").update({balance:parseFloat(s.balance)+o,updated_at:new Date().toISOString()}).eq("id",s.id),await X.from("wallets").update({balance:parseFloat(a.balance)+e.amount,updated_at:new Date().toISOString()}).eq("id",a.id);const{data:l}=await X.from("transactions").insert({wallet_id:s.id,user_id:t.id,amount:o,type:"CASH_IN",status:"COMPLETED",description:e.description||"Cash deposit via agent",fee:n,metadata:{agent_id:e.agentId,gross_amount:e.amount}}).select("id").single();return await X.from("transactions").insert({wallet_id:a.id,user_id:e.agentId,amount:e.amount,type:"CASH_IN",status:"COMPLETED",description:"Cash-in from customer",fee:0,metadata:{customer_id:t.id,commission:i}}),{success:!0,transactionId:l==null?void 0:l.id,message:`Deposited Le ${o.toLocaleString()} to customer. Commission: Le ${i.toFixed(2)}`}},async getTransactions(e,t){const{data:s}=await X.from("wallets").select("id").eq("user_id",e).eq("is_primary",!0).maybeSingle();if(!s)return[];let a=X.from("transactions").select("*").eq("wallet_id",s.id).order("created_at",{ascending:!1});t!=null&&t.type&&(a=a.eq("type",t.type)),t!=null&&t.startDate&&(a=a.gte("created_at",t.startDate.toISOString())),t!=null&&t.endDate&&(a=a.lte("created_at",t.endDate.toISOString())),t!=null&&t.limit&&(a=a.limit(t.limit)),t!=null&&t.offset&&(a=a.range(t.offset,t.offset+(t.limit||20)-1));const{data:n,error:i}=await a;return i?(console.error("Error fetching transactions:",i),[]):(n||[]).map(vBe)},async getCashOutHistory(e,t=20){const{data:s,error:a}=await X.from("cash_out_requests").select(`
        *,
        user:users(first_name, last_name, phone)
      `).eq("agent_id",e).in("status",["COMPLETED","CANCELLED"]).order("completed_at",{ascending:!1}).limit(t);return a?(console.error("Error fetching cash-out history:",a),[]):(s||[]).map(gC)},async requestFloatTopup(e,t){const{data:s}=await X.from("wallets").select("id").eq("user_id",e).eq("is_primary",!0).single();return s?(await X.from("transactions").insert({wallet_id:s.id,user_id:e,amount:t,type:"FLOAT_TOPUP",status:"PENDING",description:"Float top-up request"}),{success:!0,message:"Float top-up request submitted"}):{success:!1,message:"Wallet not found"}},getCommissionRates(){return{cashIn:.5,cashOut:.5,transfer:.3}},getLimits(e="basic"){return{basic:{minTransaction:10,maxTransaction:5e4,dailyLimit:5e5},standard:{minTransaction:10,maxTransaction:1e5,dailyLimit:1e6},agent_plus:{minTransaction:10,maxTransaction:5e5,dailyLimit:5e6}}[e]}};function RF(){const{user:e}=pt(),[t,s]=p.useState({walletBalance:0,floatBalance:0,todayCashIn:0,todayCashOut:0,todayCommissions:0,todayTransactions:0,pendingCashOuts:0,monthlyVolume:0,monthlyCommissions:0,totalCustomersServed:0}),[a,n]=p.useState([]),[i,o]=p.useState([]),[l,c]=p.useState(!0),[d,h]=p.useState("basic"),[f,x]=p.useState(!1),[y,v]=p.useState(""),[w,N]=p.useState(""),[k,C]=p.useState(!1),[E,_]=p.useState(null),[T,A]=p.useState(!1),[P,M]=p.useState(""),[R,$]=p.useState(!1),[W,I]=p.useState(null),[B,O]=p.useState(null),[F,q]=p.useState(null);p.useEffect(()=>{cr.getDefaultCurrency().then(q),e!=null&&e.id&&V()},[e==null?void 0:e.id]);const H=(F==null?void 0:F.symbol)||"Le",K=ce=>`${H} ${ce.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}`,V=async()=>{if(e!=null&&e.id){c(!0);try{const[ce,xe,_e,oe]=await Promise.all([Ua.getDashboardStats(e.id),Ua.getPendingCashOuts(e.id,5),Ua.getTransactions(e.id,{limit:5}),Ua.getProfile(e.id)]);s(ce),n(xe),o(_e),oe!=null&&oe.tier&&h(oe.tier)}catch(ce){console.error("Error fetching dashboard data:",ce)}finally{c(!1)}}},z=async()=>{if(!(!(e!=null&&e.id)||!y||!w)){C(!0),_(null);try{const ce=await Ua.processCashIn({agentId:e.id,customerPhone:y,amount:parseFloat(w)});ce.success?(_({type:"success",text:ce.message}),v(""),N(""),V(),setTimeout(()=>{x(!1),_(null)},2e3)):_({type:"error",text:ce.message})}catch{_({type:"error",text:"Failed to process cash-in"})}finally{C(!1)}}},G=async()=>{if(!P||P.length!==6){O({type:"error",text:"Please enter a valid 6-digit code"});return}$(!0),O(null);try{const ce=await Ua.verifyCashOutCode(P);ce.success&&ce.request?(I(ce.request),O({type:"success",text:"Code verified! Confirm to dispense cash."})):O({type:"error",text:ce.error||"Invalid or expired code"})}catch{O({type:"error",text:"Failed to verify code"})}finally{$(!1)}},te=async()=>{if(!(!(e!=null&&e.id)||!W)){$(!0);try{const ce=await Ua.completeCashOut({requestId:W.id,agentId:e.id,code:P});ce.success?(O({type:"success",text:ce.message}),V(),setTimeout(()=>{A(!1),M(""),I(null),O(null)},2e3)):O({type:"error",text:ce.message})}catch{O({type:"error",text:"Failed to complete cash-out"})}finally{$(!1)}}},he=ce=>{const xe=new Date(ce),oe=new Date().getTime()-xe.getTime(),ie=Math.floor(oe/6e4),ge=Math.floor(oe/36e5);return ie<1?"Just now":ie<60?`${ie}m ago`:ge<24?`${ge}h ago`:xe.toLocaleDateString()},ne=Ua.getLimits(d);return r.jsxs(Bx,{children:[r.jsxs(Pe.div,{className:"space-y-6",initial:{opacity:0},animate:{opacity:1},transition:{duration:.4},children:[r.jsxs(Pe.div,{className:"flex justify-between items-center",initial:{opacity:0,y:-20},animate:{opacity:1,y:0},children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Agent Dashboard"}),r.jsxs("p",{className:"text-gray-500 dark:text-gray-400",children:[d==="agent_plus"?"Agent+ Account":d==="standard"?"Standard Agent":"Basic Agent"," ",""," ","Daily Limit: ",K(ne.dailyLimit)]})]}),r.jsx("div",{className:"flex gap-3",children:r.jsxs(Pe.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:V,className:"px-4 py-2 text-sm bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 flex items-center gap-2",children:[r.jsx(Ot,{className:`w-4 h-4 ${l?"animate-spin":""}`}),"Refresh"]})})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[r.jsxs(Pe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"p-6 bg-gradient-to-br from-orange-500 to-orange-600 dark:from-orange-600 dark:to-orange-700 text-white rounded-xl shadow-lg",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("div",{className:"p-2 bg-white/20 rounded-lg",children:r.jsx(Rt,{className:"w-6 h-6"})}),r.jsx("span",{className:"text-xs bg-white/20 px-2 py-1 rounded-full",children:"Float Balance"})]}),r.jsx("p",{className:"text-sm text-orange-100",children:"Available Cash"}),r.jsx("p",{className:"text-3xl font-bold",children:K(t.floatBalance)}),r.jsxs("div",{className:"flex gap-2 mt-4",children:[r.jsxs(xt,{to:"/agent/float",className:"flex-1 py-2 bg-white/20 hover:bg-white/30 rounded-lg text-sm font-medium transition-colors flex items-center justify-center gap-1",children:[r.jsx(Ts,{className:"w-4 h-4"}),"Top Up"]}),r.jsxs(xt,{to:"/agent/transactions",className:"flex-1 py-2 bg-white/20 hover:bg-white/30 rounded-lg text-sm font-medium transition-colors flex items-center justify-center gap-1",children:[r.jsx(k6,{className:"w-4 h-4"}),"History"]})]})]}),r.jsxs(Be,{className:"p-6",delay:.2,children:[r.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[r.jsx("div",{className:"p-2 bg-green-100 dark:bg-green-900/30 rounded-lg",children:r.jsx(An,{className:"w-5 h-5 text-green-600 dark:text-green-400"})}),r.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:"Cash In (Deposit)"})]}),r.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-4",children:"Accept cash from customer and credit their wallet"}),r.jsxs(Pe.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>x(!0),className:"w-full py-3 bg-green-600 text-white rounded-lg font-medium hover:bg-green-700 transition-colors flex items-center justify-center gap-2",children:[r.jsx(Zl,{className:"w-5 h-5"}),"Process Cash In"]})]}),r.jsxs(Be,{className:"p-6",delay:.3,children:[r.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[r.jsx("div",{className:"p-2 bg-red-100 dark:bg-red-900/30 rounded-lg",children:r.jsx(Rr,{className:"w-5 h-5 text-red-600 dark:text-red-400"})}),r.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:"Cash Out (Withdrawal)"})]}),r.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-4",children:"Verify customer code and dispense cash"}),r.jsxs(Pe.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>A(!0),className:"w-full py-3 bg-orange-600 text-white rounded-lg font-medium hover:bg-orange-700 transition-colors flex items-center justify-center gap-2",children:[r.jsx(Vs,{className:"w-5 h-5"}),"Verify Code"]})]})]}),r.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[r.jsx(Be,{className:"p-4",delay:.4,children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"p-2 bg-green-100 dark:bg-green-900/30 rounded-lg",children:r.jsx(An,{className:"w-5 h-5 text-green-600 dark:text-green-400"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Today's Cash In"}),r.jsx("p",{className:"text-lg font-bold text-green-600 dark:text-green-400",children:K(t.todayCashIn)})]})]})}),r.jsx(Be,{className:"p-4",delay:.45,children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"p-2 bg-red-100 dark:bg-red-900/30 rounded-lg",children:r.jsx(Rr,{className:"w-5 h-5 text-red-600 dark:text-red-400"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Today's Cash Out"}),r.jsx("p",{className:"text-lg font-bold text-red-600 dark:text-red-400",children:K(t.todayCashOut)})]})]})}),r.jsx(Be,{className:"p-4",delay:.5,children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"p-2 bg-purple-100 dark:bg-purple-900/30 rounded-lg",children:r.jsx(If,{className:"w-5 h-5 text-purple-600 dark:text-purple-400"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Today's Commission"}),r.jsx("p",{className:"text-lg font-bold text-purple-600 dark:text-purple-400",children:K(t.todayCommissions)})]})]})}),r.jsx(Be,{className:"p-4",delay:.55,children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-900/30 rounded-lg",children:r.jsx(Tn,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Transactions"}),r.jsx("p",{className:"text-lg font-bold text-blue-600 dark:text-blue-400",children:t.todayTransactions})]})]})})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[r.jsxs(Be,{className:"lg:col-span-2 p-6",delay:.6,children:[r.jsxs("div",{className:"flex justify-between items-center mb-4",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Pending Cash-Outs"}),t.pendingCashOuts>0&&r.jsx("span",{className:"px-2 py-0.5 bg-orange-100 dark:bg-orange-900/30 text-orange-700 dark:text-orange-400 text-xs font-medium rounded-full",children:t.pendingCashOuts})]}),r.jsx(xt,{to:"/agent/cashout",className:"text-sm text-orange-600 dark:text-orange-400 hover:text-orange-700 dark:hover:text-orange-300",children:"View All"})]}),l?r.jsx("div",{className:"flex items-center justify-center py-8",children:r.jsx(Ot,{className:"w-6 h-6 animate-spin text-gray-400"})}):a.length===0?r.jsxs("div",{className:"text-center py-8",children:[r.jsx(Ae,{className:"w-12 h-12 text-gray-300 dark:text-gray-600 mx-auto mb-3"}),r.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"No pending cash-out requests"}),r.jsx("p",{className:"text-sm text-gray-400 dark:text-gray-500",children:"Requests will appear here when customers request cash"})]}):r.jsx("div",{className:"space-y-3",children:a.map(ce=>r.jsxs(Pe.div,{whileHover:{scale:1.01},className:"flex items-center justify-between p-4 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("div",{className:"p-2 bg-orange-100 dark:bg-orange-900/30 rounded-full",children:r.jsx(Zl,{className:"w-5 h-5 text-orange-600 dark:text-orange-400"})}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:ce.customerName}),r.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Code: ",r.jsx("span",{className:"font-mono font-bold",children:ce.code})]})]})]}),r.jsxs("div",{className:"text-right",children:[r.jsx("p",{className:"font-bold text-gray-900 dark:text-white",children:K(ce.amount)}),r.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Expires ",he(ce.codeExpiresAt)]})]})]},ce.id))})]}),r.jsxs("div",{className:"space-y-6",children:[r.jsxs(Be,{className:"p-6",delay:.7,children:[r.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white mb-4",children:"Monthly Summary"}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Cr,{className:"w-4 h-4 text-gray-400"}),r.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Volume"})]}),r.jsx("span",{className:"font-semibold text-gray-900 dark:text-white",children:K(t.monthlyVolume)})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(If,{className:"w-4 h-4 text-gray-400"}),r.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Commissions"})]}),r.jsx("span",{className:"font-semibold text-green-600 dark:text-green-400",children:K(t.monthlyCommissions)})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(nn,{className:"w-4 h-4 text-gray-400"}),r.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Customers"})]}),r.jsx("span",{className:"font-semibold text-gray-900 dark:text-white",children:t.totalCustomersServed})]})]})]}),r.jsxs(Be,{className:"p-6",delay:.8,children:[r.jsxs("div",{className:"flex justify-between items-center mb-4",children:[r.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:"Recent Activity"}),r.jsx(xt,{to:"/agent/transactions",className:"text-sm text-orange-600 dark:text-orange-400 hover:text-orange-700",children:"View All"})]}),r.jsx("div",{className:"space-y-3",children:i.length===0?r.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 text-center py-4",children:"No recent transactions"}):i.slice(0,4).map(ce=>r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:`p-1.5 rounded-full ${ce.type==="CASH_IN"?"bg-green-100 dark:bg-green-900/30":ce.type==="CASH_OUT"?"bg-red-100 dark:bg-red-900/30":"bg-blue-100 dark:bg-blue-900/30"}`,children:ce.type==="CASH_IN"?r.jsx(An,{className:"w-3 h-3 text-green-600 dark:text-green-400"}):ce.type==="CASH_OUT"?r.jsx(Rr,{className:"w-3 h-3 text-red-600 dark:text-red-400"}):r.jsx(Tn,{className:"w-3 h-3 text-blue-600 dark:text-blue-400"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:ce.type.replace("_"," ")}),r.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:he(ce.createdAt)})]})]}),r.jsxs("span",{className:`text-sm font-medium ${ce.type==="CASH_IN"?"text-green-600 dark:text-green-400":ce.type==="CASH_OUT"?"text-red-600 dark:text-red-400":"text-gray-900 dark:text-white"}`,children:[ce.type==="CASH_OUT"?"-":"+",K(ce.amount)]})]},ce.id))})]})]})]}),d!=="agent_plus"&&r.jsx(Be,{className:"p-6 border-2 border-orange-200 dark:border-orange-800 bg-gradient-to-r from-orange-50 to-amber-50 dark:from-orange-900/20 dark:to-amber-900/20",delay:.9,children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("div",{className:"p-3 bg-orange-100 dark:bg-orange-900/50 rounded-xl",children:r.jsx(Ho,{className:"w-8 h-8 text-orange-600 dark:text-orange-400"})}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-bold text-gray-900 dark:text-white",children:"Upgrade to Agent+"}),r.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Higher limits (",K(5e6),"/day), lower fees, priority support & more"]})]})]}),r.jsxs(xt,{to:"/agent/upgrade",className:"px-6 py-3 bg-orange-600 text-white rounded-lg font-medium hover:bg-orange-700 transition-colors flex items-center gap-2",children:[r.jsx(Ho,{className:"w-5 h-5"}),"Upgrade Now"]})]})})]}),f&&r.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:r.jsxs(Pe.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"bg-white dark:bg-gray-800 rounded-xl p-6 w-full max-w-md",children:[r.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white mb-4",children:"Cash In (Deposit)"}),r.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-4",children:"Accept cash from customer and credit their wallet"}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Customer Phone Number"}),r.jsx("input",{type:"tel",value:y,onChange:ce=>v(ce.target.value),placeholder:"+232 XX XXX XXXX",className:"w-full px-4 py-3 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-orange-500"})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:["Amount (",H,")"]}),r.jsx("input",{type:"number",value:w,onChange:ce=>N(ce.target.value),placeholder:"0",min:ne.minTransaction,max:ne.maxTransaction,className:"w-full px-4 py-3 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-orange-500 text-2xl font-bold"}),r.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:["Min: ",K(ne.minTransaction),"  Max: ",K(ne.maxTransaction)]})]}),w&&r.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:[r.jsxs("div",{className:"flex justify-between text-sm",children:[r.jsx("span",{className:"text-gray-500",children:"Fee (1%)"}),r.jsx("span",{className:"text-gray-900 dark:text-white",children:K(Math.max(parseFloat(w)*.01,1))})]}),r.jsxs("div",{className:"flex justify-between text-sm mt-1",children:[r.jsx("span",{className:"text-gray-500",children:"Customer receives"}),r.jsx("span",{className:"font-bold text-green-600",children:K(parseFloat(w)-Math.max(parseFloat(w)*.01,1))})]}),r.jsxs("div",{className:"flex justify-between text-sm mt-1",children:[r.jsx("span",{className:"text-gray-500",children:"Your commission"}),r.jsx("span",{className:"font-bold text-purple-600",children:K(Math.max(parseFloat(w)*.01,1)*.5)})]})]}),E&&r.jsx("div",{className:`p-3 rounded-lg ${E.type==="success"?"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400":"bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-400"}`,children:E.text}),r.jsxs("div",{className:"flex gap-3",children:[r.jsx("button",{onClick:()=>{x(!1),v(""),N(""),_(null)},className:"flex-1 py-3 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg font-medium hover:bg-gray-200 dark:hover:bg-gray-600",children:"Cancel"}),r.jsx("button",{onClick:z,disabled:k||!y||!w,className:"flex-1 py-3 bg-green-600 text-white rounded-lg font-medium hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:k?r.jsx(Ot,{className:"w-5 h-5 animate-spin"}):r.jsxs(r.Fragment,{children:[r.jsx(Ae,{className:"w-5 h-5"}),"Confirm Deposit"]})})]})]})]})}),T&&r.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:r.jsxs(Pe.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"bg-white dark:bg-gray-800 rounded-xl p-6 w-full max-w-md",children:[r.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white mb-4",children:"Cash Out Verification"}),W?r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"p-4 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg mb-4",children:[r.jsxs("div",{className:"flex items-center gap-2 text-green-700 dark:text-green-400 mb-2",children:[r.jsx(Ae,{className:"w-5 h-5"}),r.jsx("span",{className:"font-medium",children:"Code Verified"})]}),r.jsxs("div",{className:"space-y-2 text-sm",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Customer"}),r.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:W.customerName})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Amount"}),r.jsx("span",{className:"font-bold text-gray-900 dark:text-white",children:K(W.amount)})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Your commission"}),r.jsx("span",{className:"font-bold text-purple-600",children:K(W.fee*.5)})]})]})]}),t.floatBalance<W.amount&&r.jsxs("div",{className:"p-3 bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-400 rounded-lg mb-4 flex items-center gap-2",children:[r.jsx(Ht,{className:"w-5 h-5"}),"Insufficient float balance"]}),B&&B.type==="error"&&r.jsx("div",{className:"p-3 bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-400 rounded-lg mb-4",children:B.text}),r.jsxs("div",{className:"flex gap-3",children:[r.jsx("button",{onClick:()=>{A(!1),M(""),I(null),O(null)},className:"flex-1 py-3 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg font-medium hover:bg-gray-200 dark:hover:bg-gray-600",children:"Cancel"}),r.jsx("button",{onClick:te,disabled:R||t.floatBalance<W.amount,className:"flex-1 py-3 bg-orange-600 text-white rounded-lg font-medium hover:bg-orange-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:R?r.jsx(Ot,{className:"w-5 h-5 animate-spin"}):r.jsxs(r.Fragment,{children:[r.jsx(Zl,{className:"w-5 h-5"}),"Dispense Cash"]})})]})]}):r.jsxs(r.Fragment,{children:[r.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-4",children:"Enter the 6-digit code from the customer"}),r.jsx("div",{className:"mb-4",children:r.jsx("input",{type:"text",value:P,onChange:ce=>M(ce.target.value.replace(/\D/g,"").slice(0,6)),placeholder:"Enter 6-digit code",className:"w-full px-4 py-4 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-orange-500 text-3xl font-mono text-center tracking-widest",maxLength:6})}),B&&r.jsx("div",{className:`p-3 rounded-lg mb-4 ${B.type==="success"?"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400":"bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-400"}`,children:B.text}),r.jsxs("div",{className:"flex gap-3",children:[r.jsx("button",{onClick:()=>{A(!1),M(""),O(null)},className:"flex-1 py-3 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg font-medium hover:bg-gray-200 dark:hover:bg-gray-600",children:"Cancel"}),r.jsx("button",{onClick:G,disabled:R||P.length!==6,className:"flex-1 py-3 bg-orange-600 text-white rounded-lg font-medium hover:bg-orange-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:R?r.jsx(Ot,{className:"w-5 h-5 animate-spin"}):r.jsxs(r.Fragment,{children:[r.jsx(Vs,{className:"w-5 h-5"}),"Verify Code"]})})]})]})]})})]})}const wBe={transaction_received:Aa,transaction_sent:Rr,cashout_completed:Cr,float_added:Rt,float_low:Ht,customer_served:nn,commission_earned:Cr,location_verified:Vi,system:bs,login:Lr},v1={transaction_received:"bg-green-100 dark:bg-green-900/30 text-green-600 dark:text-green-400",transaction_sent:"bg-blue-100 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400",cashout_completed:"bg-emerald-100 dark:bg-emerald-900/30 text-emerald-600 dark:text-emerald-400",float_added:"bg-cyan-100 dark:bg-cyan-900/30 text-cyan-600 dark:text-cyan-400",float_low:"bg-red-100 dark:bg-red-900/30 text-red-600 dark:text-red-400",customer_served:"bg-purple-100 dark:bg-purple-900/30 text-purple-600 dark:text-purple-400",commission_earned:"bg-amber-100 dark:bg-amber-900/30 text-amber-600 dark:text-amber-400",location_verified:"bg-indigo-100 dark:bg-indigo-900/30 text-indigo-600 dark:text-indigo-400",system:"bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-400",login:"bg-yellow-100 dark:bg-yellow-900/30 text-yellow-600 dark:text-yellow-400"};function jBe(){const{user:e}=pt(),[t,s]=p.useState([]),[a,n]=p.useState(!0),[i,o]=p.useState([]),[l,c]=p.useState({type:"",read:"",search:""}),[d,h]=p.useState({total:0,unread:0,transactions:0,commissions:0}),[f,x]=p.useState(null);p.useEffect(()=>{if(e!=null&&e.id){y();const T=X.channel("agent_notifications_realtime").on("postgres_changes",{event:"*",schema:"public",table:"user_notifications",filter:`user_id=eq.${e.id}`},()=>{y()}).subscribe();return()=>{X.removeChannel(T)}}},[e==null?void 0:e.id,l.type,l.read]);const y=async()=>{if(e!=null&&e.id){n(!0);try{let T=X.from("user_notifications").select("*").eq("user_id",e.id).order("created_at",{ascending:!1});l.type&&(T=T.eq("type",l.type)),l.read==="read"?T=T.eq("read",!0):l.read==="unread"&&(T=T.eq("read",!1));const{data:A,error:P}=await T;if(P)console.error("Error fetching notifications:",P),s([]);else{let M=A||[];if(l.search){const $=l.search.toLowerCase();M=M.filter(W=>W.title.toLowerCase().includes($)||W.message.toLowerCase().includes($))}s(M);const R=A||[];h({total:R.length,unread:R.filter($=>!$.read).length,transactions:R.filter($=>$.type.includes("transaction")||$.type.includes("cashout")).length,commissions:R.filter($=>$.type==="commission_earned").length})}}catch(T){console.error("Error:",T)}finally{n(!1)}}},v=async T=>{const{error:A}=await X.from("user_notifications").update({read:!0}).eq("id",T);A||(s(P=>P.map(M=>M.id===T?{...M,read:!0}:M)),h(P=>({...P,unread:Math.max(0,P.unread-1)})))},w=async()=>{if(!(e!=null&&e.id))return;const{error:T}=await X.from("user_notifications").update({read:!0}).eq("user_id",e.id).eq("read",!1);T||(s(A=>A.map(P=>({...P,read:!0}))),h(A=>({...A,unread:0})))},N=async T=>{const{error:A}=await X.from("user_notifications").delete().eq("id",T);A||(s(P=>P.filter(M=>M.id!==T)),h(P=>({...P,total:P.total-1})))},k=async()=>{if(i.length===0)return;const{error:T}=await X.from("user_notifications").delete().in("id",i);T||(y(),o([]))},C=T=>{T.read||v(T.id),x(T)},E=T=>{o(A=>A.includes(T)?A.filter(P=>P!==T):[...A,T])},_=T=>{const A=wBe[T]||Lr;return r.jsx(A,{className:"w-5 h-5"})};return r.jsxs(Bx,{children:[r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Notifications"}),r.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Stay updated on your agent activity"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs("button",{onClick:y,className:"px-3 py-2 text-sm bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 flex items-center gap-2",children:[r.jsx(Ot,{className:"w-4 h-4"}),"Refresh"]}),d.unread>0&&r.jsxs("button",{onClick:w,className:"px-3 py-2 text-sm bg-primary-600 text-white rounded-lg hover:bg-primary-700 flex items-center gap-2",children:[r.jsx(Th,{className:"w-4 h-4"}),"Mark All Read"]})]})]}),r.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[r.jsx(Be,{className:"p-4",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-900/30 rounded-lg",children:r.jsx(Lr,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:d.total}),r.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Total"})]})]})}),r.jsx(Be,{className:"p-4",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"p-2 bg-yellow-100 dark:bg-yellow-900/30 rounded-lg",children:r.jsx(ir,{className:"w-5 h-5 text-yellow-600 dark:text-yellow-400"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:d.unread}),r.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Unread"})]})]})}),r.jsx(Be,{className:"p-4",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"p-2 bg-green-100 dark:bg-green-900/30 rounded-lg",children:r.jsx(Cr,{className:"w-5 h-5 text-green-600 dark:text-green-400"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:d.transactions}),r.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Transactions"})]})]})}),r.jsx(Be,{className:"p-4",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"p-2 bg-amber-100 dark:bg-amber-900/30 rounded-lg",children:r.jsx(Rt,{className:"w-5 h-5 text-amber-600 dark:text-amber-400"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:d.commissions}),r.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Commissions"})]})]})})]}),r.jsx(Be,{className:"p-4",children:r.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[r.jsx("div",{className:"flex-1",children:r.jsxs("div",{className:"relative",children:[r.jsx(Nr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),r.jsx("input",{type:"text",placeholder:"Search notifications...",value:l.search,onChange:T=>c(A=>({...A,search:T.target.value})),className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-primary-500"})]})}),r.jsxs("div",{className:"flex gap-2",children:[r.jsxs("select",{value:l.type,onChange:T=>c(A=>({...A,type:T.target.value})),className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white text-sm",children:[r.jsx("option",{value:"",children:"All Types"}),r.jsx("option",{value:"cashout_completed",children:"Cash Out"}),r.jsx("option",{value:"float_added",children:"Float Added"}),r.jsx("option",{value:"float_low",children:"Float Low"}),r.jsx("option",{value:"commission_earned",children:"Commission"}),r.jsx("option",{value:"customer_served",children:"Customer"}),r.jsx("option",{value:"system",children:"System"})]}),r.jsxs("select",{value:l.read,onChange:T=>c(A=>({...A,read:T.target.value})),className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white text-sm",children:[r.jsx("option",{value:"",children:"All"}),r.jsx("option",{value:"unread",children:"Unread"}),r.jsx("option",{value:"read",children:"Read"})]})]})]})}),i.length>0&&r.jsxs("div",{className:"flex items-center gap-4 p-3 bg-primary-50 dark:bg-primary-900/20 rounded-lg",children:[r.jsxs("span",{className:"text-sm text-primary-700 dark:text-primary-300",children:[i.length," selected"]}),r.jsx("button",{onClick:k,className:"px-3 py-1.5 text-sm bg-red-600 text-white rounded hover:bg-red-700",children:"Delete"}),r.jsx("button",{onClick:()=>o([]),className:"px-3 py-1.5 text-sm text-gray-500 dark:text-gray-400",children:"Cancel"})]}),r.jsx(Be,{className:"overflow-hidden",children:a?r.jsxs("div",{className:"p-12 text-center",children:[r.jsx("div",{className:"w-8 h-8 border-2 border-primary-500 border-t-transparent rounded-full animate-spin mx-auto mb-3"}),r.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Loading notifications..."})]}):t.length===0?r.jsxs("div",{className:"p-12 text-center",children:[r.jsx(Lr,{className:"w-12 h-12 text-gray-300 dark:text-gray-600 mx-auto mb-3"}),r.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"No notifications yet"}),r.jsx("p",{className:"text-sm text-gray-400 dark:text-gray-500 mt-1",children:"You'll be notified when there's activity on your agent account"})]}):r.jsx("div",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:t.map(T=>r.jsx("div",{className:fe("p-4 hover:bg-gray-50 dark:hover:bg-gray-800/50 transition-colors cursor-pointer",!T.read&&"bg-blue-50/50 dark:bg-blue-900/10"),onClick:()=>C(T),children:r.jsxs("div",{className:"flex items-start gap-4",children:[r.jsx("input",{type:"checkbox",checked:i.includes(T.id),onChange:A=>{A.stopPropagation(),E(T.id)},onClick:A=>A.stopPropagation(),className:"mt-1 rounded border-gray-300 dark:border-gray-600"}),r.jsx("div",{className:fe("p-2 rounded-lg",v1[T.type]||v1.system),children:_(T.type)}),r.jsx("div",{className:"flex-1 min-w-0",children:r.jsxs("div",{className:"flex items-start justify-between gap-2",children:[r.jsxs("div",{children:[r.jsx("p",{className:fe("text-sm",T.read?"text-gray-700 dark:text-gray-300":"font-medium text-gray-900 dark:text-white"),children:T.title}),r.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-0.5",children:T.message})]}),r.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[r.jsx("span",{className:"text-xs text-gray-400 dark:text-gray-500",children:bx(new Date(T.created_at),{addSuffix:!0})}),r.jsx("button",{onClick:A=>{A.stopPropagation(),N(T.id)},className:"p-1 text-gray-400 hover:text-red-600 dark:hover:text-red-400 rounded",children:r.jsx(Js,{className:"w-4 h-4"})})]})]})})]})},T.id))})})]}),f&&r.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:r.jsxs("div",{className:"flex min-h-full items-center justify-center p-4",children:[r.jsx("div",{className:"fixed inset-0 bg-black/50 transition-opacity",onClick:()=>x(null)}),r.jsxs("div",{className:"relative bg-white dark:bg-gray-800 rounded-xl shadow-xl max-w-lg w-full",children:[r.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b border-gray-200 dark:border-gray-700",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:fe("p-2 rounded-lg",v1[f.type]||v1.system),children:_(f.type)}),r.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:f.title})]}),r.jsx("button",{onClick:()=>x(null),className:"p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 rounded-lg",children:r.jsx(Ct,{className:"w-5 h-5"})})]}),r.jsxs("div",{className:"px-6 py-4",children:[r.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:f.message}),f.metadata&&Object.keys(f.metadata).length>0&&r.jsx("div",{className:"mt-4 p-3 bg-gray-50 dark:bg-gray-900 rounded-lg",children:Object.entries(f.metadata).map(([T,A])=>r.jsxs("div",{className:"flex justify-between text-sm py-1",children:[r.jsx("span",{className:"text-gray-500 dark:text-gray-400 capitalize",children:T.replace(/_/g," ")}),r.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:String(A)})]},T))}),r.jsxs("div",{className:"mt-4 flex items-center gap-2 text-sm text-gray-500 dark:text-gray-400",children:[r.jsx(_t,{className:"w-4 h-4"}),nf(new Date(f.created_at),"MMM d, yyyy h:mm a")]})]}),r.jsxs("div",{className:"flex justify-end gap-2 px-6 py-4 border-t border-gray-200 dark:border-gray-700",children:[r.jsx("button",{onClick:()=>{N(f.id),x(null)},className:"px-4 py-2 text-sm text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg",children:"Delete"}),r.jsx("button",{onClick:()=>x(null),className:"px-4 py-2 text-sm bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg",children:"Close"})]})]})]})})]})}function NBe(){const{isDeveloperMode:e,toggleDeveloperMode:t}=Wy(),[s,a]=p.useState("profile"),[n,i]=p.useState(!1),[o,l]=p.useState({displayName:"Support Agent",email:"agent@example.com",phone:"+1 (555) 987-6543",notifyNewTickets:!0,notifyAssignments:!0,notifyEscalations:!0,soundAlerts:!0,autoAcceptChats:!1,maxConcurrentChats:3}),c=()=>{i(!0),setTimeout(()=>i(!1),3e3)},d=[{id:"profile",label:"Profile",icon:br},{id:"notifications",label:"Notifications",icon:Lr},{id:"preferences",label:"Preferences",icon:Uo},{id:"developer",label:"Developer Mode",icon:Pa}];return r.jsx(Bx,{children:r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Settings"}),r.jsx("p",{className:"text-gray-500",children:"Manage your agent account settings"})]}),n&&r.jsxs("div",{className:"flex items-center gap-2 px-4 py-2 bg-green-100 text-green-700 rounded-lg",children:[r.jsx(Ae,{className:"w-4 h-4"}),r.jsx("span",{className:"text-sm font-medium",children:"Settings saved successfully"})]})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[r.jsx(se,{className:"p-4 lg:col-span-1",children:r.jsx("nav",{className:"space-y-1",children:d.map(h=>{const f=h.icon;return r.jsxs("button",{onClick:()=>a(h.id),className:`w-full flex items-center gap-3 px-4 py-3 rounded-lg text-left transition-colors ${s===h.id?"bg-orange-50 text-orange-700":"text-gray-600 hover:bg-gray-50"}`,children:[r.jsx(f,{className:"w-5 h-5"}),r.jsx("span",{className:"font-medium",children:h.label}),h.id==="developer"&&e&&r.jsx("span",{className:"ml-auto px-2 py-0.5 bg-indigo-100 text-indigo-700 text-xs rounded-full",children:"ON"})]},h.id)})})}),r.jsxs("div",{className:"lg:col-span-3",children:[s==="profile"&&r.jsxs(se,{className:"p-6",children:[r.jsx("h2",{className:"text-lg font-semibold mb-6",children:"Profile Information"}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Display Name"}),r.jsx("input",{type:"text",value:o.displayName,onChange:h=>l({...o,displayName:h.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),r.jsx("input",{type:"email",value:o.email,onChange:h=>l({...o,email:h.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone"}),r.jsx("input",{type:"tel",value:o.phone,onChange:h=>l({...o,phone:h.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500"})]}),r.jsxs("button",{onClick:c,className:"px-6 py-2 bg-orange-600 text-white rounded-lg hover:bg-orange-700 flex items-center gap-2",children:[r.jsx(Pn,{className:"w-4 h-4"}),"Save Changes"]})]})]}),s==="notifications"&&r.jsxs(se,{className:"p-6",children:[r.jsx("h2",{className:"text-lg font-semibold mb-6",children:"Notification Settings"}),r.jsxs("div",{className:"space-y-4",children:[[{key:"notifyNewTickets",label:"New Ticket Alerts",desc:"Get notified when new tickets arrive"},{key:"notifyAssignments",label:"Assignment Notifications",desc:"Alerts when tickets are assigned to you"},{key:"notifyEscalations",label:"Escalation Alerts",desc:"Urgent notifications for escalated issues"},{key:"soundAlerts",label:"Sound Alerts",desc:"Play sound for incoming notifications"}].map(h=>r.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-gray-900",children:h.label}),r.jsx("p",{className:"text-sm text-gray-500",children:h.desc})]}),r.jsx("button",{onClick:()=>l({...o,[h.key]:!o[h.key]}),className:"text-gray-600",children:o[h.key]?r.jsx(Ys,{className:"w-10 h-10 text-orange-600"}):r.jsx(Gs,{className:"w-10 h-10"})})]},h.key)),r.jsxs("button",{onClick:c,className:"px-6 py-2 bg-orange-600 text-white rounded-lg hover:bg-orange-700 flex items-center gap-2",children:[r.jsx(Pn,{className:"w-4 h-4"}),"Save Changes"]})]})]}),s==="preferences"&&r.jsxs(se,{className:"p-6",children:[r.jsx("h2",{className:"text-lg font-semibold mb-6",children:"Chat Preferences"}),r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-gray-900",children:"Auto-Accept Chats"}),r.jsx("p",{className:"text-sm text-gray-500",children:"Automatically accept incoming chat requests"})]}),r.jsx("button",{onClick:()=>l({...o,autoAcceptChats:!o.autoAcceptChats}),className:"text-gray-600",children:o.autoAcceptChats?r.jsx(Ys,{className:"w-10 h-10 text-orange-600"}):r.jsx(Gs,{className:"w-10 h-10"})})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Max Concurrent Chats"}),r.jsxs("select",{value:o.maxConcurrentChats,onChange:h=>l({...o,maxConcurrentChats:parseInt(h.target.value)}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500",children:[r.jsx("option",{value:1,children:"1 chat"}),r.jsx("option",{value:2,children:"2 chats"}),r.jsx("option",{value:3,children:"3 chats"}),r.jsx("option",{value:5,children:"5 chats"}),r.jsx("option",{value:10,children:"10 chats"})]})]}),r.jsxs("button",{onClick:c,className:"px-6 py-2 bg-orange-600 text-white rounded-lg hover:bg-orange-700 flex items-center gap-2",children:[r.jsx(Pn,{className:"w-4 h-4"}),"Save Changes"]})]})]}),s==="developer"&&r.jsxs("div",{className:"space-y-6",children:[r.jsx(se,{className:"p-6",children:r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsxs("div",{className:"flex items-start gap-4",children:[r.jsx("div",{className:"p-3 bg-indigo-100 rounded-lg",children:r.jsx(Pa,{className:"w-6 h-6 text-indigo-600"})}),r.jsxs("div",{children:[r.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Developer Mode"}),r.jsx("p",{className:"text-gray-500 mt-1",children:"Enable developer mode to access API keys, webhooks, SDK documentation, and developer tools."})]})]}),r.jsx("button",{onClick:t,className:"text-gray-600",children:e?r.jsx(Ys,{className:"w-12 h-12 text-indigo-600"}):r.jsx(Gs,{className:"w-12 h-12"})})]})}),e?r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"p-4 bg-indigo-50 border border-indigo-200 rounded-lg flex items-start gap-3",children:[r.jsx(Ae,{className:"w-5 h-5 text-indigo-600 flex-shrink-0 mt-0.5"}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-indigo-900",children:"Developer Mode is Active"}),r.jsx("p",{className:"text-sm text-indigo-700 mt-1",children:"You now have access to the Developer section in your sidebar. Navigate there to manage API keys, webhooks, and view documentation."})]})]}),r.jsxs(se,{className:"p-6",children:[r.jsx("h3",{className:"font-semibold text-gray-900 mb-4",children:"What you can do with Developer Mode:"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{className:"flex items-start gap-3 p-4 bg-gray-50 rounded-lg",children:[r.jsx("div",{className:"p-2 bg-indigo-100 rounded",children:r.jsx(lt,{className:"w-4 h-4 text-indigo-600"})}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-sm",children:"API Keys"}),r.jsx("p",{className:"text-xs text-gray-500",children:"Generate and manage API credentials"})]})]}),r.jsxs("div",{className:"flex items-start gap-3 p-4 bg-gray-50 rounded-lg",children:[r.jsx("div",{className:"p-2 bg-indigo-100 rounded",children:r.jsx(Lr,{className:"w-4 h-4 text-indigo-600"})}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-sm",children:"Webhooks"}),r.jsx("p",{className:"text-xs text-gray-500",children:"Configure event notifications"})]})]}),r.jsxs("div",{className:"flex items-start gap-3 p-4 bg-gray-50 rounded-lg",children:[r.jsx("div",{className:"p-2 bg-indigo-100 rounded",children:r.jsx(bs,{className:"w-4 h-4 text-indigo-600"})}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-sm",children:"Sandbox Testing"}),r.jsx("p",{className:"text-xs text-gray-500",children:"Test your integration safely"})]})]}),r.jsxs("div",{className:"flex items-start gap-3 p-4 bg-gray-50 rounded-lg",children:[r.jsx("div",{className:"p-2 bg-indigo-100 rounded",children:r.jsx(Pa,{className:"w-4 h-4 text-indigo-600"})}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-sm",children:"SDK & Documentation"}),r.jsx("p",{className:"text-xs text-gray-500",children:"Access code samples and guides"})]})]})]})]})]}):r.jsx(se,{className:"p-6",children:r.jsxs("div",{className:"text-center py-8",children:[r.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:r.jsx(Pa,{className:"w-8 h-8 text-gray-400"})}),r.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"Developer Mode is Disabled"}),r.jsx("p",{className:"text-gray-500 max-w-md mx-auto",children:"Enable developer mode to access API integration features, webhooks, and SDK documentation."})]})})]})]})]})]})})}function kBe(){const[e,t]=p.useState(!1),[s]=p.useState({publicKey:"pk_live_51234567890abcdefghij",secretKey:"sk_live_abcdefghij1234567890xyz",testPublicKey:"pk_test_98765432109876543210",testSecretKey:"sk_test_zyxwvutsrqpo0987654321"}),[a]=p.useState({totalRequests:45672,successRate:99.2,avgLatency:145,activeWebhooks:3}),[n]=p.useState([{id:1,endpoint:"POST /v1/cards",status:200,latency:123,time:"2 mins ago"},{id:2,endpoint:"GET /v1/wallets",status:200,latency:89,time:"5 mins ago"},{id:3,endpoint:"POST /v1/transactions",status:400,latency:45,time:"8 mins ago"},{id:4,endpoint:"GET /v1/users/me",status:200,latency:67,time:"12 mins ago"},{id:5,endpoint:"POST /v1/webhooks",status:201,latency:234,time:"15 mins ago"}]),i=o=>{navigator.clipboard.writeText(o)};return r.jsxs("div",{className:"space-y-6",children:[r.jsxs(se,{className:"p-6",children:[r.jsxs("div",{className:"flex justify-between items-center mb-4",children:[r.jsxs("h2",{className:"text-lg font-semibold flex items-center gap-2",children:[r.jsx(mc,{className:"w-5 h-5 text-indigo-600"}),"API Keys"]}),r.jsx("div",{className:"flex items-center gap-2",children:r.jsx("span",{className:"px-3 py-1 bg-green-100 text-green-700 rounded-full text-xs font-medium",children:"Live Mode"})})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[r.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[r.jsx("p",{className:"text-sm text-gray-500 mb-2",children:"Publishable Key"}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("code",{className:"flex-1 text-sm bg-white px-3 py-2 rounded border font-mono truncate",children:s.publicKey}),r.jsx("button",{onClick:()=>i(s.publicKey),className:"p-2 hover:bg-gray-200 rounded",children:r.jsx(Pr,{className:"w-4 h-4 text-gray-500"})})]})]}),r.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[r.jsx("p",{className:"text-sm text-gray-500 mb-2",children:"Secret Key"}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("code",{className:"flex-1 text-sm bg-white px-3 py-2 rounded border font-mono truncate",children:e?s.secretKey:""}),r.jsx("button",{onClick:()=>t(!e),className:"p-2 hover:bg-gray-200 rounded",children:e?r.jsx(Dn,{className:"w-4 h-4 text-gray-500"}):r.jsx(ir,{className:"w-4 h-4 text-gray-500"})}),r.jsx("button",{onClick:()=>i(s.secretKey),className:"p-2 hover:bg-gray-200 rounded",children:r.jsx(Pr,{className:"w-4 h-4 text-gray-500"})})]})]})]}),r.jsxs("div",{className:"mt-4 p-3 bg-amber-50 border border-amber-200 rounded-lg flex items-start gap-2",children:[r.jsx(dt,{className:"w-5 h-5 text-amber-600 flex-shrink-0 mt-0.5"}),r.jsx("p",{className:"text-sm text-amber-800",children:"Never share your secret key publicly. Use environment variables in production."})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[r.jsx(se,{className:"p-4",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"p-2 bg-indigo-100 rounded-lg",children:r.jsx(yx,{className:"w-5 h-5 text-indigo-600"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-500",children:"Total Requests"}),r.jsx("p",{className:"text-xl font-semibold",children:a.totalRequests.toLocaleString()})]})]})}),r.jsx(se,{className:"p-4",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:r.jsx(Ae,{className:"w-5 h-5 text-green-600"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-500",children:"Success Rate"}),r.jsxs("p",{className:"text-xl font-semibold",children:[a.successRate,"%"]})]})]})}),r.jsx(se,{className:"p-4",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"p-2 bg-cyan-100 rounded-lg",children:r.jsx(Ho,{className:"w-5 h-5 text-cyan-600"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-500",children:"Avg Latency"}),r.jsxs("p",{className:"text-xl font-semibold",children:[a.avgLatency,"ms"]})]})]})}),r.jsx(se,{className:"p-4",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"p-2 bg-purple-100 rounded-lg",children:r.jsx(ph,{className:"w-5 h-5 text-purple-600"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-500",children:"Active Webhooks"}),r.jsx("p",{className:"text-xl font-semibold",children:a.activeWebhooks})]})]})})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[r.jsxs(se,{className:"lg:col-span-2 p-6",children:[r.jsxs("div",{className:"flex justify-between items-center mb-4",children:[r.jsx("h2",{className:"text-lg font-semibold",children:"Recent API Requests"}),r.jsxs("button",{className:"text-sm text-indigo-600 hover:text-indigo-700 flex items-center gap-1",children:[r.jsx(Ot,{className:"w-4 h-4"}),"Refresh"]})]}),r.jsx("div",{className:"space-y-3",children:n.map(o=>r.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded ${o.status>=200&&o.status<300?"bg-green-100 text-green-700":o.status>=400?"bg-red-100 text-red-700":"bg-yellow-100 text-yellow-700"}`,children:o.status}),r.jsx("code",{className:"text-sm font-mono text-gray-700",children:o.endpoint})]}),r.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-500",children:[r.jsxs("span",{children:[o.latency,"ms"]}),r.jsx("span",{children:o.time})]})]},o.id))})]}),r.jsxs(se,{className:"p-6",children:[r.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Quick Start"}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"p-4 bg-gray-900 rounded-lg",children:[r.jsx("p",{className:"text-xs text-gray-400 mb-2",children:"Install SDK"}),r.jsx("code",{className:"text-sm text-green-400 font-mono",children:"npm install @cardpay/sdk"})]}),r.jsxs("div",{className:"p-4 bg-gray-900 rounded-lg",children:[r.jsx("p",{className:"text-xs text-gray-400 mb-2",children:"Initialize"}),r.jsx("pre",{className:"text-sm text-green-400 font-mono whitespace-pre-wrap",children:`import { CardPaySDK } from '@cardpay/sdk';

const sdk = new CardPaySDK({
  apiKey: 'your-api-key',
  environment: 'sandbox'
});`})]}),r.jsx("a",{href:"/docs",className:"block text-center py-2 text-indigo-600 hover:text-indigo-700 text-sm font-medium",children:"View Full Documentation"})]})]})]})]})}function SBe(){const[e,t]=p.useState({}),[s]=p.useState([{id:"key_1",name:"Production Key",type:"live",publicKey:"pk_live_51234567890abcdefghij",secretKey:"sk_live_abcdefghij1234567890xyz",created:"2024-01-15",lastUsed:"2 hours ago"},{id:"key_2",name:"Test Key",type:"test",publicKey:"pk_test_98765432109876543210",secretKey:"sk_test_zyxwvutsrqpo0987654321",created:"2024-01-10",lastUsed:"5 mins ago"}]),a=i=>{navigator.clipboard.writeText(i)},n=i=>{t(o=>({...o,[i]:!o[i]}))};return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsxs("div",{children:[r.jsx("h2",{className:"text-lg font-semibold",children:"API Keys"}),r.jsx("p",{className:"text-sm text-gray-500",children:"Manage your API credentials"})]}),r.jsxs("button",{className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 flex items-center gap-2",children:[r.jsx(sr,{className:"w-4 h-4"}),"Create New Key"]})]}),r.jsx("div",{className:"space-y-4",children:s.map(i=>r.jsxs(se,{className:"p-6",children:[r.jsxs("div",{className:"flex justify-between items-start mb-4",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:`p-2 rounded-lg ${i.type==="live"?"bg-green-100":"bg-amber-100"}`,children:r.jsx(mc,{className:`w-5 h-5 ${i.type==="live"?"text-green-600":"text-amber-600"}`})}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-semibold",children:i.name}),r.jsx("span",{className:`text-xs px-2 py-0.5 rounded-full ${i.type==="live"?"bg-green-100 text-green-700":"bg-amber-100 text-amber-700"}`,children:i.type==="live"?"Live":"Test"})]})]}),r.jsx("button",{className:"p-2 text-gray-400 hover:text-red-500 hover:bg-red-50 rounded",children:r.jsx(Js,{className:"w-4 h-4"})})]}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Publishable Key"}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("code",{className:"flex-1 text-sm bg-gray-50 px-3 py-2 rounded border font-mono truncate",children:i.publicKey}),r.jsx("button",{onClick:()=>a(i.publicKey),className:"p-2 hover:bg-gray-100 rounded",children:r.jsx(Pr,{className:"w-4 h-4 text-gray-500"})})]})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Secret Key"}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("code",{className:"flex-1 text-sm bg-gray-50 px-3 py-2 rounded border font-mono truncate",children:e[i.id]?i.secretKey:""}),r.jsx("button",{onClick:()=>n(i.id),className:"p-2 hover:bg-gray-100 rounded",children:e[i.id]?r.jsx(Dn,{className:"w-4 h-4 text-gray-500"}):r.jsx(ir,{className:"w-4 h-4 text-gray-500"})}),r.jsx("button",{onClick:()=>a(i.secretKey),className:"p-2 hover:bg-gray-100 rounded",children:r.jsx(Pr,{className:"w-4 h-4 text-gray-500"})})]})]})]}),r.jsxs("div",{className:"flex items-center gap-4 mt-4 pt-4 border-t text-xs text-gray-500",children:[r.jsxs("span",{children:["Created: ",i.created]}),r.jsxs("span",{children:["Last used: ",i.lastUsed]})]})]},i.id))})]})}function CBe(){const[e]=p.useState([{id:"wh_1",url:"https://example.com/webhooks/payments",events:["payment.completed","payment.failed"],status:"active",lastTriggered:"5 mins ago"},{id:"wh_2",url:"https://api.myapp.com/hooks/cards",events:["card.created","card.frozen"],status:"active",lastTriggered:"2 hours ago"},{id:"wh_3",url:"https://test.example.com/webhook",events:["*"],status:"disabled",lastTriggered:"Never"}]);return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsxs("div",{children:[r.jsx("h2",{className:"text-lg font-semibold",children:"Webhooks"}),r.jsx("p",{className:"text-sm text-gray-500",children:"Configure webhook endpoints for event notifications"})]}),r.jsxs("button",{className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 flex items-center gap-2",children:[r.jsx(sr,{className:"w-4 h-4"}),"Add Endpoint"]})]}),r.jsx("div",{className:"space-y-4",children:e.map(t=>r.jsxs(se,{className:"p-6",children:[r.jsxs("div",{className:"flex justify-between items-start",children:[r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx("div",{className:`p-2 rounded-lg ${t.status==="active"?"bg-green-100":"bg-gray-100"}`,children:r.jsx(ph,{className:`w-5 h-5 ${t.status==="active"?"text-green-600":"text-gray-400"}`})}),r.jsxs("div",{children:[r.jsx("code",{className:"text-sm font-mono",children:t.url}),r.jsx("div",{className:"flex flex-wrap gap-1 mt-2",children:t.events.map((s,a)=>r.jsx("span",{className:"px-2 py-0.5 bg-indigo-50 text-indigo-700 text-xs rounded",children:s},a))})]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${t.status==="active"?"bg-green-100 text-green-700":"bg-gray-100 text-gray-500"}`,children:t.status}),r.jsx("button",{className:"p-2 text-gray-400 hover:text-red-500 hover:bg-red-50 rounded",children:r.jsx(Js,{className:"w-4 h-4"})})]})]}),r.jsxs("div",{className:"mt-4 pt-4 border-t text-xs text-gray-500",children:["Last triggered: ",t.lastTriggered]})]},t.id))}),r.jsxs(se,{className:"p-6",children:[r.jsx("h3",{className:"font-semibold mb-4",children:"Webhook Signature Verification"}),r.jsx("div",{className:"p-4 bg-gray-900 rounded-lg",children:r.jsx("pre",{className:"text-sm text-green-400 font-mono whitespace-pre-wrap",children:`// Verify webhook signature
const isValid = sdk.webhooks.verifySignature({
  payload: req.body,
  signature: req.headers['x-webhook-signature'],
  secret: process.env.WEBHOOK_SECRET
});`})})]})]})}function _Be(){const[e]=p.useState([{id:1,method:"POST",endpoint:"/v1/payments/charge",status:200,latency:245,time:"2024-01-20 14:32:15",requestId:"req_abc123"},{id:2,method:"GET",endpoint:"/v1/wallets/balance",status:200,latency:89,time:"2024-01-20 14:31:42",requestId:"req_def456"},{id:3,method:"POST",endpoint:"/v1/cards/virtual",status:400,latency:156,time:"2024-01-20 14:30:18",requestId:"req_ghi789"},{id:4,method:"GET",endpoint:"/v1/transactions",status:200,latency:312,time:"2024-01-20 14:28:55",requestId:"req_jkl012"},{id:5,method:"POST",endpoint:"/v1/transfers",status:201,latency:423,time:"2024-01-20 14:27:33",requestId:"req_mno345"}]);return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsxs("div",{children:[r.jsx("h2",{className:"text-lg font-semibold",children:"Request Logs"}),r.jsx("p",{className:"text-sm text-gray-500",children:"Monitor your API requests"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs("select",{className:"px-3 py-2 border border-gray-300 rounded-lg text-sm",children:[r.jsx("option",{children:"All Methods"}),r.jsx("option",{children:"GET"}),r.jsx("option",{children:"POST"}),r.jsx("option",{children:"PUT"}),r.jsx("option",{children:"DELETE"})]}),r.jsxs("select",{className:"px-3 py-2 border border-gray-300 rounded-lg text-sm",children:[r.jsx("option",{children:"All Status"}),r.jsx("option",{children:"2xx Success"}),r.jsx("option",{children:"4xx Client Error"}),r.jsx("option",{children:"5xx Server Error"})]})]})]}),r.jsx(se,{className:"overflow-hidden",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{className:"bg-gray-50",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Method"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Endpoint"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Status"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Latency"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Time"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Request ID"})]})}),r.jsx("tbody",{className:"divide-y divide-gray-200",children:e.map(t=>r.jsxs("tr",{className:"hover:bg-gray-50 cursor-pointer",children:[r.jsx("td",{className:"px-6 py-4",children:r.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded ${t.method==="GET"?"bg-blue-100 text-blue-700":t.method==="POST"?"bg-green-100 text-green-700":t.method==="PUT"?"bg-amber-100 text-amber-700":"bg-red-100 text-red-700"}`,children:t.method})}),r.jsx("td",{className:"px-6 py-4",children:r.jsx("code",{className:"text-sm font-mono",children:t.endpoint})}),r.jsx("td",{className:"px-6 py-4",children:r.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded ${t.status>=200&&t.status<300?"bg-green-100 text-green-700":t.status>=400&&t.status<500?"bg-amber-100 text-amber-700":"bg-red-100 text-red-700"}`,children:t.status})}),r.jsxs("td",{className:"px-6 py-4 text-sm text-gray-500",children:[t.latency,"ms"]}),r.jsx("td",{className:"px-6 py-4 text-sm text-gray-500",children:t.time}),r.jsx("td",{className:"px-6 py-4",children:r.jsx("code",{className:"text-xs text-gray-500",children:t.requestId})})]},t.id))})]})})]})}function EBe(){const[e,t]=p.useState("wallet.getBalance"),[s,a]=p.useState(null),n=[{id:"wallet.getBalance",name:"Get Wallet Balance",method:"GET"},{id:"wallet.topUp",name:"Top Up Wallet",method:"POST"},{id:"cards.createVirtual",name:"Create Virtual Card",method:"POST"},{id:"payments.charge",name:"Charge Payment",method:"POST"},{id:"transfers.send",name:"Send Transfer",method:"POST"}],i=()=>{a(JSON.stringify({success:!0,data:{balance:125e3,currency:"SLE",available:12e4,pending:5e3},requestId:"req_sandbox_"+Date.now()},null,2))};return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{children:[r.jsx("h2",{className:"text-lg font-semibold",children:"API Sandbox"}),r.jsx("p",{className:"text-sm text-gray-500",children:"Test API endpoints in a safe environment"})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[r.jsxs(se,{className:"p-6",children:[r.jsx("h3",{className:"font-semibold mb-4",children:"Select Endpoint"}),r.jsx("div",{className:"space-y-2",children:n.map(o=>r.jsxs("button",{onClick:()=>t(o.id),className:`w-full flex items-center justify-between p-3 rounded-lg text-left ${e===o.id?"bg-indigo-50 border-2 border-indigo-500":"bg-gray-50 hover:bg-gray-100"}`,children:[r.jsx("span",{className:"font-medium text-sm",children:o.name}),r.jsx("span",{className:`px-2 py-0.5 text-xs rounded ${o.method==="GET"?"bg-blue-100 text-blue-700":"bg-green-100 text-green-700"}`,children:o.method})]},o.id))}),r.jsxs("button",{onClick:i,className:"w-full mt-4 px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 flex items-center justify-center gap-2",children:[r.jsx(Hy,{className:"w-4 h-4"}),"Run Test"]})]}),r.jsxs(se,{className:"p-6",children:[r.jsx("h3",{className:"font-semibold mb-4",children:"Response"}),r.jsx("div",{className:"bg-gray-900 rounded-lg p-4 min-h-[300px]",children:s?r.jsx("pre",{className:"text-sm text-green-400 font-mono whitespace-pre-wrap",children:s}):r.jsx("p",{className:"text-gray-500 text-sm",children:"Run a test to see the response"})})]})]})]})}function ABe(){const[e,t]=p.useState("javascript"),s=[{id:"javascript",name:"JavaScript/Node.js"},{id:"python",name:"Python"},{id:"go",name:"Go"},{id:"php",name:"PHP"},{id:"java",name:"Java"}],a={javascript:`import { CardPaySDK } from '@cardpay/sdk';

const sdk = new CardPaySDK({
  apiKey: process.env.CARDPAY_API_KEY,
  environment: 'sandbox'
});

// Get wallet balance
const balance = await sdk.wallet.getBalance();
console.log(balance);

// Create virtual card
const card = await sdk.cards.createVirtual({
  spendingLimit: 500000,
  currency: 'SLE'
});

// Process payment
const payment = await sdk.payments.charge({
  amount: 25000,
  currency: 'SLE',
  customerId: 'cust_123'
});`,python:`from cardpay import CardPaySDK

sdk = CardPaySDK(
    api_key=os.environ['CARDPAY_API_KEY'],
    environment='sandbox'
)

# Get wallet balance
balance = sdk.wallet.get_balance()
print(balance)

# Create virtual card
card = sdk.cards.create_virtual(
    spending_limit=500000,
    currency='SLE'
)

# Process payment
payment = sdk.payments.charge(
    amount=25000,
    currency='SLE',
    customer_id='cust_123'
)`,go:`package main

import (
    "github.com/cardpay/sdk-go"
)

func main() {
    client := cardpay.NewClient(
        os.Getenv("CARDPAY_API_KEY"),
        cardpay.WithEnvironment("sandbox"),
    )

    // Get wallet balance
    balance, _ := client.Wallet.GetBalance()

    // Create virtual card
    card, _ := client.Cards.CreateVirtual(&cardpay.CardParams{
        SpendingLimit: 500000,
        Currency: "SLE",
    })

    // Process payment
    payment, _ := client.Payments.Charge(&cardpay.ChargeParams{
        Amount: 25000,
        Currency: "SLE",
        CustomerID: "cust_123",
    })
}`,php:`<?php
use SoftTouch\\SDK\\CardPaySDK;

$sdk = new CardPaySDK([
    'api_key' => getenv('CARDPAY_API_KEY'),
    'environment' => 'sandbox'
]);

// Get wallet balance
$balance = $sdk->wallet->getBalance();

// Create virtual card
$card = $sdk->cards->createVirtual([
    'spending_limit' => 500000,
    'currency' => 'SLE'
]);

// Process payment
$payment = $sdk->payments->charge([
    'amount' => 25000,
    'currency' => 'SLE',
    'customer_id' => 'cust_123'
]);`,java:`import com.cardpay.sdk.CardPaySDK;

public class Main {
    public static void main(String[] args) {
        CardPaySDK sdk = new CardPaySDK.Builder()
            .apiKey(System.getenv("CARDPAY_API_KEY"))
            .environment("sandbox")
            .build();

        // Get wallet balance
        Balance balance = sdk.wallet().getBalance();

        // Create virtual card
        Card card = sdk.cards().createVirtual(
            new VirtualCardParams()
                .setSpendingLimit(500000)
                .setCurrency("SLE")
        );

        // Process payment
        Payment payment = sdk.payments().charge(
            new ChargeParams()
                .setAmount(25000)
                .setCurrency("SLE")
                .setCustomerId("cust_123")
        );
    }
}`};return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{children:[r.jsx("h2",{className:"text-lg font-semibold",children:"SDK & Documentation"}),r.jsx("p",{className:"text-sm text-gray-500",children:"Code examples and integration guides"})]}),r.jsxs(se,{className:"p-6",children:[r.jsx("div",{className:"flex items-center gap-4 mb-4 border-b pb-4",children:s.map(n=>r.jsx("button",{onClick:()=>t(n.id),className:`px-4 py-2 rounded-lg text-sm font-medium ${e===n.id?"bg-indigo-100 text-indigo-700":"text-gray-500 hover:bg-gray-100"}`,children:n.name},n.id))}),r.jsx("div",{className:"bg-gray-900 rounded-lg p-4",children:r.jsx("pre",{className:"text-sm text-green-400 font-mono whitespace-pre-wrap overflow-x-auto",children:a[e]})})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsxs(se,{className:"p-6",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[r.jsx("div",{className:"p-2 bg-indigo-100 rounded-lg",children:r.jsx(VV,{className:"w-5 h-5 text-indigo-600"})}),r.jsx("h3",{className:"font-semibold",children:"NPM Package"})]}),r.jsx("p",{className:"text-sm text-gray-500 mb-3",children:"Install via npm or yarn"}),r.jsx("code",{className:"text-sm bg-gray-100 px-3 py-2 rounded block",children:"npm install @cardpay/sdk"})]}),r.jsxs(se,{className:"p-6",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[r.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:r.jsx(Wie,{className:"w-5 h-5 text-green-600"})}),r.jsx("h3",{className:"font-semibold",children:"API Reference"})]}),r.jsx("p",{className:"text-sm text-gray-500 mb-3",children:"Complete API documentation"}),r.jsxs("a",{href:"/docs",className:"text-sm text-indigo-600 hover:text-indigo-700 flex items-center gap-1",children:["View Docs ",r.jsx(da,{className:"w-3 h-3"})]})]}),r.jsxs(se,{className:"p-6",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[r.jsx("div",{className:"p-2 bg-purple-100 rounded-lg",children:r.jsx(j6,{className:"w-5 h-5 text-purple-600"})}),r.jsx("h3",{className:"font-semibold",children:"GitHub"})]}),r.jsx("p",{className:"text-sm text-gray-500 mb-3",children:"Source code and examples"}),r.jsxs("a",{href:"#",className:"text-sm text-indigo-600 hover:text-indigo-700 flex items-center gap-1",children:["View on GitHub ",r.jsx(da,{className:"w-3 h-3"})]})]})]})]})}function PBe(){const[e,t]=p.useState("authorization"),[s,a]=p.useState(!1),[n,i]=p.useState([]),[o,l]=p.useState({cardId:"",amount:"",currency:"USD",merchantName:"",merchantCategory:"5411",merchantCity:"",merchantCountry:"US",authorizationType:"purchase"}),c=[{code:"5411",name:"Grocery Stores"},{code:"5812",name:"Restaurants"},{code:"5912",name:"Drug Stores"},{code:"5541",name:"Gas Stations"},{code:"5311",name:"Department Stores"},{code:"5999",name:"Miscellaneous Retail"},{code:"7011",name:"Hotels & Lodging"},{code:"4111",name:"Transportation"},{code:"6011",name:"ATM/Cash Withdrawal"},{code:"7995",name:"Gambling"}],d=async()=>{a(!0),await new Promise(v=>setTimeout(v,1500));const y={id:`sim_${Date.now()}`,type:e.charAt(0).toUpperCase()+e.slice(1),status:Math.random()>.2?"success":"failed",request:{cardId:o.cardId,amount:parseFloat(o.amount)||0,currency:o.currency,merchant:{name:o.merchantName,category:o.merchantCategory,city:o.merchantCity,country:o.merchantCountry},type:o.authorizationType},response:Math.random()>.2?{approved:!0,authorizationCode:`AUTH${Math.random().toString(36).substr(2,8).toUpperCase()}`,balance:1e3-(parseFloat(o.amount)||0),message:"Transaction approved"}:{approved:!1,declineCode:"INSUFFICIENT_FUNDS",message:"Transaction declined due to insufficient funds"},timestamp:new Date().toISOString(),duration:Math.floor(Math.random()*200)+50};i([y,...n]),a(!1)},h=()=>{l({cardId:"",amount:"",currency:"USD",merchantName:"",merchantCategory:"5411",merchantCity:"",merchantCountry:"US",authorizationType:"purchase"})},f=y=>{navigator.clipboard.writeText(y)},x=y=>{switch(y){case"success":return r.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-700",children:[r.jsx(Ae,{className:"w-3 h-3"})," Success"]});case"failed":return r.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium bg-red-100 text-red-700",children:[r.jsx(Wt,{className:"w-3 h-3"})," Failed"]});default:return r.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium bg-yellow-100 text-yellow-700",children:[r.jsx(_t,{className:"w-3 h-3"})," Pending"]})}};return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsxs("div",{children:[r.jsx("h2",{className:"text-lg font-semibold",children:"Transaction Simulator"}),r.jsx("p",{className:"text-sm text-gray-500",children:"Test card transactions in sandbox environment"})]}),r.jsxs("span",{className:"px-3 py-1 bg-yellow-100 text-yellow-700 rounded-full text-xs font-medium flex items-center gap-1",children:[r.jsx(E6,{className:"w-3 h-3"}),"Sandbox Mode"]})]}),r.jsx(se,{className:"p-4 bg-blue-50 border-blue-200",children:r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx(Ht,{className:"w-5 h-5 text-blue-600 flex-shrink-0 mt-0.5"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-blue-800",children:"Sandbox Environment"}),r.jsx("p",{className:"text-sm text-blue-700 mt-1",children:'All transactions in the simulator are test transactions and do not affect real cards or accounts. Use test card IDs starting with "card_test_" for simulations.'})]})]})}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[r.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[r.jsx(se,{className:"p-1",children:r.jsx("div",{className:"flex gap-1",children:["authorization","clearing","refund","reversal"].map(y=>r.jsx("button",{onClick:()=>t(y),className:`flex-1 px-4 py-2 text-sm font-medium rounded-lg transition-colors ${e===y?"bg-indigo-600 text-white":"text-gray-600 hover:bg-gray-100"}`,children:y.charAt(0).toUpperCase()+y.slice(1)},y))})}),r.jsxs(se,{className:"p-6",children:[r.jsxs("h3",{className:"text-md font-semibold mb-4",children:[e==="authorization"&&"Simulate Authorization",e==="clearing"&&"Simulate Clearing",e==="refund"&&"Simulate Refund",e==="reversal"&&"Simulate Reversal"]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{className:"md:col-span-2",children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[r.jsx(lt,{className:"w-4 h-4 inline mr-1"}),"Card ID"]}),r.jsx("input",{type:"text",value:o.cardId,onChange:y=>l({...o,cardId:y.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 font-mono text-sm",placeholder:"card_test_1234567890"})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[r.jsx(Cr,{className:"w-4 h-4 inline mr-1"}),"Amount"]}),r.jsx("input",{type:"number",step:"0.01",value:o.amount,onChange:y=>l({...o,amount:y.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"100.00"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Currency"}),r.jsxs("div",{className:"relative",children:[r.jsxs("select",{value:o.currency,onChange:y=>l({...o,currency:y.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 appearance-none",children:[r.jsx("option",{value:"USD",children:"USD - US Dollar"}),r.jsx("option",{value:"NGN",children:"NGN - Nigerian Naira"}),r.jsx("option",{value:"EUR",children:"EUR - Euro"}),r.jsx("option",{value:"GBP",children:"GBP - British Pound"})]}),r.jsx(ys,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400 pointer-events-none"})]})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[r.jsx(mr,{className:"w-4 h-4 inline mr-1"}),"Merchant Name"]}),r.jsx("input",{type:"text",value:o.merchantName,onChange:y=>l({...o,merchantName:y.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"Test Merchant"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Merchant Category (MCC)"}),r.jsxs("div",{className:"relative",children:[r.jsx("select",{value:o.merchantCategory,onChange:y=>l({...o,merchantCategory:y.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 appearance-none",children:c.map(y=>r.jsxs("option",{value:y.code,children:[y.code," - ",y.name]},y.code))}),r.jsx(ys,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400 pointer-events-none"})]})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[r.jsx(Vi,{className:"w-4 h-4 inline mr-1"}),"Merchant City"]}),r.jsx("input",{type:"text",value:o.merchantCity,onChange:y=>l({...o,merchantCity:y.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"New York"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Merchant Country"}),r.jsxs("div",{className:"relative",children:[r.jsxs("select",{value:o.merchantCountry,onChange:y=>l({...o,merchantCountry:y.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 appearance-none",children:[r.jsx("option",{value:"US",children:"United States"}),r.jsx("option",{value:"NG",children:"Nigeria"}),r.jsx("option",{value:"GB",children:"United Kingdom"}),r.jsx("option",{value:"DE",children:"Germany"}),r.jsx("option",{value:"FR",children:"France"})]}),r.jsx(ys,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400 pointer-events-none"})]})]}),r.jsxs("div",{className:"md:col-span-2",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Authorization Type"}),r.jsx("div",{className:"flex gap-4",children:["purchase","atm_withdrawal","preauth","refund"].map(y=>r.jsxs("label",{className:"flex items-center gap-2",children:[r.jsx("input",{type:"radio",name:"authType",value:y,checked:o.authorizationType===y,onChange:v=>l({...o,authorizationType:v.target.value}),className:"text-indigo-600 focus:ring-indigo-500"}),r.jsx("span",{className:"text-sm text-gray-700 capitalize",children:y.replace("_"," ")})]},y))})]})]}),r.jsxs("div",{className:"flex gap-3 mt-6",children:[r.jsx("button",{onClick:d,disabled:s,className:"flex-1 px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:s?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Simulating..."]}):r.jsxs(r.Fragment,{children:[r.jsx(Hy,{className:"w-4 h-4"}),"Run Simulation"]})}),r.jsxs("button",{onClick:h,className:"px-4 py-2 bg-white border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 flex items-center gap-2",children:[r.jsx(Df,{className:"w-4 h-4"}),"Reset"]})]})]})]}),r.jsxs("div",{className:"space-y-6",children:[r.jsxs(se,{className:"p-6",children:[r.jsxs("h3",{className:"text-md font-semibold mb-4 flex items-center gap-2",children:[r.jsx(Ho,{className:"w-5 h-5 text-yellow-600"}),"Test Cards"]}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg",children:[r.jsxs("div",{className:"flex justify-between items-start mb-2",children:[r.jsx("span",{className:"text-xs font-medium text-green-600",children:"Always Approved"}),r.jsx("button",{onClick:()=>{l({...o,cardId:"card_test_approved"}),f("card_test_approved")},className:"p-1 hover:bg-gray-200 rounded",children:r.jsx(Pr,{className:"w-3 h-3 text-gray-500"})})]}),r.jsx("code",{className:"text-sm font-mono text-gray-700",children:"card_test_approved"})]}),r.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg",children:[r.jsxs("div",{className:"flex justify-between items-start mb-2",children:[r.jsx("span",{className:"text-xs font-medium text-red-600",children:"Always Declined"}),r.jsx("button",{onClick:()=>{l({...o,cardId:"card_test_declined"}),f("card_test_declined")},className:"p-1 hover:bg-gray-200 rounded",children:r.jsx(Pr,{className:"w-3 h-3 text-gray-500"})})]}),r.jsx("code",{className:"text-sm font-mono text-gray-700",children:"card_test_declined"})]}),r.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg",children:[r.jsxs("div",{className:"flex justify-between items-start mb-2",children:[r.jsx("span",{className:"text-xs font-medium text-yellow-600",children:"Insufficient Funds"}),r.jsx("button",{onClick:()=>{l({...o,cardId:"card_test_nsf"}),f("card_test_nsf")},className:"p-1 hover:bg-gray-200 rounded",children:r.jsx(Pr,{className:"w-3 h-3 text-gray-500"})})]}),r.jsx("code",{className:"text-sm font-mono text-gray-700",children:"card_test_nsf"})]}),r.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg",children:[r.jsxs("div",{className:"flex justify-between items-start mb-2",children:[r.jsx("span",{className:"text-xs font-medium text-purple-600",children:"Requires 3DS"}),r.jsx("button",{onClick:()=>{l({...o,cardId:"card_test_3ds"}),f("card_test_3ds")},className:"p-1 hover:bg-gray-200 rounded",children:r.jsx(Pr,{className:"w-3 h-3 text-gray-500"})})]}),r.jsx("code",{className:"text-sm font-mono text-gray-700",children:"card_test_3ds"})]})]})]}),r.jsxs(se,{className:"p-6",children:[r.jsx("h3",{className:"text-md font-semibold mb-4",children:"Response Codes"}),r.jsxs("div",{className:"space-y-2 text-sm",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-600",children:"00"}),r.jsx("span",{className:"text-green-600",children:"Approved"})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-600",children:"51"}),r.jsx("span",{className:"text-red-600",children:"Insufficient Funds"})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-600",children:"05"}),r.jsx("span",{className:"text-red-600",children:"Do Not Honor"})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-600",children:"14"}),r.jsx("span",{className:"text-red-600",children:"Invalid Card"})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-600",children:"54"}),r.jsx("span",{className:"text-red-600",children:"Expired Card"})]})]})]})]})]}),n.length>0&&r.jsxs(se,{className:"overflow-hidden",children:[r.jsxs("div",{className:"px-6 py-4 border-b border-gray-200 flex justify-between items-center",children:[r.jsx("h3",{className:"text-md font-semibold",children:"Simulation History"}),r.jsx("button",{onClick:()=>i([]),className:"text-sm text-gray-500 hover:text-gray-700",children:"Clear History"})]}),r.jsx("div",{className:"divide-y divide-gray-200",children:n.map(y=>r.jsxs("div",{className:"p-4 hover:bg-gray-50",children:[r.jsxs("div",{className:"flex items-center justify-between mb-3",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("span",{className:"font-mono text-sm text-gray-500",children:y.id}),r.jsx("span",{className:"px-2 py-1 bg-gray-100 text-gray-700 rounded text-xs font-medium",children:y.type}),x(y.status)]}),r.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-500",children:[r.jsxs("span",{children:[y.duration,"ms"]}),r.jsx("span",{children:new Date(y.timestamp).toLocaleTimeString()})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"p-3 bg-gray-900 rounded-lg",children:[r.jsx("p",{className:"text-xs text-gray-400 mb-1",children:"Request"}),r.jsx("pre",{className:"text-xs text-green-400 font-mono overflow-x-auto",children:JSON.stringify(y.request,null,2)})]}),r.jsxs("div",{className:"p-3 bg-gray-900 rounded-lg",children:[r.jsx("p",{className:"text-xs text-gray-400 mb-1",children:"Response"}),r.jsx("pre",{className:"text-xs text-green-400 font-mono overflow-x-auto",children:JSON.stringify(y.response,null,2)})]})]})]},y.id))})]})]})}function TBe(){return r.jsx(HT,{homeRoute:"/agent",homeLabel:"Agent Portal",basePath:"/agent/developer",children:r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Developer Dashboard"}),r.jsx("p",{className:"text-gray-500",children:"Manage your API integration and developer resources"})]}),r.jsxs(a6,{children:[r.jsx(Ge,{index:!0,element:r.jsx(kBe,{})}),r.jsx(Ge,{path:"api-keys",element:r.jsx(SBe,{})}),r.jsx(Ge,{path:"webhooks",element:r.jsx(CBe,{})}),r.jsx(Ge,{path:"logs",element:r.jsx(_Be,{})}),r.jsx(Ge,{path:"sandbox",element:r.jsx(EBe,{})}),r.jsx(Ge,{path:"simulator",element:r.jsx(PBe,{})}),r.jsx(Ge,{path:"docs",element:r.jsx(ABe,{})})]})]})})}function IBe(){const{user:e}=pt(),[t,s]=p.useState([]),[a,n]=p.useState(!0),[i,o]=p.useState("all"),[l,c]=p.useState(""),[d,h]=p.useState("month"),[f,x]=p.useState(1),[y,v]=p.useState(!0),w=20,[N,k]=p.useState({totalCashIn:0,totalCashOut:0,totalCommissions:0,transactionCount:0}),[C,E]=p.useState(null);p.useEffect(()=>{cr.getDefaultCurrency().then(E)},[]),p.useEffect(()=>{e!=null&&e.id&&P()},[e==null?void 0:e.id,i,d,f]);const _=(C==null?void 0:C.symbol)||"Le",T=B=>`${_} ${B.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}`,A=()=>{const B=new Date,O=new Date(B.getFullYear(),B.getMonth(),B.getDate());switch(d){case"today":return{startDate:O,endDate:B};case"week":const F=new Date(O);return F.setDate(F.getDate()-7),{startDate:F,endDate:B};case"month":const q=new Date(O);return q.setMonth(q.getMonth()-1),{startDate:q,endDate:B};default:return{}}},P=async()=>{if(e!=null&&e.id){n(!0);try{const{startDate:B,endDate:O}=A(),F=i==="all"?void 0:i,q=await Ua.getTransactions(e.id,{type:F,startDate:B,endDate:O,limit:w,offset:(f-1)*w});s(q),v(q.length===w);let H=0,K=0,V=0;for(const z of q)z.type==="CASH_IN"||z.type==="DEPOSIT"?H+=z.amount:z.type==="CASH_OUT"&&(K+=z.amount),V+=z.commission||0;k({totalCashIn:H,totalCashOut:K,totalCommissions:V,transactionCount:q.length})}catch(B){console.error("Error fetching transactions:",B)}finally{n(!1)}}},M=t.filter(B=>{var F,q,H;if(!l)return!0;const O=l.toLowerCase();return((F=B.reference)==null?void 0:F.toLowerCase().includes(O))||((q=B.description)==null?void 0:q.toLowerCase().includes(O))||((H=B.customerName)==null?void 0:H.toLowerCase().includes(O))}),R=B=>new Date(B).toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),$=B=>{switch(B){case"CASH_IN":case"DEPOSIT":return r.jsx(An,{className:"w-4 h-4 text-green-600 dark:text-green-400"});case"CASH_OUT":return r.jsx(Rr,{className:"w-4 h-4 text-red-600 dark:text-red-400"});default:return r.jsx(Tn,{className:"w-4 h-4 text-blue-600 dark:text-blue-400"})}},W=B=>{switch(B){case"CASH_IN":case"DEPOSIT":return"bg-green-100 dark:bg-green-900/30";case"CASH_OUT":return"bg-red-100 dark:bg-red-900/30";default:return"bg-blue-100 dark:bg-blue-900/30"}},I=B=>{switch(B){case"CASH_IN":case"DEPOSIT":return"text-green-600 dark:text-green-400";case"CASH_OUT":return"text-red-600 dark:text-red-400";default:return"text-gray-900 dark:text-white"}};return r.jsx(Bx,{children:r.jsxs(Pe.div,{className:"space-y-6",initial:{opacity:0},animate:{opacity:1},children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Transactions"}),r.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"View your transaction history"})]}),r.jsxs("div",{className:"flex gap-3",children:[r.jsxs(Pe.button,{whileHover:{scale:1.02},whileTap:{scale:.98},className:"px-4 py-2 text-sm bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 flex items-center gap-2",children:[r.jsx(gs,{className:"w-4 h-4"}),"Export"]}),r.jsxs(Pe.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:P,className:"px-4 py-2 text-sm bg-orange-600 text-white rounded-lg hover:bg-orange-700 flex items-center gap-2",children:[r.jsx(Ot,{className:`w-4 h-4 ${a?"animate-spin":""}`}),"Refresh"]})]})]}),r.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[r.jsx(Be,{className:"p-4",delay:.1,children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"p-2 bg-green-100 dark:bg-green-900/30 rounded-lg",children:r.jsx(An,{className:"w-5 h-5 text-green-600 dark:text-green-400"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Total Cash In"}),r.jsx("p",{className:"text-lg font-bold text-green-600 dark:text-green-400",children:T(N.totalCashIn)})]})]})}),r.jsx(Be,{className:"p-4",delay:.15,children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"p-2 bg-red-100 dark:bg-red-900/30 rounded-lg",children:r.jsx(Rr,{className:"w-5 h-5 text-red-600 dark:text-red-400"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Total Cash Out"}),r.jsx("p",{className:"text-lg font-bold text-red-600 dark:text-red-400",children:T(N.totalCashOut)})]})]})}),r.jsx(Be,{className:"p-4",delay:.2,children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"p-2 bg-purple-100 dark:bg-purple-900/30 rounded-lg",children:r.jsx(Tn,{className:"w-5 h-5 text-purple-600 dark:text-purple-400"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Commissions"}),r.jsx("p",{className:"text-lg font-bold text-purple-600 dark:text-purple-400",children:T(N.totalCommissions)})]})]})}),r.jsx(Be,{className:"p-4",delay:.25,children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-900/30 rounded-lg",children:r.jsx(Li,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Transactions"}),r.jsx("p",{className:"text-lg font-bold text-blue-600 dark:text-blue-400",children:N.transactionCount})]})]})})]}),r.jsx(Be,{className:"p-4",delay:.3,children:r.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[r.jsxs("div",{className:"flex-1 relative",children:[r.jsx(Nr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),r.jsx("input",{type:"text",placeholder:"Search by reference, description...",value:l,onChange:B=>c(B.target.value),className:"w-full pl-10 pr-4 py-2.5 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-orange-500"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(el,{className:"w-5 h-5 text-gray-400"}),r.jsxs("select",{value:i,onChange:B=>{o(B.target.value),x(1)},className:"px-4 py-2.5 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-orange-500",children:[r.jsx("option",{value:"all",children:"All Types"}),r.jsx("option",{value:"CASH_IN",children:"Cash In"}),r.jsx("option",{value:"CASH_OUT",children:"Cash Out"}),r.jsx("option",{value:"TRANSFER",children:"Transfers"}),r.jsx("option",{value:"COMMISSION",children:"Commissions"})]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Li,{className:"w-5 h-5 text-gray-400"}),r.jsxs("select",{value:d,onChange:B=>{h(B.target.value),x(1)},className:"px-4 py-2.5 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-orange-500",children:[r.jsx("option",{value:"today",children:"Today"}),r.jsx("option",{value:"week",children:"Last 7 Days"}),r.jsx("option",{value:"month",children:"Last 30 Days"}),r.jsx("option",{value:"all",children:"All Time"})]})]})]})}),r.jsx(Be,{className:"overflow-hidden",delay:.4,children:a?r.jsx("div",{className:"flex items-center justify-center py-12",children:r.jsx(Ot,{className:"w-8 h-8 animate-spin text-gray-400"})}):M.length===0?r.jsxs("div",{className:"text-center py-12",children:[r.jsx(Tn,{className:"w-12 h-12 text-gray-300 dark:text-gray-600 mx-auto mb-3"}),r.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"No transactions found"}),r.jsx("p",{className:"text-sm text-gray-400 dark:text-gray-500",children:"Try adjusting your filters"})]}):r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"hidden md:block overflow-x-auto",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"text-left text-xs text-gray-500 dark:text-gray-400 border-b border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-800/50",children:[r.jsx("th",{className:"px-6 py-3 font-medium",children:"Type"}),r.jsx("th",{className:"px-6 py-3 font-medium",children:"Reference"}),r.jsx("th",{className:"px-6 py-3 font-medium",children:"Description"}),r.jsx("th",{className:"px-6 py-3 font-medium",children:"Amount"}),r.jsx("th",{className:"px-6 py-3 font-medium",children:"Commission"}),r.jsx("th",{className:"px-6 py-3 font-medium",children:"Status"}),r.jsx("th",{className:"px-6 py-3 font-medium",children:"Date"})]})}),r.jsx("tbody",{className:"divide-y divide-gray-100 dark:divide-gray-700",children:M.map(B=>r.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700/50",children:[r.jsx("td",{className:"px-6 py-4",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:`p-2 rounded-lg ${W(B.type)}`,children:$(B.type)}),r.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:B.type.replace("_"," ")})]})}),r.jsx("td",{className:"px-6 py-4",children:r.jsx("span",{className:"font-mono text-sm text-gray-600 dark:text-gray-400",children:B.reference})}),r.jsx("td",{className:"px-6 py-4",children:r.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:B.description||"-"})}),r.jsx("td",{className:"px-6 py-4",children:r.jsxs("span",{className:`font-semibold ${I(B.type)}`,children:[B.type==="CASH_OUT"?"-":"+",T(B.amount)]})}),r.jsx("td",{className:"px-6 py-4",children:r.jsx("span",{className:"text-sm text-purple-600 dark:text-purple-400",children:B.commission>0?`+${T(B.commission)}`:"-"})}),r.jsx("td",{className:"px-6 py-4",children:r.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${B.status==="COMPLETED"?"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400":B.status==="PENDING"?"bg-yellow-100 dark:bg-yellow-900/30 text-yellow-700 dark:text-yellow-400":"bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-400"}`,children:B.status})}),r.jsx("td",{className:"px-6 py-4 text-sm text-gray-500 dark:text-gray-400",children:R(B.createdAt)})]},B.id))})]})}),r.jsx("div",{className:"md:hidden divide-y divide-gray-100 dark:divide-gray-700",children:M.map(B=>r.jsxs("div",{className:"p-4",children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:`p-2 rounded-lg ${W(B.type)}`,children:$(B.type)}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:B.type.replace("_"," ")}),r.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:B.reference})]})]}),r.jsxs("div",{className:"text-right",children:[r.jsxs("p",{className:`font-bold ${I(B.type)}`,children:[B.type==="CASH_OUT"?"-":"+",T(B.amount)]}),B.commission>0&&r.jsxs("p",{className:"text-xs text-purple-600 dark:text-purple-400",children:["+",T(B.commission)," comm."]})]})]}),r.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500 dark:text-gray-400",children:[r.jsx("span",{children:B.description||"-"}),r.jsx("span",{children:R(B.createdAt)})]})]},B.id))}),r.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-t border-gray-200 dark:border-gray-700",children:[r.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Page ",f,"  Showing ",M.length," transactions"]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsxs("button",{onClick:()=>x(B=>Math.max(1,B-1)),disabled:f===1,className:"px-3 py-1.5 text-sm bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50 dark:hover:bg-gray-600 flex items-center gap-1",children:[r.jsx(Rw,{className:"w-4 h-4"}),"Previous"]}),r.jsxs("button",{onClick:()=>x(B=>B+1),disabled:!y,className:"px-3 py-1.5 text-sm bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50 dark:hover:bg-gray-600 flex items-center gap-1",children:["Next",r.jsx(Qr,{className:"w-4 h-4"})]})]})]})]})})]})})}function DBe(){const{user:e}=pt(),[t,s]=p.useState([]),[a,n]=p.useState([]),[i,o]=p.useState(null),[l,c]=p.useState(!0),[d,h]=p.useState("pending"),[f,x]=p.useState(!1),[y,v]=p.useState(""),[w,N]=p.useState(!1),[k,C]=p.useState(null),[E,_]=p.useState(null),[T,A]=p.useState(null);p.useEffect(()=>{cr.getDefaultCurrency().then(A),e!=null&&e.id&&R()},[e==null?void 0:e.id]);const P=(T==null?void 0:T.symbol)||"Le",M=F=>`${P} ${F.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}`,R=async()=>{if(e!=null&&e.id){c(!0);try{const[F,q,H]=await Promise.all([Ua.getPendingCashOuts(e.id,50),Ua.getCashOutHistory(e.id,20),Ua.getDashboardStats(e.id)]);s(F),n(q),o(H)}catch(F){console.error("Error fetching data:",F)}finally{c(!1)}}},$=async()=>{if(!y||y.length!==6){_({type:"error",text:"Please enter a valid 6-digit code"});return}N(!0),_(null);try{const F=await Ua.verifyCashOutCode(y);F.success&&F.request?(C(F.request),_({type:"success",text:"Code verified! Confirm to dispense cash."})):_({type:"error",text:F.error||"Invalid or expired code"})}catch{_({type:"error",text:"Failed to verify code"})}finally{N(!1)}},W=async()=>{if(!(!(e!=null&&e.id)||!k)){N(!0);try{const F=await Ua.completeCashOut({requestId:k.id,agentId:e.id,code:y});F.success?(_({type:"success",text:F.message}),R(),setTimeout(()=>{I()},2e3)):_({type:"error",text:F.message})}catch{_({type:"error",text:"Failed to complete cash-out"})}finally{N(!1)}}},I=()=>{x(!1),v(""),C(null),_(null)},B=F=>{const q=new Date(F),H=new Date,K=q.getTime()-H.getTime();if(K<=0)return"Expired";const V=Math.floor(K/6e4);return V<60?`${V}m left`:`${Math.floor(V/60)}h ${V%60}m left`},O=F=>new Date(F).toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"});return r.jsxs(Bx,{children:[r.jsxs(Pe.div,{className:"space-y-6",initial:{opacity:0},animate:{opacity:1},children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Cash Out Processing"}),r.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Verify codes and dispense cash to customers"})]}),r.jsxs("div",{className:"flex gap-3",children:[r.jsxs(Pe.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:R,className:"px-4 py-2 text-sm bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 flex items-center gap-2",children:[r.jsx(Ot,{className:`w-4 h-4 ${l?"animate-spin":""}`}),"Refresh"]}),r.jsxs(Pe.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>x(!0),className:"px-4 py-2 text-sm bg-orange-600 text-white rounded-lg hover:bg-orange-700 flex items-center gap-2",children:[r.jsx(Vs,{className:"w-4 h-4"}),"Verify Code"]})]})]}),i&&i.floatBalance<1e3&&r.jsxs(Pe.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg flex items-center gap-3",children:[r.jsx(Ht,{className:"w-5 h-5 text-red-600 dark:text-red-400"}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-red-800 dark:text-red-300",children:"Low Float Balance"}),r.jsxs("p",{className:"text-sm text-red-600 dark:text-red-400",children:["Your float balance is ",M(i.floatBalance),". Top up to continue processing cash-outs."]})]})]}),r.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[r.jsx(Be,{className:"p-4",delay:.1,children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"p-2 bg-orange-100 dark:bg-orange-900/30 rounded-lg",children:r.jsx(_t,{className:"w-5 h-5 text-orange-600 dark:text-orange-400"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Pending"}),r.jsx("p",{className:"text-2xl font-bold text-orange-600 dark:text-orange-400",children:t.length})]})]})}),r.jsx(Be,{className:"p-4",delay:.15,children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"p-2 bg-green-100 dark:bg-green-900/30 rounded-lg",children:r.jsx(Ae,{className:"w-5 h-5 text-green-600 dark:text-green-400"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Today's Processed"}),r.jsx("p",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:(i==null?void 0:i.todayTransactions)||0})]})]})}),r.jsx(Be,{className:"p-4",delay:.2,children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-900/30 rounded-lg",children:r.jsx(Zl,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Float Balance"}),r.jsx("p",{className:"text-lg font-bold text-blue-600 dark:text-blue-400",children:M((i==null?void 0:i.floatBalance)||0)})]})]})}),r.jsx(Be,{className:"p-4",delay:.25,children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"p-2 bg-purple-100 dark:bg-purple-900/30 rounded-lg",children:r.jsx(Zl,{className:"w-5 h-5 text-purple-600 dark:text-purple-400"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Today's Cash Out"}),r.jsx("p",{className:"text-lg font-bold text-purple-600 dark:text-purple-400",children:M((i==null?void 0:i.todayCashOut)||0)})]})]})})]}),r.jsxs("div",{className:"flex gap-2 border-b border-gray-200 dark:border-gray-700",children:[r.jsxs("button",{onClick:()=>h("pending"),className:`px-4 py-2 text-sm font-medium border-b-2 transition-colors ${d==="pending"?"border-orange-500 text-orange-600 dark:text-orange-400":"border-transparent text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300"}`,children:["Pending Requests (",t.length,")"]}),r.jsx("button",{onClick:()=>h("completed"),className:`px-4 py-2 text-sm font-medium border-b-2 transition-colors ${d==="completed"?"border-orange-500 text-orange-600 dark:text-orange-400":"border-transparent text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300"}`,children:"Completed"})]}),r.jsx(Be,{className:"overflow-hidden",delay:.3,children:l?r.jsx("div",{className:"flex items-center justify-center py-12",children:r.jsx(Ot,{className:"w-8 h-8 animate-spin text-gray-400"})}):d==="pending"?t.length===0?r.jsxs("div",{className:"text-center py-12",children:[r.jsx(Ae,{className:"w-12 h-12 text-gray-300 dark:text-gray-600 mx-auto mb-3"}),r.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"No pending cash-out requests"}),r.jsx("p",{className:"text-sm text-gray-400 dark:text-gray-500",children:"Requests will appear here when customers request cash"})]}):r.jsx("div",{className:"divide-y divide-gray-100 dark:divide-gray-700",children:t.map(F=>r.jsxs(Pe.div,{whileHover:{backgroundColor:"rgba(0,0,0,0.02)"},className:"p-4 flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("div",{className:"p-3 bg-orange-100 dark:bg-orange-900/30 rounded-full",children:r.jsx(br,{className:"w-6 h-6 text-orange-600 dark:text-orange-400"})}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:F.customerName}),r.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-500 dark:text-gray-400",children:[F.customerPhone&&r.jsxs("span",{className:"flex items-center gap-1",children:[r.jsx(Ss,{className:"w-3 h-3"}),F.customerPhone]}),r.jsxs("span",{className:"flex items-center gap-1",children:[r.jsx(_t,{className:"w-3 h-3"}),B(F.codeExpiresAt)]})]})]})]}),r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsxs("div",{className:"text-right",children:[r.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:M(F.amount)}),r.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Code: ",r.jsx("span",{className:"font-mono font-bold text-orange-600",children:F.code})]})]}),r.jsxs(Pe.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{v(F.code),x(!0)},disabled:((i==null?void 0:i.floatBalance)||0)<F.amount,className:"px-4 py-2 bg-orange-600 text-white rounded-lg font-medium hover:bg-orange-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[r.jsx(Zl,{className:"w-4 h-4"}),"Process"]})]})]},F.id))}):a.length===0?r.jsxs("div",{className:"text-center py-12",children:[r.jsx(Zl,{className:"w-12 h-12 text-gray-300 dark:text-gray-600 mx-auto mb-3"}),r.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"No completed requests yet"})]}):r.jsx("div",{className:"divide-y divide-gray-100 dark:divide-gray-700",children:a.map(F=>r.jsxs("div",{className:"p-4 flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("div",{className:`p-3 rounded-full ${F.status==="COMPLETED"?"bg-green-100 dark:bg-green-900/30":"bg-red-100 dark:bg-red-900/30"}`,children:F.status==="COMPLETED"?r.jsx(Ae,{className:"w-6 h-6 text-green-600 dark:text-green-400"}):r.jsx(Ht,{className:"w-6 h-6 text-red-600 dark:text-red-400"})}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:F.customerName}),r.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:O(F.requestedAt)})]})]}),r.jsxs("div",{className:"text-right",children:[r.jsx("p",{className:"text-xl font-bold text-gray-900 dark:text-white",children:M(F.amount)}),r.jsx("span",{className:`text-xs font-medium px-2 py-0.5 rounded-full ${F.status==="COMPLETED"?"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400":"bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-400"}`,children:F.status})]})]},F.id))})})]}),f&&r.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:r.jsxs(Pe.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"bg-white dark:bg-gray-800 rounded-xl p-6 w-full max-w-md",children:[r.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white mb-4",children:"Cash Out Verification"}),k?r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"p-4 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg mb-4",children:[r.jsxs("div",{className:"flex items-center gap-2 text-green-700 dark:text-green-400 mb-3",children:[r.jsx(Ae,{className:"w-5 h-5"}),r.jsx("span",{className:"font-medium",children:"Code Verified"})]}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Customer"}),r.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:k.customerName})]}),k.customerPhone&&r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Phone"}),r.jsx("span",{className:"text-gray-900 dark:text-white",children:k.customerPhone})]}),r.jsxs("div",{className:"flex justify-between border-t border-green-200 dark:border-green-800 pt-2",children:[r.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Amount to Dispense"}),r.jsx("span",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:M(k.amount)})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Your Commission"}),r.jsx("span",{className:"font-bold text-purple-600",children:M(k.fee*.5)})]})]})]}),((i==null?void 0:i.floatBalance)||0)<k.amount&&r.jsxs("div",{className:"p-3 bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-400 rounded-lg mb-4 flex items-center gap-2",children:[r.jsx(Ht,{className:"w-5 h-5"}),"Insufficient float balance. You need ",M(k.amount-((i==null?void 0:i.floatBalance)||0))," more."]}),E&&E.type==="error"&&r.jsx("div",{className:"p-3 bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-400 rounded-lg mb-4",children:E.text}),r.jsxs("div",{className:"flex gap-3",children:[r.jsx("button",{onClick:I,className:"flex-1 py-3 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg font-medium hover:bg-gray-200 dark:hover:bg-gray-600",children:"Cancel"}),r.jsx("button",{onClick:W,disabled:w||((i==null?void 0:i.floatBalance)||0)<k.amount,className:"flex-1 py-3 bg-orange-600 text-white rounded-lg font-medium hover:bg-orange-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:w?r.jsx(Ot,{className:"w-5 h-5 animate-spin"}):r.jsxs(r.Fragment,{children:[r.jsx(Zl,{className:"w-5 h-5"}),"Dispense Cash"]})})]})]}):r.jsxs(r.Fragment,{children:[r.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-4",children:"Enter the 6-digit code from the customer"}),r.jsx("div",{className:"mb-4",children:r.jsx("input",{type:"text",value:y,onChange:F=>v(F.target.value.replace(/\D/g,"").slice(0,6)),placeholder:"Enter 6-digit code",className:"w-full px-4 py-4 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-orange-500 text-3xl font-mono text-center tracking-widest",maxLength:6,autoFocus:!0})}),E&&r.jsx("div",{className:`p-3 rounded-lg mb-4 ${E.type==="success"?"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400":"bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-400"}`,children:E.text}),r.jsxs("div",{className:"flex gap-3",children:[r.jsx("button",{onClick:I,className:"flex-1 py-3 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg font-medium hover:bg-gray-200 dark:hover:bg-gray-600",children:"Cancel"}),r.jsx("button",{onClick:$,disabled:w||y.length!==6,className:"flex-1 py-3 bg-orange-600 text-white rounded-lg font-medium hover:bg-orange-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:w?r.jsx(Ot,{className:"w-5 h-5 animate-spin"}):r.jsxs(r.Fragment,{children:[r.jsx(Nr,{className:"w-5 h-5"}),"Verify Code"]})})]})]})]})})]})}function OBe(){const{user:e}=pt(),[t,s]=p.useState(null),[a,n]=p.useState([]),[i,o]=p.useState(!0),[l,c]=p.useState("basic"),[d,h]=p.useState(!1),[f,x]=p.useState(""),[y,v]=p.useState("mobile"),[w,N]=p.useState(!1),[k,C]=p.useState(null),[E,_]=p.useState(null);p.useEffect(()=>{cr.getDefaultCurrency().then(_),e!=null&&e.id&&P()},[e==null?void 0:e.id]);const T=(E==null?void 0:E.symbol)||"Le",A=I=>`${T} ${I.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}`,P=async()=>{if(e!=null&&e.id){o(!0);try{const[I,B,O]=await Promise.all([Ua.getDashboardStats(e.id),Ua.getTransactions(e.id,{limit:10,type:void 0}),Ua.getProfile(e.id)]);s(I),n(B),O!=null&&O.tier&&c(O.tier)}catch(I){console.error("Error fetching data:",I)}finally{o(!1)}}},M=async()=>{if(!(!(e!=null&&e.id)||!f)){N(!0),C(null);try{const I=await Ua.requestFloatTopup(e.id,parseFloat(f));I.success?(C({type:"success",text:I.message}),x(""),P(),setTimeout(()=>{h(!1),C(null)},2e3)):C({type:"error",text:I.message})}catch{C({type:"error",text:"Failed to request top-up"})}finally{N(!1)}}},R=Ua.getLimits(l),$=I=>{const B=new Date(I),F=new Date().getTime()-B.getTime(),q=Math.floor(F/6e4),H=Math.floor(F/36e5);return q<1?"Just now":q<60?`${q}m ago`:H<24?`${H}h ago`:B.toLocaleDateString()},W=t?Math.min(100,(t.todayCashIn+t.todayCashOut)/R.dailyLimit*100):0;return r.jsxs(Bx,{children:[r.jsxs(Pe.div,{className:"space-y-6",initial:{opacity:0},animate:{opacity:1},children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Float Management"}),r.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Manage your cash float and transaction limits"})]}),r.jsxs("div",{className:"flex gap-3",children:[r.jsxs(Pe.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:P,className:"px-4 py-2 text-sm bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 flex items-center gap-2",children:[r.jsx(Ot,{className:`w-4 h-4 ${i?"animate-spin":""}`}),"Refresh"]}),r.jsxs(Pe.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>h(!0),className:"px-4 py-2 text-sm bg-orange-600 text-white rounded-lg hover:bg-orange-700 flex items-center gap-2",children:[r.jsx(Ts,{className:"w-4 h-4"}),"Top Up Float"]})]})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[r.jsxs(Pe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"lg:col-span-2 p-6 bg-gradient-to-br from-orange-500 to-orange-600 dark:from-orange-600 dark:to-orange-700 text-white rounded-xl shadow-lg",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"p-3 bg-white/20 rounded-xl",children:r.jsx(Rt,{className:"w-8 h-8"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-orange-100",children:"Available Float Balance"}),r.jsx("p",{className:"text-4xl font-bold",children:A((t==null?void 0:t.floatBalance)||0)})]})]}),r.jsxs("div",{className:"text-right",children:[r.jsx("p",{className:"text-sm text-orange-100",children:"Daily Limit"}),r.jsx("p",{className:"text-2xl font-bold",children:A(R.dailyLimit)})]})]}),r.jsxs("div",{className:"mb-4",children:[r.jsxs("div",{className:"flex justify-between text-sm text-orange-100 mb-2",children:[r.jsx("span",{children:"Daily Usage"}),r.jsxs("span",{children:[W.toFixed(1),"% used"]})]}),r.jsx("div",{className:"w-full bg-white/20 rounded-full h-3",children:r.jsx("div",{className:"bg-white rounded-full h-3 transition-all duration-500",style:{width:`${W}%`}})}),r.jsxs("div",{className:"flex justify-between text-xs text-orange-100 mt-1",children:[r.jsxs("span",{children:[A(((t==null?void 0:t.todayCashIn)||0)+((t==null?void 0:t.todayCashOut)||0))," processed today"]}),r.jsxs("span",{children:[A(R.dailyLimit-((t==null?void 0:t.todayCashIn)||0)-((t==null?void 0:t.todayCashOut)||0))," remaining"]})]})]}),r.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[r.jsxs("div",{className:"bg-white/10 rounded-lg p-3",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[r.jsx(An,{className:"w-4 h-4 text-green-300"}),r.jsx("span",{className:"text-xs text-orange-100",children:"Cash In"})]}),r.jsx("p",{className:"text-lg font-bold",children:A((t==null?void 0:t.todayCashIn)||0)})]}),r.jsxs("div",{className:"bg-white/10 rounded-lg p-3",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[r.jsx(Rr,{className:"w-4 h-4 text-red-300"}),r.jsx("span",{className:"text-xs text-orange-100",children:"Cash Out"})]}),r.jsx("p",{className:"text-lg font-bold",children:A((t==null?void 0:t.todayCashOut)||0)})]}),r.jsxs("div",{className:"bg-white/10 rounded-lg p-3",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[r.jsx(Ts,{className:"w-4 h-4 text-purple-300"}),r.jsx("span",{className:"text-xs text-orange-100",children:"Commission"})]}),r.jsx("p",{className:"text-lg font-bold",children:A((t==null?void 0:t.todayCommissions)||0)})]})]})]}),r.jsxs(Be,{className:"p-6",delay:.1,children:[r.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white mb-4",children:"Account Tier"}),r.jsxs("div",{className:`p-4 rounded-lg mb-4 ${l==="agent_plus"?"bg-gradient-to-r from-purple-100 to-orange-100 dark:from-purple-900/30 dark:to-orange-900/30":l==="standard"?"bg-blue-100 dark:bg-blue-900/30":"bg-gray-100 dark:bg-gray-700/50"}`,children:[r.jsx("p",{className:"text-lg font-bold text-gray-900 dark:text-white capitalize",children:l==="agent_plus"?"Agent+":l}),r.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:l==="agent_plus"?"Premium features unlocked":l==="standard"?"Standard agent benefits":"Basic tier - Upgrade for higher limits"})]}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex justify-between text-sm",children:[r.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Min Transaction"}),r.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:A(R.minTransaction)})]}),r.jsxs("div",{className:"flex justify-between text-sm",children:[r.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Max Transaction"}),r.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:A(R.maxTransaction)})]}),r.jsxs("div",{className:"flex justify-between text-sm",children:[r.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Daily Limit"}),r.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:A(R.dailyLimit)})]})]}),l!=="agent_plus"&&r.jsxs(Pe.button,{whileHover:{scale:1.02},whileTap:{scale:.98},className:"w-full mt-4 py-2 bg-orange-600 text-white rounded-lg font-medium hover:bg-orange-700 flex items-center justify-center gap-2",children:[r.jsx(Ts,{className:"w-4 h-4"}),"Upgrade Account"]})]})]}),t&&t.floatBalance<5e3&&r.jsxs(Pe.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"p-4 bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-lg flex items-center gap-3",children:[r.jsx(Ht,{className:"w-5 h-5 text-yellow-600 dark:text-yellow-400"}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-yellow-800 dark:text-yellow-300",children:"Low Float Balance"}),r.jsx("p",{className:"text-sm text-yellow-600 dark:text-yellow-400",children:"Consider topping up your float to continue processing transactions smoothly."})]}),r.jsx(Pe.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>h(!0),className:"ml-auto px-4 py-2 bg-yellow-600 text-white rounded-lg text-sm font-medium hover:bg-yellow-700",children:"Top Up Now"})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[r.jsxs(Be,{className:"p-6",delay:.2,children:[r.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white mb-4",children:"Monthly Summary"}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-900/30 rounded-lg",children:r.jsx(Ts,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"})}),r.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Total Volume"})]}),r.jsx("span",{className:"font-bold text-gray-900 dark:text-white",children:A((t==null?void 0:t.monthlyVolume)||0)})]}),r.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"p-2 bg-purple-100 dark:bg-purple-900/30 rounded-lg",children:r.jsx(Ts,{className:"w-5 h-5 text-purple-600 dark:text-purple-400"})}),r.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Total Commissions"})]}),r.jsx("span",{className:"font-bold text-purple-600 dark:text-purple-400",children:A((t==null?void 0:t.monthlyCommissions)||0)})]}),r.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"p-2 bg-green-100 dark:bg-green-900/30 rounded-lg",children:r.jsx(Ae,{className:"w-5 h-5 text-green-600 dark:text-green-400"})}),r.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Customers Served"})]}),r.jsx("span",{className:"font-bold text-gray-900 dark:text-white",children:(t==null?void 0:t.totalCustomersServed)||0})]})]})]}),r.jsxs(Be,{className:"p-6",delay:.3,children:[r.jsx("div",{className:"flex justify-between items-center mb-4",children:r.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:"Recent Activity"})}),r.jsx("div",{className:"space-y-3",children:a.length===0?r.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 text-center py-4",children:"No recent activity"}):a.slice(0,5).map(I=>r.jsxs("div",{className:"flex items-center justify-between p-2 hover:bg-gray-50 dark:hover:bg-gray-700/50 rounded-lg",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:`p-2 rounded-lg ${I.type==="CASH_IN"||I.type==="DEPOSIT"?"bg-green-100 dark:bg-green-900/30":I.type==="CASH_OUT"?"bg-red-100 dark:bg-red-900/30":"bg-blue-100 dark:bg-blue-900/30"}`,children:I.type==="CASH_IN"||I.type==="DEPOSIT"?r.jsx(An,{className:"w-4 h-4 text-green-600 dark:text-green-400"}):I.type==="CASH_OUT"?r.jsx(Rr,{className:"w-4 h-4 text-red-600 dark:text-red-400"}):r.jsx(Ts,{className:"w-4 h-4 text-blue-600 dark:text-blue-400"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:I.type.replace("_"," ")}),r.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:$(I.createdAt)})]})]}),r.jsxs("span",{className:`font-medium ${I.type==="CASH_IN"||I.type==="DEPOSIT"?"text-green-600 dark:text-green-400":I.type==="CASH_OUT"?"text-red-600 dark:text-red-400":"text-gray-900 dark:text-white"}`,children:[I.type==="CASH_OUT"?"-":"+",A(I.amount)]})]},I.id))})]})]})]}),d&&r.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:r.jsxs(Pe.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"bg-white dark:bg-gray-800 rounded-xl p-6 w-full max-w-md",children:[r.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white mb-4",children:"Top Up Float"}),r.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-4",children:"Request a float top-up to increase your available balance"}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:["Amount (",T,")"]}),r.jsx("input",{type:"number",value:f,onChange:I=>x(I.target.value),placeholder:"0",className:"w-full px-4 py-3 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-orange-500 text-2xl font-bold"}),r.jsx("div",{className:"flex gap-2 mt-2",children:[10,50,100,500].map(I=>r.jsx("button",{onClick:()=>x(I.toString()),className:"flex-1 py-1 text-xs bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-400 rounded hover:bg-gray-200 dark:hover:bg-gray-600",children:A(I)},I))})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Payment Method"}),r.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[r.jsxs("button",{onClick:()=>v("mobile"),className:`p-3 rounded-lg border-2 transition-colors flex flex-col items-center gap-2 ${y==="mobile"?"border-orange-500 bg-orange-50 dark:bg-orange-900/20":"border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600"}`,children:[r.jsx(Ws,{className:"w-6 h-6 text-gray-600 dark:text-gray-400"}),r.jsx("span",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Mobile Money"})]}),r.jsxs("button",{onClick:()=>v("bank"),className:`p-3 rounded-lg border-2 transition-colors flex flex-col items-center gap-2 ${y==="bank"?"border-orange-500 bg-orange-50 dark:bg-orange-900/20":"border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600"}`,children:[r.jsx(w6,{className:"w-6 h-6 text-gray-600 dark:text-gray-400"}),r.jsx("span",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Bank Transfer"})]}),r.jsxs("button",{onClick:()=>v("card"),className:`p-3 rounded-lg border-2 transition-colors flex flex-col items-center gap-2 ${y==="card"?"border-orange-500 bg-orange-50 dark:bg-orange-900/20":"border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600"}`,children:[r.jsx(lt,{className:"w-6 h-6 text-gray-600 dark:text-gray-400"}),r.jsx("span",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Card"})]})]})]}),r.jsxs("div",{className:"p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:[r.jsxs("div",{className:"flex items-center gap-2 text-blue-700 dark:text-blue-400 mb-1",children:[r.jsx(_t,{className:"w-4 h-4"}),r.jsx("span",{className:"text-sm font-medium",children:"Processing Time"})]}),r.jsx("p",{className:"text-xs text-blue-600 dark:text-blue-300",children:y==="mobile"?"Instant - Mobile money transfers are processed immediately":y==="bank"?"1-2 business days - Bank transfers may take time to clear":"Instant - Card payments are processed immediately"})]}),k&&r.jsx("div",{className:`p-3 rounded-lg ${k.type==="success"?"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400":"bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-400"}`,children:k.text}),r.jsxs("div",{className:"flex gap-3",children:[r.jsx("button",{onClick:()=>{h(!1),x(""),C(null)},className:"flex-1 py-3 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg font-medium hover:bg-gray-200 dark:hover:bg-gray-600",children:"Cancel"}),r.jsx("button",{onClick:M,disabled:w||!f||parseFloat(f)<=0,className:"flex-1 py-3 bg-orange-600 text-white rounded-lg font-medium hover:bg-orange-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:w?r.jsx(Ot,{className:"w-5 h-5 animate-spin"}):r.jsxs(r.Fragment,{children:[r.jsx(Ts,{className:"w-5 h-5"}),"Request Top Up"]})})]})]})]})})]})}const RBe={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_API_URL:"https://api.peeap.com",VITE_MERCHANT_SERVICE_URL:"https://api.peeap.com"},MBe=new Tse({defaultOptions:{queries:{staleTime:1e3*60*5,retry:1}}}),rE="full";console.log("App Mode:",rE);console.log("Environment:",RBe);function LBe(){const e=rE==="checkout",t=rE==="merchant";return r.jsx(Ise,{client:MBe,children:r.jsx(Rie,{children:r.jsx(nse,{children:r.jsx(Iie,{children:r.jsx(Oie,{children:r.jsxs(Die,{children:[r.jsx(woe,{}),r.jsxs(a6,{children:[e,t,r.jsxs(r.Fragment,{children:[r.jsx(Ge,{path:"/",element:r.jsx(Xhe,{})}),r.jsx(Ge,{path:"/login",element:r.jsx(Zme,{})}),r.jsx(Ge,{path:"/register",element:r.jsx(efe,{})}),r.jsx(Ge,{path:"/docs",element:r.jsx(zpe,{})}),r.jsx(Ge,{path:"/t/:token",element:r.jsx(EF,{})}),r.jsx(Ge,{path:"/pay/:token",element:r.jsx(EF,{})}),r.jsx(Ge,{path:"/pay",element:r.jsx(jFe,{})}),r.jsx(Ge,{path:"/pay/nfc/:shortCode",element:r.jsx(OFe,{})}),r.jsx(Ge,{path:"/payment/success",element:r.jsx(NFe,{})}),r.jsx(Ge,{path:"/payment/cancel",element:r.jsx(kFe,{})}),r.jsx(Ge,{path:"/deposit/success",element:r.jsx(SFe,{})}),r.jsx(Ge,{path:"/deposit/cancel",element:r.jsx(CFe,{})}),r.jsx(Ge,{path:"/checkout/:businessId",element:r.jsx(_Fe,{})}),r.jsx(Ge,{path:"/checkout/pay/:sessionId",element:r.jsx(EFe,{})}),r.jsx(Ge,{path:"/checkout/success",element:r.jsx(AFe,{})}),r.jsx(Ge,{path:"/scan-pay/:sessionId",element:r.jsx(PFe,{})}),r.jsx(Ge,{path:"/app/pay/:paymentId",element:r.jsx(DFe,{})}),r.jsx(Ge,{path:"/onboarding",element:r.jsx(ma,{children:r.jsx(FFe,{})})}),r.jsx(Ge,{path:"/dashboard",element:r.jsx(ma,{children:r.jsx(qxe,{})})}),r.jsx(Ge,{path:"/wallets",element:r.jsx(ma,{children:r.jsx(Vge,{})})}),r.jsx(Ge,{path:"/cards",element:r.jsx(ma,{children:r.jsx(cye,{})})}),r.jsx(Ge,{path:"/cards/marketplace",element:r.jsx(ma,{children:r.jsx(sye,{})})}),r.jsx(Ge,{path:"/cards/legacy",element:r.jsx(ma,{children:r.jsx(Wge,{})})}),r.jsx(Ge,{path:"/transactions",element:r.jsx(ma,{children:r.jsx(zge,{})})}),r.jsx(Ge,{path:"/profile",element:r.jsx(ma,{children:r.jsx(Wpe,{})})}),r.jsx(Ge,{path:"/send",element:r.jsx(ma,{children:r.jsx(Hpe,{})})}),r.jsx(Ge,{path:"/receive",element:r.jsx(ma,{children:r.jsx(Kpe,{})})}),r.jsx(Ge,{path:"/payout",element:r.jsx(ma,{children:r.jsx(Jpe,{})})}),r.jsx(Ge,{path:"/pots",element:r.jsx(ma,{children:r.jsx(eye,{})})}),r.jsx(Ge,{path:"/pots/:potId",element:r.jsx(ma,{children:r.jsx(tye,{})})}),r.jsx(Ge,{path:"/bills",element:r.jsx(ma,{children:r.jsx(hye,{})})}),r.jsx(Ge,{path:"/airtime",element:r.jsx(ma,{children:r.jsx(xye,{})})}),r.jsx(Ge,{path:"/cashback",element:r.jsx(ma,{children:r.jsx(yye,{})})}),r.jsx(Ge,{path:"/bnpl",element:r.jsx(ma,{children:r.jsx(bye,{})})}),r.jsx(Ge,{path:"/cashout",element:r.jsx(ma,{children:r.jsx(vye,{})})}),r.jsx(Ge,{path:"/withdraw",element:r.jsx(ma,{children:r.jsx(Cye,{})})}),r.jsx(Ge,{path:"/analytics",element:r.jsx(ma,{children:r.jsx(wye,{})})}),r.jsx(Ge,{path:"/admin",element:r.jsx(At,{allowedRoles:["admin","superadmin"],children:r.jsx(OPe,{})})}),r.jsx(Ge,{path:"/admin/accounts",element:r.jsx(At,{allowedRoles:["admin","superadmin"],children:r.jsx(BPe,{})})}),r.jsx(Ge,{path:"/admin/customers",element:r.jsx(At,{allowedRoles:["admin","superadmin"],children:r.jsx(FPe,{})})}),r.jsx(Ge,{path:"/admin/cards",element:r.jsx(At,{allowedRoles:["admin","superadmin"],children:r.jsx($Pe,{})})}),r.jsx(Ge,{path:"/admin/card-programs",element:r.jsx(At,{allowedRoles:["admin","superadmin"],children:r.jsx(WPe,{})})}),r.jsx(Ge,{path:"/admin/card-types",element:r.jsx(At,{allowedRoles:["admin","superadmin"],children:r.jsx(qPe,{})})}),r.jsx(Ge,{path:"/admin/card-orders",element:r.jsx(At,{allowedRoles:["admin","superadmin"],children:r.jsx(KPe,{})})}),r.jsx(Ge,{path:"/admin/card-products",element:r.jsx(At,{allowedRoles:["admin","superadmin"],children:r.jsx(M9e,{})})}),r.jsx(Ge,{path:"/admin/modules",element:r.jsx(At,{allowedRoles:["admin","superadmin"],children:r.jsx(R9e,{})})}),r.jsx(Ge,{path:"/admin/authorization",element:r.jsx(At,{allowedRoles:["admin","superadmin"],children:r.jsx(RPe,{})})}),r.jsx(Ge,{path:"/admin/transactions",element:r.jsx(At,{allowedRoles:["admin","superadmin"],children:r.jsx(GPe,{})})}),r.jsx(Ge,{path:"/admin/disputes",element:r.jsx(At,{allowedRoles:["admin","superadmin"],children:r.jsx(YPe,{})})}),r.jsx(Ge,{path:"/admin/users",element:r.jsx(At,{allowedRoles:["admin","superadmin"],children:r.jsx(F9e,{})})}),r.jsx(Ge,{path:"/admin/users/:userId",element:r.jsx(At,{allowedRoles:["admin","superadmin"],children:r.jsx(B9e,{})})}),r.jsx(Ge,{path:"/admin/merchants",element:r.jsx(At,{allowedRoles:["admin","superadmin"],children:r.jsx($9e,{})})}),r.jsx(Ge,{path:"/admin/merchants/create",element:r.jsx(At,{allowedRoles:["admin","superadmin"],children:r.jsx(V9e,{})})}),r.jsx(Ge,{path:"/admin/agents",element:r.jsx(At,{allowedRoles:["admin","superadmin"],children:r.jsx(W9e,{})})}),r.jsx(Ge,{path:"/admin/fees",element:r.jsx(At,{allowedRoles:["admin","superadmin"],children:r.jsx(z9e,{})})}),r.jsx(Ge,{path:"/admin/fee-settings",element:r.jsx(At,{allowedRoles:["admin","superadmin"],children:r.jsx(H9e,{})})}),r.jsx(Ge,{path:"/admin/payment-settings",element:r.jsx(At,{allowedRoles:["admin","superadmin"],children:r.jsx(Z9e,{})})}),r.jsx(Ge,{path:"/admin/deposits",element:r.jsx(At,{allowedRoles:["admin","superadmin"],children:r.jsx(tFe,{})})}),r.jsx(Ge,{path:"/admin/subscriptions",element:r.jsx(At,{allowedRoles:["admin","superadmin"],children:r.jsx(rFe,{})})}),r.jsx(Ge,{path:"/admin/roles",element:r.jsx(At,{allowedRoles:["admin","superadmin"],children:r.jsx(aFe,{})})}),r.jsx(Ge,{path:"/admin/pots",element:r.jsx(At,{allowedRoles:["admin","superadmin"],children:r.jsx(nFe,{})})}),r.jsx(Ge,{path:"/admin/business-categories",element:r.jsx(At,{allowedRoles:["admin","superadmin"],children:r.jsx(lFe,{})})}),r.jsx(Ge,{path:"/admin/businesses",element:r.jsx(At,{allowedRoles:["admin","superadmin"],children:r.jsx(cFe,{})})}),r.jsx(Ge,{path:"/admin/businesses/:businessId",element:r.jsx(At,{allowedRoles:["admin","superadmin"],children:r.jsx(dFe,{})})}),r.jsx(Ge,{path:"/admin/webhooks",element:r.jsx(At,{allowedRoles:["admin","superadmin"],children:r.jsx(MPe,{})})}),r.jsx(Ge,{path:"/admin/compliance",element:r.jsx(At,{allowedRoles:["admin","superadmin"],children:r.jsx(LPe,{})})}),r.jsx(Ge,{path:"/admin/developers",element:r.jsx(At,{allowedRoles:["admin","superadmin"],children:r.jsx(L9e,{})})}),r.jsx(Ge,{path:"/admin/support",element:r.jsx(At,{allowedRoles:["admin","superadmin"],children:r.jsx(fFe,{})})}),r.jsx(Ge,{path:"/admin/notifications",element:r.jsx(At,{allowedRoles:["admin","superadmin"],children:r.jsx(gFe,{})})}),r.jsx(Ge,{path:"/admin/smtp-settings",element:r.jsx(At,{allowedRoles:["admin","superadmin"],children:r.jsx(wFe,{})})}),r.jsx(Ge,{path:"/notifications",element:r.jsx(ma,{children:r.jsx(pBe,{})})}),r.jsx(Ge,{path:"/merchant",element:r.jsx(At,{allowedRoles:["merchant"],children:r.jsx(OF,{})})}),r.jsx(Ge,{path:"/merchant/transactions",element:r.jsx(At,{allowedRoles:["merchant"],children:r.jsx(KFe,{})})}),r.jsx(Ge,{path:"/merchant/payouts",element:r.jsx(At,{allowedRoles:["merchant"],children:r.jsx(GFe,{})})}),r.jsx(Ge,{path:"/merchant/refunds",element:r.jsx(At,{allowedRoles:["merchant"],children:r.jsx(YFe,{})})}),r.jsx(Ge,{path:"/merchant/reports",element:r.jsx(At,{allowedRoles:["merchant"],children:r.jsx(XFe,{})})}),r.jsx(Ge,{path:"/merchant/payment-links",element:r.jsx(At,{allowedRoles:["merchant"],children:r.jsx(QFe,{})})}),r.jsx(Ge,{path:"/merchant/profile",element:r.jsx(At,{allowedRoles:["merchant"],children:r.jsx(ZFe,{})})}),r.jsx(Ge,{path:"/merchant/create-business",element:r.jsx(At,{allowedRoles:["merchant"],children:r.jsx(JFe,{})})}),r.jsx(Ge,{path:"/merchant/settings",element:r.jsx(At,{allowedRoles:["merchant"],children:r.jsx($Fe,{})})}),r.jsx(Ge,{path:"/merchant/support",element:r.jsx(At,{allowedRoles:["merchant"],children:r.jsx(mBe,{})})}),r.jsx(Ge,{path:"/merchant/notifications",element:r.jsx(At,{allowedRoles:["merchant"],children:r.jsx(xBe,{})})}),r.jsx(Ge,{path:"/merchant/shops",element:r.jsx(At,{allowedRoles:["merchant"],children:r.jsx(aBe,{})})}),r.jsx(Ge,{path:"/merchant/upgrade",element:r.jsx(At,{allowedRoles:["merchant"],children:r.jsx(nBe,{})})}),r.jsx(Ge,{path:"/merchant/shops/:businessId",element:r.jsx(At,{allowedRoles:["merchant"],children:r.jsx(oBe,{})})}),r.jsx(Ge,{path:"/merchant/shops/:businessId/transactions",element:r.jsx(At,{allowedRoles:["merchant"],children:r.jsx(lBe,{})})}),r.jsx(Ge,{path:"/merchant/shops/:businessId/disputes",element:r.jsx(At,{allowedRoles:["merchant"],children:r.jsx(cBe,{})})}),r.jsx(Ge,{path:"/merchant/shops/:businessId/settings",element:r.jsx(At,{allowedRoles:["merchant"],children:r.jsx(dBe,{})})}),r.jsx(Ge,{path:"/merchant/developer/create-business",element:r.jsx(At,{allowedRoles:["merchant"],children:r.jsx(sBe,{})})}),r.jsx(Ge,{path:"/merchant/developer/:businessId",element:r.jsx(At,{allowedRoles:["merchant"],children:r.jsx(HFe,{})})}),r.jsx(Ge,{path:"/merchant/developer/*",element:r.jsx(At,{allowedRoles:["merchant"],children:r.jsx(WFe,{})})}),r.jsx(Ge,{path:"/merchant/*",element:r.jsx(At,{allowedRoles:["merchant"],children:r.jsx(OF,{})})}),r.jsx(Ge,{path:"/agent",element:r.jsx(At,{allowedRoles:["agent"],children:r.jsx(RF,{})})}),r.jsx(Ge,{path:"/agent/settings",element:r.jsx(At,{allowedRoles:["agent"],children:r.jsx(NBe,{})})}),r.jsx(Ge,{path:"/agent/transactions",element:r.jsx(At,{allowedRoles:["agent"],children:r.jsx(IBe,{})})}),r.jsx(Ge,{path:"/agent/cashout",element:r.jsx(At,{allowedRoles:["agent"],children:r.jsx(DBe,{})})}),r.jsx(Ge,{path:"/agent/float",element:r.jsx(At,{allowedRoles:["agent"],children:r.jsx(OBe,{})})}),r.jsx(Ge,{path:"/agent/notifications",element:r.jsx(At,{allowedRoles:["agent"],children:r.jsx(jBe,{})})}),r.jsx(Ge,{path:"/agent/developer/*",element:r.jsx(At,{allowedRoles:["agent"],children:r.jsx(TBe,{})})}),r.jsx(Ge,{path:"/agent/*",element:r.jsx(At,{allowedRoles:["agent"],children:r.jsx(RF,{})})}),r.jsx(Ge,{path:"*",element:r.jsx(kw,{to:"/",replace:!0})})]})]})]})})})})})})}pC.createRoot(document.getElementById("root")).render(r.jsx(ns.StrictMode,{children:r.jsx(LBe,{})}));
