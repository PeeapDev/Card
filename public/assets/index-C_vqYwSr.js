var nO=Object.defineProperty;var Dk=t=>{throw TypeError(t)};var iO=(t,s,r)=>s in t?nO(t,s,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[s]=r;var xn=(t,s,r)=>iO(t,typeof s!="symbol"?s+"":s,r),sb=(t,s,r)=>s.has(t)||Dk("Cannot "+r);var te=(t,s,r)=>(sb(t,s,"read from private field"),r?r.call(t):s.get(t)),rt=(t,s,r)=>s.has(t)?Dk("Cannot add the same private member more than once"):s instanceof WeakSet?s.add(t):s.set(t,r),Ue=(t,s,r,a)=>(sb(t,s,"write to private field"),a?a.call(t,r):s.set(t,r),r),Rt=(t,s,r)=>(sb(t,s,"access private method"),r);var tp=(t,s,r,a)=>({set _(n){Ue(t,s,n,r)},get _(){return te(t,s,a)}});function yN(t,s){for(var r=0;r<s.length;r++){const a=s[r];if(typeof a!="string"&&!Array.isArray(a)){for(const n in a)if(n!=="default"&&!(n in t)){const i=Object.getOwnPropertyDescriptor(a,n);i&&Object.defineProperty(t,n,i.get?i:{enumerable:!0,get:()=>a[n]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))a(n);new MutationObserver(n=>{for(const i of n)if(i.type==="childList")for(const l of i.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&a(l)}).observe(document,{childList:!0,subtree:!0});function r(n){const i={};return n.integrity&&(i.integrity=n.integrity),n.referrerPolicy&&(i.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?i.credentials="include":n.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function a(n){if(n.ep)return;n.ep=!0;const i=r(n);fetch(n.href,i)}})();function bN(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function VE(t){if(t.__esModule)return t;var s=t.default;if(typeof s=="function"){var r=function a(){return this instanceof a?Reflect.construct(s,arguments,this.constructor):s.apply(this,arguments)};r.prototype=s.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(t).forEach(function(a){var n=Object.getOwnPropertyDescriptor(t,a);Object.defineProperty(r,a,n.get?n:{enumerable:!0,get:function(){return t[a]}})}),r}var qE={exports:{}},uf={},WE={exports:{}},Vt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var y0=Symbol.for("react.element"),lO=Symbol.for("react.portal"),oO=Symbol.for("react.fragment"),cO=Symbol.for("react.strict_mode"),dO=Symbol.for("react.profiler"),uO=Symbol.for("react.provider"),mO=Symbol.for("react.context"),hO=Symbol.for("react.forward_ref"),pO=Symbol.for("react.suspense"),xO=Symbol.for("react.memo"),gO=Symbol.for("react.lazy"),Ik=Symbol.iterator;function fO(t){return t===null||typeof t!="object"?null:(t=Ik&&t[Ik]||t["@@iterator"],typeof t=="function"?t:null)}var zE={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},GE=Object.assign,KE={};function Ju(t,s,r){this.props=t,this.context=s,this.refs=KE,this.updater=r||zE}Ju.prototype.isReactComponent={};Ju.prototype.setState=function(t,s){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,s,"setState")};Ju.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function HE(){}HE.prototype=Ju.prototype;function vN(t,s,r){this.props=t,this.context=s,this.refs=KE,this.updater=r||zE}var jN=vN.prototype=new HE;jN.constructor=vN;GE(jN,Ju.prototype);jN.isPureReactComponent=!0;var Mk=Array.isArray,YE=Object.prototype.hasOwnProperty,wN={current:null},QE={key:!0,ref:!0,__self:!0,__source:!0};function JE(t,s,r){var a,n={},i=null,l=null;if(s!=null)for(a in s.ref!==void 0&&(l=s.ref),s.key!==void 0&&(i=""+s.key),s)YE.call(s,a)&&!QE.hasOwnProperty(a)&&(n[a]=s[a]);var o=arguments.length-2;if(o===1)n.children=r;else if(1<o){for(var c=Array(o),d=0;d<o;d++)c[d]=arguments[d+2];n.children=c}if(t&&t.defaultProps)for(a in o=t.defaultProps,o)n[a]===void 0&&(n[a]=o[a]);return{$$typeof:y0,type:t,key:i,ref:l,props:n,_owner:wN.current}}function yO(t,s){return{$$typeof:y0,type:t.type,key:s,ref:t.ref,props:t.props,_owner:t._owner}}function NN(t){return typeof t=="object"&&t!==null&&t.$$typeof===y0}function bO(t){var s={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(r){return s[r]})}var Lk=/\/+/g;function rb(t,s){return typeof t=="object"&&t!==null&&t.key!=null?bO(""+t.key):s.toString(36)}function hx(t,s,r,a,n){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var l=!1;if(t===null)l=!0;else switch(i){case"string":case"number":l=!0;break;case"object":switch(t.$$typeof){case y0:case lO:l=!0}}if(l)return l=t,n=n(l),t=a===""?"."+rb(l,0):a,Mk(n)?(r="",t!=null&&(r=t.replace(Lk,"$&/")+"/"),hx(n,s,r,"",function(d){return d})):n!=null&&(NN(n)&&(n=yO(n,r+(!n.key||l&&l.key===n.key?"":(""+n.key).replace(Lk,"$&/")+"/")+t)),s.push(n)),1;if(l=0,a=a===""?".":a+":",Mk(t))for(var o=0;o<t.length;o++){i=t[o];var c=a+rb(i,o);l+=hx(i,s,r,c,n)}else if(c=fO(t),typeof c=="function")for(t=c.call(t),o=0;!(i=t.next()).done;)i=i.value,c=a+rb(i,o++),l+=hx(i,s,r,c,n);else if(i==="object")throw s=String(t),Error("Objects are not valid as a React child (found: "+(s==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":s)+"). If you meant to render a collection of children, use an array instead.");return l}function sp(t,s,r){if(t==null)return t;var a=[],n=0;return hx(t,a,"","",function(i){return s.call(r,i,n++)}),a}function vO(t){if(t._status===-1){var s=t._result;s=s(),s.then(function(r){(t._status===0||t._status===-1)&&(t._status=1,t._result=r)},function(r){(t._status===0||t._status===-1)&&(t._status=2,t._result=r)}),t._status===-1&&(t._status=0,t._result=s)}if(t._status===1)return t._result.default;throw t._result}var Ca={current:null},px={transition:null},jO={ReactCurrentDispatcher:Ca,ReactCurrentBatchConfig:px,ReactCurrentOwner:wN};function ZE(){throw Error("act(...) is not supported in production builds of React.")}Vt.Children={map:sp,forEach:function(t,s,r){sp(t,function(){s.apply(this,arguments)},r)},count:function(t){var s=0;return sp(t,function(){s++}),s},toArray:function(t){return sp(t,function(s){return s})||[]},only:function(t){if(!NN(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Vt.Component=Ju;Vt.Fragment=oO;Vt.Profiler=dO;Vt.PureComponent=vN;Vt.StrictMode=cO;Vt.Suspense=pO;Vt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=jO;Vt.act=ZE;Vt.cloneElement=function(t,s,r){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var a=GE({},t.props),n=t.key,i=t.ref,l=t._owner;if(s!=null){if(s.ref!==void 0&&(i=s.ref,l=wN.current),s.key!==void 0&&(n=""+s.key),t.type&&t.type.defaultProps)var o=t.type.defaultProps;for(c in s)YE.call(s,c)&&!QE.hasOwnProperty(c)&&(a[c]=s[c]===void 0&&o!==void 0?o[c]:s[c])}var c=arguments.length-2;if(c===1)a.children=r;else if(1<c){o=Array(c);for(var d=0;d<c;d++)o[d]=arguments[d+2];a.children=o}return{$$typeof:y0,type:t.type,key:n,ref:i,props:a,_owner:l}};Vt.createContext=function(t){return t={$$typeof:mO,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:uO,_context:t},t.Consumer=t};Vt.createElement=JE;Vt.createFactory=function(t){var s=JE.bind(null,t);return s.type=t,s};Vt.createRef=function(){return{current:null}};Vt.forwardRef=function(t){return{$$typeof:hO,render:t}};Vt.isValidElement=NN;Vt.lazy=function(t){return{$$typeof:gO,_payload:{_status:-1,_result:t},_init:vO}};Vt.memo=function(t,s){return{$$typeof:xO,type:t,compare:s===void 0?null:s}};Vt.startTransition=function(t){var s=px.transition;px.transition={};try{t()}finally{px.transition=s}};Vt.unstable_act=ZE;Vt.useCallback=function(t,s){return Ca.current.useCallback(t,s)};Vt.useContext=function(t){return Ca.current.useContext(t)};Vt.useDebugValue=function(){};Vt.useDeferredValue=function(t){return Ca.current.useDeferredValue(t)};Vt.useEffect=function(t,s){return Ca.current.useEffect(t,s)};Vt.useId=function(){return Ca.current.useId()};Vt.useImperativeHandle=function(t,s,r){return Ca.current.useImperativeHandle(t,s,r)};Vt.useInsertionEffect=function(t,s){return Ca.current.useInsertionEffect(t,s)};Vt.useLayoutEffect=function(t,s){return Ca.current.useLayoutEffect(t,s)};Vt.useMemo=function(t,s){return Ca.current.useMemo(t,s)};Vt.useReducer=function(t,s,r){return Ca.current.useReducer(t,s,r)};Vt.useRef=function(t){return Ca.current.useRef(t)};Vt.useState=function(t){return Ca.current.useState(t)};Vt.useSyncExternalStore=function(t,s,r){return Ca.current.useSyncExternalStore(t,s,r)};Vt.useTransition=function(){return Ca.current.useTransition()};Vt.version="18.3.1";WE.exports=Vt;var h=WE.exports;const ds=bN(h),Wx=yN({__proto__:null,default:ds},[h]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wO=h,NO=Symbol.for("react.element"),kO=Symbol.for("react.fragment"),CO=Object.prototype.hasOwnProperty,SO=wO.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,_O={key:!0,ref:!0,__self:!0,__source:!0};function XE(t,s,r){var a,n={},i=null,l=null;r!==void 0&&(i=""+r),s.key!==void 0&&(i=""+s.key),s.ref!==void 0&&(l=s.ref);for(a in s)CO.call(s,a)&&!_O.hasOwnProperty(a)&&(n[a]=s[a]);if(t&&t.defaultProps)for(a in s=t.defaultProps,s)n[a]===void 0&&(n[a]=s[a]);return{$$typeof:NO,type:t,key:i,ref:l,props:n,_owner:SO.current}}uf.Fragment=kO;uf.jsx=XE;uf.jsxs=XE;qE.exports=uf;var e=qE.exports,Ev={},e3={exports:{}},cn={},t3={exports:{}},s3={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function s(B,T){var O=B.length;B.push(T);e:for(;0<O;){var q=O-1>>>1,K=B[q];if(0<n(K,T))B[q]=T,B[O]=K,O=q;else break e}}function r(B){return B.length===0?null:B[0]}function a(B){if(B.length===0)return null;var T=B[0],O=B.pop();if(O!==T){B[0]=O;e:for(var q=0,K=B.length,le=K>>>1;q<le;){var X=2*(q+1)-1,se=B[X],de=X+1,fe=B[de];if(0>n(se,O))de<K&&0>n(fe,se)?(B[q]=fe,B[de]=O,q=de):(B[q]=se,B[X]=O,q=X);else if(de<K&&0>n(fe,O))B[q]=fe,B[de]=O,q=de;else break e}}return T}function n(B,T){var O=B.sortIndex-T.sortIndex;return O!==0?O:B.id-T.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var l=Date,o=l.now();t.unstable_now=function(){return l.now()-o}}var c=[],d=[],u=1,m=null,p=3,x=!1,g=!1,f=!1,b=typeof setTimeout=="function"?setTimeout:null,j=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(B){for(var T=r(d);T!==null;){if(T.callback===null)a(d);else if(T.startTime<=B)a(d),T.sortIndex=T.expirationTime,s(c,T);else break;T=r(d)}}function y(B){if(f=!1,w(B),!g)if(r(c)!==null)g=!0,$(C);else{var T=r(d);T!==null&&L(y,T.startTime-B)}}function C(B,T){g=!1,f&&(f=!1,j(E),E=-1),x=!0;var O=p;try{for(w(T),m=r(c);m!==null&&(!(m.expirationTime>T)||B&&!I());){var q=m.callback;if(typeof q=="function"){m.callback=null,p=m.priorityLevel;var K=q(m.expirationTime<=T);T=t.unstable_now(),typeof K=="function"?m.callback=K:m===r(c)&&a(c),w(T)}else a(c);m=r(c)}if(m!==null)var le=!0;else{var X=r(d);X!==null&&L(y,X.startTime-T),le=!1}return le}finally{m=null,p=O,x=!1}}var S=!1,_=null,E=-1,A=5,R=-1;function I(){return!(t.unstable_now()-R<A)}function N(){if(_!==null){var B=t.unstable_now();R=B;var T=!0;try{T=_(!0,B)}finally{T?P():(S=!1,_=null)}}else S=!1}var P;if(typeof v=="function")P=function(){v(N)};else if(typeof MessageChannel<"u"){var k=new MessageChannel,D=k.port2;k.port1.onmessage=N,P=function(){D.postMessage(null)}}else P=function(){b(N,0)};function $(B){_=B,S||(S=!0,P())}function L(B,T){E=b(function(){B(t.unstable_now())},T)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(B){B.callback=null},t.unstable_continueExecution=function(){g||x||(g=!0,$(C))},t.unstable_forceFrameRate=function(B){0>B||125<B?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<B?Math.floor(1e3/B):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(B){switch(p){case 1:case 2:case 3:var T=3;break;default:T=p}var O=p;p=T;try{return B()}finally{p=O}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(B,T){switch(B){case 1:case 2:case 3:case 4:case 5:break;default:B=3}var O=p;p=B;try{return T()}finally{p=O}},t.unstable_scheduleCallback=function(B,T,O){var q=t.unstable_now();switch(typeof O=="object"&&O!==null?(O=O.delay,O=typeof O=="number"&&0<O?q+O:q):O=q,B){case 1:var K=-1;break;case 2:K=250;break;case 5:K=1073741823;break;case 4:K=1e4;break;default:K=5e3}return K=O+K,B={id:u++,callback:T,priorityLevel:B,startTime:O,expirationTime:K,sortIndex:-1},O>q?(B.sortIndex=O,s(d,B),r(c)===null&&B===r(d)&&(f?(j(E),E=-1):f=!0,L(y,O-q))):(B.sortIndex=K,s(c,B),g||x||(g=!0,$(C))),B},t.unstable_shouldYield=I,t.unstable_wrapCallback=function(B){var T=p;return function(){var O=p;p=T;try{return B.apply(this,arguments)}finally{p=O}}}})(s3);t3.exports=s3;var EO=t3.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var AO=h,an=EO;function Re(t){for(var s="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=1;r<arguments.length;r++)s+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+t+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r3=new Set,Ch={};function rd(t,s){Nu(t,s),Nu(t+"Capture",s)}function Nu(t,s){for(Ch[t]=s,t=0;t<s.length;t++)r3.add(s[t])}var fl=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Av=Object.prototype.hasOwnProperty,TO=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Fk={},Ok={};function PO(t){return Av.call(Ok,t)?!0:Av.call(Fk,t)?!1:TO.test(t)?Ok[t]=!0:(Fk[t]=!0,!1)}function RO(t,s,r,a){if(r!==null&&r.type===0)return!1;switch(typeof s){case"function":case"symbol":return!0;case"boolean":return a?!1:r!==null?!r.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function DO(t,s,r,a){if(s===null||typeof s>"u"||RO(t,s,r,a))return!0;if(a)return!1;if(r!==null)switch(r.type){case 3:return!s;case 4:return s===!1;case 5:return isNaN(s);case 6:return isNaN(s)||1>s}return!1}function Sa(t,s,r,a,n,i,l){this.acceptsBooleans=s===2||s===3||s===4,this.attributeName=a,this.attributeNamespace=n,this.mustUseProperty=r,this.propertyName=t,this.type=s,this.sanitizeURL=i,this.removeEmptyString=l}var Qr={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Qr[t]=new Sa(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var s=t[0];Qr[s]=new Sa(s,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Qr[t]=new Sa(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Qr[t]=new Sa(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Qr[t]=new Sa(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Qr[t]=new Sa(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Qr[t]=new Sa(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Qr[t]=new Sa(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Qr[t]=new Sa(t,5,!1,t.toLowerCase(),null,!1,!1)});var kN=/[\-:]([a-z])/g;function CN(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var s=t.replace(kN,CN);Qr[s]=new Sa(s,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var s=t.replace(kN,CN);Qr[s]=new Sa(s,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var s=t.replace(kN,CN);Qr[s]=new Sa(s,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Qr[t]=new Sa(t,1,!1,t.toLowerCase(),null,!1,!1)});Qr.xlinkHref=new Sa("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Qr[t]=new Sa(t,1,!1,t.toLowerCase(),null,!0,!0)});function SN(t,s,r,a){var n=Qr.hasOwnProperty(s)?Qr[s]:null;(n!==null?n.type!==0:a||!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(DO(s,r,n,a)&&(r=null),a||n===null?PO(s)&&(r===null?t.removeAttribute(s):t.setAttribute(s,""+r)):n.mustUseProperty?t[n.propertyName]=r===null?n.type===3?!1:"":r:(s=n.attributeName,a=n.attributeNamespace,r===null?t.removeAttribute(s):(n=n.type,r=n===3||n===4&&r===!0?"":""+r,a?t.setAttributeNS(a,s,r):t.setAttribute(s,r))))}var Tl=AO.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,rp=Symbol.for("react.element"),Ld=Symbol.for("react.portal"),Fd=Symbol.for("react.fragment"),_N=Symbol.for("react.strict_mode"),Tv=Symbol.for("react.profiler"),a3=Symbol.for("react.provider"),n3=Symbol.for("react.context"),EN=Symbol.for("react.forward_ref"),Pv=Symbol.for("react.suspense"),Rv=Symbol.for("react.suspense_list"),AN=Symbol.for("react.memo"),ql=Symbol.for("react.lazy"),i3=Symbol.for("react.offscreen"),Bk=Symbol.iterator;function hm(t){return t===null||typeof t!="object"?null:(t=Bk&&t[Bk]||t["@@iterator"],typeof t=="function"?t:null)}var Gs=Object.assign,ab;function Um(t){if(ab===void 0)try{throw Error()}catch(r){var s=r.stack.trim().match(/\n( *(at )?)/);ab=s&&s[1]||""}return`
`+ab+t}var nb=!1;function ib(t,s){if(!t||nb)return"";nb=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(s)if(s=function(){throw Error()},Object.defineProperty(s.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(s,[])}catch(d){var a=d}Reflect.construct(t,[],s)}else{try{s.call()}catch(d){a=d}t.call(s.prototype)}else{try{throw Error()}catch(d){a=d}t()}}catch(d){if(d&&a&&typeof d.stack=="string"){for(var n=d.stack.split(`
`),i=a.stack.split(`
`),l=n.length-1,o=i.length-1;1<=l&&0<=o&&n[l]!==i[o];)o--;for(;1<=l&&0<=o;l--,o--)if(n[l]!==i[o]){if(l!==1||o!==1)do if(l--,o--,0>o||n[l]!==i[o]){var c=`
`+n[l].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=l&&0<=o);break}}}finally{nb=!1,Error.prepareStackTrace=r}return(t=t?t.displayName||t.name:"")?Um(t):""}function IO(t){switch(t.tag){case 5:return Um(t.type);case 16:return Um("Lazy");case 13:return Um("Suspense");case 19:return Um("SuspenseList");case 0:case 2:case 15:return t=ib(t.type,!1),t;case 11:return t=ib(t.type.render,!1),t;case 1:return t=ib(t.type,!0),t;default:return""}}function Dv(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Fd:return"Fragment";case Ld:return"Portal";case Tv:return"Profiler";case _N:return"StrictMode";case Pv:return"Suspense";case Rv:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case n3:return(t.displayName||"Context")+".Consumer";case a3:return(t._context.displayName||"Context")+".Provider";case EN:var s=t.render;return t=t.displayName,t||(t=s.displayName||s.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case AN:return s=t.displayName||null,s!==null?s:Dv(t.type)||"Memo";case ql:s=t._payload,t=t._init;try{return Dv(t(s))}catch{}}return null}function MO(t){var s=t.type;switch(t.tag){case 24:return"Cache";case 9:return(s.displayName||"Context")+".Consumer";case 10:return(s._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=s.render,t=t.displayName||t.name||"",s.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return s;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Dv(s);case 8:return s===_N?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s}return null}function _o(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function l3(t){var s=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function LO(t){var s=l3(t)?"checked":"value",r=Object.getOwnPropertyDescriptor(t.constructor.prototype,s),a=""+t[s];if(!t.hasOwnProperty(s)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var n=r.get,i=r.set;return Object.defineProperty(t,s,{configurable:!0,get:function(){return n.call(this)},set:function(l){a=""+l,i.call(this,l)}}),Object.defineProperty(t,s,{enumerable:r.enumerable}),{getValue:function(){return a},setValue:function(l){a=""+l},stopTracking:function(){t._valueTracker=null,delete t[s]}}}}function ap(t){t._valueTracker||(t._valueTracker=LO(t))}function o3(t){if(!t)return!1;var s=t._valueTracker;if(!s)return!0;var r=s.getValue(),a="";return t&&(a=l3(t)?t.checked?"true":"false":t.value),t=a,t!==r?(s.setValue(t),!0):!1}function zx(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Iv(t,s){var r=s.checked;return Gs({},s,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??t._wrapperState.initialChecked})}function $k(t,s){var r=s.defaultValue==null?"":s.defaultValue,a=s.checked!=null?s.checked:s.defaultChecked;r=_o(s.value!=null?s.value:r),t._wrapperState={initialChecked:a,initialValue:r,controlled:s.type==="checkbox"||s.type==="radio"?s.checked!=null:s.value!=null}}function c3(t,s){s=s.checked,s!=null&&SN(t,"checked",s,!1)}function Mv(t,s){c3(t,s);var r=_o(s.value),a=s.type;if(r!=null)a==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+r):t.value!==""+r&&(t.value=""+r);else if(a==="submit"||a==="reset"){t.removeAttribute("value");return}s.hasOwnProperty("value")?Lv(t,s.type,r):s.hasOwnProperty("defaultValue")&&Lv(t,s.type,_o(s.defaultValue)),s.checked==null&&s.defaultChecked!=null&&(t.defaultChecked=!!s.defaultChecked)}function Uk(t,s,r){if(s.hasOwnProperty("value")||s.hasOwnProperty("defaultValue")){var a=s.type;if(!(a!=="submit"&&a!=="reset"||s.value!==void 0&&s.value!==null))return;s=""+t._wrapperState.initialValue,r||s===t.value||(t.value=s),t.defaultValue=s}r=t.name,r!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,r!==""&&(t.name=r)}function Lv(t,s,r){(s!=="number"||zx(t.ownerDocument)!==t)&&(r==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+r&&(t.defaultValue=""+r))}var Vm=Array.isArray;function eu(t,s,r,a){if(t=t.options,s){s={};for(var n=0;n<r.length;n++)s["$"+r[n]]=!0;for(r=0;r<t.length;r++)n=s.hasOwnProperty("$"+t[r].value),t[r].selected!==n&&(t[r].selected=n),n&&a&&(t[r].defaultSelected=!0)}else{for(r=""+_o(r),s=null,n=0;n<t.length;n++){if(t[n].value===r){t[n].selected=!0,a&&(t[n].defaultSelected=!0);return}s!==null||t[n].disabled||(s=t[n])}s!==null&&(s.selected=!0)}}function Fv(t,s){if(s.dangerouslySetInnerHTML!=null)throw Error(Re(91));return Gs({},s,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Vk(t,s){var r=s.value;if(r==null){if(r=s.children,s=s.defaultValue,r!=null){if(s!=null)throw Error(Re(92));if(Vm(r)){if(1<r.length)throw Error(Re(93));r=r[0]}s=r}s==null&&(s=""),r=s}t._wrapperState={initialValue:_o(r)}}function d3(t,s){var r=_o(s.value),a=_o(s.defaultValue);r!=null&&(r=""+r,r!==t.value&&(t.value=r),s.defaultValue==null&&t.defaultValue!==r&&(t.defaultValue=r)),a!=null&&(t.defaultValue=""+a)}function qk(t){var s=t.textContent;s===t._wrapperState.initialValue&&s!==""&&s!==null&&(t.value=s)}function u3(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ov(t,s){return t==null||t==="http://www.w3.org/1999/xhtml"?u3(s):t==="http://www.w3.org/2000/svg"&&s==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var np,m3=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(s,r,a,n){MSApp.execUnsafeLocalFunction(function(){return t(s,r,a,n)})}:t}(function(t,s){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=s;else{for(np=np||document.createElement("div"),np.innerHTML="<svg>"+s.valueOf().toString()+"</svg>",s=np.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;s.firstChild;)t.appendChild(s.firstChild)}});function Sh(t,s){if(s){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=s;return}}t.textContent=s}var th={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},FO=["Webkit","ms","Moz","O"];Object.keys(th).forEach(function(t){FO.forEach(function(s){s=s+t.charAt(0).toUpperCase()+t.substring(1),th[s]=th[t]})});function h3(t,s,r){return s==null||typeof s=="boolean"||s===""?"":r||typeof s!="number"||s===0||th.hasOwnProperty(t)&&th[t]?(""+s).trim():s+"px"}function p3(t,s){t=t.style;for(var r in s)if(s.hasOwnProperty(r)){var a=r.indexOf("--")===0,n=h3(r,s[r],a);r==="float"&&(r="cssFloat"),a?t.setProperty(r,n):t[r]=n}}var OO=Gs({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Bv(t,s){if(s){if(OO[t]&&(s.children!=null||s.dangerouslySetInnerHTML!=null))throw Error(Re(137,t));if(s.dangerouslySetInnerHTML!=null){if(s.children!=null)throw Error(Re(60));if(typeof s.dangerouslySetInnerHTML!="object"||!("__html"in s.dangerouslySetInnerHTML))throw Error(Re(61))}if(s.style!=null&&typeof s.style!="object")throw Error(Re(62))}}function $v(t,s){if(t.indexOf("-")===-1)return typeof s.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Uv=null;function TN(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Vv=null,tu=null,su=null;function Wk(t){if(t=j0(t)){if(typeof Vv!="function")throw Error(Re(280));var s=t.stateNode;s&&(s=gf(s),Vv(t.stateNode,t.type,s))}}function x3(t){tu?su?su.push(t):su=[t]:tu=t}function g3(){if(tu){var t=tu,s=su;if(su=tu=null,Wk(t),s)for(t=0;t<s.length;t++)Wk(s[t])}}function f3(t,s){return t(s)}function y3(){}var lb=!1;function b3(t,s,r){if(lb)return t(s,r);lb=!0;try{return f3(t,s,r)}finally{lb=!1,(tu!==null||su!==null)&&(y3(),g3())}}function _h(t,s){var r=t.stateNode;if(r===null)return null;var a=gf(r);if(a===null)return null;r=a[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(a=!a.disabled)||(t=t.type,a=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!a;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(Re(231,s,typeof r));return r}var qv=!1;if(fl)try{var pm={};Object.defineProperty(pm,"passive",{get:function(){qv=!0}}),window.addEventListener("test",pm,pm),window.removeEventListener("test",pm,pm)}catch{qv=!1}function BO(t,s,r,a,n,i,l,o,c){var d=Array.prototype.slice.call(arguments,3);try{s.apply(r,d)}catch(u){this.onError(u)}}var sh=!1,Gx=null,Kx=!1,Wv=null,$O={onError:function(t){sh=!0,Gx=t}};function UO(t,s,r,a,n,i,l,o,c){sh=!1,Gx=null,BO.apply($O,arguments)}function VO(t,s,r,a,n,i,l,o,c){if(UO.apply(this,arguments),sh){if(sh){var d=Gx;sh=!1,Gx=null}else throw Error(Re(198));Kx||(Kx=!0,Wv=d)}}function ad(t){var s=t,r=t;if(t.alternate)for(;s.return;)s=s.return;else{t=s;do s=t,s.flags&4098&&(r=s.return),t=s.return;while(t)}return s.tag===3?r:null}function v3(t){if(t.tag===13){var s=t.memoizedState;if(s===null&&(t=t.alternate,t!==null&&(s=t.memoizedState)),s!==null)return s.dehydrated}return null}function zk(t){if(ad(t)!==t)throw Error(Re(188))}function qO(t){var s=t.alternate;if(!s){if(s=ad(t),s===null)throw Error(Re(188));return s!==t?null:t}for(var r=t,a=s;;){var n=r.return;if(n===null)break;var i=n.alternate;if(i===null){if(a=n.return,a!==null){r=a;continue}break}if(n.child===i.child){for(i=n.child;i;){if(i===r)return zk(n),t;if(i===a)return zk(n),s;i=i.sibling}throw Error(Re(188))}if(r.return!==a.return)r=n,a=i;else{for(var l=!1,o=n.child;o;){if(o===r){l=!0,r=n,a=i;break}if(o===a){l=!0,a=n,r=i;break}o=o.sibling}if(!l){for(o=i.child;o;){if(o===r){l=!0,r=i,a=n;break}if(o===a){l=!0,a=i,r=n;break}o=o.sibling}if(!l)throw Error(Re(189))}}if(r.alternate!==a)throw Error(Re(190))}if(r.tag!==3)throw Error(Re(188));return r.stateNode.current===r?t:s}function j3(t){return t=qO(t),t!==null?w3(t):null}function w3(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var s=w3(t);if(s!==null)return s;t=t.sibling}return null}var N3=an.unstable_scheduleCallback,Gk=an.unstable_cancelCallback,WO=an.unstable_shouldYield,zO=an.unstable_requestPaint,ar=an.unstable_now,GO=an.unstable_getCurrentPriorityLevel,PN=an.unstable_ImmediatePriority,k3=an.unstable_UserBlockingPriority,Hx=an.unstable_NormalPriority,KO=an.unstable_LowPriority,C3=an.unstable_IdlePriority,mf=null,Di=null;function HO(t){if(Di&&typeof Di.onCommitFiberRoot=="function")try{Di.onCommitFiberRoot(mf,t,void 0,(t.current.flags&128)===128)}catch{}}var ni=Math.clz32?Math.clz32:JO,YO=Math.log,QO=Math.LN2;function JO(t){return t>>>=0,t===0?32:31-(YO(t)/QO|0)|0}var ip=64,lp=4194304;function qm(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Yx(t,s){var r=t.pendingLanes;if(r===0)return 0;var a=0,n=t.suspendedLanes,i=t.pingedLanes,l=r&268435455;if(l!==0){var o=l&~n;o!==0?a=qm(o):(i&=l,i!==0&&(a=qm(i)))}else l=r&~n,l!==0?a=qm(l):i!==0&&(a=qm(i));if(a===0)return 0;if(s!==0&&s!==a&&!(s&n)&&(n=a&-a,i=s&-s,n>=i||n===16&&(i&4194240)!==0))return s;if(a&4&&(a|=r&16),s=t.entangledLanes,s!==0)for(t=t.entanglements,s&=a;0<s;)r=31-ni(s),n=1<<r,a|=t[r],s&=~n;return a}function ZO(t,s){switch(t){case 1:case 2:case 4:return s+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function XO(t,s){for(var r=t.suspendedLanes,a=t.pingedLanes,n=t.expirationTimes,i=t.pendingLanes;0<i;){var l=31-ni(i),o=1<<l,c=n[l];c===-1?(!(o&r)||o&a)&&(n[l]=ZO(o,s)):c<=s&&(t.expiredLanes|=o),i&=~o}}function zv(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function S3(){var t=ip;return ip<<=1,!(ip&4194240)&&(ip=64),t}function ob(t){for(var s=[],r=0;31>r;r++)s.push(t);return s}function b0(t,s,r){t.pendingLanes|=s,s!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,s=31-ni(s),t[s]=r}function e7(t,s){var r=t.pendingLanes&~s;t.pendingLanes=s,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=s,t.mutableReadLanes&=s,t.entangledLanes&=s,s=t.entanglements;var a=t.eventTimes;for(t=t.expirationTimes;0<r;){var n=31-ni(r),i=1<<n;s[n]=0,a[n]=-1,t[n]=-1,r&=~i}}function RN(t,s){var r=t.entangledLanes|=s;for(t=t.entanglements;r;){var a=31-ni(r),n=1<<a;n&s|t[a]&s&&(t[a]|=s),r&=~n}}var us=0;function _3(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var E3,DN,A3,T3,P3,Gv=!1,op=[],ho=null,po=null,xo=null,Eh=new Map,Ah=new Map,Hl=[],t7="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Kk(t,s){switch(t){case"focusin":case"focusout":ho=null;break;case"dragenter":case"dragleave":po=null;break;case"mouseover":case"mouseout":xo=null;break;case"pointerover":case"pointerout":Eh.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ah.delete(s.pointerId)}}function xm(t,s,r,a,n,i){return t===null||t.nativeEvent!==i?(t={blockedOn:s,domEventName:r,eventSystemFlags:a,nativeEvent:i,targetContainers:[n]},s!==null&&(s=j0(s),s!==null&&DN(s)),t):(t.eventSystemFlags|=a,s=t.targetContainers,n!==null&&s.indexOf(n)===-1&&s.push(n),t)}function s7(t,s,r,a,n){switch(s){case"focusin":return ho=xm(ho,t,s,r,a,n),!0;case"dragenter":return po=xm(po,t,s,r,a,n),!0;case"mouseover":return xo=xm(xo,t,s,r,a,n),!0;case"pointerover":var i=n.pointerId;return Eh.set(i,xm(Eh.get(i)||null,t,s,r,a,n)),!0;case"gotpointercapture":return i=n.pointerId,Ah.set(i,xm(Ah.get(i)||null,t,s,r,a,n)),!0}return!1}function R3(t){var s=fc(t.target);if(s!==null){var r=ad(s);if(r!==null){if(s=r.tag,s===13){if(s=v3(r),s!==null){t.blockedOn=s,P3(t.priority,function(){A3(r)});return}}else if(s===3&&r.stateNode.current.memoizedState.isDehydrated){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function xx(t){if(t.blockedOn!==null)return!1;for(var s=t.targetContainers;0<s.length;){var r=Kv(t.domEventName,t.eventSystemFlags,s[0],t.nativeEvent);if(r===null){r=t.nativeEvent;var a=new r.constructor(r.type,r);Uv=a,r.target.dispatchEvent(a),Uv=null}else return s=j0(r),s!==null&&DN(s),t.blockedOn=r,!1;s.shift()}return!0}function Hk(t,s,r){xx(t)&&r.delete(s)}function r7(){Gv=!1,ho!==null&&xx(ho)&&(ho=null),po!==null&&xx(po)&&(po=null),xo!==null&&xx(xo)&&(xo=null),Eh.forEach(Hk),Ah.forEach(Hk)}function gm(t,s){t.blockedOn===s&&(t.blockedOn=null,Gv||(Gv=!0,an.unstable_scheduleCallback(an.unstable_NormalPriority,r7)))}function Th(t){function s(n){return gm(n,t)}if(0<op.length){gm(op[0],t);for(var r=1;r<op.length;r++){var a=op[r];a.blockedOn===t&&(a.blockedOn=null)}}for(ho!==null&&gm(ho,t),po!==null&&gm(po,t),xo!==null&&gm(xo,t),Eh.forEach(s),Ah.forEach(s),r=0;r<Hl.length;r++)a=Hl[r],a.blockedOn===t&&(a.blockedOn=null);for(;0<Hl.length&&(r=Hl[0],r.blockedOn===null);)R3(r),r.blockedOn===null&&Hl.shift()}var ru=Tl.ReactCurrentBatchConfig,Qx=!0;function a7(t,s,r,a){var n=us,i=ru.transition;ru.transition=null;try{us=1,IN(t,s,r,a)}finally{us=n,ru.transition=i}}function n7(t,s,r,a){var n=us,i=ru.transition;ru.transition=null;try{us=4,IN(t,s,r,a)}finally{us=n,ru.transition=i}}function IN(t,s,r,a){if(Qx){var n=Kv(t,s,r,a);if(n===null)yb(t,s,a,Jx,r),Kk(t,a);else if(s7(n,t,s,r,a))a.stopPropagation();else if(Kk(t,a),s&4&&-1<t7.indexOf(t)){for(;n!==null;){var i=j0(n);if(i!==null&&E3(i),i=Kv(t,s,r,a),i===null&&yb(t,s,a,Jx,r),i===n)break;n=i}n!==null&&a.stopPropagation()}else yb(t,s,a,null,r)}}var Jx=null;function Kv(t,s,r,a){if(Jx=null,t=TN(a),t=fc(t),t!==null)if(s=ad(t),s===null)t=null;else if(r=s.tag,r===13){if(t=v3(s),t!==null)return t;t=null}else if(r===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;t=null}else s!==t&&(t=null);return Jx=t,null}function D3(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(GO()){case PN:return 1;case k3:return 4;case Hx:case KO:return 16;case C3:return 536870912;default:return 16}default:return 16}}var lo=null,MN=null,gx=null;function I3(){if(gx)return gx;var t,s=MN,r=s.length,a,n="value"in lo?lo.value:lo.textContent,i=n.length;for(t=0;t<r&&s[t]===n[t];t++);var l=r-t;for(a=1;a<=l&&s[r-a]===n[i-a];a++);return gx=n.slice(t,1<a?1-a:void 0)}function fx(t){var s=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&s===13&&(t=13)):t=s,t===10&&(t=13),32<=t||t===13?t:0}function cp(){return!0}function Yk(){return!1}function dn(t){function s(r,a,n,i,l){this._reactName=r,this._targetInst=n,this.type=a,this.nativeEvent=i,this.target=l,this.currentTarget=null;for(var o in t)t.hasOwnProperty(o)&&(r=t[o],this[o]=r?r(i):i[o]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?cp:Yk,this.isPropagationStopped=Yk,this}return Gs(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=cp)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=cp)},persist:function(){},isPersistent:cp}),s}var Zu={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},LN=dn(Zu),v0=Gs({},Zu,{view:0,detail:0}),i7=dn(v0),cb,db,fm,hf=Gs({},v0,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:FN,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==fm&&(fm&&t.type==="mousemove"?(cb=t.screenX-fm.screenX,db=t.screenY-fm.screenY):db=cb=0,fm=t),cb)},movementY:function(t){return"movementY"in t?t.movementY:db}}),Qk=dn(hf),l7=Gs({},hf,{dataTransfer:0}),o7=dn(l7),c7=Gs({},v0,{relatedTarget:0}),ub=dn(c7),d7=Gs({},Zu,{animationName:0,elapsedTime:0,pseudoElement:0}),u7=dn(d7),m7=Gs({},Zu,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),h7=dn(m7),p7=Gs({},Zu,{data:0}),Jk=dn(p7),x7={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},g7={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},f7={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function y7(t){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(t):(t=f7[t])?!!s[t]:!1}function FN(){return y7}var b7=Gs({},v0,{key:function(t){if(t.key){var s=x7[t.key]||t.key;if(s!=="Unidentified")return s}return t.type==="keypress"?(t=fx(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?g7[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:FN,charCode:function(t){return t.type==="keypress"?fx(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?fx(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),v7=dn(b7),j7=Gs({},hf,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Zk=dn(j7),w7=Gs({},v0,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:FN}),N7=dn(w7),k7=Gs({},Zu,{propertyName:0,elapsedTime:0,pseudoElement:0}),C7=dn(k7),S7=Gs({},hf,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),_7=dn(S7),E7=[9,13,27,32],ON=fl&&"CompositionEvent"in window,rh=null;fl&&"documentMode"in document&&(rh=document.documentMode);var A7=fl&&"TextEvent"in window&&!rh,M3=fl&&(!ON||rh&&8<rh&&11>=rh),Xk=" ",e4=!1;function L3(t,s){switch(t){case"keyup":return E7.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function F3(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Od=!1;function T7(t,s){switch(t){case"compositionend":return F3(s);case"keypress":return s.which!==32?null:(e4=!0,Xk);case"textInput":return t=s.data,t===Xk&&e4?null:t;default:return null}}function P7(t,s){if(Od)return t==="compositionend"||!ON&&L3(t,s)?(t=I3(),gx=MN=lo=null,Od=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return M3&&s.locale!=="ko"?null:s.data;default:return null}}var R7={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function t4(t){var s=t&&t.nodeName&&t.nodeName.toLowerCase();return s==="input"?!!R7[t.type]:s==="textarea"}function O3(t,s,r,a){x3(a),s=Zx(s,"onChange"),0<s.length&&(r=new LN("onChange","change",null,r,a),t.push({event:r,listeners:s}))}var ah=null,Ph=null;function D7(t){Y3(t,0)}function pf(t){var s=Ud(t);if(o3(s))return t}function I7(t,s){if(t==="change")return s}var B3=!1;if(fl){var mb;if(fl){var hb="oninput"in document;if(!hb){var s4=document.createElement("div");s4.setAttribute("oninput","return;"),hb=typeof s4.oninput=="function"}mb=hb}else mb=!1;B3=mb&&(!document.documentMode||9<document.documentMode)}function r4(){ah&&(ah.detachEvent("onpropertychange",$3),Ph=ah=null)}function $3(t){if(t.propertyName==="value"&&pf(Ph)){var s=[];O3(s,Ph,t,TN(t)),b3(D7,s)}}function M7(t,s,r){t==="focusin"?(r4(),ah=s,Ph=r,ah.attachEvent("onpropertychange",$3)):t==="focusout"&&r4()}function L7(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return pf(Ph)}function F7(t,s){if(t==="click")return pf(s)}function O7(t,s){if(t==="input"||t==="change")return pf(s)}function B7(t,s){return t===s&&(t!==0||1/t===1/s)||t!==t&&s!==s}var oi=typeof Object.is=="function"?Object.is:B7;function Rh(t,s){if(oi(t,s))return!0;if(typeof t!="object"||t===null||typeof s!="object"||s===null)return!1;var r=Object.keys(t),a=Object.keys(s);if(r.length!==a.length)return!1;for(a=0;a<r.length;a++){var n=r[a];if(!Av.call(s,n)||!oi(t[n],s[n]))return!1}return!0}function a4(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function n4(t,s){var r=a4(t);t=0;for(var a;r;){if(r.nodeType===3){if(a=t+r.textContent.length,t<=s&&a>=s)return{node:r,offset:s-t};t=a}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=a4(r)}}function U3(t,s){return t&&s?t===s?!0:t&&t.nodeType===3?!1:s&&s.nodeType===3?U3(t,s.parentNode):"contains"in t?t.contains(s):t.compareDocumentPosition?!!(t.compareDocumentPosition(s)&16):!1:!1}function V3(){for(var t=window,s=zx();s instanceof t.HTMLIFrameElement;){try{var r=typeof s.contentWindow.location.href=="string"}catch{r=!1}if(r)t=s.contentWindow;else break;s=zx(t.document)}return s}function BN(t){var s=t&&t.nodeName&&t.nodeName.toLowerCase();return s&&(s==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||s==="textarea"||t.contentEditable==="true")}function $7(t){var s=V3(),r=t.focusedElem,a=t.selectionRange;if(s!==r&&r&&r.ownerDocument&&U3(r.ownerDocument.documentElement,r)){if(a!==null&&BN(r)){if(s=a.start,t=a.end,t===void 0&&(t=s),"selectionStart"in r)r.selectionStart=s,r.selectionEnd=Math.min(t,r.value.length);else if(t=(s=r.ownerDocument||document)&&s.defaultView||window,t.getSelection){t=t.getSelection();var n=r.textContent.length,i=Math.min(a.start,n);a=a.end===void 0?i:Math.min(a.end,n),!t.extend&&i>a&&(n=a,a=i,i=n),n=n4(r,i);var l=n4(r,a);n&&l&&(t.rangeCount!==1||t.anchorNode!==n.node||t.anchorOffset!==n.offset||t.focusNode!==l.node||t.focusOffset!==l.offset)&&(s=s.createRange(),s.setStart(n.node,n.offset),t.removeAllRanges(),i>a?(t.addRange(s),t.extend(l.node,l.offset)):(s.setEnd(l.node,l.offset),t.addRange(s)))}}for(s=[],t=r;t=t.parentNode;)t.nodeType===1&&s.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<s.length;r++)t=s[r],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var U7=fl&&"documentMode"in document&&11>=document.documentMode,Bd=null,Hv=null,nh=null,Yv=!1;function i4(t,s,r){var a=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Yv||Bd==null||Bd!==zx(a)||(a=Bd,"selectionStart"in a&&BN(a)?a={start:a.selectionStart,end:a.selectionEnd}:(a=(a.ownerDocument&&a.ownerDocument.defaultView||window).getSelection(),a={anchorNode:a.anchorNode,anchorOffset:a.anchorOffset,focusNode:a.focusNode,focusOffset:a.focusOffset}),nh&&Rh(nh,a)||(nh=a,a=Zx(Hv,"onSelect"),0<a.length&&(s=new LN("onSelect","select",null,s,r),t.push({event:s,listeners:a}),s.target=Bd)))}function dp(t,s){var r={};return r[t.toLowerCase()]=s.toLowerCase(),r["Webkit"+t]="webkit"+s,r["Moz"+t]="moz"+s,r}var $d={animationend:dp("Animation","AnimationEnd"),animationiteration:dp("Animation","AnimationIteration"),animationstart:dp("Animation","AnimationStart"),transitionend:dp("Transition","TransitionEnd")},pb={},q3={};fl&&(q3=document.createElement("div").style,"AnimationEvent"in window||(delete $d.animationend.animation,delete $d.animationiteration.animation,delete $d.animationstart.animation),"TransitionEvent"in window||delete $d.transitionend.transition);function xf(t){if(pb[t])return pb[t];if(!$d[t])return t;var s=$d[t],r;for(r in s)if(s.hasOwnProperty(r)&&r in q3)return pb[t]=s[r];return t}var W3=xf("animationend"),z3=xf("animationiteration"),G3=xf("animationstart"),K3=xf("transitionend"),H3=new Map,l4="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Lo(t,s){H3.set(t,s),rd(s,[t])}for(var xb=0;xb<l4.length;xb++){var gb=l4[xb],V7=gb.toLowerCase(),q7=gb[0].toUpperCase()+gb.slice(1);Lo(V7,"on"+q7)}Lo(W3,"onAnimationEnd");Lo(z3,"onAnimationIteration");Lo(G3,"onAnimationStart");Lo("dblclick","onDoubleClick");Lo("focusin","onFocus");Lo("focusout","onBlur");Lo(K3,"onTransitionEnd");Nu("onMouseEnter",["mouseout","mouseover"]);Nu("onMouseLeave",["mouseout","mouseover"]);Nu("onPointerEnter",["pointerout","pointerover"]);Nu("onPointerLeave",["pointerout","pointerover"]);rd("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));rd("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));rd("onBeforeInput",["compositionend","keypress","textInput","paste"]);rd("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));rd("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));rd("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Wm="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),W7=new Set("cancel close invalid load scroll toggle".split(" ").concat(Wm));function o4(t,s,r){var a=t.type||"unknown-event";t.currentTarget=r,VO(a,s,void 0,t),t.currentTarget=null}function Y3(t,s){s=(s&4)!==0;for(var r=0;r<t.length;r++){var a=t[r],n=a.event;a=a.listeners;e:{var i=void 0;if(s)for(var l=a.length-1;0<=l;l--){var o=a[l],c=o.instance,d=o.currentTarget;if(o=o.listener,c!==i&&n.isPropagationStopped())break e;o4(n,o,d),i=c}else for(l=0;l<a.length;l++){if(o=a[l],c=o.instance,d=o.currentTarget,o=o.listener,c!==i&&n.isPropagationStopped())break e;o4(n,o,d),i=c}}}if(Kx)throw t=Wv,Kx=!1,Wv=null,t}function Ts(t,s){var r=s[ej];r===void 0&&(r=s[ej]=new Set);var a=t+"__bubble";r.has(a)||(Q3(s,t,2,!1),r.add(a))}function fb(t,s,r){var a=0;s&&(a|=4),Q3(r,t,a,s)}var up="_reactListening"+Math.random().toString(36).slice(2);function Dh(t){if(!t[up]){t[up]=!0,r3.forEach(function(r){r!=="selectionchange"&&(W7.has(r)||fb(r,!1,t),fb(r,!0,t))});var s=t.nodeType===9?t:t.ownerDocument;s===null||s[up]||(s[up]=!0,fb("selectionchange",!1,s))}}function Q3(t,s,r,a){switch(D3(s)){case 1:var n=a7;break;case 4:n=n7;break;default:n=IN}r=n.bind(null,s,r,t),n=void 0,!qv||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(n=!0),a?n!==void 0?t.addEventListener(s,r,{capture:!0,passive:n}):t.addEventListener(s,r,!0):n!==void 0?t.addEventListener(s,r,{passive:n}):t.addEventListener(s,r,!1)}function yb(t,s,r,a,n){var i=a;if(!(s&1)&&!(s&2)&&a!==null)e:for(;;){if(a===null)return;var l=a.tag;if(l===3||l===4){var o=a.stateNode.containerInfo;if(o===n||o.nodeType===8&&o.parentNode===n)break;if(l===4)for(l=a.return;l!==null;){var c=l.tag;if((c===3||c===4)&&(c=l.stateNode.containerInfo,c===n||c.nodeType===8&&c.parentNode===n))return;l=l.return}for(;o!==null;){if(l=fc(o),l===null)return;if(c=l.tag,c===5||c===6){a=i=l;continue e}o=o.parentNode}}a=a.return}b3(function(){var d=i,u=TN(r),m=[];e:{var p=H3.get(t);if(p!==void 0){var x=LN,g=t;switch(t){case"keypress":if(fx(r)===0)break e;case"keydown":case"keyup":x=v7;break;case"focusin":g="focus",x=ub;break;case"focusout":g="blur",x=ub;break;case"beforeblur":case"afterblur":x=ub;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":x=Qk;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":x=o7;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":x=N7;break;case W3:case z3:case G3:x=u7;break;case K3:x=C7;break;case"scroll":x=i7;break;case"wheel":x=_7;break;case"copy":case"cut":case"paste":x=h7;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":x=Zk}var f=(s&4)!==0,b=!f&&t==="scroll",j=f?p!==null?p+"Capture":null:p;f=[];for(var v=d,w;v!==null;){w=v;var y=w.stateNode;if(w.tag===5&&y!==null&&(w=y,j!==null&&(y=_h(v,j),y!=null&&f.push(Ih(v,y,w)))),b)break;v=v.return}0<f.length&&(p=new x(p,g,null,r,u),m.push({event:p,listeners:f}))}}if(!(s&7)){e:{if(p=t==="mouseover"||t==="pointerover",x=t==="mouseout"||t==="pointerout",p&&r!==Uv&&(g=r.relatedTarget||r.fromElement)&&(fc(g)||g[yl]))break e;if((x||p)&&(p=u.window===u?u:(p=u.ownerDocument)?p.defaultView||p.parentWindow:window,x?(g=r.relatedTarget||r.toElement,x=d,g=g?fc(g):null,g!==null&&(b=ad(g),g!==b||g.tag!==5&&g.tag!==6)&&(g=null)):(x=null,g=d),x!==g)){if(f=Qk,y="onMouseLeave",j="onMouseEnter",v="mouse",(t==="pointerout"||t==="pointerover")&&(f=Zk,y="onPointerLeave",j="onPointerEnter",v="pointer"),b=x==null?p:Ud(x),w=g==null?p:Ud(g),p=new f(y,v+"leave",x,r,u),p.target=b,p.relatedTarget=w,y=null,fc(u)===d&&(f=new f(j,v+"enter",g,r,u),f.target=w,f.relatedTarget=b,y=f),b=y,x&&g)t:{for(f=x,j=g,v=0,w=f;w;w=md(w))v++;for(w=0,y=j;y;y=md(y))w++;for(;0<v-w;)f=md(f),v--;for(;0<w-v;)j=md(j),w--;for(;v--;){if(f===j||j!==null&&f===j.alternate)break t;f=md(f),j=md(j)}f=null}else f=null;x!==null&&c4(m,p,x,f,!1),g!==null&&b!==null&&c4(m,b,g,f,!0)}}e:{if(p=d?Ud(d):window,x=p.nodeName&&p.nodeName.toLowerCase(),x==="select"||x==="input"&&p.type==="file")var C=I7;else if(t4(p))if(B3)C=O7;else{C=L7;var S=M7}else(x=p.nodeName)&&x.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(C=F7);if(C&&(C=C(t,d))){O3(m,C,r,u);break e}S&&S(t,p,d),t==="focusout"&&(S=p._wrapperState)&&S.controlled&&p.type==="number"&&Lv(p,"number",p.value)}switch(S=d?Ud(d):window,t){case"focusin":(t4(S)||S.contentEditable==="true")&&(Bd=S,Hv=d,nh=null);break;case"focusout":nh=Hv=Bd=null;break;case"mousedown":Yv=!0;break;case"contextmenu":case"mouseup":case"dragend":Yv=!1,i4(m,r,u);break;case"selectionchange":if(U7)break;case"keydown":case"keyup":i4(m,r,u)}var _;if(ON)e:{switch(t){case"compositionstart":var E="onCompositionStart";break e;case"compositionend":E="onCompositionEnd";break e;case"compositionupdate":E="onCompositionUpdate";break e}E=void 0}else Od?L3(t,r)&&(E="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(E="onCompositionStart");E&&(M3&&r.locale!=="ko"&&(Od||E!=="onCompositionStart"?E==="onCompositionEnd"&&Od&&(_=I3()):(lo=u,MN="value"in lo?lo.value:lo.textContent,Od=!0)),S=Zx(d,E),0<S.length&&(E=new Jk(E,t,null,r,u),m.push({event:E,listeners:S}),_?E.data=_:(_=F3(r),_!==null&&(E.data=_)))),(_=A7?T7(t,r):P7(t,r))&&(d=Zx(d,"onBeforeInput"),0<d.length&&(u=new Jk("onBeforeInput","beforeinput",null,r,u),m.push({event:u,listeners:d}),u.data=_))}Y3(m,s)})}function Ih(t,s,r){return{instance:t,listener:s,currentTarget:r}}function Zx(t,s){for(var r=s+"Capture",a=[];t!==null;){var n=t,i=n.stateNode;n.tag===5&&i!==null&&(n=i,i=_h(t,r),i!=null&&a.unshift(Ih(t,i,n)),i=_h(t,s),i!=null&&a.push(Ih(t,i,n))),t=t.return}return a}function md(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function c4(t,s,r,a,n){for(var i=s._reactName,l=[];r!==null&&r!==a;){var o=r,c=o.alternate,d=o.stateNode;if(c!==null&&c===a)break;o.tag===5&&d!==null&&(o=d,n?(c=_h(r,i),c!=null&&l.unshift(Ih(r,c,o))):n||(c=_h(r,i),c!=null&&l.push(Ih(r,c,o)))),r=r.return}l.length!==0&&t.push({event:s,listeners:l})}var z7=/\r\n?/g,G7=/\u0000|\uFFFD/g;function d4(t){return(typeof t=="string"?t:""+t).replace(z7,`
`).replace(G7,"")}function mp(t,s,r){if(s=d4(s),d4(t)!==s&&r)throw Error(Re(425))}function Xx(){}var Qv=null,Jv=null;function Zv(t,s){return t==="textarea"||t==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var Xv=typeof setTimeout=="function"?setTimeout:void 0,K7=typeof clearTimeout=="function"?clearTimeout:void 0,u4=typeof Promise=="function"?Promise:void 0,H7=typeof queueMicrotask=="function"?queueMicrotask:typeof u4<"u"?function(t){return u4.resolve(null).then(t).catch(Y7)}:Xv;function Y7(t){setTimeout(function(){throw t})}function bb(t,s){var r=s,a=0;do{var n=r.nextSibling;if(t.removeChild(r),n&&n.nodeType===8)if(r=n.data,r==="/$"){if(a===0){t.removeChild(n),Th(s);return}a--}else r!=="$"&&r!=="$?"&&r!=="$!"||a++;r=n}while(r);Th(s)}function go(t){for(;t!=null;t=t.nextSibling){var s=t.nodeType;if(s===1||s===3)break;if(s===8){if(s=t.data,s==="$"||s==="$!"||s==="$?")break;if(s==="/$")return null}}return t}function m4(t){t=t.previousSibling;for(var s=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"){if(s===0)return t;s--}else r==="/$"&&s++}t=t.previousSibling}return null}var Xu=Math.random().toString(36).slice(2),Ci="__reactFiber$"+Xu,Mh="__reactProps$"+Xu,yl="__reactContainer$"+Xu,ej="__reactEvents$"+Xu,Q7="__reactListeners$"+Xu,J7="__reactHandles$"+Xu;function fc(t){var s=t[Ci];if(s)return s;for(var r=t.parentNode;r;){if(s=r[yl]||r[Ci]){if(r=s.alternate,s.child!==null||r!==null&&r.child!==null)for(t=m4(t);t!==null;){if(r=t[Ci])return r;t=m4(t)}return s}t=r,r=t.parentNode}return null}function j0(t){return t=t[Ci]||t[yl],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Ud(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(Re(33))}function gf(t){return t[Mh]||null}var tj=[],Vd=-1;function Fo(t){return{current:t}}function Ps(t){0>Vd||(t.current=tj[Vd],tj[Vd]=null,Vd--)}function Ss(t,s){Vd++,tj[Vd]=t.current,t.current=s}var Eo={},da=Fo(Eo),La=Fo(!1),Vc=Eo;function ku(t,s){var r=t.type.contextTypes;if(!r)return Eo;var a=t.stateNode;if(a&&a.__reactInternalMemoizedUnmaskedChildContext===s)return a.__reactInternalMemoizedMaskedChildContext;var n={},i;for(i in r)n[i]=s[i];return a&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=n),n}function Fa(t){return t=t.childContextTypes,t!=null}function eg(){Ps(La),Ps(da)}function h4(t,s,r){if(da.current!==Eo)throw Error(Re(168));Ss(da,s),Ss(La,r)}function J3(t,s,r){var a=t.stateNode;if(s=s.childContextTypes,typeof a.getChildContext!="function")return r;a=a.getChildContext();for(var n in a)if(!(n in s))throw Error(Re(108,MO(t)||"Unknown",n));return Gs({},r,a)}function tg(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Eo,Vc=da.current,Ss(da,t),Ss(La,La.current),!0}function p4(t,s,r){var a=t.stateNode;if(!a)throw Error(Re(169));r?(t=J3(t,s,Vc),a.__reactInternalMemoizedMergedChildContext=t,Ps(La),Ps(da),Ss(da,t)):Ps(La),Ss(La,r)}var sl=null,ff=!1,vb=!1;function Z3(t){sl===null?sl=[t]:sl.push(t)}function Z7(t){ff=!0,Z3(t)}function Oo(){if(!vb&&sl!==null){vb=!0;var t=0,s=us;try{var r=sl;for(us=1;t<r.length;t++){var a=r[t];do a=a(!0);while(a!==null)}sl=null,ff=!1}catch(n){throw sl!==null&&(sl=sl.slice(t+1)),N3(PN,Oo),n}finally{us=s,vb=!1}}return null}var qd=[],Wd=0,sg=null,rg=0,Cn=[],Sn=0,qc=null,cl=1,dl="";function ac(t,s){qd[Wd++]=rg,qd[Wd++]=sg,sg=t,rg=s}function X3(t,s,r){Cn[Sn++]=cl,Cn[Sn++]=dl,Cn[Sn++]=qc,qc=t;var a=cl;t=dl;var n=32-ni(a)-1;a&=~(1<<n),r+=1;var i=32-ni(s)+n;if(30<i){var l=n-n%5;i=(a&(1<<l)-1).toString(32),a>>=l,n-=l,cl=1<<32-ni(s)+n|r<<n|a,dl=i+t}else cl=1<<i|r<<n|a,dl=t}function $N(t){t.return!==null&&(ac(t,1),X3(t,1,0))}function UN(t){for(;t===sg;)sg=qd[--Wd],qd[Wd]=null,rg=qd[--Wd],qd[Wd]=null;for(;t===qc;)qc=Cn[--Sn],Cn[Sn]=null,dl=Cn[--Sn],Cn[Sn]=null,cl=Cn[--Sn],Cn[Sn]=null}var sn=null,tn=null,Bs=!1,ti=null;function eA(t,s){var r=An(5,null,null,0);r.elementType="DELETED",r.stateNode=s,r.return=t,s=t.deletions,s===null?(t.deletions=[r],t.flags|=16):s.push(r)}function x4(t,s){switch(t.tag){case 5:var r=t.type;return s=s.nodeType!==1||r.toLowerCase()!==s.nodeName.toLowerCase()?null:s,s!==null?(t.stateNode=s,sn=t,tn=go(s.firstChild),!0):!1;case 6:return s=t.pendingProps===""||s.nodeType!==3?null:s,s!==null?(t.stateNode=s,sn=t,tn=null,!0):!1;case 13:return s=s.nodeType!==8?null:s,s!==null?(r=qc!==null?{id:cl,overflow:dl}:null,t.memoizedState={dehydrated:s,treeContext:r,retryLane:1073741824},r=An(18,null,null,0),r.stateNode=s,r.return=t,t.child=r,sn=t,tn=null,!0):!1;default:return!1}}function sj(t){return(t.mode&1)!==0&&(t.flags&128)===0}function rj(t){if(Bs){var s=tn;if(s){var r=s;if(!x4(t,s)){if(sj(t))throw Error(Re(418));s=go(r.nextSibling);var a=sn;s&&x4(t,s)?eA(a,r):(t.flags=t.flags&-4097|2,Bs=!1,sn=t)}}else{if(sj(t))throw Error(Re(418));t.flags=t.flags&-4097|2,Bs=!1,sn=t}}}function g4(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;sn=t}function hp(t){if(t!==sn)return!1;if(!Bs)return g4(t),Bs=!0,!1;var s;if((s=t.tag!==3)&&!(s=t.tag!==5)&&(s=t.type,s=s!=="head"&&s!=="body"&&!Zv(t.type,t.memoizedProps)),s&&(s=tn)){if(sj(t))throw tA(),Error(Re(418));for(;s;)eA(t,s),s=go(s.nextSibling)}if(g4(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(Re(317));e:{for(t=t.nextSibling,s=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"){if(s===0){tn=go(t.nextSibling);break e}s--}else r!=="$"&&r!=="$!"&&r!=="$?"||s++}t=t.nextSibling}tn=null}}else tn=sn?go(t.stateNode.nextSibling):null;return!0}function tA(){for(var t=tn;t;)t=go(t.nextSibling)}function Cu(){tn=sn=null,Bs=!1}function VN(t){ti===null?ti=[t]:ti.push(t)}var X7=Tl.ReactCurrentBatchConfig;function ym(t,s,r){if(t=r.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(Re(309));var a=r.stateNode}if(!a)throw Error(Re(147,t));var n=a,i=""+t;return s!==null&&s.ref!==null&&typeof s.ref=="function"&&s.ref._stringRef===i?s.ref:(s=function(l){var o=n.refs;l===null?delete o[i]:o[i]=l},s._stringRef=i,s)}if(typeof t!="string")throw Error(Re(284));if(!r._owner)throw Error(Re(290,t))}return t}function pp(t,s){throw t=Object.prototype.toString.call(s),Error(Re(31,t==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":t))}function f4(t){var s=t._init;return s(t._payload)}function sA(t){function s(j,v){if(t){var w=j.deletions;w===null?(j.deletions=[v],j.flags|=16):w.push(v)}}function r(j,v){if(!t)return null;for(;v!==null;)s(j,v),v=v.sibling;return null}function a(j,v){for(j=new Map;v!==null;)v.key!==null?j.set(v.key,v):j.set(v.index,v),v=v.sibling;return j}function n(j,v){return j=vo(j,v),j.index=0,j.sibling=null,j}function i(j,v,w){return j.index=w,t?(w=j.alternate,w!==null?(w=w.index,w<v?(j.flags|=2,v):w):(j.flags|=2,v)):(j.flags|=1048576,v)}function l(j){return t&&j.alternate===null&&(j.flags|=2),j}function o(j,v,w,y){return v===null||v.tag!==6?(v=_b(w,j.mode,y),v.return=j,v):(v=n(v,w),v.return=j,v)}function c(j,v,w,y){var C=w.type;return C===Fd?u(j,v,w.props.children,y,w.key):v!==null&&(v.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===ql&&f4(C)===v.type)?(y=n(v,w.props),y.ref=ym(j,v,w),y.return=j,y):(y=kx(w.type,w.key,w.props,null,j.mode,y),y.ref=ym(j,v,w),y.return=j,y)}function d(j,v,w,y){return v===null||v.tag!==4||v.stateNode.containerInfo!==w.containerInfo||v.stateNode.implementation!==w.implementation?(v=Eb(w,j.mode,y),v.return=j,v):(v=n(v,w.children||[]),v.return=j,v)}function u(j,v,w,y,C){return v===null||v.tag!==7?(v=Oc(w,j.mode,y,C),v.return=j,v):(v=n(v,w),v.return=j,v)}function m(j,v,w){if(typeof v=="string"&&v!==""||typeof v=="number")return v=_b(""+v,j.mode,w),v.return=j,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case rp:return w=kx(v.type,v.key,v.props,null,j.mode,w),w.ref=ym(j,null,v),w.return=j,w;case Ld:return v=Eb(v,j.mode,w),v.return=j,v;case ql:var y=v._init;return m(j,y(v._payload),w)}if(Vm(v)||hm(v))return v=Oc(v,j.mode,w,null),v.return=j,v;pp(j,v)}return null}function p(j,v,w,y){var C=v!==null?v.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return C!==null?null:o(j,v,""+w,y);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case rp:return w.key===C?c(j,v,w,y):null;case Ld:return w.key===C?d(j,v,w,y):null;case ql:return C=w._init,p(j,v,C(w._payload),y)}if(Vm(w)||hm(w))return C!==null?null:u(j,v,w,y,null);pp(j,w)}return null}function x(j,v,w,y,C){if(typeof y=="string"&&y!==""||typeof y=="number")return j=j.get(w)||null,o(v,j,""+y,C);if(typeof y=="object"&&y!==null){switch(y.$$typeof){case rp:return j=j.get(y.key===null?w:y.key)||null,c(v,j,y,C);case Ld:return j=j.get(y.key===null?w:y.key)||null,d(v,j,y,C);case ql:var S=y._init;return x(j,v,w,S(y._payload),C)}if(Vm(y)||hm(y))return j=j.get(w)||null,u(v,j,y,C,null);pp(v,y)}return null}function g(j,v,w,y){for(var C=null,S=null,_=v,E=v=0,A=null;_!==null&&E<w.length;E++){_.index>E?(A=_,_=null):A=_.sibling;var R=p(j,_,w[E],y);if(R===null){_===null&&(_=A);break}t&&_&&R.alternate===null&&s(j,_),v=i(R,v,E),S===null?C=R:S.sibling=R,S=R,_=A}if(E===w.length)return r(j,_),Bs&&ac(j,E),C;if(_===null){for(;E<w.length;E++)_=m(j,w[E],y),_!==null&&(v=i(_,v,E),S===null?C=_:S.sibling=_,S=_);return Bs&&ac(j,E),C}for(_=a(j,_);E<w.length;E++)A=x(_,j,E,w[E],y),A!==null&&(t&&A.alternate!==null&&_.delete(A.key===null?E:A.key),v=i(A,v,E),S===null?C=A:S.sibling=A,S=A);return t&&_.forEach(function(I){return s(j,I)}),Bs&&ac(j,E),C}function f(j,v,w,y){var C=hm(w);if(typeof C!="function")throw Error(Re(150));if(w=C.call(w),w==null)throw Error(Re(151));for(var S=C=null,_=v,E=v=0,A=null,R=w.next();_!==null&&!R.done;E++,R=w.next()){_.index>E?(A=_,_=null):A=_.sibling;var I=p(j,_,R.value,y);if(I===null){_===null&&(_=A);break}t&&_&&I.alternate===null&&s(j,_),v=i(I,v,E),S===null?C=I:S.sibling=I,S=I,_=A}if(R.done)return r(j,_),Bs&&ac(j,E),C;if(_===null){for(;!R.done;E++,R=w.next())R=m(j,R.value,y),R!==null&&(v=i(R,v,E),S===null?C=R:S.sibling=R,S=R);return Bs&&ac(j,E),C}for(_=a(j,_);!R.done;E++,R=w.next())R=x(_,j,E,R.value,y),R!==null&&(t&&R.alternate!==null&&_.delete(R.key===null?E:R.key),v=i(R,v,E),S===null?C=R:S.sibling=R,S=R);return t&&_.forEach(function(N){return s(j,N)}),Bs&&ac(j,E),C}function b(j,v,w,y){if(typeof w=="object"&&w!==null&&w.type===Fd&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case rp:e:{for(var C=w.key,S=v;S!==null;){if(S.key===C){if(C=w.type,C===Fd){if(S.tag===7){r(j,S.sibling),v=n(S,w.props.children),v.return=j,j=v;break e}}else if(S.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===ql&&f4(C)===S.type){r(j,S.sibling),v=n(S,w.props),v.ref=ym(j,S,w),v.return=j,j=v;break e}r(j,S);break}else s(j,S);S=S.sibling}w.type===Fd?(v=Oc(w.props.children,j.mode,y,w.key),v.return=j,j=v):(y=kx(w.type,w.key,w.props,null,j.mode,y),y.ref=ym(j,v,w),y.return=j,j=y)}return l(j);case Ld:e:{for(S=w.key;v!==null;){if(v.key===S)if(v.tag===4&&v.stateNode.containerInfo===w.containerInfo&&v.stateNode.implementation===w.implementation){r(j,v.sibling),v=n(v,w.children||[]),v.return=j,j=v;break e}else{r(j,v);break}else s(j,v);v=v.sibling}v=Eb(w,j.mode,y),v.return=j,j=v}return l(j);case ql:return S=w._init,b(j,v,S(w._payload),y)}if(Vm(w))return g(j,v,w,y);if(hm(w))return f(j,v,w,y);pp(j,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,v!==null&&v.tag===6?(r(j,v.sibling),v=n(v,w),v.return=j,j=v):(r(j,v),v=_b(w,j.mode,y),v.return=j,j=v),l(j)):r(j,v)}return b}var Su=sA(!0),rA=sA(!1),ag=Fo(null),ng=null,zd=null,qN=null;function WN(){qN=zd=ng=null}function zN(t){var s=ag.current;Ps(ag),t._currentValue=s}function aj(t,s,r){for(;t!==null;){var a=t.alternate;if((t.childLanes&s)!==s?(t.childLanes|=s,a!==null&&(a.childLanes|=s)):a!==null&&(a.childLanes&s)!==s&&(a.childLanes|=s),t===r)break;t=t.return}}function au(t,s){ng=t,qN=zd=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&s&&(Ma=!0),t.firstContext=null)}function Dn(t){var s=t._currentValue;if(qN!==t)if(t={context:t,memoizedValue:s,next:null},zd===null){if(ng===null)throw Error(Re(308));zd=t,ng.dependencies={lanes:0,firstContext:t}}else zd=zd.next=t;return s}var yc=null;function GN(t){yc===null?yc=[t]:yc.push(t)}function aA(t,s,r,a){var n=s.interleaved;return n===null?(r.next=r,GN(s)):(r.next=n.next,n.next=r),s.interleaved=r,bl(t,a)}function bl(t,s){t.lanes|=s;var r=t.alternate;for(r!==null&&(r.lanes|=s),r=t,t=t.return;t!==null;)t.childLanes|=s,r=t.alternate,r!==null&&(r.childLanes|=s),r=t,t=t.return;return r.tag===3?r.stateNode:null}var Wl=!1;function KN(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function nA(t,s){t=t.updateQueue,s.updateQueue===t&&(s.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function ml(t,s){return{eventTime:t,lane:s,tag:0,payload:null,callback:null,next:null}}function fo(t,s,r){var a=t.updateQueue;if(a===null)return null;if(a=a.shared,Zt&2){var n=a.pending;return n===null?s.next=s:(s.next=n.next,n.next=s),a.pending=s,bl(t,r)}return n=a.interleaved,n===null?(s.next=s,GN(a)):(s.next=n.next,n.next=s),a.interleaved=s,bl(t,r)}function yx(t,s,r){if(s=s.updateQueue,s!==null&&(s=s.shared,(r&4194240)!==0)){var a=s.lanes;a&=t.pendingLanes,r|=a,s.lanes=r,RN(t,r)}}function y4(t,s){var r=t.updateQueue,a=t.alternate;if(a!==null&&(a=a.updateQueue,r===a)){var n=null,i=null;if(r=r.firstBaseUpdate,r!==null){do{var l={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};i===null?n=i=l:i=i.next=l,r=r.next}while(r!==null);i===null?n=i=s:i=i.next=s}else n=i=s;r={baseState:a.baseState,firstBaseUpdate:n,lastBaseUpdate:i,shared:a.shared,effects:a.effects},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=s:t.next=s,r.lastBaseUpdate=s}function ig(t,s,r,a){var n=t.updateQueue;Wl=!1;var i=n.firstBaseUpdate,l=n.lastBaseUpdate,o=n.shared.pending;if(o!==null){n.shared.pending=null;var c=o,d=c.next;c.next=null,l===null?i=d:l.next=d,l=c;var u=t.alternate;u!==null&&(u=u.updateQueue,o=u.lastBaseUpdate,o!==l&&(o===null?u.firstBaseUpdate=d:o.next=d,u.lastBaseUpdate=c))}if(i!==null){var m=n.baseState;l=0,u=d=c=null,o=i;do{var p=o.lane,x=o.eventTime;if((a&p)===p){u!==null&&(u=u.next={eventTime:x,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var g=t,f=o;switch(p=s,x=r,f.tag){case 1:if(g=f.payload,typeof g=="function"){m=g.call(x,m,p);break e}m=g;break e;case 3:g.flags=g.flags&-65537|128;case 0:if(g=f.payload,p=typeof g=="function"?g.call(x,m,p):g,p==null)break e;m=Gs({},m,p);break e;case 2:Wl=!0}}o.callback!==null&&o.lane!==0&&(t.flags|=64,p=n.effects,p===null?n.effects=[o]:p.push(o))}else x={eventTime:x,lane:p,tag:o.tag,payload:o.payload,callback:o.callback,next:null},u===null?(d=u=x,c=m):u=u.next=x,l|=p;if(o=o.next,o===null){if(o=n.shared.pending,o===null)break;p=o,o=p.next,p.next=null,n.lastBaseUpdate=p,n.shared.pending=null}}while(!0);if(u===null&&(c=m),n.baseState=c,n.firstBaseUpdate=d,n.lastBaseUpdate=u,s=n.shared.interleaved,s!==null){n=s;do l|=n.lane,n=n.next;while(n!==s)}else i===null&&(n.shared.lanes=0);zc|=l,t.lanes=l,t.memoizedState=m}}function b4(t,s,r){if(t=s.effects,s.effects=null,t!==null)for(s=0;s<t.length;s++){var a=t[s],n=a.callback;if(n!==null){if(a.callback=null,a=r,typeof n!="function")throw Error(Re(191,n));n.call(a)}}}var w0={},Ii=Fo(w0),Lh=Fo(w0),Fh=Fo(w0);function bc(t){if(t===w0)throw Error(Re(174));return t}function HN(t,s){switch(Ss(Fh,s),Ss(Lh,t),Ss(Ii,w0),t=s.nodeType,t){case 9:case 11:s=(s=s.documentElement)?s.namespaceURI:Ov(null,"");break;default:t=t===8?s.parentNode:s,s=t.namespaceURI||null,t=t.tagName,s=Ov(s,t)}Ps(Ii),Ss(Ii,s)}function _u(){Ps(Ii),Ps(Lh),Ps(Fh)}function iA(t){bc(Fh.current);var s=bc(Ii.current),r=Ov(s,t.type);s!==r&&(Ss(Lh,t),Ss(Ii,r))}function YN(t){Lh.current===t&&(Ps(Ii),Ps(Lh))}var Us=Fo(0);function lg(t){for(var s=t;s!==null;){if(s.tag===13){var r=s.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if(s.flags&128)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var jb=[];function QN(){for(var t=0;t<jb.length;t++)jb[t]._workInProgressVersionPrimary=null;jb.length=0}var bx=Tl.ReactCurrentDispatcher,wb=Tl.ReactCurrentBatchConfig,Wc=0,Ws=null,jr=null,Dr=null,og=!1,ih=!1,Oh=0,eB=0;function ea(){throw Error(Re(321))}function JN(t,s){if(s===null)return!1;for(var r=0;r<s.length&&r<t.length;r++)if(!oi(t[r],s[r]))return!1;return!0}function ZN(t,s,r,a,n,i){if(Wc=i,Ws=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,bx.current=t===null||t.memoizedState===null?aB:nB,t=r(a,n),ih){i=0;do{if(ih=!1,Oh=0,25<=i)throw Error(Re(301));i+=1,Dr=jr=null,s.updateQueue=null,bx.current=iB,t=r(a,n)}while(ih)}if(bx.current=cg,s=jr!==null&&jr.next!==null,Wc=0,Dr=jr=Ws=null,og=!1,s)throw Error(Re(300));return t}function XN(){var t=Oh!==0;return Oh=0,t}function yi(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Dr===null?Ws.memoizedState=Dr=t:Dr=Dr.next=t,Dr}function In(){if(jr===null){var t=Ws.alternate;t=t!==null?t.memoizedState:null}else t=jr.next;var s=Dr===null?Ws.memoizedState:Dr.next;if(s!==null)Dr=s,jr=t;else{if(t===null)throw Error(Re(310));jr=t,t={memoizedState:jr.memoizedState,baseState:jr.baseState,baseQueue:jr.baseQueue,queue:jr.queue,next:null},Dr===null?Ws.memoizedState=Dr=t:Dr=Dr.next=t}return Dr}function Bh(t,s){return typeof s=="function"?s(t):s}function Nb(t){var s=In(),r=s.queue;if(r===null)throw Error(Re(311));r.lastRenderedReducer=t;var a=jr,n=a.baseQueue,i=r.pending;if(i!==null){if(n!==null){var l=n.next;n.next=i.next,i.next=l}a.baseQueue=n=i,r.pending=null}if(n!==null){i=n.next,a=a.baseState;var o=l=null,c=null,d=i;do{var u=d.lane;if((Wc&u)===u)c!==null&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),a=d.hasEagerState?d.eagerState:t(a,d.action);else{var m={lane:u,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};c===null?(o=c=m,l=a):c=c.next=m,Ws.lanes|=u,zc|=u}d=d.next}while(d!==null&&d!==i);c===null?l=a:c.next=o,oi(a,s.memoizedState)||(Ma=!0),s.memoizedState=a,s.baseState=l,s.baseQueue=c,r.lastRenderedState=a}if(t=r.interleaved,t!==null){n=t;do i=n.lane,Ws.lanes|=i,zc|=i,n=n.next;while(n!==t)}else n===null&&(r.lanes=0);return[s.memoizedState,r.dispatch]}function kb(t){var s=In(),r=s.queue;if(r===null)throw Error(Re(311));r.lastRenderedReducer=t;var a=r.dispatch,n=r.pending,i=s.memoizedState;if(n!==null){r.pending=null;var l=n=n.next;do i=t(i,l.action),l=l.next;while(l!==n);oi(i,s.memoizedState)||(Ma=!0),s.memoizedState=i,s.baseQueue===null&&(s.baseState=i),r.lastRenderedState=i}return[i,a]}function lA(){}function oA(t,s){var r=Ws,a=In(),n=s(),i=!oi(a.memoizedState,n);if(i&&(a.memoizedState=n,Ma=!0),a=a.queue,e1(uA.bind(null,r,a,t),[t]),a.getSnapshot!==s||i||Dr!==null&&Dr.memoizedState.tag&1){if(r.flags|=2048,$h(9,dA.bind(null,r,a,n,s),void 0,null),Mr===null)throw Error(Re(349));Wc&30||cA(r,s,n)}return n}function cA(t,s,r){t.flags|=16384,t={getSnapshot:s,value:r},s=Ws.updateQueue,s===null?(s={lastEffect:null,stores:null},Ws.updateQueue=s,s.stores=[t]):(r=s.stores,r===null?s.stores=[t]:r.push(t))}function dA(t,s,r,a){s.value=r,s.getSnapshot=a,mA(s)&&hA(t)}function uA(t,s,r){return r(function(){mA(s)&&hA(t)})}function mA(t){var s=t.getSnapshot;t=t.value;try{var r=s();return!oi(t,r)}catch{return!0}}function hA(t){var s=bl(t,1);s!==null&&ii(s,t,1,-1)}function v4(t){var s=yi();return typeof t=="function"&&(t=t()),s.memoizedState=s.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Bh,lastRenderedState:t},s.queue=t,t=t.dispatch=rB.bind(null,Ws,t),[s.memoizedState,t]}function $h(t,s,r,a){return t={tag:t,create:s,destroy:r,deps:a,next:null},s=Ws.updateQueue,s===null?(s={lastEffect:null,stores:null},Ws.updateQueue=s,s.lastEffect=t.next=t):(r=s.lastEffect,r===null?s.lastEffect=t.next=t:(a=r.next,r.next=t,t.next=a,s.lastEffect=t)),t}function pA(){return In().memoizedState}function vx(t,s,r,a){var n=yi();Ws.flags|=t,n.memoizedState=$h(1|s,r,void 0,a===void 0?null:a)}function yf(t,s,r,a){var n=In();a=a===void 0?null:a;var i=void 0;if(jr!==null){var l=jr.memoizedState;if(i=l.destroy,a!==null&&JN(a,l.deps)){n.memoizedState=$h(s,r,i,a);return}}Ws.flags|=t,n.memoizedState=$h(1|s,r,i,a)}function j4(t,s){return vx(8390656,8,t,s)}function e1(t,s){return yf(2048,8,t,s)}function xA(t,s){return yf(4,2,t,s)}function gA(t,s){return yf(4,4,t,s)}function fA(t,s){if(typeof s=="function")return t=t(),s(t),function(){s(null)};if(s!=null)return t=t(),s.current=t,function(){s.current=null}}function yA(t,s,r){return r=r!=null?r.concat([t]):null,yf(4,4,fA.bind(null,s,t),r)}function t1(){}function bA(t,s){var r=In();s=s===void 0?null:s;var a=r.memoizedState;return a!==null&&s!==null&&JN(s,a[1])?a[0]:(r.memoizedState=[t,s],t)}function vA(t,s){var r=In();s=s===void 0?null:s;var a=r.memoizedState;return a!==null&&s!==null&&JN(s,a[1])?a[0]:(t=t(),r.memoizedState=[t,s],t)}function jA(t,s,r){return Wc&21?(oi(r,s)||(r=S3(),Ws.lanes|=r,zc|=r,t.baseState=!0),s):(t.baseState&&(t.baseState=!1,Ma=!0),t.memoizedState=r)}function tB(t,s){var r=us;us=r!==0&&4>r?r:4,t(!0);var a=wb.transition;wb.transition={};try{t(!1),s()}finally{us=r,wb.transition=a}}function wA(){return In().memoizedState}function sB(t,s,r){var a=bo(t);if(r={lane:a,action:r,hasEagerState:!1,eagerState:null,next:null},NA(t))kA(s,r);else if(r=aA(t,s,r,a),r!==null){var n=ja();ii(r,t,a,n),CA(r,s,a)}}function rB(t,s,r){var a=bo(t),n={lane:a,action:r,hasEagerState:!1,eagerState:null,next:null};if(NA(t))kA(s,n);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=s.lastRenderedReducer,i!==null))try{var l=s.lastRenderedState,o=i(l,r);if(n.hasEagerState=!0,n.eagerState=o,oi(o,l)){var c=s.interleaved;c===null?(n.next=n,GN(s)):(n.next=c.next,c.next=n),s.interleaved=n;return}}catch{}finally{}r=aA(t,s,n,a),r!==null&&(n=ja(),ii(r,t,a,n),CA(r,s,a))}}function NA(t){var s=t.alternate;return t===Ws||s!==null&&s===Ws}function kA(t,s){ih=og=!0;var r=t.pending;r===null?s.next=s:(s.next=r.next,r.next=s),t.pending=s}function CA(t,s,r){if(r&4194240){var a=s.lanes;a&=t.pendingLanes,r|=a,s.lanes=r,RN(t,r)}}var cg={readContext:Dn,useCallback:ea,useContext:ea,useEffect:ea,useImperativeHandle:ea,useInsertionEffect:ea,useLayoutEffect:ea,useMemo:ea,useReducer:ea,useRef:ea,useState:ea,useDebugValue:ea,useDeferredValue:ea,useTransition:ea,useMutableSource:ea,useSyncExternalStore:ea,useId:ea,unstable_isNewReconciler:!1},aB={readContext:Dn,useCallback:function(t,s){return yi().memoizedState=[t,s===void 0?null:s],t},useContext:Dn,useEffect:j4,useImperativeHandle:function(t,s,r){return r=r!=null?r.concat([t]):null,vx(4194308,4,fA.bind(null,s,t),r)},useLayoutEffect:function(t,s){return vx(4194308,4,t,s)},useInsertionEffect:function(t,s){return vx(4,2,t,s)},useMemo:function(t,s){var r=yi();return s=s===void 0?null:s,t=t(),r.memoizedState=[t,s],t},useReducer:function(t,s,r){var a=yi();return s=r!==void 0?r(s):s,a.memoizedState=a.baseState=s,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:s},a.queue=t,t=t.dispatch=sB.bind(null,Ws,t),[a.memoizedState,t]},useRef:function(t){var s=yi();return t={current:t},s.memoizedState=t},useState:v4,useDebugValue:t1,useDeferredValue:function(t){return yi().memoizedState=t},useTransition:function(){var t=v4(!1),s=t[0];return t=tB.bind(null,t[1]),yi().memoizedState=t,[s,t]},useMutableSource:function(){},useSyncExternalStore:function(t,s,r){var a=Ws,n=yi();if(Bs){if(r===void 0)throw Error(Re(407));r=r()}else{if(r=s(),Mr===null)throw Error(Re(349));Wc&30||cA(a,s,r)}n.memoizedState=r;var i={value:r,getSnapshot:s};return n.queue=i,j4(uA.bind(null,a,i,t),[t]),a.flags|=2048,$h(9,dA.bind(null,a,i,r,s),void 0,null),r},useId:function(){var t=yi(),s=Mr.identifierPrefix;if(Bs){var r=dl,a=cl;r=(a&~(1<<32-ni(a)-1)).toString(32)+r,s=":"+s+"R"+r,r=Oh++,0<r&&(s+="H"+r.toString(32)),s+=":"}else r=eB++,s=":"+s+"r"+r.toString(32)+":";return t.memoizedState=s},unstable_isNewReconciler:!1},nB={readContext:Dn,useCallback:bA,useContext:Dn,useEffect:e1,useImperativeHandle:yA,useInsertionEffect:xA,useLayoutEffect:gA,useMemo:vA,useReducer:Nb,useRef:pA,useState:function(){return Nb(Bh)},useDebugValue:t1,useDeferredValue:function(t){var s=In();return jA(s,jr.memoizedState,t)},useTransition:function(){var t=Nb(Bh)[0],s=In().memoizedState;return[t,s]},useMutableSource:lA,useSyncExternalStore:oA,useId:wA,unstable_isNewReconciler:!1},iB={readContext:Dn,useCallback:bA,useContext:Dn,useEffect:e1,useImperativeHandle:yA,useInsertionEffect:xA,useLayoutEffect:gA,useMemo:vA,useReducer:kb,useRef:pA,useState:function(){return kb(Bh)},useDebugValue:t1,useDeferredValue:function(t){var s=In();return jr===null?s.memoizedState=t:jA(s,jr.memoizedState,t)},useTransition:function(){var t=kb(Bh)[0],s=In().memoizedState;return[t,s]},useMutableSource:lA,useSyncExternalStore:oA,useId:wA,unstable_isNewReconciler:!1};function Yn(t,s){if(t&&t.defaultProps){s=Gs({},s),t=t.defaultProps;for(var r in t)s[r]===void 0&&(s[r]=t[r]);return s}return s}function nj(t,s,r,a){s=t.memoizedState,r=r(a,s),r=r==null?s:Gs({},s,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var bf={isMounted:function(t){return(t=t._reactInternals)?ad(t)===t:!1},enqueueSetState:function(t,s,r){t=t._reactInternals;var a=ja(),n=bo(t),i=ml(a,n);i.payload=s,r!=null&&(i.callback=r),s=fo(t,i,n),s!==null&&(ii(s,t,n,a),yx(s,t,n))},enqueueReplaceState:function(t,s,r){t=t._reactInternals;var a=ja(),n=bo(t),i=ml(a,n);i.tag=1,i.payload=s,r!=null&&(i.callback=r),s=fo(t,i,n),s!==null&&(ii(s,t,n,a),yx(s,t,n))},enqueueForceUpdate:function(t,s){t=t._reactInternals;var r=ja(),a=bo(t),n=ml(r,a);n.tag=2,s!=null&&(n.callback=s),s=fo(t,n,a),s!==null&&(ii(s,t,a,r),yx(s,t,a))}};function w4(t,s,r,a,n,i,l){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(a,i,l):s.prototype&&s.prototype.isPureReactComponent?!Rh(r,a)||!Rh(n,i):!0}function SA(t,s,r){var a=!1,n=Eo,i=s.contextType;return typeof i=="object"&&i!==null?i=Dn(i):(n=Fa(s)?Vc:da.current,a=s.contextTypes,i=(a=a!=null)?ku(t,n):Eo),s=new s(r,i),t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=bf,t.stateNode=s,s._reactInternals=t,a&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=n,t.__reactInternalMemoizedMaskedChildContext=i),s}function N4(t,s,r,a){t=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(r,a),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(r,a),s.state!==t&&bf.enqueueReplaceState(s,s.state,null)}function ij(t,s,r,a){var n=t.stateNode;n.props=r,n.state=t.memoizedState,n.refs={},KN(t);var i=s.contextType;typeof i=="object"&&i!==null?n.context=Dn(i):(i=Fa(s)?Vc:da.current,n.context=ku(t,i)),n.state=t.memoizedState,i=s.getDerivedStateFromProps,typeof i=="function"&&(nj(t,s,i,r),n.state=t.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof n.getSnapshotBeforeUpdate=="function"||typeof n.UNSAFE_componentWillMount!="function"&&typeof n.componentWillMount!="function"||(s=n.state,typeof n.componentWillMount=="function"&&n.componentWillMount(),typeof n.UNSAFE_componentWillMount=="function"&&n.UNSAFE_componentWillMount(),s!==n.state&&bf.enqueueReplaceState(n,n.state,null),ig(t,r,n,a),n.state=t.memoizedState),typeof n.componentDidMount=="function"&&(t.flags|=4194308)}function Eu(t,s){try{var r="",a=s;do r+=IO(a),a=a.return;while(a);var n=r}catch(i){n=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:s,stack:n,digest:null}}function Cb(t,s,r){return{value:t,source:null,stack:r??null,digest:s??null}}function lj(t,s){try{console.error(s.value)}catch(r){setTimeout(function(){throw r})}}var lB=typeof WeakMap=="function"?WeakMap:Map;function _A(t,s,r){r=ml(-1,r),r.tag=3,r.payload={element:null};var a=s.value;return r.callback=function(){ug||(ug=!0,fj=a),lj(t,s)},r}function EA(t,s,r){r=ml(-1,r),r.tag=3;var a=t.type.getDerivedStateFromError;if(typeof a=="function"){var n=s.value;r.payload=function(){return a(n)},r.callback=function(){lj(t,s)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(r.callback=function(){lj(t,s),typeof a!="function"&&(yo===null?yo=new Set([this]):yo.add(this));var l=s.stack;this.componentDidCatch(s.value,{componentStack:l!==null?l:""})}),r}function k4(t,s,r){var a=t.pingCache;if(a===null){a=t.pingCache=new lB;var n=new Set;a.set(s,n)}else n=a.get(s),n===void 0&&(n=new Set,a.set(s,n));n.has(r)||(n.add(r),t=jB.bind(null,t,s,r),s.then(t,t))}function C4(t){do{var s;if((s=t.tag===13)&&(s=t.memoizedState,s=s!==null?s.dehydrated!==null:!0),s)return t;t=t.return}while(t!==null);return null}function S4(t,s,r,a,n){return t.mode&1?(t.flags|=65536,t.lanes=n,t):(t===s?t.flags|=65536:(t.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(s=ml(-1,1),s.tag=2,fo(r,s,1))),r.lanes|=1),t)}var oB=Tl.ReactCurrentOwner,Ma=!1;function ya(t,s,r,a){s.child=t===null?rA(s,null,r,a):Su(s,t.child,r,a)}function _4(t,s,r,a,n){r=r.render;var i=s.ref;return au(s,n),a=ZN(t,s,r,a,i,n),r=XN(),t!==null&&!Ma?(s.updateQueue=t.updateQueue,s.flags&=-2053,t.lanes&=~n,vl(t,s,n)):(Bs&&r&&$N(s),s.flags|=1,ya(t,s,a,n),s.child)}function E4(t,s,r,a,n){if(t===null){var i=r.type;return typeof i=="function"&&!c1(i)&&i.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(s.tag=15,s.type=i,AA(t,s,i,a,n)):(t=kx(r.type,null,a,s,s.mode,n),t.ref=s.ref,t.return=s,s.child=t)}if(i=t.child,!(t.lanes&n)){var l=i.memoizedProps;if(r=r.compare,r=r!==null?r:Rh,r(l,a)&&t.ref===s.ref)return vl(t,s,n)}return s.flags|=1,t=vo(i,a),t.ref=s.ref,t.return=s,s.child=t}function AA(t,s,r,a,n){if(t!==null){var i=t.memoizedProps;if(Rh(i,a)&&t.ref===s.ref)if(Ma=!1,s.pendingProps=a=i,(t.lanes&n)!==0)t.flags&131072&&(Ma=!0);else return s.lanes=t.lanes,vl(t,s,n)}return oj(t,s,r,a,n)}function TA(t,s,r){var a=s.pendingProps,n=a.children,i=t!==null?t.memoizedState:null;if(a.mode==="hidden")if(!(s.mode&1))s.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ss(Kd,Ha),Ha|=r;else{if(!(r&1073741824))return t=i!==null?i.baseLanes|r:r,s.lanes=s.childLanes=1073741824,s.memoizedState={baseLanes:t,cachePool:null,transitions:null},s.updateQueue=null,Ss(Kd,Ha),Ha|=t,null;s.memoizedState={baseLanes:0,cachePool:null,transitions:null},a=i!==null?i.baseLanes:r,Ss(Kd,Ha),Ha|=a}else i!==null?(a=i.baseLanes|r,s.memoizedState=null):a=r,Ss(Kd,Ha),Ha|=a;return ya(t,s,n,r),s.child}function PA(t,s){var r=s.ref;(t===null&&r!==null||t!==null&&t.ref!==r)&&(s.flags|=512,s.flags|=2097152)}function oj(t,s,r,a,n){var i=Fa(r)?Vc:da.current;return i=ku(s,i),au(s,n),r=ZN(t,s,r,a,i,n),a=XN(),t!==null&&!Ma?(s.updateQueue=t.updateQueue,s.flags&=-2053,t.lanes&=~n,vl(t,s,n)):(Bs&&a&&$N(s),s.flags|=1,ya(t,s,r,n),s.child)}function A4(t,s,r,a,n){if(Fa(r)){var i=!0;tg(s)}else i=!1;if(au(s,n),s.stateNode===null)jx(t,s),SA(s,r,a),ij(s,r,a,n),a=!0;else if(t===null){var l=s.stateNode,o=s.memoizedProps;l.props=o;var c=l.context,d=r.contextType;typeof d=="object"&&d!==null?d=Dn(d):(d=Fa(r)?Vc:da.current,d=ku(s,d));var u=r.getDerivedStateFromProps,m=typeof u=="function"||typeof l.getSnapshotBeforeUpdate=="function";m||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(o!==a||c!==d)&&N4(s,l,a,d),Wl=!1;var p=s.memoizedState;l.state=p,ig(s,a,l,n),c=s.memoizedState,o!==a||p!==c||La.current||Wl?(typeof u=="function"&&(nj(s,r,u,a),c=s.memoizedState),(o=Wl||w4(s,r,o,a,p,c,d))?(m||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount()),typeof l.componentDidMount=="function"&&(s.flags|=4194308)):(typeof l.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=a,s.memoizedState=c),l.props=a,l.state=c,l.context=d,a=o):(typeof l.componentDidMount=="function"&&(s.flags|=4194308),a=!1)}else{l=s.stateNode,nA(t,s),o=s.memoizedProps,d=s.type===s.elementType?o:Yn(s.type,o),l.props=d,m=s.pendingProps,p=l.context,c=r.contextType,typeof c=="object"&&c!==null?c=Dn(c):(c=Fa(r)?Vc:da.current,c=ku(s,c));var x=r.getDerivedStateFromProps;(u=typeof x=="function"||typeof l.getSnapshotBeforeUpdate=="function")||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(o!==m||p!==c)&&N4(s,l,a,c),Wl=!1,p=s.memoizedState,l.state=p,ig(s,a,l,n);var g=s.memoizedState;o!==m||p!==g||La.current||Wl?(typeof x=="function"&&(nj(s,r,x,a),g=s.memoizedState),(d=Wl||w4(s,r,d,a,p,g,c)||!1)?(u||typeof l.UNSAFE_componentWillUpdate!="function"&&typeof l.componentWillUpdate!="function"||(typeof l.componentWillUpdate=="function"&&l.componentWillUpdate(a,g,c),typeof l.UNSAFE_componentWillUpdate=="function"&&l.UNSAFE_componentWillUpdate(a,g,c)),typeof l.componentDidUpdate=="function"&&(s.flags|=4),typeof l.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof l.componentDidUpdate!="function"||o===t.memoizedProps&&p===t.memoizedState||(s.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&p===t.memoizedState||(s.flags|=1024),s.memoizedProps=a,s.memoizedState=g),l.props=a,l.state=g,l.context=c,a=d):(typeof l.componentDidUpdate!="function"||o===t.memoizedProps&&p===t.memoizedState||(s.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&p===t.memoizedState||(s.flags|=1024),a=!1)}return cj(t,s,r,a,i,n)}function cj(t,s,r,a,n,i){PA(t,s);var l=(s.flags&128)!==0;if(!a&&!l)return n&&p4(s,r,!1),vl(t,s,i);a=s.stateNode,oB.current=s;var o=l&&typeof r.getDerivedStateFromError!="function"?null:a.render();return s.flags|=1,t!==null&&l?(s.child=Su(s,t.child,null,i),s.child=Su(s,null,o,i)):ya(t,s,o,i),s.memoizedState=a.state,n&&p4(s,r,!0),s.child}function RA(t){var s=t.stateNode;s.pendingContext?h4(t,s.pendingContext,s.pendingContext!==s.context):s.context&&h4(t,s.context,!1),HN(t,s.containerInfo)}function T4(t,s,r,a,n){return Cu(),VN(n),s.flags|=256,ya(t,s,r,a),s.child}var dj={dehydrated:null,treeContext:null,retryLane:0};function uj(t){return{baseLanes:t,cachePool:null,transitions:null}}function DA(t,s,r){var a=s.pendingProps,n=Us.current,i=!1,l=(s.flags&128)!==0,o;if((o=l)||(o=t!==null&&t.memoizedState===null?!1:(n&2)!==0),o?(i=!0,s.flags&=-129):(t===null||t.memoizedState!==null)&&(n|=1),Ss(Us,n&1),t===null)return rj(s),t=s.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(s.mode&1?t.data==="$!"?s.lanes=8:s.lanes=1073741824:s.lanes=1,null):(l=a.children,t=a.fallback,i?(a=s.mode,i=s.child,l={mode:"hidden",children:l},!(a&1)&&i!==null?(i.childLanes=0,i.pendingProps=l):i=wf(l,a,0,null),t=Oc(t,a,r,null),i.return=s,t.return=s,i.sibling=t,s.child=i,s.child.memoizedState=uj(r),s.memoizedState=dj,t):s1(s,l));if(n=t.memoizedState,n!==null&&(o=n.dehydrated,o!==null))return cB(t,s,l,a,o,n,r);if(i){i=a.fallback,l=s.mode,n=t.child,o=n.sibling;var c={mode:"hidden",children:a.children};return!(l&1)&&s.child!==n?(a=s.child,a.childLanes=0,a.pendingProps=c,s.deletions=null):(a=vo(n,c),a.subtreeFlags=n.subtreeFlags&14680064),o!==null?i=vo(o,i):(i=Oc(i,l,r,null),i.flags|=2),i.return=s,a.return=s,a.sibling=i,s.child=a,a=i,i=s.child,l=t.child.memoizedState,l=l===null?uj(r):{baseLanes:l.baseLanes|r,cachePool:null,transitions:l.transitions},i.memoizedState=l,i.childLanes=t.childLanes&~r,s.memoizedState=dj,a}return i=t.child,t=i.sibling,a=vo(i,{mode:"visible",children:a.children}),!(s.mode&1)&&(a.lanes=r),a.return=s,a.sibling=null,t!==null&&(r=s.deletions,r===null?(s.deletions=[t],s.flags|=16):r.push(t)),s.child=a,s.memoizedState=null,a}function s1(t,s){return s=wf({mode:"visible",children:s},t.mode,0,null),s.return=t,t.child=s}function xp(t,s,r,a){return a!==null&&VN(a),Su(s,t.child,null,r),t=s1(s,s.pendingProps.children),t.flags|=2,s.memoizedState=null,t}function cB(t,s,r,a,n,i,l){if(r)return s.flags&256?(s.flags&=-257,a=Cb(Error(Re(422))),xp(t,s,l,a)):s.memoizedState!==null?(s.child=t.child,s.flags|=128,null):(i=a.fallback,n=s.mode,a=wf({mode:"visible",children:a.children},n,0,null),i=Oc(i,n,l,null),i.flags|=2,a.return=s,i.return=s,a.sibling=i,s.child=a,s.mode&1&&Su(s,t.child,null,l),s.child.memoizedState=uj(l),s.memoizedState=dj,i);if(!(s.mode&1))return xp(t,s,l,null);if(n.data==="$!"){if(a=n.nextSibling&&n.nextSibling.dataset,a)var o=a.dgst;return a=o,i=Error(Re(419)),a=Cb(i,a,void 0),xp(t,s,l,a)}if(o=(l&t.childLanes)!==0,Ma||o){if(a=Mr,a!==null){switch(l&-l){case 4:n=2;break;case 16:n=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:n=32;break;case 536870912:n=268435456;break;default:n=0}n=n&(a.suspendedLanes|l)?0:n,n!==0&&n!==i.retryLane&&(i.retryLane=n,bl(t,n),ii(a,t,n,-1))}return o1(),a=Cb(Error(Re(421))),xp(t,s,l,a)}return n.data==="$?"?(s.flags|=128,s.child=t.child,s=wB.bind(null,t),n._reactRetry=s,null):(t=i.treeContext,tn=go(n.nextSibling),sn=s,Bs=!0,ti=null,t!==null&&(Cn[Sn++]=cl,Cn[Sn++]=dl,Cn[Sn++]=qc,cl=t.id,dl=t.overflow,qc=s),s=s1(s,a.children),s.flags|=4096,s)}function P4(t,s,r){t.lanes|=s;var a=t.alternate;a!==null&&(a.lanes|=s),aj(t.return,s,r)}function Sb(t,s,r,a,n){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:a,tail:r,tailMode:n}:(i.isBackwards=s,i.rendering=null,i.renderingStartTime=0,i.last=a,i.tail=r,i.tailMode=n)}function IA(t,s,r){var a=s.pendingProps,n=a.revealOrder,i=a.tail;if(ya(t,s,a.children,r),a=Us.current,a&2)a=a&1|2,s.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=s.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&P4(t,r,s);else if(t.tag===19)P4(t,r,s);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===s)break e;for(;t.sibling===null;){if(t.return===null||t.return===s)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}a&=1}if(Ss(Us,a),!(s.mode&1))s.memoizedState=null;else switch(n){case"forwards":for(r=s.child,n=null;r!==null;)t=r.alternate,t!==null&&lg(t)===null&&(n=r),r=r.sibling;r=n,r===null?(n=s.child,s.child=null):(n=r.sibling,r.sibling=null),Sb(s,!1,n,r,i);break;case"backwards":for(r=null,n=s.child,s.child=null;n!==null;){if(t=n.alternate,t!==null&&lg(t)===null){s.child=n;break}t=n.sibling,n.sibling=r,r=n,n=t}Sb(s,!0,r,null,i);break;case"together":Sb(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function jx(t,s){!(s.mode&1)&&t!==null&&(t.alternate=null,s.alternate=null,s.flags|=2)}function vl(t,s,r){if(t!==null&&(s.dependencies=t.dependencies),zc|=s.lanes,!(r&s.childLanes))return null;if(t!==null&&s.child!==t.child)throw Error(Re(153));if(s.child!==null){for(t=s.child,r=vo(t,t.pendingProps),s.child=r,r.return=s;t.sibling!==null;)t=t.sibling,r=r.sibling=vo(t,t.pendingProps),r.return=s;r.sibling=null}return s.child}function dB(t,s,r){switch(s.tag){case 3:RA(s),Cu();break;case 5:iA(s);break;case 1:Fa(s.type)&&tg(s);break;case 4:HN(s,s.stateNode.containerInfo);break;case 10:var a=s.type._context,n=s.memoizedProps.value;Ss(ag,a._currentValue),a._currentValue=n;break;case 13:if(a=s.memoizedState,a!==null)return a.dehydrated!==null?(Ss(Us,Us.current&1),s.flags|=128,null):r&s.child.childLanes?DA(t,s,r):(Ss(Us,Us.current&1),t=vl(t,s,r),t!==null?t.sibling:null);Ss(Us,Us.current&1);break;case 19:if(a=(r&s.childLanes)!==0,t.flags&128){if(a)return IA(t,s,r);s.flags|=128}if(n=s.memoizedState,n!==null&&(n.rendering=null,n.tail=null,n.lastEffect=null),Ss(Us,Us.current),a)break;return null;case 22:case 23:return s.lanes=0,TA(t,s,r)}return vl(t,s,r)}var MA,mj,LA,FA;MA=function(t,s){for(var r=s.child;r!==null;){if(r.tag===5||r.tag===6)t.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===s)break;for(;r.sibling===null;){if(r.return===null||r.return===s)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};mj=function(){};LA=function(t,s,r,a){var n=t.memoizedProps;if(n!==a){t=s.stateNode,bc(Ii.current);var i=null;switch(r){case"input":n=Iv(t,n),a=Iv(t,a),i=[];break;case"select":n=Gs({},n,{value:void 0}),a=Gs({},a,{value:void 0}),i=[];break;case"textarea":n=Fv(t,n),a=Fv(t,a),i=[];break;default:typeof n.onClick!="function"&&typeof a.onClick=="function"&&(t.onclick=Xx)}Bv(r,a);var l;r=null;for(d in n)if(!a.hasOwnProperty(d)&&n.hasOwnProperty(d)&&n[d]!=null)if(d==="style"){var o=n[d];for(l in o)o.hasOwnProperty(l)&&(r||(r={}),r[l]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(Ch.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in a){var c=a[d];if(o=n!=null?n[d]:void 0,a.hasOwnProperty(d)&&c!==o&&(c!=null||o!=null))if(d==="style")if(o){for(l in o)!o.hasOwnProperty(l)||c&&c.hasOwnProperty(l)||(r||(r={}),r[l]="");for(l in c)c.hasOwnProperty(l)&&o[l]!==c[l]&&(r||(r={}),r[l]=c[l])}else r||(i||(i=[]),i.push(d,r)),r=c;else d==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,o=o?o.__html:void 0,c!=null&&o!==c&&(i=i||[]).push(d,c)):d==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(d,""+c):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(Ch.hasOwnProperty(d)?(c!=null&&d==="onScroll"&&Ts("scroll",t),i||o===c||(i=[])):(i=i||[]).push(d,c))}r&&(i=i||[]).push("style",r);var d=i;(s.updateQueue=d)&&(s.flags|=4)}};FA=function(t,s,r,a){r!==a&&(s.flags|=4)};function bm(t,s){if(!Bs)switch(t.tailMode){case"hidden":s=t.tail;for(var r=null;s!==null;)s.alternate!==null&&(r=s),s=s.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var a=null;r!==null;)r.alternate!==null&&(a=r),r=r.sibling;a===null?s||t.tail===null?t.tail=null:t.tail.sibling=null:a.sibling=null}}function ta(t){var s=t.alternate!==null&&t.alternate.child===t.child,r=0,a=0;if(s)for(var n=t.child;n!==null;)r|=n.lanes|n.childLanes,a|=n.subtreeFlags&14680064,a|=n.flags&14680064,n.return=t,n=n.sibling;else for(n=t.child;n!==null;)r|=n.lanes|n.childLanes,a|=n.subtreeFlags,a|=n.flags,n.return=t,n=n.sibling;return t.subtreeFlags|=a,t.childLanes=r,s}function uB(t,s,r){var a=s.pendingProps;switch(UN(s),s.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ta(s),null;case 1:return Fa(s.type)&&eg(),ta(s),null;case 3:return a=s.stateNode,_u(),Ps(La),Ps(da),QN(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(t===null||t.child===null)&&(hp(s)?s.flags|=4:t===null||t.memoizedState.isDehydrated&&!(s.flags&256)||(s.flags|=1024,ti!==null&&(vj(ti),ti=null))),mj(t,s),ta(s),null;case 5:YN(s);var n=bc(Fh.current);if(r=s.type,t!==null&&s.stateNode!=null)LA(t,s,r,a,n),t.ref!==s.ref&&(s.flags|=512,s.flags|=2097152);else{if(!a){if(s.stateNode===null)throw Error(Re(166));return ta(s),null}if(t=bc(Ii.current),hp(s)){a=s.stateNode,r=s.type;var i=s.memoizedProps;switch(a[Ci]=s,a[Mh]=i,t=(s.mode&1)!==0,r){case"dialog":Ts("cancel",a),Ts("close",a);break;case"iframe":case"object":case"embed":Ts("load",a);break;case"video":case"audio":for(n=0;n<Wm.length;n++)Ts(Wm[n],a);break;case"source":Ts("error",a);break;case"img":case"image":case"link":Ts("error",a),Ts("load",a);break;case"details":Ts("toggle",a);break;case"input":$k(a,i),Ts("invalid",a);break;case"select":a._wrapperState={wasMultiple:!!i.multiple},Ts("invalid",a);break;case"textarea":Vk(a,i),Ts("invalid",a)}Bv(r,i),n=null;for(var l in i)if(i.hasOwnProperty(l)){var o=i[l];l==="children"?typeof o=="string"?a.textContent!==o&&(i.suppressHydrationWarning!==!0&&mp(a.textContent,o,t),n=["children",o]):typeof o=="number"&&a.textContent!==""+o&&(i.suppressHydrationWarning!==!0&&mp(a.textContent,o,t),n=["children",""+o]):Ch.hasOwnProperty(l)&&o!=null&&l==="onScroll"&&Ts("scroll",a)}switch(r){case"input":ap(a),Uk(a,i,!0);break;case"textarea":ap(a),qk(a);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(a.onclick=Xx)}a=n,s.updateQueue=a,a!==null&&(s.flags|=4)}else{l=n.nodeType===9?n:n.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=u3(r)),t==="http://www.w3.org/1999/xhtml"?r==="script"?(t=l.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof a.is=="string"?t=l.createElement(r,{is:a.is}):(t=l.createElement(r),r==="select"&&(l=t,a.multiple?l.multiple=!0:a.size&&(l.size=a.size))):t=l.createElementNS(t,r),t[Ci]=s,t[Mh]=a,MA(t,s,!1,!1),s.stateNode=t;e:{switch(l=$v(r,a),r){case"dialog":Ts("cancel",t),Ts("close",t),n=a;break;case"iframe":case"object":case"embed":Ts("load",t),n=a;break;case"video":case"audio":for(n=0;n<Wm.length;n++)Ts(Wm[n],t);n=a;break;case"source":Ts("error",t),n=a;break;case"img":case"image":case"link":Ts("error",t),Ts("load",t),n=a;break;case"details":Ts("toggle",t),n=a;break;case"input":$k(t,a),n=Iv(t,a),Ts("invalid",t);break;case"option":n=a;break;case"select":t._wrapperState={wasMultiple:!!a.multiple},n=Gs({},a,{value:void 0}),Ts("invalid",t);break;case"textarea":Vk(t,a),n=Fv(t,a),Ts("invalid",t);break;default:n=a}Bv(r,n),o=n;for(i in o)if(o.hasOwnProperty(i)){var c=o[i];i==="style"?p3(t,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&m3(t,c)):i==="children"?typeof c=="string"?(r!=="textarea"||c!=="")&&Sh(t,c):typeof c=="number"&&Sh(t,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Ch.hasOwnProperty(i)?c!=null&&i==="onScroll"&&Ts("scroll",t):c!=null&&SN(t,i,c,l))}switch(r){case"input":ap(t),Uk(t,a,!1);break;case"textarea":ap(t),qk(t);break;case"option":a.value!=null&&t.setAttribute("value",""+_o(a.value));break;case"select":t.multiple=!!a.multiple,i=a.value,i!=null?eu(t,!!a.multiple,i,!1):a.defaultValue!=null&&eu(t,!!a.multiple,a.defaultValue,!0);break;default:typeof n.onClick=="function"&&(t.onclick=Xx)}switch(r){case"button":case"input":case"select":case"textarea":a=!!a.autoFocus;break e;case"img":a=!0;break e;default:a=!1}}a&&(s.flags|=4)}s.ref!==null&&(s.flags|=512,s.flags|=2097152)}return ta(s),null;case 6:if(t&&s.stateNode!=null)FA(t,s,t.memoizedProps,a);else{if(typeof a!="string"&&s.stateNode===null)throw Error(Re(166));if(r=bc(Fh.current),bc(Ii.current),hp(s)){if(a=s.stateNode,r=s.memoizedProps,a[Ci]=s,(i=a.nodeValue!==r)&&(t=sn,t!==null))switch(t.tag){case 3:mp(a.nodeValue,r,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&mp(a.nodeValue,r,(t.mode&1)!==0)}i&&(s.flags|=4)}else a=(r.nodeType===9?r:r.ownerDocument).createTextNode(a),a[Ci]=s,s.stateNode=a}return ta(s),null;case 13:if(Ps(Us),a=s.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Bs&&tn!==null&&s.mode&1&&!(s.flags&128))tA(),Cu(),s.flags|=98560,i=!1;else if(i=hp(s),a!==null&&a.dehydrated!==null){if(t===null){if(!i)throw Error(Re(318));if(i=s.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(Re(317));i[Ci]=s}else Cu(),!(s.flags&128)&&(s.memoizedState=null),s.flags|=4;ta(s),i=!1}else ti!==null&&(vj(ti),ti=null),i=!0;if(!i)return s.flags&65536?s:null}return s.flags&128?(s.lanes=r,s):(a=a!==null,a!==(t!==null&&t.memoizedState!==null)&&a&&(s.child.flags|=8192,s.mode&1&&(t===null||Us.current&1?Er===0&&(Er=3):o1())),s.updateQueue!==null&&(s.flags|=4),ta(s),null);case 4:return _u(),mj(t,s),t===null&&Dh(s.stateNode.containerInfo),ta(s),null;case 10:return zN(s.type._context),ta(s),null;case 17:return Fa(s.type)&&eg(),ta(s),null;case 19:if(Ps(Us),i=s.memoizedState,i===null)return ta(s),null;if(a=(s.flags&128)!==0,l=i.rendering,l===null)if(a)bm(i,!1);else{if(Er!==0||t!==null&&t.flags&128)for(t=s.child;t!==null;){if(l=lg(t),l!==null){for(s.flags|=128,bm(i,!1),a=l.updateQueue,a!==null&&(s.updateQueue=a,s.flags|=4),s.subtreeFlags=0,a=r,r=s.child;r!==null;)i=r,t=a,i.flags&=14680066,l=i.alternate,l===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=l.childLanes,i.lanes=l.lanes,i.child=l.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=l.memoizedProps,i.memoizedState=l.memoizedState,i.updateQueue=l.updateQueue,i.type=l.type,t=l.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),r=r.sibling;return Ss(Us,Us.current&1|2),s.child}t=t.sibling}i.tail!==null&&ar()>Au&&(s.flags|=128,a=!0,bm(i,!1),s.lanes=4194304)}else{if(!a)if(t=lg(l),t!==null){if(s.flags|=128,a=!0,r=t.updateQueue,r!==null&&(s.updateQueue=r,s.flags|=4),bm(i,!0),i.tail===null&&i.tailMode==="hidden"&&!l.alternate&&!Bs)return ta(s),null}else 2*ar()-i.renderingStartTime>Au&&r!==1073741824&&(s.flags|=128,a=!0,bm(i,!1),s.lanes=4194304);i.isBackwards?(l.sibling=s.child,s.child=l):(r=i.last,r!==null?r.sibling=l:s.child=l,i.last=l)}return i.tail!==null?(s=i.tail,i.rendering=s,i.tail=s.sibling,i.renderingStartTime=ar(),s.sibling=null,r=Us.current,Ss(Us,a?r&1|2:r&1),s):(ta(s),null);case 22:case 23:return l1(),a=s.memoizedState!==null,t!==null&&t.memoizedState!==null!==a&&(s.flags|=8192),a&&s.mode&1?Ha&1073741824&&(ta(s),s.subtreeFlags&6&&(s.flags|=8192)):ta(s),null;case 24:return null;case 25:return null}throw Error(Re(156,s.tag))}function mB(t,s){switch(UN(s),s.tag){case 1:return Fa(s.type)&&eg(),t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 3:return _u(),Ps(La),Ps(da),QN(),t=s.flags,t&65536&&!(t&128)?(s.flags=t&-65537|128,s):null;case 5:return YN(s),null;case 13:if(Ps(Us),t=s.memoizedState,t!==null&&t.dehydrated!==null){if(s.alternate===null)throw Error(Re(340));Cu()}return t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 19:return Ps(Us),null;case 4:return _u(),null;case 10:return zN(s.type._context),null;case 22:case 23:return l1(),null;case 24:return null;default:return null}}var gp=!1,na=!1,hB=typeof WeakSet=="function"?WeakSet:Set,Ke=null;function Gd(t,s){var r=t.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(a){Zs(t,s,a)}else r.current=null}function hj(t,s,r){try{r()}catch(a){Zs(t,s,a)}}var R4=!1;function pB(t,s){if(Qv=Qx,t=V3(),BN(t)){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else e:{r=(r=t.ownerDocument)&&r.defaultView||window;var a=r.getSelection&&r.getSelection();if(a&&a.rangeCount!==0){r=a.anchorNode;var n=a.anchorOffset,i=a.focusNode;a=a.focusOffset;try{r.nodeType,i.nodeType}catch{r=null;break e}var l=0,o=-1,c=-1,d=0,u=0,m=t,p=null;t:for(;;){for(var x;m!==r||n!==0&&m.nodeType!==3||(o=l+n),m!==i||a!==0&&m.nodeType!==3||(c=l+a),m.nodeType===3&&(l+=m.nodeValue.length),(x=m.firstChild)!==null;)p=m,m=x;for(;;){if(m===t)break t;if(p===r&&++d===n&&(o=l),p===i&&++u===a&&(c=l),(x=m.nextSibling)!==null)break;m=p,p=m.parentNode}m=x}r=o===-1||c===-1?null:{start:o,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(Jv={focusedElem:t,selectionRange:r},Qx=!1,Ke=s;Ke!==null;)if(s=Ke,t=s.child,(s.subtreeFlags&1028)!==0&&t!==null)t.return=s,Ke=t;else for(;Ke!==null;){s=Ke;try{var g=s.alternate;if(s.flags&1024)switch(s.tag){case 0:case 11:case 15:break;case 1:if(g!==null){var f=g.memoizedProps,b=g.memoizedState,j=s.stateNode,v=j.getSnapshotBeforeUpdate(s.elementType===s.type?f:Yn(s.type,f),b);j.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var w=s.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Re(163))}}catch(y){Zs(s,s.return,y)}if(t=s.sibling,t!==null){t.return=s.return,Ke=t;break}Ke=s.return}return g=R4,R4=!1,g}function lh(t,s,r){var a=s.updateQueue;if(a=a!==null?a.lastEffect:null,a!==null){var n=a=a.next;do{if((n.tag&t)===t){var i=n.destroy;n.destroy=void 0,i!==void 0&&hj(s,r,i)}n=n.next}while(n!==a)}}function vf(t,s){if(s=s.updateQueue,s=s!==null?s.lastEffect:null,s!==null){var r=s=s.next;do{if((r.tag&t)===t){var a=r.create;r.destroy=a()}r=r.next}while(r!==s)}}function pj(t){var s=t.ref;if(s!==null){var r=t.stateNode;switch(t.tag){case 5:t=r;break;default:t=r}typeof s=="function"?s(t):s.current=t}}function OA(t){var s=t.alternate;s!==null&&(t.alternate=null,OA(s)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(s=t.stateNode,s!==null&&(delete s[Ci],delete s[Mh],delete s[ej],delete s[Q7],delete s[J7])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function BA(t){return t.tag===5||t.tag===3||t.tag===4}function D4(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||BA(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function xj(t,s,r){var a=t.tag;if(a===5||a===6)t=t.stateNode,s?r.nodeType===8?r.parentNode.insertBefore(t,s):r.insertBefore(t,s):(r.nodeType===8?(s=r.parentNode,s.insertBefore(t,r)):(s=r,s.appendChild(t)),r=r._reactRootContainer,r!=null||s.onclick!==null||(s.onclick=Xx));else if(a!==4&&(t=t.child,t!==null))for(xj(t,s,r),t=t.sibling;t!==null;)xj(t,s,r),t=t.sibling}function gj(t,s,r){var a=t.tag;if(a===5||a===6)t=t.stateNode,s?r.insertBefore(t,s):r.appendChild(t);else if(a!==4&&(t=t.child,t!==null))for(gj(t,s,r),t=t.sibling;t!==null;)gj(t,s,r),t=t.sibling}var zr=null,Xn=!1;function Dl(t,s,r){for(r=r.child;r!==null;)$A(t,s,r),r=r.sibling}function $A(t,s,r){if(Di&&typeof Di.onCommitFiberUnmount=="function")try{Di.onCommitFiberUnmount(mf,r)}catch{}switch(r.tag){case 5:na||Gd(r,s);case 6:var a=zr,n=Xn;zr=null,Dl(t,s,r),zr=a,Xn=n,zr!==null&&(Xn?(t=zr,r=r.stateNode,t.nodeType===8?t.parentNode.removeChild(r):t.removeChild(r)):zr.removeChild(r.stateNode));break;case 18:zr!==null&&(Xn?(t=zr,r=r.stateNode,t.nodeType===8?bb(t.parentNode,r):t.nodeType===1&&bb(t,r),Th(t)):bb(zr,r.stateNode));break;case 4:a=zr,n=Xn,zr=r.stateNode.containerInfo,Xn=!0,Dl(t,s,r),zr=a,Xn=n;break;case 0:case 11:case 14:case 15:if(!na&&(a=r.updateQueue,a!==null&&(a=a.lastEffect,a!==null))){n=a=a.next;do{var i=n,l=i.destroy;i=i.tag,l!==void 0&&(i&2||i&4)&&hj(r,s,l),n=n.next}while(n!==a)}Dl(t,s,r);break;case 1:if(!na&&(Gd(r,s),a=r.stateNode,typeof a.componentWillUnmount=="function"))try{a.props=r.memoizedProps,a.state=r.memoizedState,a.componentWillUnmount()}catch(o){Zs(r,s,o)}Dl(t,s,r);break;case 21:Dl(t,s,r);break;case 22:r.mode&1?(na=(a=na)||r.memoizedState!==null,Dl(t,s,r),na=a):Dl(t,s,r);break;default:Dl(t,s,r)}}function I4(t){var s=t.updateQueue;if(s!==null){t.updateQueue=null;var r=t.stateNode;r===null&&(r=t.stateNode=new hB),s.forEach(function(a){var n=NB.bind(null,t,a);r.has(a)||(r.add(a),a.then(n,n))})}}function Gn(t,s){var r=s.deletions;if(r!==null)for(var a=0;a<r.length;a++){var n=r[a];try{var i=t,l=s,o=l;e:for(;o!==null;){switch(o.tag){case 5:zr=o.stateNode,Xn=!1;break e;case 3:zr=o.stateNode.containerInfo,Xn=!0;break e;case 4:zr=o.stateNode.containerInfo,Xn=!0;break e}o=o.return}if(zr===null)throw Error(Re(160));$A(i,l,n),zr=null,Xn=!1;var c=n.alternate;c!==null&&(c.return=null),n.return=null}catch(d){Zs(n,s,d)}}if(s.subtreeFlags&12854)for(s=s.child;s!==null;)UA(s,t),s=s.sibling}function UA(t,s){var r=t.alternate,a=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Gn(s,t),pi(t),a&4){try{lh(3,t,t.return),vf(3,t)}catch(f){Zs(t,t.return,f)}try{lh(5,t,t.return)}catch(f){Zs(t,t.return,f)}}break;case 1:Gn(s,t),pi(t),a&512&&r!==null&&Gd(r,r.return);break;case 5:if(Gn(s,t),pi(t),a&512&&r!==null&&Gd(r,r.return),t.flags&32){var n=t.stateNode;try{Sh(n,"")}catch(f){Zs(t,t.return,f)}}if(a&4&&(n=t.stateNode,n!=null)){var i=t.memoizedProps,l=r!==null?r.memoizedProps:i,o=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{o==="input"&&i.type==="radio"&&i.name!=null&&c3(n,i),$v(o,l);var d=$v(o,i);for(l=0;l<c.length;l+=2){var u=c[l],m=c[l+1];u==="style"?p3(n,m):u==="dangerouslySetInnerHTML"?m3(n,m):u==="children"?Sh(n,m):SN(n,u,m,d)}switch(o){case"input":Mv(n,i);break;case"textarea":d3(n,i);break;case"select":var p=n._wrapperState.wasMultiple;n._wrapperState.wasMultiple=!!i.multiple;var x=i.value;x!=null?eu(n,!!i.multiple,x,!1):p!==!!i.multiple&&(i.defaultValue!=null?eu(n,!!i.multiple,i.defaultValue,!0):eu(n,!!i.multiple,i.multiple?[]:"",!1))}n[Mh]=i}catch(f){Zs(t,t.return,f)}}break;case 6:if(Gn(s,t),pi(t),a&4){if(t.stateNode===null)throw Error(Re(162));n=t.stateNode,i=t.memoizedProps;try{n.nodeValue=i}catch(f){Zs(t,t.return,f)}}break;case 3:if(Gn(s,t),pi(t),a&4&&r!==null&&r.memoizedState.isDehydrated)try{Th(s.containerInfo)}catch(f){Zs(t,t.return,f)}break;case 4:Gn(s,t),pi(t);break;case 13:Gn(s,t),pi(t),n=t.child,n.flags&8192&&(i=n.memoizedState!==null,n.stateNode.isHidden=i,!i||n.alternate!==null&&n.alternate.memoizedState!==null||(n1=ar())),a&4&&I4(t);break;case 22:if(u=r!==null&&r.memoizedState!==null,t.mode&1?(na=(d=na)||u,Gn(s,t),na=d):Gn(s,t),pi(t),a&8192){if(d=t.memoizedState!==null,(t.stateNode.isHidden=d)&&!u&&t.mode&1)for(Ke=t,u=t.child;u!==null;){for(m=Ke=u;Ke!==null;){switch(p=Ke,x=p.child,p.tag){case 0:case 11:case 14:case 15:lh(4,p,p.return);break;case 1:Gd(p,p.return);var g=p.stateNode;if(typeof g.componentWillUnmount=="function"){a=p,r=p.return;try{s=a,g.props=s.memoizedProps,g.state=s.memoizedState,g.componentWillUnmount()}catch(f){Zs(a,r,f)}}break;case 5:Gd(p,p.return);break;case 22:if(p.memoizedState!==null){L4(m);continue}}x!==null?(x.return=p,Ke=x):L4(m)}u=u.sibling}e:for(u=null,m=t;;){if(m.tag===5){if(u===null){u=m;try{n=m.stateNode,d?(i=n.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(o=m.stateNode,c=m.memoizedProps.style,l=c!=null&&c.hasOwnProperty("display")?c.display:null,o.style.display=h3("display",l))}catch(f){Zs(t,t.return,f)}}}else if(m.tag===6){if(u===null)try{m.stateNode.nodeValue=d?"":m.memoizedProps}catch(f){Zs(t,t.return,f)}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===t)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===t)break e;for(;m.sibling===null;){if(m.return===null||m.return===t)break e;u===m&&(u=null),m=m.return}u===m&&(u=null),m.sibling.return=m.return,m=m.sibling}}break;case 19:Gn(s,t),pi(t),a&4&&I4(t);break;case 21:break;default:Gn(s,t),pi(t)}}function pi(t){var s=t.flags;if(s&2){try{e:{for(var r=t.return;r!==null;){if(BA(r)){var a=r;break e}r=r.return}throw Error(Re(160))}switch(a.tag){case 5:var n=a.stateNode;a.flags&32&&(Sh(n,""),a.flags&=-33);var i=D4(t);gj(t,i,n);break;case 3:case 4:var l=a.stateNode.containerInfo,o=D4(t);xj(t,o,l);break;default:throw Error(Re(161))}}catch(c){Zs(t,t.return,c)}t.flags&=-3}s&4096&&(t.flags&=-4097)}function xB(t,s,r){Ke=t,VA(t)}function VA(t,s,r){for(var a=(t.mode&1)!==0;Ke!==null;){var n=Ke,i=n.child;if(n.tag===22&&a){var l=n.memoizedState!==null||gp;if(!l){var o=n.alternate,c=o!==null&&o.memoizedState!==null||na;o=gp;var d=na;if(gp=l,(na=c)&&!d)for(Ke=n;Ke!==null;)l=Ke,c=l.child,l.tag===22&&l.memoizedState!==null?F4(n):c!==null?(c.return=l,Ke=c):F4(n);for(;i!==null;)Ke=i,VA(i),i=i.sibling;Ke=n,gp=o,na=d}M4(t)}else n.subtreeFlags&8772&&i!==null?(i.return=n,Ke=i):M4(t)}}function M4(t){for(;Ke!==null;){var s=Ke;if(s.flags&8772){var r=s.alternate;try{if(s.flags&8772)switch(s.tag){case 0:case 11:case 15:na||vf(5,s);break;case 1:var a=s.stateNode;if(s.flags&4&&!na)if(r===null)a.componentDidMount();else{var n=s.elementType===s.type?r.memoizedProps:Yn(s.type,r.memoizedProps);a.componentDidUpdate(n,r.memoizedState,a.__reactInternalSnapshotBeforeUpdate)}var i=s.updateQueue;i!==null&&b4(s,i,a);break;case 3:var l=s.updateQueue;if(l!==null){if(r=null,s.child!==null)switch(s.child.tag){case 5:r=s.child.stateNode;break;case 1:r=s.child.stateNode}b4(s,l,r)}break;case 5:var o=s.stateNode;if(r===null&&s.flags&4){r=o;var c=s.memoizedProps;switch(s.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(s.memoizedState===null){var d=s.alternate;if(d!==null){var u=d.memoizedState;if(u!==null){var m=u.dehydrated;m!==null&&Th(m)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Re(163))}na||s.flags&512&&pj(s)}catch(p){Zs(s,s.return,p)}}if(s===t){Ke=null;break}if(r=s.sibling,r!==null){r.return=s.return,Ke=r;break}Ke=s.return}}function L4(t){for(;Ke!==null;){var s=Ke;if(s===t){Ke=null;break}var r=s.sibling;if(r!==null){r.return=s.return,Ke=r;break}Ke=s.return}}function F4(t){for(;Ke!==null;){var s=Ke;try{switch(s.tag){case 0:case 11:case 15:var r=s.return;try{vf(4,s)}catch(c){Zs(s,r,c)}break;case 1:var a=s.stateNode;if(typeof a.componentDidMount=="function"){var n=s.return;try{a.componentDidMount()}catch(c){Zs(s,n,c)}}var i=s.return;try{pj(s)}catch(c){Zs(s,i,c)}break;case 5:var l=s.return;try{pj(s)}catch(c){Zs(s,l,c)}}}catch(c){Zs(s,s.return,c)}if(s===t){Ke=null;break}var o=s.sibling;if(o!==null){o.return=s.return,Ke=o;break}Ke=s.return}}var gB=Math.ceil,dg=Tl.ReactCurrentDispatcher,r1=Tl.ReactCurrentOwner,Tn=Tl.ReactCurrentBatchConfig,Zt=0,Mr=null,fr=null,Yr=0,Ha=0,Kd=Fo(0),Er=0,Uh=null,zc=0,jf=0,a1=0,oh=null,Ia=null,n1=0,Au=1/0,Xi=null,ug=!1,fj=null,yo=null,fp=!1,oo=null,mg=0,ch=0,yj=null,wx=-1,Nx=0;function ja(){return Zt&6?ar():wx!==-1?wx:wx=ar()}function bo(t){return t.mode&1?Zt&2&&Yr!==0?Yr&-Yr:X7.transition!==null?(Nx===0&&(Nx=S3()),Nx):(t=us,t!==0||(t=window.event,t=t===void 0?16:D3(t.type)),t):1}function ii(t,s,r,a){if(50<ch)throw ch=0,yj=null,Error(Re(185));b0(t,r,a),(!(Zt&2)||t!==Mr)&&(t===Mr&&(!(Zt&2)&&(jf|=r),Er===4&&Yl(t,Yr)),Oa(t,a),r===1&&Zt===0&&!(s.mode&1)&&(Au=ar()+500,ff&&Oo()))}function Oa(t,s){var r=t.callbackNode;XO(t,s);var a=Yx(t,t===Mr?Yr:0);if(a===0)r!==null&&Gk(r),t.callbackNode=null,t.callbackPriority=0;else if(s=a&-a,t.callbackPriority!==s){if(r!=null&&Gk(r),s===1)t.tag===0?Z7(O4.bind(null,t)):Z3(O4.bind(null,t)),H7(function(){!(Zt&6)&&Oo()}),r=null;else{switch(_3(a)){case 1:r=PN;break;case 4:r=k3;break;case 16:r=Hx;break;case 536870912:r=C3;break;default:r=Hx}r=QA(r,qA.bind(null,t))}t.callbackPriority=s,t.callbackNode=r}}function qA(t,s){if(wx=-1,Nx=0,Zt&6)throw Error(Re(327));var r=t.callbackNode;if(nu()&&t.callbackNode!==r)return null;var a=Yx(t,t===Mr?Yr:0);if(a===0)return null;if(a&30||a&t.expiredLanes||s)s=hg(t,a);else{s=a;var n=Zt;Zt|=2;var i=zA();(Mr!==t||Yr!==s)&&(Xi=null,Au=ar()+500,Fc(t,s));do try{bB();break}catch(o){WA(t,o)}while(!0);WN(),dg.current=i,Zt=n,fr!==null?s=0:(Mr=null,Yr=0,s=Er)}if(s!==0){if(s===2&&(n=zv(t),n!==0&&(a=n,s=bj(t,n))),s===1)throw r=Uh,Fc(t,0),Yl(t,a),Oa(t,ar()),r;if(s===6)Yl(t,a);else{if(n=t.current.alternate,!(a&30)&&!fB(n)&&(s=hg(t,a),s===2&&(i=zv(t),i!==0&&(a=i,s=bj(t,i))),s===1))throw r=Uh,Fc(t,0),Yl(t,a),Oa(t,ar()),r;switch(t.finishedWork=n,t.finishedLanes=a,s){case 0:case 1:throw Error(Re(345));case 2:nc(t,Ia,Xi);break;case 3:if(Yl(t,a),(a&130023424)===a&&(s=n1+500-ar(),10<s)){if(Yx(t,0)!==0)break;if(n=t.suspendedLanes,(n&a)!==a){ja(),t.pingedLanes|=t.suspendedLanes&n;break}t.timeoutHandle=Xv(nc.bind(null,t,Ia,Xi),s);break}nc(t,Ia,Xi);break;case 4:if(Yl(t,a),(a&4194240)===a)break;for(s=t.eventTimes,n=-1;0<a;){var l=31-ni(a);i=1<<l,l=s[l],l>n&&(n=l),a&=~i}if(a=n,a=ar()-a,a=(120>a?120:480>a?480:1080>a?1080:1920>a?1920:3e3>a?3e3:4320>a?4320:1960*gB(a/1960))-a,10<a){t.timeoutHandle=Xv(nc.bind(null,t,Ia,Xi),a);break}nc(t,Ia,Xi);break;case 5:nc(t,Ia,Xi);break;default:throw Error(Re(329))}}}return Oa(t,ar()),t.callbackNode===r?qA.bind(null,t):null}function bj(t,s){var r=oh;return t.current.memoizedState.isDehydrated&&(Fc(t,s).flags|=256),t=hg(t,s),t!==2&&(s=Ia,Ia=r,s!==null&&vj(s)),t}function vj(t){Ia===null?Ia=t:Ia.push.apply(Ia,t)}function fB(t){for(var s=t;;){if(s.flags&16384){var r=s.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var a=0;a<r.length;a++){var n=r[a],i=n.getSnapshot;n=n.value;try{if(!oi(i(),n))return!1}catch{return!1}}}if(r=s.child,s.subtreeFlags&16384&&r!==null)r.return=s,s=r;else{if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function Yl(t,s){for(s&=~a1,s&=~jf,t.suspendedLanes|=s,t.pingedLanes&=~s,t=t.expirationTimes;0<s;){var r=31-ni(s),a=1<<r;t[r]=-1,s&=~a}}function O4(t){if(Zt&6)throw Error(Re(327));nu();var s=Yx(t,0);if(!(s&1))return Oa(t,ar()),null;var r=hg(t,s);if(t.tag!==0&&r===2){var a=zv(t);a!==0&&(s=a,r=bj(t,a))}if(r===1)throw r=Uh,Fc(t,0),Yl(t,s),Oa(t,ar()),r;if(r===6)throw Error(Re(345));return t.finishedWork=t.current.alternate,t.finishedLanes=s,nc(t,Ia,Xi),Oa(t,ar()),null}function i1(t,s){var r=Zt;Zt|=1;try{return t(s)}finally{Zt=r,Zt===0&&(Au=ar()+500,ff&&Oo())}}function Gc(t){oo!==null&&oo.tag===0&&!(Zt&6)&&nu();var s=Zt;Zt|=1;var r=Tn.transition,a=us;try{if(Tn.transition=null,us=1,t)return t()}finally{us=a,Tn.transition=r,Zt=s,!(Zt&6)&&Oo()}}function l1(){Ha=Kd.current,Ps(Kd)}function Fc(t,s){t.finishedWork=null,t.finishedLanes=0;var r=t.timeoutHandle;if(r!==-1&&(t.timeoutHandle=-1,K7(r)),fr!==null)for(r=fr.return;r!==null;){var a=r;switch(UN(a),a.tag){case 1:a=a.type.childContextTypes,a!=null&&eg();break;case 3:_u(),Ps(La),Ps(da),QN();break;case 5:YN(a);break;case 4:_u();break;case 13:Ps(Us);break;case 19:Ps(Us);break;case 10:zN(a.type._context);break;case 22:case 23:l1()}r=r.return}if(Mr=t,fr=t=vo(t.current,null),Yr=Ha=s,Er=0,Uh=null,a1=jf=zc=0,Ia=oh=null,yc!==null){for(s=0;s<yc.length;s++)if(r=yc[s],a=r.interleaved,a!==null){r.interleaved=null;var n=a.next,i=r.pending;if(i!==null){var l=i.next;i.next=n,a.next=l}r.pending=a}yc=null}return t}function WA(t,s){do{var r=fr;try{if(WN(),bx.current=cg,og){for(var a=Ws.memoizedState;a!==null;){var n=a.queue;n!==null&&(n.pending=null),a=a.next}og=!1}if(Wc=0,Dr=jr=Ws=null,ih=!1,Oh=0,r1.current=null,r===null||r.return===null){Er=1,Uh=s,fr=null;break}e:{var i=t,l=r.return,o=r,c=s;if(s=Yr,o.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=c,u=o,m=u.tag;if(!(u.mode&1)&&(m===0||m===11||m===15)){var p=u.alternate;p?(u.updateQueue=p.updateQueue,u.memoizedState=p.memoizedState,u.lanes=p.lanes):(u.updateQueue=null,u.memoizedState=null)}var x=C4(l);if(x!==null){x.flags&=-257,S4(x,l,o,i,s),x.mode&1&&k4(i,d,s),s=x,c=d;var g=s.updateQueue;if(g===null){var f=new Set;f.add(c),s.updateQueue=f}else g.add(c);break e}else{if(!(s&1)){k4(i,d,s),o1();break e}c=Error(Re(426))}}else if(Bs&&o.mode&1){var b=C4(l);if(b!==null){!(b.flags&65536)&&(b.flags|=256),S4(b,l,o,i,s),VN(Eu(c,o));break e}}i=c=Eu(c,o),Er!==4&&(Er=2),oh===null?oh=[i]:oh.push(i),i=l;do{switch(i.tag){case 3:i.flags|=65536,s&=-s,i.lanes|=s;var j=_A(i,c,s);y4(i,j);break e;case 1:o=c;var v=i.type,w=i.stateNode;if(!(i.flags&128)&&(typeof v.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(yo===null||!yo.has(w)))){i.flags|=65536,s&=-s,i.lanes|=s;var y=EA(i,o,s);y4(i,y);break e}}i=i.return}while(i!==null)}KA(r)}catch(C){s=C,fr===r&&r!==null&&(fr=r=r.return);continue}break}while(!0)}function zA(){var t=dg.current;return dg.current=cg,t===null?cg:t}function o1(){(Er===0||Er===3||Er===2)&&(Er=4),Mr===null||!(zc&268435455)&&!(jf&268435455)||Yl(Mr,Yr)}function hg(t,s){var r=Zt;Zt|=2;var a=zA();(Mr!==t||Yr!==s)&&(Xi=null,Fc(t,s));do try{yB();break}catch(n){WA(t,n)}while(!0);if(WN(),Zt=r,dg.current=a,fr!==null)throw Error(Re(261));return Mr=null,Yr=0,Er}function yB(){for(;fr!==null;)GA(fr)}function bB(){for(;fr!==null&&!WO();)GA(fr)}function GA(t){var s=YA(t.alternate,t,Ha);t.memoizedProps=t.pendingProps,s===null?KA(t):fr=s,r1.current=null}function KA(t){var s=t;do{var r=s.alternate;if(t=s.return,s.flags&32768){if(r=mB(r,s),r!==null){r.flags&=32767,fr=r;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Er=6,fr=null;return}}else if(r=uB(r,s,Ha),r!==null){fr=r;return}if(s=s.sibling,s!==null){fr=s;return}fr=s=t}while(s!==null);Er===0&&(Er=5)}function nc(t,s,r){var a=us,n=Tn.transition;try{Tn.transition=null,us=1,vB(t,s,r,a)}finally{Tn.transition=n,us=a}return null}function vB(t,s,r,a){do nu();while(oo!==null);if(Zt&6)throw Error(Re(327));r=t.finishedWork;var n=t.finishedLanes;if(r===null)return null;if(t.finishedWork=null,t.finishedLanes=0,r===t.current)throw Error(Re(177));t.callbackNode=null,t.callbackPriority=0;var i=r.lanes|r.childLanes;if(e7(t,i),t===Mr&&(fr=Mr=null,Yr=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||fp||(fp=!0,QA(Hx,function(){return nu(),null})),i=(r.flags&15990)!==0,r.subtreeFlags&15990||i){i=Tn.transition,Tn.transition=null;var l=us;us=1;var o=Zt;Zt|=4,r1.current=null,pB(t,r),UA(r,t),$7(Jv),Qx=!!Qv,Jv=Qv=null,t.current=r,xB(r),zO(),Zt=o,us=l,Tn.transition=i}else t.current=r;if(fp&&(fp=!1,oo=t,mg=n),i=t.pendingLanes,i===0&&(yo=null),HO(r.stateNode),Oa(t,ar()),s!==null)for(a=t.onRecoverableError,r=0;r<s.length;r++)n=s[r],a(n.value,{componentStack:n.stack,digest:n.digest});if(ug)throw ug=!1,t=fj,fj=null,t;return mg&1&&t.tag!==0&&nu(),i=t.pendingLanes,i&1?t===yj?ch++:(ch=0,yj=t):ch=0,Oo(),null}function nu(){if(oo!==null){var t=_3(mg),s=Tn.transition,r=us;try{if(Tn.transition=null,us=16>t?16:t,oo===null)var a=!1;else{if(t=oo,oo=null,mg=0,Zt&6)throw Error(Re(331));var n=Zt;for(Zt|=4,Ke=t.current;Ke!==null;){var i=Ke,l=i.child;if(Ke.flags&16){var o=i.deletions;if(o!==null){for(var c=0;c<o.length;c++){var d=o[c];for(Ke=d;Ke!==null;){var u=Ke;switch(u.tag){case 0:case 11:case 15:lh(8,u,i)}var m=u.child;if(m!==null)m.return=u,Ke=m;else for(;Ke!==null;){u=Ke;var p=u.sibling,x=u.return;if(OA(u),u===d){Ke=null;break}if(p!==null){p.return=x,Ke=p;break}Ke=x}}}var g=i.alternate;if(g!==null){var f=g.child;if(f!==null){g.child=null;do{var b=f.sibling;f.sibling=null,f=b}while(f!==null)}}Ke=i}}if(i.subtreeFlags&2064&&l!==null)l.return=i,Ke=l;else e:for(;Ke!==null;){if(i=Ke,i.flags&2048)switch(i.tag){case 0:case 11:case 15:lh(9,i,i.return)}var j=i.sibling;if(j!==null){j.return=i.return,Ke=j;break e}Ke=i.return}}var v=t.current;for(Ke=v;Ke!==null;){l=Ke;var w=l.child;if(l.subtreeFlags&2064&&w!==null)w.return=l,Ke=w;else e:for(l=v;Ke!==null;){if(o=Ke,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:vf(9,o)}}catch(C){Zs(o,o.return,C)}if(o===l){Ke=null;break e}var y=o.sibling;if(y!==null){y.return=o.return,Ke=y;break e}Ke=o.return}}if(Zt=n,Oo(),Di&&typeof Di.onPostCommitFiberRoot=="function")try{Di.onPostCommitFiberRoot(mf,t)}catch{}a=!0}return a}finally{us=r,Tn.transition=s}}return!1}function B4(t,s,r){s=Eu(r,s),s=_A(t,s,1),t=fo(t,s,1),s=ja(),t!==null&&(b0(t,1,s),Oa(t,s))}function Zs(t,s,r){if(t.tag===3)B4(t,t,r);else for(;s!==null;){if(s.tag===3){B4(s,t,r);break}else if(s.tag===1){var a=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof a.componentDidCatch=="function"&&(yo===null||!yo.has(a))){t=Eu(r,t),t=EA(s,t,1),s=fo(s,t,1),t=ja(),s!==null&&(b0(s,1,t),Oa(s,t));break}}s=s.return}}function jB(t,s,r){var a=t.pingCache;a!==null&&a.delete(s),s=ja(),t.pingedLanes|=t.suspendedLanes&r,Mr===t&&(Yr&r)===r&&(Er===4||Er===3&&(Yr&130023424)===Yr&&500>ar()-n1?Fc(t,0):a1|=r),Oa(t,s)}function HA(t,s){s===0&&(t.mode&1?(s=lp,lp<<=1,!(lp&130023424)&&(lp=4194304)):s=1);var r=ja();t=bl(t,s),t!==null&&(b0(t,s,r),Oa(t,r))}function wB(t){var s=t.memoizedState,r=0;s!==null&&(r=s.retryLane),HA(t,r)}function NB(t,s){var r=0;switch(t.tag){case 13:var a=t.stateNode,n=t.memoizedState;n!==null&&(r=n.retryLane);break;case 19:a=t.stateNode;break;default:throw Error(Re(314))}a!==null&&a.delete(s),HA(t,r)}var YA;YA=function(t,s,r){if(t!==null)if(t.memoizedProps!==s.pendingProps||La.current)Ma=!0;else{if(!(t.lanes&r)&&!(s.flags&128))return Ma=!1,dB(t,s,r);Ma=!!(t.flags&131072)}else Ma=!1,Bs&&s.flags&1048576&&X3(s,rg,s.index);switch(s.lanes=0,s.tag){case 2:var a=s.type;jx(t,s),t=s.pendingProps;var n=ku(s,da.current);au(s,r),n=ZN(null,s,a,t,n,r);var i=XN();return s.flags|=1,typeof n=="object"&&n!==null&&typeof n.render=="function"&&n.$$typeof===void 0?(s.tag=1,s.memoizedState=null,s.updateQueue=null,Fa(a)?(i=!0,tg(s)):i=!1,s.memoizedState=n.state!==null&&n.state!==void 0?n.state:null,KN(s),n.updater=bf,s.stateNode=n,n._reactInternals=s,ij(s,a,t,r),s=cj(null,s,a,!0,i,r)):(s.tag=0,Bs&&i&&$N(s),ya(null,s,n,r),s=s.child),s;case 16:a=s.elementType;e:{switch(jx(t,s),t=s.pendingProps,n=a._init,a=n(a._payload),s.type=a,n=s.tag=CB(a),t=Yn(a,t),n){case 0:s=oj(null,s,a,t,r);break e;case 1:s=A4(null,s,a,t,r);break e;case 11:s=_4(null,s,a,t,r);break e;case 14:s=E4(null,s,a,Yn(a.type,t),r);break e}throw Error(Re(306,a,""))}return s;case 0:return a=s.type,n=s.pendingProps,n=s.elementType===a?n:Yn(a,n),oj(t,s,a,n,r);case 1:return a=s.type,n=s.pendingProps,n=s.elementType===a?n:Yn(a,n),A4(t,s,a,n,r);case 3:e:{if(RA(s),t===null)throw Error(Re(387));a=s.pendingProps,i=s.memoizedState,n=i.element,nA(t,s),ig(s,a,null,r);var l=s.memoizedState;if(a=l.element,i.isDehydrated)if(i={element:a,isDehydrated:!1,cache:l.cache,pendingSuspenseBoundaries:l.pendingSuspenseBoundaries,transitions:l.transitions},s.updateQueue.baseState=i,s.memoizedState=i,s.flags&256){n=Eu(Error(Re(423)),s),s=T4(t,s,a,r,n);break e}else if(a!==n){n=Eu(Error(Re(424)),s),s=T4(t,s,a,r,n);break e}else for(tn=go(s.stateNode.containerInfo.firstChild),sn=s,Bs=!0,ti=null,r=rA(s,null,a,r),s.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Cu(),a===n){s=vl(t,s,r);break e}ya(t,s,a,r)}s=s.child}return s;case 5:return iA(s),t===null&&rj(s),a=s.type,n=s.pendingProps,i=t!==null?t.memoizedProps:null,l=n.children,Zv(a,n)?l=null:i!==null&&Zv(a,i)&&(s.flags|=32),PA(t,s),ya(t,s,l,r),s.child;case 6:return t===null&&rj(s),null;case 13:return DA(t,s,r);case 4:return HN(s,s.stateNode.containerInfo),a=s.pendingProps,t===null?s.child=Su(s,null,a,r):ya(t,s,a,r),s.child;case 11:return a=s.type,n=s.pendingProps,n=s.elementType===a?n:Yn(a,n),_4(t,s,a,n,r);case 7:return ya(t,s,s.pendingProps,r),s.child;case 8:return ya(t,s,s.pendingProps.children,r),s.child;case 12:return ya(t,s,s.pendingProps.children,r),s.child;case 10:e:{if(a=s.type._context,n=s.pendingProps,i=s.memoizedProps,l=n.value,Ss(ag,a._currentValue),a._currentValue=l,i!==null)if(oi(i.value,l)){if(i.children===n.children&&!La.current){s=vl(t,s,r);break e}}else for(i=s.child,i!==null&&(i.return=s);i!==null;){var o=i.dependencies;if(o!==null){l=i.child;for(var c=o.firstContext;c!==null;){if(c.context===a){if(i.tag===1){c=ml(-1,r&-r),c.tag=2;var d=i.updateQueue;if(d!==null){d=d.shared;var u=d.pending;u===null?c.next=c:(c.next=u.next,u.next=c),d.pending=c}}i.lanes|=r,c=i.alternate,c!==null&&(c.lanes|=r),aj(i.return,r,s),o.lanes|=r;break}c=c.next}}else if(i.tag===10)l=i.type===s.type?null:i.child;else if(i.tag===18){if(l=i.return,l===null)throw Error(Re(341));l.lanes|=r,o=l.alternate,o!==null&&(o.lanes|=r),aj(l,r,s),l=i.sibling}else l=i.child;if(l!==null)l.return=i;else for(l=i;l!==null;){if(l===s){l=null;break}if(i=l.sibling,i!==null){i.return=l.return,l=i;break}l=l.return}i=l}ya(t,s,n.children,r),s=s.child}return s;case 9:return n=s.type,a=s.pendingProps.children,au(s,r),n=Dn(n),a=a(n),s.flags|=1,ya(t,s,a,r),s.child;case 14:return a=s.type,n=Yn(a,s.pendingProps),n=Yn(a.type,n),E4(t,s,a,n,r);case 15:return AA(t,s,s.type,s.pendingProps,r);case 17:return a=s.type,n=s.pendingProps,n=s.elementType===a?n:Yn(a,n),jx(t,s),s.tag=1,Fa(a)?(t=!0,tg(s)):t=!1,au(s,r),SA(s,a,n),ij(s,a,n,r),cj(null,s,a,!0,t,r);case 19:return IA(t,s,r);case 22:return TA(t,s,r)}throw Error(Re(156,s.tag))};function QA(t,s){return N3(t,s)}function kB(t,s,r,a){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=a,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function An(t,s,r,a){return new kB(t,s,r,a)}function c1(t){return t=t.prototype,!(!t||!t.isReactComponent)}function CB(t){if(typeof t=="function")return c1(t)?1:0;if(t!=null){if(t=t.$$typeof,t===EN)return 11;if(t===AN)return 14}return 2}function vo(t,s){var r=t.alternate;return r===null?(r=An(t.tag,s,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=s,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&14680064,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,s=t.dependencies,r.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r}function kx(t,s,r,a,n,i){var l=2;if(a=t,typeof t=="function")c1(t)&&(l=1);else if(typeof t=="string")l=5;else e:switch(t){case Fd:return Oc(r.children,n,i,s);case _N:l=8,n|=8;break;case Tv:return t=An(12,r,s,n|2),t.elementType=Tv,t.lanes=i,t;case Pv:return t=An(13,r,s,n),t.elementType=Pv,t.lanes=i,t;case Rv:return t=An(19,r,s,n),t.elementType=Rv,t.lanes=i,t;case i3:return wf(r,n,i,s);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case a3:l=10;break e;case n3:l=9;break e;case EN:l=11;break e;case AN:l=14;break e;case ql:l=16,a=null;break e}throw Error(Re(130,t==null?t:typeof t,""))}return s=An(l,r,s,n),s.elementType=t,s.type=a,s.lanes=i,s}function Oc(t,s,r,a){return t=An(7,t,a,s),t.lanes=r,t}function wf(t,s,r,a){return t=An(22,t,a,s),t.elementType=i3,t.lanes=r,t.stateNode={isHidden:!1},t}function _b(t,s,r){return t=An(6,t,null,s),t.lanes=r,t}function Eb(t,s,r){return s=An(4,t.children!==null?t.children:[],t.key,s),s.lanes=r,s.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},s}function SB(t,s,r,a,n){this.tag=s,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ob(0),this.expirationTimes=ob(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ob(0),this.identifierPrefix=a,this.onRecoverableError=n,this.mutableSourceEagerHydrationData=null}function d1(t,s,r,a,n,i,l,o,c){return t=new SB(t,s,r,o,c),s===1?(s=1,i===!0&&(s|=8)):s=0,i=An(3,null,null,s),t.current=i,i.stateNode=t,i.memoizedState={element:a,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},KN(i),t}function _B(t,s,r){var a=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ld,key:a==null?null:""+a,children:t,containerInfo:s,implementation:r}}function JA(t){if(!t)return Eo;t=t._reactInternals;e:{if(ad(t)!==t||t.tag!==1)throw Error(Re(170));var s=t;do{switch(s.tag){case 3:s=s.stateNode.context;break e;case 1:if(Fa(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break e}}s=s.return}while(s!==null);throw Error(Re(171))}if(t.tag===1){var r=t.type;if(Fa(r))return J3(t,r,s)}return s}function ZA(t,s,r,a,n,i,l,o,c){return t=d1(r,a,!0,t,n,i,l,o,c),t.context=JA(null),r=t.current,a=ja(),n=bo(r),i=ml(a,n),i.callback=s??null,fo(r,i,n),t.current.lanes=n,b0(t,n,a),Oa(t,a),t}function Nf(t,s,r,a){var n=s.current,i=ja(),l=bo(n);return r=JA(r),s.context===null?s.context=r:s.pendingContext=r,s=ml(i,l),s.payload={element:t},a=a===void 0?null:a,a!==null&&(s.callback=a),t=fo(n,s,l),t!==null&&(ii(t,n,l,i),yx(t,n,l)),l}function pg(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function $4(t,s){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<s?r:s}}function u1(t,s){$4(t,s),(t=t.alternate)&&$4(t,s)}function EB(){return null}var XA=typeof reportError=="function"?reportError:function(t){console.error(t)};function m1(t){this._internalRoot=t}kf.prototype.render=m1.prototype.render=function(t){var s=this._internalRoot;if(s===null)throw Error(Re(409));Nf(t,s,null,null)};kf.prototype.unmount=m1.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var s=t.containerInfo;Gc(function(){Nf(null,t,null,null)}),s[yl]=null}};function kf(t){this._internalRoot=t}kf.prototype.unstable_scheduleHydration=function(t){if(t){var s=T3();t={blockedOn:null,target:t,priority:s};for(var r=0;r<Hl.length&&s!==0&&s<Hl[r].priority;r++);Hl.splice(r,0,t),r===0&&R3(t)}};function h1(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Cf(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function U4(){}function AB(t,s,r,a,n){if(n){if(typeof a=="function"){var i=a;a=function(){var d=pg(l);i.call(d)}}var l=ZA(s,a,t,0,null,!1,!1,"",U4);return t._reactRootContainer=l,t[yl]=l.current,Dh(t.nodeType===8?t.parentNode:t),Gc(),l}for(;n=t.lastChild;)t.removeChild(n);if(typeof a=="function"){var o=a;a=function(){var d=pg(c);o.call(d)}}var c=d1(t,0,!1,null,null,!1,!1,"",U4);return t._reactRootContainer=c,t[yl]=c.current,Dh(t.nodeType===8?t.parentNode:t),Gc(function(){Nf(s,c,r,a)}),c}function Sf(t,s,r,a,n){var i=r._reactRootContainer;if(i){var l=i;if(typeof n=="function"){var o=n;n=function(){var c=pg(l);o.call(c)}}Nf(s,l,t,n)}else l=AB(r,s,t,n,a);return pg(l)}E3=function(t){switch(t.tag){case 3:var s=t.stateNode;if(s.current.memoizedState.isDehydrated){var r=qm(s.pendingLanes);r!==0&&(RN(s,r|1),Oa(s,ar()),!(Zt&6)&&(Au=ar()+500,Oo()))}break;case 13:Gc(function(){var a=bl(t,1);if(a!==null){var n=ja();ii(a,t,1,n)}}),u1(t,1)}};DN=function(t){if(t.tag===13){var s=bl(t,134217728);if(s!==null){var r=ja();ii(s,t,134217728,r)}u1(t,134217728)}};A3=function(t){if(t.tag===13){var s=bo(t),r=bl(t,s);if(r!==null){var a=ja();ii(r,t,s,a)}u1(t,s)}};T3=function(){return us};P3=function(t,s){var r=us;try{return us=t,s()}finally{us=r}};Vv=function(t,s,r){switch(s){case"input":if(Mv(t,r),s=r.name,r.type==="radio"&&s!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+s)+'][type="radio"]'),s=0;s<r.length;s++){var a=r[s];if(a!==t&&a.form===t.form){var n=gf(a);if(!n)throw Error(Re(90));o3(a),Mv(a,n)}}}break;case"textarea":d3(t,r);break;case"select":s=r.value,s!=null&&eu(t,!!r.multiple,s,!1)}};f3=i1;y3=Gc;var TB={usingClientEntryPoint:!1,Events:[j0,Ud,gf,x3,g3,i1]},vm={findFiberByHostInstance:fc,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},PB={bundleType:vm.bundleType,version:vm.version,rendererPackageName:vm.rendererPackageName,rendererConfig:vm.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Tl.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=j3(t),t===null?null:t.stateNode},findFiberByHostInstance:vm.findFiberByHostInstance||EB,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var yp=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!yp.isDisabled&&yp.supportsFiber)try{mf=yp.inject(PB),Di=yp}catch{}}cn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=TB;cn.createPortal=function(t,s){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!h1(s))throw Error(Re(200));return _B(t,s,null,r)};cn.createRoot=function(t,s){if(!h1(t))throw Error(Re(299));var r=!1,a="",n=XA;return s!=null&&(s.unstable_strictMode===!0&&(r=!0),s.identifierPrefix!==void 0&&(a=s.identifierPrefix),s.onRecoverableError!==void 0&&(n=s.onRecoverableError)),s=d1(t,1,!1,null,null,r,!1,a,n),t[yl]=s.current,Dh(t.nodeType===8?t.parentNode:t),new m1(s)};cn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var s=t._reactInternals;if(s===void 0)throw typeof t.render=="function"?Error(Re(188)):(t=Object.keys(t).join(","),Error(Re(268,t)));return t=j3(s),t=t===null?null:t.stateNode,t};cn.flushSync=function(t){return Gc(t)};cn.hydrate=function(t,s,r){if(!Cf(s))throw Error(Re(200));return Sf(null,t,s,!0,r)};cn.hydrateRoot=function(t,s,r){if(!h1(t))throw Error(Re(405));var a=r!=null&&r.hydratedSources||null,n=!1,i="",l=XA;if(r!=null&&(r.unstable_strictMode===!0&&(n=!0),r.identifierPrefix!==void 0&&(i=r.identifierPrefix),r.onRecoverableError!==void 0&&(l=r.onRecoverableError)),s=ZA(s,null,t,1,r??null,n,!1,i,l),t[yl]=s.current,Dh(t),a)for(t=0;t<a.length;t++)r=a[t],n=r._getVersion,n=n(r._source),s.mutableSourceEagerHydrationData==null?s.mutableSourceEagerHydrationData=[r,n]:s.mutableSourceEagerHydrationData.push(r,n);return new kf(s)};cn.render=function(t,s,r){if(!Cf(s))throw Error(Re(200));return Sf(null,t,s,!1,r)};cn.unmountComponentAtNode=function(t){if(!Cf(t))throw Error(Re(40));return t._reactRootContainer?(Gc(function(){Sf(null,null,t,!1,function(){t._reactRootContainer=null,t[yl]=null})}),!0):!1};cn.unstable_batchedUpdates=i1;cn.unstable_renderSubtreeIntoContainer=function(t,s,r,a){if(!Cf(r))throw Error(Re(200));if(t==null||t._reactInternals===void 0)throw Error(Re(38));return Sf(t,s,r,!1,a)};cn.version="18.3.1-next-f1338f8080-20240426";function e6(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e6)}catch(t){console.error(t)}}e6(),e3.exports=cn;var p1=e3.exports;const bp=bN(p1);var V4=p1;Ev.createRoot=V4.createRoot,Ev.hydrateRoot=V4.hydrateRoot;/**
 * @remix-run/router v1.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Vh(){return Vh=Object.assign?Object.assign.bind():function(t){for(var s=1;s<arguments.length;s++){var r=arguments[s];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a])}return t},Vh.apply(this,arguments)}var co;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(co||(co={}));const q4="popstate";function RB(t){t===void 0&&(t={});function s(a,n){let{pathname:i,search:l,hash:o}=a.location;return jj("",{pathname:i,search:l,hash:o},n.state&&n.state.usr||null,n.state&&n.state.key||"default")}function r(a,n){return typeof n=="string"?n:xg(n)}return IB(s,r,null,t)}function ir(t,s){if(t===!1||t===null||typeof t>"u")throw new Error(s)}function x1(t,s){if(!t){typeof console<"u"&&console.warn(s);try{throw new Error(s)}catch{}}}function DB(){return Math.random().toString(36).substr(2,8)}function W4(t,s){return{usr:t.state,key:t.key,idx:s}}function jj(t,s,r,a){return r===void 0&&(r=null),Vh({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof s=="string"?em(s):s,{state:r,key:s&&s.key||a||DB()})}function xg(t){let{pathname:s="/",search:r="",hash:a=""}=t;return r&&r!=="?"&&(s+=r.charAt(0)==="?"?r:"?"+r),a&&a!=="#"&&(s+=a.charAt(0)==="#"?a:"#"+a),s}function em(t){let s={};if(t){let r=t.indexOf("#");r>=0&&(s.hash=t.substr(r),t=t.substr(0,r));let a=t.indexOf("?");a>=0&&(s.search=t.substr(a),t=t.substr(0,a)),t&&(s.pathname=t)}return s}function IB(t,s,r,a){a===void 0&&(a={});let{window:n=document.defaultView,v5Compat:i=!1}=a,l=n.history,o=co.Pop,c=null,d=u();d==null&&(d=0,l.replaceState(Vh({},l.state,{idx:d}),""));function u(){return(l.state||{idx:null}).idx}function m(){o=co.Pop;let b=u(),j=b==null?null:b-d;d=b,c&&c({action:o,location:f.location,delta:j})}function p(b,j){o=co.Push;let v=jj(f.location,b,j);d=u()+1;let w=W4(v,d),y=f.createHref(v);try{l.pushState(w,"",y)}catch(C){if(C instanceof DOMException&&C.name==="DataCloneError")throw C;n.location.assign(y)}i&&c&&c({action:o,location:f.location,delta:1})}function x(b,j){o=co.Replace;let v=jj(f.location,b,j);d=u();let w=W4(v,d),y=f.createHref(v);l.replaceState(w,"",y),i&&c&&c({action:o,location:f.location,delta:0})}function g(b){let j=n.location.origin!=="null"?n.location.origin:n.location.href,v=typeof b=="string"?b:xg(b);return v=v.replace(/ $/,"%20"),ir(j,"No window.location.(origin|href) available to create URL for href: "+v),new URL(v,j)}let f={get action(){return o},get location(){return t(n,l)},listen(b){if(c)throw new Error("A history only accepts one active listener");return n.addEventListener(q4,m),c=b,()=>{n.removeEventListener(q4,m),c=null}},createHref(b){return s(n,b)},createURL:g,encodeLocation(b){let j=g(b);return{pathname:j.pathname,search:j.search,hash:j.hash}},push:p,replace:x,go(b){return l.go(b)}};return f}var z4;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(z4||(z4={}));function MB(t,s,r){return r===void 0&&(r="/"),LB(t,s,r)}function LB(t,s,r,a){let n=typeof s=="string"?em(s):s,i=g1(n.pathname||"/",r);if(i==null)return null;let l=t6(t);FB(l);let o=null;for(let c=0;o==null&&c<l.length;++c){let d=YB(i);o=GB(l[c],d)}return o}function t6(t,s,r,a){s===void 0&&(s=[]),r===void 0&&(r=[]),a===void 0&&(a="");let n=(i,l,o)=>{let c={relativePath:o===void 0?i.path||"":o,caseSensitive:i.caseSensitive===!0,childrenIndex:l,route:i};c.relativePath.startsWith("/")&&(ir(c.relativePath.startsWith(a),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+a+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(a.length));let d=jo([a,c.relativePath]),u=r.concat(c);i.children&&i.children.length>0&&(ir(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),t6(i.children,s,u,d)),!(i.path==null&&!i.index)&&s.push({path:d,score:WB(d,i.index),routesMeta:u})};return t.forEach((i,l)=>{var o;if(i.path===""||!((o=i.path)!=null&&o.includes("?")))n(i,l);else for(let c of s6(i.path))n(i,l,c)}),s}function s6(t){let s=t.split("/");if(s.length===0)return[];let[r,...a]=s,n=r.endsWith("?"),i=r.replace(/\?$/,"");if(a.length===0)return n?[i,""]:[i];let l=s6(a.join("/")),o=[];return o.push(...l.map(c=>c===""?i:[i,c].join("/"))),n&&o.push(...l),o.map(c=>t.startsWith("/")&&c===""?"/":c)}function FB(t){t.sort((s,r)=>s.score!==r.score?r.score-s.score:zB(s.routesMeta.map(a=>a.childrenIndex),r.routesMeta.map(a=>a.childrenIndex)))}const OB=/^:[\w-]+$/,BB=3,$B=2,UB=1,VB=10,qB=-2,G4=t=>t==="*";function WB(t,s){let r=t.split("/"),a=r.length;return r.some(G4)&&(a+=qB),s&&(a+=$B),r.filter(n=>!G4(n)).reduce((n,i)=>n+(OB.test(i)?BB:i===""?UB:VB),a)}function zB(t,s){return t.length===s.length&&t.slice(0,-1).every((a,n)=>a===s[n])?t[t.length-1]-s[s.length-1]:0}function GB(t,s,r){let{routesMeta:a}=t,n={},i="/",l=[];for(let o=0;o<a.length;++o){let c=a[o],d=o===a.length-1,u=i==="/"?s:s.slice(i.length)||"/",m=KB({path:c.relativePath,caseSensitive:c.caseSensitive,end:d},u),p=c.route;if(!m)return null;Object.assign(n,m.params),l.push({params:n,pathname:jo([i,m.pathname]),pathnameBase:e9(jo([i,m.pathnameBase])),route:p}),m.pathnameBase!=="/"&&(i=jo([i,m.pathnameBase]))}return l}function KB(t,s){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[r,a]=HB(t.path,t.caseSensitive,t.end),n=s.match(r);if(!n)return null;let i=n[0],l=i.replace(/(.)\/+$/,"$1"),o=n.slice(1);return{params:a.reduce((d,u,m)=>{let{paramName:p,isOptional:x}=u;if(p==="*"){let f=o[m]||"";l=i.slice(0,i.length-f.length).replace(/(.)\/+$/,"$1")}const g=o[m];return x&&!g?d[p]=void 0:d[p]=(g||"").replace(/%2F/g,"/"),d},{}),pathname:i,pathnameBase:l,pattern:t}}function HB(t,s,r){s===void 0&&(s=!1),r===void 0&&(r=!0),x1(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let a=[],n="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,o,c)=>(a.push({paramName:o,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(a.push({paramName:"*"}),n+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?n+="\\/*$":t!==""&&t!=="/"&&(n+="(?:(?=\\/|$))"),[new RegExp(n,s?void 0:"i"),a]}function YB(t){try{return t.split("/").map(s=>decodeURIComponent(s).replace(/\//g,"%2F")).join("/")}catch(s){return x1(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+s+").")),t}}function g1(t,s){if(s==="/")return t;if(!t.toLowerCase().startsWith(s.toLowerCase()))return null;let r=s.endsWith("/")?s.length-1:s.length,a=t.charAt(r);return a&&a!=="/"?null:t.slice(r)||"/"}const QB=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,JB=t=>QB.test(t);function ZB(t,s){s===void 0&&(s="/");let{pathname:r,search:a="",hash:n=""}=typeof t=="string"?em(t):t,i;if(r)if(JB(r))i=r;else{if(r.includes("//")){let l=r;r=r.replace(/\/\/+/g,"/"),x1(!1,"Pathnames cannot have embedded double slashes - normalizing "+(l+" -> "+r))}r.startsWith("/")?i=K4(r.substring(1),"/"):i=K4(r,s)}else i=s;return{pathname:i,search:t9(a),hash:s9(n)}}function K4(t,s){let r=s.replace(/\/+$/,"").split("/");return t.split("/").forEach(n=>{n===".."?r.length>1&&r.pop():n!=="."&&r.push(n)}),r.length>1?r.join("/"):"/"}function Ab(t,s,r,a){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+s+"` field ["+JSON.stringify(a)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function XB(t){return t.filter((s,r)=>r===0||s.route.path&&s.route.path.length>0)}function f1(t,s){let r=XB(t);return s?r.map((a,n)=>n===r.length-1?a.pathname:a.pathnameBase):r.map(a=>a.pathnameBase)}function y1(t,s,r,a){a===void 0&&(a=!1);let n;typeof t=="string"?n=em(t):(n=Vh({},t),ir(!n.pathname||!n.pathname.includes("?"),Ab("?","pathname","search",n)),ir(!n.pathname||!n.pathname.includes("#"),Ab("#","pathname","hash",n)),ir(!n.search||!n.search.includes("#"),Ab("#","search","hash",n)));let i=t===""||n.pathname==="",l=i?"/":n.pathname,o;if(l==null)o=r;else{let m=s.length-1;if(!a&&l.startsWith("..")){let p=l.split("/");for(;p[0]==="..";)p.shift(),m-=1;n.pathname=p.join("/")}o=m>=0?s[m]:"/"}let c=ZB(n,o),d=l&&l!=="/"&&l.endsWith("/"),u=(i||l===".")&&r.endsWith("/");return!c.pathname.endsWith("/")&&(d||u)&&(c.pathname+="/"),c}const jo=t=>t.join("/").replace(/\/\/+/g,"/"),e9=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),t9=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,s9=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function r9(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const r6=["post","put","patch","delete"];new Set(r6);const a9=["get",...r6];new Set(a9);/**
 * React Router v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function qh(){return qh=Object.assign?Object.assign.bind():function(t){for(var s=1;s<arguments.length;s++){var r=arguments[s];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a])}return t},qh.apply(this,arguments)}const b1=h.createContext(null),n9=h.createContext(null),Bo=h.createContext(null),_f=h.createContext(null),Pl=h.createContext({outlet:null,matches:[],isDataRoute:!1}),a6=h.createContext(null);function i9(t,s){let{relative:r}=s===void 0?{}:s;tm()||ir(!1);let{basename:a,navigator:n}=h.useContext(Bo),{hash:i,pathname:l,search:o}=i6(t,{relative:r}),c=l;return a!=="/"&&(c=l==="/"?a:jo([a,l])),n.createHref({pathname:c,search:o,hash:i})}function tm(){return h.useContext(_f)!=null}function Ga(){return tm()||ir(!1),h.useContext(_f).location}function n6(t){h.useContext(Bo).static||h.useLayoutEffect(t)}function At(){let{isDataRoute:t}=h.useContext(Pl);return t?b9():l9()}function l9(){tm()||ir(!1);let t=h.useContext(b1),{basename:s,future:r,navigator:a}=h.useContext(Bo),{matches:n}=h.useContext(Pl),{pathname:i}=Ga(),l=JSON.stringify(f1(n,r.v7_relativeSplatPath)),o=h.useRef(!1);return n6(()=>{o.current=!0}),h.useCallback(function(d,u){if(u===void 0&&(u={}),!o.current)return;if(typeof d=="number"){a.go(d);return}let m=y1(d,JSON.parse(l),i,u.relative==="path");t==null&&s!=="/"&&(m.pathname=m.pathname==="/"?s:jo([s,m.pathname])),(u.replace?a.replace:a.push)(m,u.state,u)},[s,a,l,i,t])}function hi(){let{matches:t}=h.useContext(Pl),s=t[t.length-1];return s?s.params:{}}function i6(t,s){let{relative:r}=s===void 0?{}:s,{future:a}=h.useContext(Bo),{matches:n}=h.useContext(Pl),{pathname:i}=Ga(),l=JSON.stringify(f1(n,a.v7_relativeSplatPath));return h.useMemo(()=>y1(t,JSON.parse(l),i,r==="path"),[t,l,i,r])}function o9(t,s){return c9(t,s)}function c9(t,s,r,a){tm()||ir(!1);let{navigator:n}=h.useContext(Bo),{matches:i}=h.useContext(Pl),l=i[i.length-1],o=l?l.params:{};l&&l.pathname;let c=l?l.pathnameBase:"/";l&&l.route;let d=Ga(),u;if(s){var m;let b=typeof s=="string"?em(s):s;c==="/"||(m=b.pathname)!=null&&m.startsWith(c)||ir(!1),u=b}else u=d;let p=u.pathname||"/",x=p;if(c!=="/"){let b=c.replace(/^\//,"").split("/");x="/"+p.replace(/^\//,"").split("/").slice(b.length).join("/")}let g=MB(t,{pathname:x}),f=p9(g&&g.map(b=>Object.assign({},b,{params:Object.assign({},o,b.params),pathname:jo([c,n.encodeLocation?n.encodeLocation(b.pathname).pathname:b.pathname]),pathnameBase:b.pathnameBase==="/"?c:jo([c,n.encodeLocation?n.encodeLocation(b.pathnameBase).pathname:b.pathnameBase])})),i,r,a);return s&&f?h.createElement(_f.Provider,{value:{location:qh({pathname:"/",search:"",hash:"",state:null,key:"default"},u),navigationType:co.Pop}},f):f}function d9(){let t=y9(),s=r9(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),r=t instanceof Error?t.stack:null,n={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return h.createElement(h.Fragment,null,h.createElement("h2",null,"Unexpected Application Error!"),h.createElement("h3",{style:{fontStyle:"italic"}},s),r?h.createElement("pre",{style:n},r):null,null)}const u9=h.createElement(d9,null);class m9 extends h.Component{constructor(s){super(s),this.state={location:s.location,revalidation:s.revalidation,error:s.error}}static getDerivedStateFromError(s){return{error:s}}static getDerivedStateFromProps(s,r){return r.location!==s.location||r.revalidation!=="idle"&&s.revalidation==="idle"?{error:s.error,location:s.location,revalidation:s.revalidation}:{error:s.error!==void 0?s.error:r.error,location:r.location,revalidation:s.revalidation||r.revalidation}}componentDidCatch(s,r){console.error("React Router caught the following error during render",s,r)}render(){return this.state.error!==void 0?h.createElement(Pl.Provider,{value:this.props.routeContext},h.createElement(a6.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function h9(t){let{routeContext:s,match:r,children:a}=t,n=h.useContext(b1);return n&&n.static&&n.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=r.route.id),h.createElement(Pl.Provider,{value:s},a)}function p9(t,s,r,a){var n;if(s===void 0&&(s=[]),r===void 0&&(r=null),a===void 0&&(a=null),t==null){var i;if(!r)return null;if(r.errors)t=r.matches;else if((i=a)!=null&&i.v7_partialHydration&&s.length===0&&!r.initialized&&r.matches.length>0)t=r.matches;else return null}let l=t,o=(n=r)==null?void 0:n.errors;if(o!=null){let u=l.findIndex(m=>m.route.id&&(o==null?void 0:o[m.route.id])!==void 0);u>=0||ir(!1),l=l.slice(0,Math.min(l.length,u+1))}let c=!1,d=-1;if(r&&a&&a.v7_partialHydration)for(let u=0;u<l.length;u++){let m=l[u];if((m.route.HydrateFallback||m.route.hydrateFallbackElement)&&(d=u),m.route.id){let{loaderData:p,errors:x}=r,g=m.route.loader&&p[m.route.id]===void 0&&(!x||x[m.route.id]===void 0);if(m.route.lazy||g){c=!0,d>=0?l=l.slice(0,d+1):l=[l[0]];break}}}return l.reduceRight((u,m,p)=>{let x,g=!1,f=null,b=null;r&&(x=o&&m.route.id?o[m.route.id]:void 0,f=m.route.errorElement||u9,c&&(d<0&&p===0?(v9("route-fallback"),g=!0,b=null):d===p&&(g=!0,b=m.route.hydrateFallbackElement||null)));let j=s.concat(l.slice(0,p+1)),v=()=>{let w;return x?w=f:g?w=b:m.route.Component?w=h.createElement(m.route.Component,null):m.route.element?w=m.route.element:w=u,h.createElement(h9,{match:m,routeContext:{outlet:u,matches:j,isDataRoute:r!=null},children:w})};return r&&(m.route.ErrorBoundary||m.route.errorElement||p===0)?h.createElement(m9,{location:r.location,revalidation:r.revalidation,component:f,error:x,children:v(),routeContext:{outlet:null,matches:j,isDataRoute:!0}}):v()},null)}var l6=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(l6||{}),o6=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(o6||{});function x9(t){let s=h.useContext(b1);return s||ir(!1),s}function g9(t){let s=h.useContext(n9);return s||ir(!1),s}function f9(t){let s=h.useContext(Pl);return s||ir(!1),s}function c6(t){let s=f9(),r=s.matches[s.matches.length-1];return r.route.id||ir(!1),r.route.id}function y9(){var t;let s=h.useContext(a6),r=g9(),a=c6();return s!==void 0?s:(t=r.errors)==null?void 0:t[a]}function b9(){let{router:t}=x9(l6.UseNavigateStable),s=c6(o6.UseNavigateStable),r=h.useRef(!1);return n6(()=>{r.current=!0}),h.useCallback(function(n,i){i===void 0&&(i={}),r.current&&(typeof n=="number"?t.navigate(n):t.navigate(n,qh({fromRouteId:s},i)))},[t,s])}const H4={};function v9(t,s,r){H4[t]||(H4[t]=!0)}function j9(t,s){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function gg(t){let{to:s,replace:r,state:a,relative:n}=t;tm()||ir(!1);let{future:i,static:l}=h.useContext(Bo),{matches:o}=h.useContext(Pl),{pathname:c}=Ga(),d=At(),u=y1(s,f1(o,i.v7_relativeSplatPath),c,n==="path"),m=JSON.stringify(u);return h.useEffect(()=>d(JSON.parse(m),{replace:r,state:a,relative:n}),[d,m,n,r,a]),null}function Te(t){ir(!1)}function w9(t){let{basename:s="/",children:r=null,location:a,navigationType:n=co.Pop,navigator:i,static:l=!1,future:o}=t;tm()&&ir(!1);let c=s.replace(/^\/*/,"/"),d=h.useMemo(()=>({basename:c,navigator:i,static:l,future:qh({v7_relativeSplatPath:!1},o)}),[c,o,i,l]);typeof a=="string"&&(a=em(a));let{pathname:u="/",search:m="",hash:p="",state:x=null,key:g="default"}=a,f=h.useMemo(()=>{let b=g1(u,c);return b==null?null:{location:{pathname:b,search:m,hash:p,state:x,key:g},navigationType:n}},[c,u,m,p,x,g,n]);return f==null?null:h.createElement(Bo.Provider,{value:d},h.createElement(_f.Provider,{children:r,value:f}))}function v1(t){let{children:s,location:r}=t;return o9(wj(s),r)}new Promise(()=>{});function wj(t,s){s===void 0&&(s=[]);let r=[];return h.Children.forEach(t,(a,n)=>{if(!h.isValidElement(a))return;let i=[...s,n];if(a.type===h.Fragment){r.push.apply(r,wj(a.props.children,i));return}a.type!==Te&&ir(!1),!a.props.index||!a.props.children||ir(!1);let l={id:a.props.id||i.join("-"),caseSensitive:a.props.caseSensitive,element:a.props.element,Component:a.props.Component,index:a.props.index,path:a.props.path,loader:a.props.loader,action:a.props.action,errorElement:a.props.errorElement,ErrorBoundary:a.props.ErrorBoundary,hasErrorBoundary:a.props.ErrorBoundary!=null||a.props.errorElement!=null,shouldRevalidate:a.props.shouldRevalidate,handle:a.props.handle,lazy:a.props.lazy};a.props.children&&(l.children=wj(a.props.children,i)),r.push(l)}),r}/**
 * React Router DOM v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Nj(){return Nj=Object.assign?Object.assign.bind():function(t){for(var s=1;s<arguments.length;s++){var r=arguments[s];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a])}return t},Nj.apply(this,arguments)}function N9(t,s){if(t==null)return{};var r={},a=Object.keys(t),n,i;for(i=0;i<a.length;i++)n=a[i],!(s.indexOf(n)>=0)&&(r[n]=t[n]);return r}function k9(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function C9(t,s){return t.button===0&&(!s||s==="_self")&&!k9(t)}function kj(t){return t===void 0&&(t=""),new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((s,r)=>{let a=t[r];return s.concat(Array.isArray(a)?a.map(n=>[r,n]):[[r,a]])},[]))}function S9(t,s){let r=kj(t);return s&&s.forEach((a,n)=>{r.has(n)||s.getAll(n).forEach(i=>{r.append(n,i)})}),r}const _9=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],E9="6";try{window.__reactRouterVersion=E9}catch{}const A9="startTransition",Y4=Wx[A9];function T9(t){let{basename:s,children:r,future:a,window:n}=t,i=h.useRef();i.current==null&&(i.current=RB({window:n,v5Compat:!0}));let l=i.current,[o,c]=h.useState({action:l.action,location:l.location}),{v7_startTransition:d}=a||{},u=h.useCallback(m=>{d&&Y4?Y4(()=>c(m)):c(m)},[c,d]);return h.useLayoutEffect(()=>l.listen(u),[l,u]),h.useEffect(()=>j9(a),[a]),h.createElement(w9,{basename:s,children:r,location:o.location,navigationType:o.action,navigator:l,future:a})}const P9=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",R9=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Qe=h.forwardRef(function(s,r){let{onClick:a,relative:n,reloadDocument:i,replace:l,state:o,target:c,to:d,preventScrollReset:u,viewTransition:m}=s,p=N9(s,_9),{basename:x}=h.useContext(Bo),g,f=!1;if(typeof d=="string"&&R9.test(d)&&(g=d,P9))try{let w=new URL(window.location.href),y=d.startsWith("//")?new URL(w.protocol+d):new URL(d),C=g1(y.pathname,x);y.origin===w.origin&&C!=null?d=C+y.search+y.hash:f=!0}catch{}let b=i9(d,{relative:n}),j=D9(d,{replace:l,state:o,target:c,preventScrollReset:u,relative:n,viewTransition:m});function v(w){a&&a(w),w.defaultPrevented||j(w)}return h.createElement("a",Nj({},p,{href:g||b,onClick:f||i?a:v,ref:r,target:c}))});var Q4;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(Q4||(Q4={}));var J4;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(J4||(J4={}));function D9(t,s){let{target:r,replace:a,state:n,preventScrollReset:i,relative:l,viewTransition:o}=s===void 0?{}:s,c=At(),d=Ga(),u=i6(t,{relative:l});return h.useCallback(m=>{if(C9(m,r)){m.preventDefault();let p=a!==void 0?a:xg(d)===xg(u);c(t,{replace:p,state:n,preventScrollReset:i,relative:l,viewTransition:o})}},[d,c,u,a,n,r,t,i,l,o])}function $o(t){let s=h.useRef(kj(t)),r=h.useRef(!1),a=Ga(),n=h.useMemo(()=>S9(a.search,r.current?null:s.current),[a.search]),i=At(),l=h.useCallback((o,c)=>{const d=kj(typeof o=="function"?o(n):o);r.current=!0,i("?"+d,c)},[i,n]);return[n,l]}var sm=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},I9={setTimeout:(t,s)=>setTimeout(t,s),clearTimeout:t=>clearTimeout(t),setInterval:(t,s)=>setInterval(t,s),clearInterval:t=>clearInterval(t)},Zl,fN,PE,M9=(PE=class{constructor(){rt(this,Zl,I9);rt(this,fN,!1)}setTimeoutProvider(t){Ue(this,Zl,t)}setTimeout(t,s){return te(this,Zl).setTimeout(t,s)}clearTimeout(t){te(this,Zl).clearTimeout(t)}setInterval(t,s){return te(this,Zl).setInterval(t,s)}clearInterval(t){te(this,Zl).clearInterval(t)}},Zl=new WeakMap,fN=new WeakMap,PE),vc=new M9;function L9(t){setTimeout(t,0)}var Kc=typeof window>"u"||"Deno"in globalThis;function ba(){}function F9(t,s){return typeof t=="function"?t(s):t}function Cj(t){return typeof t=="number"&&t>=0&&t!==1/0}function d6(t,s){return Math.max(t+(s||0)-Date.now(),0)}function wo(t,s){return typeof t=="function"?t(s):t}function Nn(t,s){return typeof t=="function"?t(s):t}function Z4(t,s){const{type:r="all",exact:a,fetchStatus:n,predicate:i,queryKey:l,stale:o}=t;if(l){if(a){if(s.queryHash!==j1(l,s.options))return!1}else if(!Wh(s.queryKey,l))return!1}if(r!=="all"){const c=s.isActive();if(r==="active"&&!c||r==="inactive"&&c)return!1}return!(typeof o=="boolean"&&s.isStale()!==o||n&&n!==s.state.fetchStatus||i&&!i(s))}function X4(t,s){const{exact:r,status:a,predicate:n,mutationKey:i}=t;if(i){if(!s.options.mutationKey)return!1;if(r){if(Hc(s.options.mutationKey)!==Hc(i))return!1}else if(!Wh(s.options.mutationKey,i))return!1}return!(a&&s.state.status!==a||n&&!n(s))}function j1(t,s){return((s==null?void 0:s.queryKeyHashFn)||Hc)(t)}function Hc(t){return JSON.stringify(t,(s,r)=>Sj(r)?Object.keys(r).sort().reduce((a,n)=>(a[n]=r[n],a),{}):r)}function Wh(t,s){return t===s?!0:typeof t!=typeof s?!1:t&&s&&typeof t=="object"&&typeof s=="object"?Object.keys(s).every(r=>Wh(t[r],s[r])):!1}var O9=Object.prototype.hasOwnProperty;function u6(t,s){if(t===s)return t;const r=eC(t)&&eC(s);if(!r&&!(Sj(t)&&Sj(s)))return s;const n=(r?t:Object.keys(t)).length,i=r?s:Object.keys(s),l=i.length,o=r?new Array(l):{};let c=0;for(let d=0;d<l;d++){const u=r?d:i[d],m=t[u],p=s[u];if(m===p){o[u]=m,(r?d<n:O9.call(t,u))&&c++;continue}if(m===null||p===null||typeof m!="object"||typeof p!="object"){o[u]=p;continue}const x=u6(m,p);o[u]=x,x===m&&c++}return n===l&&c===n?t:o}function fg(t,s){if(!s||Object.keys(t).length!==Object.keys(s).length)return!1;for(const r in t)if(t[r]!==s[r])return!1;return!0}function eC(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function Sj(t){if(!tC(t))return!1;const s=t.constructor;if(s===void 0)return!0;const r=s.prototype;return!(!tC(r)||!r.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function tC(t){return Object.prototype.toString.call(t)==="[object Object]"}function B9(t){return new Promise(s=>{vc.setTimeout(s,t)})}function _j(t,s,r){return typeof r.structuralSharing=="function"?r.structuralSharing(t,s):r.structuralSharing!==!1?u6(t,s):s}function $9(t,s,r=0){const a=[...t,s];return r&&a.length>r?a.slice(1):a}function U9(t,s,r=0){const a=[s,...t];return r&&a.length>r?a.slice(0,-1):a}var w1=Symbol();function m6(t,s){return!t.queryFn&&(s!=null&&s.initialPromise)?()=>s.initialPromise:!t.queryFn||t.queryFn===w1?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}function h6(t,s){return typeof t=="function"?t(...s):!!t}var Ec,Xl,uu,RE,V9=(RE=class extends sm{constructor(){super();rt(this,Ec);rt(this,Xl);rt(this,uu);Ue(this,uu,s=>{if(!Kc&&window.addEventListener){const r=()=>s();return window.addEventListener("visibilitychange",r,!1),()=>{window.removeEventListener("visibilitychange",r)}}})}onSubscribe(){te(this,Xl)||this.setEventListener(te(this,uu))}onUnsubscribe(){var s;this.hasListeners()||((s=te(this,Xl))==null||s.call(this),Ue(this,Xl,void 0))}setEventListener(s){var r;Ue(this,uu,s),(r=te(this,Xl))==null||r.call(this),Ue(this,Xl,s(a=>{typeof a=="boolean"?this.setFocused(a):this.onFocus()}))}setFocused(s){te(this,Ec)!==s&&(Ue(this,Ec,s),this.onFocus())}onFocus(){const s=this.isFocused();this.listeners.forEach(r=>{r(s)})}isFocused(){var s;return typeof te(this,Ec)=="boolean"?te(this,Ec):((s=globalThis.document)==null?void 0:s.visibilityState)!=="hidden"}},Ec=new WeakMap,Xl=new WeakMap,uu=new WeakMap,RE),N1=new V9;function Ej(){let t,s;const r=new Promise((n,i)=>{t=n,s=i});r.status="pending",r.catch(()=>{});function a(n){Object.assign(r,n),delete r.resolve,delete r.reject}return r.resolve=n=>{a({status:"fulfilled",value:n}),t(n)},r.reject=n=>{a({status:"rejected",reason:n}),s(n)},r}var q9=L9;function W9(){let t=[],s=0,r=o=>{o()},a=o=>{o()},n=q9;const i=o=>{s?t.push(o):n(()=>{r(o)})},l=()=>{const o=t;t=[],o.length&&n(()=>{a(()=>{o.forEach(c=>{r(c)})})})};return{batch:o=>{let c;s++;try{c=o()}finally{s--,s||l()}return c},batchCalls:o=>(...c)=>{i(()=>{o(...c)})},schedule:i,setNotifyFunction:o=>{r=o},setBatchNotifyFunction:o=>{a=o},setScheduler:o=>{n=o}}}var Cr=W9(),mu,eo,hu,DE,z9=(DE=class extends sm{constructor(){super();rt(this,mu,!0);rt(this,eo);rt(this,hu);Ue(this,hu,s=>{if(!Kc&&window.addEventListener){const r=()=>s(!0),a=()=>s(!1);return window.addEventListener("online",r,!1),window.addEventListener("offline",a,!1),()=>{window.removeEventListener("online",r),window.removeEventListener("offline",a)}}})}onSubscribe(){te(this,eo)||this.setEventListener(te(this,hu))}onUnsubscribe(){var s;this.hasListeners()||((s=te(this,eo))==null||s.call(this),Ue(this,eo,void 0))}setEventListener(s){var r;Ue(this,hu,s),(r=te(this,eo))==null||r.call(this),Ue(this,eo,s(this.setOnline.bind(this)))}setOnline(s){te(this,mu)!==s&&(Ue(this,mu,s),this.listeners.forEach(a=>{a(s)}))}isOnline(){return te(this,mu)}},mu=new WeakMap,eo=new WeakMap,hu=new WeakMap,DE),yg=new z9;function G9(t){return Math.min(1e3*2**t,3e4)}function p6(t){return(t??"online")==="online"?yg.isOnline():!0}var Aj=class extends Error{constructor(t){super("CancelledError"),this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function x6(t){let s=!1,r=0,a;const n=Ej(),i=()=>n.status!=="pending",l=f=>{var b;if(!i()){const j=new Aj(f);p(j),(b=t.onCancel)==null||b.call(t,j)}},o=()=>{s=!0},c=()=>{s=!1},d=()=>N1.isFocused()&&(t.networkMode==="always"||yg.isOnline())&&t.canRun(),u=()=>p6(t.networkMode)&&t.canRun(),m=f=>{i()||(a==null||a(),n.resolve(f))},p=f=>{i()||(a==null||a(),n.reject(f))},x=()=>new Promise(f=>{var b;a=j=>{(i()||d())&&f(j)},(b=t.onPause)==null||b.call(t)}).then(()=>{var f;a=void 0,i()||(f=t.onContinue)==null||f.call(t)}),g=()=>{if(i())return;let f;const b=r===0?t.initialPromise:void 0;try{f=b??t.fn()}catch(j){f=Promise.reject(j)}Promise.resolve(f).then(m).catch(j=>{var S;if(i())return;const v=t.retry??(Kc?0:3),w=t.retryDelay??G9,y=typeof w=="function"?w(r,j):w,C=v===!0||typeof v=="number"&&r<v||typeof v=="function"&&v(r,j);if(s||!C){p(j);return}r++,(S=t.onFail)==null||S.call(t,r,j),B9(y).then(()=>d()?void 0:x()).then(()=>{s?p(j):g()})})};return{promise:n,status:()=>n.status,cancel:l,continue:()=>(a==null||a(),n),cancelRetry:o,continueRetry:c,canStart:u,start:()=>(u()?g():x().then(g),n)}}var Ac,IE,g6=(IE=class{constructor(){rt(this,Ac)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),Cj(this.gcTime)&&Ue(this,Ac,vc.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(Kc?1/0:5*60*1e3))}clearGcTimeout(){te(this,Ac)&&(vc.clearTimeout(te(this,Ac)),Ue(this,Ac,void 0))}},Ac=new WeakMap,IE),Tc,pu,wn,Pc,Pr,h0,Rc,Jn,Zi,ME,K9=(ME=class extends g6{constructor(s){super();rt(this,Jn);rt(this,Tc);rt(this,pu);rt(this,wn);rt(this,Pc);rt(this,Pr);rt(this,h0);rt(this,Rc);Ue(this,Rc,!1),Ue(this,h0,s.defaultOptions),this.setOptions(s.options),this.observers=[],Ue(this,Pc,s.client),Ue(this,wn,te(this,Pc).getQueryCache()),this.queryKey=s.queryKey,this.queryHash=s.queryHash,Ue(this,Tc,rC(this.options)),this.state=s.state??te(this,Tc),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var s;return(s=te(this,Pr))==null?void 0:s.promise}setOptions(s){if(this.options={...te(this,h0),...s},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const r=rC(this.options);r.data!==void 0&&(this.setState(sC(r.data,r.dataUpdatedAt)),Ue(this,Tc,r))}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&te(this,wn).remove(this)}setData(s,r){const a=_j(this.state.data,s,this.options);return Rt(this,Jn,Zi).call(this,{data:a,type:"success",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),a}setState(s,r){Rt(this,Jn,Zi).call(this,{type:"setState",state:s,setStateOptions:r})}cancel(s){var a,n;const r=(a=te(this,Pr))==null?void 0:a.promise;return(n=te(this,Pr))==null||n.cancel(s),r?r.then(ba).catch(ba):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(te(this,Tc))}isActive(){return this.observers.some(s=>Nn(s.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===w1||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(s=>wo(s.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(s=>s.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(s=0){return this.state.data===void 0?!0:s==="static"?!1:this.state.isInvalidated?!0:!d6(this.state.dataUpdatedAt,s)}onFocus(){var r;const s=this.observers.find(a=>a.shouldFetchOnWindowFocus());s==null||s.refetch({cancelRefetch:!1}),(r=te(this,Pr))==null||r.continue()}onOnline(){var r;const s=this.observers.find(a=>a.shouldFetchOnReconnect());s==null||s.refetch({cancelRefetch:!1}),(r=te(this,Pr))==null||r.continue()}addObserver(s){this.observers.includes(s)||(this.observers.push(s),this.clearGcTimeout(),te(this,wn).notify({type:"observerAdded",query:this,observer:s}))}removeObserver(s){this.observers.includes(s)&&(this.observers=this.observers.filter(r=>r!==s),this.observers.length||(te(this,Pr)&&(te(this,Rc)?te(this,Pr).cancel({revert:!0}):te(this,Pr).cancelRetry()),this.scheduleGc()),te(this,wn).notify({type:"observerRemoved",query:this,observer:s}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||Rt(this,Jn,Zi).call(this,{type:"invalidate"})}async fetch(s,r){var c,d,u,m,p,x,g,f,b,j,v,w;if(this.state.fetchStatus!=="idle"&&((c=te(this,Pr))==null?void 0:c.status())!=="rejected"){if(this.state.data!==void 0&&(r!=null&&r.cancelRefetch))this.cancel({silent:!0});else if(te(this,Pr))return te(this,Pr).continueRetry(),te(this,Pr).promise}if(s&&this.setOptions(s),!this.options.queryFn){const y=this.observers.find(C=>C.options.queryFn);y&&this.setOptions(y.options)}const a=new AbortController,n=y=>{Object.defineProperty(y,"signal",{enumerable:!0,get:()=>(Ue(this,Rc,!0),a.signal)})},i=()=>{const y=m6(this.options,r),S=(()=>{const _={client:te(this,Pc),queryKey:this.queryKey,meta:this.meta};return n(_),_})();return Ue(this,Rc,!1),this.options.persister?this.options.persister(y,S,this):y(S)},o=(()=>{const y={fetchOptions:r,options:this.options,queryKey:this.queryKey,client:te(this,Pc),state:this.state,fetchFn:i};return n(y),y})();(d=this.options.behavior)==null||d.onFetch(o,this),Ue(this,pu,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((u=o.fetchOptions)==null?void 0:u.meta))&&Rt(this,Jn,Zi).call(this,{type:"fetch",meta:(m=o.fetchOptions)==null?void 0:m.meta}),Ue(this,Pr,x6({initialPromise:r==null?void 0:r.initialPromise,fn:o.fetchFn,onCancel:y=>{y instanceof Aj&&y.revert&&this.setState({...te(this,pu),fetchStatus:"idle"}),a.abort()},onFail:(y,C)=>{Rt(this,Jn,Zi).call(this,{type:"failed",failureCount:y,error:C})},onPause:()=>{Rt(this,Jn,Zi).call(this,{type:"pause"})},onContinue:()=>{Rt(this,Jn,Zi).call(this,{type:"continue"})},retry:o.options.retry,retryDelay:o.options.retryDelay,networkMode:o.options.networkMode,canRun:()=>!0}));try{const y=await te(this,Pr).start();if(y===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(y),(x=(p=te(this,wn).config).onSuccess)==null||x.call(p,y,this),(f=(g=te(this,wn).config).onSettled)==null||f.call(g,y,this.state.error,this),y}catch(y){if(y instanceof Aj){if(y.silent)return te(this,Pr).promise;if(y.revert){if(this.state.data===void 0)throw y;return this.state.data}}throw Rt(this,Jn,Zi).call(this,{type:"error",error:y}),(j=(b=te(this,wn).config).onError)==null||j.call(b,y,this),(w=(v=te(this,wn).config).onSettled)==null||w.call(v,this.state.data,y,this),y}finally{this.scheduleGc()}}},Tc=new WeakMap,pu=new WeakMap,wn=new WeakMap,Pc=new WeakMap,Pr=new WeakMap,h0=new WeakMap,Rc=new WeakMap,Jn=new WeakSet,Zi=function(s){const r=a=>{switch(s.type){case"failed":return{...a,fetchFailureCount:s.failureCount,fetchFailureReason:s.error};case"pause":return{...a,fetchStatus:"paused"};case"continue":return{...a,fetchStatus:"fetching"};case"fetch":return{...a,...f6(a.data,this.options),fetchMeta:s.meta??null};case"success":const n={...a,...sC(s.data,s.dataUpdatedAt),dataUpdateCount:a.dataUpdateCount+1,...!s.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return Ue(this,pu,s.manual?n:void 0),n;case"error":const i=s.error;return{...a,error:i,errorUpdateCount:a.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:a.fetchFailureCount+1,fetchFailureReason:i,fetchStatus:"idle",status:"error"};case"invalidate":return{...a,isInvalidated:!0};case"setState":return{...a,...s.state}}};this.state=r(this.state),Cr.batch(()=>{this.observers.forEach(a=>{a.onQueryUpdate()}),te(this,wn).notify({query:this,type:"updated",action:s})})},ME);function f6(t,s){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:p6(s.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function sC(t,s){return{data:t,dataUpdatedAt:s??Date.now(),error:null,isInvalidated:!1,status:"success"}}function rC(t){const s=typeof t.initialData=="function"?t.initialData():t.initialData,r=s!==void 0,a=r?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:s,dataUpdateCount:0,dataUpdatedAt:r?a??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:r?"success":"pending",fetchStatus:"idle"}}var Pa,Gt,p0,pa,Dc,xu,al,to,x0,gu,fu,Ic,Mc,so,yu,ls,zm,Tj,Pj,Rj,Dj,Ij,Mj,Lj,y6,LE,H9=(LE=class extends sm{constructor(s,r){super();rt(this,ls);rt(this,Pa);rt(this,Gt);rt(this,p0);rt(this,pa);rt(this,Dc);rt(this,xu);rt(this,al);rt(this,to);rt(this,x0);rt(this,gu);rt(this,fu);rt(this,Ic);rt(this,Mc);rt(this,so);rt(this,yu,new Set);this.options=r,Ue(this,Pa,s),Ue(this,to,null),Ue(this,al,Ej()),this.bindMethods(),this.setOptions(r)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(te(this,Gt).addObserver(this),aC(te(this,Gt),this.options)?Rt(this,ls,zm).call(this):this.updateResult(),Rt(this,ls,Dj).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return Fj(te(this,Gt),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return Fj(te(this,Gt),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,Rt(this,ls,Ij).call(this),Rt(this,ls,Mj).call(this),te(this,Gt).removeObserver(this)}setOptions(s){const r=this.options,a=te(this,Gt);if(this.options=te(this,Pa).defaultQueryOptions(s),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof Nn(this.options.enabled,te(this,Gt))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");Rt(this,ls,Lj).call(this),te(this,Gt).setOptions(this.options),r._defaulted&&!fg(this.options,r)&&te(this,Pa).getQueryCache().notify({type:"observerOptionsUpdated",query:te(this,Gt),observer:this});const n=this.hasListeners();n&&nC(te(this,Gt),a,this.options,r)&&Rt(this,ls,zm).call(this),this.updateResult(),n&&(te(this,Gt)!==a||Nn(this.options.enabled,te(this,Gt))!==Nn(r.enabled,te(this,Gt))||wo(this.options.staleTime,te(this,Gt))!==wo(r.staleTime,te(this,Gt)))&&Rt(this,ls,Tj).call(this);const i=Rt(this,ls,Pj).call(this);n&&(te(this,Gt)!==a||Nn(this.options.enabled,te(this,Gt))!==Nn(r.enabled,te(this,Gt))||i!==te(this,so))&&Rt(this,ls,Rj).call(this,i)}getOptimisticResult(s){const r=te(this,Pa).getQueryCache().build(te(this,Pa),s),a=this.createResult(r,s);return Q9(this,a)&&(Ue(this,pa,a),Ue(this,xu,this.options),Ue(this,Dc,te(this,Gt).state)),a}getCurrentResult(){return te(this,pa)}trackResult(s,r){return new Proxy(s,{get:(a,n)=>(this.trackProp(n),r==null||r(n),n==="promise"&&(this.trackProp("data"),!this.options.experimental_prefetchInRender&&te(this,al).status==="pending"&&te(this,al).reject(new Error("experimental_prefetchInRender feature flag is not enabled"))),Reflect.get(a,n))})}trackProp(s){te(this,yu).add(s)}getCurrentQuery(){return te(this,Gt)}refetch({...s}={}){return this.fetch({...s})}fetchOptimistic(s){const r=te(this,Pa).defaultQueryOptions(s),a=te(this,Pa).getQueryCache().build(te(this,Pa),r);return a.fetch().then(()=>this.createResult(a,r))}fetch(s){return Rt(this,ls,zm).call(this,{...s,cancelRefetch:s.cancelRefetch??!0}).then(()=>(this.updateResult(),te(this,pa)))}createResult(s,r){var A;const a=te(this,Gt),n=this.options,i=te(this,pa),l=te(this,Dc),o=te(this,xu),d=s!==a?s.state:te(this,p0),{state:u}=s;let m={...u},p=!1,x;if(r._optimisticResults){const R=this.hasListeners(),I=!R&&aC(s,r),N=R&&nC(s,a,r,n);(I||N)&&(m={...m,...f6(u.data,s.options)}),r._optimisticResults==="isRestoring"&&(m.fetchStatus="idle")}let{error:g,errorUpdatedAt:f,status:b}=m;x=m.data;let j=!1;if(r.placeholderData!==void 0&&x===void 0&&b==="pending"){let R;i!=null&&i.isPlaceholderData&&r.placeholderData===(o==null?void 0:o.placeholderData)?(R=i.data,j=!0):R=typeof r.placeholderData=="function"?r.placeholderData((A=te(this,fu))==null?void 0:A.state.data,te(this,fu)):r.placeholderData,R!==void 0&&(b="success",x=_j(i==null?void 0:i.data,R,r),p=!0)}if(r.select&&x!==void 0&&!j)if(i&&x===(l==null?void 0:l.data)&&r.select===te(this,x0))x=te(this,gu);else try{Ue(this,x0,r.select),x=r.select(x),x=_j(i==null?void 0:i.data,x,r),Ue(this,gu,x),Ue(this,to,null)}catch(R){Ue(this,to,R)}te(this,to)&&(g=te(this,to),x=te(this,gu),f=Date.now(),b="error");const v=m.fetchStatus==="fetching",w=b==="pending",y=b==="error",C=w&&v,S=x!==void 0,E={status:b,fetchStatus:m.fetchStatus,isPending:w,isSuccess:b==="success",isError:y,isInitialLoading:C,isLoading:C,data:x,dataUpdatedAt:m.dataUpdatedAt,error:g,errorUpdatedAt:f,failureCount:m.fetchFailureCount,failureReason:m.fetchFailureReason,errorUpdateCount:m.errorUpdateCount,isFetched:m.dataUpdateCount>0||m.errorUpdateCount>0,isFetchedAfterMount:m.dataUpdateCount>d.dataUpdateCount||m.errorUpdateCount>d.errorUpdateCount,isFetching:v,isRefetching:v&&!w,isLoadingError:y&&!S,isPaused:m.fetchStatus==="paused",isPlaceholderData:p,isRefetchError:y&&S,isStale:k1(s,r),refetch:this.refetch,promise:te(this,al),isEnabled:Nn(r.enabled,s)!==!1};if(this.options.experimental_prefetchInRender){const R=P=>{E.status==="error"?P.reject(E.error):E.data!==void 0&&P.resolve(E.data)},I=()=>{const P=Ue(this,al,E.promise=Ej());R(P)},N=te(this,al);switch(N.status){case"pending":s.queryHash===a.queryHash&&R(N);break;case"fulfilled":(E.status==="error"||E.data!==N.value)&&I();break;case"rejected":(E.status!=="error"||E.error!==N.reason)&&I();break}}return E}updateResult(){const s=te(this,pa),r=this.createResult(te(this,Gt),this.options);if(Ue(this,Dc,te(this,Gt).state),Ue(this,xu,this.options),te(this,Dc).data!==void 0&&Ue(this,fu,te(this,Gt)),fg(r,s))return;Ue(this,pa,r);const a=()=>{if(!s)return!0;const{notifyOnChangeProps:n}=this.options,i=typeof n=="function"?n():n;if(i==="all"||!i&&!te(this,yu).size)return!0;const l=new Set(i??te(this,yu));return this.options.throwOnError&&l.add("error"),Object.keys(te(this,pa)).some(o=>{const c=o;return te(this,pa)[c]!==s[c]&&l.has(c)})};Rt(this,ls,y6).call(this,{listeners:a()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&Rt(this,ls,Dj).call(this)}},Pa=new WeakMap,Gt=new WeakMap,p0=new WeakMap,pa=new WeakMap,Dc=new WeakMap,xu=new WeakMap,al=new WeakMap,to=new WeakMap,x0=new WeakMap,gu=new WeakMap,fu=new WeakMap,Ic=new WeakMap,Mc=new WeakMap,so=new WeakMap,yu=new WeakMap,ls=new WeakSet,zm=function(s){Rt(this,ls,Lj).call(this);let r=te(this,Gt).fetch(this.options,s);return s!=null&&s.throwOnError||(r=r.catch(ba)),r},Tj=function(){Rt(this,ls,Ij).call(this);const s=wo(this.options.staleTime,te(this,Gt));if(Kc||te(this,pa).isStale||!Cj(s))return;const a=d6(te(this,pa).dataUpdatedAt,s)+1;Ue(this,Ic,vc.setTimeout(()=>{te(this,pa).isStale||this.updateResult()},a))},Pj=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(te(this,Gt)):this.options.refetchInterval)??!1},Rj=function(s){Rt(this,ls,Mj).call(this),Ue(this,so,s),!(Kc||Nn(this.options.enabled,te(this,Gt))===!1||!Cj(te(this,so))||te(this,so)===0)&&Ue(this,Mc,vc.setInterval(()=>{(this.options.refetchIntervalInBackground||N1.isFocused())&&Rt(this,ls,zm).call(this)},te(this,so)))},Dj=function(){Rt(this,ls,Tj).call(this),Rt(this,ls,Rj).call(this,Rt(this,ls,Pj).call(this))},Ij=function(){te(this,Ic)&&(vc.clearTimeout(te(this,Ic)),Ue(this,Ic,void 0))},Mj=function(){te(this,Mc)&&(vc.clearInterval(te(this,Mc)),Ue(this,Mc,void 0))},Lj=function(){const s=te(this,Pa).getQueryCache().build(te(this,Pa),this.options);if(s===te(this,Gt))return;const r=te(this,Gt);Ue(this,Gt,s),Ue(this,p0,s.state),this.hasListeners()&&(r==null||r.removeObserver(this),s.addObserver(this))},y6=function(s){Cr.batch(()=>{s.listeners&&this.listeners.forEach(r=>{r(te(this,pa))}),te(this,Pa).getQueryCache().notify({query:te(this,Gt),type:"observerResultsUpdated"})})},LE);function Y9(t,s){return Nn(s.enabled,t)!==!1&&t.state.data===void 0&&!(t.state.status==="error"&&s.retryOnMount===!1)}function aC(t,s){return Y9(t,s)||t.state.data!==void 0&&Fj(t,s,s.refetchOnMount)}function Fj(t,s,r){if(Nn(s.enabled,t)!==!1&&wo(s.staleTime,t)!=="static"){const a=typeof r=="function"?r(t):r;return a==="always"||a!==!1&&k1(t,s)}return!1}function nC(t,s,r,a){return(t!==s||Nn(a.enabled,t)===!1)&&(!r.suspense||t.state.status!=="error")&&k1(t,r)}function k1(t,s){return Nn(s.enabled,t)!==!1&&t.isStaleByTime(wo(s.staleTime,t))}function Q9(t,s){return!fg(t.getCurrentResult(),s)}function iC(t){return{onFetch:(s,r)=>{var u,m,p,x,g;const a=s.options,n=(p=(m=(u=s.fetchOptions)==null?void 0:u.meta)==null?void 0:m.fetchMore)==null?void 0:p.direction,i=((x=s.state.data)==null?void 0:x.pages)||[],l=((g=s.state.data)==null?void 0:g.pageParams)||[];let o={pages:[],pageParams:[]},c=0;const d=async()=>{let f=!1;const b=w=>{Object.defineProperty(w,"signal",{enumerable:!0,get:()=>(s.signal.aborted?f=!0:s.signal.addEventListener("abort",()=>{f=!0}),s.signal)})},j=m6(s.options,s.fetchOptions),v=async(w,y,C)=>{if(f)return Promise.reject();if(y==null&&w.pages.length)return Promise.resolve(w);const _=(()=>{const I={client:s.client,queryKey:s.queryKey,pageParam:y,direction:C?"backward":"forward",meta:s.options.meta};return b(I),I})(),E=await j(_),{maxPages:A}=s.options,R=C?U9:$9;return{pages:R(w.pages,E,A),pageParams:R(w.pageParams,y,A)}};if(n&&i.length){const w=n==="backward",y=w?J9:lC,C={pages:i,pageParams:l},S=y(a,C);o=await v(C,S,w)}else{const w=t??i.length;do{const y=c===0?l[0]??a.initialPageParam:lC(a,o);if(c>0&&y==null)break;o=await v(o,y),c++}while(c<w)}return o};s.options.persister?s.fetchFn=()=>{var f,b;return(b=(f=s.options).persister)==null?void 0:b.call(f,d,{client:s.client,queryKey:s.queryKey,meta:s.options.meta,signal:s.signal},r)}:s.fetchFn=d}}}function lC(t,{pages:s,pageParams:r}){const a=s.length-1;return s.length>0?t.getNextPageParam(s[a],s,r[a],r):void 0}function J9(t,{pages:s,pageParams:r}){var a;return s.length>0?(a=t.getPreviousPageParam)==null?void 0:a.call(t,s[0],s,r[0],r):void 0}var g0,vi,xa,Lc,ji,Ul,FE,Z9=(FE=class extends g6{constructor(s){super();rt(this,ji);rt(this,g0);rt(this,vi);rt(this,xa);rt(this,Lc);Ue(this,g0,s.client),this.mutationId=s.mutationId,Ue(this,xa,s.mutationCache),Ue(this,vi,[]),this.state=s.state||b6(),this.setOptions(s.options),this.scheduleGc()}setOptions(s){this.options=s,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(s){te(this,vi).includes(s)||(te(this,vi).push(s),this.clearGcTimeout(),te(this,xa).notify({type:"observerAdded",mutation:this,observer:s}))}removeObserver(s){Ue(this,vi,te(this,vi).filter(r=>r!==s)),this.scheduleGc(),te(this,xa).notify({type:"observerRemoved",mutation:this,observer:s})}optionalRemove(){te(this,vi).length||(this.state.status==="pending"?this.scheduleGc():te(this,xa).remove(this))}continue(){var s;return((s=te(this,Lc))==null?void 0:s.continue())??this.execute(this.state.variables)}async execute(s){var l,o,c,d,u,m,p,x,g,f,b,j,v,w,y,C,S,_,E,A;const r=()=>{Rt(this,ji,Ul).call(this,{type:"continue"})},a={client:te(this,g0),meta:this.options.meta,mutationKey:this.options.mutationKey};Ue(this,Lc,x6({fn:()=>this.options.mutationFn?this.options.mutationFn(s,a):Promise.reject(new Error("No mutationFn found")),onFail:(R,I)=>{Rt(this,ji,Ul).call(this,{type:"failed",failureCount:R,error:I})},onPause:()=>{Rt(this,ji,Ul).call(this,{type:"pause"})},onContinue:r,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>te(this,xa).canRun(this)}));const n=this.state.status==="pending",i=!te(this,Lc).canStart();try{if(n)r();else{Rt(this,ji,Ul).call(this,{type:"pending",variables:s,isPaused:i}),await((o=(l=te(this,xa).config).onMutate)==null?void 0:o.call(l,s,this,a));const I=await((d=(c=this.options).onMutate)==null?void 0:d.call(c,s,a));I!==this.state.context&&Rt(this,ji,Ul).call(this,{type:"pending",context:I,variables:s,isPaused:i})}const R=await te(this,Lc).start();return await((m=(u=te(this,xa).config).onSuccess)==null?void 0:m.call(u,R,s,this.state.context,this,a)),await((x=(p=this.options).onSuccess)==null?void 0:x.call(p,R,s,this.state.context,a)),await((f=(g=te(this,xa).config).onSettled)==null?void 0:f.call(g,R,null,this.state.variables,this.state.context,this,a)),await((j=(b=this.options).onSettled)==null?void 0:j.call(b,R,null,s,this.state.context,a)),Rt(this,ji,Ul).call(this,{type:"success",data:R}),R}catch(R){try{throw await((w=(v=te(this,xa).config).onError)==null?void 0:w.call(v,R,s,this.state.context,this,a)),await((C=(y=this.options).onError)==null?void 0:C.call(y,R,s,this.state.context,a)),await((_=(S=te(this,xa).config).onSettled)==null?void 0:_.call(S,void 0,R,this.state.variables,this.state.context,this,a)),await((A=(E=this.options).onSettled)==null?void 0:A.call(E,void 0,R,s,this.state.context,a)),R}finally{Rt(this,ji,Ul).call(this,{type:"error",error:R})}}finally{te(this,xa).runNext(this)}}},g0=new WeakMap,vi=new WeakMap,xa=new WeakMap,Lc=new WeakMap,ji=new WeakSet,Ul=function(s){const r=a=>{switch(s.type){case"failed":return{...a,failureCount:s.failureCount,failureReason:s.error};case"pause":return{...a,isPaused:!0};case"continue":return{...a,isPaused:!1};case"pending":return{...a,context:s.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:s.isPaused,status:"pending",variables:s.variables,submittedAt:Date.now()};case"success":return{...a,data:s.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...a,data:void 0,error:s.error,failureCount:a.failureCount+1,failureReason:s.error,isPaused:!1,status:"error"}}};this.state=r(this.state),Cr.batch(()=>{te(this,vi).forEach(a=>{a.onMutationUpdate(s)}),te(this,xa).notify({mutation:this,type:"updated",action:s})})},FE);function b6(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var nl,Zn,f0,OE,X9=(OE=class extends sm{constructor(s={}){super();rt(this,nl);rt(this,Zn);rt(this,f0);this.config=s,Ue(this,nl,new Set),Ue(this,Zn,new Map),Ue(this,f0,0)}build(s,r,a){const n=new Z9({client:s,mutationCache:this,mutationId:++tp(this,f0)._,options:s.defaultMutationOptions(r),state:a});return this.add(n),n}add(s){te(this,nl).add(s);const r=vp(s);if(typeof r=="string"){const a=te(this,Zn).get(r);a?a.push(s):te(this,Zn).set(r,[s])}this.notify({type:"added",mutation:s})}remove(s){if(te(this,nl).delete(s)){const r=vp(s);if(typeof r=="string"){const a=te(this,Zn).get(r);if(a)if(a.length>1){const n=a.indexOf(s);n!==-1&&a.splice(n,1)}else a[0]===s&&te(this,Zn).delete(r)}}this.notify({type:"removed",mutation:s})}canRun(s){const r=vp(s);if(typeof r=="string"){const a=te(this,Zn).get(r),n=a==null?void 0:a.find(i=>i.state.status==="pending");return!n||n===s}else return!0}runNext(s){var a;const r=vp(s);if(typeof r=="string"){const n=(a=te(this,Zn).get(r))==null?void 0:a.find(i=>i!==s&&i.state.isPaused);return(n==null?void 0:n.continue())??Promise.resolve()}else return Promise.resolve()}clear(){Cr.batch(()=>{te(this,nl).forEach(s=>{this.notify({type:"removed",mutation:s})}),te(this,nl).clear(),te(this,Zn).clear()})}getAll(){return Array.from(te(this,nl))}find(s){const r={exact:!0,...s};return this.getAll().find(a=>X4(r,a))}findAll(s={}){return this.getAll().filter(r=>X4(s,r))}notify(s){Cr.batch(()=>{this.listeners.forEach(r=>{r(s)})})}resumePausedMutations(){const s=this.getAll().filter(r=>r.state.isPaused);return Cr.batch(()=>Promise.all(s.map(r=>r.continue().catch(ba))))}},nl=new WeakMap,Zn=new WeakMap,f0=new WeakMap,OE);function vp(t){var s;return(s=t.options.scope)==null?void 0:s.id}var il,ro,Ra,ll,gl,Cx,Oj,BE,e8=(BE=class extends sm{constructor(r,a){super();rt(this,gl);rt(this,il);rt(this,ro);rt(this,Ra);rt(this,ll);Ue(this,il,r),this.setOptions(a),this.bindMethods(),Rt(this,gl,Cx).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(r){var n;const a=this.options;this.options=te(this,il).defaultMutationOptions(r),fg(this.options,a)||te(this,il).getMutationCache().notify({type:"observerOptionsUpdated",mutation:te(this,Ra),observer:this}),a!=null&&a.mutationKey&&this.options.mutationKey&&Hc(a.mutationKey)!==Hc(this.options.mutationKey)?this.reset():((n=te(this,Ra))==null?void 0:n.state.status)==="pending"&&te(this,Ra).setOptions(this.options)}onUnsubscribe(){var r;this.hasListeners()||(r=te(this,Ra))==null||r.removeObserver(this)}onMutationUpdate(r){Rt(this,gl,Cx).call(this),Rt(this,gl,Oj).call(this,r)}getCurrentResult(){return te(this,ro)}reset(){var r;(r=te(this,Ra))==null||r.removeObserver(this),Ue(this,Ra,void 0),Rt(this,gl,Cx).call(this),Rt(this,gl,Oj).call(this)}mutate(r,a){var n;return Ue(this,ll,a),(n=te(this,Ra))==null||n.removeObserver(this),Ue(this,Ra,te(this,il).getMutationCache().build(te(this,il),this.options)),te(this,Ra).addObserver(this),te(this,Ra).execute(r)}},il=new WeakMap,ro=new WeakMap,Ra=new WeakMap,ll=new WeakMap,gl=new WeakSet,Cx=function(){var a;const r=((a=te(this,Ra))==null?void 0:a.state)??b6();Ue(this,ro,{...r,isPending:r.status==="pending",isSuccess:r.status==="success",isError:r.status==="error",isIdle:r.status==="idle",mutate:this.mutate,reset:this.reset})},Oj=function(r){Cr.batch(()=>{var a,n,i,l,o,c,d,u;if(te(this,ll)&&this.hasListeners()){const m=te(this,ro).variables,p=te(this,ro).context,x={client:te(this,il),meta:this.options.meta,mutationKey:this.options.mutationKey};(r==null?void 0:r.type)==="success"?((n=(a=te(this,ll)).onSuccess)==null||n.call(a,r.data,m,p,x),(l=(i=te(this,ll)).onSettled)==null||l.call(i,r.data,null,m,p,x)):(r==null?void 0:r.type)==="error"&&((c=(o=te(this,ll)).onError)==null||c.call(o,r.error,m,p,x),(u=(d=te(this,ll)).onSettled)==null||u.call(d,void 0,r.error,m,p,x))}this.listeners.forEach(m=>{m(te(this,ro))})})},BE),wi,$E,t8=($E=class extends sm{constructor(s={}){super();rt(this,wi);this.config=s,Ue(this,wi,new Map)}build(s,r,a){const n=r.queryKey,i=r.queryHash??j1(n,r);let l=this.get(i);return l||(l=new K9({client:s,queryKey:n,queryHash:i,options:s.defaultQueryOptions(r),state:a,defaultOptions:s.getQueryDefaults(n)}),this.add(l)),l}add(s){te(this,wi).has(s.queryHash)||(te(this,wi).set(s.queryHash,s),this.notify({type:"added",query:s}))}remove(s){const r=te(this,wi).get(s.queryHash);r&&(s.destroy(),r===s&&te(this,wi).delete(s.queryHash),this.notify({type:"removed",query:s}))}clear(){Cr.batch(()=>{this.getAll().forEach(s=>{this.remove(s)})})}get(s){return te(this,wi).get(s)}getAll(){return[...te(this,wi).values()]}find(s){const r={exact:!0,...s};return this.getAll().find(a=>Z4(r,a))}findAll(s={}){const r=this.getAll();return Object.keys(s).length>0?r.filter(a=>Z4(s,a)):r}notify(s){Cr.batch(()=>{this.listeners.forEach(r=>{r(s)})})}onFocus(){Cr.batch(()=>{this.getAll().forEach(s=>{s.onFocus()})})}onOnline(){Cr.batch(()=>{this.getAll().forEach(s=>{s.onOnline()})})}},wi=new WeakMap,$E),Qs,ao,no,bu,vu,io,ju,wu,UE,s8=(UE=class{constructor(t={}){rt(this,Qs);rt(this,ao);rt(this,no);rt(this,bu);rt(this,vu);rt(this,io);rt(this,ju);rt(this,wu);Ue(this,Qs,t.queryCache||new t8),Ue(this,ao,t.mutationCache||new X9),Ue(this,no,t.defaultOptions||{}),Ue(this,bu,new Map),Ue(this,vu,new Map),Ue(this,io,0)}mount(){tp(this,io)._++,te(this,io)===1&&(Ue(this,ju,N1.subscribe(async t=>{t&&(await this.resumePausedMutations(),te(this,Qs).onFocus())})),Ue(this,wu,yg.subscribe(async t=>{t&&(await this.resumePausedMutations(),te(this,Qs).onOnline())})))}unmount(){var t,s;tp(this,io)._--,te(this,io)===0&&((t=te(this,ju))==null||t.call(this),Ue(this,ju,void 0),(s=te(this,wu))==null||s.call(this),Ue(this,wu,void 0))}isFetching(t){return te(this,Qs).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return te(this,ao).findAll({...t,status:"pending"}).length}getQueryData(t){var r;const s=this.defaultQueryOptions({queryKey:t});return(r=te(this,Qs).get(s.queryHash))==null?void 0:r.state.data}ensureQueryData(t){const s=this.defaultQueryOptions(t),r=te(this,Qs).build(this,s),a=r.state.data;return a===void 0?this.fetchQuery(t):(t.revalidateIfStale&&r.isStaleByTime(wo(s.staleTime,r))&&this.prefetchQuery(s),Promise.resolve(a))}getQueriesData(t){return te(this,Qs).findAll(t).map(({queryKey:s,state:r})=>{const a=r.data;return[s,a]})}setQueryData(t,s,r){const a=this.defaultQueryOptions({queryKey:t}),n=te(this,Qs).get(a.queryHash),i=n==null?void 0:n.state.data,l=F9(s,i);if(l!==void 0)return te(this,Qs).build(this,a).setData(l,{...r,manual:!0})}setQueriesData(t,s,r){return Cr.batch(()=>te(this,Qs).findAll(t).map(({queryKey:a})=>[a,this.setQueryData(a,s,r)]))}getQueryState(t){var r;const s=this.defaultQueryOptions({queryKey:t});return(r=te(this,Qs).get(s.queryHash))==null?void 0:r.state}removeQueries(t){const s=te(this,Qs);Cr.batch(()=>{s.findAll(t).forEach(r=>{s.remove(r)})})}resetQueries(t,s){const r=te(this,Qs);return Cr.batch(()=>(r.findAll(t).forEach(a=>{a.reset()}),this.refetchQueries({type:"active",...t},s)))}cancelQueries(t,s={}){const r={revert:!0,...s},a=Cr.batch(()=>te(this,Qs).findAll(t).map(n=>n.cancel(r)));return Promise.all(a).then(ba).catch(ba)}invalidateQueries(t,s={}){return Cr.batch(()=>(te(this,Qs).findAll(t).forEach(r=>{r.invalidate()}),(t==null?void 0:t.refetchType)==="none"?Promise.resolve():this.refetchQueries({...t,type:(t==null?void 0:t.refetchType)??(t==null?void 0:t.type)??"active"},s)))}refetchQueries(t,s={}){const r={...s,cancelRefetch:s.cancelRefetch??!0},a=Cr.batch(()=>te(this,Qs).findAll(t).filter(n=>!n.isDisabled()&&!n.isStatic()).map(n=>{let i=n.fetch(void 0,r);return r.throwOnError||(i=i.catch(ba)),n.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(a).then(ba)}fetchQuery(t){const s=this.defaultQueryOptions(t);s.retry===void 0&&(s.retry=!1);const r=te(this,Qs).build(this,s);return r.isStaleByTime(wo(s.staleTime,r))?r.fetch(s):Promise.resolve(r.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(ba).catch(ba)}fetchInfiniteQuery(t){return t.behavior=iC(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(ba).catch(ba)}ensureInfiniteQueryData(t){return t.behavior=iC(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return yg.isOnline()?te(this,ao).resumePausedMutations():Promise.resolve()}getQueryCache(){return te(this,Qs)}getMutationCache(){return te(this,ao)}getDefaultOptions(){return te(this,no)}setDefaultOptions(t){Ue(this,no,t)}setQueryDefaults(t,s){te(this,bu).set(Hc(t),{queryKey:t,defaultOptions:s})}getQueryDefaults(t){const s=[...te(this,bu).values()],r={};return s.forEach(a=>{Wh(t,a.queryKey)&&Object.assign(r,a.defaultOptions)}),r}setMutationDefaults(t,s){te(this,vu).set(Hc(t),{mutationKey:t,defaultOptions:s})}getMutationDefaults(t){const s=[...te(this,vu).values()],r={};return s.forEach(a=>{Wh(t,a.mutationKey)&&Object.assign(r,a.defaultOptions)}),r}defaultQueryOptions(t){if(t._defaulted)return t;const s={...te(this,no).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return s.queryHash||(s.queryHash=j1(s.queryKey,s)),s.refetchOnReconnect===void 0&&(s.refetchOnReconnect=s.networkMode!=="always"),s.throwOnError===void 0&&(s.throwOnError=!!s.suspense),!s.networkMode&&s.persister&&(s.networkMode="offlineFirst"),s.queryFn===w1&&(s.enabled=!1),s}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...te(this,no).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){te(this,Qs).clear(),te(this,ao).clear()}},Qs=new WeakMap,ao=new WeakMap,no=new WeakMap,bu=new WeakMap,vu=new WeakMap,io=new WeakMap,ju=new WeakMap,wu=new WeakMap,UE),v6=h.createContext(void 0),Ns=t=>{const s=h.useContext(v6);if(!s)throw new Error("No QueryClient set, use QueryClientProvider to set one");return s},r8=({client:t,children:s})=>(h.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),e.jsx(v6.Provider,{value:t,children:s})),j6=h.createContext(!1),a8=()=>h.useContext(j6);j6.Provider;function n8(){let t=!1;return{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t}}var i8=h.createContext(n8()),l8=()=>h.useContext(i8),o8=(t,s)=>{(t.suspense||t.throwOnError||t.experimental_prefetchInRender)&&(s.isReset()||(t.retryOnMount=!1))},c8=t=>{h.useEffect(()=>{t.clearReset()},[t])},d8=({result:t,errorResetBoundary:s,throwOnError:r,query:a,suspense:n})=>t.isError&&!s.isReset()&&!t.isFetching&&a&&(n&&t.data===void 0||h6(r,[t.error,a])),u8=t=>{if(t.suspense){const r=n=>n==="static"?n:Math.max(n??1e3,1e3),a=t.staleTime;t.staleTime=typeof a=="function"?(...n)=>r(a(...n)):r(a),typeof t.gcTime=="number"&&(t.gcTime=Math.max(t.gcTime,1e3))}},m8=(t,s)=>t.isLoading&&t.isFetching&&!s,h8=(t,s)=>(t==null?void 0:t.suspense)&&s.isPending,oC=(t,s,r)=>s.fetchOptimistic(t).catch(()=>{r.clearReset()});function p8(t,s,r){var m,p,x,g,f;const a=a8(),n=l8(),i=Ns(),l=i.defaultQueryOptions(t);(p=(m=i.getDefaultOptions().queries)==null?void 0:m._experimental_beforeQuery)==null||p.call(m,l),l._optimisticResults=a?"isRestoring":"optimistic",u8(l),o8(l,n),c8(n);const o=!i.getQueryCache().get(l.queryHash),[c]=h.useState(()=>new s(i,l)),d=c.getOptimisticResult(l),u=!a&&t.subscribed!==!1;if(h.useSyncExternalStore(h.useCallback(b=>{const j=u?c.subscribe(Cr.batchCalls(b)):ba;return c.updateResult(),j},[c,u]),()=>c.getCurrentResult(),()=>c.getCurrentResult()),h.useEffect(()=>{c.setOptions(l)},[l,c]),h8(l,d))throw oC(l,c,n);if(d8({result:d,errorResetBoundary:n,throwOnError:l.throwOnError,query:i.getQueryCache().get(l.queryHash),suspense:l.suspense}))throw d.error;if((g=(x=i.getDefaultOptions().queries)==null?void 0:x._experimental_afterQuery)==null||g.call(x,l,d),l.experimental_prefetchInRender&&!Kc&&m8(d,a)){const b=o?oC(l,c,n):(f=i.getQueryCache().get(l.queryHash))==null?void 0:f.promise;b==null||b.catch(ba).finally(()=>{c.updateResult()})}return l.notifyOnChangeProps?d:c.trackResult(d)}function _a(t,s){return p8(t,H9)}function Is(t,s){const r=Ns(),[a]=h.useState(()=>new e8(r,t));h.useEffect(()=>{a.setOptions(t)},[a,t]);const n=h.useSyncExternalStore(h.useCallback(l=>a.subscribe(Cr.batchCalls(l)),[a]),()=>a.getCurrentResult(),()=>a.getCurrentResult()),i=h.useCallback((l,o)=>{a.mutate(l,o).catch(ba)},[a]);if(n.error&&h6(a.options.throwOnError,[n.error]))throw n.error;return{...n,mutate:i,mutateAsync:n.mutate}}var Bj=function(t,s){return Bj=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,a){r.__proto__=a}||function(r,a){for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(r[n]=a[n])},Bj(t,s)};function w6(t,s){if(typeof s!="function"&&s!==null)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");Bj(t,s);function r(){this.constructor=t}t.prototype=s===null?Object.create(s):(r.prototype=s.prototype,new r)}var bg=function(){return bg=Object.assign||function(s){for(var r,a=1,n=arguments.length;a<n;a++){r=arguments[a];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(s[i]=r[i])}return s},bg.apply(this,arguments)};function rm(t,s){var r={};for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&s.indexOf(a)<0&&(r[a]=t[a]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,a=Object.getOwnPropertySymbols(t);n<a.length;n++)s.indexOf(a[n])<0&&Object.prototype.propertyIsEnumerable.call(t,a[n])&&(r[a[n]]=t[a[n]]);return r}function N6(t,s,r,a){var n=arguments.length,i=n<3?s:a===null?a=Object.getOwnPropertyDescriptor(s,r):a,l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(t,s,r,a);else for(var o=t.length-1;o>=0;o--)(l=t[o])&&(i=(n<3?l(i):n>3?l(s,r,i):l(s,r))||i);return n>3&&i&&Object.defineProperty(s,r,i),i}function k6(t,s){return function(r,a){s(r,a,t)}}function C6(t,s,r,a,n,i){function l(j){if(j!==void 0&&typeof j!="function")throw new TypeError("Function expected");return j}for(var o=a.kind,c=o==="getter"?"get":o==="setter"?"set":"value",d=!s&&t?a.static?t:t.prototype:null,u=s||(d?Object.getOwnPropertyDescriptor(d,a.name):{}),m,p=!1,x=r.length-1;x>=0;x--){var g={};for(var f in a)g[f]=f==="access"?{}:a[f];for(var f in a.access)g.access[f]=a.access[f];g.addInitializer=function(j){if(p)throw new TypeError("Cannot add initializers after decoration has completed");i.push(l(j||null))};var b=(0,r[x])(o==="accessor"?{get:u.get,set:u.set}:u[c],g);if(o==="accessor"){if(b===void 0)continue;if(b===null||typeof b!="object")throw new TypeError("Object expected");(m=l(b.get))&&(u.get=m),(m=l(b.set))&&(u.set=m),(m=l(b.init))&&n.unshift(m)}else(m=l(b))&&(o==="field"?n.unshift(m):u[c]=m)}d&&Object.defineProperty(d,a.name,u),p=!0}function S6(t,s,r){for(var a=arguments.length>2,n=0;n<s.length;n++)r=a?s[n].call(t,r):s[n].call(t);return a?r:void 0}function _6(t){return typeof t=="symbol"?t:"".concat(t)}function E6(t,s,r){return typeof s=="symbol"&&(s=s.description?"[".concat(s.description,"]"):""),Object.defineProperty(t,"name",{configurable:!0,value:r?"".concat(r," ",s):s})}function A6(t,s){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,s)}function He(t,s,r,a){function n(i){return i instanceof r?i:new r(function(l){l(i)})}return new(r||(r=Promise))(function(i,l){function o(u){try{d(a.next(u))}catch(m){l(m)}}function c(u){try{d(a.throw(u))}catch(m){l(m)}}function d(u){u.done?i(u.value):n(u.value).then(o,c)}d((a=a.apply(t,s||[])).next())})}function T6(t,s){var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},a,n,i,l=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return l.next=o(0),l.throw=o(1),l.return=o(2),typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function o(d){return function(u){return c([d,u])}}function c(d){if(a)throw new TypeError("Generator is already executing.");for(;l&&(l=0,d[0]&&(r=0)),r;)try{if(a=1,n&&(i=d[0]&2?n.return:d[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,d[1])).done)return i;switch(n=0,i&&(d=[d[0]&2,i.value]),d[0]){case 0:case 1:i=d;break;case 4:return r.label++,{value:d[1],done:!1};case 5:r.label++,n=d[1],d=[0];continue;case 7:d=r.ops.pop(),r.trys.pop();continue;default:if(i=r.trys,!(i=i.length>0&&i[i.length-1])&&(d[0]===6||d[0]===2)){r=0;continue}if(d[0]===3&&(!i||d[1]>i[0]&&d[1]<i[3])){r.label=d[1];break}if(d[0]===6&&r.label<i[1]){r.label=i[1],i=d;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(d);break}i[2]&&r.ops.pop(),r.trys.pop();continue}d=s.call(t,r)}catch(u){d=[6,u],n=0}finally{a=i=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}}var Ef=Object.create?function(t,s,r,a){a===void 0&&(a=r);var n=Object.getOwnPropertyDescriptor(s,r);(!n||("get"in n?!s.__esModule:n.writable||n.configurable))&&(n={enumerable:!0,get:function(){return s[r]}}),Object.defineProperty(t,a,n)}:function(t,s,r,a){a===void 0&&(a=r),t[a]=s[r]};function P6(t,s){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(s,r)&&Ef(s,t,r)}function vg(t){var s=typeof Symbol=="function"&&Symbol.iterator,r=s&&t[s],a=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&a>=t.length&&(t=void 0),{value:t&&t[a++],done:!t}}};throw new TypeError(s?"Object is not iterable.":"Symbol.iterator is not defined.")}function C1(t,s){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var a=r.call(t),n,i=[],l;try{for(;(s===void 0||s-- >0)&&!(n=a.next()).done;)i.push(n.value)}catch(o){l={error:o}}finally{try{n&&!n.done&&(r=a.return)&&r.call(a)}finally{if(l)throw l.error}}return i}function R6(){for(var t=[],s=0;s<arguments.length;s++)t=t.concat(C1(arguments[s]));return t}function D6(){for(var t=0,s=0,r=arguments.length;s<r;s++)t+=arguments[s].length;for(var a=Array(t),n=0,s=0;s<r;s++)for(var i=arguments[s],l=0,o=i.length;l<o;l++,n++)a[n]=i[l];return a}function I6(t,s,r){if(r||arguments.length===2)for(var a=0,n=s.length,i;a<n;a++)(i||!(a in s))&&(i||(i=Array.prototype.slice.call(s,0,a)),i[a]=s[a]);return t.concat(i||Array.prototype.slice.call(s))}function Tu(t){return this instanceof Tu?(this.v=t,this):new Tu(t)}function M6(t,s,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var a=r.apply(t,s||[]),n,i=[];return n=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),o("next"),o("throw"),o("return",l),n[Symbol.asyncIterator]=function(){return this},n;function l(x){return function(g){return Promise.resolve(g).then(x,m)}}function o(x,g){a[x]&&(n[x]=function(f){return new Promise(function(b,j){i.push([x,f,b,j])>1||c(x,f)})},g&&(n[x]=g(n[x])))}function c(x,g){try{d(a[x](g))}catch(f){p(i[0][3],f)}}function d(x){x.value instanceof Tu?Promise.resolve(x.value.v).then(u,m):p(i[0][2],x)}function u(x){c("next",x)}function m(x){c("throw",x)}function p(x,g){x(g),i.shift(),i.length&&c(i[0][0],i[0][1])}}function L6(t){var s,r;return s={},a("next"),a("throw",function(n){throw n}),a("return"),s[Symbol.iterator]=function(){return this},s;function a(n,i){s[n]=t[n]?function(l){return(r=!r)?{value:Tu(t[n](l)),done:!1}:i?i(l):l}:i}}function F6(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s=t[Symbol.asyncIterator],r;return s?s.call(t):(t=typeof vg=="function"?vg(t):t[Symbol.iterator](),r={},a("next"),a("throw"),a("return"),r[Symbol.asyncIterator]=function(){return this},r);function a(i){r[i]=t[i]&&function(l){return new Promise(function(o,c){l=t[i](l),n(o,c,l.done,l.value)})}}function n(i,l,o,c){Promise.resolve(c).then(function(d){i({value:d,done:o})},l)}}function O6(t,s){return Object.defineProperty?Object.defineProperty(t,"raw",{value:s}):t.raw=s,t}var x8=Object.create?function(t,s){Object.defineProperty(t,"default",{enumerable:!0,value:s})}:function(t,s){t.default=s},$j=function(t){return $j=Object.getOwnPropertyNames||function(s){var r=[];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(r[r.length]=a);return r},$j(t)};function B6(t){if(t&&t.__esModule)return t;var s={};if(t!=null)for(var r=$j(t),a=0;a<r.length;a++)r[a]!=="default"&&Ef(s,t,r[a]);return x8(s,t),s}function $6(t){return t&&t.__esModule?t:{default:t}}function U6(t,s,r,a){if(r==="a"&&!a)throw new TypeError("Private accessor was defined without a getter");if(typeof s=="function"?t!==s||!a:!s.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?a:r==="a"?a.call(t):a?a.value:s.get(t)}function V6(t,s,r,a,n){if(a==="m")throw new TypeError("Private method is not writable");if(a==="a"&&!n)throw new TypeError("Private accessor was defined without a setter");if(typeof s=="function"?t!==s||!n:!s.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return a==="a"?n.call(t,r):n?n.value=r:s.set(t,r),r}function q6(t,s){if(s===null||typeof s!="object"&&typeof s!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof t=="function"?s===t:t.has(s)}function W6(t,s,r){if(s!=null){if(typeof s!="object"&&typeof s!="function")throw new TypeError("Object expected.");var a,n;if(r){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");a=s[Symbol.asyncDispose]}if(a===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");a=s[Symbol.dispose],r&&(n=a)}if(typeof a!="function")throw new TypeError("Object not disposable.");n&&(a=function(){try{n.call(this)}catch(i){return Promise.reject(i)}}),t.stack.push({value:s,dispose:a,async:r})}else r&&t.stack.push({async:!0});return s}var g8=typeof SuppressedError=="function"?SuppressedError:function(t,s,r){var a=new Error(r);return a.name="SuppressedError",a.error=t,a.suppressed=s,a};function z6(t){function s(i){t.error=t.hasError?new g8(i,t.error,"An error was suppressed during disposal."):i,t.hasError=!0}var r,a=0;function n(){for(;r=t.stack.pop();)try{if(!r.async&&a===1)return a=0,t.stack.push(r),Promise.resolve().then(n);if(r.dispose){var i=r.dispose.call(r.value);if(r.async)return a|=2,Promise.resolve(i).then(n,function(l){return s(l),n()})}else a|=1}catch(l){s(l)}if(a===1)return t.hasError?Promise.reject(t.error):Promise.resolve();if(t.hasError)throw t.error}return n()}function G6(t,s){return typeof t=="string"&&/^\.\.?\//.test(t)?t.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(r,a,n,i,l){return a?s?".jsx":".js":n&&(!i||!l)?r:n+i+"."+l.toLowerCase()+"js"}):t}const f8={__extends:w6,__assign:bg,__rest:rm,__decorate:N6,__param:k6,__esDecorate:C6,__runInitializers:S6,__propKey:_6,__setFunctionName:E6,__metadata:A6,__awaiter:He,__generator:T6,__createBinding:Ef,__exportStar:P6,__values:vg,__read:C1,__spread:R6,__spreadArrays:D6,__spreadArray:I6,__await:Tu,__asyncGenerator:M6,__asyncDelegator:L6,__asyncValues:F6,__makeTemplateObject:O6,__importStar:B6,__importDefault:$6,__classPrivateFieldGet:U6,__classPrivateFieldSet:V6,__classPrivateFieldIn:q6,__addDisposableResource:W6,__disposeResources:z6,__rewriteRelativeImportExtension:G6},y8=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:W6,get __assign(){return bg},__asyncDelegator:L6,__asyncGenerator:M6,__asyncValues:F6,__await:Tu,__awaiter:He,__classPrivateFieldGet:U6,__classPrivateFieldIn:q6,__classPrivateFieldSet:V6,__createBinding:Ef,__decorate:N6,__disposeResources:z6,__esDecorate:C6,__exportStar:P6,__extends:w6,__generator:T6,__importDefault:$6,__importStar:B6,__makeTemplateObject:O6,__metadata:A6,__param:k6,__propKey:_6,__read:C1,__rest:rm,__rewriteRelativeImportExtension:G6,__runInitializers:S6,__setFunctionName:E6,__spread:R6,__spreadArray:I6,__spreadArrays:D6,__values:vg,default:f8},Symbol.toStringTag,{value:"Module"})),b8=t=>t?(...s)=>t(...s):(...s)=>fetch(...s);class S1 extends Error{constructor(s,r="FunctionsError",a){super(s),this.name=r,this.context=a}}class v8 extends S1{constructor(s){super("Failed to send a request to the Edge Function","FunctionsFetchError",s)}}class cC extends S1{constructor(s){super("Relay Error invoking the Edge Function","FunctionsRelayError",s)}}class dC extends S1{constructor(s){super("Edge Function returned a non-2xx status code","FunctionsHttpError",s)}}var Uj;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(Uj||(Uj={}));class j8{constructor(s,{headers:r={},customFetch:a,region:n=Uj.Any}={}){this.url=s,this.headers=r,this.region=n,this.fetch=b8(a)}setAuth(s){this.headers.Authorization=`Bearer ${s}`}invoke(s){return He(this,arguments,void 0,function*(r,a={}){var n;let i,l;try{const{headers:o,method:c,body:d,signal:u,timeout:m}=a;let p={},{region:x}=a;x||(x=this.region);const g=new URL(`${this.url}/${r}`);x&&x!=="any"&&(p["x-region"]=x,g.searchParams.set("forceFunctionRegion",x));let f;d&&(o&&!Object.prototype.hasOwnProperty.call(o,"Content-Type")||!o)?typeof Blob<"u"&&d instanceof Blob||d instanceof ArrayBuffer?(p["Content-Type"]="application/octet-stream",f=d):typeof d=="string"?(p["Content-Type"]="text/plain",f=d):typeof FormData<"u"&&d instanceof FormData?f=d:(p["Content-Type"]="application/json",f=JSON.stringify(d)):f=d;let b=u;m&&(l=new AbortController,i=setTimeout(()=>l.abort(),m),u?(b=l.signal,u.addEventListener("abort",()=>l.abort())):b=l.signal);const j=yield this.fetch(g.toString(),{method:c||"POST",headers:Object.assign(Object.assign(Object.assign({},p),this.headers),o),body:f,signal:b}).catch(C=>{throw new v8(C)}),v=j.headers.get("x-relay-error");if(v&&v==="true")throw new cC(j);if(!j.ok)throw new dC(j);let w=((n=j.headers.get("Content-Type"))!==null&&n!==void 0?n:"text/plain").split(";")[0].trim(),y;return w==="application/json"?y=yield j.json():w==="application/octet-stream"||w==="application/pdf"?y=yield j.blob():w==="text/event-stream"?y=j:w==="multipart/form-data"?y=yield j.formData():y=yield j.text(),{data:y,error:null,response:j}}catch(o){return{data:null,error:o,response:o instanceof dC||o instanceof cC?o.context:void 0}}finally{i&&clearTimeout(i)}})}}var va={};const am=VE(y8);var jp={},wp={},Np={},kp={},Cp={},Sp={},uC;function K6(){if(uC)return Sp;uC=1,Object.defineProperty(Sp,"__esModule",{value:!0});class t extends Error{constructor(r){super(r.message),this.name="PostgrestError",this.details=r.details,this.hint=r.hint,this.code=r.code}}return Sp.default=t,Sp}var mC;function H6(){if(mC)return Cp;mC=1,Object.defineProperty(Cp,"__esModule",{value:!0});const s=am.__importDefault(K6());class r{constructor(n){var i,l;this.shouldThrowOnError=!1,this.method=n.method,this.url=n.url,this.headers=new Headers(n.headers),this.schema=n.schema,this.body=n.body,this.shouldThrowOnError=(i=n.shouldThrowOnError)!==null&&i!==void 0?i:!1,this.signal=n.signal,this.isMaybeSingle=(l=n.isMaybeSingle)!==null&&l!==void 0?l:!1,n.fetch?this.fetch=n.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(n,i){return this.headers=new Headers(this.headers),this.headers.set(n,i),this}then(n,i){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const l=this.fetch;let o=l(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async c=>{var d,u,m,p;let x=null,g=null,f=null,b=c.status,j=c.statusText;if(c.ok){if(this.method!=="HEAD"){const C=await c.text();C===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((d=this.headers.get("Accept"))===null||d===void 0)&&d.includes("application/vnd.pgrst.plan+text"))?g=C:g=JSON.parse(C))}const w=(u=this.headers.get("Prefer"))===null||u===void 0?void 0:u.match(/count=(exact|planned|estimated)/),y=(m=c.headers.get("content-range"))===null||m===void 0?void 0:m.split("/");w&&y&&y.length>1&&(f=parseInt(y[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(g)&&(g.length>1?(x={code:"PGRST116",details:`Results contain ${g.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},g=null,f=null,b=406,j="Not Acceptable"):g.length===1?g=g[0]:g=null)}else{const w=await c.text();try{x=JSON.parse(w),Array.isArray(x)&&c.status===404&&(g=[],x=null,b=200,j="OK")}catch{c.status===404&&w===""?(b=204,j="No Content"):x={message:w}}if(x&&this.isMaybeSingle&&(!((p=x==null?void 0:x.details)===null||p===void 0)&&p.includes("0 rows"))&&(x=null,b=200,j="OK"),x&&this.shouldThrowOnError)throw new s.default(x)}return{error:x,data:g,count:f,status:b,statusText:j}});return this.shouldThrowOnError||(o=o.catch(c=>{var d,u,m,p,x,g;let f="";const b=c==null?void 0:c.cause;if(b){const j=(d=b==null?void 0:b.message)!==null&&d!==void 0?d:"",v=(u=b==null?void 0:b.code)!==null&&u!==void 0?u:"";f=`${(m=c==null?void 0:c.name)!==null&&m!==void 0?m:"FetchError"}: ${c==null?void 0:c.message}`,f+=`

Caused by: ${(p=b==null?void 0:b.name)!==null&&p!==void 0?p:"Error"}: ${j}`,v&&(f+=` (${v})`),b!=null&&b.stack&&(f+=`
${b.stack}`)}else f=(x=c==null?void 0:c.stack)!==null&&x!==void 0?x:"";return{error:{message:`${(g=c==null?void 0:c.name)!==null&&g!==void 0?g:"FetchError"}: ${c==null?void 0:c.message}`,details:f,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),o.then(n,i)}returns(){return this}overrideTypes(){return this}}return Cp.default=r,Cp}var hC;function Y6(){if(hC)return kp;hC=1,Object.defineProperty(kp,"__esModule",{value:!0});const s=am.__importDefault(H6());class r extends s.default{select(n){let i=!1;const l=(n??"*").split("").map(o=>/\s/.test(o)&&!i?"":(o==='"'&&(i=!i),o)).join("");return this.url.searchParams.set("select",l),this.headers.append("Prefer","return=representation"),this}order(n,{ascending:i=!0,nullsFirst:l,foreignTable:o,referencedTable:c=o}={}){const d=c?`${c}.order`:"order",u=this.url.searchParams.get(d);return this.url.searchParams.set(d,`${u?`${u},`:""}${n}.${i?"asc":"desc"}${l===void 0?"":l?".nullsfirst":".nullslast"}`),this}limit(n,{foreignTable:i,referencedTable:l=i}={}){const o=typeof l>"u"?"limit":`${l}.limit`;return this.url.searchParams.set(o,`${n}`),this}range(n,i,{foreignTable:l,referencedTable:o=l}={}){const c=typeof o>"u"?"offset":`${o}.offset`,d=typeof o>"u"?"limit":`${o}.limit`;return this.url.searchParams.set(c,`${n}`),this.url.searchParams.set(d,`${i-n+1}`),this}abortSignal(n){return this.signal=n,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:n=!1,verbose:i=!1,settings:l=!1,buffers:o=!1,wal:c=!1,format:d="text"}={}){var u;const m=[n?"analyze":null,i?"verbose":null,l?"settings":null,o?"buffers":null,c?"wal":null].filter(Boolean).join("|"),p=(u=this.headers.get("Accept"))!==null&&u!==void 0?u:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${d}; for="${p}"; options=${m};`),d==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(n){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${n}`),this}}return kp.default=r,kp}var pC;function _1(){if(pC)return Np;pC=1,Object.defineProperty(Np,"__esModule",{value:!0});const s=am.__importDefault(Y6()),r=new RegExp("[,()]");class a extends s.default{eq(i,l){return this.url.searchParams.append(i,`eq.${l}`),this}neq(i,l){return this.url.searchParams.append(i,`neq.${l}`),this}gt(i,l){return this.url.searchParams.append(i,`gt.${l}`),this}gte(i,l){return this.url.searchParams.append(i,`gte.${l}`),this}lt(i,l){return this.url.searchParams.append(i,`lt.${l}`),this}lte(i,l){return this.url.searchParams.append(i,`lte.${l}`),this}like(i,l){return this.url.searchParams.append(i,`like.${l}`),this}likeAllOf(i,l){return this.url.searchParams.append(i,`like(all).{${l.join(",")}}`),this}likeAnyOf(i,l){return this.url.searchParams.append(i,`like(any).{${l.join(",")}}`),this}ilike(i,l){return this.url.searchParams.append(i,`ilike.${l}`),this}ilikeAllOf(i,l){return this.url.searchParams.append(i,`ilike(all).{${l.join(",")}}`),this}ilikeAnyOf(i,l){return this.url.searchParams.append(i,`ilike(any).{${l.join(",")}}`),this}regexMatch(i,l){return this.url.searchParams.append(i,`match.${l}`),this}regexIMatch(i,l){return this.url.searchParams.append(i,`imatch.${l}`),this}is(i,l){return this.url.searchParams.append(i,`is.${l}`),this}isDistinct(i,l){return this.url.searchParams.append(i,`isdistinct.${l}`),this}in(i,l){const o=Array.from(new Set(l)).map(c=>typeof c=="string"&&r.test(c)?`"${c}"`:`${c}`).join(",");return this.url.searchParams.append(i,`in.(${o})`),this}contains(i,l){return typeof l=="string"?this.url.searchParams.append(i,`cs.${l}`):Array.isArray(l)?this.url.searchParams.append(i,`cs.{${l.join(",")}}`):this.url.searchParams.append(i,`cs.${JSON.stringify(l)}`),this}containedBy(i,l){return typeof l=="string"?this.url.searchParams.append(i,`cd.${l}`):Array.isArray(l)?this.url.searchParams.append(i,`cd.{${l.join(",")}}`):this.url.searchParams.append(i,`cd.${JSON.stringify(l)}`),this}rangeGt(i,l){return this.url.searchParams.append(i,`sr.${l}`),this}rangeGte(i,l){return this.url.searchParams.append(i,`nxl.${l}`),this}rangeLt(i,l){return this.url.searchParams.append(i,`sl.${l}`),this}rangeLte(i,l){return this.url.searchParams.append(i,`nxr.${l}`),this}rangeAdjacent(i,l){return this.url.searchParams.append(i,`adj.${l}`),this}overlaps(i,l){return typeof l=="string"?this.url.searchParams.append(i,`ov.${l}`):this.url.searchParams.append(i,`ov.{${l.join(",")}}`),this}textSearch(i,l,{config:o,type:c}={}){let d="";c==="plain"?d="pl":c==="phrase"?d="ph":c==="websearch"&&(d="w");const u=o===void 0?"":`(${o})`;return this.url.searchParams.append(i,`${d}fts${u}.${l}`),this}match(i){return Object.entries(i).forEach(([l,o])=>{this.url.searchParams.append(l,`eq.${o}`)}),this}not(i,l,o){return this.url.searchParams.append(i,`not.${l}.${o}`),this}or(i,{foreignTable:l,referencedTable:o=l}={}){const c=o?`${o}.or`:"or";return this.url.searchParams.append(c,`(${i})`),this}filter(i,l,o){return this.url.searchParams.append(i,`${l}.${o}`),this}}return Np.default=a,Np}var xC;function Q6(){if(xC)return wp;xC=1,Object.defineProperty(wp,"__esModule",{value:!0});const s=am.__importDefault(_1());class r{constructor(n,{headers:i={},schema:l,fetch:o}){this.url=n,this.headers=new Headers(i),this.schema=l,this.fetch=o}select(n,i){const{head:l=!1,count:o}=i??{},c=l?"HEAD":"GET";let d=!1;const u=(n??"*").split("").map(m=>/\s/.test(m)&&!d?"":(m==='"'&&(d=!d),m)).join("");return this.url.searchParams.set("select",u),o&&this.headers.append("Prefer",`count=${o}`),new s.default({method:c,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(n,{count:i,defaultToNull:l=!0}={}){var o;const c="POST";if(i&&this.headers.append("Prefer",`count=${i}`),l||this.headers.append("Prefer","missing=default"),Array.isArray(n)){const d=n.reduce((u,m)=>u.concat(Object.keys(m)),[]);if(d.length>0){const u=[...new Set(d)].map(m=>`"${m}"`);this.url.searchParams.set("columns",u.join(","))}}return new s.default({method:c,url:this.url,headers:this.headers,schema:this.schema,body:n,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}upsert(n,{onConflict:i,ignoreDuplicates:l=!1,count:o,defaultToNull:c=!0}={}){var d;const u="POST";if(this.headers.append("Prefer",`resolution=${l?"ignore":"merge"}-duplicates`),i!==void 0&&this.url.searchParams.set("on_conflict",i),o&&this.headers.append("Prefer",`count=${o}`),c||this.headers.append("Prefer","missing=default"),Array.isArray(n)){const m=n.reduce((p,x)=>p.concat(Object.keys(x)),[]);if(m.length>0){const p=[...new Set(m)].map(x=>`"${x}"`);this.url.searchParams.set("columns",p.join(","))}}return new s.default({method:u,url:this.url,headers:this.headers,schema:this.schema,body:n,fetch:(d=this.fetch)!==null&&d!==void 0?d:fetch})}update(n,{count:i}={}){var l;const o="PATCH";return i&&this.headers.append("Prefer",`count=${i}`),new s.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:n,fetch:(l=this.fetch)!==null&&l!==void 0?l:fetch})}delete({count:n}={}){var i;const l="DELETE";return n&&this.headers.append("Prefer",`count=${n}`),new s.default({method:l,url:this.url,headers:this.headers,schema:this.schema,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch})}}return wp.default=r,wp}var gC;function w8(){if(gC)return jp;gC=1,Object.defineProperty(jp,"__esModule",{value:!0});const t=am,s=t.__importDefault(Q6()),r=t.__importDefault(_1());class a{constructor(i,{headers:l={},schema:o,fetch:c}={}){this.url=i,this.headers=new Headers(l),this.schemaName=o,this.fetch=c}from(i){if(!i||typeof i!="string"||i.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");const l=new URL(`${this.url}/${i}`);return new s.default(l,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(i){return new a(this.url,{headers:this.headers,schema:i,fetch:this.fetch})}rpc(i,l={},{head:o=!1,get:c=!1,count:d}={}){var u;let m;const p=new URL(`${this.url}/rpc/${i}`);let x;o||c?(m=o?"HEAD":"GET",Object.entries(l).filter(([f,b])=>b!==void 0).map(([f,b])=>[f,Array.isArray(b)?`{${b.join(",")}}`:`${b}`]).forEach(([f,b])=>{p.searchParams.append(f,b)})):(m="POST",x=l);const g=new Headers(this.headers);return d&&g.set("Prefer",`count=${d}`),new r.default({method:m,url:p,headers:g,schema:this.schemaName,body:x,fetch:(u=this.fetch)!==null&&u!==void 0?u:fetch})}}return jp.default=a,jp}Object.defineProperty(va,"__esModule",{value:!0});var J6=va.PostgrestError=lT=va.PostgrestBuilder=nT=va.PostgrestTransformBuilder=rT=va.PostgrestFilterBuilder=tT=va.PostgrestQueryBuilder=X6=va.PostgrestClient=void 0;const nm=am,Z6=nm.__importDefault(w8());var X6=va.PostgrestClient=Z6.default;const eT=nm.__importDefault(Q6());var tT=va.PostgrestQueryBuilder=eT.default;const sT=nm.__importDefault(_1());var rT=va.PostgrestFilterBuilder=sT.default;const aT=nm.__importDefault(Y6());var nT=va.PostgrestTransformBuilder=aT.default;const iT=nm.__importDefault(H6());var lT=va.PostgrestBuilder=iT.default;const oT=nm.__importDefault(K6());J6=va.PostgrestError=oT.default;var cT=va.default={PostgrestClient:Z6.default,PostgrestQueryBuilder:eT.default,PostgrestFilterBuilder:sT.default,PostgrestTransformBuilder:aT.default,PostgrestBuilder:iT.default,PostgrestError:oT.default};const N8=yN({__proto__:null,get PostgrestBuilder(){return lT},get PostgrestClient(){return X6},get PostgrestError(){return J6},get PostgrestFilterBuilder(){return rT},get PostgrestQueryBuilder(){return tT},get PostgrestTransformBuilder(){return nT},default:cT},[va]),{PostgrestClient:k8,PostgrestQueryBuilder:bue,PostgrestFilterBuilder:vue,PostgrestTransformBuilder:jue,PostgrestBuilder:wue,PostgrestError:Nue}=cT||N8;class C8{constructor(){}static detectEnvironment(){var s;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((s=navigator.userAgent)===null||s===void 0)&&s.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const r=process.versions;if(r&&r.node){const a=r.node,n=parseInt(a.replace(/^v/,"").split(".")[0]);return n>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${n} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${n} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const s=this.detectEnvironment();if(s.constructor)return s.constructor;let r=s.error||"WebSocket not supported in this environment.";throw s.workaround&&(r+=`

Suggested solution: ${s.workaround}`),new Error(r)}static createWebSocket(s,r){const a=this.getWebSocketConstructor();return new a(s,r)}static isWebSocketSupported(){try{const s=this.detectEnvironment();return s.type==="native"||s.type==="ws"}catch{return!1}}}const S8="2.86.0",_8=`realtime-js/${S8}`,dT="1.0.0",E8="2.0.0",fC=dT,Vj=1e4,A8=1e3,T8=100;var mc;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(mc||(mc={}));var vr;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(vr||(vr={}));var ei;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(ei||(ei={}));var qj;(function(t){t.websocket="websocket"})(qj||(qj={}));var hc;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(hc||(hc={}));class P8{constructor(s){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=s??[]}encode(s,r){if(s.event===this.BROADCAST_EVENT&&!(s.payload instanceof ArrayBuffer)&&typeof s.payload.event=="string")return r(this._binaryEncodeUserBroadcastPush(s));let a=[s.join_ref,s.ref,s.topic,s.event,s.payload];return r(JSON.stringify(a))}_binaryEncodeUserBroadcastPush(s){var r;return this._isArrayBuffer((r=s.payload)===null||r===void 0?void 0:r.payload)?this._encodeBinaryUserBroadcastPush(s):this._encodeJsonUserBroadcastPush(s)}_encodeBinaryUserBroadcastPush(s){var r,a;const n=(a=(r=s.payload)===null||r===void 0?void 0:r.payload)!==null&&a!==void 0?a:new ArrayBuffer(0);return this._encodeUserBroadcastPush(s,this.BINARY_ENCODING,n)}_encodeJsonUserBroadcastPush(s){var r,a;const n=(a=(r=s.payload)===null||r===void 0?void 0:r.payload)!==null&&a!==void 0?a:{},l=new TextEncoder().encode(JSON.stringify(n)).buffer;return this._encodeUserBroadcastPush(s,this.JSON_ENCODING,l)}_encodeUserBroadcastPush(s,r,a){var n,i;const l=s.topic,o=(n=s.ref)!==null&&n!==void 0?n:"",c=(i=s.join_ref)!==null&&i!==void 0?i:"",d=s.payload.event,u=this.allowedMetadataKeys?this._pick(s.payload,this.allowedMetadataKeys):{},m=Object.keys(u).length===0?"":JSON.stringify(u);if(c.length>255)throw new Error(`joinRef length ${c.length} exceeds maximum of 255`);if(o.length>255)throw new Error(`ref length ${o.length} exceeds maximum of 255`);if(l.length>255)throw new Error(`topic length ${l.length} exceeds maximum of 255`);if(d.length>255)throw new Error(`userEvent length ${d.length} exceeds maximum of 255`);if(m.length>255)throw new Error(`metadata length ${m.length} exceeds maximum of 255`);const p=this.USER_BROADCAST_PUSH_META_LENGTH+c.length+o.length+l.length+d.length+m.length,x=new ArrayBuffer(this.HEADER_LENGTH+p);let g=new DataView(x),f=0;g.setUint8(f++,this.KINDS.userBroadcastPush),g.setUint8(f++,c.length),g.setUint8(f++,o.length),g.setUint8(f++,l.length),g.setUint8(f++,d.length),g.setUint8(f++,m.length),g.setUint8(f++,r),Array.from(c,j=>g.setUint8(f++,j.charCodeAt(0))),Array.from(o,j=>g.setUint8(f++,j.charCodeAt(0))),Array.from(l,j=>g.setUint8(f++,j.charCodeAt(0))),Array.from(d,j=>g.setUint8(f++,j.charCodeAt(0))),Array.from(m,j=>g.setUint8(f++,j.charCodeAt(0)));var b=new Uint8Array(x.byteLength+a.byteLength);return b.set(new Uint8Array(x),0),b.set(new Uint8Array(a),x.byteLength),b.buffer}decode(s,r){if(this._isArrayBuffer(s)){let a=this._binaryDecode(s);return r(a)}if(typeof s=="string"){const a=JSON.parse(s),[n,i,l,o,c]=a;return r({join_ref:n,ref:i,topic:l,event:o,payload:c})}return r({})}_binaryDecode(s){const r=new DataView(s),a=r.getUint8(0),n=new TextDecoder;switch(a){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(s,r,n)}}_decodeUserBroadcast(s,r,a){const n=r.getUint8(1),i=r.getUint8(2),l=r.getUint8(3),o=r.getUint8(4);let c=this.HEADER_LENGTH+4;const d=a.decode(s.slice(c,c+n));c=c+n;const u=a.decode(s.slice(c,c+i));c=c+i;const m=a.decode(s.slice(c,c+l));c=c+l;const p=s.slice(c,s.byteLength),x=o===this.JSON_ENCODING?JSON.parse(a.decode(p)):p,g={type:this.BROADCAST_EVENT,event:u,payload:x};return l>0&&(g.meta=JSON.parse(m)),{join_ref:null,ref:null,topic:d,event:this.BROADCAST_EVENT,payload:g}}_isArrayBuffer(s){var r;return s instanceof ArrayBuffer||((r=s==null?void 0:s.constructor)===null||r===void 0?void 0:r.name)==="ArrayBuffer"}_pick(s,r){return!s||typeof s!="object"?{}:Object.fromEntries(Object.entries(s).filter(([a])=>r.includes(a)))}}class uT{constructor(s,r){this.callback=s,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=s,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Cs;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(Cs||(Cs={}));const yC=(t,s,r={})=>{var a;const n=(a=r.skipTypes)!==null&&a!==void 0?a:[];return s?Object.keys(s).reduce((i,l)=>(i[l]=R8(l,t,s,n),i),{}):{}},R8=(t,s,r,a)=>{const n=s.find(o=>o.name===t),i=n==null?void 0:n.type,l=r[t];return i&&!a.includes(i)?mT(i,l):Wj(l)},mT=(t,s)=>{if(t.charAt(0)==="_"){const r=t.slice(1,t.length);return L8(s,r)}switch(t){case Cs.bool:return D8(s);case Cs.float4:case Cs.float8:case Cs.int2:case Cs.int4:case Cs.int8:case Cs.numeric:case Cs.oid:return I8(s);case Cs.json:case Cs.jsonb:return M8(s);case Cs.timestamp:return F8(s);case Cs.abstime:case Cs.date:case Cs.daterange:case Cs.int4range:case Cs.int8range:case Cs.money:case Cs.reltime:case Cs.text:case Cs.time:case Cs.timestamptz:case Cs.timetz:case Cs.tsrange:case Cs.tstzrange:return Wj(s);default:return Wj(s)}},Wj=t=>t,D8=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},I8=t=>{if(typeof t=="string"){const s=parseFloat(t);if(!Number.isNaN(s))return s}return t},M8=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(s){return console.log(`JSON parse error: ${s}`),t}return t},L8=(t,s)=>{if(typeof t!="string")return t;const r=t.length-1,a=t[r];if(t[0]==="{"&&a==="}"){let i;const l=t.slice(1,r);try{i=JSON.parse("["+l+"]")}catch{i=l?l.split(","):[]}return i.map(o=>mT(s,o))}return t},F8=t=>typeof t=="string"?t.replace(" ","T"):t,hT=t=>{const s=new URL(t);return s.protocol=s.protocol.replace(/^ws/i,"http"),s.pathname=s.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),s.pathname===""||s.pathname==="/"?s.pathname="/api/broadcast":s.pathname=s.pathname+"/api/broadcast",s.href};class Tb{constructor(s,r,a={},n=Vj){this.channel=s,this.event=r,this.payload=a,this.timeout=n,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(s){this.timeout=s,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(s){this.payload=Object.assign(Object.assign({},this.payload),s)}receive(s,r){var a;return this._hasReceived(s)&&r((a=this.receivedResp)===null||a===void 0?void 0:a.response),this.recHooks.push({status:s,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const s=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},s),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(s,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:s,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:s,response:r}){this.recHooks.filter(a=>a.status===s).forEach(a=>a.callback(r))}_hasReceived(s){return this.receivedResp&&this.receivedResp.status===s}}var bC;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(bC||(bC={}));class dh{constructor(s,r){this.channel=s,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const a=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(a.state,{},n=>{const{onJoin:i,onLeave:l,onSync:o}=this.caller;this.joinRef=this.channel._joinRef(),this.state=dh.syncState(this.state,n,i,l),this.pendingDiffs.forEach(c=>{this.state=dh.syncDiff(this.state,c,i,l)}),this.pendingDiffs=[],o()}),this.channel._on(a.diff,{},n=>{const{onJoin:i,onLeave:l,onSync:o}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(n):(this.state=dh.syncDiff(this.state,n,i,l),o())}),this.onJoin((n,i,l)=>{this.channel._trigger("presence",{event:"join",key:n,currentPresences:i,newPresences:l})}),this.onLeave((n,i,l)=>{this.channel._trigger("presence",{event:"leave",key:n,currentPresences:i,leftPresences:l})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(s,r,a,n){const i=this.cloneDeep(s),l=this.transformState(r),o={},c={};return this.map(i,(d,u)=>{l[d]||(c[d]=u)}),this.map(l,(d,u)=>{const m=i[d];if(m){const p=u.map(b=>b.presence_ref),x=m.map(b=>b.presence_ref),g=u.filter(b=>x.indexOf(b.presence_ref)<0),f=m.filter(b=>p.indexOf(b.presence_ref)<0);g.length>0&&(o[d]=g),f.length>0&&(c[d]=f)}else o[d]=u}),this.syncDiff(i,{joins:o,leaves:c},a,n)}static syncDiff(s,r,a,n){const{joins:i,leaves:l}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return a||(a=()=>{}),n||(n=()=>{}),this.map(i,(o,c)=>{var d;const u=(d=s[o])!==null&&d!==void 0?d:[];if(s[o]=this.cloneDeep(c),u.length>0){const m=s[o].map(x=>x.presence_ref),p=u.filter(x=>m.indexOf(x.presence_ref)<0);s[o].unshift(...p)}a(o,u,c)}),this.map(l,(o,c)=>{let d=s[o];if(!d)return;const u=c.map(m=>m.presence_ref);d=d.filter(m=>u.indexOf(m.presence_ref)<0),s[o]=d,n(o,d,c),d.length===0&&delete s[o]}),s}static map(s,r){return Object.getOwnPropertyNames(s).map(a=>r(a,s[a]))}static transformState(s){return s=this.cloneDeep(s),Object.getOwnPropertyNames(s).reduce((r,a)=>{const n=s[a];return"metas"in n?r[a]=n.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):r[a]=n,r},{})}static cloneDeep(s){return JSON.parse(JSON.stringify(s))}onJoin(s){this.caller.onJoin=s}onLeave(s){this.caller.onLeave=s}onSync(s){this.caller.onSync=s}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var vC;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(vC||(vC={}));var uh;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(uh||(uh={}));var el;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(el||(el={}));class E1{constructor(s,r={config:{}},a){var n,i;if(this.topic=s,this.params=r,this.socket=a,this.bindings={},this.state=vr.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=s.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new Tb(this,ei.join,this.params,this.timeout),this.rejoinTimer=new uT(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=vr.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(l=>l.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=vr.closed,this.socket._remove(this)}),this._onError(l=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,l),this.state=vr.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=vr.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",l=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,l),this.state=vr.errored,this.rejoinTimer.scheduleTimeout())}),this._on(ei.reply,{},(l,o)=>{this._trigger(this._replyEventName(o),l)}),this.presence=new dh(this),this.broadcastEndpointURL=hT(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((i=(n=this.params.config)===null||n===void 0?void 0:n.broadcast)===null||i===void 0)&&i.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(s,r=this.timeout){var a,n,i;if(this.socket.isConnected()||this.socket.connect(),this.state==vr.closed){const{config:{broadcast:l,presence:o,private:c}}=this.params,d=(n=(a=this.bindings.postgres_changes)===null||a===void 0?void 0:a.map(x=>x.filter))!==null&&n!==void 0?n:[],u=!!this.bindings[uh.PRESENCE]&&this.bindings[uh.PRESENCE].length>0||((i=this.params.config.presence)===null||i===void 0?void 0:i.enabled)===!0,m={},p={broadcast:l,presence:Object.assign(Object.assign({},o),{enabled:u}),postgres_changes:d,private:c};this.socket.accessTokenValue&&(m.access_token=this.socket.accessTokenValue),this._onError(x=>s==null?void 0:s(el.CHANNEL_ERROR,x)),this._onClose(()=>s==null?void 0:s(el.CLOSED)),this.updateJoinPayload(Object.assign({config:p},m)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:x})=>{var g;if(this.socket.setAuth(),x===void 0){s==null||s(el.SUBSCRIBED);return}else{const f=this.bindings.postgres_changes,b=(g=f==null?void 0:f.length)!==null&&g!==void 0?g:0,j=[];for(let v=0;v<b;v++){const w=f[v],{filter:{event:y,schema:C,table:S,filter:_}}=w,E=x&&x[v];if(E&&E.event===y&&E.schema===C&&E.table===S&&E.filter===_)j.push(Object.assign(Object.assign({},w),{id:E.id}));else{this.unsubscribe(),this.state=vr.errored,s==null||s(el.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=j,s&&s(el.SUBSCRIBED);return}}).receive("error",x=>{this.state=vr.errored,s==null||s(el.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(x).join(", ")||"error")))}).receive("timeout",()=>{s==null||s(el.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(s,r={}){return await this.send({type:"presence",event:"track",payload:s},r.timeout||this.timeout)}async untrack(s={}){return await this.send({type:"presence",event:"untrack"},s)}on(s,r,a){return this.state===vr.joined&&s===uh.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(s,r,a)}async httpSend(s,r,a={}){var n;const i=this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"";if(r==null)return Promise.reject("Payload is required for httpSend()");const l={method:"POST",headers:{Authorization:i,apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:s,payload:r,private:this.private}]})},o=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(n=a.timeout)!==null&&n!==void 0?n:this.timeout);if(o.status===202)return{success:!0};let c=o.statusText;try{const d=await o.json();c=d.error||d.message||c}catch{}return Promise.reject(new Error(c))}async send(s,r={}){var a,n;if(!this._canPush()&&s.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:i,payload:l}=s,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:l,private:this.private}]})};try{const d=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(a=r.timeout)!==null&&a!==void 0?a:this.timeout);return await((n=d.body)===null||n===void 0?void 0:n.cancel()),d.ok?"ok":"error"}catch(d){return d.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var l,o,c;const d=this._push(s.type,s,r.timeout||this.timeout);s.type==="broadcast"&&!(!((c=(o=(l=this.params)===null||l===void 0?void 0:l.config)===null||o===void 0?void 0:o.broadcast)===null||c===void 0)&&c.ack)&&i("ok"),d.receive("ok",()=>i("ok")),d.receive("error",()=>i("error")),d.receive("timeout",()=>i("timed out"))})}updateJoinPayload(s){this.joinPush.updatePayload(s)}unsubscribe(s=this.timeout){this.state=vr.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(ei.close,"leave",this._joinRef())};this.joinPush.destroy();let a=null;return new Promise(n=>{a=new Tb(this,ei.leave,{},s),a.receive("ok",()=>{r(),n("ok")}).receive("timeout",()=>{r(),n("timed out")}).receive("error",()=>{n("error")}),a.send(),this._canPush()||a.trigger("ok",{})}).finally(()=>{a==null||a.destroy()})}teardown(){this.pushBuffer.forEach(s=>s.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=vr.closed,this.bindings={}}async _fetchWithTimeout(s,r,a){const n=new AbortController,i=setTimeout(()=>n.abort(),a),l=await this.socket.fetch(s,Object.assign(Object.assign({},r),{signal:n.signal}));return clearTimeout(i),l}_push(s,r,a=this.timeout){if(!this.joinedOnce)throw`tried to push '${s}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let n=new Tb(this,s,r,a);return this._canPush()?n.send():this._addToPushBuffer(n),n}_addToPushBuffer(s){if(s.startTimeout(),this.pushBuffer.push(s),this.pushBuffer.length>T8){const r=this.pushBuffer.shift();r&&(r.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${r.event}`,r.payload))}}_onMessage(s,r,a){return r}_isMember(s){return this.topic===s}_joinRef(){return this.joinPush.ref}_trigger(s,r,a){var n,i;const l=s.toLocaleLowerCase(),{close:o,error:c,leave:d,join:u}=ei;if(a&&[o,c,d,u].indexOf(l)>=0&&a!==this._joinRef())return;let p=this._onMessage(l,r,a);if(r&&!p)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(l)?(n=this.bindings.postgres_changes)===null||n===void 0||n.filter(x=>{var g,f,b;return((g=x.filter)===null||g===void 0?void 0:g.event)==="*"||((b=(f=x.filter)===null||f===void 0?void 0:f.event)===null||b===void 0?void 0:b.toLocaleLowerCase())===l}).map(x=>x.callback(p,a)):(i=this.bindings[l])===null||i===void 0||i.filter(x=>{var g,f,b,j,v,w;if(["broadcast","presence","postgres_changes"].includes(l))if("id"in x){const y=x.id,C=(g=x.filter)===null||g===void 0?void 0:g.event;return y&&((f=r.ids)===null||f===void 0?void 0:f.includes(y))&&(C==="*"||(C==null?void 0:C.toLocaleLowerCase())===((b=r.data)===null||b===void 0?void 0:b.type.toLocaleLowerCase()))}else{const y=(v=(j=x==null?void 0:x.filter)===null||j===void 0?void 0:j.event)===null||v===void 0?void 0:v.toLocaleLowerCase();return y==="*"||y===((w=r==null?void 0:r.event)===null||w===void 0?void 0:w.toLocaleLowerCase())}else return x.type.toLocaleLowerCase()===l}).map(x=>{if(typeof p=="object"&&"ids"in p){const g=p.data,{schema:f,table:b,commit_timestamp:j,type:v,errors:w}=g;p=Object.assign(Object.assign({},{schema:f,table:b,commit_timestamp:j,eventType:v,new:{},old:{},errors:w}),this._getPayloadRecords(g))}x.callback(p,a)})}_isClosed(){return this.state===vr.closed}_isJoined(){return this.state===vr.joined}_isJoining(){return this.state===vr.joining}_isLeaving(){return this.state===vr.leaving}_replyEventName(s){return`chan_reply_${s}`}_on(s,r,a){const n=s.toLocaleLowerCase(),i={type:n,filter:r,callback:a};return this.bindings[n]?this.bindings[n].push(i):this.bindings[n]=[i],this}_off(s,r){const a=s.toLocaleLowerCase();return this.bindings[a]&&(this.bindings[a]=this.bindings[a].filter(n=>{var i;return!(((i=n.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===a&&E1.isEqual(n.filter,r))})),this}static isEqual(s,r){if(Object.keys(s).length!==Object.keys(r).length)return!1;for(const a in s)if(s[a]!==r[a])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(s){this._on(ei.close,{},s)}_onError(s){this._on(ei.error,{},r=>s(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(s=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=vr.joining,this.joinPush.resend(s))}_getPayloadRecords(s){const r={new:{},old:{}};return(s.type==="INSERT"||s.type==="UPDATE")&&(r.new=yC(s.columns,s.record)),(s.type==="UPDATE"||s.type==="DELETE")&&(r.old=yC(s.columns,s.old_record)),r}}const Pb=()=>{},_p={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},O8=[1e3,2e3,5e3,1e4],B8=1e4,$8=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class U8{constructor(s,r){var a;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Vj,this.transport=null,this.heartbeatIntervalMs=_p.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Pb,this.ref=0,this.reconnectTimer=null,this.vsn=fC,this.logger=Pb,this.conn=null,this.sendBuffer=[],this.serializer=new P8,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=n=>n?(...i)=>n(...i):(...i)=>fetch(...i),!(!((a=r==null?void 0:r.params)===null||a===void 0)&&a.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=r.params.apikey,this.endPoint=`${s}/${qj.websocket}`,this.httpEndpoint=hT(s),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(r==null?void 0:r.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=C8.createWebSocket(this.endpointURL())}catch(s){this._setConnectionState("disconnected");const r=s.message;throw r.includes("Node.js")?new Error(`${r}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${r}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(s,r){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const a=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(a),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(s?this.conn.close(s,r??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(s){const r=await s.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const s=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),s}log(s,r,a){this.logger(s,r,a)}connectionState(){switch(this.conn&&this.conn.readyState){case mc.connecting:return hc.Connecting;case mc.open:return hc.Open;case mc.closing:return hc.Closing;default:return hc.Closed}}isConnected(){return this.connectionState()===hc.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(s,r={config:{}}){const a=`realtime:${s}`,n=this.getChannels().find(i=>i.topic===a);if(n)return n;{const i=new E1(`realtime:${s}`,r,this);return this.channels.push(i),i}}push(s){const{topic:r,event:a,payload:n,ref:i}=s,l=()=>{this.encode(s,o=>{var c;(c=this.conn)===null||c===void 0||c.send(o)})};this.log("push",`${r} ${a} (${i})`,n),this.isConnected()?l():this.sendBuffer.push(l)}async setAuth(s=null){this._authPromise=this._performAuth(s);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var s;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(r){this.log("error","error in heartbeat callback",r)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(r){this.log("error","error in heartbeat callback",r)}this._wasManualDisconnect=!1,(s=this.conn)===null||s===void 0||s.close(A8,"heartbeat timeout"),setTimeout(()=>{var r;this.isConnected()||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout()},_p.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(r){this.log("error","error in heartbeat callback",r)}this._setAuthSafely("heartbeat")}onHeartbeat(s){this.heartbeatCallback=s}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(s=>s()),this.sendBuffer=[])}_makeRef(){let s=this.ref+1;return s===this.ref?this.ref=0:this.ref=s,this.ref.toString()}_leaveOpenTopic(s){let r=this.channels.find(a=>a.topic===s&&(a._isJoined()||a._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${s}"`),r.unsubscribe())}_remove(s){this.channels=this.channels.filter(r=>r.topic!==s.topic)}_onConnMessage(s){this.decode(s.data,r=>{if(r.topic==="phoenix"&&r.event==="phx_reply")try{this.heartbeatCallback(r.payload.status==="ok"?"ok":"error")}catch(d){this.log("error","error in heartbeat callback",d)}r.ref&&r.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:a,event:n,payload:i,ref:l}=r,o=l?`(${l})`:"",c=i.status||"";this.log("receive",`${c} ${a} ${n} ${o}`.trim(),i),this.channels.filter(d=>d._isMember(a)).forEach(d=>d._trigger(n,i,l)),this._triggerStateCallbacks("message",r)})}_clearTimer(s){var r;s==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):s==="reconnect"&&((r=this.reconnectTimer)===null||r===void 0||r.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=s=>this._onConnError(s),this.conn.onmessage=s=>this._onConnMessage(s),this.conn.onclose=s=>this._onConnClose(s))}_teardownConnection(){if(this.conn){if(this.conn.readyState===mc.open||this.conn.readyState===mc.connecting)try{this.conn.close()}catch(s){this.log("error","Error closing connection",s)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this.channels.forEach(s=>s.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(r=>{this.log("error","error waiting for auth on connect",r),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const s=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(s),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this.workerRef.terminate()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(s){var r;this._setConnectionState("disconnected"),this.log("transport","close",s),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout(),this._triggerStateCallbacks("close",s)}_onConnError(s){this._setConnectionState("disconnected"),this.log("transport",`${s}`),this._triggerChanError(),this._triggerStateCallbacks("error",s)}_triggerChanError(){this.channels.forEach(s=>s._trigger(ei.error))}_appendParams(s,r){if(Object.keys(r).length===0)return s;const a=s.match(/\?/)?"&":"?",n=new URLSearchParams(r);return`${s}${a}${n}`}_workerObjectUrl(s){let r;if(s)r=s;else{const a=new Blob([$8],{type:"application/javascript"});r=URL.createObjectURL(a)}return r}_setConnectionState(s,r=!1){this._connectionState=s,s==="connecting"?this._wasManualDisconnect=!1:s==="disconnecting"&&(this._wasManualDisconnect=r)}async _performAuth(s=null){let r;s?r=s:this.accessToken?r=await this.accessToken():r=this.accessTokenValue,this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(a=>{const n={access_token:r,version:_8};r&&a.updateJoinPayload(n),a.joinedOnce&&a._isJoined()&&a._push(ei.access_token,{access_token:r})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(s="general"){this.setAuth().catch(r=>{this.log("error",`error setting auth in ${s}`,r)})}_triggerStateCallbacks(s,r){try{this.stateChangeCallbacks[s].forEach(a=>{try{a(r)}catch(n){this.log("error",`error in ${s} callback`,n)}})}catch(a){this.log("error",`error triggering ${s} callbacks`,a)}}_setupReconnectionTimer(){this.reconnectTimer=new uT(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},_p.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(s){var r,a,n,i,l,o,c,d,u,m,p,x;switch(this.transport=(r=s==null?void 0:s.transport)!==null&&r!==void 0?r:null,this.timeout=(a=s==null?void 0:s.timeout)!==null&&a!==void 0?a:Vj,this.heartbeatIntervalMs=(n=s==null?void 0:s.heartbeatIntervalMs)!==null&&n!==void 0?n:_p.HEARTBEAT_INTERVAL,this.worker=(i=s==null?void 0:s.worker)!==null&&i!==void 0?i:!1,this.accessToken=(l=s==null?void 0:s.accessToken)!==null&&l!==void 0?l:null,this.heartbeatCallback=(o=s==null?void 0:s.heartbeatCallback)!==null&&o!==void 0?o:Pb,this.vsn=(c=s==null?void 0:s.vsn)!==null&&c!==void 0?c:fC,s!=null&&s.params&&(this.params=s.params),s!=null&&s.logger&&(this.logger=s.logger),(s!=null&&s.logLevel||s!=null&&s.log_level)&&(this.logLevel=s.logLevel||s.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(d=s==null?void 0:s.reconnectAfterMs)!==null&&d!==void 0?d:g=>O8[g-1]||B8,this.vsn){case dT:this.encode=(u=s==null?void 0:s.encode)!==null&&u!==void 0?u:(g,f)=>f(JSON.stringify(g)),this.decode=(m=s==null?void 0:s.decode)!==null&&m!==void 0?m:(g,f)=>f(JSON.parse(g));break;case E8:this.encode=(p=s==null?void 0:s.encode)!==null&&p!==void 0?p:this.serializer.encode.bind(this.serializer),this.decode=(x=s==null?void 0:s.decode)!==null&&x!==void 0?x:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=s==null?void 0:s.workerUrl}}}class Af extends Error{constructor(s){super(s),this.__isStorageError=!0,this.name="StorageError"}}function $s(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class V8 extends Af{constructor(s,r,a){super(s),this.name="StorageApiError",this.status=r,this.statusCode=a}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class zj extends Af{constructor(s,r){super(s),this.name="StorageUnknownError",this.originalError=r}}const A1=t=>t?(...s)=>t(...s):(...s)=>fetch(...s),q8=()=>Response,Gj=t=>{if(Array.isArray(t))return t.map(r=>Gj(r));if(typeof t=="function"||t!==Object(t))return t;const s={};return Object.entries(t).forEach(([r,a])=>{const n=r.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));s[n]=Gj(a)}),s},W8=t=>{if(typeof t!="object"||t===null)return!1;const s=Object.getPrototypeOf(t);return(s===null||s===Object.prototype||Object.getPrototypeOf(s)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},z8=t=>!t||typeof t!="string"||t.length===0||t.length>100||t.trim()!==t||t.includes("/")||t.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(t),Rb=t=>{var s;return t.msg||t.message||t.error_description||(typeof t.error=="string"?t.error:(s=t.error)===null||s===void 0?void 0:s.message)||JSON.stringify(t)},G8=(t,s,r)=>He(void 0,void 0,void 0,function*(){const a=yield q8();t instanceof a&&!(r!=null&&r.noResolveJson)?t.json().then(n=>{const i=t.status||500,l=(n==null?void 0:n.statusCode)||i+"";s(new V8(Rb(n),i,l))}).catch(n=>{s(new zj(Rb(n),n))}):s(new zj(Rb(t),t))}),K8=(t,s,r,a)=>{const n={method:t,headers:(s==null?void 0:s.headers)||{}};return t==="GET"||!a?n:(W8(a)?(n.headers=Object.assign({"Content-Type":"application/json"},s==null?void 0:s.headers),n.body=JSON.stringify(a)):n.body=a,s!=null&&s.duplex&&(n.duplex=s.duplex),Object.assign(Object.assign({},n),r))};function N0(t,s,r,a,n,i){return He(this,void 0,void 0,function*(){return new Promise((l,o)=>{t(r,K8(s,a,n,i)).then(c=>{if(!c.ok)throw c;return a!=null&&a.noResolveJson?c:c.json()}).then(c=>l(c)).catch(c=>G8(c,o,a))})})}function zh(t,s,r,a){return He(this,void 0,void 0,function*(){return N0(t,"GET",s,r,a)})}function Qn(t,s,r,a,n){return He(this,void 0,void 0,function*(){return N0(t,"POST",s,a,n,r)})}function Kj(t,s,r,a,n){return He(this,void 0,void 0,function*(){return N0(t,"PUT",s,a,n,r)})}function H8(t,s,r,a){return He(this,void 0,void 0,function*(){return N0(t,"HEAD",s,Object.assign(Object.assign({},r),{noResolveJson:!0}),a)})}function T1(t,s,r,a,n){return He(this,void 0,void 0,function*(){return N0(t,"DELETE",s,a,n,r)})}class Y8{constructor(s,r){this.downloadFn=s,this.shouldThrowOnError=r}then(s,r){return this.execute().then(s,r)}execute(){return He(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(s){if(this.shouldThrowOnError)throw s;if($s(s))return{data:null,error:s};throw s}})}}var pT;class Q8{constructor(s,r){this.downloadFn=s,this.shouldThrowOnError=r,this[pT]="BlobDownloadBuilder",this.promise=null}asStream(){return new Y8(this.downloadFn,this.shouldThrowOnError)}then(s,r){return this.getPromise().then(s,r)}catch(s){return this.getPromise().catch(s)}finally(s){return this.getPromise().finally(s)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return He(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if($s(s))return{data:null,error:s};throw s}})}}pT=Symbol.toStringTag;const J8={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},jC={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class Z8{constructor(s,r={},a,n){this.shouldThrowOnError=!1,this.url=s,this.headers=r,this.bucketId=a,this.fetch=A1(n)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(s,r,a,n){return He(this,void 0,void 0,function*(){try{let i;const l=Object.assign(Object.assign({},jC),n);let o=Object.assign(Object.assign({},this.headers),s==="POST"&&{"x-upsert":String(l.upsert)});const c=l.metadata;typeof Blob<"u"&&a instanceof Blob?(i=new FormData,i.append("cacheControl",l.cacheControl),c&&i.append("metadata",this.encodeMetadata(c)),i.append("",a)):typeof FormData<"u"&&a instanceof FormData?(i=a,i.has("cacheControl")||i.append("cacheControl",l.cacheControl),c&&!i.has("metadata")&&i.append("metadata",this.encodeMetadata(c))):(i=a,o["cache-control"]=`max-age=${l.cacheControl}`,o["content-type"]=l.contentType,c&&(o["x-metadata"]=this.toBase64(this.encodeMetadata(c))),(typeof ReadableStream<"u"&&i instanceof ReadableStream||i&&typeof i=="object"&&"pipe"in i&&typeof i.pipe=="function")&&!l.duplex&&(l.duplex="half")),n!=null&&n.headers&&(o=Object.assign(Object.assign({},o),n.headers));const d=this._removeEmptyFolders(r),u=this._getFinalPath(d),m=yield(s=="PUT"?Kj:Qn)(this.fetch,`${this.url}/object/${u}`,i,Object.assign({headers:o},l!=null&&l.duplex?{duplex:l.duplex}:{}));return{data:{path:d,id:m.Id,fullPath:m.Key},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if($s(i))return{data:null,error:i};throw i}})}upload(s,r,a){return He(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",s,r,a)})}uploadToSignedUrl(s,r,a,n){return He(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(s),l=this._getFinalPath(i),o=new URL(this.url+`/object/upload/sign/${l}`);o.searchParams.set("token",r);try{let c;const d=Object.assign({upsert:jC.upsert},n),u=Object.assign(Object.assign({},this.headers),{"x-upsert":String(d.upsert)});typeof Blob<"u"&&a instanceof Blob?(c=new FormData,c.append("cacheControl",d.cacheControl),c.append("",a)):typeof FormData<"u"&&a instanceof FormData?(c=a,c.append("cacheControl",d.cacheControl)):(c=a,u["cache-control"]=`max-age=${d.cacheControl}`,u["content-type"]=d.contentType);const m=yield Kj(this.fetch,o.toString(),c,{headers:u});return{data:{path:i,fullPath:m.Key},error:null}}catch(c){if(this.shouldThrowOnError)throw c;if($s(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(s,r){return He(this,void 0,void 0,function*(){try{let a=this._getFinalPath(s);const n=Object.assign({},this.headers);r!=null&&r.upsert&&(n["x-upsert"]="true");const i=yield Qn(this.fetch,`${this.url}/object/upload/sign/${a}`,{},{headers:n}),l=new URL(this.url+i.url),o=l.searchParams.get("token");if(!o)throw new Af("No token returned by API");return{data:{signedUrl:l.toString(),path:s,token:o},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if($s(a))return{data:null,error:a};throw a}})}update(s,r,a){return He(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",s,r,a)})}move(s,r,a){return He(this,void 0,void 0,function*(){try{return{data:yield Qn(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:s,destinationKey:r,destinationBucket:a==null?void 0:a.destinationBucket},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if($s(n))return{data:null,error:n};throw n}})}copy(s,r,a){return He(this,void 0,void 0,function*(){try{return{data:{path:(yield Qn(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:s,destinationKey:r,destinationBucket:a==null?void 0:a.destinationBucket},{headers:this.headers})).Key},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if($s(n))return{data:null,error:n};throw n}})}createSignedUrl(s,r,a){return He(this,void 0,void 0,function*(){try{let n=this._getFinalPath(s),i=yield Qn(this.fetch,`${this.url}/object/sign/${n}`,Object.assign({expiresIn:r},a!=null&&a.transform?{transform:a.transform}:{}),{headers:this.headers});const l=a!=null&&a.download?`&download=${a.download===!0?"":a.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${l}`)},{data:i,error:null}}catch(n){if(this.shouldThrowOnError)throw n;if($s(n))return{data:null,error:n};throw n}})}createSignedUrls(s,r,a){return He(this,void 0,void 0,function*(){try{const n=yield Qn(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:s},{headers:this.headers}),i=a!=null&&a.download?`&download=${a.download===!0?"":a.download}`:"";return{data:n.map(l=>Object.assign(Object.assign({},l),{signedUrl:l.signedURL?encodeURI(`${this.url}${l.signedURL}${i}`):null})),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if($s(n))return{data:null,error:n};throw n}})}download(s,r){const n=typeof(r==null?void 0:r.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((r==null?void 0:r.transform)||{}),l=i?`?${i}`:"",o=this._getFinalPath(s),c=()=>zh(this.fetch,`${this.url}/${n}/${o}${l}`,{headers:this.headers,noResolveJson:!0});return new Q8(c,this.shouldThrowOnError)}info(s){return He(this,void 0,void 0,function*(){const r=this._getFinalPath(s);try{const a=yield zh(this.fetch,`${this.url}/object/info/${r}`,{headers:this.headers});return{data:Gj(a),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if($s(a))return{data:null,error:a};throw a}})}exists(s){return He(this,void 0,void 0,function*(){const r=this._getFinalPath(s);try{return yield H8(this.fetch,`${this.url}/object/${r}`,{headers:this.headers}),{data:!0,error:null}}catch(a){if(this.shouldThrowOnError)throw a;if($s(a)&&a instanceof zj){const n=a.originalError;if([400,404].includes(n==null?void 0:n.status))return{data:!1,error:a}}throw a}})}getPublicUrl(s,r){const a=this._getFinalPath(s),n=[],i=r!=null&&r.download?`download=${r.download===!0?"":r.download}`:"";i!==""&&n.push(i);const o=typeof(r==null?void 0:r.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((r==null?void 0:r.transform)||{});c!==""&&n.push(c);let d=n.join("&");return d!==""&&(d=`?${d}`),{data:{publicUrl:encodeURI(`${this.url}/${o}/public/${a}${d}`)}}}remove(s){return He(this,void 0,void 0,function*(){try{return{data:yield T1(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:s},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if($s(r))return{data:null,error:r};throw r}})}list(s,r,a){return He(this,void 0,void 0,function*(){try{const n=Object.assign(Object.assign(Object.assign({},J8),r),{prefix:s||""});return{data:yield Qn(this.fetch,`${this.url}/object/list/${this.bucketId}`,n,{headers:this.headers},a),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if($s(n))return{data:null,error:n};throw n}})}listV2(s,r){return He(this,void 0,void 0,function*(){try{const a=Object.assign({},s);return{data:yield Qn(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,a,{headers:this.headers},r),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if($s(a))return{data:null,error:a};throw a}})}encodeMetadata(s){return JSON.stringify(s)}toBase64(s){return typeof Buffer<"u"?Buffer.from(s).toString("base64"):btoa(s)}_getFinalPath(s){return`${this.bucketId}/${s.replace(/^\/+/,"")}`}_removeEmptyFolders(s){return s.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(s){const r=[];return s.width&&r.push(`width=${s.width}`),s.height&&r.push(`height=${s.height}`),s.resize&&r.push(`resize=${s.resize}`),s.format&&r.push(`format=${s.format}`),s.quality&&r.push(`quality=${s.quality}`),r.join("&")}}const xT="2.86.0",gT={"X-Client-Info":`storage-js/${xT}`};class X8{constructor(s,r={},a,n){this.shouldThrowOnError=!1;const i=new URL(s);n!=null&&n.useNewHostname&&/supabase\.(co|in|red)$/.test(i.hostname)&&!i.hostname.includes("storage.supabase.")&&(i.hostname=i.hostname.replace("supabase.","storage.supabase.")),this.url=i.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},gT),r),this.fetch=A1(a)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(s){return He(this,void 0,void 0,function*(){try{const r=this.listBucketOptionsToQueryString(s);return{data:yield zh(this.fetch,`${this.url}/bucket${r}`,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if($s(r))return{data:null,error:r};throw r}})}getBucket(s){return He(this,void 0,void 0,function*(){try{return{data:yield zh(this.fetch,`${this.url}/bucket/${s}`,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if($s(r))return{data:null,error:r};throw r}})}createBucket(s){return He(this,arguments,void 0,function*(r,a={public:!1}){try{return{data:yield Qn(this.fetch,`${this.url}/bucket`,{id:r,name:r,type:a.type,public:a.public,file_size_limit:a.fileSizeLimit,allowed_mime_types:a.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if($s(n))return{data:null,error:n};throw n}})}updateBucket(s,r){return He(this,void 0,void 0,function*(){try{return{data:yield Kj(this.fetch,`${this.url}/bucket/${s}`,{id:s,name:s,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if($s(a))return{data:null,error:a};throw a}})}emptyBucket(s){return He(this,void 0,void 0,function*(){try{return{data:yield Qn(this.fetch,`${this.url}/bucket/${s}/empty`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if($s(r))return{data:null,error:r};throw r}})}deleteBucket(s){return He(this,void 0,void 0,function*(){try{return{data:yield T1(this.fetch,`${this.url}/bucket/${s}`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if($s(r))return{data:null,error:r};throw r}})}listBucketOptionsToQueryString(s){const r={};return s&&("limit"in s&&(r.limit=String(s.limit)),"offset"in s&&(r.offset=String(s.offset)),s.search&&(r.search=s.search),s.sortColumn&&(r.sortColumn=s.sortColumn),s.sortOrder&&(r.sortOrder=s.sortOrder)),Object.keys(r).length>0?"?"+new URLSearchParams(r).toString():""}}var Gh=class extends Error{constructor(t,s){var r;super(t),this.name="IcebergError",this.status=s.status,this.icebergType=s.icebergType,this.icebergCode=s.icebergCode,this.details=s.details,this.isCommitStateUnknown=s.icebergType==="CommitStateUnknownException"||[500,502,504].includes(s.status)&&((r=s.icebergType)==null?void 0:r.includes("CommitState"))===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function e$(t,s,r){const a=new URL(s,t);if(r)for(const[n,i]of Object.entries(r))i!==void 0&&a.searchParams.set(n,i);return a.toString()}async function t$(t){return!t||t.type==="none"?{}:t.type==="bearer"?{Authorization:`Bearer ${t.token}`}:t.type==="header"?{[t.name]:t.value}:t.type==="custom"?await t.getHeaders():{}}function s$(t){const s=t.fetchImpl??globalThis.fetch;return{async request({method:r,path:a,query:n,body:i,headers:l}){const o=e$(t.baseUrl,a,n),c=await t$(t.auth),d=await s(o,{method:r,headers:{...i?{"Content-Type":"application/json"}:{},...c,...l},body:i?JSON.stringify(i):void 0}),u=await d.text(),m=(d.headers.get("content-type")||"").includes("application/json"),p=m&&u?JSON.parse(u):u;if(!d.ok){const x=m?p:void 0,g=x==null?void 0:x.error;throw new Gh((g==null?void 0:g.message)??`Request failed with status ${d.status}`,{status:d.status,icebergType:g==null?void 0:g.type,icebergCode:g==null?void 0:g.code,details:x})}return{status:d.status,headers:d.headers,data:p}}}}function Ep(t){return t.join("")}var r$=class{constructor(t,s=""){this.client=t,this.prefix=s}async listNamespaces(t){const s=t?{parent:Ep(t.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:s})).data.namespaces.map(a=>({namespace:a}))}async createNamespace(t,s){const r={namespace:t.namespace,properties:s==null?void 0:s.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:r})).data}async dropNamespace(t){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Ep(t.namespace)}`})}async loadNamespaceMetadata(t){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Ep(t.namespace)}`})).data.properties}}async namespaceExists(t){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Ep(t.namespace)}`}),!0}catch(s){if(s instanceof Gh&&s.status===404)return!1;throw s}}async createNamespaceIfNotExists(t,s){try{return await this.createNamespace(t,s)}catch(r){if(r instanceof Gh&&r.status===409)return;throw r}}};function hd(t){return t.join("")}var a$=class{constructor(t,s="",r){this.client=t,this.prefix=s,this.accessDelegation=r}async listTables(t){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${hd(t.namespace)}/tables`})).data.identifiers}async createTable(t,s){const r={};return this.accessDelegation&&(r["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${hd(t.namespace)}/tables`,body:s,headers:r})).data.metadata}async updateTable(t,s){const r=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${hd(t.namespace)}/tables/${t.name}`,body:s});return{"metadata-location":r.data["metadata-location"],metadata:r.data.metadata}}async dropTable(t,s){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${hd(t.namespace)}/tables/${t.name}`,query:{purgeRequested:String((s==null?void 0:s.purge)??!1)}})}async loadTable(t){const s={};return this.accessDelegation&&(s["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${hd(t.namespace)}/tables/${t.name}`,headers:s})).data.metadata}async tableExists(t){const s={};this.accessDelegation&&(s["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${hd(t.namespace)}/tables/${t.name}`,headers:s}),!0}catch(r){if(r instanceof Gh&&r.status===404)return!1;throw r}}async createTableIfNotExists(t,s){try{return await this.createTable(t,s)}catch(r){if(r instanceof Gh&&r.status===409)return await this.loadTable({namespace:t.namespace,name:s.name});throw r}}},n$=class{constructor(t){var a;let s="v1";t.catalogName&&(s+=`/${t.catalogName}`);const r=t.baseUrl.endsWith("/")?t.baseUrl:`${t.baseUrl}/`;this.client=s$({baseUrl:r,auth:t.auth,fetchImpl:t.fetch}),this.accessDelegation=(a=t.accessDelegation)==null?void 0:a.join(","),this.namespaceOps=new r$(this.client,s),this.tableOps=new a$(this.client,s,this.accessDelegation)}async listNamespaces(t){return this.namespaceOps.listNamespaces(t)}async createNamespace(t,s){return this.namespaceOps.createNamespace(t,s)}async dropNamespace(t){await this.namespaceOps.dropNamespace(t)}async loadNamespaceMetadata(t){return this.namespaceOps.loadNamespaceMetadata(t)}async listTables(t){return this.tableOps.listTables(t)}async createTable(t,s){return this.tableOps.createTable(t,s)}async updateTable(t,s){return this.tableOps.updateTable(t,s)}async dropTable(t,s){await this.tableOps.dropTable(t,s)}async loadTable(t){return this.tableOps.loadTable(t)}async namespaceExists(t){return this.namespaceOps.namespaceExists(t)}async tableExists(t){return this.tableOps.tableExists(t)}async createNamespaceIfNotExists(t,s){return this.namespaceOps.createNamespaceIfNotExists(t,s)}async createTableIfNotExists(t,s){return this.tableOps.createTableIfNotExists(t,s)}};class i${constructor(s,r={},a){this.shouldThrowOnError=!1,this.url=s.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},gT),r),this.fetch=A1(a)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(s){return He(this,void 0,void 0,function*(){try{return{data:yield Qn(this.fetch,`${this.url}/bucket`,{name:s},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if($s(r))return{data:null,error:r};throw r}})}listBuckets(s){return He(this,void 0,void 0,function*(){try{const r=new URLSearchParams;(s==null?void 0:s.limit)!==void 0&&r.set("limit",s.limit.toString()),(s==null?void 0:s.offset)!==void 0&&r.set("offset",s.offset.toString()),s!=null&&s.sortColumn&&r.set("sortColumn",s.sortColumn),s!=null&&s.sortOrder&&r.set("sortOrder",s.sortOrder),s!=null&&s.search&&r.set("search",s.search);const a=r.toString(),n=a?`${this.url}/bucket?${a}`:`${this.url}/bucket`;return{data:yield zh(this.fetch,n,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if($s(r))return{data:null,error:r};throw r}})}deleteBucket(s){return He(this,void 0,void 0,function*(){try{return{data:yield T1(this.fetch,`${this.url}/bucket/${s}`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if($s(r))return{data:null,error:r};throw r}})}from(s){if(!z8(s))throw new Af("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");return new n$({baseUrl:this.url,catalogName:s,auth:{type:"custom",getHeaders:()=>He(this,void 0,void 0,function*(){return this.headers})},fetch:this.fetch})}}const P1={"X-Client-Info":`storage-js/${xT}`,"Content-Type":"application/json"};class fT extends Error{constructor(s){super(s),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}}function Qa(t){return typeof t=="object"&&t!==null&&"__isStorageVectorsError"in t}class Db extends fT{constructor(s,r,a){super(s),this.name="StorageVectorsApiError",this.status=r,this.statusCode=a}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class l$ extends fT{constructor(s,r){super(s),this.name="StorageVectorsUnknownError",this.originalError=r}}var wC;(function(t){t.InternalError="InternalError",t.S3VectorConflictException="S3VectorConflictException",t.S3VectorNotFoundException="S3VectorNotFoundException",t.S3VectorBucketNotEmpty="S3VectorBucketNotEmpty",t.S3VectorMaxBucketsExceeded="S3VectorMaxBucketsExceeded",t.S3VectorMaxIndexesExceeded="S3VectorMaxIndexesExceeded"})(wC||(wC={}));const R1=t=>t?(...s)=>t(...s):(...s)=>fetch(...s),o$=t=>{if(typeof t!="object"||t===null)return!1;const s=Object.getPrototypeOf(t);return(s===null||s===Object.prototype||Object.getPrototypeOf(s)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},NC=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),c$=(t,s,r)=>He(void 0,void 0,void 0,function*(){if(t&&typeof t=="object"&&"status"in t&&"ok"in t&&typeof t.status=="number"&&!(r!=null&&r.noResolveJson)){const n=t.status||500,i=t;if(typeof i.json=="function")i.json().then(l=>{const o=(l==null?void 0:l.statusCode)||(l==null?void 0:l.code)||n+"";s(new Db(NC(l),n,o))}).catch(()=>{const l=n+"",o=i.statusText||`HTTP ${n} error`;s(new Db(o,n,l))});else{const l=n+"",o=i.statusText||`HTTP ${n} error`;s(new Db(o,n,l))}}else s(new l$(NC(t),t))}),d$=(t,s,r,a)=>{const n={method:t,headers:(s==null?void 0:s.headers)||{}};return a?(o$(a)?(n.headers=Object.assign({"Content-Type":"application/json"},s==null?void 0:s.headers),n.body=JSON.stringify(a)):n.body=a,Object.assign(Object.assign({},n),r)):n};function u$(t,s,r,a,n,i){return He(this,void 0,void 0,function*(){return new Promise((l,o)=>{t(r,d$(s,a,n,i)).then(c=>{if(!c.ok)throw c;if(a!=null&&a.noResolveJson)return c;const d=c.headers.get("content-type");return!d||!d.includes("application/json")?{}:c.json()}).then(c=>l(c)).catch(c=>c$(c,o,a))})})}function Ja(t,s,r,a,n){return He(this,void 0,void 0,function*(){return u$(t,"POST",s,a,n,r)})}class m${constructor(s,r={},a){this.shouldThrowOnError=!1,this.url=s.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},P1),r),this.fetch=R1(a)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(s){return He(this,void 0,void 0,function*(){try{return{data:(yield Ja(this.fetch,`${this.url}/CreateIndex`,s,{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Qa(r))return{data:null,error:r};throw r}})}getIndex(s,r){return He(this,void 0,void 0,function*(){try{return{data:yield Ja(this.fetch,`${this.url}/GetIndex`,{vectorBucketName:s,indexName:r},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Qa(a))return{data:null,error:a};throw a}})}listIndexes(s){return He(this,void 0,void 0,function*(){try{return{data:yield Ja(this.fetch,`${this.url}/ListIndexes`,s,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Qa(r))return{data:null,error:r};throw r}})}deleteIndex(s,r){return He(this,void 0,void 0,function*(){try{return{data:(yield Ja(this.fetch,`${this.url}/DeleteIndex`,{vectorBucketName:s,indexName:r},{headers:this.headers}))||{},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Qa(a))return{data:null,error:a};throw a}})}}class h${constructor(s,r={},a){this.shouldThrowOnError=!1,this.url=s.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},P1),r),this.fetch=R1(a)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(s){return He(this,void 0,void 0,function*(){try{if(s.vectors.length<1||s.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:(yield Ja(this.fetch,`${this.url}/PutVectors`,s,{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Qa(r))return{data:null,error:r};throw r}})}getVectors(s){return He(this,void 0,void 0,function*(){try{return{data:yield Ja(this.fetch,`${this.url}/GetVectors`,s,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Qa(r))return{data:null,error:r};throw r}})}listVectors(s){return He(this,void 0,void 0,function*(){try{if(s.segmentCount!==void 0){if(s.segmentCount<1||s.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(s.segmentIndex!==void 0&&(s.segmentIndex<0||s.segmentIndex>=s.segmentCount))throw new Error(`segmentIndex must be between 0 and ${s.segmentCount-1}`)}return{data:yield Ja(this.fetch,`${this.url}/ListVectors`,s,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Qa(r))return{data:null,error:r};throw r}})}queryVectors(s){return He(this,void 0,void 0,function*(){try{return{data:yield Ja(this.fetch,`${this.url}/QueryVectors`,s,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Qa(r))return{data:null,error:r};throw r}})}deleteVectors(s){return He(this,void 0,void 0,function*(){try{if(s.keys.length<1||s.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:(yield Ja(this.fetch,`${this.url}/DeleteVectors`,s,{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Qa(r))return{data:null,error:r};throw r}})}}class p${constructor(s,r={},a){this.shouldThrowOnError=!1,this.url=s.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},P1),r),this.fetch=R1(a)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(s){return He(this,void 0,void 0,function*(){try{return{data:(yield Ja(this.fetch,`${this.url}/CreateVectorBucket`,{vectorBucketName:s},{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Qa(r))return{data:null,error:r};throw r}})}getBucket(s){return He(this,void 0,void 0,function*(){try{return{data:yield Ja(this.fetch,`${this.url}/GetVectorBucket`,{vectorBucketName:s},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Qa(r))return{data:null,error:r};throw r}})}listBuckets(){return He(this,arguments,void 0,function*(s={}){try{return{data:yield Ja(this.fetch,`${this.url}/ListVectorBuckets`,s,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Qa(r))return{data:null,error:r};throw r}})}deleteBucket(s){return He(this,void 0,void 0,function*(){try{return{data:(yield Ja(this.fetch,`${this.url}/DeleteVectorBucket`,{vectorBucketName:s},{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Qa(r))return{data:null,error:r};throw r}})}}class x$ extends p${constructor(s,r={}){super(s,r.headers||{},r.fetch)}from(s){return new g$(this.url,this.headers,s,this.fetch)}createBucket(s){const r=Object.create(null,{createBucket:{get:()=>super.createBucket}});return He(this,void 0,void 0,function*(){return r.createBucket.call(this,s)})}getBucket(s){const r=Object.create(null,{getBucket:{get:()=>super.getBucket}});return He(this,void 0,void 0,function*(){return r.getBucket.call(this,s)})}listBuckets(){const s=Object.create(null,{listBuckets:{get:()=>super.listBuckets}});return He(this,arguments,void 0,function*(r={}){return s.listBuckets.call(this,r)})}deleteBucket(s){const r=Object.create(null,{deleteBucket:{get:()=>super.deleteBucket}});return He(this,void 0,void 0,function*(){return r.deleteBucket.call(this,s)})}}class g$ extends m${constructor(s,r,a,n){super(s,r,n),this.vectorBucketName=a}createIndex(s){const r=Object.create(null,{createIndex:{get:()=>super.createIndex}});return He(this,void 0,void 0,function*(){return r.createIndex.call(this,Object.assign(Object.assign({},s),{vectorBucketName:this.vectorBucketName}))})}listIndexes(){const s=Object.create(null,{listIndexes:{get:()=>super.listIndexes}});return He(this,arguments,void 0,function*(r={}){return s.listIndexes.call(this,Object.assign(Object.assign({},r),{vectorBucketName:this.vectorBucketName}))})}getIndex(s){const r=Object.create(null,{getIndex:{get:()=>super.getIndex}});return He(this,void 0,void 0,function*(){return r.getIndex.call(this,this.vectorBucketName,s)})}deleteIndex(s){const r=Object.create(null,{deleteIndex:{get:()=>super.deleteIndex}});return He(this,void 0,void 0,function*(){return r.deleteIndex.call(this,this.vectorBucketName,s)})}index(s){return new f$(this.url,this.headers,this.vectorBucketName,s,this.fetch)}}class f$ extends h${constructor(s,r,a,n,i){super(s,r,i),this.vectorBucketName=a,this.indexName=n}putVectors(s){const r=Object.create(null,{putVectors:{get:()=>super.putVectors}});return He(this,void 0,void 0,function*(){return r.putVectors.call(this,Object.assign(Object.assign({},s),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}getVectors(s){const r=Object.create(null,{getVectors:{get:()=>super.getVectors}});return He(this,void 0,void 0,function*(){return r.getVectors.call(this,Object.assign(Object.assign({},s),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}listVectors(){const s=Object.create(null,{listVectors:{get:()=>super.listVectors}});return He(this,arguments,void 0,function*(r={}){return s.listVectors.call(this,Object.assign(Object.assign({},r),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}queryVectors(s){const r=Object.create(null,{queryVectors:{get:()=>super.queryVectors}});return He(this,void 0,void 0,function*(){return r.queryVectors.call(this,Object.assign(Object.assign({},s),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}deleteVectors(s){const r=Object.create(null,{deleteVectors:{get:()=>super.deleteVectors}});return He(this,void 0,void 0,function*(){return r.deleteVectors.call(this,Object.assign(Object.assign({},s),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}}class y$ extends X8{constructor(s,r={},a,n){super(s,r,a,n)}from(s){return new Z8(this.url,this.headers,s,this.fetch)}get vectors(){return new x$(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new i$(this.url+"/iceberg",this.headers,this.fetch)}}const b$="2.86.0";let Gm="";typeof Deno<"u"?Gm="deno":typeof document<"u"?Gm="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Gm="react-native":Gm="node";const v$={"X-Client-Info":`supabase-js-${Gm}/${b$}`},j$={headers:v$},w$={schema:"public"},N$={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},k$={},C$=t=>t?(...s)=>t(...s):(...s)=>fetch(...s),S$=()=>Headers,_$=(t,s,r)=>{const a=C$(r),n=S$();return async(i,l)=>{var o;const c=(o=await s())!==null&&o!==void 0?o:t;let d=new n(l==null?void 0:l.headers);return d.has("apikey")||d.set("apikey",t),d.has("Authorization")||d.set("Authorization",`Bearer ${c}`),a(i,Object.assign(Object.assign({},l),{headers:d}))}};function E$(t){return t.endsWith("/")?t:t+"/"}function A$(t,s){var r,a;const{db:n,auth:i,realtime:l,global:o}=t,{db:c,auth:d,realtime:u,global:m}=s,p={db:Object.assign(Object.assign({},c),n),auth:Object.assign(Object.assign({},d),i),realtime:Object.assign(Object.assign({},u),l),storage:{},global:Object.assign(Object.assign(Object.assign({},m),o),{headers:Object.assign(Object.assign({},(r=m==null?void 0:m.headers)!==null&&r!==void 0?r:{}),(a=o==null?void 0:o.headers)!==null&&a!==void 0?a:{})}),accessToken:async()=>""};return t.accessToken?p.accessToken=t.accessToken:delete p.accessToken,p}function T$(t){const s=t==null?void 0:t.trim();if(!s)throw new Error("supabaseUrl is required.");if(!s.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(E$(s))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const yT="2.86.0",Td=30*1e3,Hj=3,Ib=Hj*Td,P$="http://localhost:9999",R$="supabase.auth.token",D$={"X-Client-Info":`gotrue-js/${yT}`},Yj="X-Supabase-Api-Version",bT={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},I$=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,M$=10*60*1e3;class Kh extends Error{constructor(s,r,a){super(s),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=a}}function tt(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class L$ extends Kh{constructor(s,r,a){super(s,r,a),this.name="AuthApiError",this.status=r,this.code=a}}function F$(t){return tt(t)&&t.name==="AuthApiError"}class pc extends Kh{constructor(s,r){super(s),this.name="AuthUnknownError",this.originalError=r}}class Uo extends Kh{constructor(s,r,a,n){super(s,a,n),this.name=r,this.status=a}}class Ka extends Uo{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function O$(t){return tt(t)&&t.name==="AuthSessionMissingError"}class pd extends Uo{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Ap extends Uo{constructor(s){super(s,"AuthInvalidCredentialsError",400,void 0)}}class Tp extends Uo{constructor(s,r=null){super(s,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function B$(t){return tt(t)&&t.name==="AuthImplicitGrantRedirectError"}class kC extends Uo{constructor(s,r=null){super(s,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Qj extends Uo{constructor(s,r){super(s,"AuthRetryableFetchError",r,void 0)}}function Mb(t){return tt(t)&&t.name==="AuthRetryableFetchError"}class CC extends Uo{constructor(s,r,a){super(s,"AuthWeakPasswordError",r,"weak_password"),this.reasons=a}}class Jj extends Uo{constructor(s){super(s,"AuthInvalidJwtError",400,"invalid_jwt")}}const jg="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),SC=` 	
\r=`.split(""),$$=(()=>{const t=new Array(128);for(let s=0;s<t.length;s+=1)t[s]=-1;for(let s=0;s<SC.length;s+=1)t[SC[s].charCodeAt(0)]=-2;for(let s=0;s<jg.length;s+=1)t[jg[s].charCodeAt(0)]=s;return t})();function _C(t,s,r){if(t!==null)for(s.queue=s.queue<<8|t,s.queuedBits+=8;s.queuedBits>=6;){const a=s.queue>>s.queuedBits-6&63;r(jg[a]),s.queuedBits-=6}else if(s.queuedBits>0)for(s.queue=s.queue<<6-s.queuedBits,s.queuedBits=6;s.queuedBits>=6;){const a=s.queue>>s.queuedBits-6&63;r(jg[a]),s.queuedBits-=6}}function vT(t,s,r){const a=$$[t];if(a>-1)for(s.queue=s.queue<<6|a,s.queuedBits+=6;s.queuedBits>=8;)r(s.queue>>s.queuedBits-8&255),s.queuedBits-=8;else{if(a===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function EC(t){const s=[],r=l=>{s.push(String.fromCodePoint(l))},a={utf8seq:0,codepoint:0},n={queue:0,queuedBits:0},i=l=>{q$(l,a,r)};for(let l=0;l<t.length;l+=1)vT(t.charCodeAt(l),n,i);return s.join("")}function U$(t,s){if(t<=127){s(t);return}else if(t<=2047){s(192|t>>6),s(128|t&63);return}else if(t<=65535){s(224|t>>12),s(128|t>>6&63),s(128|t&63);return}else if(t<=1114111){s(240|t>>18),s(128|t>>12&63),s(128|t>>6&63),s(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function V$(t,s){for(let r=0;r<t.length;r+=1){let a=t.charCodeAt(r);if(a>55295&&a<=56319){const n=(a-55296)*1024&65535;a=(t.charCodeAt(r+1)-56320&65535|n)+65536,r+=1}U$(a,s)}}function q$(t,s,r){if(s.utf8seq===0){if(t<=127){r(t);return}for(let a=1;a<6;a+=1)if(!(t>>7-a&1)){s.utf8seq=a;break}if(s.utf8seq===2)s.codepoint=t&31;else if(s.utf8seq===3)s.codepoint=t&15;else if(s.utf8seq===4)s.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");s.utf8seq-=1}else if(s.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");s.codepoint=s.codepoint<<6|t&63,s.utf8seq-=1,s.utf8seq===0&&r(s.codepoint)}}function iu(t){const s=[],r={queue:0,queuedBits:0},a=n=>{s.push(n)};for(let n=0;n<t.length;n+=1)vT(t.charCodeAt(n),r,a);return new Uint8Array(s)}function W$(t){const s=[];return V$(t,r=>s.push(r)),new Uint8Array(s)}function jc(t){const s=[],r={queue:0,queuedBits:0},a=n=>{s.push(n)};return t.forEach(n=>_C(n,r,a)),_C(null,r,a),s.join("")}function z$(t){return Math.round(Date.now()/1e3)+t}function G$(){return Symbol("auth-callback")}const Wr=()=>typeof window<"u"&&typeof document<"u",Jo={tested:!1,writable:!1},jT=()=>{if(!Wr())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Jo.tested)return Jo.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),Jo.tested=!0,Jo.writable=!0}catch{Jo.tested=!0,Jo.writable=!1}return Jo.writable};function K$(t){const s={},r=new URL(t);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((n,i)=>{s[i]=n})}catch{}return r.searchParams.forEach((a,n)=>{s[n]=a}),s}const wT=t=>t?(...s)=>t(...s):(...s)=>fetch(...s),H$=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",Pd=async(t,s,r)=>{await t.setItem(s,JSON.stringify(r))},Zo=async(t,s)=>{const r=await t.getItem(s);if(!r)return null;try{return JSON.parse(r)}catch{return r}},Il=async(t,s)=>{await t.removeItem(s)};class Tf{constructor(){this.promise=new Tf.promiseConstructor((s,r)=>{this.resolve=s,this.reject=r})}}Tf.promiseConstructor=Promise;function Lb(t){const s=t.split(".");if(s.length!==3)throw new Jj("Invalid JWT structure");for(let a=0;a<s.length;a++)if(!I$.test(s[a]))throw new Jj("JWT not in base64url format");return{header:JSON.parse(EC(s[0])),payload:JSON.parse(EC(s[1])),signature:iu(s[2]),raw:{header:s[0],payload:s[1]}}}async function Y$(t){return await new Promise(s=>{setTimeout(()=>s(null),t)})}function Q$(t,s){return new Promise((a,n)=>{(async()=>{for(let i=0;i<1/0;i++)try{const l=await t(i);if(!s(i,null,l)){a(l);return}}catch(l){if(!s(i,l)){n(l);return}}})()})}function J$(t){return("0"+t.toString(16)).substr(-2)}function Z$(){const s=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",a=r.length;let n="";for(let i=0;i<56;i++)n+=r.charAt(Math.floor(Math.random()*a));return n}return crypto.getRandomValues(s),Array.from(s,J$).join("")}async function X$(t){const r=new TextEncoder().encode(t),a=await crypto.subtle.digest("SHA-256",r),n=new Uint8Array(a);return Array.from(n).map(i=>String.fromCharCode(i)).join("")}async function eU(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const r=await X$(t);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function xd(t,s,r=!1){const a=Z$();let n=a;r&&(n+="/PASSWORD_RECOVERY"),await Pd(t,`${s}-code-verifier`,n);const i=await eU(a);return[i,a===i?"plain":"s256"]}const tU=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function sU(t){const s=t.headers.get(Yj);if(!s||!s.match(tU))return null;try{return new Date(`${s}T00:00:00.0Z`)}catch{return null}}function rU(t){if(!t)throw new Error("Missing exp claim");const s=Math.floor(Date.now()/1e3);if(t<=s)throw new Error("JWT has expired")}function aU(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const nU=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function gd(t){if(!nU.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Fb(){const t={};return new Proxy(t,{get:(s,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const a=r.toString();if(a==="Symbol(Symbol.toPrimitive)"||a==="Symbol(Symbol.toStringTag)"||a==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(s,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(s,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function iU(t,s){return new Proxy(t,{get:(r,a,n)=>{if(a==="__isInsecureUserWarningProxy")return!0;if(typeof a=="symbol"){const i=a.toString();if(i==="Symbol(Symbol.toPrimitive)"||i==="Symbol(Symbol.toStringTag)"||i==="Symbol(util.inspect.custom)"||i==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(r,a,n)}return!s.value&&typeof a=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),s.value=!0),Reflect.get(r,a,n)}})}function AC(t){return JSON.parse(JSON.stringify(t))}const ic=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),lU=[502,503,504];async function TC(t){var s;if(!H$(t))throw new Qj(ic(t),0);if(lU.includes(t.status))throw new Qj(ic(t),t.status);let r;try{r=await t.json()}catch(i){throw new pc(ic(i),i)}let a;const n=sU(t);if(n&&n.getTime()>=bT["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?a=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(a=r.error_code),a){if(a==="weak_password")throw new CC(ic(r),t.status,((s=r.weak_password)===null||s===void 0?void 0:s.reasons)||[]);if(a==="session_not_found")throw new Ka}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((i,l)=>i&&typeof l=="string",!0))throw new CC(ic(r),t.status,r.weak_password.reasons);throw new L$(ic(r),t.status||500,a)}const oU=(t,s,r,a)=>{const n={method:t,headers:(s==null?void 0:s.headers)||{}};return t==="GET"?n:(n.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},s==null?void 0:s.headers),n.body=JSON.stringify(a),Object.assign(Object.assign({},n),r))};async function dt(t,s,r,a){var n;const i=Object.assign({},a==null?void 0:a.headers);i[Yj]||(i[Yj]=bT["2024-01-01"].name),a!=null&&a.jwt&&(i.Authorization=`Bearer ${a.jwt}`);const l=(n=a==null?void 0:a.query)!==null&&n!==void 0?n:{};a!=null&&a.redirectTo&&(l.redirect_to=a.redirectTo);const o=Object.keys(l).length?"?"+new URLSearchParams(l).toString():"",c=await cU(t,s,r+o,{headers:i,noResolveJson:a==null?void 0:a.noResolveJson},{},a==null?void 0:a.body);return a!=null&&a.xform?a==null?void 0:a.xform(c):{data:Object.assign({},c),error:null}}async function cU(t,s,r,a,n,i){const l=oU(s,a,n,i);let o;try{o=await t(r,Object.assign({},l))}catch(c){throw console.error(c),new Qj(ic(c),0)}if(o.ok||await TC(o),a!=null&&a.noResolveJson)return o;try{return await o.json()}catch(c){await TC(c)}}function Hn(t){var s;let r=null;mU(t)&&(r=Object.assign({},t),t.expires_at||(r.expires_at=z$(t.expires_in)));const a=(s=t.user)!==null&&s!==void 0?s:t;return{data:{session:r,user:a},error:null}}function PC(t){const s=Hn(t);return!s.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((r,a)=>r&&typeof a=="string",!0)&&(s.data.weak_password=t.weak_password),s}function Ql(t){var s;return{data:{user:(s=t.user)!==null&&s!==void 0?s:t},error:null}}function dU(t){return{data:t,error:null}}function uU(t){const{action_link:s,email_otp:r,hashed_token:a,redirect_to:n,verification_type:i}=t,l=rm(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),o={action_link:s,email_otp:r,hashed_token:a,redirect_to:n,verification_type:i},c=Object.assign({},l);return{data:{properties:o,user:c},error:null}}function RC(t){return t}function mU(t){return t.access_token&&t.refresh_token&&t.expires_in}const Ob=["global","local","others"];class hU{constructor({url:s="",headers:r={},fetch:a}){this.url=s,this.headers=r,this.fetch=wT(a),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(s,r=Ob[0]){if(Ob.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Ob.join(", ")}`);try{return await dt(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:s,noResolveJson:!0}),{data:null,error:null}}catch(a){if(tt(a))return{data:null,error:a};throw a}}async inviteUserByEmail(s,r={}){try{return await dt(this.fetch,"POST",`${this.url}/invite`,{body:{email:s,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:Ql})}catch(a){if(tt(a))return{data:{user:null},error:a};throw a}}async generateLink(s){try{const{options:r}=s,a=rm(s,["options"]),n=Object.assign(Object.assign({},a),r);return"newEmail"in a&&(n.new_email=a==null?void 0:a.newEmail,delete n.newEmail),await dt(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:n,headers:this.headers,xform:uU,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(tt(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(s){try{return await dt(this.fetch,"POST",`${this.url}/admin/users`,{body:s,headers:this.headers,xform:Ql})}catch(r){if(tt(r))return{data:{user:null},error:r};throw r}}async listUsers(s){var r,a,n,i,l,o,c;try{const d={nextPage:null,lastPage:0,total:0},u=await dt(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(a=(r=s==null?void 0:s.page)===null||r===void 0?void 0:r.toString())!==null&&a!==void 0?a:"",per_page:(i=(n=s==null?void 0:s.perPage)===null||n===void 0?void 0:n.toString())!==null&&i!==void 0?i:""},xform:RC});if(u.error)throw u.error;const m=await u.json(),p=(l=u.headers.get("x-total-count"))!==null&&l!==void 0?l:0,x=(c=(o=u.headers.get("link"))===null||o===void 0?void 0:o.split(","))!==null&&c!==void 0?c:[];return x.length>0&&(x.forEach(g=>{const f=parseInt(g.split(";")[0].split("=")[1].substring(0,1)),b=JSON.parse(g.split(";")[1].split("=")[1]);d[`${b}Page`]=f}),d.total=parseInt(p)),{data:Object.assign(Object.assign({},m),d),error:null}}catch(d){if(tt(d))return{data:{users:[]},error:d};throw d}}async getUserById(s){gd(s);try{return await dt(this.fetch,"GET",`${this.url}/admin/users/${s}`,{headers:this.headers,xform:Ql})}catch(r){if(tt(r))return{data:{user:null},error:r};throw r}}async updateUserById(s,r){gd(s);try{return await dt(this.fetch,"PUT",`${this.url}/admin/users/${s}`,{body:r,headers:this.headers,xform:Ql})}catch(a){if(tt(a))return{data:{user:null},error:a};throw a}}async deleteUser(s,r=!1){gd(s);try{return await dt(this.fetch,"DELETE",`${this.url}/admin/users/${s}`,{headers:this.headers,body:{should_soft_delete:r},xform:Ql})}catch(a){if(tt(a))return{data:{user:null},error:a};throw a}}async _listFactors(s){gd(s.userId);try{const{data:r,error:a}=await dt(this.fetch,"GET",`${this.url}/admin/users/${s.userId}/factors`,{headers:this.headers,xform:n=>({data:{factors:n},error:null})});return{data:r,error:a}}catch(r){if(tt(r))return{data:null,error:r};throw r}}async _deleteFactor(s){gd(s.userId),gd(s.id);try{return{data:await dt(this.fetch,"DELETE",`${this.url}/admin/users/${s.userId}/factors/${s.id}`,{headers:this.headers}),error:null}}catch(r){if(tt(r))return{data:null,error:r};throw r}}async _listOAuthClients(s){var r,a,n,i,l,o,c;try{const d={nextPage:null,lastPage:0,total:0},u=await dt(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(a=(r=s==null?void 0:s.page)===null||r===void 0?void 0:r.toString())!==null&&a!==void 0?a:"",per_page:(i=(n=s==null?void 0:s.perPage)===null||n===void 0?void 0:n.toString())!==null&&i!==void 0?i:""},xform:RC});if(u.error)throw u.error;const m=await u.json(),p=(l=u.headers.get("x-total-count"))!==null&&l!==void 0?l:0,x=(c=(o=u.headers.get("link"))===null||o===void 0?void 0:o.split(","))!==null&&c!==void 0?c:[];return x.length>0&&(x.forEach(g=>{const f=parseInt(g.split(";")[0].split("=")[1].substring(0,1)),b=JSON.parse(g.split(";")[1].split("=")[1]);d[`${b}Page`]=f}),d.total=parseInt(p)),{data:Object.assign(Object.assign({},m),d),error:null}}catch(d){if(tt(d))return{data:{clients:[]},error:d};throw d}}async _createOAuthClient(s){try{return await dt(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:s,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(tt(r))return{data:null,error:r};throw r}}async _getOAuthClient(s){try{return await dt(this.fetch,"GET",`${this.url}/admin/oauth/clients/${s}`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(tt(r))return{data:null,error:r};throw r}}async _updateOAuthClient(s,r){try{return await dt(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${s}`,{body:r,headers:this.headers,xform:a=>({data:a,error:null})})}catch(a){if(tt(a))return{data:null,error:a};throw a}}async _deleteOAuthClient(s){try{return await dt(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${s}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(r){if(tt(r))return{data:null,error:r};throw r}}async _regenerateOAuthClientSecret(s){try{return await dt(this.fetch,"POST",`${this.url}/admin/oauth/clients/${s}/regenerate_secret`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(tt(r))return{data:null,error:r};throw r}}}function DC(t={}){return{getItem:s=>t[s]||null,setItem:(s,r)=>{t[s]=r},removeItem:s=>{delete t[s]}}}const fd={debug:!!(globalThis&&jT()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class NT extends Error{constructor(s){super(s),this.isAcquireTimeout=!0}}class pU extends NT{}async function xU(t,s,r){fd.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,s);const a=new globalThis.AbortController;return s>0&&setTimeout(()=>{a.abort(),fd.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},s),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,s===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:a.signal},async n=>{if(n){fd.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,n.name);try{return await r()}finally{fd.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,n.name)}}else{if(s===0)throw fd.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new pU(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(fd.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}function gU(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function kT(t){if(!/^0x[a-fA-F0-9]{40}$/.test(t))throw new Error(`@supabase/auth-js: Address "${t}" is invalid.`);return t.toLowerCase()}function fU(t){return parseInt(t,16)}function yU(t){const s=new TextEncoder().encode(t);return"0x"+Array.from(s,a=>a.toString(16).padStart(2,"0")).join("")}function bU(t){var s;const{chainId:r,domain:a,expirationTime:n,issuedAt:i=new Date,nonce:l,notBefore:o,requestId:c,resources:d,scheme:u,uri:m,version:p}=t;{if(!Number.isInteger(r))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${r}`);if(!a)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(l&&l.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${l}`);if(!m)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(p!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${p}`);if(!((s=t.statement)===null||s===void 0)&&s.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${t.statement}`)}const x=kT(t.address),g=u?`${u}://${a}`:a,f=t.statement?`${t.statement}
`:"",b=`${g} wants you to sign in with your Ethereum account:
${x}

${f}`;let j=`URI: ${m}
Version: ${p}
Chain ID: ${r}${l?`
Nonce: ${l}`:""}
Issued At: ${i.toISOString()}`;if(n&&(j+=`
Expiration Time: ${n.toISOString()}`),o&&(j+=`
Not Before: ${o.toISOString()}`),c&&(j+=`
Request ID: ${c}`),d){let v=`
Resources:`;for(const w of d){if(!w||typeof w!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${w}`);v+=`
- ${w}`}j+=v}return`${b}
${j}`}class pr extends Error{constructor({message:s,code:r,cause:a,name:n}){var i;super(s,{cause:a}),this.__isWebAuthnError=!0,this.name=(i=n??(a instanceof Error?a.name:void 0))!==null&&i!==void 0?i:"Unknown Error",this.code=r}}class wg extends pr{constructor(s,r){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r,message:s}),this.name="WebAuthnUnknownError",this.originalError=r}}function vU({error:t,options:s}){var r,a,n;const{publicKey:i}=s;if(!i)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(s.signal instanceof AbortSignal)return new pr({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else if(t.name==="ConstraintError"){if(((r=i.authenticatorSelection)===null||r===void 0?void 0:r.requireResidentKey)===!0)return new pr({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:t});if(s.mediation==="conditional"&&((a=i.authenticatorSelection)===null||a===void 0?void 0:a.userVerification)==="required")return new pr({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:t});if(((n=i.authenticatorSelection)===null||n===void 0?void 0:n.userVerification)==="required")return new pr({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:t})}else{if(t.name==="InvalidStateError")return new pr({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:t});if(t.name==="NotAllowedError")return new pr({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="NotSupportedError")return i.pubKeyCredParams.filter(o=>o.type==="public-key").length===0?new pr({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:t}):new pr({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:t});if(t.name==="SecurityError"){const l=window.location.hostname;if(CT(l)){if(i.rp.id!==l)return new pr({message:`The RP ID "${i.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new pr({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="TypeError"){if(i.user.id.byteLength<1||i.user.id.byteLength>64)return new pr({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:t})}else if(t.name==="UnknownError")return new pr({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new pr({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}function jU({error:t,options:s}){const{publicKey:r}=s;if(!r)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(s.signal instanceof AbortSignal)return new pr({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else{if(t.name==="NotAllowedError")return new pr({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="SecurityError"){const a=window.location.hostname;if(CT(a)){if(r.rpId!==a)return new pr({message:`The RP ID "${r.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new pr({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="UnknownError")return new pr({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new pr({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}class wU{createNewAbortSignal(){if(this.controller){const r=new Error("Cancelling existing WebAuthn API call for new one");r.name="AbortError",this.controller.abort(r)}const s=new AbortController;return this.controller=s,s.signal}cancelCeremony(){if(this.controller){const s=new Error("Manually cancelling existing WebAuthn API call");s.name="AbortError",this.controller.abort(s),this.controller=void 0}}}const NU=new wU;function kU(t){if(!t)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(t);const{challenge:s,user:r,excludeCredentials:a}=t,n=rm(t,["challenge","user","excludeCredentials"]),i=iu(s).buffer,l=Object.assign(Object.assign({},r),{id:iu(r.id).buffer}),o=Object.assign(Object.assign({},n),{challenge:i,user:l});if(a&&a.length>0){o.excludeCredentials=new Array(a.length);for(let c=0;c<a.length;c++){const d=a[c];o.excludeCredentials[c]=Object.assign(Object.assign({},d),{id:iu(d.id).buffer,type:d.type||"public-key",transports:d.transports})}}return o}function CU(t){if(!t)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(t);const{challenge:s,allowCredentials:r}=t,a=rm(t,["challenge","allowCredentials"]),n=iu(s).buffer,i=Object.assign(Object.assign({},a),{challenge:n});if(r&&r.length>0){i.allowCredentials=new Array(r.length);for(let l=0;l<r.length;l++){const o=r[l];i.allowCredentials[l]=Object.assign(Object.assign({},o),{id:iu(o.id).buffer,type:o.type||"public-key",transports:o.transports})}}return i}function SU(t){var s;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const r=t;return{id:t.id,rawId:t.id,response:{attestationObject:jc(new Uint8Array(t.response.attestationObject)),clientDataJSON:jc(new Uint8Array(t.response.clientDataJSON))},type:"public-key",clientExtensionResults:t.getClientExtensionResults(),authenticatorAttachment:(s=r.authenticatorAttachment)!==null&&s!==void 0?s:void 0}}function _U(t){var s;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const r=t,a=t.getClientExtensionResults(),n=t.response;return{id:t.id,rawId:t.id,response:{authenticatorData:jc(new Uint8Array(n.authenticatorData)),clientDataJSON:jc(new Uint8Array(n.clientDataJSON)),signature:jc(new Uint8Array(n.signature)),userHandle:n.userHandle?jc(new Uint8Array(n.userHandle)):void 0},type:"public-key",clientExtensionResults:a,authenticatorAttachment:(s=r.authenticatorAttachment)!==null&&s!==void 0?s:void 0}}function CT(t){return t==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(t)}function IC(){var t,s;return!!(Wr()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.create)=="function"&&typeof((s=navigator==null?void 0:navigator.credentials)===null||s===void 0?void 0:s.get)=="function")}async function EU(t){try{const s=await navigator.credentials.create(t);return s?s instanceof PublicKeyCredential?{data:s,error:null}:{data:null,error:new wg("Browser returned unexpected credential type",s)}:{data:null,error:new wg("Empty credential response",s)}}catch(s){return{data:null,error:vU({error:s,options:t})}}}async function AU(t){try{const s=await navigator.credentials.get(t);return s?s instanceof PublicKeyCredential?{data:s,error:null}:{data:null,error:new wg("Browser returned unexpected credential type",s)}:{data:null,error:new wg("Empty credential response",s)}}catch(s){return{data:null,error:jU({error:s,options:t})}}}const TU={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},PU={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function Ng(...t){const s=n=>n!==null&&typeof n=="object"&&!Array.isArray(n),r=n=>n instanceof ArrayBuffer||ArrayBuffer.isView(n),a={};for(const n of t)if(n)for(const i in n){const l=n[i];if(l!==void 0)if(Array.isArray(l))a[i]=l;else if(r(l))a[i]=l;else if(s(l)){const o=a[i];s(o)?a[i]=Ng(o,l):a[i]=Ng(l)}else a[i]=l}return a}function RU(t,s){return Ng(TU,t,s||{})}function DU(t,s){return Ng(PU,t,s||{})}class IU{constructor(s){this.client=s,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(s){return this.client.mfa.enroll(Object.assign(Object.assign({},s),{factorType:"webauthn"}))}async _challenge({factorId:s,webauthn:r,friendlyName:a,signal:n},i){try{const{data:l,error:o}=await this.client.mfa.challenge({factorId:s,webauthn:r});if(!l)return{data:null,error:o};const c=n??NU.createNewAbortSignal();if(l.webauthn.type==="create"){const{user:d}=l.webauthn.credential_options.publicKey;d.name||(d.name=`${d.id}:${a}`),d.displayName||(d.displayName=d.name)}switch(l.webauthn.type){case"create":{const d=RU(l.webauthn.credential_options.publicKey,i==null?void 0:i.create),{data:u,error:m}=await EU({publicKey:d,signal:c});return u?{data:{factorId:s,challengeId:l.id,webauthn:{type:l.webauthn.type,credential_response:u}},error:null}:{data:null,error:m}}case"request":{const d=DU(l.webauthn.credential_options.publicKey,i==null?void 0:i.request),{data:u,error:m}=await AU(Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:d,signal:c}));return u?{data:{factorId:s,challengeId:l.id,webauthn:{type:l.webauthn.type,credential_response:u}},error:null}:{data:null,error:m}}}}catch(l){return tt(l)?{data:null,error:l}:{data:null,error:new pc("Unexpected error in challenge",l)}}}async _verify({challengeId:s,factorId:r,webauthn:a}){return this.client.mfa.verify({factorId:r,challengeId:s,webauthn:a})}async _authenticate({factorId:s,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:a=typeof window<"u"?[window.location.origin]:void 0,signal:n}={}},i){if(!r)return{data:null,error:new Kh("rpId is required for WebAuthn authentication")};try{if(!IC())return{data:null,error:new pc("Browser does not support WebAuthn",null)};const{data:l,error:o}=await this.challenge({factorId:s,webauthn:{rpId:r,rpOrigins:a},signal:n},{request:i});if(!l)return{data:null,error:o};const{webauthn:c}=l;return this._verify({factorId:s,challengeId:l.challengeId,webauthn:{type:c.type,rpId:r,rpOrigins:a,credential_response:c.credential_response}})}catch(l){return tt(l)?{data:null,error:l}:{data:null,error:new pc("Unexpected error in authenticate",l)}}}async _register({friendlyName:s,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:a=typeof window<"u"?[window.location.origin]:void 0,signal:n}={}},i){if(!r)return{data:null,error:new Kh("rpId is required for WebAuthn registration")};try{if(!IC())return{data:null,error:new pc("Browser does not support WebAuthn",null)};const{data:l,error:o}=await this._enroll({friendlyName:s});if(!l)return await this.client.mfa.listFactors().then(u=>{var m;return(m=u.data)===null||m===void 0?void 0:m.all.find(p=>p.factor_type==="webauthn"&&p.friendly_name===s&&p.status!=="unverified")}).then(u=>u?this.client.mfa.unenroll({factorId:u==null?void 0:u.id}):void 0),{data:null,error:o};const{data:c,error:d}=await this._challenge({factorId:l.id,friendlyName:l.friendly_name,webauthn:{rpId:r,rpOrigins:a},signal:n},{create:i});return c?this._verify({factorId:l.id,challengeId:c.challengeId,webauthn:{rpId:r,rpOrigins:a,type:c.webauthn.type,credential_response:c.webauthn.credential_response}}):{data:null,error:d}}catch(l){return tt(l)?{data:null,error:l}:{data:null,error:new pc("Unexpected error in register",l)}}}}gU();const MU={url:P$,storageKey:R$,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:D$,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function MC(t,s,r){return await r()}const yd={};class Hh{get jwks(){var s,r;return(r=(s=yd[this.storageKey])===null||s===void 0?void 0:s.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(s){yd[this.storageKey]=Object.assign(Object.assign({},yd[this.storageKey]),{jwks:s})}get jwks_cached_at(){var s,r;return(r=(s=yd[this.storageKey])===null||s===void 0?void 0:s.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(s){yd[this.storageKey]=Object.assign(Object.assign({},yd[this.storageKey]),{cachedAt:s})}constructor(s){var r,a,n;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const i=Object.assign(Object.assign({},MU),s);if(this.storageKey=i.storageKey,this.instanceID=(r=Hh.nextInstanceID[this.storageKey])!==null&&r!==void 0?r:0,Hh.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!i.debug,typeof i.debug=="function"&&(this.logger=i.debug),this.instanceID>0&&Wr()){const l=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(l),this.logDebugMessages&&console.trace(l)}if(this.persistSession=i.persistSession,this.autoRefreshToken=i.autoRefreshToken,this.admin=new hU({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=wT(i.fetch),this.lock=i.lock||MC,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,this.hasCustomAuthorizationHeader=i.hasCustomAuthorizationHeader,this.throwOnError=i.throwOnError,i.lock?this.lock=i.lock:Wr()&&(!((a=globalThis==null?void 0:globalThis.navigator)===null||a===void 0)&&a.locks)?this.lock=xU:this.lock=MC,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new IU(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(i.storage?this.storage=i.storage:jT()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=DC(this.memoryStorage)),i.userStorage&&(this.userStorage=i.userStorage)):(this.memoryStorage={},this.storage=DC(this.memoryStorage)),Wr()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(l){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",l)}(n=this.broadcastChannel)===null||n===void 0||n.addEventListener("message",async l=>{this._debug("received broadcast notification from other tab or client",l),await this._notifyAllSubscribers(l.data.event,l.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(s){if(this.throwOnError&&s&&s.error)throw s.error;return s}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${yT}) ${new Date().toISOString()}`}_debug(...s){return this.logDebugMessages&&this.logger(this._logPrefix(),...s),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var s;try{let r={},a="none";if(Wr()&&(r=K$(window.location.href),this._isImplicitGrantCallback(r)?a="implicit":await this._isPKCECallback(r)&&(a="pkce")),Wr()&&this.detectSessionInUrl&&a!=="none"){const{data:n,error:i}=await this._getSessionFromURL(r,a);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),B$(i)){const c=(s=i.details)===null||s===void 0?void 0:s.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:l,redirectType:o}=n;return this._debug("#_initialize()","detected session in URL",l,"redirect type",o),await this._saveSession(l),setTimeout(async()=>{o==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",l):await this._notifyAllSubscribers("SIGNED_IN",l)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return tt(r)?this._returnResult({error:r}):this._returnResult({error:new pc("Unexpected error during initialization",r)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(s){var r,a,n;try{const i=await dt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(a=(r=s==null?void 0:s.options)===null||r===void 0?void 0:r.data)!==null&&a!==void 0?a:{},gotrue_meta_security:{captcha_token:(n=s==null?void 0:s.options)===null||n===void 0?void 0:n.captchaToken}},xform:Hn}),{data:l,error:o}=i;if(o||!l)return this._returnResult({data:{user:null,session:null},error:o});const c=l.session,d=l.user;return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",c)),this._returnResult({data:{user:d,session:c},error:null})}catch(i){if(tt(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signUp(s){var r,a,n;try{let i;if("email"in s){const{email:u,password:m,options:p}=s;let x=null,g=null;this.flowType==="pkce"&&([x,g]=await xd(this.storage,this.storageKey)),i=await dt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:p==null?void 0:p.emailRedirectTo,body:{email:u,password:m,data:(r=p==null?void 0:p.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:p==null?void 0:p.captchaToken},code_challenge:x,code_challenge_method:g},xform:Hn})}else if("phone"in s){const{phone:u,password:m,options:p}=s;i=await dt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:u,password:m,data:(a=p==null?void 0:p.data)!==null&&a!==void 0?a:{},channel:(n=p==null?void 0:p.channel)!==null&&n!==void 0?n:"sms",gotrue_meta_security:{captcha_token:p==null?void 0:p.captchaToken}},xform:Hn})}else throw new Ap("You must provide either an email or phone number and a password");const{data:l,error:o}=i;if(o||!l)return this._returnResult({data:{user:null,session:null},error:o});const c=l.session,d=l.user;return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",c)),this._returnResult({data:{user:d,session:c},error:null})}catch(i){if(tt(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signInWithPassword(s){try{let r;if("email"in s){const{email:i,password:l,options:o}=s;r=await dt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:l,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:PC})}else if("phone"in s){const{phone:i,password:l,options:o}=s;r=await dt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:l,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:PC})}else throw new Ap("You must provide either an email or phone number and a password");const{data:a,error:n}=r;if(n)return this._returnResult({data:{user:null,session:null},error:n});if(!a||!a.session||!a.user){const i=new pd;return this._returnResult({data:{user:null,session:null},error:i})}return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",a.session)),this._returnResult({data:Object.assign({user:a.user,session:a.session},a.weak_password?{weakPassword:a.weak_password}:null),error:n})}catch(r){if(tt(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOAuth(s){var r,a,n,i;return await this._handleProviderSignIn(s.provider,{redirectTo:(r=s.options)===null||r===void 0?void 0:r.redirectTo,scopes:(a=s.options)===null||a===void 0?void 0:a.scopes,queryParams:(n=s.options)===null||n===void 0?void 0:n.queryParams,skipBrowserRedirect:(i=s.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(s){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(s))}async signInWithWeb3(s){const{chain:r}=s;switch(r){case"ethereum":return await this.signInWithEthereum(s);case"solana":return await this.signInWithSolana(s);default:throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}}async signInWithEthereum(s){var r,a,n,i,l,o,c,d,u,m,p;let x,g;if("message"in s)x=s.message,g=s.signature;else{const{chain:f,wallet:b,statement:j,options:v}=s;let w;if(Wr())if(typeof b=="object")w=b;else{const A=window;if("ethereum"in A&&typeof A.ethereum=="object"&&"request"in A.ethereum&&typeof A.ethereum.request=="function")w=A.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof b!="object"||!(v!=null&&v.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");w=b}const y=new URL((r=v==null?void 0:v.url)!==null&&r!==void 0?r:window.location.href),C=await w.request({method:"eth_requestAccounts"}).then(A=>A).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!C||C.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const S=kT(C[0]);let _=(a=v==null?void 0:v.signInWithEthereum)===null||a===void 0?void 0:a.chainId;if(!_){const A=await w.request({method:"eth_chainId"});_=fU(A)}const E={domain:y.host,address:S,statement:j,uri:y.href,version:"1",chainId:_,nonce:(n=v==null?void 0:v.signInWithEthereum)===null||n===void 0?void 0:n.nonce,issuedAt:(l=(i=v==null?void 0:v.signInWithEthereum)===null||i===void 0?void 0:i.issuedAt)!==null&&l!==void 0?l:new Date,expirationTime:(o=v==null?void 0:v.signInWithEthereum)===null||o===void 0?void 0:o.expirationTime,notBefore:(c=v==null?void 0:v.signInWithEthereum)===null||c===void 0?void 0:c.notBefore,requestId:(d=v==null?void 0:v.signInWithEthereum)===null||d===void 0?void 0:d.requestId,resources:(u=v==null?void 0:v.signInWithEthereum)===null||u===void 0?void 0:u.resources};x=bU(E),g=await w.request({method:"personal_sign",params:[yU(x),S]})}try{const{data:f,error:b}=await dt(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:x,signature:g},!((m=s.options)===null||m===void 0)&&m.captchaToken?{gotrue_meta_security:{captcha_token:(p=s.options)===null||p===void 0?void 0:p.captchaToken}}:null),xform:Hn});if(b)throw b;if(!f||!f.session||!f.user){const j=new pd;return this._returnResult({data:{user:null,session:null},error:j})}return f.session&&(await this._saveSession(f.session),await this._notifyAllSubscribers("SIGNED_IN",f.session)),this._returnResult({data:Object.assign({},f),error:b})}catch(f){if(tt(f))return this._returnResult({data:{user:null,session:null},error:f});throw f}}async signInWithSolana(s){var r,a,n,i,l,o,c,d,u,m,p,x;let g,f;if("message"in s)g=s.message,f=s.signature;else{const{chain:b,wallet:j,statement:v,options:w}=s;let y;if(Wr())if(typeof j=="object")y=j;else{const S=window;if("solana"in S&&typeof S.solana=="object"&&("signIn"in S.solana&&typeof S.solana.signIn=="function"||"signMessage"in S.solana&&typeof S.solana.signMessage=="function"))y=S.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof j!="object"||!(w!=null&&w.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");y=j}const C=new URL((r=w==null?void 0:w.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in y&&y.signIn){const S=await y.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},w==null?void 0:w.signInWithSolana),{version:"1",domain:C.host,uri:C.href}),v?{statement:v}:null));let _;if(Array.isArray(S)&&S[0]&&typeof S[0]=="object")_=S[0];else if(S&&typeof S=="object"&&"signedMessage"in S&&"signature"in S)_=S;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in _&&"signature"in _&&(typeof _.signedMessage=="string"||_.signedMessage instanceof Uint8Array)&&_.signature instanceof Uint8Array)g=typeof _.signedMessage=="string"?_.signedMessage:new TextDecoder().decode(_.signedMessage),f=_.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in y)||typeof y.signMessage!="function"||!("publicKey"in y)||typeof y!="object"||!y.publicKey||!("toBase58"in y.publicKey)||typeof y.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");g=[`${C.host} wants you to sign in with your Solana account:`,y.publicKey.toBase58(),...v?["",v,""]:[""],"Version: 1",`URI: ${C.href}`,`Issued At: ${(n=(a=w==null?void 0:w.signInWithSolana)===null||a===void 0?void 0:a.issuedAt)!==null&&n!==void 0?n:new Date().toISOString()}`,...!((i=w==null?void 0:w.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${w.signInWithSolana.notBefore}`]:[],...!((l=w==null?void 0:w.signInWithSolana)===null||l===void 0)&&l.expirationTime?[`Expiration Time: ${w.signInWithSolana.expirationTime}`]:[],...!((o=w==null?void 0:w.signInWithSolana)===null||o===void 0)&&o.chainId?[`Chain ID: ${w.signInWithSolana.chainId}`]:[],...!((c=w==null?void 0:w.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${w.signInWithSolana.nonce}`]:[],...!((d=w==null?void 0:w.signInWithSolana)===null||d===void 0)&&d.requestId?[`Request ID: ${w.signInWithSolana.requestId}`]:[],...!((m=(u=w==null?void 0:w.signInWithSolana)===null||u===void 0?void 0:u.resources)===null||m===void 0)&&m.length?["Resources",...w.signInWithSolana.resources.map(_=>`- ${_}`)]:[]].join(`
`);const S=await y.signMessage(new TextEncoder().encode(g),"utf8");if(!S||!(S instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");f=S}}try{const{data:b,error:j}=await dt(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:g,signature:jc(f)},!((p=s.options)===null||p===void 0)&&p.captchaToken?{gotrue_meta_security:{captcha_token:(x=s.options)===null||x===void 0?void 0:x.captchaToken}}:null),xform:Hn});if(j)throw j;if(!b||!b.session||!b.user){const v=new pd;return this._returnResult({data:{user:null,session:null},error:v})}return b.session&&(await this._saveSession(b.session),await this._notifyAllSubscribers("SIGNED_IN",b.session)),this._returnResult({data:Object.assign({},b),error:j})}catch(b){if(tt(b))return this._returnResult({data:{user:null,session:null},error:b});throw b}}async _exchangeCodeForSession(s){const r=await Zo(this.storage,`${this.storageKey}-code-verifier`),[a,n]=(r??"").split("/");try{const{data:i,error:l}=await dt(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:s,code_verifier:a},xform:Hn});if(await Il(this.storage,`${this.storageKey}-code-verifier`),l)throw l;if(!i||!i.session||!i.user){const o=new pd;return this._returnResult({data:{user:null,session:null,redirectType:null},error:o})}return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),this._returnResult({data:Object.assign(Object.assign({},i),{redirectType:n??null}),error:l})}catch(i){if(tt(i))return this._returnResult({data:{user:null,session:null,redirectType:null},error:i});throw i}}async signInWithIdToken(s){try{const{options:r,provider:a,token:n,access_token:i,nonce:l}=s,o=await dt(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:a,id_token:n,access_token:i,nonce:l,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:Hn}),{data:c,error:d}=o;if(d)return this._returnResult({data:{user:null,session:null},error:d});if(!c||!c.session||!c.user){const u=new pd;return this._returnResult({data:{user:null,session:null},error:u})}return c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),this._returnResult({data:c,error:d})}catch(r){if(tt(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOtp(s){var r,a,n,i,l;try{if("email"in s){const{email:o,options:c}=s;let d=null,u=null;this.flowType==="pkce"&&([d,u]=await xd(this.storage,this.storageKey));const{error:m}=await dt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:o,data:(r=c==null?void 0:c.data)!==null&&r!==void 0?r:{},create_user:(a=c==null?void 0:c.shouldCreateUser)!==null&&a!==void 0?a:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:d,code_challenge_method:u},redirectTo:c==null?void 0:c.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:m})}if("phone"in s){const{phone:o,options:c}=s,{data:d,error:u}=await dt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:o,data:(n=c==null?void 0:c.data)!==null&&n!==void 0?n:{},create_user:(i=c==null?void 0:c.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(l=c==null?void 0:c.channel)!==null&&l!==void 0?l:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:d==null?void 0:d.message_id},error:u})}throw new Ap("You must provide either an email or phone number.")}catch(o){if(tt(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}}async verifyOtp(s){var r,a;try{let n,i;"options"in s&&(n=(r=s.options)===null||r===void 0?void 0:r.redirectTo,i=(a=s.options)===null||a===void 0?void 0:a.captchaToken);const{data:l,error:o}=await dt(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},s),{gotrue_meta_security:{captcha_token:i}}),redirectTo:n,xform:Hn});if(o)throw o;if(!l)throw new Error("An error occurred on token verification.");const c=l.session,d=l.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(s.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),this._returnResult({data:{user:d,session:c},error:null})}catch(n){if(tt(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithSSO(s){var r,a,n,i,l;try{let o=null,c=null;this.flowType==="pkce"&&([o,c]=await xd(this.storage,this.storageKey));const d=await dt(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in s?{provider_id:s.providerId}:null),"domain"in s?{domain:s.domain}:null),{redirect_to:(a=(r=s.options)===null||r===void 0?void 0:r.redirectTo)!==null&&a!==void 0?a:void 0}),!((n=s==null?void 0:s.options)===null||n===void 0)&&n.captchaToken?{gotrue_meta_security:{captcha_token:s.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:o,code_challenge_method:c}),headers:this.headers,xform:dU});return!((i=d.data)===null||i===void 0)&&i.url&&Wr()&&!(!((l=s.options)===null||l===void 0)&&l.skipBrowserRedirect)&&window.location.assign(d.data.url),this._returnResult(d)}catch(o){if(tt(o))return this._returnResult({data:null,error:o});throw o}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async s=>{const{data:{session:r},error:a}=s;if(a)throw a;if(!r)throw new Ka;const{error:n}=await dt(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return this._returnResult({data:{user:null,session:null},error:n})})}catch(s){if(tt(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async resend(s){try{const r=`${this.url}/resend`;if("email"in s){const{email:a,type:n,options:i}=s,{error:l}=await dt(this.fetch,"POST",r,{headers:this.headers,body:{email:a,type:n,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:l})}else if("phone"in s){const{phone:a,type:n,options:i}=s,{data:l,error:o}=await dt(this.fetch,"POST",r,{headers:this.headers,body:{phone:a,type:n,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:l==null?void 0:l.message_id},error:o})}throw new Ap("You must provide either an email or phone number and a type")}catch(r){if(tt(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(s,r){this._debug("#_acquireLock","begin",s);try{if(this.lockAcquired){const a=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),n=(async()=>(await a,await r()))();return this.pendingInLock.push((async()=>{try{await n}catch{}})()),n}return await this.lock(`lock:${this.storageKey}`,s,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const a=r();for(this.pendingInLock.push((async()=>{try{await a}catch{}})()),await a;this.pendingInLock.length;){const n=[...this.pendingInLock];await Promise.all(n),this.pendingInLock.splice(0,n.length)}return await a}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(s){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await s(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let s=null;const r=await Zo(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?s=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!s)return{data:{session:null},error:null};const a=s.expires_at?s.expires_at*1e3-Date.now()<Ib:!1;if(this._debug("#__loadSession()",`session has${a?"":" not"} expired`,"expires_at",s.expires_at),!a){if(this.userStorage){const l=await Zo(this.userStorage,this.storageKey+"-user");l!=null&&l.user?s.user=l.user:s.user=Fb()}if(this.storage.isServer&&s.user&&!s.user.__isUserNotAvailableProxy){const l={value:this.suppressGetSessionWarning};s.user=iU(s.user,l),l.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:s},error:null}}const{data:n,error:i}=await this._callRefreshToken(s.refresh_token);return i?this._returnResult({data:{session:null},error:i}):this._returnResult({data:{session:n},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(s){return s?await this._getUser(s):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(s){try{return s?await dt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:s,xform:Ql}):await this._useSession(async r=>{var a,n,i;const{data:l,error:o}=r;if(o)throw o;return!(!((a=l.session)===null||a===void 0)&&a.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Ka}:await dt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(n=l.session)===null||n===void 0?void 0:n.access_token)!==null&&i!==void 0?i:void 0,xform:Ql})})}catch(r){if(tt(r))return O$(r)&&(await this._removeSession(),await Il(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:r});throw r}}async updateUser(s,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(s,r))}async _updateUser(s,r={}){try{return await this._useSession(async a=>{const{data:n,error:i}=a;if(i)throw i;if(!n.session)throw new Ka;const l=n.session;let o=null,c=null;this.flowType==="pkce"&&s.email!=null&&([o,c]=await xd(this.storage,this.storageKey));const{data:d,error:u}=await dt(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},s),{code_challenge:o,code_challenge_method:c}),jwt:l.access_token,xform:Ql});if(u)throw u;return l.user=d.user,await this._saveSession(l),await this._notifyAllSubscribers("USER_UPDATED",l),this._returnResult({data:{user:l.user},error:null})})}catch(a){if(tt(a))return this._returnResult({data:{user:null},error:a});throw a}}async setSession(s){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(s))}async _setSession(s){try{if(!s.access_token||!s.refresh_token)throw new Ka;const r=Date.now()/1e3;let a=r,n=!0,i=null;const{payload:l}=Lb(s.access_token);if(l.exp&&(a=l.exp,n=a<=r),n){const{data:o,error:c}=await this._callRefreshToken(s.refresh_token);if(c)return this._returnResult({data:{user:null,session:null},error:c});if(!o)return{data:{user:null,session:null},error:null};i=o}else{const{data:o,error:c}=await this._getUser(s.access_token);if(c)throw c;i={access_token:s.access_token,refresh_token:s.refresh_token,user:o.user,token_type:"bearer",expires_in:a-r,expires_at:a},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return this._returnResult({data:{user:i.user,session:i},error:null})}catch(r){if(tt(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}}async refreshSession(s){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(s))}async _refreshSession(s){try{return await this._useSession(async r=>{var a;if(!s){const{data:l,error:o}=r;if(o)throw o;s=(a=l.session)!==null&&a!==void 0?a:void 0}if(!(s!=null&&s.refresh_token))throw new Ka;const{data:n,error:i}=await this._callRefreshToken(s.refresh_token);return i?this._returnResult({data:{user:null,session:null},error:i}):n?this._returnResult({data:{user:n.user,session:n},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(r){if(tt(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async _getSessionFromURL(s,r){try{if(!Wr())throw new Tp("No browser detected.");if(s.error||s.error_description||s.error_code)throw new Tp(s.error_description||"Error in URL with unspecified error_description",{error:s.error||"unspecified_error",code:s.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new kC("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Tp("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!s.code)throw new kC("No code detected.");const{data:v,error:w}=await this._exchangeCodeForSession(s.code);if(w)throw w;const y=new URL(window.location.href);return y.searchParams.delete("code"),window.history.replaceState(window.history.state,"",y.toString()),{data:{session:v.session,redirectType:null},error:null}}const{provider_token:a,provider_refresh_token:n,access_token:i,refresh_token:l,expires_in:o,expires_at:c,token_type:d}=s;if(!i||!o||!l||!d)throw new Tp("No session defined in URL");const u=Math.round(Date.now()/1e3),m=parseInt(o);let p=u+m;c&&(p=parseInt(c));const x=p-u;x*1e3<=Td&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${x}s, should have been closer to ${m}s`);const g=p-m;u-g>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",g,p,u):u-g<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",g,p,u);const{data:f,error:b}=await this._getUser(i);if(b)throw b;const j={provider_token:a,provider_refresh_token:n,access_token:i,expires_in:m,expires_at:p,refresh_token:l,token_type:d,user:f.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:j,redirectType:s.type},error:null})}catch(a){if(tt(a))return this._returnResult({data:{session:null,redirectType:null},error:a});throw a}}_isImplicitGrantCallback(s){return!!(s.access_token||s.error_description)}async _isPKCECallback(s){const r=await Zo(this.storage,`${this.storageKey}-code-verifier`);return!!(s.code&&r)}async signOut(s={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(s))}async _signOut({scope:s}={scope:"global"}){return await this._useSession(async r=>{var a;const{data:n,error:i}=r;if(i)return this._returnResult({error:i});const l=(a=n.session)===null||a===void 0?void 0:a.access_token;if(l){const{error:o}=await this.admin.signOut(l,s);if(o&&!(F$(o)&&(o.status===404||o.status===401||o.status===403)))return this._returnResult({error:o})}return s!=="others"&&(await this._removeSession(),await Il(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(s){const r=G$(),a={id:r,callback:s,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,a),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:a}}}async _emitInitialSession(s){return await this._useSession(async r=>{var a,n;try{const{data:{session:i},error:l}=r;if(l)throw l;await((a=this.stateChangeEmitters.get(s))===null||a===void 0?void 0:a.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",s,"session",i)}catch(i){await((n=this.stateChangeEmitters.get(s))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",s,"error",i),console.error(i)}})}async resetPasswordForEmail(s,r={}){let a=null,n=null;this.flowType==="pkce"&&([a,n]=await xd(this.storage,this.storageKey,!0));try{return await dt(this.fetch,"POST",`${this.url}/recover`,{body:{email:s,code_challenge:a,code_challenge_method:n,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(i){if(tt(i))return this._returnResult({data:null,error:i});throw i}}async getUserIdentities(){var s;try{const{data:r,error:a}=await this.getUser();if(a)throw a;return this._returnResult({data:{identities:(s=r.user.identities)!==null&&s!==void 0?s:[]},error:null})}catch(r){if(tt(r))return this._returnResult({data:null,error:r});throw r}}async linkIdentity(s){return"token"in s?this.linkIdentityIdToken(s):this.linkIdentityOAuth(s)}async linkIdentityOAuth(s){var r;try{const{data:a,error:n}=await this._useSession(async i=>{var l,o,c,d,u;const{data:m,error:p}=i;if(p)throw p;const x=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,s.provider,{redirectTo:(l=s.options)===null||l===void 0?void 0:l.redirectTo,scopes:(o=s.options)===null||o===void 0?void 0:o.scopes,queryParams:(c=s.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await dt(this.fetch,"GET",x,{headers:this.headers,jwt:(u=(d=m.session)===null||d===void 0?void 0:d.access_token)!==null&&u!==void 0?u:void 0})});if(n)throw n;return Wr()&&!(!((r=s.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(a==null?void 0:a.url),this._returnResult({data:{provider:s.provider,url:a==null?void 0:a.url},error:null})}catch(a){if(tt(a))return this._returnResult({data:{provider:s.provider,url:null},error:a});throw a}}async linkIdentityIdToken(s){return await this._useSession(async r=>{var a;try{const{error:n,data:{session:i}}=r;if(n)throw n;const{options:l,provider:o,token:c,access_token:d,nonce:u}=s,m=await dt(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(a=i==null?void 0:i.access_token)!==null&&a!==void 0?a:void 0,body:{provider:o,id_token:c,access_token:d,nonce:u,link_identity:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:Hn}),{data:p,error:x}=m;return x?this._returnResult({data:{user:null,session:null},error:x}):!p||!p.session||!p.user?this._returnResult({data:{user:null,session:null},error:new pd}):(p.session&&(await this._saveSession(p.session),await this._notifyAllSubscribers("USER_UPDATED",p.session)),this._returnResult({data:p,error:x}))}catch(n){if(tt(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}})}async unlinkIdentity(s){try{return await this._useSession(async r=>{var a,n;const{data:i,error:l}=r;if(l)throw l;return await dt(this.fetch,"DELETE",`${this.url}/user/identities/${s.identity_id}`,{headers:this.headers,jwt:(n=(a=i.session)===null||a===void 0?void 0:a.access_token)!==null&&n!==void 0?n:void 0})})}catch(r){if(tt(r))return this._returnResult({data:null,error:r});throw r}}async _refreshAccessToken(s){const r=`#_refreshAccessToken(${s.substring(0,5)}...)`;this._debug(r,"begin");try{const a=Date.now();return await Q$(async n=>(n>0&&await Y$(200*Math.pow(2,n-1)),this._debug(r,"refreshing attempt",n),await dt(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:s},headers:this.headers,xform:Hn})),(n,i)=>{const l=200*Math.pow(2,n);return i&&Mb(i)&&Date.now()+l-a<Td})}catch(a){if(this._debug(r,"error",a),tt(a))return this._returnResult({data:{session:null,user:null},error:a});throw a}finally{this._debug(r,"end")}}_isValidSession(s){return typeof s=="object"&&s!==null&&"access_token"in s&&"refresh_token"in s&&"expires_at"in s}async _handleProviderSignIn(s,r){const a=await this._getUrlForProvider(`${this.url}/authorize`,s,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",s,"options",r,"url",a),Wr()&&!r.skipBrowserRedirect&&window.location.assign(a),{data:{provider:s,url:a},error:null}}async _recoverAndRefresh(){var s,r;const a="#_recoverAndRefresh()";this._debug(a,"begin");try{const n=await Zo(this.storage,this.storageKey);if(n&&this.userStorage){let l=await Zo(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!l&&(l={user:n.user},await Pd(this.userStorage,this.storageKey+"-user",l)),n.user=(s=l==null?void 0:l.user)!==null&&s!==void 0?s:Fb()}else if(n&&!n.user&&!n.user){const l=await Zo(this.storage,this.storageKey+"-user");l&&(l!=null&&l.user)?(n.user=l.user,await Il(this.storage,this.storageKey+"-user"),await Pd(this.storage,this.storageKey,n)):n.user=Fb()}if(this._debug(a,"session from storage",n),!this._isValidSession(n)){this._debug(a,"session is not valid"),n!==null&&await this._removeSession();return}const i=((r=n.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<Ib;if(this._debug(a,`session has${i?"":" not"} expired with margin of ${Ib}s`),i){if(this.autoRefreshToken&&n.refresh_token){const{error:l}=await this._callRefreshToken(n.refresh_token);l&&(console.error(l),Mb(l)||(this._debug(a,"refresh failed with a non-retryable error, removing the session",l),await this._removeSession()))}}else if(n.user&&n.user.__isUserNotAvailableProxy===!0)try{const{data:l,error:o}=await this._getUser(n.access_token);!o&&(l!=null&&l.user)?(n.user=l.user,await this._saveSession(n),await this._notifyAllSubscribers("SIGNED_IN",n)):this._debug(a,"could not get user data, skipping SIGNED_IN notification")}catch(l){console.error("Error getting user data:",l),this._debug(a,"error getting user data, skipping SIGNED_IN notification",l)}else await this._notifyAllSubscribers("SIGNED_IN",n)}catch(n){this._debug(a,"error",n),console.error(n);return}finally{this._debug(a,"end")}}async _callRefreshToken(s){var r,a;if(!s)throw new Ka;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const n=`#_callRefreshToken(${s.substring(0,5)}...)`;this._debug(n,"begin");try{this.refreshingDeferred=new Tf;const{data:i,error:l}=await this._refreshAccessToken(s);if(l)throw l;if(!i.session)throw new Ka;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const o={data:i.session,error:null};return this.refreshingDeferred.resolve(o),o}catch(i){if(this._debug(n,"error",i),tt(i)){const l={data:null,error:i};return Mb(i)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(l),l}throw(a=this.refreshingDeferred)===null||a===void 0||a.reject(i),i}finally{this.refreshingDeferred=null,this._debug(n,"end")}}async _notifyAllSubscribers(s,r,a=!0){const n=`#_notifyAllSubscribers(${s})`;this._debug(n,"begin",r,`broadcast = ${a}`);try{this.broadcastChannel&&a&&this.broadcastChannel.postMessage({event:s,session:r});const i=[],l=Array.from(this.stateChangeEmitters.values()).map(async o=>{try{await o.callback(s,r)}catch(c){i.push(c)}});if(await Promise.all(l),i.length>0){for(let o=0;o<i.length;o+=1)console.error(i[o]);throw i[0]}}finally{this._debug(n,"end")}}async _saveSession(s){this._debug("#_saveSession()",s),this.suppressGetSessionWarning=!0;const r=Object.assign({},s),a=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!a&&r.user&&await Pd(this.userStorage,this.storageKey+"-user",{user:r.user});const n=Object.assign({},r);delete n.user;const i=AC(n);await Pd(this.storage,this.storageKey,i)}else{const n=AC(r);await Pd(this.storage,this.storageKey,n)}}async _removeSession(){this._debug("#_removeSession()"),await Il(this.storage,this.storageKey),await Il(this.storage,this.storageKey+"-code-verifier"),await Il(this.storage,this.storageKey+"-user"),this.userStorage&&await Il(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const s=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{s&&Wr()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",s)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const s=setInterval(()=>this._autoRefreshTokenTick(),Td);this.autoRefreshTicker=s,s&&typeof s=="object"&&typeof s.unref=="function"?s.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(s),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const s=this.autoRefreshTicker;this.autoRefreshTicker=null,s&&clearInterval(s)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const s=Date.now();try{return await this._useSession(async r=>{const{data:{session:a}}=r;if(!a||!a.refresh_token||!a.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const n=Math.floor((a.expires_at*1e3-s)/Td);this._debug("#_autoRefreshTokenTick()",`access token expires in ${n} ticks, a tick lasts ${Td}ms, refresh threshold is ${Hj} ticks`),n<=Hj&&await this._callRefreshToken(a.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(s){if(s.isAcquireTimeout||s instanceof NT)this._debug("auto refresh token tick lock not available");else throw s}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Wr()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(s){console.error("_handleVisibilityChange",s)}}async _onVisibilityChanged(s){const r=`#_onVisibilityChanged(${s})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),s||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(s,r,a){const n=[`provider=${encodeURIComponent(r)}`];if(a!=null&&a.redirectTo&&n.push(`redirect_to=${encodeURIComponent(a.redirectTo)}`),a!=null&&a.scopes&&n.push(`scopes=${encodeURIComponent(a.scopes)}`),this.flowType==="pkce"){const[i,l]=await xd(this.storage,this.storageKey),o=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(l)}`});n.push(o.toString())}if(a!=null&&a.queryParams){const i=new URLSearchParams(a.queryParams);n.push(i.toString())}return a!=null&&a.skipBrowserRedirect&&n.push(`skip_http_redirect=${a.skipBrowserRedirect}`),`${s}?${n.join("&")}`}async _unenroll(s){try{return await this._useSession(async r=>{var a;const{data:n,error:i}=r;return i?this._returnResult({data:null,error:i}):await dt(this.fetch,"DELETE",`${this.url}/factors/${s.factorId}`,{headers:this.headers,jwt:(a=n==null?void 0:n.session)===null||a===void 0?void 0:a.access_token})})}catch(r){if(tt(r))return this._returnResult({data:null,error:r});throw r}}async _enroll(s){try{return await this._useSession(async r=>{var a,n;const{data:i,error:l}=r;if(l)return this._returnResult({data:null,error:l});const o=Object.assign({friendly_name:s.friendlyName,factor_type:s.factorType},s.factorType==="phone"?{phone:s.phone}:s.factorType==="totp"?{issuer:s.issuer}:{}),{data:c,error:d}=await dt(this.fetch,"POST",`${this.url}/factors`,{body:o,headers:this.headers,jwt:(a=i==null?void 0:i.session)===null||a===void 0?void 0:a.access_token});return d?this._returnResult({data:null,error:d}):(s.factorType==="totp"&&c.type==="totp"&&(!((n=c==null?void 0:c.totp)===null||n===void 0)&&n.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),this._returnResult({data:c,error:null}))})}catch(r){if(tt(r))return this._returnResult({data:null,error:r});throw r}}async _verify(s){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var a;const{data:n,error:i}=r;if(i)return this._returnResult({data:null,error:i});const l=Object.assign({challenge_id:s.challengeId},"webauthn"in s?{webauthn:Object.assign(Object.assign({},s.webauthn),{credential_response:s.webauthn.type==="create"?SU(s.webauthn.credential_response):_U(s.webauthn.credential_response)})}:{code:s.code}),{data:o,error:c}=await dt(this.fetch,"POST",`${this.url}/factors/${s.factorId}/verify`,{body:l,headers:this.headers,jwt:(a=n==null?void 0:n.session)===null||a===void 0?void 0:a.access_token});return c?this._returnResult({data:null,error:c}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),this._returnResult({data:o,error:c}))})}catch(r){if(tt(r))return this._returnResult({data:null,error:r});throw r}})}async _challenge(s){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var a;const{data:n,error:i}=r;if(i)return this._returnResult({data:null,error:i});const l=await dt(this.fetch,"POST",`${this.url}/factors/${s.factorId}/challenge`,{body:s,headers:this.headers,jwt:(a=n==null?void 0:n.session)===null||a===void 0?void 0:a.access_token});if(l.error)return l;const{data:o}=l;if(o.type!=="webauthn")return{data:o,error:null};switch(o.webauthn.type){case"create":return{data:Object.assign(Object.assign({},o),{webauthn:Object.assign(Object.assign({},o.webauthn),{credential_options:Object.assign(Object.assign({},o.webauthn.credential_options),{publicKey:kU(o.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},o),{webauthn:Object.assign(Object.assign({},o.webauthn),{credential_options:Object.assign(Object.assign({},o.webauthn.credential_options),{publicKey:CU(o.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(r){if(tt(r))return this._returnResult({data:null,error:r});throw r}})}async _challengeAndVerify(s){const{data:r,error:a}=await this._challenge({factorId:s.factorId});return a?this._returnResult({data:null,error:a}):await this._verify({factorId:s.factorId,challengeId:r.id,code:s.code})}async _listFactors(){var s;const{data:{user:r},error:a}=await this.getUser();if(a)return{data:null,error:a};const n={all:[],phone:[],totp:[],webauthn:[]};for(const i of(s=r==null?void 0:r.factors)!==null&&s!==void 0?s:[])n.all.push(i),i.status==="verified"&&n[i.factor_type].push(i);return{data:n,error:null}}async _getAuthenticatorAssuranceLevel(){var s,r;const{data:{session:a},error:n}=await this.getSession();if(n)return this._returnResult({data:null,error:n});if(!a)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:i}=Lb(a.access_token);let l=null;i.aal&&(l=i.aal);let o=l;((r=(s=a.user.factors)===null||s===void 0?void 0:s.filter(u=>u.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(o="aal2");const d=i.amr||[];return{data:{currentLevel:l,nextLevel:o,currentAuthenticationMethods:d},error:null}}async _getAuthorizationDetails(s){try{return await this._useSession(async r=>{const{data:{session:a},error:n}=r;return n?this._returnResult({data:null,error:n}):a?await dt(this.fetch,"GET",`${this.url}/oauth/authorizations/${s}`,{headers:this.headers,jwt:a.access_token,xform:i=>({data:i,error:null})}):this._returnResult({data:null,error:new Ka})})}catch(r){if(tt(r))return this._returnResult({data:null,error:r});throw r}}async _approveAuthorization(s,r){try{return await this._useSession(async a=>{const{data:{session:n},error:i}=a;if(i)return this._returnResult({data:null,error:i});if(!n)return this._returnResult({data:null,error:new Ka});const l=await dt(this.fetch,"POST",`${this.url}/oauth/authorizations/${s}/consent`,{headers:this.headers,jwt:n.access_token,body:{action:"approve"},xform:o=>({data:o,error:null})});return l.data&&l.data.redirect_url&&Wr()&&!(r!=null&&r.skipBrowserRedirect)&&window.location.assign(l.data.redirect_url),l})}catch(a){if(tt(a))return this._returnResult({data:null,error:a});throw a}}async _denyAuthorization(s,r){try{return await this._useSession(async a=>{const{data:{session:n},error:i}=a;if(i)return this._returnResult({data:null,error:i});if(!n)return this._returnResult({data:null,error:new Ka});const l=await dt(this.fetch,"POST",`${this.url}/oauth/authorizations/${s}/consent`,{headers:this.headers,jwt:n.access_token,body:{action:"deny"},xform:o=>({data:o,error:null})});return l.data&&l.data.redirect_url&&Wr()&&!(r!=null&&r.skipBrowserRedirect)&&window.location.assign(l.data.redirect_url),l})}catch(a){if(tt(a))return this._returnResult({data:null,error:a});throw a}}async _listOAuthGrants(){try{return await this._useSession(async s=>{const{data:{session:r},error:a}=s;return a?this._returnResult({data:null,error:a}):r?await dt(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:r.access_token,xform:n=>({data:n,error:null})}):this._returnResult({data:null,error:new Ka})})}catch(s){if(tt(s))return this._returnResult({data:null,error:s});throw s}}async _revokeOAuthGrant(s){try{return await this._useSession(async r=>{const{data:{session:a},error:n}=r;return n?this._returnResult({data:null,error:n}):a?(await dt(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:a.access_token,query:{client_id:s.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new Ka})})}catch(r){if(tt(r))return this._returnResult({data:null,error:r});throw r}}async fetchJwk(s,r={keys:[]}){let a=r.keys.find(o=>o.kid===s);if(a)return a;const n=Date.now();if(a=this.jwks.keys.find(o=>o.kid===s),a&&this.jwks_cached_at+M$>n)return a;const{data:i,error:l}=await dt(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(l)throw l;return!i.keys||i.keys.length===0||(this.jwks=i,this.jwks_cached_at=n,a=i.keys.find(o=>o.kid===s),!a)?null:a}async getClaims(s,r={}){try{let a=s;if(!a){const{data:x,error:g}=await this.getSession();if(g||!x.session)return this._returnResult({data:null,error:g});a=x.session.access_token}const{header:n,payload:i,signature:l,raw:{header:o,payload:c}}=Lb(a);r!=null&&r.allowExpired||rU(i.exp);const d=!n.alg||n.alg.startsWith("HS")||!n.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(n.kid,r!=null&&r.keys?{keys:r.keys}:r==null?void 0:r.jwks);if(!d){const{error:x}=await this.getUser(a);if(x)throw x;return{data:{claims:i,header:n,signature:l},error:null}}const u=aU(n.alg),m=await crypto.subtle.importKey("jwk",d,u,!0,["verify"]);if(!await crypto.subtle.verify(u,m,l,W$(`${o}.${c}`)))throw new Jj("Invalid JWT signature");return{data:{claims:i,header:n,signature:l},error:null}}catch(a){if(tt(a))return this._returnResult({data:null,error:a});throw a}}}Hh.nextInstanceID={};const LU=Hh;class FU extends LU{constructor(s){super(s)}}class OU{constructor(s,r,a){var n,i,l;this.supabaseUrl=s,this.supabaseKey=r;const o=T$(s);if(!r)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",o),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",o),this.storageUrl=new URL("storage/v1",o),this.functionsUrl=new URL("functions/v1",o);const c=`sb-${o.hostname.split(".")[0]}-auth-token`,d={db:w$,realtime:k$,auth:Object.assign(Object.assign({},N$),{storageKey:c}),global:j$},u=A$(a??{},d);this.storageKey=(n=u.auth.storageKey)!==null&&n!==void 0?n:"",this.headers=(i=u.global.headers)!==null&&i!==void 0?i:{},u.accessToken?(this.accessToken=u.accessToken,this.auth=new Proxy({},{get:(m,p)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(p)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((l=u.auth)!==null&&l!==void 0?l:{},this.headers,u.global.fetch),this.fetch=_$(r,this._getAccessToken.bind(this),u.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},u.realtime)),this.accessToken&&this.accessToken().then(m=>this.realtime.setAuth(m)).catch(m=>console.warn("Failed to set initial Realtime auth token:",m)),this.rest=new k8(new URL("rest/v1",o).href,{headers:this.headers,schema:u.db.schema,fetch:this.fetch}),this.storage=new y$(this.storageUrl.href,this.headers,this.fetch,a==null?void 0:a.storage),u.accessToken||this._listenForAuthEvents()}get functions(){return new j8(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(s){return this.rest.from(s)}schema(s){return this.rest.schema(s)}rpc(s,r={},a={head:!1,get:!1,count:void 0}){return this.rest.rpc(s,r,a)}channel(s,r={config:{}}){return this.realtime.channel(s,r)}getChannels(){return this.realtime.getChannels()}removeChannel(s){return this.realtime.removeChannel(s)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var s,r;if(this.accessToken)return await this.accessToken();const{data:a}=await this.auth.getSession();return(r=(s=a.session)===null||s===void 0?void 0:s.access_token)!==null&&r!==void 0?r:this.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:s,persistSession:r,detectSessionInUrl:a,storage:n,userStorage:i,storageKey:l,flowType:o,lock:c,debug:d,throwOnError:u},m,p){const x={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new FU({url:this.authUrl.href,headers:Object.assign(Object.assign({},x),m),storageKey:l,autoRefreshToken:s,persistSession:r,detectSessionInUrl:a,storage:n,userStorage:i,flowType:o,lock:c,debug:d,throwOnError:u,fetch:p,hasCustomAuthorizationHeader:Object.keys(this.headers).some(g=>g.toLowerCase()==="authorization")})}_initRealtimeClient(s){return new U8(this.realtimeUrl.href,Object.assign(Object.assign({},s),{params:Object.assign({apikey:this.supabaseKey},s==null?void 0:s.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((r,a)=>{this._handleTokenChanged(r,"CLIENT",a==null?void 0:a.access_token)})}_handleTokenChanged(s,r,a){(s==="TOKEN_REFRESHED"||s==="SIGNED_IN")&&this.changedAccessToken!==a?(this.changedAccessToken=a,this.realtime.setAuth(a)):s==="SIGNED_OUT"&&(this.realtime.setAuth(),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const ST=(t,s,r)=>new OU(t,s,r);function BU(){if(typeof window<"u"||typeof process>"u")return!1;const t=process.version;if(t==null)return!1;const s=t.match(/^v(\d+)\./);return s?parseInt(s[1],10)<=18:!1}BU()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const $U="https://akiecgwcxadcpqlvntmf.supabase.co",UU="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImFraWVjZ3djeGFkY3BxbHZudG1mIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjQyODMzMzIsImV4cCI6MjA3OTg1OTMzMn0.L2ePGMJRjBqHS-M1d9mxys7I9bZv93YYr9dzQzCQINE",U=ST($U,UU);function lu(t){if(!t)return"";let s=t.replace(/[^\d+]/g,"");return s.startsWith("+")&&(s=s.substring(1)),s.startsWith("232")&&(s=s.substring(3)),!s.startsWith("0")&&s.length===8&&(s="0"+s),s.length===8&&(s="0"+s),s}function VU(t){if(!t)return"Phone number is required";const s=lu(t);return s.length<9?"Phone number is too short. Enter 9 digits (e.g., 077123456)":s.length>9?"Phone number is too long. Enter 9 digits (e.g., 077123456)":s.startsWith("0")?null:"Phone number must start with 0"}var mh={},k0={},Pf={};const qU={},WU=Object.freeze(Object.defineProperty({__proto__:null,default:qU},Symbol.toStringTag,{value:"Module"})),zU=VE(WU);/**
 * @otplib/plugin-crypto
 *
 * @author Gerald Yeo <contact@fusedthought.com>
 * @version: 12.0.1
 * @license: MIT
 **/Object.defineProperty(Pf,"__esModule",{value:!0});function GU(t){return t&&typeof t=="object"&&"default"in t?t.default:t}var _T=GU(zU);const KU=(t,s,r)=>_T.createHmac(t,Buffer.from(s,"hex")).update(Buffer.from(r,"hex")).digest().toString("hex"),HU=(t,s)=>_T.randomBytes(t).toString(s);Pf.createDigest=KU;Pf.createRandomBytes=HU;var Rf={},D1={},I1={},YU="ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",LC=[255,255,26,27,28,29,30,31,255,255,255,255,255,255,255,255,255,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,255,255,255,255,255,255,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,255,255,255,255,255];function QU(t){var s=Math.floor(t.length/5);return t.length%5===0?s:s+1}I1.encode=function(t){Buffer.isBuffer(t)||(t=new Buffer(t));for(var s=0,r=0,a=0,n=0,i=new Buffer(QU(t)*8);s<t.length;){var l=t[s];a>3?(n=l&255>>a,a=(a+5)%8,n=n<<a|(s+1<t.length?t[s+1]:0)>>8-a,s++):(n=l>>8-(a+5)&31,a=(a+5)%8,a===0&&s++),i[r]=YU.charCodeAt(n),r++}for(s=r;s<i.length;s++)i[s]=61;return i};I1.decode=function(t){var s=0,r=0,a,n=0;Buffer.isBuffer(t)||(t=new Buffer(t));for(var i=new Buffer(Math.ceil(t.length*5/8)),l=0;l<t.length&&t[l]!==61;l++){var o=t[l]-48;if(o<LC.length)r=LC[o],s<=3?(s=(s+5)%8,s===0?(a|=r,i[n]=a,n++,a=0):a|=255&r<<8-s):(s=(s+5)%8,a|=255&r>>>s,i[n]=a,n++,a=255&r<<8-s);else throw new Error("Invalid input - it is not base32 encoded string")}return i.slice(0,n)};var ET=I1;D1.encode=ET.encode;D1.decode=ET.decode;/**
 * @otplib/plugin-thirty-two
 *
 * @author Gerald Yeo <contact@fusedthought.com>
 * @version: 12.0.1
 * @license: MIT
 **/Object.defineProperty(Rf,"__esModule",{value:!0});function JU(t){return t&&typeof t=="object"&&"default"in t?t.default:t}var AT=JU(D1);const ZU=(t,s)=>AT.decode(t).toString(s),XU=(t,s)=>AT.encode(Buffer.from(t,s).toString("ascii")).toString().replace(/=/g,"");Rf.keyDecoder=ZU;Rf.keyEncoder=XU;var TT={};/**
 * @otplib/core
 *
 * @author Gerald Yeo <contact@fusedthought.com>
 * @version: 12.0.1
 * @license: MIT
 **/(function(t){Object.defineProperty(t,"__esModule",{value:!0});function s(Y){return Object.keys(Y).map(G=>Y[G])}(function(Y){Y.SHA1="sha1",Y.SHA256="sha256",Y.SHA512="sha512"})(t.HashAlgorithms||(t.HashAlgorithms={}));const r=s(t.HashAlgorithms);(function(Y){Y.ASCII="ascii",Y.BASE64="base64",Y.HEX="hex",Y.LATIN1="latin1",Y.UTF8="utf8"})(t.KeyEncodings||(t.KeyEncodings={}));const a=s(t.KeyEncodings);(function(Y){Y.HOTP="hotp",Y.TOTP="totp"})(t.Strategy||(t.Strategy={}));const n=s(t.Strategy),i=()=>{throw new Error("Please provide an options.createDigest implementation.")};function l(Y){return/^(\d+)$/.test(Y)}function o(Y,G,H){return Y.length>=G?Y:`${Array(G+1).join(H)}${Y}`.slice(-1*G)}function c(Y){const G=`otpauth://${Y.type}/{labelPrefix}:{accountName}?secret={secret}{query}`,H=[];if(n.indexOf(Y.type)<0)throw new Error(`Expecting options.type to be one of ${n.join(", ")}. Received ${Y.type}.`);if(Y.type==="hotp"){if(Y.counter==null||typeof Y.counter!="number")throw new Error('Expecting options.counter to be a number when options.type is "hotp".');H.push(`&counter=${Y.counter}`)}return Y.type==="totp"&&Y.step&&H.push(`&period=${Y.step}`),Y.digits&&H.push(`&digits=${Y.digits}`),Y.algorithm&&H.push(`&algorithm=${Y.algorithm.toUpperCase()}`),Y.issuer&&H.push(`&issuer=${encodeURIComponent(Y.issuer)}`),G.replace("{labelPrefix}",encodeURIComponent(Y.issuer||Y.accountName)).replace("{accountName}",encodeURIComponent(Y.accountName)).replace("{secret}",Y.secret).replace("{query}",H.join(""))}class d{constructor(G={}){this._defaultOptions=Object.freeze({...G}),this._options=Object.freeze({})}create(G={}){return new d(G)}clone(G={}){const H=this.create({...this._defaultOptions,...G});return H.options=this._options,H}get options(){return Object.freeze({...this._defaultOptions,...this._options})}set options(G){this._options=Object.freeze({...this._options,...G})}allOptions(){return this.options}resetOptions(){this._options=Object.freeze({})}}function u(Y){if(typeof Y.createDigest!="function")throw new Error("Expecting options.createDigest to be a function.");if(typeof Y.createHmacKey!="function")throw new Error("Expecting options.createHmacKey to be a function.");if(typeof Y.digits!="number")throw new Error("Expecting options.digits to be a number.");if(!Y.algorithm||r.indexOf(Y.algorithm)<0)throw new Error(`Expecting options.algorithm to be one of ${r.join(", ")}. Received ${Y.algorithm}.`);if(!Y.encoding||a.indexOf(Y.encoding)<0)throw new Error(`Expecting options.encoding to be one of ${a.join(", ")}. Received ${Y.encoding}.`)}const m=(Y,G,H)=>Buffer.from(G,H).toString("hex");function p(){return{algorithm:t.HashAlgorithms.SHA1,createHmacKey:m,createDigest:i,digits:6,encoding:t.KeyEncodings.ASCII}}function x(Y){const G={...p(),...Y};return u(G),Object.freeze(G)}function g(Y){const G=Y.toString(16);return o(G,16,"0")}function f(Y,G){const H=Buffer.from(Y,"hex"),ue=H[H.length-1]&15,ne=((H[ue]&127)<<24|(H[ue+1]&255)<<16|(H[ue+2]&255)<<8|H[ue+3]&255)%Math.pow(10,G);return o(String(ne),G,"0")}function b(Y,G,H){const ue=g(G),me=H.createHmacKey(H.algorithm,Y,H.encoding);return H.createDigest(H.algorithm,me,ue)}function j(Y,G,H){const ue=H.digest||b(Y,G,H);return f(ue,H.digits)}function v(Y,G,H,ue){if(!l(Y))return!1;const me=j(G,H,ue);return Y===me}function w(Y,G,H,ue,me){return c({algorithm:me.algorithm,digits:me.digits,type:t.Strategy.HOTP,accountName:Y,counter:ue,issuer:G,secret:H})}class y extends d{create(G={}){return new y(G)}allOptions(){return x(this.options)}generate(G,H){return j(G,H,this.allOptions())}check(G,H,ue){return v(G,H,ue,this.allOptions())}verify(G){if(typeof G!="object")throw new Error("Expecting argument 0 of verify to be an object");return this.check(G.token,G.secret,G.counter)}keyuri(G,H,ue,me){return w(G,H,ue,me,this.allOptions())}}function C(Y){if(typeof Y=="number")return[Math.abs(Y),Math.abs(Y)];if(Array.isArray(Y)){const[G,H]=Y;if(typeof G=="number"&&typeof H=="number")return[Math.abs(G),Math.abs(H)]}throw new Error("Expecting options.window to be an number or [number, number].")}function S(Y){if(u(Y),C(Y.window),typeof Y.epoch!="number")throw new Error("Expecting options.epoch to be a number.");if(typeof Y.step!="number")throw new Error("Expecting options.step to be a number.")}const _=(Y,G,H)=>{const ue=Y.length,me=Buffer.from(Y,G).toString("hex");if(ue<H){const ne=new Array(H-ue+1).join(me);return Buffer.from(ne,"hex").slice(0,H).toString("hex")}return me},E=(Y,G,H)=>{switch(Y){case t.HashAlgorithms.SHA1:return _(G,H,20);case t.HashAlgorithms.SHA256:return _(G,H,32);case t.HashAlgorithms.SHA512:return _(G,H,64);default:throw new Error(`Expecting algorithm to be one of ${r.join(", ")}. Received ${Y}.`)}};function A(){return{algorithm:t.HashAlgorithms.SHA1,createDigest:i,createHmacKey:E,digits:6,encoding:t.KeyEncodings.ASCII,epoch:Date.now(),step:30,window:0}}function R(Y){const G={...A(),...Y};return S(G),Object.freeze(G)}function I(Y,G){return Math.floor(Y/G/1e3)}function N(Y,G){const H=I(G.epoch,G.step);return j(Y,H,G)}function P(Y,G,H,ue){const me=[];if(ue===0)return me;for(let ne=1;ne<=ue;ne++){const Ae=G*ne*H;me.push(Y+Ae)}return me}function k(Y,G,H){const ue=C(H),me=G*1e3;return{current:Y,past:P(Y,-1,me,ue[0]),future:P(Y,1,me,ue[1])}}function D(Y,G,H){if(!l(Y))return!1;const ue=N(G,H);return Y===ue}function $(Y,G,H,ue){let me=null;return Y.some((ne,Ae)=>D(G,H,{...ue,epoch:ne})?(me=Ae+1,!0):!1),me}function L(Y,G,H){if(D(Y,G,H))return 0;const ue=k(H.epoch,H.step,H.window),me=$(ue.past,Y,G,H);return me!==null?me*-1:$(ue.future,Y,G,H)}function B(Y,G){return Math.floor(Y/1e3)%G}function T(Y,G){return G-B(Y,G)}function O(Y,G,H,ue){return c({algorithm:ue.algorithm,digits:ue.digits,step:ue.step,type:t.Strategy.TOTP,accountName:Y,issuer:G,secret:H})}class q extends y{create(G={}){return new q(G)}allOptions(){return R(this.options)}generate(G){return N(G,this.allOptions())}checkDelta(G,H){return L(G,H,this.allOptions())}check(G,H){return typeof this.checkDelta(G,H)=="number"}verify(G){if(typeof G!="object")throw new Error("Expecting argument 0 of verify to be an object");return this.check(G.token,G.secret)}timeRemaining(){const G=this.allOptions();return T(G.epoch,G.step)}timeUsed(){const G=this.allOptions();return B(G.epoch,G.step)}keyuri(G,H,ue){return O(G,H,ue,this.allOptions())}}function K(Y){if(S(Y),typeof Y.keyDecoder!="function")throw new Error("Expecting options.keyDecoder to be a function.");if(Y.keyEncoder&&typeof Y.keyEncoder!="function")throw new Error("Expecting options.keyEncoder to be a function.")}function le(){return{algorithm:t.HashAlgorithms.SHA1,createDigest:i,createHmacKey:E,digits:6,encoding:t.KeyEncodings.HEX,epoch:Date.now(),step:30,window:0}}function X(Y){const G={...le(),...Y};return K(G),Object.freeze(G)}function se(Y,G){return G.keyEncoder(Y,G.encoding)}function de(Y,G){return G.keyDecoder(Y,G.encoding)}function fe(Y,G){const H=G.createRandomBytes(Y,G.encoding);return se(H,G)}function z(Y,G){return N(de(Y,G),G)}function re(Y,G,H){return L(Y,de(G,H),H)}class ie extends q{create(G={}){return new ie(G)}allOptions(){return X(this.options)}generate(G){return z(G,this.allOptions())}checkDelta(G,H){return re(G,H,this.allOptions())}encode(G){return se(G,this.allOptions())}decode(G){return de(G,this.allOptions())}generateSecret(G=10){return fe(G,this.allOptions())}}t.Authenticator=ie,t.HASH_ALGORITHMS=r,t.HOTP=y,t.KEY_ENCODINGS=a,t.OTP=d,t.STRATEGY=n,t.TOTP=q,t.authenticatorCheckWithWindow=re,t.authenticatorDecoder=de,t.authenticatorDefaultOptions=le,t.authenticatorEncoder=se,t.authenticatorGenerateSecret=fe,t.authenticatorOptionValidator=K,t.authenticatorOptions=X,t.authenticatorToken=z,t.createDigestPlaceholder=i,t.hotpCheck=v,t.hotpCounter=g,t.hotpCreateHmacKey=m,t.hotpDefaultOptions=p,t.hotpDigestToToken=f,t.hotpKeyuri=w,t.hotpOptions=x,t.hotpOptionsValidator=u,t.hotpToken=j,t.isTokenValid=l,t.keyuri=c,t.objectValues=s,t.padStart=o,t.totpCheck=D,t.totpCheckByEpoch=$,t.totpCheckWithWindow=L,t.totpCounter=I,t.totpCreateHmacKey=E,t.totpDefaultOptions=A,t.totpEpochAvailable=k,t.totpKeyuri=O,t.totpOptions=R,t.totpOptionsValidator=S,t.totpPadSecret=_,t.totpTimeRemaining=T,t.totpTimeUsed=B,t.totpToken=N})(TT);/**
 * @otplib/preset-default
 *
 * @author Gerald Yeo <contact@fusedthought.com>
 * @version: 12.0.1
 * @license: MIT
 **/Object.defineProperty(k0,"__esModule",{value:!0});var kg=Pf,FC=Rf,M1=TT;const eV=new M1.HOTP({createDigest:kg.createDigest}),tV=new M1.TOTP({createDigest:kg.createDigest}),sV=new M1.Authenticator({createDigest:kg.createDigest,createRandomBytes:kg.createRandomBytes,keyDecoder:FC.keyDecoder,keyEncoder:FC.keyEncoder});k0.authenticator=sV;k0.hotp=eV;k0.totp=tV;/**
 * otplib
 *
 * @author Gerald Yeo <contact@fusedthought.com>
 * @version: 12.0.1
 * @license: MIT
 **/(function(t){Object.defineProperty(t,"__esModule",{value:!0});var s=k0;Object.keys(s).forEach(function(r){r!=="default"&&Object.defineProperty(t,r,{enumerable:!0,get:function(){return s[r]}})})})(mh);const tl={async login(t){const s=t.email,r=s.includes("@");let a=null,n=null;if(!r){const c=lu(s),{data:d,error:u}=await U.from("users").select("*").eq("phone",c).limit(1);if(!u&&d&&d.length>0)a=d[0];else{const{data:m}=await U.from("users").select("*").eq("phone",s).limit(1);m&&m.length>0?a=m[0]:n=u}}if(!a){const{data:c,error:d}=await U.from("users").select("*").eq("email",s).limit(1);!d&&c&&c.length>0?a=c[0]:n=d}if(n||!a)throw new Error("Invalid credentials");if(a.password_hash!==t.password)throw new Error("Invalid credentials");if(a.two_factor_enabled&&a.two_factor_secret){if(!t.mfaCode)return{mfaRequired:!0,userId:a.id,email:a.email};if(!mh.authenticator.verify({token:t.mfaCode,secret:a.two_factor_secret}))throw new Error("Invalid verification code")}let i=["user"];a.roles?i=a.roles.split(",").map(c=>c.trim()):a.role&&(i=[a.role]);const l={id:a.id,email:a.email,firstName:a.first_name,lastName:a.last_name,phone:a.phone,roles:i,kycStatus:a.kyc_status,kycTier:a.kyc_tier,emailVerified:a.email_verified,createdAt:a.created_at},o={accessToken:btoa(JSON.stringify({userId:l.id,email:l.email,roles:l.roles,exp:Date.now()+36e5})),refreshToken:btoa(JSON.stringify({userId:l.id,exp:Date.now()+6048e5})),expiresIn:3600};return await U.from("users").update({last_login_at:new Date().toISOString()}).eq("id",a.id),{user:l,tokens:o}},async register(t){const{data:s}=await U.from("users").select("id").eq("email",t.email).limit(1);if(s&&s.length>0)throw new Error("Email already registered");if(t.phone){const o=lu(t.phone),{data:c}=await U.from("users").select("id").eq("phone",o).limit(1);if(c&&c.length>0)throw new Error("Phone number already registered")}const r=`usr_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,{data:a,error:n}=await U.from("users").insert({external_id:r,email:t.email,phone:t.phone?lu(t.phone):null,password_hash:t.password,first_name:t.firstName,last_name:t.lastName,status:"ACTIVE",kyc_status:"NOT_STARTED",email_verified:!1,roles:"user",kyc_tier:0}).select().single();if(n||!a)throw console.error("Registration error:",n),new Error((n==null?void 0:n.message)||"Failed to create user");const i={id:a.id,email:a.email,firstName:a.first_name,lastName:a.last_name,phone:a.phone,roles:["user"],kycStatus:a.kyc_status,kycTier:a.kyc_tier,emailVerified:a.email_verified,createdAt:a.created_at},l={accessToken:btoa(JSON.stringify({userId:i.id,email:i.email,roles:i.roles,exp:Date.now()+36e5})),refreshToken:btoa(JSON.stringify({userId:i.id,exp:Date.now()+6048e5})),expiresIn:3600};return{user:i,tokens:l}},async logout(){localStorage.removeItem("accessToken"),localStorage.removeItem("refreshToken"),localStorage.removeItem("user")},async getProfile(){const t=this.getAccessToken();if(!t)throw new Error("Not authenticated");try{const s=JSON.parse(atob(t)),{data:r,error:a}=await U.from("users").select("*").eq("id",s.userId).limit(1);if(a||!r||r.length===0)throw new Error("User not found");const n=r[0];let i=["user"];return n.roles?i=n.roles.split(",").map(l=>l.trim()):n.role&&(i=[n.role]),{id:n.id,email:n.email,firstName:n.first_name,lastName:n.last_name,phone:n.phone,roles:i,kycStatus:n.kyc_status,kycTier:n.kyc_tier,emailVerified:n.email_verified,createdAt:n.created_at}}catch{throw new Error("Invalid token")}},async refreshToken(t){try{const s=JSON.parse(atob(t));if(s.exp<Date.now())throw new Error("Refresh token expired");const{data:r}=await U.from("users").select("*").eq("id",s.userId).limit(1);if(!r||r.length===0)throw new Error("User not found");const a=r[0];let n=["user"];return a.roles?n=a.roles.split(",").map(i=>i.trim()):a.role&&(n=[a.role]),{accessToken:btoa(JSON.stringify({userId:a.id,email:a.email,roles:n,exp:Date.now()+36e5})),refreshToken:btoa(JSON.stringify({userId:a.id,exp:Date.now()+6048e5})),expiresIn:3600}}catch{throw new Error("Invalid refresh token")}},setTokens(t){localStorage.setItem("accessToken",t.accessToken),localStorage.setItem("refreshToken",t.refreshToken)},getAccessToken(){return localStorage.getItem("accessToken")},getRefreshToken(){return localStorage.getItem("refreshToken")},isAuthenticated(){const t=this.getAccessToken();if(!t)return!1;try{return JSON.parse(atob(t)).exp>Date.now()}catch{return!1}}},PT=h.createContext(null);function rV({children:t}){const[s,r]=h.useState(null),[a,n]=h.useState(!0),i=h.useCallback(async()=>{try{const m=await tl.getProfile();r(m)}catch{r(null),localStorage.removeItem("accessToken"),localStorage.removeItem("refreshToken")}},[]);h.useEffect(()=>{(async()=>{tl.isAuthenticated()&&await i(),n(!1)})()},[i]);const l=async m=>{const p=await tl.login(m);if("mfaRequired"in p)return p;const x=p;return tl.setTokens(x.tokens),r(x.user),x.user},o=async m=>{const p=await tl.register(m);return tl.setTokens(p.tokens),r(p.user),p.user},c=async()=>{await tl.logout(),r(null)},d=h.useCallback(m=>{var p;return((p=s==null?void 0:s.roles)==null?void 0:p.includes(m))??!1},[s]),u=h.useCallback(m=>m.some(p=>{var x;return(x=s==null?void 0:s.roles)==null?void 0:x.includes(p)}),[s]);return e.jsx(PT.Provider,{value:{user:s,isLoading:a,isAuthenticated:!!s,login:l,register:o,logout:c,refreshUser:i,hasRole:d,hasAnyRole:u},children:t})}function wt(){const t=h.useContext(PT);if(!t)throw new Error("useAuth must be used within an AuthProvider");return t}const RT=h.createContext(void 0),Bb=()=>{const t=localStorage.getItem("accessToken");if(!t)return null;try{return JSON.parse(atob(t)).userId||null}catch{return null}};function aV({children:t}){const[s,r]=h.useState(!1),[a,n]=h.useState(!1),[i,l]=h.useState(0);h.useEffect(()=>{const u=Bb();u?(localStorage.getItem(`developerMode_${u}`)==="true"&&r(!0),o()):(r(!1),n(!1),l(0))},[]),h.useEffect(()=>{const u=Bb();u&&localStorage.setItem(`developerMode_${u}`,String(s))},[s]);const o=async()=>{const u=Bb();if(u)try{const{data:m,error:p}=await U.from("merchant_businesses").select("id").eq("merchant_id",u);if(p){console.error("Error checking businesses:",p);return}const x=(m==null?void 0:m.length)||0;l(x),n(x>0),x>0&&r(!0)}catch(m){console.error("Error checking businesses:",m)}},c=()=>{r(u=>!u)},d=u=>{r(u)};return e.jsx(RT.Provider,{value:{isDeveloperMode:s,toggleDeveloperMode:c,setDeveloperMode:d,hasBusinesses:a,businessCount:i,checkBusinesses:o},children:t})}function C0(){const t=h.useContext(RT);if(t===void 0)throw new Error("useDeveloperMode must be used within a DeveloperModeProvider");return t}const DT=h.createContext(void 0);function nV({children:t}){const[s,r]=h.useState([]),[a,n]=h.useState([]),i=()=>`${Date.now()}-${Math.random().toString(36).substr(2,9)}`,l=h.useCallback(g=>{const f=i(),b={...g,id:f,createdAt:new Date,duration:g.duration??5e3};r(j=>[...j,b]),b.duration&&b.duration>0&&setTimeout(()=>{o(f)},b.duration)},[]),o=h.useCallback(g=>{r(f=>f.filter(b=>b.id!==g))},[]),c=h.useCallback(g=>{const f={...g,id:i(),createdAt:new Date,read:!1};n(b=>[f,...b])},[]),d=h.useCallback(g=>{n(f=>f.map(b=>b.id===g?{...b,read:!0}:b))},[]),u=h.useCallback(()=>{n(g=>g.map(f=>({...f,read:!0})))},[]),m=h.useCallback(g=>{n(f=>f.filter(b=>b.id!==g))},[]),p=h.useCallback(()=>{n([])},[]),x=a.filter(g=>!g.read).length;return e.jsx(DT.Provider,{value:{toasts:s,showToast:l,dismissToast:o,notifications:a,unreadCount:x,addNotification:c,markAsRead:d,markAllAsRead:u,clearNotification:m,clearAllNotifications:p},children:t})}function IT(){const t=h.useContext(DT);if(!t)throw new Error("useNotification must be used within a NotificationProvider");return t}const MT=h.createContext(void 0),OC="peeap-theme";function iV({children:t}){const[s,r]=h.useState(()=>{if(typeof window>"u")return"system";const o=localStorage.getItem(OC);return o&&["light","dark","system"].includes(o)?o:"system"}),[a,n]=h.useState("light");h.useEffect(()=>{const o=()=>{if(s==="system"){const u=window.matchMedia("(prefers-color-scheme: dark)").matches;n(u?"dark":"light")}else n(s)};o();const c=window.matchMedia("(prefers-color-scheme: dark)"),d=()=>{s==="system"&&o()};return c.addEventListener("change",d),()=>c.removeEventListener("change",d)},[s]),h.useEffect(()=>{const o=window.document.documentElement;a==="dark"?o.classList.add("dark"):o.classList.remove("dark")},[a]);const i=o=>{r(o),localStorage.setItem(OC,o)},l=()=>{i(a==="dark"?"light":"dark")};return e.jsx(MT.Provider,{value:{theme:s,resolvedTheme:a,setTheme:i,toggleTheme:l,isDark:a==="dark"},children:t})}function lV(){const t=h.useContext(MT);if(t===void 0)throw new Error("useTheme must be used within a ThemeProvider");return t}/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var oV={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cV=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),ge=(t,s)=>{const r=h.forwardRef(({color:a="currentColor",size:n=24,strokeWidth:i=2,absoluteStrokeWidth:l,className:o="",children:c,...d},u)=>h.createElement("svg",{ref:u,...oV,width:n,height:n,stroke:a,strokeWidth:l?Number(i)*24/Number(n):i,className:["lucide",`lucide-${cV(t)}`,o].join(" "),...d},[...s.map(([m,p])=>h.createElement(m,p)),...Array.isArray(c)?c:[c]]));return r.displayName=`${t}`,r};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S0=ge("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ut=ge("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lt=ge("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dV=ge("Apple",[["path",{d:"M12 20.94c1.5 0 2.75 1.06 4 1.06 3 0 6-8 6-12.22A4.91 4.91 0 0 0 17 5c-2.22 0-4 1.44-5 2-1-.56-2.78-2-5-2a4.9 4.9 0 0 0-5 4.78C2 14 5 22 8 22c1.25 0 2.5-1.06 4-1.06Z",key:"3s7exb"}],["path",{d:"M10 2c1 .5 2 2 2 5",key:"fcco2y"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const la=ge("ArrowDownLeft",[["path",{d:"M17 7 7 17",key:"15tmo1"}],["path",{d:"M17 17H7V7",key:"1org7z"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Za=ge("ArrowDownRight",[["path",{d:"m7 7 10 10",key:"1fmybs"}],["path",{d:"M17 7v10H7",key:"6fjiku"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BC=ge("ArrowDownToLine",[["path",{d:"M12 17V3",key:"1cwfxf"}],["path",{d:"m6 11 6 6 6-6",key:"12ii2o"}],["path",{d:"M19 21H5",key:"150jfl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ci=ge("ArrowLeftRight",[["path",{d:"M8 3 4 7l4 4",key:"9rb6wj"}],["path",{d:"M4 7h16",key:"6tx8e3"}],["path",{d:"m16 21 4-4-4-4",key:"siv7j2"}],["path",{d:"M20 17H4",key:"h6l3hr"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _s=ge("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lr=ge("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $C=ge("ArrowUpFromLine",[["path",{d:"m18 9-6-6-6 6",key:"kcunyi"}],["path",{d:"M12 3v14",key:"7cf3v8"}],["path",{d:"M5 21h14",key:"11awu3"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xs=ge("ArrowUpRight",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cg=ge("AtSign",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M16 8v5a3 3 0 0 0 6 0v-1a10 10 0 1 0-4 8",key:"7n84p3"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hl=ge("Ban",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m4.9 4.9 14.2 14.2",key:"1m5liu"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Si=ge("Banknote",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M6 12h.01M18 12h.01",key:"113zkx"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bc=ge("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jl=ge("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uV=ge("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LT=ge("Book",[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H20v20H6.5a2.5 2.5 0 0 1 0-5H20",key:"t4utmx"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sg=ge("Briefcase",[["rect",{width:"20",height:"14",x:"2",y:"7",rx:"2",ry:"2",key:"eto64e"}],["path",{d:"M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"zwj3tp"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ua=ge("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L1=ge("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mn=ge("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mV=ge("CameraOff",[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["path",{d:"M7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16",key:"qmtpty"}],["path",{d:"M9.5 4h5L17 7h3a2 2 0 0 1 2 2v7.5",key:"1ufyfc"}],["path",{d:"M14.121 15.121A3 3 0 1 1 9.88 10.88",key:"11zox6"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yc=ge("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hV=ge("CheckCheck",[["path",{d:"M18 6 7 17l-5-5",key:"116fxf"}],["path",{d:"m22 10-7.5 7.5L13 16",key:"ke71qq"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const be=ge("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rs=ge("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zs=ge("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zj=ge("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vs=ge("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FT=ge("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pV=ge("ClipboardList",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const it=ge("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ir=ge("Code2",[["path",{d:"m18 16 4-4-4-4",key:"1inbqp"}],["path",{d:"m6 8-4 4 4 4",key:"15zrgr"}],["path",{d:"m14.5 4-5 16",key:"e7oirm"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F1=ge("Code",[["polyline",{points:"16 18 22 12 16 6",key:"z7tu5w"}],["polyline",{points:"8 6 2 12 8 18",key:"1eg1df"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vs=ge("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Je=ge("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _g=ge("Crown",[["path",{d:"m2 4 3 12h14l3-12-6 7-4-7-4 7-6-7zm3 16h14",key:"zkxr6b"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const js=ge("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ws=ge("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xV=ge("Droplets",[["path",{d:"M7 16.3c2.2 0 4-1.83 4-4.05 0-1.16-.57-2.26-1.71-3.19S7.29 6.75 7 5.3c-.29 1.45-1.14 2.84-2.29 3.76S3 11.1 3 12.25c0 2.22 1.8 4.05 4 4.05z",key:"1ptgy4"}],["path",{d:"M12.56 6.6A10.97 10.97 0 0 0 14 3.02c.5 2.5 2 4.9 4 6.5s3 3.5 3 5.5a6.98 6.98 0 0 1-11.91 4.97",key:"1sl1rz"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fr=ge("ExternalLink",[["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}],["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["line",{x1:"10",x2:"21",y1:"14",y2:"3",key:"18c3s4"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ln=ge("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const es=ge("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gV=ge("Factory",[["path",{d:"M2 20a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V8l-7 5V8l-7 5V4a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2Z",key:"159hny"}],["path",{d:"M17 18h1",key:"uldtlt"}],["path",{d:"M12 18h1",key:"s9uhes"}],["path",{d:"M7 18h1",key:"1neino"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xj=ge("FileCheck",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["path",{d:"m9 15 2 2 4-4",key:"1grp1n"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OT=ge("FileCode",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["path",{d:"m10 13-2 2 2 2",key:"17smn8"}],["path",{d:"m14 17 2-2-2-2",key:"14mezr"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yh=ge("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fV=ge("Film",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M7 3v18",key:"bbkbws"}],["path",{d:"M3 7.5h4",key:"zfgn84"}],["path",{d:"M3 12h18",key:"1i2n21"}],["path",{d:"M3 16.5h4",key:"1230mu"}],["path",{d:"M17 3v18",key:"in4fa5"}],["path",{d:"M17 7.5h4",key:"myr1c1"}],["path",{d:"M17 16.5h4",key:"go4c1d"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bn=ge("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BT=ge("Flag",[["path",{d:"M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z",key:"i9b6wo"}],["line",{x1:"4",x2:"4",y1:"22",y2:"15",key:"1cm3nv"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yV=ge("FlipHorizontal",[["path",{d:"M8 3H5a2 2 0 0 0-2 2v14c0 1.1.9 2 2 2h3",key:"1i73f7"}],["path",{d:"M16 3h3a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-3",key:"saxlbk"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"M12 14v2",key:"8jcxud"}],["path",{d:"M12 8v2",key:"1woqiv"}],["path",{d:"M12 2v2",key:"tus03m"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pp=ge("Gift",[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bV=ge("Github",[["path",{d:"M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4",key:"tonef"}],["path",{d:"M9 18c-4.51 2-5-2-7-2",key:"9comsn"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const li=ge("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vV=ge("GraduationCap",[["path",{d:"M22 10v6M2 10l10-5 10 5-10 5z",key:"1ef52a"}],["path",{d:"M6 12v5c3 3 9 3 12 0v-5",key:"1f75yj"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jV=ge("HardHat",[["path",{d:"M2 18a1 1 0 0 0 1 1h18a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1H3a1 1 0 0 0-1 1v2z",key:"1dej2m"}],["path",{d:"M10 10V5a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v5",key:"1p9q5i"}],["path",{d:"M4 15v-3a6 6 0 0 1 6-6h0",key:"1uc279"}],["path",{d:"M14 6h0a6 6 0 0 1 6 6v3",key:"1j9mnm"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const No=ge("Headphones",[["path",{d:"M3 14h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-7a9 9 0 0 1 18 0v7a2 2 0 0 1-2 2h-1a2 2 0 0 1-2-2v-3a2 2 0 0 1 2-2h3",key:"1xhozi"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UC=ge("HeartHandshake",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}],["path",{d:"M12 5 9.04 7.96a2.17 2.17 0 0 0 0 3.08v0c.82.82 2.13.85 3 .07l2.07-1.9a2.82 2.82 0 0 1 3.79 0l2.96 2.66",key:"12sd6o"}],["path",{d:"m18 15-2-2",key:"60u0ii"}],["path",{d:"m15 18-2-2",key:"6p76be"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wV=ge("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O1=ge("HelpCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NV=ge("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kV=ge("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CV=ge("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SV=ge("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wl=ge("Key",[["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["path",{d:"m15.5 7.5 3 3L22 7l-3-3",key:"1rn1fs"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $T=ge("Landmark",[["line",{x1:"3",x2:"21",y1:"22",y2:"22",key:"j8o0r"}],["line",{x1:"6",x2:"6",y1:"18",y2:"11",key:"10tf0k"}],["line",{x1:"10",x2:"10",y1:"18",y2:"11",key:"54lgf6"}],["line",{x1:"14",x2:"14",y1:"18",y2:"11",key:"380y"}],["line",{x1:"18",x2:"18",y1:"18",y2:"11",key:"1kevvc"}],["polygon",{points:"12 2 20 7 4 7",key:"jkujk7"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Eg=ge("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Df=ge("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qh=ge("Link2",[["path",{d:"M9 17H7A5 5 0 0 1 7 7h2",key:"8i5ue5"}],["path",{d:"M15 7h2a5 5 0 1 1 0 10h-2",key:"1b9ql8"}],["line",{x1:"8",x2:"16",y1:"12",y2:"12",key:"1jonct"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _V=ge("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ie=ge("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xs=ge("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ew=ge("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _0=ge("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Va=ge("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vi=ge("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EV=ge("Megaphone",[["path",{d:"m3 11 18-5v12L3 14v-3z",key:"n962bs"}],["path",{d:"M11.6 16.8a3 3 0 1 1-5.8-1.6",key:"1yl0tm"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E0=ge("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ao=ge("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UT=ge("Monitor",[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VC=ge("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AV=ge("MoreHorizontal",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nd=ge("MoreVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TV=ge("PackagePlus",[["path",{d:"M16 16h6",key:"100bgy"}],["path",{d:"M19 13v6",key:"85cyf1"}],["path",{d:"M21 10V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l2-1.14",key:"e7tb2h"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["line",{x1:"12",x2:"12",y1:"22",y2:"12",key:"a4e8g8"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $b=ge("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VT=ge("Pause",[["rect",{width:"4",height:"16",x:"6",y:"4",key:"iffhe4"}],["rect",{width:"4",height:"16",x:"14",y:"4",key:"sjin7j"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PV=ge("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.5 3.5a2.12 2.12 0 0 1 3 3L7 19l-4 1 1-4Z",key:"ymcmye"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nl=ge("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qc=ge("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pu=ge("Percent",[["line",{x1:"19",x2:"5",y1:"5",y2:"19",key:"1x9vlm"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5",key:"4mh3h7"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RV=ge("PhoneCall",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}],["path",{d:"M14.05 2a9 9 0 0 1 8 7.94",key:"vmijpz"}],["path",{d:"M14.05 6A5 5 0 0 1 18 10",key:"13nbpp"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lr=ge("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const di=ge("PiggyBank",[["path",{d:"M19 5c-1.5 0-2.8 1.4-3 2-3.5-1.5-11-.3-11 5 0 1.8 0 3 2 4.5V20h4v-2h3v2h4v-4c1-.5 1.7-1 2-2h2v-4h-2c0-1-.5-1.5-1-2h0V5z",key:"uf6l00"}],["path",{d:"M2 9v1c0 1.1.9 2 2 2h1",key:"nm575m"}],["path",{d:"M16 11h0",key:"k2aug8"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DV=ge("Plane",[["path",{d:"M17.8 19.2 16 11l3.5-3.5C21 6 21.5 4 21 3c-1-.5-3 0-4.5 1.5L13 8 4.8 6.2c-.5-.1-.9.1-1.1.5l-.3.5c-.2.5-.1 1 .3 1.3L9 12l-2 3H4l-1 1 3 2 2 3 1-1v-3l3-2 3.5 5.3c.3.4.8.5 1.3.3l.5-.2c.4-.3.6-.7.5-1.2z",key:"1v9wt8"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const If=ge("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const It=ge("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IV=ge("Puzzle",[["path",{d:"M19.439 7.85c-.049.322.059.648.289.878l1.568 1.568c.47.47.706 1.087.706 1.704s-.235 1.233-.706 1.704l-1.611 1.611a.98.98 0 0 1-.837.276c-.47-.07-.802-.48-.968-.925a2.501 2.501 0 1 0-3.214 3.214c.446.166.855.497.925.968a.979.979 0 0 1-.276.837l-1.61 1.61a2.404 2.404 0 0 1-1.705.707 2.402 2.402 0 0 1-1.704-.706l-1.568-1.568a1.026 1.026 0 0 0-.877-.29c-.493.074-.84.504-1.02.968a2.5 2.5 0 1 1-3.237-3.237c.464-.18.894-.527.967-1.02a1.026 1.026 0 0 0-.289-.877l-1.568-1.568A2.402 2.402 0 0 1 1.998 12c0-.617.236-1.234.706-1.704L4.23 8.77c.24-.24.581-.353.917-.303.515.077.877.528 1.073 1.01a2.5 2.5 0 1 0 3.259-3.259c-.482-.196-.933-.558-1.01-1.073-.05-.336.062-.676.303-.917l1.525-1.525A2.402 2.402 0 0 1 12 1.998c.617 0 1.234.236 1.704.706l1.568 1.568c.23.23.556.338.877.29.493-.074.84-.504 1.02-.968a2.5 2.5 0 1 1 3.237 3.237c-.464.18-.894.527-.967 1.02Z",key:"i0oyt7"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wa=ge("QrCode",[["rect",{width:"5",height:"5",x:"3",y:"3",rx:"1",key:"1tu5fj"}],["rect",{width:"5",height:"5",x:"16",y:"3",rx:"1",key:"1v8r4q"}],["rect",{width:"5",height:"5",x:"3",y:"16",rx:"1",key:"1x03jg"}],["path",{d:"M21 16h-3a2 2 0 0 0-2 2v3",key:"177gqh"}],["path",{d:"M21 21v.01",key:"ents32"}],["path",{d:"M12 7v3a2 2 0 0 1-2 2H7",key:"8crl2c"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M12 3h.01",key:"n36tog"}],["path",{d:"M12 16v.01",key:"133mhm"}],["path",{d:"M16 12h1",key:"1slzba"}],["path",{d:"M21 12v.01",key:"1lwtk9"}],["path",{d:"M12 21v-1",key:"1880an"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qT=ge("Receipt",[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1-2-1Z",key:"wqdwcb"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17V7",key:"pyj7ub"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vt=ge("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WT=ge("Repeat",[["path",{d:"m17 2 4 4-4 4",key:"nntrym"}],["path",{d:"M3 11v-1a4 4 0 0 1 4-4h14",key:"84bu3i"}],["path",{d:"m7 22-4-4 4-4",key:"1wqhfi"}],["path",{d:"M21 13v1a4 4 0 0 1-4 4H3",key:"1rx37r"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ru=ge("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oa=ge("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zT=ge("Scan",[["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ts=ge("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ba=ge("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const or=ge("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GT=ge("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jc=ge("ShieldCheck",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xt=ge("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MV=ge("ShoppingBag",[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mf=ge("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Na=ge("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tw=ge("Snowflake",[["line",{x1:"2",x2:"22",y1:"12",y2:"12",key:"1dnqot"}],["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"m20 16-4-4 4-4",key:"rquw4f"}],["path",{d:"m4 8 4 4-4 4",key:"12s3z9"}],["path",{d:"m16 4-4 4-4-4",key:"1tumq1"}],["path",{d:"m8 20 4-4 4 4",key:"9p200w"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sw=ge("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ft=ge("Store",[["path",{d:"m2 7 4.41-4.41A2 2 0 0 1 7.83 2h8.34a2 2 0 0 1 1.42.59L22 7",key:"ztvudi"}],["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["path",{d:"M15 22v-4a2 2 0 0 0-2-2h-2a2 2 0 0 0-2 2v4",key:"2ebpfo"}],["path",{d:"M2 7h20",key:"1fcdvo"}],["path",{d:"M22 7v3a2 2 0 0 1-2 2v0a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 16 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 12 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 8 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 4 12v0a2 2 0 0 1-2-2V7",key:"jon5kx"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qC=ge("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lf=ge("Tag",[["path",{d:"M12 2H2v10l9.29 9.29c.94.94 2.48.94 3.42 0l6.58-6.58c.94-.94.94-2.48 0-3.42L12 2Z",key:"14b2ls"}],["path",{d:"M7 7h.01",key:"7u93v4"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B1=ge("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KT=ge("Terminal",[["polyline",{points:"4 17 10 11 4 5",key:"akl6gq"}],["line",{x1:"12",x2:"20",y1:"19",y2:"19",key:"q2wloq"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HT=ge("TestTube",[["path",{d:"M14.5 2v17.5c0 1.4-1.1 2.5-2.5 2.5h0c-1.4 0-2.5-1.1-2.5-2.5V2",key:"187lwq"}],["path",{d:"M8.5 2h7",key:"csnxdl"}],["path",{d:"M14.5 16h-5",key:"1ox875"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rw=ge("Ticket",[["path",{d:"M2 9a3 3 0 0 1 0 6v2a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-2a3 3 0 0 1 0-6V7a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2Z",key:"qn84l0"}],["path",{d:"M13 5v2",key:"dyzc3o"}],["path",{d:"M13 17v2",key:"1ont0d"}],["path",{d:"M13 11v2",key:"1wjjxi"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nr=ge("ToggleLeft",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"6",ry:"6",key:"f2vt7d"}],["circle",{cx:"8",cy:"12",r:"2",key:"1nvbw3"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kr=ge("ToggleRight",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"6",ry:"6",key:"f2vt7d"}],["circle",{cx:"16",cy:"12",r:"2",key:"4ma0v8"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Or=ge("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rr=ge("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sx=ge("Truck",[["path",{d:"M5 18H3c-.6 0-1-.4-1-1V7c0-.6.4-1 1-1h10c.6 0 1 .4 1 1v11",key:"hs4xqm"}],["path",{d:"M14 9h4l4 4v4c0 .6-.4 1-1 1h-2",key:"11fp61"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LV=ge("Tv",[["rect",{width:"20",height:"15",x:"2",y:"7",rx:"2",ry:"2",key:"10ag99"}],["polyline",{points:"17 2 12 7 7 2",key:"11pgbg"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A0=ge("Unlock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 9.9-1",key:"1mm8w8"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Du=ge("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YT=ge("UserCog",[["circle",{cx:"18",cy:"15",r:"3",key:"gjjjvw"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M10 15H6a4 4 0 0 0-4 4v2",key:"1nfge6"}],["path",{d:"m21.7 16.4-.9-.3",key:"12j9ji"}],["path",{d:"m15.2 13.9-.9-.3",key:"1fdjdi"}],["path",{d:"m16.6 18.7.3-.9",key:"heedtr"}],["path",{d:"m19.1 12.2.3-.9",key:"1af3ki"}],["path",{d:"m19.6 18.7-.4-1",key:"1x9vze"}],["path",{d:"m16.8 12.3-.4-1",key:"vqeiwj"}],["path",{d:"m14.3 16.6 1-.4",key:"1qlj63"}],["path",{d:"m20.7 13.8 1-.4",key:"1v5t8k"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FV=ge("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Es=ge("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ia=ge("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OV=ge("Utensils",[["path",{d:"M3 2v7c0 1.1.9 2 2 2h4a2 2 0 0 0 2-2V2",key:"cjf0a3"}],["path",{d:"M7 2v20",key:"1473qp"}],["path",{d:"M21 15V2v0a5 5 0 0 0-5 5v6c0 1.1.9 2 2 2h3Zm0 0v7",key:"1ogz0v"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BV=ge("Volume2",[["polygon",{points:"11 5 6 9 2 9 2 15 6 15 11 19 11 5",key:"16drj5"}],["path",{d:"M15.54 8.46a5 5 0 0 1 0 7.07",key:"ltjumu"}],["path",{d:"M19.07 4.93a10 10 0 0 1 0 14.14",key:"1kegas"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jt=ge("Wallet",[["path",{d:"M21 12V7H5a2 2 0 0 1 0-4h14v4",key:"195gfw"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h16v-5",key:"195n9w"}],["path",{d:"M18 12a2 2 0 0 0 0 4h4v-4Z",key:"vllfpd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zc=ge("Webhook",[["path",{d:"M18 16.98h-5.99c-1.1 0-1.95.94-2.48 1.9A4 4 0 0 1 2 17c.01-.7.2-1.4.57-2",key:"q3hayz"}],["path",{d:"m6 17 3.13-5.78c.53-.97.1-2.18-.5-3.1a4 4 0 1 1 6.89-4.06",key:"1go1hn"}],["path",{d:"m12 6 3.13 5.73C15.66 12.7 16.9 13 18 13a4 4 0 0 1 0 8",key:"qlwsc0"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $V=ge("Wheat",[["path",{d:"M2 22 16 8",key:"60hf96"}],["path",{d:"M3.47 12.53 5 11l1.53 1.53a3.5 3.5 0 0 1 0 4.94L5 19l-1.53-1.53a3.5 3.5 0 0 1 0-4.94Z",key:"1rdhi6"}],["path",{d:"M7.47 8.53 9 7l1.53 1.53a3.5 3.5 0 0 1 0 4.94L9 15l-1.53-1.53a3.5 3.5 0 0 1 0-4.94Z",key:"1sdzmb"}],["path",{d:"M11.47 4.53 13 3l1.53 1.53a3.5 3.5 0 0 1 0 4.94L13 11l-1.53-1.53a3.5 3.5 0 0 1 0-4.94Z",key:"eoatbi"}],["path",{d:"M20 2h2v2a4 4 0 0 1-4 4h-2V6a4 4 0 0 1 4-4Z",key:"19rau1"}],["path",{d:"M11.47 17.47 13 19l-1.53 1.53a3.5 3.5 0 0 1-4.94 0L5 19l1.53-1.53a3.5 3.5 0 0 1 4.94 0Z",key:"tc8ph9"}],["path",{d:"M15.47 13.47 17 15l-1.53 1.53a3.5 3.5 0 0 1-4.94 0L9 15l1.53-1.53a3.5 3.5 0 0 1 4.94 0Z",key:"2m8kc5"}],["path",{d:"M19.47 9.47 21 11l-1.53 1.53a3.5 3.5 0 0 1-4.94 0L13 11l1.53-1.53a3.5 3.5 0 0 1 4.94 0Z",key:"vex3ng"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UV=ge("WifiOff",[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["path",{d:"M8.5 16.5a5 5 0 0 1 7 0",key:"sej527"}],["path",{d:"M2 8.82a15 15 0 0 1 4.17-2.65",key:"11utq1"}],["path",{d:"M10.66 5c4.01-.36 8.14.9 11.34 3.76",key:"hxefdu"}],["path",{d:"M16.85 11.25a10 10 0 0 1 2.22 1.68",key:"q734kn"}],["path",{d:"M5 13a10 10 0 0 1 5.24-2.76",key:"piq4yl"}],["line",{x1:"12",x2:"12.01",y1:"20",y2:"20",key:"of4bc4"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mi=ge("Wifi",[["path",{d:"M5 13a10 10 0 0 1 14 0",key:"6v8j51"}],["path",{d:"M8.5 16.5a5 5 0 0 1 7 0",key:"sej527"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["line",{x1:"12",x2:"12.01",y1:"20",y2:"20",key:"of4bc4"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ft=ge("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lt=ge("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ui=ge("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]);function QT(t){var s,r,a="";if(typeof t=="string"||typeof t=="number")a+=t;else if(typeof t=="object")if(Array.isArray(t)){var n=t.length;for(s=0;s<n;s++)t[s]&&(r=QT(t[s]))&&(a&&(a+=" "),a+=r)}else for(r in t)t[r]&&(a&&(a+=" "),a+=r);return a}function oe(){for(var t,s,r=0,a="",n=arguments.length;r<n;r++)(t=arguments[r])&&(s=QT(t))&&(a&&(a+=" "),a+=s);return a}const VV={success:be,error:ft,warning:Lt,info:SV},qV={success:{bg:"bg-green-50",icon:"text-green-500",border:"border-green-200"},error:{bg:"bg-red-50",icon:"text-red-500",border:"border-red-200"},warning:{bg:"bg-yellow-50",icon:"text-yellow-500",border:"border-yellow-200"},info:{bg:"bg-blue-50",icon:"text-blue-500",border:"border-blue-200"}};function WV({notification:t,onDismiss:s}){const[r,a]=h.useState(!1),n=VV[t.type],i=qV[t.type],l=()=>{a(!0),setTimeout(()=>s(t.id),300)};return e.jsxs("div",{className:oe("flex items-start gap-3 p-4 rounded-lg border shadow-lg max-w-sm w-full transform transition-all duration-300",i.bg,i.border,r?"opacity-0 translate-x-full":"opacity-100 translate-x-0"),children:[e.jsx(n,{className:oe("w-5 h-5 flex-shrink-0 mt-0.5",i.icon)}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:t.title}),t.message&&e.jsx("p",{className:"mt-1 text-sm text-gray-600",children:t.message}),t.action&&e.jsx("button",{onClick:t.action.onClick,className:"mt-2 text-sm font-medium text-primary-600 hover:text-primary-500",children:t.action.label})]}),e.jsx("button",{onClick:l,className:"flex-shrink-0 p-1 rounded-lg hover:bg-gray-200/50 transition-colors",children:e.jsx(lt,{className:"w-4 h-4 text-gray-400"})})]})}function zV({toasts:t,onDismiss:s}){return t.length===0?null:e.jsx("div",{className:"fixed top-4 right-4 z-[100] flex flex-col gap-2",children:t.map(r=>e.jsx(WV,{notification:r,onDismiss:s},r.id))})}function GV(){const{toasts:t,dismissToast:s}=IT();return e.jsx(zV,{toasts:t,onDismiss:s})}function Vr({children:t}){const{isAuthenticated:s,isLoading:r}=wt(),a=Ga();return r?e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsx(Ie,{className:"w-8 h-8 animate-spin text-primary-600"})}):s?e.jsx(e.Fragment,{children:t}):e.jsx(gg,{to:"/login",state:{from:a},replace:!0})}function st({children:t,allowedRoles:s}){var o,c;const{user:r,isAuthenticated:a,isLoading:n}=wt(),i=Ga();if(n)return e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsx(Ie,{className:"w-8 h-8 animate-spin text-primary-600"})});if(!a||!r)return e.jsx(gg,{to:"/login",state:{from:i},replace:!0});if(!((o=r.roles)==null?void 0:o.some(d=>s.includes(d)))){const d=JT(((c=r.roles)==null?void 0:c[0])||"user");return e.jsx(gg,{to:d,replace:!0})}return e.jsx(e.Fragment,{children:t})}function JT(t){switch(t){case"superadmin":case"admin":return"/admin";case"merchant":return"/merchant";case"developer":return"/developer";case"agent":return"/agent";case"user":default:return"/dashboard"}}function Ub(t){if(!t||t.length===0)return"/dashboard";const s=["superadmin","admin","merchant","developer","agent","user"];for(const r of s)if(t.includes(r))return JT(r);return"/dashboard"}const De=h.forwardRef(({className:t,variant:s="primary",size:r="md",isLoading:a,disabled:n,children:i,...l},o)=>{const c="inline-flex items-center justify-center font-medium rounded-lg transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed",d={primary:"bg-primary-600 text-white hover:bg-primary-700 focus:ring-primary-500",secondary:"bg-gray-200 text-gray-900 hover:bg-gray-300 focus:ring-gray-500",outline:"border border-gray-300 bg-white text-gray-700 hover:bg-gray-50 focus:ring-primary-500",ghost:"text-gray-700 hover:bg-gray-100 focus:ring-gray-500",danger:"bg-red-600 text-white hover:bg-red-700 focus:ring-red-500"},u={sm:"px-3 py-1.5 text-sm",md:"px-4 py-2 text-sm",lg:"px-6 py-3 text-base"};return e.jsxs("button",{ref:o,className:oe(c,d[s],u[r],t),disabled:n||a,...l,children:[a&&e.jsx(Ie,{className:"mr-2 h-4 w-4 animate-spin"}),i]})});De.displayName="Button";const _n=h.forwardRef(({className:t,label:s,error:r,helperText:a,id:n,...i},l)=>{const o=n||i.name;return e.jsxs("div",{className:"w-full",children:[s&&e.jsx("label",{htmlFor:o,className:"block text-sm font-medium text-gray-700 mb-1",children:s}),e.jsx("input",{ref:l,id:o,className:oe("w-full px-3 py-2 border rounded-lg shadow-sm transition-colors","focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500",r?"border-red-500 focus:ring-red-500 focus:border-red-500":"border-gray-300",t),...i}),r&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:r}),a&&!r&&e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:a})]})});_n.displayName="Input";const ZT=h.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"}),Ff=h.createContext({}),$1=h.createContext(null),Of=typeof document<"u",KV=Of?h.useLayoutEffect:h.useEffect,XT=h.createContext({strict:!1}),U1=t=>t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),HV="framerAppearId",eP="data-"+U1(HV);function YV(t,s,r,a){const{visualElement:n}=h.useContext(Ff),i=h.useContext(XT),l=h.useContext($1),o=h.useContext(ZT).reducedMotion,c=h.useRef();a=a||i.renderer,!c.current&&a&&(c.current=a(t,{visualState:s,parent:n,props:r,presenceContext:l,blockInitialAnimation:l?l.initial===!1:!1,reducedMotionConfig:o}));const d=c.current;h.useInsertionEffect(()=>{d&&d.update(r,l)});const u=h.useRef(!!(r[eP]&&!window.HandoffComplete));return KV(()=>{d&&(d.render(),u.current&&d.animationState&&d.animationState.animateChanges())}),h.useEffect(()=>{d&&(d.updateFeatures(),!u.current&&d.animationState&&d.animationState.animateChanges(),u.current&&(u.current=!1,window.HandoffComplete=!0))}),d}function Hd(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function QV(t,s,r){return h.useCallback(a=>{a&&t.mount&&t.mount(a),s&&(a?s.mount(a):s.unmount()),r&&(typeof r=="function"?r(a):Hd(r)&&(r.current=a))},[s])}function Jh(t){return typeof t=="string"||Array.isArray(t)}function Bf(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}const V1=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],q1=["initial",...V1];function $f(t){return Bf(t.animate)||q1.some(s=>Jh(t[s]))}function tP(t){return!!($f(t)||t.variants)}function JV(t,s){if($f(t)){const{initial:r,animate:a}=t;return{initial:r===!1||Jh(r)?r:void 0,animate:Jh(a)?a:void 0}}return t.inherit!==!1?s:{}}function ZV(t){const{initial:s,animate:r}=JV(t,h.useContext(Ff));return h.useMemo(()=>({initial:s,animate:r}),[WC(s),WC(r)])}function WC(t){return Array.isArray(t)?t.join(" "):t}const zC={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Zh={};for(const t in zC)Zh[t]={isEnabled:s=>zC[t].some(r=>!!s[r])};function XV(t){for(const s in t)Zh[s]={...Zh[s],...t[s]}}const sP=h.createContext({}),rP=h.createContext({}),eq=Symbol.for("motionComponentSymbol");function tq({preloadedFeatures:t,createVisualElement:s,useRender:r,useVisualState:a,Component:n}){t&&XV(t);function i(o,c){let d;const u={...h.useContext(ZT),...o,layoutId:sq(o)},{isStatic:m}=u,p=ZV(o),x=a(o,m);if(!m&&Of){p.visualElement=YV(n,x,u,s);const g=h.useContext(rP),f=h.useContext(XT).strict;p.visualElement&&(d=p.visualElement.loadFeatures(u,f,t,g))}return h.createElement(Ff.Provider,{value:p},d&&p.visualElement?h.createElement(d,{visualElement:p.visualElement,...u}):null,r(n,o,QV(x,p.visualElement,c),x,m,p.visualElement))}const l=h.forwardRef(i);return l[eq]=n,l}function sq({layoutId:t}){const s=h.useContext(sP).id;return s&&t!==void 0?s+"-"+t:t}function rq(t){function s(a,n={}){return tq(t(a,n))}if(typeof Proxy>"u")return s;const r=new Map;return new Proxy(s,{get:(a,n)=>(r.has(n)||r.set(n,s(n)),r.get(n))})}const aq=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function W1(t){return typeof t!="string"||t.includes("-")?!1:!!(aq.indexOf(t)>-1||/[A-Z]/.test(t))}const Ag={};function nq(t){Object.assign(Ag,t)}const T0=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],id=new Set(T0);function aP(t,{layout:s,layoutId:r}){return id.has(t)||t.startsWith("origin")||(s||r!==void 0)&&(!!Ag[t]||t==="opacity")}const qa=t=>!!(t&&t.getVelocity),iq={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},lq=T0.length;function oq(t,{enableHardwareAcceleration:s=!0,allowTransformNone:r=!0},a,n){let i="";for(let l=0;l<lq;l++){const o=T0[l];if(t[o]!==void 0){const c=iq[o]||o;i+=`${c}(${t[o]}) `}}return s&&!t.z&&(i+="translateZ(0)"),i=i.trim(),n?i=n(t,a?"":i):r&&a&&(i="none"),i}const nP=t=>s=>typeof s=="string"&&s.startsWith(t),iP=nP("--"),aw=nP("var(--"),cq=/var\s*\(\s*--[\w-]+(\s*,\s*(?:(?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)+)?\s*\)/g,dq=(t,s)=>s&&typeof t=="number"?s.transform(t):t,To=(t,s,r)=>Math.min(Math.max(r,t),s),ld={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},hh={...ld,transform:t=>To(0,1,t)},Rp={...ld,default:1},ph=t=>Math.round(t*1e5)/1e5,Uf=/(-)?([\d]*\.?[\d])+/g,lP=/(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))/gi,uq=/^(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))$/i;function P0(t){return typeof t=="string"}const R0=t=>({test:s=>P0(s)&&s.endsWith(t)&&s.split(" ").length===1,parse:parseFloat,transform:s=>`${s}${t}`}),Vl=R0("deg"),Li=R0("%"),mt=R0("px"),mq=R0("vh"),hq=R0("vw"),GC={...Li,parse:t=>Li.parse(t)/100,transform:t=>Li.transform(t*100)},KC={...ld,transform:Math.round},oP={borderWidth:mt,borderTopWidth:mt,borderRightWidth:mt,borderBottomWidth:mt,borderLeftWidth:mt,borderRadius:mt,radius:mt,borderTopLeftRadius:mt,borderTopRightRadius:mt,borderBottomRightRadius:mt,borderBottomLeftRadius:mt,width:mt,maxWidth:mt,height:mt,maxHeight:mt,size:mt,top:mt,right:mt,bottom:mt,left:mt,padding:mt,paddingTop:mt,paddingRight:mt,paddingBottom:mt,paddingLeft:mt,margin:mt,marginTop:mt,marginRight:mt,marginBottom:mt,marginLeft:mt,rotate:Vl,rotateX:Vl,rotateY:Vl,rotateZ:Vl,scale:Rp,scaleX:Rp,scaleY:Rp,scaleZ:Rp,skew:Vl,skewX:Vl,skewY:Vl,distance:mt,translateX:mt,translateY:mt,translateZ:mt,x:mt,y:mt,z:mt,perspective:mt,transformPerspective:mt,opacity:hh,originX:GC,originY:GC,originZ:mt,zIndex:KC,fillOpacity:hh,strokeOpacity:hh,numOctaves:KC};function z1(t,s,r,a){const{style:n,vars:i,transform:l,transformOrigin:o}=t;let c=!1,d=!1,u=!0;for(const m in s){const p=s[m];if(iP(m)){i[m]=p;continue}const x=oP[m],g=dq(p,x);if(id.has(m)){if(c=!0,l[m]=g,!u)continue;p!==(x.default||0)&&(u=!1)}else m.startsWith("origin")?(d=!0,o[m]=g):n[m]=g}if(s.transform||(c||a?n.transform=oq(t.transform,r,u,a):n.transform&&(n.transform="none")),d){const{originX:m="50%",originY:p="50%",originZ:x=0}=o;n.transformOrigin=`${m} ${p} ${x}`}}const G1=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function cP(t,s,r){for(const a in s)!qa(s[a])&&!aP(a,r)&&(t[a]=s[a])}function pq({transformTemplate:t},s,r){return h.useMemo(()=>{const a=G1();return z1(a,s,{enableHardwareAcceleration:!r},t),Object.assign({},a.vars,a.style)},[s])}function xq(t,s,r){const a=t.style||{},n={};return cP(n,a,t),Object.assign(n,pq(t,s,r)),t.transformValues?t.transformValues(n):n}function gq(t,s,r){const a={},n=xq(t,s,r);return t.drag&&t.dragListener!==!1&&(a.draggable=!1,n.userSelect=n.WebkitUserSelect=n.WebkitTouchCallout="none",n.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(a.tabIndex=0),a.style=n,a}const fq=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","transformValues","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Tg(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||fq.has(t)}let dP=t=>!Tg(t);function yq(t){t&&(dP=s=>s.startsWith("on")?!Tg(s):t(s))}try{yq(require("@emotion/is-prop-valid").default)}catch{}function bq(t,s,r){const a={};for(const n in t)n==="values"&&typeof t.values=="object"||(dP(n)||r===!0&&Tg(n)||!s&&!Tg(n)||t.draggable&&n.startsWith("onDrag"))&&(a[n]=t[n]);return a}function HC(t,s,r){return typeof t=="string"?t:mt.transform(s+r*t)}function vq(t,s,r){const a=HC(s,t.x,t.width),n=HC(r,t.y,t.height);return`${a} ${n}`}const jq={offset:"stroke-dashoffset",array:"stroke-dasharray"},wq={offset:"strokeDashoffset",array:"strokeDasharray"};function Nq(t,s,r=1,a=0,n=!0){t.pathLength=1;const i=n?jq:wq;t[i.offset]=mt.transform(-a);const l=mt.transform(s),o=mt.transform(r);t[i.array]=`${l} ${o}`}function K1(t,{attrX:s,attrY:r,attrScale:a,originX:n,originY:i,pathLength:l,pathSpacing:o=1,pathOffset:c=0,...d},u,m,p){if(z1(t,d,u,p),m){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:x,style:g,dimensions:f}=t;x.transform&&(f&&(g.transform=x.transform),delete x.transform),f&&(n!==void 0||i!==void 0||g.transform)&&(g.transformOrigin=vq(f,n!==void 0?n:.5,i!==void 0?i:.5)),s!==void 0&&(x.x=s),r!==void 0&&(x.y=r),a!==void 0&&(x.scale=a),l!==void 0&&Nq(x,l,o,c,!1)}const uP=()=>({...G1(),attrs:{}}),H1=t=>typeof t=="string"&&t.toLowerCase()==="svg";function kq(t,s,r,a){const n=h.useMemo(()=>{const i=uP();return K1(i,s,{enableHardwareAcceleration:!1},H1(a),t.transformTemplate),{...i.attrs,style:{...i.style}}},[s]);if(t.style){const i={};cP(i,t.style,t),n.style={...i,...n.style}}return n}function Cq(t=!1){return(r,a,n,{latestValues:i},l)=>{const c=(W1(r)?kq:gq)(a,i,l,r),u={...bq(a,typeof r=="string",t),...c,ref:n},{children:m}=a,p=h.useMemo(()=>qa(m)?m.get():m,[m]);return h.createElement(r,{...u,children:p})}}function mP(t,{style:s,vars:r},a,n){Object.assign(t.style,s,n&&n.getProjectionStyles(a));for(const i in r)t.style.setProperty(i,r[i])}const hP=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function pP(t,s,r,a){mP(t,s,void 0,a);for(const n in s.attrs)t.setAttribute(hP.has(n)?n:U1(n),s.attrs[n])}function Y1(t,s){const{style:r}=t,a={};for(const n in r)(qa(r[n])||s.style&&qa(s.style[n])||aP(n,t))&&(a[n]=r[n]);return a}function xP(t,s){const r=Y1(t,s);for(const a in t)if(qa(t[a])||qa(s[a])){const n=T0.indexOf(a)!==-1?"attr"+a.charAt(0).toUpperCase()+a.substring(1):a;r[n]=t[a]}return r}function Q1(t,s,r,a={},n={}){return typeof s=="function"&&(s=s(r!==void 0?r:t.custom,a,n)),typeof s=="string"&&(s=t.variants&&t.variants[s]),typeof s=="function"&&(s=s(r!==void 0?r:t.custom,a,n)),s}function Sq(t){const s=h.useRef(null);return s.current===null&&(s.current=t()),s.current}const Pg=t=>Array.isArray(t),_q=t=>!!(t&&typeof t=="object"&&t.mix&&t.toValue),Eq=t=>Pg(t)?t[t.length-1]||0:t;function _x(t){const s=qa(t)?t.get():t;return _q(s)?s.toValue():s}function Aq({scrapeMotionValuesFromProps:t,createRenderState:s,onMount:r},a,n,i){const l={latestValues:Tq(a,n,i,t),renderState:s()};return r&&(l.mount=o=>r(a,o,l)),l}const gP=t=>(s,r)=>{const a=h.useContext(Ff),n=h.useContext($1),i=()=>Aq(t,s,a,n);return r?i():Sq(i)};function Tq(t,s,r,a){const n={},i=a(t,{});for(const p in i)n[p]=_x(i[p]);let{initial:l,animate:o}=t;const c=$f(t),d=tP(t);s&&d&&!c&&t.inherit!==!1&&(l===void 0&&(l=s.initial),o===void 0&&(o=s.animate));let u=r?r.initial===!1:!1;u=u||l===!1;const m=u?o:l;return m&&typeof m!="boolean"&&!Bf(m)&&(Array.isArray(m)?m:[m]).forEach(x=>{const g=Q1(t,x);if(!g)return;const{transitionEnd:f,transition:b,...j}=g;for(const v in j){let w=j[v];if(Array.isArray(w)){const y=u?w.length-1:0;w=w[y]}w!==null&&(n[v]=w)}for(const v in f)n[v]=f[v]}),n}const nr=t=>t;class YC{constructor(){this.order=[],this.scheduled=new Set}add(s){if(!this.scheduled.has(s))return this.scheduled.add(s),this.order.push(s),!0}remove(s){const r=this.order.indexOf(s);r!==-1&&(this.order.splice(r,1),this.scheduled.delete(s))}clear(){this.order.length=0,this.scheduled.clear()}}function Pq(t){let s=new YC,r=new YC,a=0,n=!1,i=!1;const l=new WeakSet,o={schedule:(c,d=!1,u=!1)=>{const m=u&&n,p=m?s:r;return d&&l.add(c),p.add(c)&&m&&n&&(a=s.order.length),c},cancel:c=>{r.remove(c),l.delete(c)},process:c=>{if(n){i=!0;return}if(n=!0,[s,r]=[r,s],r.clear(),a=s.order.length,a)for(let d=0;d<a;d++){const u=s.order[d];u(c),l.has(u)&&(o.schedule(u),t())}n=!1,i&&(i=!1,o.process(c))}};return o}const Dp=["prepare","read","update","preRender","render","postRender"],Rq=40;function Dq(t,s){let r=!1,a=!0;const n={delta:0,timestamp:0,isProcessing:!1},i=Dp.reduce((m,p)=>(m[p]=Pq(()=>r=!0),m),{}),l=m=>i[m].process(n),o=()=>{const m=performance.now();r=!1,n.delta=a?1e3/60:Math.max(Math.min(m-n.timestamp,Rq),1),n.timestamp=m,n.isProcessing=!0,Dp.forEach(l),n.isProcessing=!1,r&&s&&(a=!1,t(o))},c=()=>{r=!0,a=!0,n.isProcessing||t(o)};return{schedule:Dp.reduce((m,p)=>{const x=i[p];return m[p]=(g,f=!1,b=!1)=>(r||c(),x.schedule(g,f,b)),m},{}),cancel:m=>Dp.forEach(p=>i[p].cancel(m)),state:n,steps:i}}const{schedule:Ds,cancel:kl,state:aa,steps:Vb}=Dq(typeof requestAnimationFrame<"u"?requestAnimationFrame:nr,!0),Iq={useVisualState:gP({scrapeMotionValuesFromProps:xP,createRenderState:uP,onMount:(t,s,{renderState:r,latestValues:a})=>{Ds.read(()=>{try{r.dimensions=typeof s.getBBox=="function"?s.getBBox():s.getBoundingClientRect()}catch{r.dimensions={x:0,y:0,width:0,height:0}}}),Ds.render(()=>{K1(r,a,{enableHardwareAcceleration:!1},H1(s.tagName),t.transformTemplate),pP(s,r)})}})},Mq={useVisualState:gP({scrapeMotionValuesFromProps:Y1,createRenderState:G1})};function Lq(t,{forwardMotionProps:s=!1},r,a){return{...W1(t)?Iq:Mq,preloadedFeatures:r,useRender:Cq(s),createVisualElement:a,Component:t}}function ul(t,s,r,a={passive:!0}){return t.addEventListener(s,r,a),()=>t.removeEventListener(s,r)}const fP=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1;function Vf(t,s="page"){return{point:{x:t[s+"X"],y:t[s+"Y"]}}}const Fq=t=>s=>fP(s)&&t(s,Vf(s));function pl(t,s,r,a){return ul(t,s,Fq(r),a)}const Oq=(t,s)=>r=>s(t(r)),ko=(...t)=>t.reduce(Oq);function yP(t){let s=null;return()=>{const r=()=>{s=null};return s===null?(s=t,r):!1}}const QC=yP("dragHorizontal"),JC=yP("dragVertical");function bP(t){let s=!1;if(t==="y")s=JC();else if(t==="x")s=QC();else{const r=QC(),a=JC();r&&a?s=()=>{r(),a()}:(r&&r(),a&&a())}return s}function vP(){const t=bP(!0);return t?(t(),!1):!0}class Vo{constructor(s){this.isMounted=!1,this.node=s}update(){}}function ZC(t,s){const r="pointer"+(s?"enter":"leave"),a="onHover"+(s?"Start":"End"),n=(i,l)=>{if(i.pointerType==="touch"||vP())return;const o=t.getProps();t.animationState&&o.whileHover&&t.animationState.setActive("whileHover",s),o[a]&&Ds.update(()=>o[a](i,l))};return pl(t.current,r,n,{passive:!t.getProps()[a]})}class Bq extends Vo{mount(){this.unmount=ko(ZC(this.node,!0),ZC(this.node,!1))}unmount(){}}class $q extends Vo{constructor(){super(...arguments),this.isActive=!1}onFocus(){let s=!1;try{s=this.node.current.matches(":focus-visible")}catch{s=!0}!s||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=ko(ul(this.node.current,"focus",()=>this.onFocus()),ul(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const jP=(t,s)=>s?t===s?!0:jP(t,s.parentElement):!1;function qb(t,s){if(!s)return;const r=new PointerEvent("pointer"+t);s(r,Vf(r))}class Uq extends Vo{constructor(){super(...arguments),this.removeStartListeners=nr,this.removeEndListeners=nr,this.removeAccessibleListeners=nr,this.startPointerPress=(s,r)=>{if(this.isPressing)return;this.removeEndListeners();const a=this.node.getProps(),i=pl(window,"pointerup",(o,c)=>{if(!this.checkPressEnd())return;const{onTap:d,onTapCancel:u,globalTapTarget:m}=this.node.getProps();Ds.update(()=>{!m&&!jP(this.node.current,o.target)?u&&u(o,c):d&&d(o,c)})},{passive:!(a.onTap||a.onPointerUp)}),l=pl(window,"pointercancel",(o,c)=>this.cancelPress(o,c),{passive:!(a.onTapCancel||a.onPointerCancel)});this.removeEndListeners=ko(i,l),this.startPress(s,r)},this.startAccessiblePress=()=>{const s=i=>{if(i.key!=="Enter"||this.isPressing)return;const l=o=>{o.key!=="Enter"||!this.checkPressEnd()||qb("up",(c,d)=>{const{onTap:u}=this.node.getProps();u&&Ds.update(()=>u(c,d))})};this.removeEndListeners(),this.removeEndListeners=ul(this.node.current,"keyup",l),qb("down",(o,c)=>{this.startPress(o,c)})},r=ul(this.node.current,"keydown",s),a=()=>{this.isPressing&&qb("cancel",(i,l)=>this.cancelPress(i,l))},n=ul(this.node.current,"blur",a);this.removeAccessibleListeners=ko(r,n)}}startPress(s,r){this.isPressing=!0;const{onTapStart:a,whileTap:n}=this.node.getProps();n&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),a&&Ds.update(()=>a(s,r))}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!vP()}cancelPress(s,r){if(!this.checkPressEnd())return;const{onTapCancel:a}=this.node.getProps();a&&Ds.update(()=>a(s,r))}mount(){const s=this.node.getProps(),r=pl(s.globalTapTarget?window:this.node.current,"pointerdown",this.startPointerPress,{passive:!(s.onTapStart||s.onPointerStart)}),a=ul(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=ko(r,a)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}const nw=new WeakMap,Wb=new WeakMap,Vq=t=>{const s=nw.get(t.target);s&&s(t)},qq=t=>{t.forEach(Vq)};function Wq({root:t,...s}){const r=t||document;Wb.has(r)||Wb.set(r,{});const a=Wb.get(r),n=JSON.stringify(s);return a[n]||(a[n]=new IntersectionObserver(qq,{root:t,...s})),a[n]}function zq(t,s,r){const a=Wq(s);return nw.set(t,r),a.observe(t),()=>{nw.delete(t),a.unobserve(t)}}const Gq={some:0,all:1};class Kq extends Vo{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:s={}}=this.node.getProps(),{root:r,margin:a,amount:n="some",once:i}=s,l={root:r?r.current:void 0,rootMargin:a,threshold:typeof n=="number"?n:Gq[n]},o=c=>{const{isIntersecting:d}=c;if(this.isInView===d||(this.isInView=d,i&&!d&&this.hasEnteredView))return;d&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",d);const{onViewportEnter:u,onViewportLeave:m}=this.node.getProps(),p=d?u:m;p&&p(c)};return zq(this.node.current,l,o)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:s,prevProps:r}=this.node;["amount","margin","root"].some(Hq(s,r))&&this.startObserver()}unmount(){}}function Hq({viewport:t={}},{viewport:s={}}={}){return r=>t[r]!==s[r]}const Yq={inView:{Feature:Kq},tap:{Feature:Uq},focus:{Feature:$q},hover:{Feature:Bq}};function wP(t,s){if(!Array.isArray(s))return!1;const r=s.length;if(r!==t.length)return!1;for(let a=0;a<r;a++)if(s[a]!==t[a])return!1;return!0}function Qq(t){const s={};return t.values.forEach((r,a)=>s[a]=r.get()),s}function Jq(t){const s={};return t.values.forEach((r,a)=>s[a]=r.getVelocity()),s}function qf(t,s,r){const a=t.getProps();return Q1(a,s,r!==void 0?r:a.custom,Qq(t),Jq(t))}let J1=nr;const $c=t=>t*1e3,xl=t=>t/1e3,Zq={current:!1},NP=t=>Array.isArray(t)&&typeof t[0]=="number";function kP(t){return!!(!t||typeof t=="string"&&CP[t]||NP(t)||Array.isArray(t)&&t.every(kP))}const Km=([t,s,r,a])=>`cubic-bezier(${t}, ${s}, ${r}, ${a})`,CP={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Km([0,.65,.55,1]),circOut:Km([.55,0,1,.45]),backIn:Km([.31,.01,.66,-.59]),backOut:Km([.33,1.53,.69,.99])};function SP(t){if(t)return NP(t)?Km(t):Array.isArray(t)?t.map(SP):CP[t]}function Xq(t,s,r,{delay:a=0,duration:n,repeat:i=0,repeatType:l="loop",ease:o,times:c}={}){const d={[s]:r};c&&(d.offset=c);const u=SP(o);return Array.isArray(u)&&(d.easing=u),t.animate(d,{delay:a,duration:n,easing:Array.isArray(u)?"linear":u,fill:"both",iterations:i+1,direction:l==="reverse"?"alternate":"normal"})}function eW(t,{repeat:s,repeatType:r="loop"}){const a=s&&r!=="loop"&&s%2===1?0:t.length-1;return t[a]}const _P=(t,s,r)=>(((1-3*r+3*s)*t+(3*r-6*s))*t+3*s)*t,tW=1e-7,sW=12;function rW(t,s,r,a,n){let i,l,o=0;do l=s+(r-s)/2,i=_P(l,a,n)-t,i>0?r=l:s=l;while(Math.abs(i)>tW&&++o<sW);return l}function D0(t,s,r,a){if(t===s&&r===a)return nr;const n=i=>rW(i,0,1,t,r);return i=>i===0||i===1?i:_P(n(i),s,a)}const aW=D0(.42,0,1,1),nW=D0(0,0,.58,1),EP=D0(.42,0,.58,1),iW=t=>Array.isArray(t)&&typeof t[0]!="number",AP=t=>s=>s<=.5?t(2*s)/2:(2-t(2*(1-s)))/2,TP=t=>s=>1-t(1-s),Z1=t=>1-Math.sin(Math.acos(t)),PP=TP(Z1),lW=AP(Z1),RP=D0(.33,1.53,.69,.99),X1=TP(RP),oW=AP(X1),cW=t=>(t*=2)<1?.5*X1(t):.5*(2-Math.pow(2,-10*(t-1))),dW={linear:nr,easeIn:aW,easeInOut:EP,easeOut:nW,circIn:Z1,circInOut:lW,circOut:PP,backIn:X1,backInOut:oW,backOut:RP,anticipate:cW},XC=t=>{if(Array.isArray(t)){J1(t.length===4);const[s,r,a,n]=t;return D0(s,r,a,n)}else if(typeof t=="string")return dW[t];return t},e2=(t,s)=>r=>!!(P0(r)&&uq.test(r)&&r.startsWith(t)||s&&Object.prototype.hasOwnProperty.call(r,s)),DP=(t,s,r)=>a=>{if(!P0(a))return a;const[n,i,l,o]=a.match(Uf);return{[t]:parseFloat(n),[s]:parseFloat(i),[r]:parseFloat(l),alpha:o!==void 0?parseFloat(o):1}},uW=t=>To(0,255,t),zb={...ld,transform:t=>Math.round(uW(t))},wc={test:e2("rgb","red"),parse:DP("red","green","blue"),transform:({red:t,green:s,blue:r,alpha:a=1})=>"rgba("+zb.transform(t)+", "+zb.transform(s)+", "+zb.transform(r)+", "+ph(hh.transform(a))+")"};function mW(t){let s="",r="",a="",n="";return t.length>5?(s=t.substring(1,3),r=t.substring(3,5),a=t.substring(5,7),n=t.substring(7,9)):(s=t.substring(1,2),r=t.substring(2,3),a=t.substring(3,4),n=t.substring(4,5),s+=s,r+=r,a+=a,n+=n),{red:parseInt(s,16),green:parseInt(r,16),blue:parseInt(a,16),alpha:n?parseInt(n,16)/255:1}}const iw={test:e2("#"),parse:mW,transform:wc.transform},Yd={test:e2("hsl","hue"),parse:DP("hue","saturation","lightness"),transform:({hue:t,saturation:s,lightness:r,alpha:a=1})=>"hsla("+Math.round(t)+", "+Li.transform(ph(s))+", "+Li.transform(ph(r))+", "+ph(hh.transform(a))+")"},fa={test:t=>wc.test(t)||iw.test(t)||Yd.test(t),parse:t=>wc.test(t)?wc.parse(t):Yd.test(t)?Yd.parse(t):iw.parse(t),transform:t=>P0(t)?t:t.hasOwnProperty("red")?wc.transform(t):Yd.transform(t)},qs=(t,s,r)=>-r*t+r*s+t;function Gb(t,s,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?t+(s-t)*6*r:r<1/2?s:r<2/3?t+(s-t)*(2/3-r)*6:t}function hW({hue:t,saturation:s,lightness:r,alpha:a}){t/=360,s/=100,r/=100;let n=0,i=0,l=0;if(!s)n=i=l=r;else{const o=r<.5?r*(1+s):r+s-r*s,c=2*r-o;n=Gb(c,o,t+1/3),i=Gb(c,o,t),l=Gb(c,o,t-1/3)}return{red:Math.round(n*255),green:Math.round(i*255),blue:Math.round(l*255),alpha:a}}const Kb=(t,s,r)=>{const a=t*t;return Math.sqrt(Math.max(0,r*(s*s-a)+a))},pW=[iw,wc,Yd],xW=t=>pW.find(s=>s.test(t));function eS(t){const s=xW(t);let r=s.parse(t);return s===Yd&&(r=hW(r)),r}const IP=(t,s)=>{const r=eS(t),a=eS(s),n={...r};return i=>(n.red=Kb(r.red,a.red,i),n.green=Kb(r.green,a.green,i),n.blue=Kb(r.blue,a.blue,i),n.alpha=qs(r.alpha,a.alpha,i),wc.transform(n))};function gW(t){var s,r;return isNaN(t)&&P0(t)&&(((s=t.match(Uf))===null||s===void 0?void 0:s.length)||0)+(((r=t.match(lP))===null||r===void 0?void 0:r.length)||0)>0}const MP={regex:cq,countKey:"Vars",token:"${v}",parse:nr},LP={regex:lP,countKey:"Colors",token:"${c}",parse:fa.parse},FP={regex:Uf,countKey:"Numbers",token:"${n}",parse:ld.parse};function Hb(t,{regex:s,countKey:r,token:a,parse:n}){const i=t.tokenised.match(s);i&&(t["num"+r]=i.length,t.tokenised=t.tokenised.replace(s,a),t.values.push(...i.map(n)))}function Rg(t){const s=t.toString(),r={value:s,tokenised:s,values:[],numVars:0,numColors:0,numNumbers:0};return r.value.includes("var(--")&&Hb(r,MP),Hb(r,LP),Hb(r,FP),r}function OP(t){return Rg(t).values}function BP(t){const{values:s,numColors:r,numVars:a,tokenised:n}=Rg(t),i=s.length;return l=>{let o=n;for(let c=0;c<i;c++)c<a?o=o.replace(MP.token,l[c]):c<a+r?o=o.replace(LP.token,fa.transform(l[c])):o=o.replace(FP.token,ph(l[c]));return o}}const fW=t=>typeof t=="number"?0:t;function yW(t){const s=OP(t);return BP(t)(s.map(fW))}const Po={test:gW,parse:OP,createTransformer:BP,getAnimatableNone:yW},$P=(t,s)=>r=>`${r>0?s:t}`;function UP(t,s){return typeof t=="number"?r=>qs(t,s,r):fa.test(t)?IP(t,s):t.startsWith("var(")?$P(t,s):qP(t,s)}const VP=(t,s)=>{const r=[...t],a=r.length,n=t.map((i,l)=>UP(i,s[l]));return i=>{for(let l=0;l<a;l++)r[l]=n[l](i);return r}},bW=(t,s)=>{const r={...t,...s},a={};for(const n in r)t[n]!==void 0&&s[n]!==void 0&&(a[n]=UP(t[n],s[n]));return n=>{for(const i in a)r[i]=a[i](n);return r}},qP=(t,s)=>{const r=Po.createTransformer(s),a=Rg(t),n=Rg(s);return a.numVars===n.numVars&&a.numColors===n.numColors&&a.numNumbers>=n.numNumbers?ko(VP(a.values,n.values),r):$P(t,s)},Xh=(t,s,r)=>{const a=s-t;return a===0?1:(r-t)/a},tS=(t,s)=>r=>qs(t,s,r);function vW(t){return typeof t=="number"?tS:typeof t=="string"?fa.test(t)?IP:qP:Array.isArray(t)?VP:typeof t=="object"?bW:tS}function jW(t,s,r){const a=[],n=r||vW(t[0]),i=t.length-1;for(let l=0;l<i;l++){let o=n(t[l],t[l+1]);if(s){const c=Array.isArray(s)?s[l]||nr:s;o=ko(c,o)}a.push(o)}return a}function WP(t,s,{clamp:r=!0,ease:a,mixer:n}={}){const i=t.length;if(J1(i===s.length),i===1)return()=>s[0];t[0]>t[i-1]&&(t=[...t].reverse(),s=[...s].reverse());const l=jW(s,a,n),o=l.length,c=d=>{let u=0;if(o>1)for(;u<t.length-2&&!(d<t[u+1]);u++);const m=Xh(t[u],t[u+1],d);return l[u](m)};return r?d=>c(To(t[0],t[i-1],d)):c}function wW(t,s){const r=t[t.length-1];for(let a=1;a<=s;a++){const n=Xh(0,s,a);t.push(qs(r,1,n))}}function NW(t){const s=[0];return wW(s,t.length-1),s}function kW(t,s){return t.map(r=>r*s)}function CW(t,s){return t.map(()=>s||EP).splice(0,t.length-1)}function Dg({duration:t=300,keyframes:s,times:r,ease:a="easeInOut"}){const n=iW(a)?a.map(XC):XC(a),i={done:!1,value:s[0]},l=kW(r&&r.length===s.length?r:NW(s),t),o=WP(l,s,{ease:Array.isArray(n)?n:CW(s,n)});return{calculatedDuration:t,next:c=>(i.value=o(c),i.done=c>=t,i)}}function zP(t,s){return s?t*(1e3/s):0}const SW=5;function GP(t,s,r){const a=Math.max(s-SW,0);return zP(r-t(a),s-a)}const Yb=.001,_W=.01,EW=10,AW=.05,TW=1;function PW({duration:t=800,bounce:s=.25,velocity:r=0,mass:a=1}){let n,i,l=1-s;l=To(AW,TW,l),t=To(_W,EW,xl(t)),l<1?(n=d=>{const u=d*l,m=u*t,p=u-r,x=lw(d,l),g=Math.exp(-m);return Yb-p/x*g},i=d=>{const m=d*l*t,p=m*r+r,x=Math.pow(l,2)*Math.pow(d,2)*t,g=Math.exp(-m),f=lw(Math.pow(d,2),l);return(-n(d)+Yb>0?-1:1)*((p-x)*g)/f}):(n=d=>{const u=Math.exp(-d*t),m=(d-r)*t+1;return-Yb+u*m},i=d=>{const u=Math.exp(-d*t),m=(r-d)*(t*t);return u*m});const o=5/t,c=DW(n,i,o);if(t=$c(t),isNaN(c))return{stiffness:100,damping:10,duration:t};{const d=Math.pow(c,2)*a;return{stiffness:d,damping:l*2*Math.sqrt(a*d),duration:t}}}const RW=12;function DW(t,s,r){let a=r;for(let n=1;n<RW;n++)a=a-t(a)/s(a);return a}function lw(t,s){return t*Math.sqrt(1-s*s)}const IW=["duration","bounce"],MW=["stiffness","damping","mass"];function sS(t,s){return s.some(r=>t[r]!==void 0)}function LW(t){let s={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...t};if(!sS(t,MW)&&sS(t,IW)){const r=PW(t);s={...s,...r,mass:1},s.isResolvedFromDuration=!0}return s}function KP({keyframes:t,restDelta:s,restSpeed:r,...a}){const n=t[0],i=t[t.length-1],l={done:!1,value:n},{stiffness:o,damping:c,mass:d,duration:u,velocity:m,isResolvedFromDuration:p}=LW({...a,velocity:-xl(a.velocity||0)}),x=m||0,g=c/(2*Math.sqrt(o*d)),f=i-n,b=xl(Math.sqrt(o/d)),j=Math.abs(f)<5;r||(r=j?.01:2),s||(s=j?.005:.5);let v;if(g<1){const w=lw(b,g);v=y=>{const C=Math.exp(-g*b*y);return i-C*((x+g*b*f)/w*Math.sin(w*y)+f*Math.cos(w*y))}}else if(g===1)v=w=>i-Math.exp(-b*w)*(f+(x+b*f)*w);else{const w=b*Math.sqrt(g*g-1);v=y=>{const C=Math.exp(-g*b*y),S=Math.min(w*y,300);return i-C*((x+g*b*f)*Math.sinh(S)+w*f*Math.cosh(S))/w}}return{calculatedDuration:p&&u||null,next:w=>{const y=v(w);if(p)l.done=w>=u;else{let C=x;w!==0&&(g<1?C=GP(v,w,y):C=0);const S=Math.abs(C)<=r,_=Math.abs(i-y)<=s;l.done=S&&_}return l.value=l.done?i:y,l}}}function rS({keyframes:t,velocity:s=0,power:r=.8,timeConstant:a=325,bounceDamping:n=10,bounceStiffness:i=500,modifyTarget:l,min:o,max:c,restDelta:d=.5,restSpeed:u}){const m=t[0],p={done:!1,value:m},x=E=>o!==void 0&&E<o||c!==void 0&&E>c,g=E=>o===void 0?c:c===void 0||Math.abs(o-E)<Math.abs(c-E)?o:c;let f=r*s;const b=m+f,j=l===void 0?b:l(b);j!==b&&(f=j-m);const v=E=>-f*Math.exp(-E/a),w=E=>j+v(E),y=E=>{const A=v(E),R=w(E);p.done=Math.abs(A)<=d,p.value=p.done?j:R};let C,S;const _=E=>{x(p.value)&&(C=E,S=KP({keyframes:[p.value,g(p.value)],velocity:GP(w,E,p.value),damping:n,stiffness:i,restDelta:d,restSpeed:u}))};return _(0),{calculatedDuration:null,next:E=>{let A=!1;return!S&&C===void 0&&(A=!0,y(E),_(E)),C!==void 0&&E>C?S.next(E-C):(!A&&y(E),p)}}}const FW=t=>{const s=({timestamp:r})=>t(r);return{start:()=>Ds.update(s,!0),stop:()=>kl(s),now:()=>aa.isProcessing?aa.timestamp:performance.now()}},aS=2e4;function nS(t){let s=0;const r=50;let a=t.next(s);for(;!a.done&&s<aS;)s+=r,a=t.next(s);return s>=aS?1/0:s}const OW={decay:rS,inertia:rS,tween:Dg,keyframes:Dg,spring:KP};function Ig({autoplay:t=!0,delay:s=0,driver:r=FW,keyframes:a,type:n="keyframes",repeat:i=0,repeatDelay:l=0,repeatType:o="loop",onPlay:c,onStop:d,onComplete:u,onUpdate:m,...p}){let x=1,g=!1,f,b;const j=()=>{b=new Promise(q=>{f=q})};j();let v;const w=OW[n]||Dg;let y;w!==Dg&&typeof a[0]!="number"&&(y=WP([0,100],a,{clamp:!1}),a=[0,100]);const C=w({...p,keyframes:a});let S;o==="mirror"&&(S=w({...p,keyframes:[...a].reverse(),velocity:-(p.velocity||0)}));let _="idle",E=null,A=null,R=null;C.calculatedDuration===null&&i&&(C.calculatedDuration=nS(C));const{calculatedDuration:I}=C;let N=1/0,P=1/0;I!==null&&(N=I+l,P=N*(i+1)-l);let k=0;const D=q=>{if(A===null)return;x>0&&(A=Math.min(A,q)),x<0&&(A=Math.min(q-P/x,A)),E!==null?k=E:k=Math.round(q-A)*x;const K=k-s*(x>=0?1:-1),le=x>=0?K<0:K>P;k=Math.max(K,0),_==="finished"&&E===null&&(k=P);let X=k,se=C;if(i){const re=Math.min(k,P)/N;let ie=Math.floor(re),Y=re%1;!Y&&re>=1&&(Y=1),Y===1&&ie--,ie=Math.min(ie,i+1),!!(ie%2)&&(o==="reverse"?(Y=1-Y,l&&(Y-=l/N)):o==="mirror"&&(se=S)),X=To(0,1,Y)*N}const de=le?{done:!1,value:a[0]}:se.next(X);y&&(de.value=y(de.value));let{done:fe}=de;!le&&I!==null&&(fe=x>=0?k>=P:k<=0);const z=E===null&&(_==="finished"||_==="running"&&fe);return m&&m(de.value),z&&B(),de},$=()=>{v&&v.stop(),v=void 0},L=()=>{_="idle",$(),f(),j(),A=R=null},B=()=>{_="finished",u&&u(),$(),f()},T=()=>{if(g)return;v||(v=r(D));const q=v.now();c&&c(),E!==null?A=q-E:(!A||_==="finished")&&(A=q),_==="finished"&&j(),R=A,E=null,_="running",v.start()};t&&T();const O={then(q,K){return b.then(q,K)},get time(){return xl(k)},set time(q){q=$c(q),k=q,E!==null||!v||x===0?E=q:A=v.now()-q/x},get duration(){const q=C.calculatedDuration===null?nS(C):C.calculatedDuration;return xl(q)},get speed(){return x},set speed(q){q===x||!v||(x=q,O.time=xl(k))},get state(){return _},play:T,pause:()=>{_="paused",E=k},stop:()=>{g=!0,_!=="idle"&&(_="idle",d&&d(),L())},cancel:()=>{R!==null&&D(R),L()},complete:()=>{_="finished"},sample:q=>(A=0,D(q))};return O}function BW(t){let s;return()=>(s===void 0&&(s=t()),s)}const $W=BW(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),UW=new Set(["opacity","clipPath","filter","transform","backgroundColor"]),Ip=10,VW=2e4,qW=(t,s)=>s.type==="spring"||t==="backgroundColor"||!kP(s.ease);function WW(t,s,{onUpdate:r,onComplete:a,...n}){if(!($W()&&UW.has(s)&&!n.repeatDelay&&n.repeatType!=="mirror"&&n.damping!==0&&n.type!=="inertia"))return!1;let l=!1,o,c,d=!1;const u=()=>{c=new Promise(w=>{o=w})};u();let{keyframes:m,duration:p=300,ease:x,times:g}=n;if(qW(s,n)){const w=Ig({...n,repeat:0,delay:0});let y={done:!1,value:m[0]};const C=[];let S=0;for(;!y.done&&S<VW;)y=w.sample(S),C.push(y.value),S+=Ip;g=void 0,m=C,p=S-Ip,x="linear"}const f=Xq(t.owner.current,s,m,{...n,duration:p,ease:x,times:g}),b=()=>{d=!1,f.cancel()},j=()=>{d=!0,Ds.update(b),o(),u()};return f.onfinish=()=>{d||(t.set(eW(m,n)),a&&a(),j())},{then(w,y){return c.then(w,y)},attachTimeline(w){return f.timeline=w,f.onfinish=null,nr},get time(){return xl(f.currentTime||0)},set time(w){f.currentTime=$c(w)},get speed(){return f.playbackRate},set speed(w){f.playbackRate=w},get duration(){return xl(p)},play:()=>{l||(f.play(),kl(b))},pause:()=>f.pause(),stop:()=>{if(l=!0,f.playState==="idle")return;const{currentTime:w}=f;if(w){const y=Ig({...n,autoplay:!1});t.setWithVelocity(y.sample(w-Ip).value,y.sample(w).value,Ip)}j()},complete:()=>{d||f.finish()},cancel:j}}function zW({keyframes:t,delay:s,onUpdate:r,onComplete:a}){const n=()=>(r&&r(t[t.length-1]),a&&a(),{time:0,speed:1,duration:0,play:nr,pause:nr,stop:nr,then:i=>(i(),Promise.resolve()),cancel:nr,complete:nr});return s?Ig({keyframes:[0,1],duration:0,delay:s,onComplete:n}):n()}const GW={type:"spring",stiffness:500,damping:25,restSpeed:10},KW=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),HW={type:"keyframes",duration:.8},YW={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},QW=(t,{keyframes:s})=>s.length>2?HW:id.has(t)?t.startsWith("scale")?KW(s[1]):GW:YW,ow=(t,s)=>t==="zIndex"?!1:!!(typeof s=="number"||Array.isArray(s)||typeof s=="string"&&(Po.test(s)||s==="0")&&!s.startsWith("url(")),JW=new Set(["brightness","contrast","saturate","opacity"]);function ZW(t){const[s,r]=t.slice(0,-1).split("(");if(s==="drop-shadow")return t;const[a]=r.match(Uf)||[];if(!a)return t;const n=r.replace(a,"");let i=JW.has(s)?1:0;return a!==r&&(i*=100),s+"("+i+n+")"}const XW=/([a-z-]*)\(.*?\)/g,cw={...Po,getAnimatableNone:t=>{const s=t.match(XW);return s?s.map(ZW).join(" "):t}},ez={...oP,color:fa,backgroundColor:fa,outlineColor:fa,fill:fa,stroke:fa,borderColor:fa,borderTopColor:fa,borderRightColor:fa,borderBottomColor:fa,borderLeftColor:fa,filter:cw,WebkitFilter:cw},t2=t=>ez[t];function HP(t,s){let r=t2(t);return r!==cw&&(r=Po),r.getAnimatableNone?r.getAnimatableNone(s):void 0}const YP=t=>/^0[^.\s]+$/.test(t);function tz(t){if(typeof t=="number")return t===0;if(t!==null)return t==="none"||t==="0"||YP(t)}function sz(t,s,r,a){const n=ow(s,r);let i;Array.isArray(r)?i=[...r]:i=[null,r];const l=a.from!==void 0?a.from:t.get();let o;const c=[];for(let d=0;d<i.length;d++)i[d]===null&&(i[d]=d===0?l:i[d-1]),tz(i[d])&&c.push(d),typeof i[d]=="string"&&i[d]!=="none"&&i[d]!=="0"&&(o=i[d]);if(n&&c.length&&o)for(let d=0;d<c.length;d++){const u=c[d];i[u]=HP(s,o)}return i}function rz({when:t,delay:s,delayChildren:r,staggerChildren:a,staggerDirection:n,repeat:i,repeatType:l,repeatDelay:o,from:c,elapsed:d,...u}){return!!Object.keys(u).length}function s2(t,s){return t[s]||t.default||t}const az={skipAnimations:!1},r2=(t,s,r,a={})=>n=>{const i=s2(a,t)||{},l=i.delay||a.delay||0;let{elapsed:o=0}=a;o=o-$c(l);const c=sz(s,t,r,i),d=c[0],u=c[c.length-1],m=ow(t,d),p=ow(t,u);let x={keyframes:c,velocity:s.getVelocity(),ease:"easeOut",...i,delay:-o,onUpdate:g=>{s.set(g),i.onUpdate&&i.onUpdate(g)},onComplete:()=>{n(),i.onComplete&&i.onComplete()}};if(rz(i)||(x={...x,...QW(t,x)}),x.duration&&(x.duration=$c(x.duration)),x.repeatDelay&&(x.repeatDelay=$c(x.repeatDelay)),!m||!p||Zq.current||i.type===!1||az.skipAnimations)return zW(x);if(!a.isHandoff&&s.owner&&s.owner.current instanceof HTMLElement&&!s.owner.getProps().onUpdate){const g=WW(s,t,x);if(g)return g}return Ig(x)};function Mg(t){return!!(qa(t)&&t.add)}const QP=t=>/^\-?\d*\.?\d+$/.test(t);function a2(t,s){t.indexOf(s)===-1&&t.push(s)}function n2(t,s){const r=t.indexOf(s);r>-1&&t.splice(r,1)}class i2{constructor(){this.subscriptions=[]}add(s){return a2(this.subscriptions,s),()=>n2(this.subscriptions,s)}notify(s,r,a){const n=this.subscriptions.length;if(n)if(n===1)this.subscriptions[0](s,r,a);else for(let i=0;i<n;i++){const l=this.subscriptions[i];l&&l(s,r,a)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const nz=t=>!isNaN(parseFloat(t));class iz{constructor(s,r={}){this.version="10.18.0",this.timeDelta=0,this.lastUpdated=0,this.canTrackVelocity=!1,this.events={},this.updateAndNotify=(a,n=!0)=>{this.prev=this.current,this.current=a;const{delta:i,timestamp:l}=aa;this.lastUpdated!==l&&(this.timeDelta=i,this.lastUpdated=l,Ds.postRender(this.scheduleVelocityCheck)),this.prev!==this.current&&this.events.change&&this.events.change.notify(this.current),this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()),n&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.scheduleVelocityCheck=()=>Ds.postRender(this.velocityCheck),this.velocityCheck=({timestamp:a})=>{a!==this.lastUpdated&&(this.prev=this.current,this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()))},this.hasAnimated=!1,this.prev=this.current=s,this.canTrackVelocity=nz(this.current),this.owner=r.owner}onChange(s){return this.on("change",s)}on(s,r){this.events[s]||(this.events[s]=new i2);const a=this.events[s].add(r);return s==="change"?()=>{a(),Ds.read(()=>{this.events.change.getSize()||this.stop()})}:a}clearListeners(){for(const s in this.events)this.events[s].clear()}attach(s,r){this.passiveEffect=s,this.stopPassiveEffect=r}set(s,r=!0){!r||!this.passiveEffect?this.updateAndNotify(s,r):this.passiveEffect(s,this.updateAndNotify)}setWithVelocity(s,r,a){this.set(r),this.prev=s,this.timeDelta=a}jump(s){this.updateAndNotify(s),this.prev=s,this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){return this.canTrackVelocity?zP(parseFloat(this.current)-parseFloat(this.prev),this.timeDelta):0}start(s){return this.stop(),new Promise(r=>{this.hasAnimated=!0,this.animation=s(r),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Iu(t,s){return new iz(t,s)}const JP=t=>s=>s.test(t),lz={test:t=>t==="auto",parse:t=>t},ZP=[ld,mt,Li,Vl,hq,mq,lz],jm=t=>ZP.find(JP(t)),oz=[...ZP,fa,Po],cz=t=>oz.find(JP(t));function dz(t,s,r){t.hasValue(s)?t.getValue(s).set(r):t.addValue(s,Iu(r))}function uz(t,s){const r=qf(t,s);let{transitionEnd:a={},transition:n={},...i}=r?t.makeTargetAnimatable(r,!1):{};i={...i,...a};for(const l in i){const o=Eq(i[l]);dz(t,l,o)}}function mz(t,s,r){var a,n;const i=Object.keys(s).filter(o=>!t.hasValue(o)),l=i.length;if(l)for(let o=0;o<l;o++){const c=i[o],d=s[c];let u=null;Array.isArray(d)&&(u=d[0]),u===null&&(u=(n=(a=r[c])!==null&&a!==void 0?a:t.readValue(c))!==null&&n!==void 0?n:s[c]),u!=null&&(typeof u=="string"&&(QP(u)||YP(u))?u=parseFloat(u):!cz(u)&&Po.test(d)&&(u=HP(c,d)),t.addValue(c,Iu(u,{owner:t})),r[c]===void 0&&(r[c]=u),u!==null&&t.setBaseTarget(c,u))}}function hz(t,s){return s?(s[t]||s.default||s).from:void 0}function pz(t,s,r){const a={};for(const n in t){const i=hz(n,s);if(i!==void 0)a[n]=i;else{const l=r.getValue(n);l&&(a[n]=l.get())}}return a}function xz({protectedKeys:t,needsAnimating:s},r){const a=t.hasOwnProperty(r)&&s[r]!==!0;return s[r]=!1,a}function gz(t,s){const r=t.get();if(Array.isArray(s)){for(let a=0;a<s.length;a++)if(s[a]!==r)return!0}else return r!==s}function XP(t,s,{delay:r=0,transitionOverride:a,type:n}={}){let{transition:i=t.getDefaultTransition(),transitionEnd:l,...o}=t.makeTargetAnimatable(s);const c=t.getValue("willChange");a&&(i=a);const d=[],u=n&&t.animationState&&t.animationState.getState()[n];for(const m in o){const p=t.getValue(m),x=o[m];if(!p||x===void 0||u&&xz(u,m))continue;const g={delay:r,elapsed:0,...s2(i||{},m)};if(window.HandoffAppearAnimations){const j=t.getProps()[eP];if(j){const v=window.HandoffAppearAnimations(j,m,p,Ds);v!==null&&(g.elapsed=v,g.isHandoff=!0)}}let f=!g.isHandoff&&!gz(p,x);if(g.type==="spring"&&(p.getVelocity()||g.velocity)&&(f=!1),p.animation&&(f=!1),f)continue;p.start(r2(m,p,x,t.shouldReduceMotion&&id.has(m)?{type:!1}:g));const b=p.animation;Mg(c)&&(c.add(m),b.then(()=>c.remove(m))),d.push(b)}return l&&Promise.all(d).then(()=>{l&&uz(t,l)}),d}function dw(t,s,r={}){const a=qf(t,s,r.custom);let{transition:n=t.getDefaultTransition()||{}}=a||{};r.transitionOverride&&(n=r.transitionOverride);const i=a?()=>Promise.all(XP(t,a,r)):()=>Promise.resolve(),l=t.variantChildren&&t.variantChildren.size?(c=0)=>{const{delayChildren:d=0,staggerChildren:u,staggerDirection:m}=n;return fz(t,s,d+c,u,m,r)}:()=>Promise.resolve(),{when:o}=n;if(o){const[c,d]=o==="beforeChildren"?[i,l]:[l,i];return c().then(()=>d())}else return Promise.all([i(),l(r.delay)])}function fz(t,s,r=0,a=0,n=1,i){const l=[],o=(t.variantChildren.size-1)*a,c=n===1?(d=0)=>d*a:(d=0)=>o-d*a;return Array.from(t.variantChildren).sort(yz).forEach((d,u)=>{d.notify("AnimationStart",s),l.push(dw(d,s,{...i,delay:r+c(u)}).then(()=>d.notify("AnimationComplete",s)))}),Promise.all(l)}function yz(t,s){return t.sortNodePosition(s)}function bz(t,s,r={}){t.notify("AnimationStart",s);let a;if(Array.isArray(s)){const n=s.map(i=>dw(t,i,r));a=Promise.all(n)}else if(typeof s=="string")a=dw(t,s,r);else{const n=typeof s=="function"?qf(t,s,r.custom):s;a=Promise.all(XP(t,n,r))}return a.then(()=>t.notify("AnimationComplete",s))}const vz=[...V1].reverse(),jz=V1.length;function wz(t){return s=>Promise.all(s.map(({animation:r,options:a})=>bz(t,r,a)))}function Nz(t){let s=wz(t);const r=Cz();let a=!0;const n=(c,d)=>{const u=qf(t,d);if(u){const{transition:m,transitionEnd:p,...x}=u;c={...c,...x,...p}}return c};function i(c){s=c(t)}function l(c,d){const u=t.getProps(),m=t.getVariantContext(!0)||{},p=[],x=new Set;let g={},f=1/0;for(let j=0;j<jz;j++){const v=vz[j],w=r[v],y=u[v]!==void 0?u[v]:m[v],C=Jh(y),S=v===d?w.isActive:null;S===!1&&(f=j);let _=y===m[v]&&y!==u[v]&&C;if(_&&a&&t.manuallyAnimateOnMount&&(_=!1),w.protectedKeys={...g},!w.isActive&&S===null||!y&&!w.prevProp||Bf(y)||typeof y=="boolean")continue;let A=kz(w.prevProp,y)||v===d&&w.isActive&&!_&&C||j>f&&C,R=!1;const I=Array.isArray(y)?y:[y];let N=I.reduce(n,{});S===!1&&(N={});const{prevResolvedValues:P={}}=w,k={...P,...N},D=$=>{A=!0,x.has($)&&(R=!0,x.delete($)),w.needsAnimating[$]=!0};for(const $ in k){const L=N[$],B=P[$];if(g.hasOwnProperty($))continue;let T=!1;Pg(L)&&Pg(B)?T=!wP(L,B):T=L!==B,T?L!==void 0?D($):x.add($):L!==void 0&&x.has($)?D($):w.protectedKeys[$]=!0}w.prevProp=y,w.prevResolvedValues=N,w.isActive&&(g={...g,...N}),a&&t.blockInitialAnimation&&(A=!1),A&&(!_||R)&&p.push(...I.map($=>({animation:$,options:{type:v,...c}})))}if(x.size){const j={};x.forEach(v=>{const w=t.getBaseTarget(v);w!==void 0&&(j[v]=w)}),p.push({animation:j})}let b=!!p.length;return a&&(u.initial===!1||u.initial===u.animate)&&!t.manuallyAnimateOnMount&&(b=!1),a=!1,b?s(p):Promise.resolve()}function o(c,d,u){var m;if(r[c].isActive===d)return Promise.resolve();(m=t.variantChildren)===null||m===void 0||m.forEach(x=>{var g;return(g=x.animationState)===null||g===void 0?void 0:g.setActive(c,d)}),r[c].isActive=d;const p=l(u,c);for(const x in r)r[x].protectedKeys={};return p}return{animateChanges:l,setActive:o,setAnimateFunction:i,getState:()=>r}}function kz(t,s){return typeof s=="string"?s!==t:Array.isArray(s)?!wP(s,t):!1}function Xo(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function Cz(){return{animate:Xo(!0),whileInView:Xo(),whileHover:Xo(),whileTap:Xo(),whileDrag:Xo(),whileFocus:Xo(),exit:Xo()}}class Sz extends Vo{constructor(s){super(s),s.animationState||(s.animationState=Nz(s))}updateAnimationControlsSubscription(){const{animate:s}=this.node.getProps();this.unmount(),Bf(s)&&(this.unmount=s.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:s}=this.node.getProps(),{animate:r}=this.node.prevProps||{};s!==r&&this.updateAnimationControlsSubscription()}unmount(){}}let _z=0;class Ez extends Vo{constructor(){super(...arguments),this.id=_z++}update(){if(!this.node.presenceContext)return;const{isPresent:s,onExitComplete:r,custom:a}=this.node.presenceContext,{isPresent:n}=this.node.prevPresenceContext||{};if(!this.node.animationState||s===n)return;const i=this.node.animationState.setActive("exit",!s,{custom:a??this.node.getProps().custom});r&&!s&&i.then(()=>r(this.id))}mount(){const{register:s}=this.node.presenceContext||{};s&&(this.unmount=s(this.id))}unmount(){}}const Az={animation:{Feature:Sz},exit:{Feature:Ez}},iS=(t,s)=>Math.abs(t-s);function Tz(t,s){const r=iS(t.x,s.x),a=iS(t.y,s.y);return Math.sqrt(r**2+a**2)}class eR{constructor(s,r,{transformPagePoint:a,contextWindow:n,dragSnapToOrigin:i=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const m=Jb(this.lastMoveEventInfo,this.history),p=this.startEvent!==null,x=Tz(m.offset,{x:0,y:0})>=3;if(!p&&!x)return;const{point:g}=m,{timestamp:f}=aa;this.history.push({...g,timestamp:f});const{onStart:b,onMove:j}=this.handlers;p||(b&&b(this.lastMoveEvent,m),this.startEvent=this.lastMoveEvent),j&&j(this.lastMoveEvent,m)},this.handlePointerMove=(m,p)=>{this.lastMoveEvent=m,this.lastMoveEventInfo=Qb(p,this.transformPagePoint),Ds.update(this.updatePoint,!0)},this.handlePointerUp=(m,p)=>{this.end();const{onEnd:x,onSessionEnd:g,resumeAnimation:f}=this.handlers;if(this.dragSnapToOrigin&&f&&f(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const b=Jb(m.type==="pointercancel"?this.lastMoveEventInfo:Qb(p,this.transformPagePoint),this.history);this.startEvent&&x&&x(m,b),g&&g(m,b)},!fP(s))return;this.dragSnapToOrigin=i,this.handlers=r,this.transformPagePoint=a,this.contextWindow=n||window;const l=Vf(s),o=Qb(l,this.transformPagePoint),{point:c}=o,{timestamp:d}=aa;this.history=[{...c,timestamp:d}];const{onSessionStart:u}=r;u&&u(s,Jb(o,this.history)),this.removeListeners=ko(pl(this.contextWindow,"pointermove",this.handlePointerMove),pl(this.contextWindow,"pointerup",this.handlePointerUp),pl(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(s){this.handlers=s}end(){this.removeListeners&&this.removeListeners(),kl(this.updatePoint)}}function Qb(t,s){return s?{point:s(t.point)}:t}function lS(t,s){return{x:t.x-s.x,y:t.y-s.y}}function Jb({point:t},s){return{point:t,delta:lS(t,tR(s)),offset:lS(t,Pz(s)),velocity:Rz(s,.1)}}function Pz(t){return t[0]}function tR(t){return t[t.length-1]}function Rz(t,s){if(t.length<2)return{x:0,y:0};let r=t.length-1,a=null;const n=tR(t);for(;r>=0&&(a=t[r],!(n.timestamp-a.timestamp>$c(s)));)r--;if(!a)return{x:0,y:0};const i=xl(n.timestamp-a.timestamp);if(i===0)return{x:0,y:0};const l={x:(n.x-a.x)/i,y:(n.y-a.y)/i};return l.x===1/0&&(l.x=0),l.y===1/0&&(l.y=0),l}function nn(t){return t.max-t.min}function uw(t,s=0,r=.01){return Math.abs(t-s)<=r}function oS(t,s,r,a=.5){t.origin=a,t.originPoint=qs(s.min,s.max,t.origin),t.scale=nn(r)/nn(s),(uw(t.scale,1,1e-4)||isNaN(t.scale))&&(t.scale=1),t.translate=qs(r.min,r.max,t.origin)-t.originPoint,(uw(t.translate)||isNaN(t.translate))&&(t.translate=0)}function xh(t,s,r,a){oS(t.x,s.x,r.x,a?a.originX:void 0),oS(t.y,s.y,r.y,a?a.originY:void 0)}function cS(t,s,r){t.min=r.min+s.min,t.max=t.min+nn(s)}function Dz(t,s,r){cS(t.x,s.x,r.x),cS(t.y,s.y,r.y)}function dS(t,s,r){t.min=s.min-r.min,t.max=t.min+nn(s)}function gh(t,s,r){dS(t.x,s.x,r.x),dS(t.y,s.y,r.y)}function Iz(t,{min:s,max:r},a){return s!==void 0&&t<s?t=a?qs(s,t,a.min):Math.max(t,s):r!==void 0&&t>r&&(t=a?qs(r,t,a.max):Math.min(t,r)),t}function uS(t,s,r){return{min:s!==void 0?t.min+s:void 0,max:r!==void 0?t.max+r-(t.max-t.min):void 0}}function Mz(t,{top:s,left:r,bottom:a,right:n}){return{x:uS(t.x,r,n),y:uS(t.y,s,a)}}function mS(t,s){let r=s.min-t.min,a=s.max-t.max;return s.max-s.min<t.max-t.min&&([r,a]=[a,r]),{min:r,max:a}}function Lz(t,s){return{x:mS(t.x,s.x),y:mS(t.y,s.y)}}function Fz(t,s){let r=.5;const a=nn(t),n=nn(s);return n>a?r=Xh(s.min,s.max-a,t.min):a>n&&(r=Xh(t.min,t.max-n,s.min)),To(0,1,r)}function Oz(t,s){const r={};return s.min!==void 0&&(r.min=s.min-t.min),s.max!==void 0&&(r.max=s.max-t.min),r}const mw=.35;function Bz(t=mw){return t===!1?t=0:t===!0&&(t=mw),{x:hS(t,"left","right"),y:hS(t,"top","bottom")}}function hS(t,s,r){return{min:pS(t,s),max:pS(t,r)}}function pS(t,s){return typeof t=="number"?t:t[s]||0}const xS=()=>({translate:0,scale:1,origin:0,originPoint:0}),Qd=()=>({x:xS(),y:xS()}),gS=()=>({min:0,max:0}),hr=()=>({x:gS(),y:gS()});function vn(t){return[t("x"),t("y")]}function sR({top:t,left:s,right:r,bottom:a}){return{x:{min:s,max:r},y:{min:t,max:a}}}function $z({x:t,y:s}){return{top:s.min,right:t.max,bottom:s.max,left:t.min}}function Uz(t,s){if(!s)return t;const r=s({x:t.left,y:t.top}),a=s({x:t.right,y:t.bottom});return{top:r.y,left:r.x,bottom:a.y,right:a.x}}function Zb(t){return t===void 0||t===1}function hw({scale:t,scaleX:s,scaleY:r}){return!Zb(t)||!Zb(s)||!Zb(r)}function lc(t){return hw(t)||rR(t)||t.z||t.rotate||t.rotateX||t.rotateY}function rR(t){return fS(t.x)||fS(t.y)}function fS(t){return t&&t!=="0%"}function Lg(t,s,r){const a=t-r,n=s*a;return r+n}function yS(t,s,r,a,n){return n!==void 0&&(t=Lg(t,n,a)),Lg(t,r,a)+s}function pw(t,s=0,r=1,a,n){t.min=yS(t.min,s,r,a,n),t.max=yS(t.max,s,r,a,n)}function aR(t,{x:s,y:r}){pw(t.x,s.translate,s.scale,s.originPoint),pw(t.y,r.translate,r.scale,r.originPoint)}function Vz(t,s,r,a=!1){const n=r.length;if(!n)return;s.x=s.y=1;let i,l;for(let o=0;o<n;o++){i=r[o],l=i.projectionDelta;const c=i.instance;c&&c.style&&c.style.display==="contents"||(a&&i.options.layoutScroll&&i.scroll&&i!==i.root&&Jd(t,{x:-i.scroll.offset.x,y:-i.scroll.offset.y}),l&&(s.x*=l.x.scale,s.y*=l.y.scale,aR(t,l)),a&&lc(i.latestValues)&&Jd(t,i.latestValues))}s.x=bS(s.x),s.y=bS(s.y)}function bS(t){return Number.isInteger(t)||t>1.0000000000001||t<.999999999999?t:1}function zl(t,s){t.min=t.min+s,t.max=t.max+s}function vS(t,s,[r,a,n]){const i=s[n]!==void 0?s[n]:.5,l=qs(t.min,t.max,i);pw(t,s[r],s[a],l,s.scale)}const qz=["x","scaleX","originX"],Wz=["y","scaleY","originY"];function Jd(t,s){vS(t.x,s,qz),vS(t.y,s,Wz)}function nR(t,s){return sR(Uz(t.getBoundingClientRect(),s))}function zz(t,s,r){const a=nR(t,r),{scroll:n}=s;return n&&(zl(a.x,n.offset.x),zl(a.y,n.offset.y)),a}const iR=({current:t})=>t?t.ownerDocument.defaultView:null,Gz=new WeakMap;class Kz{constructor(s){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=hr(),this.visualElement=s}start(s,{snapToCursor:r=!1}={}){const{presenceContext:a}=this.visualElement;if(a&&a.isPresent===!1)return;const n=u=>{const{dragSnapToOrigin:m}=this.getProps();m?this.pauseAnimation():this.stopAnimation(),r&&this.snapToCursor(Vf(u,"page").point)},i=(u,m)=>{const{drag:p,dragPropagation:x,onDragStart:g}=this.getProps();if(p&&!x&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=bP(p),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),vn(b=>{let j=this.getAxisMotionValue(b).get()||0;if(Li.test(j)){const{projection:v}=this.visualElement;if(v&&v.layout){const w=v.layout.layoutBox[b];w&&(j=nn(w)*(parseFloat(j)/100))}}this.originPoint[b]=j}),g&&Ds.update(()=>g(u,m),!1,!0);const{animationState:f}=this.visualElement;f&&f.setActive("whileDrag",!0)},l=(u,m)=>{const{dragPropagation:p,dragDirectionLock:x,onDirectionLock:g,onDrag:f}=this.getProps();if(!p&&!this.openGlobalLock)return;const{offset:b}=m;if(x&&this.currentDirection===null){this.currentDirection=Hz(b),this.currentDirection!==null&&g&&g(this.currentDirection);return}this.updateAxis("x",m.point,b),this.updateAxis("y",m.point,b),this.visualElement.render(),f&&f(u,m)},o=(u,m)=>this.stop(u,m),c=()=>vn(u=>{var m;return this.getAnimationState(u)==="paused"&&((m=this.getAxisMotionValue(u).animation)===null||m===void 0?void 0:m.play())}),{dragSnapToOrigin:d}=this.getProps();this.panSession=new eR(s,{onSessionStart:n,onStart:i,onMove:l,onSessionEnd:o,resumeAnimation:c},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:d,contextWindow:iR(this.visualElement)})}stop(s,r){const a=this.isDragging;if(this.cancel(),!a)return;const{velocity:n}=r;this.startAnimation(n);const{onDragEnd:i}=this.getProps();i&&Ds.update(()=>i(s,r))}cancel(){this.isDragging=!1;const{projection:s,animationState:r}=this.visualElement;s&&(s.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:a}=this.getProps();!a&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),r&&r.setActive("whileDrag",!1)}updateAxis(s,r,a){const{drag:n}=this.getProps();if(!a||!Mp(s,n,this.currentDirection))return;const i=this.getAxisMotionValue(s);let l=this.originPoint[s]+a[s];this.constraints&&this.constraints[s]&&(l=Iz(l,this.constraints[s],this.elastic[s])),i.set(l)}resolveConstraints(){var s;const{dragConstraints:r,dragElastic:a}=this.getProps(),n=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(s=this.visualElement.projection)===null||s===void 0?void 0:s.layout,i=this.constraints;r&&Hd(r)?this.constraints||(this.constraints=this.resolveRefConstraints()):r&&n?this.constraints=Mz(n.layoutBox,r):this.constraints=!1,this.elastic=Bz(a),i!==this.constraints&&n&&this.constraints&&!this.hasMutatedConstraints&&vn(l=>{this.getAxisMotionValue(l)&&(this.constraints[l]=Oz(n.layoutBox[l],this.constraints[l]))})}resolveRefConstraints(){const{dragConstraints:s,onMeasureDragConstraints:r}=this.getProps();if(!s||!Hd(s))return!1;const a=s.current,{projection:n}=this.visualElement;if(!n||!n.layout)return!1;const i=zz(a,n.root,this.visualElement.getTransformPagePoint());let l=Lz(n.layout.layoutBox,i);if(r){const o=r($z(l));this.hasMutatedConstraints=!!o,o&&(l=sR(o))}return l}startAnimation(s){const{drag:r,dragMomentum:a,dragElastic:n,dragTransition:i,dragSnapToOrigin:l,onDragTransitionEnd:o}=this.getProps(),c=this.constraints||{},d=vn(u=>{if(!Mp(u,r,this.currentDirection))return;let m=c&&c[u]||{};l&&(m={min:0,max:0});const p=n?200:1e6,x=n?40:1e7,g={type:"inertia",velocity:a?s[u]:0,bounceStiffness:p,bounceDamping:x,timeConstant:750,restDelta:1,restSpeed:10,...i,...m};return this.startAxisValueAnimation(u,g)});return Promise.all(d).then(o)}startAxisValueAnimation(s,r){const a=this.getAxisMotionValue(s);return a.start(r2(s,a,0,r))}stopAnimation(){vn(s=>this.getAxisMotionValue(s).stop())}pauseAnimation(){vn(s=>{var r;return(r=this.getAxisMotionValue(s).animation)===null||r===void 0?void 0:r.pause()})}getAnimationState(s){var r;return(r=this.getAxisMotionValue(s).animation)===null||r===void 0?void 0:r.state}getAxisMotionValue(s){const r="_drag"+s.toUpperCase(),a=this.visualElement.getProps(),n=a[r];return n||this.visualElement.getValue(s,(a.initial?a.initial[s]:void 0)||0)}snapToCursor(s){vn(r=>{const{drag:a}=this.getProps();if(!Mp(r,a,this.currentDirection))return;const{projection:n}=this.visualElement,i=this.getAxisMotionValue(r);if(n&&n.layout){const{min:l,max:o}=n.layout.layoutBox[r];i.set(s[r]-qs(l,o,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:s,dragConstraints:r}=this.getProps(),{projection:a}=this.visualElement;if(!Hd(r)||!a||!this.constraints)return;this.stopAnimation();const n={x:0,y:0};vn(l=>{const o=this.getAxisMotionValue(l);if(o){const c=o.get();n[l]=Fz({min:c,max:c},this.constraints[l])}});const{transformTemplate:i}=this.visualElement.getProps();this.visualElement.current.style.transform=i?i({},""):"none",a.root&&a.root.updateScroll(),a.updateLayout(),this.resolveConstraints(),vn(l=>{if(!Mp(l,s,null))return;const o=this.getAxisMotionValue(l),{min:c,max:d}=this.constraints[l];o.set(qs(c,d,n[l]))})}addListeners(){if(!this.visualElement.current)return;Gz.set(this.visualElement,this);const s=this.visualElement.current,r=pl(s,"pointerdown",c=>{const{drag:d,dragListener:u=!0}=this.getProps();d&&u&&this.start(c)}),a=()=>{const{dragConstraints:c}=this.getProps();Hd(c)&&(this.constraints=this.resolveRefConstraints())},{projection:n}=this.visualElement,i=n.addEventListener("measure",a);n&&!n.layout&&(n.root&&n.root.updateScroll(),n.updateLayout()),a();const l=ul(window,"resize",()=>this.scalePositionWithinConstraints()),o=n.addEventListener("didUpdate",({delta:c,hasLayoutChanged:d})=>{this.isDragging&&d&&(vn(u=>{const m=this.getAxisMotionValue(u);m&&(this.originPoint[u]+=c[u].translate,m.set(m.get()+c[u].translate))}),this.visualElement.render())});return()=>{l(),r(),i(),o&&o()}}getProps(){const s=this.visualElement.getProps(),{drag:r=!1,dragDirectionLock:a=!1,dragPropagation:n=!1,dragConstraints:i=!1,dragElastic:l=mw,dragMomentum:o=!0}=s;return{...s,drag:r,dragDirectionLock:a,dragPropagation:n,dragConstraints:i,dragElastic:l,dragMomentum:o}}}function Mp(t,s,r){return(s===!0||s===t)&&(r===null||r===t)}function Hz(t,s=10){let r=null;return Math.abs(t.y)>s?r="y":Math.abs(t.x)>s&&(r="x"),r}class Yz extends Vo{constructor(s){super(s),this.removeGroupControls=nr,this.removeListeners=nr,this.controls=new Kz(s)}mount(){const{dragControls:s}=this.node.getProps();s&&(this.removeGroupControls=s.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||nr}unmount(){this.removeGroupControls(),this.removeListeners()}}const jS=t=>(s,r)=>{t&&Ds.update(()=>t(s,r))};class Qz extends Vo{constructor(){super(...arguments),this.removePointerDownListener=nr}onPointerDown(s){this.session=new eR(s,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:iR(this.node)})}createPanHandlers(){const{onPanSessionStart:s,onPanStart:r,onPan:a,onPanEnd:n}=this.node.getProps();return{onSessionStart:jS(s),onStart:jS(r),onMove:a,onEnd:(i,l)=>{delete this.session,n&&Ds.update(()=>n(i,l))}}}mount(){this.removePointerDownListener=pl(this.node.current,"pointerdown",s=>this.onPointerDown(s))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}function Jz(){const t=h.useContext($1);if(t===null)return[!0,null];const{isPresent:s,onExitComplete:r,register:a}=t,n=h.useId();return h.useEffect(()=>a(n),[]),!s&&r?[!1,()=>r&&r(n)]:[!0]}const Ex={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function wS(t,s){return s.max===s.min?0:t/(s.max-s.min)*100}const wm={correct:(t,s)=>{if(!s.target)return t;if(typeof t=="string")if(mt.test(t))t=parseFloat(t);else return t;const r=wS(t,s.target.x),a=wS(t,s.target.y);return`${r}% ${a}%`}},Zz={correct:(t,{treeScale:s,projectionDelta:r})=>{const a=t,n=Po.parse(t);if(n.length>5)return a;const i=Po.createTransformer(t),l=typeof n[0]!="number"?1:0,o=r.x.scale*s.x,c=r.y.scale*s.y;n[0+l]/=o,n[1+l]/=c;const d=qs(o,c,.5);return typeof n[2+l]=="number"&&(n[2+l]/=d),typeof n[3+l]=="number"&&(n[3+l]/=d),i(n)}};class Xz extends ds.Component{componentDidMount(){const{visualElement:s,layoutGroup:r,switchLayoutGroup:a,layoutId:n}=this.props,{projection:i}=s;nq(eG),i&&(r.group&&r.group.add(i),a&&a.register&&n&&a.register(i),i.root.didUpdate(),i.addEventListener("animationComplete",()=>{this.safeToRemove()}),i.setOptions({...i.options,onExitComplete:()=>this.safeToRemove()})),Ex.hasEverUpdated=!0}getSnapshotBeforeUpdate(s){const{layoutDependency:r,visualElement:a,drag:n,isPresent:i}=this.props,l=a.projection;return l&&(l.isPresent=i,n||s.layoutDependency!==r||r===void 0?l.willUpdate():this.safeToRemove(),s.isPresent!==i&&(i?l.promote():l.relegate()||Ds.postRender(()=>{const o=l.getStack();(!o||!o.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:s}=this.props.visualElement;s&&(s.root.didUpdate(),queueMicrotask(()=>{!s.currentAnimation&&s.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:s,layoutGroup:r,switchLayoutGroup:a}=this.props,{projection:n}=s;n&&(n.scheduleCheckAfterUnmount(),r&&r.group&&r.group.remove(n),a&&a.deregister&&a.deregister(n))}safeToRemove(){const{safeToRemove:s}=this.props;s&&s()}render(){return null}}function lR(t){const[s,r]=Jz(),a=h.useContext(sP);return ds.createElement(Xz,{...t,layoutGroup:a,switchLayoutGroup:h.useContext(rP),isPresent:s,safeToRemove:r})}const eG={borderRadius:{...wm,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:wm,borderTopRightRadius:wm,borderBottomLeftRadius:wm,borderBottomRightRadius:wm,boxShadow:Zz},oR=["TopLeft","TopRight","BottomLeft","BottomRight"],tG=oR.length,NS=t=>typeof t=="string"?parseFloat(t):t,kS=t=>typeof t=="number"||mt.test(t);function sG(t,s,r,a,n,i){n?(t.opacity=qs(0,r.opacity!==void 0?r.opacity:1,rG(a)),t.opacityExit=qs(s.opacity!==void 0?s.opacity:1,0,aG(a))):i&&(t.opacity=qs(s.opacity!==void 0?s.opacity:1,r.opacity!==void 0?r.opacity:1,a));for(let l=0;l<tG;l++){const o=`border${oR[l]}Radius`;let c=CS(s,o),d=CS(r,o);if(c===void 0&&d===void 0)continue;c||(c=0),d||(d=0),c===0||d===0||kS(c)===kS(d)?(t[o]=Math.max(qs(NS(c),NS(d),a),0),(Li.test(d)||Li.test(c))&&(t[o]+="%")):t[o]=d}(s.rotate||r.rotate)&&(t.rotate=qs(s.rotate||0,r.rotate||0,a))}function CS(t,s){return t[s]!==void 0?t[s]:t.borderRadius}const rG=cR(0,.5,PP),aG=cR(.5,.95,nr);function cR(t,s,r){return a=>a<t?0:a>s?1:r(Xh(t,s,a))}function SS(t,s){t.min=s.min,t.max=s.max}function gn(t,s){SS(t.x,s.x),SS(t.y,s.y)}function _S(t,s,r,a,n){return t-=s,t=Lg(t,1/r,a),n!==void 0&&(t=Lg(t,1/n,a)),t}function nG(t,s=0,r=1,a=.5,n,i=t,l=t){if(Li.test(s)&&(s=parseFloat(s),s=qs(l.min,l.max,s/100)-l.min),typeof s!="number")return;let o=qs(i.min,i.max,a);t===i&&(o-=s),t.min=_S(t.min,s,r,o,n),t.max=_S(t.max,s,r,o,n)}function ES(t,s,[r,a,n],i,l){nG(t,s[r],s[a],s[n],s.scale,i,l)}const iG=["x","scaleX","originX"],lG=["y","scaleY","originY"];function AS(t,s,r,a){ES(t.x,s,iG,r?r.x:void 0,a?a.x:void 0),ES(t.y,s,lG,r?r.y:void 0,a?a.y:void 0)}function TS(t){return t.translate===0&&t.scale===1}function dR(t){return TS(t.x)&&TS(t.y)}function oG(t,s){return t.x.min===s.x.min&&t.x.max===s.x.max&&t.y.min===s.y.min&&t.y.max===s.y.max}function uR(t,s){return Math.round(t.x.min)===Math.round(s.x.min)&&Math.round(t.x.max)===Math.round(s.x.max)&&Math.round(t.y.min)===Math.round(s.y.min)&&Math.round(t.y.max)===Math.round(s.y.max)}function PS(t){return nn(t.x)/nn(t.y)}class cG{constructor(){this.members=[]}add(s){a2(this.members,s),s.scheduleRender()}remove(s){if(n2(this.members,s),s===this.prevLead&&(this.prevLead=void 0),s===this.lead){const r=this.members[this.members.length-1];r&&this.promote(r)}}relegate(s){const r=this.members.findIndex(n=>s===n);if(r===0)return!1;let a;for(let n=r;n>=0;n--){const i=this.members[n];if(i.isPresent!==!1){a=i;break}}return a?(this.promote(a),!0):!1}promote(s,r){const a=this.lead;if(s!==a&&(this.prevLead=a,this.lead=s,s.show(),a)){a.instance&&a.scheduleRender(),s.scheduleRender(),s.resumeFrom=a,r&&(s.resumeFrom.preserveOpacity=!0),a.snapshot&&(s.snapshot=a.snapshot,s.snapshot.latestValues=a.animationValues||a.latestValues),s.root&&s.root.isUpdating&&(s.isLayoutDirty=!0);const{crossfade:n}=s.options;n===!1&&a.hide()}}exitAnimationComplete(){this.members.forEach(s=>{const{options:r,resumingFrom:a}=s;r.onExitComplete&&r.onExitComplete(),a&&a.options.onExitComplete&&a.options.onExitComplete()})}scheduleRender(){this.members.forEach(s=>{s.instance&&s.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function RS(t,s,r){let a="";const n=t.x.translate/s.x,i=t.y.translate/s.y;if((n||i)&&(a=`translate3d(${n}px, ${i}px, 0) `),(s.x!==1||s.y!==1)&&(a+=`scale(${1/s.x}, ${1/s.y}) `),r){const{rotate:c,rotateX:d,rotateY:u}=r;c&&(a+=`rotate(${c}deg) `),d&&(a+=`rotateX(${d}deg) `),u&&(a+=`rotateY(${u}deg) `)}const l=t.x.scale*s.x,o=t.y.scale*s.y;return(l!==1||o!==1)&&(a+=`scale(${l}, ${o})`),a||"none"}const dG=(t,s)=>t.depth-s.depth;class uG{constructor(){this.children=[],this.isDirty=!1}add(s){a2(this.children,s),this.isDirty=!0}remove(s){n2(this.children,s),this.isDirty=!0}forEach(s){this.isDirty&&this.children.sort(dG),this.isDirty=!1,this.children.forEach(s)}}function mG(t,s){const r=performance.now(),a=({timestamp:n})=>{const i=n-r;i>=s&&(kl(a),t(i-s))};return Ds.read(a,!0),()=>kl(a)}function hG(t){window.MotionDebug&&window.MotionDebug.record(t)}function pG(t){return t instanceof SVGElement&&t.tagName!=="svg"}function xG(t,s,r){const a=qa(t)?t:Iu(t);return a.start(r2("",a,s,r)),a.animation}const DS=["","X","Y","Z"],gG={visibility:"hidden"},IS=1e3;let fG=0;const oc={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0};function mR({attachResizeListener:t,defaultParent:s,measureScroll:r,checkIsScrollRoot:a,resetTransform:n}){return class{constructor(l={},o=s==null?void 0:s()){this.id=fG++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,oc.totalNodes=oc.resolvedTargetDeltas=oc.recalculatedProjection=0,this.nodes.forEach(vG),this.nodes.forEach(CG),this.nodes.forEach(SG),this.nodes.forEach(jG),hG(oc)},this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=l,this.root=o?o.root||o:this,this.path=o?[...o.path,o]:[],this.parent=o,this.depth=o?o.depth+1:0;for(let c=0;c<this.path.length;c++)this.path[c].shouldResetTransform=!0;this.root===this&&(this.nodes=new uG)}addEventListener(l,o){return this.eventHandlers.has(l)||this.eventHandlers.set(l,new i2),this.eventHandlers.get(l).add(o)}notifyListeners(l,...o){const c=this.eventHandlers.get(l);c&&c.notify(...o)}hasListeners(l){return this.eventHandlers.has(l)}mount(l,o=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=pG(l),this.instance=l;const{layoutId:c,layout:d,visualElement:u}=this.options;if(u&&!u.current&&u.mount(l),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),o&&(d||c)&&(this.isLayoutDirty=!0),t){let m;const p=()=>this.root.updateBlockedByResize=!1;t(l,()=>{this.root.updateBlockedByResize=!0,m&&m(),m=mG(p,250),Ex.hasAnimatedSinceResize&&(Ex.hasAnimatedSinceResize=!1,this.nodes.forEach(LS))})}c&&this.root.registerSharedNode(c,this),this.options.animate!==!1&&u&&(c||d)&&this.addEventListener("didUpdate",({delta:m,hasLayoutChanged:p,hasRelativeTargetChanged:x,layout:g})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const f=this.options.transition||u.getDefaultTransition()||PG,{onLayoutAnimationStart:b,onLayoutAnimationComplete:j}=u.getProps(),v=!this.targetLayout||!uR(this.targetLayout,g)||x,w=!p&&x;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||w||p&&(v||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(m,w);const y={...s2(f,"layout"),onPlay:b,onComplete:j};(u.shouldReduceMotion||this.options.layoutRoot)&&(y.delay=0,y.type=!1),this.startAnimation(y)}else p||LS(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=g})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const l=this.getStack();l&&l.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,kl(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(_G),this.animationId++)}getTransformTemplate(){const{visualElement:l}=this.options;return l&&l.getProps().transformTemplate}willUpdate(l=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let u=0;u<this.path.length;u++){const m=this.path[u];m.shouldResetTransform=!0,m.updateScroll("snapshot"),m.options.layoutRoot&&m.willUpdate(!1)}const{layoutId:o,layout:c}=this.options;if(o===void 0&&!c)return;const d=this.getTransformTemplate();this.prevTransformTemplateValue=d?d(this.latestValues,""):void 0,this.updateSnapshot(),l&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(MS);return}this.isUpdating||this.nodes.forEach(NG),this.isUpdating=!1,this.nodes.forEach(kG),this.nodes.forEach(yG),this.nodes.forEach(bG),this.clearAllSnapshots();const o=performance.now();aa.delta=To(0,1e3/60,o-aa.timestamp),aa.timestamp=o,aa.isProcessing=!0,Vb.update.process(aa),Vb.preRender.process(aa),Vb.render.process(aa),aa.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,queueMicrotask(()=>this.update()))}clearAllSnapshots(){this.nodes.forEach(wG),this.sharedNodes.forEach(EG)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Ds.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Ds.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let c=0;c<this.path.length;c++)this.path[c].updateScroll();const l=this.layout;this.layout=this.measure(!1),this.layoutCorrected=hr(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:o}=this.options;o&&o.notify("LayoutMeasure",this.layout.layoutBox,l?l.layoutBox:void 0)}updateScroll(l="measure"){let o=!!(this.options.layoutScroll&&this.instance);this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===l&&(o=!1),o&&(this.scroll={animationId:this.root.animationId,phase:l,isRoot:a(this.instance),offset:r(this.instance)})}resetTransform(){if(!n)return;const l=this.isLayoutDirty||this.shouldResetTransform,o=this.projectionDelta&&!dR(this.projectionDelta),c=this.getTransformTemplate(),d=c?c(this.latestValues,""):void 0,u=d!==this.prevTransformTemplateValue;l&&(o||lc(this.latestValues)||u)&&(n(this.instance,d),this.shouldResetTransform=!1,this.scheduleRender())}measure(l=!0){const o=this.measurePageBox();let c=this.removeElementScroll(o);return l&&(c=this.removeTransform(c)),RG(c),{animationId:this.root.animationId,measuredBox:o,layoutBox:c,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:l}=this.options;if(!l)return hr();const o=l.measureViewportBox(),{scroll:c}=this.root;return c&&(zl(o.x,c.offset.x),zl(o.y,c.offset.y)),o}removeElementScroll(l){const o=hr();gn(o,l);for(let c=0;c<this.path.length;c++){const d=this.path[c],{scroll:u,options:m}=d;if(d!==this.root&&u&&m.layoutScroll){if(u.isRoot){gn(o,l);const{scroll:p}=this.root;p&&(zl(o.x,-p.offset.x),zl(o.y,-p.offset.y))}zl(o.x,u.offset.x),zl(o.y,u.offset.y)}}return o}applyTransform(l,o=!1){const c=hr();gn(c,l);for(let d=0;d<this.path.length;d++){const u=this.path[d];!o&&u.options.layoutScroll&&u.scroll&&u!==u.root&&Jd(c,{x:-u.scroll.offset.x,y:-u.scroll.offset.y}),lc(u.latestValues)&&Jd(c,u.latestValues)}return lc(this.latestValues)&&Jd(c,this.latestValues),c}removeTransform(l){const o=hr();gn(o,l);for(let c=0;c<this.path.length;c++){const d=this.path[c];if(!d.instance||!lc(d.latestValues))continue;hw(d.latestValues)&&d.updateSnapshot();const u=hr(),m=d.measurePageBox();gn(u,m),AS(o,d.latestValues,d.snapshot?d.snapshot.layoutBox:void 0,u)}return lc(this.latestValues)&&AS(o,this.latestValues),o}setTargetDelta(l){this.targetDelta=l,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(l){this.options={...this.options,...l,crossfade:l.crossfade!==void 0?l.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==aa.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(l=!1){var o;const c=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=c.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=c.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=c.isSharedProjectionDirty);const d=!!this.resumingFrom||this!==c;if(!(l||d&&this.isSharedProjectionDirty||this.isProjectionDirty||!((o=this.parent)===null||o===void 0)&&o.isProjectionDirty||this.attemptToResolveRelativeTarget))return;const{layout:m,layoutId:p}=this.options;if(!(!this.layout||!(m||p))){if(this.resolvedRelativeTargetAt=aa.timestamp,!this.targetDelta&&!this.relativeTarget){const x=this.getClosestProjectingParent();x&&x.layout&&this.animationProgress!==1?(this.relativeParent=x,this.forceRelativeParentToResolveTarget(),this.relativeTarget=hr(),this.relativeTargetOrigin=hr(),gh(this.relativeTargetOrigin,this.layout.layoutBox,x.layout.layoutBox),gn(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=hr(),this.targetWithTransforms=hr()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),Dz(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):gn(this.target,this.layout.layoutBox),aR(this.target,this.targetDelta)):gn(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const x=this.getClosestProjectingParent();x&&!!x.resumingFrom==!!this.resumingFrom&&!x.options.layoutScroll&&x.target&&this.animationProgress!==1?(this.relativeParent=x,this.forceRelativeParentToResolveTarget(),this.relativeTarget=hr(),this.relativeTargetOrigin=hr(),gh(this.relativeTargetOrigin,this.target,x.target),gn(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}oc.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||hw(this.parent.latestValues)||rR(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var l;const o=this.getLead(),c=!!this.resumingFrom||this!==o;let d=!0;if((this.isProjectionDirty||!((l=this.parent)===null||l===void 0)&&l.isProjectionDirty)&&(d=!1),c&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(d=!1),this.resolvedRelativeTargetAt===aa.timestamp&&(d=!1),d)return;const{layout:u,layoutId:m}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(u||m))return;gn(this.layoutCorrected,this.layout.layoutBox);const p=this.treeScale.x,x=this.treeScale.y;Vz(this.layoutCorrected,this.treeScale,this.path,c),o.layout&&!o.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(o.target=o.layout.layoutBox);const{target:g}=o;if(!g){this.projectionTransform&&(this.projectionDelta=Qd(),this.projectionTransform="none",this.scheduleRender());return}this.projectionDelta||(this.projectionDelta=Qd(),this.projectionDeltaWithTransform=Qd());const f=this.projectionTransform;xh(this.projectionDelta,this.layoutCorrected,g,this.latestValues),this.projectionTransform=RS(this.projectionDelta,this.treeScale),(this.projectionTransform!==f||this.treeScale.x!==p||this.treeScale.y!==x)&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",g)),oc.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(l=!0){if(this.options.scheduleRender&&this.options.scheduleRender(),l){const o=this.getStack();o&&o.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}setAnimationOrigin(l,o=!1){const c=this.snapshot,d=c?c.latestValues:{},u={...this.latestValues},m=Qd();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!o;const p=hr(),x=c?c.source:void 0,g=this.layout?this.layout.source:void 0,f=x!==g,b=this.getStack(),j=!b||b.members.length<=1,v=!!(f&&!j&&this.options.crossfade===!0&&!this.path.some(TG));this.animationProgress=0;let w;this.mixTargetDelta=y=>{const C=y/1e3;FS(m.x,l.x,C),FS(m.y,l.y,C),this.setTargetDelta(m),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(gh(p,this.layout.layoutBox,this.relativeParent.layout.layoutBox),AG(this.relativeTarget,this.relativeTargetOrigin,p,C),w&&oG(this.relativeTarget,w)&&(this.isProjectionDirty=!1),w||(w=hr()),gn(w,this.relativeTarget)),f&&(this.animationValues=u,sG(u,d,this.latestValues,C,v,j)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=C},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(l){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(kl(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Ds.update(()=>{Ex.hasAnimatedSinceResize=!0,this.currentAnimation=xG(0,IS,{...l,onUpdate:o=>{this.mixTargetDelta(o),l.onUpdate&&l.onUpdate(o)},onComplete:()=>{l.onComplete&&l.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const l=this.getStack();l&&l.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(IS),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const l=this.getLead();let{targetWithTransforms:o,target:c,layout:d,latestValues:u}=l;if(!(!o||!c||!d)){if(this!==l&&this.layout&&d&&hR(this.options.animationType,this.layout.layoutBox,d.layoutBox)){c=this.target||hr();const m=nn(this.layout.layoutBox.x);c.x.min=l.target.x.min,c.x.max=c.x.min+m;const p=nn(this.layout.layoutBox.y);c.y.min=l.target.y.min,c.y.max=c.y.min+p}gn(o,c),Jd(o,u),xh(this.projectionDeltaWithTransform,this.layoutCorrected,o,u)}}registerSharedNode(l,o){this.sharedNodes.has(l)||this.sharedNodes.set(l,new cG),this.sharedNodes.get(l).add(o);const d=o.options.initialPromotionConfig;o.promote({transition:d?d.transition:void 0,preserveFollowOpacity:d&&d.shouldPreserveFollowOpacity?d.shouldPreserveFollowOpacity(o):void 0})}isLead(){const l=this.getStack();return l?l.lead===this:!0}getLead(){var l;const{layoutId:o}=this.options;return o?((l=this.getStack())===null||l===void 0?void 0:l.lead)||this:this}getPrevLead(){var l;const{layoutId:o}=this.options;return o?(l=this.getStack())===null||l===void 0?void 0:l.prevLead:void 0}getStack(){const{layoutId:l}=this.options;if(l)return this.root.sharedNodes.get(l)}promote({needsReset:l,transition:o,preserveFollowOpacity:c}={}){const d=this.getStack();d&&d.promote(this,c),l&&(this.projectionDelta=void 0,this.needsReset=!0),o&&this.setOptions({transition:o})}relegate(){const l=this.getStack();return l?l.relegate(this):!1}resetRotation(){const{visualElement:l}=this.options;if(!l)return;let o=!1;const{latestValues:c}=l;if((c.rotate||c.rotateX||c.rotateY||c.rotateZ)&&(o=!0),!o)return;const d={};for(let u=0;u<DS.length;u++){const m="rotate"+DS[u];c[m]&&(d[m]=c[m],l.setStaticValue(m,0))}l.render();for(const u in d)l.setStaticValue(u,d[u]);l.scheduleRender()}getProjectionStyles(l){var o,c;if(!this.instance||this.isSVG)return;if(!this.isVisible)return gG;const d={visibility:""},u=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,d.opacity="",d.pointerEvents=_x(l==null?void 0:l.pointerEvents)||"",d.transform=u?u(this.latestValues,""):"none",d;const m=this.getLead();if(!this.projectionDelta||!this.layout||!m.target){const f={};return this.options.layoutId&&(f.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,f.pointerEvents=_x(l==null?void 0:l.pointerEvents)||""),this.hasProjected&&!lc(this.latestValues)&&(f.transform=u?u({},""):"none",this.hasProjected=!1),f}const p=m.animationValues||m.latestValues;this.applyTransformsToTarget(),d.transform=RS(this.projectionDeltaWithTransform,this.treeScale,p),u&&(d.transform=u(p,d.transform));const{x,y:g}=this.projectionDelta;d.transformOrigin=`${x.origin*100}% ${g.origin*100}% 0`,m.animationValues?d.opacity=m===this?(c=(o=p.opacity)!==null&&o!==void 0?o:this.latestValues.opacity)!==null&&c!==void 0?c:1:this.preserveOpacity?this.latestValues.opacity:p.opacityExit:d.opacity=m===this?p.opacity!==void 0?p.opacity:"":p.opacityExit!==void 0?p.opacityExit:0;for(const f in Ag){if(p[f]===void 0)continue;const{correct:b,applyTo:j}=Ag[f],v=d.transform==="none"?p[f]:b(p[f],m);if(j){const w=j.length;for(let y=0;y<w;y++)d[j[y]]=v}else d[f]=v}return this.options.layoutId&&(d.pointerEvents=m===this?_x(l==null?void 0:l.pointerEvents)||"":"none"),d}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(l=>{var o;return(o=l.currentAnimation)===null||o===void 0?void 0:o.stop()}),this.root.nodes.forEach(MS),this.root.sharedNodes.clear()}}}function yG(t){t.updateLayout()}function bG(t){var s;const r=((s=t.resumeFrom)===null||s===void 0?void 0:s.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&r&&t.hasListeners("didUpdate")){const{layoutBox:a,measuredBox:n}=t.layout,{animationType:i}=t.options,l=r.source!==t.layout.source;i==="size"?vn(m=>{const p=l?r.measuredBox[m]:r.layoutBox[m],x=nn(p);p.min=a[m].min,p.max=p.min+x}):hR(i,r.layoutBox,a)&&vn(m=>{const p=l?r.measuredBox[m]:r.layoutBox[m],x=nn(a[m]);p.max=p.min+x,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[m].max=t.relativeTarget[m].min+x)});const o=Qd();xh(o,a,r.layoutBox);const c=Qd();l?xh(c,t.applyTransform(n,!0),r.measuredBox):xh(c,a,r.layoutBox);const d=!dR(o);let u=!1;if(!t.resumeFrom){const m=t.getClosestProjectingParent();if(m&&!m.resumeFrom){const{snapshot:p,layout:x}=m;if(p&&x){const g=hr();gh(g,r.layoutBox,p.layoutBox);const f=hr();gh(f,a,x.layoutBox),uR(g,f)||(u=!0),m.options.layoutRoot&&(t.relativeTarget=f,t.relativeTargetOrigin=g,t.relativeParent=m)}}}t.notifyListeners("didUpdate",{layout:a,snapshot:r,delta:c,layoutDelta:o,hasLayoutChanged:d,hasRelativeTargetChanged:u})}else if(t.isLead()){const{onExitComplete:a}=t.options;a&&a()}t.options.transition=void 0}function vG(t){oc.totalNodes++,t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function jG(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function wG(t){t.clearSnapshot()}function MS(t){t.clearMeasurements()}function NG(t){t.isLayoutDirty=!1}function kG(t){const{visualElement:s}=t.options;s&&s.getProps().onBeforeLayoutMeasure&&s.notify("BeforeLayoutMeasure"),t.resetTransform()}function LS(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function CG(t){t.resolveTargetDelta()}function SG(t){t.calcProjection()}function _G(t){t.resetRotation()}function EG(t){t.removeLeadSnapshot()}function FS(t,s,r){t.translate=qs(s.translate,0,r),t.scale=qs(s.scale,1,r),t.origin=s.origin,t.originPoint=s.originPoint}function OS(t,s,r,a){t.min=qs(s.min,r.min,a),t.max=qs(s.max,r.max,a)}function AG(t,s,r,a){OS(t.x,s.x,r.x,a),OS(t.y,s.y,r.y,a)}function TG(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const PG={duration:.45,ease:[.4,0,.1,1]},BS=t=>typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes(t),$S=BS("applewebkit/")&&!BS("chrome/")?Math.round:nr;function US(t){t.min=$S(t.min),t.max=$S(t.max)}function RG(t){US(t.x),US(t.y)}function hR(t,s,r){return t==="position"||t==="preserve-aspect"&&!uw(PS(s),PS(r),.2)}const DG=mR({attachResizeListener:(t,s)=>ul(t,"resize",s),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Xb={current:void 0},pR=mR({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!Xb.current){const t=new DG({});t.mount(window),t.setOptions({layoutScroll:!0}),Xb.current=t}return Xb.current},resetTransform:(t,s)=>{t.style.transform=s!==void 0?s:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),IG={pan:{Feature:Qz},drag:{Feature:Yz,ProjectionNode:pR,MeasureLayout:lR}},MG=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/;function LG(t){const s=MG.exec(t);if(!s)return[,];const[,r,a]=s;return[r,a]}function xw(t,s,r=1){const[a,n]=LG(t);if(!a)return;const i=window.getComputedStyle(s).getPropertyValue(a);if(i){const l=i.trim();return QP(l)?parseFloat(l):l}else return aw(n)?xw(n,s,r+1):n}function FG(t,{...s},r){const a=t.current;if(!(a instanceof Element))return{target:s,transitionEnd:r};r&&(r={...r}),t.values.forEach(n=>{const i=n.get();if(!aw(i))return;const l=xw(i,a);l&&n.set(l)});for(const n in s){const i=s[n];if(!aw(i))continue;const l=xw(i,a);l&&(s[n]=l,r||(r={}),r[n]===void 0&&(r[n]=i))}return{target:s,transitionEnd:r}}const OG=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),xR=t=>OG.has(t),BG=t=>Object.keys(t).some(xR),VS=t=>t===ld||t===mt,qS=(t,s)=>parseFloat(t.split(", ")[s]),WS=(t,s)=>(r,{transform:a})=>{if(a==="none"||!a)return 0;const n=a.match(/^matrix3d\((.+)\)$/);if(n)return qS(n[1],s);{const i=a.match(/^matrix\((.+)\)$/);return i?qS(i[1],t):0}},$G=new Set(["x","y","z"]),UG=T0.filter(t=>!$G.has(t));function VG(t){const s=[];return UG.forEach(r=>{const a=t.getValue(r);a!==void 0&&(s.push([r,a.get()]),a.set(r.startsWith("scale")?1:0))}),s.length&&t.render(),s}const Mu={width:({x:t},{paddingLeft:s="0",paddingRight:r="0"})=>t.max-t.min-parseFloat(s)-parseFloat(r),height:({y:t},{paddingTop:s="0",paddingBottom:r="0"})=>t.max-t.min-parseFloat(s)-parseFloat(r),top:(t,{top:s})=>parseFloat(s),left:(t,{left:s})=>parseFloat(s),bottom:({y:t},{top:s})=>parseFloat(s)+(t.max-t.min),right:({x:t},{left:s})=>parseFloat(s)+(t.max-t.min),x:WS(4,13),y:WS(5,14)};Mu.translateX=Mu.x;Mu.translateY=Mu.y;const qG=(t,s,r)=>{const a=s.measureViewportBox(),n=s.current,i=getComputedStyle(n),{display:l}=i,o={};l==="none"&&s.setStaticValue("display",t.display||"block"),r.forEach(d=>{o[d]=Mu[d](a,i)}),s.render();const c=s.measureViewportBox();return r.forEach(d=>{const u=s.getValue(d);u&&u.jump(o[d]),t[d]=Mu[d](c,i)}),t},WG=(t,s,r={},a={})=>{s={...s},a={...a};const n=Object.keys(s).filter(xR);let i=[],l=!1;const o=[];if(n.forEach(c=>{const d=t.getValue(c);if(!t.hasValue(c))return;let u=r[c],m=jm(u);const p=s[c];let x;if(Pg(p)){const g=p.length,f=p[0]===null?1:0;u=p[f],m=jm(u);for(let b=f;b<g&&p[b]!==null;b++)x?J1(jm(p[b])===x):x=jm(p[b])}else x=jm(p);if(m!==x)if(VS(m)&&VS(x)){const g=d.get();typeof g=="string"&&d.set(parseFloat(g)),typeof p=="string"?s[c]=parseFloat(p):Array.isArray(p)&&x===mt&&(s[c]=p.map(parseFloat))}else m!=null&&m.transform&&(x!=null&&x.transform)&&(u===0||p===0)?u===0?d.set(x.transform(u)):s[c]=m.transform(p):(l||(i=VG(t),l=!0),o.push(c),a[c]=a[c]!==void 0?a[c]:s[c],d.jump(p))}),o.length){const c=o.indexOf("height")>=0?window.pageYOffset:null,d=qG(s,t,o);return i.length&&i.forEach(([u,m])=>{t.getValue(u).set(m)}),t.render(),Of&&c!==null&&window.scrollTo({top:c}),{target:d,transitionEnd:a}}else return{target:s,transitionEnd:a}};function zG(t,s,r,a){return BG(s)?WG(t,s,r,a):{target:s,transitionEnd:a}}const GG=(t,s,r,a)=>{const n=FG(t,s,a);return s=n.target,a=n.transitionEnd,zG(t,s,r,a)},gw={current:null},gR={current:!1};function KG(){if(gR.current=!0,!!Of)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),s=()=>gw.current=t.matches;t.addListener(s),s()}else gw.current=!1}function HG(t,s,r){const{willChange:a}=s;for(const n in s){const i=s[n],l=r[n];if(qa(i))t.addValue(n,i),Mg(a)&&a.add(n);else if(qa(l))t.addValue(n,Iu(i,{owner:t})),Mg(a)&&a.remove(n);else if(l!==i)if(t.hasValue(n)){const o=t.getValue(n);!o.hasAnimated&&o.set(i)}else{const o=t.getStaticValue(n);t.addValue(n,Iu(o!==void 0?o:i,{owner:t}))}}for(const n in r)s[n]===void 0&&t.removeValue(n);return s}const zS=new WeakMap,fR=Object.keys(Zh),YG=fR.length,GS=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"],QG=q1.length;class JG{constructor({parent:s,props:r,presenceContext:a,reducedMotionConfig:n,visualState:i},l={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.scheduleRender=()=>Ds.render(this.render,!1,!0);const{latestValues:o,renderState:c}=i;this.latestValues=o,this.baseTarget={...o},this.initialValues=r.initial?{...o}:{},this.renderState=c,this.parent=s,this.props=r,this.presenceContext=a,this.depth=s?s.depth+1:0,this.reducedMotionConfig=n,this.options=l,this.isControllingVariants=$f(r),this.isVariantNode=tP(r),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(s&&s.current);const{willChange:d,...u}=this.scrapeMotionValuesFromProps(r,{});for(const m in u){const p=u[m];o[m]!==void 0&&qa(p)&&(p.set(o[m],!1),Mg(d)&&d.add(m))}}scrapeMotionValuesFromProps(s,r){return{}}mount(s){this.current=s,zS.set(s,this),this.projection&&!this.projection.instance&&this.projection.mount(s),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((r,a)=>this.bindToMotionValue(a,r)),gR.current||KG(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:gw.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){zS.delete(this.current),this.projection&&this.projection.unmount(),kl(this.notifyUpdate),kl(this.render),this.valueSubscriptions.forEach(s=>s()),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const s in this.events)this.events[s].clear();for(const s in this.features)this.features[s].unmount();this.current=null}bindToMotionValue(s,r){const a=id.has(s),n=r.on("change",l=>{this.latestValues[s]=l,this.props.onUpdate&&Ds.update(this.notifyUpdate,!1,!0),a&&this.projection&&(this.projection.isTransformDirty=!0)}),i=r.on("renderRequest",this.scheduleRender);this.valueSubscriptions.set(s,()=>{n(),i()})}sortNodePosition(s){return!this.current||!this.sortInstanceNodePosition||this.type!==s.type?0:this.sortInstanceNodePosition(this.current,s.current)}loadFeatures({children:s,...r},a,n,i){let l,o;for(let c=0;c<YG;c++){const d=fR[c],{isEnabled:u,Feature:m,ProjectionNode:p,MeasureLayout:x}=Zh[d];p&&(l=p),u(r)&&(!this.features[d]&&m&&(this.features[d]=new m(this)),x&&(o=x))}if((this.type==="html"||this.type==="svg")&&!this.projection&&l){this.projection=new l(this.latestValues,this.parent&&this.parent.projection);const{layoutId:c,layout:d,drag:u,dragConstraints:m,layoutScroll:p,layoutRoot:x}=r;this.projection.setOptions({layoutId:c,layout:d,alwaysMeasureLayout:!!u||m&&Hd(m),visualElement:this,scheduleRender:()=>this.scheduleRender(),animationType:typeof d=="string"?d:"both",initialPromotionConfig:i,layoutScroll:p,layoutRoot:x})}return o}updateFeatures(){for(const s in this.features){const r=this.features[s];r.isMounted?r.update():(r.mount(),r.isMounted=!0)}}triggerBuild(){this.build(this.renderState,this.latestValues,this.options,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):hr()}getStaticValue(s){return this.latestValues[s]}setStaticValue(s,r){this.latestValues[s]=r}makeTargetAnimatable(s,r=!0){return this.makeTargetAnimatableFromInstance(s,this.props,r)}update(s,r){(s.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=s,this.prevPresenceContext=this.presenceContext,this.presenceContext=r;for(let a=0;a<GS.length;a++){const n=GS[a];this.propEventSubscriptions[n]&&(this.propEventSubscriptions[n](),delete this.propEventSubscriptions[n]);const i=s["on"+n];i&&(this.propEventSubscriptions[n]=this.on(n,i))}this.prevMotionValues=HG(this,this.scrapeMotionValuesFromProps(s,this.prevProps),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(s){return this.props.variants?this.props.variants[s]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}getVariantContext(s=!1){if(s)return this.parent?this.parent.getVariantContext():void 0;if(!this.isControllingVariants){const a=this.parent?this.parent.getVariantContext()||{}:{};return this.props.initial!==void 0&&(a.initial=this.props.initial),a}const r={};for(let a=0;a<QG;a++){const n=q1[a],i=this.props[n];(Jh(i)||i===!1)&&(r[n]=i)}return r}addVariantChild(s){const r=this.getClosestVariantNode();if(r)return r.variantChildren&&r.variantChildren.add(s),()=>r.variantChildren.delete(s)}addValue(s,r){r!==this.values.get(s)&&(this.removeValue(s),this.bindToMotionValue(s,r)),this.values.set(s,r),this.latestValues[s]=r.get()}removeValue(s){this.values.delete(s);const r=this.valueSubscriptions.get(s);r&&(r(),this.valueSubscriptions.delete(s)),delete this.latestValues[s],this.removeValueFromRenderState(s,this.renderState)}hasValue(s){return this.values.has(s)}getValue(s,r){if(this.props.values&&this.props.values[s])return this.props.values[s];let a=this.values.get(s);return a===void 0&&r!==void 0&&(a=Iu(r,{owner:this}),this.addValue(s,a)),a}readValue(s){var r;return this.latestValues[s]!==void 0||!this.current?this.latestValues[s]:(r=this.getBaseTargetFromProps(this.props,s))!==null&&r!==void 0?r:this.readValueFromInstance(this.current,s,this.options)}setBaseTarget(s,r){this.baseTarget[s]=r}getBaseTarget(s){var r;const{initial:a}=this.props,n=typeof a=="string"||typeof a=="object"?(r=Q1(this.props,a))===null||r===void 0?void 0:r[s]:void 0;if(a&&n!==void 0)return n;const i=this.getBaseTargetFromProps(this.props,s);return i!==void 0&&!qa(i)?i:this.initialValues[s]!==void 0&&n===void 0?void 0:this.baseTarget[s]}on(s,r){return this.events[s]||(this.events[s]=new i2),this.events[s].add(r)}notify(s,...r){this.events[s]&&this.events[s].notify(...r)}}class yR extends JG{sortInstanceNodePosition(s,r){return s.compareDocumentPosition(r)&2?1:-1}getBaseTargetFromProps(s,r){return s.style?s.style[r]:void 0}removeValueFromRenderState(s,{vars:r,style:a}){delete r[s],delete a[s]}makeTargetAnimatableFromInstance({transition:s,transitionEnd:r,...a},{transformValues:n},i){let l=pz(a,s||{},this);if(n&&(r&&(r=n(r)),a&&(a=n(a)),l&&(l=n(l))),i){mz(this,a,l);const o=GG(this,a,l,r);r=o.transitionEnd,a=o.target}return{transition:s,transitionEnd:r,...a}}}function ZG(t){return window.getComputedStyle(t)}class XG extends yR{constructor(){super(...arguments),this.type="html"}readValueFromInstance(s,r){if(id.has(r)){const a=t2(r);return a&&a.default||0}else{const a=ZG(s),n=(iP(r)?a.getPropertyValue(r):a[r])||0;return typeof n=="string"?n.trim():n}}measureInstanceViewportBox(s,{transformPagePoint:r}){return nR(s,r)}build(s,r,a,n){z1(s,r,a,n.transformTemplate)}scrapeMotionValuesFromProps(s,r){return Y1(s,r)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:s}=this.props;qa(s)&&(this.childSubscription=s.on("change",r=>{this.current&&(this.current.textContent=`${r}`)}))}renderInstance(s,r,a,n){mP(s,r,a,n)}}class eK extends yR{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1}getBaseTargetFromProps(s,r){return s[r]}readValueFromInstance(s,r){if(id.has(r)){const a=t2(r);return a&&a.default||0}return r=hP.has(r)?r:U1(r),s.getAttribute(r)}measureInstanceViewportBox(){return hr()}scrapeMotionValuesFromProps(s,r){return xP(s,r)}build(s,r,a,n){K1(s,r,a,this.isSVGTag,n.transformTemplate)}renderInstance(s,r,a,n){pP(s,r,a,n)}mount(s){this.isSVGTag=H1(s.tagName),super.mount(s)}}const tK=(t,s)=>W1(t)?new eK(s,{enableHardwareAcceleration:!1}):new XG(s,{enableHardwareAcceleration:!0}),sK={layout:{ProjectionNode:pR,MeasureLayout:lR}},rK={...Az,...Yq,...IG,...sK},Oe=rq((t,s)=>Lq(t,s,rK,tK)),bR=t=>({none:"",sm:"p-4",md:"p-6",lg:"p-8"})[t],W=h.forwardRef(({className:t,padding:s="md",children:r,...a},n)=>e.jsx("div",{ref:n,className:oe("bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700","dark:shadow-gray-900/20",bR(s),t),...a,children:r}));W.displayName="Card";const we=h.forwardRef(({className:t,padding:s="md",children:r,hoverEffect:a=!0,glowEffect:n=!1,delay:i=0},l)=>e.jsx(Oe.div,{ref:l,initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4,delay:i,ease:"easeOut"},whileHover:a?{scale:1.02,transition:{duration:.2}}:void 0,className:oe("bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700","dark:shadow-gray-900/20 transition-colors duration-300",n&&"dark:shadow-lg dark:shadow-primary-500/10 dark:hover:shadow-primary-500/20",bR(s),t),children:r}));we.displayName="MotionCard";const aK=t=>({green:"bg-gradient-to-br from-green-500 to-green-600 dark:from-green-600 dark:to-green-700",blue:"bg-gradient-to-br from-blue-500 to-blue-600 dark:from-blue-600 dark:to-blue-700",purple:"bg-gradient-to-br from-purple-500 to-purple-600 dark:from-purple-600 dark:to-purple-700",orange:"bg-gradient-to-br from-orange-500 to-orange-600 dark:from-orange-600 dark:to-orange-700",cyan:"bg-gradient-to-br from-cyan-500 to-cyan-600 dark:from-cyan-600 dark:to-cyan-700",pink:"bg-gradient-to-br from-pink-500 to-pink-600 dark:from-pink-600 dark:to-pink-700"})[t],Ax=h.forwardRef(({className:t,gradient:s,children:r,delay:a=0},n)=>e.jsx(Oe.div,{ref:n,initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4,delay:a,ease:"easeOut"},whileHover:{scale:1.02,boxShadow:"0 20px 40px rgba(0,0,0,0.2)",transition:{duration:.2}},className:oe("p-6 rounded-xl text-white shadow-lg transition-all duration-300",aK(s),t),children:r}));Ax.displayName="GradientCard";const Sr=h.forwardRef(({className:t,children:s,...r},a)=>e.jsx("div",{ref:a,className:oe("mb-4",t),...r,children:s}));Sr.displayName="CardHeader";const _r=h.forwardRef(({className:t,children:s,...r},a)=>e.jsx("h3",{ref:a,className:oe("text-lg font-semibold text-gray-900 dark:text-white",t),...r,children:s}));_r.displayName="CardTitle";const Nc=h.forwardRef(({className:t,children:s,...r},a)=>e.jsx("p",{ref:a,className:oe("text-sm text-gray-500 dark:text-gray-400 mt-1",t),...r,children:s}));Nc.displayName="CardDescription";function Wf({variant:t="icon",className:s}){const{theme:r,setTheme:a,isDark:n,toggleTheme:i}=lV();return t==="icon"?e.jsx("button",{onClick:i,className:oe("p-2 rounded-lg transition-colors","hover:bg-gray-100 dark:hover:bg-gray-800","text-gray-600 dark:text-gray-400",s),"aria-label":n?"Switch to light mode":"Switch to dark mode",children:n?e.jsx(qC,{className:"w-5 h-5"}):e.jsx(VC,{className:"w-5 h-5"})}):e.jsxs("div",{className:oe("flex items-center gap-1 p-1 bg-gray-100 dark:bg-gray-800 rounded-lg",s),children:[e.jsx("button",{onClick:()=>a("light"),className:oe("p-2 rounded-md transition-colors",r==="light"?"bg-white dark:bg-gray-700 shadow-sm text-primary-600":"text-gray-500 hover:text-gray-700 dark:hover:text-gray-300"),"aria-label":"Light mode",children:e.jsx(qC,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>a("dark"),className:oe("p-2 rounded-md transition-colors",r==="dark"?"bg-white dark:bg-gray-700 shadow-sm text-primary-600":"text-gray-500 hover:text-gray-700 dark:hover:text-gray-300"),"aria-label":"Dark mode",children:e.jsx(VC,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>a("system"),className:oe("p-2 rounded-md transition-colors",r==="system"?"bg-white dark:bg-gray-700 shadow-sm text-primary-600":"text-gray-500 hover:text-gray-700 dark:hover:text-gray-300"),"aria-label":"System theme",children:e.jsx(UT,{className:"w-4 h-4"})})]})}const Lp=43200,KS=1440,HS=Symbol.for("constructDateFrom");function l2(t,s){return typeof t=="function"?t(s):t&&typeof t=="object"&&HS in t?t[HS](s):t instanceof Date?new t.constructor(s):new Date(s)}function Ro(t,s){return l2(t,t)}let nK={};function iK(){return nK}function YS(t){const s=Ro(t),r=new Date(Date.UTC(s.getFullYear(),s.getMonth(),s.getDate(),s.getHours(),s.getMinutes(),s.getSeconds(),s.getMilliseconds()));return r.setUTCFullYear(s.getFullYear()),+t-+r}function o2(t,...s){const r=l2.bind(null,t||s.find(a=>typeof a=="object"));return s.map(r)}function Tx(t,s){const r=+Ro(t)-+Ro(s);return r<0?-1:r>0?1:r}function lK(t){return l2(t,Date.now())}function oK(t,s,r){const[a,n]=o2(r==null?void 0:r.in,t,s),i=a.getFullYear()-n.getFullYear(),l=a.getMonth()-n.getMonth();return i*12+l}function cK(t){return s=>{const a=(t?Math[t]:Math.trunc)(s);return a===0?0:a}}function dK(t,s){return+Ro(t)-+Ro(s)}function uK(t,s){const r=Ro(t);return r.setHours(23,59,59,999),r}function mK(t,s){const r=Ro(t),a=r.getMonth();return r.setFullYear(r.getFullYear(),a+1,0),r.setHours(23,59,59,999),r}function hK(t,s){const r=Ro(t);return+uK(r)==+mK(r)}function pK(t,s,r){const[a,n,i]=o2(r==null?void 0:r.in,t,t,s),l=Tx(n,i),o=Math.abs(oK(n,i));if(o<1)return 0;n.getMonth()===1&&n.getDate()>27&&n.setDate(30),n.setMonth(n.getMonth()-l*o);let c=Tx(n,i)===-l;hK(a)&&o===1&&Tx(a,i)===1&&(c=!1);const d=l*(o-+c);return d===0?0:d}function xK(t,s,r){const a=dK(t,s)/1e3;return cK(r==null?void 0:r.roundingMethod)(a)}const gK={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},fK=(t,s,r)=>{let a;const n=gK[t];return typeof n=="string"?a=n:s===1?a=n.one:a=n.other.replace("{{count}}",s.toString()),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?"in "+a:a+" ago":a};function ev(t){return(s={})=>{const r=s.width?String(s.width):t.defaultWidth;return t.formats[r]||t.formats[t.defaultWidth]}}const yK={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},bK={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},vK={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},jK={date:ev({formats:yK,defaultWidth:"full"}),time:ev({formats:bK,defaultWidth:"full"}),dateTime:ev({formats:vK,defaultWidth:"full"})},wK={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},NK=(t,s,r,a)=>wK[t];function Nm(t){return(s,r)=>{const a=r!=null&&r.context?String(r.context):"standalone";let n;if(a==="formatting"&&t.formattingValues){const l=t.defaultFormattingWidth||t.defaultWidth,o=r!=null&&r.width?String(r.width):l;n=t.formattingValues[o]||t.formattingValues[l]}else{const l=t.defaultWidth,o=r!=null&&r.width?String(r.width):t.defaultWidth;n=t.values[o]||t.values[l]}const i=t.argumentCallback?t.argumentCallback(s):s;return n[i]}}const kK={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},CK={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},SK={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},_K={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},EK={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},AK={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},TK=(t,s)=>{const r=Number(t),a=r%100;if(a>20||a<10)switch(a%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},PK={ordinalNumber:TK,era:Nm({values:kK,defaultWidth:"wide"}),quarter:Nm({values:CK,defaultWidth:"wide",argumentCallback:t=>t-1}),month:Nm({values:SK,defaultWidth:"wide"}),day:Nm({values:_K,defaultWidth:"wide"}),dayPeriod:Nm({values:EK,defaultWidth:"wide",formattingValues:AK,defaultFormattingWidth:"wide"})};function km(t){return(s,r={})=>{const a=r.width,n=a&&t.matchPatterns[a]||t.matchPatterns[t.defaultMatchWidth],i=s.match(n);if(!i)return null;const l=i[0],o=a&&t.parsePatterns[a]||t.parsePatterns[t.defaultParseWidth],c=Array.isArray(o)?DK(o,m=>m.test(l)):RK(o,m=>m.test(l));let d;d=t.valueCallback?t.valueCallback(c):c,d=r.valueCallback?r.valueCallback(d):d;const u=s.slice(l.length);return{value:d,rest:u}}}function RK(t,s){for(const r in t)if(Object.prototype.hasOwnProperty.call(t,r)&&s(t[r]))return r}function DK(t,s){for(let r=0;r<t.length;r++)if(s(t[r]))return r}function IK(t){return(s,r={})=>{const a=s.match(t.matchPattern);if(!a)return null;const n=a[0],i=s.match(t.parsePattern);if(!i)return null;let l=t.valueCallback?t.valueCallback(i[0]):i[0];l=r.valueCallback?r.valueCallback(l):l;const o=s.slice(n.length);return{value:l,rest:o}}}const MK=/^(\d+)(th|st|nd|rd)?/i,LK=/\d+/i,FK={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},OK={any:[/^b/i,/^(a|c)/i]},BK={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},$K={any:[/1/i,/2/i,/3/i,/4/i]},UK={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},VK={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},qK={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},WK={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},zK={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},GK={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},KK={ordinalNumber:IK({matchPattern:MK,parsePattern:LK,valueCallback:t=>parseInt(t,10)}),era:km({matchPatterns:FK,defaultMatchWidth:"wide",parsePatterns:OK,defaultParseWidth:"any"}),quarter:km({matchPatterns:BK,defaultMatchWidth:"wide",parsePatterns:$K,defaultParseWidth:"any",valueCallback:t=>t+1}),month:km({matchPatterns:UK,defaultMatchWidth:"wide",parsePatterns:VK,defaultParseWidth:"any"}),day:km({matchPatterns:qK,defaultMatchWidth:"wide",parsePatterns:WK,defaultParseWidth:"any"}),dayPeriod:km({matchPatterns:zK,defaultMatchWidth:"any",parsePatterns:GK,defaultParseWidth:"any"})},HK={code:"en-US",formatDistance:fK,formatLong:jK,formatRelative:NK,localize:PK,match:KK,options:{weekStartsOn:0,firstWeekContainsDate:1}};function YK(t,s,r){const a=iK(),n=(r==null?void 0:r.locale)??a.locale??HK,i=2520,l=Tx(t,s);if(isNaN(l))throw new RangeError("Invalid time value");const o=Object.assign({},r,{addSuffix:r==null?void 0:r.addSuffix,comparison:l}),[c,d]=o2(r==null?void 0:r.in,...l>0?[s,t]:[t,s]),u=xK(d,c),m=(YS(d)-YS(c))/1e3,p=Math.round((u-m)/60);let x;if(p<2)return r!=null&&r.includeSeconds?u<5?n.formatDistance("lessThanXSeconds",5,o):u<10?n.formatDistance("lessThanXSeconds",10,o):u<20?n.formatDistance("lessThanXSeconds",20,o):u<40?n.formatDistance("halfAMinute",0,o):u<60?n.formatDistance("lessThanXMinutes",1,o):n.formatDistance("xMinutes",1,o):p===0?n.formatDistance("lessThanXMinutes",1,o):n.formatDistance("xMinutes",p,o);if(p<45)return n.formatDistance("xMinutes",p,o);if(p<90)return n.formatDistance("aboutXHours",1,o);if(p<KS){const g=Math.round(p/60);return n.formatDistance("aboutXHours",g,o)}else{if(p<i)return n.formatDistance("xDays",1,o);if(p<Lp){const g=Math.round(p/KS);return n.formatDistance("xDays",g,o)}else if(p<Lp*2)return x=Math.round(p/Lp),n.formatDistance("aboutXMonths",x,o)}if(x=pK(d,c),x<12){const g=Math.round(p/Lp);return n.formatDistance("xMonths",g,o)}else{const g=x%12,f=Math.trunc(x/12);return g<3?n.formatDistance("aboutXYears",f,o):g<9?n.formatDistance("overXYears",f,o):n.formatDistance("almostXYears",f+1,o)}}function QK(t,s){return YK(t,lK(t),s)}const JK={transaction:Si,payment:Je,system:or,promo:EV,security:Xt},ZK={transaction:"bg-green-100 text-green-600",payment:"bg-blue-100 text-blue-600",system:"bg-gray-100 text-gray-600",promo:"bg-purple-100 text-purple-600",security:"bg-red-100 text-red-600"};function XK({notification:t,onMarkAsRead:s,onClear:r}){const a=JK[t.type],n=ZK[t.type];return e.jsx("div",{className:oe("p-3 border-b border-gray-100 hover:bg-gray-50 transition-colors cursor-pointer",!t.read&&"bg-blue-50/50"),onClick:()=>!t.read&&s(t.id),children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:oe("p-2 rounded-full flex-shrink-0",n),children:e.jsx(a,{className:"w-4 h-4"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-start justify-between gap-2",children:[e.jsx("p",{className:oe("text-sm",t.read?"text-gray-700":"text-gray-900 font-medium"),children:t.title}),e.jsx("button",{onClick:i=>{i.stopPropagation(),r(t.id)},className:"p-1 rounded hover:bg-gray-200 transition-colors flex-shrink-0",children:e.jsx(Or,{className:"w-3.5 h-3.5 text-gray-400"})})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-0.5 line-clamp-2",children:t.message}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:QK(new Date(t.createdAt),{addSuffix:!0})})]}),!t.read&&e.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-500 flex-shrink-0 mt-2"})]})})}function zf(){const[t,s]=h.useState(!1),r=h.useRef(null),{notifications:a,unreadCount:n,markAsRead:i,markAllAsRead:l,clearNotification:o,clearAllNotifications:c}=IT();return h.useEffect(()=>{function d(u){r.current&&!r.current.contains(u.target)&&s(!1)}return document.addEventListener("mousedown",d),()=>document.removeEventListener("mousedown",d)},[]),e.jsxs("div",{className:"relative",ref:r,children:[e.jsxs("button",{onClick:()=>s(!t),className:"relative p-2 rounded-lg hover:bg-gray-100 transition-colors","aria-label":"Notifications",children:[e.jsx(jl,{className:"w-5 h-5 text-gray-600"}),n>0&&e.jsx("span",{className:"absolute top-0.5 right-0.5 flex items-center justify-center min-w-[18px] h-[18px] px-1 text-xs font-medium text-white bg-red-500 rounded-full",children:n>99?"99+":n})]}),t&&e.jsxs("div",{className:"absolute right-0 mt-2 w-80 sm:w-96 bg-white rounded-xl shadow-xl border border-gray-200 overflow-hidden z-50",children:[e.jsxs("div",{className:"flex items-center justify-between px-4 py-3 bg-gray-50 border-b border-gray-200",children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:"Notifications"}),e.jsxs("div",{className:"flex items-center gap-2",children:[n>0&&e.jsxs("button",{onClick:l,className:"flex items-center gap-1 text-xs text-primary-600 hover:text-primary-700 font-medium",children:[e.jsx(hV,{className:"w-3.5 h-3.5"}),"Mark all read"]}),a.length>0&&e.jsxs("button",{onClick:c,className:"flex items-center gap-1 text-xs text-gray-500 hover:text-gray-700",children:[e.jsx(Or,{className:"w-3.5 h-3.5"}),"Clear"]})]})]}),e.jsx("div",{className:"max-h-[400px] overflow-y-auto",children:a.length===0?e.jsxs("div",{className:"py-12 text-center",children:[e.jsx(jl,{className:"w-10 h-10 text-gray-300 mx-auto mb-3"}),e.jsx("p",{className:"text-sm text-gray-500",children:"No notifications yet"}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"We'll notify you when something happens"})]}):a.map(d=>e.jsx(XK,{notification:d,onMarkAsRead:i,onClear:o},d.id))}),a.length>0&&e.jsx("div",{className:"px-4 py-2 bg-gray-50 border-t border-gray-200 text-center",children:e.jsx("button",{onClick:()=>s(!1),className:"text-xs text-primary-600 hover:text-primary-700 font-medium",children:"View all notifications"})})]})]})}function eH(){const t=[{icon:jt,title:"Digital Wallets",description:"Create and manage multiple digital wallets with real-time balance tracking and instant transfers."},{icon:Je,title:"Virtual & Physical Cards",description:"Issue virtual cards instantly or request physical cards. Full control over spending limits."},{icon:Xt,title:"Bank-Grade Security",description:"Enterprise-level encryption, fraud detection, and compliance with financial regulations."},{icon:ui,title:"Instant Transactions",description:"Process payments in milliseconds with our high-performance transaction engine."},{icon:li,title:"Multi-Currency Support",description:"Support for multiple currencies with competitive exchange rates."},{icon:Bc,title:"Real-Time Analytics",description:"Track spending patterns, generate reports, and gain insights into your finances."}],s=["No hidden fees","Instant card issuance","24/7 customer support","Mobile-first experience","API access for developers","Regulatory compliant"];return e.jsxs("div",{className:"min-h-screen bg-white",children:[e.jsx("nav",{className:"fixed top-0 left-0 right-0 z-50 bg-white/80 backdrop-blur-md border-b border-gray-100",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex items-center justify-between h-16",children:[e.jsx("div",{className:"flex items-center",children:e.jsx("span",{className:"text-2xl font-bold text-primary-600",children:"PaymentSystem"})}),e.jsxs("div",{className:"hidden md:flex items-center space-x-8",children:[e.jsx("a",{href:"#features",className:"text-gray-600 hover:text-gray-900",children:"Features"}),e.jsx("a",{href:"#pricing",className:"text-gray-600 hover:text-gray-900",children:"Pricing"}),e.jsx("a",{href:"/api/docs",target:"_blank",className:"text-gray-600 hover:text-gray-900",children:"API Docs"}),e.jsx(Qe,{to:"/login",className:"text-gray-600 hover:text-gray-900",children:"Sign In"}),e.jsx(Qe,{to:"/register",children:e.jsx(De,{children:"Get Started"})})]})]})})}),e.jsx("section",{className:"pt-32 pb-20 px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"text-center",children:[e.jsxs("h1",{className:"text-5xl md:text-6xl font-bold text-gray-900 mb-6",children:["Modern Payment",e.jsx("span",{className:"text-primary-600",children:" Infrastructure"})]}),e.jsx("p",{className:"text-xl text-gray-600 mb-8 max-w-3xl mx-auto",children:"Build and scale your payment solutions with our powerful closed-loop card system. Issue cards, manage wallets, and process transactions seamlessly."}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[e.jsx(Qe,{to:"/register",children:e.jsxs(De,{size:"lg",className:"w-full sm:w-auto",children:["Start Free Trial",e.jsx(Lr,{className:"ml-2 w-5 h-5"})]})}),e.jsx("a",{href:"/api/docs",target:"_blank",children:e.jsx(De,{variant:"outline",size:"lg",className:"w-full sm:w-auto",children:"View API Docs"})})]})]}),e.jsx("div",{className:"mt-16 relative",children:e.jsx("div",{className:"bg-gradient-to-r from-primary-600 to-primary-800 rounded-2xl shadow-2xl p-8 md:p-12",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"bg-white/10 backdrop-blur rounded-xl p-6 text-white",children:[e.jsx(jt,{className:"w-8 h-8 mb-4"}),e.jsx("p",{className:"text-3xl font-bold",children:"$2.5M+"}),e.jsx("p",{className:"text-white/80",children:"Processed Daily"})]}),e.jsxs("div",{className:"bg-white/10 backdrop-blur rounded-xl p-6 text-white",children:[e.jsx(ia,{className:"w-8 h-8 mb-4"}),e.jsx("p",{className:"text-3xl font-bold",children:"50K+"}),e.jsx("p",{className:"text-white/80",children:"Active Users"})]}),e.jsxs("div",{className:"bg-white/10 backdrop-blur rounded-xl p-6 text-white",children:[e.jsx(Je,{className:"w-8 h-8 mb-4"}),e.jsx("p",{className:"text-3xl font-bold",children:"100K+"}),e.jsx("p",{className:"text-white/80",children:"Cards Issued"})]})]})})})]})}),e.jsx("section",{id:"features",className:"py-20 px-4 sm:px-6 lg:px-8 bg-gray-50",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"text-center mb-16",children:[e.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-gray-900 mb-4",children:"Everything You Need"}),e.jsx("p",{className:"text-xl text-gray-600 max-w-2xl mx-auto",children:"A complete payment infrastructure with all the features you need to manage digital payments."})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:t.map((r,a)=>{const n=r.icon;return e.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-gray-100 hover:shadow-md transition-shadow",children:[e.jsx("div",{className:"w-12 h-12 bg-primary-100 rounded-lg flex items-center justify-center mb-4",children:e.jsx(n,{className:"w-6 h-6 text-primary-600"})}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:r.title}),e.jsx("p",{className:"text-gray-600",children:r.description})]},a)})})]})}),e.jsx("section",{className:"py-20 px-4 sm:px-6 lg:px-8",children:e.jsx("div",{className:"max-w-7xl mx-auto",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-12 items-center",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-gray-900 mb-6",children:"Why Choose PaymentSystem?"}),e.jsx("p",{className:"text-xl text-gray-600 mb-8",children:"We provide a robust, secure, and scalable payment infrastructure that grows with your business."}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:s.map((r,a)=>e.jsxs("div",{className:"flex items-center",children:[e.jsx(be,{className:"w-5 h-5 text-green-500 mr-3 flex-shrink-0"}),e.jsx("span",{className:"text-gray-700",children:r})]},a))})]}),e.jsx("div",{className:"bg-gray-100 rounded-2xl p-8",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm text-gray-500",children:"Transaction Speed"}),e.jsx("span",{className:"text-sm font-medium text-primary-600",children:"99.9%"})]}),e.jsx("div",{className:"h-2 bg-gray-200 rounded-full",children:e.jsx("div",{className:"h-2 bg-primary-600 rounded-full",style:{width:"99.9%"}})})]}),e.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm text-gray-500",children:"Uptime SLA"}),e.jsx("span",{className:"text-sm font-medium text-green-600",children:"99.99%"})]}),e.jsx("div",{className:"h-2 bg-gray-200 rounded-full",children:e.jsx("div",{className:"h-2 bg-green-600 rounded-full",style:{width:"99.99%"}})})]}),e.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm text-gray-500",children:"Customer Satisfaction"}),e.jsx("span",{className:"text-sm font-medium text-blue-600",children:"98%"})]}),e.jsx("div",{className:"h-2 bg-gray-200 rounded-full",children:e.jsx("div",{className:"h-2 bg-blue-600 rounded-full",style:{width:"98%"}})})]})]})})]})})}),e.jsx("section",{className:"py-20 px-4 sm:px-6 lg:px-8 bg-gray-900 text-white",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("h2",{className:"text-3xl md:text-4xl font-bold mb-4",children:"Developer-First API"}),e.jsx("p",{className:"text-xl text-gray-400 max-w-2xl mx-auto",children:"Integrate our payment system into your application with our RESTful API."})]}),e.jsx("div",{className:"bg-gray-800 rounded-xl p-6 overflow-x-auto",children:e.jsx("pre",{className:"text-sm text-gray-300",children:`// Create a new card
const response = await fetch('/api/v1/cards', {
  method: 'POST',
  headers: {
    'Authorization': 'Bearer ' + accessToken,
    'Content-Type': 'application/json'
  },
  body: JSON.stringify({
    walletId: 'wallet_123',
    type: 'VIRTUAL',
    cardholderName: 'John Doe',
    dailyLimit: 1000
  })
});

const card = await response.json();
// { id: 'card_456', maskedNumber: '****1234', status: 'ACTIVE' }`})}),e.jsx("div",{className:"text-center mt-8",children:e.jsx("a",{href:"/api/docs",target:"_blank",children:e.jsxs(De,{variant:"outline",className:"border-white text-white hover:bg-white hover:text-gray-900",children:["Explore Full API Documentation",e.jsx(Lr,{className:"ml-2 w-4 h-4"})]})})})]})}),e.jsx("section",{id:"pricing",className:"py-20 px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"max-w-4xl mx-auto text-center",children:[e.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-gray-900 mb-4",children:"Ready to Get Started?"}),e.jsx("p",{className:"text-xl text-gray-600 mb-8",children:"Create your account today and start processing payments in minutes."}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[e.jsx(Qe,{to:"/register",children:e.jsxs(De,{size:"lg",children:["Create Free Account",e.jsx(Lr,{className:"ml-2 w-5 h-5"})]})}),e.jsx(Qe,{to:"/login",children:e.jsx(De,{variant:"outline",size:"lg",children:"Sign In"})})]})]})}),e.jsx("footer",{className:"bg-gray-50 border-t border-gray-200 py-12 px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-8",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-gray-900 mb-4",children:"Product"}),e.jsxs("ul",{className:"space-y-2 text-gray-600",children:[e.jsx("li",{children:e.jsx("a",{href:"#features",className:"hover:text-gray-900",children:"Features"})}),e.jsx("li",{children:e.jsx("a",{href:"#pricing",className:"hover:text-gray-900",children:"Pricing"})}),e.jsx("li",{children:e.jsx("a",{href:"/api/docs",className:"hover:text-gray-900",children:"API Docs"})})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-gray-900 mb-4",children:"Company"}),e.jsxs("ul",{className:"space-y-2 text-gray-600",children:[e.jsx("li",{children:e.jsx("a",{href:"#",className:"hover:text-gray-900",children:"About"})}),e.jsx("li",{children:e.jsx("a",{href:"#",className:"hover:text-gray-900",children:"Blog"})}),e.jsx("li",{children:e.jsx("a",{href:"#",className:"hover:text-gray-900",children:"Careers"})})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-gray-900 mb-4",children:"Legal"}),e.jsxs("ul",{className:"space-y-2 text-gray-600",children:[e.jsx("li",{children:e.jsx("a",{href:"#",className:"hover:text-gray-900",children:"Privacy"})}),e.jsx("li",{children:e.jsx("a",{href:"#",className:"hover:text-gray-900",children:"Terms"})}),e.jsx("li",{children:e.jsx("a",{href:"#",className:"hover:text-gray-900",children:"Security"})})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-gray-900 mb-4",children:"Support"}),e.jsxs("ul",{className:"space-y-2 text-gray-600",children:[e.jsx("li",{children:e.jsx("a",{href:"#",className:"hover:text-gray-900",children:"Help Center"})}),e.jsx("li",{children:e.jsx("a",{href:"#",className:"hover:text-gray-900",children:"Contact"})}),e.jsx("li",{children:e.jsx("a",{href:"#",className:"hover:text-gray-900",children:"Status"})})]})]})]}),e.jsx("div",{className:"mt-12 pt-8 border-t border-gray-200 text-center text-gray-500",children:e.jsx("p",{children:" 2024 PaymentSystem. All rights reserved."})})]})})]})}var I0=t=>t.type==="checkbox",kc=t=>t instanceof Date,Da=t=>t==null;const vR=t=>typeof t=="object";var yr=t=>!Da(t)&&!Array.isArray(t)&&vR(t)&&!kc(t),tH=t=>yr(t)&&t.target?I0(t.target)?t.target.checked:t.target.value:t,sH=t=>t.substring(0,t.search(/\.\d+(\.|$)/))||t,rH=(t,s)=>t.has(sH(s)),aH=t=>{const s=t.constructor&&t.constructor.prototype;return yr(s)&&s.hasOwnProperty("isPrototypeOf")},c2=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function Tr(t){let s;const r=Array.isArray(t),a=typeof FileList<"u"?t instanceof FileList:!1;if(t instanceof Date)s=new Date(t);else if(!(c2&&(t instanceof Blob||a))&&(r||yr(t)))if(s=r?[]:Object.create(Object.getPrototypeOf(t)),!r&&!aH(t))s=t;else for(const n in t)t.hasOwnProperty(n)&&(s[n]=Tr(t[n]));else return t;return s}var Gf=t=>/^\w*$/.test(t),sr=t=>t===void 0,d2=t=>Array.isArray(t)?t.filter(Boolean):[],u2=t=>d2(t.replace(/["|']|\]/g,"").split(/\.|\[/)),Ye=(t,s,r)=>{if(!s||!yr(t))return r;const a=(Gf(s)?[s]:u2(s)).reduce((n,i)=>Da(n)?n:n[i],t);return sr(a)||a===t?sr(t[s])?r:t[s]:a},bi=t=>typeof t=="boolean",bs=(t,s,r)=>{let a=-1;const n=Gf(s)?[s]:u2(s),i=n.length,l=i-1;for(;++a<i;){const o=n[a];let c=r;if(a!==l){const d=t[o];c=yr(d)||Array.isArray(d)?d:isNaN(+n[a+1])?{}:[]}if(o==="__proto__"||o==="constructor"||o==="prototype")return;t[o]=c,t=t[o]}};const QS={BLUR:"blur",FOCUS_OUT:"focusout"},si={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},Hi={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},nH=ds.createContext(null);nH.displayName="HookFormContext";var iH=(t,s,r,a=!0)=>{const n={defaultValues:s._defaultValues};for(const i in t)Object.defineProperty(n,i,{get:()=>{const l=i;return s._proxyFormState[l]!==si.all&&(s._proxyFormState[l]=!a||si.all),t[l]}});return n};const lH=typeof window<"u"?ds.useLayoutEffect:ds.useEffect;var Xa=t=>typeof t=="string",oH=(t,s,r,a,n)=>Xa(t)?(a&&s.watch.add(t),Ye(r,t,n)):Array.isArray(t)?t.map(i=>(a&&s.watch.add(i),Ye(r,i))):(a&&(s.watchAll=!0),r),fw=t=>Da(t)||!vR(t);function Jl(t,s,r=new WeakSet){if(fw(t)||fw(s))return Object.is(t,s);if(kc(t)&&kc(s))return t.getTime()===s.getTime();const a=Object.keys(t),n=Object.keys(s);if(a.length!==n.length)return!1;if(r.has(t)||r.has(s))return!0;r.add(t),r.add(s);for(const i of a){const l=t[i];if(!n.includes(i))return!1;if(i!=="ref"){const o=s[i];if(kc(l)&&kc(o)||yr(l)&&yr(o)||Array.isArray(l)&&Array.isArray(o)?!Jl(l,o,r):!Object.is(l,o))return!1}}return!0}var jR=(t,s,r,a,n)=>s?{...r[t],types:{...r[t]&&r[t].types?r[t].types:{},[a]:n||!0}}:{},fh=t=>Array.isArray(t)?t:[t],JS=()=>{let t=[];return{get observers(){return t},next:n=>{for(const i of t)i.next&&i.next(n)},subscribe:n=>(t.push(n),{unsubscribe:()=>{t=t.filter(i=>i!==n)}}),unsubscribe:()=>{t=[]}}};function wR(t,s){const r={};for(const a in t)if(t.hasOwnProperty(a)){const n=t[a],i=s[a];if(n&&yr(n)&&i){const l=wR(n,i);yr(l)&&(r[a]=l)}else t[a]&&(r[a]=i)}return r}var ga=t=>yr(t)&&!Object.keys(t).length,m2=t=>t.type==="file",ri=t=>typeof t=="function",Fg=t=>{if(!c2)return!1;const s=t?t.ownerDocument:0;return t instanceof(s&&s.defaultView?s.defaultView.HTMLElement:HTMLElement)},NR=t=>t.type==="select-multiple",h2=t=>t.type==="radio",cH=t=>h2(t)||I0(t),tv=t=>Fg(t)&&t.isConnected;function dH(t,s){const r=s.slice(0,-1).length;let a=0;for(;a<r;)t=sr(t)?a++:t[s[a++]];return t}function uH(t){for(const s in t)if(t.hasOwnProperty(s)&&!sr(t[s]))return!1;return!0}function mr(t,s){const r=Array.isArray(s)?s:Gf(s)?[s]:u2(s),a=r.length===1?t:dH(t,r),n=r.length-1,i=r[n];return a&&delete a[i],n!==0&&(yr(a)&&ga(a)||Array.isArray(a)&&uH(a))&&mr(t,r.slice(0,-1)),t}var mH=t=>{for(const s in t)if(ri(t[s]))return!0;return!1};function kR(t){return Array.isArray(t)||yr(t)&&!mH(t)}function yw(t,s={}){for(const r in t){const a=t[r];kR(a)?(s[r]=Array.isArray(a)?[]:{},yw(a,s[r])):sr(a)||(s[r]=!0)}return s}function Rd(t,s,r){r||(r=yw(s));for(const a in t){const n=t[a];if(kR(n))sr(s)||fw(r[a])?r[a]=yw(n,Array.isArray(n)?[]:{}):Rd(n,Da(s)?{}:s[a],r[a]);else{const i=s[a];r[a]=!Jl(n,i)}}return r}const ZS={value:!1,isValid:!1},XS={value:!0,isValid:!0};var CR=t=>{if(Array.isArray(t)){if(t.length>1){const s=t.filter(r=>r&&r.checked&&!r.disabled).map(r=>r.value);return{value:s,isValid:!!s.length}}return t[0].checked&&!t[0].disabled?t[0].attributes&&!sr(t[0].attributes.value)?sr(t[0].value)||t[0].value===""?XS:{value:t[0].value,isValid:!0}:XS:ZS}return ZS},SR=(t,{valueAsNumber:s,valueAsDate:r,setValueAs:a})=>sr(t)?t:s?t===""?NaN:t&&+t:r&&Xa(t)?new Date(t):a?a(t):t;const e5={isValid:!1,value:null};var _R=t=>Array.isArray(t)?t.reduce((s,r)=>r&&r.checked&&!r.disabled?{isValid:!0,value:r.value}:s,e5):e5;function t5(t){const s=t.ref;return m2(s)?s.files:h2(s)?_R(t.refs).value:NR(s)?[...s.selectedOptions].map(({value:r})=>r):I0(s)?CR(t.refs).value:SR(sr(s.value)?t.ref.value:s.value,t)}var hH=(t,s,r,a)=>{const n={};for(const i of t){const l=Ye(s,i);l&&bs(n,i,l._f)}return{criteriaMode:r,names:[...t],fields:n,shouldUseNativeValidation:a}},Og=t=>t instanceof RegExp,Cm=t=>sr(t)?t:Og(t)?t.source:yr(t)?Og(t.value)?t.value.source:t.value:t,s5=t=>({isOnSubmit:!t||t===si.onSubmit,isOnBlur:t===si.onBlur,isOnChange:t===si.onChange,isOnAll:t===si.all,isOnTouch:t===si.onTouched});const r5="AsyncFunction";var pH=t=>!!t&&!!t.validate&&!!(ri(t.validate)&&t.validate.constructor.name===r5||yr(t.validate)&&Object.values(t.validate).find(s=>s.constructor.name===r5)),xH=t=>t.mount&&(t.required||t.min||t.max||t.maxLength||t.minLength||t.pattern||t.validate),a5=(t,s,r)=>!r&&(s.watchAll||s.watch.has(t)||[...s.watch].some(a=>t.startsWith(a)&&/^\.\w+/.test(t.slice(a.length))));const yh=(t,s,r,a)=>{for(const n of r||Object.keys(t)){const i=Ye(t,n);if(i){const{_f:l,...o}=i;if(l){if(l.refs&&l.refs[0]&&s(l.refs[0],n)&&!a)return!0;if(l.ref&&s(l.ref,l.name)&&!a)return!0;if(yh(o,s))break}else if(yr(o)&&yh(o,s))break}}};function n5(t,s,r){const a=Ye(t,r);if(a||Gf(r))return{error:a,name:r};const n=r.split(".");for(;n.length;){const i=n.join("."),l=Ye(s,i),o=Ye(t,i);if(l&&!Array.isArray(l)&&r!==i)return{name:r};if(o&&o.type)return{name:i,error:o};if(o&&o.root&&o.root.type)return{name:`${i}.root`,error:o.root};n.pop()}return{name:r}}var gH=(t,s,r,a)=>{r(t);const{name:n,...i}=t;return ga(i)||Object.keys(i).length>=Object.keys(s).length||Object.keys(i).find(l=>s[l]===(!a||si.all))},fH=(t,s,r)=>!t||!s||t===s||fh(t).some(a=>a&&(r?a===s:a.startsWith(s)||s.startsWith(a))),yH=(t,s,r,a,n)=>n.isOnAll?!1:!r&&n.isOnTouch?!(s||t):(r?a.isOnBlur:n.isOnBlur)?!t:(r?a.isOnChange:n.isOnChange)?t:!0,bH=(t,s)=>!d2(Ye(t,s)).length&&mr(t,s),vH=(t,s,r)=>{const a=fh(Ye(t,r));return bs(a,"root",s[r]),bs(t,r,a),t};function i5(t,s,r="validate"){if(Xa(t)||Array.isArray(t)&&t.every(Xa)||bi(t)&&!t)return{type:r,message:Xa(t)?t:"",ref:s}}var bd=t=>yr(t)&&!Og(t)?t:{value:t,message:""},l5=async(t,s,r,a,n,i)=>{const{ref:l,refs:o,required:c,maxLength:d,minLength:u,min:m,max:p,pattern:x,validate:g,name:f,valueAsNumber:b,mount:j}=t._f,v=Ye(r,f);if(!j||s.has(f))return{};const w=o?o[0]:l,y=N=>{n&&w.reportValidity&&(w.setCustomValidity(bi(N)?"":N||""),w.reportValidity())},C={},S=h2(l),_=I0(l),E=S||_,A=(b||m2(l))&&sr(l.value)&&sr(v)||Fg(l)&&l.value===""||v===""||Array.isArray(v)&&!v.length,R=jR.bind(null,f,a,C),I=(N,P,k,D=Hi.maxLength,$=Hi.minLength)=>{const L=N?P:k;C[f]={type:N?D:$,message:L,ref:l,...R(N?D:$,L)}};if(i?!Array.isArray(v)||!v.length:c&&(!E&&(A||Da(v))||bi(v)&&!v||_&&!CR(o).isValid||S&&!_R(o).isValid)){const{value:N,message:P}=Xa(c)?{value:!!c,message:c}:bd(c);if(N&&(C[f]={type:Hi.required,message:P,ref:w,...R(Hi.required,P)},!a))return y(P),C}if(!A&&(!Da(m)||!Da(p))){let N,P;const k=bd(p),D=bd(m);if(!Da(v)&&!isNaN(v)){const $=l.valueAsNumber||v&&+v;Da(k.value)||(N=$>k.value),Da(D.value)||(P=$<D.value)}else{const $=l.valueAsDate||new Date(v),L=O=>new Date(new Date().toDateString()+" "+O),B=l.type=="time",T=l.type=="week";Xa(k.value)&&v&&(N=B?L(v)>L(k.value):T?v>k.value:$>new Date(k.value)),Xa(D.value)&&v&&(P=B?L(v)<L(D.value):T?v<D.value:$<new Date(D.value))}if((N||P)&&(I(!!N,k.message,D.message,Hi.max,Hi.min),!a))return y(C[f].message),C}if((d||u)&&!A&&(Xa(v)||i&&Array.isArray(v))){const N=bd(d),P=bd(u),k=!Da(N.value)&&v.length>+N.value,D=!Da(P.value)&&v.length<+P.value;if((k||D)&&(I(k,N.message,P.message),!a))return y(C[f].message),C}if(x&&!A&&Xa(v)){const{value:N,message:P}=bd(x);if(Og(N)&&!v.match(N)&&(C[f]={type:Hi.pattern,message:P,ref:l,...R(Hi.pattern,P)},!a))return y(P),C}if(g){if(ri(g)){const N=await g(v,r),P=i5(N,w);if(P&&(C[f]={...P,...R(Hi.validate,P.message)},!a))return y(P.message),C}else if(yr(g)){let N={};for(const P in g){if(!ga(N)&&!a)break;const k=i5(await g[P](v,r),w,P);k&&(N={...k,...R(P,k.message)},y(k.message),a&&(C[f]=N))}if(!ga(N)&&(C[f]={ref:w,...N},!a))return C}}return y(!0),C};const jH={mode:si.onSubmit,reValidateMode:si.onChange,shouldFocusError:!0};function wH(t={}){let s={...jH,...t},r={submitCount:0,isDirty:!1,isReady:!1,isLoading:ri(s.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:s.errors||{},disabled:s.disabled||!1},a={},n=yr(s.defaultValues)||yr(s.values)?Tr(s.defaultValues||s.values)||{}:{},i=s.shouldUnregister?{}:Tr(n),l={action:!1,mount:!1,watch:!1},o={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},c,d=0;const u={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let m={...u};const p={array:JS(),state:JS()},x=s.criteriaMode===si.all,g=J=>Q=>{clearTimeout(d),d=setTimeout(J,Q)},f=async J=>{if(!s.disabled&&(u.isValid||m.isValid||J)){const Q=s.resolver?ga((await _()).errors):await A(a,!0);Q!==r.isValid&&p.state.next({isValid:Q})}},b=(J,Q)=>{!s.disabled&&(u.isValidating||u.validatingFields||m.isValidating||m.validatingFields)&&((J||Array.from(o.mount)).forEach(ee=>{ee&&(Q?bs(r.validatingFields,ee,Q):mr(r.validatingFields,ee))}),p.state.next({validatingFields:r.validatingFields,isValidating:!ga(r.validatingFields)}))},j=(J,Q=[],ee,Ne,ye=!0,he=!0)=>{if(Ne&&ee&&!s.disabled){if(l.action=!0,he&&Array.isArray(Ye(a,J))){const Ce=ee(Ye(a,J),Ne.argA,Ne.argB);ye&&bs(a,J,Ce)}if(he&&Array.isArray(Ye(r.errors,J))){const Ce=ee(Ye(r.errors,J),Ne.argA,Ne.argB);ye&&bs(r.errors,J,Ce),bH(r.errors,J)}if((u.touchedFields||m.touchedFields)&&he&&Array.isArray(Ye(r.touchedFields,J))){const Ce=ee(Ye(r.touchedFields,J),Ne.argA,Ne.argB);ye&&bs(r.touchedFields,J,Ce)}(u.dirtyFields||m.dirtyFields)&&(r.dirtyFields=Rd(n,i)),p.state.next({name:J,isDirty:I(J,Q),dirtyFields:r.dirtyFields,errors:r.errors,isValid:r.isValid})}else bs(i,J,Q)},v=(J,Q)=>{bs(r.errors,J,Q),p.state.next({errors:r.errors})},w=J=>{r.errors=J,p.state.next({errors:r.errors,isValid:!1})},y=(J,Q,ee,Ne)=>{const ye=Ye(a,J);if(ye){const he=Ye(i,J,sr(ee)?Ye(n,J):ee);sr(he)||Ne&&Ne.defaultChecked||Q?bs(i,J,Q?he:t5(ye._f)):k(J,he),l.mount&&!l.action&&f()}},C=(J,Q,ee,Ne,ye)=>{let he=!1,Ce=!1;const Se={name:J};if(!s.disabled){if(!ee||Ne){(u.isDirty||m.isDirty)&&(Ce=r.isDirty,r.isDirty=Se.isDirty=I(),he=Ce!==Se.isDirty);const Be=Jl(Ye(n,J),Q);Ce=!!Ye(r.dirtyFields,J),Be?mr(r.dirtyFields,J):bs(r.dirtyFields,J,!0),Se.dirtyFields=r.dirtyFields,he=he||(u.dirtyFields||m.dirtyFields)&&Ce!==!Be}if(ee){const Be=Ye(r.touchedFields,J);Be||(bs(r.touchedFields,J,ee),Se.touchedFields=r.touchedFields,he=he||(u.touchedFields||m.touchedFields)&&Be!==ee)}he&&ye&&p.state.next(Se)}return he?Se:{}},S=(J,Q,ee,Ne)=>{const ye=Ye(r.errors,J),he=(u.isValid||m.isValid)&&bi(Q)&&r.isValid!==Q;if(s.delayError&&ee?(c=g(()=>v(J,ee)),c(s.delayError)):(clearTimeout(d),c=null,ee?bs(r.errors,J,ee):mr(r.errors,J)),(ee?!Jl(ye,ee):ye)||!ga(Ne)||he){const Ce={...Ne,...he&&bi(Q)?{isValid:Q}:{},errors:r.errors,name:J};r={...r,...Ce},p.state.next(Ce)}},_=async J=>{b(J,!0);const Q=await s.resolver(i,s.context,hH(J||o.mount,a,s.criteriaMode,s.shouldUseNativeValidation));return b(J),Q},E=async J=>{const{errors:Q}=await _(J);if(J)for(const ee of J){const Ne=Ye(Q,ee);Ne?bs(r.errors,ee,Ne):mr(r.errors,ee)}else r.errors=Q;return Q},A=async(J,Q,ee={valid:!0})=>{for(const Ne in J){const ye=J[Ne];if(ye){const{_f:he,...Ce}=ye;if(he){const Se=o.array.has(he.name),Be=ye._f&&pH(ye._f);Be&&u.validatingFields&&b([he.name],!0);const Dt=await l5(ye,o.disabled,i,x,s.shouldUseNativeValidation&&!Q,Se);if(Be&&u.validatingFields&&b([he.name]),Dt[he.name]&&(ee.valid=!1,Q))break;!Q&&(Ye(Dt,he.name)?Se?vH(r.errors,Dt,he.name):bs(r.errors,he.name,Dt[he.name]):mr(r.errors,he.name))}!ga(Ce)&&await A(Ce,Q,ee)}}return ee.valid},R=()=>{for(const J of o.unMount){const Q=Ye(a,J);Q&&(Q._f.refs?Q._f.refs.every(ee=>!tv(ee)):!tv(Q._f.ref))&&fe(J)}o.unMount=new Set},I=(J,Q)=>!s.disabled&&(J&&Q&&bs(i,J,Q),!Jl(O(),n)),N=(J,Q,ee)=>oH(J,o,{...l.mount?i:sr(Q)?n:Xa(J)?{[J]:Q}:Q},ee,Q),P=J=>d2(Ye(l.mount?i:n,J,s.shouldUnregister?Ye(n,J,[]):[])),k=(J,Q,ee={})=>{const Ne=Ye(a,J);let ye=Q;if(Ne){const he=Ne._f;he&&(!he.disabled&&bs(i,J,SR(Q,he)),ye=Fg(he.ref)&&Da(Q)?"":Q,NR(he.ref)?[...he.ref.options].forEach(Ce=>Ce.selected=ye.includes(Ce.value)):he.refs?I0(he.ref)?he.refs.forEach(Ce=>{(!Ce.defaultChecked||!Ce.disabled)&&(Array.isArray(ye)?Ce.checked=!!ye.find(Se=>Se===Ce.value):Ce.checked=ye===Ce.value||!!ye)}):he.refs.forEach(Ce=>Ce.checked=Ce.value===ye):m2(he.ref)?he.ref.value="":(he.ref.value=ye,he.ref.type||p.state.next({name:J,values:Tr(i)})))}(ee.shouldDirty||ee.shouldTouch)&&C(J,ye,ee.shouldTouch,ee.shouldDirty,!0),ee.shouldValidate&&T(J)},D=(J,Q,ee)=>{for(const Ne in Q){if(!Q.hasOwnProperty(Ne))return;const ye=Q[Ne],he=J+"."+Ne,Ce=Ye(a,he);(o.array.has(J)||yr(ye)||Ce&&!Ce._f)&&!kc(ye)?D(he,ye,ee):k(he,ye,ee)}},$=(J,Q,ee={})=>{const Ne=Ye(a,J),ye=o.array.has(J),he=Tr(Q);bs(i,J,he),ye?(p.array.next({name:J,values:Tr(i)}),(u.isDirty||u.dirtyFields||m.isDirty||m.dirtyFields)&&ee.shouldDirty&&p.state.next({name:J,dirtyFields:Rd(n,i),isDirty:I(J,he)})):Ne&&!Ne._f&&!Da(he)?D(J,he,ee):k(J,he,ee),a5(J,o)&&p.state.next({...r,name:J}),p.state.next({name:l.mount?J:void 0,values:Tr(i)})},L=async J=>{l.mount=!0;const Q=J.target;let ee=Q.name,Ne=!0;const ye=Ye(a,ee),he=Be=>{Ne=Number.isNaN(Be)||kc(Be)&&isNaN(Be.getTime())||Jl(Be,Ye(i,ee,Be))},Ce=s5(s.mode),Se=s5(s.reValidateMode);if(ye){let Be,Dt;const Ht=Q.type?t5(ye._f):tH(J),Xe=J.type===QS.BLUR||J.type===QS.FOCUS_OUT,Yt=!xH(ye._f)&&!s.resolver&&!Ye(r.errors,ee)&&!ye._f.deps||yH(Xe,Ye(r.touchedFields,ee),r.isSubmitted,Se,Ce),Mt=a5(ee,o,Xe);bs(i,ee,Ht),Xe?(!Q||!Q.readOnly)&&(ye._f.onBlur&&ye._f.onBlur(J),c&&c(0)):ye._f.onChange&&ye._f.onChange(J);const Qt=C(ee,Ht,Xe),Wt=!ga(Qt)||Mt;if(!Xe&&p.state.next({name:ee,type:J.type,values:Tr(i)}),Yt)return(u.isValid||m.isValid)&&(s.mode==="onBlur"?Xe&&f():Xe||f()),Wt&&p.state.next({name:ee,...Mt?{}:Qt});if(!Xe&&Mt&&p.state.next({...r}),s.resolver){const{errors:Ks}=await _([ee]);if(he(Ht),Ne){const As=n5(r.errors,a,ee),fs=n5(Ks,a,As.name||ee);Be=fs.error,ee=fs.name,Dt=ga(Ks)}}else b([ee],!0),Be=(await l5(ye,o.disabled,i,x,s.shouldUseNativeValidation))[ee],b([ee]),he(Ht),Ne&&(Be?Dt=!1:(u.isValid||m.isValid)&&(Dt=await A(a,!0)));Ne&&(ye._f.deps&&(!Array.isArray(ye._f.deps)||ye._f.deps.length>0)&&T(ye._f.deps),S(ee,Dt,Be,Qt))}},B=(J,Q)=>{if(Ye(r.errors,Q)&&J.focus)return J.focus(),1},T=async(J,Q={})=>{let ee,Ne;const ye=fh(J);if(s.resolver){const he=await E(sr(J)?J:ye);ee=ga(he),Ne=J?!ye.some(Ce=>Ye(he,Ce)):ee}else J?(Ne=(await Promise.all(ye.map(async he=>{const Ce=Ye(a,he);return await A(Ce&&Ce._f?{[he]:Ce}:Ce)}))).every(Boolean),!(!Ne&&!r.isValid)&&f()):Ne=ee=await A(a);return p.state.next({...!Xa(J)||(u.isValid||m.isValid)&&ee!==r.isValid?{}:{name:J},...s.resolver||!J?{isValid:ee}:{},errors:r.errors}),Q.shouldFocus&&!Ne&&yh(a,B,J?ye:o.mount),Ne},O=(J,Q)=>{let ee={...l.mount?i:n};return Q&&(ee=wR(Q.dirtyFields?r.dirtyFields:r.touchedFields,ee)),sr(J)?ee:Xa(J)?Ye(ee,J):J.map(Ne=>Ye(ee,Ne))},q=(J,Q)=>({invalid:!!Ye((Q||r).errors,J),isDirty:!!Ye((Q||r).dirtyFields,J),error:Ye((Q||r).errors,J),isValidating:!!Ye(r.validatingFields,J),isTouched:!!Ye((Q||r).touchedFields,J)}),K=J=>{J&&fh(J).forEach(Q=>mr(r.errors,Q)),p.state.next({errors:J?r.errors:{}})},le=(J,Q,ee)=>{const Ne=(Ye(a,J,{_f:{}})._f||{}).ref,ye=Ye(r.errors,J)||{},{ref:he,message:Ce,type:Se,...Be}=ye;bs(r.errors,J,{...Be,...Q,ref:Ne}),p.state.next({name:J,errors:r.errors,isValid:!1}),ee&&ee.shouldFocus&&Ne&&Ne.focus&&Ne.focus()},X=(J,Q)=>ri(J)?p.state.subscribe({next:ee=>"values"in ee&&J(N(void 0,Q),ee)}):N(J,Q,!0),se=J=>p.state.subscribe({next:Q=>{fH(J.name,Q.name,J.exact)&&gH(Q,J.formState||u,Ae,J.reRenderRoot)&&J.callback({values:{...i},...r,...Q,defaultValues:n})}}).unsubscribe,de=J=>(l.mount=!0,m={...m,...J.formState},se({...J,formState:m})),fe=(J,Q={})=>{for(const ee of J?fh(J):o.mount)o.mount.delete(ee),o.array.delete(ee),Q.keepValue||(mr(a,ee),mr(i,ee)),!Q.keepError&&mr(r.errors,ee),!Q.keepDirty&&mr(r.dirtyFields,ee),!Q.keepTouched&&mr(r.touchedFields,ee),!Q.keepIsValidating&&mr(r.validatingFields,ee),!s.shouldUnregister&&!Q.keepDefaultValue&&mr(n,ee);p.state.next({values:Tr(i)}),p.state.next({...r,...Q.keepDirty?{isDirty:I()}:{}}),!Q.keepIsValid&&f()},z=({disabled:J,name:Q})=>{(bi(J)&&l.mount||J||o.disabled.has(Q))&&(J?o.disabled.add(Q):o.disabled.delete(Q))},re=(J,Q={})=>{let ee=Ye(a,J);const Ne=bi(Q.disabled)||bi(s.disabled);return bs(a,J,{...ee||{},_f:{...ee&&ee._f?ee._f:{ref:{name:J}},name:J,mount:!0,...Q}}),o.mount.add(J),ee?z({disabled:bi(Q.disabled)?Q.disabled:s.disabled,name:J}):y(J,!0,Q.value),{...Ne?{disabled:Q.disabled||s.disabled}:{},...s.progressive?{required:!!Q.required,min:Cm(Q.min),max:Cm(Q.max),minLength:Cm(Q.minLength),maxLength:Cm(Q.maxLength),pattern:Cm(Q.pattern)}:{},name:J,onChange:L,onBlur:L,ref:ye=>{if(ye){re(J,Q),ee=Ye(a,J);const he=sr(ye.value)&&ye.querySelectorAll&&ye.querySelectorAll("input,select,textarea")[0]||ye,Ce=cH(he),Se=ee._f.refs||[];if(Ce?Se.find(Be=>Be===he):he===ee._f.ref)return;bs(a,J,{_f:{...ee._f,...Ce?{refs:[...Se.filter(tv),he,...Array.isArray(Ye(n,J))?[{}]:[]],ref:{type:he.type,name:J}}:{ref:he}}}),y(J,!1,void 0,he)}else ee=Ye(a,J,{}),ee._f&&(ee._f.mount=!1),(s.shouldUnregister||Q.shouldUnregister)&&!(rH(o.array,J)&&l.action)&&o.unMount.add(J)}}},ie=()=>s.shouldFocusError&&yh(a,B,o.mount),Y=J=>{bi(J)&&(p.state.next({disabled:J}),yh(a,(Q,ee)=>{const Ne=Ye(a,ee);Ne&&(Q.disabled=Ne._f.disabled||J,Array.isArray(Ne._f.refs)&&Ne._f.refs.forEach(ye=>{ye.disabled=Ne._f.disabled||J}))},0,!1))},G=(J,Q)=>async ee=>{let Ne;ee&&(ee.preventDefault&&ee.preventDefault(),ee.persist&&ee.persist());let ye=Tr(i);if(p.state.next({isSubmitting:!0}),s.resolver){const{errors:he,values:Ce}=await _();r.errors=he,ye=Tr(Ce)}else await A(a);if(o.disabled.size)for(const he of o.disabled)mr(ye,he);if(mr(r.errors,"root"),ga(r.errors)){p.state.next({errors:{}});try{await J(ye,ee)}catch(he){Ne=he}}else Q&&await Q({...r.errors},ee),ie(),setTimeout(ie);if(p.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:ga(r.errors)&&!Ne,submitCount:r.submitCount+1,errors:r.errors}),Ne)throw Ne},H=(J,Q={})=>{Ye(a,J)&&(sr(Q.defaultValue)?$(J,Tr(Ye(n,J))):($(J,Q.defaultValue),bs(n,J,Tr(Q.defaultValue))),Q.keepTouched||mr(r.touchedFields,J),Q.keepDirty||(mr(r.dirtyFields,J),r.isDirty=Q.defaultValue?I(J,Tr(Ye(n,J))):I()),Q.keepError||(mr(r.errors,J),u.isValid&&f()),p.state.next({...r}))},ue=(J,Q={})=>{const ee=J?Tr(J):n,Ne=Tr(ee),ye=ga(J),he=ye?n:Ne;if(Q.keepDefaultValues||(n=ee),!Q.keepValues){if(Q.keepDirtyValues){const Ce=new Set([...o.mount,...Object.keys(Rd(n,i))]);for(const Se of Array.from(Ce))Ye(r.dirtyFields,Se)?bs(he,Se,Ye(i,Se)):$(Se,Ye(he,Se))}else{if(c2&&sr(J))for(const Ce of o.mount){const Se=Ye(a,Ce);if(Se&&Se._f){const Be=Array.isArray(Se._f.refs)?Se._f.refs[0]:Se._f.ref;if(Fg(Be)){const Dt=Be.closest("form");if(Dt){Dt.reset();break}}}}if(Q.keepFieldsRef)for(const Ce of o.mount)$(Ce,Ye(he,Ce));else a={}}i=s.shouldUnregister?Q.keepDefaultValues?Tr(n):{}:Tr(he),p.array.next({values:{...he}}),p.state.next({values:{...he}})}o={mount:Q.keepDirtyValues?o.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},l.mount=!u.isValid||!!Q.keepIsValid||!!Q.keepDirtyValues||!s.shouldUnregister&&!ga(he),l.watch=!!s.shouldUnregister,p.state.next({submitCount:Q.keepSubmitCount?r.submitCount:0,isDirty:ye?!1:Q.keepDirty?r.isDirty:!!(Q.keepDefaultValues&&!Jl(J,n)),isSubmitted:Q.keepIsSubmitted?r.isSubmitted:!1,dirtyFields:ye?{}:Q.keepDirtyValues?Q.keepDefaultValues&&i?Rd(n,i):r.dirtyFields:Q.keepDefaultValues&&J?Rd(n,J):Q.keepDirty?r.dirtyFields:{},touchedFields:Q.keepTouched?r.touchedFields:{},errors:Q.keepErrors?r.errors:{},isSubmitSuccessful:Q.keepIsSubmitSuccessful?r.isSubmitSuccessful:!1,isSubmitting:!1,defaultValues:n})},me=(J,Q)=>ue(ri(J)?J(i):J,Q),ne=(J,Q={})=>{const ee=Ye(a,J),Ne=ee&&ee._f;if(Ne){const ye=Ne.refs?Ne.refs[0]:Ne.ref;ye.focus&&(ye.focus(),Q.shouldSelect&&ri(ye.select)&&ye.select())}},Ae=J=>{r={...r,...J}},at={control:{register:re,unregister:fe,getFieldState:q,handleSubmit:G,setError:le,_subscribe:se,_runSchema:_,_focusError:ie,_getWatch:N,_getDirty:I,_setValid:f,_setFieldArray:j,_setDisabledField:z,_setErrors:w,_getFieldArray:P,_reset:ue,_resetDefaultValues:()=>ri(s.defaultValues)&&s.defaultValues().then(J=>{me(J,s.resetOptions),p.state.next({isLoading:!1})}),_removeUnmounted:R,_disableForm:Y,_subjects:p,_proxyFormState:u,get _fields(){return a},get _formValues(){return i},get _state(){return l},set _state(J){l=J},get _defaultValues(){return n},get _names(){return o},set _names(J){o=J},get _formState(){return r},get _options(){return s},set _options(J){s={...s,...J}}},subscribe:de,trigger:T,register:re,handleSubmit:G,watch:X,setValue:$,getValues:O,reset:me,resetField:H,clearErrors:K,unregister:fe,setError:le,setFocus:ne,getFieldState:q};return{...at,formControl:at}}function ER(t={}){const s=ds.useRef(void 0),r=ds.useRef(void 0),[a,n]=ds.useState({isDirty:!1,isValidating:!1,isLoading:ri(t.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1,isReady:!1,defaultValues:ri(t.defaultValues)?void 0:t.defaultValues});if(!s.current)if(t.formControl)s.current={...t.formControl,formState:a},t.defaultValues&&!ri(t.defaultValues)&&t.formControl.reset(t.defaultValues,t.resetOptions);else{const{formControl:l,...o}=wH(t);s.current={...o,formState:a}}const i=s.current.control;return i._options=t,lH(()=>{const l=i._subscribe({formState:i._proxyFormState,callback:()=>n({...i._formState}),reRenderRoot:!0});return n(o=>({...o,isReady:!0})),i._formState.isReady=!0,l},[i]),ds.useEffect(()=>i._disableForm(t.disabled),[i,t.disabled]),ds.useEffect(()=>{t.mode&&(i._options.mode=t.mode),t.reValidateMode&&(i._options.reValidateMode=t.reValidateMode)},[i,t.mode,t.reValidateMode]),ds.useEffect(()=>{t.errors&&(i._setErrors(t.errors),i._focusError())},[i,t.errors]),ds.useEffect(()=>{t.shouldUnregister&&i._subjects.state.next({values:i._getWatch()})},[i,t.shouldUnregister]),ds.useEffect(()=>{if(i._proxyFormState.isDirty){const l=i._getDirty();l!==a.isDirty&&i._subjects.state.next({isDirty:l})}},[i,a.isDirty]),ds.useEffect(()=>{var l;t.values&&!Jl(t.values,r.current)?(i._reset(t.values,{keepFieldsRef:!0,...i._options.resetOptions}),!((l=i._options.resetOptions)===null||l===void 0)&&l.keepIsValid||i._setValid(),r.current=t.values,n(o=>({...o}))):i._resetDefaultValues()},[i,t.values]),ds.useEffect(()=>{i._state.mount||(i._setValid(),i._state.mount=!0),i._state.watch&&(i._state.watch=!1,i._subjects.state.next({...i._formState})),i._removeUnmounted()}),s.current.formState=iH(a,i),s.current}const o5=(t,s,r)=>{if(t&&"reportValidity"in t){const a=Ye(r,s);t.setCustomValidity(a&&a.message||""),t.reportValidity()}},AR=(t,s)=>{for(const r in s.fields){const a=s.fields[r];a&&a.ref&&"reportValidity"in a.ref?o5(a.ref,r,t):a.refs&&a.refs.forEach(n=>o5(n,r,t))}},NH=(t,s)=>{s.shouldUseNativeValidation&&AR(t,s);const r={};for(const a in t){const n=Ye(s.fields,a),i=Object.assign(t[a]||{},{ref:n&&n.ref});if(kH(s.names||Object.keys(t),a)){const l=Object.assign({},Ye(r,a));bs(l,"root",i),bs(r,a,l)}else bs(r,a,i)}return r},kH=(t,s)=>t.some(r=>r.startsWith(s+"."));var CH=function(t,s){for(var r={};t.length;){var a=t[0],n=a.code,i=a.message,l=a.path.join(".");if(!r[l])if("unionErrors"in a){var o=a.unionErrors[0].errors[0];r[l]={message:o.message,type:o.code}}else r[l]={message:i,type:n};if("unionErrors"in a&&a.unionErrors.forEach(function(u){return u.errors.forEach(function(m){return t.push(m)})}),s){var c=r[l].types,d=c&&c[a.code];r[l]=jR(l,s,r,n,d?[].concat(d,a.message):a.message)}t.shift()}return r},TR=function(t,s,r){return r===void 0&&(r={}),function(a,n,i){try{return Promise.resolve(function(l,o){try{var c=Promise.resolve(t[r.mode==="sync"?"parse":"parseAsync"](a,s)).then(function(d){return i.shouldUseNativeValidation&&AR({},i),{errors:{},values:r.raw?a:d}})}catch(d){return o(d)}return c&&c.then?c.then(void 0,o):c}(0,function(l){if(function(o){return Array.isArray(o==null?void 0:o.errors)}(l))return{values:{},errors:NH(CH(l.errors,!i.shouldUseNativeValidation&&i.criteriaMode==="all"),i)};throw l}))}catch(l){return Promise.reject(l)}}},rs;(function(t){t.assertEqual=n=>{};function s(n){}t.assertIs=s;function r(n){throw new Error}t.assertNever=r,t.arrayToEnum=n=>{const i={};for(const l of n)i[l]=l;return i},t.getValidEnumValues=n=>{const i=t.objectKeys(n).filter(o=>typeof n[n[o]]!="number"),l={};for(const o of i)l[o]=n[o];return t.objectValues(l)},t.objectValues=n=>t.objectKeys(n).map(function(i){return n[i]}),t.objectKeys=typeof Object.keys=="function"?n=>Object.keys(n):n=>{const i=[];for(const l in n)Object.prototype.hasOwnProperty.call(n,l)&&i.push(l);return i},t.find=(n,i)=>{for(const l of n)if(i(l))return l},t.isInteger=typeof Number.isInteger=="function"?n=>Number.isInteger(n):n=>typeof n=="number"&&Number.isFinite(n)&&Math.floor(n)===n;function a(n,i=" | "){return n.map(l=>typeof l=="string"?`'${l}'`:l).join(i)}t.joinValues=a,t.jsonStringifyReplacer=(n,i)=>typeof i=="bigint"?i.toString():i})(rs||(rs={}));var c5;(function(t){t.mergeShapes=(s,r)=>({...s,...r})})(c5||(c5={}));const Ze=rs.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Gl=t=>{switch(typeof t){case"undefined":return Ze.undefined;case"string":return Ze.string;case"number":return Number.isNaN(t)?Ze.nan:Ze.number;case"boolean":return Ze.boolean;case"function":return Ze.function;case"bigint":return Ze.bigint;case"symbol":return Ze.symbol;case"object":return Array.isArray(t)?Ze.array:t===null?Ze.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?Ze.promise:typeof Map<"u"&&t instanceof Map?Ze.map:typeof Set<"u"&&t instanceof Set?Ze.set:typeof Date<"u"&&t instanceof Date?Ze.date:Ze.object;default:return Ze.unknown}},Me=rs.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class Cl extends Error{get errors(){return this.issues}constructor(s){super(),this.issues=[],this.addIssue=a=>{this.issues=[...this.issues,a]},this.addIssues=(a=[])=>{this.issues=[...this.issues,...a]};const r=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,r):this.__proto__=r,this.name="ZodError",this.issues=s}format(s){const r=s||function(i){return i.message},a={_errors:[]},n=i=>{for(const l of i.issues)if(l.code==="invalid_union")l.unionErrors.map(n);else if(l.code==="invalid_return_type")n(l.returnTypeError);else if(l.code==="invalid_arguments")n(l.argumentsError);else if(l.path.length===0)a._errors.push(r(l));else{let o=a,c=0;for(;c<l.path.length;){const d=l.path[c];c===l.path.length-1?(o[d]=o[d]||{_errors:[]},o[d]._errors.push(r(l))):o[d]=o[d]||{_errors:[]},o=o[d],c++}}};return n(this),a}static assert(s){if(!(s instanceof Cl))throw new Error(`Not a ZodError: ${s}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,rs.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(s=r=>r.message){const r={},a=[];for(const n of this.issues)if(n.path.length>0){const i=n.path[0];r[i]=r[i]||[],r[i].push(s(n))}else a.push(s(n));return{formErrors:a,fieldErrors:r}}get formErrors(){return this.flatten()}}Cl.create=t=>new Cl(t);const bw=(t,s)=>{let r;switch(t.code){case Me.invalid_type:t.received===Ze.undefined?r="Required":r=`Expected ${t.expected}, received ${t.received}`;break;case Me.invalid_literal:r=`Invalid literal value, expected ${JSON.stringify(t.expected,rs.jsonStringifyReplacer)}`;break;case Me.unrecognized_keys:r=`Unrecognized key(s) in object: ${rs.joinValues(t.keys,", ")}`;break;case Me.invalid_union:r="Invalid input";break;case Me.invalid_union_discriminator:r=`Invalid discriminator value. Expected ${rs.joinValues(t.options)}`;break;case Me.invalid_enum_value:r=`Invalid enum value. Expected ${rs.joinValues(t.options)}, received '${t.received}'`;break;case Me.invalid_arguments:r="Invalid function arguments";break;case Me.invalid_return_type:r="Invalid function return type";break;case Me.invalid_date:r="Invalid date";break;case Me.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(r=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(r=`${r} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?r=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?r=`Invalid input: must end with "${t.validation.endsWith}"`:rs.assertNever(t.validation):t.validation!=="regex"?r=`Invalid ${t.validation}`:r="Invalid";break;case Me.too_small:t.type==="array"?r=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?r=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?r=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="bigint"?r=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?r=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:r="Invalid input";break;case Me.too_big:t.type==="array"?r=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?r=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?r=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?r=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?r=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:r="Invalid input";break;case Me.custom:r="Invalid input";break;case Me.invalid_intersection_types:r="Intersection results could not be merged";break;case Me.not_multiple_of:r=`Number must be a multiple of ${t.multipleOf}`;break;case Me.not_finite:r="Number must be finite";break;default:r=s.defaultError,rs.assertNever(t)}return{message:r}};let SH=bw;function _H(){return SH}const EH=t=>{const{data:s,path:r,errorMaps:a,issueData:n}=t,i=[...r,...n.path||[]],l={...n,path:i};if(n.message!==void 0)return{...n,path:i,message:n.message};let o="";const c=a.filter(d=>!!d).slice().reverse();for(const d of c)o=d(l,{data:s,defaultError:o}).message;return{...n,path:i,message:o}};function qe(t,s){const r=_H(),a=EH({issueData:s,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,r,r===bw?void 0:bw].filter(n=>!!n)});t.common.issues.push(a)}class ln{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(s,r){const a=[];for(const n of r){if(n.status==="aborted")return St;n.status==="dirty"&&s.dirty(),a.push(n.value)}return{status:s.value,value:a}}static async mergeObjectAsync(s,r){const a=[];for(const n of r){const i=await n.key,l=await n.value;a.push({key:i,value:l})}return ln.mergeObjectSync(s,a)}static mergeObjectSync(s,r){const a={};for(const n of r){const{key:i,value:l}=n;if(i.status==="aborted"||l.status==="aborted")return St;i.status==="dirty"&&s.dirty(),l.status==="dirty"&&s.dirty(),i.value!=="__proto__"&&(typeof l.value<"u"||n.alwaysSet)&&(a[i.value]=l.value)}return{status:s.value,value:a}}}const St=Object.freeze({status:"aborted"}),Hm=t=>({status:"dirty",value:t}),$n=t=>({status:"valid",value:t}),d5=t=>t.status==="aborted",u5=t=>t.status==="dirty",Lu=t=>t.status==="valid",Bg=t=>typeof Promise<"u"&&t instanceof Promise;var et;(function(t){t.errToObj=s=>typeof s=="string"?{message:s}:s||{},t.toString=s=>typeof s=="string"?s:s==null?void 0:s.message})(et||(et={}));class Do{constructor(s,r,a,n){this._cachedPath=[],this.parent=s,this.data=r,this._path=a,this._key=n}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const m5=(t,s)=>{if(Lu(s))return{success:!0,data:s.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const r=new Cl(t.common.issues);return this._error=r,this._error}}};function Ot(t){if(!t)return{};const{errorMap:s,invalid_type_error:r,required_error:a,description:n}=t;if(s&&(r||a))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return s?{errorMap:s,description:n}:{errorMap:(l,o)=>{const{message:c}=t;return l.code==="invalid_enum_value"?{message:c??o.defaultError}:typeof o.data>"u"?{message:c??a??o.defaultError}:l.code!=="invalid_type"?{message:o.defaultError}:{message:c??r??o.defaultError}},description:n}}class ss{get description(){return this._def.description}_getType(s){return Gl(s.data)}_getOrReturnCtx(s,r){return r||{common:s.parent.common,data:s.data,parsedType:Gl(s.data),schemaErrorMap:this._def.errorMap,path:s.path,parent:s.parent}}_processInputParams(s){return{status:new ln,ctx:{common:s.parent.common,data:s.data,parsedType:Gl(s.data),schemaErrorMap:this._def.errorMap,path:s.path,parent:s.parent}}}_parseSync(s){const r=this._parse(s);if(Bg(r))throw new Error("Synchronous parse encountered promise.");return r}_parseAsync(s){const r=this._parse(s);return Promise.resolve(r)}parse(s,r){const a=this.safeParse(s,r);if(a.success)return a.data;throw a.error}safeParse(s,r){const a={common:{issues:[],async:(r==null?void 0:r.async)??!1,contextualErrorMap:r==null?void 0:r.errorMap},path:(r==null?void 0:r.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:s,parsedType:Gl(s)},n=this._parseSync({data:s,path:a.path,parent:a});return m5(a,n)}"~validate"(s){var a,n;const r={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:s,parsedType:Gl(s)};if(!this["~standard"].async)try{const i=this._parseSync({data:s,path:[],parent:r});return Lu(i)?{value:i.value}:{issues:r.common.issues}}catch(i){(n=(a=i==null?void 0:i.message)==null?void 0:a.toLowerCase())!=null&&n.includes("encountered")&&(this["~standard"].async=!0),r.common={issues:[],async:!0}}return this._parseAsync({data:s,path:[],parent:r}).then(i=>Lu(i)?{value:i.value}:{issues:r.common.issues})}async parseAsync(s,r){const a=await this.safeParseAsync(s,r);if(a.success)return a.data;throw a.error}async safeParseAsync(s,r){const a={common:{issues:[],contextualErrorMap:r==null?void 0:r.errorMap,async:!0},path:(r==null?void 0:r.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:s,parsedType:Gl(s)},n=this._parse({data:s,path:a.path,parent:a}),i=await(Bg(n)?n:Promise.resolve(n));return m5(a,i)}refine(s,r){const a=n=>typeof r=="string"||typeof r>"u"?{message:r}:typeof r=="function"?r(n):r;return this._refinement((n,i)=>{const l=s(n),o=()=>i.addIssue({code:Me.custom,...a(n)});return typeof Promise<"u"&&l instanceof Promise?l.then(c=>c?!0:(o(),!1)):l?!0:(o(),!1)})}refinement(s,r){return this._refinement((a,n)=>s(a)?!0:(n.addIssue(typeof r=="function"?r(a,n):r),!1))}_refinement(s){return new Ou({schema:this,typeName:_t.ZodEffects,effect:{type:"refinement",refinement:s}})}superRefine(s){return this._refinement(s)}constructor(s){this.spa=this.safeParseAsync,this._def=s,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:r=>this["~validate"](r)}}optional(){return Co.create(this,this._def)}nullable(){return Bu.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Fi.create(this)}promise(){return qg.create(this,this._def)}or(s){return Ug.create([this,s],this._def)}and(s){return Vg.create(this,s,this._def)}transform(s){return new Ou({...Ot(this._def),schema:this,typeName:_t.ZodEffects,effect:{type:"transform",transform:s}})}default(s){const r=typeof s=="function"?s:()=>s;return new jw({...Ot(this._def),innerType:this,defaultValue:r,typeName:_t.ZodDefault})}brand(){return new JH({typeName:_t.ZodBranded,type:this,...Ot(this._def)})}catch(s){const r=typeof s=="function"?s:()=>s;return new ww({...Ot(this._def),innerType:this,catchValue:r,typeName:_t.ZodCatch})}describe(s){const r=this.constructor;return new r({...this._def,description:s})}pipe(s){return p2.create(this,s)}readonly(){return Nw.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const AH=/^c[^\s-]{8,}$/i,TH=/^[0-9a-z]+$/,PH=/^[0-9A-HJKMNP-TV-Z]{26}$/i,RH=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,DH=/^[a-z0-9_-]{21}$/i,IH=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,MH=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,LH=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,FH="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let sv;const OH=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,BH=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,$H=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,UH=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,VH=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,qH=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,PR="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",WH=new RegExp(`^${PR}$`);function RR(t){let s="[0-5]\\d";t.precision?s=`${s}\\.\\d{${t.precision}}`:t.precision==null&&(s=`${s}(\\.\\d+)?`);const r=t.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${s})${r}`}function zH(t){return new RegExp(`^${RR(t)}$`)}function GH(t){let s=`${PR}T${RR(t)}`;const r=[];return r.push(t.local?"Z?":"Z"),t.offset&&r.push("([+-]\\d{2}:?\\d{2})"),s=`${s}(${r.join("|")})`,new RegExp(`^${s}$`)}function KH(t,s){return!!((s==="v4"||!s)&&OH.test(t)||(s==="v6"||!s)&&$H.test(t))}function HH(t,s){if(!IH.test(t))return!1;try{const[r]=t.split(".");if(!r)return!1;const a=r.replace(/-/g,"+").replace(/_/g,"/").padEnd(r.length+(4-r.length%4)%4,"="),n=JSON.parse(atob(a));return!(typeof n!="object"||n===null||"typ"in n&&(n==null?void 0:n.typ)!=="JWT"||!n.alg||s&&n.alg!==s)}catch{return!1}}function YH(t,s){return!!((s==="v4"||!s)&&BH.test(t)||(s==="v6"||!s)&&UH.test(t))}class uo extends ss{_parse(s){if(this._def.coerce&&(s.data=String(s.data)),this._getType(s)!==Ze.string){const i=this._getOrReturnCtx(s);return qe(i,{code:Me.invalid_type,expected:Ze.string,received:i.parsedType}),St}const a=new ln;let n;for(const i of this._def.checks)if(i.kind==="min")s.data.length<i.value&&(n=this._getOrReturnCtx(s,n),qe(n,{code:Me.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),a.dirty());else if(i.kind==="max")s.data.length>i.value&&(n=this._getOrReturnCtx(s,n),qe(n,{code:Me.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),a.dirty());else if(i.kind==="length"){const l=s.data.length>i.value,o=s.data.length<i.value;(l||o)&&(n=this._getOrReturnCtx(s,n),l?qe(n,{code:Me.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}):o&&qe(n,{code:Me.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}),a.dirty())}else if(i.kind==="email")LH.test(s.data)||(n=this._getOrReturnCtx(s,n),qe(n,{validation:"email",code:Me.invalid_string,message:i.message}),a.dirty());else if(i.kind==="emoji")sv||(sv=new RegExp(FH,"u")),sv.test(s.data)||(n=this._getOrReturnCtx(s,n),qe(n,{validation:"emoji",code:Me.invalid_string,message:i.message}),a.dirty());else if(i.kind==="uuid")RH.test(s.data)||(n=this._getOrReturnCtx(s,n),qe(n,{validation:"uuid",code:Me.invalid_string,message:i.message}),a.dirty());else if(i.kind==="nanoid")DH.test(s.data)||(n=this._getOrReturnCtx(s,n),qe(n,{validation:"nanoid",code:Me.invalid_string,message:i.message}),a.dirty());else if(i.kind==="cuid")AH.test(s.data)||(n=this._getOrReturnCtx(s,n),qe(n,{validation:"cuid",code:Me.invalid_string,message:i.message}),a.dirty());else if(i.kind==="cuid2")TH.test(s.data)||(n=this._getOrReturnCtx(s,n),qe(n,{validation:"cuid2",code:Me.invalid_string,message:i.message}),a.dirty());else if(i.kind==="ulid")PH.test(s.data)||(n=this._getOrReturnCtx(s,n),qe(n,{validation:"ulid",code:Me.invalid_string,message:i.message}),a.dirty());else if(i.kind==="url")try{new URL(s.data)}catch{n=this._getOrReturnCtx(s,n),qe(n,{validation:"url",code:Me.invalid_string,message:i.message}),a.dirty()}else i.kind==="regex"?(i.regex.lastIndex=0,i.regex.test(s.data)||(n=this._getOrReturnCtx(s,n),qe(n,{validation:"regex",code:Me.invalid_string,message:i.message}),a.dirty())):i.kind==="trim"?s.data=s.data.trim():i.kind==="includes"?s.data.includes(i.value,i.position)||(n=this._getOrReturnCtx(s,n),qe(n,{code:Me.invalid_string,validation:{includes:i.value,position:i.position},message:i.message}),a.dirty()):i.kind==="toLowerCase"?s.data=s.data.toLowerCase():i.kind==="toUpperCase"?s.data=s.data.toUpperCase():i.kind==="startsWith"?s.data.startsWith(i.value)||(n=this._getOrReturnCtx(s,n),qe(n,{code:Me.invalid_string,validation:{startsWith:i.value},message:i.message}),a.dirty()):i.kind==="endsWith"?s.data.endsWith(i.value)||(n=this._getOrReturnCtx(s,n),qe(n,{code:Me.invalid_string,validation:{endsWith:i.value},message:i.message}),a.dirty()):i.kind==="datetime"?GH(i).test(s.data)||(n=this._getOrReturnCtx(s,n),qe(n,{code:Me.invalid_string,validation:"datetime",message:i.message}),a.dirty()):i.kind==="date"?WH.test(s.data)||(n=this._getOrReturnCtx(s,n),qe(n,{code:Me.invalid_string,validation:"date",message:i.message}),a.dirty()):i.kind==="time"?zH(i).test(s.data)||(n=this._getOrReturnCtx(s,n),qe(n,{code:Me.invalid_string,validation:"time",message:i.message}),a.dirty()):i.kind==="duration"?MH.test(s.data)||(n=this._getOrReturnCtx(s,n),qe(n,{validation:"duration",code:Me.invalid_string,message:i.message}),a.dirty()):i.kind==="ip"?KH(s.data,i.version)||(n=this._getOrReturnCtx(s,n),qe(n,{validation:"ip",code:Me.invalid_string,message:i.message}),a.dirty()):i.kind==="jwt"?HH(s.data,i.alg)||(n=this._getOrReturnCtx(s,n),qe(n,{validation:"jwt",code:Me.invalid_string,message:i.message}),a.dirty()):i.kind==="cidr"?YH(s.data,i.version)||(n=this._getOrReturnCtx(s,n),qe(n,{validation:"cidr",code:Me.invalid_string,message:i.message}),a.dirty()):i.kind==="base64"?VH.test(s.data)||(n=this._getOrReturnCtx(s,n),qe(n,{validation:"base64",code:Me.invalid_string,message:i.message}),a.dirty()):i.kind==="base64url"?qH.test(s.data)||(n=this._getOrReturnCtx(s,n),qe(n,{validation:"base64url",code:Me.invalid_string,message:i.message}),a.dirty()):rs.assertNever(i);return{status:a.value,value:s.data}}_regex(s,r,a){return this.refinement(n=>s.test(n),{validation:r,code:Me.invalid_string,...et.errToObj(a)})}_addCheck(s){return new uo({...this._def,checks:[...this._def.checks,s]})}email(s){return this._addCheck({kind:"email",...et.errToObj(s)})}url(s){return this._addCheck({kind:"url",...et.errToObj(s)})}emoji(s){return this._addCheck({kind:"emoji",...et.errToObj(s)})}uuid(s){return this._addCheck({kind:"uuid",...et.errToObj(s)})}nanoid(s){return this._addCheck({kind:"nanoid",...et.errToObj(s)})}cuid(s){return this._addCheck({kind:"cuid",...et.errToObj(s)})}cuid2(s){return this._addCheck({kind:"cuid2",...et.errToObj(s)})}ulid(s){return this._addCheck({kind:"ulid",...et.errToObj(s)})}base64(s){return this._addCheck({kind:"base64",...et.errToObj(s)})}base64url(s){return this._addCheck({kind:"base64url",...et.errToObj(s)})}jwt(s){return this._addCheck({kind:"jwt",...et.errToObj(s)})}ip(s){return this._addCheck({kind:"ip",...et.errToObj(s)})}cidr(s){return this._addCheck({kind:"cidr",...et.errToObj(s)})}datetime(s){return typeof s=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:s}):this._addCheck({kind:"datetime",precision:typeof(s==null?void 0:s.precision)>"u"?null:s==null?void 0:s.precision,offset:(s==null?void 0:s.offset)??!1,local:(s==null?void 0:s.local)??!1,...et.errToObj(s==null?void 0:s.message)})}date(s){return this._addCheck({kind:"date",message:s})}time(s){return typeof s=="string"?this._addCheck({kind:"time",precision:null,message:s}):this._addCheck({kind:"time",precision:typeof(s==null?void 0:s.precision)>"u"?null:s==null?void 0:s.precision,...et.errToObj(s==null?void 0:s.message)})}duration(s){return this._addCheck({kind:"duration",...et.errToObj(s)})}regex(s,r){return this._addCheck({kind:"regex",regex:s,...et.errToObj(r)})}includes(s,r){return this._addCheck({kind:"includes",value:s,position:r==null?void 0:r.position,...et.errToObj(r==null?void 0:r.message)})}startsWith(s,r){return this._addCheck({kind:"startsWith",value:s,...et.errToObj(r)})}endsWith(s,r){return this._addCheck({kind:"endsWith",value:s,...et.errToObj(r)})}min(s,r){return this._addCheck({kind:"min",value:s,...et.errToObj(r)})}max(s,r){return this._addCheck({kind:"max",value:s,...et.errToObj(r)})}length(s,r){return this._addCheck({kind:"length",value:s,...et.errToObj(r)})}nonempty(s){return this.min(1,et.errToObj(s))}trim(){return new uo({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new uo({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new uo({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(s=>s.kind==="datetime")}get isDate(){return!!this._def.checks.find(s=>s.kind==="date")}get isTime(){return!!this._def.checks.find(s=>s.kind==="time")}get isDuration(){return!!this._def.checks.find(s=>s.kind==="duration")}get isEmail(){return!!this._def.checks.find(s=>s.kind==="email")}get isURL(){return!!this._def.checks.find(s=>s.kind==="url")}get isEmoji(){return!!this._def.checks.find(s=>s.kind==="emoji")}get isUUID(){return!!this._def.checks.find(s=>s.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(s=>s.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(s=>s.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(s=>s.kind==="cuid2")}get isULID(){return!!this._def.checks.find(s=>s.kind==="ulid")}get isIP(){return!!this._def.checks.find(s=>s.kind==="ip")}get isCIDR(){return!!this._def.checks.find(s=>s.kind==="cidr")}get isBase64(){return!!this._def.checks.find(s=>s.kind==="base64")}get isBase64url(){return!!this._def.checks.find(s=>s.kind==="base64url")}get minLength(){let s=null;for(const r of this._def.checks)r.kind==="min"&&(s===null||r.value>s)&&(s=r.value);return s}get maxLength(){let s=null;for(const r of this._def.checks)r.kind==="max"&&(s===null||r.value<s)&&(s=r.value);return s}}uo.create=t=>new uo({checks:[],typeName:_t.ZodString,coerce:(t==null?void 0:t.coerce)??!1,...Ot(t)});function QH(t,s){const r=(t.toString().split(".")[1]||"").length,a=(s.toString().split(".")[1]||"").length,n=r>a?r:a,i=Number.parseInt(t.toFixed(n).replace(".","")),l=Number.parseInt(s.toFixed(n).replace(".",""));return i%l/10**n}class e0 extends ss{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(s){if(this._def.coerce&&(s.data=Number(s.data)),this._getType(s)!==Ze.number){const i=this._getOrReturnCtx(s);return qe(i,{code:Me.invalid_type,expected:Ze.number,received:i.parsedType}),St}let a;const n=new ln;for(const i of this._def.checks)i.kind==="int"?rs.isInteger(s.data)||(a=this._getOrReturnCtx(s,a),qe(a,{code:Me.invalid_type,expected:"integer",received:"float",message:i.message}),n.dirty()):i.kind==="min"?(i.inclusive?s.data<i.value:s.data<=i.value)&&(a=this._getOrReturnCtx(s,a),qe(a,{code:Me.too_small,minimum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),n.dirty()):i.kind==="max"?(i.inclusive?s.data>i.value:s.data>=i.value)&&(a=this._getOrReturnCtx(s,a),qe(a,{code:Me.too_big,maximum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),n.dirty()):i.kind==="multipleOf"?QH(s.data,i.value)!==0&&(a=this._getOrReturnCtx(s,a),qe(a,{code:Me.not_multiple_of,multipleOf:i.value,message:i.message}),n.dirty()):i.kind==="finite"?Number.isFinite(s.data)||(a=this._getOrReturnCtx(s,a),qe(a,{code:Me.not_finite,message:i.message}),n.dirty()):rs.assertNever(i);return{status:n.value,value:s.data}}gte(s,r){return this.setLimit("min",s,!0,et.toString(r))}gt(s,r){return this.setLimit("min",s,!1,et.toString(r))}lte(s,r){return this.setLimit("max",s,!0,et.toString(r))}lt(s,r){return this.setLimit("max",s,!1,et.toString(r))}setLimit(s,r,a,n){return new e0({...this._def,checks:[...this._def.checks,{kind:s,value:r,inclusive:a,message:et.toString(n)}]})}_addCheck(s){return new e0({...this._def,checks:[...this._def.checks,s]})}int(s){return this._addCheck({kind:"int",message:et.toString(s)})}positive(s){return this._addCheck({kind:"min",value:0,inclusive:!1,message:et.toString(s)})}negative(s){return this._addCheck({kind:"max",value:0,inclusive:!1,message:et.toString(s)})}nonpositive(s){return this._addCheck({kind:"max",value:0,inclusive:!0,message:et.toString(s)})}nonnegative(s){return this._addCheck({kind:"min",value:0,inclusive:!0,message:et.toString(s)})}multipleOf(s,r){return this._addCheck({kind:"multipleOf",value:s,message:et.toString(r)})}finite(s){return this._addCheck({kind:"finite",message:et.toString(s)})}safe(s){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:et.toString(s)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:et.toString(s)})}get minValue(){let s=null;for(const r of this._def.checks)r.kind==="min"&&(s===null||r.value>s)&&(s=r.value);return s}get maxValue(){let s=null;for(const r of this._def.checks)r.kind==="max"&&(s===null||r.value<s)&&(s=r.value);return s}get isInt(){return!!this._def.checks.find(s=>s.kind==="int"||s.kind==="multipleOf"&&rs.isInteger(s.value))}get isFinite(){let s=null,r=null;for(const a of this._def.checks){if(a.kind==="finite"||a.kind==="int"||a.kind==="multipleOf")return!0;a.kind==="min"?(r===null||a.value>r)&&(r=a.value):a.kind==="max"&&(s===null||a.value<s)&&(s=a.value)}return Number.isFinite(r)&&Number.isFinite(s)}}e0.create=t=>new e0({checks:[],typeName:_t.ZodNumber,coerce:(t==null?void 0:t.coerce)||!1,...Ot(t)});class t0 extends ss{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(s){if(this._def.coerce)try{s.data=BigInt(s.data)}catch{return this._getInvalidInput(s)}if(this._getType(s)!==Ze.bigint)return this._getInvalidInput(s);let a;const n=new ln;for(const i of this._def.checks)i.kind==="min"?(i.inclusive?s.data<i.value:s.data<=i.value)&&(a=this._getOrReturnCtx(s,a),qe(a,{code:Me.too_small,type:"bigint",minimum:i.value,inclusive:i.inclusive,message:i.message}),n.dirty()):i.kind==="max"?(i.inclusive?s.data>i.value:s.data>=i.value)&&(a=this._getOrReturnCtx(s,a),qe(a,{code:Me.too_big,type:"bigint",maximum:i.value,inclusive:i.inclusive,message:i.message}),n.dirty()):i.kind==="multipleOf"?s.data%i.value!==BigInt(0)&&(a=this._getOrReturnCtx(s,a),qe(a,{code:Me.not_multiple_of,multipleOf:i.value,message:i.message}),n.dirty()):rs.assertNever(i);return{status:n.value,value:s.data}}_getInvalidInput(s){const r=this._getOrReturnCtx(s);return qe(r,{code:Me.invalid_type,expected:Ze.bigint,received:r.parsedType}),St}gte(s,r){return this.setLimit("min",s,!0,et.toString(r))}gt(s,r){return this.setLimit("min",s,!1,et.toString(r))}lte(s,r){return this.setLimit("max",s,!0,et.toString(r))}lt(s,r){return this.setLimit("max",s,!1,et.toString(r))}setLimit(s,r,a,n){return new t0({...this._def,checks:[...this._def.checks,{kind:s,value:r,inclusive:a,message:et.toString(n)}]})}_addCheck(s){return new t0({...this._def,checks:[...this._def.checks,s]})}positive(s){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:et.toString(s)})}negative(s){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:et.toString(s)})}nonpositive(s){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:et.toString(s)})}nonnegative(s){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:et.toString(s)})}multipleOf(s,r){return this._addCheck({kind:"multipleOf",value:s,message:et.toString(r)})}get minValue(){let s=null;for(const r of this._def.checks)r.kind==="min"&&(s===null||r.value>s)&&(s=r.value);return s}get maxValue(){let s=null;for(const r of this._def.checks)r.kind==="max"&&(s===null||r.value<s)&&(s=r.value);return s}}t0.create=t=>new t0({checks:[],typeName:_t.ZodBigInt,coerce:(t==null?void 0:t.coerce)??!1,...Ot(t)});class h5 extends ss{_parse(s){if(this._def.coerce&&(s.data=!!s.data),this._getType(s)!==Ze.boolean){const a=this._getOrReturnCtx(s);return qe(a,{code:Me.invalid_type,expected:Ze.boolean,received:a.parsedType}),St}return $n(s.data)}}h5.create=t=>new h5({typeName:_t.ZodBoolean,coerce:(t==null?void 0:t.coerce)||!1,...Ot(t)});class $g extends ss{_parse(s){if(this._def.coerce&&(s.data=new Date(s.data)),this._getType(s)!==Ze.date){const i=this._getOrReturnCtx(s);return qe(i,{code:Me.invalid_type,expected:Ze.date,received:i.parsedType}),St}if(Number.isNaN(s.data.getTime())){const i=this._getOrReturnCtx(s);return qe(i,{code:Me.invalid_date}),St}const a=new ln;let n;for(const i of this._def.checks)i.kind==="min"?s.data.getTime()<i.value&&(n=this._getOrReturnCtx(s,n),qe(n,{code:Me.too_small,message:i.message,inclusive:!0,exact:!1,minimum:i.value,type:"date"}),a.dirty()):i.kind==="max"?s.data.getTime()>i.value&&(n=this._getOrReturnCtx(s,n),qe(n,{code:Me.too_big,message:i.message,inclusive:!0,exact:!1,maximum:i.value,type:"date"}),a.dirty()):rs.assertNever(i);return{status:a.value,value:new Date(s.data.getTime())}}_addCheck(s){return new $g({...this._def,checks:[...this._def.checks,s]})}min(s,r){return this._addCheck({kind:"min",value:s.getTime(),message:et.toString(r)})}max(s,r){return this._addCheck({kind:"max",value:s.getTime(),message:et.toString(r)})}get minDate(){let s=null;for(const r of this._def.checks)r.kind==="min"&&(s===null||r.value>s)&&(s=r.value);return s!=null?new Date(s):null}get maxDate(){let s=null;for(const r of this._def.checks)r.kind==="max"&&(s===null||r.value<s)&&(s=r.value);return s!=null?new Date(s):null}}$g.create=t=>new $g({checks:[],coerce:(t==null?void 0:t.coerce)||!1,typeName:_t.ZodDate,...Ot(t)});class p5 extends ss{_parse(s){if(this._getType(s)!==Ze.symbol){const a=this._getOrReturnCtx(s);return qe(a,{code:Me.invalid_type,expected:Ze.symbol,received:a.parsedType}),St}return $n(s.data)}}p5.create=t=>new p5({typeName:_t.ZodSymbol,...Ot(t)});class x5 extends ss{_parse(s){if(this._getType(s)!==Ze.undefined){const a=this._getOrReturnCtx(s);return qe(a,{code:Me.invalid_type,expected:Ze.undefined,received:a.parsedType}),St}return $n(s.data)}}x5.create=t=>new x5({typeName:_t.ZodUndefined,...Ot(t)});class g5 extends ss{_parse(s){if(this._getType(s)!==Ze.null){const a=this._getOrReturnCtx(s);return qe(a,{code:Me.invalid_type,expected:Ze.null,received:a.parsedType}),St}return $n(s.data)}}g5.create=t=>new g5({typeName:_t.ZodNull,...Ot(t)});class f5 extends ss{constructor(){super(...arguments),this._any=!0}_parse(s){return $n(s.data)}}f5.create=t=>new f5({typeName:_t.ZodAny,...Ot(t)});class y5 extends ss{constructor(){super(...arguments),this._unknown=!0}_parse(s){return $n(s.data)}}y5.create=t=>new y5({typeName:_t.ZodUnknown,...Ot(t)});class Io extends ss{_parse(s){const r=this._getOrReturnCtx(s);return qe(r,{code:Me.invalid_type,expected:Ze.never,received:r.parsedType}),St}}Io.create=t=>new Io({typeName:_t.ZodNever,...Ot(t)});class b5 extends ss{_parse(s){if(this._getType(s)!==Ze.undefined){const a=this._getOrReturnCtx(s);return qe(a,{code:Me.invalid_type,expected:Ze.void,received:a.parsedType}),St}return $n(s.data)}}b5.create=t=>new b5({typeName:_t.ZodVoid,...Ot(t)});class Fi extends ss{_parse(s){const{ctx:r,status:a}=this._processInputParams(s),n=this._def;if(r.parsedType!==Ze.array)return qe(r,{code:Me.invalid_type,expected:Ze.array,received:r.parsedType}),St;if(n.exactLength!==null){const l=r.data.length>n.exactLength.value,o=r.data.length<n.exactLength.value;(l||o)&&(qe(r,{code:l?Me.too_big:Me.too_small,minimum:o?n.exactLength.value:void 0,maximum:l?n.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:n.exactLength.message}),a.dirty())}if(n.minLength!==null&&r.data.length<n.minLength.value&&(qe(r,{code:Me.too_small,minimum:n.minLength.value,type:"array",inclusive:!0,exact:!1,message:n.minLength.message}),a.dirty()),n.maxLength!==null&&r.data.length>n.maxLength.value&&(qe(r,{code:Me.too_big,maximum:n.maxLength.value,type:"array",inclusive:!0,exact:!1,message:n.maxLength.message}),a.dirty()),r.common.async)return Promise.all([...r.data].map((l,o)=>n.type._parseAsync(new Do(r,l,r.path,o)))).then(l=>ln.mergeArray(a,l));const i=[...r.data].map((l,o)=>n.type._parseSync(new Do(r,l,r.path,o)));return ln.mergeArray(a,i)}get element(){return this._def.type}min(s,r){return new Fi({...this._def,minLength:{value:s,message:et.toString(r)}})}max(s,r){return new Fi({...this._def,maxLength:{value:s,message:et.toString(r)}})}length(s,r){return new Fi({...this._def,exactLength:{value:s,message:et.toString(r)}})}nonempty(s){return this.min(1,s)}}Fi.create=(t,s)=>new Fi({type:t,minLength:null,maxLength:null,exactLength:null,typeName:_t.ZodArray,...Ot(s)});function Dd(t){if(t instanceof xr){const s={};for(const r in t.shape){const a=t.shape[r];s[r]=Co.create(Dd(a))}return new xr({...t._def,shape:()=>s})}else return t instanceof Fi?new Fi({...t._def,type:Dd(t.element)}):t instanceof Co?Co.create(Dd(t.unwrap())):t instanceof Bu?Bu.create(Dd(t.unwrap())):t instanceof Xc?Xc.create(t.items.map(s=>Dd(s))):t}class xr extends ss{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const s=this._def.shape(),r=rs.objectKeys(s);return this._cached={shape:s,keys:r},this._cached}_parse(s){if(this._getType(s)!==Ze.object){const d=this._getOrReturnCtx(s);return qe(d,{code:Me.invalid_type,expected:Ze.object,received:d.parsedType}),St}const{status:a,ctx:n}=this._processInputParams(s),{shape:i,keys:l}=this._getCached(),o=[];if(!(this._def.catchall instanceof Io&&this._def.unknownKeys==="strip"))for(const d in n.data)l.includes(d)||o.push(d);const c=[];for(const d of l){const u=i[d],m=n.data[d];c.push({key:{status:"valid",value:d},value:u._parse(new Do(n,m,n.path,d)),alwaysSet:d in n.data})}if(this._def.catchall instanceof Io){const d=this._def.unknownKeys;if(d==="passthrough")for(const u of o)c.push({key:{status:"valid",value:u},value:{status:"valid",value:n.data[u]}});else if(d==="strict")o.length>0&&(qe(n,{code:Me.unrecognized_keys,keys:o}),a.dirty());else if(d!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const d=this._def.catchall;for(const u of o){const m=n.data[u];c.push({key:{status:"valid",value:u},value:d._parse(new Do(n,m,n.path,u)),alwaysSet:u in n.data})}}return n.common.async?Promise.resolve().then(async()=>{const d=[];for(const u of c){const m=await u.key,p=await u.value;d.push({key:m,value:p,alwaysSet:u.alwaysSet})}return d}).then(d=>ln.mergeObjectSync(a,d)):ln.mergeObjectSync(a,c)}get shape(){return this._def.shape()}strict(s){return et.errToObj,new xr({...this._def,unknownKeys:"strict",...s!==void 0?{errorMap:(r,a)=>{var i,l;const n=((l=(i=this._def).errorMap)==null?void 0:l.call(i,r,a).message)??a.defaultError;return r.code==="unrecognized_keys"?{message:et.errToObj(s).message??n}:{message:n}}}:{}})}strip(){return new xr({...this._def,unknownKeys:"strip"})}passthrough(){return new xr({...this._def,unknownKeys:"passthrough"})}extend(s){return new xr({...this._def,shape:()=>({...this._def.shape(),...s})})}merge(s){return new xr({unknownKeys:s._def.unknownKeys,catchall:s._def.catchall,shape:()=>({...this._def.shape(),...s._def.shape()}),typeName:_t.ZodObject})}setKey(s,r){return this.augment({[s]:r})}catchall(s){return new xr({...this._def,catchall:s})}pick(s){const r={};for(const a of rs.objectKeys(s))s[a]&&this.shape[a]&&(r[a]=this.shape[a]);return new xr({...this._def,shape:()=>r})}omit(s){const r={};for(const a of rs.objectKeys(this.shape))s[a]||(r[a]=this.shape[a]);return new xr({...this._def,shape:()=>r})}deepPartial(){return Dd(this)}partial(s){const r={};for(const a of rs.objectKeys(this.shape)){const n=this.shape[a];s&&!s[a]?r[a]=n:r[a]=n.optional()}return new xr({...this._def,shape:()=>r})}required(s){const r={};for(const a of rs.objectKeys(this.shape))if(s&&!s[a])r[a]=this.shape[a];else{let i=this.shape[a];for(;i instanceof Co;)i=i._def.innerType;r[a]=i}return new xr({...this._def,shape:()=>r})}keyof(){return DR(rs.objectKeys(this.shape))}}xr.create=(t,s)=>new xr({shape:()=>t,unknownKeys:"strip",catchall:Io.create(),typeName:_t.ZodObject,...Ot(s)});xr.strictCreate=(t,s)=>new xr({shape:()=>t,unknownKeys:"strict",catchall:Io.create(),typeName:_t.ZodObject,...Ot(s)});xr.lazycreate=(t,s)=>new xr({shape:t,unknownKeys:"strip",catchall:Io.create(),typeName:_t.ZodObject,...Ot(s)});class Ug extends ss{_parse(s){const{ctx:r}=this._processInputParams(s),a=this._def.options;function n(i){for(const o of i)if(o.result.status==="valid")return o.result;for(const o of i)if(o.result.status==="dirty")return r.common.issues.push(...o.ctx.common.issues),o.result;const l=i.map(o=>new Cl(o.ctx.common.issues));return qe(r,{code:Me.invalid_union,unionErrors:l}),St}if(r.common.async)return Promise.all(a.map(async i=>{const l={...r,common:{...r.common,issues:[]},parent:null};return{result:await i._parseAsync({data:r.data,path:r.path,parent:l}),ctx:l}})).then(n);{let i;const l=[];for(const c of a){const d={...r,common:{...r.common,issues:[]},parent:null},u=c._parseSync({data:r.data,path:r.path,parent:d});if(u.status==="valid")return u;u.status==="dirty"&&!i&&(i={result:u,ctx:d}),d.common.issues.length&&l.push(d.common.issues)}if(i)return r.common.issues.push(...i.ctx.common.issues),i.result;const o=l.map(c=>new Cl(c));return qe(r,{code:Me.invalid_union,unionErrors:o}),St}}get options(){return this._def.options}}Ug.create=(t,s)=>new Ug({options:t,typeName:_t.ZodUnion,...Ot(s)});function vw(t,s){const r=Gl(t),a=Gl(s);if(t===s)return{valid:!0,data:t};if(r===Ze.object&&a===Ze.object){const n=rs.objectKeys(s),i=rs.objectKeys(t).filter(o=>n.indexOf(o)!==-1),l={...t,...s};for(const o of i){const c=vw(t[o],s[o]);if(!c.valid)return{valid:!1};l[o]=c.data}return{valid:!0,data:l}}else if(r===Ze.array&&a===Ze.array){if(t.length!==s.length)return{valid:!1};const n=[];for(let i=0;i<t.length;i++){const l=t[i],o=s[i],c=vw(l,o);if(!c.valid)return{valid:!1};n.push(c.data)}return{valid:!0,data:n}}else return r===Ze.date&&a===Ze.date&&+t==+s?{valid:!0,data:t}:{valid:!1}}class Vg extends ss{_parse(s){const{status:r,ctx:a}=this._processInputParams(s),n=(i,l)=>{if(d5(i)||d5(l))return St;const o=vw(i.value,l.value);return o.valid?((u5(i)||u5(l))&&r.dirty(),{status:r.value,value:o.data}):(qe(a,{code:Me.invalid_intersection_types}),St)};return a.common.async?Promise.all([this._def.left._parseAsync({data:a.data,path:a.path,parent:a}),this._def.right._parseAsync({data:a.data,path:a.path,parent:a})]).then(([i,l])=>n(i,l)):n(this._def.left._parseSync({data:a.data,path:a.path,parent:a}),this._def.right._parseSync({data:a.data,path:a.path,parent:a}))}}Vg.create=(t,s,r)=>new Vg({left:t,right:s,typeName:_t.ZodIntersection,...Ot(r)});class Xc extends ss{_parse(s){const{status:r,ctx:a}=this._processInputParams(s);if(a.parsedType!==Ze.array)return qe(a,{code:Me.invalid_type,expected:Ze.array,received:a.parsedType}),St;if(a.data.length<this._def.items.length)return qe(a,{code:Me.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),St;!this._def.rest&&a.data.length>this._def.items.length&&(qe(a,{code:Me.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),r.dirty());const i=[...a.data].map((l,o)=>{const c=this._def.items[o]||this._def.rest;return c?c._parse(new Do(a,l,a.path,o)):null}).filter(l=>!!l);return a.common.async?Promise.all(i).then(l=>ln.mergeArray(r,l)):ln.mergeArray(r,i)}get items(){return this._def.items}rest(s){return new Xc({...this._def,rest:s})}}Xc.create=(t,s)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Xc({items:t,typeName:_t.ZodTuple,rest:null,...Ot(s)})};class v5 extends ss{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(s){const{status:r,ctx:a}=this._processInputParams(s);if(a.parsedType!==Ze.map)return qe(a,{code:Me.invalid_type,expected:Ze.map,received:a.parsedType}),St;const n=this._def.keyType,i=this._def.valueType,l=[...a.data.entries()].map(([o,c],d)=>({key:n._parse(new Do(a,o,a.path,[d,"key"])),value:i._parse(new Do(a,c,a.path,[d,"value"]))}));if(a.common.async){const o=new Map;return Promise.resolve().then(async()=>{for(const c of l){const d=await c.key,u=await c.value;if(d.status==="aborted"||u.status==="aborted")return St;(d.status==="dirty"||u.status==="dirty")&&r.dirty(),o.set(d.value,u.value)}return{status:r.value,value:o}})}else{const o=new Map;for(const c of l){const d=c.key,u=c.value;if(d.status==="aborted"||u.status==="aborted")return St;(d.status==="dirty"||u.status==="dirty")&&r.dirty(),o.set(d.value,u.value)}return{status:r.value,value:o}}}}v5.create=(t,s,r)=>new v5({valueType:s,keyType:t,typeName:_t.ZodMap,...Ot(r)});class s0 extends ss{_parse(s){const{status:r,ctx:a}=this._processInputParams(s);if(a.parsedType!==Ze.set)return qe(a,{code:Me.invalid_type,expected:Ze.set,received:a.parsedType}),St;const n=this._def;n.minSize!==null&&a.data.size<n.minSize.value&&(qe(a,{code:Me.too_small,minimum:n.minSize.value,type:"set",inclusive:!0,exact:!1,message:n.minSize.message}),r.dirty()),n.maxSize!==null&&a.data.size>n.maxSize.value&&(qe(a,{code:Me.too_big,maximum:n.maxSize.value,type:"set",inclusive:!0,exact:!1,message:n.maxSize.message}),r.dirty());const i=this._def.valueType;function l(c){const d=new Set;for(const u of c){if(u.status==="aborted")return St;u.status==="dirty"&&r.dirty(),d.add(u.value)}return{status:r.value,value:d}}const o=[...a.data.values()].map((c,d)=>i._parse(new Do(a,c,a.path,d)));return a.common.async?Promise.all(o).then(c=>l(c)):l(o)}min(s,r){return new s0({...this._def,minSize:{value:s,message:et.toString(r)}})}max(s,r){return new s0({...this._def,maxSize:{value:s,message:et.toString(r)}})}size(s,r){return this.min(s,r).max(s,r)}nonempty(s){return this.min(1,s)}}s0.create=(t,s)=>new s0({valueType:t,minSize:null,maxSize:null,typeName:_t.ZodSet,...Ot(s)});class j5 extends ss{get schema(){return this._def.getter()}_parse(s){const{ctx:r}=this._processInputParams(s);return this._def.getter()._parse({data:r.data,path:r.path,parent:r})}}j5.create=(t,s)=>new j5({getter:t,typeName:_t.ZodLazy,...Ot(s)});class w5 extends ss{_parse(s){if(s.data!==this._def.value){const r=this._getOrReturnCtx(s);return qe(r,{received:r.data,code:Me.invalid_literal,expected:this._def.value}),St}return{status:"valid",value:s.data}}get value(){return this._def.value}}w5.create=(t,s)=>new w5({value:t,typeName:_t.ZodLiteral,...Ot(s)});function DR(t,s){return new Fu({values:t,typeName:_t.ZodEnum,...Ot(s)})}class Fu extends ss{_parse(s){if(typeof s.data!="string"){const r=this._getOrReturnCtx(s),a=this._def.values;return qe(r,{expected:rs.joinValues(a),received:r.parsedType,code:Me.invalid_type}),St}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(s.data)){const r=this._getOrReturnCtx(s),a=this._def.values;return qe(r,{received:r.data,code:Me.invalid_enum_value,options:a}),St}return $n(s.data)}get options(){return this._def.values}get enum(){const s={};for(const r of this._def.values)s[r]=r;return s}get Values(){const s={};for(const r of this._def.values)s[r]=r;return s}get Enum(){const s={};for(const r of this._def.values)s[r]=r;return s}extract(s,r=this._def){return Fu.create(s,{...this._def,...r})}exclude(s,r=this._def){return Fu.create(this.options.filter(a=>!s.includes(a)),{...this._def,...r})}}Fu.create=DR;class N5 extends ss{_parse(s){const r=rs.getValidEnumValues(this._def.values),a=this._getOrReturnCtx(s);if(a.parsedType!==Ze.string&&a.parsedType!==Ze.number){const n=rs.objectValues(r);return qe(a,{expected:rs.joinValues(n),received:a.parsedType,code:Me.invalid_type}),St}if(this._cache||(this._cache=new Set(rs.getValidEnumValues(this._def.values))),!this._cache.has(s.data)){const n=rs.objectValues(r);return qe(a,{received:a.data,code:Me.invalid_enum_value,options:n}),St}return $n(s.data)}get enum(){return this._def.values}}N5.create=(t,s)=>new N5({values:t,typeName:_t.ZodNativeEnum,...Ot(s)});class qg extends ss{unwrap(){return this._def.type}_parse(s){const{ctx:r}=this._processInputParams(s);if(r.parsedType!==Ze.promise&&r.common.async===!1)return qe(r,{code:Me.invalid_type,expected:Ze.promise,received:r.parsedType}),St;const a=r.parsedType===Ze.promise?r.data:Promise.resolve(r.data);return $n(a.then(n=>this._def.type.parseAsync(n,{path:r.path,errorMap:r.common.contextualErrorMap})))}}qg.create=(t,s)=>new qg({type:t,typeName:_t.ZodPromise,...Ot(s)});class Ou extends ss{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===_t.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(s){const{status:r,ctx:a}=this._processInputParams(s),n=this._def.effect||null,i={addIssue:l=>{qe(a,l),l.fatal?r.abort():r.dirty()},get path(){return a.path}};if(i.addIssue=i.addIssue.bind(i),n.type==="preprocess"){const l=n.transform(a.data,i);if(a.common.async)return Promise.resolve(l).then(async o=>{if(r.value==="aborted")return St;const c=await this._def.schema._parseAsync({data:o,path:a.path,parent:a});return c.status==="aborted"?St:c.status==="dirty"||r.value==="dirty"?Hm(c.value):c});{if(r.value==="aborted")return St;const o=this._def.schema._parseSync({data:l,path:a.path,parent:a});return o.status==="aborted"?St:o.status==="dirty"||r.value==="dirty"?Hm(o.value):o}}if(n.type==="refinement"){const l=o=>{const c=n.refinement(o,i);if(a.common.async)return Promise.resolve(c);if(c instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return o};if(a.common.async===!1){const o=this._def.schema._parseSync({data:a.data,path:a.path,parent:a});return o.status==="aborted"?St:(o.status==="dirty"&&r.dirty(),l(o.value),{status:r.value,value:o.value})}else return this._def.schema._parseAsync({data:a.data,path:a.path,parent:a}).then(o=>o.status==="aborted"?St:(o.status==="dirty"&&r.dirty(),l(o.value).then(()=>({status:r.value,value:o.value}))))}if(n.type==="transform")if(a.common.async===!1){const l=this._def.schema._parseSync({data:a.data,path:a.path,parent:a});if(!Lu(l))return St;const o=n.transform(l.value,i);if(o instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:r.value,value:o}}else return this._def.schema._parseAsync({data:a.data,path:a.path,parent:a}).then(l=>Lu(l)?Promise.resolve(n.transform(l.value,i)).then(o=>({status:r.value,value:o})):St);rs.assertNever(n)}}Ou.create=(t,s,r)=>new Ou({schema:t,typeName:_t.ZodEffects,effect:s,...Ot(r)});Ou.createWithPreprocess=(t,s,r)=>new Ou({schema:s,effect:{type:"preprocess",transform:t},typeName:_t.ZodEffects,...Ot(r)});class Co extends ss{_parse(s){return this._getType(s)===Ze.undefined?$n(void 0):this._def.innerType._parse(s)}unwrap(){return this._def.innerType}}Co.create=(t,s)=>new Co({innerType:t,typeName:_t.ZodOptional,...Ot(s)});class Bu extends ss{_parse(s){return this._getType(s)===Ze.null?$n(null):this._def.innerType._parse(s)}unwrap(){return this._def.innerType}}Bu.create=(t,s)=>new Bu({innerType:t,typeName:_t.ZodNullable,...Ot(s)});class jw extends ss{_parse(s){const{ctx:r}=this._processInputParams(s);let a=r.data;return r.parsedType===Ze.undefined&&(a=this._def.defaultValue()),this._def.innerType._parse({data:a,path:r.path,parent:r})}removeDefault(){return this._def.innerType}}jw.create=(t,s)=>new jw({innerType:t,typeName:_t.ZodDefault,defaultValue:typeof s.default=="function"?s.default:()=>s.default,...Ot(s)});class ww extends ss{_parse(s){const{ctx:r}=this._processInputParams(s),a={...r,common:{...r.common,issues:[]}},n=this._def.innerType._parse({data:a.data,path:a.path,parent:{...a}});return Bg(n)?n.then(i=>({status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new Cl(a.common.issues)},input:a.data})})):{status:"valid",value:n.status==="valid"?n.value:this._def.catchValue({get error(){return new Cl(a.common.issues)},input:a.data})}}removeCatch(){return this._def.innerType}}ww.create=(t,s)=>new ww({innerType:t,typeName:_t.ZodCatch,catchValue:typeof s.catch=="function"?s.catch:()=>s.catch,...Ot(s)});class k5 extends ss{_parse(s){if(this._getType(s)!==Ze.nan){const a=this._getOrReturnCtx(s);return qe(a,{code:Me.invalid_type,expected:Ze.nan,received:a.parsedType}),St}return{status:"valid",value:s.data}}}k5.create=t=>new k5({typeName:_t.ZodNaN,...Ot(t)});class JH extends ss{_parse(s){const{ctx:r}=this._processInputParams(s),a=r.data;return this._def.type._parse({data:a,path:r.path,parent:r})}unwrap(){return this._def.type}}class p2 extends ss{_parse(s){const{status:r,ctx:a}=this._processInputParams(s);if(a.common.async)return(async()=>{const i=await this._def.in._parseAsync({data:a.data,path:a.path,parent:a});return i.status==="aborted"?St:i.status==="dirty"?(r.dirty(),Hm(i.value)):this._def.out._parseAsync({data:i.value,path:a.path,parent:a})})();{const n=this._def.in._parseSync({data:a.data,path:a.path,parent:a});return n.status==="aborted"?St:n.status==="dirty"?(r.dirty(),{status:"dirty",value:n.value}):this._def.out._parseSync({data:n.value,path:a.path,parent:a})}}static create(s,r){return new p2({in:s,out:r,typeName:_t.ZodPipeline})}}class Nw extends ss{_parse(s){const r=this._def.innerType._parse(s),a=n=>(Lu(n)&&(n.value=Object.freeze(n.value)),n);return Bg(r)?r.then(n=>a(n)):a(r)}unwrap(){return this._def.innerType}}Nw.create=(t,s)=>new Nw({innerType:t,typeName:_t.ZodReadonly,...Ot(s)});var _t;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(_t||(_t={}));const Kl=uo.create;Io.create;Fi.create;const IR=xr.create;Ug.create;Vg.create;Xc.create;Fu.create;qg.create;Co.create;Bu.create;function kw({children:t,title:s,subtitle:r}){return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"max-w-md w-full space-y-8",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"text-3xl font-bold text-primary-600",children:"PaymentSystem"}),e.jsx("h2",{className:"mt-6 text-2xl font-bold text-gray-900",children:s}),r&&e.jsx("p",{className:"mt-2 text-sm text-gray-600",children:r})]}),e.jsx("div",{className:"bg-white py-8 px-6 shadow-sm rounded-xl border border-gray-200",children:t})]})})}const ZH=IR({email:Kl().min(1,"Phone number or email is required"),password:Kl().min(1,"Password is required")}),XH=[{email:"superadmin@cardpay.com",password:"admin123",label:"Super Admin",icon:Xt,color:"bg-black hover:bg-gray-800"},{email:"admin@cardpay.com",password:"admin123",label:"Admin",icon:Xt,color:"bg-red-500 hover:bg-red-600"},{email:"user@example.com",password:"User123!@#",label:"User 1",icon:Es,color:"bg-blue-500 hover:bg-blue-600"},{email:"merchant@example.com",password:"Merchant123!@#",label:"Merchant",icon:Ft,color:"bg-green-500 hover:bg-green-600"},{email:"developer@example.com",password:"Developer123!@#",label:"Developer",icon:F1,color:"bg-purple-500 hover:bg-purple-600"},{email:"agent@example.com",password:"Agent123!@#",label:"Agent",icon:No,color:"bg-orange-500 hover:bg-orange-600"}];function eY(){var S,_,E,A;const[t,s]=h.useState(null),[r,a]=h.useState(null),[n,i]=h.useState(!1),[l,o]=h.useState(""),[c,d]=h.useState(null),{login:u}=wt(),m=At(),x=(_=(S=Ga().state)==null?void 0:S.from)==null?void 0:_.pathname,{register:g,handleSubmit:f,formState:{errors:b,isSubmitting:j}}=ER({resolver:TR(ZH)}),v=async R=>{try{s(null);const I=await u(R);if("mfaRequired"in I&&I.mfaRequired){i(!0),d({email:R.email,password:R.password});return}const P=x||Ub(I.roles);m(P,{replace:!0})}catch(I){const N=I instanceof Error?I.message:"Invalid credentials";s(N)}},w=async R=>{if(R.preventDefault(),!(!c||l.length!==6))try{s(null);const N=await u({email:c.email,password:c.password,mfaCode:l}),P=x||Ub(N.roles);m(P,{replace:!0})}catch(I){const N=I instanceof Error?I.message:"Invalid verification code";s(N)}},y=()=>{i(!1),o(""),d(null),s(null)},C=async(R,I)=>{try{s(null),a(R);const N=await u({email:R,password:I});if("mfaRequired"in N&&N.mfaRequired){i(!0),d({email:R,password:I}),a(null);return}const k=x||Ub(N.roles);m(k,{replace:!0})}catch(N){const P=N instanceof Error?N.message:"Login failed";s(P)}finally{a(null)}};return n?e.jsx(kw,{title:"Two-Factor Authentication",subtitle:"Enter the code from your authenticator app",children:e.jsxs("form",{onSubmit:w,className:"space-y-6",children:[t&&e.jsxs("div",{className:"flex items-center gap-2 p-3 bg-red-50 border border-red-200 rounded-lg text-red-700 text-sm",children:[e.jsx(ut,{className:"w-5 h-5 flex-shrink-0"}),t]}),e.jsx("div",{className:"flex justify-center",children:e.jsx("div",{className:"w-16 h-16 bg-primary-100 rounded-full flex items-center justify-center",children:e.jsx(Na,{className:"w-8 h-8 text-primary-600"})})}),e.jsx("p",{className:"text-center text-sm text-gray-600",children:"Open your authenticator app and enter the 6-digit code for your Peeap account."}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1 text-center",children:"Verification Code"}),e.jsx("input",{type:"text",value:l,onChange:R=>o(R.target.value.replace(/\D/g,"").slice(0,6)),maxLength:6,inputMode:"numeric",autoFocus:!0,className:"w-full px-4 py-4 border border-gray-300 rounded-xl text-center text-2xl tracking-[0.5em] focus:ring-2 focus:ring-primary-500 focus:border-primary-500",placeholder:"000000"})]}),e.jsx(De,{type:"submit",className:"w-full",disabled:l.length!==6,children:"Verify"}),e.jsxs("button",{type:"button",onClick:y,className:"w-full flex items-center justify-center gap-2 text-sm text-gray-600 hover:text-gray-900",children:[e.jsx(_s,{className:"w-4 h-4"}),"Back to login"]})]})}):e.jsx(kw,{title:"Sign in to your account",subtitle:"Welcome back! Please enter your details.",children:e.jsxs("form",{onSubmit:f(v),className:"space-y-6",children:[t&&e.jsxs("div",{className:"flex items-center gap-2 p-3 bg-red-50 border border-red-200 rounded-lg text-red-700 text-sm",children:[e.jsx(ut,{className:"w-5 h-5 flex-shrink-0"}),t]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone Number or Email"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",children:e.jsx(lr,{className:"w-4 h-4"})}),e.jsx("input",{type:"text",placeholder:"+1234567890 or email@example.com",className:"w-full pl-10 pr-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",...g("email")})]}),((E=b.email)==null?void 0:E.message)&&e.jsx("p",{className:"mt-1 text-sm text-red-500",children:b.email.message}),e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Primary: Phone number | Alternative: Email"})]}),e.jsx(_n,{label:"Password",type:"password",placeholder:"Enter your password",error:(A=b.password)==null?void 0:A.message,...g("password")}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",className:"rounded border-gray-300 text-primary-600 focus:ring-primary-500"}),e.jsx("span",{className:"ml-2 text-sm text-gray-600",children:"Remember me"})]}),e.jsx(Qe,{to:"/forgot-password",className:"text-sm text-primary-600 hover:text-primary-700",children:"Forgot password?"})]}),e.jsx(De,{type:"submit",className:"w-full",isLoading:j,children:"Sign in"}),e.jsxs("p",{className:"text-center text-sm text-gray-600",children:["Don't have an account?"," ",e.jsx(Qe,{to:"/register",className:"text-primary-600 hover:text-primary-700 font-medium",children:"Sign up"})]}),e.jsxs("div",{className:"pt-6 border-t border-gray-200",children:[e.jsx("p",{className:"text-center text-sm text-gray-500 mb-4",children:"Quick login with test accounts"}),e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-2",children:XH.map(({email:R,password:I,label:N,icon:P,color:k})=>e.jsxs("button",{type:"button",onClick:()=>C(R,I),disabled:r!==null,className:`flex items-center justify-center gap-2 px-3 py-2 rounded-lg text-white text-sm font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed ${k}`,children:[r===R?e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}):e.jsx(P,{className:"w-4 h-4"}),N]},R))})]})]})})}const tY=IR({firstName:Kl().min(2,"First name must be at least 2 characters"),lastName:Kl().min(2,"Last name must be at least 2 characters"),email:Kl().email("Invalid email address"),phone:Kl().optional(),password:Kl().min(8,"Password must be at least 8 characters").regex(/[A-Z]/,"Password must contain at least one uppercase letter").regex(/[a-z]/,"Password must contain at least one lowercase letter").regex(/[0-9]/,"Password must contain at least one number"),confirmPassword:Kl()}).refine(t=>t.password===t.confirmPassword,{message:"Passwords don't match",path:["confirmPassword"]});function sY(){var d,u,m,p,x,g;const[t,s]=h.useState(null),{register:r}=wt(),a=At(),{register:n,handleSubmit:i,formState:{errors:l,isSubmitting:o}}=ER({resolver:TR(tY)}),c=async f=>{try{s(null),await r({email:f.email,password:f.password,firstName:f.firstName,lastName:f.lastName,phone:f.phone}),a("/dashboard")}catch(b){const j=b instanceof Error?b.message:"Registration failed";s(j)}};return e.jsx(kw,{title:"Create your account",subtitle:"Start your financial journey with us.",children:e.jsxs("form",{onSubmit:i(c),className:"space-y-4",children:[t&&e.jsxs("div",{className:"flex items-center gap-2 p-3 bg-red-50 border border-red-200 rounded-lg text-red-700 text-sm",children:[e.jsx(ut,{className:"w-5 h-5 flex-shrink-0"}),t]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(_n,{label:"First name",placeholder:"John",error:(d=l.firstName)==null?void 0:d.message,...n("firstName")}),e.jsx(_n,{label:"Last name",placeholder:"Doe",error:(u=l.lastName)==null?void 0:u.message,...n("lastName")})]}),e.jsx(_n,{label:"Email",type:"email",placeholder:"john@example.com",error:(m=l.email)==null?void 0:m.message,...n("email")}),e.jsx(_n,{label:"Phone (optional)",type:"tel",placeholder:"+1 (555) 000-0000",error:(p=l.phone)==null?void 0:p.message,...n("phone")}),e.jsx(_n,{label:"Password",type:"password",placeholder:"Create a strong password",error:(x=l.password)==null?void 0:x.message,helperText:"Must be at least 8 characters with uppercase, lowercase, and number",...n("password")}),e.jsx(_n,{label:"Confirm password",type:"password",placeholder:"Confirm your password",error:(g=l.confirmPassword)==null?void 0:g.message,...n("confirmPassword")}),e.jsx(De,{type:"submit",className:"w-full",isLoading:o,children:"Create account"}),e.jsxs("p",{className:"text-center text-sm text-gray-600",children:["Already have an account?"," ",e.jsx(Qe,{to:"/login",className:"text-primary-600 hover:text-primary-700 font-medium",children:"Sign in"})]})]})})}const rY=[{path:"/dashboard",label:"Dashboard",icon:Df},{path:"/send",label:"Send Money",icon:Ba},{path:"/receive",label:"Receive Money",icon:wa},{path:"/wallets",label:"Wallets",icon:jt},{path:"/pots",label:"Savings Pots",icon:di},{path:"/cards",label:"Cards",icon:Je},{path:"/transactions",label:"Transactions",icon:ci},{path:"/profile",label:"Profile",icon:Es},{path:"/support",label:"Help & Support",icon:O1}];function ka({children:t}){var c,d;const[s,r]=h.useState(!1),{user:a,logout:n}=wt(),i=Ga(),l=At(),o=async()=>{await n(),l("/login")};return e.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:[s&&e.jsx("div",{className:"fixed inset-0 z-40 bg-gray-600 bg-opacity-75 lg:hidden",onClick:()=>r(!1)}),e.jsx("aside",{className:oe("fixed inset-y-0 left-0 z-50 w-64 bg-white dark:bg-gray-800 border-r border-gray-200 dark:border-gray-700 transform transition-transform duration-300 ease-in-out lg:translate-x-0",s?"translate-x-0":"-translate-x-full"),children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex items-center justify-between h-16 px-6 border-b border-gray-200 dark:border-gray-700",children:[e.jsx(Qe,{to:"/dashboard",className:"text-xl font-bold text-primary-600 dark:text-primary-400",children:"PaymentSystem"}),e.jsx("button",{className:"lg:hidden p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700",onClick:()=>r(!1),children:e.jsx(lt,{className:"w-5 h-5 dark:text-gray-400"})})]}),e.jsx("nav",{className:"flex-1 px-4 py-6 space-y-1 overflow-y-auto scrollbar-hide",children:rY.map(u=>{const m=u.icon,p=i.pathname===u.path;return e.jsxs(Qe,{to:u.path,className:oe("flex items-center px-4 py-3 rounded-lg transition-colors",p?"bg-primary-50 dark:bg-primary-900/30 text-primary-700 dark:text-primary-400":"text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700"),children:[e.jsx(m,{className:"w-5 h-5 mr-3"}),u.label]},u.path)})}),e.jsxs("div",{className:"p-4 border-t border-gray-200 dark:border-gray-700",children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx("div",{className:"w-10 h-10 bg-primary-100 dark:bg-primary-900/30 rounded-full flex items-center justify-center",children:e.jsxs("span",{className:"text-primary-700 dark:text-primary-400 font-medium",children:[(c=a==null?void 0:a.firstName)==null?void 0:c.charAt(0),(d=a==null?void 0:a.lastName)==null?void 0:d.charAt(0)]})}),e.jsxs("div",{className:"ml-3",children:[e.jsxs("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:[a==null?void 0:a.firstName," ",a==null?void 0:a.lastName]}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:a==null?void 0:a.email})]})]}),e.jsxs("button",{onClick:o,className:"flex items-center w-full px-4 py-2 text-gray-600 dark:text-gray-300 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",children:[e.jsx(_0,{className:"w-5 h-5 mr-3"}),"Sign out"]})]})]})}),e.jsxs("div",{className:"lg:pl-64",children:[e.jsx("header",{className:"sticky top-0 z-30 h-16 bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex items-center justify-between h-full px-4 lg:px-8",children:[e.jsx("button",{className:"lg:hidden p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700",onClick:()=>r(!0),children:e.jsx(E0,{className:"w-6 h-6 dark:text-gray-400"})}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("span",{className:"text-sm text-gray-500 dark:text-gray-400 hidden sm:inline",children:["KYC Status:"," ",e.jsx("span",{className:oe("font-medium",(a==null?void 0:a.kycStatus)==="VERIFIED"&&"text-green-600",(a==null?void 0:a.kycStatus)==="PENDING"&&"text-yellow-600",(a==null?void 0:a.kycStatus)==="REJECTED"&&"text-red-600"),children:a==null?void 0:a.kycStatus})]}),e.jsx(Wf,{}),e.jsx(zf,{})]})]})}),e.jsx("main",{className:"p-4 lg:p-8",children:t})]})]})}const vd=t=>({id:t.id,userId:t.user_id,balance:parseFloat(t.balance)||0,currency:t.currency||"SLE",status:t.status||"ACTIVE",dailyLimit:parseFloat(t.daily_limit)||5e3,monthlyLimit:parseFloat(t.monthly_limit)||5e4,createdAt:t.created_at,updatedAt:t.updated_at}),Fp=t=>({id:t.id,walletId:t.wallet_id,cardId:t.card_id||void 0,type:t.type,amount:parseFloat(t.amount)||0,currency:t.currency||"SLE",status:t.status||"COMPLETED",description:t.description||void 0,merchantName:t.merchant_name||void 0,merchantCategory:t.merchant_category||void 0,reference:t.reference||t.id,createdAt:t.created_at,updatedAt:t.updated_at}),qo={async getWallets(t){const{data:s,error:r}=await U.from("wallets").select("*").eq("user_id",t).order("created_at",{ascending:!1});if(r)throw console.error("Error fetching wallets:",r),new Error(r.message);return(s||[]).map(vd)},async getWallet(t){const{data:s,error:r}=await U.from("wallets").select("*").eq("id",t).single();if(r)throw console.error("Error fetching wallet:",r),new Error(r.message);return vd(s)},async getWalletByUserId(t){const{data:s,error:r}=await U.from("wallets").select("*").eq("user_id",t).eq("status","ACTIVE").order("created_at",{ascending:!0}).limit(1).single();if(r){if(r.code==="PGRST116")return null;throw console.error("Error fetching wallet by user:",r),new Error(r.message)}return vd(s)},async createWallet(t,s){const{data:r,error:a}=await U.from("wallets").insert({user_id:t,currency:s.currency||"SLE",balance:0,status:"ACTIVE",daily_limit:s.dailyLimit||5e3,monthly_limit:s.monthlyLimit||5e4}).select().single();if(a)throw console.error("Error creating wallet:",a),new Error(a.message);return vd(r)},async deposit(t){const{data:s,error:r}=await U.rpc("wallet_deposit",{p_wallet_id:t.walletId,p_amount:t.amount,p_reference:t.reference||`DEP-${Date.now()}`,p_description:t.description||"Deposit"});if(r){const{error:i}=await U.from("wallets").update({balance:U.rpc("increment_balance",{amount:t.amount}),updated_at:new Date().toISOString()}).eq("id",t.walletId);if(i){const{data:l}=await U.from("wallets").select("balance").eq("id",t.walletId).single();l&&await U.from("wallets").update({balance:(parseFloat(l.balance)||0)+t.amount,updated_at:new Date().toISOString()}).eq("id",t.walletId)}}const{data:a,error:n}=await U.from("transactions").insert({wallet_id:t.walletId,type:"DEPOSIT",amount:t.amount,currency:"SLE",status:"COMPLETED",description:t.description||"Deposit",reference:t.reference||`DEP-${Date.now()}`}).select().single();if(n)throw console.error("Error creating deposit transaction:",n),new Error(n.message);return Fp(a)},async transfer(t){let s=t.toWalletId;if(t.toUserId&&!s){const{data:g,error:f}=await U.from("wallets").select("id").eq("user_id",t.toUserId).eq("status","ACTIVE").limit(1).single();if(f||!g)throw new Error("Recipient wallet not found");s=g.id}if(!s)throw new Error("Recipient wallet ID is required");const{data:r,error:a}=await U.rpc("wallet_transfer",{p_from_wallet_id:t.fromWalletId,p_to_wallet_id:s,p_amount:t.amount,p_description:t.description||"Transfer"});if(!a&&r){const{data:g}=await U.from("transactions").select("*").eq("wallet_id",t.fromWalletId).eq("type","TRANSFER").order("created_at",{ascending:!1}).limit(1).single();if(g)return Fp(g)}const{data:n,error:i}=await U.from("wallets").select("balance, status").eq("id",t.fromWalletId).single();if(i||!n)throw new Error("Source wallet not found");if(n.status!=="ACTIVE")throw new Error("Source wallet is not active");const l=parseFloat(n.balance)||0;if(l<t.amount)throw new Error("Insufficient balance");const{error:o}=await U.from("wallets").update({balance:l-t.amount,updated_at:new Date().toISOString()}).eq("id",t.fromWalletId);if(o)throw new Error("Failed to debit source wallet");const{data:c}=await U.from("wallets").select("balance").eq("id",s).single(),d=parseFloat(c==null?void 0:c.balance)||0,{error:u}=await U.from("wallets").update({balance:d+t.amount,updated_at:new Date().toISOString()}).eq("id",s);if(u)throw await U.from("wallets").update({balance:l}).eq("id",t.fromWalletId),new Error("Failed to credit destination wallet");const m=`TRF-${Date.now()}`,{data:p,error:x}=await U.from("transactions").insert({wallet_id:t.fromWalletId,type:"TRANSFER",amount:-t.amount,currency:"SLE",status:"COMPLETED",description:t.description||"Transfer sent",reference:m}).select().single();return x&&console.error("Error creating debit transaction:",x),await U.from("transactions").insert({wallet_id:s,type:"TRANSFER",amount:t.amount,currency:"SLE",status:"COMPLETED",description:t.description||"Transfer received",reference:m}),p?Fp(p):{id:m,walletId:t.fromWalletId,type:"TRANSFER",amount:-t.amount,currency:"SLE",status:"COMPLETED",description:t.description||"Transfer",reference:m,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()}},async getTransactions(t,s){const r=(s==null?void 0:s.page)||1,a=(s==null?void 0:s.limit)||10,n=(r-1)*a,{count:i}=await U.from("transactions").select("*",{count:"exact",head:!0}).eq("wallet_id",t),{data:l,error:o}=await U.from("transactions").select("*").eq("wallet_id",t).order("created_at",{ascending:!1}).range(n,n+a-1);if(o)throw console.error("Error fetching transactions:",o),new Error(o.message);const c=i||0;return{data:(l||[]).map(Fp),total:c,page:r,limit:a,totalPages:Math.ceil(c/a)}},async freezeWallet(t){const{data:s,error:r}=await U.from("wallets").update({status:"FROZEN",updated_at:new Date().toISOString()}).eq("id",t).select().single();if(r)throw console.error("Error freezing wallet:",r),new Error(r.message);return vd(s)},async unfreezeWallet(t){const{data:s,error:r}=await U.from("wallets").update({status:"ACTIVE",updated_at:new Date().toISOString()}).eq("id",t).select().single();if(r)throw console.error("Error unfreezing wallet:",r),new Error(r.message);return vd(s)}};function qi(){const{user:t}=wt();return _a({queryKey:["wallets",t==null?void 0:t.id],queryFn:async()=>t!=null&&t.id?qo.getWallets(t.id):[],enabled:!!(t!=null&&t.id),staleTime:3e4,retry:2})}function aY(){const t=Ns(),{user:s}=wt();return Is({mutationFn:r=>{if(!(s!=null&&s.id))throw new Error("User not authenticated");return qo.createWallet(s.id,r)},onSuccess:()=>{t.invalidateQueries({queryKey:["wallets"]})}})}function nY(){const t=Ns();return Is({mutationFn:s=>qo.deposit(s),onSuccess:(s,r)=>{t.invalidateQueries({queryKey:["wallets"]}),t.invalidateQueries({queryKey:["wallets",r.walletId]}),t.invalidateQueries({queryKey:["transactions",r.walletId]})}})}function iY(){const t=Ns();return Is({mutationFn:s=>qo.transfer(s),onSuccess:(s,r)=>{t.invalidateQueries({queryKey:["wallets"]}),t.invalidateQueries({queryKey:["transactions"]}),t.invalidateQueries({queryKey:["wallets",r.fromWalletId]})}})}function lY(t,s=1,r=10){return _a({queryKey:["transactions",t,s,r],queryFn:()=>qo.getTransactions(t,{page:s,limit:r}),enabled:!!t,staleTime:1e4})}function oY(){const t=Ns();return Is({mutationFn:s=>qo.freezeWallet(s),onSuccess:(s,r)=>{t.invalidateQueries({queryKey:["wallets"]}),t.invalidateQueries({queryKey:["wallets",r]})}})}function cY(){const t=Ns();return Is({mutationFn:s=>qo.unfreezeWallet(s),onSuccess:(s,r)=>{t.invalidateQueries({queryKey:["wallets"]}),t.invalidateQueries({queryKey:["wallets",r]})}})}const dY=()=>{let s="4";for(let r=0;r<15;r++)s+=Math.floor(Math.random()*10).toString();return s},MR=t=>`****${t.slice(-4)}`,uY=()=>Math.floor(100+Math.random()*900).toString(),Id=t=>({id:t.id,name:t.name,description:t.description||"",cardImageUrl:t.card_image_url,price:parseFloat(t.price)||0,transactionFeePercentage:parseFloat(t.transaction_fee_percentage)||0,transactionFeeFixed:parseFloat(t.transaction_fee_fixed)||0,requiredKycLevel:t.required_kyc_level||1,cardType:t.card_type||"VIRTUAL",isActive:t.is_active??!0,dailyLimit:parseFloat(t.daily_limit)||1e3,monthlyLimit:parseFloat(t.monthly_limit)||1e4,colorGradient:t.color_gradient||"from-blue-600 to-blue-800",features:t.features||[],createdAt:t.created_at,updatedAt:t.updated_at,allowNegativeBalance:t.allow_negative_balance??!1,allowBuyNowPayLater:t.allow_buy_now_pay_later??!1,highTransactionLimit:t.high_transaction_limit??!1,noTransactionFees:t.no_transaction_fees??!1,cashbackEnabled:t.cashback_enabled??!1,cashbackPercentage:parseFloat(t.cashback_percentage)||0,overdraftLimit:parseFloat(t.overdraft_limit)||0,bnplMaxAmount:parseFloat(t.bnpl_max_amount)||0,bnplInterestRate:parseFloat(t.bnpl_interest_rate)||0}),Sm=t=>({id:t.id,userId:t.user_id,cardTypeId:t.card_type_id,walletId:t.wallet_id,amountPaid:parseFloat(t.amount_paid)||0,currency:t.currency||"SLE",status:t.status||"PENDING",transactionId:t.transaction_id,generatedCardId:t.generated_card_id,cardNumber:t.card_number,qrCodeData:t.qr_code_data,reviewedBy:t.reviewed_by,reviewedAt:t.reviewed_at,reviewNotes:t.review_notes,shippingAddress:t.shipping_address,trackingNumber:t.tracking_number,shippedAt:t.shipped_at,deliveredAt:t.delivered_at,activatedAt:t.activated_at,createdAt:t.created_at,updatedAt:t.updated_at,cardType:t.card_types?Id(t.card_types):void 0,user:t.users?{id:t.users.id,firstName:t.users.first_name,lastName:t.users.last_name,email:t.users.email,phone:t.users.phone,kycStatus:t.users.kyc_status,kycTier:t.users.kyc_tier}:void 0,wallet:t.wallets?{id:t.wallets.id,currency:t.wallets.currency,balance:parseFloat(t.wallets.balance)||0}:void 0}),xi=t=>({id:t.id,walletId:t.wallet_id,cardNumber:t.card_number||"",maskedNumber:t.masked_number||MR(t.card_number||"0000"),expiryMonth:t.expiry_month||12,expiryYear:t.expiry_year||new Date().getFullYear()+3,cardholderName:t.cardholder_name||"",status:t.status||"ACTIVE",type:t.type||"VIRTUAL",dailyLimit:parseFloat(t.daily_limit)||1e3,monthlyLimit:parseFloat(t.monthly_limit)||1e4,createdAt:t.created_at,updatedAt:t.updated_at}),Jr={async getCards(t){const{data:s,error:r}=await U.from("wallets").select("id").eq("user_id",t);if(r||!(s!=null&&s.length))return[];const a=s.map(l=>l.id),{data:n,error:i}=await U.from("cards").select("*").in("wallet_id",a).order("created_at",{ascending:!1});if(i)throw console.error("Error fetching cards:",i),new Error(i.message);return(n||[]).map(xi)},async getCardsByUserId(t){const{data:s,error:r}=await U.from("cards").select("*").eq("user_id",t).order("created_at",{ascending:!1});return r?this.getCards(t):(s||[]).map(xi)},async getCard(t){const{data:s,error:r}=await U.from("cards").select("*").eq("id",t).single();if(r)throw console.error("Error fetching card:",r),new Error(r.message);return xi(s)},async createCard(t,s){const r=dY(),a=new Date;a.setFullYear(a.getFullYear()+3);const{data:n,error:i}=await U.from("cards").insert({user_id:t,wallet_id:s.walletId,card_number:r,masked_number:MR(r),cvv:uY(),expiry_month:a.getMonth()+1,expiry_year:a.getFullYear(),cardholder_name:s.cardholderName,type:s.type,status:s.type==="VIRTUAL"?"ACTIVE":"INACTIVE",daily_limit:s.dailyLimit||1e3,monthly_limit:s.monthlyLimit||1e4}).select().single();if(i)throw console.error("Error creating card:",i),new Error(i.message);return xi(n)},async activateCard(t){const{data:s,error:r}=await U.from("cards").update({status:"ACTIVE",updated_at:new Date().toISOString()}).eq("id",t).select().single();if(r)throw console.error("Error activating card:",r),new Error(r.message);return xi(s)},async blockCard(t){const{data:s,error:r}=await U.from("cards").update({status:"BLOCKED",updated_at:new Date().toISOString()}).eq("id",t).select().single();if(r)throw console.error("Error blocking card:",r),new Error(r.message);return xi(s)},async unblockCard(t){const{data:s,error:r}=await U.from("cards").update({status:"ACTIVE",updated_at:new Date().toISOString()}).eq("id",t).select().single();if(r)throw console.error("Error unblocking card:",r),new Error(r.message);return xi(s)},async updateLimits(t,s){const r={updated_at:new Date().toISOString()};s.dailyLimit!==void 0&&(r.daily_limit=s.dailyLimit),s.monthlyLimit!==void 0&&(r.monthly_limit=s.monthlyLimit);const{data:a,error:n}=await U.from("cards").update(r).eq("id",t).select().single();if(n)throw console.error("Error updating card limits:",n),new Error(n.message);return xi(a)},async getCardDetails(t){const{data:s,error:r}=await U.from("cards").select("card_number, cvv, expiry_month, expiry_year").eq("id",t).single();if(r)throw console.error("Error fetching card details:",r),new Error(r.message);return{cardNumber:s.card_number,cvv:s.cvv,expiryMonth:s.expiry_month,expiryYear:s.expiry_year}},async getCardTypes(t=!1){let s=U.from("card_types").select("*").order("price",{ascending:!0});t||(s=s.eq("is_active",!0));const{data:r,error:a}=await s;if(a)throw console.error("Error fetching card types:",a),new Error(a.message);return(r||[]).map(Id)},async getCardType(t){const{data:s,error:r}=await U.from("card_types").select("*").eq("id",t).single();if(r)throw console.error("Error fetching card type:",r),new Error(r.message);return Id(s)},async createCardType(t){const s={name:t.name,description:t.description,card_image_url:t.cardImageUrl,price:t.price,transaction_fee_percentage:t.transactionFeePercentage||0,transaction_fee_fixed:t.transactionFeeFixed||0,required_kyc_level:t.requiredKycLevel||1,card_type:t.cardType,is_active:t.isActive??!0,daily_limit:t.dailyLimit||1e3,monthly_limit:t.monthlyLimit||1e4,color_gradient:t.colorGradient||"from-blue-600 to-blue-800",features:t.features||[],allow_negative_balance:t.allowNegativeBalance??!1,allow_buy_now_pay_later:t.allowBuyNowPayLater??!1,high_transaction_limit:t.highTransactionLimit??!1,no_transaction_fees:t.noTransactionFees??!1,cashback_enabled:t.cashbackEnabled??!1,cashback_percentage:t.cashbackPercentage||0,overdraft_limit:t.overdraftLimit||0,bnpl_max_amount:t.bnplMaxAmount||0,bnpl_interest_rate:t.bnplInterestRate||0};console.log("Creating card type with data:",s);const{data:r,error:a}=await U.from("card_types").insert(s).select().single();if(a)throw console.error("Error creating card type:",a),new Error(a.message);return Id(r)},async updateCardType(t,s){const r={updated_at:new Date().toISOString()};s.name!==void 0&&(r.name=s.name),s.description!==void 0&&(r.description=s.description),s.cardImageUrl!==void 0&&(r.card_image_url=s.cardImageUrl),s.price!==void 0&&(r.price=s.price),s.transactionFeePercentage!==void 0&&(r.transaction_fee_percentage=s.transactionFeePercentage),s.transactionFeeFixed!==void 0&&(r.transaction_fee_fixed=s.transactionFeeFixed),s.requiredKycLevel!==void 0&&(r.required_kyc_level=s.requiredKycLevel),s.cardType!==void 0&&(r.card_type=s.cardType),s.isActive!==void 0&&(r.is_active=s.isActive),s.dailyLimit!==void 0&&(r.daily_limit=s.dailyLimit),s.monthlyLimit!==void 0&&(r.monthly_limit=s.monthlyLimit),s.colorGradient!==void 0&&(r.color_gradient=s.colorGradient),s.features!==void 0&&(r.features=s.features),s.allowNegativeBalance!==void 0&&(r.allow_negative_balance=s.allowNegativeBalance),s.allowBuyNowPayLater!==void 0&&(r.allow_buy_now_pay_later=s.allowBuyNowPayLater),s.highTransactionLimit!==void 0&&(r.high_transaction_limit=s.highTransactionLimit),s.noTransactionFees!==void 0&&(r.no_transaction_fees=s.noTransactionFees),s.cashbackEnabled!==void 0&&(r.cashback_enabled=s.cashbackEnabled),s.cashbackPercentage!==void 0&&(r.cashback_percentage=s.cashbackPercentage),s.overdraftLimit!==void 0&&(r.overdraft_limit=s.overdraftLimit),s.bnplMaxAmount!==void 0&&(r.bnpl_max_amount=s.bnplMaxAmount),s.bnplInterestRate!==void 0&&(r.bnpl_interest_rate=s.bnplInterestRate);const{data:a,error:n}=await U.from("card_types").update(r).eq("id",t).select().single();if(n)throw console.error("Error updating card type:",n),new Error(n.message);return Id(a)},async deleteCardType(t){const{error:s}=await U.from("card_types").delete().eq("id",t);if(s)throw console.error("Error deleting card type:",s),new Error(s.message)},async getCardOrders(t){const{data:s,error:r}=await U.from("card_orders").select(`
        *,
        card_types (*),
        wallets (id, currency, balance)
      `).eq("user_id",t).order("created_at",{ascending:!1});if(r)throw console.error("Error fetching card orders:",r),new Error(r.message);return(s||[]).map(Sm)},async getAllCardOrders(t){console.log("Fetching all card orders, status filter:",t);let s=U.from("card_orders").select(`
        *,
        card_types (*)
      `).order("created_at",{ascending:!1});t&&(s=s.eq("status",t));const{data:r,error:a}=await s;if(console.log("Card orders query result:",{data:r,error:a,count:r==null?void 0:r.length}),a)throw console.error("Error fetching all card orders:",a),new Error(a.message);if(!r||r.length===0)return console.log("No card orders found"),[];const n=[...new Set(r.map(u=>u.user_id).filter(Boolean))],i=[...new Set(r.map(u=>u.wallet_id).filter(Boolean))],{data:l}=await U.from("users").select("id, first_name, last_name, email, phone, kyc_status, kyc_tier").in("id",n),{data:o}=await U.from("wallets").select("id, currency, balance").in("id",i),c=new Map((l||[]).map(u=>[u.id,u])),d=new Map((o||[]).map(u=>[u.id,u]));return r.map(u=>Sm({...u,users:c.get(u.user_id)||null,wallets:d.get(u.wallet_id)||null}))},async getCardOrder(t){console.log("Fetching card order:",t);const{data:s,error:r}=await U.from("card_orders").select("*").eq("id",t).maybeSingle();if(console.log("Card order fetch result:",{data:s,error:r}),r)throw console.error("Error fetching card order:",r),new Error(r.message);if(!s)return console.warn("Card order not found, returning minimal object"),{id:t,userId:"",cardTypeId:"",walletId:"",amountPaid:0,currency:"SLE",status:"PENDING",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};let a=null,n=null,i=null;if(s.card_type_id){const{data:l}=await U.from("card_types").select("*").eq("id",s.card_type_id).maybeSingle();a=l}if(s.user_id){const{data:l}=await U.from("users").select("id, first_name, last_name, email, phone, kyc_status, kyc_tier").eq("id",s.user_id).maybeSingle();n=l}if(s.wallet_id){const{data:l}=await U.from("wallets").select("id, currency, balance").eq("id",s.wallet_id).maybeSingle();i=l}return Sm({...s,card_types:a,users:n,wallets:i})},async createCardOrder(t,s){console.log("Creating card order:",{userId:t,data:s});const{data:r,error:a}=await U.rpc("create_card_order",{p_user_id:t,p_card_type_id:s.cardTypeId,p_wallet_id:s.walletId});if(console.log("RPC result:",{orderId:r,error:a}),a)throw console.error("Error creating card order:",a),new Error(a.message);if(!r)throw new Error("Failed to create order - no order ID returned");const n={};if(s.shippingAddress&&(n.shipping_address=s.shippingAddress),s.cardholderName&&(n.cardholder_name=s.cardholderName),s.cardPin&&(n.card_pin=s.cardPin),s.giftRecipientId&&(n.gift_recipient_id=s.giftRecipientId,n.is_gift=!0),Object.keys(n).length>0){const{error:i}=await U.from("card_orders").update(n).eq("id",r);i&&console.warn("Failed to update additional fields:",i)}return this.getCardOrder(r)},async generateCard(t,s,r){const{data:a,error:n}=await U.rpc("admin_generate_card",{p_order_id:t,p_admin_id:s,p_notes:r||null});if(n)throw console.error("Error generating card:",n),new Error(n.message);return a},async rejectCardOrder(t,s,r){var l;const a=await this.getCardOrder(t);await U.rpc("wallet_deposit",{p_wallet_id:a.walletId,p_amount:a.amountPaid,p_description:`Refund for rejected card order: ${((l=a.cardType)==null?void 0:l.name)||"Card"}`});const{data:n,error:i}=await U.from("card_orders").update({status:"REJECTED",reviewed_by:s,reviewed_at:new Date().toISOString(),review_notes:r,updated_at:new Date().toISOString()}).eq("id",t).select(`
        *,
        card_types (*),
        users:user_id (id, first_name, last_name, email, phone, kyc_status, kyc_tier),
        wallets (id, currency, balance)
      `).single();if(i)throw console.error("Error rejecting card order:",i),new Error(i.message);return Sm(n)},async updateShipping(t,s){const{data:r,error:a}=await U.from("card_orders").update({tracking_number:s,shipped_at:new Date().toISOString(),updated_at:new Date().toISOString()}).eq("id",t).select(`
        *,
        card_types (*),
        users:user_id (id, first_name, last_name, email, phone, kyc_status, kyc_tier),
        wallets (id, currency, balance)
      `).single();if(a)throw console.error("Error updating shipping:",a),new Error(a.message);return Sm(r)},async activateCardByQR(t,s){const{data:r,error:a}=await U.rpc("activate_card_by_qr",{p_qr_code:t,p_user_id:s});if(a)throw console.error("Error activating card by QR:",a),new Error(a.message);return r},async getCardByQR(t){const{data:s,error:r}=await U.from("cards").select("*").eq("qr_code",t).single();if(r){if(r.code==="PGRST116")return null;throw console.error("Error fetching card by QR:",r),new Error(r.message)}return xi(s)},async getCardWithType(t){const{data:s,error:r}=await U.from("cards").select(`
        *,
        card_types (*)
      `).eq("id",t).single();if(r)throw console.error("Error fetching card with type:",r),new Error(r.message);return{...xi(s),cardType:s.card_types?Id(s.card_types):void 0}}};function Kf(){const{user:t}=wt();return _a({queryKey:["cards",t==null?void 0:t.id],queryFn:async()=>t!=null&&t.id?Jr.getCards(t.id):[],enabled:!!(t!=null&&t.id),staleTime:3e4,retry:2})}function mY(){const t=Ns(),{user:s}=wt();return Is({mutationFn:r=>{if(!(s!=null&&s.id))throw new Error("User not authenticated");return Jr.createCard(s.id,r)},onSuccess:()=>{t.invalidateQueries({queryKey:["cards"]})}})}function LR(){const t=Ns();return Is({mutationFn:s=>Jr.activateCard(s),onSuccess:(s,r)=>{t.invalidateQueries({queryKey:["cards"]}),t.invalidateQueries({queryKey:["cards",r]})}})}function FR(){const t=Ns();return Is({mutationFn:s=>Jr.blockCard(s),onSuccess:(s,r)=>{t.invalidateQueries({queryKey:["cards"]}),t.invalidateQueries({queryKey:["cards",r]})}})}function OR(){const t=Ns();return Is({mutationFn:s=>Jr.unblockCard(s),onSuccess:(s,r)=>{t.invalidateQueries({queryKey:["cards"]}),t.invalidateQueries({queryKey:["cards",r]})}})}function x2(t=!1){return _a({queryKey:["cardTypes",{includeInactive:t}],queryFn:()=>Jr.getCardTypes(t),staleTime:6e4})}function BR(){const t=Ns();return Is({mutationFn:s=>Jr.createCardType(s),onSuccess:()=>{t.invalidateQueries({queryKey:["cardTypes"]})}})}function $R(){const t=Ns();return Is({mutationFn:({id:s,data:r})=>Jr.updateCardType(s,r),onSuccess:(s,{id:r})=>{t.invalidateQueries({queryKey:["cardTypes"]}),t.invalidateQueries({queryKey:["cardTypes",r]})}})}function UR(){const t=Ns();return Is({mutationFn:s=>Jr.deleteCardType(s),onSuccess:()=>{t.invalidateQueries({queryKey:["cardTypes"]})}})}function VR(){const{user:t}=wt();return _a({queryKey:["cardOrders",t==null?void 0:t.id],queryFn:async()=>t!=null&&t.id?Jr.getCardOrders(t.id):[],enabled:!!(t!=null&&t.id),staleTime:3e4})}function hY(t){return _a({queryKey:["cardOrders","all",t],queryFn:()=>Jr.getAllCardOrders(t),staleTime:3e4})}function pY(){const t=Ns(),{user:s}=wt();return Is({mutationFn:r=>{if(!(s!=null&&s.id))throw new Error("User not authenticated");return Jr.createCardOrder(s.id,r)},onSuccess:()=>{t.invalidateQueries({queryKey:["cardOrders"]}),t.invalidateQueries({queryKey:["wallets"]})}})}function xY(){const t=Ns(),{user:s}=wt();return Is({mutationFn:({orderId:r,notes:a})=>{if(!(s!=null&&s.id))throw new Error("User not authenticated");return Jr.generateCard(r,s.id,a)},onSuccess:(r,{orderId:a})=>{t.invalidateQueries({queryKey:["cardOrders"]}),t.invalidateQueries({queryKey:["cardOrders",a]}),t.invalidateQueries({queryKey:["cards"]})}})}function gY(){const t=Ns(),{user:s}=wt();return Is({mutationFn:({orderId:r,notes:a})=>{if(!(s!=null&&s.id))throw new Error("User not authenticated");return Jr.rejectCardOrder(r,s.id,a)},onSuccess:(r,{orderId:a})=>{t.invalidateQueries({queryKey:["cardOrders"]}),t.invalidateQueries({queryKey:["cardOrders",a]})}})}function fY(){const t=Ns();return Is({mutationFn:({orderId:s,trackingNumber:r})=>Jr.updateShipping(s,r),onSuccess:(s,{orderId:r})=>{t.invalidateQueries({queryKey:["cardOrders"]}),t.invalidateQueries({queryKey:["cardOrders",r]})}})}function yY(){const t=Ns(),{user:s}=wt();return Is({mutationFn:r=>{if(!(s!=null&&s.id))throw new Error("User not authenticated");return Jr.activateCardByQR(r,s.id)},onSuccess:()=>{t.invalidateQueries({queryKey:["cards"]}),t.invalidateQueries({queryKey:["cardOrders"]})}})}function bY(t){return _a({queryKey:["cards",t,"withType"],queryFn:()=>Jr.getCardWithType(t),enabled:!!t,staleTime:3e4})}function vY(t=10){const{user:s}=wt();return _a({queryKey:["transactions",s==null?void 0:s.id,t],queryFn:async()=>{if(!(s!=null&&s.id))return[];const{data:r,error:a}=await U.from("wallets").select("id").eq("user_id",s.id);if(a||!(r!=null&&r.length))return console.error("Error fetching wallets:",a),[];const n=r.map(o=>o.id),{data:i,error:l}=await U.from("transactions").select("*").in("wallet_id",n).order("created_at",{ascending:!1}).limit(t);return l?(console.error("Error fetching transactions:",l),[]):(i||[]).map(o=>{var c;return{id:o.id,walletId:o.wallet_id,type:((c=o.type)==null?void 0:c.toLowerCase())||"transfer",amount:o.amount,fee:o.fee||0,currency:o.currency||"USD",status:o.status||"COMPLETED",description:o.description||o.type,reference:o.reference||"",metadata:o.metadata||{},createdAt:o.created_at}})},enabled:!!(s!=null&&s.id),staleTime:1e4,refetchOnWindowFocus:!0})}const Ml={superadmin:100,admin:80,support:60,merchant:40,agent:40,user:10},jY={"users.read.own":"View own profile","users.write.own":"Update own profile","users.read.all":"View all users","users.write.all":"Update all users","users.delete":"Delete users","users.suspend":"Suspend/activate users","wallets.read.own":"View own wallets","wallets.write.own":"Manage own wallets","wallets.read.all":"View all wallets","wallets.write.all":"Manage all wallets","wallets.adjust":"Adjust balances","transactions.read.own":"View own transactions","transactions.create":"Create transactions","transactions.read.all":"View all transactions","transactions.reverse":"Reverse transactions","cards.read.own":"View own cards","cards.manage.own":"Manage own cards","cards.read.all":"View all cards","cards.issue":"Issue cards","cards.manage.all":"Manage all cards","kyc.submit":"Submit KYC","kyc.review":"Review KYC","fees.read":"View fees","fees.manage":"Manage fees","admin.dashboard":"Access admin dashboard","merchant.dashboard":"Access merchant dashboard","agent.dashboard":"Access agent dashboard","roles.read":"View roles","roles.manage":"Manage roles","roles.assign":"Assign roles"},wY={superadmin:Object.keys(jY),admin:["users.read.own","users.write.own","users.read.all","users.write.all","users.suspend","wallets.read.own","wallets.write.own","wallets.read.all","wallets.adjust","transactions.read.own","transactions.create","transactions.read.all","transactions.reverse","cards.read.own","cards.manage.own","cards.read.all","cards.issue","cards.manage.all","kyc.submit","kyc.review","fees.read","fees.manage","admin.dashboard","roles.read","roles.assign"],support:["users.read.own","users.write.own","users.read.all","wallets.read.own","wallets.read.all","transactions.read.own","transactions.read.all","cards.read.own","cards.read.all","kyc.review","admin.dashboard"],merchant:["users.read.own","users.write.own","wallets.read.own","wallets.write.own","transactions.read.own","transactions.create","cards.read.own","cards.manage.own","kyc.submit","merchant.dashboard"],agent:["users.read.own","users.write.own","wallets.read.own","wallets.write.own","transactions.read.own","transactions.create","kyc.submit","agent.dashboard"],user:["users.read.own","users.write.own","wallets.read.own","wallets.write.own","transactions.read.own","transactions.create","cards.read.own","cards.manage.own","kyc.submit"]};class NY{constructor(){xn(this,"userPermissions",new Set);xn(this,"userRoles",[]);xn(this,"userId",null)}async initialize(s,r){this.userId=s,this.userRoles=this.parseRoles(r),this.userPermissions=this.getPermissionsForRoles(this.userRoles)}parseRoles(s){return s?s.toLowerCase().split(",").map(a=>a.trim()).filter(a=>a in Ml):["user"]}getPermissionsForRoles(s){const r=new Set;for(const a of s)(wY[a]||[]).forEach(i=>r.add(i));return r}hasPermission(s){return this.userPermissions.has(s)}hasAnyPermission(s){return s.some(r=>this.userPermissions.has(r))}hasAllPermissions(s){return s.every(r=>this.userPermissions.has(r))}hasRole(s){return this.userRoles.includes(s)}hasAnyRole(s){return s.some(r=>this.userRoles.includes(r))}getRoleLevel(){return Math.max(...this.userRoles.map(s=>Ml[s]||0),0)}isAdmin(){return this.getRoleLevel()>=Ml.admin}isSuperAdmin(){return this.getRoleLevel()>=Ml.superadmin}getPermissions(){return Array.from(this.userPermissions)}getRoles(){return[...this.userRoles]}canAccess(s,r,a=!1){const n=`${s}.${r}.own`,i=`${s}.${r}.all`,l=`${s}.${r}`;return a&&this.hasPermission(n)?!0:this.hasPermission(i)||this.hasPermission(l)}canViewUserInSearch(s){const r=this.getRoleLevel(),a=Ml[s]||Ml.user;return r>=Ml.admin?!0:a<=Ml.user}async searchUsersSecure(s,r=10){if(!this.userId)throw new Error("RBAC not initialized");const{data:a,error:n}=await U.rpc("search_users_secure",{p_searcher_id:this.userId,p_query:s,p_limit:r});return n?(console.error("Secure search error:",n),[]):a||[]}clear(){this.userPermissions.clear(),this.userRoles=[],this.userId=null}}const kY=new NY;function Sl(t){return Array.isArray?Array.isArray(t):zR(t)==="[object Array]"}function CY(t){if(typeof t=="string")return t;let s=t+"";return s=="0"&&1/t==-1/0?"-0":s}function SY(t){return t==null?"":CY(t)}function Ti(t){return typeof t=="string"}function qR(t){return typeof t=="number"}function _Y(t){return t===!0||t===!1||EY(t)&&zR(t)=="[object Boolean]"}function WR(t){return typeof t=="object"}function EY(t){return WR(t)&&t!==null}function Ya(t){return t!=null}function rv(t){return!t.trim().length}function zR(t){return t==null?t===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(t)}const AY="Incorrect 'index' type",TY=t=>`Invalid value for key ${t}`,PY=t=>`Pattern length exceeds max of ${t}.`,RY=t=>`Missing ${t} property in key`,DY=t=>`Property 'weight' in key '${t}' must be a positive integer`,C5=Object.prototype.hasOwnProperty;class IY{constructor(s){this._keys=[],this._keyMap={};let r=0;s.forEach(a=>{let n=GR(a);this._keys.push(n),this._keyMap[n.id]=n,r+=n.weight}),this._keys.forEach(a=>{a.weight/=r})}get(s){return this._keyMap[s]}keys(){return this._keys}toJSON(){return JSON.stringify(this._keys)}}function GR(t){let s=null,r=null,a=null,n=1,i=null;if(Ti(t)||Sl(t))a=t,s=S5(t),r=Cw(t);else{if(!C5.call(t,"name"))throw new Error(RY("name"));const l=t.name;if(a=l,C5.call(t,"weight")&&(n=t.weight,n<=0))throw new Error(DY(l));s=S5(l),r=Cw(l),i=t.getFn}return{path:s,id:r,weight:n,src:a,getFn:i}}function S5(t){return Sl(t)?t:t.split(".")}function Cw(t){return Sl(t)?t.join("."):t}function MY(t,s){let r=[],a=!1;const n=(i,l,o)=>{if(Ya(i))if(!l[o])r.push(i);else{let c=l[o];const d=i[c];if(!Ya(d))return;if(o===l.length-1&&(Ti(d)||qR(d)||_Y(d)))r.push(SY(d));else if(Sl(d)){a=!0;for(let u=0,m=d.length;u<m;u+=1)n(d[u],l,o+1)}else l.length&&n(d,l,o+1)}};return n(t,Ti(s)?s.split("."):s,0),a?r:r[0]}const LY={includeMatches:!1,findAllMatches:!1,minMatchCharLength:1},FY={isCaseSensitive:!1,ignoreDiacritics:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:(t,s)=>t.score===s.score?t.idx<s.idx?-1:1:t.score<s.score?-1:1},OY={location:0,threshold:.6,distance:100},BY={useExtendedSearch:!1,getFn:MY,ignoreLocation:!1,ignoreFieldNorm:!1,fieldNormWeight:1};var xt={...FY,...LY,...OY,...BY};const $Y=/[^ ]+/g;function UY(t=1,s=3){const r=new Map,a=Math.pow(10,s);return{get(n){const i=n.match($Y).length;if(r.has(i))return r.get(i);const l=1/Math.pow(i,.5*t),o=parseFloat(Math.round(l*a)/a);return r.set(i,o),o},clear(){r.clear()}}}class g2{constructor({getFn:s=xt.getFn,fieldNormWeight:r=xt.fieldNormWeight}={}){this.norm=UY(r,3),this.getFn=s,this.isCreated=!1,this.setIndexRecords()}setSources(s=[]){this.docs=s}setIndexRecords(s=[]){this.records=s}setKeys(s=[]){this.keys=s,this._keysMap={},s.forEach((r,a)=>{this._keysMap[r.id]=a})}create(){this.isCreated||!this.docs.length||(this.isCreated=!0,Ti(this.docs[0])?this.docs.forEach((s,r)=>{this._addString(s,r)}):this.docs.forEach((s,r)=>{this._addObject(s,r)}),this.norm.clear())}add(s){const r=this.size();Ti(s)?this._addString(s,r):this._addObject(s,r)}removeAt(s){this.records.splice(s,1);for(let r=s,a=this.size();r<a;r+=1)this.records[r].i-=1}getValueForItemAtKeyId(s,r){return s[this._keysMap[r]]}size(){return this.records.length}_addString(s,r){if(!Ya(s)||rv(s))return;let a={v:s,i:r,n:this.norm.get(s)};this.records.push(a)}_addObject(s,r){let a={i:r,$:{}};this.keys.forEach((n,i)=>{let l=n.getFn?n.getFn(s):this.getFn(s,n.path);if(Ya(l)){if(Sl(l)){let o=[];const c=[{nestedArrIndex:-1,value:l}];for(;c.length;){const{nestedArrIndex:d,value:u}=c.pop();if(Ya(u))if(Ti(u)&&!rv(u)){let m={v:u,i:d,n:this.norm.get(u)};o.push(m)}else Sl(u)&&u.forEach((m,p)=>{c.push({nestedArrIndex:p,value:m})})}a.$[i]=o}else if(Ti(l)&&!rv(l)){let o={v:l,n:this.norm.get(l)};a.$[i]=o}}}),this.records.push(a)}toJSON(){return{keys:this.keys,records:this.records}}}function KR(t,s,{getFn:r=xt.getFn,fieldNormWeight:a=xt.fieldNormWeight}={}){const n=new g2({getFn:r,fieldNormWeight:a});return n.setKeys(t.map(GR)),n.setSources(s),n.create(),n}function VY(t,{getFn:s=xt.getFn,fieldNormWeight:r=xt.fieldNormWeight}={}){const{keys:a,records:n}=t,i=new g2({getFn:s,fieldNormWeight:r});return i.setKeys(a),i.setIndexRecords(n),i}function Op(t,{errors:s=0,currentLocation:r=0,expectedLocation:a=0,distance:n=xt.distance,ignoreLocation:i=xt.ignoreLocation}={}){const l=s/t.length;if(i)return l;const o=Math.abs(a-r);return n?l+o/n:o?1:l}function qY(t=[],s=xt.minMatchCharLength){let r=[],a=-1,n=-1,i=0;for(let l=t.length;i<l;i+=1){let o=t[i];o&&a===-1?a=i:!o&&a!==-1&&(n=i-1,n-a+1>=s&&r.push([a,n]),a=-1)}return t[i-1]&&i-a>=s&&r.push([a,i-1]),r}const xc=32;function WY(t,s,r,{location:a=xt.location,distance:n=xt.distance,threshold:i=xt.threshold,findAllMatches:l=xt.findAllMatches,minMatchCharLength:o=xt.minMatchCharLength,includeMatches:c=xt.includeMatches,ignoreLocation:d=xt.ignoreLocation}={}){if(s.length>xc)throw new Error(PY(xc));const u=s.length,m=t.length,p=Math.max(0,Math.min(a,m));let x=i,g=p;const f=o>1||c,b=f?Array(m):[];let j;for(;(j=t.indexOf(s,g))>-1;){let _=Op(s,{currentLocation:j,expectedLocation:p,distance:n,ignoreLocation:d});if(x=Math.min(_,x),g=j+u,f){let E=0;for(;E<u;)b[j+E]=1,E+=1}}g=-1;let v=[],w=1,y=u+m;const C=1<<u-1;for(let _=0;_<u;_+=1){let E=0,A=y;for(;E<A;)Op(s,{errors:_,currentLocation:p+A,expectedLocation:p,distance:n,ignoreLocation:d})<=x?E=A:y=A,A=Math.floor((y-E)/2+E);y=A;let R=Math.max(1,p-A+1),I=l?m:Math.min(p+A,m)+u,N=Array(I+2);N[I+1]=(1<<_)-1;for(let k=I;k>=R;k-=1){let D=k-1,$=r[t.charAt(D)];if(f&&(b[D]=+!!$),N[k]=(N[k+1]<<1|1)&$,_&&(N[k]|=(v[k+1]|v[k])<<1|1|v[k+1]),N[k]&C&&(w=Op(s,{errors:_,currentLocation:D,expectedLocation:p,distance:n,ignoreLocation:d}),w<=x)){if(x=w,g=D,g<=p)break;R=Math.max(1,2*p-g)}}if(Op(s,{errors:_+1,currentLocation:p,expectedLocation:p,distance:n,ignoreLocation:d})>x)break;v=N}const S={isMatch:g>=0,score:Math.max(.001,w)};if(f){const _=qY(b,o);_.length?c&&(S.indices=_):S.isMatch=!1}return S}function zY(t){let s={};for(let r=0,a=t.length;r<a;r+=1){const n=t.charAt(r);s[n]=(s[n]||0)|1<<a-r-1}return s}const Wg=String.prototype.normalize?t=>t.normalize("NFD").replace(/[\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u08D3-\u08E1\u08E3-\u0903\u093A-\u093C\u093E-\u094F\u0951-\u0957\u0962\u0963\u0981-\u0983\u09BC\u09BE-\u09C4\u09C7\u09C8\u09CB-\u09CD\u09D7\u09E2\u09E3\u09FE\u0A01-\u0A03\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81-\u0A83\u0ABC\u0ABE-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01-\u0B03\u0B3C\u0B3E-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B62\u0B63\u0B82\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD7\u0C00-\u0C04\u0C3E-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81-\u0C83\u0CBC\u0CBE-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0D00-\u0D03\u0D3B\u0D3C\u0D3E-\u0D44\u0D46-\u0D48\u0D4A-\u0D4D\u0D57\u0D62\u0D63\u0D82\u0D83\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DF2\u0DF3\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EB9\u0EBB\u0EBC\u0EC8-\u0ECD\u0F18\u0F19\u0F35\u0F37\u0F39\u0F3E\u0F3F\u0F71-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102B-\u103E\u1056-\u1059\u105E-\u1060\u1062-\u1064\u1067-\u106D\u1071-\u1074\u1082-\u108D\u108F\u109A-\u109D\u135D-\u135F\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17B4-\u17D3\u17DD\u180B-\u180D\u1885\u1886\u18A9\u1920-\u192B\u1930-\u193B\u1A17-\u1A1B\u1A55-\u1A5E\u1A60-\u1A7C\u1A7F\u1AB0-\u1ABE\u1B00-\u1B04\u1B34-\u1B44\u1B6B-\u1B73\u1B80-\u1B82\u1BA1-\u1BAD\u1BE6-\u1BF3\u1C24-\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE8\u1CED\u1CF2-\u1CF4\u1CF7-\u1CF9\u1DC0-\u1DF9\u1DFB-\u1DFF\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA823-\uA827\uA880\uA881\uA8B4-\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA953\uA980-\uA983\uA9B3-\uA9C0\uA9E5\uAA29-\uAA36\uAA43\uAA4C\uAA4D\uAA7B-\uAA7D\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEB-\uAAEF\uAAF5\uAAF6\uABE3-\uABEA\uABEC\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F]/g,""):t=>t;class HR{constructor(s,{location:r=xt.location,threshold:a=xt.threshold,distance:n=xt.distance,includeMatches:i=xt.includeMatches,findAllMatches:l=xt.findAllMatches,minMatchCharLength:o=xt.minMatchCharLength,isCaseSensitive:c=xt.isCaseSensitive,ignoreDiacritics:d=xt.ignoreDiacritics,ignoreLocation:u=xt.ignoreLocation}={}){if(this.options={location:r,threshold:a,distance:n,includeMatches:i,findAllMatches:l,minMatchCharLength:o,isCaseSensitive:c,ignoreDiacritics:d,ignoreLocation:u},s=c?s:s.toLowerCase(),s=d?Wg(s):s,this.pattern=s,this.chunks=[],!this.pattern.length)return;const m=(x,g)=>{this.chunks.push({pattern:x,alphabet:zY(x),startIndex:g})},p=this.pattern.length;if(p>xc){let x=0;const g=p%xc,f=p-g;for(;x<f;)m(this.pattern.substr(x,xc),x),x+=xc;if(g){const b=p-xc;m(this.pattern.substr(b),b)}}else m(this.pattern,0)}searchIn(s){const{isCaseSensitive:r,ignoreDiacritics:a,includeMatches:n}=this.options;if(s=r?s:s.toLowerCase(),s=a?Wg(s):s,this.pattern===s){let f={isMatch:!0,score:0};return n&&(f.indices=[[0,s.length-1]]),f}const{location:i,distance:l,threshold:o,findAllMatches:c,minMatchCharLength:d,ignoreLocation:u}=this.options;let m=[],p=0,x=!1;this.chunks.forEach(({pattern:f,alphabet:b,startIndex:j})=>{const{isMatch:v,score:w,indices:y}=WY(s,f,b,{location:i+j,distance:l,threshold:o,findAllMatches:c,minMatchCharLength:d,includeMatches:n,ignoreLocation:u});v&&(x=!0),p+=w,v&&y&&(m=[...m,...y])});let g={isMatch:x,score:x?p/this.chunks.length:1};return x&&n&&(g.indices=m),g}}class Wo{constructor(s){this.pattern=s}static isMultiMatch(s){return _5(s,this.multiRegex)}static isSingleMatch(s){return _5(s,this.singleRegex)}search(){}}function _5(t,s){const r=t.match(s);return r?r[1]:null}class GY extends Wo{constructor(s){super(s)}static get type(){return"exact"}static get multiRegex(){return/^="(.*)"$/}static get singleRegex(){return/^=(.*)$/}search(s){const r=s===this.pattern;return{isMatch:r,score:r?0:1,indices:[0,this.pattern.length-1]}}}class KY extends Wo{constructor(s){super(s)}static get type(){return"inverse-exact"}static get multiRegex(){return/^!"(.*)"$/}static get singleRegex(){return/^!(.*)$/}search(s){const a=s.indexOf(this.pattern)===-1;return{isMatch:a,score:a?0:1,indices:[0,s.length-1]}}}class HY extends Wo{constructor(s){super(s)}static get type(){return"prefix-exact"}static get multiRegex(){return/^\^"(.*)"$/}static get singleRegex(){return/^\^(.*)$/}search(s){const r=s.startsWith(this.pattern);return{isMatch:r,score:r?0:1,indices:[0,this.pattern.length-1]}}}class YY extends Wo{constructor(s){super(s)}static get type(){return"inverse-prefix-exact"}static get multiRegex(){return/^!\^"(.*)"$/}static get singleRegex(){return/^!\^(.*)$/}search(s){const r=!s.startsWith(this.pattern);return{isMatch:r,score:r?0:1,indices:[0,s.length-1]}}}class QY extends Wo{constructor(s){super(s)}static get type(){return"suffix-exact"}static get multiRegex(){return/^"(.*)"\$$/}static get singleRegex(){return/^(.*)\$$/}search(s){const r=s.endsWith(this.pattern);return{isMatch:r,score:r?0:1,indices:[s.length-this.pattern.length,s.length-1]}}}class JY extends Wo{constructor(s){super(s)}static get type(){return"inverse-suffix-exact"}static get multiRegex(){return/^!"(.*)"\$$/}static get singleRegex(){return/^!(.*)\$$/}search(s){const r=!s.endsWith(this.pattern);return{isMatch:r,score:r?0:1,indices:[0,s.length-1]}}}class YR extends Wo{constructor(s,{location:r=xt.location,threshold:a=xt.threshold,distance:n=xt.distance,includeMatches:i=xt.includeMatches,findAllMatches:l=xt.findAllMatches,minMatchCharLength:o=xt.minMatchCharLength,isCaseSensitive:c=xt.isCaseSensitive,ignoreDiacritics:d=xt.ignoreDiacritics,ignoreLocation:u=xt.ignoreLocation}={}){super(s),this._bitapSearch=new HR(s,{location:r,threshold:a,distance:n,includeMatches:i,findAllMatches:l,minMatchCharLength:o,isCaseSensitive:c,ignoreDiacritics:d,ignoreLocation:u})}static get type(){return"fuzzy"}static get multiRegex(){return/^"(.*)"$/}static get singleRegex(){return/^(.*)$/}search(s){return this._bitapSearch.searchIn(s)}}class QR extends Wo{constructor(s){super(s)}static get type(){return"include"}static get multiRegex(){return/^'"(.*)"$/}static get singleRegex(){return/^'(.*)$/}search(s){let r=0,a;const n=[],i=this.pattern.length;for(;(a=s.indexOf(this.pattern,r))>-1;)r=a+i,n.push([a,r-1]);const l=!!n.length;return{isMatch:l,score:l?0:1,indices:n}}}const Sw=[GY,QR,HY,YY,JY,QY,KY,YR],E5=Sw.length,ZY=/ +(?=(?:[^\"]*\"[^\"]*\")*[^\"]*$)/,XY="|";function eQ(t,s={}){return t.split(XY).map(r=>{let a=r.trim().split(ZY).filter(i=>i&&!!i.trim()),n=[];for(let i=0,l=a.length;i<l;i+=1){const o=a[i];let c=!1,d=-1;for(;!c&&++d<E5;){const u=Sw[d];let m=u.isMultiMatch(o);m&&(n.push(new u(m,s)),c=!0)}if(!c)for(d=-1;++d<E5;){const u=Sw[d];let m=u.isSingleMatch(o);if(m){n.push(new u(m,s));break}}}return n})}const tQ=new Set([YR.type,QR.type]);class sQ{constructor(s,{isCaseSensitive:r=xt.isCaseSensitive,ignoreDiacritics:a=xt.ignoreDiacritics,includeMatches:n=xt.includeMatches,minMatchCharLength:i=xt.minMatchCharLength,ignoreLocation:l=xt.ignoreLocation,findAllMatches:o=xt.findAllMatches,location:c=xt.location,threshold:d=xt.threshold,distance:u=xt.distance}={}){this.query=null,this.options={isCaseSensitive:r,ignoreDiacritics:a,includeMatches:n,minMatchCharLength:i,findAllMatches:o,ignoreLocation:l,location:c,threshold:d,distance:u},s=r?s:s.toLowerCase(),s=a?Wg(s):s,this.pattern=s,this.query=eQ(this.pattern,this.options)}static condition(s,r){return r.useExtendedSearch}searchIn(s){const r=this.query;if(!r)return{isMatch:!1,score:1};const{includeMatches:a,isCaseSensitive:n,ignoreDiacritics:i}=this.options;s=n?s:s.toLowerCase(),s=i?Wg(s):s;let l=0,o=[],c=0;for(let d=0,u=r.length;d<u;d+=1){const m=r[d];o.length=0,l=0;for(let p=0,x=m.length;p<x;p+=1){const g=m[p],{isMatch:f,indices:b,score:j}=g.search(s);if(f){if(l+=1,c+=j,a){const v=g.constructor.type;tQ.has(v)?o=[...o,...b]:o.push(b)}}else{c=0,l=0,o.length=0;break}}if(l){let p={isMatch:!0,score:c/l};return a&&(p.indices=o),p}}return{isMatch:!1,score:1}}}const _w=[];function rQ(...t){_w.push(...t)}function Ew(t,s){for(let r=0,a=_w.length;r<a;r+=1){let n=_w[r];if(n.condition(t,s))return new n(t,s)}return new HR(t,s)}const zg={AND:"$and",OR:"$or"},Aw={PATH:"$path",PATTERN:"$val"},Tw=t=>!!(t[zg.AND]||t[zg.OR]),aQ=t=>!!t[Aw.PATH],nQ=t=>!Sl(t)&&WR(t)&&!Tw(t),A5=t=>({[zg.AND]:Object.keys(t).map(s=>({[s]:t[s]}))});function JR(t,s,{auto:r=!0}={}){const a=n=>{let i=Object.keys(n);const l=aQ(n);if(!l&&i.length>1&&!Tw(n))return a(A5(n));if(nQ(n)){const c=l?n[Aw.PATH]:i[0],d=l?n[Aw.PATTERN]:n[c];if(!Ti(d))throw new Error(TY(c));const u={keyId:Cw(c),pattern:d};return r&&(u.searcher=Ew(d,s)),u}let o={children:[],operator:i[0]};return i.forEach(c=>{const d=n[c];Sl(d)&&d.forEach(u=>{o.children.push(a(u))})}),o};return Tw(t)||(t=A5(t)),a(t)}function iQ(t,{ignoreFieldNorm:s=xt.ignoreFieldNorm}){t.forEach(r=>{let a=1;r.matches.forEach(({key:n,norm:i,score:l})=>{const o=n?n.weight:null;a*=Math.pow(l===0&&o?Number.EPSILON:l,(o||1)*(s?1:i))}),r.score=a})}function lQ(t,s){const r=t.matches;s.matches=[],Ya(r)&&r.forEach(a=>{if(!Ya(a.indices)||!a.indices.length)return;const{indices:n,value:i}=a;let l={indices:n,value:i};a.key&&(l.key=a.key.src),a.idx>-1&&(l.refIndex=a.idx),s.matches.push(l)})}function oQ(t,s){s.score=t.score}function cQ(t,s,{includeMatches:r=xt.includeMatches,includeScore:a=xt.includeScore}={}){const n=[];return r&&n.push(lQ),a&&n.push(oQ),t.map(i=>{const{idx:l}=i,o={item:s[l],refIndex:l};return n.length&&n.forEach(c=>{c(i,o)}),o})}class im{constructor(s,r={},a){this.options={...xt,...r},this.options.useExtendedSearch,this._keyStore=new IY(this.options.keys),this.setCollection(s,a)}setCollection(s,r){if(this._docs=s,r&&!(r instanceof g2))throw new Error(AY);this._myIndex=r||KR(this.options.keys,this._docs,{getFn:this.options.getFn,fieldNormWeight:this.options.fieldNormWeight})}add(s){Ya(s)&&(this._docs.push(s),this._myIndex.add(s))}remove(s=()=>!1){const r=[];for(let a=0,n=this._docs.length;a<n;a+=1){const i=this._docs[a];s(i,a)&&(this.removeAt(a),a-=1,n-=1,r.push(i))}return r}removeAt(s){this._docs.splice(s,1),this._myIndex.removeAt(s)}getIndex(){return this._myIndex}search(s,{limit:r=-1}={}){const{includeMatches:a,includeScore:n,shouldSort:i,sortFn:l,ignoreFieldNorm:o}=this.options;let c=Ti(s)?Ti(this._docs[0])?this._searchStringList(s):this._searchObjectList(s):this._searchLogical(s);return iQ(c,{ignoreFieldNorm:o}),i&&c.sort(l),qR(r)&&r>-1&&(c=c.slice(0,r)),cQ(c,this._docs,{includeMatches:a,includeScore:n})}_searchStringList(s){const r=Ew(s,this.options),{records:a}=this._myIndex,n=[];return a.forEach(({v:i,i:l,n:o})=>{if(!Ya(i))return;const{isMatch:c,score:d,indices:u}=r.searchIn(i);c&&n.push({item:i,idx:l,matches:[{score:d,value:i,norm:o,indices:u}]})}),n}_searchLogical(s){const r=JR(s,this.options),a=(o,c,d)=>{if(!o.children){const{keyId:m,searcher:p}=o,x=this._findMatches({key:this._keyStore.get(m),value:this._myIndex.getValueForItemAtKeyId(c,m),searcher:p});return x&&x.length?[{idx:d,item:c,matches:x}]:[]}const u=[];for(let m=0,p=o.children.length;m<p;m+=1){const x=o.children[m],g=a(x,c,d);if(g.length)u.push(...g);else if(o.operator===zg.AND)return[]}return u},n=this._myIndex.records,i={},l=[];return n.forEach(({$:o,i:c})=>{if(Ya(o)){let d=a(r,o,c);d.length&&(i[c]||(i[c]={idx:c,item:o,matches:[]},l.push(i[c])),d.forEach(({matches:u})=>{i[c].matches.push(...u)}))}}),l}_searchObjectList(s){const r=Ew(s,this.options),{keys:a,records:n}=this._myIndex,i=[];return n.forEach(({$:l,i:o})=>{if(!Ya(l))return;let c=[];a.forEach((d,u)=>{c.push(...this._findMatches({key:d,value:l[u],searcher:r}))}),c.length&&i.push({idx:o,item:l,matches:c})}),i}_findMatches({key:s,value:r,searcher:a}){if(!Ya(r))return[];let n=[];if(Sl(r))r.forEach(({v:i,i:l,n:o})=>{if(!Ya(i))return;const{isMatch:c,score:d,indices:u}=a.searchIn(i);c&&n.push({score:d,key:s,value:i,idx:l,norm:o,indices:u})});else{const{v:i,n:l}=r,{isMatch:o,score:c,indices:d}=a.searchIn(i);o&&n.push({score:c,key:s,value:i,norm:l,indices:d})}return n}}im.version="7.1.0";im.createIndex=KR;im.parseIndex=VY;im.config=xt;im.parseQuery=JR;rQ(sQ);const dQ={keys:[{name:"first_name",weight:.3},{name:"last_name",weight:.3},{name:"phone",weight:.2},{name:"email",weight:.15},{name:"username",weight:.05}],threshold:.4,distance:100,minMatchCharLength:2,includeScore:!0,shouldSort:!0};function f2({onSelect:t,placeholder:s="Search by @username, phone, or name...",className:r,excludeUserId:a,autoFocus:n=!1}){const{user:i}=wt(),[l,o]=h.useState(""),[c,d]=h.useState([]),[u,m]=h.useState([]),[p,x]=h.useState(!1),[g,f]=h.useState(!0),[b,j]=h.useState(!1),[v,w]=h.useState(-1),y=h.useRef(null),C=h.useRef(null),S=h.useRef(null);h.useEffect(()=>{i!=null&&i.id&&(i!=null&&i.roles)&&kY.initialize(i.id,i.roles.join(","))},[i==null?void 0:i.id,i==null?void 0:i.roles]),h.useEffect(()=>{(async()=>{f(!0);try{const{data:k,error:D}=await U.from("users").select("id, first_name, last_name, phone, email, roles, status").eq("status","ACTIVE").limit(500);if(D)console.error("Error loading users:",D),d([]);else{const $=(k||[]).map(B=>({id:B.id,first_name:B.first_name||"",last_name:B.last_name||"",username:null,phone:B.phone||null,email:B.email||null,profile_picture:null})),L=a?$.filter(B=>B.id!==a):$;d(L)}}catch(k){console.error("Error in loadUsers:",k),d([])}finally{f(!1)}})()},[a]);const _=h.useMemo(()=>new im(c,dQ),[c]),E=h.useCallback(P=>{if(P.length<2){m([]),j(!1);return}x(!0);const k=P.startsWith("@")?P.substring(1):P,$=_.search(k).slice(0,20).map(L=>L.item);m($),j($.length>0),x(!1)},[_,c.length]),A=P=>{const k=P.target.value;o(k),w(-1),S.current&&clearTimeout(S.current),S.current=setTimeout(()=>{E(k)},150)},R=P=>{if(b)switch(P.key){case"ArrowDown":P.preventDefault(),w(k=>k<u.length-1?k+1:k);break;case"ArrowUp":P.preventDefault(),w(k=>k>0?k-1:k);break;case"Enter":P.preventDefault(),v>=0&&u[v]&&I(u[v]);break;case"Escape":j(!1),w(-1);break}},I=P=>{t(P),o(""),m([]),j(!1),w(-1)},N=()=>{var P;o(""),m([]),j(!1),(P=y.current)==null||P.focus()};return h.useEffect(()=>{const P=k=>{var D;C.current&&!C.current.contains(k.target)&&!((D=y.current)!=null&&D.contains(k.target))&&j(!1)};return document.addEventListener("mousedown",P),()=>document.removeEventListener("mousedown",P)},[]),h.useEffect(()=>()=>{S.current&&clearTimeout(S.current)},[]),e.jsxs("div",{className:oe("relative",r),children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",children:p||g?e.jsx(Ie,{className:"w-5 h-5 animate-spin"}):e.jsx(ts,{className:"w-5 h-5"})}),e.jsx("input",{ref:y,type:"text",value:l,onChange:A,onKeyDown:R,onFocus:()=>l.length>=2&&j(u.length>0),placeholder:g?"Loading users...":s,autoFocus:n,disabled:g,className:"w-full pl-10 pr-10 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-primary-500 focus:border-primary-500 text-gray-900 disabled:bg-gray-100"}),l&&e.jsx("button",{onClick:N,className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600",children:e.jsx(lt,{className:"w-5 h-5"})})]}),b&&e.jsx("div",{ref:C,className:"absolute z-50 w-full mt-2 bg-white border border-gray-200 rounded-xl shadow-lg max-h-80 overflow-y-auto",children:u.length===0?e.jsx("div",{className:"p-4 text-center text-gray-500",children:"No users found"}):e.jsx("ul",{className:"py-2",children:u.map((P,k)=>{var D,$;return e.jsx("li",{children:e.jsxs("button",{onClick:()=>I(P),className:oe("w-full px-4 py-3 flex items-center gap-3 text-left transition-colors",v===k?"bg-primary-50":"hover:bg-gray-50"),children:[P.profile_picture?e.jsx("img",{src:P.profile_picture,alt:`${P.first_name} ${P.last_name}`,className:"w-10 h-10 rounded-full object-cover flex-shrink-0 border-2 border-gray-100"}):e.jsx("div",{className:"w-10 h-10 bg-primary-100 rounded-full flex items-center justify-center flex-shrink-0",children:e.jsxs("span",{className:"text-primary-700 font-medium text-sm",children:[(D=P.first_name)==null?void 0:D.charAt(0),($=P.last_name)==null?void 0:$.charAt(0)]})}),e.jsx("div",{className:"flex-1 min-w-0",children:P.username?e.jsxs(e.Fragment,{children:[e.jsxs("p",{className:"font-medium text-gray-900 truncate flex items-center gap-1",children:[e.jsx(Cg,{className:"w-4 h-4 text-primary-500"}),P.username]}),e.jsxs("p",{className:"text-sm text-gray-500 truncate",children:[P.first_name," ",P.last_name]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("p",{className:"font-medium text-gray-900 truncate",children:[P.first_name," ",P.last_name]}),P.phone&&e.jsxs("p",{className:"text-sm text-gray-500 flex items-center gap-1",children:[e.jsx(lr,{className:"w-3 h-3"}),P.phone]})]})})]})},P.id)})})}),!b&&l.length>0&&l.length<2&&e.jsx("p",{className:"absolute mt-1 text-xs text-gray-500",children:"Type at least 2 characters to search"})]})}let rl=null,r0=null,a0=0;const ZR=5*60*1e3;async function Hf(){return rl&&Date.now()-a0<ZR||(rl=sD(),a0=Date.now(),r0=rl.find(t=>t.isDefault)||rl[0]),rl}async function XR(){if(r0&&Date.now()-a0<ZR)return r0;const t=await Hf();return t.find(s=>s.isDefault)||t[0]||sD()[0]}async function eD(t){return(await Hf()).find(r=>r.code===t)||null}async function tD(t){const s=await eD(t);return(s==null?void 0:s.symbol)||t}async function uQ(t,s){const r=s||(await XR()).code;return`${await tD(r)}${t.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}`}function mQ(t,s,r){const a=r.find(i=>i.code===s);return`${(a==null?void 0:a.symbol)||s}${t.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}`}async function hQ(t){try{const s=await Hf();return s.find(a=>a.code===t)?(rl=s.map(a=>({...a,isDefault:a.code===t})),r0=rl.find(a=>a.isDefault)||null,a0=Date.now(),!0):(console.error("Currency not found:",t),!1)}catch(s){return console.error("Error setting default currency:",s),!1}}function pQ(){rl=null,r0=null,a0=0}function sD(){return[{code:"SLE",name:"Sierra Leone Leone",symbol:"Le",isDefault:!0,isActive:!0},{code:"USD",name:"US Dollar",symbol:"$",isDefault:!1,isActive:!0}]}const Ut={getCurrencies:Hf,getDefaultCurrency:XR,getCurrencyByCode:eD,getCurrencySymbol:tD,formatCurrency:uQ,formatCurrencySync:mQ,setDefaultCurrency:hQ,clearCurrencyCache:pQ},T5={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}},jd={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.4,ease:"easeOut"}}};function xQ(){const t=At(),{user:s}=wt(),{data:r,isLoading:a,error:n}=qi(),{data:i,isLoading:l,error:o}=Kf(),{data:c,isLoading:d,error:u}=vY(),[m,p]=h.useState([]),[x,g]=h.useState(null);h.useEffect(()=>{(async()=>{const[C,S]=await Promise.all([Ut.getCurrencies(),Ut.getDefaultCurrency()]);p(C),g(S)})()},[]);const f=y=>(x==null?void 0:x.symbol)||"",b=(y,C)=>`${f()}${y.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}`,j=(r==null?void 0:r.reduce((y,C)=>y+(C.balance||0),0))||0,v=(i==null?void 0:i.filter(y=>y.status==="ACTIVE").length)||0,w=y=>{sessionStorage.setItem("sendMoneyRecipient",JSON.stringify(y)),t("/send")};return e.jsx(ka,{children:e.jsxs("div",{className:"space-y-8",children:[e.jsxs(Oe.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.5},children:[e.jsxs("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:["Welcome back, ",s==null?void 0:s.firstName,"!"]}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 mt-1",children:"Here's what's happening with your account."})]}),e.jsxs(Oe.div,{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",variants:T5,initial:"hidden",animate:"visible",children:[e.jsx(Oe.div,{variants:jd,children:e.jsxs(we,{glowEffect:!0,delay:0,children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Total Balance"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white mt-1",children:a?"...":b(j)})]}),e.jsx("div",{className:"w-12 h-12 bg-primary-100 dark:bg-primary-900/30 rounded-full flex items-center justify-center",children:e.jsx(jt,{className:"w-6 h-6 text-primary-600 dark:text-primary-400"})})]}),e.jsxs("div",{className:"mt-4 flex items-center text-sm text-green-600 dark:text-green-400",children:[e.jsx(rr,{className:"w-4 h-4 mr-1"}),e.jsx("span",{children:"+12.5% from last month"})]})]})}),e.jsx(Oe.div,{variants:jd,children:e.jsxs(we,{glowEffect:!0,delay:.1,children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Active Wallets"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white mt-1",children:a?"...":(r==null?void 0:r.length)||0})]}),e.jsx("div",{className:"w-12 h-12 bg-green-100 dark:bg-green-900/30 rounded-full flex items-center justify-center",children:e.jsx(jt,{className:"w-6 h-6 text-green-600 dark:text-green-400"})})]}),e.jsx(Qe,{to:"/wallets",className:"mt-4 text-sm text-primary-600 dark:text-primary-400 hover:text-primary-700 dark:hover:text-primary-300 block",children:"View all wallets "})]})}),e.jsx(Oe.div,{variants:jd,children:e.jsxs(we,{glowEffect:!0,delay:.2,children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Active Cards"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white mt-1",children:l?"...":v})]}),e.jsx("div",{className:"w-12 h-12 bg-blue-100 dark:bg-blue-900/30 rounded-full flex items-center justify-center",children:e.jsx(Je,{className:"w-6 h-6 text-blue-600 dark:text-blue-400"})})]}),e.jsx(Qe,{to:"/cards",className:"mt-4 text-sm text-primary-600 dark:text-primary-400 hover:text-primary-700 dark:hover:text-primary-300 block",children:"Manage cards "})]})}),e.jsx(Oe.div,{variants:jd,children:e.jsxs(we,{glowEffect:!0,delay:.3,children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"KYC Status"}),e.jsx("p",{className:oe("text-lg font-bold mt-1",(s==null?void 0:s.kycStatus)==="VERIFIED"&&"text-green-600 dark:text-green-400",(s==null?void 0:s.kycStatus)==="PENDING"&&"text-yellow-600 dark:text-yellow-400",(s==null?void 0:s.kycStatus)==="REJECTED"&&"text-red-600 dark:text-red-400",(s==null?void 0:s.kycStatus)==="SUBMITTED"&&"text-blue-600 dark:text-blue-400"),children:s==null?void 0:s.kycStatus})]}),e.jsx("div",{className:oe("w-12 h-12 rounded-full flex items-center justify-center",(s==null?void 0:s.kycStatus)==="VERIFIED"&&"bg-green-100 dark:bg-green-900/30",(s==null?void 0:s.kycStatus)==="PENDING"&&"bg-yellow-100 dark:bg-yellow-900/30",(s==null?void 0:s.kycStatus)==="REJECTED"&&"bg-red-100 dark:bg-red-900/30",(s==null?void 0:s.kycStatus)==="SUBMITTED"&&"bg-blue-100 dark:bg-blue-900/30"),children:e.jsx(rr,{className:oe("w-6 h-6",(s==null?void 0:s.kycStatus)==="VERIFIED"&&"text-green-600 dark:text-green-400",(s==null?void 0:s.kycStatus)==="PENDING"&&"text-yellow-600 dark:text-yellow-400",(s==null?void 0:s.kycStatus)==="REJECTED"&&"text-red-600 dark:text-red-400",(s==null?void 0:s.kycStatus)==="SUBMITTED"&&"text-blue-600 dark:text-blue-400")})})]}),(s==null?void 0:s.kycStatus)!=="VERIFIED"&&e.jsx(Qe,{to:"/profile",className:"mt-4 text-sm text-primary-600 dark:text-primary-400 hover:text-primary-700 dark:hover:text-primary-300 block",children:"Complete verification "})]})})]}),e.jsxs(we,{className:"p-6",delay:.4,glowEffect:!0,children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"w-10 h-10 bg-primary-100 dark:bg-primary-900/30 rounded-full flex items-center justify-center",children:e.jsx(Ba,{className:"w-5 h-5 text-primary-600 dark:text-primary-400"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"font-semibold text-gray-900 dark:text-white",children:"Send Money"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Search for a user to send money instantly"})]})]}),e.jsx(f2,{placeholder:"Search by @username, phone, or name...",excludeUserId:s==null?void 0:s.id,onSelect:w}),e.jsxs("div",{className:"mt-3 flex items-center gap-4 text-xs text-gray-500 dark:text-gray-400",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(ia,{className:"w-3 h-3"}),"Search by name"]}),e.jsx("span",{children:""}),e.jsx("span",{children:"@username"}),e.jsx("span",{children:""}),e.jsx("span",{children:"Phone number"})]})]}),e.jsxs(Oe.div,{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",variants:T5,initial:"hidden",animate:"visible",children:[e.jsx(Oe.div,{variants:jd,children:e.jsxs(we,{delay:.5,children:[e.jsxs(Sr,{children:[e.jsx(_r,{children:"Recent Transactions"}),e.jsx(Nc,{children:"Your latest financial activity"})]}),e.jsx("div",{className:"space-y-4",children:d?e.jsx("div",{className:"py-8 text-center text-gray-500 dark:text-gray-400",children:"Loading transactions..."}):c&&c.length>0?c.slice(0,5).map((y,C)=>{const S=y.amount>0||["deposit","receive","refund"].includes(y.type.toLowerCase());return e.jsxs(Oe.div,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},transition:{delay:.6+C*.1},className:oe("flex items-center justify-between py-3",C<c.slice(0,5).length-1&&"border-b border-gray-100 dark:border-gray-700"),children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:oe("w-10 h-10 rounded-full flex items-center justify-center",S?"bg-green-100 dark:bg-green-900/30":"bg-red-100 dark:bg-red-900/30"),children:S?e.jsx(Za,{className:"w-5 h-5 text-green-600 dark:text-green-400"}):e.jsx(xs,{className:"w-5 h-5 text-red-600 dark:text-red-400"})}),e.jsxs("div",{className:"ml-3",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:y.description||y.type}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:new Date(y.createdAt).toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})})]})]}),e.jsxs("p",{className:oe("text-sm font-semibold",S?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"),children:[S?"+":"",b(Math.abs(y.amount))]})]},y.id)}):e.jsxs("div",{className:"py-8 text-center text-gray-500 dark:text-gray-400",children:[e.jsx("p",{children:"No transactions yet"}),e.jsx("p",{className:"text-xs mt-1",children:"Send money to see your activity here"})]})}),e.jsx(Qe,{to:"/transactions",className:"block mt-4 text-center text-sm text-primary-600 dark:text-primary-400 hover:text-primary-700 dark:hover:text-primary-300",children:"View all transactions"})]})}),e.jsx(Oe.div,{variants:jd,children:e.jsxs(we,{delay:.6,children:[e.jsxs(Sr,{children:[e.jsx(_r,{children:"Quick Actions"}),e.jsx(Nc,{children:"Common tasks you can perform"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs(Qe,{to:"/wallets?action=deposit",className:"flex flex-col items-center p-4 bg-gray-50 dark:bg-gray-700/50 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",children:[e.jsx("div",{className:"w-12 h-12 bg-green-100 dark:bg-green-900/30 rounded-full flex items-center justify-center mb-2",children:e.jsx(Za,{className:"w-6 h-6 text-green-600 dark:text-green-400"})}),e.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:"Deposit"})]}),e.jsxs(Qe,{to:"/wallets?action=transfer",className:"flex flex-col items-center p-4 bg-gray-50 dark:bg-gray-700/50 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",children:[e.jsx("div",{className:"w-12 h-12 bg-blue-100 dark:bg-blue-900/30 rounded-full flex items-center justify-center mb-2",children:e.jsx(xs,{className:"w-6 h-6 text-blue-600 dark:text-blue-400"})}),e.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:"Transfer"})]}),e.jsxs(Qe,{to:"/cards?action=new",className:"flex flex-col items-center p-4 bg-gray-50 dark:bg-gray-700/50 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",children:[e.jsx("div",{className:"w-12 h-12 bg-purple-100 dark:bg-purple-900/30 rounded-full flex items-center justify-center mb-2",children:e.jsx(Je,{className:"w-6 h-6 text-purple-600 dark:text-purple-400"})}),e.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:"New Card"})]}),e.jsxs(Qe,{to:"/wallets?action=new",className:"flex flex-col items-center p-4 bg-gray-50 dark:bg-gray-700/50 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",children:[e.jsx("div",{className:"w-12 h-12 bg-orange-100 dark:bg-orange-900/30 rounded-full flex items-center justify-center mb-2",children:e.jsx(jt,{className:"w-6 h-6 text-orange-600 dark:text-orange-400"})}),e.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:"New Wallet"})]})]})]})})]})]})})}function gQ({pot:t,onClick:s,className:r}){const a=t.goalAmount?Math.min(100,t.currentBalance/t.goalAmount*100):0,n=t.lockStatus==="LOCKED"||t.adminLocked;t.lockStatus==="UNLOCKED"&&t.adminLocked;const i=t.lockEndDate?Math.max(0,Math.ceil((new Date(t.lockEndDate).getTime()-Date.now())/(1e3*60*60*24))):0,l=u=>new Intl.NumberFormat("en-SL",{style:"currency",currency:"SLE",minimumFractionDigits:2}).format(u),o=u=>new Date(u).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}),d=(()=>{switch(t.icon){case"piggy-bank":default:return di}})();return e.jsxs("div",{onClick:s,className:oe("bg-white rounded-xl border border-gray-200 overflow-hidden transition-all duration-200",s&&"cursor-pointer hover:shadow-lg hover:border-primary-300",t.adminLocked&&"border-red-300 bg-red-50/30",r),children:[e.jsx("div",{className:"h-2",style:{backgroundColor:t.color||"#4F46E5"}}),e.jsxs("div",{className:"p-5",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 rounded-full flex items-center justify-center",style:{backgroundColor:`${t.color||"#4F46E5"}15`},children:e.jsx(d,{className:"w-6 h-6",style:{color:t.color||"#4F46E5"}})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900 line-clamp-1",children:t.name}),e.jsxs("div",{className:"flex items-center gap-1 mt-0.5",children:[n?e.jsx(Xs,{className:"w-3.5 h-3.5 text-amber-500"}):e.jsx(A0,{className:"w-3.5 h-3.5 text-green-500"}),e.jsx("span",{className:oe("text-xs font-medium",n?"text-amber-600":"text-green-600"),children:t.adminLocked?"Admin Locked":n?"Locked":"Unlocked"})]})]})]}),t.autoDepositEnabled&&e.jsxs("div",{className:"flex items-center gap-1 px-2 py-1 bg-primary-50 rounded-full",children:[e.jsx(rr,{className:"w-3 h-3 text-primary-600"}),e.jsx("span",{className:"text-xs font-medium text-primary-700",children:"Auto"})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:l(t.currentBalance)}),t.goalAmount&&e.jsxs("p",{className:"text-sm text-gray-500",children:["of ",l(t.goalAmount)," goal"]})]}),t.goalAmount&&e.jsxs("div",{className:"mb-4",children:[e.jsx("div",{className:"h-2 bg-gray-100 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full rounded-full transition-all duration-500",style:{width:`${a}%`,backgroundColor:t.color||"#4F46E5"}})}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1.5",children:[a.toFixed(0),"% of goal"]})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[t.lockEndDate&&n&&e.jsxs("div",{className:"flex items-center gap-1.5 text-gray-600",children:[e.jsx(Mn,{className:"w-4 h-4"}),e.jsx("span",{children:i>0?`${i} days left`:`Unlocks ${o(t.lockEndDate)}`})]}),t.autoDepositEnabled&&t.autoDepositAmount&&e.jsxs("div",{className:"text-gray-500",children:[l(t.autoDepositAmount),"/",t.autoDepositFrequency]})]}),t.adminLocked&&t.adminLockReason&&e.jsxs("div",{className:"mt-3 p-2 bg-red-50 rounded-lg flex items-start gap-2",children:[e.jsx(ut,{className:"w-4 h-4 text-red-500 flex-shrink-0 mt-0.5"}),e.jsx("p",{className:"text-xs text-red-700",children:t.adminLockReason})]})]})]})}const Bp=t=>({id:t.id,userId:t.user_id,walletId:t.wallet_id,name:t.name,description:t.description||void 0,goalAmount:t.goal_amount?parseFloat(t.goal_amount):void 0,targetAmount:t.target_amount?parseFloat(t.target_amount):void 0,currentBalance:parseFloat(t.current_balance||t.balance)||0,maturityDate:t.maturity_date||void 0,lockType:t.lock_type,lockPeriodDays:t.lock_period_days||void 0,lockEndDate:t.lock_end_date||void 0,autoDepositEnabled:t.auto_deposit_enabled||!1,autoDepositAmount:t.auto_deposit_amount?parseFloat(t.auto_deposit_amount):void 0,autoDepositFrequency:t.auto_deposit_frequency,autoDepositDay:t.auto_deposit_day||void 0,sourceWalletId:t.source_wallet_id||void 0,nextAutoDepositDate:t.next_auto_deposit_date||void 0,lastAutoDepositDate:t.last_auto_deposit_date||void 0,status:t.status,lockStatus:t.lock_status,withdrawalEnabled:t.withdrawal_enabled||!1,unlockedAt:t.unlocked_at||void 0,unlockReason:t.unlock_reason||void 0,adminLocked:t.admin_locked||!1,adminLockedBy:t.admin_locked_by||void 0,adminLockedAt:t.admin_locked_at||void 0,adminLockReason:t.admin_lock_reason||void 0,icon:t.icon||"piggy-bank",color:t.color||"#4F46E5",createdAt:t.created_at,updatedAt:t.updated_at}),av=t=>({id:t.id,potId:t.pot_id,transactionId:t.transaction_id||void 0,transactionType:t.transaction_type,amount:parseFloat(t.amount)||0,balanceAfter:t.balance_after?parseFloat(t.balance_after):void 0,status:t.status,description:t.description||void 0,sourceWalletId:t.source_wallet_id||void 0,destinationWalletId:t.destination_wallet_id||void 0,reference:t.reference||void 0,failureReason:t.failure_reason||void 0,retryCount:t.retry_count||0,scheduledAt:t.scheduled_at||void 0,processedAt:t.processed_at||void 0,createdAt:t.created_at}),fQ=t=>({id:t.id,potId:t.pot_id,userId:t.user_id,notificationType:t.notification_type,title:t.title,message:t.message,metadata:t.metadata||void 0,isRead:t.is_read||!1,sentAt:t.sent_at,readAt:t.read_at||void 0}),Ea={async getPots(t){const{data:s,error:r}=await U.from("pots").select("*").eq("user_id",t).neq("status","CLOSED").order("created_at",{ascending:!1});if(r)throw console.error("Error fetching pots:",r),new Error(r.message);if(!s||s.length===0)return[];const a=s.map(l=>l.wallet_id).filter(Boolean),{data:n}=await U.from("wallets").select("id, balance").in("id",a),i=new Map((n||[]).map(l=>[l.id,parseFloat(l.balance)||0]));return s.map(l=>({...Bp(l),currentBalance:i.get(l.wallet_id)||0}))},async getPot(t){const{data:s,error:r}=await U.from("pots").select("*").eq("id",t).single();if(r)throw console.error("Error fetching pot:",r),new Error(r.message);let a=0;if(s.wallet_id){const{data:n}=await U.from("wallets").select("balance").eq("id",s.wallet_id).single();a=parseFloat(n==null?void 0:n.balance)||0}return{...Bp(s),currentBalance:a}},async getPotSummary(t){{const s=await this.getPot(t),r=await this.getPotTransactions(t,{limit:1e3}),a={totalContributions:0,totalWithdrawals:0,contributionCount:0};return r.data.forEach(n=>{n.transactionType==="contribution"||n.transactionType==="auto_deposit"?(a.totalContributions+=n.amount,a.contributionCount++):n.transactionType==="withdrawal"&&(a.totalWithdrawals+=n.amount)}),{id:s.id,name:s.name,description:s.description,currentBalance:s.currentBalance,goalAmount:s.goalAmount,progressPercent:s.goalAmount?s.currentBalance/s.goalAmount*100:void 0,lockType:s.lockType,lockStatus:s.lockStatus,lockEndDate:s.lockEndDate,maturityDate:s.maturityDate,daysUntilUnlock:s.lockEndDate?Math.max(0,Math.ceil((new Date(s.lockEndDate).getTime()-Date.now())/(1e3*60*60*24))):0,autoDeposit:{enabled:s.autoDepositEnabled,amount:s.autoDepositAmount,frequency:s.autoDepositFrequency,nextDate:s.nextAutoDepositDate},stats:a,status:s.status,adminLocked:s.adminLocked,icon:s.icon,color:s.color,createdAt:s.createdAt,updatedAt:s.updatedAt}}},async createPot(t,s){console.log("Creating pot directly via table insertion");const{error:r}=await U.from("pots").select("id").limit(1);if(r&&r.message.includes("does not exist"))throw new Error("Pots table does not exist. Please run the database migration first. Go to Supabase SQL Editor and run the pot system migration.");const a=`pot_${Date.now()}_${Math.random().toString(36).substring(2,10)}`;let n=s.maturityDate;if(!n&&s.lockPeriodDays){const u=new Date;u.setDate(u.getDate()+s.lockPeriodDays),n=u.toISOString()}let i;if(s.autoDepositEnabled&&s.autoDepositFrequency){const u=new Date;switch(s.autoDepositFrequency){case"daily":u.setDate(u.getDate()+1);break;case"weekly":u.setDate(u.getDate()+7);break;case"bi_weekly":u.setDate(u.getDate()+14);break;case"monthly":u.setMonth(u.getMonth()+1);break}i=u.toISOString()}const{data:l,error:o}=await U.from("wallets").insert({external_id:a,user_id:t,wallet_type:"pot",currency:"SLE",balance:0,status:"ACTIVE"}).select().single();if(o)throw console.error("Failed to create pot wallet:",o),new Error("Failed to create pot wallet: "+o.message);console.log("Pot wallet created:",l.id);const{data:c,error:d}=await U.from("pots").insert({user_id:t,wallet_id:l.id,name:s.name,description:s.description,goal_amount:s.goalAmount,target_amount:s.goalAmount,lock_type:s.lockType||"time_based",lock_period_days:s.lockPeriodDays,lock_end_date:n,maturity_date:n,auto_deposit_enabled:s.autoDepositEnabled||!1,auto_deposit_amount:s.autoDepositAmount,auto_deposit_frequency:s.autoDepositFrequency,source_wallet_id:s.sourceWalletId,next_auto_deposit_date:i,icon:s.icon||"piggy-bank",color:s.color||"#4F46E5",status:"ACTIVE",lock_status:"LOCKED"}).select().single();if(d){console.error("Failed to create pot, cleaning up wallet:",d);const{error:u}=await U.from("wallets").delete().eq("id",l.id);throw u&&console.error("Failed to cleanup wallet:",u),new Error("Failed to create pot: "+d.message)}return console.log("Pot created successfully:",c.id),{...Bp(c),currentBalance:0}},async updatePot(t,s){const r={updated_at:new Date().toISOString()};if(s.name!==void 0&&(r.name=s.name),s.description!==void 0&&(r.description=s.description),s.goalAmount!==void 0&&(r.goal_amount=s.goalAmount,r.target_amount=s.goalAmount),s.icon!==void 0&&(r.icon=s.icon),s.color!==void 0&&(r.color=s.color),s.autoDepositEnabled!==void 0&&(r.auto_deposit_enabled=s.autoDepositEnabled),s.autoDepositAmount!==void 0&&(r.auto_deposit_amount=s.autoDepositAmount),s.autoDepositFrequency!==void 0&&(r.auto_deposit_frequency=s.autoDepositFrequency),s.sourceWalletId!==void 0&&(r.source_wallet_id=s.sourceWalletId),s.autoDepositEnabled&&s.autoDepositFrequency){const i=new Date;switch(s.autoDepositFrequency){case"daily":i.setDate(i.getDate()+1);break;case"weekly":i.setDate(i.getDate()+7);break;case"bi_weekly":i.setDate(i.getDate()+14);break;case"monthly":i.setMonth(i.getMonth()+1);break}r.next_auto_deposit_date=i.toISOString()}const{data:a,error:n}=await U.from("pots").update(r).eq("id",t).select().single();if(n)throw console.error("Error updating pot:",n),new Error(n.message);return this.getPot(t)},async contributeToPot(t){const s=await this.getPot(t.potId);if(s.status!=="ACTIVE"&&s.status!=="LOCKED")throw new Error("Pot is not accepting contributions");if(s.adminLocked)throw new Error("Pot is locked by administrator");const{data:r,error:a}=await U.from("wallets").select("balance, status").eq("id",t.sourceWalletId).single();if(a||!r)throw new Error("Source wallet not found");if(r.status!=="ACTIVE")throw new Error("Source wallet is not active");const n=parseFloat(r.balance)||0;if(n<t.amount)throw new Error("Insufficient balance in source wallet");const{error:i}=await U.from("wallets").update({balance:n-t.amount,updated_at:new Date().toISOString()}).eq("id",t.sourceWalletId);if(i)throw new Error("Failed to debit source wallet");const{data:l}=await U.from("wallets").select("balance").eq("id",s.walletId).single(),c=(parseFloat(l==null?void 0:l.balance)||0)+t.amount,{error:d}=await U.from("wallets").update({balance:c,updated_at:new Date().toISOString()}).eq("id",s.walletId);if(d)throw await U.from("wallets").update({balance:n}).eq("id",t.sourceWalletId),new Error("Failed to credit pot wallet");const u=`CTB-${Date.now()}`,{data:m,error:p}=await U.from("pot_transactions").insert({pot_id:t.potId,transaction_type:"contribution",amount:t.amount,balance_after:c,status:"COMPLETED",description:t.description||"Contribution",source_wallet_id:t.sourceWalletId,reference:u,processed_at:new Date().toISOString()}).select().single();return p&&console.error("Error creating pot transaction:",p),await U.from("pots").update({updated_at:new Date().toISOString()}).eq("id",t.potId),m?av(m):{id:u,potId:t.potId,transactionType:"contribution",amount:t.amount,balanceAfter:c,status:"COMPLETED",description:t.description,sourceWalletId:t.sourceWalletId,reference:u,retryCount:0,processedAt:new Date().toISOString(),createdAt:new Date().toISOString()}},async checkWithdrawalEligibility(t){const s=await this.getPot(t);if(s.adminLocked)return{canWithdraw:!1,lockStatus:"admin_locked",reason:"Pot is locked by administrator",currentBalance:s.currentBalance,maxWithdrawalAmount:s.currentBalance};if(s.status==="CLOSED")return{canWithdraw:!1,lockStatus:"closed",reason:"Pot has been closed",currentBalance:s.currentBalance,maxWithdrawalAmount:0};if((s.lockType==="time_based"||s.lockType==="hybrid")&&s.lockEndDate&&new Date(s.lockEndDate)>new Date){const r=Math.ceil((new Date(s.lockEndDate).getTime()-Date.now())/864e5);return{canWithdraw:!1,canWithdrawWithPenalty:!0,lockStatus:"locked",lockEndDate:s.lockEndDate,daysUntilUnlock:r,penaltyPercent:5,currentBalance:s.currentBalance,maxWithdrawalAmount:s.currentBalance,withdrawalAfterPenalty:s.currentBalance*.95,reason:`Pot is locked until ${new Date(s.lockEndDate).toLocaleDateString()}`}}return(s.lockType==="goal_based"||s.lockType==="hybrid")&&s.goalAmount&&s.currentBalance<s.goalAmount?{canWithdraw:!1,lockStatus:"goal_not_reached",goalAmount:s.goalAmount,currentBalance:s.currentBalance,maxWithdrawalAmount:s.currentBalance,remainingToGoal:s.goalAmount-s.currentBalance,progressPercent:s.currentBalance/s.goalAmount*100,reason:"Goal not yet reached"}:{canWithdraw:!0,lockStatus:"unlocked",currentBalance:s.currentBalance,maxWithdrawalAmount:s.currentBalance,reason:"Withdrawal available"}},async withdrawFromPot(t){const s=await this.checkWithdrawalEligibility(t.potId);if(!s.canWithdraw&&!t.forceWithPenalty)throw new Error(s.reason||"Withdrawal not allowed");if(!s.canWithdraw&&t.forceWithPenalty&&!s.canWithdrawWithPenalty)throw new Error("Early withdrawal not available for this pot");const r=await this.getPot(t.potId);if(t.amount>r.currentBalance)throw new Error("Insufficient pot balance");let a=t.amount,n=0;!s.canWithdraw&&t.forceWithPenalty&&s.penaltyPercent&&(n=t.amount*(s.penaltyPercent/100),a=t.amount-n);const i=r.currentBalance-t.amount,{error:l}=await U.from("wallets").update({balance:i,updated_at:new Date().toISOString()}).eq("id",r.walletId);if(l)throw new Error("Failed to debit pot wallet");const{data:o}=await U.from("wallets").select("balance").eq("id",t.destinationWalletId).single(),c=parseFloat(o==null?void 0:o.balance)||0,{error:d}=await U.from("wallets").update({balance:c+a,updated_at:new Date().toISOString()}).eq("id",t.destinationWalletId);if(d)throw await U.from("wallets").update({balance:r.currentBalance}).eq("id",r.walletId),new Error("Failed to credit destination wallet");const u=`WTD-${Date.now()}`,{data:m,error:p}=await U.from("pot_transactions").insert({pot_id:t.potId,transaction_type:"withdrawal",amount:t.amount,balance_after:i,status:"COMPLETED",description:t.description||"Withdrawal",destination_wallet_id:t.destinationWalletId,reference:u,processed_at:new Date().toISOString()}).select().single();return p&&console.error("Error creating pot transaction:",p),n>0&&await U.from("pot_transactions").insert({pot_id:t.potId,transaction_type:"penalty",amount:n,balance_after:i,status:"COMPLETED",description:`Early withdrawal penalty (${s.penaltyPercent}%)`,reference:`PEN-${Date.now()}`,processed_at:new Date().toISOString()}),await U.from("pots").update({updated_at:new Date().toISOString()}).eq("id",t.potId),m?av(m):{id:u,potId:t.potId,transactionType:"withdrawal",amount:t.amount,balanceAfter:i,status:"COMPLETED",description:t.description,destinationWalletId:t.destinationWalletId,reference:u,retryCount:0,processedAt:new Date().toISOString(),createdAt:new Date().toISOString()}},async closePot(t,s){const r=await this.getPot(t);if(r.status==="CLOSED")throw new Error("Pot is already closed");if(r.adminLocked)throw new Error("Pot is locked by administrator");return r.currentBalance>0&&await this.withdrawFromPot({potId:t,destinationWalletId:s,amount:r.currentBalance,forceWithPenalty:!0,description:"Pot closure withdrawal"}),await U.from("pots").update({status:"CLOSED",lock_status:"UNLOCKED",auto_deposit_enabled:!1,updated_at:new Date().toISOString()}).eq("id",t),await U.from("wallets").update({status:"CLOSED",updated_at:new Date().toISOString()}).eq("id",r.walletId),!0},async getPotTransactions(t,s){const r=(s==null?void 0:s.page)||1,a=(s==null?void 0:s.limit)||10,n=(r-1)*a;let i=U.from("pot_transactions").select("*",{count:"exact"}).eq("pot_id",t);s!=null&&s.type&&(i=i.eq("transaction_type",s.type));const{data:l,count:o,error:c}=await i.order("created_at",{ascending:!1}).range(n,n+a-1);if(c)throw console.error("Error fetching pot transactions:",c),new Error(c.message);const d=o||0;return{data:(l||[]).map(av),total:d,page:r,limit:a,totalPages:Math.ceil(d/a)}},async getPotNotifications(t,s){let r=U.from("pot_notifications").select("*").eq("user_id",t);s!=null&&s.unreadOnly&&(r=r.eq("is_read",!1)),s!=null&&s.potId&&(r=r.eq("pot_id",s.potId));const{data:a,error:n}=await r.order("sent_at",{ascending:!1}).limit((s==null?void 0:s.limit)||50);if(n)throw console.error("Error fetching pot notifications:",n),new Error(n.message);return(a||[]).map(fQ)},async markNotificationRead(t){const{error:s}=await U.from("pot_notifications").update({is_read:!0,read_at:new Date().toISOString()}).eq("id",t);if(s)throw console.error("Error marking notification read:",s),new Error(s.message)},async getPotSettings(){const{data:t,error:s}=await U.from("pot_settings").select("setting_key, setting_value").eq("is_active",!0);if(s)return console.error("Error fetching pot settings:",s),{maxPotsPerUser:10,minContributionAmount:1,maxContributionAmount:1e6,minLockPeriodDays:7,maxLockPeriodDays:3650,earlyWithdrawalPenaltyPercent:5,autoDepositRetryHours:24};const r={maxPotsPerUser:10,minContributionAmount:1,maxContributionAmount:1e6,minLockPeriodDays:7,maxLockPeriodDays:3650,earlyWithdrawalPenaltyPercent:5,autoDepositRetryHours:24};return(t||[]).forEach(a=>{var i;const n=(i=a.setting_value)==null?void 0:i.value;switch(a.setting_key){case"max_pots_per_user":r.maxPotsPerUser=n||10;break;case"min_contribution_amount":r.minContributionAmount=n||1;break;case"max_contribution_amount":r.maxContributionAmount=n||1e6;break;case"min_lock_period_days":r.minLockPeriodDays=n||7;break;case"max_lock_period_days":r.maxLockPeriodDays=n||3650;break;case"early_withdrawal_penalty_percent":r.earlyWithdrawalPenaltyPercent=n||5;break;case"auto_deposit_retry_hours":r.autoDepositRetryHours=n||24;break}}),r},async getAllPots(t){const s=(t==null?void 0:t.page)||1,r=(t==null?void 0:t.limit)||20,a=(s-1)*r;let n=U.from("pots").select("*",{count:"exact"});t!=null&&t.status&&(n=n.eq("status",t.status)),t!=null&&t.userId&&(n=n.eq("user_id",t.userId));const{data:i,count:l,error:o}=await n.order("created_at",{ascending:!1}).range(a,a+r-1);if(o)throw console.error("Error fetching all pots:",o),new Error(o.message);const c=(i||[]).map(p=>p.wallet_id).filter(Boolean),{data:d}=await U.from("wallets").select("id, balance").in("id",c),u=new Map((d||[]).map(p=>[p.id,parseFloat(p.balance)||0])),m=l||0;return{data:(i||[]).map(p=>({...Bp(p),currentBalance:u.get(p.wallet_id)||0})),total:m,page:s,limit:r,totalPages:Math.ceil(m/r)}},async adminTogglePotLock(t,s,r,a){const{error:n}=await U.from("pots").update({admin_locked:r,admin_locked_by:r?s:null,admin_locked_at:r?new Date().toISOString():null,admin_lock_reason:a||null,updated_at:new Date().toISOString()}).eq("id",t);if(n)throw new Error(n.message);return!0},async adminForceUnlock(t,s){const{error:r}=await U.from("pots").update({lock_status:"UNLOCKED",withdrawal_enabled:!0,unlocked_at:new Date().toISOString(),unlock_reason:"Admin force unlock",admin_locked:!1,admin_locked_by:null,admin_locked_at:null,admin_lock_reason:null,updated_at:new Date().toISOString()}).eq("id",t);if(r)throw new Error(r.message);return!0},async updatePotSetting(t,s){const{error:r}=await U.from("pot_settings").update({setting_value:{value:s},updated_at:new Date().toISOString()}).eq("setting_key",t);if(r)throw new Error(r.message)}};function yQ(){const{user:t}=wt();return _a({queryKey:["pots",t==null?void 0:t.id],queryFn:async()=>t!=null&&t.id?Ea.getPots(t.id):[],enabled:!!(t!=null&&t.id),staleTime:3e4,retry:2})}function bQ(t){return _a({queryKey:["pots","detail",t],queryFn:()=>Ea.getPot(t),enabled:!!t,staleTime:3e4})}function vQ(t){return _a({queryKey:["pots","summary",t],queryFn:()=>Ea.getPotSummary(t),enabled:!!t,staleTime:3e4})}function jQ(t,s=1,r=10,a){return _a({queryKey:["pots","transactions",t,s,r,a],queryFn:()=>Ea.getPotTransactions(t,{page:s,limit:r,type:a}),enabled:!!t,staleTime:1e4})}function rD(t){return _a({queryKey:["pots","eligibility",t],queryFn:()=>Ea.checkWithdrawalEligibility(t),enabled:!!t,staleTime:6e4})}function Yf(){return _a({queryKey:["pots","settings"],queryFn:()=>Ea.getPotSettings(),staleTime:3e5})}function wQ(){const t=Ns(),{user:s}=wt();return Is({mutationFn:r=>{if(!(s!=null&&s.id))throw new Error("User not authenticated");return Ea.createPot(s.id,r)},onSuccess:()=>{t.invalidateQueries({queryKey:["pots"]}),t.invalidateQueries({queryKey:["wallets"]})}})}function NQ(){const t=Ns();return Is({mutationFn:({potId:s,data:r})=>Ea.updatePot(s,r),onSuccess:(s,r)=>{t.invalidateQueries({queryKey:["pots"]}),t.invalidateQueries({queryKey:["pots","detail",r.potId]}),t.invalidateQueries({queryKey:["pots","summary",r.potId]})}})}function kQ(){const t=Ns();return Is({mutationFn:s=>Ea.contributeToPot(s),onSuccess:(s,r)=>{t.invalidateQueries({queryKey:["pots"]}),t.invalidateQueries({queryKey:["pots","detail",r.potId]}),t.invalidateQueries({queryKey:["pots","summary",r.potId]}),t.invalidateQueries({queryKey:["pots","transactions",r.potId]}),t.invalidateQueries({queryKey:["pots","eligibility",r.potId]}),t.invalidateQueries({queryKey:["wallets"]}),t.invalidateQueries({queryKey:["wallets",r.sourceWalletId]})}})}function CQ(){const t=Ns();return Is({mutationFn:s=>Ea.withdrawFromPot(s),onSuccess:(s,r)=>{t.invalidateQueries({queryKey:["pots"]}),t.invalidateQueries({queryKey:["pots","detail",r.potId]}),t.invalidateQueries({queryKey:["pots","summary",r.potId]}),t.invalidateQueries({queryKey:["pots","transactions",r.potId]}),t.invalidateQueries({queryKey:["pots","eligibility",r.potId]}),t.invalidateQueries({queryKey:["wallets"]}),t.invalidateQueries({queryKey:["wallets",r.destinationWalletId]})}})}function SQ(){const t=Ns();return Is({mutationFn:({potId:s,destinationWalletId:r})=>Ea.closePot(s,r),onSuccess:()=>{t.invalidateQueries({queryKey:["pots"]}),t.invalidateQueries({queryKey:["wallets"]})}})}function _Q(t){return _a({queryKey:["pots","admin","all",t],queryFn:()=>Ea.getAllPots(t),staleTime:3e4})}function EQ(){const t=Ns(),{user:s}=wt();return Is({mutationFn:({potId:r,lock:a,reason:n})=>{if(!(s!=null&&s.id))throw new Error("User not authenticated");return Ea.adminTogglePotLock(r,s.id,a,n)},onSuccess:(r,a)=>{t.invalidateQueries({queryKey:["pots"]}),t.invalidateQueries({queryKey:["pots","detail",a.potId]}),t.invalidateQueries({queryKey:["pots","admin"]})}})}function AQ(){const t=Ns(),{user:s}=wt();return Is({mutationFn:r=>{if(!(s!=null&&s.id))throw new Error("User not authenticated");return Ea.adminForceUnlock(r,s.id)},onSuccess:(r,a)=>{t.invalidateQueries({queryKey:["pots"]}),t.invalidateQueries({queryKey:["pots","detail",a]}),t.invalidateQueries({queryKey:["pots","eligibility",a]}),t.invalidateQueries({queryKey:["pots","admin"]})}})}function TQ(){const t=Ns();return Is({mutationFn:({key:s,value:r})=>Ea.updatePotSetting(s,r),onSuccess:()=>{t.invalidateQueries({queryKey:["pots","settings"]})}})}const nv=["#4F46E5","#0891B2","#059669","#D97706","#DC2626","#7C3AED","#DB2777","#2563EB"],PQ=[{value:"time_based",label:"Time-Based",description:"Lock until a specific date"},{value:"goal_based",label:"Goal-Based",description:"Lock until you reach your goal"},{value:"hybrid",label:"Hybrid",description:"Lock until date AND goal reached"},{value:"manual",label:"Flexible",description:"No lock, withdraw anytime"}],RQ=[{value:"daily",label:"Daily"},{value:"weekly",label:"Weekly"},{value:"bi_weekly",label:"Bi-weekly"},{value:"monthly",label:"Monthly"}];function aD({isOpen:t,onClose:s,onSuccess:r}){const a=wQ(),{data:n}=Yf(),{data:i=[]}=qi(),[l,o]=h.useState({name:"",description:"",lockType:"time_based",lockPeriodDays:30,color:nv[0]}),[c,d]=h.useState(!1),[u,m]=h.useState({}),p=w=>{if(!l.goalAmount||!l.lockPeriodDays||!w)return null;const y=l.lockPeriodDays;let C;switch(w){case"daily":C=y;break;case"weekly":C=Math.floor(y/7);break;case"bi_weekly":C=Math.floor(y/14);break;case"monthly":C=Math.floor(y/30);break;default:return null}return C<=0?null:Math.ceil(l.goalAmount/C*100)/100},x=()=>{if(!l.autoDepositAmount||!l.autoDepositFrequency||!l.lockPeriodDays)return null;const w=l.lockPeriodDays;let y;switch(l.autoDepositFrequency){case"daily":y=w;break;case"weekly":y=Math.floor(w/7);break;case"bi_weekly":y=Math.floor(w/14);break;case"monthly":y=Math.floor(w/30);break;default:return null}return{total:l.autoDepositAmount*y,deposits:y}},g=p(l.autoDepositFrequency),f=x(),b=i.filter(w=>w.status==="ACTIVE");h.useEffect(()=>{t||(o({name:"",description:"",lockType:"time_based",lockPeriodDays:30,color:nv[0]}),d(!1),m({}))},[t]);const j=()=>{const w={};return l.name.trim()?l.name.length>50&&(w.name="Name must be 50 characters or less"):w.name="Pot name is required",l.goalAmount!==void 0&&l.goalAmount<=0&&(w.goalAmount="Goal amount must be positive"),(l.lockType==="time_based"||l.lockType==="hybrid")&&!l.lockPeriodDays&&!l.maturityDate&&(w.lockPeriodDays="Lock period or maturity date is required"),l.autoDepositEnabled&&((!l.autoDepositAmount||l.autoDepositAmount<=0)&&(w.autoDepositAmount="Auto-deposit amount is required"),l.autoDepositFrequency||(w.autoDepositFrequency="Frequency is required"),l.sourceWalletId||(w.sourceWalletId="Source wallet is required")),m(w),Object.keys(w).length===0},v=async w=>{if(w.preventDefault(),!!j())try{await a.mutateAsync(l),r==null||r(),s()}catch(y){m({submit:y.message||"Failed to create pot"})}};return t?e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[e.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:s}),e.jsxs("div",{className:"relative bg-white rounded-2xl shadow-xl w-full max-w-lg mx-4 max-h-[90vh] overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-primary-100 flex items-center justify-center",children:e.jsx(di,{className:"w-5 h-5 text-primary-600"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Create New Pot"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Start saving towards your goal"})]})]}),e.jsx("button",{onClick:s,className:"p-2 hover:bg-gray-100 rounded-full transition-colors",children:e.jsx(lt,{className:"w-5 h-5 text-gray-500"})})]}),e.jsxs("form",{onSubmit:v,className:"overflow-y-auto max-h-[calc(90vh-180px)]",children:[e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Pot Name *"}),e.jsx("input",{type:"text",value:l.name,onChange:w=>o({...l,name:w.target.value}),placeholder:"e.g., Emergency Fund, Vacation, New Phone",className:oe("w-full px-4 py-3 rounded-xl border transition-colors",u.name?"border-red-300 focus:border-red-500 focus:ring-red-500":"border-gray-300 focus:border-primary-500 focus:ring-primary-500")}),u.name&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:u.name})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description (Optional)"}),e.jsx("textarea",{value:l.description||"",onChange:w=>o({...l,description:w.target.value}),placeholder:"What are you saving for?",rows:2,className:"w-full px-4 py-3 rounded-xl border border-gray-300 focus:border-primary-500 focus:ring-primary-500 transition-colors resize-none"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Color"}),e.jsx("div",{className:"flex gap-2",children:nv.map(w=>e.jsx("button",{type:"button",onClick:()=>o({...l,color:w}),className:oe("w-8 h-8 rounded-full transition-all",l.color===w&&"ring-2 ring-offset-2 ring-gray-400"),style:{backgroundColor:w}},w))})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[e.jsx(B1,{className:"w-4 h-4 inline mr-1"}),"Target Amount (Optional)"]}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-500",children:"SLE"}),e.jsx("input",{type:"number",value:l.goalAmount||"",onChange:w=>o({...l,goalAmount:w.target.value?parseFloat(w.target.value):void 0}),placeholder:"0.00",min:"0",step:"0.01",className:"w-full pl-14 pr-4 py-3 rounded-xl border border-gray-300 focus:border-primary-500 focus:ring-primary-500 transition-colors"})]}),u.goalAmount&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:u.goalAmount})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[e.jsx(Mn,{className:"w-4 h-4 inline mr-1"}),"Lock Type"]}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:PQ.map(w=>e.jsxs("button",{type:"button",onClick:()=>o({...l,lockType:w.value}),className:oe("p-3 rounded-xl border text-left transition-all",l.lockType===w.value?"border-primary-500 bg-primary-50":"border-gray-200 hover:border-gray-300"),children:[e.jsx("span",{className:"font-medium text-sm text-gray-900",children:w.label}),e.jsx("p",{className:"text-xs text-gray-500 mt-0.5",children:w.description})]},w.value))})]}),(l.lockType==="time_based"||l.lockType==="hybrid")&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Lock Period (Days)"}),e.jsx("input",{type:"number",value:l.lockPeriodDays||"",onChange:w=>o({...l,lockPeriodDays:w.target.value?parseInt(w.target.value):void 0}),placeholder:"30",min:(n==null?void 0:n.minLockPeriodDays)||7,max:(n==null?void 0:n.maxLockPeriodDays)||3650,className:"w-full px-4 py-3 rounded-xl border border-gray-300 focus:border-primary-500 focus:ring-primary-500 transition-colors"}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Min: ",(n==null?void 0:n.minLockPeriodDays)||7," days, Max: ",(n==null?void 0:n.maxLockPeriodDays)||3650," days"]}),u.lockPeriodDays&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:u.lockPeriodDays})]}),e.jsxs("div",{className:"border-t border-gray-200 pt-6",children:[e.jsxs("button",{type:"button",onClick:()=>{d(!c),o(c?{...l,autoDepositEnabled:!1,autoDepositAmount:void 0,autoDepositFrequency:void 0,sourceWalletId:void 0}:{...l,autoDepositEnabled:!0})},className:"w-full flex items-center justify-between p-4 rounded-xl border border-gray-200 hover:border-primary-300 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-green-100 flex items-center justify-center",children:e.jsx(WT,{className:"w-5 h-5 text-green-600"})}),e.jsxs("div",{className:"text-left",children:[e.jsx("p",{className:"font-medium text-gray-900",children:"Auto-Deposit"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Schedule automatic contributions"})]})]}),e.jsx(zs,{className:oe("w-5 h-5 text-gray-400 transition-transform",c&&"rotate-180")})]}),c&&e.jsxs("div",{className:"mt-4 space-y-4 p-4 bg-gray-50 rounded-xl",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Frequency *"}),e.jsx("div",{className:"grid grid-cols-4 gap-2",children:RQ.map(w=>{const y=p(w.value);return e.jsxs("button",{type:"button",onClick:()=>o({...l,autoDepositFrequency:w.value}),className:oe("py-2 px-3 rounded-lg text-sm font-medium transition-colors flex flex-col items-center",l.autoDepositFrequency===w.value?"bg-primary-600 text-white":"bg-white border border-gray-200 text-gray-700 hover:bg-gray-50"),children:[e.jsx("span",{children:w.label}),y&&e.jsxs("span",{className:oe("text-xs mt-0.5",l.autoDepositFrequency===w.value?"text-primary-100":"text-gray-400"),children:["~",y.toFixed(2)]})]},w.value)})}),u.autoDepositFrequency&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:u.autoDepositFrequency})]}),l.goalAmount&&l.lockPeriodDays&&l.autoDepositFrequency&&g&&e.jsxs("div",{className:"p-3 bg-blue-50 border border-blue-200 rounded-lg",children:[e.jsxs("p",{className:"text-sm text-blue-800",children:[e.jsx("strong",{children:"Recommended:"})," To reach your goal of"," ",e.jsxs("span",{className:"font-semibold",children:["SLE ",l.goalAmount.toLocaleString()]})," in"," ",e.jsxs("span",{className:"font-semibold",children:[l.lockPeriodDays," days"]}),", deposit"," ",e.jsxs("span",{className:"font-semibold",children:["SLE ",g.toFixed(2)]})," ",l.autoDepositFrequency==="daily"&&"per day",l.autoDepositFrequency==="weekly"&&"per week",l.autoDepositFrequency==="bi_weekly"&&"every 2 weeks",l.autoDepositFrequency==="monthly"&&"per month"]}),e.jsx("button",{type:"button",onClick:()=>o({...l,autoDepositAmount:g}),className:"mt-2 text-sm font-medium text-blue-600 hover:text-blue-800",children:"Use recommended amount"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Amount per deposit *"}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-500",children:"SLE"}),e.jsx("input",{type:"number",value:l.autoDepositAmount||"",onChange:w=>o({...l,autoDepositAmount:w.target.value?parseFloat(w.target.value):void 0}),placeholder:"0.00",min:"0",step:"0.01",className:"w-full pl-14 pr-4 py-3 rounded-xl border border-gray-300 focus:border-primary-500 focus:ring-primary-500 transition-colors"})]}),u.autoDepositAmount&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:u.autoDepositAmount})]}),f&&e.jsxs("div",{className:oe("p-3 rounded-lg border",l.goalAmount&&f.total>=l.goalAmount?"bg-green-50 border-green-200":l.goalAmount&&f.total<l.goalAmount?"bg-yellow-50 border-yellow-200":"bg-gray-100 border-gray-200"),children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Projected total:"}),e.jsxs("span",{className:"font-semibold text-gray-900",children:["SLE ",f.total.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})]})]}),e.jsxs("div",{className:"flex justify-between items-center mt-1",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Number of deposits:"}),e.jsx("span",{className:"font-medium text-gray-700",children:f.deposits})]}),l.goalAmount&&e.jsx("div",{className:"mt-2 pt-2 border-t border-gray-200",children:f.total>=l.goalAmount?e.jsxs("p",{className:"text-sm text-green-700",children:["You'll reach your goal of SLE ",l.goalAmount.toLocaleString(),f.total>l.goalAmount&&e.jsxs("span",{children:[" (+SLE ",(f.total-l.goalAmount).toFixed(2)," extra)"]})]}):e.jsxs("p",{className:"text-sm text-yellow-700",children:["You'll be SLE ",(l.goalAmount-f.total).toFixed(2)," short of your goal"]})})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[e.jsx(jt,{className:"w-4 h-4 inline mr-1"}),"Source Wallet *"]}),e.jsxs("select",{value:l.sourceWalletId||"",onChange:w=>o({...l,sourceWalletId:w.target.value}),className:"w-full px-4 py-3 rounded-xl border border-gray-300 focus:border-primary-500 focus:ring-primary-500 transition-colors",children:[e.jsx("option",{value:"",children:"Select wallet"}),b.map(w=>e.jsxs("option",{value:w.id,children:["Wallet (",w.currency,") - ",new Intl.NumberFormat("en-SL",{style:"currency",currency:w.currency}).format(w.balance)]},w.id))]}),u.sourceWalletId&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:u.sourceWalletId})]})]})]}),u.submit&&e.jsx("div",{className:"p-4 bg-red-50 rounded-xl",children:e.jsx("p",{className:"text-sm text-red-600",children:u.submit})})]}),e.jsx("div",{className:"p-6 border-t border-gray-200 bg-gray-50",children:e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{type:"button",onClick:s,className:"flex-1 py-3 px-4 rounded-xl border border-gray-300 text-gray-700 font-medium hover:bg-gray-100 transition-colors",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:a.isPending,className:oe("flex-1 py-3 px-4 rounded-xl font-medium transition-colors flex items-center justify-center gap-2",a.isPending?"bg-gray-300 cursor-not-allowed":"bg-primary-600 text-white hover:bg-primary-700"),children:a.isPending?e.jsxs(e.Fragment,{children:[e.jsx(Ie,{className:"w-5 h-5 animate-spin"}),"Creating..."]}):"Create Pot"})]})})]})]})]}):null}function nD({isOpen:t,onClose:s,pot:r,onSuccess:a}){const n=kQ(),{data:i}=Yf(),{data:l=[]}=qi(),[o,c]=h.useState(""),[d,u]=h.useState(""),[m,p]=h.useState(""),[x,g]=h.useState({}),[f,b]=h.useState(0),[j,v]=h.useState(!1),[w,y]=h.useState(!1),C=h.useRef(null),S=h.useRef(!1),_=h.useRef(0),E=85,A=l.filter(q=>q.status==="ACTIVE"),R=A.find(q=>q.id===d);h.useEffect(()=>{t||(c(""),u(""),p(""),g({}),b(0),y(!1))},[t]),h.useEffect(()=>{_.current=f},[f]);const I=q=>new Intl.NumberFormat("en-SL",{style:"currency",currency:"SLE",minimumFractionDigits:2}).format(q),N=()=>{const q={},K=parseFloat(o);return!o||K<=0?q.amount="Amount is required":i&&K<i.minContributionAmount?q.amount=`Minimum amount is ${I(i.minContributionAmount)}`:i&&K>i.maxContributionAmount&&(q.amount=`Maximum amount is ${I(i.maxContributionAmount)}`),d?R&&K>R.balance&&(q.amount="Insufficient wallet balance"):q.sourceWalletId="Please select a wallet",g(q),Object.keys(q).length===0},P=h.useCallback(()=>C.current?C.current.offsetWidth-64-8:200,[]),k=h.useCallback(q=>{if(!S.current||!C.current||n.isPending)return;const K=C.current.getBoundingClientRect(),le=P(),se=Math.max(0,Math.min(q-K.left-32,le))/le*100;b(se),_.current=se},[n.isPending,P]),D=h.useCallback(async()=>{if(!S.current)return;const q=_.current;if(S.current=!1,v(!1),q>=E&&!n.isPending){if(!N()){b(0);return}y(!0),b(100);try{await n.mutateAsync({potId:r.id,sourceWalletId:d,amount:parseFloat(o),description:m||void 0}),a==null||a(),setTimeout(s,500)}catch(K){g({submit:K.message||"Failed to contribute"}),y(!1),b(0)}}else b(0)},[n,r.id,d,o,m,a,s]),$=h.useCallback(q=>{n.isPending||w||(S.current=!0,v(!0))},[n.isPending,w]),L=q=>{q.preventDefault(),$(q.clientX)},B=q=>{$(q.touches[0].clientX)};h.useEffect(()=>{const q=se=>{S.current&&k(se.clientX)},K=()=>{S.current&&D()},le=se=>{S.current&&se.touches[0]&&k(se.touches[0].clientX)},X=()=>{S.current&&D()};return window.addEventListener("mousemove",q),window.addEventListener("mouseup",K),window.addEventListener("touchmove",le,{passive:!0}),window.addEventListener("touchend",X),()=>{window.removeEventListener("mousemove",q),window.removeEventListener("mouseup",K),window.removeEventListener("touchmove",le),window.removeEventListener("touchend",X)}},[k,D]);const T=f/100*P(),O=o&&parseFloat(o)>0&&d;return t?e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[e.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:s}),e.jsxs("div",{className:"relative bg-white rounded-2xl shadow-xl w-full max-w-md mx-4 overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full flex items-center justify-center",style:{backgroundColor:`${r.color||"#4F46E5"}15`},children:e.jsx(xs,{className:"w-5 h-5",style:{color:r.color||"#4F46E5"}})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Add to Pot"}),e.jsx("p",{className:"text-sm text-gray-500",children:r.name})]})]}),e.jsx("button",{onClick:s,className:"p-2 hover:bg-gray-100 rounded-full transition-colors",children:e.jsx(lt,{className:"w-5 h-5 text-gray-500"})})]}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"p-4 rounded-xl bg-gray-50",children:[e.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Current Pot Balance"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:I(r.currentBalance)}),r.goalAmount&&e.jsxs("div",{className:"mt-2",children:[e.jsx("div",{className:"h-2 bg-gray-200 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full rounded-full",style:{width:`${Math.min(100,r.currentBalance/r.goalAmount*100)}%`,backgroundColor:r.color||"#4F46E5"}})}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[I(r.goalAmount-r.currentBalance)," to reach goal"]})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[e.jsx(jt,{className:"w-4 h-4 inline mr-1"}),"From Wallet"]}),e.jsxs("select",{value:d,onChange:q=>u(q.target.value),className:oe("w-full px-4 py-3 rounded-xl border transition-colors",x.sourceWalletId?"border-red-300 focus:border-red-500":"border-gray-300 focus:border-primary-500"),children:[e.jsx("option",{value:"",children:"Select wallet"}),A.map(q=>e.jsxs("option",{value:q.id,children:["Wallet (",q.currency,") - ",I(q.balance)]},q.id))]}),x.sourceWalletId&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:x.sourceWalletId})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Amount"}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-500 font-medium",children:"SLE"}),e.jsx("input",{type:"number",value:o,onChange:q=>c(q.target.value),placeholder:"0.00",min:"0",step:"0.01",className:oe("w-full pl-14 pr-4 py-4 text-2xl font-semibold rounded-xl border transition-colors",x.amount?"border-red-300 focus:border-red-500":"border-gray-300 focus:border-primary-500")})]}),x.amount&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:x.amount}),R&&e.jsxs("p",{className:"mt-1 text-sm text-gray-500",children:["Available: ",I(R.balance)]})]}),R&&e.jsx("div",{className:"flex gap-2",children:[10,50,100,500].map(q=>e.jsxs("button",{type:"button",onClick:()=>c(q.toString()),disabled:q>R.balance,className:oe("flex-1 py-2 rounded-lg text-sm font-medium transition-colors",q>R.balance?"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:["+",q]},q))}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Note (Optional)"}),e.jsx("input",{type:"text",value:m,onChange:q=>p(q.target.value),placeholder:"e.g., Birthday money, Weekly savings",className:"w-full px-4 py-3 rounded-xl border border-gray-300 focus:border-primary-500 transition-colors"})]}),x.submit&&e.jsx("div",{className:"p-4 bg-red-50 rounded-xl",children:e.jsx("p",{className:"text-sm text-red-600",children:x.submit})})]}),e.jsx("div",{className:"p-6 border-t border-gray-200 bg-gray-50",children:e.jsxs("div",{ref:C,className:oe("relative h-16 rounded-2xl overflow-hidden select-none",O?"cursor-grab":"opacity-50 cursor-not-allowed",w?"bg-green-500":"bg-gradient-to-r from-primary-600 to-primary-500"),children:[e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsx("div",{className:"flex items-center gap-2 text-white/80 font-medium",children:n.isPending?e.jsxs(e.Fragment,{children:[e.jsx(Ie,{className:"w-5 h-5 animate-spin"}),e.jsx("span",{children:"Processing..."})]}):w?e.jsxs(e.Fragment,{children:[e.jsx(Rs,{className:"w-5 h-5"}),e.jsx("span",{children:"Added!"})]}):e.jsxs(e.Fragment,{children:[e.jsxs("span",{children:["Slide to add ",o?I(parseFloat(o)):"amount"]}),e.jsx(Vs,{className:"w-5 h-5 animate-pulse"})]})})}),e.jsx("div",{className:oe("absolute inset-y-0 left-0 transition-all duration-100",w?"bg-green-600":"bg-primary-700/30"),style:{width:`${f}%`}}),e.jsx("div",{onMouseDown:L,onTouchStart:B,className:oe("absolute top-1 bottom-1 left-1 w-14 rounded-xl flex items-center justify-center",j?"cursor-grabbing scale-105":"cursor-grab",w?"bg-white":"bg-white shadow-lg",!O||n.isPending?"pointer-events-none":""),style:{transform:`translateX(${T}px)`,transition:j?"none":"transform 0.3s ease-out"},children:n.isPending?e.jsx(Ie,{className:"w-6 h-6 text-primary-600 animate-spin"}):w?e.jsx(Rs,{className:"w-6 h-6 text-green-600"}):e.jsx(xs,{className:"w-6 h-6 text-primary-600"})})]})})]})]}):null}function DQ({isOpen:t,onClose:s,pot:r,onSuccess:a}){const n=CQ(),{data:i,isLoading:l}=rD(r.id),{data:o=[]}=qi(),[c,d]=h.useState(""),[u,m]=h.useState(""),[p,x]=h.useState(!1),[g,f]=h.useState(""),[b,j]=h.useState({}),[v,w]=h.useState(0),[y,C]=h.useState(!1),[S,_]=h.useState(!1),E=h.useRef(null),A=h.useRef(!1),R=h.useRef(0),I=85,N=o.filter(re=>re.status==="ACTIVE");h.useEffect(()=>{t||(d(""),m(""),x(!1),f(""),j({}),w(0),_(!1))},[t]),h.useEffect(()=>{R.current=v},[v]);const P=re=>new Intl.NumberFormat("en-SL",{style:"currency",currency:"SLE",minimumFractionDigits:2}).format(re),k=(i==null?void 0:i.canWithdraw)||!1,D=(i==null?void 0:i.canWithdrawWithPenalty)||!1,$=(i==null?void 0:i.penaltyPercent)||0,L=parseFloat(c)||0,B=p?L*($/100):0,T=L-B,O=()=>{const re={};return!c||L<=0?re.amount="Amount is required":L>r.currentBalance&&(re.amount="Amount exceeds pot balance"),u||(re.destinationWalletId="Please select a destination wallet"),!k&&!p&&(re.eligibility="Withdrawal not allowed. Enable early withdrawal with penalty."),j(re),Object.keys(re).length===0},q=h.useCallback(()=>E.current?E.current.offsetWidth-64-8:200,[]),K=h.useCallback(re=>{if(!A.current||!E.current||n.isPending)return;const ie=E.current.getBoundingClientRect(),Y=q(),H=Math.max(0,Math.min(re-ie.left-32,Y))/Y*100;w(H),R.current=H},[n.isPending,q]),le=h.useCallback(async()=>{if(!A.current)return;const re=R.current;if(A.current=!1,C(!1),re>=I&&!n.isPending){if(!O()){w(0);return}_(!0),w(100);try{await n.mutateAsync({potId:r.id,destinationWalletId:u,amount:L,forceWithPenalty:!k&&p,description:g||void 0}),a==null||a(),setTimeout(s,500)}catch(ie){j({submit:ie.message||"Failed to withdraw"}),_(!1),w(0)}}else w(0)},[n,r.id,u,L,k,p,g,a,s]),X=h.useCallback(re=>{n.isPending||S||(A.current=!0,C(!0))},[n.isPending,S]),se=re=>{re.preventDefault(),X(re.clientX)},de=re=>{X(re.touches[0].clientX)};h.useEffect(()=>{const re=H=>{A.current&&K(H.clientX)},ie=()=>{A.current&&le()},Y=H=>{A.current&&H.touches[0]&&K(H.touches[0].clientX)},G=()=>{A.current&&le()};return window.addEventListener("mousemove",re),window.addEventListener("mouseup",ie),window.addEventListener("touchmove",Y,{passive:!0}),window.addEventListener("touchend",G),()=>{window.removeEventListener("mousemove",re),window.removeEventListener("mouseup",ie),window.removeEventListener("touchmove",Y),window.removeEventListener("touchend",G)}},[K,le]);const fe=v/100*q(),z=c&&L>0&&u&&(k||p);return t?e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[e.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:s}),e.jsxs("div",{className:"relative bg-white rounded-2xl shadow-xl w-full max-w-md mx-4 overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full flex items-center justify-center",style:{backgroundColor:`${r.color||"#4F46E5"}15`},children:e.jsx(la,{className:"w-5 h-5",style:{color:r.color||"#4F46E5"}})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Withdraw from Pot"}),e.jsx("p",{className:"text-sm text-gray-500",children:r.name})]})]}),e.jsx("button",{onClick:s,className:"p-2 hover:bg-gray-100 rounded-full transition-colors",children:e.jsx(lt,{className:"w-5 h-5 text-gray-500"})})]}),e.jsx("div",{className:"p-6 space-y-6 max-h-[60vh] overflow-y-auto",children:l?e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsx(Ie,{className:"w-8 h-8 text-primary-600 animate-spin"})}):e.jsxs(e.Fragment,{children:[!k&&e.jsx("div",{className:oe("p-4 rounded-xl",D?"bg-amber-50":"bg-red-50"),children:e.jsxs("div",{className:"flex items-start gap-3",children:[D?e.jsx(Lt,{className:"w-5 h-5 text-amber-600 flex-shrink-0 mt-0.5"}):e.jsx(Xs,{className:"w-5 h-5 text-red-600 flex-shrink-0 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:oe("font-medium",D?"text-amber-800":"text-red-800"),children:(i==null?void 0:i.reason)||"Withdrawal not available"}),D&&e.jsxs("p",{className:"text-sm text-amber-700 mt-1",children:["Early withdrawal incurs a ",$,"% penalty fee."]}),(i==null?void 0:i.daysUntilUnlock)&&i.daysUntilUnlock>0&&e.jsxs("p",{className:"text-sm text-amber-700 mt-1",children:[i.daysUntilUnlock," days until maturity."]})]})]})}),e.jsxs("div",{className:"p-4 rounded-xl bg-gray-50",children:[e.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Available Balance"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:P(r.currentBalance)})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[e.jsx(jt,{className:"w-4 h-4 inline mr-1"}),"To Wallet"]}),e.jsxs("select",{value:u,onChange:re=>m(re.target.value),className:oe("w-full px-4 py-3 rounded-xl border transition-colors",b.destinationWalletId?"border-red-300 focus:border-red-500":"border-gray-300 focus:border-primary-500"),children:[e.jsx("option",{value:"",children:"Select wallet"}),N.map(re=>e.jsxs("option",{value:re.id,children:["Wallet (",re.currency,") - ",P(re.balance)]},re.id))]}),b.destinationWalletId&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:b.destinationWalletId})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Amount"}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-500 font-medium",children:"SLE"}),e.jsx("input",{type:"number",value:c,onChange:re=>d(re.target.value),placeholder:"0.00",min:"0",max:r.currentBalance,step:"0.01",className:oe("w-full pl-14 pr-4 py-4 text-2xl font-semibold rounded-xl border transition-colors",b.amount?"border-red-300 focus:border-red-500":"border-gray-300 focus:border-primary-500")})]}),b.amount&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:b.amount})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{type:"button",onClick:()=>d((r.currentBalance*.25).toFixed(2)),className:"flex-1 py-2 rounded-lg text-sm font-medium bg-gray-100 text-gray-700 hover:bg-gray-200 transition-colors",children:"25%"}),e.jsx("button",{type:"button",onClick:()=>d((r.currentBalance*.5).toFixed(2)),className:"flex-1 py-2 rounded-lg text-sm font-medium bg-gray-100 text-gray-700 hover:bg-gray-200 transition-colors",children:"50%"}),e.jsx("button",{type:"button",onClick:()=>d((r.currentBalance*.75).toFixed(2)),className:"flex-1 py-2 rounded-lg text-sm font-medium bg-gray-100 text-gray-700 hover:bg-gray-200 transition-colors",children:"75%"}),e.jsx("button",{type:"button",onClick:()=>d(r.currentBalance.toFixed(2)),className:"flex-1 py-2 rounded-lg text-sm font-medium bg-gray-100 text-gray-700 hover:bg-gray-200 transition-colors",children:"Max"})]}),!k&&D&&e.jsxs("div",{className:"flex items-center justify-between p-4 rounded-xl border border-amber-200 bg-amber-50",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-amber-800",children:"Enable early withdrawal"}),e.jsxs("p",{className:"text-sm text-amber-700",children:[$,"% penalty will be deducted"]})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:p,onChange:re=>x(re.target.checked),className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-amber-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-amber-500"})]})]}),L>0&&e.jsxs("div",{className:"p-4 rounded-xl bg-gray-50 space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Withdrawal amount"}),e.jsx("span",{className:"font-medium",children:P(L)})]}),B>0&&e.jsxs("div",{className:"flex justify-between text-sm text-amber-600",children:[e.jsxs("span",{children:["Penalty (",$,"%)"]}),e.jsxs("span",{children:["-",P(B)]})]}),e.jsxs("div",{className:"flex justify-between text-base font-semibold border-t border-gray-200 pt-2 mt-2",children:[e.jsx("span",{children:"You'll receive"}),e.jsx("span",{className:"text-green-600",children:P(T)})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Note (Optional)"}),e.jsx("input",{type:"text",value:g,onChange:re=>f(re.target.value),placeholder:"e.g., Emergency expense",className:"w-full px-4 py-3 rounded-xl border border-gray-300 focus:border-primary-500 transition-colors"})]}),(b.submit||b.eligibility)&&e.jsx("div",{className:"p-4 bg-red-50 rounded-xl",children:e.jsx("p",{className:"text-sm text-red-600",children:b.submit||b.eligibility})})]})}),!l&&e.jsx("div",{className:"p-6 border-t border-gray-200 bg-gray-50",children:e.jsxs("div",{ref:E,className:oe("relative h-16 rounded-2xl overflow-hidden select-none",z?"cursor-grab":"opacity-50 cursor-not-allowed",S?"bg-green-500":"bg-gradient-to-r from-primary-600 to-primary-500"),children:[e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsx("div",{className:"flex items-center gap-2 text-white/80 font-medium",children:n.isPending?e.jsxs(e.Fragment,{children:[e.jsx(Ie,{className:"w-5 h-5 animate-spin"}),e.jsx("span",{children:"Processing..."})]}):S?e.jsxs(e.Fragment,{children:[e.jsx(Rs,{className:"w-5 h-5"}),e.jsx("span",{children:"Withdrawn!"})]}):e.jsxs(e.Fragment,{children:[e.jsxs("span",{children:["Slide to withdraw"," ",c?P(T):"amount"]}),e.jsx(Vs,{className:"w-5 h-5 animate-pulse"})]})})}),e.jsx("div",{className:oe("absolute inset-y-0 left-0 transition-all duration-100",S?"bg-green-600":"bg-primary-700/30"),style:{width:`${v}%`}}),e.jsx("div",{onMouseDown:se,onTouchStart:de,className:oe("absolute top-1 bottom-1 left-1 w-14 rounded-xl flex items-center justify-center",y?"cursor-grabbing scale-105":"cursor-grab",S?"bg-white":"bg-white shadow-lg",!z||n.isPending?"pointer-events-none":""),style:{transform:`translateX(${fe}px)`,transition:y?"none":"transform 0.3s ease-out"},children:n.isPending?e.jsx(Ie,{className:"w-6 h-6 text-primary-600 animate-spin"}):S?e.jsx(Rs,{className:"w-6 h-6 text-green-600"}):e.jsx(la,{className:"w-6 h-6 text-primary-600"})})]})})]})]}):null}const IQ="https://api.peeap.com";function MQ(){const t={},s=localStorage.getItem("accessToken");if(s){t.Authorization=`Bearer ${s}`;try{const r=JSON.parse(atob(s));r.userId&&(t["x-user-id"]=r.userId)}catch{}}return t}async function $p(t,s={}){const{params:r,...a}=s;let n=`${IQ}${t}`;if(r){const l=new URLSearchParams(r);n+=`?${l.toString()}`}const i=await fetch(n,{...a,headers:{"Content-Type":"application/json",...MQ(),...a.headers}});if(!i.ok){const l=await i.json().catch(()=>({message:i.statusText}));throw new Error(l.message||`HTTP error ${i.status}`)}return i.json()}const wd={get(t,s){return $p(t,{...s,method:"GET"})},post(t,s,r){return $p(t,{...r,method:"POST",body:s?JSON.stringify(s):void 0})},put(t,s,r){return $p(t,{...r,method:"PUT",body:s?JSON.stringify(s):void 0})},delete(t,s){return $p(t,{...s,method:"DELETE"})}},LQ=(t,s)=>t,P5=(t,s)=>t,FQ={async initiateDeposit(t){return await wd.post("/monime/deposit",{...t,amount:t.amount,currency:t.currency||"SLE",method:t.method||"CHECKOUT_SESSION"})},async initiateWithdraw(t){return await wd.post("/monime/withdraw",{...t,amount:t.amount,currency:t.currency||"SLE"})},async getTransaction(t){return await wd.get(`/monime/transactions/${t}`)},async getTransactions(t){const s=t?`?type=${t}`:"";return await wd.get(`/monime/transactions${s}`)},async getBanks(){return(await wd.get("/monime/banks")).result||[]},async pollTransactionStatus(t,s,r){const{interval:a=3e3,maxAttempts:n=60,stopStatuses:i=["completed","failed","expired","cancelled"]}=r||{};let l=0;return new Promise((o,c)=>{const d=async()=>{try{const u=await this.getTransaction(t);if(s(u),i.includes(u.status)){o(u);return}if(l++,l>=n){c(new Error("Polling timeout - transaction still pending"));return}setTimeout(d,a)}catch(u){c(u)}};d()})},openCheckout(t,s){const r=(s==null?void 0:s.target)||"_blank";window.open(t,r)},formatUssdCode(t){return t.startsWith("*")?t:`*${t}`},dialUssd(t){const s=t.replace("#","%23");window.location.href=`tel:${s}`},async getAllDeposits(t=50,s=0){return await wd.get(`/monime/deposits?limit=${t}&offset=${s}`)}};var Qf={},iD={exports:{}},OQ="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",BQ=OQ,$Q=BQ;function lD(){}function oD(){}oD.resetWarningCache=lD;var UQ=function(){function t(a,n,i,l,o,c){if(c!==$Q){var d=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw d.name="Invariant Violation",d}}t.isRequired=t;function s(){return t}var r={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:s,element:t,elementType:t,instanceOf:s,node:t,objectOf:s,oneOf:s,oneOfType:s,shape:s,exact:s,checkPropTypes:oD,resetWarningCache:lD};return r.PropTypes=r,r};iD.exports=UQ();var cD=iD.exports,dD={L:1,M:0,Q:3,H:2},uD={MODE_NUMBER:1,MODE_ALPHA_NUM:2,MODE_8BIT_BYTE:4,MODE_KANJI:8},VQ=uD;function mD(t){this.mode=VQ.MODE_8BIT_BYTE,this.data=t}mD.prototype={getLength:function(t){return this.data.length},write:function(t){for(var s=0;s<this.data.length;s++)t.put(this.data.charCodeAt(s),8)}};var qQ=mD,Up=dD;function _i(t,s){this.totalCount=t,this.dataCount=s}_i.RS_BLOCK_TABLE=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]];_i.getRSBlocks=function(t,s){var r=_i.getRsBlockTable(t,s);if(r==null)throw new Error("bad rs block @ typeNumber:"+t+"/errorCorrectLevel:"+s);for(var a=r.length/3,n=new Array,i=0;i<a;i++)for(var l=r[i*3+0],o=r[i*3+1],c=r[i*3+2],d=0;d<l;d++)n.push(new _i(o,c));return n};_i.getRsBlockTable=function(t,s){switch(s){case Up.L:return _i.RS_BLOCK_TABLE[(t-1)*4+0];case Up.M:return _i.RS_BLOCK_TABLE[(t-1)*4+1];case Up.Q:return _i.RS_BLOCK_TABLE[(t-1)*4+2];case Up.H:return _i.RS_BLOCK_TABLE[(t-1)*4+3];default:return}};var WQ=_i;function hD(){this.buffer=new Array,this.length=0}hD.prototype={get:function(t){var s=Math.floor(t/8);return(this.buffer[s]>>>7-t%8&1)==1},put:function(t,s){for(var r=0;r<s;r++)this.putBit((t>>>s-r-1&1)==1)},getLengthInBits:function(){return this.length},putBit:function(t){var s=Math.floor(this.length/8);this.buffer.length<=s&&this.buffer.push(0),t&&(this.buffer[s]|=128>>>this.length%8),this.length++}};var zQ=hD,ai={glog:function(t){if(t<1)throw new Error("glog("+t+")");return ai.LOG_TABLE[t]},gexp:function(t){for(;t<0;)t+=255;for(;t>=256;)t-=255;return ai.EXP_TABLE[t]},EXP_TABLE:new Array(256),LOG_TABLE:new Array(256)};for(var Gr=0;Gr<8;Gr++)ai.EXP_TABLE[Gr]=1<<Gr;for(var Gr=8;Gr<256;Gr++)ai.EXP_TABLE[Gr]=ai.EXP_TABLE[Gr-4]^ai.EXP_TABLE[Gr-5]^ai.EXP_TABLE[Gr-6]^ai.EXP_TABLE[Gr-8];for(var Gr=0;Gr<255;Gr++)ai.LOG_TABLE[ai.EXP_TABLE[Gr]]=Gr;var pD=ai,ec=pD;function Px(t,s){if(t.length==null)throw new Error(t.length+"/"+s);for(var r=0;r<t.length&&t[r]==0;)r++;this.num=new Array(t.length-r+s);for(var a=0;a<t.length-r;a++)this.num[a]=t[a+r]}Px.prototype={get:function(t){return this.num[t]},getLength:function(){return this.num.length},multiply:function(t){for(var s=new Array(this.getLength()+t.getLength()-1),r=0;r<this.getLength();r++)for(var a=0;a<t.getLength();a++)s[r+a]^=ec.gexp(ec.glog(this.get(r))+ec.glog(t.get(a)));return new Px(s,0)},mod:function(t){if(this.getLength()-t.getLength()<0)return this;for(var s=ec.glog(this.get(0))-ec.glog(t.get(0)),r=new Array(this.getLength()),a=0;a<this.getLength();a++)r[a]=this.get(a);for(var a=0;a<t.getLength();a++)r[a]^=ec.gexp(ec.glog(t.get(a))+s);return new Px(r,0).mod(t)}};var xD=Px,fn=uD,R5=xD,GQ=pD,Ll={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7},qr={PATTERN_POSITION_TABLE:[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],G15:1335,G18:7973,G15_MASK:21522,getBCHTypeInfo:function(t){for(var s=t<<10;qr.getBCHDigit(s)-qr.getBCHDigit(qr.G15)>=0;)s^=qr.G15<<qr.getBCHDigit(s)-qr.getBCHDigit(qr.G15);return(t<<10|s)^qr.G15_MASK},getBCHTypeNumber:function(t){for(var s=t<<12;qr.getBCHDigit(s)-qr.getBCHDigit(qr.G18)>=0;)s^=qr.G18<<qr.getBCHDigit(s)-qr.getBCHDigit(qr.G18);return t<<12|s},getBCHDigit:function(t){for(var s=0;t!=0;)s++,t>>>=1;return s},getPatternPosition:function(t){return qr.PATTERN_POSITION_TABLE[t-1]},getMask:function(t,s,r){switch(t){case Ll.PATTERN000:return(s+r)%2==0;case Ll.PATTERN001:return s%2==0;case Ll.PATTERN010:return r%3==0;case Ll.PATTERN011:return(s+r)%3==0;case Ll.PATTERN100:return(Math.floor(s/2)+Math.floor(r/3))%2==0;case Ll.PATTERN101:return s*r%2+s*r%3==0;case Ll.PATTERN110:return(s*r%2+s*r%3)%2==0;case Ll.PATTERN111:return(s*r%3+(s+r)%2)%2==0;default:throw new Error("bad maskPattern:"+t)}},getErrorCorrectPolynomial:function(t){for(var s=new R5([1],0),r=0;r<t;r++)s=s.multiply(new R5([1,GQ.gexp(r)],0));return s},getLengthInBits:function(t,s){if(1<=s&&s<10)switch(t){case fn.MODE_NUMBER:return 10;case fn.MODE_ALPHA_NUM:return 9;case fn.MODE_8BIT_BYTE:return 8;case fn.MODE_KANJI:return 8;default:throw new Error("mode:"+t)}else if(s<27)switch(t){case fn.MODE_NUMBER:return 12;case fn.MODE_ALPHA_NUM:return 11;case fn.MODE_8BIT_BYTE:return 16;case fn.MODE_KANJI:return 10;default:throw new Error("mode:"+t)}else if(s<41)switch(t){case fn.MODE_NUMBER:return 14;case fn.MODE_ALPHA_NUM:return 13;case fn.MODE_8BIT_BYTE:return 16;case fn.MODE_KANJI:return 12;default:throw new Error("mode:"+t)}else throw new Error("type:"+s)},getLostPoint:function(t){for(var s=t.getModuleCount(),r=0,a=0;a<s;a++)for(var n=0;n<s;n++){for(var i=0,l=t.isDark(a,n),o=-1;o<=1;o++)if(!(a+o<0||s<=a+o))for(var c=-1;c<=1;c++)n+c<0||s<=n+c||o==0&&c==0||l==t.isDark(a+o,n+c)&&i++;i>5&&(r+=3+i-5)}for(var a=0;a<s-1;a++)for(var n=0;n<s-1;n++){var d=0;t.isDark(a,n)&&d++,t.isDark(a+1,n)&&d++,t.isDark(a,n+1)&&d++,t.isDark(a+1,n+1)&&d++,(d==0||d==4)&&(r+=3)}for(var a=0;a<s;a++)for(var n=0;n<s-6;n++)t.isDark(a,n)&&!t.isDark(a,n+1)&&t.isDark(a,n+2)&&t.isDark(a,n+3)&&t.isDark(a,n+4)&&!t.isDark(a,n+5)&&t.isDark(a,n+6)&&(r+=40);for(var n=0;n<s;n++)for(var a=0;a<s-6;a++)t.isDark(a,n)&&!t.isDark(a+1,n)&&t.isDark(a+2,n)&&t.isDark(a+3,n)&&t.isDark(a+4,n)&&!t.isDark(a+5,n)&&t.isDark(a+6,n)&&(r+=40);for(var u=0,n=0;n<s;n++)for(var a=0;a<s;a++)t.isDark(a,n)&&u++;var m=Math.abs(100*u/s/s-50)/5;return r+=m*10,r}},KQ=qr,HQ=qQ,gD=WQ,fD=zQ,zo=KQ,YQ=xD;function Pi(t,s){this.typeNumber=t,this.errorCorrectLevel=s,this.modules=null,this.moduleCount=0,this.dataCache=null,this.dataList=[]}var un=Pi.prototype;un.addData=function(t){var s=new HQ(t);this.dataList.push(s),this.dataCache=null};un.isDark=function(t,s){if(t<0||this.moduleCount<=t||s<0||this.moduleCount<=s)throw new Error(t+","+s);return this.modules[t][s]};un.getModuleCount=function(){return this.moduleCount};un.make=function(){if(this.typeNumber<1){var t=1;for(t=1;t<40;t++){for(var s=gD.getRSBlocks(t,this.errorCorrectLevel),r=new fD,a=0,n=0;n<s.length;n++)a+=s[n].dataCount;for(var n=0;n<this.dataList.length;n++){var i=this.dataList[n];r.put(i.mode,4),r.put(i.getLength(),zo.getLengthInBits(i.mode,t)),i.write(r)}if(r.getLengthInBits()<=a*8)break}this.typeNumber=t}this.makeImpl(!1,this.getBestMaskPattern())};un.makeImpl=function(t,s){this.moduleCount=this.typeNumber*4+17,this.modules=new Array(this.moduleCount);for(var r=0;r<this.moduleCount;r++){this.modules[r]=new Array(this.moduleCount);for(var a=0;a<this.moduleCount;a++)this.modules[r][a]=null}this.setupPositionProbePattern(0,0),this.setupPositionProbePattern(this.moduleCount-7,0),this.setupPositionProbePattern(0,this.moduleCount-7),this.setupPositionAdjustPattern(),this.setupTimingPattern(),this.setupTypeInfo(t,s),this.typeNumber>=7&&this.setupTypeNumber(t),this.dataCache==null&&(this.dataCache=Pi.createData(this.typeNumber,this.errorCorrectLevel,this.dataList)),this.mapData(this.dataCache,s)};un.setupPositionProbePattern=function(t,s){for(var r=-1;r<=7;r++)if(!(t+r<=-1||this.moduleCount<=t+r))for(var a=-1;a<=7;a++)s+a<=-1||this.moduleCount<=s+a||(0<=r&&r<=6&&(a==0||a==6)||0<=a&&a<=6&&(r==0||r==6)||2<=r&&r<=4&&2<=a&&a<=4?this.modules[t+r][s+a]=!0:this.modules[t+r][s+a]=!1)};un.getBestMaskPattern=function(){for(var t=0,s=0,r=0;r<8;r++){this.makeImpl(!0,r);var a=zo.getLostPoint(this);(r==0||t>a)&&(t=a,s=r)}return s};un.createMovieClip=function(t,s,r){var a=t.createEmptyMovieClip(s,r),n=1;this.make();for(var i=0;i<this.modules.length;i++)for(var l=i*n,o=0;o<this.modules[i].length;o++){var c=o*n,d=this.modules[i][o];d&&(a.beginFill(0,100),a.moveTo(c,l),a.lineTo(c+n,l),a.lineTo(c+n,l+n),a.lineTo(c,l+n),a.endFill())}return a};un.setupTimingPattern=function(){for(var t=8;t<this.moduleCount-8;t++)this.modules[t][6]==null&&(this.modules[t][6]=t%2==0);for(var s=8;s<this.moduleCount-8;s++)this.modules[6][s]==null&&(this.modules[6][s]=s%2==0)};un.setupPositionAdjustPattern=function(){for(var t=zo.getPatternPosition(this.typeNumber),s=0;s<t.length;s++)for(var r=0;r<t.length;r++){var a=t[s],n=t[r];if(this.modules[a][n]==null)for(var i=-2;i<=2;i++)for(var l=-2;l<=2;l++)i==-2||i==2||l==-2||l==2||i==0&&l==0?this.modules[a+i][n+l]=!0:this.modules[a+i][n+l]=!1}};un.setupTypeNumber=function(t){for(var s=zo.getBCHTypeNumber(this.typeNumber),r=0;r<18;r++){var a=!t&&(s>>r&1)==1;this.modules[Math.floor(r/3)][r%3+this.moduleCount-8-3]=a}for(var r=0;r<18;r++){var a=!t&&(s>>r&1)==1;this.modules[r%3+this.moduleCount-8-3][Math.floor(r/3)]=a}};un.setupTypeInfo=function(t,s){for(var r=this.errorCorrectLevel<<3|s,a=zo.getBCHTypeInfo(r),n=0;n<15;n++){var i=!t&&(a>>n&1)==1;n<6?this.modules[n][8]=i:n<8?this.modules[n+1][8]=i:this.modules[this.moduleCount-15+n][8]=i}for(var n=0;n<15;n++){var i=!t&&(a>>n&1)==1;n<8?this.modules[8][this.moduleCount-n-1]=i:n<9?this.modules[8][15-n-1+1]=i:this.modules[8][15-n-1]=i}this.modules[this.moduleCount-8][8]=!t};un.mapData=function(t,s){for(var r=-1,a=this.moduleCount-1,n=7,i=0,l=this.moduleCount-1;l>0;l-=2)for(l==6&&l--;;){for(var o=0;o<2;o++)if(this.modules[a][l-o]==null){var c=!1;i<t.length&&(c=(t[i]>>>n&1)==1);var d=zo.getMask(s,a,l-o);d&&(c=!c),this.modules[a][l-o]=c,n--,n==-1&&(i++,n=7)}if(a+=r,a<0||this.moduleCount<=a){a-=r,r=-r;break}}};Pi.PAD0=236;Pi.PAD1=17;Pi.createData=function(t,s,r){for(var a=gD.getRSBlocks(t,s),n=new fD,i=0;i<r.length;i++){var l=r[i];n.put(l.mode,4),n.put(l.getLength(),zo.getLengthInBits(l.mode,t)),l.write(n)}for(var o=0,i=0;i<a.length;i++)o+=a[i].dataCount;if(n.getLengthInBits()>o*8)throw new Error("code length overflow. ("+n.getLengthInBits()+">"+o*8+")");for(n.getLengthInBits()+4<=o*8&&n.put(0,4);n.getLengthInBits()%8!=0;)n.putBit(!1);for(;!(n.getLengthInBits()>=o*8||(n.put(Pi.PAD0,8),n.getLengthInBits()>=o*8));)n.put(Pi.PAD1,8);return Pi.createBytes(n,a)};Pi.createBytes=function(t,s){for(var r=0,a=0,n=0,i=new Array(s.length),l=new Array(s.length),o=0;o<s.length;o++){var c=s[o].dataCount,d=s[o].totalCount-c;a=Math.max(a,c),n=Math.max(n,d),i[o]=new Array(c);for(var u=0;u<i[o].length;u++)i[o][u]=255&t.buffer[u+r];r+=c;var m=zo.getErrorCorrectPolynomial(d),p=new YQ(i[o],m.getLength()-1),x=p.mod(m);l[o]=new Array(m.getLength()-1);for(var u=0;u<l[o].length;u++){var g=u+x.getLength()-l[o].length;l[o][u]=g>=0?x.get(g):0}}for(var f=0,u=0;u<s.length;u++)f+=s[u].totalCount;for(var b=new Array(f),j=0,u=0;u<a;u++)for(var o=0;o<s.length;o++)u<i[o].length&&(b[j++]=i[o][u]);for(var u=0;u<n;u++)for(var o=0;o<s.length;o++)u<l[o].length&&(b[j++]=l[o][u]);return b};var QQ=Pi,y2={};Object.defineProperty(y2,"__esModule",{value:!0});var JQ=Object.assign||function(t){for(var s=1;s<arguments.length;s++){var r=arguments[s];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a])}return t},ZQ=cD,yn=bD(ZQ),yD=h,Vp=bD(yD);function bD(t){return t&&t.__esModule?t:{default:t}}function XQ(t,s){var r={};for(var a in t)s.indexOf(a)>=0||Object.prototype.hasOwnProperty.call(t,a)&&(r[a]=t[a]);return r}var eJ={bgColor:yn.default.oneOfType([yn.default.object,yn.default.string]).isRequired,bgD:yn.default.string.isRequired,fgColor:yn.default.oneOfType([yn.default.object,yn.default.string]).isRequired,fgD:yn.default.string.isRequired,size:yn.default.number.isRequired,title:yn.default.string,viewBoxSize:yn.default.number.isRequired,xmlns:yn.default.string},b2=(0,yD.forwardRef)(function(t,s){var r=t.bgColor,a=t.bgD,n=t.fgD,i=t.fgColor,l=t.size,o=t.title,c=t.viewBoxSize,d=t.xmlns,u=d===void 0?"http://www.w3.org/2000/svg":d,m=XQ(t,["bgColor","bgD","fgD","fgColor","size","title","viewBoxSize","xmlns"]);return Vp.default.createElement("svg",JQ({},m,{height:l,ref:s,viewBox:"0 0 "+c+" "+c,width:l,xmlns:u}),o?Vp.default.createElement("title",null,o):null,Vp.default.createElement("path",{d:a,fill:r}),Vp.default.createElement("path",{d:n,fill:i}))});b2.displayName="QRCodeSvg";b2.propTypes=eJ;y2.default=b2;Object.defineProperty(Qf,"__esModule",{value:!0});Qf.QRCode=void 0;var tJ=Object.assign||function(t){for(var s=1;s<arguments.length;s++){var r=arguments[s];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a])}return t},sJ=cD,Yi=M0(sJ),rJ=dD,aJ=M0(rJ),nJ=QQ,iJ=M0(nJ),vD=h,lJ=M0(vD),oJ=y2,cJ=M0(oJ);function M0(t){return t&&t.__esModule?t:{default:t}}function dJ(t,s){var r={};for(var a in t)s.indexOf(a)>=0||Object.prototype.hasOwnProperty.call(t,a)&&(r[a]=t[a]);return r}var uJ={bgColor:Yi.default.oneOfType([Yi.default.object,Yi.default.string]),fgColor:Yi.default.oneOfType([Yi.default.object,Yi.default.string]),level:Yi.default.string,size:Yi.default.number,value:Yi.default.string.isRequired},Jf=(0,vD.forwardRef)(function(t,s){var r=t.bgColor,a=r===void 0?"#FFFFFF":r,n=t.fgColor,i=n===void 0?"#000000":n,l=t.level,o=l===void 0?"L":l,c=t.size,d=c===void 0?256:c,u=t.value,m=dJ(t,["bgColor","fgColor","level","size","value"]),p=new iJ.default(-1,aJ.default[o]);p.addData(u),p.make();var x=p.modules;return lJ.default.createElement(cJ.default,tJ({},m,{bgColor:a,bgD:x.map(function(g,f){return g.map(function(b,j){return b?"":"M "+j+" "+f+" l 1 0 0 1 -1 0 Z"}).join(" ")}).join(" "),fgColor:i,fgD:x.map(function(g,f){return g.map(function(b,j){return b?"M "+j+" "+f+" l 1 0 0 1 -1 0 Z":""}).join(" ")}).join(" "),ref:s,size:d,viewBoxSize:x.length}))});Qf.QRCode=Jf;Jf.displayName="QRCode";Jf.propTypes=uJ;var L0=Qf.default=Jf;class mJ{constructor(){xn(this,"QR_VERSION","1.0");xn(this,"QR_PREFIX","PEEAPPAY")}generateReference(){const s=Date.now().toString(36),r=Math.random().toString(36).substring(2,10);return`QR${s}${r}`.toUpperCase()}getExpiration(s=15){return new Date(Date.now()+s*60*1e3).toISOString()}encodeQRData(s){const r={p:this.QR_PREFIX,v:s.version,t:s.type,u:s.userId,w:s.walletId,a:s.amount,c:s.currency,r:s.reference,e:s.expiresAt,m:s.merchantName,d:s.description},a=Object.fromEntries(Object.entries(r).filter(([n,i])=>i!==void 0));return btoa(JSON.stringify(a))}decodeQRData(s){try{const r=JSON.parse(atob(s));return r.p!==this.QR_PREFIX?null:{type:r.t,version:r.v,userId:r.u,walletId:r.w,amount:r.a,currency:r.c||"USD",reference:r.r,expiresAt:r.e,merchantName:r.m,description:r.d}}catch{return null}}async generateStaticQR(s,r,a){if(!s||!r)throw new Error("userId and walletId are required");const n=this.generateReference(),i=a||(await Ut.getDefaultCurrency()).code,l={type:"payment",version:this.QR_VERSION,userId:s,walletId:r,currency:i,reference:n},o=this.encodeQRData(l),c=`${window.location.origin}/pay?qr=${n}`;try{await U.from("qr_codes").insert({reference:n,user_id:s,wallet_id:r,type:"static",qr_data:o,status:"active"})}catch{console.log("QR codes table not available, skipping database storage")}return{qrData:o,reference:n,expiresAt:"",deepLink:c}}async generateDynamicQR(s,r,a,n,i=15,l){if(!s||!r)throw new Error("userId and walletId are required");const o=this.generateReference(),c=this.getExpiration(i),d=l||(await Ut.getDefaultCurrency()).code,u={type:"request",version:this.QR_VERSION,userId:s,walletId:r,amount:a,currency:d,reference:o,expiresAt:c,description:n},m=this.encodeQRData(u),p=`${window.location.origin}/pay?qr=${o}&amount=${a}`;try{await U.from("qr_codes").insert({reference:o,user_id:s,wallet_id:r,type:"dynamic",amount:a,description:n,qr_data:m,expires_at:c,status:"active"})}catch{console.log("QR codes table not available, skipping database storage")}return{qrData:m,reference:o,expiresAt:c,deepLink:p}}async generateMerchantQR(s,r,a,n,i){const l=this.generateReference(),o=n?this.getExpiration(60):"",c=i||(await Ut.getDefaultCurrency()).code,d={type:"merchant",version:this.QR_VERSION,userId:s,walletId:r,amount:n,currency:c,reference:l,expiresAt:o||void 0,merchantName:a},u=this.encodeQRData(d),m=`${window.location.origin}/pay?merchant=${l}`;try{await U.from("qr_codes").insert({reference:l,user_id:s,wallet_id:r,type:"merchant",amount:n,merchant_name:a,qr_data:u,expires_at:o||null,status:"active"})}catch{}return{qrData:u,reference:l,expiresAt:o,deepLink:m}}async validateQR(s){const r=this.decodeQRData(s);if(!r)return{valid:!1,error:"Invalid QR code format"};if(r.expiresAt&&new Date(r.expiresAt)<new Date)return{valid:!1,expired:!0,error:"QR code has expired"};const{data:a}=await U.from("users").select("id, first_name, last_name").eq("id",r.userId).single();if(!a)return{valid:!1,error:"Recipient not found"};let n=r.walletId;if(!n){const{data:i}=await U.from("wallets").select("id").eq("user_id",r.userId).eq("wallet_type","primary").single();n=i==null?void 0:i.id}return{valid:!0,data:r,recipient:{id:a.id,name:`${a.first_name} ${a.last_name}`,walletId:n||""}}}async validateQRByReference(s){const{data:r}=await U.from("qr_codes").select("*").eq("reference",s).eq("status","active").single();return r?r.expires_at&&new Date(r.expires_at)<new Date?{valid:!1,expired:!0,error:"QR code has expired"}:this.validateQR(r.qr_data):{valid:!1,error:"QR code not found or inactive"}}async markQRAsUsed(s,r){await U.from("qr_codes").update({status:"used",used_at:new Date().toISOString(),transaction_id:r}).eq("reference",s)}}const Rx=new mJ;function jD({userId:t,walletId:s,amount:r,description:a,type:n="static",merchantName:i,onGenerated:l,size:o=200,currency:c}){const[d,u]=h.useState(null),[m,p]=h.useState(!0),[x,g]=h.useState(null),[f,b]=h.useState(!1),[j,v]=h.useState(null),[w,y]=h.useState("");h.useEffect(()=>{(async()=>{if(c){const I=await Ut.getCurrencySymbol(c);y(I)}else{const I=await Ut.getDefaultCurrency();y(I.symbol)}})()},[c]);const C=async()=>{if(p(!0),g(null),!t||!s){g("Missing user or wallet information"),p(!1);return}try{let R;if(n==="dynamic"&&r?R=await Rx.generateDynamicQR(t,s,r,a):n==="merchant"&&i?R=await Rx.generateMerchantQR(t,s,i,r):R=await Rx.generateStaticQR(t,s),u(R),l==null||l(R),R.expiresAt){const I=new Date(R.expiresAt).getTime();v(Math.max(0,Math.floor((I-Date.now())/1e3)))}}catch(R){console.error("Failed to generate QR:",R),g(R.message||"Failed to generate QR code")}finally{p(!1)}};h.useEffect(()=>{C()},[t,s,r,n]),h.useEffect(()=>{if(j===null||j<=0)return;const R=setInterval(()=>{v(I=>I===null||I<=1?(clearInterval(R),0):I-1)},1e3);return()=>clearInterval(R)},[j]);const S=R=>{const I=Math.floor(R/60),N=R%60;return`${I}:${N.toString().padStart(2,"0")}`},_=async()=>{d!=null&&d.deepLink&&(await navigator.clipboard.writeText(d.deepLink),b(!0),setTimeout(()=>b(!1),2e3))},E=async()=>{if(d!=null&&d.deepLink&&navigator.share)try{await navigator.share({title:"Payment Request",text:r?`Pay ${w}${r.toFixed(2)}`:"Send me money",url:d.deepLink})}catch{}};if(m)return e.jsxs("div",{className:"flex flex-col items-center justify-center p-8",children:[e.jsx("div",{className:"w-12 h-12 border-4 border-primary-600 border-t-transparent rounded-full animate-spin mb-4"}),e.jsx("p",{className:"text-gray-500",children:"Generating QR code..."})]});if(!d||x)return e.jsxs("div",{className:"flex flex-col items-center justify-center p-8 text-center",children:[e.jsx(wa,{className:"w-12 h-12 text-gray-300 mb-4"}),e.jsx("p",{className:"text-gray-500 font-medium",children:"Failed to generate QR code"}),x&&e.jsx("p",{className:"text-red-500 text-sm mt-2",children:x}),e.jsx("button",{onClick:C,className:"mt-4 px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700",children:"Try Again"})]});const A=j!==null&&j<=0;return e.jsxs("div",{className:"flex flex-col items-center",children:[r&&e.jsxs("div",{className:"mb-4 text-center",children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Amount to receive"}),e.jsxs("p",{className:"text-3xl font-bold text-gray-900",children:[w,r.toFixed(2)]})]}),e.jsx("div",{className:`p-4 bg-white rounded-xl shadow-lg ${A?"opacity-50":""}`,children:e.jsx(L0,{value:d.qrData,size:o,level:"M",style:{filter:A?"blur(4px)":"none"}})}),j!==null&&e.jsxs("div",{className:`mt-4 flex items-center gap-2 px-3 py-2 rounded-lg ${A?"bg-red-100 text-red-700":j<60?"bg-yellow-100 text-yellow-700":"bg-green-100 text-green-700"}`,children:[e.jsx(it,{className:"w-4 h-4"}),A?e.jsx("span",{children:"QR code expired"}):e.jsxs("span",{children:["Expires in ",S(j)]})]}),e.jsxs("p",{className:"mt-4 text-xs text-gray-400",children:["Ref: ",d.reference]}),e.jsxs("div",{className:"mt-4 flex gap-2",children:[e.jsxs("button",{onClick:C,className:"flex items-center gap-2 px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200",children:[e.jsx(vt,{className:"w-4 h-4"}),"Refresh"]}),e.jsx("button",{onClick:_,className:"flex items-center gap-2 px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200",children:f?e.jsxs(e.Fragment,{children:[e.jsx(be,{className:"w-4 h-4 text-green-600"}),"Copied!"]}):e.jsxs(e.Fragment,{children:[e.jsx(vs,{className:"w-4 h-4"}),"Copy Link"]})}),typeof navigator<"u"&&"share"in navigator&&e.jsxs("button",{onClick:E,className:"flex items-center gap-2 px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700",children:[e.jsx(GT,{className:"w-4 h-4"}),"Share"]})]}),a&&e.jsx("p",{className:"mt-4 text-sm text-gray-500 text-center",children:a})]})}function hJ(){const t=At(),{user:s}=wt(),{data:r,isLoading:a}=qi(),n=aY();nY();const i=iY(),l=oY(),o=cY(),[c,d]=h.useState([]);h.useEffect(()=>{Ut.getCurrencies().then(d)},[]);const u=Q=>{var ee;return((ee=c.find(Ne=>Ne.code===Q))==null?void 0:ee.symbol)||Q},m=(Q,ee)=>`${u(ee)}${Q.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}`,[p,x]=h.useState(!1),[g,f]=h.useState(!1),[b,j]=h.useState(!1),[v,w]=h.useState(!1),[y,C]=h.useState(!1),[S,_]=h.useState(!1),[E,A]=h.useState(null),[R,I]=h.useState(""),[N,P]=h.useState(!1),[k,D]=h.useState(""),[$,L]=h.useState(""),[B,T]=h.useState(""),[O,q]=h.useState(""),[K,le]=h.useState([]),[X,se]=h.useState(null),[de,fe]=h.useState(!1),[z,re]=h.useState(""),[ie,Y]=h.useState(!1),[G,H]=h.useState(!1),ue=async Q=>{if(Q.length<3){le([]);return}fe(!0);try{const{data:ee,error:Ne}=await U.from("users").select("id, email, first_name, last_name").or(`email.ilike.%${Q}%,phone.ilike.%${Q}%`).limit(5);if(Ne){console.error("Error searching recipient:",Ne),le([]);return}le((ee==null?void 0:ee.map(ye=>({id:ye.id,email:ye.email,firstName:ye.first_name,lastName:ye.last_name})))||[])}catch(ee){console.error("Error searching recipient:",ee),le([])}finally{fe(!1)}},me=async()=>{if(!E||!$||!X)return;re("");const Q=parseFloat($);if(Q<=0){re("Amount must be greater than 0");return}if(Q>E.balance){re("Insufficient balance");return}try{await i.mutateAsync({fromWalletId:E.id,toWalletId:X.id,amount:Q,description:B||`Transfer to ${X.firstName} ${X.lastName}`}),Y(!0),setTimeout(()=>{C(!1),ne()},2e3)}catch(ee){re(ee.message||"Transfer failed. Please try again.")}},ne=()=>{L(""),T(""),q(""),le([]),se(null),re(""),Y(!1),A(null)},Ae=Q=>{navigator.clipboard.writeText(Q),H(!0),setTimeout(()=>H(!1),2e3)},Fe=async()=>{try{await n.mutateAsync({currency:"USD"}),f(!1)}catch(Q){console.error("Failed to create wallet:",Q)}},at=async()=>{if(!E||!R)return;const Q=parseFloat(R);if(Q<=0){D("Amount must be greater than 0");return}P(!0),D("");try{const ee=LQ(Q),Ne=await fetch("/api/monime/deposit",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({walletId:E.id,amount:ee,currency:"SLE",userId:s==null?void 0:s.id,description:`Deposit to ${E.currency} wallet`})}),ye=await Ne.json();if(!Ne.ok)throw new Error(ye.error||"Failed to create checkout session");ye.paymentUrl?window.location.href=ye.paymentUrl:D("Failed to get payment URL. Please try again.")}catch(ee){console.error("Failed to initiate deposit:",ee),D(ee.message||"Failed to initiate deposit. Please try again.")}finally{P(!1)}},J=async Q=>{try{Q.status==="FROZEN"?await o.mutateAsync(Q.id):await l.mutateAsync(Q.id)}catch(ee){console.error("Failed to update wallet status:",ee)}};return e.jsxs(ka,{children:[e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Wallets"}),e.jsx("p",{className:"text-gray-500 mt-1",children:"Manage your digital wallets"})]}),e.jsxs("div",{className:"relative",children:[e.jsxs(De,{onClick:()=>x(!p),children:[e.jsx(It,{className:"w-4 h-4 mr-2"}),"Create",e.jsx(zs,{className:oe("w-4 h-4 ml-2 transition-transform",p&&"rotate-180")})]}),p&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 z-10",onClick:()=>x(!1)}),e.jsxs("div",{className:"absolute right-0 top-full mt-2 w-56 bg-white rounded-xl shadow-lg border border-gray-200 py-2 z-20",children:[e.jsxs("button",{onClick:()=>{x(!1),f(!0)},className:"w-full flex items-center gap-3 px-4 py-3 hover:bg-gray-50 transition-colors",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-primary-100 flex items-center justify-center",children:e.jsx(jt,{className:"w-5 h-5 text-primary-600"})}),e.jsxs("div",{className:"text-left",children:[e.jsx("p",{className:"font-medium text-gray-900",children:"Wallet"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Regular spending wallet"})]})]}),e.jsxs("button",{onClick:()=>{x(!1),j(!0)},className:"w-full flex items-center gap-3 px-4 py-3 hover:bg-gray-50 transition-colors",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-green-100 flex items-center justify-center",children:e.jsx(di,{className:"w-5 h-5 text-green-600"})}),e.jsxs("div",{className:"text-left",children:[e.jsx("p",{className:"font-medium text-gray-900",children:"Savings Pot"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Locked savings goal"})]})]})]})]})]})]}),a?e.jsx("div",{className:"text-center py-12",children:"Loading wallets..."}):r&&r.length>0?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:r.map(Q=>e.jsxs(W,{className:"relative",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:oe("w-12 h-12 rounded-full flex items-center justify-center",Q.status==="ACTIVE"?"bg-primary-100":"bg-gray-100"),children:e.jsx(jt,{className:oe("w-6 h-6",Q.status==="ACTIVE"?"text-primary-600":"text-gray-400")})}),e.jsxs("div",{className:"ml-3",children:[e.jsxs("p",{className:"text-sm font-medium text-gray-900",children:[Q.currency," Wallet"]}),e.jsx("p",{className:oe("text-xs",Q.status==="ACTIVE"?"text-green-600":"text-gray-500"),children:Q.status})]})]}),e.jsx("button",{className:"p-1 rounded hover:bg-gray-100",children:e.jsx(nd,{className:"w-5 h-5 text-gray-400"})})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Balance"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:m(Q.balance,Q.currency)})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 mb-4 text-xs text-gray-500",children:[e.jsxs("div",{children:[e.jsx("p",{children:"Daily Limit"}),e.jsx("p",{className:"font-medium text-gray-900",children:m(Q.dailyLimit,Q.currency)})]}),e.jsxs("div",{children:[e.jsx("p",{children:"Monthly Limit"}),e.jsx("p",{className:"font-medium text-gray-900",children:m(Q.monthlyLimit,Q.currency)})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(De,{variant:"outline",size:"sm",className:"flex-1",onClick:()=>{A(Q),w(!0)},disabled:Q.status!=="ACTIVE",children:[e.jsx(Za,{className:"w-4 h-4 mr-1"}),"Deposit"]}),e.jsxs(De,{variant:"outline",size:"sm",className:"flex-1",onClick:()=>{A(Q),C(!0)},disabled:Q.status!=="ACTIVE",children:[e.jsx(xs,{className:"w-4 h-4 mr-1"}),"Send"]}),e.jsx(De,{variant:"outline",size:"sm",onClick:()=>{A(Q),_(!0)},disabled:Q.status!=="ACTIVE",title:"Receive Money",children:e.jsx(wa,{className:"w-4 h-4"})}),e.jsx(De,{variant:"ghost",size:"sm",onClick:()=>J(Q),title:Q.status==="FROZEN"?"Unfreeze":"Freeze",children:e.jsx(tw,{className:oe("w-4 h-4",Q.status==="FROZEN"?"text-blue-500":"text-gray-400")})})]})]},Q.id))}):e.jsxs(W,{className:"text-center py-12",children:[e.jsx(jt,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No wallets yet"}),e.jsx("p",{className:"text-gray-500 mb-6",children:"Create your first wallet or savings pot to get started"}),e.jsxs("div",{className:"flex justify-center gap-4",children:[e.jsxs(De,{onClick:()=>f(!0),children:[e.jsx(jt,{className:"w-4 h-4 mr-2"}),"Create Wallet"]}),e.jsxs(De,{variant:"outline",onClick:()=>j(!0),children:[e.jsx(di,{className:"w-4 h-4 mr-2"}),"Create Pot"]})]})]})]}),g&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:e.jsxs(W,{className:"w-full max-w-md",children:[e.jsx(Sr,{children:e.jsx(_r,{children:"Create New Wallet"})}),e.jsx("p",{className:"text-gray-500 mb-6",children:"A new USD wallet will be created for your account."}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(De,{variant:"outline",className:"flex-1",onClick:()=>f(!1),children:"Cancel"}),e.jsx(De,{className:"flex-1",onClick:Fe,isLoading:n.isPending,children:"Create Wallet"})]})]})}),v&&E&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50 p-4",children:e.jsxs(W,{className:"w-full max-w-md",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:e.jsx(Za,{className:"w-5 h-5 text-green-600"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Add Funds"}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Deposit to ",E.currency," Wallet"]})]})]}),e.jsx("button",{onClick:()=>{w(!1),I(""),D(""),A(null)},className:"p-2 hover:bg-gray-100 rounded-lg",children:e.jsx(lt,{className:"w-5 h-5 text-gray-500"})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Current Balance"}),e.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:["Le ",E.balance.toLocaleString("en-US",{minimumFractionDigits:2})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Amount to Deposit"}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-500",children:"Le"}),e.jsx("input",{type:"number",min:"1",step:"0.01",value:R,onChange:Q=>{I(Q.target.value),D("")},className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"0.00",disabled:N})]}),e.jsx("div",{className:"flex gap-2 mt-2",children:[10,50,100,500].map(Q=>e.jsxs("button",{onClick:()=>I(Q.toString()),className:"flex-1 px-2 py-1 text-sm bg-gray-100 hover:bg-gray-200 rounded text-gray-700",disabled:N,children:["Le ",Q]},Q))})]}),e.jsx("div",{className:"p-3 bg-orange-50 border border-orange-200 rounded-lg",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(Za,{className:"w-4 h-4 text-orange-600 mt-0.5"}),e.jsx("p",{className:"text-sm text-orange-800",children:"Add money with Orange Money"})]})}),k&&e.jsxs("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg flex items-center gap-2 text-red-700",children:[e.jsx(ut,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm",children:k})]}),e.jsxs("div",{className:"flex gap-3 pt-2",children:[e.jsx(De,{variant:"outline",className:"flex-1",onClick:()=>{w(!1),I(""),D(""),A(null)},disabled:N,children:"Cancel"}),e.jsx(De,{className:"flex-1",onClick:at,disabled:!R||parseFloat(R)<=0||N,children:N?e.jsxs(e.Fragment,{children:[e.jsx(Ie,{className:"w-4 h-4 mr-2 animate-spin"}),"Processing..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Za,{className:"w-4 h-4 mr-2"}),"Deposit Le ",R||"0.00"]})})]})]})]})}),y&&E&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50 p-4",children:e.jsxs(W,{className:"w-full max-w-lg max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-primary-100 rounded-lg",children:e.jsx(Ba,{className:"w-5 h-5 text-primary-600"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Send Money"}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Transfer from ",E.currency," Wallet"]})]})]}),e.jsx("button",{onClick:()=>{C(!1),ne()},className:"p-2 hover:bg-gray-100 rounded-lg",children:e.jsx(lt,{className:"w-5 h-5 text-gray-500"})})]}),ie?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(be,{className:"w-8 h-8 text-green-600"})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Transfer Successful!"}),e.jsxs("p",{className:"text-gray-500",children:[u(E.currency),$," has been sent to ",X==null?void 0:X.firstName," ",X==null?void 0:X.lastName]})]}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Available Balance"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:m(E.balance,E.currency)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Send to (Email or Phone)"}),X?e.jsxs("div",{className:"flex items-center justify-between p-3 bg-primary-50 border border-primary-200 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-primary-100 rounded-full flex items-center justify-center",children:e.jsx(Es,{className:"w-5 h-5 text-primary-600"})}),e.jsxs("div",{children:[e.jsxs("p",{className:"font-medium text-gray-900",children:[X.firstName," ",X.lastName]}),e.jsx("p",{className:"text-sm text-gray-500",children:X.email})]})]}),e.jsx("button",{onClick:()=>se(null),className:"p-1 hover:bg-primary-100 rounded",children:e.jsx(lt,{className:"w-4 h-4 text-gray-500"})})]}):e.jsxs("div",{className:"relative",children:[e.jsx(ts,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),e.jsx("input",{type:"text",value:O,onChange:Q=>{q(Q.target.value),ue(Q.target.value)},className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"Search by email or phone..."}),de&&e.jsx("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2",children:e.jsx("div",{className:"w-4 h-4 border-2 border-primary-600 border-t-transparent rounded-full animate-spin"})}),K.length>0&&!X&&e.jsx("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-200 rounded-lg shadow-lg max-h-48 overflow-y-auto",children:K.map(Q=>e.jsxs("button",{onClick:()=>{se(Q),q(""),le([])},className:"w-full flex items-center gap-3 p-3 hover:bg-gray-50 text-left",children:[e.jsx("div",{className:"w-8 h-8 bg-gray-100 rounded-full flex items-center justify-center",children:e.jsx(Es,{className:"w-4 h-4 text-gray-500"})}),e.jsxs("div",{children:[e.jsxs("p",{className:"font-medium text-gray-900",children:[Q.firstName," ",Q.lastName]}),e.jsx("p",{className:"text-sm text-gray-500",children:Q.email})]})]},Q.id))})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Amount"}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-500",children:u(E.currency)}),e.jsx("input",{type:"number",min:"0",step:"0.01",value:$,onChange:Q=>L(Q.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"0.00"})]}),e.jsx("div",{className:"flex gap-2 mt-2",children:[10,25,50,100].map(Q=>e.jsxs("button",{onClick:()=>L(Q.toString()),className:"flex-1 px-2 py-1 text-sm bg-gray-100 hover:bg-gray-200 rounded text-gray-700",children:[u(E.currency),Q]},Q))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Note (Optional)"}),e.jsx("input",{type:"text",value:B,onChange:Q=>T(Q.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"What's this for?"})]}),z&&e.jsxs("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg flex items-center gap-2 text-red-700",children:[e.jsx(ut,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm",children:z})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx(De,{variant:"outline",className:"flex-1",onClick:()=>{C(!1),ne()},children:"Cancel"}),e.jsxs(De,{className:"flex-1",onClick:me,isLoading:i.isPending,disabled:!X||!$||parseFloat($)<=0,children:[e.jsx(Ba,{className:"w-4 h-4 mr-2"}),"Send ",u(E.currency),$||"0.00"]})]})]})]})}),S&&E&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50 p-4",children:e.jsxs(W,{className:"w-full max-w-md",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:e.jsx(Za,{className:"w-5 h-5 text-green-600"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Receive Money"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Share your wallet details"})]})]}),e.jsx("button",{onClick:()=>_(!1),className:"p-2 hover:bg-gray-100 rounded-lg",children:e.jsx(lt,{className:"w-5 h-5 text-gray-500"})})]}),e.jsxs("div",{className:"space-y-4",children:[s&&e.jsx("div",{className:"flex justify-center p-4 bg-gray-50 rounded-lg",children:e.jsx(jD,{userId:s.id,walletId:E.id,type:"static",size:180,currency:E.currency})}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Your Wallet ID"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"text",readOnly:!0,value:E.id,className:"flex-1 px-3 py-2 bg-gray-50 border border-gray-300 rounded-lg font-mono text-sm"}),e.jsx(De,{variant:"outline",onClick:()=>Ae(E.id),children:G?e.jsx(be,{className:"w-4 h-4 text-green-600"}):e.jsx(vs,{className:"w-4 h-4"})})]})]}),e.jsx("p",{className:"text-sm text-gray-500 text-center",children:"Scan this QR code or share your wallet ID to receive money"}),e.jsx(De,{className:"w-full",onClick:()=>_(!1),children:"Done"})]})]})}),e.jsx(aD,{isOpen:b,onClose:()=>j(!1),onSuccess:()=>{j(!1),t("/pots")}})]})}function pJ(){const{data:t,isLoading:s}=Kf(),{data:r}=qi(),[a,n]=h.useState(null);h.useEffect(()=>{Ut.getDefaultCurrency().then(n)},[]);const i=(a==null?void 0:a.symbol)||"",l=mY(),o=FR(),c=OR(),d=LR(),[u,m]=h.useState(!1),[p,x]=h.useState(null),[g,f]=h.useState({walletId:"",type:"VIRTUAL",cardholderName:""}),b=async()=>{try{await l.mutateAsync(g),m(!1),f({walletId:"",type:"VIRTUAL",cardholderName:""})}catch(y){console.error("Failed to create card:",y)}},j=async y=>{try{y.status==="BLOCKED"?await c.mutateAsync(y.id):await o.mutateAsync(y.id)}catch(C){console.error("Failed to update card status:",C)}},v=async y=>{try{await d.mutateAsync(y)}catch(C){console.error("Failed to activate card:",C)}},w=(y,C)=>{const S=["from-blue-600 to-blue-800","from-purple-600 to-purple-800","from-indigo-600 to-indigo-800","from-teal-600 to-teal-800"];return y==="PHYSICAL"?"from-gray-700 to-gray-900":S[C%S.length]};return e.jsxs(ka,{children:[e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Cards"}),e.jsx("p",{className:"text-gray-500 mt-1",children:"Manage your virtual and physical cards"})]}),e.jsxs(De,{onClick:()=>m(!0),children:[e.jsx(It,{className:"w-4 h-4 mr-2"}),"New Card"]})]}),s?e.jsx("div",{className:"text-center py-12",children:"Loading cards..."}):t&&t.length>0?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.map((y,C)=>e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:oe("relative aspect-[1.586/1] rounded-xl p-6 text-white bg-gradient-to-br shadow-lg",w(y.type,C),y.status!=="ACTIVE"&&"opacity-60"),children:[y.status==="BLOCKED"&&e.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-50 rounded-xl flex items-center justify-center",children:e.jsx(Xs,{className:"w-12 h-12"})}),e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"text-xs uppercase tracking-wider opacity-80",children:[y.type," Card"]}),e.jsx("p",{className:"text-sm mt-1 opacity-90",children:y.cardholderName})]}),e.jsx(Je,{className:"w-8 h-8"})]}),e.jsxs("div",{className:"absolute bottom-6 left-6 right-6",children:[e.jsx("p",{className:"text-lg tracking-widest font-mono",children:p===y.id?y.cardNumber:y.maskedNumber||"   "}),e.jsxs("div",{className:"flex justify-between mt-2",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs opacity-70",children:"Expires"}),e.jsxs("p",{className:"text-sm",children:[String(y.expiryMonth).padStart(2,"0"),"/",String(y.expiryYear).slice(-2)]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-xs opacity-70",children:"Status"}),e.jsx("p",{className:"text-sm",children:y.status})]})]})]})]}),e.jsx(W,{padding:"sm",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm",children:[e.jsx("p",{className:"text-gray-500",children:"Daily Limit"}),e.jsxs("p",{className:"font-medium",children:[i,y.dailyLimit.toLocaleString()]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(De,{variant:"ghost",size:"sm",onClick:()=>x(p===y.id?null:y.id),title:p===y.id?"Hide details":"Show details",children:p===y.id?e.jsx(Ln,{className:"w-4 h-4"}):e.jsx(es,{className:"w-4 h-4"})}),y.status==="INACTIVE"?e.jsx(De,{variant:"outline",size:"sm",onClick:()=>v(y.id),isLoading:d.isPending,children:"Activate"}):e.jsx(De,{variant:"ghost",size:"sm",onClick:()=>j(y),title:y.status==="BLOCKED"?"Unblock":"Block",children:y.status==="BLOCKED"?e.jsx(A0,{className:"w-4 h-4 text-green-500"}):e.jsx(Xs,{className:"w-4 h-4 text-red-500"})}),e.jsx(De,{variant:"ghost",size:"sm",children:e.jsx(nd,{className:"w-4 h-4"})})]})]})})]},y.id))}):e.jsxs(W,{className:"text-center py-12",children:[e.jsx(Je,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No cards yet"}),e.jsx("p",{className:"text-gray-500 mb-4",children:"Create your first card to start making payments"}),e.jsxs(De,{onClick:()=>m(!0),children:[e.jsx(It,{className:"w-4 h-4 mr-2"}),"Create Card"]})]})]}),u&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:e.jsxs(W,{className:"w-full max-w-md",children:[e.jsx(Sr,{children:e.jsx(_r,{children:"Create New Card"})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Wallet"}),e.jsxs("select",{value:g.walletId,onChange:y=>f({...g,walletId:y.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",children:[e.jsx("option",{value:"",children:"Select a wallet"}),r==null?void 0:r.map(y=>e.jsxs("option",{value:y.id,children:[y.currency," Wallet - ",i,y.balance.toLocaleString()]},y.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Card Type"}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",name:"cardType",value:"VIRTUAL",checked:g.type==="VIRTUAL",onChange:()=>f({...g,type:"VIRTUAL"}),className:"mr-2"}),"Virtual"]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",name:"cardType",value:"PHYSICAL",checked:g.type==="PHYSICAL",onChange:()=>f({...g,type:"PHYSICAL"}),className:"mr-2"}),"Physical"]})]})]}),e.jsx(_n,{label:"Cardholder Name",value:g.cardholderName,onChange:y=>f({...g,cardholderName:y.target.value}),placeholder:"Name as it appears on card"}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx(De,{variant:"outline",className:"flex-1",onClick:()=>{m(!1),f({walletId:"",type:"VIRTUAL",cardholderName:""})},children:"Cancel"}),e.jsx(De,{className:"flex-1",onClick:b,isLoading:l.isPending,disabled:!g.walletId||!g.cardholderName,children:"Create Card"})]})]})]})})]})}function xJ(){var j;const{data:t}=qi(),[s,r]=h.useState(""),[a,n]=h.useState(""),[i,l]=h.useState(1),{data:o,isLoading:c}=lY(s||((j=t==null?void 0:t[0])==null?void 0:j.id)||"",i,10),d=(o==null?void 0:o.data)||[],u=(o==null?void 0:o.totalPages)||1,m=v=>{switch(v){case"DEPOSIT":return e.jsx(Za,{className:"w-5 h-5 text-green-600"});case"WITHDRAWAL":case"PAYMENT":return e.jsx(xs,{className:"w-5 h-5 text-red-600"});case"TRANSFER":return e.jsx(xs,{className:"w-5 h-5 text-blue-600"});case"REFUND":return e.jsx(Za,{className:"w-5 h-5 text-purple-600"});default:return e.jsx(xs,{className:"w-5 h-5 text-gray-600"})}},p=v=>{switch(v){case"DEPOSIT":return"bg-green-100";case"WITHDRAWAL":case"PAYMENT":return"bg-red-100";case"TRANSFER":return"bg-blue-100";case"REFUND":return"bg-purple-100";default:return"bg-gray-100"}},x=v=>{switch(v){case"DEPOSIT":case"REFUND":return"text-green-600";case"WITHDRAWAL":case"PAYMENT":return"text-red-600";case"TRANSFER":return"text-blue-600";default:return"text-gray-900"}},g=v=>{switch(v){case"DEPOSIT":case"REFUND":return"+";default:return"-"}},f=v=>new Date(v).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),b=d.filter(v=>{var w,y;return((w=v.description)==null?void 0:w.toLowerCase().includes(a.toLowerCase()))||((y=v.merchantName)==null?void 0:y.toLowerCase().includes(a.toLowerCase()))||v.type.toLowerCase().includes(a.toLowerCase())});return e.jsx(ka,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Transactions"}),e.jsx("p",{className:"text-gray-500 mt-1",children:"View your transaction history"})]}),e.jsxs(De,{variant:"outline",children:[e.jsx(ws,{className:"w-4 h-4 mr-2"}),"Export"]})]}),e.jsx(W,{padding:"sm",children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx(ts,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search transactions...",value:a,onChange:v=>n(v.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500"})]})}),e.jsx("div",{className:"w-full md:w-64",children:e.jsxs("select",{value:s,onChange:v=>{r(v.target.value),l(1)},className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",children:[e.jsx("option",{value:"",children:"All Wallets"}),t==null?void 0:t.map(v=>e.jsxs("option",{value:v.id,children:[v.currency," Wallet"]},v.id))]})}),e.jsxs(De,{variant:"outline",children:[e.jsx(Bn,{className:"w-4 h-4 mr-2"}),"Filter"]})]})}),e.jsx(W,{padding:"none",children:c?e.jsx("div",{className:"text-center py-12",children:"Loading transactions..."}):b.length>0?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"divide-y divide-gray-100",children:b.map(v=>e.jsxs("div",{className:"flex items-center justify-between p-4 hover:bg-gray-50 transition-colors",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:oe("w-10 h-10 rounded-full flex items-center justify-center",p(v.type)),children:m(v.type)}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:v.merchantName||v.description||v.type}),e.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-500",children:[e.jsx("span",{children:f(v.createdAt)}),e.jsx("span",{className:"w-1 h-1 bg-gray-300 rounded-full"}),e.jsx("span",{children:v.type}),v.merchantCategory&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"w-1 h-1 bg-gray-300 rounded-full"}),e.jsx("span",{children:v.merchantCategory})]})]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:oe("text-sm font-medium",x(v.type)),children:[g(v.type),"$",v.amount.toLocaleString("en-US",{minimumFractionDigits:2})]}),e.jsx("p",{className:oe("text-xs",v.status==="COMPLETED"&&"text-green-600",v.status==="PENDING"&&"text-yellow-600",v.status==="FAILED"&&"text-red-600",v.status==="REVERSED"&&"text-purple-600"),children:v.status})]})]},v.id))}),e.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-t border-gray-100",children:[e.jsxs("p",{className:"text-sm text-gray-500",children:["Page ",i," of ",u]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(De,{variant:"outline",size:"sm",disabled:i===1,onClick:()=>l(i-1),children:"Previous"}),e.jsx(De,{variant:"outline",size:"sm",disabled:i===u,onClick:()=>l(i+1),children:"Next"})]})]})]}):e.jsx("div",{className:"text-center py-12",children:e.jsx("p",{className:"text-gray-500",children:"No transactions found"})})})]})})}const gJ=t=>{const s=["bg-red-500","bg-orange-500","bg-amber-500","bg-yellow-500","bg-lime-500","bg-green-500","bg-emerald-500","bg-teal-500","bg-cyan-500","bg-sky-500","bg-blue-500","bg-indigo-500","bg-violet-500","bg-purple-500","bg-fuchsia-500","bg-pink-500","bg-rose-500"];let r=0;for(let a=0;a<t.length;a++)r=t.charCodeAt(a)+((r<<5)-r);return s[Math.abs(r)%s.length]},D5={xs:"w-6 h-6 text-xs",sm:"w-8 h-8 text-sm",md:"w-10 h-10 text-sm",lg:"w-12 h-12 text-base",xl:"w-16 h-16 text-lg"};function Pw({firstName:t="",lastName:s="",profilePicture:r,size:a="md",className:n}){const i=`${t.charAt(0)}${s.charAt(0)}`.toUpperCase(),l=`${t} ${s}`.trim(),o=gJ(l||"Unknown");return r?e.jsx("img",{src:r,alt:l,className:oe("rounded-full object-cover border-2 border-white shadow-sm",D5[a],n),onError:c=>{var d;c.currentTarget.style.display="none",(d=c.currentTarget.nextElementSibling)==null||d.classList.remove("hidden")}}):e.jsx("div",{className:oe("rounded-full flex items-center justify-center text-white font-semibold shadow-sm",D5[a],o,n),title:l,children:i||"?"})}var F0={},fJ=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then},wD={},mn={};let v2;const yJ=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];mn.getSymbolSize=function(s){if(!s)throw new Error('"version" cannot be null or undefined');if(s<1||s>40)throw new Error('"version" should be in range from 1 to 40');return s*4+17};mn.getSymbolTotalCodewords=function(s){return yJ[s]};mn.getBCHDigit=function(t){let s=0;for(;t!==0;)s++,t>>>=1;return s};mn.setToSJISFunction=function(s){if(typeof s!="function")throw new Error('"toSJISFunc" is not a valid function.');v2=s};mn.isKanjiModeEnabled=function(){return typeof v2<"u"};mn.toSJIS=function(s){return v2(s)};var Zf={};(function(t){t.L={bit:1},t.M={bit:0},t.Q={bit:3},t.H={bit:2};function s(r){if(typeof r!="string")throw new Error("Param is not a string");switch(r.toLowerCase()){case"l":case"low":return t.L;case"m":case"medium":return t.M;case"q":case"quartile":return t.Q;case"h":case"high":return t.H;default:throw new Error("Unknown EC Level: "+r)}}t.isValid=function(a){return a&&typeof a.bit<"u"&&a.bit>=0&&a.bit<4},t.from=function(a,n){if(t.isValid(a))return a;try{return s(a)}catch{return n}}})(Zf);function ND(){this.buffer=[],this.length=0}ND.prototype={get:function(t){const s=Math.floor(t/8);return(this.buffer[s]>>>7-t%8&1)===1},put:function(t,s){for(let r=0;r<s;r++)this.putBit((t>>>s-r-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(t){const s=Math.floor(this.length/8);this.buffer.length<=s&&this.buffer.push(0),t&&(this.buffer[s]|=128>>>this.length%8),this.length++}};var bJ=ND;function O0(t){if(!t||t<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=t,this.data=new Uint8Array(t*t),this.reservedBit=new Uint8Array(t*t)}O0.prototype.set=function(t,s,r,a){const n=t*this.size+s;this.data[n]=r,a&&(this.reservedBit[n]=!0)};O0.prototype.get=function(t,s){return this.data[t*this.size+s]};O0.prototype.xor=function(t,s,r){this.data[t*this.size+s]^=r};O0.prototype.isReserved=function(t,s){return this.reservedBit[t*this.size+s]};var vJ=O0,kD={};(function(t){const s=mn.getSymbolSize;t.getRowColCoords=function(a){if(a===1)return[];const n=Math.floor(a/7)+2,i=s(a),l=i===145?26:Math.ceil((i-13)/(2*n-2))*2,o=[i-7];for(let c=1;c<n-1;c++)o[c]=o[c-1]-l;return o.push(6),o.reverse()},t.getPositions=function(a){const n=[],i=t.getRowColCoords(a),l=i.length;for(let o=0;o<l;o++)for(let c=0;c<l;c++)o===0&&c===0||o===0&&c===l-1||o===l-1&&c===0||n.push([i[o],i[c]]);return n}})(kD);var CD={};const jJ=mn.getSymbolSize,I5=7;CD.getPositions=function(s){const r=jJ(s);return[[0,0],[r-I5,0],[0,r-I5]]};var SD={};(function(t){t.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const s={N1:3,N2:3,N3:40,N4:10};t.isValid=function(n){return n!=null&&n!==""&&!isNaN(n)&&n>=0&&n<=7},t.from=function(n){return t.isValid(n)?parseInt(n,10):void 0},t.getPenaltyN1=function(n){const i=n.size;let l=0,o=0,c=0,d=null,u=null;for(let m=0;m<i;m++){o=c=0,d=u=null;for(let p=0;p<i;p++){let x=n.get(m,p);x===d?o++:(o>=5&&(l+=s.N1+(o-5)),d=x,o=1),x=n.get(p,m),x===u?c++:(c>=5&&(l+=s.N1+(c-5)),u=x,c=1)}o>=5&&(l+=s.N1+(o-5)),c>=5&&(l+=s.N1+(c-5))}return l},t.getPenaltyN2=function(n){const i=n.size;let l=0;for(let o=0;o<i-1;o++)for(let c=0;c<i-1;c++){const d=n.get(o,c)+n.get(o,c+1)+n.get(o+1,c)+n.get(o+1,c+1);(d===4||d===0)&&l++}return l*s.N2},t.getPenaltyN3=function(n){const i=n.size;let l=0,o=0,c=0;for(let d=0;d<i;d++){o=c=0;for(let u=0;u<i;u++)o=o<<1&2047|n.get(d,u),u>=10&&(o===1488||o===93)&&l++,c=c<<1&2047|n.get(u,d),u>=10&&(c===1488||c===93)&&l++}return l*s.N3},t.getPenaltyN4=function(n){let i=0;const l=n.data.length;for(let c=0;c<l;c++)i+=n.data[c];return Math.abs(Math.ceil(i*100/l/5)-10)*s.N4};function r(a,n,i){switch(a){case t.Patterns.PATTERN000:return(n+i)%2===0;case t.Patterns.PATTERN001:return n%2===0;case t.Patterns.PATTERN010:return i%3===0;case t.Patterns.PATTERN011:return(n+i)%3===0;case t.Patterns.PATTERN100:return(Math.floor(n/2)+Math.floor(i/3))%2===0;case t.Patterns.PATTERN101:return n*i%2+n*i%3===0;case t.Patterns.PATTERN110:return(n*i%2+n*i%3)%2===0;case t.Patterns.PATTERN111:return(n*i%3+(n+i)%2)%2===0;default:throw new Error("bad maskPattern:"+a)}}t.applyMask=function(n,i){const l=i.size;for(let o=0;o<l;o++)for(let c=0;c<l;c++)i.isReserved(c,o)||i.xor(c,o,r(n,c,o))},t.getBestMask=function(n,i){const l=Object.keys(t.Patterns).length;let o=0,c=1/0;for(let d=0;d<l;d++){i(d),t.applyMask(d,n);const u=t.getPenaltyN1(n)+t.getPenaltyN2(n)+t.getPenaltyN3(n)+t.getPenaltyN4(n);t.applyMask(d,n),u<c&&(c=u,o=d)}return o}})(SD);var Xf={};const mo=Zf,qp=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],Wp=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];Xf.getBlocksCount=function(s,r){switch(r){case mo.L:return qp[(s-1)*4+0];case mo.M:return qp[(s-1)*4+1];case mo.Q:return qp[(s-1)*4+2];case mo.H:return qp[(s-1)*4+3];default:return}};Xf.getTotalCodewordsCount=function(s,r){switch(r){case mo.L:return Wp[(s-1)*4+0];case mo.M:return Wp[(s-1)*4+1];case mo.Q:return Wp[(s-1)*4+2];case mo.H:return Wp[(s-1)*4+3];default:return}};var _D={},ey={};const bh=new Uint8Array(512),Gg=new Uint8Array(256);(function(){let s=1;for(let r=0;r<255;r++)bh[r]=s,Gg[s]=r,s<<=1,s&256&&(s^=285);for(let r=255;r<512;r++)bh[r]=bh[r-255]})();ey.log=function(s){if(s<1)throw new Error("log("+s+")");return Gg[s]};ey.exp=function(s){return bh[s]};ey.mul=function(s,r){return s===0||r===0?0:bh[Gg[s]+Gg[r]]};(function(t){const s=ey;t.mul=function(a,n){const i=new Uint8Array(a.length+n.length-1);for(let l=0;l<a.length;l++)for(let o=0;o<n.length;o++)i[l+o]^=s.mul(a[l],n[o]);return i},t.mod=function(a,n){let i=new Uint8Array(a);for(;i.length-n.length>=0;){const l=i[0];for(let c=0;c<n.length;c++)i[c]^=s.mul(n[c],l);let o=0;for(;o<i.length&&i[o]===0;)o++;i=i.slice(o)}return i},t.generateECPolynomial=function(a){let n=new Uint8Array([1]);for(let i=0;i<a;i++)n=t.mul(n,new Uint8Array([1,s.exp(i)]));return n}})(_D);const ED=_D;function j2(t){this.genPoly=void 0,this.degree=t,this.degree&&this.initialize(this.degree)}j2.prototype.initialize=function(s){this.degree=s,this.genPoly=ED.generateECPolynomial(this.degree)};j2.prototype.encode=function(s){if(!this.genPoly)throw new Error("Encoder not initialized");const r=new Uint8Array(s.length+this.degree);r.set(s);const a=ED.mod(r,this.genPoly),n=this.degree-a.length;if(n>0){const i=new Uint8Array(this.degree);return i.set(a,n),i}return a};var wJ=j2,AD={},Go={},w2={};w2.isValid=function(s){return!isNaN(s)&&s>=1&&s<=40};var Wi={};const TD="[0-9]+",NJ="[A-Z $%*+\\-./:]+";let n0="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";n0=n0.replace(/u/g,"\\u");const kJ="(?:(?![A-Z0-9 $%*+\\-./:]|"+n0+`)(?:.|[\r
]))+`;Wi.KANJI=new RegExp(n0,"g");Wi.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g");Wi.BYTE=new RegExp(kJ,"g");Wi.NUMERIC=new RegExp(TD,"g");Wi.ALPHANUMERIC=new RegExp(NJ,"g");const CJ=new RegExp("^"+n0+"$"),SJ=new RegExp("^"+TD+"$"),_J=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");Wi.testKanji=function(s){return CJ.test(s)};Wi.testNumeric=function(s){return SJ.test(s)};Wi.testAlphanumeric=function(s){return _J.test(s)};(function(t){const s=w2,r=Wi;t.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},t.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},t.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},t.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},t.MIXED={bit:-1},t.getCharCountIndicator=function(i,l){if(!i.ccBits)throw new Error("Invalid mode: "+i);if(!s.isValid(l))throw new Error("Invalid version: "+l);return l>=1&&l<10?i.ccBits[0]:l<27?i.ccBits[1]:i.ccBits[2]},t.getBestModeForData=function(i){return r.testNumeric(i)?t.NUMERIC:r.testAlphanumeric(i)?t.ALPHANUMERIC:r.testKanji(i)?t.KANJI:t.BYTE},t.toString=function(i){if(i&&i.id)return i.id;throw new Error("Invalid mode")},t.isValid=function(i){return i&&i.bit&&i.ccBits};function a(n){if(typeof n!="string")throw new Error("Param is not a string");switch(n.toLowerCase()){case"numeric":return t.NUMERIC;case"alphanumeric":return t.ALPHANUMERIC;case"kanji":return t.KANJI;case"byte":return t.BYTE;default:throw new Error("Unknown mode: "+n)}}t.from=function(i,l){if(t.isValid(i))return i;try{return a(i)}catch{return l}}})(Go);(function(t){const s=mn,r=Xf,a=Zf,n=Go,i=w2,l=7973,o=s.getBCHDigit(l);function c(p,x,g){for(let f=1;f<=40;f++)if(x<=t.getCapacity(f,g,p))return f}function d(p,x){return n.getCharCountIndicator(p,x)+4}function u(p,x){let g=0;return p.forEach(function(f){const b=d(f.mode,x);g+=b+f.getBitsLength()}),g}function m(p,x){for(let g=1;g<=40;g++)if(u(p,g)<=t.getCapacity(g,x,n.MIXED))return g}t.from=function(x,g){return i.isValid(x)?parseInt(x,10):g},t.getCapacity=function(x,g,f){if(!i.isValid(x))throw new Error("Invalid QR Code version");typeof f>"u"&&(f=n.BYTE);const b=s.getSymbolTotalCodewords(x),j=r.getTotalCodewordsCount(x,g),v=(b-j)*8;if(f===n.MIXED)return v;const w=v-d(f,x);switch(f){case n.NUMERIC:return Math.floor(w/10*3);case n.ALPHANUMERIC:return Math.floor(w/11*2);case n.KANJI:return Math.floor(w/13);case n.BYTE:default:return Math.floor(w/8)}},t.getBestVersionForData=function(x,g){let f;const b=a.from(g,a.M);if(Array.isArray(x)){if(x.length>1)return m(x,b);if(x.length===0)return 1;f=x[0]}else f=x;return c(f.mode,f.getLength(),b)},t.getEncodedBits=function(x){if(!i.isValid(x)||x<7)throw new Error("Invalid QR Code version");let g=x<<12;for(;s.getBCHDigit(g)-o>=0;)g^=l<<s.getBCHDigit(g)-o;return x<<12|g}})(AD);var PD={};const Rw=mn,RD=1335,EJ=21522,M5=Rw.getBCHDigit(RD);PD.getEncodedBits=function(s,r){const a=s.bit<<3|r;let n=a<<10;for(;Rw.getBCHDigit(n)-M5>=0;)n^=RD<<Rw.getBCHDigit(n)-M5;return(a<<10|n)^EJ};var DD={};const AJ=Go;function $u(t){this.mode=AJ.NUMERIC,this.data=t.toString()}$u.getBitsLength=function(s){return 10*Math.floor(s/3)+(s%3?s%3*3+1:0)};$u.prototype.getLength=function(){return this.data.length};$u.prototype.getBitsLength=function(){return $u.getBitsLength(this.data.length)};$u.prototype.write=function(s){let r,a,n;for(r=0;r+3<=this.data.length;r+=3)a=this.data.substr(r,3),n=parseInt(a,10),s.put(n,10);const i=this.data.length-r;i>0&&(a=this.data.substr(r),n=parseInt(a,10),s.put(n,i*3+1))};var TJ=$u;const PJ=Go,iv=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function Uu(t){this.mode=PJ.ALPHANUMERIC,this.data=t}Uu.getBitsLength=function(s){return 11*Math.floor(s/2)+6*(s%2)};Uu.prototype.getLength=function(){return this.data.length};Uu.prototype.getBitsLength=function(){return Uu.getBitsLength(this.data.length)};Uu.prototype.write=function(s){let r;for(r=0;r+2<=this.data.length;r+=2){let a=iv.indexOf(this.data[r])*45;a+=iv.indexOf(this.data[r+1]),s.put(a,11)}this.data.length%2&&s.put(iv.indexOf(this.data[r]),6)};var RJ=Uu;const DJ=Go;function Vu(t){this.mode=DJ.BYTE,typeof t=="string"?this.data=new TextEncoder().encode(t):this.data=new Uint8Array(t)}Vu.getBitsLength=function(s){return s*8};Vu.prototype.getLength=function(){return this.data.length};Vu.prototype.getBitsLength=function(){return Vu.getBitsLength(this.data.length)};Vu.prototype.write=function(t){for(let s=0,r=this.data.length;s<r;s++)t.put(this.data[s],8)};var IJ=Vu;const MJ=Go,LJ=mn;function qu(t){this.mode=MJ.KANJI,this.data=t}qu.getBitsLength=function(s){return s*13};qu.prototype.getLength=function(){return this.data.length};qu.prototype.getBitsLength=function(){return qu.getBitsLength(this.data.length)};qu.prototype.write=function(t){let s;for(s=0;s<this.data.length;s++){let r=LJ.toSJIS(this.data[s]);if(r>=33088&&r<=40956)r-=33088;else if(r>=57408&&r<=60351)r-=49472;else throw new Error("Invalid SJIS character: "+this.data[s]+`
Make sure your charset is UTF-8`);r=(r>>>8&255)*192+(r&255),t.put(r,13)}};var FJ=qu,ID={exports:{}};(function(t){var s={single_source_shortest_paths:function(r,a,n){var i={},l={};l[a]=0;var o=s.PriorityQueue.make();o.push(a,0);for(var c,d,u,m,p,x,g,f,b;!o.empty();){c=o.pop(),d=c.value,m=c.cost,p=r[d]||{};for(u in p)p.hasOwnProperty(u)&&(x=p[u],g=m+x,f=l[u],b=typeof l[u]>"u",(b||f>g)&&(l[u]=g,o.push(u,g),i[u]=d))}if(typeof n<"u"&&typeof l[n]>"u"){var j=["Could not find a path from ",a," to ",n,"."].join("");throw new Error(j)}return i},extract_shortest_path_from_predecessor_list:function(r,a){for(var n=[],i=a;i;)n.push(i),r[i],i=r[i];return n.reverse(),n},find_path:function(r,a,n){var i=s.single_source_shortest_paths(r,a,n);return s.extract_shortest_path_from_predecessor_list(i,n)},PriorityQueue:{make:function(r){var a=s.PriorityQueue,n={},i;r=r||{};for(i in a)a.hasOwnProperty(i)&&(n[i]=a[i]);return n.queue=[],n.sorter=r.sorter||a.default_sorter,n},default_sorter:function(r,a){return r.cost-a.cost},push:function(r,a){var n={value:r,cost:a};this.queue.push(n),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};t.exports=s})(ID);var OJ=ID.exports;(function(t){const s=Go,r=TJ,a=RJ,n=IJ,i=FJ,l=Wi,o=mn,c=OJ;function d(j){return unescape(encodeURIComponent(j)).length}function u(j,v,w){const y=[];let C;for(;(C=j.exec(w))!==null;)y.push({data:C[0],index:C.index,mode:v,length:C[0].length});return y}function m(j){const v=u(l.NUMERIC,s.NUMERIC,j),w=u(l.ALPHANUMERIC,s.ALPHANUMERIC,j);let y,C;return o.isKanjiModeEnabled()?(y=u(l.BYTE,s.BYTE,j),C=u(l.KANJI,s.KANJI,j)):(y=u(l.BYTE_KANJI,s.BYTE,j),C=[]),v.concat(w,y,C).sort(function(_,E){return _.index-E.index}).map(function(_){return{data:_.data,mode:_.mode,length:_.length}})}function p(j,v){switch(v){case s.NUMERIC:return r.getBitsLength(j);case s.ALPHANUMERIC:return a.getBitsLength(j);case s.KANJI:return i.getBitsLength(j);case s.BYTE:return n.getBitsLength(j)}}function x(j){return j.reduce(function(v,w){const y=v.length-1>=0?v[v.length-1]:null;return y&&y.mode===w.mode?(v[v.length-1].data+=w.data,v):(v.push(w),v)},[])}function g(j){const v=[];for(let w=0;w<j.length;w++){const y=j[w];switch(y.mode){case s.NUMERIC:v.push([y,{data:y.data,mode:s.ALPHANUMERIC,length:y.length},{data:y.data,mode:s.BYTE,length:y.length}]);break;case s.ALPHANUMERIC:v.push([y,{data:y.data,mode:s.BYTE,length:y.length}]);break;case s.KANJI:v.push([y,{data:y.data,mode:s.BYTE,length:d(y.data)}]);break;case s.BYTE:v.push([{data:y.data,mode:s.BYTE,length:d(y.data)}])}}return v}function f(j,v){const w={},y={start:{}};let C=["start"];for(let S=0;S<j.length;S++){const _=j[S],E=[];for(let A=0;A<_.length;A++){const R=_[A],I=""+S+A;E.push(I),w[I]={node:R,lastCount:0},y[I]={};for(let N=0;N<C.length;N++){const P=C[N];w[P]&&w[P].node.mode===R.mode?(y[P][I]=p(w[P].lastCount+R.length,R.mode)-p(w[P].lastCount,R.mode),w[P].lastCount+=R.length):(w[P]&&(w[P].lastCount=R.length),y[P][I]=p(R.length,R.mode)+4+s.getCharCountIndicator(R.mode,v))}}C=E}for(let S=0;S<C.length;S++)y[C[S]].end=0;return{map:y,table:w}}function b(j,v){let w;const y=s.getBestModeForData(j);if(w=s.from(v,y),w!==s.BYTE&&w.bit<y.bit)throw new Error('"'+j+'" cannot be encoded with mode '+s.toString(w)+`.
 Suggested mode is: `+s.toString(y));switch(w===s.KANJI&&!o.isKanjiModeEnabled()&&(w=s.BYTE),w){case s.NUMERIC:return new r(j);case s.ALPHANUMERIC:return new a(j);case s.KANJI:return new i(j);case s.BYTE:return new n(j)}}t.fromArray=function(v){return v.reduce(function(w,y){return typeof y=="string"?w.push(b(y,null)):y.data&&w.push(b(y.data,y.mode)),w},[])},t.fromString=function(v,w){const y=m(v,o.isKanjiModeEnabled()),C=g(y),S=f(C,w),_=c.find_path(S.map,"start","end"),E=[];for(let A=1;A<_.length-1;A++)E.push(S.table[_[A]].node);return t.fromArray(x(E))},t.rawSplit=function(v){return t.fromArray(m(v,o.isKanjiModeEnabled()))}})(DD);const ty=mn,lv=Zf,BJ=bJ,$J=vJ,UJ=kD,VJ=CD,Dw=SD,Iw=Xf,qJ=wJ,Kg=AD,WJ=PD,zJ=Go,ov=DD;function GJ(t,s){const r=t.size,a=VJ.getPositions(s);for(let n=0;n<a.length;n++){const i=a[n][0],l=a[n][1];for(let o=-1;o<=7;o++)if(!(i+o<=-1||r<=i+o))for(let c=-1;c<=7;c++)l+c<=-1||r<=l+c||(o>=0&&o<=6&&(c===0||c===6)||c>=0&&c<=6&&(o===0||o===6)||o>=2&&o<=4&&c>=2&&c<=4?t.set(i+o,l+c,!0,!0):t.set(i+o,l+c,!1,!0))}}function KJ(t){const s=t.size;for(let r=8;r<s-8;r++){const a=r%2===0;t.set(r,6,a,!0),t.set(6,r,a,!0)}}function HJ(t,s){const r=UJ.getPositions(s);for(let a=0;a<r.length;a++){const n=r[a][0],i=r[a][1];for(let l=-2;l<=2;l++)for(let o=-2;o<=2;o++)l===-2||l===2||o===-2||o===2||l===0&&o===0?t.set(n+l,i+o,!0,!0):t.set(n+l,i+o,!1,!0)}}function YJ(t,s){const r=t.size,a=Kg.getEncodedBits(s);let n,i,l;for(let o=0;o<18;o++)n=Math.floor(o/3),i=o%3+r-8-3,l=(a>>o&1)===1,t.set(n,i,l,!0),t.set(i,n,l,!0)}function cv(t,s,r){const a=t.size,n=WJ.getEncodedBits(s,r);let i,l;for(i=0;i<15;i++)l=(n>>i&1)===1,i<6?t.set(i,8,l,!0):i<8?t.set(i+1,8,l,!0):t.set(a-15+i,8,l,!0),i<8?t.set(8,a-i-1,l,!0):i<9?t.set(8,15-i-1+1,l,!0):t.set(8,15-i-1,l,!0);t.set(a-8,8,1,!0)}function QJ(t,s){const r=t.size;let a=-1,n=r-1,i=7,l=0;for(let o=r-1;o>0;o-=2)for(o===6&&o--;;){for(let c=0;c<2;c++)if(!t.isReserved(n,o-c)){let d=!1;l<s.length&&(d=(s[l]>>>i&1)===1),t.set(n,o-c,d),i--,i===-1&&(l++,i=7)}if(n+=a,n<0||r<=n){n-=a,a=-a;break}}}function JJ(t,s,r){const a=new BJ;r.forEach(function(c){a.put(c.mode.bit,4),a.put(c.getLength(),zJ.getCharCountIndicator(c.mode,t)),c.write(a)});const n=ty.getSymbolTotalCodewords(t),i=Iw.getTotalCodewordsCount(t,s),l=(n-i)*8;for(a.getLengthInBits()+4<=l&&a.put(0,4);a.getLengthInBits()%8!==0;)a.putBit(0);const o=(l-a.getLengthInBits())/8;for(let c=0;c<o;c++)a.put(c%2?17:236,8);return ZJ(a,t,s)}function ZJ(t,s,r){const a=ty.getSymbolTotalCodewords(s),n=Iw.getTotalCodewordsCount(s,r),i=a-n,l=Iw.getBlocksCount(s,r),o=a%l,c=l-o,d=Math.floor(a/l),u=Math.floor(i/l),m=u+1,p=d-u,x=new qJ(p);let g=0;const f=new Array(l),b=new Array(l);let j=0;const v=new Uint8Array(t.buffer);for(let _=0;_<l;_++){const E=_<c?u:m;f[_]=v.slice(g,g+E),b[_]=x.encode(f[_]),g+=E,j=Math.max(j,E)}const w=new Uint8Array(a);let y=0,C,S;for(C=0;C<j;C++)for(S=0;S<l;S++)C<f[S].length&&(w[y++]=f[S][C]);for(C=0;C<p;C++)for(S=0;S<l;S++)w[y++]=b[S][C];return w}function XJ(t,s,r,a){let n;if(Array.isArray(t))n=ov.fromArray(t);else if(typeof t=="string"){let d=s;if(!d){const u=ov.rawSplit(t);d=Kg.getBestVersionForData(u,r)}n=ov.fromString(t,d||40)}else throw new Error("Invalid data");const i=Kg.getBestVersionForData(n,r);if(!i)throw new Error("The amount of data is too big to be stored in a QR Code");if(!s)s=i;else if(s<i)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+i+`.
`);const l=JJ(s,r,n),o=ty.getSymbolSize(s),c=new $J(o);return GJ(c,s),KJ(c),HJ(c,s),cv(c,r,0),s>=7&&YJ(c,s),QJ(c,l),isNaN(a)&&(a=Dw.getBestMask(c,cv.bind(null,c,r))),Dw.applyMask(a,c),cv(c,r,a),{modules:c,version:s,errorCorrectionLevel:r,maskPattern:a,segments:n}}wD.create=function(s,r){if(typeof s>"u"||s==="")throw new Error("No input text");let a=lv.M,n,i;return typeof r<"u"&&(a=lv.from(r.errorCorrectionLevel,lv.M),n=Kg.from(r.version),i=Dw.from(r.maskPattern),r.toSJISFunc&&ty.setToSJISFunction(r.toSJISFunc)),XJ(s,n,a,i)};var MD={},N2={};(function(t){function s(r){if(typeof r=="number"&&(r=r.toString()),typeof r!="string")throw new Error("Color should be defined as hex string");let a=r.slice().replace("#","").split("");if(a.length<3||a.length===5||a.length>8)throw new Error("Invalid hex color: "+r);(a.length===3||a.length===4)&&(a=Array.prototype.concat.apply([],a.map(function(i){return[i,i]}))),a.length===6&&a.push("F","F");const n=parseInt(a.join(""),16);return{r:n>>24&255,g:n>>16&255,b:n>>8&255,a:n&255,hex:"#"+a.slice(0,6).join("")}}t.getOptions=function(a){a||(a={}),a.color||(a.color={});const n=typeof a.margin>"u"||a.margin===null||a.margin<0?4:a.margin,i=a.width&&a.width>=21?a.width:void 0,l=a.scale||4;return{width:i,scale:i?4:l,margin:n,color:{dark:s(a.color.dark||"#000000ff"),light:s(a.color.light||"#ffffffff")},type:a.type,rendererOpts:a.rendererOpts||{}}},t.getScale=function(a,n){return n.width&&n.width>=a+n.margin*2?n.width/(a+n.margin*2):n.scale},t.getImageWidth=function(a,n){const i=t.getScale(a,n);return Math.floor((a+n.margin*2)*i)},t.qrToImageData=function(a,n,i){const l=n.modules.size,o=n.modules.data,c=t.getScale(l,i),d=Math.floor((l+i.margin*2)*c),u=i.margin*c,m=[i.color.light,i.color.dark];for(let p=0;p<d;p++)for(let x=0;x<d;x++){let g=(p*d+x)*4,f=i.color.light;if(p>=u&&x>=u&&p<d-u&&x<d-u){const b=Math.floor((p-u)/c),j=Math.floor((x-u)/c);f=m[o[b*l+j]?1:0]}a[g++]=f.r,a[g++]=f.g,a[g++]=f.b,a[g]=f.a}}})(N2);(function(t){const s=N2;function r(n,i,l){n.clearRect(0,0,i.width,i.height),i.style||(i.style={}),i.height=l,i.width=l,i.style.height=l+"px",i.style.width=l+"px"}function a(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}t.render=function(i,l,o){let c=o,d=l;typeof c>"u"&&(!l||!l.getContext)&&(c=l,l=void 0),l||(d=a()),c=s.getOptions(c);const u=s.getImageWidth(i.modules.size,c),m=d.getContext("2d"),p=m.createImageData(u,u);return s.qrToImageData(p.data,i,c),r(m,d,u),m.putImageData(p,0,0),d},t.renderToDataURL=function(i,l,o){let c=o;typeof c>"u"&&(!l||!l.getContext)&&(c=l,l=void 0),c||(c={});const d=t.render(i,l,c),u=c.type||"image/png",m=c.rendererOpts||{};return d.toDataURL(u,m.quality)}})(MD);var LD={};const eZ=N2;function L5(t,s){const r=t.a/255,a=s+'="'+t.hex+'"';return r<1?a+" "+s+'-opacity="'+r.toFixed(2).slice(1)+'"':a}function dv(t,s,r){let a=t+s;return typeof r<"u"&&(a+=" "+r),a}function tZ(t,s,r){let a="",n=0,i=!1,l=0;for(let o=0;o<t.length;o++){const c=Math.floor(o%s),d=Math.floor(o/s);!c&&!i&&(i=!0),t[o]?(l++,o>0&&c>0&&t[o-1]||(a+=i?dv("M",c+r,.5+d+r):dv("m",n,0),n=0,i=!1),c+1<s&&t[o+1]||(a+=dv("h",l),l=0)):n++}return a}LD.render=function(s,r,a){const n=eZ.getOptions(r),i=s.modules.size,l=s.modules.data,o=i+n.margin*2,c=n.color.light.a?"<path "+L5(n.color.light,"fill")+' d="M0 0h'+o+"v"+o+'H0z"/>':"",d="<path "+L5(n.color.dark,"stroke")+' d="'+tZ(l,i,n.margin)+'"/>',u='viewBox="0 0 '+o+" "+o+'"',p='<svg xmlns="http://www.w3.org/2000/svg" '+(n.width?'width="'+n.width+'" height="'+n.width+'" ':"")+u+' shape-rendering="crispEdges">'+c+d+`</svg>
`;return typeof a=="function"&&a(null,p),p};const sZ=fJ,Mw=wD,FD=MD,rZ=LD;function k2(t,s,r,a,n){const i=[].slice.call(arguments,1),l=i.length,o=typeof i[l-1]=="function";if(!o&&!sZ())throw new Error("Callback required as last argument");if(o){if(l<2)throw new Error("Too few arguments provided");l===2?(n=r,r=s,s=a=void 0):l===3&&(s.getContext&&typeof n>"u"?(n=a,a=void 0):(n=a,a=r,r=s,s=void 0))}else{if(l<1)throw new Error("Too few arguments provided");return l===1?(r=s,s=a=void 0):l===2&&!s.getContext&&(a=r,r=s,s=void 0),new Promise(function(c,d){try{const u=Mw.create(r,a);c(t(u,s,a))}catch(u){d(u)}})}try{const c=Mw.create(r,a);n(null,t(c,s,a))}catch(c){n(c)}}F0.create=Mw.create;F0.toCanvas=k2.bind(null,FD.render);F0.toDataURL=k2.bind(null,FD.renderToDataURL);F0.toString=k2.bind(null,function(t,s,r){return rZ.render(t,r)});async function aZ(t){return new Promise((s,r)=>{const a=new FileReader;a.onload=()=>{const i=a.result.split(",")[1];s(i)},a.onerror=r,a.readAsDataURL(t)})}function OD(t){const s=document.createElement("canvas");s.width=t.videoWidth,s.height=t.videoHeight;const r=s.getContext("2d");return r&&r.drawImage(t,0,0),s.toDataURL("image/jpeg",.8).split(",")[1]}const nZ={async submitKyc(t,s){const{data:r,error:a}=await U.from("kyc_applications").insert({user_id:t,first_name:s.firstName,last_name:s.lastName,date_of_birth:s.dateOfBirth,nationality:s.nationality,address:s.address,documents:s.documents.map(i=>({type:i.type,mimeType:i.mimeType,data:i.data,uploadedAt:new Date().toISOString()})),status:"PENDING",submitted_at:new Date().toISOString()}).select().single();if(a)throw console.error("KYC submission error:",a),new Error(a.message||"Failed to submit KYC application");await U.from("users").update({kyc_status:"PENDING",first_name:s.firstName,last_name:s.lastName,updated_at:new Date().toISOString()}).eq("id",t);const n=await this.verifyDocumentWithOcr(s.documents.find(i=>i.type==="NATIONAL_ID"||i.type==="PASSPORT"),{firstName:s.firstName,lastName:s.lastName,dateOfBirth:s.dateOfBirth});return n&&(await U.from("kyc_applications").update({verification_result:{documentCheck:n.isValid,documentType:n.documentType,extractedData:n.extractedData,matchScore:n.matchScore,issues:n.issues,ocrProcessedAt:new Date().toISOString()},status:n.isValid?"PENDING":"REJECTED",rejection_reason:n.issues.length>0?n.issues.join("; "):void 0}).eq("id",r.id),n.issues.some(i=>i.includes("expired"))&&await U.from("users").update({kyc_status:"REJECTED"}).eq("id",t)),{applicationId:r.id,verificationResult:n}},async verifyDocumentWithOcr(t,s){try{const r=await fetch("/api/kyc/verify-document",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("accessToken")}`},body:JSON.stringify({documentBase64:t.data,mimeType:t.mimeType,expectedData:s})});if(r.ok)return await r.json()}catch{console.log("Backend OCR not available, using local validation")}return{isValid:!0,documentType:t.type,extractedData:{confidence:50},matchScore:50,issues:["OCR verification pending - manual review required"]}},async performLivenessCheck(t){return t.length<3?{isLive:!1,confidence:0,frames:t}:{isLive:!0,confidence:85,frames:t}},async getKycStatus(t){const{data:s,error:r}=await U.from("kyc_applications").select("*").eq("user_id",t).order("created_at",{ascending:!1}).limit(1).single();if(r&&r.code!=="PGRST116")throw new Error(r.message);return s},isDocumentExpired(t){if(!t)return!1;try{return new Date(t)<new Date}catch{return!1}},validateSierraLeoneNationalId(t){return t?[/^SLE\d{9,12}$/i,/^[A-Z]{2}\d{7,10}$/i,/^\d{9,12}$/].some(r=>r.test(t.replace(/[\s-]/g,""))):!1}},F5=["I am verifying my identity for Peeap today","My name is real and I am a real person","I confirm this is my live verification","This verification is being done by me personally","I authorize Peeap to verify my identity"];function iZ({onComplete:t,onCancel:s}){const[r,a]=h.useState("intro"),[n,i]=h.useState(null),[l,o]=h.useState([]),[c,d]=h.useState(""),[u]=h.useState(()=>F5[Math.floor(Math.random()*F5.length)]),[m,p]=h.useState(3),[x,g]=h.useState(0),f=h.useRef(null),b=h.useRef(null),j=h.useRef(null),v=h.useCallback(async()=>{try{i(null);const S=await navigator.mediaDevices.getUserMedia({video:{facingMode:"user",width:{ideal:640},height:{ideal:480}},audio:!1});b.current=S,f.current&&(f.current.srcObject=S,await f.current.play()),a("camera-setup"),setTimeout(()=>a("read-text"),1500)}catch(S){console.error("Camera error:",S),i("Unable to access camera. Please allow camera permissions and try again."),a("failed")}},[]),w=h.useCallback(()=>{b.current&&(b.current.getTracks().forEach(S=>S.stop()),b.current=null),j.current&&(clearInterval(j.current),j.current=null)},[]),y=h.useCallback(()=>{if(f.current&&f.current.readyState===4){const S=OD(f.current);return o(_=>[..._,S]),S}return null},[]);h.useEffect(()=>{if(r==="read-text"){y();const S=setInterval(()=>{g(_=>_>=4?(clearInterval(S),a("turn-left"),0):_+1)},1e3);return()=>clearInterval(S)}if(r==="turn-left"){g(0);const S=setInterval(()=>{y(),g(_=>_>=2?(clearInterval(S),a("turn-right"),0):_+1)},1e3);return()=>clearInterval(S)}if(r==="turn-right"){g(0);const S=setInterval(()=>{y(),g(_=>_>=2?(clearInterval(S),a("face-forward"),0):_+1)},1e3);return()=>clearInterval(S)}if(r==="face-forward"){g(0);const S=setInterval(()=>{p(_=>{if(_<=1){clearInterval(S);const E=y();return E&&d(E),a("complete"),3}return _-1})},1e3);return()=>clearInterval(S)}},[r,y]),h.useEffect(()=>()=>{w()},[w]),h.useEffect(()=>{if(r==="complete"&&c){const S=setTimeout(()=>{w(),t({isLive:l.length>=3,frames:l,selfieFrame:c})},2e3);return()=>clearTimeout(S)}},[r,c,l,w,t]);const C=()=>{o([]),d(""),i(null),p(3),g(0),v()};return e.jsxs("div",{className:"space-y-6",children:[r==="intro"&&e.jsxs("div",{className:"text-center space-y-6",children:[e.jsx("div",{className:"w-24 h-24 bg-primary-100 rounded-full flex items-center justify-center mx-auto",children:e.jsx(Yc,{className:"w-12 h-12 text-primary-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:"Face Verification"}),e.jsx("p",{className:"text-gray-600",children:"We need to verify you're a real person. You'll be asked to:"})]}),e.jsxs("div",{className:"text-left bg-gray-50 rounded-xl p-4 space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center text-blue-600 font-bold text-sm",children:"1"}),e.jsx("span",{className:"text-gray-700",children:"Read a verification phrase"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center text-blue-600 font-bold text-sm",children:"2"}),e.jsx("span",{className:"text-gray-700",children:"Slowly turn your head left"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center text-blue-600 font-bold text-sm",children:"3"}),e.jsx("span",{className:"text-gray-700",children:"Slowly turn your head right"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center text-blue-600 font-bold text-sm",children:"4"}),e.jsx("span",{className:"text-gray-700",children:"Take a selfie facing forward"})]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:s,className:"flex-1 py-3 bg-gray-100 text-gray-700 rounded-xl font-medium hover:bg-gray-200",children:"Cancel"}),e.jsxs("button",{onClick:v,className:"flex-1 py-3 bg-primary-600 text-white rounded-xl font-medium hover:bg-primary-700 flex items-center justify-center gap-2",children:[e.jsx(Yc,{className:"w-5 h-5"}),"Start Verification"]})]})]}),r==="camera-setup"&&e.jsxs("div",{className:"text-center space-y-4",children:[e.jsxs("div",{className:"relative aspect-[4/3] bg-black rounded-xl overflow-hidden",children:[e.jsx("video",{ref:f,autoPlay:!0,playsInline:!0,muted:!0,className:"w-full h-full object-cover"}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsx(Ie,{className:"w-8 h-8 animate-spin text-white"})})]}),e.jsx("p",{className:"text-gray-600",children:"Setting up camera..."})]}),r==="read-text"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"relative aspect-[4/3] bg-black rounded-xl overflow-hidden",children:[e.jsx("video",{ref:f,autoPlay:!0,playsInline:!0,muted:!0,className:"w-full h-full object-cover mirror",style:{transform:"scaleX(-1)"}}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none",children:e.jsx("div",{className:"w-48 h-64 border-4 border-white/50 rounded-full"})})]}),e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-xl p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(BV,{className:"w-5 h-5 text-blue-600"}),e.jsx("span",{className:"font-medium text-blue-900",children:"Please read aloud:"})]}),e.jsxs("p",{className:"text-lg text-blue-800 font-medium",children:['"',u,'"']})]}),e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsxs("div",{className:"text-sm text-gray-500",children:["Reading... ",5-x,"s"]}),e.jsx("div",{className:"w-24 h-2 bg-gray-200 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-primary-600 transition-all duration-1000",style:{width:`${x/4*100}%`}})})]})]}),r==="turn-left"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"relative aspect-[4/3] bg-black rounded-xl overflow-hidden",children:[e.jsx("video",{ref:f,autoPlay:!0,playsInline:!0,muted:!0,className:"w-full h-full object-cover",style:{transform:"scaleX(-1)"}}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none",children:e.jsxs("div",{className:"bg-black/50 rounded-2xl p-6 flex flex-col items-center",children:[e.jsx(_s,{className:"w-16 h-16 text-white animate-pulse"}),e.jsx("span",{className:"text-white font-medium mt-2",children:"Turn head LEFT slowly"})]})})]}),e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsxs("div",{className:"text-sm text-gray-500",children:["Hold... ",3-x,"s"]}),e.jsx("div",{className:"w-24 h-2 bg-gray-200 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-primary-600 transition-all duration-1000",style:{width:`${x/2*100}%`}})})]})]}),r==="turn-right"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"relative aspect-[4/3] bg-black rounded-xl overflow-hidden",children:[e.jsx("video",{ref:f,autoPlay:!0,playsInline:!0,muted:!0,className:"w-full h-full object-cover",style:{transform:"scaleX(-1)"}}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none",children:e.jsxs("div",{className:"bg-black/50 rounded-2xl p-6 flex flex-col items-center",children:[e.jsx(Lr,{className:"w-16 h-16 text-white animate-pulse"}),e.jsx("span",{className:"text-white font-medium mt-2",children:"Turn head RIGHT slowly"})]})})]}),e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsxs("div",{className:"text-sm text-gray-500",children:["Hold... ",3-x,"s"]}),e.jsx("div",{className:"w-24 h-2 bg-gray-200 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-primary-600 transition-all duration-1000",style:{width:`${x/2*100}%`}})})]})]}),r==="face-forward"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"relative aspect-[4/3] bg-black rounded-xl overflow-hidden",children:[e.jsx("video",{ref:f,autoPlay:!0,playsInline:!0,muted:!0,className:"w-full h-full object-cover",style:{transform:"scaleX(-1)"}}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none",children:e.jsx("div",{className:"w-48 h-64 border-4 border-green-500 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-6xl font-bold text-white drop-shadow-lg",children:m})})})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-lg font-medium text-gray-900",children:"Face forward for selfie"}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Capturing in ",m,"..."]})]})]}),r==="complete"&&e.jsxs("div",{className:"text-center space-y-6",children:[e.jsx("div",{className:"w-24 h-24 bg-green-100 rounded-full flex items-center justify-center mx-auto",children:e.jsx(be,{className:"w-12 h-12 text-green-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-green-900 mb-2",children:"Liveness Verified!"}),e.jsx("p",{className:"text-gray-600",children:"Face verification completed successfully. Proceeding to ID verification..."})]}),e.jsx("div",{className:"flex justify-center",children:e.jsx(Ie,{className:"w-6 h-6 animate-spin text-primary-600"})})]}),r==="failed"&&e.jsxs("div",{className:"text-center space-y-6",children:[e.jsx("div",{className:"w-24 h-24 bg-red-100 rounded-full flex items-center justify-center mx-auto",children:e.jsx(ut,{className:"w-12 h-12 text-red-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-red-900 mb-2",children:"Verification Failed"}),e.jsx("p",{className:"text-gray-600",children:n||"Unable to complete face verification"})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:s,className:"flex-1 py-3 bg-gray-100 text-gray-700 rounded-xl font-medium hover:bg-gray-200",children:"Cancel"}),e.jsxs("button",{onClick:C,className:"flex-1 py-3 bg-primary-600 text-white rounded-xl font-medium hover:bg-primary-700 flex items-center justify-center gap-2",children:[e.jsx(Ru,{className:"w-5 h-5"}),"Try Again"]})]})]})]})}function lZ({onComplete:t,onCancel:s,expectedName:r}){const[a,n]=h.useState("intro"),[i,l]=h.useState(null),[o,c]=h.useState(null),[d,u]=h.useState(null),[m,p]=h.useState([]),[x,g]=h.useState(!0),f=h.useRef(null),b=h.useRef(null),j=h.useRef(null),v=h.useCallback(async()=>{try{l(null);const I=await navigator.mediaDevices.getUserMedia({video:{facingMode:"environment",width:{ideal:1280},height:{ideal:720}},audio:!1});b.current=I,f.current&&(f.current.srcObject=I,await f.current.play()),n("camera")}catch(I){console.error("Camera error:",I),l("Unable to access camera. You can upload a photo instead."),g(!1),n("intro")}},[]),w=h.useCallback(()=>{b.current&&(b.current.getTracks().forEach(I=>I.stop()),b.current=null)},[]),y=h.useCallback(()=>{if(f.current&&f.current.readyState===4){const I=OD(f.current);c(I),n("capture"),w()}},[w]),C=async I=>{var P;const N=(P=I.target.files)==null?void 0:P[0];if(N)try{const k=await aZ(N);c(k),n("capture")}catch{l("Failed to read file. Please try again.")}},S=async()=>{if(o){n("processing"),l(null);try{const I=await _(o);if(!I.success||!I.extractedData)throw new Error(I.error||"Failed to read ID card");const N=I.extractedData;u(N);const P=[];if(N.expiryDate&&new Date(N.expiryDate)<new Date){P.push("Document has expired"),p(P),n("expired");return}N.firstName&&r.firstName&&(E(N.firstName,r.firstName)||P.push(`First name mismatch: document shows "${N.firstName}"`)),N.lastName&&r.lastName&&(E(N.lastName,r.lastName)||P.push(`Last name mismatch: document shows "${N.lastName}"`)),N.nationality&&!N.nationality.toUpperCase().includes("SIERRA")&&P.push("Document is not a Sierra Leone ID"),p(P);const k=P.some(D=>D.includes("expired")||D.includes("not a Sierra Leone"));n(k?"failed":"result")}catch(I){console.error("OCR error:",I),l(I.message||"Failed to process ID card"),n("failed")}}},_=async I=>{try{const N=await fetch("/api/kyc/process-document",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("accessToken")}`},body:JSON.stringify({documentBase64:I,mimeType:"image/jpeg"})});if(N.ok)return await N.json()}catch{console.log("Backend OCR not available, using local parsing")}return{success:!0,text:"NATIONAL ID CARD - SIERRA LEONE",extractedData:{documentType:"NATIONAL_ID",nationality:"SIERRA LEONEAN",confidence:60}}},E=(I,N)=>{const P=I.toLowerCase().trim(),k=N.toLowerCase().trim();if(P===k||P.includes(k)||k.includes(P))return!0;const D=Math.max(P.length,k.length);let $=0;for(let L=0;L<Math.min(P.length,k.length);L++)P[L]===k[L]&&$++;return $/D>=.7};h.useEffect(()=>()=>{w()},[w]);const A=()=>{c(null),u(null),p([]),l(null),x?v():n("intro")},R=()=>{o&&d&&t({isValid:m.length===0||!m.some(I=>I.includes("expired")),idImage:o,extractedData:d,issues:m})};return e.jsxs("div",{className:"space-y-6",children:[a==="intro"&&e.jsxs("div",{className:"text-center space-y-6",children:[e.jsx("div",{className:"w-24 h-24 bg-blue-100 rounded-full flex items-center justify-center mx-auto",children:e.jsx(Je,{className:"w-12 h-12 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:"Scan Your ID Card"}),e.jsx("p",{className:"text-gray-600",children:"Please scan your Sierra Leone National ID card. Make sure:"})]}),e.jsxs("div",{className:"text-left bg-gray-50 rounded-xl p-4 space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2 text-gray-700",children:[e.jsx(be,{className:"w-5 h-5 text-green-500"}),e.jsx("span",{children:"The entire card is visible"})]}),e.jsxs("div",{className:"flex items-center gap-2 text-gray-700",children:[e.jsx(be,{className:"w-5 h-5 text-green-500"}),e.jsx("span",{children:"Good lighting, no glare"})]}),e.jsxs("div",{className:"flex items-center gap-2 text-gray-700",children:[e.jsx(be,{className:"w-5 h-5 text-green-500"}),e.jsx("span",{children:"Text is clearly readable"})]}),e.jsxs("div",{className:"flex items-center gap-2 text-gray-700",children:[e.jsx(be,{className:"w-5 h-5 text-green-500"}),e.jsx("span",{children:"Card is not expired"})]})]}),i&&e.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-xl p-4 text-yellow-700 text-sm",children:i}),e.jsxs("div",{className:"flex flex-col gap-3",children:[x&&e.jsxs("button",{onClick:v,className:"w-full py-3 bg-primary-600 text-white rounded-xl font-medium hover:bg-primary-700 flex items-center justify-center gap-2",children:[e.jsx(Yc,{className:"w-5 h-5"}),"Open Camera"]}),e.jsxs("button",{onClick:()=>{var I;return(I=j.current)==null?void 0:I.click()},className:oe("w-full py-3 rounded-xl font-medium flex items-center justify-center gap-2",x?"bg-gray-100 text-gray-700 hover:bg-gray-200":"bg-primary-600 text-white hover:bg-primary-700"),children:[e.jsx(Du,{className:"w-5 h-5"}),"Upload Photo"]}),e.jsx("input",{ref:j,type:"file",accept:"image/*",className:"hidden",onChange:C}),e.jsx("button",{onClick:s,className:"w-full py-3 bg-gray-100 text-gray-700 rounded-xl font-medium hover:bg-gray-200",children:"Cancel"})]})]}),a==="camera"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"relative aspect-[16/10] bg-black rounded-xl overflow-hidden",children:[e.jsx("video",{ref:f,autoPlay:!0,playsInline:!0,muted:!0,className:"w-full h-full object-cover"}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none",children:e.jsx("div",{className:"w-[85%] h-[60%] border-4 border-white/70 rounded-xl",children:e.jsx("div",{className:"absolute -top-6 left-1/2 -translate-x-1/2 bg-black/50 text-white px-3 py-1 rounded-full text-sm",children:"Position ID card here"})})})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>{w(),n("intro")},className:"flex-1 py-3 bg-gray-100 text-gray-700 rounded-xl font-medium hover:bg-gray-200",children:"Cancel"}),e.jsxs("button",{onClick:y,className:"flex-1 py-3 bg-primary-600 text-white rounded-xl font-medium hover:bg-primary-700 flex items-center justify-center gap-2",children:[e.jsx(Yc,{className:"w-5 h-5"}),"Capture"]})]})]}),a==="capture"&&o&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"relative aspect-[16/10] bg-gray-100 rounded-xl overflow-hidden",children:e.jsx("img",{src:`data:image/jpeg;base64,${o}`,alt:"Captured ID",className:"w-full h-full object-contain"})}),e.jsx("p",{className:"text-center text-gray-600",children:"Is the ID card clearly visible and readable?"}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("button",{onClick:A,className:"flex-1 py-3 bg-gray-100 text-gray-700 rounded-xl font-medium hover:bg-gray-200 flex items-center justify-center gap-2",children:[e.jsx(Ru,{className:"w-5 h-5"}),"Retake"]}),e.jsx("button",{onClick:S,className:"flex-1 py-3 bg-primary-600 text-white rounded-xl font-medium hover:bg-primary-700",children:"Continue"})]})]}),a==="processing"&&e.jsxs("div",{className:"text-center space-y-6 py-8",children:[e.jsx(Ie,{className:"w-16 h-16 animate-spin text-primary-600 mx-auto"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:"Scanning ID Card"}),e.jsx("p",{className:"text-gray-600",children:"Please wait while we verify your document..."})]}),e.jsxs("div",{className:"text-sm text-gray-500 space-y-1",children:[e.jsx("p",{children:"Reading document text..."}),e.jsx("p",{children:"Extracting information..."}),e.jsx("p",{children:"Checking expiry date..."})]})]}),a==="result"&&d&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-20 h-20 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(be,{className:"w-10 h-10 text-green-600"})}),e.jsx("h3",{className:"text-xl font-bold text-green-900",children:"ID Verified"})]}),e.jsxs("div",{className:"bg-gray-50 rounded-xl p-4 space-y-3",children:[e.jsx("h4",{className:"font-semibold text-gray-900",children:"Extracted Information:"}),d.fullName&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Name"}),e.jsx("span",{className:"font-medium",children:d.fullName})]}),d.documentNumber&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"ID Number"}),e.jsx("span",{className:"font-medium",children:d.documentNumber})]}),d.dateOfBirth&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Date of Birth"}),e.jsx("span",{className:"font-medium",children:d.dateOfBirth})]}),d.expiryDate&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Expiry Date"}),e.jsx("span",{className:"font-medium text-green-600",children:d.expiryDate})]}),d.nationality&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Nationality"}),e.jsx("span",{className:"font-medium",children:d.nationality})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Confidence"}),e.jsxs("span",{className:"font-medium",children:[d.confidence,"%"]})]})]}),m.length>0&&e.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-xl p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 text-yellow-700 mb-2",children:[e.jsx(Lt,{className:"w-5 h-5"}),e.jsx("span",{className:"font-medium",children:"Warnings:"})]}),e.jsx("ul",{className:"text-sm text-yellow-700 space-y-1",children:m.map((I,N)=>e.jsxs("li",{children:[" ",I]},N))})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:A,className:"flex-1 py-3 bg-gray-100 text-gray-700 rounded-xl font-medium hover:bg-gray-200",children:"Scan Again"}),e.jsx("button",{onClick:R,className:"flex-1 py-3 bg-primary-600 text-white rounded-xl font-medium hover:bg-primary-700",children:"Confirm & Continue"})]})]}),a==="expired"&&e.jsxs("div",{className:"text-center space-y-6",children:[e.jsx("div",{className:"w-24 h-24 bg-red-100 rounded-full flex items-center justify-center mx-auto",children:e.jsx(lt,{className:"w-12 h-12 text-red-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-red-900 mb-2",children:"Document Expired"}),e.jsx("p",{className:"text-gray-600",children:"Your ID card has expired. Please renew your ID card before continuing with verification."})]}),(d==null?void 0:d.expiryDate)&&e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-xl p-4",children:e.jsxs("p",{className:"text-red-700",children:[e.jsx("span",{className:"font-medium",children:"Expiry Date:"})," ",d.expiryDate]})}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:s,className:"flex-1 py-3 bg-gray-100 text-gray-700 rounded-xl font-medium hover:bg-gray-200",children:"Cancel"}),e.jsx("button",{onClick:A,className:"flex-1 py-3 bg-primary-600 text-white rounded-xl font-medium hover:bg-primary-700",children:"Try Different ID"})]})]}),a==="failed"&&e.jsxs("div",{className:"text-center space-y-6",children:[e.jsx("div",{className:"w-24 h-24 bg-red-100 rounded-full flex items-center justify-center mx-auto",children:e.jsx(ut,{className:"w-12 h-12 text-red-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-red-900 mb-2",children:"Verification Failed"}),e.jsx("p",{className:"text-gray-600",children:i||"We could not verify your ID card. Please try again with a clearer image."})]}),m.length>0&&e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-xl p-4 text-left",children:[e.jsx("p",{className:"font-medium text-red-700 mb-2",children:"Issues found:"}),e.jsx("ul",{className:"text-sm text-red-600 space-y-1",children:m.map((I,N)=>e.jsxs("li",{children:[" ",I]},N))})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:s,className:"flex-1 py-3 bg-gray-100 text-gray-700 rounded-xl font-medium hover:bg-gray-200",children:"Cancel"}),e.jsxs("button",{onClick:A,className:"flex-1 py-3 bg-primary-600 text-white rounded-xl font-medium hover:bg-primary-700 flex items-center justify-center gap-2",children:[e.jsx(Ru,{className:"w-5 h-5"}),"Try Again"]})]})]})]})}const oZ={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}},_m={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.4,ease:"easeOut"}}};function cZ(){const{user:t,refreshUser:s}=wt(),[r,a]=h.useState("none"),[n,i]=h.useState(null),[l,o]=h.useState(!0),[c,d]=h.useState({hasPin:!1,has2FA:!1,kycStatus:"PENDING"}),[u,m]=h.useState(""),[p,x]=h.useState(""),[g,f]=h.useState(""),[b,j]=h.useState(!1),[v,w]=h.useState(""),[y,C]=h.useState(""),[S,_]=h.useState(""),[E,A]=h.useState(!1),[R,I]=h.useState(!1),[N,P]=h.useState(""),[k,D]=h.useState(""),[$,L]=h.useState(!1),[B,T]=h.useState(""),[O,q]=h.useState(!1),[K,le]=h.useState(""),[X,se]=h.useState(""),[de,fe]=h.useState(""),[z,re]=h.useState(!1),[ie,Y]=h.useState("info"),[G,H]=h.useState(!1),[ue,me]=h.useState(null),[ne,Ae]=h.useState(""),[Fe,at]=h.useState(""),[J,Q]=h.useState(""),[ee,Ne]=h.useState("Sierra Leonean"),[ye,he]=h.useState({street:"",city:"",country:"Sierra Leone"}),[Ce,Se]=h.useState([]),[Be,Dt]=h.useState(""),[Ht,Xe]=h.useState(""),[Yt,Mt]=h.useState(null),[Qt,Wt]=h.useState([]);h.useEffect(()=>{t!=null&&t.id&&(Ks(),m(t.firstName||""),x(t.lastName||""),f(t.phone||""))},[t==null?void 0:t.id]);const Ks=async()=>{o(!0);try{const{data:Ee,error:ct}=await U.from("users").select("transaction_pin, two_factor_enabled, kyc_status").eq("id",t==null?void 0:t.id).single();!ct&&Ee&&d({hasPin:!!Ee.transaction_pin,has2FA:!!Ee.two_factor_enabled,kycStatus:Ee.kyc_status||"NOT_STARTED"})}catch(Ee){console.error("Error loading settings:",Ee)}finally{o(!1)}},As={NOT_STARTED:{icon:ut,color:"text-gray-600",bg:"bg-gray-100",label:"Not Started",description:"Complete KYC verification to unlock all features"},PENDING:{icon:it,color:"text-yellow-600",bg:"bg-yellow-50",label:"Pending",description:"Your verification is pending. Please complete the process."},SUBMITTED:{icon:it,color:"text-blue-600",bg:"bg-blue-50",label:"Under Review",description:"Your documents are being reviewed. This usually takes 1-2 business days."},VERIFIED:{icon:be,color:"text-green-600",bg:"bg-green-50",label:"Verified",description:"Your identity has been verified. You have full access to all features."},APPROVED:{icon:be,color:"text-green-600",bg:"bg-green-50",label:"Approved",description:"Your identity has been approved. You have full access to all features."},REJECTED:{icon:ut,color:"text-red-600",bg:"bg-red-50",label:"Rejected",description:"Your verification was rejected. Please resubmit with valid documents."}},fs=As[c.kycStatus]||As.NOT_STARTED,ma=fs.icon,er=c.kycStatus==="VERIFIED"||c.kycStatus==="APPROVED",ze=async Ee=>{Ee.preventDefault(),j(!0),i(null);try{const{error:ct}=await U.from("users").update({first_name:u,last_name:p,phone:g,updated_at:new Date().toISOString()}).eq("id",t==null?void 0:t.id);if(ct)throw ct;i({type:"success",text:"Profile updated successfully!"}),a("none"),s&&s()}catch(ct){i({type:"error",text:ct.message||"Failed to update profile"})}finally{j(!1)}},Bt=async Ee=>{if(Ee.preventDefault(),I(!0),i(null),y!==S){i({type:"error",text:"New passwords do not match"}),I(!1);return}if(y.length<8){i({type:"error",text:"Password must be at least 8 characters"}),I(!1);return}try{const{error:ct}=await U.from("users").update({password_hash:y,updated_at:new Date().toISOString()}).eq("id",t==null?void 0:t.id);if(ct)throw ct;i({type:"success",text:"Password changed successfully!"}),a("none"),w(""),C(""),_("")}catch(ct){i({type:"error",text:ct.message||"Failed to change password"})}finally{I(!1)}},ys=async()=>{try{const Ee=mh.authenticator.generateSecret(20);P(Ee);const ct=mh.authenticator.keyuri((t==null?void 0:t.email)||"user","Peeap",Ee),je=await F0.toDataURL(ct,{width:200,margin:2,color:{dark:"#000000",light:"#ffffff"}});T(je)}catch(Ee){console.error("Failed to initialize 2FA:",Ee)}},Zr=async()=>{a("2fa"),c.has2FA||await ys()},Xr=async Ee=>{Ee.preventDefault(),L(!0),i(null);try{if(k.length!==6)throw new Error("Please enter a valid 6-digit code");if(!mh.authenticator.verify({token:k,secret:N}))throw new Error("Invalid verification code. Please try again.");const{error:je}=await U.from("users").update({two_factor_enabled:!0,two_factor_secret:N,updated_at:new Date().toISOString()}).eq("id",t==null?void 0:t.id);if(je)throw je;d(Ge=>({...Ge,has2FA:!0})),i({type:"success",text:"Two-factor authentication enabled!"}),a("none"),D(""),T(""),P("")}catch(ct){i({type:"error",text:ct.message||"Failed to enable 2FA"})}finally{L(!1)}},Ms=async()=>{L(!0);try{const{error:Ee}=await U.from("users").update({two_factor_enabled:!1,two_factor_secret:null,updated_at:new Date().toISOString()}).eq("id",t==null?void 0:t.id);if(Ee)throw Ee;d(ct=>({...ct,has2FA:!1})),i({type:"success",text:"Two-factor authentication disabled"}),a("none")}catch(Ee){i({type:"error",text:Ee.message||"Failed to disable 2FA"})}finally{L(!1)}},ot=async Ee=>{if(Ee.preventDefault(),re(!0),i(null),X!==de){i({type:"error",text:"PINs do not match"}),re(!1);return}if(X.length!==4||!/^\d{4}$/.test(X)){i({type:"error",text:"PIN must be exactly 4 digits"}),re(!1);return}try{const{error:ct}=await U.from("users").update({transaction_pin:X,updated_at:new Date().toISOString()}).eq("id",t==null?void 0:t.id);if(ct)throw ct;d(je=>({...je,hasPin:!0})),i({type:"success",text:"Transaction PIN set successfully!"}),a("none"),le(""),se(""),fe("")}catch(ct){i({type:"error",text:ct.message||"Failed to set PIN"})}finally{re(!1)}},ht=()=>{Ae((t==null?void 0:t.firstName)||""),at((t==null?void 0:t.lastName)||""),Y("info"),me(null),Se([]),Dt(""),Xe(""),Mt(null),Wt([])},$e=Ee=>{Ee.isLive?(Se(Ee.frames),Dt(Ee.selfieFrame),Y("id-scan")):(me("Face liveness verification failed. Please try again."),Y("failed"))},Ve=Ee=>{Xe(Ee.idImage),Mt(Ee.extractedData),Wt(Ee.issues),Ee.issues.some(je=>je.toLowerCase().includes("expired"))?(me("Your ID card has expired. Please renew your ID before continuing."),Y("failed")):Y("review")},pt=async()=>{if(t!=null&&t.id){H(!0),me(null),Y("submitting");try{const Ee=await nZ.submitKyc(t.id,{firstName:ne,lastName:Fe,dateOfBirth:J,nationality:ee,address:ye,documents:[{type:"NATIONAL_ID",data:Ht,mimeType:"image/jpeg"},{type:"SELFIE",data:Be,mimeType:"image/jpeg"}]});if(Ee.verificationResult&&!Ee.verificationResult.isValid&&(Ee.verificationResult.issues||[]).some(je=>je.includes("expired"))){me("Your ID card has expired. Verification cancelled."),Y("failed");return}d(ct=>({...ct,kycStatus:"SUBMITTED"})),Y("success"),i({type:"success",text:"KYC verification submitted successfully!"}),s&&s()}catch(Ee){console.error("KYC submission error:",Ee),me(Ee.message||"Failed to submit KYC verification"),Y("failed")}finally{H(!1)}}},Pt=()=>{a("none"),Y("info"),me(null)},hs=Ee=>{navigator.clipboard.writeText(Ee),q(!0),setTimeout(()=>q(!1),2e3)};return l?e.jsx(ka,{children:e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx(Ie,{className:"w-8 h-8 animate-spin text-primary-600"})})}):e.jsxs(ka,{children:[e.jsxs(Oe.div,{className:"max-w-4xl mx-auto space-y-6",variants:oZ,initial:"hidden",animate:"visible",children:[e.jsxs(Oe.div,{variants:_m,children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Profile"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Manage your account settings and security"})]}),n&&e.jsxs(Oe.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:oe("p-4 rounded-xl flex items-center gap-3",n.type==="success"?"bg-green-50 dark:bg-green-900/20 text-green-700 dark:text-green-400 border border-green-200 dark:border-green-800":"bg-red-50 dark:bg-red-900/20 text-red-700 dark:text-red-400 border border-red-200 dark:border-red-800"),children:[n.type==="success"?e.jsx(be,{className:"w-5 h-5 flex-shrink-0"}):e.jsx(ut,{className:"w-5 h-5 flex-shrink-0"}),e.jsx("span",{children:n.text}),e.jsx("button",{onClick:()=>i(null),className:"ml-auto",children:e.jsx(lt,{className:"w-4 h-4"})})]}),e.jsx(Oe.div,{variants:_m,children:e.jsx(we,{className:"p-6",glowEffect:!0,children:e.jsxs("div",{className:"flex flex-col sm:flex-row items-start gap-6",children:[e.jsxs("div",{className:"relative",children:[e.jsx(Pw,{firstName:t==null?void 0:t.firstName,lastName:t==null?void 0:t.lastName,size:"xl",className:"w-24 h-24"}),er&&e.jsx("div",{className:"absolute -bottom-1 -right-1 w-8 h-8 bg-green-500 rounded-full flex items-center justify-center border-4 border-white dark:border-gray-800",children:e.jsx(Rs,{className:"w-4 h-4 text-white"})})]}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:[t==null?void 0:t.firstName," ",t==null?void 0:t.lastName]}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:t==null?void 0:t.email}),(t==null?void 0:t.phone)&&e.jsxs("p",{className:"text-gray-500 dark:text-gray-400 flex items-center gap-1 mt-1",children:[e.jsx(lr,{className:"w-4 h-4"}),t.phone]})]}),e.jsx("button",{onClick:()=>a("edit-profile"),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:e.jsx(PV,{className:"w-5 h-5 text-gray-500 dark:text-gray-400"})})]}),e.jsxs("div",{className:"flex flex-wrap gap-3 mt-4",children:[e.jsx("span",{className:oe("px-3 py-1 rounded-full text-sm font-medium",er?"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400":"bg-yellow-100 dark:bg-yellow-900/30 text-yellow-700 dark:text-yellow-400"),children:er?"Verified":"Unverified"}),c.has2FA&&e.jsx("span",{className:"px-3 py-1 rounded-full text-sm font-medium bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-400",children:"2FA Enabled"}),c.hasPin&&e.jsx("span",{className:"px-3 py-1 rounded-full text-sm font-medium bg-purple-100 dark:bg-purple-900/30 text-purple-700 dark:text-purple-400",children:"PIN Set"})]})]})]})})}),e.jsx(Oe.div,{variants:_m,children:e.jsxs(we,{className:"p-6",delay:.1,glowEffect:!0,children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-primary-100 dark:bg-primary-900/30 rounded-lg",children:e.jsx(Jc,{className:"w-5 h-5 text-primary-600 dark:text-primary-400"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:"Identity Verification"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Verify your identity to unlock all features"})]})]})}),e.jsxs("div",{className:oe("p-4 rounded-xl flex items-center gap-4",fs.bg,"dark:bg-opacity-20"),children:[e.jsx("div",{className:oe("w-12 h-12 rounded-full flex items-center justify-center bg-white dark:bg-gray-800",fs.color),children:e.jsx(ma,{className:"w-6 h-6"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:oe("font-semibold",fs.color),children:fs.label}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:fs.description})]}),(c.kycStatus==="NOT_STARTED"||c.kycStatus==="PENDING"||c.kycStatus==="REJECTED")&&e.jsx("button",{onClick:()=>{ht(),a("kyc")},className:"px-4 py-2 bg-primary-600 text-white rounded-lg font-medium hover:bg-primary-700 transition-colors",children:"Start Verification"})]})]})}),e.jsx(Oe.div,{variants:_m,children:e.jsxs(we,{className:"p-6",delay:.2,glowEffect:!0,children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"p-2 bg-orange-100 dark:bg-orange-900/30 rounded-lg",children:e.jsx(Xt,{className:"w-5 h-5 text-orange-600 dark:text-orange-400"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:"Security"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Manage your security settings"})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs(Oe.button,{whileHover:{scale:1.01},whileTap:{scale:.99},onClick:()=>a("password"),className:"w-full flex items-center justify-between p-4 bg-gray-50 dark:bg-gray-700/50 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-xl transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-100 dark:bg-blue-900/30 rounded-full flex items-center justify-center",children:e.jsx(wl,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"})}),e.jsxs("div",{className:"text-left",children:[e.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:"Login Password"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Change your account password"})]})]}),e.jsx(Vs,{className:"w-5 h-5 text-gray-400"})]}),e.jsxs(Oe.button,{whileHover:{scale:1.01},whileTap:{scale:.99},onClick:()=>a("pin"),className:"w-full flex items-center justify-between p-4 bg-gray-50 dark:bg-gray-700/50 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-xl transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-purple-100 dark:bg-purple-900/30 rounded-full flex items-center justify-center",children:e.jsx(Xs,{className:"w-5 h-5 text-purple-600 dark:text-purple-400"})}),e.jsxs("div",{className:"text-left",children:[e.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:"Transaction PIN"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:c.hasPin?"4-digit PIN is set":"Set a 4-digit PIN for transactions"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[c.hasPin&&e.jsx("span",{className:"px-2 py-1 bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400 text-xs font-medium rounded-full",children:"Active"}),e.jsx(Vs,{className:"w-5 h-5 text-gray-400"})]})]}),e.jsxs(Oe.button,{whileHover:{scale:1.01},whileTap:{scale:.99},onClick:Zr,className:"w-full flex items-center justify-between p-4 bg-gray-50 dark:bg-gray-700/50 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-xl transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:oe("w-10 h-10 rounded-full flex items-center justify-center",c.has2FA?"bg-green-100 dark:bg-green-900/30":"bg-orange-100 dark:bg-orange-900/30"),children:e.jsx(Na,{className:oe("w-5 h-5",c.has2FA?"text-green-600 dark:text-green-400":"text-orange-600 dark:text-orange-400")})}),e.jsxs("div",{className:"text-left",children:[e.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:"Two-Factor Authentication"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:c.has2FA?"Your account is protected with 2FA":"Add extra security to your account"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[c.has2FA&&e.jsx("span",{className:"px-2 py-1 bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400 text-xs font-medium rounded-full",children:"Enabled"}),e.jsx(Vs,{className:"w-5 h-5 text-gray-400"})]})]})]})]})}),e.jsx(Oe.div,{variants:_m,children:e.jsxs(we,{className:"p-6",delay:.3,glowEffect:!0,children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"p-2 bg-green-100 dark:bg-green-900/30 rounded-lg",children:e.jsx(jt,{className:"w-5 h-5 text-green-600 dark:text-green-400"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:"Account Limits"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Your current transaction limits"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[e.jsxs(Oe.div,{whileHover:{scale:1.03},className:"p-4 bg-gradient-to-br from-blue-50 to-blue-100 dark:from-blue-900/30 dark:to-blue-800/30 rounded-xl",children:[e.jsx("p",{className:"text-sm text-blue-600 dark:text-blue-400 font-medium",children:"Daily Limit"}),e.jsxs("p",{className:"text-2xl font-bold text-blue-900 dark:text-blue-100 mt-1",children:["SLE ",er?"10,000":"1,000"]})]}),e.jsxs(Oe.div,{whileHover:{scale:1.03},className:"p-4 bg-gradient-to-br from-purple-50 to-purple-100 dark:from-purple-900/30 dark:to-purple-800/30 rounded-xl",children:[e.jsx("p",{className:"text-sm text-purple-600 dark:text-purple-400 font-medium",children:"Monthly Limit"}),e.jsxs("p",{className:"text-2xl font-bold text-purple-900 dark:text-purple-100 mt-1",children:["SLE ",er?"100,000":"10,000"]})]}),e.jsxs(Oe.div,{whileHover:{scale:1.03},className:"p-4 bg-gradient-to-br from-green-50 to-green-100 dark:from-green-900/30 dark:to-green-800/30 rounded-xl",children:[e.jsx("p",{className:"text-sm text-green-600 dark:text-green-400 font-medium",children:"Per Transaction"}),e.jsxs("p",{className:"text-2xl font-bold text-green-900 dark:text-green-100 mt-1",children:["SLE ",er?"5,000":"500"]})]})]}),!er&&e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-4 flex items-center gap-2",children:[e.jsx(ut,{className:"w-4 h-4"}),"Complete KYC verification to increase your limits"]})]})})]}),r==="edit-profile"&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl max-w-md w-full p-6 animate-slide-up",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900",children:"Edit Profile"}),e.jsx("button",{onClick:()=>a("none"),className:"p-2 hover:bg-gray-100 rounded-lg",children:e.jsx(lt,{className:"w-5 h-5 text-gray-500"})})]}),e.jsxs("form",{onSubmit:ze,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"First Name"}),e.jsx("input",{type:"text",value:u,onChange:Ee=>m(Ee.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-primary-500 focus:border-primary-500",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Last Name"}),e.jsx("input",{type:"text",value:p,onChange:Ee=>x(Ee.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-primary-500 focus:border-primary-500",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),e.jsx("input",{type:"email",value:(t==null?void 0:t.email)||"",disabled:!0,className:"w-full px-4 py-3 border border-gray-200 rounded-xl bg-gray-50 text-gray-500"}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Email cannot be changed"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone Number"}),e.jsx("input",{type:"tel",value:g,onChange:Ee=>f(Ee.target.value),placeholder:"+232 XX XXX XXXX",className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-primary-500 focus:border-primary-500"})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>a("none"),className:"flex-1 py-3 bg-gray-100 text-gray-700 rounded-xl font-medium hover:bg-gray-200",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:b,className:"flex-1 py-3 bg-primary-600 text-white rounded-xl font-medium hover:bg-primary-700 disabled:opacity-50 flex items-center justify-center gap-2",children:b?e.jsx(Ie,{className:"w-5 h-5 animate-spin"}):"Save Changes"})]})]})]})}),r==="password"&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl max-w-md w-full p-6 animate-slide-up",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:e.jsx(wl,{className:"w-5 h-5 text-blue-600"})}),e.jsx("h3",{className:"text-lg font-bold text-gray-900",children:"Change Password"})]}),e.jsx("button",{onClick:()=>a("none"),className:"p-2 hover:bg-gray-100 rounded-lg",children:e.jsx(lt,{className:"w-5 h-5 text-gray-500"})})]}),e.jsxs("form",{onSubmit:Bt,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Current Password"}),e.jsx("input",{type:E?"text":"password",value:v,onChange:Ee=>w(Ee.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-primary-500",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"New Password"}),e.jsx("input",{type:E?"text":"password",value:y,onChange:Ee=>C(Ee.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-primary-500",required:!0,minLength:8}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Minimum 8 characters"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Confirm New Password"}),e.jsx("input",{type:E?"text":"password",value:S,onChange:Ee=>_(Ee.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-primary-500",required:!0})]}),e.jsxs("label",{className:"flex items-center gap-2 text-sm text-gray-600 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:E,onChange:Ee=>A(Ee.target.checked),className:"rounded"}),"Show passwords"]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>a("none"),className:"flex-1 py-3 bg-gray-100 text-gray-700 rounded-xl font-medium hover:bg-gray-200",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:R,className:"flex-1 py-3 bg-primary-600 text-white rounded-xl font-medium hover:bg-primary-700 disabled:opacity-50 flex items-center justify-center gap-2",children:R?e.jsx(Ie,{className:"w-5 h-5 animate-spin"}):"Change Password"})]})]})]})}),r==="pin"&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl max-w-md w-full p-6 animate-slide-up",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-purple-100 rounded-lg",children:e.jsx(Xs,{className:"w-5 h-5 text-purple-600"})}),e.jsx("h3",{className:"text-lg font-bold text-gray-900",children:c.hasPin?"Change PIN":"Set Transaction PIN"})]}),e.jsx("button",{onClick:()=>a("none"),className:"p-2 hover:bg-gray-100 rounded-lg",children:e.jsx(lt,{className:"w-5 h-5 text-gray-500"})})]}),e.jsx("p",{className:"text-sm text-gray-600 mb-6",children:"Your transaction PIN is required when sending money to protect your account."}),e.jsxs("form",{onSubmit:ot,className:"space-y-4",children:[c.hasPin&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Current PIN"}),e.jsx("input",{type:"password",value:K,onChange:Ee=>le(Ee.target.value.replace(/\D/g,"").slice(0,4)),maxLength:4,inputMode:"numeric",className:"w-full px-4 py-4 border border-gray-300 rounded-xl text-center text-2xl tracking-[1em] focus:ring-2 focus:ring-primary-500",placeholder:"",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"New PIN"}),e.jsx("input",{type:"password",value:X,onChange:Ee=>se(Ee.target.value.replace(/\D/g,"").slice(0,4)),maxLength:4,inputMode:"numeric",className:"w-full px-4 py-4 border border-gray-300 rounded-xl text-center text-2xl tracking-[1em] focus:ring-2 focus:ring-primary-500",placeholder:"",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Confirm PIN"}),e.jsx("input",{type:"password",value:de,onChange:Ee=>fe(Ee.target.value.replace(/\D/g,"").slice(0,4)),maxLength:4,inputMode:"numeric",className:"w-full px-4 py-4 border border-gray-300 rounded-xl text-center text-2xl tracking-[1em] focus:ring-2 focus:ring-primary-500",placeholder:"",required:!0})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>a("none"),className:"flex-1 py-3 bg-gray-100 text-gray-700 rounded-xl font-medium hover:bg-gray-200",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:z,className:"flex-1 py-3 bg-primary-600 text-white rounded-xl font-medium hover:bg-primary-700 disabled:opacity-50 flex items-center justify-center gap-2",children:z?e.jsx(Ie,{className:"w-5 h-5 animate-spin"}):"Save PIN"})]})]})]})}),r==="2fa"&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl max-w-md w-full p-6 animate-slide-up",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:oe("p-2 rounded-lg",c.has2FA?"bg-green-100":"bg-orange-100"),children:e.jsx(Na,{className:oe("w-5 h-5",c.has2FA?"text-green-600":"text-orange-600")})}),e.jsx("h3",{className:"text-lg font-bold text-gray-900",children:"Two-Factor Authentication"})]}),e.jsx("button",{onClick:()=>a("none"),className:"p-2 hover:bg-gray-100 rounded-lg",children:e.jsx(lt,{className:"w-5 h-5 text-gray-500"})})]}),c.has2FA?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"p-4 bg-green-50 rounded-xl flex items-center gap-3",children:[e.jsx(be,{className:"w-6 h-6 text-green-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-green-900",children:"2FA is enabled"}),e.jsx("p",{className:"text-sm text-green-700",children:"Your account is protected"})]})]}),e.jsx("button",{onClick:Ms,disabled:$,className:"w-full py-3 bg-red-600 text-white rounded-xl font-medium hover:bg-red-700 disabled:opacity-50 flex items-center justify-center gap-2",children:$?e.jsx(Ie,{className:"w-5 h-5 animate-spin"}):"Disable 2FA"})]}):e.jsxs("form",{onSubmit:Xr,className:"space-y-4",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Scan this code with your authenticator app (Google Authenticator, Authy, etc.)"}),e.jsxs("div",{className:"bg-gray-50 rounded-xl p-6 flex flex-col items-center",children:[e.jsx("div",{className:"w-48 h-48 bg-white rounded-lg flex items-center justify-center border border-gray-200 mb-4 overflow-hidden",children:B?e.jsx("img",{src:B,alt:"2FA QR Code",className:"w-full h-full object-contain"}):e.jsx(Ie,{className:"w-8 h-8 animate-spin text-gray-400"})}),e.jsx("p",{className:"text-sm text-gray-500",children:"Or enter code manually:"}),e.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[e.jsx("code",{className:"px-3 py-2 bg-white rounded-lg font-mono text-sm border break-all max-w-[200px]",children:N||"Loading..."}),e.jsx("button",{type:"button",onClick:()=>hs(N),disabled:!N,className:"p-2 hover:bg-gray-200 rounded-lg disabled:opacity-50",children:O?e.jsx(Rs,{className:"w-4 h-4 text-green-600"}):e.jsx(vs,{className:"w-4 h-4 text-gray-500"})})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Verification Code"}),e.jsx("input",{type:"text",value:k,onChange:Ee=>D(Ee.target.value.replace(/\D/g,"").slice(0,6)),maxLength:6,inputMode:"numeric",className:"w-full px-4 py-4 border border-gray-300 rounded-xl text-center text-2xl tracking-[0.5em] focus:ring-2 focus:ring-primary-500",placeholder:"000000",required:!0})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>a("none"),className:"flex-1 py-3 bg-gray-100 text-gray-700 rounded-xl font-medium hover:bg-gray-200",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:$||k.length!==6,className:"flex-1 py-3 bg-primary-600 text-white rounded-xl font-medium hover:bg-primary-700 disabled:opacity-50 flex items-center justify-center gap-2",children:$?e.jsx(Ie,{className:"w-5 h-5 animate-spin"}):"Enable 2FA"})]})]})]})}),r==="kyc"&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl max-w-lg w-full p-6 max-h-[90vh] overflow-y-auto animate-slide-up",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-primary-100 rounded-lg",children:e.jsx(Jc,{className:"w-5 h-5 text-primary-600"})}),e.jsx("h3",{className:"text-lg font-bold text-gray-900",children:"Identity Verification"})]}),e.jsx("button",{onClick:Pt,className:"p-2 hover:bg-gray-100 rounded-lg",children:e.jsx(lt,{className:"w-5 h-5 text-gray-500"})})]}),!["success","failed","submitting"].includes(ie)&&e.jsx("div",{className:"flex items-center justify-between mb-6",children:[{step:"info",label:"Info",num:1},{step:"face-liveness",label:"Face",num:2},{step:"id-scan",label:"ID Scan",num:3},{step:"review",label:"Review",num:4}].map(({step:Ee,label:ct,num:je},Ge)=>{const nt=["info","face-liveness","id-scan","review"],dr=nt.indexOf(ie),tr=nt.indexOf(Ee)<dr,Ur=Ee===ie;return e.jsxs("div",{className:"flex items-center",children:[e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("div",{className:oe("w-8 h-8 rounded-full flex items-center justify-center text-sm font-bold transition-colors",tr?"bg-green-500 text-white":Ur?"bg-primary-600 text-white":"bg-gray-200 text-gray-500"),children:tr?e.jsx(Rs,{className:"w-4 h-4"}):je}),e.jsx("span",{className:"text-xs text-gray-500 mt-1",children:ct})]}),Ge<3&&e.jsx("div",{className:oe("w-8 sm:w-12 h-1 mx-1",tr?"bg-green-500":"bg-gray-200")})]},Ee)})}),ie==="info"&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Please confirm your personal information before proceeding with verification."}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"First Name"}),e.jsx("input",{type:"text",value:ne,onChange:Ee=>Ae(Ee.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-primary-500",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Last Name"}),e.jsx("input",{type:"text",value:Fe,onChange:Ee=>at(Ee.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-primary-500",required:!0})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Date of Birth"}),e.jsx("input",{type:"date",value:J,onChange:Ee=>Q(Ee.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-primary-500",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nationality"}),e.jsxs("select",{value:ee,onChange:Ee=>Ne(Ee.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-primary-500",children:[e.jsx("option",{value:"Sierra Leonean",children:"Sierra Leonean"}),e.jsx("option",{value:"Other",children:"Other"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Address"}),e.jsx("input",{type:"text",placeholder:"Street address",value:ye.street,onChange:Ee=>he(ct=>({...ct,street:Ee.target.value})),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-primary-500 mb-2"}),e.jsx("input",{type:"text",placeholder:"City",value:ye.city,onChange:Ee=>he(ct=>({...ct,city:Ee.target.value})),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-primary-500"})]}),e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-xl p-4 text-sm text-blue-700",children:[e.jsx("p",{className:"font-medium mb-1",children:"What's next:"}),e.jsxs("ul",{className:"space-y-1",children:[e.jsx("li",{children:"1. Face liveness verification (read text & turn head)"}),e.jsx("li",{children:"2. Scan your Sierra Leone National ID card"}),e.jsx("li",{children:"3. Review and submit"})]})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx("button",{onClick:Pt,className:"flex-1 py-3 bg-gray-100 text-gray-700 rounded-xl font-medium hover:bg-gray-200",children:"Cancel"}),e.jsxs("button",{onClick:()=>Y("face-liveness"),disabled:!ne||!Fe||!J,className:"flex-1 py-3 bg-primary-600 text-white rounded-xl font-medium hover:bg-primary-700 disabled:opacity-50 flex items-center justify-center gap-2",children:[e.jsx(Yc,{className:"w-5 h-5"}),"Start Face Scan"]})]})]}),ie==="face-liveness"&&e.jsx(iZ,{onComplete:$e,onCancel:()=>Y("info")}),ie==="id-scan"&&e.jsx(lZ,{onComplete:Ve,onCancel:()=>Y("face-liveness"),expectedName:{firstName:ne,lastName:Fe}}),ie==="review"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center mb-4",children:[e.jsx(be,{className:"w-16 h-16 text-green-500 mx-auto mb-2"}),e.jsx("h4",{className:"text-lg font-bold text-gray-900",children:"Verification Complete"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Please review your information before submitting"})]}),e.jsxs("div",{className:"bg-gray-50 rounded-xl p-4 space-y-3",children:[e.jsx("h5",{className:"font-semibold text-gray-900",children:"Personal Information"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[e.jsx("span",{className:"text-gray-500",children:"Name:"}),e.jsxs("span",{className:"font-medium",children:[ne," ",Fe]}),e.jsx("span",{className:"text-gray-500",children:"Date of Birth:"}),e.jsx("span",{className:"font-medium",children:J}),e.jsx("span",{className:"text-gray-500",children:"Nationality:"}),e.jsx("span",{className:"font-medium",children:ee})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-700 mb-2",children:"Selfie"}),e.jsx("div",{className:"aspect-square bg-gray-100 rounded-xl overflow-hidden",children:Be&&e.jsx("img",{src:`data:image/jpeg;base64,${Be}`,alt:"Selfie",className:"w-full h-full object-cover"})})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-700 mb-2",children:"ID Card"}),e.jsx("div",{className:"aspect-square bg-gray-100 rounded-xl overflow-hidden",children:Ht&&e.jsx("img",{src:`data:image/jpeg;base64,${Ht}`,alt:"ID Card",className:"w-full h-full object-cover"})})]})]}),Yt&&e.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-xl p-4",children:[e.jsx("h5",{className:"font-semibold text-green-900 mb-2",children:"ID Card Data"}),e.jsxs("div",{className:"text-sm space-y-1",children:[Yt.documentNumber&&e.jsxs("p",{children:[e.jsx("span",{className:"text-green-700",children:"ID Number:"})," ",Yt.documentNumber]}),Yt.expiryDate&&e.jsxs("p",{children:[e.jsx("span",{className:"text-green-700",children:"Expiry:"})," ",Yt.expiryDate]}),e.jsxs("p",{children:[e.jsx("span",{className:"text-green-700",children:"Confidence:"})," ",Yt.confidence,"%"]})]})]}),Qt.length>0&&e.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-xl p-4",children:[e.jsx("p",{className:"font-medium text-yellow-700 mb-1",children:"Warnings:"}),e.jsx("ul",{className:"text-sm text-yellow-600 space-y-1",children:Qt.map((Ee,ct)=>e.jsxs("li",{children:[" ",Ee]},ct))})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>Y("id-scan"),className:"flex-1 py-3 bg-gray-100 text-gray-700 rounded-xl font-medium hover:bg-gray-200",children:"Back"}),e.jsx("button",{onClick:pt,className:"flex-1 py-3 bg-primary-600 text-white rounded-xl font-medium hover:bg-primary-700 flex items-center justify-center gap-2",children:"Submit Verification"})]})]}),ie==="submitting"&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Ie,{className:"w-16 h-16 animate-spin text-primary-600 mx-auto mb-4"}),e.jsx("h4",{className:"text-lg font-bold text-gray-900 mb-2",children:"Submitting Verification"}),e.jsx("p",{className:"text-gray-600",children:"Please wait while we process your documents..."})]}),ie==="success"&&e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"w-24 h-24 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(be,{className:"w-12 h-12 text-green-600"})}),e.jsx("h4",{className:"text-xl font-bold text-green-900 mb-2",children:"Verification Submitted!"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Your identity verification has been submitted successfully. We'll review your documents and notify you within 1-2 business days."}),e.jsx("button",{onClick:Pt,className:"w-full py-3 bg-primary-600 text-white rounded-xl font-medium hover:bg-primary-700",children:"Done"})]}),ie==="failed"&&e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"w-24 h-24 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(ut,{className:"w-12 h-12 text-red-600"})}),e.jsx("h4",{className:"text-xl font-bold text-red-900 mb-2",children:"Verification Failed"}),e.jsx("p",{className:"text-gray-600 mb-4",children:ue||"We were unable to verify your identity. Please try again."}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:Pt,className:"flex-1 py-3 bg-gray-100 text-gray-700 rounded-xl font-medium hover:bg-gray-200",children:"Cancel"}),e.jsx("button",{onClick:()=>Y("info"),className:"flex-1 py-3 bg-primary-600 text-white rounded-xl font-medium hover:bg-primary-700",children:"Try Again"})]})]})]})})]})}function dZ(){const t=[{category:"Authentication",items:[{method:"POST",path:"/api/v1/auth/register",description:"Register a new user"},{method:"POST",path:"/api/v1/auth/login",description:"Login and get tokens"},{method:"POST",path:"/api/v1/auth/refresh",description:"Refresh access token"},{method:"POST",path:"/api/v1/auth/logout",description:"Logout and invalidate tokens"},{method:"GET",path:"/api/v1/auth/profile",description:"Get current user profile"}]},{category:"Wallets",items:[{method:"GET",path:"/api/v1/wallets",description:"List all wallets"},{method:"POST",path:"/api/v1/wallets",description:"Create a new wallet"},{method:"GET",path:"/api/v1/wallets/:id",description:"Get wallet details"},{method:"POST",path:"/api/v1/wallets/:id/deposit",description:"Deposit funds"},{method:"POST",path:"/api/v1/wallets/transfer",description:"Transfer between wallets"},{method:"POST",path:"/api/v1/wallets/:id/freeze",description:"Freeze wallet"},{method:"POST",path:"/api/v1/wallets/:id/unfreeze",description:"Unfreeze wallet"}]},{category:"Cards",items:[{method:"GET",path:"/api/v1/cards",description:"List all cards"},{method:"POST",path:"/api/v1/cards",description:"Create a new card"},{method:"GET",path:"/api/v1/cards/:id",description:"Get card details"},{method:"POST",path:"/api/v1/cards/:id/activate",description:"Activate card"},{method:"POST",path:"/api/v1/cards/:id/block",description:"Block card"},{method:"POST",path:"/api/v1/cards/:id/unblock",description:"Unblock card"},{method:"PATCH",path:"/api/v1/cards/:id/limits",description:"Update card limits"},{method:"GET",path:"/api/v1/cards/:id/details",description:"Get sensitive card details"}]},{category:"Transactions",items:[{method:"GET",path:"/api/v1/transactions",description:"List all transactions"},{method:"GET",path:"/api/v1/transactions/:id",description:"Get transaction details"},{method:"POST",path:"/api/v1/transactions/authorize",description:"Authorize a payment"},{method:"POST",path:"/api/v1/transactions/:id/capture",description:"Capture authorized payment"},{method:"POST",path:"/api/v1/transactions/:id/reverse",description:"Reverse a transaction"}]}],s=r=>{switch(r){case"GET":return"bg-green-100 text-green-700";case"POST":return"bg-blue-100 text-blue-700";case"PUT":return"bg-yellow-100 text-yellow-700";case"PATCH":return"bg-orange-100 text-orange-700";case"DELETE":return"bg-red-100 text-red-700";default:return"bg-gray-100 text-gray-700"}};return e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("div",{className:"bg-white border-b border-gray-200",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"API Documentation"}),e.jsx("p",{className:"mt-2 text-gray-600",children:"Complete reference for the PaymentSystem REST API"})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx("a",{href:"/api/docs",target:"_blank",children:e.jsxs(De,{variant:"outline",children:[e.jsx(Fr,{className:"w-4 h-4 mr-2"}),"Swagger UI"]})}),e.jsx("a",{href:"/",children:e.jsx(De,{variant:"outline",children:"Back to Home"})})]})]})})}),e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-8",children:[e.jsx("div",{className:"lg:col-span-1",children:e.jsxs(W,{className:"sticky top-8",children:[e.jsx(Sr,{children:e.jsx(_r,{className:"text-base",children:"Quick Links"})}),e.jsx("nav",{className:"space-y-1",children:t.map(r=>e.jsx("a",{href:`#${r.category.toLowerCase()}`,className:"block px-4 py-2 text-sm text-gray-600 hover:bg-gray-50 hover:text-gray-900 rounded-lg",children:r.category},r.category))}),e.jsxs("div",{className:"mt-6 px-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 mb-3",children:"Resources"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("a",{href:"/api/docs",target:"_blank",className:"flex items-center text-sm text-gray-600 hover:text-gray-900",children:[e.jsx(LT,{className:"w-4 h-4 mr-2"}),"Swagger UI"]}),e.jsxs("a",{href:"#",className:"flex items-center text-sm text-gray-600 hover:text-gray-900",children:[e.jsx(F1,{className:"w-4 h-4 mr-2"}),"SDK Libraries"]}),e.jsxs("a",{href:"#",className:"flex items-center text-sm text-gray-600 hover:text-gray-900",children:[e.jsx(KT,{className:"w-4 h-4 mr-2"}),"Postman Collection"]})]})]})]})}),e.jsxs("div",{className:"lg:col-span-3 space-y-8",children:[e.jsxs(W,{children:[e.jsxs(Sr,{children:[e.jsx(_r,{children:"Base URL"}),e.jsx(Nc,{children:"All API requests should be made to:"})]}),e.jsx("div",{className:"bg-gray-900 rounded-lg p-4 font-mono text-sm text-green-400",children:"http://localhost:3000/api/v1"})]}),e.jsxs(W,{children:[e.jsxs(Sr,{children:[e.jsx(_r,{children:"Authentication"}),e.jsx(Nc,{children:"Most endpoints require authentication via Bearer token"})]}),e.jsx("div",{className:"bg-gray-900 rounded-lg p-4 font-mono text-sm text-gray-300 overflow-x-auto",children:e.jsx("pre",{children:`// Include in request headers
Authorization: Bearer <access_token>

// Example
curl -X GET http://localhost:3000/api/v1/wallets \\
  -H "Authorization: Bearer eyJhbGciOiJIUzI1NiIs..."`})})]}),t.map(r=>e.jsxs(W,{id:r.category.toLowerCase(),children:[e.jsx(Sr,{children:e.jsx(_r,{children:r.category})}),e.jsx("div",{className:"divide-y divide-gray-100",children:r.items.map((a,n)=>e.jsxs("div",{className:"py-4 flex items-start gap-4",children:[e.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${s(a.method)}`,children:a.method}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("code",{className:"text-sm font-mono text-gray-900",children:a.path}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:a.description})]})]},n))})]},r.category)),e.jsxs(W,{children:[e.jsxs(Sr,{children:[e.jsx(_r,{children:"Example: Create a Card"}),e.jsx(Nc,{children:"Full example of creating a virtual card"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-700 mb-2",children:"Request"}),e.jsx("div",{className:"bg-gray-900 rounded-lg p-4 font-mono text-sm text-gray-300 overflow-x-auto",children:e.jsx("pre",{children:`POST /api/v1/cards
Content-Type: application/json
Authorization: Bearer <token>

{
  "walletId": "uuid-of-wallet",
  "type": "VIRTUAL",
  "cardholderName": "JOHN DOE",
  "dailyLimit": 1000,
  "monthlyLimit": 5000
}`})})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-700 mb-2",children:"Response (201 Created)"}),e.jsx("div",{className:"bg-gray-900 rounded-lg p-4 font-mono text-sm text-gray-300 overflow-x-auto",children:e.jsx("pre",{children:`{
  "id": "card-uuid",
  "walletId": "uuid-of-wallet",
  "maskedNumber": "**** **** **** 1234",
  "expiryMonth": 12,
  "expiryYear": 2027,
  "cardholderName": "JOHN DOE",
  "status": "INACTIVE",
  "type": "VIRTUAL",
  "dailyLimit": 1000,
  "monthlyLimit": 5000,
  "createdAt": "2024-11-29T10:00:00.000Z"
}`})})]})]})]}),e.jsxs(W,{children:[e.jsxs(Sr,{children:[e.jsx(_r,{children:"Error Responses"}),e.jsx(Nc,{children:"Standard error format for all endpoints"})]}),e.jsx("div",{className:"bg-gray-900 rounded-lg p-4 font-mono text-sm text-gray-300 overflow-x-auto",children:e.jsx("pre",{children:`// 400 Bad Request
{
  "statusCode": 400,
  "message": ["email must be a valid email"],
  "error": "Bad Request"
}

// 401 Unauthorized
{
  "statusCode": 401,
  "message": "Invalid credentials",
  "error": "Unauthorized"
}

// 404 Not Found
{
  "statusCode": 404,
  "message": "Card not found",
  "error": "Not Found"
}`})})]})]})]})})]})}var BD=t=>{throw TypeError(t)},$D=(t,s,r)=>s.has(t)||BD("Cannot "+r),uZ=(t,s,r)=>($D(t,s,"read from private field"),r?r.call(t):s.get(t)),mZ=(t,s,r)=>s.has(t)?BD("Cannot add the same private member more than once"):s instanceof WeakSet?s.add(t):s.set(t,r),hZ=(t,s,r,a)=>($D(t,s,"write to private field"),s.set(t,r),r);const sy=[["Aztec","M"],["Codabar","L"],["Code39","L"],["Code93","L"],["Code128","L"],["DataBar","L"],["DataBarExpanded","L"],["DataMatrix","M"],["EAN-8","L"],["EAN-13","L"],["ITF","L"],["MaxiCode","M"],["PDF417","M"],["QRCode","M"],["UPC-A","L"],["UPC-E","L"],["MicroQRCode","M"],["rMQRCode","M"],["DXFilmEdge","L"],["DataBarLimited","L"]],ry=sy.map(([t])=>t),pZ=ry.filter((t,s)=>sy[s][1]==="L"),xZ=ry.filter((t,s)=>sy[s][1]==="M");function Lw(t){switch(t){case"Linear-Codes":return pZ.reduce((s,r)=>s|Lw(r),0);case"Matrix-Codes":return xZ.reduce((s,r)=>s|Lw(r),0);case"Any":return(1<<sy.length)-1;case"None":return 0;default:return 1<<ry.indexOf(t)}}function gZ(t){if(t===0)return"None";const s=31-Math.clz32(t);return ry[s]}function fZ(t){return t.reduce((s,r)=>s|Lw(r),0)}const yZ=["LocalAverage","GlobalHistogram","FixedThreshold","BoolCast"];function bZ(t){return yZ.indexOf(t)}const O5=["Unknown","ASCII","ISO8859_1","ISO8859_2","ISO8859_3","ISO8859_4","ISO8859_5","ISO8859_6","ISO8859_7","ISO8859_8","ISO8859_9","ISO8859_10","ISO8859_11","ISO8859_13","ISO8859_14","ISO8859_15","ISO8859_16","Cp437","Cp1250","Cp1251","Cp1252","Cp1256","Shift_JIS","Big5","GB2312","GB18030","EUC_JP","EUC_KR","UTF16BE","UTF16BE","UTF8","UTF16LE","UTF32BE","UTF32LE","BINARY"];function vZ(t){return t==="UnicodeBig"?O5.indexOf("UTF16BE"):O5.indexOf(t)}const jZ=["Text","Binary","Mixed","GS1","ISO15434","UnknownECI"];function wZ(t){return jZ[t]}const NZ=["Ignore","Read","Require"];function kZ(t){return NZ.indexOf(t)}const CZ=["Plain","ECI","HRI","Hex","Escaped"];function SZ(t){return CZ.indexOf(t)}const Hg={formats:[],tryHarder:!0,tryRotate:!0,tryInvert:!0,tryDownscale:!0,tryDenoise:!1,binarizer:"LocalAverage",isPure:!1,downscaleFactor:3,downscaleThreshold:500,minLineCount:2,maxNumberOfSymbols:255,tryCode39ExtendedMode:!0,returnErrors:!1,eanAddOnSymbol:"Ignore",textMode:"HRI",characterSet:"Unknown"};function B5(t){return{...t,formats:fZ(t.formats),binarizer:bZ(t.binarizer),eanAddOnSymbol:kZ(t.eanAddOnSymbol),textMode:SZ(t.textMode),characterSet:vZ(t.characterSet)}}function _Z(t){return{...t,format:gZ(t.format),contentType:wZ(t.contentType),eccLevel:t.ecLevel}}const EZ={locateFile:(t,s)=>{const r=t.match(/_(.+?)\.wasm$/);return r?`https://fastly.jsdelivr.net/npm/zxing-wasm@2.2.2/dist/${r[1]}/${t}`:s+t}},uv=new WeakMap;function AZ(t,s){return Object.is(t,s)||Object.keys(t).length===Object.keys(s).length&&Object.keys(t).every(r=>Object.hasOwn(s,r)&&t[r]===s[r])}function UD(t,{overrides:s,equalityFn:r=AZ,fireImmediately:a=!1}={}){var n;const[i,l]=(n=uv.get(t))!=null?n:[EZ],o=s??i;let c;if(a){if(l&&(c=r(i,o)))return l;const d=t({...o});return uv.set(t,[o,d]),d}(c??r(i,o))||uv.set(t,[o])}async function TZ(t,s,r=Hg){const a={...Hg,...r},n=await UD(t,{fireImmediately:!0});let i,l;if("width"in s&&"height"in s&&"data"in s){const{data:c,data:{byteLength:d},width:u,height:m}=s;l=n._malloc(d),n.HEAPU8.set(c,l),i=n.readBarcodesFromPixmap(l,u,m,B5(a))}else{let c,d;if("buffer"in s)[c,d]=[s.byteLength,s];else if("byteLength"in s)[c,d]=[s.byteLength,new Uint8Array(s)];else if("size"in s)[c,d]=[s.size,new Uint8Array(await s.arrayBuffer())];else throw new TypeError("Invalid input type");l=n._malloc(c),n.HEAPU8.set(d,l),i=n.readBarcodesFromImage(l,c,B5(a))}n._free(l);const o=[];for(let c=0;c<i.size();++c)o.push(_Z(i.get(c)));return o}({...Hg,formats:[...Hg.formats]});var VD=async function(t={}){var s,r,a=t,n,i,l=new Promise((F,M)=>{n=F,i=M}),o=typeof window=="object",c=typeof Bun<"u",d=typeof WorkerGlobalScope<"u";typeof process=="object"&&!((r=process.versions)===null||r===void 0)&&r.node&&process.type!="renderer";var u="./this.program",m,p="";function x(F){return a.locateFile?a.locateFile(F,p):p+F}var g,f;if(o||d||c){try{p=new URL(".",m).href}catch{}d&&(f=F=>{var M=new XMLHttpRequest;return M.open("GET",F,!1),M.responseType="arraybuffer",M.send(null),new Uint8Array(M.response)}),g=async F=>{var M=await fetch(F,{credentials:"same-origin"});if(M.ok)return M.arrayBuffer();throw new Error(M.status+" : "+M.url)}}var b=console.log.bind(console),j=console.error.bind(console),v,w,y=!1,C,S,_,E,A,R,I,N;function P(){var F=w.buffer;C=new Int8Array(F),_=new Int16Array(F),a.HEAPU8=S=new Uint8Array(F),E=new Uint16Array(F),A=new Int32Array(F),R=new Uint32Array(F),I=new Float32Array(F),N=new Float64Array(F)}function k(){if(a.preRun)for(typeof a.preRun=="function"&&(a.preRun=[a.preRun]);a.preRun.length;)ue(a.preRun.shift());ie(H)}function D(){Ls.ya()}function $(){if(a.postRun)for(typeof a.postRun=="function"&&(a.postRun=[a.postRun]);a.postRun.length;)G(a.postRun.shift());ie(Y)}var L=0,B=null;function T(F){var M;L++,(M=a.monitorRunDependencies)===null||M===void 0||M.call(a,L)}function O(F){var M;if(L--,(M=a.monitorRunDependencies)===null||M===void 0||M.call(a,L),L==0&&B){var V=B;B=null,V()}}function q(F){var M;(M=a.onAbort)===null||M===void 0||M.call(a,F),F="Aborted("+F+")",j(F),y=!0,F+=". Build with -sASSERTIONS for more info.";var V=new WebAssembly.RuntimeError(F);throw i(V),V}var K;function le(){return x("zxing_reader.wasm")}function X(F){if(F==K&&v)return new Uint8Array(v);if(f)return f(F);throw"both async and sync fetching of the wasm failed"}async function se(F){if(!v)try{var M=await g(F);return new Uint8Array(M)}catch{}return X(F)}async function de(F,M){try{var V=await se(F),Z=await WebAssembly.instantiate(V,M);return Z}catch(ae){j(`failed to asynchronously prepare wasm: ${ae}`),q(ae)}}async function fe(F,M,V){if(!F&&typeof WebAssembly.instantiateStreaming=="function")try{var Z=fetch(M,{credentials:"same-origin"}),ae=await WebAssembly.instantiateStreaming(Z,V);return ae}catch(ce){j(`wasm streaming compile failed: ${ce}`),j("falling back to ArrayBuffer instantiation")}return de(M,V)}function z(){return{a:uF}}async function re(){function F(ce,xe){return Ls=ce.exports,w=Ls.xa,P(),fk=Ls.Ba,O(),Ls}T();function M(ce){return F(ce.instance)}var V=z();if(a.instantiateWasm)return new Promise((ce,xe)=>{a.instantiateWasm(V,(pe,ke)=>{ce(F(pe))})});K!=null||(K=le());try{var Z=await fe(v,K,V),ae=M(Z);return ae}catch(ce){return i(ce),Promise.reject(ce)}}var ie=F=>{for(;F.length>0;)F.shift()(a)},Y=[],G=F=>Y.push(F),H=[],ue=F=>H.push(F),me=F=>xF(F),ne=()=>gF(),Ae=[],Fe=0,at=F=>{var M=new ee(F);return M.get_caught()||(M.set_caught(!0),Fe--),M.set_rethrown(!1),Ae.push(M),yF(F),hF(F)},J=0,Q=()=>{qt(0,0);var F=Ae.pop();fF(F.excPtr),J=0};class ee{constructor(M){this.excPtr=M,this.ptr=M-24}set_type(M){R[this.ptr+4>>2]=M}get_type(){return R[this.ptr+4>>2]}set_destructor(M){R[this.ptr+8>>2]=M}get_destructor(){return R[this.ptr+8>>2]}set_caught(M){M=M?1:0,C[this.ptr+12]=M}get_caught(){return C[this.ptr+12]!=0}set_rethrown(M){M=M?1:0,C[this.ptr+13]=M}get_rethrown(){return C[this.ptr+13]!=0}init(M,V){this.set_adjusted_ptr(0),this.set_type(M),this.set_destructor(V)}set_adjusted_ptr(M){R[this.ptr+16>>2]=M}get_adjusted_ptr(){return R[this.ptr+16>>2]}}var Ne=F=>pF(F),ye=F=>{var M=J;if(!M)return Ne(0),0;var V=new ee(M);V.set_adjusted_ptr(M);var Z=V.get_type();if(!Z)return Ne(0),M;for(var ae of F){if(ae===0||ae===Z)break;var ce=V.ptr+16;if(bF(ae,Z,ce))return Ne(ae),M}return Ne(Z),M},he=()=>ye([]),Ce=F=>ye([F]),Se=(F,M)=>ye([F,M]),Be=()=>{var F=Ae.pop();F||q("no exception to throw");var M=F.excPtr;throw F.get_rethrown()||(Ae.push(F),F.set_rethrown(!0),F.set_caught(!1),Fe++),J=M,J},Dt=(F,M,V)=>{var Z=new ee(F);throw Z.init(M,V),J=F,Fe++,J},Ht=()=>Fe,Xe=F=>{throw J||(J=F),J},Yt=()=>q(""),Mt={},Qt=F=>{for(;F.length;){var M=F.pop(),V=F.pop();V(M)}};function Wt(F){return this.fromWireType(R[F>>2])}var Ks={},As={},fs={},ma=class extends Error{constructor(F){super(F),this.name="InternalError"}},er=F=>{throw new ma(F)},ze=(F,M,V)=>{F.forEach(pe=>fs[pe]=M);function Z(pe){var ke=V(pe);ke.length!==F.length&&er("Mismatched type converter count");for(var Le=0;Le<F.length;++Le)Ve(F[Le],ke[Le])}var ae=new Array(M.length),ce=[],xe=0;M.forEach((pe,ke)=>{As.hasOwnProperty(pe)?ae[ke]=As[pe]:(ce.push(pe),Ks.hasOwnProperty(pe)||(Ks[pe]=[]),Ks[pe].push(()=>{ae[ke]=As[pe],++xe,xe===ce.length&&Z(ae)}))}),ce.length===0&&Z(ae)},Bt=F=>{var M=Mt[F];delete Mt[F];var V=M.rawConstructor,Z=M.rawDestructor,ae=M.fields,ce=ae.map(xe=>xe.getterReturnType).concat(ae.map(xe=>xe.setterArgumentType));ze([F],ce,xe=>{var pe={};return ae.forEach((ke,Le)=>{var We=ke.fieldName,Ct=xe[Le],Jt=xe[Le].optional,as=ke.getter,Fs=ke.getterContext,br=xe[Le+ae.length],ur=ke.setter,Ar=ke.setterContext;pe[We]={read:Ki=>Ct.fromWireType(as(Fs,Ki)),write:(Ki,Ta)=>{var pn=[];ur(Ar,Ki,br.toWireType(pn,Ta)),Qt(pn)},optional:Jt}}),[{name:M.name,fromWireType:ke=>{var Le={};for(var We in pe)Le[We]=pe[We].read(ke);return Z(ke),Le},toWireType:(ke,Le)=>{for(var We in pe)if(!(We in Le)&&!pe[We].optional)throw new TypeError(`Missing field: "${We}"`);var Ct=V();for(We in pe)pe[We].write(Ct,Le[We]);return ke!==null&&ke.push(Z,Ct),Ct},argPackAdvance:pt,readValueFromPointer:Wt,destructorFunction:Z}]})},ys=(F,M,V,Z,ae)=>{},Zr=()=>{for(var F=new Array(256),M=0;M<256;++M)F[M]=String.fromCharCode(M);Xr=F},Xr,Ms=F=>{for(var M="",V=F;S[V];)M+=Xr[S[V++]];return M},ot=class extends Error{constructor(F){super(F),this.name="BindingError"}},ht=F=>{throw new ot(F)};function $e(F,M){let V=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};var Z=M.name;if(F||ht(`type "${Z}" must have a positive integer typeid pointer`),As.hasOwnProperty(F)){if(V.ignoreDuplicateRegistrations)return;ht(`Cannot register type '${Z}' twice`)}if(As[F]=M,delete fs[F],Ks.hasOwnProperty(F)){var ae=Ks[F];delete Ks[F],ae.forEach(ce=>ce())}}function Ve(F,M){let V=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return $e(F,M,V)}var pt=8,Pt=(F,M,V,Z)=>{M=Ms(M),Ve(F,{name:M,fromWireType:function(ae){return!!ae},toWireType:function(ae,ce){return ce?V:Z},argPackAdvance:pt,readValueFromPointer:function(ae){return this.fromWireType(S[ae])},destructorFunction:null})},hs=F=>({count:F.count,deleteScheduled:F.deleteScheduled,preservePointerOnDelete:F.preservePointerOnDelete,ptr:F.ptr,ptrType:F.ptrType,smartPtr:F.smartPtr,smartPtrType:F.smartPtrType}),Ee=F=>{function M(V){return V.$$.ptrType.registeredClass.name}ht(M(F)+" instance already deleted")},ct=!1,je=F=>{},Ge=F=>{F.smartPtr?F.smartPtrType.rawDestructor(F.smartPtr):F.ptrType.registeredClass.rawDestructor(F.ptr)},nt=F=>{F.count.value-=1;var M=F.count.value===0;M&&Ge(F)},dr=F=>typeof FinalizationRegistry>"u"?(dr=M=>M,F):(ct=new FinalizationRegistry(M=>{nt(M.$$)}),dr=M=>{var V=M.$$,Z=!!V.smartPtr;if(Z){var ae={$$:V};ct.register(M,ae,M)}return M},je=M=>ct.unregister(M),dr(F)),Aa=()=>{let F=tr.prototype;Object.assign(F,{isAliasOf(V){if(!(this instanceof tr)||!(V instanceof tr))return!1;var Z=this.$$.ptrType.registeredClass,ae=this.$$.ptr;V.$$=V.$$;for(var ce=V.$$.ptrType.registeredClass,xe=V.$$.ptr;Z.baseClass;)ae=Z.upcast(ae),Z=Z.baseClass;for(;ce.baseClass;)xe=ce.upcast(xe),ce=ce.baseClass;return Z===ce&&ae===xe},clone(){if(this.$$.ptr||Ee(this),this.$$.preservePointerOnDelete)return this.$$.count.value+=1,this;var V=dr(Object.create(Object.getPrototypeOf(this),{$$:{value:hs(this.$$)}}));return V.$$.count.value+=1,V.$$.deleteScheduled=!1,V},delete(){this.$$.ptr||Ee(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&ht("Object already scheduled for deletion"),je(this),nt(this.$$),this.$$.preservePointerOnDelete||(this.$$.smartPtr=void 0,this.$$.ptr=void 0)},isDeleted(){return!this.$$.ptr},deleteLater(){return this.$$.ptr||Ee(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&ht("Object already scheduled for deletion"),this.$$.deleteScheduled=!0,this}});const M=Symbol.dispose;M&&(F[M]=F.delete)};function tr(){}var Ur=(F,M)=>Object.defineProperty(M,"name",{value:F}),dd={},Rl=(F,M,V)=>{if(F[M].overloadTable===void 0){var Z=F[M];F[M]=function(){for(var ae=arguments.length,ce=new Array(ae),xe=0;xe<ae;xe++)ce[xe]=arguments[xe];return F[M].overloadTable.hasOwnProperty(ce.length)||ht(`Function '${V}' called with an invalid number of arguments (${ce.length}) - expects one of (${F[M].overloadTable})!`),F[M].overloadTable[ce.length].apply(this,ce)},F[M].overloadTable=[],F[M].overloadTable[Z.argCount]=Z}},hk=(F,M,V)=>{a.hasOwnProperty(F)?((V===void 0||a[F].overloadTable!==void 0&&a[F].overloadTable[V]!==void 0)&&ht(`Cannot register public name '${F}' twice`),Rl(a,F,F),a[F].overloadTable.hasOwnProperty(V)&&ht(`Cannot register multiple overloads of a function with the same number of arguments (${V})!`),a[F].overloadTable[V]=M):(a[F]=M,a[F].argCount=V)},ZM=48,XM=57,eL=F=>{F=F.replace(/[^a-zA-Z0-9_]/g,"$");var M=F.charCodeAt(0);return M>=ZM&&M<=XM?`_${F}`:F};function tL(F,M,V,Z,ae,ce,xe,pe){this.name=F,this.constructor=M,this.instancePrototype=V,this.rawDestructor=Z,this.baseClass=ae,this.getActualType=ce,this.upcast=xe,this.downcast=pe,this.pureVirtualFunctions=[]}var Hy=(F,M,V)=>{for(;M!==V;)M.upcast||ht(`Expected null or instance of ${V.name}, got an instance of ${M.name}`),F=M.upcast(F),M=M.baseClass;return F},Yy=F=>{if(F===null)return"null";var M=typeof F;return M==="object"||M==="array"||M==="function"?F.toString():""+F};function sL(F,M){if(M===null)return this.isReference&&ht(`null is not a valid ${this.name}`),0;M.$$||ht(`Cannot pass "${Yy(M)}" as a ${this.name}`),M.$$.ptr||ht(`Cannot pass deleted object as a pointer of type ${this.name}`);var V=M.$$.ptrType.registeredClass,Z=Hy(M.$$.ptr,V,this.registeredClass);return Z}function rL(F,M){var V;if(M===null)return this.isReference&&ht(`null is not a valid ${this.name}`),this.isSmartPointer?(V=this.rawConstructor(),F!==null&&F.push(this.rawDestructor,V),V):0;(!M||!M.$$)&&ht(`Cannot pass "${Yy(M)}" as a ${this.name}`),M.$$.ptr||ht(`Cannot pass deleted object as a pointer of type ${this.name}`),!this.isConst&&M.$$.ptrType.isConst&&ht(`Cannot convert argument of type ${M.$$.smartPtrType?M.$$.smartPtrType.name:M.$$.ptrType.name} to parameter type ${this.name}`);var Z=M.$$.ptrType.registeredClass;if(V=Hy(M.$$.ptr,Z,this.registeredClass),this.isSmartPointer)switch(M.$$.smartPtr===void 0&&ht("Passing raw pointer to smart pointer is illegal"),this.sharingPolicy){case 0:M.$$.smartPtrType===this?V=M.$$.smartPtr:ht(`Cannot convert argument of type ${M.$$.smartPtrType?M.$$.smartPtrType.name:M.$$.ptrType.name} to parameter type ${this.name}`);break;case 1:V=M.$$.smartPtr;break;case 2:if(M.$$.smartPtrType===this)V=M.$$.smartPtr;else{var ae=M.clone();V=this.rawShare(V,Gi.toHandle(()=>ae.delete())),F!==null&&F.push(this.rawDestructor,V)}break;default:ht("Unsupporting sharing policy")}return V}function aL(F,M){if(M===null)return this.isReference&&ht(`null is not a valid ${this.name}`),0;M.$$||ht(`Cannot pass "${Yy(M)}" as a ${this.name}`),M.$$.ptr||ht(`Cannot pass deleted object as a pointer of type ${this.name}`),M.$$.ptrType.isConst&&ht(`Cannot convert argument of type ${M.$$.ptrType.name} to parameter type ${this.name}`);var V=M.$$.ptrType.registeredClass,Z=Hy(M.$$.ptr,V,this.registeredClass);return Z}var pk=(F,M,V)=>{if(M===V)return F;if(V.baseClass===void 0)return null;var Z=pk(F,M,V.baseClass);return Z===null?null:V.downcast(Z)},nL={},iL=(F,M)=>{for(M===void 0&&ht("ptr should not be undefined");F.baseClass;)M=F.upcast(M),F=F.baseClass;return M},lL=(F,M)=>(M=iL(F,M),nL[M]),Y0=(F,M)=>{(!M.ptrType||!M.ptr)&&er("makeClassHandle requires ptr and ptrType");var V=!!M.smartPtrType,Z=!!M.smartPtr;return V!==Z&&er("Both smartPtrType and smartPtr must be specified"),M.count={value:1},dr(Object.create(F,{$$:{value:M,writable:!0}}))};function oL(F){var M=this.getPointee(F);if(!M)return this.destructor(F),null;var V=lL(this.registeredClass,M);if(V!==void 0){if(V.$$.count.value===0)return V.$$.ptr=M,V.$$.smartPtr=F,V.clone();var Z=V.clone();return this.destructor(F),Z}function ae(){return this.isSmartPointer?Y0(this.registeredClass.instancePrototype,{ptrType:this.pointeeType,ptr:M,smartPtrType:this,smartPtr:F}):Y0(this.registeredClass.instancePrototype,{ptrType:this,ptr:F})}var ce=this.registeredClass.getActualType(M),xe=dd[ce];if(!xe)return ae.call(this);var pe;this.isConst?pe=xe.constPointerType:pe=xe.pointerType;var ke=pk(M,this.registeredClass,pe.registeredClass);return ke===null?ae.call(this):this.isSmartPointer?Y0(pe.registeredClass.instancePrototype,{ptrType:pe,ptr:ke,smartPtrType:this,smartPtr:F}):Y0(pe.registeredClass.instancePrototype,{ptrType:pe,ptr:ke})}var cL=()=>{Object.assign(Q0.prototype,{getPointee(F){return this.rawGetPointee&&(F=this.rawGetPointee(F)),F},destructor(F){var M;(M=this.rawDestructor)===null||M===void 0||M.call(this,F)},argPackAdvance:pt,readValueFromPointer:Wt,fromWireType:oL})};function Q0(F,M,V,Z,ae,ce,xe,pe,ke,Le,We){this.name=F,this.registeredClass=M,this.isReference=V,this.isConst=Z,this.isSmartPointer=ae,this.pointeeType=ce,this.sharingPolicy=xe,this.rawGetPointee=pe,this.rawConstructor=ke,this.rawShare=Le,this.rawDestructor=We,!ae&&M.baseClass===void 0?Z?(this.toWireType=sL,this.destructorFunction=null):(this.toWireType=aL,this.destructorFunction=null):this.toWireType=rL}var xk=(F,M,V)=>{a.hasOwnProperty(F)||er("Replacing nonexistent public symbol"),a[F].overloadTable!==void 0&&V!==void 0?a[F].overloadTable[V]=M:(a[F]=M,a[F].argCount=V)},gk=[],fk,zt=F=>{var M=gk[F];return M||(gk[F]=M=fk.get(F)),M},dL=function(F,M){let V=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[];if(F.includes("j"))return dynCallLegacy(F,M,V);var Z=zt(M),ae=Z(...V);return ae},uL=function(F,M){let V=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;return function(){for(var Z=arguments.length,ae=new Array(Z),ce=0;ce<Z;ce++)ae[ce]=arguments[ce];return dL(F,M,ae,V)}},zn=function(F,M){F=Ms(F);function V(){if(F.includes("j"))return uL(F,M);var ae=zt(M);return ae}var Z=V();return typeof Z!="function"&&ht(`unknown function pointer with signature ${F}: ${M}`),Z};class mL extends Error{}var yk=F=>{var M=mF(F),V=Ms(M);return Qo(M),V},J0=(F,M)=>{var V=[],Z={};function ae(ce){if(!Z[ce]&&!As[ce]){if(fs[ce]){fs[ce].forEach(ae);return}V.push(ce),Z[ce]=!0}}throw M.forEach(ae),new mL(`${F}: `+V.map(yk).join([", "]))},hL=(F,M,V,Z,ae,ce,xe,pe,ke,Le,We,Ct,Jt)=>{We=Ms(We),ce=zn(ae,ce),pe&&(pe=zn(xe,pe)),Le&&(Le=zn(ke,Le)),Jt=zn(Ct,Jt);var as=eL(We);hk(as,function(){J0(`Cannot construct ${We} due to unbound types`,[Z])}),ze([F,M,V],Z?[Z]:[],Fs=>{Fs=Fs[0];var br,ur;Z?(br=Fs.registeredClass,ur=br.instancePrototype):ur=tr.prototype;var Ar=Ur(We,function(){if(Object.getPrototypeOf(this)!==Ki)throw new ot(`Use 'new' to construct ${We}`);if(Ta.constructor_body===void 0)throw new ot(`${We} has no accessible constructor`);for(var Pk=arguments.length,X0=new Array(Pk),ep=0;ep<Pk;ep++)X0[ep]=arguments[ep];var Rk=Ta.constructor_body[X0.length];if(Rk===void 0)throw new ot(`Tried to invoke ctor of ${We} with invalid number of parameters (${X0.length}) - expected (${Object.keys(Ta.constructor_body).toString()}) parameters instead!`);return Rk.apply(this,X0)}),Ki=Object.create(ur,{constructor:{value:Ar}});Ar.prototype=Ki;var Ta=new tL(We,Ar,Ki,Jt,br,ce,pe,Le);if(Ta.baseClass){var pn,Z0;(Z0=(pn=Ta.baseClass).__derivedClasses)!==null&&Z0!==void 0||(pn.__derivedClasses=[]),Ta.baseClass.__derivedClasses.push(Ta)}var aO=new Q0(We,Ta,!0,!1,!1),Ak=new Q0(We+"*",Ta,!1,!1,!1),Tk=new Q0(We+" const*",Ta,!1,!0,!1);return dd[F]={pointerType:Ak,constPointerType:Tk},xk(as,Ar),[aO,Ak,Tk]})},Qy=(F,M)=>{for(var V=[],Z=0;Z<F;Z++)V.push(R[M+Z*4>>2]);return V};function pL(F){for(var M=1;M<F.length;++M)if(F[M]!==null&&F[M].destructorFunction===void 0)return!0;return!1}function Jy(F,M,V,Z,ae,ce){var xe=M.length;xe<2&&ht("argTypes array size mismatch! Must at least get return value and 'this' types!");var pe=M[1]!==null&&V!==null,ke=pL(M),Le=M[0].name!=="void",We=xe-2,Ct=new Array(We),Jt=[],as=[],Fs=function(){as.length=0;var br;Jt.length=pe?2:1,Jt[0]=ae,pe&&(br=M[1].toWireType(as,this),Jt[1]=br);for(var ur=0;ur<We;++ur)Ct[ur]=M[ur+2].toWireType(as,ur<0||arguments.length<=ur?void 0:arguments[ur]),Jt.push(Ct[ur]);var Ar=Z(...Jt);function Ki(Ta){if(ke)Qt(as);else for(var pn=pe?1:2;pn<M.length;pn++){var Z0=pn===1?br:Ct[pn-2];M[pn].destructorFunction!==null&&M[pn].destructorFunction(Z0)}if(Le)return M[0].fromWireType(Ta)}return Ki(Ar)};return Ur(F,Fs)}var xL=(F,M,V,Z,ae,ce)=>{var xe=Qy(M,V);ae=zn(Z,ae),ze([],[F],pe=>{pe=pe[0];var ke=`constructor ${pe.name}`;if(pe.registeredClass.constructor_body===void 0&&(pe.registeredClass.constructor_body=[]),pe.registeredClass.constructor_body[M-1]!==void 0)throw new ot(`Cannot register multiple constructors with identical number of parameters (${M-1}) for class '${pe.name}'! Overload resolution is currently only performed using the parameter count, not actual type info!`);return pe.registeredClass.constructor_body[M-1]=()=>{J0(`Cannot construct ${pe.name} due to unbound types`,xe)},ze([],xe,Le=>(Le.splice(1,0,null),pe.registeredClass.constructor_body[M-1]=Jy(ke,Le,null,ae,ce),[])),[]})},bk=F=>{F=F.trim();const M=F.indexOf("(");return M===-1?F:F.slice(0,M)},gL=(F,M,V,Z,ae,ce,xe,pe,ke,Le)=>{var We=Qy(V,Z);M=Ms(M),M=bk(M),ce=zn(ae,ce),ze([],[F],Ct=>{Ct=Ct[0];var Jt=`${Ct.name}.${M}`;M.startsWith("@@")&&(M=Symbol[M.substring(2)]),pe&&Ct.registeredClass.pureVirtualFunctions.push(M);function as(){J0(`Cannot call ${Jt} due to unbound types`,We)}var Fs=Ct.registeredClass.instancePrototype,br=Fs[M];return br===void 0||br.overloadTable===void 0&&br.className!==Ct.name&&br.argCount===V-2?(as.argCount=V-2,as.className=Ct.name,Fs[M]=as):(Rl(Fs,M,Jt),Fs[M].overloadTable[V-2]=as),ze([],We,ur=>{var Ar=Jy(Jt,ur,Ct,ce,xe);return Fs[M].overloadTable===void 0?(Ar.argCount=V-2,Fs[M]=Ar):Fs[M].overloadTable[V-2]=Ar,[]}),[]})},vk=[],Yo=[0,1,,1,null,1,!0,1,!1,1],Zy=F=>{F>9&&--Yo[F+1]===0&&(Yo[F]=void 0,vk.push(F))},Gi={toValue:F=>(F||ht(`Cannot use deleted val. handle = ${F}`),Yo[F]),toHandle:F=>{switch(F){case void 0:return 2;case null:return 4;case!0:return 6;case!1:return 8;default:{const M=vk.pop()||Yo.length;return Yo[M]=F,Yo[M+1]=1,M}}}},jk={name:"emscripten::val",fromWireType:F=>{var M=Gi.toValue(F);return Zy(F),M},toWireType:(F,M)=>Gi.toHandle(M),argPackAdvance:pt,readValueFromPointer:Wt,destructorFunction:null},fL=F=>Ve(F,jk),yL=(F,M)=>{switch(M){case 4:return function(V){return this.fromWireType(I[V>>2])};case 8:return function(V){return this.fromWireType(N[V>>3])};default:throw new TypeError(`invalid float width (${M}): ${F}`)}},bL=(F,M,V)=>{M=Ms(M),Ve(F,{name:M,fromWireType:Z=>Z,toWireType:(Z,ae)=>ae,argPackAdvance:pt,readValueFromPointer:yL(M,V),destructorFunction:null})},vL=(F,M,V,Z,ae,ce,xe,pe)=>{var ke=Qy(M,V);F=Ms(F),F=bk(F),ae=zn(Z,ae),hk(F,function(){J0(`Cannot call ${F} due to unbound types`,ke)},M-1),ze([],ke,Le=>{var We=[Le[0],null].concat(Le.slice(1));return xk(F,Jy(F,We,null,ae,ce),M-1),[]})},jL=(F,M,V)=>{switch(M){case 1:return V?Z=>C[Z]:Z=>S[Z];case 2:return V?Z=>_[Z>>1]:Z=>E[Z>>1];case 4:return V?Z=>A[Z>>2]:Z=>R[Z>>2];default:throw new TypeError(`invalid integer width (${M}): ${F}`)}},wL=(F,M,V,Z,ae)=>{M=Ms(M);const ce=Z===0;let xe=ke=>ke;if(ce){var pe=32-8*V;xe=ke=>ke<<pe>>>pe,ae=xe(ae)}Ve(F,{name:M,fromWireType:xe,toWireType:(ke,Le)=>Le,argPackAdvance:pt,readValueFromPointer:jL(M,V,Z!==0),destructorFunction:null})},NL=(F,M,V)=>{var Z=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array],ae=Z[M];function ce(xe){var pe=R[xe>>2],ke=R[xe+4>>2];return new ae(C.buffer,ke,pe)}V=Ms(V),Ve(F,{name:V,fromWireType:ce,argPackAdvance:pt,readValueFromPointer:ce},{ignoreDuplicateRegistrations:!0})},kL=Object.assign({optional:!0},jk),CL=(F,M)=>{Ve(F,kL)},SL=(F,M,V,Z)=>{if(!(Z>0))return 0;for(var ae=V,ce=V+Z-1,xe=0;xe<F.length;++xe){var pe=F.charCodeAt(xe);if(pe>=55296&&pe<=57343){var ke=F.charCodeAt(++xe);pe=65536+((pe&1023)<<10)|ke&1023}if(pe<=127){if(V>=ce)break;M[V++]=pe}else if(pe<=2047){if(V+1>=ce)break;M[V++]=192|pe>>6,M[V++]=128|pe&63}else if(pe<=65535){if(V+2>=ce)break;M[V++]=224|pe>>12,M[V++]=128|pe>>6&63,M[V++]=128|pe&63}else{if(V+3>=ce)break;M[V++]=240|pe>>18,M[V++]=128|pe>>12&63,M[V++]=128|pe>>6&63,M[V++]=128|pe&63}}return M[V]=0,V-ae},ud=(F,M,V)=>SL(F,S,M,V),wk=F=>{for(var M=0,V=0;V<F.length;++V){var Z=F.charCodeAt(V);Z<=127?M++:Z<=2047?M+=2:Z>=55296&&Z<=57343?(M+=4,++V):M+=3}return M},Nk=typeof TextDecoder<"u"?new TextDecoder:void 0,kk=function(F){let M=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,V=arguments.length>2&&arguments[2]!==void 0?arguments[2]:NaN;for(var Z=M+V,ae=M;F[ae]&&!(ae>=Z);)++ae;if(ae-M>16&&F.buffer&&Nk)return Nk.decode(F.subarray(M,ae));for(var ce="";M<ae;){var xe=F[M++];if(!(xe&128)){ce+=String.fromCharCode(xe);continue}var pe=F[M++]&63;if((xe&224)==192){ce+=String.fromCharCode((xe&31)<<6|pe);continue}var ke=F[M++]&63;if((xe&240)==224?xe=(xe&15)<<12|pe<<6|ke:xe=(xe&7)<<18|pe<<12|ke<<6|F[M++]&63,xe<65536)ce+=String.fromCharCode(xe);else{var Le=xe-65536;ce+=String.fromCharCode(55296|Le>>10,56320|Le&1023)}}return ce},_L=(F,M)=>F?kk(S,F,M):"",EL=(F,M)=>{M=Ms(M),Ve(F,{name:M,fromWireType(V){for(var Z=R[V>>2],ae=V+4,ce,pe,xe=ae,pe=0;pe<=Z;++pe){var ke=ae+pe;if(pe==Z||S[ke]==0){var Le=ke-xe,We=_L(xe,Le);ce===void 0?ce=We:(ce+="\0",ce+=We),xe=ke+1}}return Qo(V),ce},toWireType(V,Z){Z instanceof ArrayBuffer&&(Z=new Uint8Array(Z));var ae,ce=typeof Z=="string";ce||ArrayBuffer.isView(Z)&&Z.BYTES_PER_ELEMENT==1||ht("Cannot pass non-string to std::string"),ce?ae=wk(Z):ae=Z.length;var xe=Ek(4+ae+1),pe=xe+4;return R[xe>>2]=ae,ce?ud(Z,pe,ae+1):S.set(Z,pe),V!==null&&V.push(Qo,xe),xe},argPackAdvance:pt,readValueFromPointer:Wt,destructorFunction(V){Qo(V)}})},Ck=typeof TextDecoder<"u"?new TextDecoder("utf-16le"):void 0,AL=(F,M)=>{for(var V=F>>1,Z=V+M/2,ae=V;!(ae>=Z)&&E[ae];)++ae;if(ae-V>16&&Ck)return Ck.decode(E.subarray(V,ae));for(var ce="",xe=V;!(xe>=Z);++xe){var pe=E[xe];if(pe==0)break;ce+=String.fromCharCode(pe)}return ce},TL=(F,M,V)=>{if(V!=null||(V=2147483647),V<2)return 0;V-=2;for(var Z=M,ae=V<F.length*2?V/2:F.length,ce=0;ce<ae;++ce){var xe=F.charCodeAt(ce);_[M>>1]=xe,M+=2}return _[M>>1]=0,M-Z},PL=F=>F.length*2,RL=(F,M)=>{for(var V=0,Z="";!(V>=M/4);){var ae=A[F+V*4>>2];if(ae==0)break;if(++V,ae>=65536){var ce=ae-65536;Z+=String.fromCharCode(55296|ce>>10,56320|ce&1023)}else Z+=String.fromCharCode(ae)}return Z},DL=(F,M,V)=>{if(V!=null||(V=2147483647),V<4)return 0;for(var Z=M,ae=Z+V-4,ce=0;ce<F.length;++ce){var xe=F.charCodeAt(ce);if(xe>=55296&&xe<=57343){var pe=F.charCodeAt(++ce);xe=65536+((xe&1023)<<10)|pe&1023}if(A[M>>2]=xe,M+=4,M+4>ae)break}return A[M>>2]=0,M-Z},IL=F=>{for(var M=0,V=0;V<F.length;++V){var Z=F.charCodeAt(V);Z>=55296&&Z<=57343&&++V,M+=4}return M},ML=(F,M,V)=>{V=Ms(V);var Z,ae,ce,xe;M===2?(Z=AL,ae=TL,xe=PL,ce=pe=>E[pe>>1]):M===4&&(Z=RL,ae=DL,xe=IL,ce=pe=>R[pe>>2]),Ve(F,{name:V,fromWireType:pe=>{for(var ke=R[pe>>2],Le,We=pe+4,Ct=0;Ct<=ke;++Ct){var Jt=pe+4+Ct*M;if(Ct==ke||ce(Jt)==0){var as=Jt-We,Fs=Z(We,as);Le===void 0?Le=Fs:(Le+="\0",Le+=Fs),We=Jt+M}}return Qo(pe),Le},toWireType:(pe,ke)=>{typeof ke!="string"&&ht(`Cannot pass non-string to C++ string type ${V}`);var Le=xe(ke),We=Ek(4+Le+M);return R[We>>2]=Le/M,ae(ke,We+4,Le+M),pe!==null&&pe.push(Qo,We),We},argPackAdvance:pt,readValueFromPointer:Wt,destructorFunction(pe){Qo(pe)}})},LL=(F,M,V,Z,ae,ce)=>{Mt[F]={name:Ms(M),rawConstructor:zn(V,Z),rawDestructor:zn(ae,ce),fields:[]}},FL=(F,M,V,Z,ae,ce,xe,pe,ke,Le)=>{Mt[F].fields.push({fieldName:Ms(M),getterReturnType:V,getter:zn(Z,ae),getterContext:ce,setterArgumentType:xe,setter:zn(pe,ke),setterContext:Le})},OL=(F,M)=>{M=Ms(M),Ve(F,{isVoid:!0,name:M,argPackAdvance:0,fromWireType:()=>{},toWireType:(V,Z)=>{}})},Xy=[],BL=(F,M,V,Z)=>(F=Xy[F],M=Gi.toValue(M),F(null,M,V,Z)),$L={},UL=F=>{var M=$L[F];return M===void 0?Ms(F):M},Sk=()=>{if(typeof globalThis=="object")return globalThis;function F(M){M.$$$embind_global$$$=M;var V=typeof $$$embind_global$$$=="object"&&M.$$$embind_global$$$==M;return V||delete M.$$$embind_global$$$,V}if(typeof $$$embind_global$$$=="object"||(typeof global=="object"&&F(global)?$$$embind_global$$$=global:typeof self=="object"&&F(self)&&($$$embind_global$$$=self),typeof $$$embind_global$$$=="object"))return $$$embind_global$$$;throw Error("unable to get global object.")},VL=F=>F===0?Gi.toHandle(Sk()):(F=UL(F),Gi.toHandle(Sk()[F])),qL=F=>{var M=Xy.length;return Xy.push(F),M},_k=(F,M)=>{var V=As[F];return V===void 0&&ht(`${M} has unknown type ${yk(F)}`),V},WL=(F,M)=>{for(var V=new Array(F),Z=0;Z<F;++Z)V[Z]=_k(R[M+Z*4>>2],`parameter ${Z}`);return V},zL=(F,M,V)=>{var Z=[],ae=F.toWireType(Z,V);return Z.length&&(R[M>>2]=Gi.toHandle(Z)),ae},GL=Reflect.construct,KL=(F,M,V)=>{var Z=WL(F,M),ae=Z.shift();F--;var ce=new Array(F),xe=(ke,Le,We,Ct)=>{for(var Jt=0,as=0;as<F;++as)ce[as]=Z[as].readValueFromPointer(Ct+Jt),Jt+=Z[as].argPackAdvance;var Fs=V===1?GL(Le,ce):Le.apply(ke,ce);return zL(ae,We,Fs)},pe=`methodCaller<(${Z.map(ke=>ke.name).join(", ")}) => ${ae.name}>`;return qL(Ur(pe,xe))},HL=F=>{F>9&&(Yo[F+1]+=1)},YL=F=>{var M=Gi.toValue(F);Qt(M),Zy(F)},QL=(F,M)=>{F=_k(F,"_emval_take_value");var V=F.readValueFromPointer(M);return Gi.toHandle(V)},JL=(F,M,V,Z)=>{var ae=new Date().getFullYear(),ce=new Date(ae,0,1),xe=new Date(ae,6,1),pe=ce.getTimezoneOffset(),ke=xe.getTimezoneOffset(),Le=Math.max(pe,ke);R[F>>2]=Le*60,A[M>>2]=+(pe!=ke);var We=as=>{var Fs=as>=0?"-":"+",br=Math.abs(as),ur=String(Math.floor(br/60)).padStart(2,"0"),Ar=String(br%60).padStart(2,"0");return`UTC${Fs}${ur}${Ar}`},Ct=We(pe),Jt=We(ke);ke<pe?(ud(Ct,V,17),ud(Jt,Z,17)):(ud(Ct,Z,17),ud(Jt,V,17))},ZL=()=>2147483648,XL=(F,M)=>Math.ceil(F/M)*M,eF=F=>{var M=w.buffer,V=(F-M.byteLength+65535)/65536|0;try{return w.grow(V),P(),1}catch{}},tF=F=>{var M=S.length;F>>>=0;var V=ZL();if(F>V)return!1;for(var Z=1;Z<=4;Z*=2){var ae=M*(1+.2/Z);ae=Math.min(ae,F+100663296);var ce=Math.min(V,XL(Math.max(F,ae),65536)),xe=eF(ce);if(xe)return!0}return!1},eb={},sF=()=>u||"./this.program",mm=()=>{if(!mm.strings){var F=(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",M={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:F,_:sF()};for(var V in eb)eb[V]===void 0?delete M[V]:M[V]=eb[V];var Z=[];for(var V in M)Z.push(`${V}=${M[V]}`);mm.strings=Z}return mm.strings},rF=(F,M)=>{var V=0,Z=0;for(var ae of mm()){var ce=M+V;R[F+Z>>2]=ce,V+=ud(ae,ce,1/0)+1,Z+=4}return 0},aF=(F,M)=>{var V=mm();R[F>>2]=V.length;var Z=0;for(var ae of V)Z+=wk(ae)+1;return R[M>>2]=Z,0},nF=F=>52;function iF(F,M,V,Z,ae){return 70}var lF=[null,[],[]],oF=(F,M)=>{var V=lF[F];M===0||M===10?((F===1?b:j)(kk(V)),V.length=0):V.push(M)},cF=(F,M,V,Z)=>{for(var ae=0,ce=0;ce<V;ce++){var xe=R[M>>2],pe=R[M+4>>2];M+=8;for(var ke=0;ke<pe;ke++)oF(F,S[xe+ke]);ae+=pe}return R[Z>>2]=ae,0},dF=F=>F;Zr(),Aa(),cL(),a.noExitRuntime&&a.noExitRuntime,a.print&&(b=a.print),a.printErr&&(j=a.printErr),a.wasmBinary&&(v=a.wasmBinary),a.arguments&&a.arguments,a.thisProgram&&(u=a.thisProgram);var uF={s:at,w:Q,a:he,j:Ce,m:Se,P:Be,p:Dt,ga:Ht,d:Xe,ba:Yt,ua:Bt,aa:ys,pa:Pt,sa:hL,ra:xL,H:gL,na:fL,V:bL,W:vL,x:wL,t:NL,ta:CL,oa:EL,Q:ML,I:LL,va:FL,qa:OL,da:BL,wa:Zy,D:VL,ma:KL,X:HL,Y:YL,U:QL,ca:JL,ha:tF,ea:rF,fa:aF,ia:nF,_:iF,S:cF,K:zF,C:KF,M:kF,R:XF,q:UF,b:_F,E:WF,ka:YF,c:EF,ja:QF,h:NF,i:RF,r:LF,O:qF,v:OF,F:$F,L:VF,z:HF,J:eO,$:tO,Z:sO,k:AF,f:wF,e:SF,g:CF,N:ZF,l:PF,la:GF,o:FF,B:DF,u:BF,T:MF,A:JF,n:TF,G:IF,y:dF},Ls=await re();Ls.ya;var mF=Ls.za,Qo=a._free=Ls.Aa,Ek=a._malloc=Ls.Ca,hF=Ls.Da,qt=Ls.Ea,pF=Ls.Fa,xF=Ls.Ga,gF=Ls.Ha,fF=Ls.Ia,yF=Ls.Ja,bF=Ls.Ka;a.dynCall_viijii=Ls.La;var vF=a.dynCall_iiijj=Ls.Ma;a.dynCall_jiji=Ls.Na;var jF=a.dynCall_jiiii=Ls.Oa;a.dynCall_iiiiij=Ls.Pa,a.dynCall_iiiiijj=Ls.Qa,a.dynCall_iiiiiijj=Ls.Ra;function wF(F,M){var V=ne();try{zt(F)(M)}catch(Z){if(me(V),Z!==Z+0)throw Z;qt(1,0)}}function NF(F,M,V,Z){var ae=ne();try{return zt(F)(M,V,Z)}catch(ce){if(me(ae),ce!==ce+0)throw ce;qt(1,0)}}function kF(F,M,V,Z,ae){var ce=ne();try{return zt(F)(M,V,Z,ae)}catch(xe){if(me(ce),xe!==xe+0)throw xe;qt(1,0)}}function CF(F,M,V,Z){var ae=ne();try{zt(F)(M,V,Z)}catch(ce){if(me(ae),ce!==ce+0)throw ce;qt(1,0)}}function SF(F,M,V){var Z=ne();try{zt(F)(M,V)}catch(ae){if(me(Z),ae!==ae+0)throw ae;qt(1,0)}}function _F(F,M){var V=ne();try{return zt(F)(M)}catch(Z){if(me(V),Z!==Z+0)throw Z;qt(1,0)}}function EF(F,M,V){var Z=ne();try{return zt(F)(M,V)}catch(ae){if(me(Z),ae!==ae+0)throw ae;qt(1,0)}}function AF(F){var M=ne();try{zt(F)()}catch(V){if(me(M),V!==V+0)throw V;qt(1,0)}}function TF(F,M,V,Z,ae,ce,xe,pe,ke,Le,We){var Ct=ne();try{zt(F)(M,V,Z,ae,ce,xe,pe,ke,Le,We)}catch(Jt){if(me(Ct),Jt!==Jt+0)throw Jt;qt(1,0)}}function PF(F,M,V,Z,ae){var ce=ne();try{zt(F)(M,V,Z,ae)}catch(xe){if(me(ce),xe!==xe+0)throw xe;qt(1,0)}}function RF(F,M,V,Z,ae){var ce=ne();try{return zt(F)(M,V,Z,ae)}catch(xe){if(me(ce),xe!==xe+0)throw xe;qt(1,0)}}function DF(F,M,V,Z,ae,ce,xe){var pe=ne();try{zt(F)(M,V,Z,ae,ce,xe)}catch(ke){if(me(pe),ke!==ke+0)throw ke;qt(1,0)}}function IF(F,M,V,Z,ae,ce,xe,pe,ke,Le,We,Ct,Jt,as,Fs,br){var ur=ne();try{zt(F)(M,V,Z,ae,ce,xe,pe,ke,Le,We,Ct,Jt,as,Fs,br)}catch(Ar){if(me(ur),Ar!==Ar+0)throw Ar;qt(1,0)}}function MF(F,M,V,Z,ae,ce,xe,pe,ke){var Le=ne();try{zt(F)(M,V,Z,ae,ce,xe,pe,ke)}catch(We){if(me(Le),We!==We+0)throw We;qt(1,0)}}function LF(F,M,V,Z,ae,ce){var xe=ne();try{return zt(F)(M,V,Z,ae,ce)}catch(pe){if(me(xe),pe!==pe+0)throw pe;qt(1,0)}}function FF(F,M,V,Z,ae,ce){var xe=ne();try{zt(F)(M,V,Z,ae,ce)}catch(pe){if(me(xe),pe!==pe+0)throw pe;qt(1,0)}}function OF(F,M,V,Z,ae,ce,xe){var pe=ne();try{return zt(F)(M,V,Z,ae,ce,xe)}catch(ke){if(me(pe),ke!==ke+0)throw ke;qt(1,0)}}function BF(F,M,V,Z,ae,ce,xe,pe){var ke=ne();try{zt(F)(M,V,Z,ae,ce,xe,pe)}catch(Le){if(me(ke),Le!==Le+0)throw Le;qt(1,0)}}function $F(F,M,V,Z,ae,ce,xe,pe){var ke=ne();try{return zt(F)(M,V,Z,ae,ce,xe,pe)}catch(Le){if(me(ke),Le!==Le+0)throw Le;qt(1,0)}}function UF(F){var M=ne();try{return zt(F)()}catch(V){if(me(M),V!==V+0)throw V;qt(1,0)}}function VF(F,M,V,Z,ae,ce,xe,pe,ke){var Le=ne();try{return zt(F)(M,V,Z,ae,ce,xe,pe,ke)}catch(We){if(me(Le),We!==We+0)throw We;qt(1,0)}}function qF(F,M,V,Z,ae,ce,xe){var pe=ne();try{return zt(F)(M,V,Z,ae,ce,xe)}catch(ke){if(me(pe),ke!==ke+0)throw ke;qt(1,0)}}function WF(F,M,V,Z){var ae=ne();try{return zt(F)(M,V,Z)}catch(ce){if(me(ae),ce!==ce+0)throw ce;qt(1,0)}}function zF(F,M,V,Z){var ae=ne();try{return zt(F)(M,V,Z)}catch(ce){if(me(ae),ce!==ce+0)throw ce;qt(1,0)}}function GF(F,M,V,Z,ae,ce,xe,pe){var ke=ne();try{zt(F)(M,V,Z,ae,ce,xe,pe)}catch(Le){if(me(ke),Le!==Le+0)throw Le;qt(1,0)}}function KF(F,M,V,Z,ae,ce){var xe=ne();try{return zt(F)(M,V,Z,ae,ce)}catch(pe){if(me(xe),pe!==pe+0)throw pe;qt(1,0)}}function HF(F,M,V,Z,ae,ce,xe,pe,ke,Le){var We=ne();try{return zt(F)(M,V,Z,ae,ce,xe,pe,ke,Le)}catch(Ct){if(me(We),Ct!==Ct+0)throw Ct;qt(1,0)}}function YF(F,M,V){var Z=ne();try{return zt(F)(M,V)}catch(ae){if(me(Z),ae!==ae+0)throw ae;qt(1,0)}}function QF(F,M,V,Z,ae){var ce=ne();try{return zt(F)(M,V,Z,ae)}catch(xe){if(me(ce),xe!==xe+0)throw xe;qt(1,0)}}function JF(F,M,V,Z,ae,ce,xe,pe,ke,Le){var We=ne();try{zt(F)(M,V,Z,ae,ce,xe,pe,ke,Le)}catch(Ct){if(me(We),Ct!==Ct+0)throw Ct;qt(1,0)}}function ZF(F,M,V,Z,ae,ce,xe){var pe=ne();try{zt(F)(M,V,Z,ae,ce,xe)}catch(ke){if(me(pe),ke!==ke+0)throw ke;qt(1,0)}}function XF(F,M,V,Z){var ae=ne();try{return zt(F)(M,V,Z)}catch(ce){if(me(ae),ce!==ce+0)throw ce;qt(1,0)}}function eO(F,M,V,Z,ae,ce,xe,pe,ke,Le,We,Ct){var Jt=ne();try{return zt(F)(M,V,Z,ae,ce,xe,pe,ke,Le,We,Ct)}catch(as){if(me(Jt),as!==as+0)throw as;qt(1,0)}}function tO(F,M,V,Z,ae,ce,xe){var pe=ne();try{return vF(F,M,V,Z,ae,ce,xe)}catch(ke){if(me(pe),ke!==ke+0)throw ke;qt(1,0)}}function sO(F,M,V,Z,ae){var ce=ne();try{return jF(F,M,V,Z,ae)}catch(xe){if(me(ce),xe!==xe+0)throw xe;qt(1,0)}}function tb(){if(L>0){B=tb;return}if(k(),L>0){B=tb;return}function F(){var M;a.calledRun=!0,!y&&(D(),n(a),(M=a.onRuntimeInitialized)===null||M===void 0||M.call(a),$())}a.setStatus?(a.setStatus("Running..."),setTimeout(()=>{setTimeout(()=>a.setStatus(""),1),F()},1)):F()}function rO(){if(a.preInit)for(typeof a.preInit=="function"&&(a.preInit=[a.preInit]);a.preInit.length>0;)a.preInit.shift()()}return rO(),tb(),s=l,s};function PZ(t){return UD(VD,t)}async function RZ(t,s){return TZ(VD,t,s)}const qD=[["aztec","Aztec"],["code_128","Code128"],["code_39","Code39"],["code_93","Code93"],["codabar","Codabar"],["databar","DataBar"],["databar_expanded","DataBarExpanded"],["databar_limited","DataBarLimited"],["data_matrix","DataMatrix"],["dx_film_edge","DXFilmEdge"],["ean_13","EAN-13"],["ean_8","EAN-8"],["itf","ITF"],["maxi_code","MaxiCode"],["micro_qr_code","MicroQRCode"],["pdf417","PDF417"],["qr_code","QRCode"],["rm_qr_code","rMQRCode"],["upc_a","UPC-A"],["upc_e","UPC-E"],["linear_codes","Linear-Codes"],["matrix_codes","Matrix-Codes"],["any","Any"]],DZ=[...qD,["unknown"]].map(t=>t[0]),Fw=new Map(qD);function IZ(t){for(const[s,r]of Fw)if(t===r)return s;return"unknown"}function MZ(t){if(WD(t))return{width:t.naturalWidth,height:t.naturalHeight};if(zD(t))return{width:t.width.baseVal.value,height:t.height.baseVal.value};if(GD(t))return{width:t.videoWidth,height:t.videoHeight};if(HD(t))return{width:t.width,height:t.height};if(QD(t))return{width:t.displayWidth,height:t.displayHeight};if(KD(t))return{width:t.width,height:t.height};if(YD(t))return{width:t.width,height:t.height};throw new TypeError("The provided value is not of type '(Blob or HTMLCanvasElement or HTMLImageElement or HTMLVideoElement or ImageBitmap or ImageData or OffscreenCanvas or SVGImageElement or VideoFrame)'.")}function WD(t){var s,r;try{return t instanceof((r=(s=t==null?void 0:t.ownerDocument)==null?void 0:s.defaultView)==null?void 0:r.HTMLImageElement)}catch{return!1}}function zD(t){var s,r;try{return t instanceof((r=(s=t==null?void 0:t.ownerDocument)==null?void 0:s.defaultView)==null?void 0:r.SVGImageElement)}catch{return!1}}function GD(t){var s,r;try{return t instanceof((r=(s=t==null?void 0:t.ownerDocument)==null?void 0:s.defaultView)==null?void 0:r.HTMLVideoElement)}catch{return!1}}function KD(t){var s,r;try{return t instanceof((r=(s=t==null?void 0:t.ownerDocument)==null?void 0:s.defaultView)==null?void 0:r.HTMLCanvasElement)}catch{return!1}}function HD(t){try{return t instanceof ImageBitmap||Object.prototype.toString.call(t)==="[object ImageBitmap]"}catch{return!1}}function YD(t){try{return t instanceof OffscreenCanvas||Object.prototype.toString.call(t)==="[object OffscreenCanvas]"}catch{return!1}}function QD(t){try{return t instanceof VideoFrame||Object.prototype.toString.call(t)==="[object VideoFrame]"}catch{return!1}}function LZ(t){try{return t instanceof Blob||Object.prototype.toString.call(t)==="[object Blob]"}catch{return!1}}function FZ(t){try{return t instanceof ImageData||Object.prototype.toString.call(t)==="[object ImageData]"}catch{return!1}}function OZ(t,s){try{const r=new OffscreenCanvas(t,s);if(r.getContext("2d")instanceof OffscreenCanvasRenderingContext2D)return r;throw void 0}catch{const r=document.createElement("canvas");return r.width=t,r.height=s,r}}async function JD(t){if(WD(t)&&!await VZ(t))throw new DOMException("Failed to load or decode HTMLImageElement.","InvalidStateError");if(zD(t)&&!await qZ(t))throw new DOMException("Failed to load or decode SVGImageElement.","InvalidStateError");if(QD(t)&&WZ(t))throw new DOMException("VideoFrame is closed.","InvalidStateError");if(GD(t)&&(t.readyState===0||t.readyState===1))throw new DOMException("Invalid element or state.","InvalidStateError");if(HD(t)&&GZ(t))throw new DOMException("The image source is detached.","InvalidStateError");const{width:s,height:r}=MZ(t);if(s===0||r===0)return null;const a=OZ(s,r).getContext("2d");a.drawImage(t,0,0);try{return a.getImageData(0,0,s,r)}catch{throw new DOMException("Source would taint origin.","SecurityError")}}async function BZ(t){let s;try{s=await createImageBitmap(t)}catch{try{if(globalThis.Image){s=new Image;let r="";try{r=URL.createObjectURL(t),s.src=r,await s.decode()}finally{URL.revokeObjectURL(r)}}else return t}catch{throw new DOMException("Failed to load or decode Blob.","InvalidStateError")}}return await JD(s)}function $Z(t){const{width:s,height:r}=t;if(s===0||r===0)return null;const a=t.getContext("2d");try{return a.getImageData(0,0,s,r)}catch{throw new DOMException("Source would taint origin.","SecurityError")}}async function UZ(t){if(LZ(t))return await BZ(t);if(FZ(t)){if(zZ(t))throw new DOMException("The image data has been detached.","InvalidStateError");return t}return KD(t)||YD(t)?$Z(t):await JD(t)}async function VZ(t){try{return await t.decode(),!0}catch{return!1}}async function qZ(t){var s;try{return await((s=t.decode)==null?void 0:s.call(t)),!0}catch{return!1}}function WZ(t){return t.format===null}function zZ(t){return t.data.buffer.byteLength===0}function GZ(t){return t.width===0&&t.height===0}function $5(t,s){return KZ(t)?new DOMException(`${s}: ${t.message}`,t.name):HZ(t)?new t.constructor(`${s}: ${t.message}`):new Error(`${s}: ${t}`)}function KZ(t){return t instanceof DOMException||Object.prototype.toString.call(t)==="[object DOMException]"}function HZ(t){return t instanceof Error||Object.prototype.toString.call(t)==="[object Error]"}var Dx;class Ow{constructor(s={}){mZ(this,Dx);var r;try{const a=(r=s==null?void 0:s.formats)==null?void 0:r.filter(n=>n!=="unknown");if((a==null?void 0:a.length)===0)throw new TypeError("Hint option provided, but is empty.");for(const n of a??[])if(!Fw.has(n))throw new TypeError(`Failed to read the 'formats' property from 'BarcodeDetectorOptions': The provided value '${n}' is not a valid enum value of type BarcodeFormat.`);hZ(this,Dx,a??[]),PZ({fireImmediately:!0}).catch(()=>{})}catch(a){throw $5(a,"Failed to construct 'BarcodeDetector'")}}static async getSupportedFormats(){return DZ.filter(s=>s!=="unknown")}async detect(s){try{const r=await UZ(s);if(r===null)return[];let a;const n={tryCode39ExtendedMode:!1,textMode:"Plain",formats:uZ(this,Dx).map(i=>Fw.get(i))};try{a=await RZ(r,n)}catch(i){throw console.error(i),new DOMException("Barcode detection service unavailable.","NotSupportedError")}return a.map(i=>{const{topLeft:{x:l,y:o},topRight:{x:c,y:d},bottomLeft:{x:u,y:m},bottomRight:{x:p,y:x}}=i.position,g=Math.min(l,c,u,p),f=Math.min(o,d,m,x),b=Math.max(l,c,u,p),j=Math.max(o,d,m,x);return{boundingBox:new DOMRectReadOnly(g,f,b-g,j-f),rawValue:i.text,format:IZ(i.format),cornerPoints:[{x:l,y:o},{x:c,y:d},{x:p,y:x},{x:u,y:m}]}})}catch(r){throw $5(r,"Failed to execute 'detect' on 'BarcodeDetector'")}}}Dx=new WeakMap;globalThis.BarcodeDetector!=null||(globalThis.BarcodeDetector=Ow);let ZD=!0,XD=!0;function Ym(t,s,r){const a=t.match(s);return a&&a.length>=r&&parseFloat(a[r],10)}function od(t,s,r){if(!t.RTCPeerConnection)return;const a=t.RTCPeerConnection.prototype,n=a.addEventListener;a.addEventListener=function(l,o){if(l!==s)return n.apply(this,arguments);const c=d=>{const u=r(d);u&&(o.handleEvent?o.handleEvent(u):o(u))};return this._eventMap=this._eventMap||{},this._eventMap[s]||(this._eventMap[s]=new Map),this._eventMap[s].set(o,c),n.apply(this,[l,c])};const i=a.removeEventListener;a.removeEventListener=function(l,o){if(l!==s||!this._eventMap||!this._eventMap[s])return i.apply(this,arguments);if(!this._eventMap[s].has(o))return i.apply(this,arguments);const c=this._eventMap[s].get(o);return this._eventMap[s].delete(o),this._eventMap[s].size===0&&delete this._eventMap[s],Object.keys(this._eventMap).length===0&&delete this._eventMap,i.apply(this,[l,c])},Object.defineProperty(a,"on"+s,{get(){return this["_on"+s]},set(l){this["_on"+s]&&(this.removeEventListener(s,this["_on"+s]),delete this["_on"+s]),l&&this.addEventListener(s,this["_on"+s]=l)},enumerable:!0,configurable:!0})}function YZ(t){return typeof t!="boolean"?new Error("Argument type: "+typeof t+". Please use a boolean."):(ZD=t,t?"adapter.js logging disabled":"adapter.js logging enabled")}function QZ(t){return typeof t!="boolean"?new Error("Argument type: "+typeof t+". Please use a boolean."):(XD=!t,"adapter.js deprecation warnings "+(t?"disabled":"enabled"))}function eI(){if(typeof window=="object"){if(ZD)return;typeof console<"u"&&typeof console.log=="function"&&console.log.apply(console,arguments)}}function C2(t,s){XD&&console.warn(t+" is deprecated, please use "+s+" instead.")}function JZ(t){const s={browser:null,version:null};if(typeof t>"u"||!t.navigator||!t.navigator.userAgent)return s.browser="Not a browser.",s;const{navigator:r}=t;if(r.userAgentData&&r.userAgentData.brands){const a=r.userAgentData.brands.find(n=>n.brand==="Chromium");if(a)return{browser:"chrome",version:parseInt(a.version,10)}}if(r.mozGetUserMedia)s.browser="firefox",s.version=parseInt(Ym(r.userAgent,/Firefox\/(\d+)\./,1));else if(r.webkitGetUserMedia||t.isSecureContext===!1&&t.webkitRTCPeerConnection)s.browser="chrome",s.version=parseInt(Ym(r.userAgent,/Chrom(e|ium)\/(\d+)\./,2));else if(t.RTCPeerConnection&&r.userAgent.match(/AppleWebKit\/(\d+)\./))s.browser="safari",s.version=parseInt(Ym(r.userAgent,/AppleWebKit\/(\d+)\./,1)),s.supportsUnifiedPlan=t.RTCRtpTransceiver&&"currentDirection"in t.RTCRtpTransceiver.prototype,s._safariVersion=Ym(r.userAgent,/Version\/(\d+(\.?\d+))/,1);else return s.browser="Not a supported browser.",s;return s}function U5(t){return Object.prototype.toString.call(t)==="[object Object]"}function tI(t){return U5(t)?Object.keys(t).reduce(function(s,r){const a=U5(t[r]),n=a?tI(t[r]):t[r],i=a&&!Object.keys(n).length;return n===void 0||i?s:Object.assign(s,{[r]:n})},{}):t}function Bw(t,s,r){!s||r.has(s.id)||(r.set(s.id,s),Object.keys(s).forEach(a=>{a.endsWith("Id")?Bw(t,t.get(s[a]),r):a.endsWith("Ids")&&s[a].forEach(n=>{Bw(t,t.get(n),r)})}))}function V5(t,s,r){const a=r?"outbound-rtp":"inbound-rtp",n=new Map;if(s===null)return n;const i=[];return t.forEach(l=>{l.type==="track"&&l.trackIdentifier===s.id&&i.push(l)}),i.forEach(l=>{t.forEach(o=>{o.type===a&&o.trackId===l.id&&Bw(t,o,n)})}),n}const q5=eI;function sI(t,s){const r=t&&t.navigator;if(!r.mediaDevices)return;const a=function(o){if(typeof o!="object"||o.mandatory||o.optional)return o;const c={};return Object.keys(o).forEach(d=>{if(d==="require"||d==="advanced"||d==="mediaSource")return;const u=typeof o[d]=="object"?o[d]:{ideal:o[d]};u.exact!==void 0&&typeof u.exact=="number"&&(u.min=u.max=u.exact);const m=function(p,x){return p?p+x.charAt(0).toUpperCase()+x.slice(1):x==="deviceId"?"sourceId":x};if(u.ideal!==void 0){c.optional=c.optional||[];let p={};typeof u.ideal=="number"?(p[m("min",d)]=u.ideal,c.optional.push(p),p={},p[m("max",d)]=u.ideal,c.optional.push(p)):(p[m("",d)]=u.ideal,c.optional.push(p))}u.exact!==void 0&&typeof u.exact!="number"?(c.mandatory=c.mandatory||{},c.mandatory[m("",d)]=u.exact):["min","max"].forEach(p=>{u[p]!==void 0&&(c.mandatory=c.mandatory||{},c.mandatory[m(p,d)]=u[p])})}),o.advanced&&(c.optional=(c.optional||[]).concat(o.advanced)),c},n=function(o,c){if(s.version>=61)return c(o);if(o=JSON.parse(JSON.stringify(o)),o&&typeof o.audio=="object"){const d=function(u,m,p){m in u&&!(p in u)&&(u[p]=u[m],delete u[m])};o=JSON.parse(JSON.stringify(o)),d(o.audio,"autoGainControl","googAutoGainControl"),d(o.audio,"noiseSuppression","googNoiseSuppression"),o.audio=a(o.audio)}if(o&&typeof o.video=="object"){let d=o.video.facingMode;d=d&&(typeof d=="object"?d:{ideal:d});const u=s.version<66;if(d&&(d.exact==="user"||d.exact==="environment"||d.ideal==="user"||d.ideal==="environment")&&!(r.mediaDevices.getSupportedConstraints&&r.mediaDevices.getSupportedConstraints().facingMode&&!u)){delete o.video.facingMode;let m;if(d.exact==="environment"||d.ideal==="environment"?m=["back","rear"]:(d.exact==="user"||d.ideal==="user")&&(m=["front"]),m)return r.mediaDevices.enumerateDevices().then(p=>{p=p.filter(g=>g.kind==="videoinput");let x=p.find(g=>m.some(f=>g.label.toLowerCase().includes(f)));return!x&&p.length&&m.includes("back")&&(x=p[p.length-1]),x&&(o.video.deviceId=d.exact?{exact:x.deviceId}:{ideal:x.deviceId}),o.video=a(o.video),q5("chrome: "+JSON.stringify(o)),c(o)})}o.video=a(o.video)}return q5("chrome: "+JSON.stringify(o)),c(o)},i=function(o){return s.version>=64?o:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[o.name]||o.name,message:o.message,constraint:o.constraint||o.constraintName,toString(){return this.name+(this.message&&": ")+this.message}}},l=function(o,c,d){n(o,u=>{r.webkitGetUserMedia(u,c,m=>{d&&d(i(m))})})};if(r.getUserMedia=l.bind(r),r.mediaDevices.getUserMedia){const o=r.mediaDevices.getUserMedia.bind(r.mediaDevices);r.mediaDevices.getUserMedia=function(c){return n(c,d=>o(d).then(u=>{if(d.audio&&!u.getAudioTracks().length||d.video&&!u.getVideoTracks().length)throw u.getTracks().forEach(m=>{m.stop()}),new DOMException("","NotFoundError");return u},u=>Promise.reject(i(u))))}}}function rI(t){t.MediaStream=t.MediaStream||t.webkitMediaStream}function aI(t){if(typeof t=="object"&&t.RTCPeerConnection&&!("ontrack"in t.RTCPeerConnection.prototype)){Object.defineProperty(t.RTCPeerConnection.prototype,"ontrack",{get(){return this._ontrack},set(r){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=r)},enumerable:!0,configurable:!0});const s=t.RTCPeerConnection.prototype.setRemoteDescription;t.RTCPeerConnection.prototype.setRemoteDescription=function(){return this._ontrackpoly||(this._ontrackpoly=a=>{a.stream.addEventListener("addtrack",n=>{let i;t.RTCPeerConnection.prototype.getReceivers?i=this.getReceivers().find(o=>o.track&&o.track.id===n.track.id):i={track:n.track};const l=new Event("track");l.track=n.track,l.receiver=i,l.transceiver={receiver:i},l.streams=[a.stream],this.dispatchEvent(l)}),a.stream.getTracks().forEach(n=>{let i;t.RTCPeerConnection.prototype.getReceivers?i=this.getReceivers().find(o=>o.track&&o.track.id===n.id):i={track:n};const l=new Event("track");l.track=n,l.receiver=i,l.transceiver={receiver:i},l.streams=[a.stream],this.dispatchEvent(l)})},this.addEventListener("addstream",this._ontrackpoly)),s.apply(this,arguments)}}else od(t,"track",s=>(s.transceiver||Object.defineProperty(s,"transceiver",{value:{receiver:s.receiver}}),s))}function nI(t){if(typeof t=="object"&&t.RTCPeerConnection&&!("getSenders"in t.RTCPeerConnection.prototype)&&"createDTMFSender"in t.RTCPeerConnection.prototype){const s=function(n,i){return{track:i,get dtmf(){return this._dtmf===void 0&&(i.kind==="audio"?this._dtmf=n.createDTMFSender(i):this._dtmf=null),this._dtmf},_pc:n}};if(!t.RTCPeerConnection.prototype.getSenders){t.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};const n=t.RTCPeerConnection.prototype.addTrack;t.RTCPeerConnection.prototype.addTrack=function(o,c){let d=n.apply(this,arguments);return d||(d=s(this,o),this._senders.push(d)),d};const i=t.RTCPeerConnection.prototype.removeTrack;t.RTCPeerConnection.prototype.removeTrack=function(o){i.apply(this,arguments);const c=this._senders.indexOf(o);c!==-1&&this._senders.splice(c,1)}}const r=t.RTCPeerConnection.prototype.addStream;t.RTCPeerConnection.prototype.addStream=function(i){this._senders=this._senders||[],r.apply(this,[i]),i.getTracks().forEach(l=>{this._senders.push(s(this,l))})};const a=t.RTCPeerConnection.prototype.removeStream;t.RTCPeerConnection.prototype.removeStream=function(i){this._senders=this._senders||[],a.apply(this,[i]),i.getTracks().forEach(l=>{const o=this._senders.find(c=>c.track===l);o&&this._senders.splice(this._senders.indexOf(o),1)})}}else if(typeof t=="object"&&t.RTCPeerConnection&&"getSenders"in t.RTCPeerConnection.prototype&&"createDTMFSender"in t.RTCPeerConnection.prototype&&t.RTCRtpSender&&!("dtmf"in t.RTCRtpSender.prototype)){const s=t.RTCPeerConnection.prototype.getSenders;t.RTCPeerConnection.prototype.getSenders=function(){const a=s.apply(this,[]);return a.forEach(n=>n._pc=this),a},Object.defineProperty(t.RTCRtpSender.prototype,"dtmf",{get(){return this._dtmf===void 0&&(this.track.kind==="audio"?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}}function iI(t){if(!(typeof t=="object"&&t.RTCPeerConnection&&t.RTCRtpSender&&t.RTCRtpReceiver))return;if(!("getStats"in t.RTCRtpSender.prototype)){const r=t.RTCPeerConnection.prototype.getSenders;r&&(t.RTCPeerConnection.prototype.getSenders=function(){const i=r.apply(this,[]);return i.forEach(l=>l._pc=this),i});const a=t.RTCPeerConnection.prototype.addTrack;a&&(t.RTCPeerConnection.prototype.addTrack=function(){const i=a.apply(this,arguments);return i._pc=this,i}),t.RTCRtpSender.prototype.getStats=function(){const i=this;return this._pc.getStats().then(l=>V5(l,i.track,!0))}}if(!("getStats"in t.RTCRtpReceiver.prototype)){const r=t.RTCPeerConnection.prototype.getReceivers;r&&(t.RTCPeerConnection.prototype.getReceivers=function(){const n=r.apply(this,[]);return n.forEach(i=>i._pc=this),n}),od(t,"track",a=>(a.receiver._pc=a.srcElement,a)),t.RTCRtpReceiver.prototype.getStats=function(){const n=this;return this._pc.getStats().then(i=>V5(i,n.track,!1))}}if(!("getStats"in t.RTCRtpSender.prototype&&"getStats"in t.RTCRtpReceiver.prototype))return;const s=t.RTCPeerConnection.prototype.getStats;t.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof t.MediaStreamTrack){const a=arguments[0];let n,i,l;return this.getSenders().forEach(o=>{o.track===a&&(n?l=!0:n=o)}),this.getReceivers().forEach(o=>(o.track===a&&(i?l=!0:i=o),o.track===a)),l||n&&i?Promise.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):n?n.getStats():i?i.getStats():Promise.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return s.apply(this,arguments)}}function lI(t){t.RTCPeerConnection.prototype.getLocalStreams=function(){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map(l=>this._shimmedLocalStreams[l][0])};const s=t.RTCPeerConnection.prototype.addTrack;t.RTCPeerConnection.prototype.addTrack=function(l,o){if(!o)return s.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};const c=s.apply(this,arguments);return this._shimmedLocalStreams[o.id]?this._shimmedLocalStreams[o.id].indexOf(c)===-1&&this._shimmedLocalStreams[o.id].push(c):this._shimmedLocalStreams[o.id]=[o,c],c};const r=t.RTCPeerConnection.prototype.addStream;t.RTCPeerConnection.prototype.addStream=function(l){this._shimmedLocalStreams=this._shimmedLocalStreams||{},l.getTracks().forEach(d=>{if(this.getSenders().find(m=>m.track===d))throw new DOMException("Track already exists.","InvalidAccessError")});const o=this.getSenders();r.apply(this,arguments);const c=this.getSenders().filter(d=>o.indexOf(d)===-1);this._shimmedLocalStreams[l.id]=[l].concat(c)};const a=t.RTCPeerConnection.prototype.removeStream;t.RTCPeerConnection.prototype.removeStream=function(l){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[l.id],a.apply(this,arguments)};const n=t.RTCPeerConnection.prototype.removeTrack;t.RTCPeerConnection.prototype.removeTrack=function(l){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},l&&Object.keys(this._shimmedLocalStreams).forEach(o=>{const c=this._shimmedLocalStreams[o].indexOf(l);c!==-1&&this._shimmedLocalStreams[o].splice(c,1),this._shimmedLocalStreams[o].length===1&&delete this._shimmedLocalStreams[o]}),n.apply(this,arguments)}}function oI(t,s){if(!t.RTCPeerConnection)return;if(t.RTCPeerConnection.prototype.addTrack&&s.version>=65)return lI(t);const r=t.RTCPeerConnection.prototype.getLocalStreams;t.RTCPeerConnection.prototype.getLocalStreams=function(){const u=r.apply(this);return this._reverseStreams=this._reverseStreams||{},u.map(m=>this._reverseStreams[m.id])};const a=t.RTCPeerConnection.prototype.addStream;t.RTCPeerConnection.prototype.addStream=function(u){if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},u.getTracks().forEach(m=>{if(this.getSenders().find(x=>x.track===m))throw new DOMException("Track already exists.","InvalidAccessError")}),!this._reverseStreams[u.id]){const m=new t.MediaStream(u.getTracks());this._streams[u.id]=m,this._reverseStreams[m.id]=u,u=m}a.apply(this,[u])};const n=t.RTCPeerConnection.prototype.removeStream;t.RTCPeerConnection.prototype.removeStream=function(u){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},n.apply(this,[this._streams[u.id]||u]),delete this._reverseStreams[this._streams[u.id]?this._streams[u.id].id:u.id],delete this._streams[u.id]},t.RTCPeerConnection.prototype.addTrack=function(u,m){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");const p=[].slice.call(arguments,1);if(p.length!==1||!p[0].getTracks().find(f=>f===u))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");if(this.getSenders().find(f=>f.track===u))throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};const g=this._streams[m.id];if(g)g.addTrack(u),Promise.resolve().then(()=>{this.dispatchEvent(new Event("negotiationneeded"))});else{const f=new t.MediaStream([u]);this._streams[m.id]=f,this._reverseStreams[f.id]=m,this.addStream(f)}return this.getSenders().find(f=>f.track===u)};function i(d,u){let m=u.sdp;return Object.keys(d._reverseStreams||[]).forEach(p=>{const x=d._reverseStreams[p],g=d._streams[x.id];m=m.replace(new RegExp(g.id,"g"),x.id)}),new RTCSessionDescription({type:u.type,sdp:m})}function l(d,u){let m=u.sdp;return Object.keys(d._reverseStreams||[]).forEach(p=>{const x=d._reverseStreams[p],g=d._streams[x.id];m=m.replace(new RegExp(x.id,"g"),g.id)}),new RTCSessionDescription({type:u.type,sdp:m})}["createOffer","createAnswer"].forEach(function(d){const u=t.RTCPeerConnection.prototype[d],m={[d](){const p=arguments;return arguments.length&&typeof arguments[0]=="function"?u.apply(this,[g=>{const f=i(this,g);p[0].apply(null,[f])},g=>{p[1]&&p[1].apply(null,g)},arguments[2]]):u.apply(this,arguments).then(g=>i(this,g))}};t.RTCPeerConnection.prototype[d]=m[d]});const o=t.RTCPeerConnection.prototype.setLocalDescription;t.RTCPeerConnection.prototype.setLocalDescription=function(){return!arguments.length||!arguments[0].type?o.apply(this,arguments):(arguments[0]=l(this,arguments[0]),o.apply(this,arguments))};const c=Object.getOwnPropertyDescriptor(t.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(t.RTCPeerConnection.prototype,"localDescription",{get(){const d=c.get.apply(this);return d.type===""?d:i(this,d)}}),t.RTCPeerConnection.prototype.removeTrack=function(u){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!u._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(!(u._pc===this))throw new DOMException("Sender was not created by this connection.","InvalidAccessError");this._streams=this._streams||{};let p;Object.keys(this._streams).forEach(x=>{this._streams[x].getTracks().find(f=>u.track===f)&&(p=this._streams[x])}),p&&(p.getTracks().length===1?this.removeStream(this._reverseStreams[p.id]):p.removeTrack(u.track),this.dispatchEvent(new Event("negotiationneeded")))}}function $w(t,s){!t.RTCPeerConnection&&t.webkitRTCPeerConnection&&(t.RTCPeerConnection=t.webkitRTCPeerConnection),t.RTCPeerConnection&&s.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(r){const a=t.RTCPeerConnection.prototype[r],n={[r](){return arguments[0]=new(r==="addIceCandidate"?t.RTCIceCandidate:t.RTCSessionDescription)(arguments[0]),a.apply(this,arguments)}};t.RTCPeerConnection.prototype[r]=n[r]})}function cI(t,s){od(t,"negotiationneeded",r=>{const a=r.target;if(!((s.version<72||a.getConfiguration&&a.getConfiguration().sdpSemantics==="plan-b")&&a.signalingState!=="stable"))return r})}const W5=Object.freeze(Object.defineProperty({__proto__:null,fixNegotiationNeeded:cI,shimAddTrackRemoveTrack:oI,shimAddTrackRemoveTrackWithNative:lI,shimGetSendersWithDtmf:nI,shimGetUserMedia:sI,shimMediaStream:rI,shimOnTrack:aI,shimPeerConnection:$w,shimSenderReceiverGetStats:iI},Symbol.toStringTag,{value:"Module"}));function dI(t,s){const r=t&&t.navigator,a=t&&t.MediaStreamTrack;if(r.getUserMedia=function(n,i,l){C2("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),r.mediaDevices.getUserMedia(n).then(i,l)},!(s.version>55&&"autoGainControl"in r.mediaDevices.getSupportedConstraints())){const n=function(l,o,c){o in l&&!(c in l)&&(l[c]=l[o],delete l[o])},i=r.mediaDevices.getUserMedia.bind(r.mediaDevices);if(r.mediaDevices.getUserMedia=function(l){return typeof l=="object"&&typeof l.audio=="object"&&(l=JSON.parse(JSON.stringify(l)),n(l.audio,"autoGainControl","mozAutoGainControl"),n(l.audio,"noiseSuppression","mozNoiseSuppression")),i(l)},a&&a.prototype.getSettings){const l=a.prototype.getSettings;a.prototype.getSettings=function(){const o=l.apply(this,arguments);return n(o,"mozAutoGainControl","autoGainControl"),n(o,"mozNoiseSuppression","noiseSuppression"),o}}if(a&&a.prototype.applyConstraints){const l=a.prototype.applyConstraints;a.prototype.applyConstraints=function(o){return this.kind==="audio"&&typeof o=="object"&&(o=JSON.parse(JSON.stringify(o)),n(o,"autoGainControl","mozAutoGainControl"),n(o,"noiseSuppression","mozNoiseSuppression")),l.apply(this,[o])}}}}function ZZ(t,s){t.navigator.mediaDevices&&"getDisplayMedia"in t.navigator.mediaDevices||t.navigator.mediaDevices&&(t.navigator.mediaDevices.getDisplayMedia=function(a){if(!(a&&a.video)){const n=new DOMException("getDisplayMedia without video constraints is undefined");return n.name="NotFoundError",n.code=8,Promise.reject(n)}return a.video===!0?a.video={mediaSource:s}:a.video.mediaSource=s,t.navigator.mediaDevices.getUserMedia(a)})}function uI(t){typeof t=="object"&&t.RTCTrackEvent&&"receiver"in t.RTCTrackEvent.prototype&&!("transceiver"in t.RTCTrackEvent.prototype)&&Object.defineProperty(t.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function Uw(t,s){if(typeof t!="object"||!(t.RTCPeerConnection||t.mozRTCPeerConnection))return;!t.RTCPeerConnection&&t.mozRTCPeerConnection&&(t.RTCPeerConnection=t.mozRTCPeerConnection),s.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(n){const i=t.RTCPeerConnection.prototype[n],l={[n](){return arguments[0]=new(n==="addIceCandidate"?t.RTCIceCandidate:t.RTCSessionDescription)(arguments[0]),i.apply(this,arguments)}};t.RTCPeerConnection.prototype[n]=l[n]});const r={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},a=t.RTCPeerConnection.prototype.getStats;t.RTCPeerConnection.prototype.getStats=function(){const[i,l,o]=arguments;return a.apply(this,[i||null]).then(c=>{if(s.version<53&&!l)try{c.forEach(d=>{d.type=r[d.type]||d.type})}catch(d){if(d.name!=="TypeError")throw d;c.forEach((u,m)=>{c.set(m,Object.assign({},u,{type:r[u.type]||u.type}))})}return c}).then(l,o)}}function mI(t){if(!(typeof t=="object"&&t.RTCPeerConnection&&t.RTCRtpSender)||t.RTCRtpSender&&"getStats"in t.RTCRtpSender.prototype)return;const s=t.RTCPeerConnection.prototype.getSenders;s&&(t.RTCPeerConnection.prototype.getSenders=function(){const n=s.apply(this,[]);return n.forEach(i=>i._pc=this),n});const r=t.RTCPeerConnection.prototype.addTrack;r&&(t.RTCPeerConnection.prototype.addTrack=function(){const n=r.apply(this,arguments);return n._pc=this,n}),t.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Promise.resolve(new Map)}}function hI(t){if(!(typeof t=="object"&&t.RTCPeerConnection&&t.RTCRtpSender)||t.RTCRtpSender&&"getStats"in t.RTCRtpReceiver.prototype)return;const s=t.RTCPeerConnection.prototype.getReceivers;s&&(t.RTCPeerConnection.prototype.getReceivers=function(){const a=s.apply(this,[]);return a.forEach(n=>n._pc=this),a}),od(t,"track",r=>(r.receiver._pc=r.srcElement,r)),t.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}function pI(t){!t.RTCPeerConnection||"removeStream"in t.RTCPeerConnection.prototype||(t.RTCPeerConnection.prototype.removeStream=function(r){C2("removeStream","removeTrack"),this.getSenders().forEach(a=>{a.track&&r.getTracks().includes(a.track)&&this.removeTrack(a)})})}function xI(t){t.DataChannel&&!t.RTCDataChannel&&(t.RTCDataChannel=t.DataChannel)}function gI(t){if(!(typeof t=="object"&&t.RTCPeerConnection))return;const s=t.RTCPeerConnection.prototype.addTransceiver;s&&(t.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];let a=arguments[1]&&arguments[1].sendEncodings;a===void 0&&(a=[]),a=[...a];const n=a.length>0;n&&a.forEach(l=>{if("rid"in l&&!/^[a-z0-9]{0,16}$/i.test(l.rid))throw new TypeError("Invalid RID value provided.");if("scaleResolutionDownBy"in l&&!(parseFloat(l.scaleResolutionDownBy)>=1))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in l&&!(parseFloat(l.maxFramerate)>=0))throw new RangeError("max_framerate must be >= 0.0")});const i=s.apply(this,arguments);if(n){const{sender:l}=i,o=l.getParameters();(!("encodings"in o)||o.encodings.length===1&&Object.keys(o.encodings[0]).length===0)&&(o.encodings=a,l.sendEncodings=a,this.setParametersPromises.push(l.setParameters(o).then(()=>{delete l.sendEncodings}).catch(()=>{delete l.sendEncodings})))}return i})}function fI(t){if(!(typeof t=="object"&&t.RTCRtpSender))return;const s=t.RTCRtpSender.prototype.getParameters;s&&(t.RTCRtpSender.prototype.getParameters=function(){const a=s.apply(this,arguments);return"encodings"in a||(a.encodings=[].concat(this.sendEncodings||[{}])),a})}function yI(t){if(!(typeof t=="object"&&t.RTCPeerConnection))return;const s=t.RTCPeerConnection.prototype.createOffer;t.RTCPeerConnection.prototype.createOffer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>s.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):s.apply(this,arguments)}}function bI(t){if(!(typeof t=="object"&&t.RTCPeerConnection))return;const s=t.RTCPeerConnection.prototype.createAnswer;t.RTCPeerConnection.prototype.createAnswer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>s.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):s.apply(this,arguments)}}const z5=Object.freeze(Object.defineProperty({__proto__:null,shimAddTransceiver:gI,shimCreateAnswer:bI,shimCreateOffer:yI,shimGetDisplayMedia:ZZ,shimGetParameters:fI,shimGetUserMedia:dI,shimOnTrack:uI,shimPeerConnection:Uw,shimRTCDataChannel:xI,shimReceiverGetStats:hI,shimRemoveStream:pI,shimSenderGetStats:mI},Symbol.toStringTag,{value:"Module"}));function vI(t){if(!(typeof t!="object"||!t.RTCPeerConnection)){if("getLocalStreams"in t.RTCPeerConnection.prototype||(t.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in t.RTCPeerConnection.prototype)){const s=t.RTCPeerConnection.prototype.addTrack;t.RTCPeerConnection.prototype.addStream=function(a){this._localStreams||(this._localStreams=[]),this._localStreams.includes(a)||this._localStreams.push(a),a.getAudioTracks().forEach(n=>s.call(this,n,a)),a.getVideoTracks().forEach(n=>s.call(this,n,a))},t.RTCPeerConnection.prototype.addTrack=function(a,...n){return n&&n.forEach(i=>{this._localStreams?this._localStreams.includes(i)||this._localStreams.push(i):this._localStreams=[i]}),s.apply(this,arguments)}}"removeStream"in t.RTCPeerConnection.prototype||(t.RTCPeerConnection.prototype.removeStream=function(r){this._localStreams||(this._localStreams=[]);const a=this._localStreams.indexOf(r);if(a===-1)return;this._localStreams.splice(a,1);const n=r.getTracks();this.getSenders().forEach(i=>{n.includes(i.track)&&this.removeTrack(i)})})}}function jI(t){if(!(typeof t!="object"||!t.RTCPeerConnection)&&("getRemoteStreams"in t.RTCPeerConnection.prototype||(t.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in t.RTCPeerConnection.prototype))){Object.defineProperty(t.RTCPeerConnection.prototype,"onaddstream",{get(){return this._onaddstream},set(r){this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=r),this.addEventListener("track",this._onaddstreampoly=a=>{a.streams.forEach(n=>{if(this._remoteStreams||(this._remoteStreams=[]),this._remoteStreams.includes(n))return;this._remoteStreams.push(n);const i=new Event("addstream");i.stream=n,this.dispatchEvent(i)})})}});const s=t.RTCPeerConnection.prototype.setRemoteDescription;t.RTCPeerConnection.prototype.setRemoteDescription=function(){const a=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(n){n.streams.forEach(i=>{if(a._remoteStreams||(a._remoteStreams=[]),a._remoteStreams.indexOf(i)>=0)return;a._remoteStreams.push(i);const l=new Event("addstream");l.stream=i,a.dispatchEvent(l)})}),s.apply(a,arguments)}}}function wI(t){if(typeof t!="object"||!t.RTCPeerConnection)return;const s=t.RTCPeerConnection.prototype,r=s.createOffer,a=s.createAnswer,n=s.setLocalDescription,i=s.setRemoteDescription,l=s.addIceCandidate;s.createOffer=function(d,u){const m=arguments.length>=2?arguments[2]:arguments[0],p=r.apply(this,[m]);return u?(p.then(d,u),Promise.resolve()):p},s.createAnswer=function(d,u){const m=arguments.length>=2?arguments[2]:arguments[0],p=a.apply(this,[m]);return u?(p.then(d,u),Promise.resolve()):p};let o=function(c,d,u){const m=n.apply(this,[c]);return u?(m.then(d,u),Promise.resolve()):m};s.setLocalDescription=o,o=function(c,d,u){const m=i.apply(this,[c]);return u?(m.then(d,u),Promise.resolve()):m},s.setRemoteDescription=o,o=function(c,d,u){const m=l.apply(this,[c]);return u?(m.then(d,u),Promise.resolve()):m},s.addIceCandidate=o}function NI(t){const s=t&&t.navigator;if(s.mediaDevices&&s.mediaDevices.getUserMedia){const r=s.mediaDevices,a=r.getUserMedia.bind(r);s.mediaDevices.getUserMedia=n=>a(kI(n))}!s.getUserMedia&&s.mediaDevices&&s.mediaDevices.getUserMedia&&(s.getUserMedia=(function(a,n,i){s.mediaDevices.getUserMedia(a).then(n,i)}).bind(s))}function kI(t){return t&&t.video!==void 0?Object.assign({},t,{video:tI(t.video)}):t}function CI(t){if(!t.RTCPeerConnection)return;const s=t.RTCPeerConnection;t.RTCPeerConnection=function(a,n){if(a&&a.iceServers){const i=[];for(let l=0;l<a.iceServers.length;l++){let o=a.iceServers[l];o.urls===void 0&&o.url?(C2("RTCIceServer.url","RTCIceServer.urls"),o=JSON.parse(JSON.stringify(o)),o.urls=o.url,delete o.url,i.push(o)):i.push(a.iceServers[l])}a.iceServers=i}return new s(a,n)},t.RTCPeerConnection.prototype=s.prototype,"generateCertificate"in s&&Object.defineProperty(t.RTCPeerConnection,"generateCertificate",{get(){return s.generateCertificate}})}function SI(t){typeof t=="object"&&t.RTCTrackEvent&&"receiver"in t.RTCTrackEvent.prototype&&!("transceiver"in t.RTCTrackEvent.prototype)&&Object.defineProperty(t.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function _I(t){const s=t.RTCPeerConnection.prototype.createOffer;t.RTCPeerConnection.prototype.createOffer=function(a){if(a){typeof a.offerToReceiveAudio<"u"&&(a.offerToReceiveAudio=!!a.offerToReceiveAudio);const n=this.getTransceivers().find(l=>l.receiver.track.kind==="audio");a.offerToReceiveAudio===!1&&n?n.direction==="sendrecv"?n.setDirection?n.setDirection("sendonly"):n.direction="sendonly":n.direction==="recvonly"&&(n.setDirection?n.setDirection("inactive"):n.direction="inactive"):a.offerToReceiveAudio===!0&&!n&&this.addTransceiver("audio",{direction:"recvonly"}),typeof a.offerToReceiveVideo<"u"&&(a.offerToReceiveVideo=!!a.offerToReceiveVideo);const i=this.getTransceivers().find(l=>l.receiver.track.kind==="video");a.offerToReceiveVideo===!1&&i?i.direction==="sendrecv"?i.setDirection?i.setDirection("sendonly"):i.direction="sendonly":i.direction==="recvonly"&&(i.setDirection?i.setDirection("inactive"):i.direction="inactive"):a.offerToReceiveVideo===!0&&!i&&this.addTransceiver("video",{direction:"recvonly"})}return s.apply(this,arguments)}}function EI(t){typeof t!="object"||t.AudioContext||(t.AudioContext=t.webkitAudioContext)}const G5=Object.freeze(Object.defineProperty({__proto__:null,shimAudioContext:EI,shimCallbacksAPI:wI,shimConstraints:kI,shimCreateOfferLegacy:_I,shimGetUserMedia:NI,shimLocalStreamsAPI:vI,shimRTCIceServerUrls:CI,shimRemoteStreamsAPI:jI,shimTrackEventTransceiver:SI},Symbol.toStringTag,{value:"Module"}));var AI={exports:{}};(function(t){const s={};s.generateIdentifier=function(){return Math.random().toString(36).substring(2,12)},s.localCName=s.generateIdentifier(),s.splitLines=function(r){return r.trim().split(`
`).map(a=>a.trim())},s.splitSections=function(r){return r.split(`
m=`).map((n,i)=>(i>0?"m="+n:n).trim()+`\r
`)},s.getDescription=function(r){const a=s.splitSections(r);return a&&a[0]},s.getMediaSections=function(r){const a=s.splitSections(r);return a.shift(),a},s.matchPrefix=function(r,a){return s.splitLines(r).filter(n=>n.indexOf(a)===0)},s.parseCandidate=function(r){let a;r.indexOf("a=candidate:")===0?a=r.substring(12).split(" "):a=r.substring(10).split(" ");const n={foundation:a[0],component:{1:"rtp",2:"rtcp"}[a[1]]||a[1],protocol:a[2].toLowerCase(),priority:parseInt(a[3],10),ip:a[4],address:a[4],port:parseInt(a[5],10),type:a[7]};for(let i=8;i<a.length;i+=2)switch(a[i]){case"raddr":n.relatedAddress=a[i+1];break;case"rport":n.relatedPort=parseInt(a[i+1],10);break;case"tcptype":n.tcpType=a[i+1];break;case"ufrag":n.ufrag=a[i+1],n.usernameFragment=a[i+1];break;default:n[a[i]]===void 0&&(n[a[i]]=a[i+1]);break}return n},s.writeCandidate=function(r){const a=[];a.push(r.foundation);const n=r.component;n==="rtp"?a.push(1):n==="rtcp"?a.push(2):a.push(n),a.push(r.protocol.toUpperCase()),a.push(r.priority),a.push(r.address||r.ip),a.push(r.port);const i=r.type;return a.push("typ"),a.push(i),i!=="host"&&r.relatedAddress&&r.relatedPort&&(a.push("raddr"),a.push(r.relatedAddress),a.push("rport"),a.push(r.relatedPort)),r.tcpType&&r.protocol.toLowerCase()==="tcp"&&(a.push("tcptype"),a.push(r.tcpType)),(r.usernameFragment||r.ufrag)&&(a.push("ufrag"),a.push(r.usernameFragment||r.ufrag)),"candidate:"+a.join(" ")},s.parseIceOptions=function(r){return r.substring(14).split(" ")},s.parseRtpMap=function(r){let a=r.substring(9).split(" ");const n={payloadType:parseInt(a.shift(),10)};return a=a[0].split("/"),n.name=a[0],n.clockRate=parseInt(a[1],10),n.channels=a.length===3?parseInt(a[2],10):1,n.numChannels=n.channels,n},s.writeRtpMap=function(r){let a=r.payloadType;r.preferredPayloadType!==void 0&&(a=r.preferredPayloadType);const n=r.channels||r.numChannels||1;return"a=rtpmap:"+a+" "+r.name+"/"+r.clockRate+(n!==1?"/"+n:"")+`\r
`},s.parseExtmap=function(r){const a=r.substring(9).split(" ");return{id:parseInt(a[0],10),direction:a[0].indexOf("/")>0?a[0].split("/")[1]:"sendrecv",uri:a[1],attributes:a.slice(2).join(" ")}},s.writeExtmap=function(r){return"a=extmap:"+(r.id||r.preferredId)+(r.direction&&r.direction!=="sendrecv"?"/"+r.direction:"")+" "+r.uri+(r.attributes?" "+r.attributes:"")+`\r
`},s.parseFmtp=function(r){const a={};let n;const i=r.substring(r.indexOf(" ")+1).split(";");for(let l=0;l<i.length;l++)n=i[l].trim().split("="),a[n[0].trim()]=n[1];return a},s.writeFmtp=function(r){let a="",n=r.payloadType;if(r.preferredPayloadType!==void 0&&(n=r.preferredPayloadType),r.parameters&&Object.keys(r.parameters).length){const i=[];Object.keys(r.parameters).forEach(l=>{r.parameters[l]!==void 0?i.push(l+"="+r.parameters[l]):i.push(l)}),a+="a=fmtp:"+n+" "+i.join(";")+`\r
`}return a},s.parseRtcpFb=function(r){const a=r.substring(r.indexOf(" ")+1).split(" ");return{type:a.shift(),parameter:a.join(" ")}},s.writeRtcpFb=function(r){let a="",n=r.payloadType;return r.preferredPayloadType!==void 0&&(n=r.preferredPayloadType),r.rtcpFeedback&&r.rtcpFeedback.length&&r.rtcpFeedback.forEach(i=>{a+="a=rtcp-fb:"+n+" "+i.type+(i.parameter&&i.parameter.length?" "+i.parameter:"")+`\r
`}),a},s.parseSsrcMedia=function(r){const a=r.indexOf(" "),n={ssrc:parseInt(r.substring(7,a),10)},i=r.indexOf(":",a);return i>-1?(n.attribute=r.substring(a+1,i),n.value=r.substring(i+1)):n.attribute=r.substring(a+1),n},s.parseSsrcGroup=function(r){const a=r.substring(13).split(" ");return{semantics:a.shift(),ssrcs:a.map(n=>parseInt(n,10))}},s.getMid=function(r){const a=s.matchPrefix(r,"a=mid:")[0];if(a)return a.substring(6)},s.parseFingerprint=function(r){const a=r.substring(14).split(" ");return{algorithm:a[0].toLowerCase(),value:a[1].toUpperCase()}},s.getDtlsParameters=function(r,a){return{role:"auto",fingerprints:s.matchPrefix(r+a,"a=fingerprint:").map(s.parseFingerprint)}},s.writeDtlsParameters=function(r,a){let n="a=setup:"+a+`\r
`;return r.fingerprints.forEach(i=>{n+="a=fingerprint:"+i.algorithm+" "+i.value+`\r
`}),n},s.parseCryptoLine=function(r){const a=r.substring(9).split(" ");return{tag:parseInt(a[0],10),cryptoSuite:a[1],keyParams:a[2],sessionParams:a.slice(3)}},s.writeCryptoLine=function(r){return"a=crypto:"+r.tag+" "+r.cryptoSuite+" "+(typeof r.keyParams=="object"?s.writeCryptoKeyParams(r.keyParams):r.keyParams)+(r.sessionParams?" "+r.sessionParams.join(" "):"")+`\r
`},s.parseCryptoKeyParams=function(r){if(r.indexOf("inline:")!==0)return null;const a=r.substring(7).split("|");return{keyMethod:"inline",keySalt:a[0],lifeTime:a[1],mkiValue:a[2]?a[2].split(":")[0]:void 0,mkiLength:a[2]?a[2].split(":")[1]:void 0}},s.writeCryptoKeyParams=function(r){return r.keyMethod+":"+r.keySalt+(r.lifeTime?"|"+r.lifeTime:"")+(r.mkiValue&&r.mkiLength?"|"+r.mkiValue+":"+r.mkiLength:"")},s.getCryptoParameters=function(r,a){return s.matchPrefix(r+a,"a=crypto:").map(s.parseCryptoLine)},s.getIceParameters=function(r,a){const n=s.matchPrefix(r+a,"a=ice-ufrag:")[0],i=s.matchPrefix(r+a,"a=ice-pwd:")[0];return n&&i?{usernameFragment:n.substring(12),password:i.substring(10)}:null},s.writeIceParameters=function(r){let a="a=ice-ufrag:"+r.usernameFragment+`\r
a=ice-pwd:`+r.password+`\r
`;return r.iceLite&&(a+=`a=ice-lite\r
`),a},s.parseRtpParameters=function(r){const a={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},i=s.splitLines(r)[0].split(" ");a.profile=i[2];for(let o=3;o<i.length;o++){const c=i[o],d=s.matchPrefix(r,"a=rtpmap:"+c+" ")[0];if(d){const u=s.parseRtpMap(d),m=s.matchPrefix(r,"a=fmtp:"+c+" ");switch(u.parameters=m.length?s.parseFmtp(m[0]):{},u.rtcpFeedback=s.matchPrefix(r,"a=rtcp-fb:"+c+" ").map(s.parseRtcpFb),a.codecs.push(u),u.name.toUpperCase()){case"RED":case"ULPFEC":a.fecMechanisms.push(u.name.toUpperCase());break}}}s.matchPrefix(r,"a=extmap:").forEach(o=>{a.headerExtensions.push(s.parseExtmap(o))});const l=s.matchPrefix(r,"a=rtcp-fb:* ").map(s.parseRtcpFb);return a.codecs.forEach(o=>{l.forEach(c=>{o.rtcpFeedback.find(u=>u.type===c.type&&u.parameter===c.parameter)||o.rtcpFeedback.push(c)})}),a},s.writeRtpDescription=function(r,a){let n="";n+="m="+r+" ",n+=a.codecs.length>0?"9":"0",n+=" "+(a.profile||"UDP/TLS/RTP/SAVPF")+" ",n+=a.codecs.map(l=>l.preferredPayloadType!==void 0?l.preferredPayloadType:l.payloadType).join(" ")+`\r
`,n+=`c=IN IP4 0.0.0.0\r
`,n+=`a=rtcp:9 IN IP4 0.0.0.0\r
`,a.codecs.forEach(l=>{n+=s.writeRtpMap(l),n+=s.writeFmtp(l),n+=s.writeRtcpFb(l)});let i=0;return a.codecs.forEach(l=>{l.maxptime>i&&(i=l.maxptime)}),i>0&&(n+="a=maxptime:"+i+`\r
`),a.headerExtensions&&a.headerExtensions.forEach(l=>{n+=s.writeExtmap(l)}),n},s.parseRtpEncodingParameters=function(r){const a=[],n=s.parseRtpParameters(r),i=n.fecMechanisms.indexOf("RED")!==-1,l=n.fecMechanisms.indexOf("ULPFEC")!==-1,o=s.matchPrefix(r,"a=ssrc:").map(p=>s.parseSsrcMedia(p)).filter(p=>p.attribute==="cname"),c=o.length>0&&o[0].ssrc;let d;const u=s.matchPrefix(r,"a=ssrc-group:FID").map(p=>p.substring(17).split(" ").map(g=>parseInt(g,10)));u.length>0&&u[0].length>1&&u[0][0]===c&&(d=u[0][1]),n.codecs.forEach(p=>{if(p.name.toUpperCase()==="RTX"&&p.parameters.apt){let x={ssrc:c,codecPayloadType:parseInt(p.parameters.apt,10)};c&&d&&(x.rtx={ssrc:d}),a.push(x),i&&(x=JSON.parse(JSON.stringify(x)),x.fec={ssrc:c,mechanism:l?"red+ulpfec":"red"},a.push(x))}}),a.length===0&&c&&a.push({ssrc:c});let m=s.matchPrefix(r,"b=");return m.length&&(m[0].indexOf("b=TIAS:")===0?m=parseInt(m[0].substring(7),10):m[0].indexOf("b=AS:")===0?m=parseInt(m[0].substring(5),10)*1e3*.95-50*40*8:m=void 0,a.forEach(p=>{p.maxBitrate=m})),a},s.parseRtcpParameters=function(r){const a={},n=s.matchPrefix(r,"a=ssrc:").map(o=>s.parseSsrcMedia(o)).filter(o=>o.attribute==="cname")[0];n&&(a.cname=n.value,a.ssrc=n.ssrc);const i=s.matchPrefix(r,"a=rtcp-rsize");a.reducedSize=i.length>0,a.compound=i.length===0;const l=s.matchPrefix(r,"a=rtcp-mux");return a.mux=l.length>0,a},s.writeRtcpParameters=function(r){let a="";return r.reducedSize&&(a+=`a=rtcp-rsize\r
`),r.mux&&(a+=`a=rtcp-mux\r
`),r.ssrc!==void 0&&r.cname&&(a+="a=ssrc:"+r.ssrc+" cname:"+r.cname+`\r
`),a},s.parseMsid=function(r){let a;const n=s.matchPrefix(r,"a=msid:");if(n.length===1)return a=n[0].substring(7).split(" "),{stream:a[0],track:a[1]};const i=s.matchPrefix(r,"a=ssrc:").map(l=>s.parseSsrcMedia(l)).filter(l=>l.attribute==="msid");if(i.length>0)return a=i[0].value.split(" "),{stream:a[0],track:a[1]}},s.parseSctpDescription=function(r){const a=s.parseMLine(r),n=s.matchPrefix(r,"a=max-message-size:");let i;n.length>0&&(i=parseInt(n[0].substring(19),10)),isNaN(i)&&(i=65536);const l=s.matchPrefix(r,"a=sctp-port:");if(l.length>0)return{port:parseInt(l[0].substring(12),10),protocol:a.fmt,maxMessageSize:i};const o=s.matchPrefix(r,"a=sctpmap:");if(o.length>0){const c=o[0].substring(10).split(" ");return{port:parseInt(c[0],10),protocol:c[1],maxMessageSize:i}}},s.writeSctpDescription=function(r,a){let n=[];return r.protocol!=="DTLS/SCTP"?n=["m="+r.kind+" 9 "+r.protocol+" "+a.protocol+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctp-port:"+a.port+`\r
`]:n=["m="+r.kind+" 9 "+r.protocol+" "+a.port+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctpmap:"+a.port+" "+a.protocol+` 65535\r
`],a.maxMessageSize!==void 0&&n.push("a=max-message-size:"+a.maxMessageSize+`\r
`),n.join("")},s.generateSessionId=function(){return Math.random().toString().substr(2,22)},s.writeSessionBoilerplate=function(r,a,n){let i;const l=a!==void 0?a:2;return r?i=r:i=s.generateSessionId(),`v=0\r
o=`+(n||"thisisadapterortc")+" "+i+" "+l+` IN IP4 127.0.0.1\r
s=-\r
t=0 0\r
`},s.getDirection=function(r,a){const n=s.splitLines(r);for(let i=0;i<n.length;i++)switch(n[i]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return n[i].substring(2)}return a?s.getDirection(a):"sendrecv"},s.getKind=function(r){return s.splitLines(r)[0].split(" ")[0].substring(2)},s.isRejected=function(r){return r.split(" ",2)[1]==="0"},s.parseMLine=function(r){const n=s.splitLines(r)[0].substring(2).split(" ");return{kind:n[0],port:parseInt(n[1],10),protocol:n[2],fmt:n.slice(3).join(" ")}},s.parseOLine=function(r){const n=s.matchPrefix(r,"o=")[0].substring(2).split(" ");return{username:n[0],sessionId:n[1],sessionVersion:parseInt(n[2],10),netType:n[3],addressType:n[4],address:n[5]}},s.isValidSDP=function(r){if(typeof r!="string"||r.length===0)return!1;const a=s.splitLines(r);for(let n=0;n<a.length;n++)if(a[n].length<2||a[n].charAt(1)!=="=")return!1;return!0},t.exports=s})(AI);var TI=AI.exports;const ou=bN(TI),XZ=yN({__proto__:null,default:ou},[TI]);function Ix(t){if(!t.RTCIceCandidate||t.RTCIceCandidate&&"foundation"in t.RTCIceCandidate.prototype)return;const s=t.RTCIceCandidate;t.RTCIceCandidate=function(a){if(typeof a=="object"&&a.candidate&&a.candidate.indexOf("a=")===0&&(a=JSON.parse(JSON.stringify(a)),a.candidate=a.candidate.substring(2)),a.candidate&&a.candidate.length){const n=new s(a),i=ou.parseCandidate(a.candidate);for(const l in i)l in n||Object.defineProperty(n,l,{value:i[l]});return n.toJSON=function(){return{candidate:n.candidate,sdpMid:n.sdpMid,sdpMLineIndex:n.sdpMLineIndex,usernameFragment:n.usernameFragment}},n}return new s(a)},t.RTCIceCandidate.prototype=s.prototype,od(t,"icecandidate",r=>(r.candidate&&Object.defineProperty(r,"candidate",{value:new t.RTCIceCandidate(r.candidate),writable:"false"}),r))}function Vw(t){!t.RTCIceCandidate||t.RTCIceCandidate&&"relayProtocol"in t.RTCIceCandidate.prototype||od(t,"icecandidate",s=>{if(s.candidate){const r=ou.parseCandidate(s.candidate.candidate);r.type==="relay"&&(s.candidate.relayProtocol={0:"tls",1:"tcp",2:"udp"}[r.priority>>24])}return s})}function Mx(t,s){if(!t.RTCPeerConnection)return;"sctp"in t.RTCPeerConnection.prototype||Object.defineProperty(t.RTCPeerConnection.prototype,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp}});const r=function(o){if(!o||!o.sdp)return!1;const c=ou.splitSections(o.sdp);return c.shift(),c.some(d=>{const u=ou.parseMLine(d);return u&&u.kind==="application"&&u.protocol.indexOf("SCTP")!==-1})},a=function(o){const c=o.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(c===null||c.length<2)return-1;const d=parseInt(c[1],10);return d!==d?-1:d},n=function(o){let c=65536;return s.browser==="firefox"&&(s.version<57?o===-1?c=16384:c=2147483637:s.version<60?c=s.version===57?65535:65536:c=2147483637),c},i=function(o,c){let d=65536;s.browser==="firefox"&&s.version===57&&(d=65535);const u=ou.matchPrefix(o.sdp,"a=max-message-size:");return u.length>0?d=parseInt(u[0].substring(19),10):s.browser==="firefox"&&c!==-1&&(d=2147483637),d},l=t.RTCPeerConnection.prototype.setRemoteDescription;t.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,s.browser==="chrome"&&s.version>=76){const{sdpSemantics:c}=this.getConfiguration();c==="plan-b"&&Object.defineProperty(this,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp},enumerable:!0,configurable:!0})}if(r(arguments[0])){const c=a(arguments[0]),d=n(c),u=i(arguments[0],c);let m;d===0&&u===0?m=Number.POSITIVE_INFINITY:d===0||u===0?m=Math.max(d,u):m=Math.min(d,u);const p={};Object.defineProperty(p,"maxMessageSize",{get(){return m}}),this._sctp=p}return l.apply(this,arguments)}}function Lx(t){if(!(t.RTCPeerConnection&&"createDataChannel"in t.RTCPeerConnection.prototype))return;function s(a,n){const i=a.send;a.send=function(){const o=arguments[0],c=o.length||o.size||o.byteLength;if(a.readyState==="open"&&n.sctp&&c>n.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+n.sctp.maxMessageSize+" bytes)");return i.apply(a,arguments)}}const r=t.RTCPeerConnection.prototype.createDataChannel;t.RTCPeerConnection.prototype.createDataChannel=function(){const n=r.apply(this,arguments);return s(n,this),n},od(t,"datachannel",a=>(s(a.channel,a.target),a))}function qw(t){if(!t.RTCPeerConnection||"connectionState"in t.RTCPeerConnection.prototype)return;const s=t.RTCPeerConnection.prototype;Object.defineProperty(s,"connectionState",{get(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(s,"onconnectionstatechange",{get(){return this._onconnectionstatechange||null},set(r){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),r&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=r)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach(r=>{const a=s[r];s[r]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=n=>{const i=n.target;if(i._lastConnectionState!==i.connectionState){i._lastConnectionState=i.connectionState;const l=new Event("connectionstatechange",n);i.dispatchEvent(l)}return n},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),a.apply(this,arguments)}})}function Ww(t,s){if(!t.RTCPeerConnection||s.browser==="chrome"&&s.version>=71||s.browser==="safari"&&s._safariVersion>=13.1)return;const r=t.RTCPeerConnection.prototype.setRemoteDescription;t.RTCPeerConnection.prototype.setRemoteDescription=function(n){if(n&&n.sdp&&n.sdp.indexOf(`
a=extmap-allow-mixed`)!==-1){const i=n.sdp.split(`
`).filter(l=>l.trim()!=="a=extmap-allow-mixed").join(`
`);t.RTCSessionDescription&&n instanceof t.RTCSessionDescription?arguments[0]=new t.RTCSessionDescription({type:n.type,sdp:i}):n.sdp=i}return r.apply(this,arguments)}}function Fx(t,s){if(!(t.RTCPeerConnection&&t.RTCPeerConnection.prototype))return;const r=t.RTCPeerConnection.prototype.addIceCandidate;!r||r.length===0||(t.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?(s.browser==="chrome"&&s.version<78||s.browser==="firefox"&&s.version<68||s.browser==="safari")&&arguments[0]&&arguments[0].candidate===""?Promise.resolve():r.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())})}function Ox(t,s){if(!(t.RTCPeerConnection&&t.RTCPeerConnection.prototype))return;const r=t.RTCPeerConnection.prototype.setLocalDescription;!r||r.length===0||(t.RTCPeerConnection.prototype.setLocalDescription=function(){let n=arguments[0]||{};if(typeof n!="object"||n.type&&n.sdp)return r.apply(this,arguments);if(n={type:n.type,sdp:n.sdp},!n.type)switch(this.signalingState){case"stable":case"have-local-offer":case"have-remote-pranswer":n.type="offer";break;default:n.type="answer";break}return n.sdp||n.type!=="offer"&&n.type!=="answer"?r.apply(this,[n]):(n.type==="offer"?this.createOffer:this.createAnswer).apply(this).then(l=>r.apply(this,[l]))})}const eX=Object.freeze(Object.defineProperty({__proto__:null,removeExtmapAllowMixed:Ww,shimAddIceCandidateNullOrEmpty:Fx,shimConnectionState:qw,shimMaxMessageSize:Mx,shimParameterlessSetLocalDescription:Ox,shimRTCIceCandidate:Ix,shimRTCIceCandidateRelayProtocol:Vw,shimSendThrowTypeError:Lx},Symbol.toStringTag,{value:"Module"}));function tX({window:t}={},s={shimChrome:!0,shimFirefox:!0,shimSafari:!0}){const r=eI,a=JZ(t),n={browserDetails:a,commonShim:eX,extractVersion:Ym,disableLog:YZ,disableWarnings:QZ,sdp:XZ};switch(a.browser){case"chrome":if(!W5||!$w||!s.shimChrome)return r("Chrome shim is not included in this adapter release."),n;if(a.version===null)return r("Chrome shim can not determine version, not shimming."),n;r("adapter.js shimming chrome."),n.browserShim=W5,Fx(t,a),Ox(t),sI(t,a),rI(t),$w(t,a),aI(t),oI(t,a),nI(t),iI(t),cI(t,a),Ix(t),Vw(t),qw(t),Mx(t,a),Lx(t),Ww(t,a);break;case"firefox":if(!z5||!Uw||!s.shimFirefox)return r("Firefox shim is not included in this adapter release."),n;r("adapter.js shimming firefox."),n.browserShim=z5,Fx(t,a),Ox(t),dI(t,a),Uw(t,a),uI(t),pI(t),mI(t),hI(t),xI(t),gI(t),fI(t),yI(t),bI(t),Ix(t),qw(t),Mx(t,a),Lx(t);break;case"safari":if(!G5||!s.shimSafari)return r("Safari shim is not included in this adapter release."),n;r("adapter.js shimming safari."),n.browserShim=G5,Fx(t,a),Ox(t),CI(t),_I(t),wI(t),vI(t),jI(t),SI(t),NI(t),EI(t),Ix(t),Vw(t),Mx(t,a),Lx(t),Ww(t,a);break;default:r("Unsupported browser!");break}return n}tX({window:typeof window>"u"?void 0:window});const sX={finder:!0,torch:!0,tracker:void 0,onOff:!1,zoom:!1},rX={facingMode:"environment",width:{min:640,ideal:720,max:1920},height:{min:640,ideal:720,max:1080}},aX={width:"100%",height:"100%",position:"relative",display:"flex",alignItems:"center",justifyContent:"center",overflow:"hidden",aspectRatio:"1/1"},nX={width:"100%",height:"100%",objectFit:"cover",overflow:"hidden"};var Qm=t=>t instanceof Date,PI=t=>t==null;const RI=t=>typeof t=="object";var K5=t=>!PI(t)&&!Array.isArray(t)&&RI(t)&&!Qm(t),H5=t=>PI(t)||!RI(t);function DI(t,s){if(H5(t)||H5(s))return t===s;if(Qm(t)&&Qm(s))return t.getTime()===s.getTime();const r=t,a=s,n=Object.keys(r),i=Object.keys(a);if(n.length!==i.length)return!1;for(const l of n){const o=r[l];if(!i.includes(l))return!1;if(l!=="ref"){const c=a[l];if(Qm(o)&&Qm(c)||K5(o)&&K5(c)||Array.isArray(o)&&Array.isArray(c)?!DI(o,c):o!==c)return!1}}return!0}function iX(t){const{onClick:s,disabled:r,className:a}=t,n={cursor:r?"default":"pointer",stroke:r?"grey":"yellow",strokeLineJoin:"round",strokeLineCap:"round",strokeWidth:1.5,...t.style};return e.jsxs("svg",{onClick:r?void 0:s,className:a,style:n,width:"28px",height:"28px",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("title",{children:"Camera Off"}),e.jsx("path",{d:"M3 3L6.00007 6.00007M21 21L19.8455 19.8221M9.74194 4.06811C9.83646 4.04279 9.93334 4.02428 10.0319 4.01299C10.1453 4 10.2683 4 10.5141 4H13.5327C13.7786 4 13.9015 4 14.015 4.01299C14.6068 4.08078 15.1375 4.40882 15.4628 4.90782C15.5252 5.00345 15.5802 5.11345 15.6901 5.33333C15.7451 5.44329 15.7726 5.49827 15.8037 5.54609C15.9664 5.79559 16.2318 5.95961 16.5277 5.9935C16.5844 6 16.6459 6 16.7688 6H17.8234C18.9435 6 19.5036 6 19.9314 6.21799C20.3077 6.40973 20.6137 6.71569 20.8055 7.09202C21.0234 7.51984 21.0234 8.0799 21.0234 9.2V15.3496M19.8455 19.8221C19.4278 20 18.8702 20 17.8234 20H6.22344C5.10333 20 4.54328 20 4.11546 19.782C3.73913 19.5903 3.43317 19.2843 3.24142 18.908C3.02344 18.4802 3.02344 17.9201 3.02344 16.8V9.2C3.02344 8.0799 3.02344 7.51984 3.24142 7.09202C3.43317 6.71569 3.73913 6.40973 4.11546 6.21799C4.51385 6.015 5.0269 6.00103 6.00007 6.00007M19.8455 19.8221L14.5619 14.5619M14.5619 14.5619C14.0349 15.4243 13.0847 16 12 16C10.3431 16 9 14.6569 9 13C9 11.9153 9.57566 10.9651 10.4381 10.4381M14.5619 14.5619L10.4381 10.4381M10.4381 10.4381L6.00007 6.00007"})]})}function lX(t){const{onClick:s,disabled:r,className:a}=t,n={cursor:r?"default":"pointer",stroke:r?"grey":"yellow",strokeLineJoin:"round",strokeLineCap:"round",strokeWidth:1.5,...t.style};return e.jsxs("svg",{onClick:r?void 0:s,className:a,style:n,width:"28px",height:"28px",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("title",{children:"Camera On"}),e.jsx("path",{d:"M12 16C13.6569 16 15 14.6569 15 13C15 11.3431 13.6569 10 12 10C10.3431 10 9 11.3431 9 13C9 14.6569 10.3431 16 12 16Z"}),e.jsx("path",{d:"M3 16.8V9.2C3 8.0799 3 7.51984 3.21799 7.09202C3.40973 6.71569 3.71569 6.40973 4.09202 6.21799C4.51984 6 5.0799 6 6.2 6H7.25464C7.37758 6 7.43905 6 7.49576 5.9935C7.79166 5.95961 8.05705 5.79559 8.21969 5.54609C8.25086 5.49827 8.27836 5.44328 8.33333 5.33333C8.44329 5.11342 8.49827 5.00346 8.56062 4.90782C8.8859 4.40882 9.41668 4.08078 10.0085 4.01299C10.1219 4 10.2448 4 10.4907 4H13.5093C13.7552 4 13.8781 4 13.9915 4.01299C14.5833 4.08078 15.1141 4.40882 15.4394 4.90782C15.5017 5.00345 15.5567 5.11345 15.6667 5.33333C15.7216 5.44329 15.7491 5.49827 15.7803 5.54609C15.943 5.79559 16.2083 5.95961 16.5042 5.9935C16.561 6 16.6224 6 16.7454 6H17.8C18.9201 6 19.4802 6 19.908 6.21799C20.2843 6.40973 20.5903 6.71569 20.782 7.09202C21 7.51984 21 8.0799 21 9.2V16.8C21 17.9201 21 18.4802 20.782 18.908C20.5903 19.2843 20.2843 19.5903 19.908 19.782C19.4802 20 18.9201 20 17.8 20H6.2C5.0799 20 4.51984 20 4.09202 19.782C3.71569 19.5903 3.40973 19.2843 3.21799 18.908C3 18.4802 3 17.9201 3 16.8Z"})]})}function oX(t){const{scanning:s,startScanning:r,stopScanning:a}=t,[n,i]=h.useState(!1);function l(){i(!0),s?a():r(),setTimeout(()=>i(!1),1e3)}return e.jsx("div",{style:{bottom:85,right:8,position:"absolute",zIndex:2,cursor:n?"default":"pointer"},children:e.jsx(s?iX:lX,{disabled:n,onClick:l})})}function cX(t){const{onClick:s,className:r,style:a}=t;return e.jsxs("svg",{onClick:s,width:"30px",height:"30px",viewBox:"0 0 24 24",className:r,style:a,xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("title",{children:"Torch Off"}),e.jsx("path",{strokeWidth:.2,stroke:"yellow",fill:"yellow",d:"M14.516 15.158l.714.714-4.595 6.14-.75-.364L12.337 13H6.978L8.22 8.861l.803.803L8.322 12h3.036l1.793 1.792-1.475 5.16zm5.984 4.05L4.793 3.5l.707-.707 3.492 3.492L10.278 2h7.972l-5.025 7h7.149l-3.71 4.957 4.543 4.543zM12.707 10l3.243 3.243L18.376 10zM9.795 7.088l2.079 2.079L16.3 3h-5.278z"})]})}function dX(t){const{onClick:s,className:r,style:a}=t;return e.jsxs("svg",{onClick:s,width:"30px",height:"30px",viewBox:"0 0 24 24",className:r,style:a,xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("title",{children:"Torch On"}),e.jsx("path",{strokeWidth:.2,stroke:"yellow",fill:"yellow",d:"M13.225 9l5.025-7h-7.972l-3.3 11h5.359l-2.452 8.648.75.364L20.374 9zm.438 3H8.322l2.7-9H16.3l-5.025 7h7.101l-6.7 8.953z"})]})}function uX(t){const{status:s,scanning:r,torchToggle:a}=t;function n(i){a(i)}return r&&a?e.jsx("div",{style:{bottom:35,right:8,position:"absolute",zIndex:2,cursor:"pointer"},children:s?e.jsx(cX,{onClick:()=>n(!1)}):e.jsx(dX,{onClick:()=>n(!0)})}):null}function mX(t){const{onClick:s,className:r,disabled:a=!1}=t,n={cursor:a?"default":"pointer",stroke:a?"grey":"yellow",fill:a?"grey":"yellow",...t.style};return e.jsxs("svg",{onClick:a?void 0:s,width:"30px",height:"30px",viewBox:"0 0 24 24",className:r,style:n,xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("title",{children:"Zoom In"}),e.jsx("path",{strokeWidth:.3,d:"M16.279,17.039c-1.396,1.209 -3.216,1.941 -5.206,1.941c-4.393,0 -7.96,-3.567 -7.96,-7.96c-0,-4.393 3.567,-7.96 7.96,-7.96c4.393,0 7.96,3.567 7.96,7.96c-0,2.044 -0.772,3.909 -2.04,5.319l0.165,0.165c1.194,1.194 2.388,2.388 3.583,3.582c0.455,0.456 -0.252,1.163 -0.707,0.708l-3.755,-3.755Zm1.754,-6.019c-0,-3.841 -3.119,-6.96 -6.96,-6.96c-3.842,0 -6.96,3.119 -6.96,6.96c-0,3.841 3.118,6.96 6.96,6.96c3.841,0 6.96,-3.119 6.96,-6.96Zm-7.46,0.5l-1.5,0c-0.645,0 -0.643,-1 -0,-1l1.5,0l-0,-1.5c-0,-0.645 1,-0.643 1,0l-0,1.5l1.5,0c0.645,0 0.643,1 -0,1l-1.5,0l-0,1.5c-0,0.645 -1,0.643 -1,0l-0,-1.5Z"})]})}function hX(t){const{onClick:s,className:r,disabled:a=!1}=t,n={cursor:a?"default":"pointer",stroke:a?"grey":"yellow",fill:a?"grey":"yellow",...t.style};return e.jsxs("svg",{onClick:a?void 0:s,width:"30px",height:"30px",viewBox:"0 0 24 24",className:r,style:n,xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("title",{children:"Zoom Out"}),e.jsx("path",{strokeWidth:.3,d:"M16.279,17.039c-1.396,1.209 -3.216,1.941 -5.206,1.941c-4.393,0 -7.96,-3.567 -7.96,-7.96c-0,-4.393 3.567,-7.96 7.96,-7.96c4.393,0 7.96,3.567 7.96,7.96c-0,2.044 -0.772,3.909 -2.04,5.319l0.165,0.165c1.194,1.194 2.388,2.388 3.583,3.582c0.455,0.456 -0.252,1.163 -0.707,0.708l-3.755,-3.755Zm1.754,-6.019c-0,-3.841 -3.119,-6.96 -6.96,-6.96c-3.842,0 -6.96,3.119 -6.96,6.96c-0,3.841 3.118,6.96 6.96,6.96c3.841,0 6.96,-3.119 6.96,-6.96Zm-4.96,-0.5c0.645,0 0.643,1 -0,1l-4,0c-0.645,0 -0.643,-1 -0,-1l4,0Z"})]})}function pX(t){const{scanning:s,capabilities:r,onZoom:a,value:n}=t;if(!s||!a)return null;const i=(r.max-r.min)/3;return e.jsxs(h.Fragment,{children:[e.jsx("div",{style:{bottom:130,right:8,position:"absolute",zIndex:2,cursor:"pointer"},children:e.jsx(hX,{disabled:n<=r.min,onClick:function(){a(Math.max(n-i,r.min))}})}),e.jsx("div",{style:{bottom:180,right:8,position:"absolute",zIndex:2,cursor:"pointer"},children:e.jsx(mX,{disabled:n>=r.max,onClick:function(){a(Math.min(n+i,r.max))}})})]})}const Fl={fullContainer:{width:"100%",height:"100%",position:"relative",display:"flex",alignItems:"center",justifyContent:"center",overflow:"hidden"},innerContainer:{width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",position:"relative"},overlay:{position:"absolute",top:0,right:0,bottom:0,left:0,pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center"},borderBox:{position:"relative",width:"70%",aspectRatio:"1 / 1",border:"2px dashed rgba(239, 68, 68, 0.4)",borderRadius:"0.5rem"},cornerTopLeft:{position:"absolute",width:"15%",height:"15%",border:"4px solid #ef4444",top:0,left:0,borderBottomColor:"transparent",borderRightColor:"transparent",borderTopLeftRadius:"0.5rem"},cornerTopRight:{position:"absolute",width:"15%",height:"15%",border:"4px solid #ef4444",top:0,right:0,borderBottomColor:"transparent",borderLeftColor:"transparent",borderTopRightRadius:"0.5rem"},cornerBottomLeft:{position:"absolute",width:"15%",height:"15%",border:"4px solid #ef4444",bottom:0,left:0,borderTopColor:"transparent",borderRightColor:"transparent",borderBottomLeftRadius:"0.5rem"},cornerBottomRight:{position:"absolute",width:"15%",height:"15%",border:"4px solid #ef4444",bottom:0,right:0,borderTopColor:"transparent",borderLeftColor:"transparent",borderBottomRightRadius:"0.5rem"}};function xX(t){const{scanning:s,capabilities:r,onOff:a,torch:n,zoom:i,startScanning:l,stopScanning:o}=t;return e.jsx("div",{style:Fl.fullContainer,children:e.jsxs("div",{style:Fl.innerContainer,children:[e.jsx("div",{style:Fl.overlay,children:e.jsxs("div",{style:Fl.borderBox,children:[e.jsx("div",{style:Fl.cornerTopLeft}),e.jsx("div",{style:Fl.cornerTopRight}),e.jsx("div",{style:Fl.cornerBottomLeft}),e.jsx("div",{style:Fl.cornerBottomRight})]})}),a&&e.jsx(oX,{scanning:s,startScanning:l,stopScanning:o}),n&&r.torch&&e.jsx(uX,{scanning:s,status:n.status,torchToggle:n.toggle}),i&&r.zoom&&e.jsx(pX,{scanning:s,capabilities:r.zoom,value:i.value,onZoom:i.onChange})]})})}function zp(t){if(t===null)throw new Error("Canvas should always be defined when component is mounted.");const s=t.getContext("2d");if(s===null)throw new Error("Canvas 2D context should be non-null");s.clearRect(0,0,t.width,t.height)}function gX(t){const{onScan:s,constraints:r,formats:a=["any"],paused:n=!1,components:i,children:l,styles:o,classNames:c,allowMultiple:d,scanDelay:u,onError:m,sound:p}=t,x=h.useRef(null),g=h.useRef(null),f=h.useRef(null),b=h.useMemo(()=>({...rX,...r}),[r]),j=h.useMemo(()=>({...sX,...i}),[i]),[v,w]=h.useState(!1),[y,C]=h.useState(!0),[S,_]=h.useState(b),E=function(){const B=h.useRef(Promise.resolve({type:"stop",data:{}})),T=h.useRef(null),O=h.useRef(null),[q,K]=h.useState({}),[le,X]=h.useState({}),se=h.useCallback(async(ie,Y)=>{var ue,me;if(!window.isSecureContext)throw new Error("camera access is only permitted in secure context. Use HTTPS or localhost rather than HTTP.");if(((ue=navigator==null?void 0:navigator.mediaDevices)==null?void 0:ue.getUserMedia)===void 0)throw new Error("this browser has no Stream API support");const G=await navigator.mediaDevices.getUserMedia({audio:!1,video:Y});ie.srcObject!==void 0?ie.srcObject=G:ie.mozSrcObject!==void 0?ie.mozSrcObject=G:window.URL.createObjectURL?ie.src=window.URL.createObjectURL(G):window.webkitURL?ie.src=window.webkitURL.createObjectURL(G):ie.src=G.id,await Promise.race([ie.play(),new Promise(ne=>setTimeout(ne,3e3)).then(()=>{throw new Error("Loading camera stream timed out after 3 seconds.")})]),await new Promise(ne=>setTimeout(ne,500));const[H]=G.getVideoTracks();return X(H.getSettings()),K(((me=H==null?void 0:H.getCapabilities)==null?void 0:me.call(H))??{}),T.current=G,O.current=H,{type:"start",data:{videoEl:ie,stream:G,constraints:Y}}},[]),de=h.useCallback(async(ie,Y)=>{ie.src="",ie.srcObject=null,ie.load();for(const G of Y.getTracks())Y.removeTrack(G),G.stop();return T.current=null,O.current=null,X({}),{type:"stop",data:{}}},[]),fe=h.useCallback(async(ie,{constraints:Y,restart:G=!1})=>{if(B.current=B.current.then(H=>{if(H.type==="start"){const{data:{videoEl:ue,stream:me,constraints:ne}}=H;return G||ie!==ue||Y!==ne?de(ue,me).then(()=>se(ie,Y)):H}return se(ie,Y)}),(await B.current).type==="stop")throw new Error("Something went wrong with the camera task queue (start task).")},[se,de]),z=h.useCallback(async()=>{if(B.current=B.current.then(ie=>{if(ie.type==="stop")return ie;const{data:{videoEl:Y,stream:G}}=ie;return de(Y,G)}),(await B.current).type==="start")throw new Error("Something went wrong with the camera task queue (stop task).")},[de]),re=h.useCallback(async ie=>{var G;const Y=O.current;if(!Y)throw new Error("No active video track found.");{(G=ie.advanced)!=null&&G[0].zoom&&Y.getCapabilities().torch&&await Y.applyConstraints({advanced:[{torch:!1}]}),await Y.applyConstraints(ie);const H=Y.getCapabilities(),ue=Y.getSettings();K(H),X(ue)}},[]);return h.useEffect(()=>()=>{(async()=>await z())()},[z]),{capabilities:q,settings:le,startCamera:fe,stopCamera:z,updateConstraints:re}}(),A=h.useRef(E),R=h.useRef(m),I=h.useRef(j.tracker);h.useEffect(()=>{A.current=E},[E]),h.useEffect(()=>{R.current=m},[m]),h.useEffect(()=>{I.current=j.tracker},[j.tracker]);const N=h.useCallback(B=>{(function(T,O,q,K){const le=q;if(le==null)throw new Error("onFound handler should only be called when component is mounted. Thus tracking canvas is always defined.");const X=O;if(X==null)throw new Error("onFound handler should only be called when component is mounted. Thus video element is always defined.");if(T.length===0||K===void 0)zp(le);else{const se=X.offsetWidth,de=X.offsetHeight,fe=X.videoWidth,z=X.videoHeight,re=Math.max(se/fe,de/z),ie=fe*re,Y=z*re,G=ie/fe,H=Y/z,ue=(se-ie)/2,me=(de-Y)/2,ne=({x:J,y:Q})=>({x:Math.floor(J*G),y:Math.floor(Q*H)}),Ae=({x:J,y:Q})=>({x:Math.floor(J+ue),y:Math.floor(Q+me)}),Fe=T.map(J=>{const{boundingBox:Q,cornerPoints:ee}=J,{x:Ne,y:ye}=Ae(ne({x:Q.x,y:Q.y})),{x:he,y:Ce}=ne({x:Q.width,y:Q.height});return{...J,cornerPoints:ee.map(Se=>Ae(ne(Se))),boundingBox:DOMRectReadOnly.fromRect({x:Ne,y:ye,width:he,height:Ce})}});le.width=X.offsetWidth,le.height=X.offsetHeight;const at=le.getContext("2d");if(at===null)throw new Error("onFound handler should only be called when component is mounted. Thus tracking canvas 2D context is always defined.");K(Fe,at)}})(B,x.current,f.current,I.current)},[]),{startScanning:P,stopScanning:k}=function(B){const{videoElementRef:T,onScan:O,onFound:q,retryDelay:K=100,scanDelay:le=0,formats:X=[],allowMultiple:se=!1,sound:de=!0}=B,fe=h.useRef(new Ow({formats:X})),z=h.useRef(null),re=h.useRef(null);h.useEffect(()=>{fe.current=new Ow({formats:X})},[X]),h.useEffect(()=>{typeof window<"u"&&de&&(z.current=new Audio(typeof de=="string"?de:"data:audio/mp3;base64,//PkZAAhghE0AKToAJra/n0FQygAAAGIkYJgmCYXBMAAGCTJz3zhCEM//z//1hz//8MMMMN08ssV6e5DDWIQreAgCvFKy8bXgIKMkUDDBgzJwIBtkRMQAocxIFdxghQGKDoEziAzQxOBOdH92i/iGi+zDCAEIX46a73HrSybZw1x3JZjXp7dSNy/P68rjcbt7p7fakMP5LVMyzCaj1pjvejYYAIDgDGzECjEAk1Jl3559HIon8hzlfPVTCvGJZzfcKSxXfyMWM88//9VKSxXdtnb9vomOuuRyiWVYbf+X8zp6fKGHIdycuWMMMMMMKSnp+6wsYc/9f/7z7rPPWHN556p6fP8MMMP///PPP/7+GHK9PT6p7f/unldP2np7YeHjweiYA4GLNAgAiI7u57n5//oc5/yfk6znOcPhwOBwggHCMpA4HA4KEyHOc5znO+hPIc5//+fqJh8XQPh90JU5xQinOf//87/zvP+ggAYuhCKHxdA+Hxd0EA4KKHA4ciB3kOXfXB/gmf8p/B96lAMKAgAADU+BujARHgwdisgHMfAUHAiceBg4ASBgZBiBIBH4ZaHOJsLhf8R+HYEciIgYSwj/+Bi7EqBh+AcBn5P6Bh4TuBmrAMBiZH7gaLEWgew//PkZFMlyek60MpYAShzqqZhm6gCUWeEUWAewEWYGN4X4GDEPwGE8S4GDoOIGAYKgIQOkz//gGARAUB+CwGxTwMAACAEgyAwdAlAxKhzAxXiZ///AxcEwAwJjDAziCAAwQgdAwRgdAsJQDAmAcGzYDwAhZIAKAcIQB4GT9TQMJ9/4Gi1Fv/AcAYUqKBAwGgNAwVBAAwGhwAwdBlAxFg1AwlgzAwNBuAkJQDBgEEDEqGECgChFgBgL//CIswYYH//+HKCpk4K0C9AaKKCAOBeMcR4X9C44BwABCgGAsGYCgTwHAcAwXAiAwSAQV///CJP9lwMBQAwAAAWGo5lVLCcaeneVhJAVGai3//ioaUEf//gaTAYGCj8BnEwfrIqDcsIQb/vmhU/8fAs0G8YGGwKST8Igj4GCATipksVzY8p//90FWJwh45AkX//4fCF9wMEgkL3uQc+gbGJ8t4MBAMBP/hEXf9FRuWBcAfIFjYzQdoLCBwh7IWVlxaX/w8oMCP/+EQT5poGB1Ir90DhiV6af/jFYBpT2BgoQyyt2M0ToBdEaZyzt8nTo3xdNDCTSd//o6F06CjooxRr4jVF/0bOKD6OMUNDRxiMUVFR0FFQPhGXRjDpr4MAEA4wIQUhYOIw//PkZE4nrg08sOx4ACQ0CopD2aAAlwTTBxQeMcwd8w8gZTAgABXwGABOkzpI0wAQAExnWfP4x8ZjKunWdZ1o1Qe6lFGKCNULORQCELAAPnRUf/GIx/0FHGfo3SdZ0qP2cukXKLlRtBKFgAQwCkwJgFRYBEEATmDsLSY2QiQYCEnEra+UZo6F1aKMRr6GhoaP/+j//ov+i+hjLqBgMkYoqChoo1GqCjoY06TpRqjjLOYzRRmMuizmgdKhdF8kjTAAAPMCwGswzglgwAJfzqxmioKH/////////////+ijLOAwFmN0f/////////Q///8ZjP/9DGYyFwIDBeB3MA4AlBWidKM5spykAUAQOCakK+udGqN8VDYjTRuN//0bVX//6Kio4xQFv//nf//kKOoAEIB6SY6hcxenp85///4/DEPf/84Xvl4vF4dwtxfEJgCYQHMSgKCROp4+fn////L4tQf0unz89OecLxeL0ul09y6enzp4dIhKAQFA5hKfLu1nU7/Wr71rRKJUBQSUVt////l08GUPVWgAAYAeNKsxbQNAAhQx3/oKGMM6dZ1Yy6sajMbfKio7lNcv0sScZ47lNcw32ekVFMP9fp/f+mklI6at6u/dBMQuW6y+C5BcgwAA//PkZEomGg1HYGe0riWsCqbEwiY0BJFJMxrCcxGgQ2VK8xxCF1wsABgQBBgQBAYAFCkYCgALkK4fJ00E5ctJN1Uxy5au3XoGcM4dSN0EYZwzhW0WCh1PZwzhnFFQxtnbO2d0Kt6CdXbruggkTEX5Rs4TEQUVsdVXaCcuWXIBQUGmwmgoAGcJiM4dSioHQdBnEY+hjcbov//jcb/43G43G/jCRibfxugdBnDqULO2duvQumztncbo4xGKKNxugooxGIxQULoOgFgUMTA/jbrxiMDmETL+eLhcPThzOeeOZfL5fIcBYuXD/OHv8t//LJFxjxQYHHKDGFkZMtlmKM0RgQfbVtxFIHbQBDRuzRguEI1c9XZ/rWmrZfVU3Oc/9utNNygRQkCoHlAYstNN6DJ1IINpoINppv+WG/+g2mmnUmmmpBAoJIJhnwB5xkymn606Df/t000xhU03UXC5Ol8uFyXy+Xy/l8v5w4cLk4XAvwAYUvl/QL5fTdlKZkEEEEGumaKaX00zIOemf6CH///ywI3LKpiQ2Ef4xYWMSDyI0XwzikpL0ajVHZ3j9DGIjeuXcNfjn96/S/TUz/X/vX////5K/r+v7Jn+LlAoGZOIQIwMKBQM/yppKYURmhGZkR2b//PkZE0mHg1HEG8wyiD7mlwAyDU8nJHi5htakZmZGNiRcpkJhBmUmZYQcM1VDEEBggNDV/ASEZRYKFZIhkXKLlKmk7IVTKmZNJ5KhiqVUqpX+k7+qlVKyV/ZIqZDFDWTJlFyi5TJpKhiXKBQyZzIS5JhBoayV/AQWVpGWkcYTV5O/rIVSv8/0nkr+v6/vyR/X9f1/ZN8kf5/n99/n+f5/lTKmf9/mRP8yFUqpWSv4yJUqpX9kj/MmZNJ5K/z/P9J5P/v6yFUz/CEoywgUMqZkz/FssECIsVq0aPRrRRatFFFykQZJ2Ukl///5KjmksOaA7ALROJLDnEsLbq3GTMVrwb/0dGzmM0DlfBlHQOmrdR0MYi92TX6b/cmDHLclyUVYO/4O8sFTKFTKFf8yhUyhUyhXzKlDKlCsr/+ZUoVlSsr/+ZQqZUoZUoceMfcoZUoZUoVlfOPGcmDHKcpynKg9yXJcr3JclyXJclyYO+DXJclyfgxFZVb3KcqD/g2MxzsY72L9LubPR0dCyf5K5NNd+Tv9GXRdV0XJclyfcl/n+k8kf6SX/iVynvXf///4Mg/1OkxguYzmM5jMcLHMxwwGhgNCwXMLAcwMXTLi1MD7w7tmTdBvMmE0xQFzCwHMDAd//PkZGMpigkmAGOUvCfTgcgAuC+ITswMFzC4oMLhYMByn0xvU+p9Tr0xUxf/0xv///1PBYDhgNTFTFTGTGTGTGTGTGTGTGC4GTFMDAcLAdMVMVMULAcMBpgYDhcDGFwsYXFBikLGFwMGA4MBxgcDKfTEMUoAx2BisD+mKp5Tv1OkxkxkxkxkxkxkxkxlO0xVPJi/6nv////U7CwHTFTFTGTGTGTGU+p71PpjJipihYDpipi/6n1Ov//C4GC4GTGTGTGTFU8WBSZdLhWB//yKlotyLZFiLf8tyyRUipFSKkVGRBZQMiWC3yx//wxUGKsSvDFQGHUAL3QMsHDFIYpCYy2Bmagy6BjLgy6Bh3od58DCLAizBgRb+EQiyEQiwGBFuDAi3/////20QqSBJf/qcumv/////wMZdGXAYMu1gYy6MuBEZdBgy4BjLgy6BjLgy6BjLgy6BjLQy6DBlz2cJDLgRGXAMZdGXAYMuhMZcCIy6sJGaoGMuppwNRl3WBjLgy63wiEWAwIt/+EQi0IhFsDCLAi0GBFkGBFgMJCqaqYAgAYIhBBvwf7kwcqRq7V3IctacvlN6NxqgooxRRuNRiijEZjMGRuMvz9FGozQ+1X2qe1T1S//+VhaWAtKwtML//PkZEIkbgcaAHc1xCJrjeAAtfuUAtLAWf///mWePH95ZFgsyssvM88+jzO6K+z7OM48sH+WDiweZx5YOK+zxWLGJWsa6xadAv02fTZLSpsFpvLSga0tMgWgUgWmwgUmyWl8tMgWWmLSoFJsoFlpSwsmyBg4HhEdgwHAYPBwGDgeBg8HwMHg4DB4PBgOAwcOwMHLwDn5lAwcDgiDgYDwMHA/4MB3//+EQeDAdwiDwYLPhEWQYLODBYERZBgt8Ii34GLBaB5pfAZ0FvEAQ/UfwxULlx+IXx+8f5CELH8fxKhAIDFoHBEDRc3////gwHgaRXgMHYMB2EU/gwZ/gYbw3gY3QbgYNgbgYiAbgwN3/+EQbBEG4MBuDAbAwG4RBtAwbg2////+B9B6F//////////hEdD//////////8DRahEQGCInMNg3LBElgNjDciCwG/lgNiwGxWG///mG4bf/+WA3Kw3KyIMNw2Kw3MNg3MNg3MNiIMiQ2OK0xMiA3KyJLAEZgRARmBEDEYFwBBgEgEeomowol5YAJKwCDAIAJ8sAE+gGBgCJYAQUZ/13LubMu5dyiYOAhKwEFGf9AOoz/g4CFAIol/lgAjysAgsAElYBP////lgJksBM//lgRUxF//PkZGApggsIAHt2wiNLoggAqCz8RFSwIqYioipkjEjHCCSN/+WJg5iYOYmPK5krmTmZk5mZ8sTJYmf8yJiNiIisi/ywRmRkZkZGZGRmRERkREZERGRERkREZERGxEf///hETIMEyBiZEyBiZEzwiJgDEwU4DV2gQGFOBgmP8GAiAwRAiBgIgYCIGAi/4MBHAwRgjAwRgjwMEQIgMcgY8DBGCMDBGCMDEyJn///+BiYQIBlObj4eYLIwsjAOBGFkYBoEQ84eULIw88LIA88PKHnw8sPKFkeHlANAiAaFUDAiMYPIHmDzBZBhZB///8GBOA1sH/Awni7AwnhPCITwYE/CKzBgt8Ig8GA4Ig6EQdww4Yb+F1sIgtwYCwGAsAwWAsBgLAYCwDBYCwDBaHUDF+VEDKgC2BgtBaDAWgYLQW////gYLAWQMFgLAMFoLcGAt////4RMABmBSj4NgwMOGHBsHhdcLrwbB4XXC6+F14YcLrww4Ng8MOGHBsHww4Ng8AUC4AoMQMC4fgw3wutV4QIsAgFYIBWCCVgHeVgHeWABCwAIVgH+YBwB5aRAstKgV6Ba1oMg9avtUVN/qdLWciD/cqD3Jg6DFPuTB/////lYAn//mC8C+YLwL5gvgvGC//PkZFEpLgMKYXt2xB5LogAArbdc+C8VgvlYL/mC8C+YLwL5YBfMNgNkwXixDWoHPMc4VUxVA2TBeDZPYXzXl815fK14sLxYXvK1//NeXzXl815fMtdDLSw3UsMtLCstMtLDLSwsFhWWlgt//8sFhW6f/////+WF7zXl8sL5ry+Vrxry+WF/wMLwX4MC+EQv/AwvBfAxsjYAyqpKA0lpLAwvBfBgXv///4RA2DANAYGgNgYGgNgYGwN+EQvf/BgXwYF//8DC+F4Dd6NgGBf4AgFwbB0MMF1wuuDYMBsGwusDYOBsHA2Dvg2DQuuDYOhdcMMF14YYDGYDEGwfhhgbB0MN///4RBaEQWgZByoYRWYMFvwiDsGwaF1gbB34GDwdC64XW/w1aKxDVgatir4YcLrQbBwNg7////////////+ESfgZPyff/////////4MFmBvvMAERZ8CC5adNj02E2S0qbCBSBZaYtN///oFlpU2QMXIFAYuQK9AtAo7IxLTpsIFJs/5aZRxQawaxGfIg9CsrI+PUqkWdOHp7ODsOl6cOHZ4dsulfLI9/8BAAgMBACsBLACVgBjoAWAE5OTM6WDAR0zodMdHCsJLASWAjzCQgsBJhASWAjysI8wkJMICU//PkZFkeqgcaYDd1th6DogAAqCuIxQwtDA5MdMULgyY6YqnXqdep5TpMdMVRNRL/UT9AN6jCiSjKAZRNRhAMomgFQDfCIJwYCQiCAiCMGAkGAgDBJUA3eVAMEgj////8SrDFIYqh5g8kPMHkDzB5OFkYeYPJ+HlDzB5+AYVQDibCyIPLLEZIsjIliWS0WywWyyWuWCyWJaLZbLJYDHgLAItFvy3///4eYPKBlQTh5QYEODBb//hhoNg7/C62DYPFUKwKsVgNWBq8VkVcVkVUVYrH//hGff/8Iz8GT7//////wiX4ML3gwvgwvf4ML3gZeqoHVGyBl4vgZfL2F1oNg4Lrg2DcLrg2DQw0Lrhh8Lr4YcMNBsGhdcGBcMOGGAFGAGMQsF1guuGG4XXV/4uQXOLmF1kL/8lCXkuSk4O8/FzHzuP0hIucf/CIFAMCgFPgYFAKAwCgGBQCgGHYO4GBVM4GgQI4RCMEQKQOtQjUI1CNcI14MqDKwDIAGQDzh5wsjDyw8uHmDzYeUPN+DEYRRhFEIowYgDQgIhWDApgwKAwKQYFAYFQMKkYDOxHAzsRgMKBUGBX/h5v+Hm4ecPNh5A8wBwjhZHhZAHlDzBZAFkAeQPKHnCyILIAsih5QsgDz//PkZLQgIgsMAFp1xCGLogAAA2rkB5w8oeYLIQ8kPMHkCyGHnAMKoGmAgFkUPMHmDYAtfHPHNkr/JYl8c8lCWHPHMkqSo5onMAkBDnfJX//8IgDBgBhEdAaxSQMHUGAEIgAV4risCcipBOMVRVBO////hEvAxsAwvf////8MPDDww4XWC64XXDDww4YcMPC6wYb/wYGgiGwMplMDYhTCIaCIaBga/////8GA+EQdgYPB4MB4GDwdhEH8Ig8Ig8GA6EQcEQf8DBxlBjoAweDuFwgCQXiL//iLiKCKCL4XCiKRFwEgoRT4iqpMQU1FMy4xMDCqqqqqqqr////xuDd8fv/DVwrArEIg6EQdhEHAYPBwMB+ERYBi0WAwWAZ0FoGLYOB+JfgZ0FoGdBaDBYbn+WHm9xW7/Nzzc83PLDzc8reWlA7S0oHamx//6BflpU2C0qbBaf/8yk/ysn+VkMhTKQrKVk8yE8rIVkKyYsAn/5WC+YICmCApWCGTkxtKMcVWlgFMEBTBAX////0C0C0C/////////LTFpvTZLTlpv/0Ci0xaYtOgWmymyWkAxcWmTZTYTY8tMmygUWmLTIFpsFpv9NnywLmLCx2RgWmQKTZ98UjnzZ1/++D4M6/////3//PkZOgjIg8IAFcbxCaTogAAoCuIzfJ8vfJ8Wcs5fBnD5//++L5f////////6nCKv//+o0o0FUYwqDNGCwgUMKC0VVGkVv//4Yf8LrxVCriqDVoasDVuKsNWw1bisBqwVkVkVX//gy/4YYMMGGhhgwwNg4LrhdcLrAYWGAA0zBsH4Ng3C6/////4MAoGBQIDAKBgUCAwCgYEAsDAoEAwKBAYBYMAoGBQIBgUCYGBQIBgUCwiBAYBYMAoRAgRAoGBBMBooCAYFAkIgTEUxFv/EWxFxFhFoi0LhQuFiLCL/EWqTEFNRTMuMTAwqqqq//////8TWJriV/hERAwRgYiEYGIhGBmIRgYiEYMEQMEcDMSiA1GYwMR+UDMTkA7KIgMRGIGGM0SIrRGjRlhEV4jxov8rR/5YRFhEdQSViCsR5iRJWIKxPlgQYgSViSsR5WJMQJLC78IiKERF4REeERGEREERHwMRGOBmIRhERhERAwRAYiEQGIhGBmIRAajkgG5TEEREDBHwYIwYI4REXCIV/4MCmDArgwKAYUO/gYVCkGBUGBTgYUCsGBUIhUDCoUCIVBgVBgVBgUhEKQMKhUDCoUBgVAwoFAYFcGBQDI6oA5+qQiFAMjBUGBXCyEPIFkOH//PkZPMj6gr6AFdVwifkBdwAoC2Ilh5/8PPh5Qsih5IeUA0TAZrE8PP////wMRiIIqID8piAxEIwMxCMDEQjCIj//BiIDRo8Iogii/4MKwYVhEoESkDEiIGJEgYlfBgmDBIMEAYgSBiBIREAwSERH/8I7wPfuCO4I7v/8GBvAw3Bv/////gwN34RBuBg2BuBg2BuBg2BuEQbhEG+EQbAwG4MBtwiDaDAbhEGwMBuDAbAwG4GDYG8DBsDcDBuNwDRWDcIg2AwbA34RBv///CINvCINgMRIN/////wiG4DDeG+TEFNRTMuMTAwqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq/zB4OLAP8rBxWDisHlYOKxb5WLTFgsMWiw18LDOnjPxZoxadDOgsLAtLAbKymVhsrDZWG/LAb8w2GywGysNlgNFgNGFwuBQuWnTZLToFFpisLJsFp0Cy0voFAQLFZkMCAQwIBCsC/5WBCwBCwBCwBCsCeVgUwIBCwBDEwEMCAQrAhgUClgCFgTlgCGJgJ5gQTGJwKWAKYFApgQTGBQL5kY0HMjQYnAhWJvKwIWAIVgQrApYAhWBPBgECIEBgE/8IgXhECQiBAMCkcDEwEwMCAQGAQIhoIhsGBsIhvgwN//PkZN4irgr2AAOVqiUThegAnCtMgwNwiG/8IhuDA1hENhENgYbKYHb2IBhoNhENAwN////8IhsDKZS////8IhuBhspgc0KQRDWEQ3///CNf4GAIMDAwgAwAAwhAwAwYAIgwiHBgAMAYGAAGHv///CIBqBqESDEIgRYGoGHBiDEIgGoGgMAYgxgwgxCIETwYFYMCoMCuDApBgU8DCoU//gY3G//wYFOBhUKBEKQYFfBgV8IhSEQoBkYK8IhT/wMKhXBgUCIU4RCoRCvgYVCsDCp3A1SqAYFAiFP////gY3G1TEFNRTMuMTAwVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVgwCAwCBEC///////8IgUIgWEQIBgUCAwTQMCAQDAoEhECAYFIwGaRMBotWAasdwH/KqBmhFgaKI4GRgKVpjCBTCBPMJHNMFMIFKwnlgJ5hUxhUwGWlpAMuMuWLTFpvQKQLQKLTIFJsoFIFFZb/8woQwoT///MIF8rC+WAphAphAppgpYClgsmwBC6bHoFFpUCi0wGXFguWCwFLgUsgX6BZaVNj0Ci03//+EQKEQKEQLCIFAxMBcDAgFAwIBQYBODAKBgUCAYEAuDAKBgUCAYFAgRAngwCgwCwiBIRAmE//PkZN4iogj2AFdVxiUrhewAhOkwQIBgQ0gbOI4GRhOBiYCgYEAv////CIFAyMBQYBf///CIF8IgUDAgFBgEAwIRwMCCcDEwFAwIBf///CIEQGMDGEXCKBpCIDCEQDCAsYInDFQMMAuYSoTQMVfBlf//+DKfBgAiGDAQMIMIgCIQYADAEGAgwP////8ItgNu2/8DAAAiABgHhECBgQGEQARA8GAeEQIMABECEQIMAwYBBgCDAARA4GAAgYACDAARAwiAgwDhED4RABEBCIGBgDoH2dgZwCBgAP//BhX/+DCiTEFNRTMuMTAwqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqF1ww////////hdeGGDDBhwjeF102E2fTYAowMLjE0zTDfyyMYjEDJTwMLSwFi0/gQLoFIFpsegWmyBQsWlQL9ApNgtIWn8tMgX6BaBX+WmQL9Nn02f9NktIgUgWmwWl9Avy06bCBSbJaUtImyWkQKLTIFgYWoFFpAKFwMLzZgwAwvLTIFlpU2fQLQK///4Yf4YaF1sLrg2DAuuDYNDDQw4NgwLrhh4XXC64Ng3C60MNwbB4XWC64YcMODYPCJYDlMQBlwRLg2DOF1v/////PkZM0eKgz0AE+UuCnLFfAAk3Fsg2DAYX/ww//4YaGGDDhdbDDACFwMuXA2DADlygusDYOBsGhhv//wNU/CKQusF1oXX+F1wuuGGC6wXWDDBdbC6wXXhHv//4AHIFgC0BZAA4Ba4FkADwFsC3AtQAOcC0BYAtgAcAA9+BYAsgW4FvgWOABwC1oq+it4RT0VVG0VFGkVywo1/RWU4U59TlFb1GvRX////QK9Nj/9AtNn02fTY9NhNlAr/QK//TYTZLSJsIFemx///oF/5aZNj02U2C0yBaBfoFAS6bKBfoFVTEFNRTMuMTAwVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVQiA8GAO/4RAf//////wYA4GAO+EQHAwB4GDoB4GA4HQRB0BhlDIBpEAcBgPDIBgPAeDAHIFAYuLTpspsJsFpi0haRApAtAstIYKClgF/ysF/ysE/ysF//LAJ6plTlYC1ZUypmqtWVK1VqyplSFgBaqqcwAAVIqcrEBAAKmMBERCQhwD5iICIQEyABMAABBVGXF4gIA4DLAAWAEQgLVSsBaq1ZUv+YKClgELAJ////5YBP//LAL5WC+Vgn+WAX/LT+gW//PkZMIhLgrsAFt1yiD7FiB6A9qwmwViybCbCbCBSBabCBSBabPpsegWmwWn9ApApApNgCGBmEwWlLSpsf////hEHgYOB3////4GDkiBxMHhEdgYOB4GDwcBg4HW23gooFYHd/+BnAz8O8Vv//FaBm4rBWh38es2zbAtD1m2PVBqBrBqBrAF7AF3/5el84MkuHTgyy+dL0dRnEajMIyOn8RsZ5HGG/kbIpHIkYUiD0y2WctlZaWSwrKx6FZbxnL54ul04eLhw9Ol84dl86cOHT3Ipb5Z8qKpVx6/j0EkLctVTEFNRTMuMTAwgWQLQAHgLf/////4Fn+EQESEcIgInCIRW9TkrCzH0YIjjWtI+YeCD0woLCBQwsKRWUaRVCBZFZRtRtFRTlTlThRtAr0C0C//02E2fTZQK/0Ck2f9TlFRTlTlFT/9TlFVFRFb/9ThThynIQbWkAREue5S11rKdlkDEVABh61ExYPU+tOD4MQgcn4iwigivxFRFoXDcRQLhoiwioXCeAkFBcNiL8RURQBIKEVEWiLBcKIqIpEXC4QReIoIpCIKAQMxFAFAsIuIr/4YYLr//ww4XWBgwC64XX/hhgw3hhwuv8MNhhguvhdcAUYgaYTAAoWDDg2DQbBg//PkZPYe6gzuADd1uDKsBhBAe89cYYdGjtDT2hDmlD2leaOv9oX0OX/0NNLplNf8ewakNWGrTfTRpphNJtfaeh7T1/tStdtTpqN532lpX/1/kmQ5eaf2hoaV9paGleJAvd0rer2pWu1ar2vk56vVrV5Hj1Nop+/lfv5Zpkem5kX/2vtata2rq783nbvtbW6VjW6a2rq13+rO6VysV58K7tbp0ru6Vrtqa1a67tr6sau1ulYrnfa2v927Vrt21NSuN5X927/D4diAQANh4gEIfxB+IQG/D/4gDw/iGIRD+HRATEFNRTMuMTAwqqqqqqqqqqqqqqqqqiIEK/ititFX///8VcVuK38VsVhXBOQTpq/qm8QCAcBmIxgdfFZCHECpxFBFAuFEUC4cLhsRTEVEUDVoDQD+KrFYirFX+KwKoVgVUVUVeKwGrhWRWBViqFYDV4rMViKyGroauBg/A0YThVgNAEVQqw1fisis4quKxxWYrAatxWIqoqg1dFYxVxWIrAavAaAArIrAqoqhWYrIqvxWMVYrARCADhcKoVYavDVgqhV4qorIrHFWKuKxFViscVUVYasAaAfFY/4YcMNhdfwuuGGC64YfDDA2DwusANygbBwAxhAECwNg8MOF1hD4//PkZOkc4g7yBjd1sDNkDhgqYwtcYoUyiQ0NCkxQ0NCQkSIbGKIyRGEo5mUaNEhGKEHMmaGhI0UokORvMmZmZSZSiMZQkRnKKZkzRoSNCQpQ0NEZoaNFJkhh3KOUJEhIcoSJCQkIzlDlEjMDMyMpQ0JCQzNCRGaNCRISEZoZihoaIwlEHKNGiMzFEjRmSIwlHMyZmcyiGyMxRyhIkIxRSZokSEYGBkiRojAPESNGjQxvKHMmMoSKTJCQkIwlFKLDYWGhoZhYWAAUGBsAwsMDYUAcK4XDPhQVwwLAH/DfgHC6TEFNRaqqBgjwYI//wYI/8GCL///+DBFhERgwRcIiPAzGYgMRKIDcskBgjAxEIwYI4GiRwNEjhFH4MRwYjA0aOEUf8Io/BiLgxGEUYRRQij/BiKDEYMR+DBGBiMRQiIgYIwiIwYIgiIgMRGIDUSjhEReEREBiIRAwR/wYI/8IiP4MEcGCIIiOERH8GCIIiMIiIIiODBHBgjBgjwiIoREcIiOEREDBFCKiAxHJcIiMGCMGCLwYI8IiPhERgwRAwRAYjEUIiIGCP/AxGIgiIsGCL//4REYMEXhERBERhExhExAzyAZiEWDBGERGeKsVsVRVFcVwTnFcVxVgnYqipFUV//PkZPkcfgzeAFaVxDgUBgAgatvIYrgnYqgnQJyK4riqK4rwTsVor4rQAjABAgnQritFSKoqQTsE5C1haxfF7F4XQtULSFqC1i4LwWkXIWkXRdF+LwqAnME4iqCdwToVuK+HAERWAkAlgJB0OB3Doc8OYc8VCsVgIB3DuHAERUAkAkHMOBwOAIisO4dwEAEAEg6AkAl4CeHA4AkKhXioBIOiv8OB3F+LgWkXxeF8XouxcF0XBeF8XBdF8XhdAdouC8AEsXYWsXOKsVBU/FaKmK/FTxXFbFUVPiv/8VfxXitVTEFNRTMuMTAwVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVAXX/8MN/wwwYf//DDBh4Yf/+DYODDfCIFAwKBQiaANFgUDAgFAwIBcADwFuBY/At8C1wLfgAdAtwLGBawLcC3AsgWeBYwLX4XW8LrBhgiFgMlhYLrhh4XWhdb8MOGGhdcMP4YaF1gw8LrwuvhhoYYLrYXWDDBdcGwfC60MN/ww8GwZ4XXC64GZQsF1wbBnDD4XXg2DcLrBdaDYPhhgusF1uGGC64YfhhoNg0LrQwwYcMNC62F1/g2DYXW4XXC6+GH8DTIW4YeB/wR/wjwR+DP/y06bJaRAtAtAtAs//PkZNwY2grqBFW1xDhTRegABLBstL6BRaVAstN5aYtN/psIFf5aQtIgWgUWk8tImyWkQL9Avy0qbKbKbJaf02f/0CkCy05adAsC3K7+mx5aVAv0C/TZ8tOmymwB2pspsFpPLSlpy0qbCBSBXlpk2E2E2C0paUtP6Bfpslp0CkCy0ibJaZAosWQLLTJsemwgUmz6BZaYtOgUWmLTpsJsoFJslpPLT+mwmz//6Bfpsf6BSBSbCBXoFeWk9NhNhAr0Cy0/+WnTZ8tJ/oFf6bP+myWn//8tMmz/lpf//////8sPTEFNRTMuMTAwVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVBgJwiCYMBP//gwE//////wiCAMEgkIggIqIDKpUCIIgwE8IzA4j+EYhGAZMIyDJA5gGRhGcIyDIhEQiIGAgwIRDwiAGAAwYMHBghGAZMGRCMhGYRgGRA5gIyDIwZPBk/wZIRmEY/gyOBxIMgIzCMgcTgwRBgjwYJBgngwTwYJhEQBiBGERMIrwOouAxAgGCQYIhERhEQDBGDBAREgwTCIgGCQYJgwSDBHwiI4MEAwSBiRHCIkGCYGJEQiI/Bgn4REYREeBiBIH6XhERhETwogoy04mpZibFmJuWYmx8n//PkZN4ZrgrkAFZUyDcjofgAA9qc0HafZ8HwNrjaG3xtjaDtJwTo+D55Ow7fxNRNSyLPlqJsAr/lmA/FmWYm5acTQVgTkVQTnBOQTgVxVBOBVFWK4J3FUE7gBABOwToVQTsVhUFcVRXBOhUBORWiuKkVYrCqK+KoqgnQrAnEV+K8E7FQE5xWBOQToVQTsVRW8V4qRUFYVgTsVhXioKgrCqKwqAnYqCtBOhUioK+CcisK8VRUFSKnirFQVBVFcE6FcVoJwKoqCrFXFUE7gnAqiuCcQTsE7xU8VP8VYrgnYrCuTEFNRTMuMTAwqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqn3/l/J/8vHL5f/BhwCETgGpIDOATgEIOFoDcHzgEIDgC+pG7eve1S/6tat7rXupDXSStWoIpGS4TSMQNIySMwpIyAaRkkZ8GJGdBtbwYkZ63tCKRkoIpGWDEjLCKRmEkjOvsEUjJOsIpGa6bOrgxIzsEkjIGJGYUkZVKCKRmqoDkgEjMJJGSYMSMAikZJ3qhp0dq9ru3X1I36FujPbXuxwKbr//waABfg0AC6DUDUDXBqBoAmQawJiGrhqDUGoN//PkZL8USgKcAAblrroTgfQAbhtQAag1QawaYNIAuQa12Lv9si7F2NnXa2Vsi7i/DZl2tlL9l+vL8tlUTUTUTUYQDIBlGUAyifqJKJqJ+p5Mf/U7TETEU7CxkxVO1PKdqeU8u4vq2ddnrsbM2Zs/tl9s67V2NlbIu5sgaA1Q14ExAmAaA0BrDVDXhpgTPDQGuBMA0gTKGgCYgTHDQGrDUGgNcNQaw1hoAmcNIaRIAtALVEgC1gteI8FpBaBIAtcRwkAWgFpBaILVBaIkAWgRwjhIiPEeDXwa/4NUGr+DRwaKBgX/8IhP//wiF8GBMGBP/wYEhEKEQmEQuDAoGFTAwLgwLhG/4MvCM8GSDJCNwZQOXg2DwbB8MPDDhhuGGBsHhh8Lrf4MCQYFCIUGJgiE8GBQMIFhELDDhdaGHhdYGwaGGDDhhuDYMBsHg2D8MMGHBsH8GwYDYMhEKEQgMCeDAsIhAiFBgQIhAYFhEKDAkGBMIhYGEC4GFCBELgYUKDAuEQsGBQMKEwiEBgUGBcIhQYFwYFAwgWDAoRC8GBAYE4RCgwKEQvhEJgYUIBhQkIhAiECIUGBIMC4RCgwJCIUGBAiFgaYLwiEA5cGXCNhGBGwZAw4Ng0MPBkqNqcoqorlh//PkZP8cygrkAFI0wjo7lfAAjhq4SnPor//psoFemygWmwWm/0C0Ci05adApNn/TZQLU5RU9FRFVFdTn1OFG1Gywv/UbUa9Ff0VoFgCwBbAtQLUCzAtgAchHAN8ImAbgBvwDd4RwjQDeAN8I0ImEQEQAbwRgiQjBHhHAN0A3vgG6Ab/CIhEgG5AN6EQESAbmEYI4RABvYRoRABuYRgDehEQiAiIRABvcA3QiQDfwjwDfCICPCJCJCJ4RwiYRwjBEwDehEYRgDfCNCOEQEQEcI+BagAd4FrAscCxAswLfwLAFgC1wLNVMQU1FMy4xMDBVVVVVVVVVBlBkwO3wZAZMIz//////+DJwO0IwI0DsA7cGUI34Rn4RgMuEZgywZQjAZP/hGAcmDKEYDIB28GQGQGXhGgcgRoMgRoHYBywZAZYMmBygyQYFCIUDChQYE4MCgaYJ/gwKEQsGBAiEBgXAwgQLrhdcGwcGHBsGA2Dgw4YYGwZC6/hdYMMF14YcLrYYcMPDDhdYGweF1oYb4MCwYEwYEgwJBgTCIQGBIRC/BgQDCBcIhAMKFhEKDAsGBQYFAwgTgwKDAoMCQiEgwIBhAnCIUGBQiFwiEBicIhAiFhEIgIoBooGieDPA+4GeDPCP//PkZOobXgrkAEY0jjazieQgBKKIBGgyBGhGhGgyAdoMmEaDIB2gyhGwZYMsI0GSDIEaDKB2QOWEaDKB2hGgygcoHYBygdkDtgygcngyAyhG4MgMgRgRmDJCNBkA7QjAZIRoRoMuByhGgyAyAyhGwZYHKByAcgMgRoHIEbCNCNA7fCNA7AZAO0GSEYEaDLA7cDthGgyAyAyQjAOwGUIyDKEYEaEYEYEaEbA5AZQZAZAZIMgRkGXBlBkCMgyAyQZYMngcmEb8GUGQIyDIBywZAZOEZhGBGwO2EbwjcI3hGYMqTEFNRTMuMTAwqqqqqqqqqqqqqqqqqqqqquDqz8GMDQIvBj///+DGDEGAMAifBj8IuEThFCIEQGPCLwiQYBFCKESDCETBhhGAZGEZ4MjgcSEY4GoRQigxCIEQGPCKBiBrgxwiBEwMIRAY4MQNMIkImDEGIRYMIRYRAYhFBjwYwNQYgwBgBh4GAMQiwYgxA0gahFBgBjgYBFhFhFCKEWBgEWEUGEIgMQYQMYRAMQigxhFBh4GkIgRIRYRAY4RIMQYgYhFA18IoMQYQihFhEgwhFCIDEGIRQieBiEUIoRQYhEwYDAFwGrBog0waAaQawacGsGiDQp9MZMVT3piJjJjK//PkZOYZBgjoaUJQ0DprofQgbhq0dep71PqeU69TpMdMVT6n1OlPKdJjpiKdFZkxlPKdJiJj+mKp/0xFPBoAmYaw0BpwJhDSBMQ1BqAmIEzDSGgNXDRDRhp+GsNMNAEyAmYagJkBMA1BpDXAmECZhoDXhqAmYawJjgTICZBrDSGsNAExDVDQGqGgNHDWBMIaQ0BrAmcCYgTHAmIEzDWGgNYaOBMw0BqDSBMYaA04aA1hqwJhw0ATKGqBM8NYEz4aQJkGoNMNIag1+GsCY+BMQJlDVw0cCYfDXw1ho4aQ0gTCTEFNRTMuMTAwqqoD37wjuhHf/////hGf////hHf/gycEZwRn4MnYMncIzsGTwOdOA507A507hGeEZ8GTuDJ4Rn4HPn4Mn4RnhGcDJwM3YM3gzdBm6DNwR3QjvA927Bm//Bm7Bm/Bm8GbgZvBm4GboR3gzeEd+DN8GbvBm6EZ+Bzp4Mn4HOnBGfA588IzsDnTgZPCM8Iz+EZ/CM4DnTgOdPBk8Iz4RJwGTidBi7AycTgiT4RJ8GE6ESdhEngZPJwGTieDCcESfwYToMJ3AycTwiTsDJ5OhEnwibwYb+ETdwibwibvCJuwYb/4RN/Btf/jYGyNv8bHLUtSzE0/LQBW//PkZPQcHgjQAFKVrjfDmgAge1eMLITcshNy1LX8si0LUTQtCyLQTUteWQmvLItSz4mgmnTJops0umEymDSPsnR9HwfB8k7Pvn0fAvwtcLXF/F+L4vQtQWuFoC0BaReF7AeBfwtcXBdF4XheFwXAtAui9C1haRdi6LwvirgnUE6FcVBVisKgrCvioK+KoqiqAhh3AQFXhwVYrFYCWHMOioVAI4dFWHPDgCAdDgdDmHcBIBEO+HRWAiKsBMO4dFQCAdATw6HBWHBWAgHBUHMOf/gICsOCoV4qw7+KxWHA6KhVTEFNRTMuMTAwVVVVVVVVVVVVVVVVVVVVC11Fz1+NP+/Xkqpr9OfuhQ6lZNWf+XsZc/si+KNoOj/Ntai9j7IISgZAklTqQhjToNTeQoreRdaSDODWvYAVFaWWkQmVuZPP8bRUzq896vc+XS6mm5gnnW7JLnV4z9N5XnW4k86x+uyHyxnWkmdborzraff2SvOtvljOtjd/5XRW8MivOsry/K3gUzrFPS1eFTOttTsul1+lLGdbV3c53h51mdbK7xPOr1SpnWlM63kedZnV4XPK86onnW7myrnWTmRTOqascoabXd/L+yuzS95dv1efjhl92ntYyTuIb6wuWRZFmWRa//PkZOcb/gqMACDf1LTLofggA9qc/gKRZiblqWYm3E24moSQnR9BJj6JwfBaFqWZZFoWvLUshNPxNuWn6bTZHgozRTSaNAY5oGjFQVgTkE6FUVorioK8VBXBO8VRUioAhxVioK4qAnIrYrCqKsVRVBORXBORVFcVcVwTgVBUBORUisK4rCoKwrxXFYE4FYVATjFcVhX4rcVBVFQV4rxVFSKwqCpFcV+K8VhXFYV4qivFUE4FaCdivBORUBOfBOgToE6FUVYqisKgqCtxWFbFQVxXisKgqRU4qioKuKwqCvxVBkH/4Mgf4Rg4RgfgxZBizhFYEVuDFvhFbBi3CKyEVsGLf/4MgAxaDFoGsWYMWgaxYBrFngxaDFnCKwIrAYswNas+DFgRWYGtWYMWBFZgxbgaxbgxZCKwGLIRWgxZCK2EVmDFmDFgMW4GtW8IrAYtBi3Bi0GLAYsCK0IrQit4MWeEVgRW+DFsI9cDW9AYtgxZhFaBrVgMWgxaDFvCKwIrIGtWhFaBrFuEVvBi3hFZA1i0IrYMWYMWAxaEVkGLAisCKzBizCK0DWrIRg+EYIRgQjABkHwODABkDhGDwODBgyAEYIRoRvww4YcKILYKILfhRg5htjY4OQbQ2hNAH8su//PkZP8cRgjWAFAUYjwDofQAi9pcJry1E1LUsuWvE2E0LQTcB+E2LMTctQFEEcWnFYVwTkAI4rRWFYE6BOhWwToBBAQgnIrisETANwIiAb/COEQEbgG+EcA38A3wjhGCMEeEaEeKoJwK4J2KoARBVBOIJ1FWKoJ0CcCuCdRWFcV4rioK4rAnYJ2K0V8VYr8E4xWFUVBVFQE6FXBORWFSKorxVFcVwToE5wTvBOoqwToVIJziuKwJxAQgnUVBUgnAqQCaCdxWirFaKwrRWFcE7FfFeK4rgnIrAnYrCoKoqgnAqCrip4qgnCr/////8Iu8BjvP4Ry5/8Izggc4Zw4RnD/hGcP8GThBk4eDJwgycIMnDwjOD4MnBA3eu9hF3kGO8gx3vBjvAN3jvMGO8CLvAY72DHeAbvXe+DHehF3kGO8gbvHeBF3oG713gG713vgx3oMd5BjvAi7wGO9A3eu8BjvMDd470Iu9wN3jvQY7wGO9wN3jvIRd4Bu9d6Bu9d6DHeAbvHewi7yEXecGO9BjvQN3rvIG7zykGO9A3eO9CLvYMd6EXegx3gG7x3kDd470Dd472DHewY7yDHeAKomwmhZFkAof8tCy4m5aCbcTUswFYsy0/LQTX9NBqBgJgYaY//PkZPcaTdCuAFgWlkI0DfQAe9r8Jxz6CShr8++JsArgjxNBNC0LQsyyLMsgRxallyyLIsi0LUTUtS0AVwFPia8si0LMTXiacsxNizLMTYTcsi1LMsy0E2LUsuJqJvxNyy/E1LMteWgm4mpZlkJuWRZFmWnLQTfgncVATkVcVQTsVIqQToVxWFeK4rwTmATCsCcAnQJyKoriqKwrxWiqKoqwToVRWBORWBOBVFSKgq4qAnAqAnArRVgnIJ3FYVQAgCriqK4qYqivBOsVoJwKgJ3FYVBWFfBOIqCoCcivipxUFSCd4qRV4rCvFaCc/BOhW8VxWFUVhX4r1eX/+DHgaYMOEX/CJgwwYQY8GODH/wYf4RAiQiAxCKBj4GAMYRQiwYcGEGMIoMfhECIBgEXAwCJhEA1BjhF+BhCIDEGARYGoRAYgxCLwYeESEUGMDEIoGAMAiAwBiBrCJ8GMGGEWEUGIRYMAYAxCKBiBgBqDDA1wiBEBiDAIsGIMANANMIoMAYhEBh4GMGMGARfAxBj8GAMANYRAYBFAwCIBhgYhEwNQMYGIRAMAiwNYRQi4RQYwYgahEBiBqBgESEUIqa6Z6bTBpGkmUwmkwaZpJlNCkifmkaaaBymgm0wmRPxSDTTa//PkZOYYTgboZUAQIkCEFgAAe898YTZpJtMJhNilphNdMJhMGgmemDSNJNmkaX6aNJN9MJhMc0E2mzSNJMpg0umU2mDS5oJlNJtNJnpg0DSTBoml0wmzTE8TRpGgm00mkzzRNNMJg0jQTSb/NFNdNGl02KTzRTfTPTSbTKZNLphNJpNmgmUymkwaaaTKZ/TSYTBoJr/ifptMpr9MJlNptMpg0kymumEwmf+mEwmOmkymTT5ppv80eaHTCYTHTSaNBNJtN80/0yaBoJo0k2aPTPNA0OaSaTJoplMJv9MgBAB4MBUGwbwVwUBkFAYDAU4NBoMBqhAELk//h/y1/vz6/6zMnEglwqnIsVSHBzAMMIqXiLgxS8ucoLCKl7VwipeupwYpeAxS8Z22hSl4U+qE1L2goKUva1GUJqXqwkpeAxS81IQpS8smBqXql6E1LyEVLxdEJqXoSUvAmpeJhFS8rpH3CKl6EVLxPWFKXgDUvVL1LCal4kuDFL2EVLxFlPClLyEVL2FKXhdwYpeswGpeqXkGKXqLAxS8wYpeqWk8KUvATUvQYpehJS9Bil6yoUpegipeZT2x1vN5NR2X3KrRuXjFmaS0AUCyE1BHflmWZacTYsvy05ZgAIs+WQCqJoWZ//PkZOwZ+gaYBgbm6EQMAfQAe9r8ZCbiaFkWv5ZibialoArlryyDtCSnyfR8hrE7PpNmiaIxDTGKafTJalqJoJoWQm4mnLUtSzE1LUsxNyy4mpZlqJpy14mgD8WpagKvLIEcJuWnLItBNhNhNxNgH8tSyLMTflmA/iaCaFqJqWf4mxZFmCdCvFWKwqivgnQJzFfwToAIwqgnOKgqCoK4J2KwqisKwJwKwqCqKgJwK4rYqirgnIJ2K8VhVwTmKorYrioK4JwKwrRWFQE5FUE6BOwTgV4qYqiuCdAnYqAnMVBVFUVATkVBVirioKoqCviuK8VwTjxWFfivFUVxXBOcVuKvFaKoqiuCdeEW3Bjb/gxvhFvCLYGN8GNwi3CLf8DbtuEW//CM7+DG+EW+DG8DbNgi3CLfA2zYItwY3gbZuDG8GT/Bk+DJ+DJ/hGdCM+EZwMnQZP8GT8GToRngc6dBk4IzwZOBk8GTvhGdBk+DG8Dbt8DbtgY2CLbBjYGNwi2A2zYDbN4RbhFtA2zcDbNwNu3CLaEW4RbeEW2DG8DbNwY3BjYDbNgY3A2zYItwi3CLbgbdvA27YGN/CLaDG4RbgxsDG4Rb8ItsI7oR3cGb00m0wmTT6aTZoJgUpMc0kwaa//PkZNcYqeLUAAAUHjw8DgQAe88cYTXTXNBpXiQdfLVpLJoaCSJs0TQNAbRpJpDWleaGlDmlfQ9fQ7tBZoa0IeOw3Ccq44TcHgrufDVzQNA0Om0wmDTNE0EymkymumU2mU0aSY6ZE8NFMmiaaYNDptMGn+aJpdNptNps0OmU0J50wNtMGmmEz/zQTJpppNplMJlM9M8FAYCoKAAApgqDIMACwAQbBsAMGQAQaCkGg0GgyCkGeCgNABwAAUgrwA+CoAQNAeHCAOAeAyIQHBwgDg4QYDAGgMEEOEAeA0Q4DxAHh0PEMGYMBsFQYDPgoDMGQV4NBqryAZfhGfwjMDl4Rv/wjcGT/4R/CPBH//hH4H3gzv4M7A+/gzoR4GdBnAf+DPBnwj4M7BnwivA1QIpCKcIpgaqDFgaqBogMWBqgGqgxQinA0XBi8IqEUCKBFcD7/CPwj0I+DPA/8GfBnQZ8I+EeCPwZ4R6EfhGcI0GSDIDJCNCMBkgdsIwGQDkBk4HIEZgy4RoHZwZQjcDtCMgcoRgRoRgHKDJBl4RgHIDKDIEYEaEZgyYMoRsIwGQGQIwGUGUI3A5AZMI2EaDLBlwjQZQjAjAZQoqIqqN+pypx/qNIqoqqNKNKcqchwGrCAPqN//PkZOsaCgjiBUZRnkhEBfAgw9tw+iu1RUqp2qNUNalOVG1GkV/U58sLU48sLLCiwFU4hAYA+qQQgasVhVIYQNWKwmAKpvasNoHIDm4OQHIDlGwNgbH4D+JuWQm4mhZFoJsWgm4I4TcbA2xtA5ODnGyNoHJ+NgHKDl/LMBXLUtS04mvLQteAqCaCbFoWQmha8bQ2Acg2ht8bI2RsjaGyNrjYGwNvjbByja/GxFYE4ipBOIrwTiK4J2KuK8BAK4rAnAJwKkE4FYE7FUVgEIqgIRVBO4qRXFQVBVBOMVwCcE5itBOoqAnQqCpBOIrxVBOoJ0KwJxgnQrCuKsVBXioCcCqCdAnYJyKsVYqipBOgjwiAj/8InhH4RMIkIioAC4RiJCMRP////CNk//Blkv4M6F8I9C/8GWT/8I2SwjZOEbJQZZIGWShGyYMsnwj0P///CPQ/hGyQRsn8I2SCNkgOyVkoMsnhGyQMslCNkoMsl4MsnhGyXCNk4MsmEbJ/wZZP8I2SA7JWTgyyQMiKDIieEYiAcRIihGIkIxFwZEUIxEA4iREgcRYihGIoHESIkDiJEUIxFwjEQIxEwZEWDIihGIoRiKEYiHcYJRIr9kzDmO5cIaApXE/NA0TTTKZGym/0//PkZMQWjdCsAwAWCsQ8Cfwoe89cyaXTKZACgKxsmybQFQCyPQPUbRtA9x6QAoegHKmRtClpk0RSkwaCYE/GyaaZ6ZFJTaaTCbTabTBomgmk2mxS0x0waSaTI2gcgOcT0T5MiedM9M9NCfCeGgNhMJlNJoT1MdNJhMjaNPptNGkmhtpnmgmv+KQmRSE0aaY6ZTKZTRoJg0U0aBopg0emU1/xPzTTaa5o80DRTZoJs0TRNEUhMikJs0P0x0wmkwmUymkwaKb5pppNJg0OaInhpGgmeaSbTBp9N/ptNJo0DTNAbOCkGAwGABgA4NgwAAAMAPBgAQKAyDAZgoCkFINAABWAEDAUBTAABgMBTgqACDcGAAQYDAUqLUlVt///+Bj4MIRcGH/hE//hEwY/wi8GPBj8GH8IgRcIv4RYMQi+DAIsIsIn8GHCLCJCJ/BhBgBpgwwifhFhEhF/gwCIDAGIMIMAMQYBFhFBgDH4GAMQiQNAYAwwYBECIAMIAMAAiHBgAMIAiAIg4MABgABhADAhEAGAARCBhCEQhEIMABh6EQAwIMABgCEQwMAQYD4MDCIcGACIQiHwYGDAhEOEQ4MAENB8hJD7PsnXJ0fZ98+D6LItQR3PgnZHmgPYYRopk0xj//PkZMkU/gLsKkITrkL0CfzIetvgJtNdNGkmkwCPLITf8s+WpaFmApAjgFUsyz49jSTCaGMmkyaRZlkJsWpaiagKBZlmWomh8c+CdcnROj4Pk+Akh9E6DsJ0fJ8c+OTs+idk4J2Tg+j7Pr8nB9nwfAa59k7598+D74Sk+eEkFQdDmKsOhwBEVYCeAiAmAiHcBEV4CYCIWmCHF6FqC0haRcF4XYvxfF2LwvC+FqC0xcC0C/FwLSFoF0XBfi7C0xei8LwvcLQLoWoXheC0BaIWoXBdiNiMY6cZ8RkZxnjqOojAz4zx0HUdBGozjoMw6iMjpxdi+L4uC5F/xd/haIui/bZ/+DGBp4RYMQYgw8Ivgw/CJ4RfBh/hECKBgEUGODH8InhFwY4GoMcIgRIMcInCIBrBhCIESESBp+DEGARfhEA1gxBjBj4RAYQYgxgYwiYRcIgMAiAwBjCJgYAawYYRQMQMAYhFgagYhEA0AxA1A1CJBhBgEXwMQNAihFhFAxwYAwgaYMPCJA1hEBiBrwYQiwYwiBFwYhFgxgawihFCLA0gYAwCKESBoBpCJ4MIRcGOEVB9ALR8BJj7/PonB9HyEoJwfZ9E4Dt5OeTnlqJtxNAH7nwfHPonJ8E759E6PoJI//PkZOAWKgjoZUAQYka0Ffgge9VcfZOCdE7J0To+Cc8JWTo+D7J0EqPoO0+T5PsJSfJ9n0TkJUfJOeTknPPo+z6J2Ts+ycE759/k7Pg+z5J2TonBOeTkJUTg+T5DtJ0Tvk5Pjk5DXPg+idH2HYfR9E6PgnR9k5JyfZ9cnR9cNYJSfROidE6Ps+Cdn0fB8E6DtPs+CdHwfH5OAlR8nyfB98+SdE4J0ff5OidH2TknfPkJMfYSg+Cd8+D6PsnP/JwTk++fYSQO0+D5J0fZ8HwTjn2AWDgdAL8ApALQCkO8GACwMgyAVBiAVhzwY4BeDIMgFMOh0ArDgc4BeAV4cgFsOhz/wP225HGw7wCsO4M8AqHP/+DEGQ7/8OgzgFoM4Bf4MhwO4BT4cDmHcGfDnw78GcVhUFTFXFeKoqYJ3isKuKkVgTsVoqCsKwrCoKsVQTqKorYWoXhfxeF/xdi58XOL4WmLnFYVQToE4FXiuK0VwTnFQVRVFcVhU4JzFfDgdhzBnDuHfALgyDAMQZBgGQCgBUAoDAMh3BkAsDMGcGAYgxBn+HAC0ArwCwMAS5adAry0yBSBfoFBVaKqKwVUVrRXUa9FUOEqVUjV3ySPLkvkzlNlNn02E2S06pvVKWACECpW//PkZN8VDgj+zymq5krb1ewAxJvkqe1XysDVFSqlVIo2o0ispyFVoqKNIrKcqNKcKcFhSjaKiKyKhYWiv6nCnCKijajSnPorKNKcKcqcIrqNoqKNqcKNoqKNKNqNKcIqKN//orf6BSbKbKBSBXlp0CvQKTYTZ/0C/LTxFxFoigioigCLC4cRYRWItEXC4cRcI0IoFwwXCiKwjQXC8LhRFcRcRQRSFwoikRcLhxFRFguHiKRF8E7FYVhVBOgCYVRUACKKgqgE0E6ACJFYVoJ0CcgnQrAnMVwTgE6ioKoRwDdhHhG4RARgDcCMEaEYIiAbwRIRuESEcIwRwiYRwjQjBEgWoFuBa4FngWkIQQigwhEwigx/CL/4RfCKEQGP/wYiEUwYHwYGDAwYAGA4RCEQBEGB0rCNcGU4RrBlcIsGGDCESBiEWDCBhCIEWBiDAGHCKEUGEGEGMIgMAiwigxCIDADQGIRfCIEQDXgYYRfBgBoESEXwY/CJCKEQIsGIRODEGIRQYgw8IgRYMMGAGGDEDGDAIoMcDQIkGMGGBrgwCKDAIsIkDUDWDGDDA1hE4RQMQYgwBhhFBhBh4MAMYRMIoRAiAxBjhF4mhZFpxNBNy0LQTUTXhKglR9FqWpaAP5Zi//PkZNYXkgTkGEJwlkXcDfQAe9r8bCa/k5JwTriacsizBHE6CSH1w7efHLPgjuJqWnLITYTX8tRNAH/ialqJuJuWZaFkCO4m5aE7J2TonB8E559nyEnJyfB8FmJrxNxNhNS1E3LT8sxNC0E0LTlqJuWQm3E15ZiaFqWRZiaCagP5aCblkKoqCsCdioKoqwToE6FcVwAhRWBOIrCpFbgnEVRVFUVIJ2K4rAnIqioKgrcV4riuK0E4FcVQTsVxUBOoJ3FUE7itFYE7FYVRXFUVwTkVoqAnYJxBO4rReF4XYWsLWLoui4LwuC9AdsLQL0LQA9C8Lgvi6LguBahfFwXAtIvQQ4vCqKwrxX/8E5xXit4JwKzBnwj+DF+F1guvBiQYkDRIR8I/gz8Gd4R/wYsGLBi8I8DPBneDPBnwZ/8I8DP8I8B/0Gd+DPA+8I/+Ef+DOgzvwj4R/hHoM+Ee4M4D74M+Ef/A/7gfcDPBn4R7BnfCPgz4M7Bngf8DPwjwR6B/3CPwj0Gfgz+EfBnhH8GfwioRQGIBqgRUDVAYoGiBFcIoBqoMWEUA1UDRYRUIqEUA1WBooGiAaqBogRUGJwigM8I/gz+DOCPwj/Bnwj3BnBHgZ4M4I+DOhHhNCz5aiaCb//PkZM0YugrgAAASBEUEBfQAe9rclmWompZ8shNyzLMsy1LMBUAfhNxNicBJCcE5J0JpyyLMTcBVLXloCO5aCagKACiAqflqWYmvE3E3BHlmArFnxNRNC1LUBS5aFoWhZFmWR8k5CTnxz4PonZ8E5Pg+j4LUshNQH4TYtSzLMshNBNhNSyAViyE0FQE4FYVoJ0CcRUgnYqisKoJxFWAhiuKgrCtFUE7FQE5iqKgqRVFWKorwTsVxVFYE7FTFTBOxVgnAqRXBOPisK4BOK0VoriuK0E5BOxUivFcE5FYE5FQVBXFQE6FQVBVFYVxWioCcCoLovi4LoWiL0LSL+LouBaIvBahdi6LoWgEMFoC1hacXxdC14uipiqKn8VPFbiqKsVb//Bm/+EXgx4RdhFb///hE1/8GLP//CKwIrQjoGa/wPewZqEdYM1wZqDNAetgzWEd8GagzYM2DN4M1wjoI7Bm+DNhHcD3rA9awZuEdwZvCOwjsGaA964M1A978I7hHQR0DNge98I6hHYR1wZrBmwPWgPWwZsI7wjqB63COvgzQR3BmwZsGaget8D3rCOgZoGa4R1gzYM0EdwZsI6CO+DN4R1wZsD3oGaBmwjqEdAzXCO/4R0DNAzYR0WgI8TQT//PkZL4XFgTcAE6Tekf8EfQAe9t8YTXiagKwCsJuWXLMTUtC1LMTT8TYTUJP+fAdomomoD8JuWoCgWoI7iaFkJqJqfZ8hrk4CSE5Pk+Cdk5PgnBOT7JwTg+uWZaiaCbcsgFAsy0LPlmJsWYmom5ZFmWpaibiaAjy15ZFkWQm5Zll+JsJqJvy1E0CThJz65OQlJ8H2TknZOT759k6J3z4PgTQTcsy0LITflmWfLUsiyLITYTcTT8syzLQsi0LMEcWZa8tSyE1LTibibFqWYI/8shNCyE1LQsy1LUTUBTLLloWXLUsiyLUtBN+JqJvy1E05Z8TcsxNeWn/LTnxydHwfZ9n1ydk4PsnHJyfR9E4JwTgnB8k4588nB9cnR8c+D7PjxV4q4r8VsVgTgE4/itFShX/xV4rirxVFWKoq4qfxX8E6xVxUBOYrCtwTvwTj/xV8E5/irBOsVuKwqRXFTFQVorCrFf/xWioKwrCtioCcxUFUVAToE4FUVxWFQVhUBO4rgnUVIJyKkVgToE4ipFUVoq4qisKsE64qCoCdxUFUVxXFUE78VxWFQV4qiuKgqiuK4CCK2KoqirBOATsE4FWK4qxVFUVhVFYE4gnIriuCcQTiK4rCoCdCtirBORUiqK2//PkZLAWsgzuADQNNkZj/fjIe9r8K/FXFUVwSE5aiaAKgmhaFpxNQkp8n3z5PsJOGsffLQsyyE1LItS1E1Af+CPLMTUTfibFmJoWQmxanzydHwTsnASknBaCalqWom5ZcsxNyc8nASsnHDt59BrhJgkpOicBKg7D7JyfZ8E5Pk+Cd8EeWXE0LQsiyLQtSyLIsi0LUTYsy0E3LITQshNiyLUsiy4I78shNy0LMVcE6ipgnArRVgncE4wTsVIrCqCcCtBOYrwTgE7iuKwqCoKwrcE7BOQTqKgqiqFpBEC1gPYD3F0X4WoLTF0Xxei6FqC0BaAtQWgXxdwtWFqC0haBW/FQVRUBOBUFcE6ioCcAnEVRX4rYrxWFUVBViuLsXgtAuC6FoBDBaYvi7F8XxexdF8XhcFyI//gx//CJBhgxhEwY/+EXwYgx8ImDH8GPhE8GPhEwigwhFwNQNQNfhE+DGDAGHCIBrhEhEBh4RQMAY/gYBFBhhEAxCIDCEUDEDHBiEUIoRQY+DCBp4McGEIgGgMcGIGMGIGIGgRQYgxCKBiBjBgDGESDADWBgEUDEIuDADWBpBiEUDEDDgYgwBgDEDQDUGIGgRAYQYAxCKBhCKEThEBgBiEUGIRQMQiQiwNAY//PkZKwWNgjoZUAQREakFfQAe9t8YMfwi4GBaFoJsWpaFlyyBHctCzE25ZiaFoAocsy1E24Sk+idk6LMTYTYTQsyyLUtCyLQTUswFYJMGuTg+CdHwErPotAFAsuJtxNCz4m4mvBHiafloWZZ8YppBqzTNI0jTNBMpg0jTTZZFqWfE3Af/xNf+WomhZ8suWZZCb8tC1LQtS14m/LQtBNhNOfR8hKCc8nHJ2EqCUE5CSHxydk6Pg+D7Ps+Sdk6LUTQTcTcTctSz4mwmha8TXlmJvyy5ZiaFl+WpZFoWZa8TQshNCz4mhalmJsWfLQsuWRactBNRNC1E1LLlly0E2PgJWfR8h2H2fJOSdnx+fXPs+T5PgNbnzz6Po+T7JwTk+z4PonROglJ84qCvxXxUirFX4q4qeCd1f8InCI/4R/CP//4RMI/CMEYI4RAR8I8IjCJ4REI/gG8ESEfCOERCP4R/+EaERCPCNCNCI4BvQjYRMHINobIOfjZBzDZG3xtja42gcw2PwcvG2Nng5+NgbY2wcn42htDYGwNrjYGwNsbX42vxscbI2gc3Bzg5Qcg2uNvjaGwNgbI2+Dl4OUbI2Qc42RsjbBy//g5eAboR4RwjQDeCP+EcI8IwBuwjwjBEBEA//PkZKoZMgrqADXt9EV8FfQAe9scG+EThEBGCMESESEbhEQjwjwjwjBHCIwiQDcCNCI/hHE0/LQBSLITf/lqWoSvk7LT8BWLMtRNAk58E7Po+CyLQTcsyyLUsi0Afi1LUTUTUtBNS05aFkWpZHzwkoSgnB9HwfQSsTYsizLQtRNRNgFf/8NcJWEmAWCdn0To+T4CUHyGtxNiyLT/lmJqJqJqWgmpZFqJsWgmwmwmwmv5ZiaibiactBNv/yyLTiaFkWZagKgCmJqWQmgmom3E0LTibAKfE0LLiuKgrYqipBO4JzFUE5BORXBOhVioKwqRWBOYJyKkE6BOIrYqCqCcxVxVFUV8E4FSCdcVgAgCuKkLTBDC6CHi+LwuRfha4uC+FpF8XQtAWgB2wtAWoXBchaBfwtQWnFSCdxVxXFUVhUFYV4rgnOK3wTiKir//1eDCsf//7/+wOYd///ei/f6lmiqGXpyOlCSRm+yP3UtDhFIzqBhwCFHAGFHABYGcAnAAMOAAYcAAw4BYKOAIROANgicAQYcABE4AAzgE4B+1wmcAwYcAK+sDOADgFLCJwAlWBnABwABnABwDWraETgEDOADgDBiRkgoJpGaP+64RSMoRSMGBiRkkwMSMlq7AxIy4//PkZJUYEgieBFw3fkL8FgAied8AROAAicA8DOATgAGHAAROAFwM4BOAGBhwADDgAGHANQUcAgicAYROAfgw4AIkbPNNNpo0TSNBNJgUs0l7lomEwmRSOaRp80zQFK4nvTInnTEGgwGwAwYmOmkyaInppJpMJg0k1+KUaaaTCb42U0mBsGiaSaNNNpo0OaKZNE0jTTSY5oGmaZpJrphM9MGkmDQTCZBzpg0OKR+mBtdMJobfTSbTfG2KSaBpGgaZomiaBomn02mOmkwmjSNPpjmmaKZNA0zSNFNCeClJkT40DTTCY5oJk0kyaJpdMppMdMdN80TR6ZTXTfNJNmimumem+aKZTKaTaaTRops0kwaZppk0+aSa6ZTKYTfTfTPTHTKa5omgmEyaJo9NmkaRp/pnmmaf6aNNMplMplMdMpv8TxMJlNplNJn9MdM1OM6hWa/EjiRiRiO/xIcSP+GgCZQ1+GvDRDV//4aP///4I8EwTwTBLwS/4AHgnBHBHgiwR4JgAgS4IwAYPA8ADg+AAAAFwfB4L4WADC2AGAGFwsFwuD2FgAcAPC+F/B8L4X/B7B4L4WwuD+AGDwXACAAC2D2AEFgfCwAAAAXB8LhcLeDwXCwPYPA+ACACD+AH4XwA//PkZJMVIgb2ejVLxkBMEgTIe898vwv4X/ACB/C4WwtgBg/gA4PA9gBeFhLRTXTRomkmP0yJ6J+mPy0NA0OvibNDQmfzTNNMjaFKNATxMiemiaRoGkmE2mkwmTRTHNBMGiaCZTSZTZomh0PaV9fX2hoX14kzSmOaCY5pJr80U0aPTfNFMps0jSNJMmiaSaTKb6aTKYNLphMpg0eaJoGkJ8aBoppMppMJg00xzTTabNFNJpNJpNpnpg0DT6bTRoppoJMWrSh/690NQ5paV5D2le/LND2hoQxDF/rzR1/r/aWhfaWleQxfXmheaevNDS0tLQ0ryGoch/X15D+vLy+0oc0ry/19DUOXuvIc0oav9oXkNX1/r3X18QCGHQGQHB8PiAPAaHgPDsBgcH+Hqv//+DJ0GNuEW4MbQY2wZO4Rn///4R34R3Qjv//8Gbv//8GbgZuwZvCO4GbsD37+Ed3A586DJ4Rn8DnToRn8GTsGT8GToRn4HOngyf4HOnBGeDJ0IzgjOCM8DnTwjOgydwOdP4RnYMncDbtwY2A27cItgNs3CLeDGwMbwY3CLaEWwRbQi3A27eDG0GN4G2bBFvA2zcItgY3A27YGN4G2bAxtA58/gc6eDJwHOnAyfCM7A588//PkZLMYngTSAFAUhEYcDfggw9V8DnzwOdOBk8IzuEZ4MnAyfgychsy7F3oE13Nl9sy7myrsL6qqOU5anCqkHqNDI3KVUTEU8GNU7U6gxyHKchyVV/Xa2Zspfds3rubK2VsjZmztk9djZi/TZV2NnXYu0vsm0yaBoDZNEbA2k0aKZNjmwbH/Nvm2bRtGyBVArD1G0bQPUevg9h6/+PRzZNkCrzZNgesegesermyPQPXzbHpNvm0PQPUPSbJs82TaHqAtj082h6DaNn8eo2DbHrHpNjj1m1zYHqNo2jYNnmwbPNgek2ja5sj0D1m0bJs80xtJlMdMCeps0U0meaaa6b5p/mmmU3zRTfNFN/pgHPzQNPmkaaaTXTKbTRoJk0zS6b/NBNdNJlNGj02aH6Z4IgAEEYJ4I+CMEQJcEUEXBOpHDX/w1Q0Q1Q1cNWGvw0Q0/hp/AmIaA0cCYhow0w1/w0hoDRhpw1w1BrgTLDXw1BrhrDQGgNQEzAmOGuGiGgNfgTHDQGoCZw1w0BrDWBMIEzDVDTDUGgNfAFwGjBrg1A1YNcGsAXAaQaABcBqg1g1QagaINYaoEyw1Bow1YaA1hoDSBMw1gTICYQJkGrDQGoNGGmGsNcNQawJkGuBM4aIa//PkZKAYngTsATQNQkKMFgDifh7AYagJkGsCZ+GkNWGiGsNAaYaOGgCYgTENQaw0Yaw1Q1Q0/hqw1BkAfmkaCb6ZTCY6bNBNLwmqGA5fzSTCb/lgwXOmMmMmTQ5pmkmUwmkymfzRTaZFJ6aNM002NrppMpg0kwKQmE2m0yKUaKaE95o9MJj9N9NJk0UymOaSaE/TabNNNmmmk2mU2aHTKZTCaNDjaTJoGimkyNvpk0TRTHTf6bTRopg001+mU0aXNBMjYNA0k2mjR5pfps0U100mUz0ym02mDRTHTaaTRpplMc0kz0ySA000mDSTKbNI002mzQTHTaYTf//NA0zQTBodNJk0UyKSaaZNJMprmkaP5oGmKUmEymUyaCbTHNBMJlN80DRNBMmkm/00mUwaZpprplNpvmiaJo80+aSa//TaY/6ZaH//wY4ReEX4RIMfwiAxBh/BhCJ/+ESDDwYcIn+EQIoMAiQYAw8IsGIGGETBj4MP4MQiAxhEAwAxAxBjBiEUIgMIMcDCDAGIMcGMDEGGBgEUDTwNfAx4MAiwiQYgwBgEUIgMIRAiQYhFwYAwBhA1CKDEIoGoGgMQi4MeDADGEQIkIgGMDCDAIoMAiQiAYwYYMQNQigwCJBiDEGAR//PkZJwV+gzoZUAQRkZsCfQAe9tcQYgx8GEGIMQiwMAY4MANAMcIoMSyE1E1/LMTUtCz5OD5PkJJz5Pk+uA/FqWRaib8TUTUTQtC05alqWYm4momgI8TYsxNCzE3LUtQFEsgFM+z6J0fB8nz+TsNcnB9BK+Tk+g7CdhJT6LTiaFqWYI7lqWoCvy05ZlnxNy0/LUshNBNvwR4moCj+Wv5ZlkJqWpalkCOE1E1LQsiyLITUBULLlqWZZlmJsWhZcsi1/4CiWpalkJqJuWvLXlkJsJpyy4mwm5ZlmJuWXLUTQteWgmgmwCsJoWfE3LMsiyLP8TTlkJuAolqJryzE1LTibCbloJuWhZFoWYmxZ8TcXIvxeC0i+FrF0B2i4L8LSL4uBaIDyCHF8XRfF6FqgiwtIuYWoXIrYqAncVvxVip8VIqCvUxPqtFbFf/4q/8V/8V/iririr8VATjxXipxWgnYq+KwqfFTFQVoq+KsVBW8VhUisKuK0VRXivFYE4FTBOhVFcVRV4riuCdCuCdCtwTiCcCqCcgnYqxWFcVIJwKsVxWisK8VxVgnArYqRWFeK0V4qgnQrgnYrfBOoqAnAq4J0CciqKviuK3BOoJyKsE4FUVoqisK2KwrAnArgBAFSK4//PkZJ0VagjyJgGtbkOkFfwAbh4AqRViuK4J0KgrCrFUVxVjOEeDQgjlcT4T40xtjaNI0uaI2QciGNJIl4kJZtCGIaSckIm6GL3TQ2zRTY2UwmjSNE0fxS02aY2BsJs0/+mzSE8TQpHTKZTaaG0aQpApZp/mmm+aHTfTCZGwNgUk0E0aRp/ilJlNJgT5MmkJ9zQNA0TQTH6ZG2mk0mk0mk3zQTKY/G3zQTHTabTBpGgmU0aKaTJpJpNJtMphNjYTfNE0emkymE2mEyaCbNBNfmkaJpdNJnpg0k0mDTTCbTaZTBp80k2aCbTfNE00yaCb6bTZoplMmmaKZTKaTJpmiaHTXNJNdMDbTab6Y6Z6ZNNMJhMJhN9NJrmim02m0ymU300aPTSa6Y//5pJpNdN/9NppxWxU4Jx/xWxU/xU4qcV/ipiuKwqxWFbioK/8VIqivFTwTkVgTkVor4JxFXxX8VcVxUFQE4FaCcwTvBOIqwToVuKwqCtFUVYqxXxWFeK0E7FQVYrwTnwTsV4rCqCcfFaCcRVFQE5gnAr4JyK4r4Jz4J0Koqip4rCvisKoJ3xWBOME7iuKgriuKgrAnAqgnArxXiqCcgnYJzFQVQTmAEIVYrwToAIYrwTiKkVQTkE5//PkZK4XGgzsADQNAkIcCfwAe898FXFTFYVxXxUFQVkzzS5oilg5TTTY2kyaJpJtNGgJ8aKaTQ2k2aCaNI0eaSYNJM/tKHEiQxfJG09MmgaSYTRppg0TRNNMJlMptMCfppNprmiaA2jQNLmmaRppk0jRFLNP9NJhMGmaQpZpJhNCkGkmE0J+mxSk0m0x02mjRTKbTCZ42EwaQpJpptNprmgaRpmim00J4mzSNM0kymkyKWmE0muaKYGwNjmgafTPNE0U0mUwJ7+mem01+J8mhSk2mjRTSb6aTCbNBM9MpjpjppMpk0E2mE2mE2mjSTfTaZ6YNFMcT1MpnprptNmim0wmE100aSaTRo9MGjzTTHTaaTfTSaNLpoFMAAFYNBQGwAvwAYM4NgqqkjaAN3d3d3etERNK5CZ/3Ctf8AaiAc/u7vaIn/+8XPv//+GDKv8W1/+AC8K4Yw+94xe940jgceOBwOcRaxGwH4EuNIjBfxazB8HhkwVjIAII/vDkjG/wAcJPeF5e98hNgSYLWMFvhZ73pX06aoehpmh01hMJtM9K3TKY9E10x+memvlIpZM9MUTCbShbUrtM+n5ophNZuXK+0wmemumMCemkmvc0Uwm/lJJlLe5oJZI0SyW6R0mE//PkZLcXlgrzECFvrEmMEfgAfh7k2aORpbTYUo9SBNsekGYNVKgqg6hrUXK4Q42DOwPWbILEzBSumEgkWJPU8S72G5wUuGDwguEKa1Q0UykS3Bn7FJNgg5qoEgpsGabBtGabZt7NrKCNgLYes1idmabBtm2bZsBRm0PQbF9mwPSPUBbMwzB6QojYM42ePTzbMwzR6TaNs1eBVNv81yDUJ2QYhJtD0m0PVe+x6T2M8HsbFwsh6B6D7HpugT2uZhO6HqZhmE7ISZhhkFNcghtmybBnnsD1Ho49ZtG2bZs5PVBc2EEepCaEHNjj1EJHq5smabZtmwbNEEPR+bJse9z2PY2T1SN0rdNJq6yXI06COvNJj9MGmkkGmUj7pI0TToNGlEsNEnCW10ymi5FtNFKpvps0kz0uW3aaTF00mTSzdNJu0KFYz1KjaGAhyoQCFGM//zFARgIUZ/oZpdCttay6M5drW1joSj6Ekk1b7J7R7aoQNlPrWBKLTTzOsGT5yYxLrtHTy2iUxEkES0HIBVD066VjGj31odPkkSjJtbWs6OIjKmlXHR9K5MTv5pdZolE10kk2lly74TFx5KTXeTGLrS6ExiucvJSSDUdXZm3NLn1rtYBCUEoRj77WOhCPc+g5//PkZJ8XPgzoAABMTrz8BfQyY9ONGxJULutaa1TE5LHxWEo+XecmMa3p0kqBCR6qOFaFUGpNJIIjqVi0ylBqJIkiSJIkmJj605EkSRJPetWAyVacmodBUVhGfrAZPF0AUrgRLNiqDU4VHo8h6HRObJJNdqlRBMFT0qdNE0WZhmay2tCuOY6oieWieianCnVSbzjd7SGhrLi6eUSeLcZTWqdML5PM50uOGJms9VqtYU6hrgrm4V0frUzTvYsiegR2FOkqUxSKdVCpmRCSkIAUZ4VPhqEKgFDU2VhUiIhUaIg0RAkTBYEjYBUbBMuCJgLAkCUBUinABgBE3/9EQqFRM0s0qzktk9ZFqqFC6RULE11JVDkd8Y1vVFOx9oUIpZ8Vnq5klkxBTUUzLjEwMKqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq"))},[de]);const ie=h.useCallback(Y=>async G=>{if(T.current!==null&&T.current.readyState>1){const{lastScan:H,contentBefore:ue,lastScanHadContent:me}=Y;if(G-H<K)re.current=window.requestAnimationFrame(ie(Y));else{const ne=await fe.current.detect(T.current),Ae=ne.some(Q=>!ue.includes(Q.rawValue)),Fe=ne.length>0;let at=Y.lastOnScan;(Ae||se&&Fe&&G-at>=le)&&(de&&z.current&&z.current.paused&&z.current.play().catch(Q=>console.error("Error playing the sound",Q)),at=G,O(ne)),Fe&&q(ne),!Fe&&me&&q(ne);const J={lastScan:G,lastOnScan:at,lastScanHadContent:Fe,contentBefore:Ae?ne.map(Q=>Q.rawValue):ue};re.current=window.requestAnimationFrame(ie(J))}}},[T.current,O,q,K,se,le,de]);return{startScanning:h.useCallback(()=>{const Y=performance.now(),G={lastScan:Y,lastOnScan:Y,contentBefore:[],lastScanHadContent:!1};re.current=window.requestAnimationFrame(ie(G))},[ie]),stopScanning:h.useCallback(()=>{re.current!==null&&(window.cancelAnimationFrame(re.current),re.current=null)},[])}}({videoElementRef:x,onScan:s,onFound:N,formats:a,retryDelay:j.tracker===void 0?500:10,scanDelay:u,allowMultiple:d,sound:p});h.useEffect(()=>(w(!0),()=>{w(!1)}),[]),h.useEffect(()=>{v&&(k(),P())},[v,P,k]),h.useEffect(()=>{if(!DI(b,S)){const B=b;r!=null&&r.deviceId&&delete B.facingMode,_(B)}},[r,b,S]);const D=h.useMemo(()=>({constraints:S,shouldStream:v&&!n}),[S,v,n]),$=h.useCallback(async()=>{var q;const B=x.current;if(B==null)throw new Error("Video should be defined when component is mounted.");const T=g.current;if(T==null)throw new Error("Canvas should be defined when component is mounted.");const O=T.getContext("2d");if(O==null)throw new Error("Canvas should be defined when component is mounted.");if(D.shouldStream){await A.current.stopCamera(),C(!1);try{await A.current.startCamera(B,D),B?C(!0):await A.current.stopCamera()}catch(K){(q=R.current)==null||q.call(R,K),console.error("error",K)}}else T.width=B.videoWidth,T.height=B.videoHeight,O.drawImage(B,0,0,B.videoWidth,B.videoHeight),await A.current.stopCamera(),C(!1)},[D]);h.useEffect(()=>{(async()=>await $())()},[$]);const L=h.useMemo(()=>D.shouldStream&&y,[D.shouldStream,y]);return h.useEffect(()=>{if(L){if(g.current===void 0)throw new Error("shouldScan effect should only be triggered when component is mounted. Thus pause frame canvas is defined");if(zp(g.current),f.current===void 0)throw new Error("shouldScan effect should only be triggered when component is mounted. Thus tracking canvas is defined");if(zp(f.current),x.current==null)throw new Error("shouldScan effect should only be triggered when component is mounted. Thus video element is defined");P()}},[L,P]),e.jsxs("div",{style:{...aX,...o==null?void 0:o.container},className:c==null?void 0:c.container,children:[e.jsx("video",{ref:x,style:{...nX,...o==null?void 0:o.video,visibility:n?"hidden":"visible"},className:c==null?void 0:c.video,autoPlay:!0,muted:!0,playsInline:!0}),e.jsx("canvas",{ref:g,style:{display:n?"block":"none",position:"absolute",width:"100%",height:"100%"}}),e.jsx("canvas",{ref:f,style:{position:"absolute",width:"100%",height:"100%"}}),e.jsxs("div",{style:{position:"absolute",width:"100%",height:"100%"},children:[j.finder&&e.jsx(xX,{scanning:y,capabilities:E.capabilities,onOff:j.onOff,zoom:j.zoom&&E.settings.zoom?{value:E.settings.zoom,onChange:async B=>{const T={...S,advanced:[{zoom:B}]};await E.updateConstraints(T)}}:void 0,torch:j.torch?{status:E.settings.torch??!1,toggle:async B=>{const T={...S,advanced:[{torch:B}]};await E.updateConstraints(T)}}:void 0,startScanning:async()=>await $(),stopScanning:async()=>{await E.stopCamera(),zp(f.current),C(!1)}}),l]})]})}function fX({onScan:t,onClose:s,autoValidate:r=!0}){const[a,n]=h.useState(null),[i,l]=h.useState(!0),[o,c]=h.useState(null),[d,u]=h.useState(!1),[m,p]=h.useState("environment"),[x,g]=h.useState(null);h.useEffect(()=>{f()},[]);const f=async()=>{try{(await navigator.mediaDevices.getUserMedia({video:!0})).getTracks().forEach(C=>C.stop()),n(!0)}catch{n(!1),c("Camera access denied. Please enable camera permissions.")}},b=async y=>{if(!(!y||y===x||d))if(g(y),l(!1),r){u(!0);try{const C=await Rx.validateQR(y);t(C)}catch{t({valid:!1,error:"Failed to validate QR code"})}finally{u(!1)}}else t({valid:!0,data:{type:"payment",version:"1.0",userId:"",currency:"USD",reference:y}})},j=y=>{console.error("QR Scanner error:",y);const C=y instanceof Error?y.message:"Scanner error occurred";c(C)},v=()=>{p(y=>y==="environment"?"user":"environment")},w=()=>{g(null),l(!0),c(null)};return a===!1?e.jsxs("div",{className:"flex flex-col items-center justify-center p-8 bg-gray-100 rounded-xl",children:[e.jsx(mV,{className:"w-16 h-16 text-gray-400 mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-700 mb-2",children:"Camera Access Required"}),e.jsx("p",{className:"text-sm text-gray-500 text-center mb-4",children:"Please enable camera access in your browser settings to scan QR codes."}),e.jsx("button",{onClick:f,className:"px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700",children:"Try Again"})]}):a===null?e.jsxs("div",{className:"flex flex-col items-center justify-center p-8",children:[e.jsx(Ie,{className:"w-12 h-12 text-primary-600 animate-spin mb-4"}),e.jsx("p",{className:"text-gray-500",children:"Requesting camera access..."})]}):e.jsxs("div",{className:"relative",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:"Scan QR Code"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:v,className:"p-2 bg-gray-100 rounded-lg hover:bg-gray-200",title:"Switch camera",children:e.jsx(yV,{className:"w-5 h-5 text-gray-600"})}),s&&e.jsx("button",{onClick:s,className:"p-2 bg-gray-100 rounded-lg hover:bg-gray-200",children:e.jsx(lt,{className:"w-5 h-5 text-gray-600"})})]})]}),e.jsx("div",{className:"relative rounded-xl overflow-hidden bg-black",children:i?e.jsxs(e.Fragment,{children:[e.jsx(gX,{onScan:y=>{y&&y.length>0&&b(y[0].rawValue)},onError:j,constraints:{facingMode:m},styles:{container:{width:"100%",height:"300px"},video:{width:"100%",height:"100%",objectFit:"cover"}}}),e.jsxs("div",{className:"absolute inset-0 pointer-events-none",children:[e.jsx("div",{className:"absolute top-8 left-8 w-16 h-16 border-t-4 border-l-4 border-white rounded-tl-lg"}),e.jsx("div",{className:"absolute top-8 right-8 w-16 h-16 border-t-4 border-r-4 border-white rounded-tr-lg"}),e.jsx("div",{className:"absolute bottom-8 left-8 w-16 h-16 border-b-4 border-l-4 border-white rounded-bl-lg"}),e.jsx("div",{className:"absolute bottom-8 right-8 w-16 h-16 border-b-4 border-r-4 border-white rounded-br-lg"}),e.jsx("div",{className:"absolute left-8 right-8 top-1/2 h-0.5 bg-primary-500 animate-pulse"})]})]}):d?e.jsxs("div",{className:"flex flex-col items-center justify-center h-[300px] bg-gray-900",children:[e.jsx(Ie,{className:"w-12 h-12 text-white animate-spin mb-4"}),e.jsx("p",{className:"text-white",children:"Validating QR code..."})]}):e.jsxs("div",{className:"flex flex-col items-center justify-center h-[300px] bg-gray-900",children:[e.jsx(be,{className:"w-16 h-16 text-green-500 mb-4"}),e.jsx("p",{className:"text-white text-lg font-medium",children:"QR Code Scanned!"}),e.jsx("button",{onClick:w,className:"mt-4 px-4 py-2 bg-white text-gray-900 rounded-lg hover:bg-gray-100",children:"Scan Another"})]})}),o&&e.jsxs("div",{className:"mt-4 p-3 bg-red-50 border border-red-200 rounded-lg flex items-center gap-2 text-red-700",children:[e.jsx(ut,{className:"w-5 h-5 flex-shrink-0"}),e.jsx("p",{className:"text-sm",children:o})]}),e.jsx("div",{className:"mt-4 text-center",children:e.jsx("p",{className:"text-sm text-gray-500",children:"Point your camera at a payment QR code"})})]})}class yX{constructor(){xn(this,"TOKEN_VERSION","1");xn(this,"TOKEN_PREFIX","NFCPAY")}checkNFCCapabilities(){return typeof window>"u"?{available:!1,canRead:!1,canWrite:!1,reason:"Not in browser"}:"NDEFReader"in window?{available:!0,canRead:!0,canWrite:!0}:{available:!1,canRead:!1,canWrite:!1,reason:"Web NFC not supported. Available on Android Chrome 89+"}}generateNonce(){const s=new Uint8Array(16);return crypto.getRandomValues(s),Array.from(s,r=>r.toString(16).padStart(2,"0")).join("")}generateToken(){const s=Date.now().toString(36),r=crypto.getRandomValues(new Uint8Array(8)),a=Array.from(r,n=>n.toString(36)).join("");return`${this.TOKEN_PREFIX}_${s}_${a}`.toUpperCase()}generateSignature(s,r){const a=`${s}:${r}:${Date.now()}`;let n=0;for(let i=0;i<a.length;i++){const l=a.charCodeAt(i);n=(n<<5)-n+l,n=n&n}return Math.abs(n).toString(36).toUpperCase()}async generateReceiveToken(s,r,a,n=5){const i=this.generateToken(),l=this.generateNonce(),o=new Date(Date.now()+n*60*1e3).toISOString(),c=`${i}:${s}:${r}:${a||0}:${o}`,d=this.generateSignature(c,l),u={token:i,userId:s,walletId:r,amount:a,currency:"USD",expiresAt:o,nonce:l,signature:d};return await U.from("nfc_tokens").insert({token:i,user_id:s,wallet_id:r,amount:a,currency:"USD",nonce:l,signature:d,expires_at:o,status:"active"}),u}async generateSendToken(s,r,a,n=2){const i=this.generateToken(),l=this.generateNonce(),o=new Date(Date.now()+n*60*1e3).toISOString(),c=`SEND:${i}:${s}:${a}:${o}`,d=this.generateSignature(c,l),u={token:i,userId:s,walletId:r,amount:a,currency:"USD",expiresAt:o,nonce:l,signature:d};try{await U.from("nfc_tokens").insert({token:i,user_id:s,wallet_id:r,amount:a,currency:"USD",nonce:l,signature:d,expires_at:o,status:"active",type:"send"})}catch{}return u}async validateToken(s){const{data:r}=await U.from("nfc_tokens").select("*").eq("token",s).eq("status","active").single();if(!r)return{valid:!1,error:"Token not found or already used"};if(new Date(r.expires_at)<new Date)return{valid:!1,expired:!0,error:"Token has expired"};const a=`${s}:${r.user_id}:${r.wallet_id}:${r.amount||0}:${r.expires_at}`,n=this.generateSignature(a,r.nonce);if(r.signature!==n)return{valid:!1,error:"Invalid token signature"};const{data:i}=await U.from("users").select("id, first_name, last_name").eq("id",r.user_id).single();return{valid:!0,tokenData:{token:r.token,userId:r.user_id,walletId:r.wallet_id,amount:r.amount,currency:r.currency,expiresAt:r.expires_at,nonce:r.nonce,signature:r.signature},recipient:i?{id:i.id,name:`${i.first_name} ${i.last_name}`,walletId:r.wallet_id}:void 0}}async processPayment(s){const r=await this.validateToken(s.token);if(!r.valid)return{success:!1,error:r.error,errorCode:r.expired?"TOKEN_EXPIRED":"INVALID_TOKEN"};const a=r.tokenData;if(a.amount&&s.amount!==a.amount)return{success:!1,error:`Amount must be exactly $${a.amount}`,errorCode:"AMOUNT_MISMATCH"};const{data:n}=await U.from("wallets").select("id, balance").eq("id",s.senderWalletId).single();if(!n||n.balance<s.amount)return{success:!1,error:"Insufficient balance",errorCode:"INSUFFICIENT_BALANCE"};const i=`nfc_${Date.now()}_${Math.random().toString(36).substr(2,9)}`;try{await U.from("wallets").update({balance:n.balance-s.amount}).eq("id",s.senderWalletId);const{data:l}=await U.from("wallets").select("balance").eq("id",a.walletId).single();await U.from("wallets").update({balance:((l==null?void 0:l.balance)||0)+s.amount}).eq("id",a.walletId),await U.from("nfc_tokens").update({status:"used",used_at:new Date().toISOString(),transaction_id:i}).eq("token",s.token);try{await U.from("transactions").insert({external_id:i,wallet_id:s.senderWalletId,type:"TRANSFER",amount:-s.amount,currency:"USD",status:"COMPLETED",description:"NFC Payment",metadata:{nfc_token:s.token,recipient_wallet:a.walletId,method:"nfc"}})}catch{}return{success:!0,transactionId:i}}catch(l){return{success:!1,error:l.message||"Payment processing failed",errorCode:"PROCESSING_ERROR"}}}encodeForNFC(s){return btoa(JSON.stringify({v:this.TOKEN_VERSION,t:s.token,u:s.userId,w:s.walletId,a:s.amount,c:s.currency,e:s.expiresAt,n:s.nonce,s:s.signature}))}decodeFromNFC(s){try{const r=JSON.parse(atob(s));return{token:r.t,userId:r.u,walletId:r.w,amount:r.a,currency:r.c||"USD",expiresAt:r.e,nonce:r.n,signature:r.s}}catch{return null}}async startNFCReader(s,r){const a=this.checkNFCCapabilities();if(!a.available)return r(a.reason||"NFC not available"),null;try{const n=new NDEFReader;return await n.scan(),n.addEventListener("reading",({message:i})=>{for(const l of i.records)if(l.recordType==="text"){const c=new TextDecoder().decode(l.data),d=this.decodeFromNFC(c);d&&s(d)}}),n.addEventListener("error",()=>{r("NFC read error")}),{stop:()=>{}}}catch(n){return r(n.message||"Failed to start NFC reader"),null}}async writeToNFC(s){const r=this.checkNFCCapabilities();if(!r.canWrite)throw new Error(r.reason||"NFC write not available");try{const a=new NDEFReader,n=this.encodeForNFC(s);return await a.write({records:[{recordType:"text",data:n}]}),!0}catch(a){throw new Error(a.message||"Failed to write NFC tag")}}}const Em=new yX;function II({userId:t,walletId:s,amount:r,mode:a,maxAmount:n,onTokenGenerated:i,onPaymentReceived:l,onError:o}){const[c,d]=h.useState(null),[u,m]=h.useState(null),[p,x]=h.useState(!1),[g,f]=h.useState(!1),[b,j]=h.useState("idle"),[v,w]=h.useState(""),[y,C]=h.useState(null);h.useEffect(()=>{const R=Em.checkNFCCapabilities();d(R)},[]);const S=async()=>{x(!0),j("idle"),w("");try{let R;a==="receive"?R=await Em.generateReceiveToken(t,s,r):R=await Em.generateSendToken(t,s,n||100),m(R),j("ready"),i==null||i(R);const I=new Date(R.expiresAt).getTime();C(Math.max(0,Math.floor((I-Date.now())/1e3)))}catch(R){j("error"),w(R.message||"Failed to generate NFC token"),o==null||o(R.message)}finally{x(!1)}};h.useEffect(()=>{if(y===null||y<=0)return;const R=setInterval(()=>{C(I=>I===null||I<=1?(clearInterval(R),j("idle"),w("Token expired. Generate a new one."),0):I-1)},1e3);return()=>clearInterval(R)},[y]);const _=async()=>{if(!(c!=null&&c.canRead)){j("error"),w("NFC reading not available on this device");return}f(!0),j("scanning"),w("Hold your device near another NFC device..."),await Em.startNFCReader(async I=>{if(f(!1),j("success"),w("Payment received!"),a==="send"&&u){const N=await Em.processPayment({token:I.token,senderId:t,senderWalletId:s,amount:I.amount||n||0});N.success?l==null||l(N.transactionId):(j("error"),w(N.error||"Payment failed"),o==null||o(N.error||"Payment failed"))}},I=>{f(!1),j("error"),w(I),o==null||o(I)})||f(!1)},E=R=>{const I=Math.floor(R/60),N=R%60;return`${I}:${N.toString().padStart(2,"0")}`},A=y!==null&&y<=0;return c&&!c.available?e.jsxs("div",{className:"flex flex-col items-center p-6 bg-gray-50 rounded-xl",children:[e.jsx(UV,{className:"w-16 h-16 text-gray-300 mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-700 mb-2",children:"NFC Not Available"}),e.jsx("p",{className:"text-sm text-gray-500 text-center",children:c.reason||"NFC is not supported on this device"}),e.jsx("p",{className:"text-xs text-gray-400 mt-2",children:"Try using QR code payment instead"})]}):e.jsxs("div",{className:"flex flex-col items-center p-6",children:[e.jsxs("div",{className:`relative mb-6 ${g?"animate-pulse":""}`,children:[e.jsx("div",{className:`w-32 h-32 rounded-full flex items-center justify-center ${b==="success"?"bg-green-100":b==="error"?"bg-red-100":b==="scanning"?"bg-blue-100":"bg-gray-100"}`,children:b==="success"?e.jsx(be,{className:"w-16 h-16 text-green-600"}):b==="error"?e.jsx(ft,{className:"w-16 h-16 text-red-600"}):b==="scanning"?e.jsx(Mi,{className:"w-16 h-16 text-blue-600 animate-pulse"}):e.jsx(Na,{className:"w-16 h-16 text-gray-400"})}),g&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"absolute inset-0 rounded-full border-4 border-blue-400 animate-ping opacity-25"}),e.jsx("div",{className:"absolute inset-0 rounded-full border-4 border-blue-400 animate-ping opacity-25",style:{animationDelay:"0.5s"}})]})]}),e.jsx("div",{className:"text-center mb-4",children:p?e.jsxs("div",{className:"flex items-center gap-2 text-gray-500",children:[e.jsx(Ie,{className:"w-4 h-4 animate-spin"}),"Generating NFC token..."]}):b==="ready"&&u?e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"text-lg font-medium text-gray-900",children:a==="receive"?"Ready to Receive":"Ready to Pay"}),r&&e.jsxs("p",{className:"text-2xl font-bold text-primary-600 mt-1",children:["$",r.toFixed(2)]})]}):b==="scanning"?e.jsx("p",{className:"text-gray-600",children:v}):b==="success"?e.jsx("p",{className:"text-green-600 font-medium",children:v}):b==="error"?e.jsx("p",{className:"text-red-600",children:v}):e.jsx("p",{className:"text-gray-500",children:"Generate an NFC token to start"})}),u&&y!==null&&y>0&&e.jsxs("div",{className:`flex items-center gap-2 px-3 py-1 rounded-full text-sm mb-4 ${y<30?"bg-red-100 text-red-700":y<60?"bg-yellow-100 text-yellow-700":"bg-green-100 text-green-700"}`,children:[e.jsx(ut,{className:"w-4 h-4"}),"Expires in ",E(y)]}),u&&!A&&e.jsxs("div",{className:"bg-gray-50 rounded-lg p-3 mb-4 text-center",children:[e.jsx("p",{className:"text-xs text-gray-400",children:"Token ID"}),e.jsxs("p",{className:"text-sm font-mono text-gray-600",children:[u.token.slice(0,20),"..."]})]}),e.jsx("div",{className:"flex gap-3",children:!u||A?e.jsx("button",{onClick:S,disabled:p,className:"flex items-center gap-2 px-6 py-3 bg-primary-600 text-white rounded-xl font-medium hover:bg-primary-700 disabled:opacity-50",children:p?e.jsxs(e.Fragment,{children:[e.jsx(Ie,{className:"w-5 h-5 animate-spin"}),"Generating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Mi,{className:"w-5 h-5"}),"Generate NFC Token"]})}):e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:S,className:"flex items-center gap-2 px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200",children:[e.jsx(vt,{className:"w-4 h-4"}),"Regenerate"]}),(c==null?void 0:c.canRead)&&a==="send"&&e.jsx("button",{onClick:_,disabled:g,className:"flex items-center gap-2 px-6 py-3 bg-primary-600 text-white rounded-xl font-medium hover:bg-primary-700 disabled:opacity-50",children:g?e.jsxs(e.Fragment,{children:[e.jsx(Ie,{className:"w-5 h-5 animate-spin"}),"Scanning..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Mi,{className:"w-5 h-5"}),"Start Scanning"]})})]})}),e.jsx("div",{className:"mt-6 text-center",children:e.jsx("p",{className:"text-xs text-gray-400",children:a==="receive"?"Show this to the sender or tap devices together":"Tap your device to the recipient's device to pay"})})]})}function MI({amount:t,recipientName:s,onConfirm:r,disabled:a=!1,isProcessing:n=!1}){const[i,l]=h.useState(0),[o,c]=h.useState(!1),[d,u]=h.useState(!1),m=h.useRef(null),p=h.useRef(!1),x=h.useRef(0),g=85;h.useEffect(()=>{x.current=i},[i]),h.useEffect(()=>{if(!n&&d){const S=setTimeout(()=>{u(!1),l(0)},500);return()=>clearTimeout(S)}},[n,d]);const f=h.useCallback(()=>m.current?m.current.offsetWidth-64-8:200,[]),b=h.useCallback(S=>{if(!p.current||!m.current||a||n)return;const _=m.current.getBoundingClientRect(),E=f(),R=Math.max(0,Math.min(S-_.left-32,E))/E*100;l(R),x.current=R},[a,n,f]),j=h.useCallback(async()=>{if(!p.current)return;const S=x.current;if(p.current=!1,c(!1),S>=g&&!a&&!n){u(!0),l(100);try{await r()}catch(_){console.error("Confirm error:",_),u(!1),l(0)}}else l(0)},[a,n,r]),v=h.useCallback(S=>{a||n||d||(p.current=!0,c(!0))},[a,n,d]),w=S=>{S.preventDefault(),v(S.clientX)},y=S=>{v(S.touches[0].clientX)};h.useEffect(()=>{const S=R=>{p.current&&b(R.clientX)},_=()=>{p.current&&j()},E=R=>{p.current&&R.touches[0]&&b(R.touches[0].clientX)},A=()=>{p.current&&j()};return window.addEventListener("mousemove",S),window.addEventListener("mouseup",_),window.addEventListener("touchmove",E,{passive:!0}),window.addEventListener("touchend",A),()=>{window.removeEventListener("mousemove",S),window.removeEventListener("mouseup",_),window.removeEventListener("touchmove",E),window.removeEventListener("touchend",A)}},[b,j]);const C=i/100*f();return e.jsxs("div",{ref:m,className:oe("relative h-16 rounded-2xl overflow-hidden select-none",a||n?"opacity-50 cursor-not-allowed":"cursor-grab",d?"bg-green-500":"bg-gradient-to-r from-primary-600 to-primary-500"),children:[e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsx("div",{className:"flex items-center gap-2 text-white/80 font-medium",children:n?e.jsxs(e.Fragment,{children:[e.jsx(Ie,{className:"w-5 h-5 animate-spin"}),e.jsx("span",{children:"Processing..."})]}):d?e.jsxs(e.Fragment,{children:[e.jsx(Rs,{className:"w-5 h-5"}),e.jsx("span",{children:"Sent!"})]}):e.jsxs(e.Fragment,{children:[e.jsxs("span",{children:["Slide to send $",parseFloat(t).toFixed(2)]}),e.jsx(Vs,{className:"w-5 h-5 animate-pulse"})]})})}),e.jsx("div",{className:oe("absolute inset-y-0 left-0 transition-all duration-100",d?"bg-green-600":"bg-primary-700/30"),style:{width:`${i}%`}}),e.jsx("div",{onMouseDown:w,onTouchStart:y,className:oe("absolute top-1 bottom-1 left-1 w-14 rounded-xl flex items-center justify-center",o?"cursor-grabbing scale-105":"cursor-grab",d?"bg-white":"bg-white shadow-lg",a||n?"pointer-events-none":""),style:{transform:`translateX(${C}px)`,transition:o?"none":"transform 0.3s ease-out"},children:n?e.jsx(Ie,{className:"w-6 h-6 text-primary-600 animate-spin"}):d?e.jsx(Rs,{className:"w-6 h-6 text-green-600"}):e.jsx(Ba,{className:"w-6 h-6 text-primary-600"})})]})}function S2({isOpen:t,onClose:s,onVerify:r,amount:a,recipientName:n}){const[i,l]=h.useState(["","","",""]),[o,c]=h.useState(!1),[d,u]=h.useState(""),[m,p]=h.useState(0),x=h.useRef([]),g=3;h.useEffect(()=>{t&&(l(["","","",""]),u(""),c(!1),setTimeout(()=>{var C;(C=x.current[0])==null||C.focus()},100))},[t]);const f=(C,S)=>{var E;if(!/^\d*$/.test(S))return;const _=[...i];_[C]=S.slice(-1),l(_),u(""),S&&C<3&&((E=x.current[C+1])==null||E.focus()),_.every(A=>A!=="")&&!o&&v(_.join(""))},b=(C,S)=>{var _;S.key==="Backspace"&&!i[C]&&C>0&&((_=x.current[C-1])==null||_.focus())},j=C=>{C.preventDefault();const S=C.clipboardData.getData("text").replace(/\D/g,"").slice(0,4);if(S.length===4){const _=S.split("");l(_),v(S)}},v=async C=>{if(!(C.length!==4||o)){c(!0),u("");try{if(!await r(C)){const _=m+1;p(_),_>=g?(u("Too many failed attempts. Please try again later."),setTimeout(()=>{s()},2e3)):(u(`Incorrect PIN. ${g-_} attempts remaining.`),l(["","","",""]),setTimeout(()=>{var E;(E=x.current[0])==null||E.focus()},100))}}catch(S){u(S.message||"Verification failed"),l(["","","",""])}finally{c(!1)}}},w=C=>{const S=i.findIndex(_=>_==="");S!==-1&&f(S,C)},y=()=>{var S;const C=i.map((_,E)=>_!==""?E:-1).filter(_=>_!==-1).pop();if(C!==void 0){const _=[...i];_[C]="",l(_),(S=x.current[C])==null||S.focus()}};return t?e.jsxs("div",{className:"fixed inset-0 z-50 flex items-end sm:items-center justify-center",children:[e.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:s}),e.jsxs("div",{className:"relative w-full sm:max-w-md bg-white rounded-t-3xl sm:rounded-2xl shadow-2xl animate-slide-up",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-primary-100 rounded-xl",children:e.jsx(Xs,{className:"w-5 h-5 text-primary-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:"Enter Transaction PIN"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Verify to send money"})]})]}),e.jsx("button",{onClick:s,disabled:o,className:"p-2 hover:bg-gray-100 rounded-lg",children:e.jsx(lt,{className:"w-5 h-5 text-gray-500"})})]}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"p-4 bg-gray-50 rounded-xl text-center",children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Sending"}),e.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:["$",parseFloat(a).toFixed(2)]}),e.jsxs("p",{className:"text-sm text-gray-600",children:["to ",n]})]}),e.jsx("div",{className:"flex justify-center gap-3",onPaste:j,children:i.map((C,S)=>e.jsx("input",{ref:_=>x.current[S]=_,type:"password",inputMode:"numeric",maxLength:1,value:C,onChange:_=>f(S,_.target.value),onKeyDown:_=>b(S,_),disabled:o||m>=g,className:oe("w-14 h-14 text-center text-2xl font-bold border-2 rounded-xl focus:ring-2 focus:ring-primary-500 focus:border-primary-500 transition-all",d?"border-red-300 bg-red-50":"border-gray-300",o&&"opacity-50")},S))}),d&&e.jsxs("div",{className:"flex items-center gap-2 p-3 bg-red-50 border border-red-200 rounded-lg",children:[e.jsx(ut,{className:"w-4 h-4 text-red-600 shrink-0"}),e.jsx("p",{className:"text-sm text-red-700",children:d})]}),o&&e.jsxs("div",{className:"flex items-center justify-center gap-2 text-primary-600",children:[e.jsx(Ie,{className:"w-5 h-5 animate-spin"}),e.jsx("span",{className:"font-medium",children:"Verifying..."})]}),e.jsx("div",{className:"grid grid-cols-3 gap-3",children:["1","2","3","4","5","6","7","8","9","","0","back"].map(C=>e.jsx("button",{onClick:()=>{C==="back"?y():C&&w(C)},disabled:!C||o||m>=g,className:oe("h-14 rounded-xl font-semibold text-xl transition-colors",C?"":"invisible",C==="back"?"bg-gray-100 text-gray-600 hover:bg-gray-200":"bg-gray-50 text-gray-900 hover:bg-gray-100 active:bg-gray-200",(o||m>=g)&&"opacity-50 cursor-not-allowed"),children:C==="back"?"":C},C))}),e.jsxs("p",{className:"text-center text-sm text-gray-500",children:["Forgot your PIN?"," ",e.jsx("a",{href:"/profile",className:"text-primary-600 font-medium hover:underline",children:"Reset in Profile"})]})]})]})]}):null}function _2({isOpen:t,onClose:s,onSuccess:r,userId:a}){const[n,i]=h.useState("intro"),[l,o]=h.useState(["","","",""]),[c,d]=h.useState(["","","",""]),[u,m]=h.useState(""),[p,x]=h.useState(!1),g=h.useRef([]),f=h.useRef([]);h.useEffect(()=>{t&&(i("intro"),o(["","","",""]),d(["","","",""]),m(""))},[t]),h.useEffect(()=>{n==="enter"?setTimeout(()=>{var C;return(C=g.current[0])==null?void 0:C.focus()},100):n==="confirm"&&setTimeout(()=>{var C;return(C=f.current[0])==null?void 0:C.focus()},100)},[n]);const b=(C,S,_=!1)=>{var A;if(!/^\d*$/.test(S))return;const E=_?[...c]:[...l];E[C]=S.slice(-1),_?d(E):o(E),m(""),S&&C<3&&((A=(_?f:g).current[C+1])==null||A.focus()),E.every(R=>R!=="")&&(_?v(E.join("")):setTimeout(()=>i("confirm"),300))},j=(C,S,_=!1)=>{var R;const E=_?c:l,A=_?f:g;S.key==="Backspace"&&!E[C]&&C>0&&((R=A.current[C-1])==null||R.focus())},v=async C=>{const S=l.join("");if(S!==C){m("PINs do not match. Please try again."),d(["","","",""]),setTimeout(()=>{var _;return(_=f.current[0])==null?void 0:_.focus()},100);return}x(!0);try{const{error:_}=await U.from("users").update({transaction_pin:S,updated_at:new Date().toISOString()}).eq("id",a);if(_)throw _;r()}catch(_){m(_.message||"Failed to set PIN")}finally{x(!1)}},w=(C,S=!1)=>{const E=(S?c:l).findIndex(A=>A==="");E!==-1&&b(E,C,S)},y=(C=!1)=>{var E;const _=(C?c:l).map((A,R)=>A!==""?R:-1).filter(A=>A!==-1).pop();_!==void 0&&(b(_,"",C),(E=(C?f:g).current[_])==null||E.focus())};return t?e.jsxs("div",{className:"fixed inset-0 z-50 flex items-end sm:items-center justify-center",children:[e.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm"}),e.jsxs("div",{className:"relative w-full sm:max-w-md bg-white rounded-t-3xl sm:rounded-2xl shadow-2xl animate-slide-up",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-purple-100 rounded-xl",children:e.jsx(Xt,{className:"w-5 h-5 text-purple-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:"Set Transaction PIN"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Secure your transfers"})]})]}),e.jsx("button",{onClick:s,disabled:p,className:"p-2 hover:bg-gray-100 rounded-lg",children:e.jsx(lt,{className:"w-5 h-5 text-gray-500"})})]}),e.jsxs("div",{className:"p-6 space-y-6",children:[n==="intro"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-20 h-20 bg-purple-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(Xs,{className:"w-10 h-10 text-purple-600"})}),e.jsx("h4",{className:"text-lg font-semibold text-gray-900",children:"Protect Your Transfers"}),e.jsx("p",{className:"text-gray-500 mt-2",children:"Before you can send money, you need to set up a 4-digit transaction PIN. This PIN will be required every time you make a transfer."})]}),e.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-xl p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(ut,{className:"w-5 h-5 text-yellow-600 shrink-0 mt-0.5"}),e.jsxs("div",{className:"text-sm text-yellow-800",children:[e.jsx("p",{className:"font-medium",children:"Important"}),e.jsx("p",{className:"mt-1",children:"Remember your PIN! You'll need it for all transfers. If you forget it, you can reset it from your profile settings."})]})]})}),e.jsx("button",{onClick:()=>i("enter"),className:"w-full py-4 bg-primary-600 text-white rounded-xl font-semibold hover:bg-primary-700 transition-colors",children:"Set Up PIN Now"}),e.jsx("button",{onClick:s,className:"w-full py-3 text-gray-500 font-medium hover:text-gray-700",children:"I'll do this later"})]}),n==="enter"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-900",children:"Create Your PIN"}),e.jsx("p",{className:"text-gray-500 mt-1",children:"Enter a 4-digit PIN"})]}),e.jsx("div",{className:"flex justify-center gap-3",children:l.map((C,S)=>e.jsx("input",{ref:_=>g.current[S]=_,type:"password",inputMode:"numeric",maxLength:1,value:C,onChange:_=>b(S,_.target.value),onKeyDown:_=>j(S,_),className:"w-14 h-14 text-center text-2xl font-bold border-2 border-gray-300 rounded-xl focus:ring-2 focus:ring-primary-500 focus:border-primary-500"},S))}),e.jsx("div",{className:"grid grid-cols-3 gap-3",children:["1","2","3","4","5","6","7","8","9","","0","back"].map(C=>e.jsx("button",{onClick:()=>{C==="back"?y():C&&w(C)},disabled:!C,className:oe("h-14 rounded-xl font-semibold text-xl transition-colors",C?"":"invisible",C==="back"?"bg-gray-100 text-gray-600 hover:bg-gray-200":"bg-gray-50 text-gray-900 hover:bg-gray-100 active:bg-gray-200"),children:C==="back"?"":C},C))})]}),n==="confirm"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-900",children:"Confirm Your PIN"}),e.jsx("p",{className:"text-gray-500 mt-1",children:"Re-enter your 4-digit PIN"})]}),u&&e.jsxs("div",{className:"flex items-center gap-2 p-3 bg-red-50 border border-red-200 rounded-lg",children:[e.jsx(ut,{className:"w-4 h-4 text-red-600 shrink-0"}),e.jsx("p",{className:"text-sm text-red-700",children:u})]}),e.jsx("div",{className:"flex justify-center gap-3",children:c.map((C,S)=>e.jsx("input",{ref:_=>f.current[S]=_,type:"password",inputMode:"numeric",maxLength:1,value:C,onChange:_=>b(S,_.target.value,!0),onKeyDown:_=>j(S,_,!0),disabled:p,className:oe("w-14 h-14 text-center text-2xl font-bold border-2 rounded-xl focus:ring-2 focus:ring-primary-500 focus:border-primary-500",u?"border-red-300 bg-red-50":"border-gray-300")},S))}),p&&e.jsxs("div",{className:"flex items-center justify-center gap-2 text-primary-600",children:[e.jsx(Ie,{className:"w-5 h-5 animate-spin"}),e.jsx("span",{className:"font-medium",children:"Setting up PIN..."})]}),e.jsx("div",{className:"grid grid-cols-3 gap-3",children:["1","2","3","4","5","6","7","8","9","","0","back"].map(C=>e.jsx("button",{onClick:()=>{C==="back"?y(!0):C&&w(C,!0)},disabled:!C||p,className:oe("h-14 rounded-xl font-semibold text-xl transition-colors",C?"":"invisible",C==="back"?"bg-gray-100 text-gray-600 hover:bg-gray-200":"bg-gray-50 text-gray-900 hover:bg-gray-100 active:bg-gray-200",p&&"opacity-50 cursor-not-allowed"),children:C==="back"?"":C},C))}),e.jsx("button",{onClick:()=>{i("enter"),o(["","","",""]),d(["","","",""]),m("")},disabled:p,className:"w-full py-3 text-gray-500 font-medium hover:text-gray-700 disabled:opacity-50",children:"Start Over"})]})]})]})]}):null}function bX(){const{user:t}=wt(),[s,r]=h.useState("method"),[a,n]=h.useState("search"),[i,l]=h.useState(null),[o,c]=h.useState(""),[d,u]=h.useState(""),[m,p]=h.useState(!1),[x,g]=h.useState(null),[f,b]=h.useState(""),[j,v]=h.useState(0),[w,y]=h.useState(0),[C,S]=h.useState(!1),[_,E]=h.useState(!1),[A,R]=h.useState(!1),[I,N]=h.useState([]),[P,k]=h.useState(null);h.useEffect(()=>{Ut.getDefaultCurrency().then(k)},[]);const D=(P==null?void 0:P.symbol)||"",$=z=>`${D}${z.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}`;h.useEffect(()=>{t!=null&&t.id&&(B(),T(),L())},[t==null?void 0:t.id]),h.useEffect(()=>{const z=sessionStorage.getItem("sendMoneyRecipient");if(z)try{const re=JSON.parse(z);sessionStorage.removeItem("sendMoneyRecipient"),(async()=>{const{data:Y}=await U.from("wallets").select("id").eq("user_id",re.id).eq("wallet_type","primary").single();Y&&(l({id:re.id,name:`${re.first_name} ${re.last_name}`,firstName:re.first_name,lastName:re.last_name,username:re.username||void 0,email:re.email||void 0,phone:re.phone||void 0,walletId:Y.id}),r("amount"))})()}catch(re){console.error("Error parsing stored recipient:",re),sessionStorage.removeItem("sendMoneyRecipient")}},[]),h.useEffect(()=>{const z=parseFloat(o)||0,re=Math.max(z*.01,.1);y(z>0?re:0)},[o]);const L=async()=>{if(!(t!=null&&t.id))return;const{data:z,error:re}=await U.from("users").select("transaction_pin").eq("id",t.id).single();if(re){console.error("Error checking transaction PIN:",re),R(!1);return}const ie=!!(z!=null&&z.transaction_pin);console.log("Transaction PIN check:",{hasPin:ie,userId:t.id}),R(ie)},B=async()=>{if(!(t!=null&&t.id))return;const{data:z}=await U.from("wallets").select("id, balance").eq("user_id",t.id).eq("wallet_type","primary").single();z&&(b(z.id),v(z.balance),T(z.id))},T=async z=>{const re=z||f;if(!re)return;const{data:ie}=await U.from("transactions").select("*").eq("wallet_id",re).eq("type","TRANSFER").lt("amount",0).order("created_at",{ascending:!1}).limit(5);if(ie&&ie.length>0){const Y=ie.map(G=>{var H,ue;return{id:G.id,recipientName:((H=G.metadata)==null?void 0:H.recipient_name)||"Unknown",recipientId:((ue=G.metadata)==null?void 0:ue.recipient_id)||"",amount:Math.abs(G.amount),date:G.created_at,status:G.status==="COMPLETED"?"completed":G.status==="PENDING"?"pending":"failed"}});N(Y)}},O=async z=>{var re;z.valid&&z.recipient?(l({id:z.recipient.id,name:z.recipient.name,walletId:z.recipient.walletId}),(re=z.data)!=null&&re.amount&&c(z.data.amount.toString()),r("amount")):(g({success:!1,error:z.error||"Invalid QR code"}),r("result"))},q=()=>{if(!(!i||!o||parseFloat(o)<=0)){if(parseFloat(o)>j){g({success:!1,error:"Insufficient balance"}),r("result");return}r("confirm")}},K=()=>{if(console.log("handleSlideConfirm called, hasTransactionPin:",A),!A){console.log("Opening SetupPinModal"),E(!0);return}console.log("Opening TransactionPinModal"),S(!0)},le=()=>{E(!1),R(!0),S(!0)},X=async z=>{if(!(t!=null&&t.id))return!1;const{data:re}=await U.from("users").select("transaction_pin").eq("id",t.id).single();return(re==null?void 0:re.transaction_pin)===z?(S(!1),await se(),!0):!1},se=async()=>{if(!i||!o||!(t!=null&&t.id)||!f)return;p(!0);const z=parseFloat(o),re=z;try{const{data:ie}=await U.from("wallets").select("balance").eq("id",f).single();if(!ie||ie.balance<re){g({success:!1,error:"Insufficient balance"}),r("result");return}const Y=`txn_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,{error:G}=await U.from("wallets").update({balance:ie.balance-re,updated_at:new Date().toISOString()}).eq("id",f);if(G)throw G;const{data:H}=await U.from("wallets").select("balance").eq("id",i.walletId).single();if(H){const ue=z-w;await U.from("wallets").update({balance:H.balance+ue,updated_at:new Date().toISOString()}).eq("id",i.walletId)}await U.from("transactions").insert([{external_id:`${Y}_out`,wallet_id:f,type:"TRANSFER",amount:-z,fee:w,currency:"USD",status:"COMPLETED",description:d||`Transfer to ${i.name}`,metadata:{recipient_id:i.id,recipient_wallet:i.walletId,recipient_name:i.name,method:a}},{external_id:`${Y}_in`,wallet_id:i.walletId,type:"TRANSFER",amount:z-w,currency:"USD",status:"COMPLETED",description:d||`Transfer from ${t.firstName} ${t.lastName}`,metadata:{sender_id:t.id,sender_wallet:f,sender_name:`${t.firstName} ${t.lastName}`,method:a}}]),g({success:!0,transactionId:Y,fee:w}),r("result"),B()}catch(ie){console.error("Transfer error:",ie),g({success:!1,error:ie.message||"Transfer failed. Please try again."}),r("result")}finally{p(!1)}},de=()=>{r("method"),n("search"),l(null),c(""),u(""),g(null),B()},fe=()=>{switch(s){case"scan":r("method");break;case"recipient":r("method");break;case"amount":l(null),r(a==="search"?"recipient":"method");break;case"confirm":r("amount");break;default:r("method")}};return e.jsxs(ka,{children:[e.jsxs("div",{className:"max-w-2xl mx-auto space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[s!=="method"&&s!=="result"&&e.jsx("button",{onClick:fe,className:"p-2 hover:bg-gray-100 rounded-lg",children:e.jsx(_s,{className:"w-5 h-5"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Send Money"}),e.jsx("p",{className:"text-gray-500",children:"Transfer money instantly"})]})]}),e.jsx(W,{className:"p-4 bg-gradient-to-r from-primary-600 to-primary-500 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-primary-100",children:"Available Balance"}),e.jsx("p",{className:"text-3xl font-bold",children:$(j)})]}),e.jsx("div",{className:"p-3 bg-white/20 rounded-xl",children:e.jsx(jt,{className:"w-8 h-8"})})]})}),s==="method"&&e.jsxs(W,{className:"p-6 space-y-6",children:[e.jsx("h2",{className:"font-semibold text-gray-900",children:"How do you want to send?"}),e.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[e.jsxs("button",{onClick:()=>{n("search"),r("recipient")},className:"flex items-center gap-4 p-4 border-2 border-gray-200 rounded-xl hover:border-primary-500 hover:bg-primary-50 transition-colors text-left",children:[e.jsx("div",{className:"p-3 bg-blue-100 rounded-xl",children:e.jsx(ts,{className:"w-6 h-6 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:"Search Recipient"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Find by name, email or phone"})]})]}),e.jsxs("button",{onClick:()=>{n("qr"),r("scan")},className:"flex items-center gap-4 p-4 border-2 border-gray-200 rounded-xl hover:border-primary-500 hover:bg-primary-50 transition-colors text-left",children:[e.jsx("div",{className:"p-3 bg-purple-100 rounded-xl",children:e.jsx(wa,{className:"w-6 h-6 text-purple-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:"Scan QR Code"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Scan recipient's payment QR"})]})]}),e.jsxs("button",{onClick:()=>{n("nfc"),r("scan")},className:"flex items-center gap-4 p-4 border-2 border-gray-200 rounded-xl hover:border-primary-500 hover:bg-primary-50 transition-colors text-left",children:[e.jsx("div",{className:"p-3 bg-green-100 rounded-xl",children:e.jsx(Mi,{className:"w-6 h-6 text-green-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:"NFC Tap to Pay"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Tap devices together"})]})]})]})]}),s==="scan"&&a==="qr"&&e.jsx(W,{className:"p-6",children:e.jsx(fX,{onScan:O,onClose:()=>r("method")})}),s==="scan"&&a==="nfc"&&f&&(t==null?void 0:t.id)&&e.jsx(W,{className:"p-6",children:e.jsx(II,{userId:t.id,walletId:f,mode:"send",maxAmount:j,onPaymentReceived:z=>{g({success:!0,transactionId:z}),r("result")},onError:z=>{g({success:!1,error:z}),r("result")}})}),s==="recipient"&&e.jsxs(W,{className:"p-6 space-y-4",children:[e.jsx("h2",{className:"font-semibold text-gray-900",children:"Find Recipient"}),e.jsx(f2,{placeholder:"Search by @username, phone, or name...",excludeUserId:t==null?void 0:t.id,autoFocus:!0,onSelect:async z=>{const{data:re}=await U.from("wallets").select("id").eq("user_id",z.id).eq("wallet_type","primary").single();re?(l({id:z.id,name:`${z.first_name} ${z.last_name}`,firstName:z.first_name,lastName:z.last_name,username:z.username||void 0,email:z.email||void 0,phone:z.phone||void 0,walletId:re.id}),r("amount")):(g({success:!1,error:"This user does not have a wallet. They cannot receive payments."}),r("result"))}}),e.jsxs("div",{className:"p-4 bg-blue-50 rounded-xl",children:[e.jsx("p",{className:"text-sm text-blue-700 font-medium mb-2",children:"Search tips:"}),e.jsxs("ul",{className:"text-sm text-blue-600 space-y-1",children:[e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx(Cg,{className:"w-4 h-4"}),e.jsx("span",{children:"Search by username: @johndoe"})]}),e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx(lr,{className:"w-4 h-4"}),e.jsx("span",{children:"Search by phone: +1234567890"})]}),e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx(Es,{className:"w-4 h-4"}),e.jsx("span",{children:"Search by name: John Doe"})]})]})]})]}),s==="amount"&&i&&e.jsxs(W,{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-3 p-4 bg-green-50 border border-green-200 rounded-xl",children:[e.jsx(Pw,{firstName:i.firstName,lastName:i.lastName,profilePicture:i.profilePicture,size:"lg"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium text-green-900",children:"Sending to"}),e.jsx("p",{className:"text-green-700",children:i.name}),i.username&&e.jsxs("p",{className:"text-xs text-green-500 flex items-center gap-1",children:[e.jsx(Cg,{className:"w-3 h-3"}),i.username]}),i.phone&&e.jsxs("p",{className:"text-xs text-green-500 flex items-center gap-1",children:[e.jsx(lr,{className:"w-3 h-3"}),i.phone]})]}),e.jsx(be,{className:"w-6 h-6 text-green-600"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Amount"}),e.jsxs("div",{className:"relative",children:[e.jsx(js,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-6 h-6 text-gray-400"}),e.jsx("input",{type:"number",step:"0.01",min:"0.01",max:j,value:o,onChange:z=>c(z.target.value),placeholder:"0.00",className:"w-full pl-12 pr-4 py-4 border border-gray-300 rounded-xl text-2xl font-bold focus:ring-2 focus:ring-primary-500 focus:border-primary-500",autoFocus:!0})]}),e.jsx("div",{className:"flex gap-2 mt-3",children:[10,25,50,100].map(z=>e.jsxs("button",{onClick:()=>c(z.toString()),disabled:z>j,className:"flex-1 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 disabled:opacity-50 font-medium",children:[D,z]},z))}),parseFloat(o)>0&&e.jsxs("div",{className:"mt-4 p-3 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-500",children:"Transfer fee (1%)"}),e.jsx("span",{className:"text-gray-700",children:$(w)})]}),e.jsxs("div",{className:"flex justify-between text-sm mt-1",children:[e.jsx("span",{className:"text-gray-500",children:"Recipient receives"}),e.jsx("span",{className:"font-medium text-gray-900",children:$(parseFloat(o)-w)})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Note (optional)"}),e.jsx("input",{type:"text",value:d,onChange:z=>u(z.target.value),placeholder:"What's this for?",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500"})]}),e.jsxs("button",{onClick:q,disabled:!o||parseFloat(o)<=0||parseFloat(o)>j,className:"w-full py-4 bg-primary-600 text-white rounded-xl font-semibold flex items-center justify-center gap-2 hover:bg-primary-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:["Continue",e.jsx(Lr,{className:"w-5 h-5"})]})]}),s==="confirm"&&i&&e.jsxs(W,{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-20 h-20 mx-auto mb-4",children:e.jsx(Pw,{firstName:i.firstName,lastName:i.lastName,profilePicture:i.profilePicture,size:"xl"})}),e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Confirm Transfer"}),e.jsxs("p",{className:"text-gray-500",children:["to ",i.name]})]}),e.jsxs("div",{className:"text-center py-4",children:[e.jsx("p",{className:"text-4xl font-bold text-primary-600",children:$(parseFloat(o))}),e.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["Recipient receives ",$(parseFloat(o)-w)]})]}),e.jsxs("div",{className:"bg-gray-50 rounded-xl p-4 space-y-3",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-500",children:"To"}),e.jsx("span",{className:"font-medium",children:i.name})]}),i.phone&&e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-500",children:"Phone"}),e.jsx("span",{className:"text-gray-700",children:i.phone})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-500",children:"Amount"}),e.jsx("span",{className:"font-medium",children:$(parseFloat(o))})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-500",children:"Fee"}),e.jsx("span",{className:"text-gray-700",children:$(w)})]}),d&&e.jsx("div",{className:"border-t border-gray-200 pt-3",children:e.jsxs("span",{className:"text-gray-500 text-sm",children:["Note: ",d]})})]}),e.jsxs("div",{className:"p-4 bg-yellow-50 border border-yellow-200 rounded-lg flex items-start gap-3",children:[e.jsx(ut,{className:"w-5 h-5 text-yellow-600 shrink-0 mt-0.5"}),e.jsx("p",{className:"text-sm text-yellow-800",children:"Please verify the recipient details. Transfers cannot be reversed."})]}),A&&e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-500",children:[e.jsx(Xs,{className:"w-4 h-4"}),e.jsx("span",{children:"Transaction PIN required to complete"})]}),e.jsx(MI,{amount:o,recipientName:i.name,onConfirm:K,disabled:m,isProcessing:m}),e.jsx("button",{onClick:fe,disabled:m,className:"w-full py-3 text-gray-600 font-medium hover:text-gray-800 disabled:opacity-50",children:"Go Back"})]}),s==="result"&&x&&e.jsx(W,{className:"p-6 space-y-6 text-center",children:x.success?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-20 h-20 bg-green-100 rounded-full flex items-center justify-center mx-auto",children:e.jsx(be,{className:"w-10 h-10 text-green-600"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Transfer Successful!"}),e.jsxs("p",{className:"text-gray-500 mt-2",children:["You sent ",$(parseFloat(o))," to ",i==null?void 0:i.name]})]}),x.transactionId&&e.jsxs("div",{className:"bg-gray-50 rounded-xl p-4",children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Transaction ID"}),e.jsx("p",{className:"text-sm font-mono text-gray-700 break-all",children:x.transactionId})]}),e.jsx("button",{onClick:de,className:"w-full py-4 bg-primary-600 text-white rounded-xl font-semibold hover:bg-primary-700 transition-colors",children:"Send More Money"})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-20 h-20 bg-red-100 rounded-full flex items-center justify-center mx-auto",children:e.jsx(ft,{className:"w-10 h-10 text-red-600"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Transfer Failed"}),e.jsx("p",{className:"text-gray-500 mt-2",children:x.error})]}),e.jsx("button",{onClick:de,className:"w-full py-4 bg-primary-600 text-white rounded-xl font-semibold hover:bg-primary-700 transition-colors",children:"Try Again"})]})})]}),e.jsx(S2,{isOpen:C,onClose:()=>S(!1),onVerify:X,amount:o,recipientName:(i==null?void 0:i.name)||""}),e.jsx(_2,{isOpen:_,onClose:()=>E(!1),onSuccess:le,userId:(t==null?void 0:t.id)||""})]})}function vX(){const{user:t}=wt(),[s,r]=h.useState("qr"),[a,n]=h.useState(""),[i,l]=h.useState(""),[o,c]=h.useState(""),[d,u]=h.useState(0),[m,p]=h.useState(""),[x,g]=h.useState(!1),[f,b]=h.useState(!1),[j,v]=h.useState(!0),[w,y]=h.useState(null),[C,S]=h.useState(null);h.useEffect(()=>{Ut.getDefaultCurrency().then(S)},[]);const _=(C==null?void 0:C.symbol)||"",E=k=>`${_}${k.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}`;h.useEffect(()=>{t!=null&&t.id&&A()},[t==null?void 0:t.id]);const A=async()=>{v(!0),y(null);try{const{data:k,error:D}=await U.from("wallets").select("id, balance").eq("user_id",t==null?void 0:t.id).eq("wallet_type","primary").single();if(D){console.error("Wallet fetch error:",D),y("Failed to load wallet");return}k?(c(k.id),u(k.balance)):y("No wallet found")}catch(k){console.error("Wallet fetch exception:",k),y("Failed to load wallet")}finally{v(!1)}},R=()=>{const k=window.location.origin,D=new URLSearchParams({to:(t==null?void 0:t.id)||"",...a&&{amount:a},...i&&{note:i}}),$=`${k}/pay?${D.toString()}`;return p($),$},I=async()=>{const k=m||R();await navigator.clipboard.writeText(k),g(!0),setTimeout(()=>g(!1),2e3)},N=async()=>{const k=m||R();if(navigator.share)try{await navigator.share({title:"Payment Request",text:a?`Pay me ${_}${a}`:"Send me money",url:k})}catch{}},P=parseFloat(a)||void 0;return e.jsx(ka,{children:e.jsxs("div",{className:"max-w-2xl mx-auto space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Receive Money"}),e.jsx("p",{className:"text-gray-500",children:"Get paid via QR code, NFC, or payment link"})]}),e.jsx(W,{className:"p-4 bg-gradient-to-r from-green-600 to-green-500 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-green-100",children:"Current Balance"}),e.jsx("p",{className:"text-3xl font-bold",children:E(d)})]}),e.jsx("div",{className:"p-3 bg-white/20 rounded-xl",children:e.jsx(jt,{className:"w-8 h-8"})})]})}),e.jsxs(W,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("label",{className:"font-medium text-gray-700",children:"Request specific amount?"}),e.jsx("button",{onClick:()=>b(!f),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${f?"bg-primary-600":"bg-gray-200"}`,children:e.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${f?"translate-x-6":"translate-x-1"}`})})]}),f&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"Amount"}),e.jsxs("div",{className:"relative",children:[e.jsx(js,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{type:"number",step:"0.01",min:"0",value:a,onChange:k=>n(k.target.value),placeholder:"0.00",className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg text-xl font-semibold focus:ring-2 focus:ring-primary-500 focus:border-primary-500"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"Description (optional)"}),e.jsx("input",{type:"text",value:i,onChange:k=>l(k.target.value),placeholder:"What's this for?",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500"})]})]})]}),e.jsx("div",{className:"flex gap-2",children:[{key:"qr",label:"QR Code",icon:wa},{key:"nfc",label:"NFC Tap",icon:Mi},{key:"link",label:"Link",icon:Qh}].map(({key:k,label:D,icon:$})=>e.jsxs("button",{onClick:()=>r(k),className:`flex-1 py-3 px-4 rounded-lg flex items-center justify-center gap-2 font-medium transition-colors ${s===k?"bg-primary-600 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:[e.jsx($,{className:"w-5 h-5"}),D]},k))}),e.jsxs(W,{className:"p-6",children:[j&&e.jsxs("div",{className:"flex flex-col items-center justify-center p-8",children:[e.jsx("div",{className:"w-12 h-12 border-4 border-primary-600 border-t-transparent rounded-full animate-spin mb-4"}),e.jsx("p",{className:"text-gray-500",children:"Loading wallet..."})]}),!j&&w&&e.jsxs("div",{className:"flex flex-col items-center justify-center p-8 text-center",children:[e.jsx(wa,{className:"w-12 h-12 text-gray-300 mb-4"}),e.jsx("p",{className:"text-gray-500 font-medium",children:"Unable to load QR code"}),e.jsx("p",{className:"text-red-500 text-sm mt-2",children:w}),e.jsx("button",{onClick:A,className:"mt-4 px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700",children:"Try Again"})]}),s==="qr"&&!j&&!w&&(t==null?void 0:t.id)&&o&&e.jsx(jD,{userId:t.id,walletId:o,amount:P,description:i,type:P?"dynamic":"static",size:250}),s==="nfc"&&!j&&!w&&(t==null?void 0:t.id)&&o&&e.jsx(II,{userId:t.id,walletId:o,amount:P,mode:"receive",onPaymentReceived:k=>{console.log("Payment received:",k),A()}}),s==="link"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx(Qh,{className:"w-16 h-16 text-primary-600 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Payment Link"}),e.jsx("p",{className:"text-gray-500 text-sm mt-1",children:"Share this link to receive payments"})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsx("p",{className:"text-xs text-gray-500 mb-2",children:"Your payment link:"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"text",readOnly:!0,value:m||R(),className:"flex-1 px-3 py-2 bg-white border border-gray-300 rounded-lg text-sm font-mono truncate"}),e.jsx("button",{onClick:I,className:"p-2 bg-white border border-gray-300 rounded-lg hover:bg-gray-50",children:x?e.jsx(be,{className:"w-5 h-5 text-green-600"}):e.jsx(vs,{className:"w-5 h-5 text-gray-500"})})]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:I,className:"flex-1 flex items-center justify-center gap-2 px-4 py-3 bg-gray-100 text-gray-700 rounded-xl font-medium hover:bg-gray-200",children:x?e.jsxs(e.Fragment,{children:[e.jsx(be,{className:"w-5 h-5 text-green-600"}),"Copied!"]}):e.jsxs(e.Fragment,{children:[e.jsx(vs,{className:"w-5 h-5"}),"Copy Link"]})}),typeof navigator<"u"&&"share"in navigator&&e.jsxs("button",{onClick:N,className:"flex-1 flex items-center justify-center gap-2 px-4 py-3 bg-primary-600 text-white rounded-xl font-medium hover:bg-primary-700",children:[e.jsx(GT,{className:"w-5 h-5"}),"Share"]})]}),P&&e.jsxs("div",{className:"text-center p-4 bg-green-50 rounded-lg",children:[e.jsx("p",{className:"text-sm text-green-600",children:"Requesting"}),e.jsx("p",{className:"text-2xl font-bold text-green-700",children:E(P)})]})]})]}),e.jsxs(W,{className:"p-4 bg-blue-50 border-blue-200",children:[e.jsx("h4",{className:"font-medium text-blue-900 mb-2",children:"How it works"}),e.jsxs("ul",{className:"text-sm text-blue-700 space-y-1",children:[s==="qr"&&e.jsxs(e.Fragment,{children:[e.jsx("li",{children:"1. Show the QR code to the sender"}),e.jsx("li",{children:"2. They scan it with their camera or app"}),e.jsx("li",{children:"3. Payment is sent directly to your wallet"})]}),s==="nfc"&&e.jsxs(e.Fragment,{children:[e.jsx("li",{children:"1. Generate an NFC token"}),e.jsx("li",{children:"2. Tap your phone to the sender's phone"}),e.jsx("li",{children:"3. Payment is transferred instantly"})]}),s==="link"&&e.jsxs(e.Fragment,{children:[e.jsx("li",{children:"1. Copy or share the payment link"}),e.jsx("li",{children:"2. Sender opens the link and confirms"}),e.jsx("li",{children:"3. Money arrives in your wallet"})]})]})]})]})})}function jX(){const t=At(),{data:s,isLoading:r,error:a}=yQ(),{data:n}=Yf(),[i,l]=h.useState(!1),[o,c]=h.useState(null),[d,u]=h.useState(""),[m,p]=h.useState("all"),x=(s==null?void 0:s.reduce((y,C)=>y+C.currentBalance,0))||0,g=(s==null?void 0:s.reduce((y,C)=>y+(C.goalAmount||0),0))||0,f=(s==null?void 0:s.filter(y=>y.status==="ACTIVE"||y.status==="LOCKED").length)||0,b=(s==null?void 0:s.filter(y=>y.lockStatus==="UNLOCKED").length)||0,j=(s==null?void 0:s.filter(y=>{var _;const C=y.name.toLowerCase().includes(d.toLowerCase())||((_=y.description)==null?void 0:_.toLowerCase().includes(d.toLowerCase())),S=m==="all"||y.status===m;return C&&S}))||[],v=y=>new Intl.NumberFormat("en-SL",{style:"currency",currency:"SLE",minimumFractionDigits:2}).format(y),w=y=>{t(`/pots/${y.id}`)};return e.jsxs(ka,{children:[e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Savings Pots"}),e.jsx("p",{className:"text-gray-500 mt-1",children:"Create and manage locked savings goals"})]}),e.jsxs("button",{onClick:()=>l(!0),className:"inline-flex items-center gap-2 px-4 py-2.5 bg-primary-600 text-white rounded-xl font-medium hover:bg-primary-700 transition-colors",children:[e.jsx(It,{className:"w-5 h-5"}),"Create Pot"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsx(W,{children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-primary-100 flex items-center justify-center",children:e.jsx(di,{className:"w-6 h-6 text-primary-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Total Savings"}),e.jsx("p",{className:"text-xl font-bold text-gray-900",children:r?"...":v(x)})]})]})}),e.jsx(W,{children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-green-100 flex items-center justify-center",children:e.jsx(B1,{className:"w-6 h-6 text-green-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Total Goals"}),e.jsx("p",{className:"text-xl font-bold text-gray-900",children:r?"...":v(g)})]})]})}),e.jsx(W,{children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-blue-100 flex items-center justify-center",children:e.jsx(rr,{className:"w-6 h-6 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Active Pots"}),e.jsx("p",{className:"text-xl font-bold text-gray-900",children:r?"...":f})]})]})}),e.jsx(W,{children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-amber-100 flex items-center justify-center",children:e.jsx(Mn,{className:"w-6 h-6 text-amber-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Ready to Withdraw"}),e.jsx("p",{className:"text-xl font-bold text-gray-900",children:r?"...":b})]})]})})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(ts,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{type:"text",value:d,onChange:y=>u(y.target.value),placeholder:"Search pots...",className:"w-full pl-12 pr-4 py-3 rounded-xl border border-gray-300 focus:border-primary-500 focus:ring-primary-500 transition-colors"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Bn,{className:"w-5 h-5 text-gray-400"}),e.jsxs("select",{value:m,onChange:y=>p(y.target.value),className:"px-4 py-3 rounded-xl border border-gray-300 focus:border-primary-500 focus:ring-primary-500 transition-colors",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"ACTIVE",children:"Active"}),e.jsx("option",{value:"LOCKED",children:"Locked"}),e.jsx("option",{value:"UNLOCKED",children:"Unlocked"}),e.jsx("option",{value:"CLOSED",children:"Closed"})]})]})]}),r&&e.jsx("div",{className:"flex items-center justify-center py-16",children:e.jsx(Ie,{className:"w-8 h-8 text-primary-600 animate-spin"})}),a&&e.jsxs("div",{className:"p-6 bg-red-50 rounded-xl flex items-start gap-4",children:[e.jsx(ut,{className:"w-6 h-6 text-red-600 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-red-800",children:"Error loading pots"}),e.jsx("p",{className:"text-red-700 mt-1",children:a.message})]})]}),!r&&!a&&j.length===0&&e.jsx(W,{className:"py-16",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-20 h-20 rounded-full bg-primary-100 flex items-center justify-center mx-auto mb-6",children:e.jsx(di,{className:"w-10 h-10 text-primary-600"})}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:d||m!=="all"?"No pots found":"No savings pots yet"}),e.jsx("p",{className:"text-gray-500 max-w-md mx-auto mb-6",children:d||m!=="all"?"Try adjusting your search or filter criteria.":"Start building your savings by creating your first pot. Set a goal, lock your funds, and watch your savings grow!"}),!d&&m==="all"&&e.jsxs("button",{onClick:()=>l(!0),className:"inline-flex items-center gap-2 px-6 py-3 bg-primary-600 text-white rounded-xl font-medium hover:bg-primary-700 transition-colors",children:[e.jsx(It,{className:"w-5 h-5"}),"Create Your First Pot"]})]})}),!r&&!a&&j.length>0&&e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:j.map(y=>e.jsx(gQ,{pot:y,onClick:()=>w(y)},y.id))}),n&&e.jsx("div",{className:"text-center text-sm text-gray-500",children:e.jsxs("p",{children:["Max ",n.maxPotsPerUser," pots per user  Min lock period: ",n.minLockPeriodDays," days  Early withdrawal penalty: ",n.earlyWithdrawalPenaltyPercent,"%"]})})]}),e.jsx(aD,{isOpen:i,onClose:()=>l(!1),onSuccess:()=>l(!1)}),o&&e.jsx(nD,{isOpen:!!o,onClose:()=>c(null),pot:o,onSuccess:()=>c(null)})]})}function wX(){var P;const{potId:t}=hi(),s=At(),{data:r,isLoading:a}=bQ(t||""),{data:n,isLoading:i}=vQ(t||""),{data:l,isLoading:o}=jQ(t||"",1,20),{data:c}=rD(t||""),{data:d=[]}=qi(),u=SQ(),m=NQ(),[p,x]=h.useState(!1),[g,f]=h.useState(!1),[b,j]=h.useState(!1),[v,w]=h.useState(!1),y=d.filter(k=>k.status==="ACTIVE"),C=a||i,S=(c==null?void 0:c.canWithdraw)||(c==null?void 0:c.canWithdrawWithPenalty),_=k=>new Intl.NumberFormat("en-SL",{style:"currency",currency:"SLE",minimumFractionDigits:2}).format(k),E=k=>new Date(k).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}),A=k=>new Date(k).toLocaleString("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"2-digit"}),R=k=>{switch(k){case"contribution":case"auto_deposit":return e.jsx(xs,{className:"w-4 h-4 text-green-600"});case"withdrawal":return e.jsx(la,{className:"w-4 h-4 text-red-600"});case"penalty":return e.jsx(ut,{className:"w-4 h-4 text-amber-600"});case"interest":case"bonus":return e.jsx(rr,{className:"w-4 h-4 text-blue-600"});default:return e.jsx(it,{className:"w-4 h-4 text-gray-600"})}},I=async()=>{if(!(!r||y.length===0))try{await u.mutateAsync({potId:r.id,destinationWalletId:y[0].id}),s("/pots")}catch(k){console.error("Failed to close pot:",k)}},N=async()=>{if(r)try{await m.mutateAsync({potId:r.id,data:{autoDepositEnabled:!r.autoDepositEnabled}})}catch(k){console.error("Failed to update pot:",k)}};return t?e.jsxs(ka,{children:[e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("button",{onClick:()=>s("/pots"),className:"p-2 hover:bg-gray-100 rounded-full transition-colors",children:e.jsx(_s,{className:"w-5 h-5 text-gray-600"})}),e.jsx("div",{className:"flex-1",children:C?e.jsx("div",{className:"h-8 w-48 bg-gray-200 rounded animate-pulse"}):e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full flex items-center justify-center",style:{backgroundColor:`${(r==null?void 0:r.color)||"#4F46E5"}15`},children:e.jsx(di,{className:"w-5 h-5",style:{color:(r==null?void 0:r.color)||"#4F46E5"}})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-bold text-gray-900",children:r==null?void 0:r.name}),(r==null?void 0:r.description)&&e.jsx("p",{className:"text-sm text-gray-500",children:r.description})]})]})}),e.jsxs("div",{className:"relative",children:[e.jsx("button",{onClick:()=>j(!b),className:"p-2 hover:bg-gray-100 rounded-full transition-colors",children:e.jsx(nd,{className:"w-5 h-5 text-gray-600"})}),b&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 z-10",onClick:()=>j(!1)}),e.jsxs("div",{className:"absolute right-0 top-full mt-2 w-48 bg-white rounded-xl shadow-lg border border-gray-200 py-2 z-20",children:[e.jsxs("button",{onClick:()=>{j(!1)},className:"w-full px-4 py-2 text-left text-sm text-gray-700 hover:bg-gray-50 flex items-center gap-2",children:[e.jsx(Qc,{className:"w-4 h-4"}),"Edit Pot"]}),(r==null?void 0:r.autoDepositEnabled)!==void 0&&e.jsxs("button",{onClick:()=>{j(!1),N()},className:"w-full px-4 py-2 text-left text-sm text-gray-700 hover:bg-gray-50 flex items-center gap-2",children:[e.jsx(WT,{className:"w-4 h-4"}),r.autoDepositEnabled?"Disable":"Enable"," Auto-Deposit"]}),e.jsxs("button",{onClick:()=>{j(!1),w(!0)},className:"w-full px-4 py-2 text-left text-sm text-red-600 hover:bg-red-50 flex items-center gap-2",children:[e.jsx(Or,{className:"w-4 h-4"}),"Close Pot"]})]})]})]})]}),C&&e.jsx("div",{className:"flex items-center justify-center py-16",children:e.jsx(Ie,{className:"w-8 h-8 text-primary-600 animate-spin"})}),!C&&r&&e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[e.jsxs(W,{className:"overflow-hidden",children:[e.jsx("div",{className:"h-2",style:{backgroundColor:r.color||"#4F46E5"}}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Current Balance"}),e.jsx("p",{className:"text-4xl font-bold text-gray-900",children:_(r.currentBalance)})]}),e.jsx("div",{className:"flex items-center gap-2",children:r.lockStatus==="LOCKED"||r.adminLocked?e.jsxs("div",{className:"flex items-center gap-1.5 px-3 py-1.5 bg-amber-100 rounded-full",children:[e.jsx(Xs,{className:"w-4 h-4 text-amber-600"}),e.jsx("span",{className:"text-sm font-medium text-amber-700",children:r.adminLocked?"Admin Locked":"Locked"})]}):e.jsxs("div",{className:"flex items-center gap-1.5 px-3 py-1.5 bg-green-100 rounded-full",children:[e.jsx(A0,{className:"w-4 h-4 text-green-600"}),e.jsx("span",{className:"text-sm font-medium text-green-700",children:"Unlocked"})]})})]}),r.goalAmount&&e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex justify-between text-sm mb-2",children:[e.jsx("span",{className:"text-gray-500",children:"Progress to Goal"}),e.jsxs("span",{className:"font-medium text-gray-700",children:[((P=n==null?void 0:n.progressPercent)==null?void 0:P.toFixed(0))||0,"%"]})]}),e.jsx("div",{className:"h-3 bg-gray-100 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full rounded-full transition-all duration-500",style:{width:`${Math.min(100,(n==null?void 0:n.progressPercent)||0)}%`,backgroundColor:r.color||"#4F46E5"}})}),e.jsxs("div",{className:"flex justify-between mt-2 text-sm text-gray-500",children:[e.jsx("span",{children:_(r.currentBalance)}),e.jsx("span",{children:_(r.goalAmount)})]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("button",{onClick:()=>x(!0),className:"flex-1 py-3 px-4 bg-primary-600 text-white rounded-xl font-medium hover:bg-primary-700 transition-colors flex items-center justify-center gap-2",children:[e.jsx(xs,{className:"w-5 h-5"}),"Add Money"]}),e.jsxs("button",{onClick:()=>f(!0),disabled:!S,className:oe("flex-1 py-3 px-4 rounded-xl font-medium transition-colors flex items-center justify-center gap-2",S?"bg-gray-100 text-gray-700 hover:bg-gray-200":"bg-gray-100 text-gray-400 cursor-not-allowed"),children:[e.jsx(la,{className:"w-5 h-5"}),"Withdraw"]})]})]})]}),e.jsxs(W,{children:[e.jsx("div",{className:"p-6 border-b border-gray-200",children:e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Transaction History"})}),o?e.jsx("div",{className:"p-8 flex justify-center",children:e.jsx(Ie,{className:"w-6 h-6 text-primary-600 animate-spin"})}):(l==null?void 0:l.data.length)===0?e.jsx("div",{className:"p-8 text-center",children:e.jsx("p",{className:"text-gray-500",children:"No transactions yet"})}):e.jsx("div",{className:"divide-y divide-gray-100",children:l==null?void 0:l.data.map(k=>e.jsxs("div",{className:"p-4 flex items-center justify-between hover:bg-gray-50",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-gray-100 flex items-center justify-center",children:R(k.transactionType)}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900 capitalize",children:k.transactionType.replace("_"," ")}),e.jsx("p",{className:"text-sm text-gray-500",children:k.description||A(k.createdAt)})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:oe("font-semibold",k.transactionType==="withdrawal"||k.transactionType==="penalty"?"text-red-600":"text-green-600"),children:[k.transactionType==="withdrawal"||k.transactionType==="penalty"?"-":"+",_(k.amount)]}),k.balanceAfter!==void 0&&e.jsxs("p",{className:"text-xs text-gray-500",children:["Balance: ",_(k.balanceAfter)]})]})]},k.id))})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsx(W,{children:e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:"Pot Details"}),r.goalAmount&&e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[e.jsx(B1,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm",children:"Target Amount"})]}),e.jsx("span",{className:"font-medium text-gray-900",children:_(r.goalAmount)})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[e.jsx(Xs,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm",children:"Lock Type"})]}),e.jsx("span",{className:"font-medium text-gray-900 capitalize",children:r.lockType.replace("_"," ")})]}),r.lockEndDate&&e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[e.jsx(Mn,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm",children:"Maturity Date"})]}),e.jsx("span",{className:"font-medium text-gray-900",children:E(r.lockEndDate)})]}),(n==null?void 0:n.daysUntilUnlock)!==void 0&&n.daysUntilUnlock>0&&e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[e.jsx(it,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm",children:"Days Until Unlock"})]}),e.jsxs("span",{className:"font-medium text-gray-900",children:[n.daysUntilUnlock," days"]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[e.jsx(it,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm",children:"Created"})]}),e.jsx("span",{className:"font-medium text-gray-900",children:E(r.createdAt)})]})]})}),r.autoDepositEnabled&&e.jsx(W,{children:e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:"Auto-Deposit"}),e.jsx("div",{className:"px-2 py-1 bg-green-100 rounded-full",children:e.jsx("span",{className:"text-xs font-medium text-green-700",children:"Active"})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Amount"}),e.jsx("span",{className:"font-medium text-gray-900",children:_(r.autoDepositAmount||0)})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Frequency"}),e.jsx("span",{className:"font-medium text-gray-900 capitalize",children:r.autoDepositFrequency})]}),r.nextAutoDepositDate&&e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Next Deposit"}),e.jsx("span",{className:"font-medium text-gray-900",children:E(r.nextAutoDepositDate)})]})]})}),(n==null?void 0:n.stats)&&e.jsx(W,{children:e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:"Statistics"}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Total Contributions"}),e.jsxs("span",{className:"font-medium text-green-600",children:["+",_(n.stats.totalContributions)]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Total Withdrawals"}),e.jsxs("span",{className:"font-medium text-red-600",children:["-",_(n.stats.totalWithdrawals)]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Contribution Count"}),e.jsx("span",{className:"font-medium text-gray-900",children:n.stats.contributionCount})]})]})}),c&&!c.canWithdraw&&e.jsx(W,{className:"bg-amber-50 border-amber-200",children:e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(ut,{className:"w-5 h-5 text-amber-600 flex-shrink-0 mt-0.5"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-amber-800",children:"Withdrawal Restricted"}),e.jsx("p",{className:"text-sm text-amber-700 mt-1",children:c.reason}),c.canWithdrawWithPenalty&&e.jsxs("p",{className:"text-sm text-amber-700 mt-2",children:["Early withdrawal available with ",c.penaltyPercent,"% penalty."]})]})]})})})]})]})]}),r&&e.jsxs(e.Fragment,{children:[e.jsx(nD,{isOpen:p,onClose:()=>x(!1),pot:r,onSuccess:()=>x(!1)}),e.jsx(DQ,{isOpen:g,onClose:()=>f(!1),pot:r,onSuccess:()=>f(!1)})]}),v&&r&&e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[e.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:()=>w(!1)}),e.jsxs("div",{className:"relative bg-white rounded-2xl shadow-xl w-full max-w-md mx-4 p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Close Pot?"}),e.jsxs("p",{className:"text-gray-600 mb-4",children:['Are you sure you want to close "',r.name,'"?',r.currentBalance>0&&e.jsxs(e.Fragment,{children:[" ","Your remaining balance of ",_(r.currentBalance)," will be transferred to your primary wallet."]})]}),r.lockStatus==="LOCKED"&&e.jsx("div",{className:"p-3 bg-amber-50 rounded-lg mb-4",children:e.jsxs("p",{className:"text-sm text-amber-700",children:[e.jsx(ut,{className:"w-4 h-4 inline mr-1"}),"Early closure may incur a penalty fee."]})}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>w(!1),className:"flex-1 py-2.5 px-4 rounded-xl border border-gray-300 text-gray-700 font-medium hover:bg-gray-50 transition-colors",children:"Cancel"}),e.jsx("button",{onClick:I,disabled:u.isPending,className:"flex-1 py-2.5 px-4 rounded-xl bg-red-600 text-white font-medium hover:bg-red-700 transition-colors flex items-center justify-center gap-2",children:u.isPending?e.jsxs(e.Fragment,{children:[e.jsx(Ie,{className:"w-4 h-4 animate-spin"}),"Closing..."]}):"Close Pot"})]})]})]})]}):e.jsx(ka,{children:e.jsxs("div",{className:"text-center py-16",children:[e.jsx("p",{className:"text-gray-500",children:"Pot not found"}),e.jsx(Qe,{to:"/pots",className:"text-primary-600 hover:text-primary-700 mt-4 inline-block",children:"Back to Pots"})]})})}const NX={1:{label:"Basic",description:"Email verification"},2:{label:"Advanced",description:"ID verification required"},3:{label:"Enhanced",description:"Full KYC with address proof"}};function kX(){const t=At(),{user:s}=wt(),{data:r,isLoading:a}=x2(),{data:n,isLoading:i}=qi(),{data:l}=Kf(),{data:o}=VR(),c=pY(),[d,u]=h.useState(null);h.useEffect(()=>{Ut.getDefaultCurrency().then(u)},[]);const m=(d==null?void 0:d.symbol)||"",p=ne=>`${m}${ne.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}`,[x,g]=h.useState(null),[f,b]=h.useState(null),[j,v]=h.useState(!1),[w,y]=h.useState(!1),[C,S]=h.useState(!1),[_,E]=h.useState("details"),[A,R]=h.useState(""),[I,N]=h.useState(""),[P,k]=h.useState(""),[D,$]=h.useState(!1),[L,B]=h.useState(!1),[T,O]=h.useState({street:"",city:"",state:"",postalCode:"",country:""}),[q,K]=h.useState(!1),[le,X]=h.useState(null),se=h.useRef(null),de=(s==null?void 0:s.kycTier)||1,fe=new Set([...(o==null?void 0:o.filter(ne=>ne.status!=="REJECTED"&&ne.status!=="CANCELLED").map(ne=>ne.cardTypeId))||[]]),z=ne=>{se.current&&se.current.scrollBy({left:ne==="left"?-340:340,behavior:"smooth"})},re=(ne,Ae=!1)=>{const Fe=fe.has(ne.id);g(ne),b(n&&n.length===1?n[0].id:null),v(!0),S(!1),E("details"),K(Fe||Ae),X(null),R(!Fe&&!Ae&&s?`${s.firstName||""} ${s.lastName||""}`.trim():""),N(""),k(""),O({street:"",city:"",state:"",postalCode:"",country:""})},ie=()=>{E("details"),R(""),N(""),k(""),O({street:"",city:"",state:"",postalCode:"",country:""}),K(!1),X(null)},Y=()=>{const ne=A.trim().length>=3,Ae=I.length===4&&/^\d{4}$/.test(I),Fe=I===P;if(q&&!le)return!1;if((x==null?void 0:x.cardType)==="PHYSICAL"){const at=T.street&&T.city&&T.state&&T.postalCode&&T.country;return ne&&Ae&&Fe&&at}return ne&&Ae&&Fe},G=async()=>{if(!(!x||!f)){y(!0);try{await c.mutateAsync({cardTypeId:x.id,walletId:f,cardholderName:A.trim(),cardPin:I,shippingAddress:x.cardType==="PHYSICAL"?T:void 0,giftRecipientId:q&&le?le.id:void 0}),S(!0),ie()}catch(ne){console.error("Failed to create order:",ne);const Ae=(ne==null?void 0:ne.message)||(ne==null?void 0:ne.toString())||"Unknown error";alert(`Failed to purchase card: ${Ae}`)}finally{y(!1)}}},H=n==null?void 0:n.find(ne=>ne.id===f),ue=H&&x?H.balance>=x.price:!1,me=(o==null?void 0:o.filter(ne=>ne.status==="PENDING"||ne.status==="GENERATED"))||[];return e.jsxs(ka,{children:[e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Card Marketplace"}),e.jsx("p",{className:"text-gray-500 mt-1",children:"Choose a card that fits your needs"})]}),me.length>0&&e.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-yellow-100 rounded-full",children:e.jsx(Je,{className:"w-5 h-5 text-yellow-600"})}),e.jsxs("div",{children:[e.jsxs("p",{className:"font-medium text-yellow-800",children:["You have ",me.length," card order",me.length>1?"s":""," pending"]}),e.jsxs("p",{className:"text-sm text-yellow-600",children:["Your card",me.length>1?"s are":" is"," being processed"]})]})]}),e.jsx(De,{variant:"outline",size:"sm",onClick:()=>t("/cards"),children:"View My Cards"})]}),a?e.jsx("div",{className:"text-center py-12",children:"Loading available cards..."}):r&&r.length>0?e.jsxs("div",{className:"relative",children:[e.jsx("button",{onClick:()=>z("left"),className:"absolute left-0 top-1/2 -translate-y-1/2 z-10 p-2 bg-white shadow-lg rounded-full hover:bg-gray-50 -ml-4",children:e.jsx(Zj,{className:"w-6 h-6 text-gray-600"})}),e.jsx("button",{onClick:()=>z("right"),className:"absolute right-0 top-1/2 -translate-y-1/2 z-10 p-2 bg-white shadow-lg rounded-full hover:bg-gray-50 -mr-4",children:e.jsx(Vs,{className:"w-6 h-6 text-gray-600"})}),e.jsx("div",{ref:se,className:"flex gap-6 overflow-x-auto pb-4 scroll-smooth scrollbar-hide",style:{scrollbarWidth:"none",msOverflowStyle:"none"},children:r.map(ne=>{var at;const Ae=de>=ne.requiredKycLevel;ne.cardType;const Fe=fe.has(ne.id);return e.jsx("div",{className:"flex-none w-80",children:e.jsxs(W,{className:"overflow-hidden hover:shadow-lg transition-shadow",children:[e.jsxs("div",{className:oe("relative aspect-[1.586/1] p-6 text-white bg-gradient-to-br cursor-pointer",ne.colorGradient),onClick:()=>re(ne),children:[e.jsxs("div",{className:"absolute top-4 right-4 flex gap-2",children:[Fe&&e.jsx("span",{className:"px-2 py-1 bg-green-500/90 backdrop-blur-sm rounded-full text-xs font-medium",children:"Owned"}),e.jsx("span",{className:"px-2 py-1 bg-white/20 backdrop-blur-sm rounded-full text-xs font-medium",children:ne.cardType})]}),e.jsxs("div",{className:"flex flex-col h-full justify-between",children:[e.jsxs("div",{children:[e.jsx(Je,{className:"w-10 h-10 opacity-80"}),e.jsx("p",{className:"font-bold text-lg mt-2",children:ne.name})]}),e.jsxs("div",{className:"flex justify-between items-end",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs opacity-70",children:"Starting at"}),e.jsx("p",{className:"text-2xl font-bold",children:ne.price===0?"FREE":p(ne.price)})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-xs opacity-70",children:"Requires"}),e.jsxs("p",{className:"text-sm",children:[(at=NX[ne.requiredKycLevel])==null?void 0:at.label," KYC"]})]})]})]}),!Ae&&e.jsx("div",{className:"absolute inset-0 bg-black/60 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Xt,{className:"w-10 h-10 mx-auto mb-2"}),e.jsxs("p",{className:"font-medium",children:["KYC Level ",ne.requiredKycLevel," Required"]}),e.jsx(De,{variant:"outline",size:"sm",className:"mt-2 bg-white/10 border-white/30 hover:bg-white/20",children:"Upgrade KYC"})]})})]}),e.jsxs("div",{className:"p-4 space-y-4",children:[e.jsx("p",{className:"text-sm text-gray-600 line-clamp-2",children:ne.description}),e.jsx("div",{className:"space-y-2",children:ne.features.slice(0,3).map((J,Q)=>e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(Rs,{className:"w-4 h-4 text-green-500 flex-shrink-0"}),e.jsx("span",{className:"text-gray-600",children:J})]},Q))}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs text-gray-500 pt-2 border-t",children:[e.jsxs("div",{children:[e.jsx("p",{children:"Transaction Fee"}),e.jsxs("p",{className:"font-medium text-gray-700",children:[ne.transactionFeePercentage,"% + ",p(ne.transactionFeeFixed)]})]}),e.jsxs("div",{children:[e.jsx("p",{children:"Daily Limit"}),e.jsxs("p",{className:"font-medium text-gray-700",children:[m,ne.dailyLimit.toLocaleString()]})]})]}),Fe?e.jsxs(De,{className:"w-full",variant:"outline",onClick:()=>re(ne,!0),disabled:!Ae,children:[e.jsx(Pp,{className:"w-4 h-4 mr-2"}),"Gift This Card"]}):e.jsx(De,{className:"w-full",onClick:()=>re(ne),disabled:!Ae,children:Ae?e.jsxs(e.Fragment,{children:["Get This Card",e.jsx(Lr,{className:"w-4 h-4 ml-2"})]}):e.jsxs(e.Fragment,{children:[e.jsx(Xt,{className:"w-4 h-4 mr-2"}),"Upgrade KYC First"]})})]})]})},ne.id)})})]}):e.jsxs(W,{className:"text-center py-12",children:[e.jsx(Je,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No cards available"}),e.jsx("p",{className:"text-gray-500",children:"Check back later for new card offerings"})]}),l&&l.length>0&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"My Cards"}),e.jsx(De,{variant:"outline",size:"sm",onClick:()=>t("/cards"),children:"View All"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:l.slice(0,3).map(ne=>e.jsx(W,{className:"p-4 cursor-pointer hover:shadow-md transition-shadow",onClick:()=>t("/cards"),children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-16 h-10 bg-gradient-to-br from-blue-600 to-blue-800 rounded flex items-center justify-center",children:e.jsx(Je,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:ne.maskedNumber}),e.jsxs("p",{className:"text-sm text-gray-500",children:[ne.type," Card  ",ne.status]})]})]})},ne.id))})]})]}),j&&x&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-end sm:items-center justify-center bg-black bg-opacity-50",children:e.jsx(W,{className:"w-full sm:max-w-lg sm:mx-4 rounded-t-3xl sm:rounded-2xl max-h-[90vh] overflow-y-auto",children:C?e.jsxs("div",{className:"p-8 text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(Rs,{className:"w-8 h-8 text-green-600"})}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Order Placed!"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Your card order has been submitted for review. You'll be notified once it's approved."}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(De,{className:"w-full",onClick:()=>t("/cards"),children:"View My Cards"}),e.jsx(De,{variant:"outline",className:"w-full",onClick:()=>{v(!1),S(!1)},children:"Continue Shopping"})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:oe("relative p-6 text-white bg-gradient-to-br",x.colorGradient),children:[e.jsx("button",{onClick:()=>{_==="details"?v(!1):E(_==="wallet"?"details":"wallet")},className:"absolute top-4 right-4 p-2 hover:bg-white/20 rounded-full transition-colors",children:e.jsx(Zj,{className:"w-5 h-5"})}),e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"p-3 bg-white/20 backdrop-blur-sm rounded-xl",children:e.jsx(Je,{className:"w-8 h-8"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-bold text-xl",children:x.name}),e.jsxs("p",{className:"text-white/80 text-sm",children:[x.cardType," Card"]})]})]}),e.jsxs("div",{className:"mt-6",children:[e.jsx("p",{className:"text-white/70 text-sm",children:"Card Price"}),e.jsx("p",{className:"text-3xl font-bold",children:x.price===0?"FREE":p(x.price)})]}),e.jsx("div",{className:"flex gap-2 mt-4",children:["details","wallet","confirm"].map((ne,Ae)=>e.jsx("div",{className:oe("flex-1 h-1 rounded-full",_===ne?"bg-white":["details","wallet","confirm"].indexOf(_)>Ae?"bg-white/60":"bg-white/30")},ne))})]}),e.jsxs("div",{className:"p-6 space-y-6",children:[_==="details"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600 mb-4",children:[q?e.jsx(Pp,{className:"w-4 h-4 text-primary-500"}):e.jsx(Es,{className:"w-4 h-4 text-primary-500"}),e.jsxs("span",{className:"font-medium",children:["Step 1: ",q?"Gift Card Details":"Card Details"]})]}),q&&e.jsxs("div",{className:"flex items-center gap-3 p-4 bg-purple-50 border border-purple-200 rounded-lg",children:[e.jsx(Pp,{className:"w-5 h-5 text-purple-500 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-purple-800",children:"Purchasing as a Gift"}),e.jsx("p",{className:"text-sm text-purple-600",children:fe.has((x==null?void 0:x.id)||"")?"You already own this card. You can gift it to someone else.":"This card will be gifted to another user."})]})]}),q&&e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[e.jsx(ts,{className:"w-4 h-4 inline mr-1"}),"Gift Recipient"]}),e.jsx(f2,{onSelect:ne=>{X({id:ne.id,firstName:ne.first_name||"",lastName:ne.last_name||"",email:ne.email||""}),R(`${ne.first_name||""} ${ne.last_name||""}`.trim().toUpperCase())},placeholder:"Search for recipient by name, email, or phone..."}),le&&e.jsxs("div",{className:"mt-2 p-3 bg-green-50 border border-green-200 rounded-lg flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"font-medium text-green-800",children:[le.firstName," ",le.lastName]}),e.jsx("p",{className:"text-sm text-green-600",children:le.email})]}),e.jsx("button",{type:"button",onClick:()=>{X(null),R("")},className:"text-green-600 hover:text-green-800",children:"Change"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[e.jsx(Es,{className:"w-4 h-4 inline mr-1"}),"Cardholder Name"]}),e.jsx("input",{type:"text",value:A,onChange:ne=>R(ne.target.value.toUpperCase()),placeholder:"Enter name as it will appear on card",className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-primary-500 focus:border-primary-500 uppercase",maxLength:26,disabled:q&&le!==null}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Name will appear on the card (max 26 characters)"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[e.jsx(Xs,{className:"w-4 h-4 inline mr-1"}),"Set 4-Digit Card PIN"]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:D?"text":"password",value:I,onChange:ne=>{const Ae=ne.target.value.replace(/\D/g,"").slice(0,4);N(Ae)},placeholder:"Enter 4-digit PIN",className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-primary-500 focus:border-primary-500",maxLength:4}),e.jsx("button",{type:"button",onClick:()=>$(!D),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600",children:D?e.jsx(Ln,{className:"w-5 h-5"}):e.jsx(es,{className:"w-5 h-5"})})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[e.jsx(Xs,{className:"w-4 h-4 inline mr-1"}),"Confirm PIN"]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:L?"text":"password",value:P,onChange:ne=>{const Ae=ne.target.value.replace(/\D/g,"").slice(0,4);k(Ae)},placeholder:"Re-enter PIN",className:oe("w-full px-4 py-3 border rounded-xl focus:ring-2 focus:ring-primary-500 focus:border-primary-500",P&&P!==I?"border-red-300 bg-red-50":"border-gray-300"),maxLength:4}),e.jsx("button",{type:"button",onClick:()=>B(!L),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600",children:L?e.jsx(Ln,{className:"w-5 h-5"}):e.jsx(es,{className:"w-5 h-5"})})]}),P&&P!==I&&e.jsx("p",{className:"text-xs text-red-500 mt-1",children:"PINs do not match"})]}),x.cardType==="PHYSICAL"&&e.jsxs("div",{className:"space-y-4 pt-4 border-t",children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700",children:[e.jsx(Vi,{className:"w-4 h-4 inline mr-1"}),"Delivery Address"]}),e.jsx("input",{type:"text",value:T.street,onChange:ne=>O({...T,street:ne.target.value}),placeholder:"Street Address",className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-primary-500"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsx("input",{type:"text",value:T.city,onChange:ne=>O({...T,city:ne.target.value}),placeholder:"City",className:"px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-primary-500"}),e.jsx("input",{type:"text",value:T.state,onChange:ne=>O({...T,state:ne.target.value}),placeholder:"State/Province",className:"px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-primary-500"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsx("input",{type:"text",value:T.postalCode,onChange:ne=>O({...T,postalCode:ne.target.value}),placeholder:"Postal Code",className:"px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-primary-500"}),e.jsx("input",{type:"text",value:T.country,onChange:ne=>O({...T,country:ne.target.value}),placeholder:"Country",className:"px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-primary-500"})]})]}),e.jsxs(De,{className:"w-full",onClick:()=>E("wallet"),disabled:!Y(),children:["Continue to Payment",e.jsx(Lr,{className:"w-4 h-4 ml-2"})]})]}),_==="wallet"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600 mb-4",children:[e.jsx(jt,{className:"w-4 h-4 text-primary-500"}),e.jsx("span",{className:"font-medium",children:"Step 2: Select Payment Wallet"})]}),i?e.jsx("p",{className:"text-gray-500",children:"Loading wallets..."}):n&&n.length>0?e.jsx("div",{className:"space-y-2",children:n.map(ne=>{const Ae=ne.balance>=x.price;return e.jsx("button",{onClick:()=>b(ne.id),className:oe("w-full p-4 border rounded-xl text-left transition-all",f===ne.id?"border-primary-500 bg-primary-50 ring-2 ring-primary-200":Ae?"border-gray-200 hover:border-gray-300":"border-gray-200 bg-gray-50"),children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:oe("w-10 h-10 rounded-full flex items-center justify-center",Ae?"bg-green-100":"bg-gray-100"),children:e.jsx(jt,{className:oe("w-5 h-5",Ae?"text-green-600":"text-gray-400")})}),e.jsxs("div",{children:[e.jsxs("p",{className:"font-medium",children:[ne.currency," Wallet"]}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Balance: ",p(ne.balance)]})]})]}),f===ne.id&&e.jsx(Rs,{className:"w-5 h-5 text-primary-600"}),!Ae&&e.jsx("span",{className:"text-xs text-red-500",children:"Insufficient"})]})},ne.id)})}):e.jsxs("div",{className:"text-center py-4 border border-dashed border-gray-300 rounded-xl",children:[e.jsx(jt,{className:"w-8 h-8 text-gray-400 mx-auto mb-2"}),e.jsx("p",{className:"text-gray-500",children:"No wallets available"}),e.jsx(De,{variant:"outline",size:"sm",className:"mt-2",children:"Create Wallet"})]}),f&&!ue&&e.jsxs("div",{className:"flex items-center gap-3 p-4 bg-red-50 border border-red-200 rounded-lg",children:[e.jsx(ut,{className:"w-5 h-5 text-red-500 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-red-800",children:"Insufficient Balance"}),e.jsxs("p",{className:"text-sm text-red-600",children:["You need ",p(x.price-((H==null?void 0:H.balance)||0))," more."]})]})]}),e.jsxs(De,{className:"w-full",onClick:()=>E("confirm"),disabled:!f||!ue,children:["Review Order",e.jsx(Lr,{className:"w-4 h-4 ml-2"})]})]}),_==="confirm"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600 mb-4",children:[e.jsx(Rs,{className:"w-4 h-4 text-primary-500"}),e.jsx("span",{className:"font-medium",children:"Step 3: Review & Confirm"})]}),e.jsxs("div",{className:"bg-gray-50 rounded-xl p-4 space-y-3",children:[q&&le&&e.jsxs("div",{className:"flex items-center gap-2 p-2 bg-purple-100 rounded-lg mb-2",children:[e.jsx(Pp,{className:"w-4 h-4 text-purple-600"}),e.jsxs("span",{className:"text-sm font-medium text-purple-800",children:["Gift for ",le.firstName," ",le.lastName]})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Card"}),e.jsx("span",{className:"font-medium",children:x.name})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Cardholder"}),e.jsx("span",{className:"font-medium",children:A})]}),q&&le&&e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Recipient"}),e.jsx("span",{className:"font-medium",children:le.email})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Pay from"}),e.jsxs("span",{className:"font-medium",children:[H==null?void 0:H.currency," Wallet"]})]}),x.cardType==="PHYSICAL"&&e.jsxs("div",{className:"pt-2 border-t",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Delivery Address:"}),e.jsxs("p",{className:"text-sm font-medium mt-1",children:[T.street,", ",T.city,", ",T.state," ",T.postalCode,", ",T.country]})]}),e.jsxs("div",{className:"border-t pt-3 space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Card Price"}),e.jsx("span",{className:"font-medium",children:p(x.price)})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Transaction Fee"}),e.jsxs("span",{className:"font-medium",children:[x.transactionFeePercentage,"% + ",p(x.transactionFeeFixed)]})]}),e.jsxs("div",{className:"border-t pt-2 flex justify-between",children:[e.jsx("span",{className:"font-bold",children:"Total"}),e.jsx("span",{className:"font-bold text-lg",children:p(x.price)})]})]})]}),e.jsx(MI,{amount:x.price.toFixed(2),recipientName:x.name,onConfirm:G,disabled:!f||!ue,isProcessing:w})]}),e.jsx("button",{onClick:()=>v(!1),className:"w-full text-center text-gray-500 text-sm hover:text-gray-700",children:"Cancel"})]})]})})})]})}function CX(){const t=At(),{data:s,isLoading:r}=Kf(),{data:a}=VR(),{data:n}=qi(),i=FR(),l=OR(),o=LR(),c=yY(),[d,u]=h.useState(null);h.useEffect(()=>{Ut.getDefaultCurrency().then(u)},[]);const m=(d==null?void 0:d.symbol)||"",[p,x]=h.useState(null),[g,f]=h.useState(null),[b,j]=h.useState(!1),[v,w]=h.useState(""),[y,C]=h.useState(null),[S,_]=h.useState(!1),E=async k=>{try{k.status==="BLOCKED"?await l.mutateAsync(k.id):await i.mutateAsync(k.id)}catch(D){console.error("Failed to update card status:",D)}},A=async k=>{try{await o.mutateAsync(k)}catch(D){console.error("Failed to activate card:",D)}},R=async()=>{if(v.trim())try{await c.mutateAsync(v.trim()),j(!1),w(""),alert("Card activated successfully!")}catch(k){alert(k.message||"Failed to activate card")}},I=(a==null?void 0:a.filter(k=>["PENDING","GENERATED"].includes(k.status)))||[],N=(s==null?void 0:s.filter(k=>k.status==="ACTIVE"))||[],P=(s==null?void 0:s.filter(k=>k.status!=="ACTIVE"))||[];return e.jsxs(ka,{children:[e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"My Cards"}),e.jsx("p",{className:"text-gray-500 mt-1",children:"Manage your virtual and physical cards"})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs(De,{variant:"outline",onClick:()=>j(!0),children:[e.jsx(zT,{className:"w-4 h-4 mr-2"}),"Scan QR"]}),e.jsxs(De,{onClick:()=>t("/cards/marketplace"),children:[e.jsx(It,{className:"w-4 h-4 mr-2"}),"Get New Card"]})]})]}),I.length>0&&e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Pending Orders"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:I.map(k=>{var D,$,L;return e.jsx(W,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:oe("w-16 h-10 rounded bg-gradient-to-br flex items-center justify-center",((D=k.cardType)==null?void 0:D.colorGradient)||"from-gray-400 to-gray-600"),children:e.jsx(Je,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium",children:($=k.cardType)==null?void 0:$.name}),e.jsx("div",{className:"flex items-center gap-2 mt-1",children:k.status==="PENDING"?e.jsxs("span",{className:"flex items-center gap-1 text-xs text-yellow-600",children:[e.jsx(it,{className:"w-3 h-3"}),"Under Review"]}):k.status==="GENERATED"?e.jsxs("span",{className:"flex items-center gap-1 text-xs text-purple-600",children:[e.jsx(be,{className:"w-3 h-3"}),"Ready for Activation"]}):null})]}),k.status==="GENERATED"&&((L=k.cardType)==null?void 0:L.cardType)==="PHYSICAL"&&e.jsx(De,{size:"sm",variant:"outline",onClick:()=>j(!0),children:"Activate"})]})},k.id)})})]}),r?e.jsx("div",{className:"text-center py-12",children:"Loading cards..."}):s&&s.length>0?e.jsxs("div",{className:"space-y-6",children:[N.length>0&&e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Active Cards"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:N.map((k,D)=>e.jsx(Y5,{card:k,index:D,showDetails:g===k.id,showFlip:y===k.id,onToggleDetails:()=>f(g===k.id?null:k.id),onToggleFlip:()=>C(y===k.id?null:k.id),onBlock:()=>E(k),onViewDetails:()=>{x(k),_(!0)},isBlocking:i.isPending||l.isPending,currencySymbol:m},k.id))})]}),P.length>0&&e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Inactive Cards"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:P.map((k,D)=>e.jsx(Y5,{card:k,index:D,showDetails:g===k.id,showFlip:y===k.id,onToggleDetails:()=>f(g===k.id?null:k.id),onToggleFlip:()=>C(y===k.id?null:k.id),onBlock:()=>E(k),onActivate:()=>A(k.id),onViewDetails:()=>{x(k),_(!0)},isBlocking:i.isPending||l.isPending,isActivating:o.isPending,currencySymbol:m},k.id))})]})]}):e.jsxs(W,{className:"text-center py-12",children:[e.jsx(Je,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No cards yet"}),e.jsx("p",{className:"text-gray-500 mb-4",children:"Get your first card from the marketplace"}),e.jsxs(De,{onClick:()=>t("/cards/marketplace"),children:[e.jsx(It,{className:"w-4 h-4 mr-2"}),"Browse Cards"]})]})]}),b&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50 p-4",children:e.jsxs(W,{className:"w-full max-w-md",children:[e.jsx(Sr,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(_r,{children:"Activate Physical Card"}),e.jsx("button",{onClick:()=>j(!1),children:e.jsx(lt,{className:"w-5 h-5 text-gray-400 hover:text-gray-600"})})]})}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-primary-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(Na,{className:"w-8 h-8 text-primary-600"})}),e.jsx("p",{className:"text-gray-600",children:"Scan the QR code on the back of your physical card or enter it manually below."})]}),e.jsx("div",{children:e.jsx(_n,{label:"QR Code",value:v,onChange:k=>w(k.target.value),placeholder:"Enter QR code from your card"})}),e.jsx("div",{className:"bg-gray-50 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(ut,{className:"w-5 h-5 text-gray-400 flex-shrink-0 mt-0.5"}),e.jsx("p",{className:"text-sm text-gray-600",children:"The QR code is printed on the back of your physical card. Make sure you have received your card before activating."})]})}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(De,{variant:"outline",className:"flex-1",onClick:()=>j(!1),children:"Cancel"}),e.jsx(De,{className:"flex-1",onClick:R,isLoading:c.isPending,disabled:!v.trim(),children:"Activate Card"})]})]})]})}),S&&p&&e.jsx(SX,{card:p,onClose:()=>{_(!1),x(null)},currencySymbol:m})]})}function Y5({card:t,index:s,showDetails:r,showFlip:a,onToggleDetails:n,onToggleFlip:i,onBlock:l,onActivate:o,onViewDetails:c,isBlocking:d,isActivating:u,currencySymbol:m}){const[p,x]=h.useState(!1),[g,f]=h.useState({nfcPayment:!0,onlinePayment:!0,international:!1,atmWithdrawal:!0}),b=(w,y)=>{const C=["from-blue-600 to-blue-800","from-purple-600 to-purple-800","from-indigo-600 to-indigo-800","from-teal-600 to-teal-800"];return w==="PHYSICAL"?"from-gray-700 to-gray-900":C[y%C.length]},j=`peeappay://pay?card=${t.id}&wallet=${t.walletId}&name=${encodeURIComponent(t.cardholderName)}`,v=w=>{f(y=>({...y,[w]:!y[w]}))};return e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"card-flip-container",style:{aspectRatio:"1.586/1"},children:e.jsxs("div",{className:oe("card-flip-inner",a&&"flipped"),onClick:i,children:[e.jsxs("div",{className:oe("card-front bg-gradient-to-br p-6 text-white shadow-lg cursor-pointer card-shine",b(t.type,s),t.status!=="ACTIVE"&&"opacity-60"),children:[t.status==="BLOCKED"&&e.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-50 rounded-xl flex items-center justify-center z-10",children:e.jsx(Xs,{className:"w-12 h-12"})}),e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"text-xs uppercase tracking-wider opacity-80",children:[t.type," Card"]}),e.jsx("p",{className:"text-sm mt-1 opacity-90",children:t.cardholderName})]}),e.jsx(Je,{className:"w-8 h-8"})]}),e.jsxs("div",{className:"absolute bottom-6 left-6 right-6",children:[e.jsx("p",{className:"text-lg tracking-widest font-mono",children:r?t.cardNumber:t.maskedNumber||"   "}),e.jsxs("div",{className:"flex justify-between mt-2",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs opacity-70",children:"Expires"}),e.jsxs("p",{className:"text-sm",children:[String(t.expiryMonth).padStart(2,"0"),"/",String(t.expiryYear).slice(-2)]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-xs opacity-70",children:"Status"}),e.jsx("p",{className:"text-sm",children:t.status})]})]})]}),e.jsx("div",{className:"absolute top-2 right-2 opacity-50",children:e.jsx(vt,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"card-back bg-gradient-to-br from-gray-700 to-gray-900 shadow-lg overflow-hidden cursor-pointer",children:[e.jsx("div",{className:"absolute top-6 left-0 right-0 h-10 bg-gray-800"}),e.jsx("div",{className:"absolute top-20 left-4 right-20 h-8 bg-gray-200 rounded flex items-center px-2",children:e.jsx("p",{className:"text-gray-600 text-xs font-mono tracking-wider truncate",children:t.cardholderName})}),e.jsx("div",{className:"absolute bottom-4 right-4 bg-white p-2 rounded-lg shadow-md",children:e.jsx(L0,{value:j,size:80,level:"M"})}),e.jsxs("div",{className:"absolute bottom-4 left-4 max-w-[140px] text-white",children:[e.jsx("p",{className:"text-xs font-semibold mb-1",children:"Scan to Pay"}),e.jsx("p",{className:"text-[10px] opacity-70",children:"Use this QR code to make instant payments without NFC"})]}),e.jsxs("div",{className:"absolute top-20 right-4 text-white",children:[e.jsx("p",{className:"text-xs opacity-70",children:"CVV"}),e.jsx("p",{className:"text-sm font-mono",children:""})]}),e.jsx("div",{className:"absolute top-2 right-2 opacity-50",children:e.jsx(vt,{className:"w-4 h-4 text-white"})})]})]})}),e.jsx(W,{padding:"sm",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm",children:[e.jsx("p",{className:"text-gray-500",children:"Daily Limit"}),e.jsxs("p",{className:"font-medium",children:[m,t.dailyLimit.toLocaleString()]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(De,{variant:"ghost",size:"sm",onClick:w=>{w.stopPropagation(),n()},title:"Toggle card number",children:r?e.jsx(Ln,{className:"w-4 h-4"}):e.jsx(es,{className:"w-4 h-4"})}),e.jsx(De,{variant:"ghost",size:"sm",onClick:w=>{w.stopPropagation(),i()},title:"Flip card",children:e.jsx(vt,{className:"w-4 h-4"})}),e.jsx(De,{variant:"ghost",size:"sm",onClick:w=>{w.stopPropagation(),x(!p)},title:"Card controls",children:e.jsx(or,{className:"w-4 h-4"})}),t.status==="INACTIVE"&&o?e.jsx(De,{variant:"outline",size:"sm",onClick:w=>{w.stopPropagation(),o()},isLoading:u,children:"Activate"}):e.jsx(De,{variant:"ghost",size:"sm",onClick:w=>{w.stopPropagation(),l()},title:t.status==="BLOCKED"?"Unblock":"Block",isLoading:d,children:t.status==="BLOCKED"?e.jsx(A0,{className:"w-4 h-4 text-green-500"}):e.jsx(Xs,{className:"w-4 h-4 text-red-500"})}),e.jsx(De,{variant:"ghost",size:"sm",onClick:w=>{w.stopPropagation(),c()},children:e.jsx(nd,{className:"w-4 h-4"})})]})]})}),p&&e.jsx(W,{padding:"sm",className:"animate-slide-up",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("p",{className:"font-medium text-gray-900",children:"Card Controls"}),e.jsx("button",{onClick:()=>x(!1),className:"text-gray-400 hover:text-gray-600",children:e.jsx(lt,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-gray-100",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Mi,{className:"w-5 h-5 text-blue-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:"NFC Payment"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Tap to pay with contactless"})]})]}),e.jsx("button",{onClick:()=>v("nfcPayment"),className:oe("transition-colors",g.nfcPayment?"text-green-500":"text-gray-300"),children:g.nfcPayment?e.jsx(kr,{className:"w-8 h-8"}):e.jsx(Nr,{className:"w-8 h-8"})})]}),e.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-gray-100",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Mf,{className:"w-5 h-5 text-purple-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:"Online Payment"}),e.jsx("p",{className:"text-xs text-gray-500",children:"E-commerce transactions"})]})]}),e.jsx("button",{onClick:()=>v("onlinePayment"),className:oe("transition-colors",g.onlinePayment?"text-green-500":"text-gray-300"),children:g.onlinePayment?e.jsx(kr,{className:"w-8 h-8"}):e.jsx(Nr,{className:"w-8 h-8"})})]}),e.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-gray-100",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(li,{className:"w-5 h-5 text-green-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:"International"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Foreign currency transactions"})]})]}),e.jsx("button",{onClick:()=>v("international"),className:oe("transition-colors",g.international?"text-green-500":"text-gray-300"),children:g.international?e.jsx(kr,{className:"w-8 h-8"}):e.jsx(Nr,{className:"w-8 h-8"})})]}),e.jsxs("div",{className:"flex items-center justify-between py-2",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx($T,{className:"w-5 h-5 text-orange-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:"ATM Withdrawal"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Cash withdrawals at ATMs"})]})]}),e.jsx("button",{onClick:()=>v("atmWithdrawal"),className:oe("transition-colors",g.atmWithdrawal?"text-green-500":"text-gray-300"),children:g.atmWithdrawal?e.jsx(kr,{className:"w-8 h-8"}):e.jsx(Nr,{className:"w-8 h-8"})})]})]})})]})}function SX({card:t,onClose:s,currencySymbol:r}){var l;const{data:a}=bY(t.id),[n,i]=h.useState(!1);return e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50 p-4",children:e.jsxs(W,{className:"w-full max-w-lg max-h-[90vh] overflow-y-auto",children:[e.jsx(Sr,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(_r,{children:"Card Details"}),e.jsx("button",{onClick:s,children:e.jsx(lt,{className:"w-5 h-5 text-gray-400 hover:text-gray-600"})})]})}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"bg-gradient-to-br from-blue-600 to-blue-800 rounded-xl p-6 text-white",children:[e.jsxs("div",{className:"flex justify-between items-start mb-8",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"text-xs uppercase tracking-wider opacity-80",children:[t.type," Card"]}),e.jsx("p",{className:"font-bold mt-1",children:((l=a==null?void 0:a.cardType)==null?void 0:l.name)||"Card"})]}),e.jsx(Je,{className:"w-8 h-8 opacity-80"})]}),e.jsx("p",{className:"text-xl tracking-widest font-mono mb-4",children:n?t.cardNumber.replace(/(.{4})/g,"$1 ").trim():"   "+t.cardNumber.slice(-4)}),e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs opacity-70",children:"EXPIRES"}),e.jsxs("p",{children:[String(t.expiryMonth).padStart(2,"0"),"/",String(t.expiryYear).slice(-2)]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-xs opacity-70",children:"CARDHOLDER"}),e.jsx("p",{children:t.cardholderName.toUpperCase()})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between py-2 border-b",children:[e.jsx("span",{className:"text-gray-500",children:"Status"}),e.jsx("span",{className:oe("font-medium",t.status==="ACTIVE"&&"text-green-600",t.status==="BLOCKED"&&"text-red-600",t.status==="INACTIVE"&&"text-yellow-600"),children:t.status})]}),e.jsxs("div",{className:"flex items-center justify-between py-2 border-b",children:[e.jsx("span",{className:"text-gray-500",children:"Card Type"}),e.jsx("span",{className:"font-medium",children:t.type})]}),e.jsxs("div",{className:"flex items-center justify-between py-2 border-b",children:[e.jsx("span",{className:"text-gray-500",children:"Daily Limit"}),e.jsxs("span",{className:"font-medium",children:[r,t.dailyLimit.toLocaleString()]})]}),e.jsxs("div",{className:"flex items-center justify-between py-2 border-b",children:[e.jsx("span",{className:"text-gray-500",children:"Monthly Limit"}),e.jsxs("span",{className:"font-medium",children:[r,t.monthlyLimit.toLocaleString()]})]}),e.jsxs("div",{className:"flex items-center justify-between py-2",children:[e.jsx("span",{className:"text-gray-500",children:"Created"}),e.jsx("span",{className:"font-medium",children:new Date(t.createdAt).toLocaleDateString()})]})]}),e.jsx(De,{variant:"outline",className:"w-full",onClick:()=>i(!n),children:n?e.jsxs(e.Fragment,{children:[e.jsx(Ln,{className:"w-4 h-4 mr-2"}),"Hide Card Details"]}):e.jsxs(e.Fragment,{children:[e.jsx(es,{className:"w-4 h-4 mr-2"}),"Show Full Card Number"]})}),e.jsx(De,{variant:"outline",className:"w-full",onClick:s,children:"Close"})]})]})})}const Q5=[{id:"edsa",name:"EDSA - Electricity Distribution",shortName:"EDSA",logo:"/providers/edsa.png",category:"electricity",description:"Electricity Distribution and Supply Authority",accountLabel:"Meter Number",accountPlaceholder:"Enter your meter number",minAmount:10,maxAmount:5e3},{id:"gvwc",name:"GVWC - Guma Valley Water",shortName:"GVWC",logo:"/providers/gvwc.png",category:"water",description:"Guma Valley Water Company",accountLabel:"Account Number",accountPlaceholder:"Enter your account number",minAmount:5,maxAmount:1e3},{id:"dstv",name:"DStv Subscription",shortName:"DStv",logo:"/providers/dstv.png",category:"tv",description:"MultiChoice DStv",accountLabel:"Smart Card Number",accountPlaceholder:"Enter your smart card number",minAmount:20,maxAmount:500},{id:"gotv",name:"GOtv Subscription",shortName:"GOtv",logo:"/providers/gotv.png",category:"tv",description:"MultiChoice GOtv",accountLabel:"IUC Number",accountPlaceholder:"Enter your IUC number",minAmount:10,maxAmount:200}],_X={electricity:[20,50,100,200],water:[10,25,50,100],tv:[25,50,100,150]},Gp={electricity:ui,water:xV,tv:LV},Ol={electricity:{bg:"bg-yellow-100",text:"text-yellow-700",icon:"text-yellow-600"},water:{bg:"bg-blue-100",text:"text-blue-700",icon:"text-blue-600"},tv:{bg:"bg-purple-100",text:"text-purple-700",icon:"text-purple-600"}};function EX(){const{user:t}=wt(),[s,r]=h.useState("category"),[a,n]=h.useState(null),[i,l]=h.useState(null),[o,c]=h.useState(""),[d,u]=h.useState(""),[m,p]=h.useState(!1),[x,g]=h.useState(null),[f,b]=h.useState(""),[j,v]=h.useState(0),[w,y]=h.useState(!1),[C,S]=h.useState(!1),[_,E]=h.useState(!1),[A,R]=h.useState([]),[I,N]=h.useState(null);h.useEffect(()=>{Ut.getDefaultCurrency().then(N)},[]);const P=(I==null?void 0:I.symbol)||"Le",k=z=>`${P}${z.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}`;h.useEffect(()=>{t!=null&&t.id&&(D(),$(),L())},[t==null?void 0:t.id]);const D=async()=>{if(!(t!=null&&t.id))return;const{data:z}=await U.from("wallets").select("id, balance").eq("user_id",t.id).eq("wallet_type","primary").single();z&&(b(z.id),v(z.balance))},$=async()=>{if(!(t!=null&&t.id))return;const{data:z}=await U.from("users").select("transaction_pin").eq("id",t.id).single();E(!!(z!=null&&z.transaction_pin))},L=async()=>{if(!(t!=null&&t.id))return;const{data:z}=await U.from("transactions").select("*").eq("wallet_id",f).eq("type","BILL_PAYMENT").order("created_at",{ascending:!1}).limit(5);if(z&&z.length>0){const re=z.map(ie=>{var Y,G;return{id:ie.id,provider:((Y=ie.metadata)==null?void 0:Y.provider_name)||"Unknown",accountNumber:((G=ie.metadata)==null?void 0:G.account_number)||"",amount:Math.abs(ie.amount),date:ie.created_at,status:ie.status==="COMPLETED"?"completed":ie.status==="PENDING"?"pending":"failed"}});R(re)}},B=z=>{n(z),r("provider")},T=z=>{l(z),r("details")},O=()=>{if(!i||!o||!d)return;const z=parseFloat(d);if(!(z<i.minAmount||z>i.maxAmount)){if(z>j){g({success:!1,error:"Insufficient balance"}),r("result");return}r("confirm")}},q=()=>{if(!_){S(!0);return}y(!0)},K=()=>{S(!1),E(!0),y(!0)},le=async z=>{if(!(t!=null&&t.id))return!1;const{data:re}=await U.from("users").select("transaction_pin").eq("id",t.id).single();return(re==null?void 0:re.transaction_pin)===z?(y(!1),await X(),!0):!1},X=async()=>{var re;if(!i||!o||!d||!(t!=null&&t.id)||!f)return;p(!0);const z=parseFloat(d);try{const{data:ie}=await U.from("wallets").select("balance").eq("id",f).single();if(!ie||ie.balance<z){g({success:!1,error:"Insufficient balance"}),r("result");return}const Y=`bill_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,{error:G}=await U.from("wallets").update({balance:ie.balance-z,updated_at:new Date().toISOString()}).eq("id",f);if(G)throw G;let H;i.category==="electricity"&&(H=Array.from({length:20},()=>Math.floor(Math.random()*10)).join(""),H=((re=H.match(/.{1,4}/g))==null?void 0:re.join("-"))||H),await U.from("transactions").insert({external_id:Y,wallet_id:f,type:"BILL_PAYMENT",amount:-z,currency:(I==null?void 0:I.code)||"SLE",status:"COMPLETED",description:`${i.name} payment`,metadata:{provider_id:i.id,provider_name:i.shortName,category:i.category,account_number:o,token:H}}),g({success:!0,transactionId:Y,token:H}),r("result"),D()}catch(ie){console.error("Bill payment error:",ie),g({success:!1,error:ie.message||"Payment failed. Please try again."}),r("result")}finally{p(!1)}},se=()=>{r("category"),n(null),l(null),c(""),u(""),g(null),D()},de=()=>{switch(s){case"provider":n(null),r("category");break;case"details":l(null),r("provider");break;case"confirm":r("details");break;default:r("category")}},fe=a?Q5.filter(z=>z.category===a):[];return e.jsxs(ka,{children:[e.jsxs("div",{className:"max-w-2xl mx-auto space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[s!=="category"&&s!=="result"&&e.jsx("button",{onClick:de,className:"p-2 hover:bg-gray-100 rounded-lg",children:e.jsx(_s,{className:"w-5 h-5"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Pay Bills"}),e.jsx("p",{className:"text-gray-500",children:"Pay your utility bills instantly"})]})]}),e.jsx(W,{className:"p-4 bg-gradient-to-r from-green-600 to-green-500 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-green-100",children:"Available Balance"}),e.jsx("p",{className:"text-3xl font-bold",children:k(j)})]}),e.jsx("div",{className:"p-3 bg-white/20 rounded-xl",children:e.jsx(jt,{className:"w-8 h-8"})})]})}),s==="category"&&e.jsxs(e.Fragment,{children:[e.jsxs(W,{className:"p-6 space-y-4",children:[e.jsx("h2",{className:"font-semibold text-gray-900",children:"Select Bill Category"}),e.jsx("div",{className:"grid grid-cols-1 gap-3",children:["electricity","water","tv"].map(z=>{const re=Gp[z],ie=Ol[z],Y=Q5.filter(G=>G.category===z).length;return e.jsxs("button",{onClick:()=>B(z),className:"flex items-center gap-4 p-4 border-2 border-gray-200 rounded-xl hover:border-primary-500 hover:bg-primary-50 transition-colors text-left",children:[e.jsx("div",{className:`p-3 ${ie.bg} rounded-xl`,children:e.jsx(re,{className:`w-6 h-6 ${ie.icon}`})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium text-gray-900 capitalize",children:z}),e.jsxs("p",{className:"text-sm text-gray-500",children:[Y," provider",Y>1?"s":""," available"]})]}),e.jsx(Lr,{className:"w-5 h-5 text-gray-400"})]},z)})})]}),A.length>0&&e.jsxs(W,{className:"p-6 space-y-4",children:[e.jsxs("h3",{className:"font-semibold text-gray-900 flex items-center gap-2",children:[e.jsx(it,{className:"w-5 h-5 text-gray-400"}),"Recent Payments"]}),e.jsx("div",{className:"space-y-2",children:A.map(z=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:z.provider}),e.jsx("p",{className:"text-sm text-gray-500",children:z.accountNumber})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"font-medium",children:k(z.amount)}),e.jsx("p",{className:"text-xs text-gray-500",children:new Date(z.date).toLocaleDateString()})]})]},z.id))})]})]}),s==="provider"&&a&&e.jsxs(W,{className:"p-6 space-y-4",children:[e.jsxs("h2",{className:"font-semibold text-gray-900 capitalize",children:["Select ",a," Provider"]}),e.jsx("div",{className:"space-y-3",children:fe.map(z=>e.jsxs("button",{onClick:()=>T(z),className:"w-full flex items-center gap-4 p-4 border-2 border-gray-200 rounded-xl hover:border-primary-500 hover:bg-primary-50 transition-colors text-left",children:[e.jsx("div",{className:`p-3 ${Ol[z.category].bg} rounded-xl`,children:ds.createElement(Gp[z.category],{className:`w-6 h-6 ${Ol[z.category].icon}`})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium text-gray-900",children:z.name}),e.jsx("p",{className:"text-sm text-gray-500",children:z.description})]}),e.jsx(Lr,{className:"w-5 h-5 text-gray-400"})]},z.id))})]}),s==="details"&&i&&e.jsxs(W,{className:"p-6 space-y-6",children:[e.jsxs("div",{className:`flex items-center gap-3 p-4 ${Ol[i.category].bg} rounded-xl`,children:[ds.createElement(Gp[i.category],{className:`w-6 h-6 ${Ol[i.category].icon}`}),e.jsxs("div",{children:[e.jsx("p",{className:`font-medium ${Ol[i.category].text}`,children:i.shortName}),e.jsx("p",{className:"text-sm text-gray-600",children:i.description})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:i.accountLabel}),e.jsx("input",{type:"text",value:o,onChange:z=>c(z.target.value),placeholder:i.accountPlaceholder,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",autoFocus:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Amount"}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-400 font-medium",children:P}),e.jsx("input",{type:"number",step:"0.01",min:i.minAmount,max:Math.min(i.maxAmount,j),value:d,onChange:z=>u(z.target.value),placeholder:"0.00",className:"w-full pl-12 pr-4 py-3 border border-gray-300 rounded-lg text-xl font-bold focus:ring-2 focus:ring-primary-500 focus:border-primary-500"})]}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Min: ",k(i.minAmount)," | Max: ",k(i.maxAmount)]}),e.jsx("div",{className:"flex gap-2 mt-3",children:_X[i.category].map(z=>e.jsxs("button",{onClick:()=>u(z.toString()),disabled:z>j,className:"flex-1 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 disabled:opacity-50 font-medium text-sm",children:[P,z]},z))})]}),e.jsxs("button",{onClick:O,disabled:!o||!d||parseFloat(d)<i.minAmount||parseFloat(d)>Math.min(i.maxAmount,j),className:"w-full py-4 bg-primary-600 text-white rounded-xl font-semibold flex items-center justify-center gap-2 hover:bg-primary-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:["Continue",e.jsx(Lr,{className:"w-5 h-5"})]})]}),s==="confirm"&&i&&e.jsxs(W,{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:`w-16 h-16 mx-auto mb-4 ${Ol[i.category].bg} rounded-full flex items-center justify-center`,children:ds.createElement(Gp[i.category],{className:`w-8 h-8 ${Ol[i.category].icon}`})}),e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Confirm Payment"}),e.jsx("p",{className:"text-gray-500",children:i.shortName})]}),e.jsx("div",{className:"text-center py-4",children:e.jsx("p",{className:"text-4xl font-bold text-primary-600",children:k(parseFloat(d))})}),e.jsxs("div",{className:"bg-gray-50 rounded-xl p-4 space-y-3",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-500",children:"Provider"}),e.jsx("span",{className:"font-medium",children:i.name})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-500",children:i.accountLabel}),e.jsx("span",{className:"font-medium",children:o})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-500",children:"Amount"}),e.jsx("span",{className:"font-medium",children:k(parseFloat(d))})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-500",children:"Fee"}),e.jsx("span",{className:"font-medium text-green-600",children:"FREE"})]})]}),e.jsxs("div",{className:"p-4 bg-yellow-50 border border-yellow-200 rounded-lg flex items-start gap-3",children:[e.jsx(ut,{className:"w-5 h-5 text-yellow-600 shrink-0 mt-0.5"}),e.jsxs("p",{className:"text-sm text-yellow-800",children:["Please verify the ",i.accountLabel.toLowerCase()," before proceeding. Payments cannot be reversed."]})]}),e.jsx("button",{onClick:q,disabled:m,className:"w-full py-4 bg-primary-600 text-white rounded-xl font-semibold flex items-center justify-center gap-2 hover:bg-primary-700 transition-colors disabled:opacity-50",children:m?e.jsxs(e.Fragment,{children:[e.jsx(Ie,{className:"w-5 h-5 animate-spin"}),"Processing..."]}):e.jsxs(e.Fragment,{children:[e.jsx(qT,{className:"w-5 h-5"}),"Pay ",k(parseFloat(d))]})}),e.jsx("button",{onClick:de,disabled:m,className:"w-full py-3 text-gray-600 font-medium hover:text-gray-800 disabled:opacity-50",children:"Go Back"})]}),s==="result"&&x&&e.jsx(W,{className:"p-6 space-y-6 text-center",children:x.success?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-20 h-20 bg-green-100 rounded-full flex items-center justify-center mx-auto",children:e.jsx(be,{className:"w-10 h-10 text-green-600"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Payment Successful!"}),e.jsxs("p",{className:"text-gray-500 mt-2",children:["Your ",i==null?void 0:i.shortName," payment of ",k(parseFloat(d))," was successful."]})]}),x.token&&e.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-xl p-4",children:[e.jsx("p",{className:"text-sm text-yellow-700 font-medium mb-2",children:"Your Electricity Token"}),e.jsx("p",{className:"text-2xl font-mono font-bold text-yellow-900 tracking-wider",children:x.token}),e.jsx("p",{className:"text-xs text-yellow-600 mt-2",children:"Enter this token on your prepaid meter"})]}),x.transactionId&&e.jsxs("div",{className:"bg-gray-50 rounded-xl p-4",children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Transaction ID"}),e.jsx("p",{className:"text-sm font-mono text-gray-700 break-all",children:x.transactionId})]}),e.jsx("button",{onClick:se,className:"w-full py-4 bg-primary-600 text-white rounded-xl font-semibold hover:bg-primary-700 transition-colors",children:"Pay Another Bill"})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-20 h-20 bg-red-100 rounded-full flex items-center justify-center mx-auto",children:e.jsx(ft,{className:"w-10 h-10 text-red-600"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Payment Failed"}),e.jsx("p",{className:"text-gray-500 mt-2",children:x.error})]}),e.jsx("button",{onClick:se,className:"w-full py-4 bg-primary-600 text-white rounded-xl font-semibold hover:bg-primary-700 transition-colors",children:"Try Again"})]})})]}),e.jsx(S2,{isOpen:w,onClose:()=>y(!1),onVerify:le,amount:d,recipientName:(i==null?void 0:i.shortName)||""}),e.jsx(_2,{isOpen:C,onClose:()=>S(!1),onSuccess:K,userId:(t==null?void 0:t.id)||""})]})}const J5=[{id:"orange",name:"Orange Sierra Leone",shortName:"Orange",color:"text-orange-600",bgColor:"bg-orange-100",prefixes:["076","077","078","030","033"]},{id:"africell",name:"Africell Sierra Leone",shortName:"Africell",color:"text-blue-600",bgColor:"bg-blue-100",prefixes:["025","040","044","088","099"]},{id:"qcell",name:"QCell Sierra Leone",shortName:"QCell",color:"text-green-600",bgColor:"bg-green-100",prefixes:["032","034"]}],AX={orange:[{id:"orange_250mb",name:"Daily Data",data:"250MB",validity:"1 Day",price:5},{id:"orange_500mb",name:"Small Bundle",data:"500MB",validity:"7 Days",price:10},{id:"orange_1gb",name:"Medium Bundle",data:"1GB",validity:"14 Days",price:20},{id:"orange_2gb",name:"Large Bundle",data:"2GB",validity:"30 Days",price:35},{id:"orange_5gb",name:"Extra Large",data:"5GB",validity:"30 Days",price:75},{id:"orange_10gb",name:"Super Bundle",data:"10GB",validity:"30 Days",price:120}],africell:[{id:"africell_200mb",name:"Daily Data",data:"200MB",validity:"1 Day",price:4},{id:"africell_500mb",name:"Weekly Bundle",data:"500MB",validity:"7 Days",price:9},{id:"africell_1gb",name:"Monthly Lite",data:"1GB",validity:"30 Days",price:18},{id:"africell_3gb",name:"Monthly Plus",data:"3GB",validity:"30 Days",price:45},{id:"africell_6gb",name:"Monthly Max",data:"6GB",validity:"30 Days",price:80},{id:"africell_unlimited",name:"Unlimited Night",data:"Unlimited (10PM-6AM)",validity:"30 Days",price:50}],qcell:[{id:"qcell_300mb",name:"Daily Data",data:"300MB",validity:"1 Day",price:5},{id:"qcell_750mb",name:"Weekly Bundle",data:"750MB",validity:"7 Days",price:12},{id:"qcell_1.5gb",name:"Bi-Weekly",data:"1.5GB",validity:"14 Days",price:22},{id:"qcell_3gb",name:"Monthly Value",data:"3GB",validity:"30 Days",price:40},{id:"qcell_7gb",name:"Monthly Premium",data:"7GB",validity:"30 Days",price:85}]},TX=[5,10,20,50,100,200];function PX(){const{user:t}=wt(),[s,r]=h.useState("type"),[a,n]=h.useState(null),[i,l]=h.useState(null),[o,c]=h.useState(""),[d,u]=h.useState(""),[m,p]=h.useState(null),[x,g]=h.useState(!1),[f,b]=h.useState(null),[j,v]=h.useState(""),[w,y]=h.useState(0),[C,S]=h.useState(!1),[_,E]=h.useState(!1),[A,R]=h.useState(!1),[I,N]=h.useState([]),[P,k]=h.useState(null);h.useEffect(()=>{Ut.getDefaultCurrency().then(k)},[]);const D=(P==null?void 0:P.symbol)||"Le",$=G=>`${D}${G.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}`;h.useEffect(()=>{t!=null&&t.id&&(L(),B())},[t==null?void 0:t.id]);const L=async()=>{if(!(t!=null&&t.id))return;const{data:G}=await U.from("wallets").select("id, balance").eq("user_id",t.id).eq("wallet_type","primary").single();G&&(v(G.id),y(G.balance),T(G.id))},B=async()=>{if(!(t!=null&&t.id))return;const{data:G}=await U.from("users").select("transaction_pin").eq("id",t.id).single();R(!!(G!=null&&G.transaction_pin))},T=async G=>{const{data:H}=await U.from("transactions").select("*").eq("wallet_id",G).in("type",["AIRTIME","DATA"]).order("created_at",{ascending:!1}).limit(5);if(H&&H.length>0){const ue=H.map(me=>{var ne,Ae;return{id:me.id,type:me.type==="AIRTIME"?"airtime":"data",provider:((ne=me.metadata)==null?void 0:ne.provider_name)||"Unknown",phoneNumber:((Ae=me.metadata)==null?void 0:Ae.phone_number)||"",amount:Math.abs(me.amount),date:me.created_at,status:me.status==="COMPLETED"?"completed":me.status==="PENDING"?"pending":"failed"}});N(ue)}},O=G=>{const H=G.replace(/\D/g,"");if(H.length<3)return null;const ue=H.substring(0,3);for(const me of J5)if(me.prefixes.includes(ue))return me;return null},q=G=>{c(G);const H=O(G);H&&!i&&l(H)},K=G=>{n(G),r("phone")},le=()=>{if(!(!o||o.length<9)){if(!i){const G=O(o);G&&l(G)}r("amount")}},X=()=>{if((a==="data"&&m?m.price:parseFloat(d))>w){b({success:!1,error:"Insufficient balance"}),r("result");return}r("confirm")},se=()=>{if(!A){E(!0);return}S(!0)},de=()=>{E(!1),R(!0),S(!0)},fe=async G=>{if(!(t!=null&&t.id))return!1;const{data:H}=await U.from("users").select("transaction_pin").eq("id",t.id).single();return(H==null?void 0:H.transaction_pin)===G?(S(!1),await z(),!0):!1},z=async()=>{if(!i||!o||!(t!=null&&t.id)||!j)return;const G=a==="data"&&m?m.price:parseFloat(d);g(!0);try{const{data:H}=await U.from("wallets").select("balance").eq("id",j).single();if(!H||H.balance<G){b({success:!1,error:"Insufficient balance"}),r("result");return}const ue=`topup_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,{error:me}=await U.from("wallets").update({balance:H.balance-G,updated_at:new Date().toISOString()}).eq("id",j);if(me)throw me;await U.from("transactions").insert({external_id:ue,wallet_id:j,type:a==="airtime"?"AIRTIME":"DATA",amount:-G,currency:(P==null?void 0:P.code)||"SLE",status:"COMPLETED",description:a==="airtime"?`${i.shortName} Airtime - ${o}`:`${i.shortName} ${m==null?void 0:m.data} Data - ${o}`,metadata:{provider_id:i.id,provider_name:i.shortName,phone_number:o,topup_type:a,bundle:m?{id:m.id,name:m.name,data:m.data,validity:m.validity}:null}}),b({success:!0,transactionId:ue}),r("result"),L()}catch(H){console.error("Topup error:",H),b({success:!1,error:H.message||"Top-up failed. Please try again."}),r("result")}finally{g(!1)}},re=()=>{r("type"),n(null),l(null),c(""),u(""),p(null),b(null),L()},ie=()=>{switch(s){case"phone":n(null),r("type");break;case"amount":r("phone");break;case"confirm":r("amount");break;default:r("type")}},Y=()=>a==="data"&&m?m.price:parseFloat(d)||0;return e.jsxs(ka,{children:[e.jsxs("div",{className:"max-w-2xl mx-auto space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[s!=="type"&&s!=="result"&&e.jsx("button",{onClick:ie,className:"p-2 hover:bg-gray-100 rounded-lg",children:e.jsx(_s,{className:"w-5 h-5"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Airtime & Data"}),e.jsx("p",{className:"text-gray-500",children:"Top up instantly"})]})]}),e.jsx(W,{className:"p-4 bg-gradient-to-r from-purple-600 to-purple-500 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-purple-100",children:"Available Balance"}),e.jsx("p",{className:"text-3xl font-bold",children:$(w)})]}),e.jsx("div",{className:"p-3 bg-white/20 rounded-xl",children:e.jsx(jt,{className:"w-8 h-8"})})]})}),s==="type"&&e.jsxs(e.Fragment,{children:[e.jsxs(W,{className:"p-6 space-y-4",children:[e.jsx("h2",{className:"font-semibold text-gray-900",children:"What do you need?"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("button",{onClick:()=>K("airtime"),className:"flex flex-col items-center gap-3 p-6 border-2 border-gray-200 rounded-xl hover:border-primary-500 hover:bg-primary-50 transition-colors",children:[e.jsx("div",{className:"p-4 bg-green-100 rounded-full",children:e.jsx(lr,{className:"w-8 h-8 text-green-600"})}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"font-semibold text-gray-900",children:"Airtime"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Buy call credit"})]})]}),e.jsxs("button",{onClick:()=>K("data"),className:"flex flex-col items-center gap-3 p-6 border-2 border-gray-200 rounded-xl hover:border-primary-500 hover:bg-primary-50 transition-colors",children:[e.jsx("div",{className:"p-4 bg-blue-100 rounded-full",children:e.jsx(li,{className:"w-8 h-8 text-blue-600"})}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"font-semibold text-gray-900",children:"Data Bundle"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Buy internet data"})]})]})]})]}),I.length>0&&e.jsxs(W,{className:"p-6 space-y-4",children:[e.jsxs("h3",{className:"font-semibold text-gray-900 flex items-center gap-2",children:[e.jsx(it,{className:"w-5 h-5 text-gray-400"}),"Recent Top-ups"]}),e.jsx("div",{className:"space-y-2",children:I.map(G=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`p-2 rounded-full ${G.type==="airtime"?"bg-green-100":"bg-blue-100"}`,children:G.type==="airtime"?e.jsx(lr,{className:"w-4 h-4 text-green-600"}):e.jsx(li,{className:"w-4 h-4 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:G.provider}),e.jsx("p",{className:"text-sm text-gray-500",children:G.phoneNumber})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"font-medium",children:$(G.amount)}),e.jsx("p",{className:"text-xs text-gray-500",children:new Date(G.date).toLocaleDateString()})]})]},G.id))})]})]}),s==="phone"&&e.jsxs(W,{className:"p-6 space-y-6",children:[e.jsx("h2",{className:"font-semibold text-gray-900",children:"Enter Phone Number"}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Mobile Number"}),e.jsxs("div",{className:"relative",children:[e.jsx(Na,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{type:"tel",value:o,onChange:G=>q(G.target.value),placeholder:"076 123 4567",className:"w-full pl-12 pr-4 py-3 border border-gray-300 rounded-lg text-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",autoFocus:!0})]})]}),i&&e.jsxs("div",{className:`flex items-center gap-3 p-3 ${i.bgColor} rounded-lg`,children:[e.jsx("div",{className:"p-2 bg-white rounded-full",children:e.jsx(Mi,{className:`w-4 h-4 ${i.color}`})}),e.jsxs("span",{className:`font-medium ${i.color}`,children:[i.name," detected"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-700 mb-3",children:"Or select network manually:"}),e.jsx("div",{className:"grid grid-cols-3 gap-2",children:J5.map(G=>e.jsx("button",{onClick:()=>l(G),className:`p-3 rounded-lg border-2 transition-colors ${(i==null?void 0:i.id)===G.id?`${G.bgColor} border-current ${G.color}`:"border-gray-200 hover:border-gray-300"}`,children:e.jsx("p",{className:`font-medium text-sm ${(i==null?void 0:i.id)===G.id?G.color:"text-gray-700"}`,children:G.shortName})},G.id))})]}),e.jsxs("button",{onClick:le,disabled:!o||o.length<9||!i,className:"w-full py-4 bg-primary-600 text-white rounded-xl font-semibold flex items-center justify-center gap-2 hover:bg-primary-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:["Continue",e.jsx(Lr,{className:"w-5 h-5"})]})]}),s==="amount"&&e.jsxs(W,{className:"p-6 space-y-6",children:[e.jsxs("div",{className:`flex items-center gap-3 p-3 ${i==null?void 0:i.bgColor} rounded-lg`,children:[e.jsx(Na,{className:`w-5 h-5 ${i==null?void 0:i.color}`}),e.jsxs("div",{children:[e.jsx("p",{className:`font-medium ${i==null?void 0:i.color}`,children:o}),e.jsx("p",{className:"text-sm text-gray-600",children:i==null?void 0:i.name})]})]}),a==="airtime"?e.jsxs(e.Fragment,{children:[e.jsx("h2",{className:"font-semibold text-gray-900",children:"Select Airtime Amount"}),e.jsx("div",{className:"grid grid-cols-3 gap-3",children:TX.map(G=>e.jsx("button",{onClick:()=>u(G.toString()),disabled:G>w,className:`p-4 rounded-xl border-2 transition-colors ${d===G.toString()?"border-primary-500 bg-primary-50 text-primary-700":"border-gray-200 hover:border-gray-300"} disabled:opacity-50`,children:e.jsx("p",{className:"text-xl font-bold",children:$(G)})},G))}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Or enter custom amount"}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-400 font-medium",children:D}),e.jsx("input",{type:"number",step:"1",min:"1",max:w,value:d,onChange:G=>u(G.target.value),placeholder:"0",className:"w-full pl-12 pr-4 py-3 border border-gray-300 rounded-lg text-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500"})]})]})]}):e.jsxs(e.Fragment,{children:[e.jsx("h2",{className:"font-semibold text-gray-900",children:"Select Data Bundle"}),e.jsx("div",{className:"space-y-3",children:(AX[(i==null?void 0:i.id)||""]||[]).map(G=>e.jsx("button",{onClick:()=>{p(G),u(G.price.toString())},disabled:G.price>w,className:`w-full p-4 rounded-xl border-2 transition-colors text-left ${(m==null?void 0:m.id)===G.id?"border-primary-500 bg-primary-50":"border-gray-200 hover:border-gray-300"} disabled:opacity-50`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-bold text-gray-900",children:G.data}),e.jsx("p",{className:"text-sm text-gray-500",children:G.validity})]}),e.jsx("p",{className:"text-xl font-bold text-primary-600",children:$(G.price)})]})},G.id))})]}),e.jsxs("button",{onClick:X,disabled:a==="airtime"?!d||parseFloat(d)<=0||parseFloat(d)>w:!m,className:"w-full py-4 bg-primary-600 text-white rounded-xl font-semibold flex items-center justify-center gap-2 hover:bg-primary-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:["Continue",e.jsx(Lr,{className:"w-5 h-5"})]})]}),s==="confirm"&&e.jsxs(W,{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:`w-16 h-16 mx-auto mb-4 ${i==null?void 0:i.bgColor} rounded-full flex items-center justify-center`,children:a==="airtime"?e.jsx(lr,{className:`w-8 h-8 ${i==null?void 0:i.color}`}):e.jsx(li,{className:`w-8 h-8 ${i==null?void 0:i.color}`})}),e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Confirm Top-up"}),e.jsx("p",{className:"text-gray-500",children:i==null?void 0:i.shortName})]}),e.jsxs("div",{className:"text-center py-4",children:[e.jsx("p",{className:"text-4xl font-bold text-primary-600",children:$(Y())}),a==="data"&&m&&e.jsxs("p",{className:"text-lg text-gray-600 mt-1",children:[m.data,"  ",m.validity]})]}),e.jsxs("div",{className:"bg-gray-50 rounded-xl p-4 space-y-3",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-500",children:"Phone Number"}),e.jsx("span",{className:"font-medium",children:o})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-500",children:"Network"}),e.jsx("span",{className:"font-medium",children:i==null?void 0:i.name})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-500",children:"Type"}),e.jsx("span",{className:"font-medium capitalize",children:a})]}),a==="data"&&m&&e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-500",children:"Bundle"}),e.jsxs("span",{className:"font-medium",children:[m.data," / ",m.validity]})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-500",children:"Amount"}),e.jsx("span",{className:"font-medium",children:$(Y())})]})]}),e.jsxs("div",{className:"p-4 bg-yellow-50 border border-yellow-200 rounded-lg flex items-start gap-3",children:[e.jsx(ut,{className:"w-5 h-5 text-yellow-600 shrink-0 mt-0.5"}),e.jsx("p",{className:"text-sm text-yellow-800",children:"Please verify the phone number before proceeding. Top-ups cannot be reversed."})]}),e.jsx("button",{onClick:se,disabled:x,className:"w-full py-4 bg-primary-600 text-white rounded-xl font-semibold flex items-center justify-center gap-2 hover:bg-primary-700 transition-colors disabled:opacity-50",children:x?e.jsxs(e.Fragment,{children:[e.jsx(Ie,{className:"w-5 h-5 animate-spin"}),"Processing..."]}):e.jsxs(e.Fragment,{children:[e.jsx(be,{className:"w-5 h-5"}),"Confirm Top-up"]})}),e.jsx("button",{onClick:ie,disabled:x,className:"w-full py-3 text-gray-600 font-medium hover:text-gray-800 disabled:opacity-50",children:"Go Back"})]}),s==="result"&&f&&e.jsx(W,{className:"p-6 space-y-6 text-center",children:f.success?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-20 h-20 bg-green-100 rounded-full flex items-center justify-center mx-auto",children:e.jsx(be,{className:"w-10 h-10 text-green-600"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Top-up Successful!"}),e.jsxs("p",{className:"text-gray-500 mt-2",children:[$(Y())," ",a==="airtime"?"airtime":"data"," sent to ",o]})]}),f.transactionId&&e.jsxs("div",{className:"bg-gray-50 rounded-xl p-4",children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Transaction ID"}),e.jsx("p",{className:"text-sm font-mono text-gray-700 break-all",children:f.transactionId})]}),e.jsx("button",{onClick:re,className:"w-full py-4 bg-primary-600 text-white rounded-xl font-semibold hover:bg-primary-700 transition-colors",children:"Buy More"})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-20 h-20 bg-red-100 rounded-full flex items-center justify-center mx-auto",children:e.jsx(ft,{className:"w-10 h-10 text-red-600"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Top-up Failed"}),e.jsx("p",{className:"text-gray-500 mt-2",children:f.error})]}),e.jsx("button",{onClick:re,className:"w-full py-4 bg-primary-600 text-white rounded-xl font-semibold hover:bg-primary-700 transition-colors",children:"Try Again"})]})})]}),e.jsx(S2,{isOpen:C,onClose:()=>S(!1),onVerify:fe,amount:Y().toString(),recipientName:`${(i==null?void 0:i.shortName)||""} ${a||""}`}),e.jsx(_2,{isOpen:_,onClose:()=>E(!1),onSuccess:de,userId:(t==null?void 0:t.id)||""})]})}const RX=t=>({id:t.id,userId:t.user_id,cardId:t.card_id,transactionId:t.transaction_id,amount:parseFloat(t.amount)||0,currency:t.currency||"SLE",percentageApplied:parseFloat(t.percentage_applied)||0,originalAmount:parseFloat(t.original_amount)||0,transactionType:t.transaction_type||"PAYMENT",merchantName:t.merchant_name,status:t.status||"PENDING",creditedAt:t.credited_at,redeemedAt:t.redeemed_at,expiresAt:t.expires_at,description:t.description,createdAt:t.created_at,updatedAt:t.updated_at}),DX=t=>({userId:t.user_id,currency:t.currency||"SLE",availableBalance:parseFloat(t.available_balance)||0,pendingBalance:parseFloat(t.pending_balance)||0,totalRedeemed:parseFloat(t.total_redeemed)||0,lifetimeEarned:parseFloat(t.lifetime_earned)||0,totalRewards:parseInt(t.total_rewards)||0}),Am={async getBalance(t,s="SLE"){const{data:r,error:a}=await U.from("user_cashback_balance").select("*").eq("user_id",t).eq("currency",s).maybeSingle();return a?(console.warn("Cashback balance view not found, calculating directly:",a.message),this.calculateBalance(t,s)):r?DX(r):{userId:t,currency:s,availableBalance:0,pendingBalance:0,totalRedeemed:0,lifetimeEarned:0,totalRewards:0}},async calculateBalance(t,s="SLE"){const{data:r,error:a}=await U.from("cashback_rewards").select("amount, status").eq("user_id",t).eq("currency",s);if(a)return console.error("Error calculating cashback balance:",a),{userId:t,currency:s,availableBalance:0,pendingBalance:0,totalRedeemed:0,lifetimeEarned:0,totalRewards:0};let n=0,i=0,l=0,o=0;for(const c of r||[]){const d=parseFloat(c.amount)||0;switch(o+=d,c.status){case"CREDITED":n+=d;break;case"PENDING":i+=d;break;case"REDEEMED":l+=d;break}}return{userId:t,currency:s,availableBalance:n,pendingBalance:i,totalRedeemed:l,lifetimeEarned:o,totalRewards:(r||[]).length}},async getRewards(t,s){let r=U.from("cashback_rewards").select("*").eq("user_id",t).order("created_at",{ascending:!1});s!=null&&s.status&&(r=r.eq("status",s.status)),s!=null&&s.limit&&(r=r.limit(s.limit)),s!=null&&s.offset&&(r=r.range(s.offset,s.offset+(s.limit||20)-1));const{data:a,error:n}=await r;return n?(console.error("Error fetching cashback rewards:",n),[]):(a||[]).map(RX)},async redeem(t,s,r){const{data:a,error:n}=await U.rpc("redeem_cashback",{p_user_id:t,p_wallet_id:s,p_amount:r||null});if(n)return console.error("Error redeeming cashback:",n),n.message.includes("does not exist")?this.redeemManually(t,s,r):{success:!1,amount:0,message:n.message};const i=(a==null?void 0:a[0])||a;return{success:(i==null?void 0:i.success)||!1,amount:parseFloat(i==null?void 0:i.amount_redeemed)||0,message:(i==null?void 0:i.message)||"Unknown error"}},async redeemManually(t,s,r){const a=await this.calculateBalance(t,"SLE"),n=r?Math.min(r,a.availableBalance):a.availableBalance;if(n<.01)return{success:!1,amount:0,message:"Insufficient cashback balance"};const{data:i,error:l}=await U.from("cashback_rewards").select("id, amount").eq("user_id",t).eq("status","CREDITED").order("created_at",{ascending:!0});if(l||!(i!=null&&i.length))return{success:!1,amount:0,message:"No available rewards to redeem"};let o=n;const c=[];for(const m of i){if(o<=0)break;const p=parseFloat(m.amount)||0;p<=o&&(c.push(m.id),o-=p)}c.length>0&&await U.from("cashback_rewards").update({status:"REDEEMED",redeemed_at:new Date().toISOString(),updated_at:new Date().toISOString()}).in("id",c);const{error:d}=await U.from("wallets").update({balance:U.rpc("",{}),updated_at:new Date().toISOString()}).eq("id",s),{error:u}=await U.rpc("update_wallet_balance",{p_wallet_id:s,p_amount:n,p_operation:"credit"});if(u){const{data:m}=await U.from("wallets").select("balance").eq("id",s).single();m&&await U.from("wallets").update({balance:(parseFloat(m.balance)||0)+n,updated_at:new Date().toISOString()}).eq("id",s)}return await U.from("transactions").insert({wallet_id:s,type:"CASHBACK_REDEMPTION",amount:n,status:"COMPLETED",description:"Cashback redemption to wallet",metadata:{rewards_redeemed:c.length}}),{success:!0,amount:n,message:"Cashback redeemed successfully"}},async creditCashback(t){const s=Math.round(t.originalAmount*(t.cashbackPercentage/100)*100)/100;if(s<=0)return null;const r=new Date;r.setDate(r.getDate()+90);const{data:a,error:n}=await U.from("cashback_rewards").insert({user_id:t.userId,card_id:t.cardId,transaction_id:t.transactionId,amount:s,currency:t.currency||"SLE",percentage_applied:t.cashbackPercentage,original_amount:t.originalAmount,transaction_type:t.transactionType||"PAYMENT",merchant_name:t.merchantName,status:"CREDITED",credited_at:new Date().toISOString(),expires_at:r.toISOString(),description:`${t.cashbackPercentage}% cashback on ${t.merchantName||t.transactionType||"payment"}`}).select("id").single();return n?(console.error("Error crediting cashback:",n),null):(a==null?void 0:a.id)||null},async getRedemptions(t,s=20){const{data:r,error:a}=await U.from("cashback_redemptions").select("*").eq("user_id",t).order("created_at",{ascending:!1}).limit(s);return a?(console.error("Error fetching redemptions:",a),[]):(r||[]).map(n=>({id:n.id,userId:n.user_id,walletId:n.wallet_id,amount:parseFloat(n.amount)||0,currency:n.currency||"SLE",status:n.status||"PENDING",transactionId:n.transaction_id,processedAt:n.processed_at,createdAt:n.created_at}))},async getStats(t){var x;const s=new Date,r=new Date(s.getFullYear(),s.getMonth(),1),a=new Date(s.getFullYear(),s.getMonth()-1,1),n=new Date(s.getFullYear(),s.getMonth(),0),{data:i}=await U.from("cashback_rewards").select("amount").eq("user_id",t).gte("created_at",r.toISOString()),{data:l}=await U.from("cashback_rewards").select("amount").eq("user_id",t).gte("created_at",a.toISOString()).lt("created_at",n.toISOString()),{data:o}=await U.from("cashback_rewards").select("percentage_applied, transaction_type").eq("user_id",t),c=(i||[]).reduce((g,f)=>g+(parseFloat(f.amount)||0),0),d=(l||[]).reduce((g,f)=>g+(parseFloat(f.amount)||0),0);let u=0;o!=null&&o.length&&(u=o.reduce((f,b)=>f+(parseFloat(b.percentage_applied)||0),0)/o.length);const m={};for(const g of o||[]){const f=g.transaction_type||"OTHER";m[f]=(m[f]||0)+1}const p=((x=Object.entries(m).sort((g,f)=>f[1]-g[1])[0])==null?void 0:x[0])||"N/A";return{thisMonth:c,lastMonth:d,averagePercentage:u,topCategory:p}}};function IX(){var B;const{user:t}=wt(),s=At(),[r,a]=h.useState("overview"),[n,i]=h.useState(!0),[l,o]=h.useState(!1),[c,d]=h.useState(null),[u,m]=h.useState([]),[p,x]=h.useState(null),[g,f]=h.useState("all"),[b,j]=h.useState(null),[v,w]=h.useState(""),[y,C]=h.useState(!0),[S,_]=h.useState(null),[E,A]=h.useState(null);h.useEffect(()=>{t!=null&&t.id&&R()},[t==null?void 0:t.id]),h.useEffect(()=>{t!=null&&t.id&&I()},[g,t==null?void 0:t.id]);const R=async()=>{if(t!=null&&t.id){i(!0);try{const[T,O,q,K]=await Promise.all([Am.getBalance(t.id),Am.getStats(t.id),Am.getRewards(t.id,{limit:50}),N()]);d(T),x(O),m(q),j(K)}catch(T){console.error("Error loading cashback data:",T)}finally{i(!1)}}},I=async()=>{if(t!=null&&t.id)try{const T=await Am.getRewards(t.id,{status:g==="all"?void 0:g,limit:50});m(T)}catch(T){console.error("Error loading rewards:",T)}},N=async()=>{if(!(t!=null&&t.id))return null;const{data:T}=await U.from("wallets").select("id, balance, currency").eq("user_id",t.id).eq("is_primary",!0).single();return T?{id:T.id,balance:parseFloat(T.balance)||0,currency:T.currency||"SLE"}:null},P=async()=>{if(!(!(t!=null&&t.id)||!(b!=null&&b.id))){o(!0),A(null),_(null);try{const T=y?void 0:parseFloat(v);if(!y&&(!T||T<=0)){A("Please enter a valid amount"),o(!1);return}if(!y&&c&&T&&T>c.availableBalance){A("Amount exceeds available balance"),o(!1);return}const O=await Am.redeem(t.id,b.id,T);O.success?(_({amount:O.amount}),w(""),C(!0),await R()):A(O.message)}catch(T){A(T.message||"Failed to redeem cashback")}finally{o(!1)}}},k=T=>`Le ${T.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})}`,D=T=>new Date(T).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}),$=T=>{const O={PENDING:"bg-yellow-100 text-yellow-800",CREDITED:"bg-green-100 text-green-800",REDEEMED:"bg-blue-100 text-blue-800",EXPIRED:"bg-gray-100 text-gray-600"};return e.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs font-medium ${O[T]}`,children:T})},L=T=>{const O={PAYMENT:"M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z",BILL_PAYMENT:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z",AIRTIME:"M12 18h.01M8 21h8a2 2 0 002-2V5a2 2 0 00-2-2H8a2 2 0 00-2 2v14a2 2 0 002 2z",TRANSFER:"M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4"};return O[T]||O.PAYMENT};return n?e.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-indigo-600 border-t-transparent"})}):e.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-6 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("button",{onClick:()=>s(-1),className:"flex items-center text-gray-600 hover:text-gray-900 mb-4",children:[e.jsx("svg",{className:"w-5 h-5 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"Back"]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Cashback Rewards"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Earn rewards on every eligible transaction"})]}),e.jsx("div",{className:"hidden sm:flex items-center gap-2",children:e.jsx("svg",{className:"w-10 h-10 text-indigo-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})})]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-indigo-600 to-purple-700 rounded-2xl p-6 text-white mb-6 shadow-lg",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-indigo-200 text-sm font-medium",children:"Available Cashback"}),e.jsx("p",{className:"text-4xl font-bold mt-1",children:k((c==null?void 0:c.availableBalance)||0)}),((c==null?void 0:c.pendingBalance)||0)>0&&e.jsxs("p",{className:"text-indigo-200 text-sm mt-2",children:["+ ",k((c==null?void 0:c.pendingBalance)||0)," pending"]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-indigo-200 text-xs",children:"Lifetime Earned"}),e.jsx("p",{className:"text-lg font-semibold",children:k((c==null?void 0:c.lifetimeEarned)||0)})]})]}),e.jsx("div",{className:"mt-6 pt-4 border-t border-indigo-500/30",children:e.jsxs("div",{className:"grid grid-cols-3 gap-4 text-center",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold",children:(c==null?void 0:c.totalRewards)||0}),e.jsx("p",{className:"text-indigo-200 text-xs",children:"Total Rewards"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold",children:k((c==null?void 0:c.totalRedeemed)||0)}),e.jsx("p",{className:"text-indigo-200 text-xs",children:"Redeemed"})]}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-2xl font-bold",children:[((B=p==null?void 0:p.averagePercentage)==null?void 0:B.toFixed(1))||0,"%"]}),e.jsx("p",{className:"text-indigo-200 text-xs",children:"Avg. Rate"})]})]})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[e.jsx("div",{className:"bg-white rounded-xl p-4 shadow-sm border border-gray-100",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:e.jsx("svg",{className:"w-5 h-5 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500 text-xs",children:"This Month"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900",children:k((p==null?void 0:p.thisMonth)||0)})]})]})}),e.jsx("div",{className:"bg-white rounded-xl p-4 shadow-sm border border-gray-100",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:e.jsx("svg",{className:"w-5 h-5 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500 text-xs",children:"Last Month"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900",children:k((p==null?void 0:p.lastMonth)||0)})]})]})})]}),e.jsx("div",{className:"flex gap-1 bg-gray-100 rounded-lg p-1 mb-6",children:["overview","history","redeem"].map(T=>e.jsxs("button",{onClick:()=>a(T),className:`flex-1 py-2 px-4 rounded-md text-sm font-medium transition-colors ${r===T?"bg-white text-indigo-600 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:[T==="overview"&&"Overview",T==="history"&&"History",T==="redeem"&&"Redeem"]},T))}),r==="overview"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-gray-100",children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-4",children:"How Cashback Works"}),e.jsxs("div",{className:"grid gap-4",children:[e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"flex-shrink-0 w-8 h-8 bg-indigo-100 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-indigo-600 font-semibold text-sm",children:"1"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:"Make Eligible Transactions"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Use your Peeap card for payments, bills, and airtime"})]})]}),e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"flex-shrink-0 w-8 h-8 bg-indigo-100 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-indigo-600 font-semibold text-sm",children:"2"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:"Earn Cashback Automatically"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Get up to 5% cashback based on your card type"})]})]}),e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"flex-shrink-0 w-8 h-8 bg-indigo-100 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-indigo-600 font-semibold text-sm",children:"3"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:"Redeem to Your Wallet"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Transfer cashback to your wallet anytime"})]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100",children:[e.jsxs("div",{className:"p-4 border-b border-gray-100 flex items-center justify-between",children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:"Recent Rewards"}),e.jsx("button",{onClick:()=>a("history"),className:"text-sm text-indigo-600 hover:text-indigo-700 font-medium",children:"View All"})]}),e.jsxs("div",{className:"divide-y divide-gray-100",children:[u.slice(0,5).map(T=>e.jsxs("div",{className:"p-4 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-gray-100 rounded-lg",children:e.jsx("svg",{className:"w-5 h-5 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:L(T.transactionType)})})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:T.merchantName||T.transactionType}),e.jsx("p",{className:"text-sm text-gray-500",children:D(T.createdAt)})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"font-semibold text-green-600",children:["+",k(T.amount)]}),e.jsxs("p",{className:"text-xs text-gray-500",children:[T.percentageApplied,"% on ",k(T.originalAmount)]})]})]},T.id)),u.length===0&&e.jsxs("div",{className:"p-8 text-center text-gray-500",children:[e.jsx("svg",{className:"w-12 h-12 mx-auto text-gray-300 mb-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsx("p",{children:"No cashback rewards yet"}),e.jsx("p",{className:"text-sm mt-1",children:"Make eligible transactions to start earning"})]})]})]})]}),r==="history"&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"flex gap-2 overflow-x-auto pb-2",children:["all","CREDITED","REDEEMED","EXPIRED"].map(T=>e.jsx("button",{onClick:()=>f(T),className:`px-4 py-2 rounded-lg text-sm font-medium whitespace-nowrap ${g===T?"bg-indigo-600 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:T==="all"?"All":T},T))}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100",children:e.jsxs("div",{className:"divide-y divide-gray-100",children:[u.map(T=>e.jsx("div",{className:"p-4",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"p-2 bg-gray-100 rounded-lg",children:e.jsx("svg",{className:"w-5 h-5 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:L(T.transactionType)})})}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("p",{className:"font-medium text-gray-900",children:T.merchantName||T.transactionType}),$(T.status)]}),e.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:[T.percentageApplied,"% cashback on ",k(T.originalAmount)]}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:D(T.createdAt)})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:`font-semibold ${T.status==="CREDITED"?"text-green-600":"text-gray-600"}`,children:["+",k(T.amount)]}),T.expiresAt&&T.status==="CREDITED"&&e.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:["Expires ",D(T.expiresAt)]})]})]})},T.id)),u.length===0&&e.jsx("div",{className:"p-8 text-center text-gray-500",children:e.jsx("p",{children:"No rewards found"})})]})})]}),r==="redeem"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-gray-100",children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-4",children:"Redeem Cashback"}),S&&e.jsx("div",{className:"mb-4 p-4 bg-green-50 border border-green-200 rounded-lg",children:e.jsxs("div",{className:"flex items-center gap-2 text-green-800",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsxs("span",{className:"font-medium",children:["Successfully redeemed ",k(S.amount)]})]})}),E&&e.jsx("div",{className:"mb-4 p-4 bg-red-50 border border-red-200 rounded-lg",children:e.jsxs("div",{className:"flex items-center gap-2 text-red-800",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsx("span",{className:"font-medium",children:E})]})}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"p-4 bg-gray-50 rounded-lg",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-600",children:"Available to redeem"}),e.jsx("span",{className:"text-xl font-bold text-gray-900",children:k((c==null?void 0:c.availableBalance)||0)})]})}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[e.jsx("input",{type:"radio",checked:y,onChange:()=>C(!0),className:"w-4 h-4 text-indigo-600 focus:ring-indigo-500"}),e.jsx("span",{className:"text-gray-700",children:"Redeem all available cashback"})]}),e.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[e.jsx("input",{type:"radio",checked:!y,onChange:()=>C(!1),className:"w-4 h-4 text-indigo-600 focus:ring-indigo-500"}),e.jsx("span",{className:"text-gray-700",children:"Redeem custom amount"})]})]}),!y&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Amount to redeem"}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500",children:"Le"}),e.jsx("input",{type:"number",value:v,onChange:T=>w(T.target.value),placeholder:"0.00",min:"0.01",max:(c==null?void 0:c.availableBalance)||0,step:"0.01",className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"})]})]}),e.jsx("div",{className:"p-4 bg-indigo-50 rounded-lg",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("svg",{className:"w-5 h-5 text-indigo-600 mt-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsxs("div",{className:"text-sm text-indigo-800",children:[e.jsx("p",{className:"font-medium",children:"Cashback will be added to your wallet"}),e.jsxs("p",{className:"mt-1 text-indigo-600",children:["Wallet balance: ",b?k(b.balance):"N/A"]})]})]})}),e.jsx("button",{onClick:P,disabled:l||!(c!=null&&c.availableBalance)||c.availableBalance<.01,className:`w-full py-3 px-4 rounded-lg font-semibold text-white transition-colors ${l||!(c!=null&&c.availableBalance)||c.availableBalance<.01?"bg-gray-400 cursor-not-allowed":"bg-indigo-600 hover:bg-indigo-700"}`,children:l?e.jsxs("span",{className:"flex items-center justify-center gap-2",children:[e.jsxs("svg",{className:"animate-spin h-5 w-5",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Processing..."]}):`Redeem ${y?k((c==null?void 0:c.availableBalance)||0):v?k(parseFloat(v)):"Cashback"}`})]})]}),e.jsxs("div",{className:"bg-gray-50 rounded-xl p-4",children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Redemption Terms"}),e.jsxs("ul",{className:"text-sm text-gray-600 space-y-1",children:[e.jsx("li",{children:" Minimum redemption: Le 0.01"}),e.jsx("li",{children:" Cashback expires 90 days after being credited"}),e.jsx("li",{children:" Redeemed cashback is added to your primary wallet instantly"}),e.jsx("li",{children:" Expired cashback cannot be recovered"})]})]})]})]})}const Z5=t=>({id:t.id,userId:t.user_id,cardId:t.card_id,transactionId:t.transaction_id,principalAmount:parseFloat(t.principal_amount)||0,totalAmount:parseFloat(t.total_amount)||0,interestAmount:parseFloat(t.interest_amount)||0,interestRate:parseFloat(t.interest_rate)||0,currency:t.currency||"SLE",numInstallments:parseInt(t.num_installments)||3,installmentAmount:parseFloat(t.installment_amount)||0,installmentsPaid:parseInt(t.installments_paid)||0,amountPaid:parseFloat(t.amount_paid)||0,amountRemaining:parseFloat(t.amount_remaining)||0,status:t.status||"ACTIVE",nextPaymentDate:t.next_payment_date,lastPaymentDate:t.last_payment_date,merchantName:t.merchant_name,description:t.description,startedAt:t.started_at,dueDate:t.due_date,completedAt:t.completed_at,createdAt:t.created_at,updatedAt:t.updated_at}),X5=t=>({id:t.id,loanId:t.loan_id,userId:t.user_id,amount:parseFloat(t.amount)||0,currency:t.currency||"SLE",installmentNumber:parseInt(t.installment_number)||1,dueDate:t.due_date,paidDate:t.paid_date,status:t.status||"SCHEDULED",transactionId:t.transaction_id,autoDebitEnabled:t.auto_debit_enabled??!0,createdAt:t.created_at}),Tm={async getSummary(t){const{data:s,error:r}=await U.from("user_bnpl_summary").select("*").eq("user_id",t).maybeSingle();return r||!s?this.calculateSummary(t):{userId:s.user_id,activeLoans:parseInt(s.active_loans)||0,overdueLoans:parseInt(s.overdue_loans)||0,totalOutstanding:parseFloat(s.total_outstanding)||0,lifetimeBorrowed:parseFloat(s.lifetime_borrowed)||0,totalRepaid:parseFloat(s.total_repaid)||0}},async calculateSummary(t){const{data:s}=await U.from("bnpl_loans").select("status, amount_remaining, total_amount, amount_paid").eq("user_id",t);let r=0,a=0,n=0,i=0,l=0;for(const o of s||[])i+=parseFloat(o.total_amount)||0,l+=parseFloat(o.amount_paid)||0,o.status==="ACTIVE"?(r++,n+=parseFloat(o.amount_remaining)||0):o.status==="OVERDUE"&&(a++,n+=parseFloat(o.amount_remaining)||0);return{userId:t,activeLoans:r,overdueLoans:a,totalOutstanding:n,lifetimeBorrowed:i,totalRepaid:l}},async getLoans(t,s){let r=U.from("bnpl_loans").select("*").eq("user_id",t).order("created_at",{ascending:!1});s!=null&&s.status&&(r=r.eq("status",s.status)),s!=null&&s.limit&&(r=r.limit(s.limit));const{data:a,error:n}=await r;return n?(console.error("Error fetching BNPL loans:",n),[]):(a||[]).map(Z5)},async getLoan(t){const{data:s,error:r}=await U.from("bnpl_loans").select("*").eq("id",t).maybeSingle();return r||!s?null:Z5(s)},async getLoanPayments(t){const{data:s,error:r}=await U.from("bnpl_payments").select("*").eq("loan_id",t).order("installment_number",{ascending:!0});return r?(console.error("Error fetching BNPL payments:",r),[]):(s||[]).map(X5)},async getNextPayment(t){const{data:s}=await U.from("bnpl_payments").select("*").eq("user_id",t).in("status",["SCHEDULED","OVERDUE"]).order("due_date",{ascending:!0}).limit(1).maybeSingle();return s?X5(s):null},async createLoan(t,s){const{data:r,error:a}=await U.rpc("create_bnpl_loan",{p_user_id:t,p_card_id:s.cardId||null,p_amount:s.amount,p_num_installments:s.numInstallments,p_interest_rate:s.interestRate||0,p_merchant_name:s.merchantName||null,p_description:s.description||null,p_currency:s.currency||"SLE"});return a?a.message.includes("does not exist")?this.createLoanManually(t,s):{success:!1,error:a.message}:{success:!0,loanId:r}},async createLoanManually(t,s){const r=Math.round(s.amount*((s.interestRate||0)/100)*100)/100,a=s.amount+r,n=Math.round(a/s.numInstallments*100)/100,i=new Date;i.setMonth(i.getMonth()+s.numInstallments);const l=new Date;l.setMonth(l.getMonth()+1);const{data:o,error:c}=await U.from("bnpl_loans").insert({user_id:t,card_id:s.cardId,principal_amount:s.amount,total_amount:a,interest_amount:r,interest_rate:s.interestRate||0,currency:s.currency||"SLE",num_installments:s.numInstallments,installment_amount:n,amount_remaining:a,status:"ACTIVE",next_payment_date:l.toISOString().split("T")[0],merchant_name:s.merchantName,description:s.description,due_date:i.toISOString().split("T")[0]}).select("id").single();if(c)return{success:!1,error:c.message};for(let d=1;d<=s.numInstallments;d++){const u=new Date;u.setMonth(u.getMonth()+d),await U.from("bnpl_payments").insert({loan_id:o.id,user_id:t,amount:n,currency:s.currency||"SLE",installment_number:d,due_date:u.toISOString().split("T")[0],status:"SCHEDULED"})}return{success:!0,loanId:o.id}},async makePayment(t,s){const{data:r,error:a}=await U.rpc("make_bnpl_payment",{p_payment_id:t,p_wallet_id:s});if(a)return a.message.includes("does not exist")?this.makePaymentManually(t,s):{success:!1,message:a.message};const n=(r==null?void 0:r[0])||r;return{success:(n==null?void 0:n.success)||!1,message:(n==null?void 0:n.message)||"Unknown error",loanStatus:n==null?void 0:n.loan_status}},async makePaymentManually(t,s){const{data:r}=await U.from("bnpl_payments").select("*").eq("id",t).single();if(!r)return{success:!1,message:"Payment not found"};if(r.status==="PAID")return{success:!1,message:"Payment already made"};const{data:a}=await U.from("wallets").select("balance").eq("id",s).single();if(!a||parseFloat(a.balance)<parseFloat(r.amount))return{success:!1,message:"Insufficient wallet balance"};const{data:n}=await U.from("bnpl_loans").select("*").eq("id",r.loan_id).single();if(!n)return{success:!1,message:"Loan not found"};await U.from("wallets").update({balance:parseFloat(a.balance)-parseFloat(r.amount),updated_at:new Date().toISOString()}).eq("id",s);const{data:i}=await U.from("transactions").insert({wallet_id:s,type:"BNPL_PAYMENT",amount:-parseFloat(r.amount),status:"COMPLETED",description:`BNPL installment payment #${r.installment_number}`,metadata:{loan_id:n.id,payment_id:t}}).select("id").single();await U.from("bnpl_payments").update({status:"PAID",paid_date:new Date().toISOString().split("T")[0],transaction_id:i==null?void 0:i.id,updated_at:new Date().toISOString()}).eq("id",t);const l=parseInt(n.installments_paid)+1,o=parseFloat(n.amount_paid)+parseFloat(r.amount),c=parseFloat(n.amount_remaining)-parseFloat(r.amount),d=l>=parseInt(n.num_installments)?"PAID_OFF":"ACTIVE";let u=null;if(d==="ACTIVE"){const{data:m}=await U.from("bnpl_payments").select("due_date").eq("loan_id",n.id).eq("status","SCHEDULED").order("installment_number").limit(1).maybeSingle();u=m==null?void 0:m.due_date}return await U.from("bnpl_loans").update({installments_paid:l,amount_paid:o,amount_remaining:c,status:d,next_payment_date:u,last_payment_date:new Date().toISOString().split("T")[0],completed_at:d==="PAID_OFF"?new Date().toISOString():null,updated_at:new Date().toISOString()}).eq("id",n.id),{success:!0,message:"Payment successful",loanStatus:d}},async checkEligibility(t,s){const r=await this.getSummary(t);if(r.overdueLoans>0)return{eligible:!1,maxAmount:0,reason:"You have overdue BNPL payments. Please clear them first."};if(r.activeLoans>=3)return{eligible:!1,maxAmount:0,reason:"Maximum number of active BNPL loans reached (3)."};const n=5e4-r.totalOutstanding;return n<=0?{eligible:!1,maxAmount:0,reason:"You have reached your BNPL credit limit."}:s>n?{eligible:!1,maxAmount:n,reason:`Amount exceeds your available BNPL credit of Le ${n.toLocaleString()}.`}:{eligible:!0,maxAmount:n}},getInstallmentOptions(t){return[{installments:2,interestRate:0},{installments:3,interestRate:0},{installments:4,interestRate:5},{installments:6,interestRate:8},{installments:12,interestRate:12}].map(r=>{const a=Math.round(t*(r.interestRate/100)*100)/100,n=t+a,i=Math.round(n/r.installments*100)/100;return{installments:r.installments,interestRate:r.interestRate,installmentAmount:i,totalAmount:n,totalInterest:a}})}};function MX(){const{user:t}=wt(),s=At(),[r,a]=h.useState("overview"),[n,i]=h.useState(!0),[l,o]=h.useState(null),[c,d]=h.useState(null),[u,m]=h.useState([]),[p,x]=h.useState(null),[g,f]=h.useState([]),[b,j]=h.useState(null),[v,w]=h.useState(null),[y,C]=h.useState(!1),[S,_]=h.useState(null),[E,A]=h.useState(null);h.useEffect(()=>{t!=null&&t.id&&R()},[t==null?void 0:t.id]),h.useEffect(()=>{p&&N(p.id)},[p==null?void 0:p.id]);const R=async()=>{if(t!=null&&t.id){i(!0);try{const[T,O,q,K]=await Promise.all([Tm.getSummary(t.id),Tm.getLoans(t.id),Tm.getNextPayment(t.id),I()]);d(T),m(O),j(q),w(K)}catch(T){console.error("Error loading BNPL data:",T)}finally{i(!1)}}},I=async()=>{if(!(t!=null&&t.id))return null;const{data:T}=await U.from("wallets").select("id, balance").eq("user_id",t.id).eq("is_primary",!0).single();return T?{id:T.id,balance:parseFloat(T.balance)||0}:null},N=async T=>{const O=await Tm.getLoanPayments(T);f(O)},P=async()=>{if(!(!S||!(v!=null&&v.id))){o(S.id),A(null);try{const T=await Tm.makePayment(S.id,v.id);A(T),T.success&&(await R(),p&&await N(p.id),setTimeout(()=>{C(!1),_(null),A(null)},2e3))}catch(T){A({success:!1,message:T.message})}finally{o(null)}}},k=T=>`Le ${T.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})}`,D=T=>new Date(T).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}),$=T=>{const O=new Date(T),q=new Date;return Math.ceil((O.getTime()-q.getTime())/(1e3*60*60*24))},L=T=>{const O={ACTIVE:"bg-blue-100 text-blue-800",PAID_OFF:"bg-green-100 text-green-800",OVERDUE:"bg-red-100 text-red-800",DEFAULTED:"bg-red-200 text-red-900",CANCELLED:"bg-gray-100 text-gray-600",SCHEDULED:"bg-yellow-100 text-yellow-800",PAID:"bg-green-100 text-green-800",MISSED:"bg-red-100 text-red-800"};return e.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs font-medium ${O[T]||"bg-gray-100 text-gray-600"}`,children:T.replace("_"," ")})},B=T=>Math.round(T.installmentsPaid/T.numInstallments*100);return n?e.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-indigo-600 border-t-transparent"})}):e.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-6 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("button",{onClick:()=>s(-1),className:"flex items-center text-gray-600 hover:text-gray-900 mb-4",children:[e.jsx("svg",{className:"w-5 h-5 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"Back"]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Buy Now Pay Later"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Split payments into easy installments"})]}),e.jsx("div",{className:"hidden sm:flex items-center gap-2",children:e.jsx("svg",{className:"w-10 h-10 text-indigo-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})})})]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-purple-600 to-indigo-700 rounded-2xl p-6 text-white mb-6 shadow-lg",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-purple-200 text-sm font-medium",children:"Outstanding Balance"}),e.jsx("p",{className:"text-4xl font-bold mt-1",children:k((c==null?void 0:c.totalOutstanding)||0)}),((c==null?void 0:c.overdueLoans)||0)>0&&e.jsxs("p",{className:"text-red-300 text-sm mt-2 flex items-center gap-1",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),c==null?void 0:c.overdueLoans," overdue payment(s)"]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-purple-200 text-xs",children:"Active Loans"}),e.jsx("p",{className:"text-2xl font-bold",children:(c==null?void 0:c.activeLoans)||0})]})]}),e.jsx("div",{className:"mt-6 pt-4 border-t border-purple-500/30",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-center",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-lg font-bold",children:k((c==null?void 0:c.lifetimeBorrowed)||0)}),e.jsx("p",{className:"text-purple-200 text-xs",children:"Total Borrowed"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-lg font-bold",children:k((c==null?void 0:c.totalRepaid)||0)}),e.jsx("p",{className:"text-purple-200 text-xs",children:"Total Repaid"})]})]})})]}),b&&e.jsx("div",{className:`rounded-xl p-4 mb-6 ${$(b.dueDate)<0?"bg-red-50 border border-red-200":$(b.dueDate)<=7?"bg-yellow-50 border border-yellow-200":"bg-blue-50 border border-blue-200"}`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`p-2 rounded-lg ${$(b.dueDate)<0?"bg-red-100":$(b.dueDate)<=7?"bg-yellow-100":"bg-blue-100"}`,children:e.jsx("svg",{className:`w-5 h-5 ${$(b.dueDate)<0?"text-red-600":$(b.dueDate)<=7?"text-yellow-600":"text-blue-600"}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:$(b.dueDate)<0?"Payment Overdue!":`Next payment due in ${$(b.dueDate)} days`}),e.jsxs("p",{className:"text-sm text-gray-600",children:[k(b.amount)," - Due ",D(b.dueDate)]})]})]}),e.jsx("button",{onClick:()=>{_(b),C(!0)},className:"px-4 py-2 bg-indigo-600 text-white rounded-lg text-sm font-medium hover:bg-indigo-700",children:"Pay Now"})]})}),e.jsx("div",{className:"flex gap-1 bg-gray-100 rounded-lg p-1 mb-6",children:["overview","loans","payments"].map(T=>e.jsxs("button",{onClick:()=>{a(T),x(null)},className:`flex-1 py-2 px-4 rounded-md text-sm font-medium transition-colors ${r===T?"bg-white text-indigo-600 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:[T==="overview"&&"Overview",T==="loans"&&"My Loans",T==="payments"&&"Payments"]},T))}),r==="overview"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-gray-100",children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-4",children:"How BNPL Works"}),e.jsxs("div",{className:"grid gap-4",children:[e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"flex-shrink-0 w-8 h-8 bg-indigo-100 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-indigo-600 font-semibold text-sm",children:"1"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:"Shop & Choose BNPL"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Select BNPL at checkout for eligible purchases"})]})]}),e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"flex-shrink-0 w-8 h-8 bg-indigo-100 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-indigo-600 font-semibold text-sm",children:"2"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:"Split Into Installments"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Pay in 2-12 monthly installments. 0% interest for 2-3 months!"})]})]}),e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"flex-shrink-0 w-8 h-8 bg-indigo-100 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-indigo-600 font-semibold text-sm",children:"3"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:"Auto-Pay Monthly"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Payments are auto-debited from your wallet each month"})]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-gray-100",children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-4",children:"Installment Plans"}),e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-3",children:[{months:2,rate:"0%",label:"Pay in 2"},{months:3,rate:"0%",label:"Pay in 3"},{months:4,rate:"5%",label:"Pay in 4"},{months:6,rate:"8%",label:"Pay in 6"},{months:12,rate:"12%",label:"Pay in 12"}].map(T=>e.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg text-center",children:[e.jsx("p",{className:"text-lg font-bold text-gray-900",children:T.months}),e.jsx("p",{className:"text-xs text-gray-500",children:"months"}),e.jsxs("p",{className:`text-xs font-medium mt-1 ${T.rate==="0%"?"text-green-600":"text-gray-600"}`,children:[T.rate," interest"]})]},T.months))})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100",children:[e.jsxs("div",{className:"p-4 border-b border-gray-100 flex items-center justify-between",children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:"Recent Loans"}),e.jsx("button",{onClick:()=>a("loans"),className:"text-sm text-indigo-600 hover:text-indigo-700 font-medium",children:"View All"})]}),e.jsxs("div",{className:"divide-y divide-gray-100",children:[u.slice(0,3).map(T=>e.jsxs("div",{onClick:()=>{x(T),a("loans")},className:"p-4 flex items-center justify-between cursor-pointer hover:bg-gray-50",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-gray-100 rounded-lg",children:e.jsx("svg",{className:"w-5 h-5 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:T.merchantName||T.description||"BNPL Purchase"}),e.jsxs("p",{className:"text-sm text-gray-500",children:[T.installmentsPaid,"/",T.numInstallments," payments"]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"font-semibold text-gray-900",children:k(T.amountRemaining)}),L(T.status)]})]},T.id)),u.length===0&&e.jsxs("div",{className:"p-8 text-center text-gray-500",children:[e.jsx("svg",{className:"w-12 h-12 mx-auto text-gray-300 mb-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})}),e.jsx("p",{children:"No BNPL loans yet"}),e.jsx("p",{className:"text-sm mt-1",children:"Use BNPL at checkout to split payments"})]})]})]})]}),r==="loans"&&e.jsx("div",{className:"space-y-4",children:p?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("button",{onClick:()=>x(null),className:"flex items-center text-gray-600 hover:text-gray-900",children:[e.jsx("svg",{className:"w-5 h-5 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"Back to Loans"]}),e.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-gray-100",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:p.merchantName||p.description||"BNPL Purchase"}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Started ",D(p.startedAt)]})]}),L(p.status)]}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex justify-between text-sm mb-2",children:[e.jsx("span",{className:"text-gray-600",children:"Progress"}),e.jsxs("span",{className:"font-medium text-gray-900",children:[p.installmentsPaid,"/",p.numInstallments," payments"]})]}),e.jsx("div",{className:"h-3 bg-gray-200 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-indigo-600 rounded-full transition-all",style:{width:`${B(p)}%`}})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[e.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg",children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Principal"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900",children:k(p.principalAmount)})]}),e.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg",children:[e.jsxs("p",{className:"text-xs text-gray-500",children:["Interest (",p.interestRate,"%)"]}),e.jsx("p",{className:"text-lg font-semibold text-gray-900",children:k(p.interestAmount)})]}),e.jsxs("div",{className:"p-3 bg-indigo-50 rounded-lg",children:[e.jsx("p",{className:"text-xs text-indigo-600",children:"Amount Paid"}),e.jsx("p",{className:"text-lg font-semibold text-indigo-600",children:k(p.amountPaid)})]}),e.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg",children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Remaining"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900",children:k(p.amountRemaining)})]})]}),e.jsx("h4",{className:"font-medium text-gray-900 mb-3",children:"Payment Schedule"}),e.jsx("div",{className:"space-y-2",children:g.map(T=>e.jsxs("div",{className:`p-3 rounded-lg flex items-center justify-between ${T.status==="PAID"?"bg-green-50":T.status==="OVERDUE"?"bg-red-50":"bg-gray-50"}`,children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center ${T.status==="PAID"?"bg-green-100 text-green-600":T.status==="OVERDUE"?"bg-red-100 text-red-600":"bg-gray-200 text-gray-600"}`,children:T.status==="PAID"?e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}):e.jsx("span",{className:"text-sm font-medium",children:T.installmentNumber})}),e.jsxs("div",{children:[e.jsxs("p",{className:"font-medium text-gray-900",children:["Installment #",T.installmentNumber]}),e.jsx("p",{className:"text-sm text-gray-500",children:T.status==="PAID"?`Paid ${D(T.paidDate)}`:`Due ${D(T.dueDate)}`})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("p",{className:"font-semibold text-gray-900",children:k(T.amount)}),T.status!=="PAID"&&e.jsx("button",{onClick:()=>{_(T),C(!0)},className:"px-3 py-1 bg-indigo-600 text-white text-sm rounded-lg hover:bg-indigo-700",children:"Pay"})]})]},T.id))})]})]}):e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100",children:e.jsxs("div",{className:"divide-y divide-gray-100",children:[u.map(T=>e.jsxs("div",{onClick:()=>x(T),className:"p-4 cursor-pointer hover:bg-gray-50",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:T.merchantName||T.description||"BNPL Purchase"}),e.jsx("p",{className:"text-sm text-gray-500",children:D(T.startedAt)})]}),L(T.status)]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1 mr-4",children:[e.jsx("div",{className:"h-2 bg-gray-200 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-indigo-600 rounded-full",style:{width:`${B(T)}%`}})}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[T.installmentsPaid,"/",T.numInstallments," payments"]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"font-semibold text-gray-900",children:k(T.amountRemaining)}),e.jsx("p",{className:"text-xs text-gray-500",children:"remaining"})]})]})]},T.id)),u.length===0&&e.jsx("div",{className:"p-8 text-center text-gray-500",children:e.jsx("p",{children:"No BNPL loans"})})]})})}),r==="payments"&&e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100",children:[e.jsx("div",{className:"p-4 border-b border-gray-100",children:e.jsx("h3",{className:"font-semibold text-gray-900",children:"All Scheduled Payments"})}),e.jsx("div",{className:"divide-y divide-gray-100",children:u.flatMap(T=>T.status==="ACTIVE"||T.status==="OVERDUE"?[T]:[]).length===0?e.jsx("div",{className:"p-8 text-center text-gray-500",children:e.jsx("p",{children:"No upcoming payments"})}):u.filter(T=>T.status==="ACTIVE"||T.status==="OVERDUE").map(T=>e.jsx("div",{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:T.merchantName||T.description||"BNPL Purchase"}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Next: ",k(T.installmentAmount)," on"," ",T.nextPaymentDate?D(T.nextPaymentDate):"N/A"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[L(T.status),e.jsx("button",{onClick:()=>x(T),className:"text-indigo-600 hover:text-indigo-700 text-sm font-medium",children:"View"})]})]})},T.id))})]})}),y&&S&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl max-w-md w-full p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Make Payment"}),E?e.jsx("div",{className:`p-4 rounded-lg mb-4 ${E.success?"bg-green-50":"bg-red-50"}`,children:e.jsxs("div",{className:`flex items-center gap-2 ${E.success?"text-green-800":"text-red-800"}`,children:[E.success?e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}):e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsx("span",{className:"font-medium",children:E.message})]})}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg mb-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("span",{className:"text-gray-600",children:["Installment #",S.installmentNumber]}),e.jsx("span",{className:"text-xl font-bold text-gray-900",children:k(S.amount)})]}),e.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["Due: ",D(S.dueDate)]})]}),e.jsx("div",{className:"p-4 bg-indigo-50 rounded-lg mb-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("svg",{className:"w-5 h-5 text-indigo-600 mt-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z"})}),e.jsxs("div",{className:"text-sm",children:[e.jsx("p",{className:"font-medium text-indigo-800",children:"Payment from wallet"}),e.jsxs("p",{className:"text-indigo-600",children:["Available: ",v?k(v.balance):"N/A"]})]})]})}),v&&v.balance<S.amount&&e.jsx("div",{className:"p-3 bg-red-50 rounded-lg mb-4 text-sm text-red-700",children:"Insufficient wallet balance. Please top up your wallet first."})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>{C(!1),_(null),A(null)},className:"flex-1 py-3 px-4 border border-gray-300 rounded-lg text-gray-700 font-medium hover:bg-gray-50",children:E?"Close":"Cancel"}),!E&&e.jsx("button",{onClick:P,disabled:l!==null||!v||v.balance<S.amount,className:`flex-1 py-3 px-4 rounded-lg font-medium text-white ${l!==null||!v||v.balance<S.amount?"bg-gray-400 cursor-not-allowed":"bg-indigo-600 hover:bg-indigo-700"}`,children:l?e.jsxs("span",{className:"flex items-center justify-center gap-2",children:[e.jsxs("svg",{className:"animate-spin h-5 w-5",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Processing..."]}):"Pay Now"})]})]})})]})}const zw=t=>({id:t.id,agentId:t.agent_id,businessName:t.business_name,address:t.address,city:t.city,region:t.region,phone:t.phone,whatsapp:t.whatsapp,operatingHours:t.operating_hours,isOpenNow:t.is_open_now??!1,cashAvailable:t.cash_available??!0,dailyLimit:parseFloat(t.daily_limit)||5e4,minAmount:parseFloat(t.min_amount)||10,maxAmount:parseFloat(t.max_amount)||1e4,isActive:t.is_active??!0,verified:t.verified??!1,rating:parseFloat(t.rating)||0,totalTransactions:parseInt(t.total_transactions)||0,latitude:t.latitude?parseFloat(t.latitude):void 0,longitude:t.longitude?parseFloat(t.longitude):void 0}),Kp=t=>({id:t.id,userId:t.user_id,agentId:t.agent_id,agentLocationId:t.agent_location_id,amount:parseFloat(t.amount)||0,currency:t.currency||"SLE",fee:parseFloat(t.fee)||0,totalDeducted:parseFloat(t.total_deducted)||0,code:t.code,codeExpiresAt:t.code_expires_at,codeVerifiedAt:t.code_verified_at,status:t.status||"PENDING",qrCodeData:t.qr_code_data,walletId:t.wallet_id,transactionId:t.transaction_id,requestedAt:t.requested_at||t.created_at,completedAt:t.completed_at,cancelledAt:t.cancelled_at,cancelReason:t.cancel_reason,agentLocation:t.agent_locations?zw(t.agent_locations):void 0}),Bl={async getNearbyAgents(t){let s=U.from("agent_locations").select("*").eq("is_active",!0).eq("cash_available",!0).order("total_transactions",{ascending:!1});t!=null&&t.city&&(s=s.eq("city",t.city)),t!=null&&t.limit&&(s=s.limit(t.limit));const{data:r,error:a}=await s;if(a)return console.error("Error fetching agent locations:",a),[];let n=(r||[]).map(zw);return t!=null&&t.latitude&&(t!=null&&t.longitude)&&(n=n.map(i=>({...i,distance:i.latitude&&i.longitude?this.calculateDistance(t.latitude,t.longitude,i.latitude,i.longitude):void 0})),n.sort((i,l)=>(i.distance||999)-(l.distance||999))),n},calculateDistance(t,s,r,a){const i=this.toRad(r-t),l=this.toRad(a-s),o=Math.sin(i/2)*Math.sin(i/2)+Math.cos(this.toRad(t))*Math.cos(this.toRad(r))*Math.sin(l/2)*Math.sin(l/2),c=2*Math.atan2(Math.sqrt(o),Math.sqrt(1-o));return Math.round(6371*c*10)/10},toRad(t){return t*(Math.PI/180)},async getAgentLocation(t){const{data:s,error:r}=await U.from("agent_locations").select("*").eq("id",t).maybeSingle();return r||!s?null:zw(s)},async createRequest(t){const{data:s,error:r}=await U.rpc("create_cash_out_request",{p_user_id:t.userId,p_amount:t.amount,p_wallet_id:t.walletId,p_agent_location_id:t.agentLocationId||null,p_currency:t.currency||"SLE"});if(r)return r.message.includes("does not exist")?this.createRequestManually(t):{success:!1,error:r.message};const a=(s==null?void 0:s[0])||s;return a!=null&&a.success?{success:!0,request:await this.getRequest(a.request_id)||void 0,code:a.code}:{success:!1,error:(a==null?void 0:a.message)||"Failed to create request"}},async createRequestManually(t){const s=Math.max(Math.round(t.amount*.01*100)/100,1),r=t.amount+s,{data:a}=await U.from("wallets").select("balance").eq("id",t.walletId).single();if(!a||parseFloat(a.balance)<r)return{success:!1,error:"Insufficient balance"};const n=Math.floor(1e5+Math.random()*9e5).toString(),i=new Date;i.setMinutes(i.getMinutes()+30),await U.from("wallets").update({balance:parseFloat(a.balance)-r,updated_at:new Date().toISOString()}).eq("id",t.walletId);const{data:l,error:o}=await U.from("cash_out_requests").insert({user_id:t.userId,agent_location_id:t.agentLocationId,amount:t.amount,currency:t.currency||"SLE",fee:s,total_deducted:r,code:n,code_expires_at:i.toISOString(),wallet_id:t.walletId,status:"PENDING",qr_code_data:`CASHOUT_${t.userId}_${Date.now()}`}).select().single();return o?(await U.from("wallets").update({balance:parseFloat(a.balance),updated_at:new Date().toISOString()}).eq("id",t.walletId),{success:!1,error:o.message}):{success:!0,request:Kp(l),code:n}},async getRequest(t){const{data:s,error:r}=await U.from("cash_out_requests").select(`
        *,
        agent_locations (*)
      `).eq("id",t).maybeSingle();return r||!s?null:Kp(s)},async getUserRequests(t,s=20){const{data:r,error:a}=await U.from("cash_out_requests").select(`
        *,
        agent_locations (*)
      `).eq("user_id",t).order("created_at",{ascending:!1}).limit(s);return a?(console.error("Error fetching cash-out requests:",a),[]):(r||[]).map(Kp)},async getActiveRequest(t){const{data:s}=await U.from("cash_out_requests").select(`
        *,
        agent_locations (*)
      `).eq("user_id",t).eq("status","PENDING").gt("code_expires_at",new Date().toISOString()).order("created_at",{ascending:!1}).limit(1).maybeSingle();return s?Kp(s):null},async cancelRequest(t,s,r){const{data:a,error:n}=await U.rpc("cancel_cash_out",{p_request_id:t,p_user_id:s,p_reason:r||null});if(n)return n.message.includes("does not exist")?this.cancelRequestManually(t,s,r):{success:!1,message:n.message};const i=(a==null?void 0:a[0])||a;return{success:(i==null?void 0:i.success)||!1,message:(i==null?void 0:i.message)||"Unknown error"}},async cancelRequestManually(t,s,r){const{data:a}=await U.from("cash_out_requests").select("*").eq("id",t).eq("user_id",s).eq("status","PENDING").single();if(!a)return{success:!1,message:"Request not found or cannot be cancelled"};const{data:n}=await U.from("wallets").select("balance").eq("id",a.wallet_id).single();return n&&await U.from("wallets").update({balance:parseFloat(n.balance)+parseFloat(a.total_deducted),updated_at:new Date().toISOString()}).eq("id",a.wallet_id),await U.from("cash_out_requests").update({status:"CANCELLED",cancelled_at:new Date().toISOString(),cancel_reason:r,updated_at:new Date().toISOString()}).eq("id",t),{success:!0,message:"Cash-out request cancelled and funds refunded"}},calculateFee(t){return Math.max(Math.round(t*.01*100)/100,1)},getLimits(){return{minAmount:10,maxAmount:1e4,dailyLimit:5e4}}};function LX(){const{user:t}=wt(),s=At(),[r,a]=h.useState("amount"),[n,i]=h.useState(!1),[l,o]=h.useState(!1),[c,d]=h.useState(null),[u,m]=h.useState([]),[p,x]=h.useState(null),[g,f]=h.useState([]),[b,j]=h.useState(""),[v,w]=h.useState(null),[y,C]=h.useState(null),[S,_]=h.useState(""),[E,A]=h.useState(null),R=Bl.getLimits();h.useEffect(()=>{t!=null&&t.id&&I()},[t==null?void 0:t.id]);const I=async()=>{if(t!=null&&t.id){i(!0);try{const[X,se,de]=await Promise.all([N(),Bl.getActiveRequest(t.id),Bl.getUserRequests(t.id,20)]);d(X),x(se),f(de),se&&(C(se),_(se.code),a("code"))}catch(X){console.error("Error loading data:",X)}finally{i(!1)}}},N=async()=>{if(!(t!=null&&t.id))return null;const{data:X}=await U.from("wallets").select("id, balance, currency").eq("user_id",t.id).eq("is_primary",!0).single();return X?{id:X.id,balance:parseFloat(X.balance)||0,currency:X.currency||"SLE"}:null},P=async()=>{i(!0);try{const X=await Bl.getNearbyAgents({limit:20});m(X)}catch(X){console.error("Error loading agents:",X)}finally{i(!1)}},k=()=>{A(null);const X=parseFloat(b);if(!X||X<=0){A("Please enter a valid amount");return}if(X<R.minAmount){A(`Minimum withdrawal is Le ${R.minAmount.toLocaleString()}`);return}if(X>R.maxAmount){A(`Maximum withdrawal is Le ${R.maxAmount.toLocaleString()}`);return}const se=Bl.calculateFee(X),de=X+se;if(!c||c.balance<de){A("Insufficient balance");return}P(),a("agents")},D=X=>{w(X),a("confirm")},$=async()=>{if(!(!(t!=null&&t.id)||!(c!=null&&c.id))){o(!0),A(null);try{const X=await Bl.createRequest({userId:t.id,amount:parseFloat(b),walletId:c.id,agentLocationId:v==null?void 0:v.id});if(X.success&&X.request){C(X.request),_(X.code||X.request.code),a("code");const se=await N();d(se)}else A(X.error||"Failed to create cash-out request")}catch(X){A(X.message||"An error occurred")}finally{o(!1)}}},L=async()=>{if(!(!(t!=null&&t.id)||!y)){o(!0);try{const X=await Bl.cancelRequest(y.id,t.id,"User cancelled");X.success?(C(null),_(""),j(""),w(null),a("amount"),await I()):A(X.message)}catch(X){A(X.message)}finally{o(!1)}}},B=X=>`Le ${X.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})}`,T=X=>new Date(X).toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),O=X=>{const se=new Date(X),de=new Date,fe=se.getTime()-de.getTime();if(fe<=0)return"Expired";const z=Math.floor(fe/6e4);return`${z} min${z!==1?"s":""} remaining`},q=X=>{const se={PENDING:"bg-yellow-100 text-yellow-800",COMPLETED:"bg-green-100 text-green-800",CANCELLED:"bg-gray-100 text-gray-600",EXPIRED:"bg-red-100 text-red-800"};return e.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs font-medium ${se[X]||"bg-gray-100 text-gray-600"}`,children:X})},K=b?Bl.calculateFee(parseFloat(b)||0):0,le=(parseFloat(b)||0)+K;return n&&!c?e.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-indigo-600 border-t-transparent"})}):e.jsxs("div",{className:"max-w-lg mx-auto px-4 py-6 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("button",{onClick:()=>{r==="history"?a(y?"code":"amount"):r==="agents"?a("amount"):r==="confirm"?a("agents"):s(-1)},className:"flex items-center text-gray-600 hover:text-gray-900 mb-4",children:[e.jsx("svg",{className:"w-5 h-5 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"Back"]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Cash Out"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Withdraw cash at agent locations"})]}),e.jsx("button",{onClick:()=>a("history"),className:"text-indigo-600 hover:text-indigo-700 text-sm font-medium",children:"History"})]})]}),r!=="history"&&r!=="code"&&e.jsxs("div",{className:"bg-gradient-to-br from-green-600 to-teal-700 rounded-2xl p-6 text-white mb-6 shadow-lg",children:[e.jsx("p",{className:"text-green-100 text-sm",children:"Available Balance"}),e.jsx("p",{className:"text-3xl font-bold mt-1",children:B((c==null?void 0:c.balance)||0)})]}),E&&e.jsx("div",{className:"mb-4 p-4 bg-red-50 border border-red-200 rounded-lg",children:e.jsxs("div",{className:"flex items-center gap-2 text-red-800",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsx("span",{children:E})]})}),r==="amount"&&e.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-gray-100",children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-4",children:"Enter Amount"}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-2",children:"Amount to withdraw"}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-500 font-medium",children:"Le"}),e.jsx("input",{type:"number",value:b,onChange:X=>j(X.target.value),placeholder:"0.00",min:R.minAmount,max:R.maxAmount,className:"w-full pl-12 pr-4 py-4 border border-gray-300 rounded-lg text-xl font-semibold focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"})]}),e.jsxs("p",{className:"text-xs text-gray-500 mt-2",children:["Min: ",B(R.minAmount),"  Max: ",B(R.maxAmount)]})]}),e.jsx("div",{className:"grid grid-cols-4 gap-2 mb-6",children:[100,500,1e3,5e3].map(X=>e.jsx("button",{onClick:()=>j(X.toString()),className:`py-2 rounded-lg text-sm font-medium ${b===X.toString()?"bg-indigo-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:X.toLocaleString()},X))}),parseFloat(b)>0&&e.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg mb-6 space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Amount"}),e.jsx("span",{className:"font-medium",children:B(parseFloat(b))})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Fee (1%)"}),e.jsx("span",{className:"font-medium",children:B(K)})]}),e.jsxs("div",{className:"pt-2 border-t border-gray-200 flex justify-between",children:[e.jsx("span",{className:"font-medium text-gray-900",children:"Total"}),e.jsx("span",{className:"font-bold text-gray-900",children:B(le)})]})]}),e.jsx("button",{onClick:k,disabled:!b||parseFloat(b)<=0,className:`w-full py-3 px-4 rounded-lg font-semibold text-white ${!b||parseFloat(b)<=0?"bg-gray-400 cursor-not-allowed":"bg-indigo-600 hover:bg-indigo-700"}`,children:"Continue"})]}),r==="agents"&&e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100",children:[e.jsxs("div",{className:"p-4 border-b border-gray-100",children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:"Select Agent (Optional)"}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Choose a nearby agent or skip to get your code"})]}),e.jsxs("div",{className:"divide-y divide-gray-100 max-h-[400px] overflow-y-auto",children:[e.jsxs("button",{onClick:()=>D(null),className:"w-full p-4 text-left hover:bg-gray-50 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-indigo-600",children:"Skip - Use any agent"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Get a code valid at all agents"})]}),e.jsx("svg",{className:"w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]}),u.map(X=>e.jsx("button",{onClick:()=>D(X),disabled:!X.cashAvailable,className:`w-full p-4 text-left hover:bg-gray-50 ${X.cashAvailable?"":"opacity-50"}`,children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("p",{className:"font-medium text-gray-900",children:X.businessName}),X.verified&&e.jsx("svg",{className:"w-4 h-4 text-blue-500",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})})]}),e.jsx("p",{className:"text-sm text-gray-500",children:X.address}),X.city&&e.jsx("p",{className:"text-xs text-gray-400",children:X.city}),X.distance!==void 0&&e.jsxs("p",{className:"text-xs text-indigo-600 mt-1",children:[X.distance," km away"]})]}),e.jsxs("div",{className:"text-right",children:[X.cashAvailable?e.jsx("span",{className:"text-xs bg-green-100 text-green-700 px-2 py-0.5 rounded-full",children:"Cash Available"}):e.jsx("span",{className:"text-xs bg-red-100 text-red-700 px-2 py-0.5 rounded-full",children:"No Cash"}),X.rating>0&&e.jsxs("p",{className:"text-xs text-gray-500 mt-1 flex items-center justify-end gap-1",children:[e.jsx("svg",{className:"w-3 h-3 text-yellow-500",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})}),X.rating.toFixed(1)]})]})]})},X.id)),u.length===0&&!n&&e.jsxs("div",{className:"p-8 text-center text-gray-500",children:[e.jsx("p",{children:"No agents available"}),e.jsx("button",{onClick:()=>D(null),className:"mt-2 text-indigo-600 hover:text-indigo-700 font-medium",children:"Skip and get code"})]})]})]}),r==="confirm"&&e.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-gray-100",children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-4",children:"Confirm Cash-Out"}),e.jsxs("div",{className:"space-y-4 mb-6",children:[e.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Amount to receive"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:B(parseFloat(b))})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Fee"}),e.jsx("span",{className:"font-medium",children:B(K)})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Total deducted"}),e.jsx("span",{className:"font-semibold",children:B(le)})]}),v&&e.jsxs("div",{className:"pt-4 border-t border-gray-200",children:[e.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Agent"}),e.jsx("p",{className:"font-medium text-gray-900",children:v.businessName}),e.jsx("p",{className:"text-sm text-gray-500",children:v.address})]})]}),e.jsx("div",{className:"p-4 bg-yellow-50 rounded-lg mb-6",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("svg",{className:"w-5 h-5 text-yellow-600 mt-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),e.jsxs("div",{className:"text-sm text-yellow-800",children:[e.jsx("p",{className:"font-medium",children:"Important"}),e.jsx("p",{children:"You'll receive a 6-digit code valid for 30 minutes. Show this code to the agent to collect your cash."})]})]})}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>a("agents"),className:"flex-1 py-3 px-4 border border-gray-300 rounded-lg text-gray-700 font-medium hover:bg-gray-50",children:"Back"}),e.jsx("button",{onClick:$,disabled:l,className:`flex-1 py-3 px-4 rounded-lg font-semibold text-white ${l?"bg-gray-400 cursor-not-allowed":"bg-indigo-600 hover:bg-indigo-700"}`,children:l?"Processing...":"Confirm"})]})]}),r==="code"&&y&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-gray-100 text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx("svg",{className:"w-8 h-8 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Cash-Out Code Ready"}),e.jsx("p",{className:"text-sm text-gray-500 mb-6",children:"Show this code to any Peeap agent"}),e.jsx("div",{className:"bg-gray-900 rounded-xl p-6 mb-4",children:e.jsx("p",{className:"text-4xl font-mono font-bold text-white tracking-widest",children:S})}),e.jsxs("div",{className:"mb-4",children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Collect"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:B(y.amount)})]}),e.jsxs("div",{className:`inline-flex items-center gap-2 px-3 py-1 rounded-full text-sm ${new Date(y.codeExpiresAt)>new Date?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),O(y.codeExpiresAt)]})]}),e.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm border border-gray-100",children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-3",children:"How to collect"}),e.jsxs("ol",{className:"space-y-2 text-sm text-gray-600",children:[e.jsxs("li",{className:"flex items-start gap-3",children:[e.jsx("span",{className:"flex-shrink-0 w-5 h-5 bg-indigo-100 text-indigo-600 rounded-full flex items-center justify-center text-xs font-medium",children:"1"}),e.jsx("span",{children:"Visit any Peeap agent location"})]}),e.jsxs("li",{className:"flex items-start gap-3",children:[e.jsx("span",{className:"flex-shrink-0 w-5 h-5 bg-indigo-100 text-indigo-600 rounded-full flex items-center justify-center text-xs font-medium",children:"2"}),e.jsx("span",{children:"Show your 6-digit code to the agent"})]}),e.jsxs("li",{className:"flex items-start gap-3",children:[e.jsx("span",{className:"flex-shrink-0 w-5 h-5 bg-indigo-100 text-indigo-600 rounded-full flex items-center justify-center text-xs font-medium",children:"3"}),e.jsxs("span",{children:["Collect your ",B(y.amount)," cash"]})]})]})]}),y.status==="PENDING"&&e.jsx("button",{onClick:L,disabled:l,className:"w-full py-3 px-4 border border-red-300 text-red-600 rounded-lg font-medium hover:bg-red-50",children:l?"Cancelling...":"Cancel Request"})]}),r==="history"&&e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100",children:[e.jsx("div",{className:"p-4 border-b border-gray-100",children:e.jsx("h3",{className:"font-semibold text-gray-900",children:"Withdrawal History"})}),e.jsxs("div",{className:"divide-y divide-gray-100",children:[g.map(X=>e.jsx("div",{className:"p-4",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:B(X.amount)}),e.jsx("p",{className:"text-sm text-gray-500",children:T(X.requestedAt)}),X.agentLocation&&e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:X.agentLocation.businessName})]}),e.jsxs("div",{className:"text-right",children:[q(X.status),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Fee: ",B(X.fee)]})]})]})},X.id)),g.length===0&&e.jsx("div",{className:"p-8 text-center text-gray-500",children:e.jsx("p",{children:"No withdrawal history"})})]})]})]})}const e_={TRANSFER:{label:"Transfers",color:"#6366f1"},BILL_PAYMENT:{label:"Bills & Utilities",color:"#f59e0b"},AIRTIME:{label:"Airtime",color:"#10b981"},DATA:{label:"Data Bundles",color:"#06b6d4"},CARD_PAYMENT:{label:"Card Payments",color:"#8b5cf6"},BNPL_PAYMENT:{label:"BNPL",color:"#ec4899"},CASH_OUT:{label:"Cash Withdrawals",color:"#ef4444"},DEPOSIT:{label:"Deposits",color:"#22c55e"},CASHBACK_REDEMPTION:{label:"Cashback",color:"#14b8a6"},OTHER:{label:"Other",color:"#6b7280"}},Pm={async getSummary(t,s,r){const{data:a}=await U.from("wallets").select("id").eq("user_id",t).eq("is_primary",!0).single();if(!a)return{totalIncome:0,totalExpenses:0,netBalance:0,averageDaily:0,biggestExpense:null,transactionCount:0};const{data:n}=await U.from("transactions").select("amount, type, description, created_at").eq("wallet_id",a.id).eq("status","COMPLETED").gte("created_at",s.toISOString()).lte("created_at",r.toISOString());if(!(n!=null&&n.length))return{totalIncome:0,totalExpenses:0,netBalance:0,averageDaily:0,biggestExpense:null,transactionCount:0};let i=0,l=0,o=null;for(const u of n){const m=parseFloat(u.amount)||0;if(m>0)i+=m;else{const p=Math.abs(m);l+=p,(!o||p>o.amount)&&(o={amount:p,description:u.description||u.type,date:u.created_at})}}const c=Math.ceil((r.getTime()-s.getTime())/(1e3*60*60*24)),d=c>0?l/c:0;return{totalIncome:i,totalExpenses:l,netBalance:i-l,averageDaily:d,biggestExpense:o,transactionCount:n.length}},async getSpendingByCategory(t,s,r){const{data:a}=await U.from("wallets").select("id").eq("user_id",t).eq("is_primary",!0).single();if(!a)return[];const{data:n}=await U.from("transactions").select("amount, type").eq("wallet_id",a.id).eq("status","COMPLETED").lt("amount",0).gte("created_at",s.toISOString()).lte("created_at",r.toISOString());if(!(n!=null&&n.length))return[];const i={};let l=0;for(const c of n){const d=Math.abs(parseFloat(c.amount)||0),u=c.type||"OTHER";i[u]||(i[u]={amount:0,count:0}),i[u].amount+=d,i[u].count++,l+=d}return Object.entries(i).map(([c,d])=>{var u,m;return{category:((u=e_[c])==null?void 0:u.label)||c,amount:d.amount,percentage:l>0?Math.round(d.amount/l*100):0,transactionCount:d.count,color:((m=e_[c])==null?void 0:m.color)||"#6b7280"}}).sort((c,d)=>d.amount-c.amount)},async getMonthlyTrend(t,s=6){const{data:r}=await U.from("wallets").select("id").eq("user_id",t).eq("is_primary",!0).single();if(!r)return[];const a=new Date,n=new Date;n.setMonth(n.getMonth()-s+1),n.setDate(1),n.setHours(0,0,0,0);const{data:i}=await U.from("transactions").select("amount, created_at").eq("wallet_id",r.id).eq("status","COMPLETED").gte("created_at",n.toISOString()).lte("created_at",a.toISOString()),l={},o=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];for(let c=0;c<s;c++){const d=new Date;d.setMonth(d.getMonth()-c);const u=`${d.getFullYear()}-${String(d.getMonth()+1).padStart(2,"0")}`;l[u]={income:0,expenses:0}}for(const c of i||[]){const d=new Date(c.created_at),u=`${d.getFullYear()}-${String(d.getMonth()+1).padStart(2,"0")}`;if(l[u]){const m=parseFloat(c.amount)||0;m>0?l[u].income+=m:l[u].expenses+=Math.abs(m)}}return Object.entries(l).map(([c,d])=>{const[u,m]=c.split("-");return{month:c,monthName:o[parseInt(m)-1],income:d.income,expenses:d.expenses,net:d.income-d.expenses}}).reverse()},async getInsights(t){const s=[],r=new Date,a=new Date(r.getFullYear(),r.getMonth(),1),n=new Date(r.getFullYear(),r.getMonth()-1,1),i=new Date(r.getFullYear(),r.getMonth(),0),[l,o]=await Promise.all([this.getSummary(t,a,r),this.getSummary(t,n,i)]);if(o.totalExpenses>0&&l.totalExpenses>0){const c=(l.totalExpenses-o.totalExpenses)/o.totalExpenses*100;c>20?s.push({type:"warning",title:"Spending Increase",message:`Your spending is ${Math.abs(Math.round(c))}% higher than last month. Consider reviewing your expenses.`,metric:c}):c<-10&&s.push({type:"success",title:"Great Savings!",message:`You've reduced spending by ${Math.abs(Math.round(c))}% compared to last month.`,metric:c})}if(l.averageDaily>0){const c=new Date(r.getFullYear(),r.getMonth()+1,0).getDate(),d=l.averageDaily*c;s.push({type:"info",title:"Monthly Projection",message:`At your current rate, you'll spend Le ${d.toLocaleString(void 0,{maximumFractionDigits:0})} this month.`,metric:d})}if(l.transactionCount>0){const c=r.getDate(),d=l.transactionCount/c;d>5&&s.push({type:"info",title:"High Activity",message:`You're averaging ${d.toFixed(1)} transactions per day. Consider consolidating payments.`})}return l.netBalance>0&&s.push({type:"success",title:"Positive Cash Flow",message:`You've earned Le ${l.netBalance.toLocaleString()} more than you've spent this month!`,metric:l.netBalance}),s},async getTopRecipients(t,s,r,a=5){const{data:n}=await U.from("wallets").select("id").eq("user_id",t).eq("is_primary",!0).single();if(!n)return[];const{data:i}=await U.from("transactions").select("amount, description, metadata").eq("wallet_id",n.id).eq("status","COMPLETED").lt("amount",0).gte("created_at",s.toISOString()).lte("created_at",r.toISOString());if(!(i!=null&&i.length))return[];const l={};for(const o of i){const c=o.description||"Unknown";l[c]||(l[c]={amount:0,count:0}),l[c].amount+=Math.abs(parseFloat(o.amount)||0),l[c].count++}return Object.entries(l).map(([o,c])=>({name:o,...c})).sort((o,c)=>c.amount-o.amount).slice(0,a)}};function FX(){const{user:t}=wt(),s=At(),[r,a]=h.useState(!0),[n,i]=h.useState("month"),[l,o]=h.useState(null),[c,d]=h.useState([]),[u,m]=h.useState([]),[p,x]=h.useState([]),[g,f]=h.useState([]);h.useEffect(()=>{t!=null&&t.id&&j()},[t==null?void 0:t.id,n]);const b=()=>{const _=new Date,E=new Date;switch(n){case"week":E.setDate(E.getDate()-7);break;case"month":E.setMonth(E.getMonth()-1);break;case"quarter":E.setMonth(E.getMonth()-3);break;case"year":E.setFullYear(E.getFullYear()-1);break}return{start:E,end:_}},j=async()=>{if(t!=null&&t.id){a(!0);try{const{start:_,end:E}=b(),[A,R,I,N,P]=await Promise.all([Pm.getSummary(t.id,_,E),Pm.getSpendingByCategory(t.id,_,E),Pm.getMonthlyTrend(t.id,6),Pm.getInsights(t.id),Pm.getTopRecipients(t.id,_,E,5)]);o(A),d(R),m(I),x(N),f(P)}catch(_){console.error("Error loading analytics:",_)}finally{a(!1)}}},v=_=>`Le ${_.toLocaleString("en-US",{minimumFractionDigits:0,maximumFractionDigits:0})}`,w=_=>new Date(_).toLocaleDateString("en-US",{month:"short",day:"numeric"}),y=_=>{switch(_){case"warning":return e.jsx("svg",{className:"w-5 h-5 text-yellow-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})});case"success":return e.jsx("svg",{className:"w-5 h-5 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})});case"info":return e.jsx("svg",{className:"w-5 h-5 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}},C=_=>{switch(_){case"warning":return"bg-yellow-50 border-yellow-200";case"success":return"bg-green-50 border-green-200";case"info":return"bg-blue-50 border-blue-200"}},S=Math.max(...u.flatMap(_=>[_.income,_.expenses]),1);return r?e.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-indigo-600 border-t-transparent"})}):e.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-6 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("button",{onClick:()=>s(-1),className:"flex items-center text-gray-600 hover:text-gray-900 mb-4",children:[e.jsx("svg",{className:"w-5 h-5 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"Back"]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Spending Analytics"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Track and understand your spending habits"})]}),e.jsx("div",{className:"hidden sm:flex items-center gap-2",children:e.jsx("svg",{className:"w-10 h-10 text-indigo-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})})})]})]}),e.jsx("div",{className:"flex gap-2 overflow-x-auto pb-2 mb-6",children:["week","month","quarter","year"].map(_=>e.jsxs("button",{onClick:()=>i(_),className:`px-4 py-2 rounded-lg text-sm font-medium whitespace-nowrap ${n===_?"bg-indigo-600 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:[_==="week"&&"7 Days",_==="month"&&"30 Days",_==="quarter"&&"3 Months",_==="year"&&"1 Year"]},_))}),e.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm border border-gray-100",children:[e.jsx("p",{className:"text-xs text-gray-500 uppercase tracking-wide",children:"Income"}),e.jsx("p",{className:"text-xl font-bold text-green-600 mt-1",children:v((l==null?void 0:l.totalIncome)||0)})]}),e.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm border border-gray-100",children:[e.jsx("p",{className:"text-xs text-gray-500 uppercase tracking-wide",children:"Expenses"}),e.jsx("p",{className:"text-xl font-bold text-red-600 mt-1",children:v((l==null?void 0:l.totalExpenses)||0)})]}),e.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm border border-gray-100",children:[e.jsx("p",{className:"text-xs text-gray-500 uppercase tracking-wide",children:"Net"}),e.jsx("p",{className:`text-xl font-bold mt-1 ${((l==null?void 0:l.netBalance)||0)>=0?"text-green-600":"text-red-600"}`,children:v((l==null?void 0:l.netBalance)||0)})]}),e.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm border border-gray-100",children:[e.jsx("p",{className:"text-xs text-gray-500 uppercase tracking-wide",children:"Daily Avg"}),e.jsx("p",{className:"text-xl font-bold text-gray-900 mt-1",children:v((l==null?void 0:l.averageDaily)||0)})]})]}),p.length>0&&e.jsx("div",{className:"mb-6 space-y-3",children:p.slice(0,3).map((_,E)=>e.jsx("div",{className:`p-4 rounded-xl border ${C(_.type)}`,children:e.jsxs("div",{className:"flex items-start gap-3",children:[y(_.type),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:_.title}),e.jsx("p",{className:"text-sm text-gray-600 mt-0.5",children:_.message})]})]})},E))}),e.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-gray-100 mb-6",children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-4",children:"Spending by Category"}),c.length===0?e.jsx("div",{className:"text-center py-8 text-gray-500",children:e.jsx("p",{children:"No spending data for this period"})}):e.jsx("div",{className:"space-y-4",children:c.map((_,E)=>e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between text-sm mb-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:_.color}}),e.jsx("span",{className:"font-medium text-gray-900",children:_.category})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("span",{className:"font-semibold text-gray-900",children:v(_.amount)}),e.jsxs("span",{className:"text-gray-500 ml-2",children:["(",_.percentage,"%)"]})]})]}),e.jsx("div",{className:"h-2 bg-gray-100 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full rounded-full transition-all",style:{width:`${_.percentage}%`,backgroundColor:_.color}})}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[_.transactionCount," transactions"]})]},E))})]}),e.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-gray-100 mb-6",children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-4",children:"Monthly Trend"}),u.length===0?e.jsx("div",{className:"text-center py-8 text-gray-500",children:e.jsx("p",{children:"No trend data available"})}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-6 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full bg-green-500"}),e.jsx("span",{className:"text-gray-600",children:"Income"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full bg-red-500"}),e.jsx("span",{className:"text-gray-600",children:"Expenses"})]})]}),e.jsx("div",{className:"flex items-end gap-3 h-40",children:u.map((_,E)=>e.jsxs("div",{className:"flex-1 flex flex-col items-center",children:[e.jsxs("div",{className:"w-full flex gap-1 items-end h-32",children:[e.jsx("div",{className:"flex-1 bg-green-500 rounded-t transition-all hover:bg-green-600",style:{height:`${_.income/S*100}%`,minHeight:_.income>0?"4px":"0"},title:`Income: ${v(_.income)}`}),e.jsx("div",{className:"flex-1 bg-red-500 rounded-t transition-all hover:bg-red-600",style:{height:`${_.expenses/S*100}%`,minHeight:_.expenses>0?"4px":"0"},title:`Expenses: ${v(_.expenses)}`})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-2",children:_.monthName})]},E))})]})]}),g.length>0&&e.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-gray-100 mb-6",children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-4",children:"Top Spending"}),e.jsx("div",{className:"space-y-3",children:g.map((_,E)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 bg-indigo-100 rounded-full flex items-center justify-center text-indigo-600 font-semibold text-sm",children:E+1}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:_.name}),e.jsxs("p",{className:"text-xs text-gray-500",children:[_.count," transactions"]})]})]}),e.jsx("p",{className:"font-semibold text-gray-900",children:v(_.amount)})]},E))})]}),(l==null?void 0:l.biggestExpense)&&e.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-gray-100",children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-4",children:"Biggest Expense"}),e.jsxs("div",{className:"flex items-center justify-between p-4 bg-red-50 rounded-lg border border-red-100",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:l.biggestExpense.description}),e.jsx("p",{className:"text-sm text-gray-500",children:w(l.biggestExpense.date)})]}),e.jsx("p",{className:"text-xl font-bold text-red-600",children:v(l.biggestExpense.amount)})]})]}),!(l!=null&&l.transactionCount)&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx("svg",{className:"w-16 h-16 text-gray-300 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-1",children:"No Data Yet"}),e.jsx("p",{className:"text-gray-500",children:"Make some transactions to see your spending analytics"})]})]})}const OX=[{items:[{path:"/admin",label:"Dashboard",icon:Df}]},{title:"User Management",items:[{path:"/admin/users",label:"Users",icon:ia},{path:"/admin/merchants",label:"Merchants",icon:jt},{path:"/admin/businesses",label:"Businesses",icon:Ft,badge:"New",badgeColor:"primary"},{path:"/admin/agents",label:"Agents",icon:Eg}]},{title:"Core",items:[{path:"/admin/accounts",label:"Accounts",icon:jt},{path:"/admin/customers",label:"Customers",icon:ia},{path:"/admin/pots",label:"Savings Pots",icon:di},{path:"/admin/cards",label:"Cards",icon:Je},{path:"/admin/card-products",label:"Card Products",icon:TV,badge:"New",badgeColor:"primary"},{path:"/admin/card-programs",label:"Card Programs",icon:Eg},{path:"/admin/card-types",label:"Card Types",icon:MV},{path:"/admin/card-orders",label:"Card Orders",icon:pV,badge:"New",badgeColor:"primary"}]},{title:"Transactions",items:[{path:"/admin/authorization",label:"Authorization",icon:Jc},{path:"/admin/transactions",label:"Transactions",icon:ci},{path:"/admin/deposits",label:"Deposits",icon:Za,badge:"New",badgeColor:"primary"},{path:"/admin/disputes",label:"Disputes",icon:Lt}]},{title:"Configuration",items:[{path:"/admin/business-categories",label:"Business Categories",icon:Sg,badge:"New",badgeColor:"primary"},{path:"/admin/fees",label:"Fees & Pricing",icon:Je},{path:"/admin/fee-settings",label:"Fee Settings",icon:js},{path:"/admin/subscriptions",label:"Subscriptions",icon:jt}]},{title:"Developer",items:[{path:"/admin/developers",label:"SDK Management",icon:Ir},{path:"/admin/webhooks",label:"Webhooks",icon:Zc}]},{title:"Settings",items:[{path:"/admin/modules",label:"Modules",icon:IV,badge:"New",badgeColor:"primary"},{path:"/admin/roles",label:"Role Management",icon:YT},{path:"/admin/payment-settings",label:"Payment Settings",icon:or},{path:"/admin/compliance",label:"Compliance",icon:Xj,badge:"Pending",badgeColor:"yellow"}]},{title:"Support",items:[{path:"/admin/support",label:"Support Tickets",icon:No}]}];function Kt({children:t}){var m,p;const[s,r]=h.useState(!1),{user:a,logout:n}=wt(),i=Ga(),l=At(),[o,c]=h.useState({}),d=x=>{c(g=>({[x]:!g[x]}))},u=async()=>{await n(),l("/login")};return e.jsxs("div",{className:"min-h-screen bg-gray-100 dark:bg-gray-900",children:[s&&e.jsx("div",{className:"fixed inset-0 z-40 bg-gray-600 bg-opacity-75 lg:hidden",onClick:()=>r(!1)}),e.jsx("aside",{className:oe("fixed inset-y-0 left-0 z-50 w-64 bg-gray-900 transform transition-transform duration-300 ease-in-out lg:translate-x-0",s?"translate-x-0":"-translate-x-full"),children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex items-center justify-between h-16 px-6 bg-gray-800",children:[e.jsxs(Qe,{to:"/admin",className:"flex items-center gap-2",children:[e.jsx(Xt,{className:"w-8 h-8 text-primary-400"}),e.jsx("span",{className:"text-xl font-bold text-white",children:"CardPay"})]}),e.jsx("button",{className:"lg:hidden p-2 rounded-lg hover:bg-gray-700 text-gray-400",onClick:()=>r(!1),children:e.jsx(lt,{className:"w-5 h-5"})})]}),e.jsx("nav",{className:"flex-1 px-3 py-4 space-y-1 overflow-y-auto scrollbar-hide",style:{scrollbarWidth:"none",msOverflowStyle:"none"},children:OX.map((x,g)=>{const f=x.items.some(j=>i.pathname===j.path||j.path!=="/admin"&&i.pathname.startsWith(j.path)),b=f||(x.title?o[x.title]===!0:!0);return e.jsx("div",{className:"mb-1",children:x.title?e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:()=>!f&&d(x.title),className:oe("w-full flex items-center justify-between px-4 py-2 text-xs font-semibold uppercase tracking-wider rounded-lg transition-colors",f?"text-primary-400 bg-gray-800 cursor-default":"text-gray-500 hover:text-gray-300 hover:bg-gray-800 cursor-pointer"),children:[e.jsx("span",{children:x.title}),b?e.jsx(zs,{className:"w-4 h-4"}):e.jsx(Vs,{className:"w-4 h-4"})]}),e.jsx("div",{className:oe("overflow-hidden transition-all duration-200 ease-in-out",b?"max-h-96 opacity-100":"max-h-0 opacity-0"),children:e.jsx("div",{className:"space-y-1 mt-1 ml-2",children:x.items.map(j=>{const v=j.icon,w=i.pathname===j.path||j.path!=="/admin"&&i.pathname.startsWith(j.path);return e.jsxs(Qe,{to:j.path,className:oe("flex items-center px-4 py-2 rounded-lg transition-colors text-sm",w?"bg-primary-600 text-white":"text-gray-300 hover:bg-gray-800 hover:text-white"),children:[e.jsx(v,{className:"w-4 h-4 mr-3"}),e.jsx("span",{className:"flex-1",children:j.label}),j.badge&&e.jsx("span",{className:oe("px-2 py-0.5 text-xs rounded-full",j.badgeColor==="yellow"&&"bg-yellow-100 text-yellow-700",j.badgeColor==="primary"&&"bg-primary-100 text-primary-700",!j.badgeColor&&"bg-gray-100 text-gray-700"),children:j.badge})]},j.path)})})})]}):e.jsx("div",{className:"space-y-1",children:x.items.map(j=>{const v=j.icon,w=i.pathname===j.path||j.path!=="/admin"&&i.pathname.startsWith(j.path);return e.jsxs(Qe,{to:j.path,className:oe("flex items-center px-4 py-2.5 rounded-lg transition-colors text-sm",w?"bg-primary-600 text-white":"text-gray-300 hover:bg-gray-800 hover:text-white"),children:[e.jsx(v,{className:"w-5 h-5 mr-3"}),e.jsx("span",{className:"flex-1",children:j.label}),j.badge&&e.jsx("span",{className:oe("px-2 py-0.5 text-xs rounded-full",j.badgeColor==="yellow"&&"bg-yellow-100 text-yellow-700",j.badgeColor==="primary"&&"bg-primary-100 text-primary-700",!j.badgeColor&&"bg-gray-100 text-gray-700"),children:j.badge})]},j.path)})})},g)})}),e.jsxs("div",{className:"p-4 border-t border-gray-700",children:[e.jsxs("div",{className:"flex items-center mb-3",children:[e.jsx("div",{className:"w-10 h-10 bg-primary-600 rounded-full flex items-center justify-center",children:e.jsxs("span",{className:"text-white font-medium",children:[(m=a==null?void 0:a.firstName)==null?void 0:m.charAt(0),(p=a==null?void 0:a.lastName)==null?void 0:p.charAt(0)]})}),e.jsxs("div",{className:"ml-3",children:[e.jsxs("p",{className:"text-sm font-medium text-white",children:[a==null?void 0:a.firstName," ",a==null?void 0:a.lastName]}),e.jsx("p",{className:"text-xs text-gray-400",children:"Administrator"})]})]}),e.jsxs("button",{onClick:u,className:"flex items-center w-full px-4 py-2 text-gray-300 rounded-lg hover:bg-gray-800 hover:text-white transition-colors text-sm",children:[e.jsx(_0,{className:"w-5 h-5 mr-3"}),"Sign out"]})]})]})}),e.jsxs("div",{className:"lg:pl-64",children:[e.jsx("header",{className:"sticky top-0 z-30 h-16 bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 shadow-sm",children:e.jsxs("div",{className:"flex items-center justify-between h-full px-4 lg:px-8",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("button",{className:"lg:hidden p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700",onClick:()=>r(!0),children:e.jsx(E0,{className:"w-6 h-6 dark:text-gray-400"})}),e.jsxs("div",{className:"hidden md:flex items-center gap-2 bg-gray-100 dark:bg-gray-700 rounded-lg px-3 py-2",children:[e.jsx(ts,{className:"w-4 h-4 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search customers, cards, transactions...",className:"bg-transparent border-none outline-none text-sm w-80 dark:text-white dark:placeholder-gray-400"})]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("span",{className:"px-3 py-1 rounded-full text-xs font-medium bg-primary-100 text-primary-700",children:"Admin Portal"}),e.jsx(Wf,{}),e.jsx(zf,{})]})]})}),e.jsx("main",{className:"p-4 lg:p-8",children:t})]})]})}function BX(){const[t,s]=h.useState({totalAccounts:0,activeAccounts:0,totalCustomers:0,verifiedCustomers:0,totalCards:0,activeCards:0,virtualCards:0,physicalCards:0,cardPrograms:0,totalVolume:0,pendingAuthorizations:0,disputesOpen:0,apiRequests:0,webhookDeliveries:0,avgResponseTime:0,activeDevelopers:0}),[r,a]=h.useState([]),[n,i]=h.useState([]),[l,o]=h.useState(!0),[c,d]=h.useState(null);h.useEffect(()=>{Ut.getDefaultCurrency().then(d),p()},[]);const u=(c==null?void 0:c.symbol)||"",m=g=>`${u}${g.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}`,p=async()=>{o(!0);try{const{data:g}=await U.from("users").select("id, status, kyc_status, roles"),f=(g==null?void 0:g.filter(R=>{var I,N,P;return((I=R.roles)==null?void 0:I.includes("user"))&&!((N=R.roles)!=null&&N.includes("merchant"))&&!((P=R.roles)!=null&&P.includes("agent"))}))||[],b=(g==null?void 0:g.filter(R=>{var I;return(I=R.roles)==null?void 0:I.includes("merchant")}))||[],j=(g==null?void 0:g.filter(R=>{var I;return(I=R.roles)==null?void 0:I.includes("agent")}))||[],{data:v}=await U.from("cards").select("id, status, type"),w=new Set,{data:y}=await U.from("transactions").select("id, amount, type, status, created_at, user_id").order("created_at",{ascending:!1}).limit(5),{data:C}=await U.from("wallets").select("balance"),S=(C==null?void 0:C.reduce((R,I)=>R+(I.balance||0),0))||0;if(s({totalAccounts:(g==null?void 0:g.length)||0,activeAccounts:(g==null?void 0:g.filter(R=>R.status==="ACTIVE").length)||0,totalCustomers:f.length,verifiedCustomers:f.filter(R=>R.kyc_status==="VERIFIED").length,totalCards:(v==null?void 0:v.length)||0,activeCards:(v==null?void 0:v.filter(R=>R.status==="active").length)||0,virtualCards:(v==null?void 0:v.filter(R=>R.type==="virtual").length)||0,physicalCards:(v==null?void 0:v.filter(R=>R.type==="physical").length)||0,cardPrograms:0,totalVolume:S,pendingAuthorizations:0,disputesOpen:0,apiRequests:0,webhookDeliveries:0,avgResponseTime:0,activeDevelopers:w.size}),y&&y.length>0){const R=[...new Set(y.map(P=>P.user_id))],{data:I}=await U.from("users").select("id, first_name, last_name").in("id",R),N=new Map((I==null?void 0:I.map(P=>[P.id,P]))||[]);a(y.map(P=>{const k=N.get(P.user_id),D=x(new Date(P.created_at));return{id:P.id.slice(0,8).toUpperCase(),customer:k?`${k.first_name} ${k.last_name}`:"Unknown",amount:P.amount,type:P.type,status:P.status,time:D}}))}const _=f.filter(R=>R.kyc_status==="PENDING").length,E=[];_>0&&E.push({type:"kyc",description:`${_} KYC verification${_>1?"s":""} awaiting review`,priority:_>10?"high":"medium"});const A=f.filter(R=>R.status!=="ACTIVE").length;A>0&&E.push({type:"users",description:`${A} inactive user account${A>1?"s":""}`,priority:"low"}),i(E)}catch(g){console.error("Error fetching dashboard data:",g)}finally{o(!1)}},x=g=>{const f=Math.floor((new Date().getTime()-g.getTime())/1e3);if(f<60)return`${f} sec ago`;const b=Math.floor(f/60);if(b<60)return`${b} min ago`;const j=Math.floor(b/60);return j<24?`${j} hr ago`:`${Math.floor(j/24)} days ago`};return e.jsx(Kt,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Dashboard"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Overview of your card issuing platform"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Last updated: Just now"}),e.jsxs("button",{className:"px-4 py-2 text-sm bg-primary-600 text-white rounded-lg hover:bg-primary-700 flex items-center gap-2",children:[e.jsx(S0,{className:"w-4 h-4"}),"View Analytics"]})]})]}),e.jsxs(Oe.div,{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",initial:{opacity:0},animate:{opacity:1},transition:{staggerChildren:.1},children:[e.jsxs(we,{className:"p-6",delay:0,children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-900/30 rounded-lg",children:e.jsx(jt,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"})})}),e.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Total Accounts"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:t.totalAccounts.toLocaleString()}),e.jsxs("p",{className:"text-xs text-gray-400 dark:text-gray-500 mt-1",children:[t.activeAccounts.toLocaleString()," active"]})]}),e.jsxs(we,{className:"p-6",delay:.1,children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsx("div",{className:"p-2 bg-green-100 dark:bg-green-900/30 rounded-lg",children:e.jsx(ia,{className:"w-5 h-5 text-green-600 dark:text-green-400"})})}),e.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Customers"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:t.totalCustomers.toLocaleString()}),e.jsxs("p",{className:"text-xs text-gray-400 dark:text-gray-500 mt-1",children:[t.verifiedCustomers.toLocaleString()," verified"]})]}),e.jsxs(we,{className:"p-6",delay:.2,children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsx("div",{className:"p-2 bg-purple-100 dark:bg-purple-900/30 rounded-lg",children:e.jsx(Je,{className:"w-5 h-5 text-purple-600 dark:text-purple-400"})})}),e.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Cards Issued"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:t.totalCards.toLocaleString()}),e.jsxs("p",{className:"text-xs text-gray-400 dark:text-gray-500 mt-1",children:[t.activeCards.toLocaleString()," active"]})]}),e.jsxs(we,{className:"p-6",delay:.3,children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsx("div",{className:"p-2 bg-emerald-100 dark:bg-emerald-900/30 rounded-lg",children:e.jsx(js,{className:"w-5 h-5 text-emerald-600 dark:text-emerald-400"})})}),e.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Total Volume"}),e.jsxs("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:[u,(t.totalVolume/1e6).toFixed(2),"M"]}),e.jsx("p",{className:"text-xs text-gray-400 dark:text-gray-500 mt-1",children:"This month"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsx(we,{className:"p-6 border-l-4 border-l-yellow-500",delay:.4,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-yellow-100 dark:bg-yellow-900/30 rounded-lg",children:e.jsx(Jc,{className:"w-5 h-5 text-yellow-600 dark:text-yellow-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-gray-900 dark:text-white",children:"Pending Authorizations"}),e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:[t.pendingAuthorizations," requests waiting"]})]})]}),e.jsx(Qe,{to:"/admin/authorization",className:"text-primary-600 dark:text-primary-400 hover:text-primary-700 dark:hover:text-primary-300",children:e.jsx(xs,{className:"w-5 h-5"})})]})}),e.jsx(we,{className:"p-6 border-l-4 border-l-red-500",delay:.5,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-red-100 dark:bg-red-900/30 rounded-lg",children:e.jsx(Lt,{className:"w-5 h-5 text-red-600 dark:text-red-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-gray-900 dark:text-white",children:"Open Disputes"}),e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:[t.disputesOpen," disputes need attention"]})]})]}),e.jsx(Qe,{to:"/admin/disputes",className:"text-primary-600 dark:text-primary-400 hover:text-primary-700 dark:hover:text-primary-300",children:e.jsx(xs,{className:"w-5 h-5"})})]})}),e.jsx(we,{className:"p-6 border-l-4 border-l-blue-500",delay:.6,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-900/30 rounded-lg",children:e.jsx(Eg,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-gray-900 dark:text-white",children:"Card Programs"}),e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:[t.cardPrograms," active programs"]})]})]}),e.jsx(Qe,{to:"/admin/card-programs",className:"text-primary-600 dark:text-primary-400 hover:text-primary-700 dark:hover:text-primary-300",children:e.jsx(xs,{className:"w-5 h-5"})})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs(we,{className:"lg:col-span-2 p-6",delay:.7,children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Recent Transactions"}),e.jsxs(Qe,{to:"/admin/transactions",className:"text-sm text-primary-600 dark:text-primary-400 hover:text-primary-700 dark:hover:text-primary-300 flex items-center gap-1",children:["View all",e.jsx(xs,{className:"w-4 h-4"})]})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"text-left text-xs text-gray-500 dark:text-gray-400 border-b border-gray-200 dark:border-gray-700",children:[e.jsx("th",{className:"pb-3 font-medium",children:"Transaction ID"}),e.jsx("th",{className:"pb-3 font-medium",children:"Customer"}),e.jsx("th",{className:"pb-3 font-medium",children:"Amount"}),e.jsx("th",{className:"pb-3 font-medium",children:"Status"}),e.jsx("th",{className:"pb-3 font-medium",children:"Time"}),e.jsx("th",{className:"pb-3 font-medium"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-100 dark:divide-gray-700",children:r.map(g=>e.jsxs("tr",{className:"text-sm",children:[e.jsx("td",{className:"py-3 font-mono text-gray-600 dark:text-gray-400",children:g.id}),e.jsx("td",{className:"py-3 text-gray-900 dark:text-white",children:g.customer}),e.jsx("td",{className:"py-3 font-medium text-gray-900 dark:text-white",children:m(g.amount)}),e.jsx("td",{className:"py-3",children:e.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium ${g.status==="completed"?"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400":g.status==="pending"?"bg-yellow-100 dark:bg-yellow-900/30 text-yellow-700 dark:text-yellow-400":"bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-400"}`,children:[g.status==="completed"&&e.jsx(be,{className:"w-3 h-3"}),g.status==="pending"&&e.jsx(it,{className:"w-3 h-3"}),g.status==="flagged"&&e.jsx(Lt,{className:"w-3 h-3"}),g.status]})}),e.jsx("td",{className:"py-3 text-gray-500 dark:text-gray-400",children:g.time}),e.jsx("td",{className:"py-3",children:e.jsx("button",{className:"p-1 hover:bg-gray-100 dark:hover:bg-gray-700 rounded",children:e.jsx(es,{className:"w-4 h-4 text-gray-400 dark:text-gray-500"})})})]},g.id))})]})})]}),e.jsxs(we,{className:"p-6",delay:.8,children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Action Required"}),e.jsx("div",{className:"space-y-3",children:n.map((g,f)=>e.jsxs("div",{className:`p-3 rounded-lg border-l-4 ${g.priority==="high"?"bg-red-50 dark:bg-red-900/20 border-l-red-500":g.priority==="medium"?"bg-yellow-50 dark:bg-yellow-900/20 border-l-yellow-500":"bg-blue-50 dark:bg-blue-900/20 border-l-blue-500"}`,children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:g.description}),e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1 capitalize",children:[g.priority," priority"]})]},f))})]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs(we,{className:"p-4 text-center",delay:.9,children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Virtual Cards"}),e.jsx("p",{className:"text-xl font-bold text-gray-900 dark:text-white",children:t.virtualCards.toLocaleString()}),e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:[t.totalCards>0?Math.round(t.virtualCards/t.totalCards*100):0,"% of total"]})]}),e.jsxs(we,{className:"p-4 text-center",delay:1,children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Physical Cards"}),e.jsx("p",{className:"text-xl font-bold text-gray-900 dark:text-white",children:t.physicalCards.toLocaleString()}),e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:[t.totalCards>0?Math.round(t.physicalCards/t.totalCards*100):0,"% of total"]})]}),e.jsxs(we,{className:"p-4 text-center",delay:1.1,children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Merchants"}),e.jsx("p",{className:"text-xl font-bold text-gray-900 dark:text-white",children:t.totalAccounts-t.totalCustomers}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Business accounts"})]}),e.jsxs(we,{className:"p-4 text-center",delay:1.2,children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Active Developers"}),e.jsx("p",{className:"text-xl font-bold text-gray-900 dark:text-white",children:t.activeDevelopers}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"With API keys"})]})]})]})})}function $X(){const[t,s]=h.useState("all"),[r,a]=h.useState(""),[n,i]=h.useState(!0),[l,o]=h.useState([]),[c,d]=h.useState({totalToday:0,approved:0,declined:0,pending:0,avgResponseTime:"0ms",approvalRate:0});h.useEffect(()=>{u()},[]);const u=async()=>{i(!0);try{const g=new Date;g.setHours(0,0,0,0);const{data:f,error:b}=await U.from("transactions").select("*").gte("created_at",g.toISOString()).order("created_at",{ascending:!1});if(b){console.error("Error fetching transactions:",b),o([]),i(!1);return}const j=[...new Set((f==null?void 0:f.map(N=>N.user_id))||[])],{data:v}=await U.from("users").select("id, first_name, last_name").in("id",j),w=new Map((v==null?void 0:v.map(N=>[N.id,N]))||[]),y=[...new Set((f==null?void 0:f.map(N=>N.card_id).filter(Boolean))||[])],{data:C}=await U.from("cards").select("id, last_four").in("id",y),S=new Map((C==null?void 0:C.map(N=>[N.id,N]))||[]),_=(f||[]).map((N,P)=>{const k=w.get(N.user_id),D=N.card_id?S.get(N.card_id):null;let $="approved";return N.status==="pending"?$="pending":N.status==="failed"?$="declined":N.status==="completed"&&($="approved"),{id:`AUTH-${N.id.slice(0,6).toUpperCase()}`,cardId:N.card_id||"",cardLast4:(D==null?void 0:D.last_four)||"****",customerId:N.user_id,customerName:k?`${k.first_name} ${k.last_name}`:"Unknown",amount:N.amount||0,currency:N.currency||"USD",merchantName:N.merchant_name||"N/A",merchantCategory:N.merchant_category||"General",location:N.location||"Unknown",status:$,riskScore:Math.floor(Math.random()*30),timestamp:N.created_at,expiresIn:$==="pending"?45:0}});o(_);const E=_.filter(N=>N.status==="approved").length,A=_.filter(N=>N.status==="declined").length,R=_.filter(N=>N.status==="pending").length,I=_.length;d({totalToday:I,approved:E,declined:A,pending:R,avgResponseTime:"-",approvalRate:I>0?Math.round(E/I*100*10)/10:0})}catch(g){console.error("Error fetching authorization data:",g)}finally{i(!1)}},m=g=>g<30?"text-green-600 bg-green-100":g<70?"text-yellow-600 bg-yellow-100":"text-red-600 bg-red-100",p=g=>{switch(g){case"approved":return e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-700",children:[e.jsx(be,{className:"w-3 h-3"})," Approved"]});case"declined":return e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium bg-red-100 text-red-700",children:[e.jsx(ft,{className:"w-3 h-3"})," Declined"]});case"pending":return e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium bg-yellow-100 text-yellow-700",children:[e.jsx(it,{className:"w-3 h-3"})," Pending"]});default:return e.jsx("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-700",children:"Timeout"})}},x=l.filter(g=>!(t!=="all"&&g.status!==t||r&&!g.customerName.toLowerCase().includes(r.toLowerCase())&&!g.merchantName.toLowerCase().includes(r.toLowerCase())&&!g.id.toLowerCase().includes(r.toLowerCase())));return e.jsx(Kt,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Authorization"}),e.jsx("p",{className:"text-gray-500",children:"Real-time card authorization management"})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("button",{onClick:u,className:"px-4 py-2 text-sm bg-white border border-gray-300 rounded-lg hover:bg-gray-50 flex items-center gap-2",children:[e.jsx(vt,{className:`w-4 h-4 ${n?"animate-spin":""}`}),"Refresh"]}),e.jsxs("button",{className:"px-4 py-2 text-sm bg-primary-600 text-white rounded-lg hover:bg-primary-700 flex items-center gap-2",children:[e.jsx(Jc,{className:"w-4 h-4"}),"Configure Rules"]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-6 gap-4",children:[e.jsxs(W,{className:"p-4",children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Today's Requests"}),e.jsx("p",{className:"text-2xl font-bold",children:c.totalToday.toLocaleString()})]}),e.jsxs(W,{className:"p-4",children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Approved"}),e.jsx("p",{className:"text-2xl font-bold text-green-600",children:c.approved.toLocaleString()})]}),e.jsxs(W,{className:"p-4",children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Declined"}),e.jsx("p",{className:"text-2xl font-bold text-red-600",children:c.declined})]}),e.jsxs(W,{className:"p-4",children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Pending"}),e.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:c.pending})]}),e.jsxs(W,{className:"p-4",children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Avg Response"}),e.jsx("p",{className:"text-2xl font-bold",children:c.avgResponseTime})]}),e.jsxs(W,{className:"p-4",children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Approval Rate"}),e.jsxs("p",{className:"text-2xl font-bold text-green-600",children:[c.approvalRate,"%"]})]})]}),e.jsx(W,{className:"p-4",children:e.jsxs("div",{className:"flex flex-wrap items-center gap-4",children:[e.jsx("div",{className:"flex-1 min-w-64",children:e.jsxs("div",{className:"relative",children:[e.jsx(ts,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search by customer, merchant, or ID...",value:r,onChange:g=>a(g.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500"})]})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Bn,{className:"w-4 h-4 text-gray-400"}),e.jsxs("select",{value:t,onChange:g=>s(g.target.value),className:"border border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-primary-500",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"approved",children:"Approved"}),e.jsx("option",{value:"declined",children:"Declined"})]})]})]})}),e.jsx(W,{className:"overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-left px-6 py-3 text-xs font-medium text-gray-500 uppercase",children:"Request ID"}),e.jsx("th",{className:"text-left px-6 py-3 text-xs font-medium text-gray-500 uppercase",children:"Customer"}),e.jsx("th",{className:"text-left px-6 py-3 text-xs font-medium text-gray-500 uppercase",children:"Card"}),e.jsx("th",{className:"text-left px-6 py-3 text-xs font-medium text-gray-500 uppercase",children:"Amount"}),e.jsx("th",{className:"text-left px-6 py-3 text-xs font-medium text-gray-500 uppercase",children:"Merchant"}),e.jsx("th",{className:"text-left px-6 py-3 text-xs font-medium text-gray-500 uppercase",children:"Location"}),e.jsx("th",{className:"text-left px-6 py-3 text-xs font-medium text-gray-500 uppercase",children:"Risk"}),e.jsx("th",{className:"text-left px-6 py-3 text-xs font-medium text-gray-500 uppercase",children:"Status"}),e.jsx("th",{className:"text-left px-6 py-3 text-xs font-medium text-gray-500 uppercase",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:n?e.jsx("tr",{children:e.jsxs("td",{colSpan:9,className:"px-6 py-12 text-center text-gray-500",children:[e.jsx(vt,{className:"w-6 h-6 animate-spin mx-auto mb-2"}),"Loading authorization data..."]})}):x.length===0?e.jsx("tr",{children:e.jsxs("td",{colSpan:9,className:"px-6 py-12 text-center text-gray-500",children:[e.jsx(Jc,{className:"w-8 h-8 mx-auto mb-2 text-gray-300"}),"No authorization requests found"]})}):x.map(g=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:"font-mono text-sm",children:g.id})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Es,{className:"w-4 h-4 text-gray-400"}),e.jsx("span",{className:"text-sm",children:g.customerName})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Je,{className:"w-4 h-4 text-gray-400"}),e.jsxs("span",{className:"font-mono text-sm",children:["****",g.cardLast4]})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(js,{className:"w-4 h-4 text-gray-400"}),e.jsx("span",{className:"font-medium",children:g.amount.toLocaleString()}),e.jsx("span",{className:"text-gray-400 text-sm",children:g.currency})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:g.merchantName}),e.jsx("p",{className:"text-xs text-gray-500",children:g.merchantCategory})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-1 text-sm text-gray-600",children:[e.jsx(Vi,{className:"w-4 h-4"}),g.location]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${m(g.riskScore)}`,children:[g.riskScore,"%"]})}),e.jsxs("td",{className:"px-6 py-4",children:[p(g.status),g.status==="pending"&&g.expiresIn>0&&e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Expires in ",g.expiresIn,"s"]})]}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[g.status==="pending"&&e.jsxs(e.Fragment,{children:[e.jsx("button",{className:"p-1 bg-green-100 text-green-600 rounded hover:bg-green-200",title:"Approve",children:e.jsx(be,{className:"w-4 h-4"})}),e.jsx("button",{className:"p-1 bg-red-100 text-red-600 rounded hover:bg-red-200",title:"Decline",children:e.jsx(ft,{className:"w-4 h-4"})})]}),e.jsx("button",{className:"p-1 bg-gray-100 text-gray-600 rounded hover:bg-gray-200",title:"View Details",children:e.jsx(es,{className:"w-4 h-4"})})]})})]},g.id))})]})})}),c.pending>0&&e.jsxs(W,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(Lt,{className:"w-5 h-5 text-yellow-600"}),e.jsx("h2",{className:"text-lg font-semibold",children:"Pending Authorizations"})]}),e.jsx("div",{className:"space-y-3",children:e.jsxs("div",{className:"p-3 bg-yellow-50 border-l-4 border-l-yellow-500 rounded-r-lg",children:[e.jsxs("p",{className:"text-sm font-medium text-yellow-800",children:[c.pending," authorization request",c.pending!==1?"s":""," awaiting review"]}),e.jsx("p",{className:"text-xs text-yellow-600",children:"Click the approve or decline buttons to process pending requests"})]})})]})]})})}function UX(){const[t,s]=h.useState(!1),[r,a]=h.useState(null),[n,i]=h.useState({}),[l]=h.useState([]),[o]=h.useState([]),c=[{category:"Card",events:["card.created","card.updated","card.activated","card.frozen","card.terminated"]},{category:"Transaction",events:["transaction.created","transaction.authorized","transaction.cleared","transaction.declined","transaction.reversed"]},{category:"Customer",events:["customer.created","customer.updated","customer.kyc.submitted","customer.kyc.approved","customer.kyc.rejected"]},{category:"Account",events:["account.created","account.funded","account.debited","account.closed"]},{category:"Dispute",events:["dispute.created","dispute.updated","dispute.won","dispute.lost"]}],d=x=>{switch(x){case"active":return e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-700",children:[e.jsx(be,{className:"w-3 h-3"})," Active"]});case"disabled":return e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-700",children:[e.jsx(ft,{className:"w-3 h-3"})," Disabled"]});case"failing":return e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium bg-red-100 text-red-700",children:[e.jsx(Lt,{className:"w-3 h-3"})," Failing"]});default:return null}},u=x=>{switch(x){case"success":return e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-700",children:[e.jsx(be,{className:"w-3 h-3"})," Success"]});case"failed":return e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium bg-red-100 text-red-700",children:[e.jsx(ft,{className:"w-3 h-3"})," Failed"]});case"pending":return e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium bg-yellow-100 text-yellow-700",children:[e.jsx(it,{className:"w-3 h-3"})," Pending"]});case"retrying":return e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium bg-orange-100 text-orange-700",children:[e.jsx(Ru,{className:"w-3 h-3"})," Retrying"]});default:return null}},m=x=>{navigator.clipboard.writeText(x)},p=x=>{i(g=>({...g,[x]:!g[x]}))};return e.jsx(Kt,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Webhooks"}),e.jsx("p",{className:"text-gray-500",children:"Manage webhook endpoints and monitor deliveries"})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("button",{className:"px-4 py-2 text-sm bg-white border border-gray-300 rounded-lg hover:bg-gray-50 flex items-center gap-2",children:[e.jsx(vt,{className:"w-4 h-4"}),"Refresh"]}),e.jsxs("button",{onClick:()=>s(!0),className:"px-4 py-2 text-sm bg-primary-600 text-white rounded-lg hover:bg-primary-700 flex items-center gap-2",children:[e.jsx(It,{className:"w-4 h-4"}),"Add Endpoint"]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs(W,{className:"p-4",children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Total Endpoints"}),e.jsx("p",{className:"text-2xl font-bold",children:l.length})]}),e.jsxs(W,{className:"p-4",children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Active"}),e.jsx("p",{className:"text-2xl font-bold text-green-600",children:l.filter(x=>x.status==="active").length})]}),e.jsxs(W,{className:"p-4",children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Failing"}),e.jsx("p",{className:"text-2xl font-bold text-red-600",children:l.filter(x=>x.status==="failing").length})]}),e.jsxs(W,{className:"p-4",children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Total Deliveries (24h)"}),e.jsx("p",{className:"text-2xl font-bold",children:"12,456"})]})]}),e.jsxs(W,{className:"overflow-hidden",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:e.jsx("h2",{className:"text-lg font-semibold",children:"Webhook Endpoints"})}),e.jsx("div",{className:"divide-y divide-gray-200",children:l.map(x=>e.jsxs("div",{className:"p-6 hover:bg-gray-50",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:`p-2 rounded-lg ${x.status==="active"?"bg-green-100":x.status==="failing"?"bg-red-100":"bg-gray-100"}`,children:e.jsx(Zc,{className:`w-5 h-5 ${x.status==="active"?"text-green-600":x.status==="failing"?"text-red-600":"text-gray-600"}`})}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("code",{className:"text-sm font-mono text-gray-900",children:x.url}),e.jsx("button",{onClick:()=>m(x.url),className:"p-1 hover:bg-gray-200 rounded",children:e.jsx(vs,{className:"w-3 h-3 text-gray-400"})}),e.jsx("a",{href:x.url,target:"_blank",rel:"noopener noreferrer",className:"p-1 hover:bg-gray-200 rounded",children:e.jsx(Fr,{className:"w-3 h-3 text-gray-400"})})]}),e.jsx("p",{className:"text-sm text-gray-500",children:x.description})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[d(x.status),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("button",{className:"p-2 hover:bg-gray-100 rounded-lg",title:"Edit",children:e.jsx(Qc,{className:"w-4 h-4 text-gray-500"})}),e.jsx("button",{className:"p-2 hover:bg-gray-100 rounded-lg",title:"Settings",children:e.jsx(or,{className:"w-4 h-4 text-gray-500"})}),e.jsx("button",{className:"p-2 hover:bg-gray-100 rounded-lg",title:"Delete",children:e.jsx(Or,{className:"w-4 h-4 text-red-500"})})]})]})]}),e.jsxs("div",{className:"grid grid-cols-4 gap-4 mt-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Events"}),e.jsxs("div",{className:"flex flex-wrap gap-1",children:[x.events.slice(0,3).map(g=>e.jsx("span",{className:"px-2 py-0.5 bg-gray-100 text-gray-600 rounded text-xs",children:g},g)),x.events.length>3&&e.jsxs("span",{className:"px-2 py-0.5 bg-gray-100 text-gray-600 rounded text-xs",children:["+",x.events.length-3," more"]})]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Success Rate"}),e.jsxs("p",{className:`text-sm font-medium ${x.successRate>=95?"text-green-600":x.successRate>=80?"text-yellow-600":"text-red-600"}`,children:[x.successRate,"%"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Total Deliveries"}),e.jsx("p",{className:"text-sm font-medium",children:x.totalDeliveries.toLocaleString()})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Signing Secret"}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("code",{className:"text-xs font-mono text-gray-600",children:n[x.id]?x.secret:""}),e.jsx("button",{onClick:()=>p(x.id),className:"p-1 hover:bg-gray-200 rounded",children:n[x.id]?e.jsx(Ln,{className:"w-3 h-3 text-gray-400"}):e.jsx(es,{className:"w-3 h-3 text-gray-400"})}),e.jsx("button",{onClick:()=>m(x.secret),className:"p-1 hover:bg-gray-200 rounded",children:e.jsx(vs,{className:"w-3 h-3 text-gray-400"})})]})]})]}),e.jsxs("div",{className:"flex items-center gap-4 mt-4 pt-4 border-t border-gray-100",children:[e.jsx("button",{onClick:()=>a(x),className:"text-sm text-primary-600 hover:text-primary-700 flex items-center gap-1",children:"View Deliveries"}),e.jsxs("button",{className:"text-sm text-gray-600 hover:text-gray-700 flex items-center gap-1",children:[e.jsx(Ba,{className:"w-3 h-3"}),"Send Test Event"]})]})]},x.id))})]}),e.jsxs(W,{className:"overflow-hidden",children:[e.jsxs("div",{className:"px-6 py-4 border-b border-gray-200 flex justify-between items-center",children:[e.jsx("h2",{className:"text-lg font-semibold",children:"Recent Deliveries"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"relative",children:[e.jsxs("select",{className:"appearance-none bg-white border border-gray-300 rounded-lg px-3 py-1.5 pr-8 text-sm focus:ring-2 focus:ring-primary-500",children:[e.jsx("option",{value:"all",children:"All Events"}),e.jsx("option",{value:"card",children:"Card Events"}),e.jsx("option",{value:"transaction",children:"Transaction Events"}),e.jsx("option",{value:"customer",children:"Customer Events"})]}),e.jsx(zs,{className:"absolute right-2 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400 pointer-events-none"})]}),e.jsxs("div",{className:"relative",children:[e.jsxs("select",{className:"appearance-none bg-white border border-gray-300 rounded-lg px-3 py-1.5 pr-8 text-sm focus:ring-2 focus:ring-primary-500",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"success",children:"Success"}),e.jsx("option",{value:"failed",children:"Failed"}),e.jsx("option",{value:"retrying",children:"Retrying"})]}),e.jsx(zs,{className:"absolute right-2 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400 pointer-events-none"})]})]})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-left px-6 py-3 text-xs font-medium text-gray-500 uppercase",children:"Event"}),e.jsx("th",{className:"text-left px-6 py-3 text-xs font-medium text-gray-500 uppercase",children:"Endpoint"}),e.jsx("th",{className:"text-left px-6 py-3 text-xs font-medium text-gray-500 uppercase",children:"Status"}),e.jsx("th",{className:"text-left px-6 py-3 text-xs font-medium text-gray-500 uppercase",children:"Response"}),e.jsx("th",{className:"text-left px-6 py-3 text-xs font-medium text-gray-500 uppercase",children:"Duration"}),e.jsx("th",{className:"text-left px-6 py-3 text-xs font-medium text-gray-500 uppercase",children:"Time"}),e.jsx("th",{className:"text-left px-6 py-3 text-xs font-medium text-gray-500 uppercase",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:o.map(x=>{var g;return e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:"px-2 py-1 bg-gray-100 text-gray-700 rounded text-xs font-mono",children:x.event})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("span",{className:"text-sm text-gray-600 font-mono",children:[(g=l.find(f=>f.id===x.webhookId))==null?void 0:g.url.replace(/https?:\/\//,"").slice(0,30),"..."]})}),e.jsxs("td",{className:"px-6 py-4",children:[u(x.status),x.retries>0&&e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[x.retries," retries"]})]}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:`text-sm font-medium ${x.statusCode&&x.statusCode>=200&&x.statusCode<300?"text-green-600":"text-red-600"}`,children:x.statusCode||"-"})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:"text-sm text-gray-600",children:x.duration?`${x.duration}ms`:"-"})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:"text-sm text-gray-500",children:new Date(x.timestamp).toLocaleTimeString()})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{className:"p-1 bg-gray-100 text-gray-600 rounded hover:bg-gray-200",title:"View Details",children:e.jsx(es,{className:"w-4 h-4"})}),x.status==="failed"&&e.jsx("button",{className:"p-1 bg-orange-100 text-orange-600 rounded hover:bg-orange-200",title:"Retry",children:e.jsx(Ru,{className:"w-4 h-4"})})]})})]},x.id)})})]})})]}),e.jsxs(W,{className:"p-6",children:[e.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Available Event Types"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4",children:c.map(x=>e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-gray-900 mb-2",children:x.category}),e.jsx("div",{className:"space-y-1",children:x.events.map(g=>e.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-600 hover:text-primary-600 cursor-pointer",children:[e.jsx("span",{className:"w-1.5 h-1.5 bg-gray-300 rounded-full"}),g]},g))})]},x.category))})]}),t&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:e.jsxs(W,{className:"w-full max-w-lg p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-lg font-semibold",children:"Add Webhook Endpoint"}),e.jsx("button",{onClick:()=>s(!1),className:"p-2 hover:bg-gray-100 rounded-lg",children:e.jsx(ft,{className:"w-5 h-5 text-gray-500"})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Endpoint URL"}),e.jsx("input",{type:"url",placeholder:"https://example.com/webhooks",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),e.jsx("input",{type:"text",placeholder:"Brief description of this endpoint",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Events to Subscribe"}),e.jsxs("div",{className:"max-h-48 overflow-y-auto border border-gray-200 rounded-lg p-3 space-y-3",children:[e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",className:"rounded text-primary-600"}),e.jsx("span",{className:"text-sm font-medium",children:"All Events (*)"})]}),e.jsx("hr",{}),c.map(x=>e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-medium text-gray-500 mb-1",children:x.category}),e.jsx("div",{className:"space-y-1 ml-2",children:x.events.map(g=>e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",className:"rounded text-primary-600"}),e.jsx("span",{className:"text-sm text-gray-700",children:g})]},g))})]},x.category))]})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx("button",{onClick:()=>s(!1),className:"flex-1 px-4 py-2 bg-white border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{className:"flex-1 px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700",children:"Create Endpoint"})]})]})]})})]})})}function VX(){const[t,s]=h.useState("kyc"),[r,a]=h.useState("all"),[n,i]=h.useState(""),[l]=h.useState({pendingKYC:0,approvedToday:0,rejectedToday:0,openAlerts:0,criticalAlerts:0,pendingReports:0}),[o]=h.useState([]),[c]=h.useState([]),[d]=h.useState([]),u=f=>{switch(f){case"approved":return e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400",children:[e.jsx(be,{className:"w-3 h-3"})," Approved"]});case"rejected":return e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-400",children:[e.jsx(ft,{className:"w-3 h-3"})," Rejected"]});case"pending":return e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium bg-yellow-100 dark:bg-yellow-900/30 text-yellow-700 dark:text-yellow-400",children:[e.jsx(it,{className:"w-3 h-3"})," Pending"]});case"escalated":return e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium bg-orange-100 dark:bg-orange-900/30 text-orange-700 dark:text-orange-400",children:[e.jsx(Lt,{className:"w-3 h-3"})," Escalated"]});default:return null}},m=f=>{switch(f){case"low":return e.jsx("span",{className:"px-2 py-0.5 rounded text-xs font-medium bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400",children:"Low"});case"medium":return e.jsx("span",{className:"px-2 py-0.5 rounded text-xs font-medium bg-yellow-100 dark:bg-yellow-900/30 text-yellow-700 dark:text-yellow-400",children:"Medium"});case"high":return e.jsx("span",{className:"px-2 py-0.5 rounded text-xs font-medium bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-400",children:"High"});default:return null}},p=f=>{switch(f){case"low":return e.jsx("span",{className:"px-2 py-0.5 rounded text-xs font-medium bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-400",children:"Low"});case"medium":return e.jsx("span",{className:"px-2 py-0.5 rounded text-xs font-medium bg-yellow-100 dark:bg-yellow-900/30 text-yellow-700 dark:text-yellow-400",children:"Medium"});case"high":return e.jsx("span",{className:"px-2 py-0.5 rounded text-xs font-medium bg-orange-100 dark:bg-orange-900/30 text-orange-700 dark:text-orange-400",children:"High"});case"critical":return e.jsx("span",{className:"px-2 py-0.5 rounded text-xs font-medium bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-400",children:"Critical"});default:return null}},x=f=>{switch(f){case"aml":return e.jsx(Xt,{className:"w-4 h-4 text-purple-600 dark:text-purple-400"});case"pep":return e.jsx(BT,{className:"w-4 h-4 text-blue-600 dark:text-blue-400"});case"sanctions":return e.jsx(hl,{className:"w-4 h-4 text-red-600 dark:text-red-400"});case"velocity":return e.jsx(rr,{className:"w-4 h-4 text-orange-600 dark:text-orange-400"});case"fraud":return e.jsx(Lt,{className:"w-4 h-4 text-red-600 dark:text-red-400"});default:return e.jsx(ut,{className:"w-4 h-4 text-gray-600 dark:text-gray-400"})}},g=o.filter(f=>!(r!=="all"&&f.status!==r||n&&!f.customerName.toLowerCase().includes(n.toLowerCase())&&!f.customerEmail.toLowerCase().includes(n.toLowerCase())));return e.jsx(Kt,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Compliance"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"KYC verifications, AML monitoring, and regulatory reporting"})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("button",{className:"px-4 py-2 text-sm bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300 flex items-center gap-2",children:[e.jsx(ws,{className:"w-4 h-4"}),"Export"]}),e.jsxs("button",{className:"px-4 py-2 text-sm bg-primary-600 text-white rounded-lg hover:bg-primary-700 flex items-center gap-2",children:[e.jsx(Xj,{className:"w-4 h-4"}),"Generate Report"]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-6 gap-4",children:[e.jsxs(we,{className:"p-4",delay:0,children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Pending KYC"}),e.jsx("p",{className:"text-2xl font-bold text-yellow-600 dark:text-yellow-400",children:l.pendingKYC})]}),e.jsxs(we,{className:"p-4",delay:.1,children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Approved Today"}),e.jsx("p",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:l.approvedToday})]}),e.jsxs(we,{className:"p-4",delay:.2,children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Rejected Today"}),e.jsx("p",{className:"text-2xl font-bold text-red-600 dark:text-red-400",children:l.rejectedToday})]}),e.jsxs(we,{className:"p-4",delay:.3,children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Open Alerts"}),e.jsx("p",{className:"text-2xl font-bold text-orange-600 dark:text-orange-400",children:l.openAlerts})]}),e.jsxs(we,{className:"p-4",delay:.4,children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Critical Alerts"}),e.jsx("p",{className:"text-2xl font-bold text-red-600 dark:text-red-400",children:l.criticalAlerts})]}),e.jsxs(we,{className:"p-4",delay:.5,children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Pending Reports"}),e.jsx("p",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:l.pendingReports})]})]}),e.jsx(W,{className:"p-1",children:e.jsx("div",{className:"flex gap-1",children:["kyc","aml","reports","sanctions"].map(f=>e.jsxs("button",{onClick:()=>s(f),className:`flex-1 px-4 py-2 text-sm font-medium rounded-lg transition-colors ${t===f?"bg-primary-600 text-white":"text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700"}`,children:[f==="kyc"&&"KYC Reviews",f==="aml"&&"AML Alerts",f==="reports"&&"Reports",f==="sanctions"&&"Sanctions Screening"]},f))})}),t==="kyc"&&e.jsxs(e.Fragment,{children:[e.jsx(W,{className:"p-4",children:e.jsxs("div",{className:"flex flex-wrap items-center gap-4",children:[e.jsx("div",{className:"flex-1 min-w-64",children:e.jsxs("div",{className:"relative",children:[e.jsx(ts,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search by name or email...",value:n,onChange:f=>i(f.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Bn,{className:"w-4 h-4 text-gray-400"}),e.jsxs("select",{value:r,onChange:f=>a(f.target.value),className:"border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-primary-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"approved",children:"Approved"}),e.jsx("option",{value:"rejected",children:"Rejected"})]})]})]})}),e.jsx(W,{className:"overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700/50 border-b border-gray-200 dark:border-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-left px-6 py-3 text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Customer"}),e.jsx("th",{className:"text-left px-6 py-3 text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Document"}),e.jsx("th",{className:"text-left px-6 py-3 text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Submitted"}),e.jsx("th",{className:"text-left px-6 py-3 text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Risk Level"}),e.jsx("th",{className:"text-left px-6 py-3 text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Status"}),e.jsx("th",{className:"text-left px-6 py-3 text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Assigned To"}),e.jsx("th",{className:"text-left px-6 py-3 text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:g.map(f=>e.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700/50",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-gray-100 dark:bg-gray-700 rounded-full flex items-center justify-center",children:e.jsx(Es,{className:"w-5 h-5 text-gray-500 dark:text-gray-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-sm text-gray-900 dark:text-white",children:f.customerName}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:f.customerEmail})]})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Yh,{className:"w-4 h-4 text-gray-400"}),e.jsx("span",{className:"text-sm text-gray-900 dark:text-white",children:f.documentType})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-300",children:new Date(f.submittedAt).toLocaleDateString()})}),e.jsx("td",{className:"px-6 py-4",children:m(f.riskLevel)}),e.jsx("td",{className:"px-6 py-4",children:u(f.status)}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-300",children:f.assignedTo||"Unassigned"})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{className:"p-1 bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300 rounded hover:bg-gray-200 dark:hover:bg-gray-600",title:"View",children:e.jsx(es,{className:"w-4 h-4"})}),f.status==="pending"&&e.jsxs(e.Fragment,{children:[e.jsx("button",{className:"p-1 bg-green-100 dark:bg-green-900/30 text-green-600 dark:text-green-400 rounded hover:bg-green-200 dark:hover:bg-green-900/50",title:"Approve",children:e.jsx(be,{className:"w-4 h-4"})}),e.jsx("button",{className:"p-1 bg-red-100 dark:bg-red-900/30 text-red-600 dark:text-red-400 rounded hover:bg-red-200 dark:hover:bg-red-900/50",title:"Reject",children:e.jsx(ft,{className:"w-4 h-4"})})]})]})})]},f.id))})]})})})]}),t==="aml"&&e.jsxs(W,{className:"overflow-hidden",children:[e.jsxs("div",{className:"px-6 py-4 border-b border-gray-200 dark:border-gray-700 flex justify-between items-center",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"AML/Fraud Alerts"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"relative",children:[e.jsxs("select",{className:"appearance-none bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-1.5 pr-8 text-sm focus:ring-2 focus:ring-primary-500 text-gray-900 dark:text-white",children:[e.jsx("option",{value:"all",children:"All Types"}),e.jsx("option",{value:"aml",children:"AML"}),e.jsx("option",{value:"pep",children:"PEP"}),e.jsx("option",{value:"sanctions",children:"Sanctions"}),e.jsx("option",{value:"velocity",children:"Velocity"}),e.jsx("option",{value:"fraud",children:"Fraud"})]}),e.jsx(zs,{className:"absolute right-2 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400 pointer-events-none"})]}),e.jsxs("div",{className:"relative",children:[e.jsxs("select",{className:"appearance-none bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-1.5 pr-8 text-sm focus:ring-2 focus:ring-primary-500 text-gray-900 dark:text-white",children:[e.jsx("option",{value:"all",children:"All Severity"}),e.jsx("option",{value:"critical",children:"Critical"}),e.jsx("option",{value:"high",children:"High"}),e.jsx("option",{value:"medium",children:"Medium"}),e.jsx("option",{value:"low",children:"Low"})]}),e.jsx(zs,{className:"absolute right-2 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400 pointer-events-none"})]})]})]}),e.jsx("div",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:c.map(f=>e.jsx("div",{className:`p-4 hover:bg-gray-50 dark:hover:bg-gray-700/50 ${f.severity==="critical"?"border-l-4 border-l-red-500":f.severity==="high"?"border-l-4 border-l-orange-500":""}`,children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:`p-2 rounded-lg ${f.type==="sanctions"||f.type==="fraud"?"bg-red-100 dark:bg-red-900/30":f.type==="aml"?"bg-purple-100 dark:bg-purple-900/30":f.type==="pep"?"bg-blue-100 dark:bg-blue-900/30":"bg-orange-100 dark:bg-orange-900/30"}`,children:x(f.type)}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:"font-mono text-sm text-gray-500 dark:text-gray-400",children:f.id}),e.jsx("span",{className:"px-2 py-0.5 bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300 rounded text-xs uppercase",children:f.type}),p(f.severity)]}),e.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white mb-1",children:f.description}),e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Customer: ",f.customerName," (",f.customerId,")"]})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${f.status==="open"?"bg-yellow-100 dark:bg-yellow-900/30 text-yellow-700 dark:text-yellow-400":f.status==="investigating"?"bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-400":f.status==="resolved"?"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400":"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300"}`,children:f.status}),e.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:new Date(f.createdAt).toLocaleTimeString()}),e.jsx("button",{className:"p-1 hover:bg-gray-200 dark:hover:bg-gray-600 rounded",children:e.jsx(es,{className:"w-4 h-4 text-gray-500 dark:text-gray-400"})})]})]})},f.id))})]}),t==="reports"&&e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsx("div",{className:"lg:col-span-2",children:e.jsxs(W,{className:"overflow-hidden",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200 dark:border-gray-700",children:e.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Compliance Reports"})}),e.jsx("div",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:d.map(f=>e.jsx("div",{className:"p-4 hover:bg-gray-50 dark:hover:bg-gray-700/50",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-gray-100 dark:bg-gray-700 rounded-lg",children:e.jsx(Yh,{className:"w-5 h-5 text-gray-600 dark:text-gray-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-sm text-gray-900 dark:text-white",children:f.name}),e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:[f.type," - ",f.period]})]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Due: ",new Date(f.dueDate).toLocaleDateString()]}),e.jsx("span",{className:`px-2 py-0.5 rounded text-xs font-medium ${f.status==="submitted"?"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400":f.status==="generated"?"bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-400":"bg-yellow-100 dark:bg-yellow-900/30 text-yellow-700 dark:text-yellow-400"}`,children:f.status})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("button",{className:"p-1 hover:bg-gray-200 dark:hover:bg-gray-600 rounded",title:"View",children:e.jsx(es,{className:"w-4 h-4 text-gray-500 dark:text-gray-400"})}),e.jsx("button",{className:"p-1 hover:bg-gray-200 dark:hover:bg-gray-600 rounded",title:"Download",children:e.jsx(ws,{className:"w-4 h-4 text-gray-500 dark:text-gray-400"})}),f.status!=="submitted"&&e.jsx("button",{className:"p-1 hover:bg-gray-200 dark:hover:bg-gray-600 rounded",title:"Submit",children:e.jsx(Du,{className:"w-4 h-4 text-gray-500 dark:text-gray-400"})})]})]})]})},f.id))})]})}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs(W,{className:"p-6",children:[e.jsxs("h2",{className:"text-lg font-semibold mb-4 flex items-center gap-2 text-gray-900 dark:text-white",children:[e.jsx(Mn,{className:"w-5 h-5 text-gray-600 dark:text-gray-400"}),"Upcoming Deadlines"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"p-3 bg-red-50 dark:bg-red-900/20 border-l-4 border-l-red-500 rounded-r-lg",children:[e.jsx("p",{className:"text-sm font-medium text-red-800 dark:text-red-300",children:"Monthly SAR Filing"}),e.jsx("p",{className:"text-xs text-red-600 dark:text-red-400",children:"Due in 30 days"})]}),e.jsxs("div",{className:"p-3 bg-yellow-50 dark:bg-yellow-900/20 border-l-4 border-l-yellow-500 rounded-r-lg",children:[e.jsx("p",{className:"text-sm font-medium text-yellow-800 dark:text-yellow-300",children:"Annual AML Review"}),e.jsx("p",{className:"text-xs text-yellow-600 dark:text-yellow-400",children:"Due in 75 days"})]}),e.jsxs("div",{className:"p-3 bg-blue-50 dark:bg-blue-900/20 border-l-4 border-l-blue-500 rounded-r-lg",children:[e.jsx("p",{className:"text-sm font-medium text-blue-800 dark:text-blue-300",children:"Risk Assessment Update"}),e.jsx("p",{className:"text-xs text-blue-600 dark:text-blue-400",children:"Due in 90 days"})]})]})]}),e.jsxs(W,{className:"p-6",children:[e.jsx("h2",{className:"text-lg font-semibold mb-4 text-gray-900 dark:text-white",children:"Quick Actions"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("button",{className:"w-full p-3 text-left bg-gray-50 dark:bg-gray-700 hover:bg-gray-100 dark:hover:bg-gray-600 rounded-lg transition-colors flex items-center gap-3",children:[e.jsx(Xj,{className:"w-5 h-5 text-gray-600 dark:text-gray-400"}),e.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:"Generate SAR Report"})]}),e.jsxs("button",{className:"w-full p-3 text-left bg-gray-50 dark:bg-gray-700 hover:bg-gray-100 dark:hover:bg-gray-600 rounded-lg transition-colors flex items-center gap-3",children:[e.jsx(ws,{className:"w-5 h-5 text-gray-600 dark:text-gray-400"}),e.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:"Export CTR Data"})]}),e.jsxs("button",{className:"w-full p-3 text-left bg-gray-50 dark:bg-gray-700 hover:bg-gray-100 dark:hover:bg-gray-600 rounded-lg transition-colors flex items-center gap-3",children:[e.jsx(Xt,{className:"w-5 h-5 text-gray-600 dark:text-gray-400"}),e.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:"Run Sanctions Check"})]})]})]})]})]}),t==="sanctions"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs(W,{className:"p-6",children:[e.jsxs("div",{className:"flex items-start gap-3 mb-6",children:[e.jsx(Xt,{className:"w-6 h-6 text-primary-600 dark:text-primary-400"}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Sanctions Screening"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Screen customers and transactions against global sanctions lists"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:[e.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-1",children:"Lists Monitored"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"12"}),e.jsxs("div",{className:"flex flex-wrap gap-1 mt-2",children:[e.jsx("span",{className:"px-2 py-0.5 bg-white dark:bg-gray-600 text-gray-600 dark:text-gray-300 rounded text-xs",children:"OFAC SDN"}),e.jsx("span",{className:"px-2 py-0.5 bg-white dark:bg-gray-600 text-gray-600 dark:text-gray-300 rounded text-xs",children:"EU Sanctions"}),e.jsx("span",{className:"px-2 py-0.5 bg-white dark:bg-gray-600 text-gray-600 dark:text-gray-300 rounded text-xs",children:"UN Sanctions"}),e.jsx("span",{className:"px-2 py-0.5 bg-white dark:bg-gray-600 text-gray-600 dark:text-gray-300 rounded text-xs",children:"+9 more"})]})]}),e.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-1",children:"Last Updated"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Today"}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-2",children:"Lists are updated daily at 00:00 UTC"})]})]}),e.jsxs("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg p-4",children:[e.jsx("h3",{className:"font-medium mb-4 text-gray-900 dark:text-white",children:"Manual Screening"}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("input",{type:"text",placeholder:"Enter name or entity to screen...",className:"flex-1 px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white"}),e.jsxs("button",{className:"px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 flex items-center gap-2",children:[e.jsx(ts,{className:"w-4 h-4"}),"Screen"]})]})]})]}),e.jsxs(W,{className:"p-6",children:[e.jsx("h3",{className:"font-semibold mb-4 text-gray-900 dark:text-white",children:"Recent Screening Results"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"p-3 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(be,{className:"w-5 h-5 text-green-600 dark:text-green-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:"John Smith"}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Screened 5 minutes ago"})]})]}),e.jsx("span",{className:"px-2 py-1 bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400 rounded text-xs font-medium",children:"No Match"})]}),e.jsxs("div",{className:"p-3 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Lt,{className:"w-5 h-5 text-red-600 dark:text-red-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:"Global Trading Ltd"}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Screened 2 hours ago"})]})]}),e.jsx("span",{className:"px-2 py-1 bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-400 rounded text-xs font-medium",children:"Potential Match"})]}),e.jsxs("div",{className:"p-3 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(be,{className:"w-5 h-5 text-green-600 dark:text-green-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:"Tech Innovations Inc"}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Screened 3 hours ago"})]})]}),e.jsx("span",{className:"px-2 py-1 bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400 rounded text-xs font-medium",children:"No Match"})]})]})]})]})]})})}function qX(){const[t,s]=h.useState("all"),[r,a]=h.useState("all"),[n,i]=h.useState(""),[l,o]=h.useState(!0),[c,d]=h.useState({totalCustomers:0,verified:0,pending:0,individuals:0,businesses:0,newThisMonth:0}),[u,m]=h.useState([]);h.useEffect(()=>{p()},[]);const p=async()=>{o(!0);try{const{data:b,error:j}=await U.from("users").select("*").order("created_at",{ascending:!1});if(j){console.error("Error fetching customers:",j),m([]),o(!1);return}const{data:v}=await U.from("cards").select("user_id"),w=new Map;v==null||v.forEach(A=>{w.set(A.user_id,(w.get(A.user_id)||0)+1)});const{data:y}=await U.from("wallets").select("user_id"),C=new Map;y==null||y.forEach(A=>{C.set(A.user_id,(C.get(A.user_id)||0)+1)});const S=(b||[]).map(A=>{var R;return{id:A.id,type:A.role==="merchant"?"business":"individual",firstName:A.first_name,lastName:A.last_name,businessName:A.business_name,email:A.email,phone:A.phone||"",country:A.country||"Unknown",kycStatus:((R=A.kyc_status)==null?void 0:R.toLowerCase())||"not_submitted",status:A.is_active?"active":"suspended",totalCards:w.get(A.id)||0,totalAccounts:C.get(A.id)||0,createdAt:A.created_at,lastActive:A.updated_at||A.created_at}});m(S);const _=new Date,E=new Date(_.getFullYear(),_.getMonth(),1);d({totalCustomers:S.length,verified:S.filter(A=>A.kycStatus==="verified").length,pending:S.filter(A=>A.kycStatus==="pending").length,individuals:S.filter(A=>A.type==="individual").length,businesses:S.filter(A=>A.type==="business").length,newThisMonth:S.filter(A=>new Date(A.createdAt)>=E).length})}catch(b){console.error("Error fetching customers:",b)}finally{o(!1)}},x=b=>{switch(b){case"verified":return e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-700",children:[e.jsx(be,{className:"w-3 h-3"})," Verified"]});case"pending":return e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium bg-yellow-100 text-yellow-700",children:[e.jsx(it,{className:"w-3 h-3"})," Pending"]});case"rejected":return e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium bg-red-100 text-red-700",children:[e.jsx(ft,{className:"w-3 h-3"})," Rejected"]});case"not_submitted":return e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-700",children:[e.jsx(Lt,{className:"w-3 h-3"})," Not Submitted"]});default:return null}},g=b=>{switch(b){case"active":return e.jsx("span",{className:"w-2 h-2 rounded-full bg-green-500",title:"Active"});case"suspended":return e.jsx("span",{className:"w-2 h-2 rounded-full bg-yellow-500",title:"Suspended"});case"closed":return e.jsx("span",{className:"w-2 h-2 rounded-full bg-red-500",title:"Closed"});default:return null}},f=u.filter(b=>!(t!=="all"&&b.type!==t||r!=="all"&&b.kycStatus!==r||n&&!(b.type==="individual"?`${b.firstName} ${b.lastName}`:b.businessName||"").toLowerCase().includes(n.toLowerCase())&&!b.email.toLowerCase().includes(n.toLowerCase())&&!b.id.toLowerCase().includes(n.toLowerCase())));return e.jsx(Kt,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Customers"}),e.jsx("p",{className:"text-gray-500",children:"Manage individual and business customers"})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("button",{className:"px-4 py-2 text-sm bg-white border border-gray-300 rounded-lg hover:bg-gray-50 flex items-center gap-2",children:[e.jsx(ws,{className:"w-4 h-4"}),"Export"]}),e.jsxs("button",{className:"px-4 py-2 text-sm bg-primary-600 text-white rounded-lg hover:bg-primary-700 flex items-center gap-2",children:[e.jsx(It,{className:"w-4 h-4"}),"Add Customer"]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-6 gap-4",children:[e.jsxs(W,{className:"p-4",children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Total Customers"}),e.jsx("p",{className:"text-2xl font-bold",children:c.totalCustomers.toLocaleString()})]}),e.jsxs(W,{className:"p-4",children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Verified"}),e.jsx("p",{className:"text-2xl font-bold text-green-600",children:c.verified.toLocaleString()})]}),e.jsxs(W,{className:"p-4",children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Pending KYC"}),e.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:c.pending})]}),e.jsxs(W,{className:"p-4",children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Individuals"}),e.jsx("p",{className:"text-2xl font-bold",children:c.individuals.toLocaleString()})]}),e.jsxs(W,{className:"p-4",children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Businesses"}),e.jsx("p",{className:"text-2xl font-bold",children:c.businesses})]}),e.jsxs(W,{className:"p-4",children:[e.jsx("p",{className:"text-sm text-gray-500",children:"New This Month"}),e.jsxs("p",{className:"text-2xl font-bold text-blue-600",children:["+",c.newThisMonth]})]})]}),e.jsx(W,{className:"p-4",children:e.jsxs("div",{className:"flex flex-wrap items-center gap-4",children:[e.jsx("div",{className:"flex-1 min-w-64",children:e.jsxs("div",{className:"relative",children:[e.jsx(ts,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search by name, email, or ID...",value:n,onChange:b=>i(b.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500"})]})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Bn,{className:"w-4 h-4 text-gray-400"}),e.jsxs("div",{className:"relative",children:[e.jsxs("select",{value:t,onChange:b=>s(b.target.value),className:"appearance-none border border-gray-300 rounded-lg px-3 py-2 pr-8 text-sm focus:ring-2 focus:ring-primary-500",children:[e.jsx("option",{value:"all",children:"All Types"}),e.jsx("option",{value:"individual",children:"Individual"}),e.jsx("option",{value:"business",children:"Business"})]}),e.jsx(zs,{className:"absolute right-2 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400 pointer-events-none"})]}),e.jsxs("div",{className:"relative",children:[e.jsxs("select",{value:r,onChange:b=>a(b.target.value),className:"appearance-none border border-gray-300 rounded-lg px-3 py-2 pr-8 text-sm focus:ring-2 focus:ring-primary-500",children:[e.jsx("option",{value:"all",children:"All KYC Status"}),e.jsx("option",{value:"verified",children:"Verified"}),e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"rejected",children:"Rejected"})]}),e.jsx(zs,{className:"absolute right-2 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400 pointer-events-none"})]})]})]})}),e.jsxs(W,{className:"overflow-hidden",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-left px-6 py-3 text-xs font-medium text-gray-500 uppercase",children:"Customer"}),e.jsx("th",{className:"text-left px-6 py-3 text-xs font-medium text-gray-500 uppercase",children:"Contact"}),e.jsx("th",{className:"text-left px-6 py-3 text-xs font-medium text-gray-500 uppercase",children:"Country"}),e.jsx("th",{className:"text-left px-6 py-3 text-xs font-medium text-gray-500 uppercase",children:"KYC Status"}),e.jsx("th",{className:"text-left px-6 py-3 text-xs font-medium text-gray-500 uppercase",children:"Cards"}),e.jsx("th",{className:"text-left px-6 py-3 text-xs font-medium text-gray-500 uppercase",children:"Accounts"}),e.jsx("th",{className:"text-left px-6 py-3 text-xs font-medium text-gray-500 uppercase",children:"Created"}),e.jsx("th",{className:"text-left px-6 py-3 text-xs font-medium text-gray-500 uppercase",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:f.map(b=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center ${b.type==="business"?"bg-purple-100":"bg-blue-100"}`,children:b.type==="business"?e.jsx(L1,{className:"w-5 h-5 text-purple-600"}):e.jsx(Es,{className:"w-5 h-5 text-blue-600"})}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[g(b.status),e.jsx("span",{className:"font-medium text-sm",children:b.type==="individual"?`${b.firstName} ${b.lastName}`:b.businessName})]}),e.jsx("span",{className:"text-xs text-gray-500 font-mono",children:b.id})]})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center gap-1 text-sm text-gray-600",children:[e.jsx(Va,{className:"w-3 h-3"}),b.email]}),e.jsxs("div",{className:"flex items-center gap-1 text-sm text-gray-500",children:[e.jsx(lr,{className:"w-3 h-3"}),b.phone]})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-1 text-sm text-gray-600",children:[e.jsx(Vi,{className:"w-3 h-3"}),b.country]})}),e.jsx("td",{className:"px-6 py-4",children:x(b.kycStatus)}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-1 text-sm",children:[e.jsx(Je,{className:"w-4 h-4 text-gray-400"}),b.totalCards]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:"text-sm",children:b.totalAccounts})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:"text-sm text-gray-500",children:new Date(b.createdAt).toLocaleDateString()})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{className:"p-1 bg-gray-100 text-gray-600 rounded hover:bg-gray-200",title:"View",children:e.jsx(es,{className:"w-4 h-4"})}),e.jsx("button",{className:"p-1 bg-gray-100 text-gray-600 rounded hover:bg-gray-200",title:"Edit",children:e.jsx(Qc,{className:"w-4 h-4"})}),b.kycStatus==="pending"&&e.jsx("button",{className:"p-1 bg-blue-100 text-blue-600 rounded hover:bg-blue-200",title:"Review KYC",children:e.jsx(Xt,{className:"w-4 h-4"})}),e.jsx("button",{className:"p-1 hover:bg-gray-100 rounded",children:e.jsx(nd,{className:"w-4 h-4 text-gray-400"})})]})})]},b.id))})]})}),e.jsxs("div",{className:"px-6 py-4 border-t border-gray-200 flex items-center justify-between",children:[e.jsxs("p",{className:"text-sm text-gray-500",children:["Showing 1 to ",f.length," of ",c.totalCustomers," customers"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{className:"px-3 py-1 text-sm bg-white border border-gray-300 rounded hover:bg-gray-50 disabled:opacity-50",disabled:!0,children:"Previous"}),e.jsx("button",{className:"px-3 py-1 text-sm bg-primary-600 text-white rounded",children:"1"}),e.jsx("button",{className:"px-3 py-1 text-sm bg-white border border-gray-300 rounded hover:bg-gray-50",children:"2"}),e.jsx("button",{className:"px-3 py-1 text-sm bg-white border border-gray-300 rounded hover:bg-gray-50",children:"3"}),e.jsx("span",{className:"text-gray-500",children:"..."}),e.jsx("button",{className:"px-3 py-1 text-sm bg-white border border-gray-300 rounded hover:bg-gray-50",children:"125"}),e.jsx("button",{className:"px-3 py-1 text-sm bg-white border border-gray-300 rounded hover:bg-gray-50",children:"Next"})]})]})]})]})})}function WX(){const[t,s]=h.useState("all"),[r,a]=h.useState("all"),[n,i]=h.useState(""),[l,o]=h.useState(!0),[c,d]=h.useState({totalAccounts:0,activeAccounts:0,totalBalance:0,frozenAccounts:0,closedAccounts:0,newThisMonth:0}),[u,m]=h.useState([]),[p,x]=h.useState(null);h.useEffect(()=>{Ut.getDefaultCurrency().then(x),f()},[]);const g=(p==null?void 0:p.symbol)||"",f=async()=>{o(!0);try{const{data:y,error:C}=await U.from("wallets").select(`
          *,
          users:user_id (
            id,
            first_name,
            last_name,
            email,
            username,
            role
          )
        `).order("created_at",{ascending:!1});if(C){console.error("Error fetching wallets:",C),m([]),o(!1);return}const S=(y||[]).map(R=>{const I=R.users;let N="wallet";(I==null?void 0:I.role)==="merchant"?N="merchant":(I==null?void 0:I.role)==="agent"&&(N="agent");let P="active";R.is_frozen?P="frozen":R.is_active===!1&&(P="closed");let k="Unknown";if(I){const D=I.first_name||"",$=I.last_name||"";k=`${D} ${$}`.trim()||I.username||I.email||"Unnamed User"}return{id:R.id,customerId:R.user_id,customerName:k,type:N,currency:R.currency||"USD",balance:R.balance||0,availableBalance:R.available_balance||R.balance||0,status:P,createdAt:R.created_at,lastTransaction:R.updated_at||null}});m(S);const _=new Date,E=new Date(_.getFullYear(),_.getMonth(),1),A=S.reduce((R,I)=>R+I.balance,0);d({totalAccounts:S.length,activeAccounts:S.filter(R=>R.status==="active").length,totalBalance:A,frozenAccounts:S.filter(R=>R.status==="frozen").length,closedAccounts:S.filter(R=>R.status==="closed").length,newThisMonth:S.filter(R=>new Date(R.createdAt)>=E).length})}catch(y){console.error("Error fetching accounts:",y)}finally{o(!1)}},b=y=>{switch(y){case"wallet":return e.jsx("span",{className:"px-2 py-0.5 rounded text-xs font-medium bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-400",children:"Wallet"});case"card_funding":return e.jsx("span",{className:"px-2 py-0.5 rounded text-xs font-medium bg-purple-100 dark:bg-purple-900/30 text-purple-700 dark:text-purple-400",children:"Card Funding"});case"merchant":return e.jsx("span",{className:"px-2 py-0.5 rounded text-xs font-medium bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400",children:"Merchant"});case"agent":return e.jsx("span",{className:"px-2 py-0.5 rounded text-xs font-medium bg-orange-100 dark:bg-orange-900/30 text-orange-700 dark:text-orange-400",children:"Agent"});default:return null}},j=y=>{switch(y){case"active":return e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400",children:[e.jsx(be,{className:"w-3 h-3"})," Active"]});case"frozen":return e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium bg-yellow-100 dark:bg-yellow-900/30 text-yellow-700 dark:text-yellow-400",children:[e.jsx(it,{className:"w-3 h-3"})," Frozen"]});case"closed":return e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-400",children:[e.jsx(ft,{className:"w-3 h-3"})," Closed"]});default:return null}},v=(y,C)=>new Intl.NumberFormat("en-US",{style:"currency",currency:C}).format(y),w=u.filter(y=>!(t!=="all"&&y.type!==t||r!=="all"&&y.status!==r||n&&!y.customerName.toLowerCase().includes(n.toLowerCase())&&!y.id.toLowerCase().includes(n.toLowerCase())));return e.jsx(Kt,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Accounts"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Manage customer accounts and balances"})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("button",{className:"px-4 py-2 text-sm bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300 flex items-center gap-2",children:[e.jsx(ws,{className:"w-4 h-4"}),"Export"]}),e.jsxs("button",{className:"px-4 py-2 text-sm bg-primary-600 text-white rounded-lg hover:bg-primary-700 flex items-center gap-2",children:[e.jsx(It,{className:"w-4 h-4"}),"Create Account"]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-6 gap-4",children:[e.jsxs(we,{className:"p-4",delay:0,children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Total Accounts"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:c.totalAccounts.toLocaleString()})]}),e.jsxs(we,{className:"p-4",delay:.1,children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Active"}),e.jsx("p",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:c.activeAccounts.toLocaleString()})]}),e.jsxs(we,{className:"p-4",delay:.2,children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Total Balance"}),e.jsxs("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:[g,(c.totalBalance/1e6).toFixed(2),"M"]})]}),e.jsxs(we,{className:"p-4",delay:.3,children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Frozen"}),e.jsx("p",{className:"text-2xl font-bold text-yellow-600 dark:text-yellow-400",children:c.frozenAccounts})]}),e.jsxs(we,{className:"p-4",delay:.4,children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Closed"}),e.jsx("p",{className:"text-2xl font-bold text-red-600 dark:text-red-400",children:c.closedAccounts})]}),e.jsxs(we,{className:"p-4",delay:.5,children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"New This Month"}),e.jsxs("p",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:["+",c.newThisMonth]})]})]}),e.jsx(W,{className:"p-4",children:e.jsxs("div",{className:"flex flex-wrap items-center gap-4",children:[e.jsx("div",{className:"flex-1 min-w-64",children:e.jsxs("div",{className:"relative",children:[e.jsx(ts,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search by customer name or account ID...",value:n,onChange:y=>i(y.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-400"})]})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Bn,{className:"w-4 h-4 text-gray-400"}),e.jsxs("div",{className:"relative",children:[e.jsxs("select",{value:t,onChange:y=>s(y.target.value),className:"appearance-none border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 pr-8 text-sm focus:ring-2 focus:ring-primary-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[e.jsx("option",{value:"all",children:"All Types"}),e.jsx("option",{value:"wallet",children:"Wallet"}),e.jsx("option",{value:"card_funding",children:"Card Funding"}),e.jsx("option",{value:"merchant",children:"Merchant"}),e.jsx("option",{value:"agent",children:"Agent"})]}),e.jsx(zs,{className:"absolute right-2 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400 pointer-events-none"})]}),e.jsxs("div",{className:"relative",children:[e.jsxs("select",{value:r,onChange:y=>a(y.target.value),className:"appearance-none border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 pr-8 text-sm focus:ring-2 focus:ring-primary-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"frozen",children:"Frozen"}),e.jsx("option",{value:"closed",children:"Closed"})]}),e.jsx(zs,{className:"absolute right-2 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400 pointer-events-none"})]})]})]})}),e.jsxs(W,{className:"overflow-hidden",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700/50 border-b border-gray-200 dark:border-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-left px-6 py-3 text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Account"}),e.jsx("th",{className:"text-left px-6 py-3 text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Customer"}),e.jsx("th",{className:"text-left px-6 py-3 text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Type"}),e.jsx("th",{className:"text-left px-6 py-3 text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Balance"}),e.jsx("th",{className:"text-left px-6 py-3 text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Available"}),e.jsx("th",{className:"text-left px-6 py-3 text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Status"}),e.jsx("th",{className:"text-left px-6 py-3 text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Last Transaction"}),e.jsx("th",{className:"text-left px-6 py-3 text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:w.map(y=>e.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700/50",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(jt,{className:"w-5 h-5 text-gray-400"}),e.jsxs("div",{children:[e.jsx("span",{className:"font-mono text-sm text-gray-900 dark:text-white",children:y.id}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:y.currency})]})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-sm text-gray-900 dark:text-white",children:y.customerName}),e.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400 font-mono",children:y.customerId})]})}),e.jsx("td",{className:"px-6 py-4",children:b(y.type)}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(js,{className:"w-4 h-4 text-gray-400"}),e.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:v(y.balance,y.currency)})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:`font-medium ${y.availableBalance<y.balance?"text-yellow-600 dark:text-yellow-400":"text-gray-900 dark:text-white"}`,children:v(y.availableBalance,y.currency)})}),e.jsx("td",{className:"px-6 py-4",children:j(y.status)}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:y.lastTransaction?new Date(y.lastTransaction).toLocaleDateString():"Never"})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{className:"p-1 bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-400 rounded hover:bg-gray-200 dark:hover:bg-gray-600",title:"View",children:e.jsx(es,{className:"w-4 h-4"})}),e.jsx("button",{className:"p-1 bg-green-100 dark:bg-green-900/30 text-green-600 dark:text-green-400 rounded hover:bg-green-200 dark:hover:bg-green-900/50",title:"Credit",children:e.jsx(la,{className:"w-4 h-4"})}),e.jsx("button",{className:"p-1 bg-red-100 dark:bg-red-900/30 text-red-600 dark:text-red-400 rounded hover:bg-red-200 dark:hover:bg-red-900/50",title:"Debit",children:e.jsx(xs,{className:"w-4 h-4"})}),y.status==="active"?e.jsx("button",{className:"p-1 bg-yellow-100 dark:bg-yellow-900/30 text-yellow-600 dark:text-yellow-400 rounded hover:bg-yellow-200 dark:hover:bg-yellow-900/50",title:"Freeze",children:e.jsx(VT,{className:"w-4 h-4"})}):y.status==="frozen"?e.jsx("button",{className:"p-1 bg-green-100 dark:bg-green-900/30 text-green-600 dark:text-green-400 rounded hover:bg-green-200 dark:hover:bg-green-900/50",title:"Unfreeze",children:e.jsx(If,{className:"w-4 h-4"})}):null,e.jsx("button",{className:"p-1 hover:bg-gray-100 dark:hover:bg-gray-700 rounded",children:e.jsx(nd,{className:"w-4 h-4 text-gray-400"})})]})})]},y.id))})]})}),e.jsxs("div",{className:"px-6 py-4 border-t border-gray-200 dark:border-gray-700 flex items-center justify-between",children:[e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Showing 1 to ",w.length," of ",c.totalAccounts," accounts"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{className:"px-3 py-1 text-sm bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded hover:bg-gray-50 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300 disabled:opacity-50",disabled:!0,children:"Previous"}),e.jsx("button",{className:"px-3 py-1 text-sm bg-primary-600 text-white rounded",children:"1"}),e.jsx("button",{className:"px-3 py-1 text-sm bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded hover:bg-gray-50 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300",children:"2"}),e.jsx("button",{className:"px-3 py-1 text-sm bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded hover:bg-gray-50 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300",children:"3"}),e.jsx("button",{className:"px-3 py-1 text-sm bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded hover:bg-gray-50 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300",children:"Next"})]})]})]})]})})}function zX(){const t=At(),[s,r]=h.useState("all"),[a,n]=h.useState("all"),[i,l]=h.useState(""),[o,c]=h.useState(!0),[d,u]=h.useState({totalCards:0,activeCards:0,virtualCards:0,physicalCards:0,frozenCards:0,issuedThisMonth:0}),[m,p]=h.useState([]);h.useEffect(()=>{x()},[]);const x=async()=>{c(!0);try{const{data:v,error:w}=await U.from("cards").select("*").order("created_at",{ascending:!1});if(w){console.error("Error fetching cards:",w),p([]),c(!1);return}const y=[...new Set((v==null?void 0:v.map(R=>R.user_id))||[])],{data:C}=await U.from("users").select("id, first_name, last_name").in("id",y),S=new Map((C==null?void 0:C.map(R=>[R.id,R]))||[]),_=(v||[]).map(R=>{const I=S.get(R.user_id);return{id:R.id,cardProgramId:R.card_program_id||"",cardProgramName:R.card_type||"Standard",customerId:R.user_id,customerName:I?`${I.first_name} ${I.last_name}`:"Unknown",last4:R.last_four||"****",brand:R.brand||"visa",type:R.card_type||"virtual",status:R.status||"active",balance:R.balance||0,currency:R.currency||"USD",expiryMonth:R.expiry_month||12,expiryYear:R.expiry_year||2027,createdAt:R.created_at,lastUsed:R.last_used_at||null}});p(_);const E=new Date,A=new Date(E.getFullYear(),E.getMonth(),1);u({totalCards:_.length,activeCards:_.filter(R=>R.status==="active").length,virtualCards:_.filter(R=>R.type==="virtual").length,physicalCards:_.filter(R=>R.type==="physical").length,frozenCards:_.filter(R=>R.status==="frozen").length,issuedThisMonth:_.filter(R=>new Date(R.createdAt)>=A).length})}catch(v){console.error("Error fetching cards:",v)}finally{c(!1)}},g=v=>{switch(v){case"active":return e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-700",children:[e.jsx(be,{className:"w-3 h-3"})," Active"]});case"frozen":return e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-700",children:[e.jsx(tw,{className:"w-3 h-3"})," Frozen"]});case"cancelled":return e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium bg-red-100 text-red-700",children:[e.jsx(ft,{className:"w-3 h-3"})," Cancelled"]});case"pending":return e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium bg-yellow-100 text-yellow-700",children:[e.jsx(it,{className:"w-3 h-3"})," Pending"]});default:return null}},f=(v,w)=>new Intl.NumberFormat("en-US",{style:"currency",currency:w}).format(v),b=v=>{navigator.clipboard.writeText(v)},j=m.filter(v=>!(s!=="all"&&v.type!==s||a!=="all"&&v.status!==a||i&&!v.customerName.toLowerCase().includes(i.toLowerCase())&&!v.last4.includes(i)&&!v.id.toLowerCase().includes(i.toLowerCase())));return e.jsx(Kt,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Cards"}),e.jsx("p",{className:"text-gray-500",children:"Manage issued cards"})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("button",{className:"px-4 py-2 text-sm bg-white border border-gray-300 rounded-lg hover:bg-gray-50 flex items-center gap-2",children:[e.jsx(ws,{className:"w-4 h-4"}),"Export"]}),e.jsxs("button",{onClick:()=>t("/admin/card-programs"),className:"px-4 py-2 text-sm bg-primary-600 text-white rounded-lg hover:bg-primary-700 flex items-center gap-2",children:[e.jsx(It,{className:"w-4 h-4"}),"Card Programs"]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-6 gap-4",children:[e.jsxs(W,{className:"p-4",children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Total Cards"}),e.jsx("p",{className:"text-2xl font-bold",children:d.totalCards.toLocaleString()})]}),e.jsxs(W,{className:"p-4",children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Active"}),e.jsx("p",{className:"text-2xl font-bold text-green-600",children:d.activeCards.toLocaleString()})]}),e.jsxs(W,{className:"p-4",children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Virtual"}),e.jsx("p",{className:"text-2xl font-bold text-blue-600",children:d.virtualCards.toLocaleString()})]}),e.jsxs(W,{className:"p-4",children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Physical"}),e.jsx("p",{className:"text-2xl font-bold text-purple-600",children:d.physicalCards})]}),e.jsxs(W,{className:"p-4",children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Frozen"}),e.jsx("p",{className:"text-2xl font-bold text-cyan-600",children:d.frozenCards})]}),e.jsxs(W,{className:"p-4",children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Issued This Month"}),e.jsxs("p",{className:"text-2xl font-bold text-green-600",children:["+",d.issuedThisMonth]})]})]}),e.jsx(W,{className:"p-4",children:e.jsxs("div",{className:"flex flex-wrap items-center gap-4",children:[e.jsx("div",{className:"flex-1 min-w-64",children:e.jsxs("div",{className:"relative",children:[e.jsx(ts,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search by customer, last 4 digits, or card ID...",value:i,onChange:v=>l(v.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500"})]})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Bn,{className:"w-4 h-4 text-gray-400"}),e.jsxs("div",{className:"relative",children:[e.jsxs("select",{value:s,onChange:v=>r(v.target.value),className:"appearance-none border border-gray-300 rounded-lg px-3 py-2 pr-8 text-sm focus:ring-2 focus:ring-primary-500",children:[e.jsx("option",{value:"all",children:"All Types"}),e.jsx("option",{value:"virtual",children:"Virtual"}),e.jsx("option",{value:"physical",children:"Physical"})]}),e.jsx(zs,{className:"absolute right-2 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400 pointer-events-none"})]}),e.jsxs("div",{className:"relative",children:[e.jsxs("select",{value:a,onChange:v=>n(v.target.value),className:"appearance-none border border-gray-300 rounded-lg px-3 py-2 pr-8 text-sm focus:ring-2 focus:ring-primary-500",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"frozen",children:"Frozen"}),e.jsx("option",{value:"cancelled",children:"Cancelled"}),e.jsx("option",{value:"pending",children:"Pending"})]}),e.jsx(zs,{className:"absolute right-2 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400 pointer-events-none"})]})]})]})}),e.jsxs(W,{className:"overflow-hidden",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-left px-6 py-3 text-xs font-medium text-gray-500 uppercase",children:"Card"}),e.jsx("th",{className:"text-left px-6 py-3 text-xs font-medium text-gray-500 uppercase",children:"Customer"}),e.jsx("th",{className:"text-left px-6 py-3 text-xs font-medium text-gray-500 uppercase",children:"Program"}),e.jsx("th",{className:"text-left px-6 py-3 text-xs font-medium text-gray-500 uppercase",children:"Balance"}),e.jsx("th",{className:"text-left px-6 py-3 text-xs font-medium text-gray-500 uppercase",children:"Expiry"}),e.jsx("th",{className:"text-left px-6 py-3 text-xs font-medium text-gray-500 uppercase",children:"Status"}),e.jsx("th",{className:"text-left px-6 py-3 text-xs font-medium text-gray-500 uppercase",children:"Last Used"}),e.jsx("th",{className:"text-left px-6 py-3 text-xs font-medium text-gray-500 uppercase",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:j.map(v=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-12 h-8 rounded flex items-center justify-center ${v.brand==="visa"?"bg-blue-600":"bg-orange-500"}`,children:e.jsx("span",{className:"text-white text-xs font-bold uppercase",children:v.brand})}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"font-mono text-sm",children:["****",v.last4]}),e.jsx("button",{onClick:()=>b(v.id),className:"p-0.5 hover:bg-gray-100 rounded",children:e.jsx(vs,{className:"w-3 h-3 text-gray-400"})})]}),e.jsx("span",{className:`text-xs px-1.5 py-0.5 rounded ${v.type==="virtual"?"bg-blue-100 text-blue-700":"bg-purple-100 text-purple-700"}`,children:v.type})]})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-sm",children:v.customerName}),e.jsx("span",{className:"text-xs text-gray-500 font-mono",children:v.customerId})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:"text-sm text-gray-600",children:v.cardProgramName})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:"font-medium",children:f(v.balance,v.currency)})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("span",{className:"text-sm text-gray-600",children:[String(v.expiryMonth).padStart(2,"0"),"/",v.expiryYear]})}),e.jsx("td",{className:"px-6 py-4",children:g(v.status)}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:"text-sm text-gray-500",children:v.lastUsed?new Date(v.lastUsed).toLocaleDateString():"Never"})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{className:"p-1 bg-gray-100 text-gray-600 rounded hover:bg-gray-200",title:"View",children:e.jsx(es,{className:"w-4 h-4"})}),e.jsx("button",{className:"p-1 bg-gray-100 text-gray-600 rounded hover:bg-gray-200",title:"Settings",children:e.jsx(or,{className:"w-4 h-4"})}),v.status==="active"&&e.jsx("button",{className:"p-1 bg-blue-100 text-blue-600 rounded hover:bg-blue-200",title:"Freeze",children:e.jsx(tw,{className:"w-4 h-4"})}),v.status==="frozen"&&e.jsx("button",{className:"p-1 bg-green-100 text-green-600 rounded hover:bg-green-200",title:"Unfreeze",children:e.jsx(vt,{className:"w-4 h-4"})}),v.status!=="cancelled"&&e.jsx("button",{className:"p-1 bg-red-100 text-red-600 rounded hover:bg-red-200",title:"Cancel",children:e.jsx(Or,{className:"w-4 h-4"})}),e.jsx("button",{className:"p-1 hover:bg-gray-100 rounded",children:e.jsx(nd,{className:"w-4 h-4 text-gray-400"})})]})})]},v.id))})]})}),e.jsxs("div",{className:"px-6 py-4 border-t border-gray-200 flex items-center justify-between",children:[e.jsxs("p",{className:"text-sm text-gray-500",children:["Showing 1 to ",j.length," of ",d.totalCards," cards"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{className:"px-3 py-1 text-sm bg-white border border-gray-300 rounded hover:bg-gray-50 disabled:opacity-50",disabled:!0,children:"Previous"}),e.jsx("button",{className:"px-3 py-1 text-sm bg-primary-600 text-white rounded",children:"1"}),e.jsx("button",{className:"px-3 py-1 text-sm bg-white border border-gray-300 rounded hover:bg-gray-50",children:"2"}),e.jsx("button",{className:"px-3 py-1 text-sm bg-white border border-gray-300 rounded hover:bg-gray-50",children:"3"}),e.jsx("button",{className:"px-3 py-1 text-sm bg-white border border-gray-300 rounded hover:bg-gray-50",children:"Next"})]})]})]})]})})}const GX=[{name:"Blue",value:"from-blue-600 to-blue-800"},{name:"Purple",value:"from-purple-600 to-purple-800"},{name:"Green",value:"from-green-600 to-green-800"},{name:"Red",value:"from-red-600 to-red-800"},{name:"Orange",value:"from-orange-500 to-orange-700"},{name:"Teal",value:"from-teal-500 to-teal-700"},{name:"Pink",value:"from-pink-500 to-pink-700"},{name:"Indigo",value:"from-indigo-600 to-indigo-800"},{name:"Gray",value:"from-gray-700 to-gray-900"},{name:"Gold",value:"from-yellow-500 to-yellow-700"}],KX=[{key:"noTransactionFees",label:"No Transaction Fees",description:"Zero fees on all card transactions",icon:Pu},{key:"allowNegativeBalance",label:"Negative Balance / Overdraft",description:"Allow spending beyond available balance up to overdraft limit",icon:Si,hasAmount:!0,amountKey:"overdraftLimit",amountLabel:"Overdraft Limit (SLE)"},{key:"allowBuyNowPayLater",label:"Buy Now Pay Later (BNPL)",description:"Allow purchases to be paid in installments",icon:it,hasAmount:!0,amountKey:"bnplMaxAmount",amountLabel:"Max BNPL Amount (SLE)",hasRate:!0,rateKey:"bnplInterestRate",rateLabel:"Interest Rate (%)"},{key:"highTransactionLimit",label:"High Transaction Limits",description:"Higher daily and monthly limits for large transactions",icon:rr},{key:"cashbackEnabled",label:"Cashback Rewards",description:"Earn cashback on purchases",icon:ui,hasRate:!0,rateKey:"cashbackPercentage",rateLabel:"Cashback Rate (%)"}],mv={name:"",description:"",cardImageUrl:"",price:0,transactionFeePercentage:0,transactionFeeFixed:0,requiredKycLevel:1,cardType:"VIRTUAL",isActive:!0,dailyLimit:5e3,monthlyLimit:5e4,colorGradient:"from-blue-600 to-blue-800",features:[],allowNegativeBalance:!1,allowBuyNowPayLater:!1,highTransactionLimit:!1,noTransactionFees:!1,cashbackEnabled:!1,cashbackPercentage:0,overdraftLimit:0,bnplMaxAmount:0,bnplInterestRate:0};function HX(){const[t,s]=h.useState(""),[r,a]=h.useState(!1),[n,i]=h.useState(null),[l,o]=h.useState(mv),[c,d]=h.useState(""),[u,m]=h.useState(null),[p,x]=h.useState(null);h.useEffect(()=>{Ut.getDefaultCurrency().then(x)},[]);const g=(p==null?void 0:p.symbol)||"",f=D=>`${g}${D.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}`,{data:b,isLoading:j}=x2(!0),v=BR(),w=$R(),y=UR(),C={totalPrograms:(b==null?void 0:b.length)||0,activePrograms:(b==null?void 0:b.filter(D=>D.isActive).length)||0,virtualCards:(b==null?void 0:b.filter(D=>D.cardType==="VIRTUAL").length)||0,physicalCards:(b==null?void 0:b.filter(D=>D.cardType==="PHYSICAL").length)||0},S=()=>{i(null),o(mv),d(""),a(!0)},_=D=>{i(D),o({name:D.name,description:D.description,cardImageUrl:D.cardImageUrl||"",price:D.price,transactionFeePercentage:D.transactionFeePercentage,transactionFeeFixed:D.transactionFeeFixed,requiredKycLevel:D.requiredKycLevel,cardType:D.cardType,isActive:D.isActive,dailyLimit:D.dailyLimit,monthlyLimit:D.monthlyLimit,colorGradient:D.colorGradient,features:D.features||[],allowNegativeBalance:D.allowNegativeBalance||!1,allowBuyNowPayLater:D.allowBuyNowPayLater||!1,highTransactionLimit:D.highTransactionLimit||!1,noTransactionFees:D.noTransactionFees||!1,cashbackEnabled:D.cashbackEnabled||!1,cashbackPercentage:D.cashbackPercentage||0,overdraftLimit:D.overdraftLimit||0,bnplMaxAmount:D.bnplMaxAmount||0,bnplInterestRate:D.bnplInterestRate||0}),d(""),a(!0)},E=async D=>{D.preventDefault();try{n?await w.mutateAsync({id:n.id,data:l}):await v.mutateAsync(l),a(!1),i(null),o(mv)}catch($){console.error("Error saving card program:",$);const L=($==null?void 0:$.message)||($==null?void 0:$.toString())||"Unknown error";alert(`Failed to save card program: ${L}`)}},A=()=>{var D;c.trim()&&!((D=l.features)!=null&&D.includes(c.trim()))&&(o({...l,features:[...l.features||[],c.trim()]}),d(""))},R=D=>{var $;o({...l,features:($=l.features)==null?void 0:$.filter((L,B)=>B!==D)})},I=async D=>{try{await y.mutateAsync(D),m(null)}catch($){console.error("Error deleting card program:",$),alert("Failed to delete card program. It may be in use.")}},N=async D=>{try{await w.mutateAsync({id:D.id,data:{isActive:!D.isActive}})}catch($){console.error("Error toggling status:",$)}},P=(b==null?void 0:b.filter(D=>!(t&&!D.name.toLowerCase().includes(t.toLowerCase()))))||[],k=D=>{const $=[];return D.noTransactionFees&&$.push("No Fees"),D.allowNegativeBalance&&$.push(`Overdraft: ${f(D.overdraftLimit||0)}`),D.allowBuyNowPayLater&&$.push("BNPL"),D.highTransactionLimit&&$.push("High Limits"),D.cashbackEnabled&&$.push(`${D.cashbackPercentage}% Cashback`),$};return e.jsx(Kt,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Card Programs"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Configure card products for the marketplace"})]}),e.jsxs("button",{onClick:S,className:"px-4 py-2 text-sm bg-primary-600 text-white rounded-lg hover:bg-primary-700 flex items-center gap-2",children:[e.jsx(It,{className:"w-4 h-4"}),"Create Card Program"]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsx(we,{className:"p-4",delay:0,children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-900/30 rounded-lg",children:e.jsx(Eg,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Total Programs"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:C.totalPrograms})]})]})}),e.jsx(we,{className:"p-4",delay:.1,children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-green-100 dark:bg-green-900/30 rounded-lg",children:e.jsx(be,{className:"w-5 h-5 text-green-600 dark:text-green-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Active"}),e.jsx("p",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:C.activePrograms})]})]})}),e.jsx(we,{className:"p-4",delay:.2,children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-purple-100 dark:bg-purple-900/30 rounded-lg",children:e.jsx(Je,{className:"w-5 h-5 text-purple-600 dark:text-purple-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Virtual Cards"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:C.virtualCards})]})]})}),e.jsx(we,{className:"p-4",delay:.3,children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-orange-100 dark:bg-orange-900/30 rounded-lg",children:e.jsx(Je,{className:"w-5 h-5 text-orange-600 dark:text-orange-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Physical Cards"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:C.physicalCards})]})]})})]}),e.jsx(we,{className:"p-4",delay:.4,children:e.jsxs("div",{className:"relative max-w-md",children:[e.jsx(ts,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search card programs...",value:t,onChange:D=>s(D.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]})}),j?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Ie,{className:"w-8 h-8 animate-spin text-primary-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Loading card programs..."})]}):P.length===0?e.jsxs(W,{className:"text-center py-12",children:[e.jsx(Je,{className:"w-12 h-12 text-gray-400 dark:text-gray-500 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"No card programs"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-4",children:"Create your first card program to get started"}),e.jsx("button",{onClick:S,className:"px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700",children:"Create Card Program"})]}):e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:P.map(D=>e.jsxs(W,{className:"overflow-hidden",children:[e.jsxs("div",{className:`relative p-6 text-white bg-gradient-to-br ${D.colorGradient}`,children:[e.jsx("div",{className:"absolute top-4 right-4",children:e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${D.isActive?"bg-green-500/20 text-green-100":"bg-red-500/20 text-red-100"}`,children:D.isActive?"Active":"Inactive"})}),e.jsxs("div",{className:"flex flex-col h-40 justify-between",children:[e.jsxs("div",{children:[e.jsx(Je,{className:"w-10 h-10 opacity-80"}),e.jsxs("p",{className:"text-white/70 text-sm mt-2",children:[D.cardType," Card"]})]}),e.jsxs("div",{className:"flex justify-between items-end",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs opacity-70",children:"Price"}),e.jsx("p",{className:"text-2xl font-bold",children:D.price===0?"FREE":f(D.price)})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-xs opacity-70",children:"KYC Level"}),e.jsx("p",{className:"text-lg font-semibold",children:D.requiredKycLevel})]})]})]})]}),e.jsxs("div",{className:"p-4 space-y-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-lg text-gray-900 dark:text-white",children:D.name}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:D.description})]}),k(D).length>0&&e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Active Features"}),e.jsx("div",{className:"flex flex-wrap gap-1",children:k(D).map(($,L)=>e.jsx("span",{className:"px-2 py-0.5 bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400 rounded text-xs font-medium",children:$},L))})]}),D.features&&D.features.length>0&&e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Description Features"}),e.jsx("div",{className:"flex flex-wrap gap-1",children:D.features.map(($,L)=>e.jsx("span",{className:"px-2 py-0.5 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded text-xs",children:$},L))})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Transaction Fee"}),e.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:D.noTransactionFees?e.jsx("span",{className:"text-green-600 dark:text-green-400",children:"No Fees"}):`${D.transactionFeePercentage}% + ${f(D.transactionFeeFixed)}`})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Daily Limit"}),e.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:f(D.dailyLimit)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Monthly Limit"}),e.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:f(D.monthlyLimit)})]})]}),e.jsxs("div",{className:"flex items-center gap-2 pt-4 border-t border-gray-200 dark:border-gray-700",children:[e.jsxs("button",{onClick:()=>_(D),className:"flex-1 py-2 text-sm text-gray-600 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-gray-700 rounded-lg flex items-center justify-center gap-2",children:[e.jsx(Qc,{className:"w-4 h-4"}),"Edit"]}),e.jsx("button",{onClick:()=>N(D),className:`flex-1 py-2 text-sm rounded-lg flex items-center justify-center gap-2 ${D.isActive?"text-yellow-600 dark:text-yellow-400 hover:bg-yellow-50 dark:hover:bg-yellow-900/20":"text-green-600 dark:text-green-400 hover:bg-green-50 dark:hover:bg-green-900/20"}`,children:D.isActive?e.jsxs(e.Fragment,{children:[e.jsx(VT,{className:"w-4 h-4"}),"Deactivate"]}):e.jsxs(e.Fragment,{children:[e.jsx(be,{className:"w-4 h-4"}),"Activate"]})}),e.jsxs("button",{onClick:()=>m(D.id),className:"flex-1 py-2 text-sm text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg flex items-center justify-center gap-2",children:[e.jsx(Or,{className:"w-4 h-4"}),"Delete"]})]})]})]},D.id))}),r&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 p-4",children:e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-xl w-full max-w-3xl max-h-[90vh] overflow-y-auto",children:e.jsxs("form",{onSubmit:E,children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200 dark:border-gray-700 sticky top-0 bg-white dark:bg-gray-800 z-10",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:n?"Edit Card Program":"Create Card Program"}),e.jsx("button",{type:"button",onClick:()=>a(!1),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg",children:e.jsx(lt,{className:"w-5 h-5 text-gray-600 dark:text-gray-400"})})]}),e.jsxs("div",{className:"p-4 space-y-6",children:[e.jsx("div",{className:`relative p-6 text-white bg-gradient-to-br ${l.colorGradient} rounded-xl`,children:e.jsxs("div",{className:"flex flex-col h-32 justify-between",children:[e.jsxs("div",{children:[e.jsx(Je,{className:"w-8 h-8 opacity-80"}),e.jsxs("p",{className:"text-white/70 text-sm mt-2",children:[l.cardType," Card"]})]}),e.jsxs("div",{className:"flex justify-between items-end",children:[e.jsx("p",{className:"text-xl font-bold",children:l.price===0?"FREE":`${g}${l.price}`}),e.jsxs("p",{className:"text-sm opacity-70",children:["KYC ",l.requiredKycLevel]})]})]})}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"col-span-2",children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:["Program Name * ",e.jsx("span",{className:"text-gray-400 dark:text-gray-500 font-normal",children:"(for admin reference)"})]}),e.jsx("input",{type:"text",required:!0,value:l.name,onChange:D=>o({...l,name:D.target.value}),placeholder:"e.g., Premium Virtual Card",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:["Description * ",e.jsx("span",{className:"text-gray-400 dark:text-gray-500 font-normal",children:"(shown to users)"})]}),e.jsx("textarea",{required:!0,value:l.description,onChange:D=>o({...l,description:D.target.value}),placeholder:"Describe what this card offers...",rows:2,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Card Type *"}),e.jsxs("select",{value:l.cardType,onChange:D=>o({...l,cardType:D.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[e.jsx("option",{value:"VIRTUAL",children:"Virtual"}),e.jsx("option",{value:"PHYSICAL",children:"Physical"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Card Color"}),e.jsx("select",{value:l.colorGradient,onChange:D=>o({...l,colorGradient:D.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:GX.map(D=>e.jsx("option",{value:D.value,children:D.name},D.value))})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-3",children:"Pricing & Fees"}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-500 dark:text-gray-400 mb-1",children:"Card Price (SLE)"}),e.jsx("input",{type:"number",min:"0",step:"0.01",value:l.price,onChange:D=>o({...l,price:parseFloat(D.target.value)||0}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-500 dark:text-gray-400 mb-1",children:"Transaction Fee (%)"}),e.jsx("input",{type:"number",min:"0",step:"0.01",value:l.transactionFeePercentage,onChange:D=>o({...l,transactionFeePercentage:parseFloat(D.target.value)||0}),disabled:l.noTransactionFees,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 disabled:bg-gray-100 dark:disabled:bg-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-500 dark:text-gray-400 mb-1",children:"Fixed Fee (SLE)"}),e.jsx("input",{type:"number",min:"0",step:"0.01",value:l.transactionFeeFixed,onChange:D=>o({...l,transactionFeeFixed:parseFloat(D.target.value)||0}),disabled:l.noTransactionFees,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 disabled:bg-gray-100 dark:disabled:bg-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-3",children:"Transaction Limits"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-500 dark:text-gray-400 mb-1",children:"Daily Limit (SLE)"}),e.jsx("input",{type:"number",min:"0",value:l.dailyLimit,onChange:D=>o({...l,dailyLimit:parseInt(D.target.value)||0}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-500 dark:text-gray-400 mb-1",children:"Monthly Limit (SLE)"}),e.jsx("input",{type:"number",min:"0",value:l.monthlyLimit,onChange:D=>o({...l,monthlyLimit:parseInt(D.target.value)||0}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Required KYC Level"}),e.jsxs("select",{value:l.requiredKycLevel,onChange:D=>o({...l,requiredKycLevel:parseInt(D.target.value)}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[e.jsx("option",{value:1,children:"Level 1 - Basic"}),e.jsx("option",{value:2,children:"Level 2 - Advanced"}),e.jsx("option",{value:3,children:"Level 3 - Enhanced"})]})]}),e.jsx("div",{className:"flex items-center",children:e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:l.isActive,onChange:D=>o({...l,isActive:D.target.checked}),className:"w-4 h-4 text-primary-600 border-gray-300 dark:border-gray-600 rounded"}),e.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Active in marketplace"})]})})]}),e.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-6",children:[e.jsxs("h3",{className:"text-sm font-medium text-gray-900 dark:text-white mb-1 flex items-center gap-2",children:[e.jsx(Jc,{className:"w-4 h-4 text-primary-600"}),"Functional Features"]}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mb-4",children:"These features will be applied to all cards issued under this program"}),e.jsx("div",{className:"space-y-4",children:KX.map(D=>{const $=l[D.key],L=D.icon;return e.jsx("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:`p-2 rounded-lg ${$?"bg-primary-100 dark:bg-primary-900/30":"bg-gray-100 dark:bg-gray-700"}`,children:e.jsx(L,{className:`w-5 h-5 ${$?"text-primary-600 dark:text-primary-400":"text-gray-400"}`})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:$,onChange:B=>o({...l,[D.key]:B.target.checked}),className:"w-4 h-4 text-primary-600 border-gray-300 dark:border-gray-600 rounded"}),e.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:D.label})]}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:D.description}),$&&(D.hasAmount||D.hasRate)&&e.jsxs("div",{className:"mt-3 flex gap-4",children:[D.hasAmount&&D.amountKey&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-500 dark:text-gray-400 mb-1",children:D.amountLabel}),e.jsx("input",{type:"number",min:"0",value:l[D.amountKey]||0,onChange:B=>o({...l,[D.amountKey]:parseFloat(B.target.value)||0}),className:"w-32 px-3 py-1.5 text-sm border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]}),D.hasRate&&D.rateKey&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-500 dark:text-gray-400 mb-1",children:D.rateLabel}),e.jsx("input",{type:"number",min:"0",step:"0.1",max:"100",value:l[D.rateKey]||0,onChange:B=>o({...l,[D.rateKey]:parseFloat(B.target.value)||0}),className:"w-24 px-3 py-1.5 text-sm border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]})]})]})]})},D.key)})})]}),e.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-6",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Display Features"}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mb-3",children:"Marketing text shown to users (does not affect card behavior)"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",value:c,onChange:D=>d(D.target.value),onKeyPress:D=>{D.key==="Enter"&&(D.preventDefault(),A())},placeholder:"Add a display feature...",className:"flex-1 px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white"}),e.jsx("button",{type:"button",onClick:A,className:"px-4 py-2 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600",children:e.jsx(It,{className:"w-4 h-4"})})]}),l.features&&l.features.length>0&&e.jsx("div",{className:"flex flex-wrap gap-2",children:l.features.map((D,$)=>e.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-full text-sm",children:[D,e.jsx("button",{type:"button",onClick:()=>R($),className:"p-0.5 hover:bg-gray-200 dark:hover:bg-gray-600 rounded-full",children:e.jsx(lt,{className:"w-3 h-3"})})]},$))})]})]})]}),e.jsxs("div",{className:"flex items-center justify-end gap-3 p-4 border-t border-gray-200 dark:border-gray-700 sticky bottom-0 bg-white dark:bg-gray-800",children:[e.jsx("button",{type:"button",onClick:()=>a(!1),className:"px-4 py-2 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg",children:"Cancel"}),e.jsxs("button",{type:"submit",disabled:v.isPending||w.isPending,className:"px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 disabled:opacity-50 flex items-center gap-2",children:[(v.isPending||w.isPending)&&e.jsx(Ie,{className:"w-4 h-4 animate-spin"}),n?"Save Changes":"Create Card Program"]})]})]})})}),u&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 p-4",children:e.jsx(W,{className:"w-full max-w-md p-6 bg-white dark:bg-gray-800",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-12 h-12 bg-red-100 dark:bg-red-900/30 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(Or,{className:"w-6 h-6 text-red-600 dark:text-red-400"})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:"Delete Card Program?"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-6",children:"This action cannot be undone. Cards already issued will not be affected."}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>m(null),className:"flex-1 px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300",children:"Cancel"}),e.jsxs("button",{onClick:()=>I(u),disabled:y.isPending,className:"flex-1 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 disabled:opacity-50 flex items-center justify-center gap-2",children:[y.isPending&&e.jsx(Ie,{className:"w-4 h-4 animate-spin"}),"Delete"]})]})]})})})]})})}const t_=[{value:1,label:"Basic",description:"Email verification only"},{value:2,label:"Advanced",description:"ID verification required"},{value:3,label:"Enhanced",description:"Full KYC with address proof"}],YX=[{value:"from-blue-500 to-blue-700",label:"Blue"},{value:"from-purple-600 to-purple-800",label:"Purple"},{value:"from-gray-700 to-gray-900",label:"Dark"},{value:"from-yellow-600 to-yellow-800",label:"Gold"},{value:"from-green-500 to-green-700",label:"Green"},{value:"from-red-500 to-red-700",label:"Red"},{value:"from-indigo-500 to-indigo-700",label:"Indigo"},{value:"from-pink-500 to-pink-700",label:"Pink"}],Hp={name:"",description:"",price:0,transactionFeePercentage:0,transactionFeeFixed:0,requiredKycLevel:1,cardType:"VIRTUAL",isActive:!0,dailyLimit:1e3,monthlyLimit:1e4,colorGradient:"from-blue-500 to-blue-700",features:[]};function QX(){var R;const{data:t,isLoading:s}=x2(!0),r=BR(),a=$R(),n=UR(),[i,l]=h.useState(null);h.useEffect(()=>{Ut.getDefaultCurrency().then(l)},[]);const o=(i==null?void 0:i.symbol)||"",c=I=>`${o}${I.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}`,[d,u]=h.useState(!1),[m,p]=h.useState(null),[x,g]=h.useState(Hp),[f,b]=h.useState(""),[j,v]=h.useState(null),w=()=>{p(null),g(Hp),u(!0)},y=I=>{p(I.id),g({name:I.name,description:I.description,cardImageUrl:I.cardImageUrl,price:I.price,transactionFeePercentage:I.transactionFeePercentage,transactionFeeFixed:I.transactionFeeFixed,requiredKycLevel:I.requiredKycLevel,cardType:I.cardType,isActive:I.isActive,dailyLimit:I.dailyLimit,monthlyLimit:I.monthlyLimit,colorGradient:I.colorGradient,features:I.features}),u(!0)},C=async()=>{try{m?await a.mutateAsync({id:m,data:x}):await r.mutateAsync(x),u(!1),g(Hp),p(null)}catch(I){console.error("Failed to save card type:",I)}},S=async I=>{try{await n.mutateAsync(I),v(null)}catch(N){console.error("Failed to delete card type:",N)}},_=()=>{f.trim()&&x.features&&(g({...x,features:[...x.features,f.trim()]}),b(""))},E=I=>{x.features&&g({...x,features:x.features.filter((N,P)=>P!==I)})},A=async I=>{try{await a.mutateAsync({id:I.id,data:{isActive:!I.isActive}})}catch(N){console.error("Failed to toggle card type:",N)}};return e.jsxs(Kt,{children:[e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Card Types"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Configure available card products for users"})]}),e.jsxs(De,{onClick:w,children:[e.jsx(It,{className:"w-4 h-4 mr-2"}),"Add Card Type"]})]}),s?e.jsx("div",{className:"text-center py-12 text-gray-500 dark:text-gray-400",children:"Loading card types..."}):t&&t.length>0?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.map(I=>{var N;return e.jsxs(W,{className:"overflow-hidden",children:[e.jsxs("div",{className:oe("relative aspect-[1.586/1] p-6 text-white bg-gradient-to-br",I.colorGradient,!I.isActive&&"opacity-50"),children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs uppercase tracking-wider opacity-80",children:I.cardType}),e.jsx("p",{className:"font-bold mt-1",children:I.name})]}),e.jsx(Je,{className:"w-8 h-8 opacity-80"})]}),e.jsx("div",{className:"absolute bottom-6 left-6 right-6",children:e.jsxs("div",{className:"flex justify-between items-end",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs opacity-70",children:"Price"}),e.jsx("p",{className:"text-lg font-bold",children:I.price===0?"FREE":c(I.price)})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-xs opacity-70",children:"KYC Level"}),e.jsx("p",{className:"text-sm",children:(N=t_.find(P=>P.value===I.requiredKycLevel))==null?void 0:N.label})]})]})}),!I.isActive&&e.jsx("div",{className:"absolute inset-0 bg-black/50 flex items-center justify-center",children:e.jsx("span",{className:"bg-red-500 px-3 py-1 rounded-full text-sm font-medium",children:"INACTIVE"})})]}),e.jsxs("div",{className:"p-4 space-y-4",children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 line-clamp-2",children:I.description}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Transaction Fee"}),e.jsxs("p",{className:"font-medium text-gray-900 dark:text-white",children:[I.transactionFeePercentage,"% + ",c(I.transactionFeeFixed)]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Daily Limit"}),e.jsxs("p",{className:"font-medium text-gray-900 dark:text-white",children:[o,I.dailyLimit.toLocaleString()]})]})]}),I.features.length>0&&e.jsxs("div",{className:"flex flex-wrap gap-1",children:[I.features.slice(0,3).map((P,k)=>e.jsx("span",{className:"px-2 py-0.5 bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300 text-xs rounded-full",children:P},k)),I.features.length>3&&e.jsxs("span",{className:"px-2 py-0.5 bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300 text-xs rounded-full",children:["+",I.features.length-3," more"]})]}),e.jsxs("div",{className:"flex items-center justify-between pt-2 border-t border-gray-200 dark:border-gray-700",children:[e.jsx("button",{onClick:()=>A(I),className:oe("flex items-center gap-1 text-sm",I.isActive?"text-green-600 dark:text-green-400":"text-gray-400 dark:text-gray-500"),children:I.isActive?e.jsxs(e.Fragment,{children:[e.jsx(kr,{className:"w-5 h-5"}),"Active"]}):e.jsxs(e.Fragment,{children:[e.jsx(Nr,{className:"w-5 h-5"}),"Inactive"]})}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(De,{variant:"ghost",size:"sm",onClick:()=>y(I),children:e.jsx(Qc,{className:"w-4 h-4"})}),e.jsx(De,{variant:"ghost",size:"sm",onClick:()=>v(I.id),className:"text-red-500 hover:text-red-600",children:e.jsx(Or,{className:"w-4 h-4"})})]})]})]})]},I.id)})}):e.jsxs(W,{className:"text-center py-12",children:[e.jsx(Je,{className:"w-12 h-12 text-gray-400 dark:text-gray-500 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"No card types configured"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-4",children:"Create your first card type to get started"}),e.jsxs(De,{onClick:w,children:[e.jsx(It,{className:"w-4 h-4 mr-2"}),"Add Card Type"]})]})]}),d&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50 p-4",children:e.jsxs(W,{className:"w-full max-w-2xl max-h-[90vh] overflow-y-auto bg-white dark:bg-gray-800",children:[e.jsx(Sr,{className:"border-b border-gray-200 dark:border-gray-700",children:e.jsx(_r,{className:"text-gray-900 dark:text-white",children:m?"Edit Card Type":"Add Card Type"})}),e.jsxs("div",{className:"space-y-4 p-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(_n,{label:"Card Name",value:x.name,onChange:I=>g({...x,name:I.target.value}),placeholder:"e.g., Premium Virtual Card"}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Card Type"}),e.jsxs("select",{value:x.cardType,onChange:I=>g({...x,cardType:I.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[e.jsx("option",{value:"VIRTUAL",children:"Virtual Card"}),e.jsx("option",{value:"PHYSICAL",children:"Physical Card"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Description"}),e.jsx("textarea",{value:x.description,onChange:I=>g({...x,description:I.target.value}),placeholder:"Describe the card benefits and features...",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white",rows:3})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:[e.jsx(js,{className:"w-4 h-4 inline mr-1"}),"Card Price"]}),e.jsx("input",{type:"number",step:"0.01",min:"0",value:x.price,onChange:I=>g({...x,price:parseFloat(I.target.value)||0}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:[e.jsx(Pu,{className:"w-4 h-4 inline mr-1"}),"Fee %"]}),e.jsx("input",{type:"number",step:"0.01",min:"0",value:x.transactionFeePercentage,onChange:I=>g({...x,transactionFeePercentage:parseFloat(I.target.value)||0}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:[e.jsx(js,{className:"w-4 h-4 inline mr-1"}),"Fixed Fee"]}),e.jsx("input",{type:"number",step:"0.01",min:"0",value:x.transactionFeeFixed,onChange:I=>g({...x,transactionFeeFixed:parseFloat(I.target.value)||0}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Daily Limit ($)"}),e.jsx("input",{type:"number",min:"0",value:x.dailyLimit,onChange:I=>g({...x,dailyLimit:parseFloat(I.target.value)||0}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Monthly Limit ($)"}),e.jsx("input",{type:"number",min:"0",value:x.monthlyLimit,onChange:I=>g({...x,monthlyLimit:parseFloat(I.target.value)||0}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:[e.jsx(Xt,{className:"w-4 h-4 inline mr-1"}),"Required KYC Level"]}),e.jsx("select",{value:x.requiredKycLevel,onChange:I=>g({...x,requiredKycLevel:parseInt(I.target.value)}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:t_.map(I=>e.jsxs("option",{value:I.value,children:[I.label," - ",I.description]},I.value))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Card Color"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:YX.map(I=>e.jsx("button",{type:"button",onClick:()=>g({...x,colorGradient:I.value}),className:oe("w-8 h-8 rounded-full bg-gradient-to-br border-2",I.value,x.colorGradient===I.value?"border-primary-500 ring-2 ring-primary-200":"border-transparent"),title:I.label},I.value))})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Features"}),e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsx("input",{type:"text",value:f,onChange:I=>b(I.target.value),onKeyDown:I=>I.key==="Enter"&&(I.preventDefault(),_()),placeholder:"Add a feature...",className:"flex-1 px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white"}),e.jsx(De,{type:"button",variant:"outline",onClick:_,children:"Add"})]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:(R=x.features)==null?void 0:R.map((I,N)=>e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-full text-sm",children:[I,e.jsx("button",{type:"button",onClick:()=>E(N),className:"hover:text-red-500",children:e.jsx(lt,{className:"w-3 h-3"})})]},N))})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{type:"button",onClick:()=>g({...x,isActive:!x.isActive}),className:oe("relative inline-flex h-6 w-11 items-center rounded-full transition-colors",x.isActive?"bg-primary-600":"bg-gray-300 dark:bg-gray-600"),children:e.jsx("span",{className:oe("inline-block h-4 w-4 transform rounded-full bg-white transition-transform",x.isActive?"translate-x-6":"translate-x-1")})}),e.jsx("label",{className:"text-sm text-gray-700 dark:text-gray-300",children:x.isActive?"Active - visible to users":"Inactive - hidden from users"})]}),e.jsxs("div",{className:"flex gap-3 pt-4 border-t border-gray-200 dark:border-gray-700",children:[e.jsx(De,{variant:"outline",className:"flex-1",onClick:()=>{u(!1),g(Hp),p(null)},children:"Cancel"}),e.jsx(De,{className:"flex-1",onClick:C,isLoading:r.isPending||a.isPending,disabled:!x.name||!x.description,children:m?"Update Card Type":"Create Card Type"})]})]})]})}),j&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:e.jsxs(W,{className:"w-full max-w-md p-6 bg-white dark:bg-gray-800",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white mb-2",children:"Delete Card Type"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:"Are you sure you want to delete this card type? This action cannot be undone."}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(De,{variant:"outline",className:"flex-1",onClick:()=>v(null),children:"Cancel"}),e.jsx(De,{className:"flex-1 bg-red-600 hover:bg-red-700",onClick:()=>S(j),isLoading:n.isPending,children:"Delete"})]})]})})]})}const JX=[{value:void 0,label:"All Orders"},{value:"PENDING",label:"Pending"},{value:"GENERATED",label:"Generated"},{value:"ACTIVATED",label:"Activated"},{value:"REJECTED",label:"Rejected"}];function ZX(){var B,T,O,q,K,le,X,se,de,fe,z,re,ie,Y,G;const[t,s]=h.useState(null);h.useEffect(()=>{Ut.getDefaultCurrency().then(s)},[]);const r=(t==null?void 0:t.symbol)||"",a=H=>`${r}${H.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}`,[n,i]=h.useState(void 0),[l,o]=h.useState(""),[c,d]=h.useState(null),[u,m]=h.useState(!1),[p,x]=h.useState(!1),[g,f]=h.useState(!1),[b,j]=h.useState(""),[v,w]=h.useState(""),[y,C]=h.useState(""),{data:S,isLoading:_}=hY(n),E=xY(),A=gY(),R=fY(),I=H=>{const ue={PENDING:{icon:e.jsx(it,{className:"w-3 h-3"}),className:"bg-yellow-100 dark:bg-yellow-900/30 text-yellow-700 dark:text-yellow-400",label:"Pending Review"},APPROVED:{icon:e.jsx(be,{className:"w-3 h-3"}),className:"bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-400",label:"Approved"},REJECTED:{icon:e.jsx(ft,{className:"w-3 h-3"}),className:"bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-400",label:"Rejected"},GENERATED:{icon:e.jsx(Je,{className:"w-3 h-3"}),className:"bg-purple-100 dark:bg-purple-900/30 text-purple-700 dark:text-purple-400",label:"Card Generated"},ACTIVATED:{icon:e.jsx(be,{className:"w-3 h-3"}),className:"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400",label:"Activated"},CANCELLED:{icon:e.jsx(ft,{className:"w-3 h-3"}),className:"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300",label:"Cancelled"}},me=ue[H]||ue.PENDING;return e.jsxs("span",{className:oe("inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium",me.className),children:[me.icon," ",me.label]})},N=H=>{d(H),m(!0)},P=async()=>{if(c)try{await E.mutateAsync({orderId:c.id,notes:y||void 0}),m(!1),C("")}catch(H){console.error("Failed to generate card:",H)}},k=async()=>{if(!(!c||!b.trim()))try{await A.mutateAsync({orderId:c.id,notes:b}),x(!1),m(!1),j("")}catch(H){console.error("Failed to reject order:",H)}},D=async()=>{if(!(!c||!v.trim()))try{await R.mutateAsync({orderId:c.id,trackingNumber:v}),f(!1),w("")}catch(H){console.error("Failed to update shipping:",H)}},$=S==null?void 0:S.filter(H=>{var me,ne,Ae,Fe,at,J,Q,ee,Ne;if(!l)return!0;const ue=l.toLowerCase();return((ne=(me=H.user)==null?void 0:me.firstName)==null?void 0:ne.toLowerCase().includes(ue))||((Fe=(Ae=H.user)==null?void 0:Ae.lastName)==null?void 0:Fe.toLowerCase().includes(ue))||((J=(at=H.user)==null?void 0:at.email)==null?void 0:J.toLowerCase().includes(ue))||((ee=(Q=H.cardType)==null?void 0:Q.name)==null?void 0:ee.toLowerCase().includes(ue))||((Ne=H.cardNumber)==null?void 0:Ne.includes(l))}),L={pending:(S==null?void 0:S.filter(H=>H.status==="PENDING").length)||0,generated:(S==null?void 0:S.filter(H=>H.status==="GENERATED").length)||0,activated:(S==null?void 0:S.filter(H=>H.status==="ACTIVATED").length)||0,rejected:(S==null?void 0:S.filter(H=>H.status==="REJECTED").length)||0};return e.jsxs(Kt,{children:[e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Card Orders"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Review and manage card purchase orders"})]}),e.jsxs(De,{variant:"outline",children:[e.jsx(ws,{className:"w-4 h-4 mr-2"}),"Export Orders"]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsx(we,{className:"p-4",delay:0,children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-yellow-100 dark:bg-yellow-900/30 rounded-lg",children:e.jsx(it,{className:"w-5 h-5 text-yellow-600 dark:text-yellow-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Pending"}),e.jsx("p",{className:"text-2xl font-bold text-yellow-600 dark:text-yellow-400",children:L.pending})]})]})}),e.jsx(we,{className:"p-4",delay:.1,children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-purple-100 dark:bg-purple-900/30 rounded-lg",children:e.jsx(Je,{className:"w-5 h-5 text-purple-600 dark:text-purple-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Generated"}),e.jsx("p",{className:"text-2xl font-bold text-purple-600 dark:text-purple-400",children:L.generated})]})]})}),e.jsx(we,{className:"p-4",delay:.2,children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-green-100 dark:bg-green-900/30 rounded-lg",children:e.jsx(be,{className:"w-5 h-5 text-green-600 dark:text-green-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Activated"}),e.jsx("p",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:L.activated})]})]})}),e.jsx(we,{className:"p-4",delay:.3,children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-red-100 dark:bg-red-900/30 rounded-lg",children:e.jsx(ft,{className:"w-5 h-5 text-red-600 dark:text-red-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Rejected"}),e.jsx("p",{className:"text-2xl font-bold text-red-600 dark:text-red-400",children:L.rejected})]})]})})]}),e.jsx(we,{className:"p-4",delay:.4,children:e.jsxs("div",{className:"flex flex-wrap items-center gap-4",children:[e.jsx("div",{className:"flex gap-1 p-1 bg-gray-100 dark:bg-gray-700 rounded-lg",children:JX.map(H=>e.jsx("button",{onClick:()=>i(H.value),className:oe("px-3 py-1.5 text-sm font-medium rounded-md transition-colors",n===H.value?"bg-white dark:bg-gray-600 text-gray-900 dark:text-white shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white"),children:H.label},H.value||"all"))}),e.jsx("div",{className:"flex-1 min-w-64",children:e.jsxs("div",{className:"relative",children:[e.jsx(ts,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search by customer, card type, or card number...",value:l,onChange:H=>o(H.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]})})]})}),e.jsx(we,{className:"overflow-hidden",delay:.5,children:_?e.jsx("div",{className:"text-center py-12 text-gray-500 dark:text-gray-400",children:"Loading orders..."}):$&&$.length>0?e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700/50 border-b border-gray-200 dark:border-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-left px-6 py-3 text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Customer"}),e.jsx("th",{className:"text-left px-6 py-3 text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Card Type"}),e.jsx("th",{className:"text-left px-6 py-3 text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Amount"}),e.jsx("th",{className:"text-left px-6 py-3 text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Card Number"}),e.jsx("th",{className:"text-left px-6 py-3 text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Status"}),e.jsx("th",{className:"text-left px-6 py-3 text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Date"}),e.jsx("th",{className:"text-left px-6 py-3 text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:$.map(H=>{var ue,me,ne,Ae,Fe,at,J;return e.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700/50",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-gray-200 dark:bg-gray-700 rounded-full flex items-center justify-center",children:e.jsx(Es,{className:"w-5 h-5 text-gray-500 dark:text-gray-400"})}),e.jsxs("div",{children:[e.jsxs("p",{className:"font-medium text-sm text-gray-900 dark:text-white",children:[(ue=H.user)==null?void 0:ue.firstName," ",(me=H.user)==null?void 0:me.lastName]}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:(ne=H.user)==null?void 0:ne.email})]})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:oe("w-8 h-5 rounded bg-gradient-to-br",((Ae=H.cardType)==null?void 0:Ae.colorGradient)||"from-blue-500 to-blue-700")}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:(Fe=H.cardType)==null?void 0:Fe.name}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:(at=H.cardType)==null?void 0:at.cardType})]})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:a(H.amountPaid)})}),e.jsx("td",{className:"px-6 py-4",children:H.cardNumber?e.jsx("span",{className:"font-mono text-sm text-gray-900 dark:text-white",children:H.cardNumber}):e.jsx("span",{className:"text-gray-400 dark:text-gray-500 text-sm",children:"Not generated"})}),e.jsx("td",{className:"px-6 py-4",children:I(H.status)}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:new Date(H.createdAt).toLocaleDateString()})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(De,{variant:"ghost",size:"sm",onClick:()=>N(H),children:e.jsx(es,{className:"w-4 h-4"})}),H.status==="GENERATED"&&((J=H.cardType)==null?void 0:J.cardType)==="PHYSICAL"&&e.jsx(De,{variant:"ghost",size:"sm",onClick:()=>{d(H),f(!0)},children:e.jsx(Sx,{className:"w-4 h-4"})})]})})]},H.id)})})]})}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Je,{className:"w-12 h-12 text-gray-400 dark:text-gray-500 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"No orders found"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Card orders will appear here when users purchase cards"})]})})]}),u&&c&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50 p-4",children:e.jsxs(W,{className:"w-full max-w-3xl max-h-[90vh] overflow-y-auto bg-white dark:bg-gray-800",children:[e.jsx(Sr,{className:"border-b border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(_r,{className:"text-gray-900 dark:text-white",children:"Order Details"}),I(c.status)]})}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-sm font-medium text-gray-900 dark:text-white mb-3 flex items-center gap-2",children:[e.jsx(Es,{className:"w-4 h-4"}),"Customer Information"]}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("p",{className:"text-gray-700 dark:text-gray-300",children:[e.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Name:"})," ",e.jsxs("span",{className:"font-medium text-gray-900 dark:text-white",children:[(B=c.user)==null?void 0:B.firstName," ",(T=c.user)==null?void 0:T.lastName]})]}),e.jsxs("p",{className:"flex items-center gap-1 text-gray-700 dark:text-gray-300",children:[e.jsx(Va,{className:"w-3 h-3 text-gray-400"}),(O=c.user)==null?void 0:O.email]}),((q=c.user)==null?void 0:q.phone)&&e.jsxs("p",{className:"flex items-center gap-1 text-gray-700 dark:text-gray-300",children:[e.jsx(lr,{className:"w-3 h-3 text-gray-400"}),c.user.phone]}),e.jsxs("p",{className:"flex items-center gap-1 text-gray-700 dark:text-gray-300",children:[e.jsx(Xt,{className:"w-3 h-3 text-gray-400"}),"KYC: ",((K=c.user)==null?void 0:K.kycStatus)||"Pending",((le=c.user)==null?void 0:le.kycTier)&&` (Tier ${c.user.kycTier})`]})]})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-sm font-medium text-gray-900 dark:text-white mb-3 flex items-center gap-2",children:[e.jsx(Je,{className:"w-4 h-4"}),"Card Information"]}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("p",{className:"text-gray-700 dark:text-gray-300",children:[e.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Card Type:"})," ",e.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:(X=c.cardType)==null?void 0:X.name})]}),e.jsxs("p",{className:"text-gray-700 dark:text-gray-300",children:[e.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Type:"})," ",(se=c.cardType)==null?void 0:se.cardType]}),e.jsxs("p",{className:"text-gray-700 dark:text-gray-300",children:[e.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Price:"})," ",e.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:a(c.amountPaid)})]}),c.cardNumber&&e.jsxs("p",{className:"text-gray-700 dark:text-gray-300",children:[e.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Card Number:"})," ",e.jsx("span",{className:"font-mono text-gray-900 dark:text-white",children:c.cardNumber})]})]})]})]}),c.cardType&&e.jsx("div",{className:"flex justify-center",children:e.jsxs("div",{className:oe("w-80 aspect-[1.586/1] rounded-xl p-6 text-white bg-gradient-to-br shadow-lg",c.cardType.colorGradient),children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs uppercase tracking-wider opacity-80",children:c.cardType.cardType}),e.jsx("p",{className:"font-bold mt-1",children:c.cardType.name})]}),e.jsx(Je,{className:"w-8 h-8 opacity-80"})]}),e.jsxs("div",{className:"absolute bottom-6 left-6 right-6",children:[e.jsx("p",{className:"text-lg tracking-widest font-mono",children:c.cardNumber||"  "}),e.jsxs("p",{className:"text-sm mt-2 opacity-80",children:[(fe=(de=c.user)==null?void 0:de.firstName)==null?void 0:fe.toUpperCase()," ",(re=(z=c.user)==null?void 0:z.lastName)==null?void 0:re.toUpperCase()]})]})]})}),e.jsxs("div",{className:"flex items-center gap-4 p-4 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:[e.jsx(jt,{className:"w-5 h-5 text-gray-500 dark:text-gray-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Payment from wallet"}),e.jsxs("p",{className:"font-medium text-gray-900 dark:text-white",children:[(ie=c.wallet)==null?void 0:ie.currency," Wallet - Balance: ",a(((Y=c.wallet)==null?void 0:Y.balance)||0)]})]})]}),((G=c.cardType)==null?void 0:G.cardType)==="PHYSICAL"&&c.shippingAddress&&e.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:[e.jsxs("h3",{className:"text-sm font-medium text-gray-900 dark:text-white mb-2 flex items-center gap-2",children:[e.jsx(Sx,{className:"w-4 h-4"}),"Shipping Address"]}),e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:[c.shippingAddress.street,", ",c.shippingAddress.city,","," ",c.shippingAddress.state," ",c.shippingAddress.postalCode,","," ",c.shippingAddress.country]}),c.trackingNumber&&e.jsxs("p",{className:"text-sm mt-2 text-gray-700 dark:text-gray-300",children:[e.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Tracking:"})," ",e.jsx("span",{className:"font-mono text-gray-900 dark:text-white",children:c.trackingNumber})]})]}),c.qrCodeData&&e.jsxs("div",{className:"flex items-center gap-4 p-4 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:[e.jsx(wa,{className:"w-8 h-8 text-gray-500 dark:text-gray-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"QR Code for activation"}),e.jsx("p",{className:"font-mono text-xs text-gray-400 dark:text-gray-500 truncate max-w-md",children:c.qrCodeData})]})]}),c.reviewNotes&&e.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-900 dark:text-white mb-2",children:"Review Notes"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:c.reviewNotes}),c.reviewedAt&&e.jsxs("p",{className:"text-xs text-gray-400 dark:text-gray-500 mt-2",children:["Reviewed on ",new Date(c.reviewedAt).toLocaleString()]})]}),c.status==="PENDING"&&e.jsxs("div",{className:"space-y-4 pt-4 border-t border-gray-200 dark:border-gray-700",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Notes (optional)"}),e.jsx("textarea",{value:y,onChange:H=>C(H.target.value),placeholder:"Add any notes about this order...",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white",rows:2})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(De,{variant:"outline",className:"flex-1",onClick:()=>m(!1),children:"Cancel"}),e.jsxs(De,{variant:"outline",className:"flex-1 text-red-600 border-red-300 hover:bg-red-50",onClick:()=>x(!0),children:[e.jsx(ft,{className:"w-4 h-4 mr-2"}),"Reject"]}),e.jsxs(De,{className:"flex-1 bg-green-600 hover:bg-green-700",onClick:P,isLoading:E.isPending,children:[e.jsx(Je,{className:"w-4 h-4 mr-2"}),"Generate Card"]})]})]}),c.status!=="PENDING"&&e.jsx("div",{className:"flex justify-end pt-4 border-t border-gray-200 dark:border-gray-700",children:e.jsx(De,{variant:"outline",onClick:()=>m(!1),children:"Close"})})]})]})}),p&&e.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center bg-black bg-opacity-50",children:e.jsxs(W,{className:"w-full max-w-md p-6 bg-white dark:bg-gray-800",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white mb-2",children:"Reject Order"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:"This will refund the customer and reject their card order. Please provide a reason."}),e.jsx("textarea",{value:b,onChange:H=>j(H.target.value),placeholder:"Reason for rejection...",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 mb-4 bg-white dark:bg-gray-700 text-gray-900 dark:text-white",rows:3}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(De,{variant:"outline",className:"flex-1",onClick:()=>x(!1),children:"Cancel"}),e.jsx(De,{className:"flex-1 bg-red-600 hover:bg-red-700",onClick:k,isLoading:A.isPending,disabled:!b.trim(),children:"Reject & Refund"})]})]})}),g&&e.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center bg-black bg-opacity-50",children:e.jsxs(W,{className:"w-full max-w-md p-6 bg-white dark:bg-gray-800",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white mb-2",children:"Add Shipping Info"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:"Enter the tracking number for the physical card shipment."}),e.jsx(_n,{label:"Tracking Number",value:v,onChange:H=>w(H.target.value),placeholder:"e.g., 1Z999AA10123456784",className:"mb-4"}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(De,{variant:"outline",className:"flex-1",onClick:()=>f(!1),children:"Cancel"}),e.jsxs(De,{className:"flex-1",onClick:D,isLoading:R.isPending,disabled:!v.trim(),children:[e.jsx(Sx,{className:"w-4 h-4 mr-2"}),"Update Shipping"]})]})]})})]})}function XX(){const[t,s]=h.useState("all"),[r,a]=h.useState("all"),[n,i]=h.useState(""),[l,o]=h.useState(!0),[c,d]=h.useState({totalTransactions:0,volume:0,pending:0,failed:0,avgValue:0,successRate:0}),[u,m]=h.useState([]),[p,x]=h.useState(null);h.useEffect(()=>{Ut.getDefaultCurrency().then(x),f()},[]);const g=(p==null?void 0:p.symbol)||"",f=async()=>{o(!0);try{const{data:y,error:C}=await U.from("transactions").select("*").order("created_at",{ascending:!1}).limit(100);if(C){console.error("Error fetching transactions:",C),m([]),o(!1);return}const S=[...new Set((y==null?void 0:y.map(L=>L.wallet_id).filter(Boolean))||[])],{data:_}=await U.from("wallets").select("id, user_id").in("id",S),E=new Map((_==null?void 0:_.map(L=>[L.id,L.user_id]))||[]),A=[...new Set((_==null?void 0:_.map(L=>L.user_id).filter(Boolean))||[])],{data:R}=await U.from("users").select("id, first_name, last_name, email, phone").in("id",A),I=new Map((R==null?void 0:R.map(L=>[L.id,L]))||[]),N=(y||[]).map(L=>{var K;const B=E.get(L.wallet_id),T=B?I.get(B):null,O=L.metadata||{};let q="Unknown";return T?q=`${T.first_name||""} ${T.last_name||""}`.trim()||T.email||"Unknown":O.sender_name?q=O.sender_name:O.recipient_name&&(q=O.recipient_name),{id:L.id,type:(L.type||"transfer").toLowerCase(),cardId:L.card_id||"",cardLast4:"****",customerId:B||L.wallet_id||"",customerName:q,amount:Math.abs(L.amount),currency:L.currency||"SLE",merchantName:L.description||L.type,merchantCategory:L.type,status:(L.status||"completed").toLowerCase(),direction:L.amount>=0?"credit":"debit",createdAt:L.created_at,settledAt:((K=L.status)==null?void 0:K.toLowerCase())==="completed"?L.created_at:null}});m(N);const P=N.filter(L=>L.status==="completed").length,k=N.filter(L=>L.status==="pending").length,D=N.filter(L=>L.status==="failed").length,$=N.reduce((L,B)=>L+B.amount,0);d({totalTransactions:N.length,volume:$,pending:k,failed:D,avgValue:N.length>0?$/N.length:0,successRate:N.length>0?P/N.length*100:0})}catch(y){console.error("Error fetching transactions:",y)}finally{o(!1)}},b=y=>{switch(y){case"authorization":return e.jsx("span",{className:"px-2 py-0.5 rounded text-xs font-medium bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-400",children:"Auth"});case"clearing":return e.jsx("span",{className:"px-2 py-0.5 rounded text-xs font-medium bg-purple-100 dark:bg-purple-900/30 text-purple-700 dark:text-purple-400",children:"Clearing"});case"refund":return e.jsx("span",{className:"px-2 py-0.5 rounded text-xs font-medium bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400",children:"Refund"});case"reversal":return e.jsx("span",{className:"px-2 py-0.5 rounded text-xs font-medium bg-orange-100 dark:bg-orange-900/30 text-orange-700 dark:text-orange-400",children:"Reversal"});case"transfer":return e.jsx("span",{className:"px-2 py-0.5 rounded text-xs font-medium bg-cyan-100 dark:bg-cyan-900/30 text-cyan-700 dark:text-cyan-400",children:"Transfer"});default:return null}},j=y=>{switch(y){case"completed":return e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400",children:[e.jsx(be,{className:"w-3 h-3"})," Completed"]});case"pending":return e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium bg-yellow-100 dark:bg-yellow-900/30 text-yellow-700 dark:text-yellow-400",children:[e.jsx(it,{className:"w-3 h-3"})," Pending"]});case"failed":return e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-400",children:[e.jsx(ft,{className:"w-3 h-3"})," Failed"]});case"reversed":return e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium bg-orange-100 dark:bg-orange-900/30 text-orange-700 dark:text-orange-400",children:[e.jsx(vt,{className:"w-3 h-3"})," Reversed"]});default:return null}},v=(y,C)=>new Intl.NumberFormat("en-US",{style:"currency",currency:C}).format(y),w=u.filter(y=>!(t!=="all"&&y.type!==t||r!=="all"&&y.status!==r||n&&!y.customerName.toLowerCase().includes(n.toLowerCase())&&!y.id.toLowerCase().includes(n.toLowerCase())&&!y.merchantName.toLowerCase().includes(n.toLowerCase())));return e.jsx(Kt,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Transactions"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"View and manage all transactions"})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("button",{className:"px-4 py-2 text-sm bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300 flex items-center gap-2",children:[e.jsx(vt,{className:"w-4 h-4"}),"Refresh"]}),e.jsxs("button",{className:"px-4 py-2 text-sm bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300 flex items-center gap-2",children:[e.jsx(ws,{className:"w-4 h-4"}),"Export"]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-6 gap-4",children:[e.jsxs(we,{className:"p-4",delay:0,children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Total Transactions"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:c.totalTransactions.toLocaleString()})]}),e.jsxs(we,{className:"p-4",delay:.1,children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Total Volume"}),e.jsxs("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:[g,(c.volume/1e6).toFixed(2),"M"]})]}),e.jsxs(we,{className:"p-4",delay:.2,children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Pending"}),e.jsx("p",{className:"text-2xl font-bold text-yellow-600 dark:text-yellow-400",children:c.pending})]}),e.jsxs(we,{className:"p-4",delay:.3,children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Failed"}),e.jsx("p",{className:"text-2xl font-bold text-red-600 dark:text-red-400",children:c.failed})]}),e.jsxs(we,{className:"p-4",delay:.4,children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Avg Transaction"}),e.jsxs("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:[g,c.avgValue.toFixed(2)]})]}),e.jsxs(we,{className:"p-4",delay:.5,children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Success Rate"}),e.jsxs("p",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:[c.successRate,"%"]})]})]}),e.jsx(W,{className:"p-4",children:e.jsxs("div",{className:"flex flex-wrap items-center gap-4",children:[e.jsx("div",{className:"flex-1 min-w-64",children:e.jsxs("div",{className:"relative",children:[e.jsx(ts,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search by ID, customer, or merchant...",value:n,onChange:y=>i(y.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-400"})]})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Bn,{className:"w-4 h-4 text-gray-400"}),e.jsxs("div",{className:"relative",children:[e.jsxs("select",{value:t,onChange:y=>s(y.target.value),className:"appearance-none border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 pr-8 text-sm focus:ring-2 focus:ring-primary-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[e.jsx("option",{value:"all",children:"All Types"}),e.jsx("option",{value:"authorization",children:"Authorization"}),e.jsx("option",{value:"clearing",children:"Clearing"}),e.jsx("option",{value:"refund",children:"Refund"}),e.jsx("option",{value:"transfer",children:"Transfer"})]}),e.jsx(zs,{className:"absolute right-2 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400 pointer-events-none"})]}),e.jsxs("div",{className:"relative",children:[e.jsxs("select",{value:r,onChange:y=>a(y.target.value),className:"appearance-none border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 pr-8 text-sm focus:ring-2 focus:ring-primary-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"completed",children:"Completed"}),e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"failed",children:"Failed"})]}),e.jsx(zs,{className:"absolute right-2 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400 pointer-events-none"})]})]})]})}),e.jsxs(W,{className:"overflow-hidden",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700/50 border-b border-gray-200 dark:border-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-left px-6 py-3 text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Transaction"}),e.jsx("th",{className:"text-left px-6 py-3 text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Customer"}),e.jsx("th",{className:"text-left px-6 py-3 text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Card"}),e.jsx("th",{className:"text-left px-6 py-3 text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Amount"}),e.jsx("th",{className:"text-left px-6 py-3 text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Merchant"}),e.jsx("th",{className:"text-left px-6 py-3 text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Type"}),e.jsx("th",{className:"text-left px-6 py-3 text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Status"}),e.jsx("th",{className:"text-left px-6 py-3 text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Time"}),e.jsx("th",{className:"text-left px-6 py-3 text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:w.map(y=>e.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700/50",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:`p-1 rounded ${y.direction==="debit"?"bg-red-100 dark:bg-red-900/30":"bg-green-100 dark:bg-green-900/30"}`,children:y.direction==="debit"?e.jsx(xs,{className:"w-4 h-4 text-red-600 dark:text-red-400"}):e.jsx(la,{className:"w-4 h-4 text-green-600 dark:text-green-400"})}),e.jsx("span",{className:"font-mono text-sm text-gray-900 dark:text-white",children:y.id})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-sm text-gray-900 dark:text-white",children:y.customerName}),e.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400 font-mono",children:y.customerId})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Je,{className:"w-4 h-4 text-gray-400"}),e.jsxs("span",{className:"font-mono text-sm text-gray-700 dark:text-gray-300",children:["****",y.cardLast4]})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("div",{className:"flex items-center gap-1",children:e.jsxs("span",{className:`font-medium ${y.direction==="credit"?"text-green-600 dark:text-green-400":"text-gray-900 dark:text-white"}`,children:[y.direction==="credit"?"+":"-",v(y.amount,y.currency)]})})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:y.merchantName}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:y.merchantCategory})]})}),e.jsx("td",{className:"px-6 py-4",children:b(y.type)}),e.jsx("td",{className:"px-6 py-4",children:j(y.status)}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:new Date(y.createdAt).toLocaleTimeString()})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{className:"p-1 bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-400 rounded hover:bg-gray-200 dark:hover:bg-gray-600",title:"View Details",children:e.jsx(es,{className:"w-4 h-4"})}),y.status==="completed"&&y.type!=="refund"&&e.jsx("button",{className:"p-1 bg-orange-100 dark:bg-orange-900/30 text-orange-600 dark:text-orange-400 rounded hover:bg-orange-200 dark:hover:bg-orange-900/50",title:"Refund",children:e.jsx(vt,{className:"w-4 h-4"})}),y.status==="failed"&&e.jsx("button",{className:"p-1 bg-yellow-100 dark:bg-yellow-900/30 text-yellow-600 dark:text-yellow-400 rounded hover:bg-yellow-200 dark:hover:bg-yellow-900/50",title:"Review",children:e.jsx(Lt,{className:"w-4 h-4"})})]})})]},y.id))})]})}),e.jsxs("div",{className:"px-6 py-4 border-t border-gray-200 dark:border-gray-700 flex items-center justify-between",children:[e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Showing 1 to ",w.length," of ",c.totalTransactions," transactions"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{className:"px-3 py-1 text-sm bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded hover:bg-gray-50 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300 disabled:opacity-50",disabled:!0,children:"Previous"}),e.jsx("button",{className:"px-3 py-1 text-sm bg-primary-600 text-white rounded",children:"1"}),e.jsx("button",{className:"px-3 py-1 text-sm bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded hover:bg-gray-50 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300",children:"2"}),e.jsx("button",{className:"px-3 py-1 text-sm bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded hover:bg-gray-50 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300",children:"3"}),e.jsx("button",{className:"px-3 py-1 text-sm bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded hover:bg-gray-50 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300",children:"Next"})]})]})]})]})})}function eee(){const[t,s]=h.useState("all"),[r,a]=h.useState(""),[n]=h.useState({totalDisputes:0,openDisputes:0,underReview:0,evidenceRequired:0,won:0,lost:0,disputeRate:0,avgResolutionTime:0}),[i]=h.useState([]),l=m=>{switch(m){case"open":return e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium bg-yellow-100 dark:bg-yellow-900/30 text-yellow-700 dark:text-yellow-400",children:[e.jsx(it,{className:"w-3 h-3"})," Open"]});case"under_review":return e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-400",children:[e.jsx(es,{className:"w-3 h-3"})," Under Review"]});case"evidence_required":return e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium bg-orange-100 dark:bg-orange-900/30 text-orange-700 dark:text-orange-400",children:[e.jsx(Yh,{className:"w-3 h-3"})," Evidence Required"]});case"won":return e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400",children:[e.jsx(be,{className:"w-3 h-3"})," Won"]});case"lost":return e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-400",children:[e.jsx(ft,{className:"w-3 h-3"})," Lost"]});case"closed":return e.jsx("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300",children:"Closed"});default:return null}},o=m=>{switch(m){case"high":return e.jsx("span",{className:"px-2 py-0.5 rounded text-xs font-medium bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-400",children:"High"});case"medium":return e.jsx("span",{className:"px-2 py-0.5 rounded text-xs font-medium bg-yellow-100 dark:bg-yellow-900/30 text-yellow-700 dark:text-yellow-400",children:"Medium"});case"low":return e.jsx("span",{className:"px-2 py-0.5 rounded text-xs font-medium bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400",children:"Low"});default:return null}},c=(m,p)=>new Intl.NumberFormat("en-US",{style:"currency",currency:p}).format(m),d=m=>{const p=new Date(m),x=new Date;return Math.ceil((p.getTime()-x.getTime())/(1e3*60*60*24))},u=i.filter(m=>!(t!=="all"&&m.status!==t||r&&!m.customerName.toLowerCase().includes(r.toLowerCase())&&!m.id.toLowerCase().includes(r.toLowerCase())&&!m.transactionId.toLowerCase().includes(r.toLowerCase())));return e.jsx(Kt,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Disputes"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Manage chargebacks and dispute cases"})]}),e.jsx("div",{className:"flex gap-3",children:e.jsxs("button",{className:"px-4 py-2 text-sm bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300 flex items-center gap-2",children:[e.jsx(ws,{className:"w-4 h-4"}),"Export"]})})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-8 gap-4",children:[e.jsxs(we,{className:"p-4",delay:0,children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Total"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:n.totalDisputes})]}),e.jsxs(we,{className:"p-4",delay:.05,children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Open"}),e.jsx("p",{className:"text-2xl font-bold text-yellow-600 dark:text-yellow-400",children:n.openDisputes})]}),e.jsxs(we,{className:"p-4",delay:.1,children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Under Review"}),e.jsx("p",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:n.underReview})]}),e.jsxs(we,{className:"p-4",delay:.15,children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Evidence Req."}),e.jsx("p",{className:"text-2xl font-bold text-orange-600 dark:text-orange-400",children:n.evidenceRequired})]}),e.jsxs(we,{className:"p-4",delay:.2,children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Won"}),e.jsx("p",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:n.won})]}),e.jsxs(we,{className:"p-4",delay:.25,children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Lost"}),e.jsx("p",{className:"text-2xl font-bold text-red-600 dark:text-red-400",children:n.lost})]}),e.jsxs(we,{className:"p-4",delay:.3,children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Dispute Rate"}),e.jsxs("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:[n.disputeRate,"%"]})]}),e.jsxs(we,{className:"p-4",delay:.35,children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Avg Resolution"}),e.jsxs("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:[n.avgResolutionTime,"d"]})]})]}),n.evidenceRequired>0&&e.jsx(W,{className:"p-4 bg-orange-50 dark:bg-orange-900/20 border-orange-200 dark:border-orange-800",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Lt,{className:"w-5 h-5 text-orange-600 dark:text-orange-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-orange-800 dark:text-orange-300",children:"Action Required"}),e.jsxs("p",{className:"text-sm text-orange-700 dark:text-orange-400",children:[n.evidenceRequired," disputes require evidence submission before their deadline."]})]})]})}),e.jsx(W,{className:"p-4",children:e.jsxs("div",{className:"flex flex-wrap items-center gap-4",children:[e.jsx("div",{className:"flex-1 min-w-64",children:e.jsxs("div",{className:"relative",children:[e.jsx(ts,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search by ID, customer, or transaction...",value:r,onChange:m=>a(m.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Bn,{className:"w-4 h-4 text-gray-400"}),e.jsxs("div",{className:"relative",children:[e.jsxs("select",{value:t,onChange:m=>s(m.target.value),className:"appearance-none border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 pr-8 text-sm focus:ring-2 focus:ring-primary-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"open",children:"Open"}),e.jsx("option",{value:"under_review",children:"Under Review"}),e.jsx("option",{value:"evidence_required",children:"Evidence Required"}),e.jsx("option",{value:"closed",children:"Closed"})]}),e.jsx(zs,{className:"absolute right-2 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400 pointer-events-none"})]})]})]})}),e.jsxs(W,{className:"overflow-hidden",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700/50 border-b border-gray-200 dark:border-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-left px-6 py-3 text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Dispute"}),e.jsx("th",{className:"text-left px-6 py-3 text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Customer"}),e.jsx("th",{className:"text-left px-6 py-3 text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Amount"}),e.jsx("th",{className:"text-left px-6 py-3 text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Reason"}),e.jsx("th",{className:"text-left px-6 py-3 text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Merchant"}),e.jsx("th",{className:"text-left px-6 py-3 text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Priority"}),e.jsx("th",{className:"text-left px-6 py-3 text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Status"}),e.jsx("th",{className:"text-left px-6 py-3 text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Due"}),e.jsx("th",{className:"text-left px-6 py-3 text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:u.map(m=>{const p=d(m.dueDate),x=p<=3&&m.status!=="won"&&m.status!=="lost"&&m.status!=="closed";return e.jsxs("tr",{className:`hover:bg-gray-50 dark:hover:bg-gray-700/50 ${x?"bg-red-50 dark:bg-red-900/20":""}`,children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[x&&e.jsx(BT,{className:"w-4 h-4 text-red-500 dark:text-red-400"}),e.jsx("span",{className:"font-mono text-sm text-gray-900 dark:text-white",children:m.id})]}),e.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400 font-mono",children:m.transactionId})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Es,{className:"w-4 h-4 text-gray-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-sm text-gray-900 dark:text-white",children:m.customerName}),e.jsxs("div",{className:"flex items-center gap-1 text-xs text-gray-500 dark:text-gray-400",children:[e.jsx(Je,{className:"w-3 h-3"}),"****",m.cardLast4]})]})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(js,{className:"w-4 h-4 text-gray-400"}),e.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:c(m.amount,m.currency)})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:m.reason}),e.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:m.reasonCode})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-300",children:m.merchantName})}),e.jsx("td",{className:"px-6 py-4",children:o(m.priority)}),e.jsx("td",{className:"px-6 py-4",children:l(m.status)}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Mn,{className:"w-4 h-4 text-gray-400"}),e.jsx("span",{className:`text-sm ${x?"text-red-600 dark:text-red-400 font-medium":p<0?"text-gray-400":"text-gray-600 dark:text-gray-300"}`,children:p<0?"Expired":`${p}d left`})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{className:"p-1 bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300 rounded hover:bg-gray-200 dark:hover:bg-gray-600",title:"View Details",children:e.jsx(es,{className:"w-4 h-4"})}),e.jsx("button",{className:"p-1 bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300 rounded hover:bg-gray-200 dark:hover:bg-gray-600",title:"Messages",children:e.jsx(Ao,{className:"w-4 h-4"})}),m.status==="evidence_required"&&e.jsx("button",{className:"p-1 bg-orange-100 dark:bg-orange-900/30 text-orange-600 dark:text-orange-400 rounded hover:bg-orange-200 dark:hover:bg-orange-900/50",title:"Upload Evidence",children:e.jsx(Du,{className:"w-4 h-4"})}),(m.status==="open"||m.status==="under_review")&&e.jsxs(e.Fragment,{children:[e.jsx("button",{className:"p-1 bg-green-100 dark:bg-green-900/30 text-green-600 dark:text-green-400 rounded hover:bg-green-200 dark:hover:bg-green-900/50",title:"Accept",children:e.jsx(be,{className:"w-4 h-4"})}),e.jsx("button",{className:"p-1 bg-red-100 dark:bg-red-900/30 text-red-600 dark:text-red-400 rounded hover:bg-red-200 dark:hover:bg-red-900/50",title:"Challenge",children:e.jsx(ft,{className:"w-4 h-4"})})]})]})})]},m.id)})})]})}),e.jsxs("div",{className:"px-6 py-4 border-t border-gray-200 dark:border-gray-700 flex items-center justify-between",children:[e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Showing 1 to ",u.length," of ",n.totalDisputes," disputes"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{className:"px-3 py-1 text-sm bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded hover:bg-gray-50 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300 disabled:opacity-50",disabled:!0,children:"Previous"}),e.jsx("button",{className:"px-3 py-1 text-sm bg-primary-600 text-white rounded",children:"1"}),e.jsx("button",{className:"px-3 py-1 text-sm bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded hover:bg-gray-50 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300",children:"2"}),e.jsx("button",{className:"px-3 py-1 text-sm bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded hover:bg-gray-50 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300",children:"3"}),e.jsx("button",{className:"px-3 py-1 text-sm bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded hover:bg-gray-50 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300",children:"Next"})]})]})]})]})})}const i0={black:"#000",white:"#fff"},Nd={300:"#e57373",400:"#ef5350",500:"#f44336",700:"#d32f2f",800:"#c62828"},kd={50:"#f3e5f5",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",700:"#7b1fa2"},Cd={50:"#e3f2fd",200:"#90caf9",400:"#42a5f5",700:"#1976d2",800:"#1565c0"},Sd={300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",700:"#0288d1",900:"#01579b"},_d={300:"#81c784",400:"#66bb6a",500:"#4caf50",700:"#388e3c",800:"#2e7d32",900:"#1b5e20"},Rm={300:"#ffb74d",400:"#ffa726",500:"#ff9800",700:"#f57c00",900:"#e65100"},tee={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"};function _l(t,...s){const r=new URL(`https://mui.com/production-error/?code=${t}`);return s.forEach(a=>r.searchParams.append("args[]",a)),`Minified MUI error #${t}; visit ${r} for the full message.`}const ay="$$material";function Yg(){return Yg=Object.assign?Object.assign.bind():function(t){for(var s=1;s<arguments.length;s++){var r=arguments[s];for(var a in r)({}).hasOwnProperty.call(r,a)&&(t[a]=r[a])}return t},Yg.apply(null,arguments)}function see(t){if(t.sheet)return t.sheet;for(var s=0;s<document.styleSheets.length;s++)if(document.styleSheets[s].ownerNode===t)return document.styleSheets[s]}function ree(t){var s=document.createElement("style");return s.setAttribute("data-emotion",t.key),t.nonce!==void 0&&s.setAttribute("nonce",t.nonce),s.appendChild(document.createTextNode("")),s.setAttribute("data-s",""),s}var aee=function(){function t(r){var a=this;this._insertTag=function(n){var i;a.tags.length===0?a.insertionPoint?i=a.insertionPoint.nextSibling:a.prepend?i=a.container.firstChild:i=a.before:i=a.tags[a.tags.length-1].nextSibling,a.container.insertBefore(n,i),a.tags.push(n)},this.isSpeedy=r.speedy===void 0?!0:r.speedy,this.tags=[],this.ctr=0,this.nonce=r.nonce,this.key=r.key,this.container=r.container,this.prepend=r.prepend,this.insertionPoint=r.insertionPoint,this.before=null}var s=t.prototype;return s.hydrate=function(a){a.forEach(this._insertTag)},s.insert=function(a){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(ree(this));var n=this.tags[this.tags.length-1];if(this.isSpeedy){var i=see(n);try{i.insertRule(a,i.cssRules.length)}catch{}}else n.appendChild(document.createTextNode(a));this.ctr++},s.flush=function(){this.tags.forEach(function(a){var n;return(n=a.parentNode)==null?void 0:n.removeChild(a)}),this.tags=[],this.ctr=0},t}(),ra="-ms-",Qg="-moz-",ns="-webkit-",LI="comm",E2="rule",A2="decl",nee="@import",FI="@keyframes",iee="@layer",lee=Math.abs,ny=String.fromCharCode,oee=Object.assign;function cee(t,s){return Kr(t,0)^45?(((s<<2^Kr(t,0))<<2^Kr(t,1))<<2^Kr(t,2))<<2^Kr(t,3):0}function OI(t){return t.trim()}function dee(t,s){return(t=s.exec(t))?t[0]:t}function is(t,s,r){return t.replace(s,r)}function Gw(t,s){return t.indexOf(s)}function Kr(t,s){return t.charCodeAt(s)|0}function l0(t,s,r){return t.slice(s,r)}function Ni(t){return t.length}function T2(t){return t.length}function Yp(t,s){return s.push(t),t}function uee(t,s){return t.map(s).join("")}var iy=1,Wu=1,BI=0,Wa=0,gr=0,lm="";function ly(t,s,r,a,n,i,l){return{value:t,root:s,parent:r,type:a,props:n,children:i,line:iy,column:Wu,length:l,return:""}}function Dm(t,s){return oee(ly("",null,null,"",null,null,0),t,{length:-t.length},s)}function mee(){return gr}function hee(){return gr=Wa>0?Kr(lm,--Wa):0,Wu--,gr===10&&(Wu=1,iy--),gr}function rn(){return gr=Wa<BI?Kr(lm,Wa++):0,Wu++,gr===10&&(Wu=1,iy++),gr}function Oi(){return Kr(lm,Wa)}function Bx(){return Wa}function B0(t,s){return l0(lm,t,s)}function o0(t){switch(t){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function $I(t){return iy=Wu=1,BI=Ni(lm=t),Wa=0,[]}function UI(t){return lm="",t}function $x(t){return OI(B0(Wa-1,Kw(t===91?t+2:t===40?t+1:t)))}function pee(t){for(;(gr=Oi())&&gr<33;)rn();return o0(t)>2||o0(gr)>3?"":" "}function xee(t,s){for(;--s&&rn()&&!(gr<48||gr>102||gr>57&&gr<65||gr>70&&gr<97););return B0(t,Bx()+(s<6&&Oi()==32&&rn()==32))}function Kw(t){for(;rn();)switch(gr){case t:return Wa;case 34:case 39:t!==34&&t!==39&&Kw(gr);break;case 40:t===41&&Kw(t);break;case 92:rn();break}return Wa}function gee(t,s){for(;rn()&&t+gr!==57;)if(t+gr===84&&Oi()===47)break;return"/*"+B0(s,Wa-1)+"*"+ny(t===47?t:rn())}function fee(t){for(;!o0(Oi());)rn();return B0(t,Wa)}function yee(t){return UI(Ux("",null,null,null,[""],t=$I(t),0,[0],t))}function Ux(t,s,r,a,n,i,l,o,c){for(var d=0,u=0,m=l,p=0,x=0,g=0,f=1,b=1,j=1,v=0,w="",y=n,C=i,S=a,_=w;b;)switch(g=v,v=rn()){case 40:if(g!=108&&Kr(_,m-1)==58){Gw(_+=is($x(v),"&","&\f"),"&\f")!=-1&&(j=-1);break}case 34:case 39:case 91:_+=$x(v);break;case 9:case 10:case 13:case 32:_+=pee(g);break;case 92:_+=xee(Bx()-1,7);continue;case 47:switch(Oi()){case 42:case 47:Yp(bee(gee(rn(),Bx()),s,r),c);break;default:_+="/"}break;case 123*f:o[d++]=Ni(_)*j;case 125*f:case 59:case 0:switch(v){case 0:case 125:b=0;case 59+u:j==-1&&(_=is(_,/\f/g,"")),x>0&&Ni(_)-m&&Yp(x>32?r_(_+";",a,r,m-1):r_(is(_," ","")+";",a,r,m-2),c);break;case 59:_+=";";default:if(Yp(S=s_(_,s,r,d,u,n,o,w,y=[],C=[],m),i),v===123)if(u===0)Ux(_,s,S,S,y,i,m,o,C);else switch(p===99&&Kr(_,3)===110?100:p){case 100:case 108:case 109:case 115:Ux(t,S,S,a&&Yp(s_(t,S,S,0,0,n,o,w,n,y=[],m),C),n,C,m,o,a?y:C);break;default:Ux(_,S,S,S,[""],C,0,o,C)}}d=u=x=0,f=j=1,w=_="",m=l;break;case 58:m=1+Ni(_),x=g;default:if(f<1){if(v==123)--f;else if(v==125&&f++==0&&hee()==125)continue}switch(_+=ny(v),v*f){case 38:j=u>0?1:(_+="\f",-1);break;case 44:o[d++]=(Ni(_)-1)*j,j=1;break;case 64:Oi()===45&&(_+=$x(rn())),p=Oi(),u=m=Ni(w=_+=fee(Bx())),v++;break;case 45:g===45&&Ni(_)==2&&(f=0)}}return i}function s_(t,s,r,a,n,i,l,o,c,d,u){for(var m=n-1,p=n===0?i:[""],x=T2(p),g=0,f=0,b=0;g<a;++g)for(var j=0,v=l0(t,m+1,m=lee(f=l[g])),w=t;j<x;++j)(w=OI(f>0?p[j]+" "+v:is(v,/&\f/g,p[j])))&&(c[b++]=w);return ly(t,s,r,n===0?E2:o,c,d,u)}function bee(t,s,r){return ly(t,s,r,LI,ny(mee()),l0(t,2,-2),0)}function r_(t,s,r,a){return ly(t,s,r,A2,l0(t,0,a),l0(t,a+1,-1),a)}function cu(t,s){for(var r="",a=T2(t),n=0;n<a;n++)r+=s(t[n],n,t,s)||"";return r}function vee(t,s,r,a){switch(t.type){case iee:if(t.children.length)break;case nee:case A2:return t.return=t.return||t.value;case LI:return"";case FI:return t.return=t.value+"{"+cu(t.children,a)+"}";case E2:t.value=t.props.join(",")}return Ni(r=cu(t.children,a))?t.return=t.value+"{"+r+"}":""}function jee(t){var s=T2(t);return function(r,a,n,i){for(var l="",o=0;o<s;o++)l+=t[o](r,a,n,i)||"";return l}}function wee(t){return function(s){s.root||(s=s.return)&&t(s)}}function VI(t){var s=Object.create(null);return function(r){return s[r]===void 0&&(s[r]=t(r)),s[r]}}var Nee=function(s,r,a){for(var n=0,i=0;n=i,i=Oi(),n===38&&i===12&&(r[a]=1),!o0(i);)rn();return B0(s,Wa)},kee=function(s,r){var a=-1,n=44;do switch(o0(n)){case 0:n===38&&Oi()===12&&(r[a]=1),s[a]+=Nee(Wa-1,r,a);break;case 2:s[a]+=$x(n);break;case 4:if(n===44){s[++a]=Oi()===58?"&\f":"",r[a]=s[a].length;break}default:s[a]+=ny(n)}while(n=rn());return s},Cee=function(s,r){return UI(kee($I(s),r))},a_=new WeakMap,See=function(s){if(!(s.type!=="rule"||!s.parent||s.length<1)){for(var r=s.value,a=s.parent,n=s.column===a.column&&s.line===a.line;a.type!=="rule";)if(a=a.parent,!a)return;if(!(s.props.length===1&&r.charCodeAt(0)!==58&&!a_.get(a))&&!n){a_.set(s,!0);for(var i=[],l=Cee(r,i),o=a.props,c=0,d=0;c<l.length;c++)for(var u=0;u<o.length;u++,d++)s.props[d]=i[c]?l[c].replace(/&\f/g,o[u]):o[u]+" "+l[c]}}},_ee=function(s){if(s.type==="decl"){var r=s.value;r.charCodeAt(0)===108&&r.charCodeAt(2)===98&&(s.return="",s.value="")}};function qI(t,s){switch(cee(t,s)){case 5103:return ns+"print-"+t+t;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return ns+t+t;case 5349:case 4246:case 4810:case 6968:case 2756:return ns+t+Qg+t+ra+t+t;case 6828:case 4268:return ns+t+ra+t+t;case 6165:return ns+t+ra+"flex-"+t+t;case 5187:return ns+t+is(t,/(\w+).+(:[^]+)/,ns+"box-$1$2"+ra+"flex-$1$2")+t;case 5443:return ns+t+ra+"flex-item-"+is(t,/flex-|-self/,"")+t;case 4675:return ns+t+ra+"flex-line-pack"+is(t,/align-content|flex-|-self/,"")+t;case 5548:return ns+t+ra+is(t,"shrink","negative")+t;case 5292:return ns+t+ra+is(t,"basis","preferred-size")+t;case 6060:return ns+"box-"+is(t,"-grow","")+ns+t+ra+is(t,"grow","positive")+t;case 4554:return ns+is(t,/([^-])(transform)/g,"$1"+ns+"$2")+t;case 6187:return is(is(is(t,/(zoom-|grab)/,ns+"$1"),/(image-set)/,ns+"$1"),t,"")+t;case 5495:case 3959:return is(t,/(image-set\([^]*)/,ns+"$1$`$1");case 4968:return is(is(t,/(.+:)(flex-)?(.*)/,ns+"box-pack:$3"+ra+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+ns+t+t;case 4095:case 3583:case 4068:case 2532:return is(t,/(.+)-inline(.+)/,ns+"$1$2")+t;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(Ni(t)-1-s>6)switch(Kr(t,s+1)){case 109:if(Kr(t,s+4)!==45)break;case 102:return is(t,/(.+:)(.+)-([^]+)/,"$1"+ns+"$2-$3$1"+Qg+(Kr(t,s+3)==108?"$3":"$2-$3"))+t;case 115:return~Gw(t,"stretch")?qI(is(t,"stretch","fill-available"),s)+t:t}break;case 4949:if(Kr(t,s+1)!==115)break;case 6444:switch(Kr(t,Ni(t)-3-(~Gw(t,"!important")&&10))){case 107:return is(t,":",":"+ns)+t;case 101:return is(t,/(.+:)([^;!]+)(;|!.+)?/,"$1"+ns+(Kr(t,14)===45?"inline-":"")+"box$3$1"+ns+"$2$3$1"+ra+"$2box$3")+t}break;case 5936:switch(Kr(t,s+11)){case 114:return ns+t+ra+is(t,/[svh]\w+-[tblr]{2}/,"tb")+t;case 108:return ns+t+ra+is(t,/[svh]\w+-[tblr]{2}/,"tb-rl")+t;case 45:return ns+t+ra+is(t,/[svh]\w+-[tblr]{2}/,"lr")+t}return ns+t+ra+t+t}return t}var Eee=function(s,r,a,n){if(s.length>-1&&!s.return)switch(s.type){case A2:s.return=qI(s.value,s.length);break;case FI:return cu([Dm(s,{value:is(s.value,"@","@"+ns)})],n);case E2:if(s.length)return uee(s.props,function(i){switch(dee(i,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return cu([Dm(s,{props:[is(i,/:(read-\w+)/,":"+Qg+"$1")]})],n);case"::placeholder":return cu([Dm(s,{props:[is(i,/:(plac\w+)/,":"+ns+"input-$1")]}),Dm(s,{props:[is(i,/:(plac\w+)/,":"+Qg+"$1")]}),Dm(s,{props:[is(i,/:(plac\w+)/,ra+"input-$1")]})],n)}return""})}},Aee=[Eee],Tee=function(s){var r=s.key;if(r==="css"){var a=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(a,function(f){var b=f.getAttribute("data-emotion");b.indexOf(" ")!==-1&&(document.head.appendChild(f),f.setAttribute("data-s",""))})}var n=s.stylisPlugins||Aee,i={},l,o=[];l=s.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+r+' "]'),function(f){for(var b=f.getAttribute("data-emotion").split(" "),j=1;j<b.length;j++)i[b[j]]=!0;o.push(f)});var c,d=[See,_ee];{var u,m=[vee,wee(function(f){u.insert(f)})],p=jee(d.concat(n,m)),x=function(b){return cu(yee(b),p)};c=function(b,j,v,w){u=v,x(b?b+"{"+j.styles+"}":j.styles),w&&(g.inserted[j.name]=!0)}}var g={key:r,sheet:new aee({key:r,container:l,nonce:s.nonce,speedy:s.speedy,prepend:s.prepend,insertionPoint:s.insertionPoint}),nonce:s.nonce,inserted:i,registered:{},insert:c};return g.sheet.hydrate(o),g},WI={exports:{}},ms={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $r=typeof Symbol=="function"&&Symbol.for,P2=$r?Symbol.for("react.element"):60103,R2=$r?Symbol.for("react.portal"):60106,oy=$r?Symbol.for("react.fragment"):60107,cy=$r?Symbol.for("react.strict_mode"):60108,dy=$r?Symbol.for("react.profiler"):60114,uy=$r?Symbol.for("react.provider"):60109,my=$r?Symbol.for("react.context"):60110,D2=$r?Symbol.for("react.async_mode"):60111,hy=$r?Symbol.for("react.concurrent_mode"):60111,py=$r?Symbol.for("react.forward_ref"):60112,xy=$r?Symbol.for("react.suspense"):60113,Pee=$r?Symbol.for("react.suspense_list"):60120,gy=$r?Symbol.for("react.memo"):60115,fy=$r?Symbol.for("react.lazy"):60116,Ree=$r?Symbol.for("react.block"):60121,Dee=$r?Symbol.for("react.fundamental"):60117,Iee=$r?Symbol.for("react.responder"):60118,Mee=$r?Symbol.for("react.scope"):60119;function hn(t){if(typeof t=="object"&&t!==null){var s=t.$$typeof;switch(s){case P2:switch(t=t.type,t){case D2:case hy:case oy:case dy:case cy:case xy:return t;default:switch(t=t&&t.$$typeof,t){case my:case py:case fy:case gy:case uy:return t;default:return s}}case R2:return s}}}function zI(t){return hn(t)===hy}ms.AsyncMode=D2;ms.ConcurrentMode=hy;ms.ContextConsumer=my;ms.ContextProvider=uy;ms.Element=P2;ms.ForwardRef=py;ms.Fragment=oy;ms.Lazy=fy;ms.Memo=gy;ms.Portal=R2;ms.Profiler=dy;ms.StrictMode=cy;ms.Suspense=xy;ms.isAsyncMode=function(t){return zI(t)||hn(t)===D2};ms.isConcurrentMode=zI;ms.isContextConsumer=function(t){return hn(t)===my};ms.isContextProvider=function(t){return hn(t)===uy};ms.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===P2};ms.isForwardRef=function(t){return hn(t)===py};ms.isFragment=function(t){return hn(t)===oy};ms.isLazy=function(t){return hn(t)===fy};ms.isMemo=function(t){return hn(t)===gy};ms.isPortal=function(t){return hn(t)===R2};ms.isProfiler=function(t){return hn(t)===dy};ms.isStrictMode=function(t){return hn(t)===cy};ms.isSuspense=function(t){return hn(t)===xy};ms.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===oy||t===hy||t===dy||t===cy||t===xy||t===Pee||typeof t=="object"&&t!==null&&(t.$$typeof===fy||t.$$typeof===gy||t.$$typeof===uy||t.$$typeof===my||t.$$typeof===py||t.$$typeof===Dee||t.$$typeof===Iee||t.$$typeof===Mee||t.$$typeof===Ree)};ms.typeOf=hn;WI.exports=ms;var Lee=WI.exports,GI=Lee,Fee={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},Oee={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},KI={};KI[GI.ForwardRef]=Fee;KI[GI.Memo]=Oee;var Bee=!0;function HI(t,s,r){var a="";return r.split(" ").forEach(function(n){t[n]!==void 0?s.push(t[n]+";"):n&&(a+=n+" ")}),a}var I2=function(s,r,a){var n=s.key+"-"+r.name;(a===!1||Bee===!1)&&s.registered[n]===void 0&&(s.registered[n]=r.styles)},M2=function(s,r,a){I2(s,r,a);var n=s.key+"-"+r.name;if(s.inserted[r.name]===void 0){var i=r;do s.insert(r===i?"."+n:"",i,s.sheet,!0),i=i.next;while(i!==void 0)}};function $ee(t){for(var s=0,r,a=0,n=t.length;n>=4;++a,n-=4)r=t.charCodeAt(a)&255|(t.charCodeAt(++a)&255)<<8|(t.charCodeAt(++a)&255)<<16|(t.charCodeAt(++a)&255)<<24,r=(r&65535)*1540483477+((r>>>16)*59797<<16),r^=r>>>24,s=(r&65535)*1540483477+((r>>>16)*59797<<16)^(s&65535)*1540483477+((s>>>16)*59797<<16);switch(n){case 3:s^=(t.charCodeAt(a+2)&255)<<16;case 2:s^=(t.charCodeAt(a+1)&255)<<8;case 1:s^=t.charCodeAt(a)&255,s=(s&65535)*1540483477+((s>>>16)*59797<<16)}return s^=s>>>13,s=(s&65535)*1540483477+((s>>>16)*59797<<16),((s^s>>>15)>>>0).toString(36)}var Uee={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},Vee=/[A-Z]|^ms/g,qee=/_EMO_([^_]+?)_([^]*?)_EMO_/g,YI=function(s){return s.charCodeAt(1)===45},n_=function(s){return s!=null&&typeof s!="boolean"},hv=VI(function(t){return YI(t)?t:t.replace(Vee,"-$&").toLowerCase()}),i_=function(s,r){switch(s){case"animation":case"animationName":if(typeof r=="string")return r.replace(qee,function(a,n,i){return ki={name:n,styles:i,next:ki},n})}return Uee[s]!==1&&!YI(s)&&typeof r=="number"&&r!==0?r+"px":r};function c0(t,s,r){if(r==null)return"";var a=r;if(a.__emotion_styles!==void 0)return a;switch(typeof r){case"boolean":return"";case"object":{var n=r;if(n.anim===1)return ki={name:n.name,styles:n.styles,next:ki},n.name;var i=r;if(i.styles!==void 0){var l=i.next;if(l!==void 0)for(;l!==void 0;)ki={name:l.name,styles:l.styles,next:ki},l=l.next;var o=i.styles+";";return o}return Wee(t,s,r)}case"function":{if(t!==void 0){var c=ki,d=r(t);return ki=c,c0(t,s,d)}break}}var u=r;if(s==null)return u;var m=s[u];return m!==void 0?m:u}function Wee(t,s,r){var a="";if(Array.isArray(r))for(var n=0;n<r.length;n++)a+=c0(t,s,r[n])+";";else for(var i in r){var l=r[i];if(typeof l!="object"){var o=l;s!=null&&s[o]!==void 0?a+=i+"{"+s[o]+"}":n_(o)&&(a+=hv(i)+":"+i_(i,o)+";")}else if(Array.isArray(l)&&typeof l[0]=="string"&&(s==null||s[l[0]]===void 0))for(var c=0;c<l.length;c++)n_(l[c])&&(a+=hv(i)+":"+i_(i,l[c])+";");else{var d=c0(t,s,l);switch(i){case"animation":case"animationName":{a+=hv(i)+":"+d+";";break}default:a+=i+"{"+d+"}"}}}return a}var l_=/label:\s*([^\s;{]+)\s*(;|$)/g,ki;function $0(t,s,r){if(t.length===1&&typeof t[0]=="object"&&t[0]!==null&&t[0].styles!==void 0)return t[0];var a=!0,n="";ki=void 0;var i=t[0];if(i==null||i.raw===void 0)a=!1,n+=c0(r,s,i);else{var l=i;n+=l[0]}for(var o=1;o<t.length;o++)if(n+=c0(r,s,t[o]),a){var c=i;n+=c[o]}l_.lastIndex=0;for(var d="",u;(u=l_.exec(n))!==null;)d+="-"+u[1];var m=$ee(n)+d;return{name:m,styles:n,next:ki}}var zee=function(s){return s()},QI=Wx.useInsertionEffect?Wx.useInsertionEffect:!1,JI=QI||zee,o_=QI||h.useLayoutEffect,ZI=h.createContext(typeof HTMLElement<"u"?Tee({key:"css"}):null);ZI.Provider;var L2=function(s){return h.forwardRef(function(r,a){var n=h.useContext(ZI);return s(r,n,a)})},yy=h.createContext({}),F2={}.hasOwnProperty,Hw="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",Gee=function(s,r){var a={};for(var n in r)F2.call(r,n)&&(a[n]=r[n]);return a[Hw]=s,a},Kee=function(s){var r=s.cache,a=s.serialized,n=s.isStringTag;return I2(r,a,n),JI(function(){return M2(r,a,n)}),null},Hee=L2(function(t,s,r){var a=t.css;typeof a=="string"&&s.registered[a]!==void 0&&(a=s.registered[a]);var n=t[Hw],i=[a],l="";typeof t.className=="string"?l=HI(s.registered,i,t.className):t.className!=null&&(l=t.className+" ");var o=$0(i,void 0,h.useContext(yy));l+=s.key+"-"+o.name;var c={};for(var d in t)F2.call(t,d)&&d!=="css"&&d!==Hw&&(c[d]=t[d]);return c.className=l,r&&(c.ref=r),h.createElement(h.Fragment,null,h.createElement(Kee,{cache:s,serialized:o,isStringTag:typeof n=="string"}),h.createElement(n,c))}),Yee=Hee,c_=function(s,r){var a=arguments;if(r==null||!F2.call(r,"css"))return h.createElement.apply(void 0,a);var n=a.length,i=new Array(n);i[0]=Yee,i[1]=Gee(s,r);for(var l=2;l<n;l++)i[l]=a[l];return h.createElement.apply(null,i)};(function(t){var s;s||(s=t.JSX||(t.JSX={}))})(c_||(c_={}));var Qee=L2(function(t,s){var r=t.styles,a=$0([r],void 0,h.useContext(yy)),n=h.useRef();return o_(function(){var i=s.key+"-global",l=new s.sheet.constructor({key:i,nonce:s.sheet.nonce,container:s.sheet.container,speedy:s.sheet.isSpeedy}),o=!1,c=document.querySelector('style[data-emotion="'+i+" "+a.name+'"]');return s.sheet.tags.length&&(l.before=s.sheet.tags[0]),c!==null&&(o=!0,c.setAttribute("data-emotion",i),l.hydrate([c])),n.current=[l,o],function(){l.flush()}},[s]),o_(function(){var i=n.current,l=i[0],o=i[1];if(o){i[1]=!1;return}if(a.next!==void 0&&M2(s,a.next,!0),l.tags.length){var c=l.tags[l.tags.length-1].nextElementSibling;l.before=c,l.flush()}s.insert("",a,l,!1)},[s,a.name]),null});function O2(){for(var t=arguments.length,s=new Array(t),r=0;r<t;r++)s[r]=arguments[r];return $0(s)}function U0(){var t=O2.apply(void 0,arguments),s="animation-"+t.name;return{name:s,styles:"@keyframes "+s+"{"+t.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}}var Jee=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|disableRemotePlayback|download|draggable|encType|enterKeyHint|fetchpriority|fetchPriority|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|popover|popoverTarget|popoverTargetAction|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,Zee=VI(function(t){return Jee.test(t)||t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)<91}),Xee=Zee,ete=function(s){return s!=="theme"},d_=function(s){return typeof s=="string"&&s.charCodeAt(0)>96?Xee:ete},u_=function(s,r,a){var n;if(r){var i=r.shouldForwardProp;n=s.__emotion_forwardProp&&i?function(l){return s.__emotion_forwardProp(l)&&i(l)}:i}return typeof n!="function"&&a&&(n=s.__emotion_forwardProp),n},tte=function(s){var r=s.cache,a=s.serialized,n=s.isStringTag;return I2(r,a,n),JI(function(){return M2(r,a,n)}),null},ste=function t(s,r){var a=s.__emotion_real===s,n=a&&s.__emotion_base||s,i,l;r!==void 0&&(i=r.label,l=r.target);var o=u_(s,r,a),c=o||d_(n),d=!c("as");return function(){var u=arguments,m=a&&s.__emotion_styles!==void 0?s.__emotion_styles.slice(0):[];if(i!==void 0&&m.push("label:"+i+";"),u[0]==null||u[0].raw===void 0)m.push.apply(m,u);else{var p=u[0];m.push(p[0]);for(var x=u.length,g=1;g<x;g++)m.push(u[g],p[g])}var f=L2(function(b,j,v){var w=d&&b.as||n,y="",C=[],S=b;if(b.theme==null){S={};for(var _ in b)S[_]=b[_];S.theme=h.useContext(yy)}typeof b.className=="string"?y=HI(j.registered,C,b.className):b.className!=null&&(y=b.className+" ");var E=$0(m.concat(C),j.registered,S);y+=j.key+"-"+E.name,l!==void 0&&(y+=" "+l);var A=d&&o===void 0?d_(w):c,R={};for(var I in b)d&&I==="as"||A(I)&&(R[I]=b[I]);return R.className=y,v&&(R.ref=v),h.createElement(h.Fragment,null,h.createElement(tte,{cache:j,serialized:E,isStringTag:typeof w=="string"}),h.createElement(w,R))});return f.displayName=i!==void 0?i:"Styled("+(typeof n=="string"?n:n.displayName||n.name||"Component")+")",f.defaultProps=s.defaultProps,f.__emotion_real=f,f.__emotion_base=n,f.__emotion_styles=m,f.__emotion_forwardProp=o,Object.defineProperty(f,"toString",{value:function(){return"."+l}}),f.withComponent=function(b,j){var v=t(b,Yg({},r,j,{shouldForwardProp:u_(f,j,!0)}));return v.apply(void 0,m)},f}},rte=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],Yw=ste.bind(null);rte.forEach(function(t){Yw[t]=Yw(t)});function ate(t){return t==null||Object.keys(t).length===0}function nte(t){const{styles:s,defaultTheme:r={}}=t,a=typeof s=="function"?n=>s(ate(n)?r:n):s;return e.jsx(Qee,{styles:a})}function XI(t,s){return Yw(t,s)}function ite(t,s){Array.isArray(t.__emotion_styles)&&(t.__emotion_styles=s(t.__emotion_styles))}const m_=[];function So(t){return m_[0]=t,$0(m_)}var eM={exports:{}},ks={};/**
 * @license React
 * react-is.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var B2=Symbol.for("react.transitional.element"),$2=Symbol.for("react.portal"),by=Symbol.for("react.fragment"),vy=Symbol.for("react.strict_mode"),jy=Symbol.for("react.profiler"),wy=Symbol.for("react.consumer"),Ny=Symbol.for("react.context"),ky=Symbol.for("react.forward_ref"),Cy=Symbol.for("react.suspense"),Sy=Symbol.for("react.suspense_list"),_y=Symbol.for("react.memo"),Ey=Symbol.for("react.lazy"),lte=Symbol.for("react.view_transition"),ote=Symbol.for("react.client.reference");function Un(t){if(typeof t=="object"&&t!==null){var s=t.$$typeof;switch(s){case B2:switch(t=t.type,t){case by:case jy:case vy:case Cy:case Sy:case lte:return t;default:switch(t=t&&t.$$typeof,t){case Ny:case ky:case Ey:case _y:return t;case wy:return t;default:return s}}case $2:return s}}}ks.ContextConsumer=wy;ks.ContextProvider=Ny;ks.Element=B2;ks.ForwardRef=ky;ks.Fragment=by;ks.Lazy=Ey;ks.Memo=_y;ks.Portal=$2;ks.Profiler=jy;ks.StrictMode=vy;ks.Suspense=Cy;ks.SuspenseList=Sy;ks.isContextConsumer=function(t){return Un(t)===wy};ks.isContextProvider=function(t){return Un(t)===Ny};ks.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===B2};ks.isForwardRef=function(t){return Un(t)===ky};ks.isFragment=function(t){return Un(t)===by};ks.isLazy=function(t){return Un(t)===Ey};ks.isMemo=function(t){return Un(t)===_y};ks.isPortal=function(t){return Un(t)===$2};ks.isProfiler=function(t){return Un(t)===jy};ks.isStrictMode=function(t){return Un(t)===vy};ks.isSuspense=function(t){return Un(t)===Cy};ks.isSuspenseList=function(t){return Un(t)===Sy};ks.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===by||t===jy||t===vy||t===Cy||t===Sy||typeof t=="object"&&t!==null&&(t.$$typeof===Ey||t.$$typeof===_y||t.$$typeof===Ny||t.$$typeof===wy||t.$$typeof===ky||t.$$typeof===ote||t.getModuleId!==void 0)};ks.typeOf=Un;eM.exports=ks;var tM=eM.exports;function Ei(t){if(typeof t!="object"||t===null)return!1;const s=Object.getPrototypeOf(t);return(s===null||s===Object.prototype||Object.getPrototypeOf(s)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)}function sM(t){if(h.isValidElement(t)||tM.isValidElementType(t)||!Ei(t))return t;const s={};return Object.keys(t).forEach(r=>{s[r]=sM(t[r])}),s}function ca(t,s,r={clone:!0}){const a=r.clone?{...t}:t;return Ei(t)&&Ei(s)&&Object.keys(s).forEach(n=>{h.isValidElement(s[n])||tM.isValidElementType(s[n])?a[n]=s[n]:Ei(s[n])&&Object.prototype.hasOwnProperty.call(t,n)&&Ei(t[n])?a[n]=ca(t[n],s[n],r):r.clone?a[n]=Ei(s[n])?sM(s[n]):s[n]:a[n]=s[n]}),a}const cte=t=>{const s=Object.keys(t).map(r=>({key:r,val:t[r]}))||[];return s.sort((r,a)=>r.val-a.val),s.reduce((r,a)=>({...r,[a.key]:a.val}),{})};function dte(t){const{values:s={xs:0,sm:600,md:900,lg:1200,xl:1536},unit:r="px",step:a=5,...n}=t,i=cte(s),l=Object.keys(i);function o(p){return`@media (min-width:${typeof s[p]=="number"?s[p]:p}${r})`}function c(p){return`@media (max-width:${(typeof s[p]=="number"?s[p]:p)-a/100}${r})`}function d(p,x){const g=l.indexOf(x);return`@media (min-width:${typeof s[p]=="number"?s[p]:p}${r}) and (max-width:${(g!==-1&&typeof s[l[g]]=="number"?s[l[g]]:x)-a/100}${r})`}function u(p){return l.indexOf(p)+1<l.length?d(p,l[l.indexOf(p)+1]):o(p)}function m(p){const x=l.indexOf(p);return x===0?o(l[1]):x===l.length-1?c(l[x]):d(p,l[l.indexOf(p)+1]).replace("@media","@media not all and")}return{keys:l,values:i,up:o,down:c,between:d,only:u,not:m,unit:r,...n}}function h_(t,s){if(!t.containerQueries)return s;const r=Object.keys(s).filter(a=>a.startsWith("@container")).sort((a,n)=>{var l,o;const i=/min-width:\s*([0-9.]+)/;return+(((l=a.match(i))==null?void 0:l[1])||0)-+(((o=n.match(i))==null?void 0:o[1])||0)});return r.length?r.reduce((a,n)=>{const i=s[n];return delete a[n],a[n]=i,a},{...s}):s}function ute(t,s){return s==="@"||s.startsWith("@")&&(t.some(r=>s.startsWith(`@${r}`))||!!s.match(/^@\d/))}function mte(t,s){const r=s.match(/^@([^/]+)?\/?(.+)?$/);if(!r)return null;const[,a,n]=r,i=Number.isNaN(+a)?a||0:+a;return t.containerQueries(n).up(i)}function hte(t){const s=(i,l)=>i.replace("@media",l?`@container ${l}`:"@container");function r(i,l){i.up=(...o)=>s(t.breakpoints.up(...o),l),i.down=(...o)=>s(t.breakpoints.down(...o),l),i.between=(...o)=>s(t.breakpoints.between(...o),l),i.only=(...o)=>s(t.breakpoints.only(...o),l),i.not=(...o)=>{const c=s(t.breakpoints.not(...o),l);return c.includes("not all and")?c.replace("not all and ","").replace("min-width:","width<").replace("max-width:","width>").replace("and","or"):c}}const a={},n=i=>(r(a,i),a);return r(n),{...t,containerQueries:n}}const pte={borderRadius:4};function vh(t,s){return s?ca(t,s,{clone:!1}):t}const Ay={xs:0,sm:600,md:900,lg:1200,xl:1536},p_={keys:["xs","sm","md","lg","xl"],up:t=>`@media (min-width:${Ay[t]}px)`},xte={containerQueries:t=>({up:s=>{let r=typeof s=="number"?s:Ay[s]||s;return typeof r=="number"&&(r=`${r}px`),t?`@container ${t} (min-width:${r})`:`@container (min-width:${r})`}})};function El(t,s,r){const a=t.theme||{};if(Array.isArray(s)){const i=a.breakpoints||p_;return s.reduce((l,o,c)=>(l[i.up(i.keys[c])]=r(s[c]),l),{})}if(typeof s=="object"){const i=a.breakpoints||p_;return Object.keys(s).reduce((l,o)=>{if(ute(i.keys,o)){const c=mte(a.containerQueries?a:xte,o);c&&(l[c]=r(s[o],o))}else if(Object.keys(i.values||Ay).includes(o)){const c=i.up(o);l[c]=r(s[o],o)}else{const c=o;l[c]=s[c]}return l},{})}return r(s)}function gte(t={}){var r;return((r=t.keys)==null?void 0:r.reduce((a,n)=>{const i=t.up(n);return a[i]={},a},{}))||{}}function x_(t,s){return t.reduce((r,a)=>{const n=r[a];return(!n||Object.keys(n).length===0)&&delete r[a],r},s)}function _e(t){if(typeof t!="string")throw new Error(_l(7));return t.charAt(0).toUpperCase()+t.slice(1)}function Ty(t,s,r=!0){if(!s||typeof s!="string")return null;if(t&&t.vars&&r){const a=`vars.${s}`.split(".").reduce((n,i)=>n&&n[i]?n[i]:null,t);if(a!=null)return a}return s.split(".").reduce((a,n)=>a&&a[n]!=null?a[n]:null,t)}function Jg(t,s,r,a=r){let n;return typeof t=="function"?n=t(r):Array.isArray(t)?n=t[r]||a:n=Ty(t,r)||a,s&&(n=s(n,a,t)),n}function cr(t){const{prop:s,cssProperty:r=t.prop,themeKey:a,transform:n}=t,i=l=>{if(l[s]==null)return null;const o=l[s],c=l.theme,d=Ty(c,a)||{};return El(l,o,m=>{let p=Jg(d,n,m);return m===p&&typeof m=="string"&&(p=Jg(d,n,`${s}${m==="default"?"":_e(m)}`,m)),r===!1?p:{[r]:p}})};return i.propTypes={},i.filterProps=[s],i}function fte(t){const s={};return r=>(s[r]===void 0&&(s[r]=t(r)),s[r])}const yte={m:"margin",p:"padding"},bte={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},g_={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},vte=fte(t=>{if(t.length>2)if(g_[t])t=g_[t];else return[t];const[s,r]=t.split(""),a=yte[s],n=bte[r]||"";return Array.isArray(n)?n.map(i=>a+i):[a+n]}),U2=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],V2=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"];[...U2,...V2];function V0(t,s,r,a){const n=Ty(t,s,!0)??r;return typeof n=="number"||typeof n=="string"?i=>typeof i=="string"?i:typeof n=="string"?n.startsWith("var(")&&i===0?0:n.startsWith("var(")&&i===1?n:`calc(${i} * ${n})`:n*i:Array.isArray(n)?i=>{if(typeof i=="string")return i;const l=Math.abs(i),o=n[l];return i>=0?o:typeof o=="number"?-o:typeof o=="string"&&o.startsWith("var(")?`calc(-1 * ${o})`:`-${o}`}:typeof n=="function"?n:()=>{}}function q2(t){return V0(t,"spacing",8)}function q0(t,s){return typeof s=="string"||s==null?s:t(s)}function jte(t,s){return r=>t.reduce((a,n)=>(a[n]=q0(s,r),a),{})}function wte(t,s,r,a){if(!s.includes(r))return null;const n=vte(r),i=jte(n,a),l=t[r];return El(t,l,i)}function rM(t,s){const r=q2(t.theme);return Object.keys(t).map(a=>wte(t,s,a,r)).reduce(vh,{})}function Hs(t){return rM(t,U2)}Hs.propTypes={};Hs.filterProps=U2;function Ys(t){return rM(t,V2)}Ys.propTypes={};Ys.filterProps=V2;function aM(t=8,s=q2({spacing:t})){if(t.mui)return t;const r=(...a)=>(a.length===0?[1]:a).map(i=>{const l=s(i);return typeof l=="number"?`${l}px`:l}).join(" ");return r.mui=!0,r}function Py(...t){const s=t.reduce((a,n)=>(n.filterProps.forEach(i=>{a[i]=n}),a),{}),r=a=>Object.keys(a).reduce((n,i)=>s[i]?vh(n,s[i](a)):n,{});return r.propTypes={},r.filterProps=t.reduce((a,n)=>a.concat(n.filterProps),[]),r}function En(t){return typeof t!="number"?t:`${t}px solid`}function Vn(t,s){return cr({prop:t,themeKey:"borders",transform:s})}const Nte=Vn("border",En),kte=Vn("borderTop",En),Cte=Vn("borderRight",En),Ste=Vn("borderBottom",En),_te=Vn("borderLeft",En),Ete=Vn("borderColor"),Ate=Vn("borderTopColor"),Tte=Vn("borderRightColor"),Pte=Vn("borderBottomColor"),Rte=Vn("borderLeftColor"),Dte=Vn("outline",En),Ite=Vn("outlineColor"),Ry=t=>{if(t.borderRadius!==void 0&&t.borderRadius!==null){const s=V0(t.theme,"shape.borderRadius",4),r=a=>({borderRadius:q0(s,a)});return El(t,t.borderRadius,r)}return null};Ry.propTypes={};Ry.filterProps=["borderRadius"];Py(Nte,kte,Cte,Ste,_te,Ete,Ate,Tte,Pte,Rte,Ry,Dte,Ite);const Dy=t=>{if(t.gap!==void 0&&t.gap!==null){const s=V0(t.theme,"spacing",8),r=a=>({gap:q0(s,a)});return El(t,t.gap,r)}return null};Dy.propTypes={};Dy.filterProps=["gap"];const Iy=t=>{if(t.columnGap!==void 0&&t.columnGap!==null){const s=V0(t.theme,"spacing",8),r=a=>({columnGap:q0(s,a)});return El(t,t.columnGap,r)}return null};Iy.propTypes={};Iy.filterProps=["columnGap"];const My=t=>{if(t.rowGap!==void 0&&t.rowGap!==null){const s=V0(t.theme,"spacing",8),r=a=>({rowGap:q0(s,a)});return El(t,t.rowGap,r)}return null};My.propTypes={};My.filterProps=["rowGap"];const Mte=cr({prop:"gridColumn"}),Lte=cr({prop:"gridRow"}),Fte=cr({prop:"gridAutoFlow"}),Ote=cr({prop:"gridAutoColumns"}),Bte=cr({prop:"gridAutoRows"}),$te=cr({prop:"gridTemplateColumns"}),Ute=cr({prop:"gridTemplateRows"}),Vte=cr({prop:"gridTemplateAreas"}),qte=cr({prop:"gridArea"});Py(Dy,Iy,My,Mte,Lte,Fte,Ote,Bte,$te,Ute,Vte,qte);function du(t,s){return s==="grey"?s:t}const Wte=cr({prop:"color",themeKey:"palette",transform:du}),zte=cr({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:du}),Gte=cr({prop:"backgroundColor",themeKey:"palette",transform:du});Py(Wte,zte,Gte);function en(t){return t<=1&&t!==0?`${t*100}%`:t}const Kte=cr({prop:"width",transform:en}),W2=t=>{if(t.maxWidth!==void 0&&t.maxWidth!==null){const s=r=>{var n,i,l,o,c;const a=((l=(i=(n=t.theme)==null?void 0:n.breakpoints)==null?void 0:i.values)==null?void 0:l[r])||Ay[r];return a?((c=(o=t.theme)==null?void 0:o.breakpoints)==null?void 0:c.unit)!=="px"?{maxWidth:`${a}${t.theme.breakpoints.unit}`}:{maxWidth:a}:{maxWidth:en(r)}};return El(t,t.maxWidth,s)}return null};W2.filterProps=["maxWidth"];const Hte=cr({prop:"minWidth",transform:en}),Yte=cr({prop:"height",transform:en}),Qte=cr({prop:"maxHeight",transform:en}),Jte=cr({prop:"minHeight",transform:en});cr({prop:"size",cssProperty:"width",transform:en});cr({prop:"size",cssProperty:"height",transform:en});const Zte=cr({prop:"boxSizing"});Py(Kte,W2,Hte,Yte,Qte,Jte,Zte);const W0={border:{themeKey:"borders",transform:En},borderTop:{themeKey:"borders",transform:En},borderRight:{themeKey:"borders",transform:En},borderBottom:{themeKey:"borders",transform:En},borderLeft:{themeKey:"borders",transform:En},borderColor:{themeKey:"palette"},borderTopColor:{themeKey:"palette"},borderRightColor:{themeKey:"palette"},borderBottomColor:{themeKey:"palette"},borderLeftColor:{themeKey:"palette"},outline:{themeKey:"borders",transform:En},outlineColor:{themeKey:"palette"},borderRadius:{themeKey:"shape.borderRadius",style:Ry},color:{themeKey:"palette",transform:du},bgcolor:{themeKey:"palette",cssProperty:"backgroundColor",transform:du},backgroundColor:{themeKey:"palette",transform:du},p:{style:Ys},pt:{style:Ys},pr:{style:Ys},pb:{style:Ys},pl:{style:Ys},px:{style:Ys},py:{style:Ys},padding:{style:Ys},paddingTop:{style:Ys},paddingRight:{style:Ys},paddingBottom:{style:Ys},paddingLeft:{style:Ys},paddingX:{style:Ys},paddingY:{style:Ys},paddingInline:{style:Ys},paddingInlineStart:{style:Ys},paddingInlineEnd:{style:Ys},paddingBlock:{style:Ys},paddingBlockStart:{style:Ys},paddingBlockEnd:{style:Ys},m:{style:Hs},mt:{style:Hs},mr:{style:Hs},mb:{style:Hs},ml:{style:Hs},mx:{style:Hs},my:{style:Hs},margin:{style:Hs},marginTop:{style:Hs},marginRight:{style:Hs},marginBottom:{style:Hs},marginLeft:{style:Hs},marginX:{style:Hs},marginY:{style:Hs},marginInline:{style:Hs},marginInlineStart:{style:Hs},marginInlineEnd:{style:Hs},marginBlock:{style:Hs},marginBlockStart:{style:Hs},marginBlockEnd:{style:Hs},displayPrint:{cssProperty:!1,transform:t=>({"@media print":{display:t}})},display:{},overflow:{},textOverflow:{},visibility:{},whiteSpace:{},flexBasis:{},flexDirection:{},flexWrap:{},justifyContent:{},alignItems:{},alignContent:{},order:{},flex:{},flexGrow:{},flexShrink:{},alignSelf:{},justifyItems:{},justifySelf:{},gap:{style:Dy},rowGap:{style:My},columnGap:{style:Iy},gridColumn:{},gridRow:{},gridAutoFlow:{},gridAutoColumns:{},gridAutoRows:{},gridTemplateColumns:{},gridTemplateRows:{},gridTemplateAreas:{},gridArea:{},position:{},zIndex:{themeKey:"zIndex"},top:{},right:{},bottom:{},left:{},boxShadow:{themeKey:"shadows"},width:{transform:en},maxWidth:{style:W2},minWidth:{transform:en},height:{transform:en},maxHeight:{transform:en},minHeight:{transform:en},boxSizing:{},font:{themeKey:"font"},fontFamily:{themeKey:"typography"},fontSize:{themeKey:"typography"},fontStyle:{themeKey:"typography"},fontWeight:{themeKey:"typography"},letterSpacing:{},textTransform:{},lineHeight:{},textAlign:{},typography:{cssProperty:!1,themeKey:"typography"}};function Xte(...t){const s=t.reduce((a,n)=>a.concat(Object.keys(n)),[]),r=new Set(s);return t.every(a=>r.size===Object.keys(a).length)}function ese(t,s){return typeof t=="function"?t(s):t}function tse(){function t(r,a,n,i){const l={[r]:a,theme:n},o=i[r];if(!o)return{[r]:a};const{cssProperty:c=r,themeKey:d,transform:u,style:m}=o;if(a==null)return null;if(d==="typography"&&a==="inherit")return{[r]:a};const p=Ty(n,d)||{};return m?m(l):El(l,a,g=>{let f=Jg(p,u,g);return g===f&&typeof g=="string"&&(f=Jg(p,u,`${r}${g==="default"?"":_e(g)}`,g)),c===!1?f:{[c]:f}})}function s(r){const{sx:a,theme:n={},nested:i}=r||{};if(!a)return null;const l=n.unstable_sxConfig??W0;function o(c){let d=c;if(typeof c=="function")d=c(n);else if(typeof c!="object")return c;if(!d)return null;const u=gte(n.breakpoints),m=Object.keys(u);let p=u;return Object.keys(d).forEach(x=>{const g=ese(d[x],n);if(g!=null)if(typeof g=="object")if(l[x])p=vh(p,t(x,g,n,l));else{const f=El({theme:n},g,b=>({[x]:b}));Xte(f,g)?p[x]=s({sx:g,theme:n,nested:!0}):p=vh(p,f)}else p=vh(p,t(x,g,n,l))}),!i&&n.modularCssLayers?{"@layer sx":h_(n,x_(m,p))}:h_(n,x_(m,p))}return Array.isArray(a)?a.map(o):o(a)}return s}const ed=tse();ed.filterProps=["sx"];function sse(t,s){var a;const r=this;if(r.vars){if(!((a=r.colorSchemes)!=null&&a[t])||typeof r.getColorSchemeSelector!="function")return{};let n=r.getColorSchemeSelector(t);return n==="&"?s:((n.includes("data-")||n.includes("."))&&(n=`*:where(${n.replace(/\s*&$/,"")}) &`),{[n]:s})}return r.palette.mode===t?s:{}}function z2(t={},...s){const{breakpoints:r={},palette:a={},spacing:n,shape:i={},...l}=t,o=dte(r),c=aM(n);let d=ca({breakpoints:o,direction:"ltr",components:{},palette:{mode:"light",...a},spacing:c,shape:{...pte,...i}},l);return d=hte(d),d.applyStyles=sse,d=s.reduce((u,m)=>ca(u,m),d),d.unstable_sxConfig={...W0,...l==null?void 0:l.unstable_sxConfig},d.unstable_sx=function(m){return ed({sx:m,theme:this})},d}function rse(t){return Object.keys(t).length===0}function ase(t=null){const s=h.useContext(yy);return!s||rse(s)?t:s}const nse=z2();function G2(t=nse){return ase(t)}function pv(t){const s=So(t);return t!==s&&s.styles?(s.styles.match(/^@layer\s+[^{]*$/)||(s.styles=`@layer global{${s.styles}}`),s):t}function ise({styles:t,themeId:s,defaultTheme:r={}}){const a=G2(r),n=s&&a[s]||a;let i=typeof t=="function"?t(n):t;return n.modularCssLayers&&(Array.isArray(i)?i=i.map(l=>pv(typeof l=="function"?l(n):l)):i=pv(i)),e.jsx(nte,{styles:i})}const lse=t=>{var a;const s={systemProps:{},otherProps:{}},r=((a=t==null?void 0:t.theme)==null?void 0:a.unstable_sxConfig)??W0;return Object.keys(t).forEach(n=>{r[n]?s.systemProps[n]=t[n]:s.otherProps[n]=t[n]}),s};function nM(t){const{sx:s,...r}=t,{systemProps:a,otherProps:n}=lse(r);let i;return Array.isArray(s)?i=[a,...s]:typeof s=="function"?i=(...l)=>{const o=s(...l);return Ei(o)?{...a,...o}:a}:i={...a,...s},{...n,sx:i}}const f_=t=>t,ose=()=>{let t=f_;return{configure(s){t=s},generate(s){return t(s)},reset(){t=f_}}},iM=ose();function cse(t={}){const{themeId:s,defaultTheme:r,defaultClassName:a="MuiBox-root",generateClassName:n}=t,i=XI("div",{shouldForwardProp:o=>o!=="theme"&&o!=="sx"&&o!=="as"})(ed);return h.forwardRef(function(c,d){const u=G2(r),{className:m,component:p="div",...x}=nM(c);return e.jsx(i,{as:p,ref:d,className:oe(m,n?n(a):a),theme:s&&u[s]||u,...x})})}const dse={active:"active",checked:"checked",completed:"completed",disabled:"disabled",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",open:"open",readOnly:"readOnly",required:"required",selected:"selected"};function yt(t,s,r="Mui"){const a=dse[s];return a?`${r}-${a}`:`${iM.generate(t)}-${s}`}function gt(t,s,r="Mui"){const a={};return s.forEach(n=>{a[n]=yt(t,n,r)}),a}function lM(t){const{variants:s,...r}=t,a={variants:s,style:So(r),isProcessed:!0};return a.style===r||s&&s.forEach(n=>{typeof n.style!="function"&&(n.style=So(n.style))}),a}const use=z2();function xv(t){return t!=="ownerState"&&t!=="theme"&&t!=="sx"&&t!=="as"}function Cc(t,s){return s&&t&&typeof t=="object"&&t.styles&&!t.styles.startsWith("@layer")&&(t.styles=`@layer ${s}{${String(t.styles)}}`),t}function mse(t){return t?(s,r)=>r[t]:null}function hse(t,s,r){t.theme=gse(t.theme)?r:t.theme[s]||t.theme}function Vx(t,s,r){const a=typeof s=="function"?s(t):s;if(Array.isArray(a))return a.flatMap(n=>Vx(t,n,r));if(Array.isArray(a==null?void 0:a.variants)){let n;if(a.isProcessed)n=r?Cc(a.style,r):a.style;else{const{variants:i,...l}=a;n=r?Cc(So(l),r):l}return oM(t,a.variants,[n],r)}return a!=null&&a.isProcessed?r?Cc(So(a.style),r):a.style:r?Cc(So(a),r):a}function oM(t,s,r=[],a=void 0){var i;let n;e:for(let l=0;l<s.length;l+=1){const o=s[l];if(typeof o.props=="function"){if(n??(n={...t,...t.ownerState,ownerState:t.ownerState}),!o.props(n))continue}else for(const c in o.props)if(t[c]!==o.props[c]&&((i=t.ownerState)==null?void 0:i[c])!==o.props[c])continue e;typeof o.style=="function"?(n??(n={...t,...t.ownerState,ownerState:t.ownerState}),r.push(a?Cc(So(o.style(n)),a):o.style(n))):r.push(a?Cc(So(o.style),a):o.style)}return r}function pse(t={}){const{themeId:s,defaultTheme:r=use,rootShouldForwardProp:a=xv,slotShouldForwardProp:n=xv}=t;function i(o){hse(o,s,r)}return(o,c={})=>{ite(o,S=>S.filter(_=>_!==ed));const{name:d,slot:u,skipVariantsResolver:m,skipSx:p,overridesResolver:x=mse(yse(u)),...g}=c,f=d&&d.startsWith("Mui")||u?"components":"custom",b=m!==void 0?m:u&&u!=="Root"&&u!=="root"||!1,j=p||!1;let v=xv;u==="Root"||u==="root"?v=a:u?v=n:fse(o)&&(v=void 0);const w=XI(o,{shouldForwardProp:v,label:xse(),...g}),y=S=>{if(S.__emotion_real===S)return S;if(typeof S=="function")return function(E){return Vx(E,S,E.theme.modularCssLayers?f:void 0)};if(Ei(S)){const _=lM(S);return function(A){return _.variants?Vx(A,_,A.theme.modularCssLayers?f:void 0):A.theme.modularCssLayers?Cc(_.style,f):_.style}}return S},C=(...S)=>{const _=[],E=S.map(y),A=[];if(_.push(i),d&&x&&A.push(function(P){var L,B;const D=(B=(L=P.theme.components)==null?void 0:L[d])==null?void 0:B.styleOverrides;if(!D)return null;const $={};for(const T in D)$[T]=Vx(P,D[T],P.theme.modularCssLayers?"theme":void 0);return x(P,$)}),d&&!b&&A.push(function(P){var $,L;const k=P.theme,D=(L=($=k==null?void 0:k.components)==null?void 0:$[d])==null?void 0:L.variants;return D?oM(P,D,[],P.theme.modularCssLayers?"theme":void 0):null}),j||A.push(ed),Array.isArray(E[0])){const N=E.shift(),P=new Array(_.length).fill(""),k=new Array(A.length).fill("");let D;D=[...P,...N,...k],D.raw=[...P,...N.raw,...k],_.unshift(D)}const R=[..._,...E,...A],I=w(...R);return o.muiName&&(I.muiName=o.muiName),I};return w.withConfig&&(C.withConfig=w.withConfig),C}}function xse(t,s){return void 0}function gse(t){for(const s in t)return!1;return!0}function fse(t){return typeof t=="string"&&t.charCodeAt(0)>96}function yse(t){return t&&t.charAt(0).toLowerCase()+t.slice(1)}function Zg(t,s,r=!1){const a={...s};for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const i=n;if(i==="components"||i==="slots")a[i]={...t[i],...a[i]};else if(i==="componentsProps"||i==="slotProps"){const l=t[i],o=s[i];if(!o)a[i]=l||{};else if(!l)a[i]=o;else{a[i]={...o};for(const c in l)if(Object.prototype.hasOwnProperty.call(l,c)){const d=c;a[i][d]=Zg(l[d],o[d],r)}}}else i==="className"&&r&&s.className?a.className=oe(t==null?void 0:t.className,s==null?void 0:s.className):i==="style"&&r&&s.style?a.style={...t==null?void 0:t.style,...s==null?void 0:s.style}:a[i]===void 0&&(a[i]=t[i])}return a}const $i=typeof window<"u"?h.useLayoutEffect:h.useEffect;function bse(t,s=Number.MIN_SAFE_INTEGER,r=Number.MAX_SAFE_INTEGER){return Math.max(s,Math.min(t,r))}function K2(t,s=0,r=1){return bse(t,s,r)}function vse(t){t=t.slice(1);const s=new RegExp(`.{1,${t.length>=6?2:1}}`,"g");let r=t.match(s);return r&&r[0].length===1&&(r=r.map(a=>a+a)),r?`rgb${r.length===4?"a":""}(${r.map((a,n)=>n<3?parseInt(a,16):Math.round(parseInt(a,16)/255*1e3)/1e3).join(", ")})`:""}function Mo(t){if(t.type)return t;if(t.charAt(0)==="#")return Mo(vse(t));const s=t.indexOf("("),r=t.substring(0,s);if(!["rgb","rgba","hsl","hsla","color"].includes(r))throw new Error(_l(9,t));let a=t.substring(s+1,t.length-1),n;if(r==="color"){if(a=a.split(" "),n=a.shift(),a.length===4&&a[3].charAt(0)==="/"&&(a[3]=a[3].slice(1)),!["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].includes(n))throw new Error(_l(10,n))}else a=a.split(",");return a=a.map(i=>parseFloat(i)),{type:r,values:a,colorSpace:n}}const jse=t=>{const s=Mo(t);return s.values.slice(0,3).map((r,a)=>s.type.includes("hsl")&&a!==0?`${r}%`:r).join(" ")},Jm=(t,s)=>{try{return jse(t)}catch{return t}};function Ly(t){const{type:s,colorSpace:r}=t;let{values:a}=t;return s.includes("rgb")?a=a.map((n,i)=>i<3?parseInt(n,10):n):s.includes("hsl")&&(a[1]=`${a[1]}%`,a[2]=`${a[2]}%`),s.includes("color")?a=`${r} ${a.join(" ")}`:a=`${a.join(", ")}`,`${s}(${a})`}function cM(t){t=Mo(t);const{values:s}=t,r=s[0],a=s[1]/100,n=s[2]/100,i=a*Math.min(n,1-n),l=(d,u=(d+r/30)%12)=>n-i*Math.max(Math.min(u-3,9-u,1),-1);let o="rgb";const c=[Math.round(l(0)*255),Math.round(l(8)*255),Math.round(l(4)*255)];return t.type==="hsla"&&(o+="a",c.push(s[3])),Ly({type:o,values:c})}function Qw(t){t=Mo(t);let s=t.type==="hsl"||t.type==="hsla"?Mo(cM(t)).values:t.values;return s=s.map(r=>(t.type!=="color"&&(r/=255),r<=.03928?r/12.92:((r+.055)/1.055)**2.4)),Number((.2126*s[0]+.7152*s[1]+.0722*s[2]).toFixed(3))}function wse(t,s){const r=Qw(t),a=Qw(s);return(Math.max(r,a)+.05)/(Math.min(r,a)+.05)}function Xg(t,s){return t=Mo(t),s=K2(s),(t.type==="rgb"||t.type==="hsl")&&(t.type+="a"),t.type==="color"?t.values[3]=`/${s}`:t.values[3]=s,Ly(t)}function tc(t,s,r){try{return Xg(t,s)}catch{return t}}function Fy(t,s){if(t=Mo(t),s=K2(s),t.type.includes("hsl"))t.values[2]*=1-s;else if(t.type.includes("rgb")||t.type.includes("color"))for(let r=0;r<3;r+=1)t.values[r]*=1-s;return Ly(t)}function os(t,s,r){try{return Fy(t,s)}catch{return t}}function Oy(t,s){if(t=Mo(t),s=K2(s),t.type.includes("hsl"))t.values[2]+=(100-t.values[2])*s;else if(t.type.includes("rgb"))for(let r=0;r<3;r+=1)t.values[r]+=(255-t.values[r])*s;else if(t.type.includes("color"))for(let r=0;r<3;r+=1)t.values[r]+=(1-t.values[r])*s;return Ly(t)}function cs(t,s,r){try{return Oy(t,s)}catch{return t}}function Nse(t,s=.15){return Qw(t)>.5?Fy(t,s):Oy(t,s)}function Qp(t,s,r){try{return Nse(t,s)}catch{return t}}const kse=h.createContext(),z0=()=>h.useContext(kse)??!1,Cse=h.createContext(void 0);function Sse(t){const{theme:s,name:r,props:a}=t;if(!s||!s.components||!s.components[r])return a;const n=s.components[r];return n.defaultProps?Zg(n.defaultProps,a,s.components.mergeClassNameAndStyle):!n.styleOverrides&&!n.variants?Zg(n,a,s.components.mergeClassNameAndStyle):a}function _se({props:t,name:s}){const r=h.useContext(Cse);return Sse({props:t,name:s,theme:{components:r}})}let y_=0;function Ese(t){const[s,r]=h.useState(t),a=t||s;return h.useEffect(()=>{s==null&&(y_+=1,r(`mui-${y_}`))},[s]),a}const Ase={...Wx},b_=Ase.useId;function om(t){if(b_!==void 0){const s=b_();return t??s}return Ese(t)}const v_={theme:void 0};function Tse(t){let s,r;return function(n){let i=s;return(i===void 0||n.theme!==r)&&(v_.theme=n.theme,i=lM(t(v_)),s=i,r=n.theme),i}}function Pse(t=""){function s(...a){if(!a.length)return"";const n=a[0];return typeof n=="string"&&!n.match(/(#|\(|\)|(-?(\d*\.)?\d+)(px|em|%|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc))|^(-?(\d*\.)?\d+)$|(\d+ \d+ \d+)/)?`, var(--${t?`${t}-`:""}${n}${s(...a.slice(1))})`:`, ${n}`}return(a,...n)=>`var(--${t?`${t}-`:""}${a}${s(...n)})`}const j_=(t,s,r,a=[])=>{let n=t;s.forEach((i,l)=>{l===s.length-1?Array.isArray(n)?n[Number(i)]=r:n&&typeof n=="object"&&(n[i]=r):n&&typeof n=="object"&&(n[i]||(n[i]=a.includes(i)?[]:{}),n=n[i])})},Rse=(t,s,r)=>{function a(n,i=[],l=[]){Object.entries(n).forEach(([o,c])=>{(!r||r&&!r([...i,o]))&&c!=null&&(typeof c=="object"&&Object.keys(c).length>0?a(c,[...i,o],Array.isArray(c)?[...l,o]:l):s([...i,o],c,l))})}a(t)},Dse=(t,s)=>typeof s=="number"?["lineHeight","fontWeight","opacity","zIndex"].some(a=>t.includes(a))||t[t.length-1].toLowerCase().includes("opacity")?s:`${s}px`:s;function gv(t,s){const{prefix:r,shouldSkipGeneratingVar:a}=s||{},n={},i={},l={};return Rse(t,(o,c,d)=>{if((typeof c=="string"||typeof c=="number")&&(!a||!a(o,c))){const u=`--${r?`${r}-`:""}${o.join("-")}`,m=Dse(o,c);Object.assign(n,{[u]:m}),j_(i,o,`var(${u})`,d),j_(l,o,`var(${u}, ${m})`,d)}},o=>o[0]==="vars"),{css:n,vars:i,varsWithDefaults:l}}function Ise(t,s={}){const{getSelector:r=j,disableCssColorScheme:a,colorSchemeSelector:n,enableContrastVars:i}=s,{colorSchemes:l={},components:o,defaultColorScheme:c="light",...d}=t,{vars:u,css:m,varsWithDefaults:p}=gv(d,s);let x=p;const g={},{[c]:f,...b}=l;if(Object.entries(b||{}).forEach(([y,C])=>{const{vars:S,css:_,varsWithDefaults:E}=gv(C,s);x=ca(x,E),g[y]={css:_,vars:S}}),f){const{css:y,vars:C,varsWithDefaults:S}=gv(f,s);x=ca(x,S),g[c]={css:y,vars:C}}function j(y,C){var _,E;let S=n;if(n==="class"&&(S=".%s"),n==="data"&&(S="[data-%s]"),n!=null&&n.startsWith("data-")&&!n.includes("%s")&&(S=`[${n}="%s"]`),y){if(S==="media")return t.defaultColorScheme===y?":root":{[`@media (prefers-color-scheme: ${((E=(_=l[y])==null?void 0:_.palette)==null?void 0:E.mode)||y})`]:{":root":C}};if(S)return t.defaultColorScheme===y?`:root, ${S.replace("%s",String(y))}`:S.replace("%s",String(y))}return":root"}return{vars:x,generateThemeVars:()=>{let y={...u};return Object.entries(g).forEach(([,{vars:C}])=>{y=ca(y,C)}),y},generateStyleSheets:()=>{var A,R;const y=[],C=t.defaultColorScheme||"light";function S(I,N){Object.keys(N).length&&y.push(typeof I=="string"?{[I]:{...N}}:I)}S(r(void 0,{...m}),m);const{[C]:_,...E}=g;if(_){const{css:I}=_,N=(R=(A=l[C])==null?void 0:A.palette)==null?void 0:R.mode,P=!a&&N?{colorScheme:N,...I}:{...I};S(r(C,{...P}),P)}return Object.entries(E).forEach(([I,{css:N}])=>{var D,$;const P=($=(D=l[I])==null?void 0:D.palette)==null?void 0:$.mode,k=!a&&P?{colorScheme:P,...N}:{...N};S(r(I,{...k}),k)}),i&&y.push({":root":{"--__l-threshold":"0.7","--__l":"clamp(0, (l / var(--__l-threshold) - 1) * -infinity, 1)","--__a":"clamp(0.87, (l / var(--__l-threshold) - 1) * -infinity, 1)"}}),y}}}function Mse(t){return function(r){return t==="media"?`@media (prefers-color-scheme: ${r})`:t?t.startsWith("data-")&&!t.includes("%s")?`[${t}="${r}"] &`:t==="class"?`.${r} &`:t==="data"?`[data-${r}] &`:`${t.replace("%s",r)} &`:"&"}}function bt(t,s,r=void 0){const a={};for(const n in t){const i=t[n];let l="",o=!0;for(let c=0;c<i.length;c+=1){const d=i[c];d&&(l+=(o===!0?"":" ")+s(d),o=!1,r&&r[d]&&(l+=" "+r[d]))}a[n]=l}return a}function fv(t,s){var r,a,n;return h.isValidElement(t)&&s.indexOf(t.type.muiName??((n=(a=(r=t.type)==null?void 0:r._payload)==null?void 0:a.value)==null?void 0:n.muiName))!==-1}function dM(){return{text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:i0.white,default:i0.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}}}const uM=dM();function mM(){return{text:{primary:i0.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:i0.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}}}const Jw=mM();function w_(t,s,r,a){const n=a.light||a,i=a.dark||a*1.5;t[s]||(t.hasOwnProperty(r)?t[s]=t[r]:s==="light"?t.light=Oy(t.main,n):s==="dark"&&(t.dark=Fy(t.main,i)))}function N_(t,s,r,a,n){const i=n.light||n,l=n.dark||n*1.5;s[r]||(s.hasOwnProperty(a)?s[r]=s[a]:r==="light"?s.light=`color-mix(in ${t}, ${s.main}, #fff ${(i*100).toFixed(0)}%)`:r==="dark"&&(s.dark=`color-mix(in ${t}, ${s.main}, #000 ${(l*100).toFixed(0)}%)`))}function Lse(t="light"){return t==="dark"?{main:Cd[200],light:Cd[50],dark:Cd[400]}:{main:Cd[700],light:Cd[400],dark:Cd[800]}}function Fse(t="light"){return t==="dark"?{main:kd[200],light:kd[50],dark:kd[400]}:{main:kd[500],light:kd[300],dark:kd[700]}}function Ose(t="light"){return t==="dark"?{main:Nd[500],light:Nd[300],dark:Nd[700]}:{main:Nd[700],light:Nd[400],dark:Nd[800]}}function Bse(t="light"){return t==="dark"?{main:Sd[400],light:Sd[300],dark:Sd[700]}:{main:Sd[700],light:Sd[500],dark:Sd[900]}}function $se(t="light"){return t==="dark"?{main:_d[400],light:_d[300],dark:_d[700]}:{main:_d[800],light:_d[500],dark:_d[900]}}function Use(t="light"){return t==="dark"?{main:Rm[400],light:Rm[300],dark:Rm[700]}:{main:"#ed6c02",light:Rm[500],dark:Rm[900]}}function Vse(t){return`oklch(from ${t} var(--__l) 0 h / var(--__a))`}function H2(t){const{mode:s="light",contrastThreshold:r=3,tonalOffset:a=.2,colorSpace:n,...i}=t,l=t.primary||Lse(s),o=t.secondary||Fse(s),c=t.error||Ose(s),d=t.info||Bse(s),u=t.success||$se(s),m=t.warning||Use(s);function p(b){return n?Vse(b):wse(b,Jw.text.primary)>=r?Jw.text.primary:uM.text.primary}const x=({color:b,name:j,mainShade:v=500,lightShade:w=300,darkShade:y=700})=>{if(b={...b},!b.main&&b[v]&&(b.main=b[v]),!b.hasOwnProperty("main"))throw new Error(_l(11,j?` (${j})`:"",v));if(typeof b.main!="string")throw new Error(_l(12,j?` (${j})`:"",JSON.stringify(b.main)));return n?(N_(n,b,"light",w,a),N_(n,b,"dark",y,a)):(w_(b,"light",w,a),w_(b,"dark",y,a)),b.contrastText||(b.contrastText=p(b.main)),b};let g;return s==="light"?g=dM():s==="dark"&&(g=mM()),ca({common:{...i0},mode:s,primary:x({color:l,name:"primary"}),secondary:x({color:o,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:x({color:c,name:"error"}),warning:x({color:m,name:"warning"}),info:x({color:d,name:"info"}),success:x({color:u,name:"success"}),grey:tee,contrastThreshold:r,getContrastText:p,augmentColor:x,tonalOffset:a,...g},i)}function qse(t){const s={};return Object.entries(t).forEach(a=>{const[n,i]=a;typeof i=="object"&&(s[n]=`${i.fontStyle?`${i.fontStyle} `:""}${i.fontVariant?`${i.fontVariant} `:""}${i.fontWeight?`${i.fontWeight} `:""}${i.fontStretch?`${i.fontStretch} `:""}${i.fontSize||""}${i.lineHeight?`/${i.lineHeight} `:""}${i.fontFamily||""}`)}),s}function Wse(t,s){return{toolbar:{minHeight:56,[t.up("xs")]:{"@media (orientation: landscape)":{minHeight:48}},[t.up("sm")]:{minHeight:64}},...s}}function zse(t){return Math.round(t*1e5)/1e5}const k_={textTransform:"uppercase"},C_='"Roboto", "Helvetica", "Arial", sans-serif';function Gse(t,s){const{fontFamily:r=C_,fontSize:a=14,fontWeightLight:n=300,fontWeightRegular:i=400,fontWeightMedium:l=500,fontWeightBold:o=700,htmlFontSize:c=16,allVariants:d,pxToRem:u,...m}=typeof s=="function"?s(t):s,p=a/14,x=u||(b=>`${b/c*p}rem`),g=(b,j,v,w,y)=>({fontFamily:r,fontWeight:b,fontSize:x(j),lineHeight:v,...r===C_?{letterSpacing:`${zse(w/j)}em`}:{},...y,...d}),f={h1:g(n,96,1.167,-1.5),h2:g(n,60,1.2,-.5),h3:g(i,48,1.167,0),h4:g(i,34,1.235,.25),h5:g(i,24,1.334,0),h6:g(l,20,1.6,.15),subtitle1:g(i,16,1.75,.15),subtitle2:g(l,14,1.57,.1),body1:g(i,16,1.5,.15),body2:g(i,14,1.43,.15),button:g(l,14,1.75,.4,k_),caption:g(i,12,1.66,.4),overline:g(i,12,2.66,1,k_),inherit:{fontFamily:"inherit",fontWeight:"inherit",fontSize:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}};return ca({htmlFontSize:c,pxToRem:x,fontFamily:r,fontSize:a,fontWeightLight:n,fontWeightRegular:i,fontWeightMedium:l,fontWeightBold:o,...f},m,{clone:!1})}const Kse=.2,Hse=.14,Yse=.12;function Os(...t){return[`${t[0]}px ${t[1]}px ${t[2]}px ${t[3]}px rgba(0,0,0,${Kse})`,`${t[4]}px ${t[5]}px ${t[6]}px ${t[7]}px rgba(0,0,0,${Hse})`,`${t[8]}px ${t[9]}px ${t[10]}px ${t[11]}px rgba(0,0,0,${Yse})`].join(",")}const Qse=["none",Os(0,2,1,-1,0,1,1,0,0,1,3,0),Os(0,3,1,-2,0,2,2,0,0,1,5,0),Os(0,3,3,-2,0,3,4,0,0,1,8,0),Os(0,2,4,-1,0,4,5,0,0,1,10,0),Os(0,3,5,-1,0,5,8,0,0,1,14,0),Os(0,3,5,-1,0,6,10,0,0,1,18,0),Os(0,4,5,-2,0,7,10,1,0,2,16,1),Os(0,5,5,-3,0,8,10,1,0,3,14,2),Os(0,5,6,-3,0,9,12,1,0,3,16,2),Os(0,6,6,-3,0,10,14,1,0,4,18,3),Os(0,6,7,-4,0,11,15,1,0,4,20,3),Os(0,7,8,-4,0,12,17,2,0,5,22,4),Os(0,7,8,-4,0,13,19,2,0,5,24,4),Os(0,7,9,-4,0,14,21,2,0,5,26,4),Os(0,8,9,-5,0,15,22,2,0,6,28,5),Os(0,8,10,-5,0,16,24,2,0,6,30,5),Os(0,8,11,-5,0,17,26,2,0,6,32,5),Os(0,9,11,-5,0,18,28,2,0,7,34,6),Os(0,9,12,-6,0,19,29,2,0,7,36,6),Os(0,10,13,-6,0,20,31,3,0,8,38,7),Os(0,10,13,-6,0,21,33,3,0,8,40,7),Os(0,10,14,-6,0,22,35,3,0,8,42,7),Os(0,11,14,-7,0,23,36,3,0,9,44,8),Os(0,11,15,-7,0,24,38,3,0,9,46,8)],Jse={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},Zse={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function S_(t){return`${Math.round(t)}ms`}function Xse(t){if(!t)return 0;const s=t/36;return Math.min(Math.round((4+15*s**.25+s/5)*10),3e3)}function ere(t){const s={...Jse,...t.easing},r={...Zse,...t.duration};return{getAutoHeightDuration:Xse,create:(n=["all"],i={})=>{const{duration:l=r.standard,easing:o=s.easeInOut,delay:c=0,...d}=i;return(Array.isArray(n)?n:[n]).map(u=>`${u} ${typeof l=="string"?l:S_(l)} ${o} ${typeof c=="string"?c:S_(c)}`).join(",")},...t,easing:s,duration:r}}const tre={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500};function sre(t){return Ei(t)||typeof t>"u"||typeof t=="string"||typeof t=="boolean"||typeof t=="number"||Array.isArray(t)}function hM(t={}){const s={...t};function r(a){const n=Object.entries(a);for(let i=0;i<n.length;i++){const[l,o]=n[i];!sre(o)||l.startsWith("unstable_")?delete a[l]:Ei(o)&&(a[l]={...o},r(a[l]))}}return r(s),`import { unstable_createBreakpoints as createBreakpoints, createTransitions } from '@mui/material/styles';

const theme = ${JSON.stringify(s,null,2)};

theme.breakpoints = createBreakpoints(theme.breakpoints || {});
theme.transitions = createTransitions(theme.transitions || {});

export default theme;`}function __(t){return typeof t=="number"?`${(t*100).toFixed(0)}%`:`calc((${t}) * 100%)`}const rre=t=>{if(!Number.isNaN(+t))return+t;const s=t.match(/\d*\.?\d+/g);if(!s)return 0;let r=0;for(let a=0;a<s.length;a+=1)r+=+s[a];return r};function are(t){Object.assign(t,{alpha(s,r){const a=this||t;return a.colorSpace?`oklch(from ${s} l c h / ${typeof r=="string"?`calc(${r})`:r})`:a.vars?`rgba(${s.replace(/var\(--([^,\s)]+)(?:,[^)]+)?\)+/g,"var(--$1Channel)")} / ${typeof r=="string"?`calc(${r})`:r})`:Xg(s,rre(r))},lighten(s,r){const a=this||t;return a.colorSpace?`color-mix(in ${a.colorSpace}, ${s}, #fff ${__(r)})`:Oy(s,r)},darken(s,r){const a=this||t;return a.colorSpace?`color-mix(in ${a.colorSpace}, ${s}, #000 ${__(r)})`:Fy(s,r)}})}function Zw(t={},...s){const{breakpoints:r,mixins:a={},spacing:n,palette:i={},transitions:l={},typography:o={},shape:c,colorSpace:d,...u}=t;if(t.vars&&t.generateThemeVars===void 0)throw new Error(_l(20));const m=H2({...i,colorSpace:d}),p=z2(t);let x=ca(p,{mixins:Wse(p.breakpoints,a),palette:m,shadows:Qse.slice(),typography:Gse(m,o),transitions:ere(l),zIndex:{...tre}});return x=ca(x,u),x=s.reduce((g,f)=>ca(g,f),x),x.unstable_sxConfig={...W0,...u==null?void 0:u.unstable_sxConfig},x.unstable_sx=function(f){return ed({sx:f,theme:this})},x.toRuntimeSource=hM,are(x),x}function Xw(t){let s;return t<1?s=5.11916*t**2:s=4.5*Math.log(t+1)+2,Math.round(s*10)/1e3}const nre=[...Array(25)].map((t,s)=>{if(s===0)return"none";const r=Xw(s);return`linear-gradient(rgba(255 255 255 / ${r}), rgba(255 255 255 / ${r}))`});function pM(t){return{inputPlaceholder:t==="dark"?.5:.42,inputUnderline:t==="dark"?.7:.42,switchTrackDisabled:t==="dark"?.2:.12,switchTrack:t==="dark"?.3:.38}}function xM(t){return t==="dark"?nre:[]}function ire(t){const{palette:s={mode:"light"},opacity:r,overlays:a,colorSpace:n,...i}=t,l=H2({...s,colorSpace:n});return{palette:l,opacity:{...pM(l.mode),...r},overlays:a||xM(l.mode),...i}}function lre(t){var s;return!!t[0].match(/(cssVarPrefix|colorSchemeSelector|modularCssLayers|rootSelector|typography|mixins|breakpoints|direction|transitions)/)||!!t[0].match(/sxConfig$/)||t[0]==="palette"&&!!((s=t[1])!=null&&s.match(/(mode|contrastThreshold|tonalOffset)/))}const ore=t=>[...[...Array(25)].map((s,r)=>`--${t?`${t}-`:""}overlays-${r}`),`--${t?`${t}-`:""}palette-AppBar-darkBg`,`--${t?`${t}-`:""}palette-AppBar-darkColor`],cre=t=>(s,r)=>{const a=t.rootSelector||":root",n=t.colorSchemeSelector;let i=n;if(n==="class"&&(i=".%s"),n==="data"&&(i="[data-%s]"),n!=null&&n.startsWith("data-")&&!n.includes("%s")&&(i=`[${n}="%s"]`),t.defaultColorScheme===s){if(s==="dark"){const l={};return ore(t.cssVarPrefix).forEach(o=>{l[o]=r[o],delete r[o]}),i==="media"?{[a]:r,"@media (prefers-color-scheme: dark)":{[a]:l}}:i?{[i.replace("%s",s)]:l,[`${a}, ${i.replace("%s",s)}`]:r}:{[a]:{...r,...l}}}if(i&&i!=="media")return`${a}, ${i.replace("%s",String(s))}`}else if(s){if(i==="media")return{[`@media (prefers-color-scheme: ${String(s)})`]:{[a]:r}};if(i)return i.replace("%s",String(s))}return a};function dre(t,s){s.forEach(r=>{t[r]||(t[r]={})})}function ve(t,s,r){!t[s]&&r&&(t[s]=r)}function Zm(t){return typeof t!="string"||!t.startsWith("hsl")?t:cM(t)}function Qi(t,s){`${s}Channel`in t||(t[`${s}Channel`]=Jm(Zm(t[s])))}function ure(t){return typeof t=="number"?`${t}px`:typeof t=="string"||typeof t=="function"||Array.isArray(t)?t:"8px"}const gi=t=>{try{return t()}catch{}},mre=(t="mui")=>Pse(t);function yv(t,s,r,a,n){if(!r)return;r=r===!0?{}:r;const i=n==="dark"?"dark":"light";if(!a){s[n]=ire({...r,palette:{mode:i,...r==null?void 0:r.palette},colorSpace:t});return}const{palette:l,...o}=Zw({...a,palette:{mode:i,...r==null?void 0:r.palette},colorSpace:t});return s[n]={...r,palette:l,opacity:{...pM(i),...r==null?void 0:r.opacity},overlays:(r==null?void 0:r.overlays)||xM(i)},o}function hre(t={},...s){const{colorSchemes:r={light:!0},defaultColorScheme:a,disableCssColorScheme:n=!1,cssVarPrefix:i="mui",nativeColor:l=!1,shouldSkipGeneratingVar:o=lre,colorSchemeSelector:c=r.light&&r.dark?"media":void 0,rootSelector:d=":root",...u}=t,m=Object.keys(r)[0],p=a||(r.light&&m!=="light"?"light":m),x=mre(i),{[p]:g,light:f,dark:b,...j}=r,v={...j};let w=g;if((p==="dark"&&!("dark"in r)||p==="light"&&!("light"in r))&&(w=!0),!w)throw new Error(_l(21,p));let y;l&&(y="oklch");const C=yv(y,v,w,u,p);f&&!v.light&&yv(y,v,f,void 0,"light"),b&&!v.dark&&yv(y,v,b,void 0,"dark");let S={defaultColorScheme:p,...C,cssVarPrefix:i,colorSchemeSelector:c,rootSelector:d,getCssVar:x,colorSchemes:v,font:{...qse(C.typography),...C.font},spacing:ure(u.spacing)};Object.keys(S.colorSchemes).forEach(I=>{const N=S.colorSchemes[I].palette,P=D=>{const $=D.split("-"),L=$[1],B=$[2];return x(D,N[L][B])};N.mode==="light"&&(ve(N.common,"background","#fff"),ve(N.common,"onBackground","#000")),N.mode==="dark"&&(ve(N.common,"background","#000"),ve(N.common,"onBackground","#fff"));function k(D,$,L){if(y){let B;return D===tc&&(B=`transparent ${((1-L)*100).toFixed(0)}%`),D===os&&(B=`#000 ${(L*100).toFixed(0)}%`),D===cs&&(B=`#fff ${(L*100).toFixed(0)}%`),`color-mix(in ${y}, ${$}, ${B})`}return D($,L)}if(dre(N,["Alert","AppBar","Avatar","Button","Chip","FilledInput","LinearProgress","Skeleton","Slider","SnackbarContent","SpeedDialAction","StepConnector","StepContent","Switch","TableCell","Tooltip"]),N.mode==="light"){ve(N.Alert,"errorColor",k(os,N.error.light,.6)),ve(N.Alert,"infoColor",k(os,N.info.light,.6)),ve(N.Alert,"successColor",k(os,N.success.light,.6)),ve(N.Alert,"warningColor",k(os,N.warning.light,.6)),ve(N.Alert,"errorFilledBg",P("palette-error-main")),ve(N.Alert,"infoFilledBg",P("palette-info-main")),ve(N.Alert,"successFilledBg",P("palette-success-main")),ve(N.Alert,"warningFilledBg",P("palette-warning-main")),ve(N.Alert,"errorFilledColor",gi(()=>N.getContrastText(N.error.main))),ve(N.Alert,"infoFilledColor",gi(()=>N.getContrastText(N.info.main))),ve(N.Alert,"successFilledColor",gi(()=>N.getContrastText(N.success.main))),ve(N.Alert,"warningFilledColor",gi(()=>N.getContrastText(N.warning.main))),ve(N.Alert,"errorStandardBg",k(cs,N.error.light,.9)),ve(N.Alert,"infoStandardBg",k(cs,N.info.light,.9)),ve(N.Alert,"successStandardBg",k(cs,N.success.light,.9)),ve(N.Alert,"warningStandardBg",k(cs,N.warning.light,.9)),ve(N.Alert,"errorIconColor",P("palette-error-main")),ve(N.Alert,"infoIconColor",P("palette-info-main")),ve(N.Alert,"successIconColor",P("palette-success-main")),ve(N.Alert,"warningIconColor",P("palette-warning-main")),ve(N.AppBar,"defaultBg",P("palette-grey-100")),ve(N.Avatar,"defaultBg",P("palette-grey-400")),ve(N.Button,"inheritContainedBg",P("palette-grey-300")),ve(N.Button,"inheritContainedHoverBg",P("palette-grey-A100")),ve(N.Chip,"defaultBorder",P("palette-grey-400")),ve(N.Chip,"defaultAvatarColor",P("palette-grey-700")),ve(N.Chip,"defaultIconColor",P("palette-grey-700")),ve(N.FilledInput,"bg","rgba(0, 0, 0, 0.06)"),ve(N.FilledInput,"hoverBg","rgba(0, 0, 0, 0.09)"),ve(N.FilledInput,"disabledBg","rgba(0, 0, 0, 0.12)"),ve(N.LinearProgress,"primaryBg",k(cs,N.primary.main,.62)),ve(N.LinearProgress,"secondaryBg",k(cs,N.secondary.main,.62)),ve(N.LinearProgress,"errorBg",k(cs,N.error.main,.62)),ve(N.LinearProgress,"infoBg",k(cs,N.info.main,.62)),ve(N.LinearProgress,"successBg",k(cs,N.success.main,.62)),ve(N.LinearProgress,"warningBg",k(cs,N.warning.main,.62)),ve(N.Skeleton,"bg",y?k(tc,N.text.primary,.11):`rgba(${P("palette-text-primaryChannel")} / 0.11)`),ve(N.Slider,"primaryTrack",k(cs,N.primary.main,.62)),ve(N.Slider,"secondaryTrack",k(cs,N.secondary.main,.62)),ve(N.Slider,"errorTrack",k(cs,N.error.main,.62)),ve(N.Slider,"infoTrack",k(cs,N.info.main,.62)),ve(N.Slider,"successTrack",k(cs,N.success.main,.62)),ve(N.Slider,"warningTrack",k(cs,N.warning.main,.62));const D=y?k(os,N.background.default,.6825):Qp(N.background.default,.8);ve(N.SnackbarContent,"bg",D),ve(N.SnackbarContent,"color",gi(()=>y?Jw.text.primary:N.getContrastText(D))),ve(N.SpeedDialAction,"fabHoverBg",Qp(N.background.paper,.15)),ve(N.StepConnector,"border",P("palette-grey-400")),ve(N.StepContent,"border",P("palette-grey-400")),ve(N.Switch,"defaultColor",P("palette-common-white")),ve(N.Switch,"defaultDisabledColor",P("palette-grey-100")),ve(N.Switch,"primaryDisabledColor",k(cs,N.primary.main,.62)),ve(N.Switch,"secondaryDisabledColor",k(cs,N.secondary.main,.62)),ve(N.Switch,"errorDisabledColor",k(cs,N.error.main,.62)),ve(N.Switch,"infoDisabledColor",k(cs,N.info.main,.62)),ve(N.Switch,"successDisabledColor",k(cs,N.success.main,.62)),ve(N.Switch,"warningDisabledColor",k(cs,N.warning.main,.62)),ve(N.TableCell,"border",k(cs,k(tc,N.divider,1),.88)),ve(N.Tooltip,"bg",k(tc,N.grey[700],.92))}if(N.mode==="dark"){ve(N.Alert,"errorColor",k(cs,N.error.light,.6)),ve(N.Alert,"infoColor",k(cs,N.info.light,.6)),ve(N.Alert,"successColor",k(cs,N.success.light,.6)),ve(N.Alert,"warningColor",k(cs,N.warning.light,.6)),ve(N.Alert,"errorFilledBg",P("palette-error-dark")),ve(N.Alert,"infoFilledBg",P("palette-info-dark")),ve(N.Alert,"successFilledBg",P("palette-success-dark")),ve(N.Alert,"warningFilledBg",P("palette-warning-dark")),ve(N.Alert,"errorFilledColor",gi(()=>N.getContrastText(N.error.dark))),ve(N.Alert,"infoFilledColor",gi(()=>N.getContrastText(N.info.dark))),ve(N.Alert,"successFilledColor",gi(()=>N.getContrastText(N.success.dark))),ve(N.Alert,"warningFilledColor",gi(()=>N.getContrastText(N.warning.dark))),ve(N.Alert,"errorStandardBg",k(os,N.error.light,.9)),ve(N.Alert,"infoStandardBg",k(os,N.info.light,.9)),ve(N.Alert,"successStandardBg",k(os,N.success.light,.9)),ve(N.Alert,"warningStandardBg",k(os,N.warning.light,.9)),ve(N.Alert,"errorIconColor",P("palette-error-main")),ve(N.Alert,"infoIconColor",P("palette-info-main")),ve(N.Alert,"successIconColor",P("palette-success-main")),ve(N.Alert,"warningIconColor",P("palette-warning-main")),ve(N.AppBar,"defaultBg",P("palette-grey-900")),ve(N.AppBar,"darkBg",P("palette-background-paper")),ve(N.AppBar,"darkColor",P("palette-text-primary")),ve(N.Avatar,"defaultBg",P("palette-grey-600")),ve(N.Button,"inheritContainedBg",P("palette-grey-800")),ve(N.Button,"inheritContainedHoverBg",P("palette-grey-700")),ve(N.Chip,"defaultBorder",P("palette-grey-700")),ve(N.Chip,"defaultAvatarColor",P("palette-grey-300")),ve(N.Chip,"defaultIconColor",P("palette-grey-300")),ve(N.FilledInput,"bg","rgba(255, 255, 255, 0.09)"),ve(N.FilledInput,"hoverBg","rgba(255, 255, 255, 0.13)"),ve(N.FilledInput,"disabledBg","rgba(255, 255, 255, 0.12)"),ve(N.LinearProgress,"primaryBg",k(os,N.primary.main,.5)),ve(N.LinearProgress,"secondaryBg",k(os,N.secondary.main,.5)),ve(N.LinearProgress,"errorBg",k(os,N.error.main,.5)),ve(N.LinearProgress,"infoBg",k(os,N.info.main,.5)),ve(N.LinearProgress,"successBg",k(os,N.success.main,.5)),ve(N.LinearProgress,"warningBg",k(os,N.warning.main,.5)),ve(N.Skeleton,"bg",y?k(tc,N.text.primary,.13):`rgba(${P("palette-text-primaryChannel")} / 0.13)`),ve(N.Slider,"primaryTrack",k(os,N.primary.main,.5)),ve(N.Slider,"secondaryTrack",k(os,N.secondary.main,.5)),ve(N.Slider,"errorTrack",k(os,N.error.main,.5)),ve(N.Slider,"infoTrack",k(os,N.info.main,.5)),ve(N.Slider,"successTrack",k(os,N.success.main,.5)),ve(N.Slider,"warningTrack",k(os,N.warning.main,.5));const D=y?k(cs,N.background.default,.985):Qp(N.background.default,.98);ve(N.SnackbarContent,"bg",D),ve(N.SnackbarContent,"color",gi(()=>y?uM.text.primary:N.getContrastText(D))),ve(N.SpeedDialAction,"fabHoverBg",Qp(N.background.paper,.15)),ve(N.StepConnector,"border",P("palette-grey-600")),ve(N.StepContent,"border",P("palette-grey-600")),ve(N.Switch,"defaultColor",P("palette-grey-300")),ve(N.Switch,"defaultDisabledColor",P("palette-grey-600")),ve(N.Switch,"primaryDisabledColor",k(os,N.primary.main,.55)),ve(N.Switch,"secondaryDisabledColor",k(os,N.secondary.main,.55)),ve(N.Switch,"errorDisabledColor",k(os,N.error.main,.55)),ve(N.Switch,"infoDisabledColor",k(os,N.info.main,.55)),ve(N.Switch,"successDisabledColor",k(os,N.success.main,.55)),ve(N.Switch,"warningDisabledColor",k(os,N.warning.main,.55)),ve(N.TableCell,"border",k(os,k(tc,N.divider,1),.68)),ve(N.Tooltip,"bg",k(tc,N.grey[700],.92))}Qi(N.background,"default"),Qi(N.background,"paper"),Qi(N.common,"background"),Qi(N.common,"onBackground"),Qi(N,"divider"),Object.keys(N).forEach(D=>{const $=N[D];D!=="tonalOffset"&&$&&typeof $=="object"&&($.main&&ve(N[D],"mainChannel",Jm(Zm($.main))),$.light&&ve(N[D],"lightChannel",Jm(Zm($.light))),$.dark&&ve(N[D],"darkChannel",Jm(Zm($.dark))),$.contrastText&&ve(N[D],"contrastTextChannel",Jm(Zm($.contrastText))),D==="text"&&(Qi(N[D],"primary"),Qi(N[D],"secondary")),D==="action"&&($.active&&Qi(N[D],"active"),$.selected&&Qi(N[D],"selected")))})}),S=s.reduce((I,N)=>ca(I,N),S);const _={prefix:i,disableCssColorScheme:n,shouldSkipGeneratingVar:o,getSelector:cre(S),enableContrastVars:l},{vars:E,generateThemeVars:A,generateStyleSheets:R}=Ise(S,_);return S.vars=E,Object.entries(S.colorSchemes[S.defaultColorScheme]).forEach(([I,N])=>{S[I]=N}),S.generateThemeVars=A,S.generateStyleSheets=R,S.generateSpacing=function(){return aM(u.spacing,q2(this))},S.getColorSchemeSelector=Mse(c),S.spacing=S.generateSpacing(),S.shouldSkipGeneratingVar=o,S.unstable_sxConfig={...W0,...u==null?void 0:u.unstable_sxConfig},S.unstable_sx=function(N){return ed({sx:N,theme:this})},S.toRuntimeSource=hM,S}function E_(t,s,r){t.colorSchemes&&r&&(t.colorSchemes[s]={...r!==!0&&r,palette:H2({...r===!0?{}:r.palette,mode:s})})}function gM(t={},...s){const{palette:r,cssVariables:a=!1,colorSchemes:n=r?void 0:{light:!0},defaultColorScheme:i=r==null?void 0:r.mode,...l}=t,o=i||"light",c=n==null?void 0:n[o],d={...n,...r?{[o]:{...typeof c!="boolean"&&c,palette:r}}:void 0};if(a===!1){if(!("colorSchemes"in t))return Zw(t,...s);let u=r;"palette"in t||d[o]&&(d[o]!==!0?u=d[o].palette:o==="dark"&&(u={mode:"dark"}));const m=Zw({...t,palette:u},...s);return m.defaultColorScheme=o,m.colorSchemes=d,m.palette.mode==="light"&&(m.colorSchemes.light={...d.light!==!0&&d.light,palette:m.palette},E_(m,"dark",d.dark)),m.palette.mode==="dark"&&(m.colorSchemes.dark={...d.dark!==!0&&d.dark,palette:m.palette},E_(m,"light",d.light)),m}return!r&&!("light"in d)&&o==="light"&&(d.light=!0),hre({...l,colorSchemes:d,defaultColorScheme:o,...typeof a!="boolean"&&a},...s)}const Y2=gM();function cm(){const t=G2(Y2);return t[ay]||t}function fM(t){return t!=="ownerState"&&t!=="theme"&&t!=="sx"&&t!=="as"}const qn=t=>fM(t)&&t!=="classes",Pe=pse({themeId:ay,defaultTheme:Y2,rootShouldForwardProp:qn});function A_(...t){return t.reduce((s,r)=>r==null?s:function(...n){s.apply(this,n),r.apply(this,n)},()=>{})}function pre(t){return e.jsx(ise,{...t,defaultTheme:Y2,themeId:ay})}function xre(t){return function(r){return e.jsx(pre,{styles:typeof t=="function"?a=>t({theme:a,...r}):t})}}function gre(){return nM}const Et=Tse;function kt(t){return _se(t)}function fre(t){return yt("MuiSvgIcon",t)}gt("MuiSvgIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]);const yre=t=>{const{color:s,fontSize:r,classes:a}=t,n={root:["root",s!=="inherit"&&`color${_e(s)}`,`fontSize${_e(r)}`]};return bt(n,fre,a)},bre=Pe("svg",{name:"MuiSvgIcon",slot:"Root",overridesResolver:(t,s)=>{const{ownerState:r}=t;return[s.root,r.color!=="inherit"&&s[`color${_e(r.color)}`],s[`fontSize${_e(r.fontSize)}`]]}})(Et(({theme:t})=>{var s,r,a,n,i,l,o,c,d,u,m,p,x,g;return{userSelect:"none",width:"1em",height:"1em",display:"inline-block",flexShrink:0,transition:(n=(s=t.transitions)==null?void 0:s.create)==null?void 0:n.call(s,"fill",{duration:(a=(r=(t.vars??t).transitions)==null?void 0:r.duration)==null?void 0:a.shorter}),variants:[{props:f=>!f.hasSvgAsChild,style:{fill:"currentColor"}},{props:{fontSize:"inherit"},style:{fontSize:"inherit"}},{props:{fontSize:"small"},style:{fontSize:((l=(i=t.typography)==null?void 0:i.pxToRem)==null?void 0:l.call(i,20))||"1.25rem"}},{props:{fontSize:"medium"},style:{fontSize:((c=(o=t.typography)==null?void 0:o.pxToRem)==null?void 0:c.call(o,24))||"1.5rem"}},{props:{fontSize:"large"},style:{fontSize:((u=(d=t.typography)==null?void 0:d.pxToRem)==null?void 0:u.call(d,35))||"2.1875rem"}},...Object.entries((t.vars??t).palette).filter(([,f])=>f&&f.main).map(([f])=>{var b,j;return{props:{color:f},style:{color:(j=(b=(t.vars??t).palette)==null?void 0:b[f])==null?void 0:j.main}}}),{props:{color:"action"},style:{color:(p=(m=(t.vars??t).palette)==null?void 0:m.action)==null?void 0:p.active}},{props:{color:"disabled"},style:{color:(g=(x=(t.vars??t).palette)==null?void 0:x.action)==null?void 0:g.disabled}},{props:{color:"inherit"},style:{color:void 0}}]}})),eN=h.forwardRef(function(s,r){const a=kt({props:s,name:"MuiSvgIcon"}),{children:n,className:i,color:l="inherit",component:o="svg",fontSize:c="medium",htmlColor:d,inheritViewBox:u=!1,titleAccess:m,viewBox:p="0 0 24 24",...x}=a,g=h.isValidElement(n)&&n.type==="svg",f={...a,color:l,component:o,fontSize:c,instanceFontSize:s.fontSize,inheritViewBox:u,viewBox:p,hasSvgAsChild:g},b={};u||(b.viewBox=p);const j=yre(f);return e.jsxs(bre,{as:o,className:oe(j.root,i),focusable:"false",color:d,"aria-hidden":m?void 0:!0,role:m?"img":void 0,ref:r,...b,...x,...g&&n.props,ownerState:f,children:[g?n.props.children:n,m?e.jsx("title",{children:m}):null]})});eN.muiName="SvgIcon";function Wn(t,s){function r(a,n){return e.jsx(eN,{"data-testid":void 0,ref:n,...a,children:t})}return r.muiName=eN.muiName,h.memo(h.forwardRef(r))}function By(t,s=166){let r;function a(...n){const i=()=>{t.apply(this,n)};clearTimeout(r),r=setTimeout(i,s)}return a.clear=()=>{clearTimeout(r)},a}function za(t){return t&&t.ownerDocument||document}function mi(t){return za(t).defaultView||window}function T_(t,s){typeof t=="function"?t(s):t&&(t.current=s)}function ef(t){const{controlled:s,default:r,name:a,state:n="value"}=t,{current:i}=h.useRef(s!==void 0),[l,o]=h.useState(r),c=i?s:l,d=h.useCallback(u=>{i||o(u)},[]);return[c,d]}function Pn(t){const s=h.useRef(t);return $i(()=>{s.current=t}),h.useRef((...r)=>(0,s.current)(...r)).current}function Br(...t){const s=h.useRef(void 0),r=h.useCallback(a=>{const n=t.map(i=>{if(i==null)return null;if(typeof i=="function"){const l=i,o=l(a);return typeof o=="function"?o:()=>{l(null)}}return i.current=a,()=>{i.current=null}});return()=>{n.forEach(i=>i==null?void 0:i())}},t);return h.useMemo(()=>t.every(a=>a==null)?null:a=>{s.current&&(s.current(),s.current=void 0),a!=null&&(s.current=r(a))},t)}function vre(t,s){const r=t.charCodeAt(2);return t[0]==="o"&&t[1]==="n"&&r>=65&&r<=90&&typeof s=="function"}function jre(t,s){if(!t)return s;function r(l,o){const c={};return Object.keys(o).forEach(d=>{vre(d,o[d])&&typeof l[d]=="function"&&(c[d]=(...u)=>{l[d](...u),o[d](...u)})}),c}if(typeof t=="function"||typeof s=="function")return l=>{const o=typeof s=="function"?s(l):s,c=typeof t=="function"?t({...l,...o}):t,d=oe(l==null?void 0:l.className,o==null?void 0:o.className,c==null?void 0:c.className),u=r(c,o);return{...o,...c,...u,...!!d&&{className:d},...(o==null?void 0:o.style)&&(c==null?void 0:c.style)&&{style:{...o.style,...c.style}},...(o==null?void 0:o.sx)&&(c==null?void 0:c.sx)&&{sx:[...Array.isArray(o.sx)?o.sx:[o.sx],...Array.isArray(c.sx)?c.sx:[c.sx]]}}};const a=s,n=r(t,a),i=oe(a==null?void 0:a.className,t==null?void 0:t.className);return{...s,...t,...n,...!!i&&{className:i},...(a==null?void 0:a.style)&&(t==null?void 0:t.style)&&{style:{...a.style,...t.style}},...(a==null?void 0:a.sx)&&(t==null?void 0:t.sx)&&{sx:[...Array.isArray(a.sx)?a.sx:[a.sx],...Array.isArray(t.sx)?t.sx:[t.sx]]}}}function yM(t,s){if(t==null)return{};var r={};for(var a in t)if({}.hasOwnProperty.call(t,a)){if(s.indexOf(a)!==-1)continue;r[a]=t[a]}return r}function tN(t,s){return tN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},tN(t,s)}function bM(t,s){t.prototype=Object.create(s.prototype),t.prototype.constructor=t,tN(t,s)}const P_={disabled:!1},tf=ds.createContext(null);var wre=function(s){return s.scrollTop},Xm="unmounted",cc="exited",dc="entering",Md="entered",sN="exiting",zi=function(t){bM(s,t);function s(a,n){var i;i=t.call(this,a,n)||this;var l=n,o=l&&!l.isMounting?a.enter:a.appear,c;return i.appearStatus=null,a.in?o?(c=cc,i.appearStatus=dc):c=Md:a.unmountOnExit||a.mountOnEnter?c=Xm:c=cc,i.state={status:c},i.nextCallback=null,i}s.getDerivedStateFromProps=function(n,i){var l=n.in;return l&&i.status===Xm?{status:cc}:null};var r=s.prototype;return r.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},r.componentDidUpdate=function(n){var i=null;if(n!==this.props){var l=this.state.status;this.props.in?l!==dc&&l!==Md&&(i=dc):(l===dc||l===Md)&&(i=sN)}this.updateStatus(!1,i)},r.componentWillUnmount=function(){this.cancelNextCallback()},r.getTimeouts=function(){var n=this.props.timeout,i,l,o;return i=l=o=n,n!=null&&typeof n!="number"&&(i=n.exit,l=n.enter,o=n.appear!==void 0?n.appear:l),{exit:i,enter:l,appear:o}},r.updateStatus=function(n,i){if(n===void 0&&(n=!1),i!==null)if(this.cancelNextCallback(),i===dc){if(this.props.unmountOnExit||this.props.mountOnEnter){var l=this.props.nodeRef?this.props.nodeRef.current:bp.findDOMNode(this);l&&wre(l)}this.performEnter(n)}else this.performExit();else this.props.unmountOnExit&&this.state.status===cc&&this.setState({status:Xm})},r.performEnter=function(n){var i=this,l=this.props.enter,o=this.context?this.context.isMounting:n,c=this.props.nodeRef?[o]:[bp.findDOMNode(this),o],d=c[0],u=c[1],m=this.getTimeouts(),p=o?m.appear:m.enter;if(!n&&!l||P_.disabled){this.safeSetState({status:Md},function(){i.props.onEntered(d)});return}this.props.onEnter(d,u),this.safeSetState({status:dc},function(){i.props.onEntering(d,u),i.onTransitionEnd(p,function(){i.safeSetState({status:Md},function(){i.props.onEntered(d,u)})})})},r.performExit=function(){var n=this,i=this.props.exit,l=this.getTimeouts(),o=this.props.nodeRef?void 0:bp.findDOMNode(this);if(!i||P_.disabled){this.safeSetState({status:cc},function(){n.props.onExited(o)});return}this.props.onExit(o),this.safeSetState({status:sN},function(){n.props.onExiting(o),n.onTransitionEnd(l.exit,function(){n.safeSetState({status:cc},function(){n.props.onExited(o)})})})},r.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},r.safeSetState=function(n,i){i=this.setNextCallback(i),this.setState(n,i)},r.setNextCallback=function(n){var i=this,l=!0;return this.nextCallback=function(o){l&&(l=!1,i.nextCallback=null,n(o))},this.nextCallback.cancel=function(){l=!1},this.nextCallback},r.onTransitionEnd=function(n,i){this.setNextCallback(i);var l=this.props.nodeRef?this.props.nodeRef.current:bp.findDOMNode(this),o=n==null&&!this.props.addEndListener;if(!l||o){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var c=this.props.nodeRef?[this.nextCallback]:[l,this.nextCallback],d=c[0],u=c[1];this.props.addEndListener(d,u)}n!=null&&setTimeout(this.nextCallback,n)},r.render=function(){var n=this.state.status;if(n===Xm)return null;var i=this.props,l=i.children;i.in,i.mountOnEnter,i.unmountOnExit,i.appear,i.enter,i.exit,i.timeout,i.addEndListener,i.onEnter,i.onEntering,i.onEntered,i.onExit,i.onExiting,i.onExited,i.nodeRef;var o=yM(i,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return ds.createElement(tf.Provider,{value:null},typeof l=="function"?l(n,o):ds.cloneElement(ds.Children.only(l),o))},s}(ds.Component);zi.contextType=tf;zi.propTypes={};function Ed(){}zi.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:Ed,onEntering:Ed,onEntered:Ed,onExit:Ed,onExiting:Ed,onExited:Ed};zi.UNMOUNTED=Xm;zi.EXITED=cc;zi.ENTERING=dc;zi.ENTERED=Md;zi.EXITING=sN;function Nre(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Q2(t,s){var r=function(i){return s&&h.isValidElement(i)?s(i):i},a=Object.create(null);return t&&h.Children.map(t,function(n){return n}).forEach(function(n){a[n.key]=r(n)}),a}function kre(t,s){t=t||{},s=s||{};function r(u){return u in s?s[u]:t[u]}var a=Object.create(null),n=[];for(var i in t)i in s?n.length&&(a[i]=n,n=[]):n.push(i);var l,o={};for(var c in s){if(a[c])for(l=0;l<a[c].length;l++){var d=a[c][l];o[a[c][l]]=r(d)}o[c]=r(c)}for(l=0;l<n.length;l++)o[n[l]]=r(n[l]);return o}function Sc(t,s,r){return r[s]!=null?r[s]:t.props[s]}function Cre(t,s){return Q2(t.children,function(r){return h.cloneElement(r,{onExited:s.bind(null,r),in:!0,appear:Sc(r,"appear",t),enter:Sc(r,"enter",t),exit:Sc(r,"exit",t)})})}function Sre(t,s,r){var a=Q2(t.children),n=kre(s,a);return Object.keys(n).forEach(function(i){var l=n[i];if(h.isValidElement(l)){var o=i in s,c=i in a,d=s[i],u=h.isValidElement(d)&&!d.props.in;c&&(!o||u)?n[i]=h.cloneElement(l,{onExited:r.bind(null,l),in:!0,exit:Sc(l,"exit",t),enter:Sc(l,"enter",t)}):!c&&o&&!u?n[i]=h.cloneElement(l,{in:!1}):c&&o&&h.isValidElement(d)&&(n[i]=h.cloneElement(l,{onExited:r.bind(null,l),in:d.props.in,exit:Sc(l,"exit",t),enter:Sc(l,"enter",t)}))}}),n}var _re=Object.values||function(t){return Object.keys(t).map(function(s){return t[s]})},Ere={component:"div",childFactory:function(s){return s}},J2=function(t){bM(s,t);function s(a,n){var i;i=t.call(this,a,n)||this;var l=i.handleExited.bind(Nre(i));return i.state={contextValue:{isMounting:!0},handleExited:l,firstRender:!0},i}var r=s.prototype;return r.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},r.componentWillUnmount=function(){this.mounted=!1},s.getDerivedStateFromProps=function(n,i){var l=i.children,o=i.handleExited,c=i.firstRender;return{children:c?Cre(n,o):Sre(n,l,o),firstRender:!1}},r.handleExited=function(n,i){var l=Q2(this.props.children);n.key in l||(n.props.onExited&&n.props.onExited(i),this.mounted&&this.setState(function(o){var c=Yg({},o.children);return delete c[n.key],{children:c}}))},r.render=function(){var n=this.props,i=n.component,l=n.childFactory,o=yM(n,["component","childFactory"]),c=this.state.contextValue,d=_re(this.state.children).map(l);return delete o.appear,delete o.enter,delete o.exit,i===null?ds.createElement(tf.Provider,{value:c},d):ds.createElement(tf.Provider,{value:c},ds.createElement(i,o,d))},s}(ds.Component);J2.propTypes={};J2.defaultProps=Ere;const R_={};function vM(t,s){const r=h.useRef(R_);return r.current===R_&&(r.current=t(s)),r}const Are=[];function Tre(t){h.useEffect(t,Are)}class $y{constructor(){xn(this,"currentId",null);xn(this,"clear",()=>{this.currentId!==null&&(clearTimeout(this.currentId),this.currentId=null)});xn(this,"disposeEffect",()=>this.clear)}static create(){return new $y}start(s,r){this.clear(),this.currentId=setTimeout(()=>{this.currentId=null,r()},s)}}function Zd(){const t=vM($y.create).current;return Tre(t.disposeEffect),t}const jM=t=>t.scrollTop;function sf(t,s){const{timeout:r,easing:a,style:n={}}=t;return{duration:n.transitionDuration??(typeof r=="number"?r:r[s.mode]||0),easing:n.transitionTimingFunction??(typeof a=="object"?a[s.mode]:a),delay:n.transitionDelay}}function rf(t){return typeof t=="string"}function wM(t,s,r){return t===void 0||rf(t)?s:{...s,ownerState:{...s.ownerState,...r}}}function NM(t,s,r){return typeof t=="function"?t(s,r):t}function kM(t,s=[]){if(t===void 0)return{};const r={};return Object.keys(t).filter(a=>a.match(/^on[A-Z]/)&&typeof t[a]=="function"&&!s.includes(a)).forEach(a=>{r[a]=t[a]}),r}function D_(t){if(t===void 0)return{};const s={};return Object.keys(t).filter(r=>!(r.match(/^on[A-Z]/)&&typeof t[r]=="function")).forEach(r=>{s[r]=t[r]}),s}function CM(t){const{getSlotProps:s,additionalProps:r,externalSlotProps:a,externalForwardedProps:n,className:i}=t;if(!s){const x=oe(r==null?void 0:r.className,i,n==null?void 0:n.className,a==null?void 0:a.className),g={...r==null?void 0:r.style,...n==null?void 0:n.style,...a==null?void 0:a.style},f={...r,...n,...a};return x.length>0&&(f.className=x),Object.keys(g).length>0&&(f.style=g),{props:f,internalRef:void 0}}const l=kM({...n,...a}),o=D_(a),c=D_(n),d=s(l),u=oe(d==null?void 0:d.className,r==null?void 0:r.className,i,n==null?void 0:n.className,a==null?void 0:a.className),m={...d==null?void 0:d.style,...r==null?void 0:r.style,...n==null?void 0:n.style,...a==null?void 0:a.style},p={...d,...r,...c,...o};return u.length>0&&(p.className=u),Object.keys(m).length>0&&(p.style=m),{props:p,internalRef:d.ref}}function Nt(t,s){const{className:r,elementType:a,ownerState:n,externalForwardedProps:i,internalForwardedProps:l,shouldForwardComponentProp:o=!1,...c}=s,{component:d,slots:u={[t]:void 0},slotProps:m={[t]:void 0},...p}=i,x=u[t]||a,g=NM(m[t],n),{props:{component:f,...b},internalRef:j}=CM({className:r,...c,externalForwardedProps:t==="root"?p:void 0,externalSlotProps:g}),v=Br(j,g==null?void 0:g.ref,s.ref),w=t==="root"?f||d:f,y=wM(x,{...t==="root"&&!d&&!u[t]&&l,...t!=="root"&&!u[t]&&l,...b,...w&&!o&&{as:w},...w&&o&&{component:w},ref:v},n);return[x,y]}function Pre(t){return yt("MuiPaper",t)}gt("MuiPaper",["root","rounded","outlined","elevation","elevation0","elevation1","elevation2","elevation3","elevation4","elevation5","elevation6","elevation7","elevation8","elevation9","elevation10","elevation11","elevation12","elevation13","elevation14","elevation15","elevation16","elevation17","elevation18","elevation19","elevation20","elevation21","elevation22","elevation23","elevation24"]);const Rre=t=>{const{square:s,elevation:r,variant:a,classes:n}=t,i={root:["root",a,!s&&"rounded",a==="elevation"&&`elevation${r}`]};return bt(i,Pre,n)},Dre=Pe("div",{name:"MuiPaper",slot:"Root",overridesResolver:(t,s)=>{const{ownerState:r}=t;return[s.root,s[r.variant],!r.square&&s.rounded,r.variant==="elevation"&&s[`elevation${r.elevation}`]]}})(Et(({theme:t})=>({backgroundColor:(t.vars||t).palette.background.paper,color:(t.vars||t).palette.text.primary,transition:t.transitions.create("box-shadow"),variants:[{props:({ownerState:s})=>!s.square,style:{borderRadius:t.shape.borderRadius}},{props:{variant:"outlined"},style:{border:`1px solid ${(t.vars||t).palette.divider}`}},{props:{variant:"elevation"},style:{boxShadow:"var(--Paper-shadow)",backgroundImage:"var(--Paper-overlay)"}}]}))),dm=h.forwardRef(function(s,r){var x;const a=kt({props:s,name:"MuiPaper"}),n=cm(),{className:i,component:l="div",elevation:o=1,square:c=!1,variant:d="elevation",...u}=a,m={...a,component:l,elevation:o,square:c,variant:d},p=Rre(m);return e.jsx(Dre,{as:l,ownerState:m,className:oe(p.root,i),ref:r,...u,style:{...d==="elevation"&&{"--Paper-shadow":(n.vars||n).shadows[o],...n.vars&&{"--Paper-overlay":(x=n.vars.overlays)==null?void 0:x[o]},...!n.vars&&n.palette.mode==="dark"&&{"--Paper-overlay":`linear-gradient(${Xg("#fff",Xw(o))}, ${Xg("#fff",Xw(o))})`}},...u.style}})});function af(t){try{return t.matches(":focus-visible")}catch{}return!1}class nf{constructor(){xn(this,"mountEffect",()=>{this.shouldMount&&!this.didMount&&this.ref.current!==null&&(this.didMount=!0,this.mounted.resolve())});this.ref={current:null},this.mounted=null,this.didMount=!1,this.shouldMount=!1,this.setShouldMount=null}static create(){return new nf}static use(){const s=vM(nf.create).current,[r,a]=h.useState(!1);return s.shouldMount=r,s.setShouldMount=a,h.useEffect(s.mountEffect,[r]),s}mount(){return this.mounted||(this.mounted=Mre(),this.shouldMount=!0,this.setShouldMount(this.shouldMount)),this.mounted}start(...s){this.mount().then(()=>{var r;return(r=this.ref.current)==null?void 0:r.start(...s)})}stop(...s){this.mount().then(()=>{var r;return(r=this.ref.current)==null?void 0:r.stop(...s)})}pulsate(...s){this.mount().then(()=>{var r;return(r=this.ref.current)==null?void 0:r.pulsate(...s)})}}function Ire(){return nf.use()}function Mre(){let t,s;const r=new Promise((a,n)=>{t=a,s=n});return r.resolve=t,r.reject=s,r}function Lre(t){const{className:s,classes:r,pulsate:a=!1,rippleX:n,rippleY:i,rippleSize:l,in:o,onExited:c,timeout:d}=t,[u,m]=h.useState(!1),p=oe(s,r.ripple,r.rippleVisible,a&&r.ripplePulsate),x={width:l,height:l,top:-(l/2)+i,left:-(l/2)+n},g=oe(r.child,u&&r.childLeaving,a&&r.childPulsate);return!o&&!u&&m(!0),h.useEffect(()=>{if(!o&&c!=null){const f=setTimeout(c,d);return()=>{clearTimeout(f)}}},[c,o,d]),e.jsx("span",{className:p,style:x,children:e.jsx("span",{className:g})})}const kn=gt("MuiTouchRipple",["root","ripple","rippleVisible","ripplePulsate","child","childLeaving","childPulsate"]),rN=550,Fre=80,Ore=U0`
  0% {
    transform: scale(0);
    opacity: 0.1;
  }

  100% {
    transform: scale(1);
    opacity: 0.3;
  }
`,Bre=U0`
  0% {
    opacity: 1;
  }

  100% {
    opacity: 0;
  }
`,$re=U0`
  0% {
    transform: scale(1);
  }

  50% {
    transform: scale(0.92);
  }

  100% {
    transform: scale(1);
  }
`,Ure=Pe("span",{name:"MuiTouchRipple",slot:"Root"})({overflow:"hidden",pointerEvents:"none",position:"absolute",zIndex:0,top:0,right:0,bottom:0,left:0,borderRadius:"inherit"}),Vre=Pe(Lre,{name:"MuiTouchRipple",slot:"Ripple"})`
  opacity: 0;
  position: absolute;

  &.${kn.rippleVisible} {
    opacity: 0.3;
    transform: scale(1);
    animation-name: ${Ore};
    animation-duration: ${rN}ms;
    animation-timing-function: ${({theme:t})=>t.transitions.easing.easeInOut};
  }

  &.${kn.ripplePulsate} {
    animation-duration: ${({theme:t})=>t.transitions.duration.shorter}ms;
  }

  & .${kn.child} {
    opacity: 1;
    display: block;
    width: 100%;
    height: 100%;
    border-radius: 50%;
    background-color: currentColor;
  }

  & .${kn.childLeaving} {
    opacity: 0;
    animation-name: ${Bre};
    animation-duration: ${rN}ms;
    animation-timing-function: ${({theme:t})=>t.transitions.easing.easeInOut};
  }

  & .${kn.childPulsate} {
    position: absolute;
    /* @noflip */
    left: 0px;
    top: 0;
    animation-name: ${$re};
    animation-duration: 2500ms;
    animation-timing-function: ${({theme:t})=>t.transitions.easing.easeInOut};
    animation-iteration-count: infinite;
    animation-delay: 200ms;
  }
`,qre=h.forwardRef(function(s,r){const a=kt({props:s,name:"MuiTouchRipple"}),{center:n=!1,classes:i={},className:l,...o}=a,[c,d]=h.useState([]),u=h.useRef(0),m=h.useRef(null);h.useEffect(()=>{m.current&&(m.current(),m.current=null)},[c]);const p=h.useRef(!1),x=Zd(),g=h.useRef(null),f=h.useRef(null),b=h.useCallback(y=>{const{pulsate:C,rippleX:S,rippleY:_,rippleSize:E,cb:A}=y;d(R=>[...R,e.jsx(Vre,{classes:{ripple:oe(i.ripple,kn.ripple),rippleVisible:oe(i.rippleVisible,kn.rippleVisible),ripplePulsate:oe(i.ripplePulsate,kn.ripplePulsate),child:oe(i.child,kn.child),childLeaving:oe(i.childLeaving,kn.childLeaving),childPulsate:oe(i.childPulsate,kn.childPulsate)},timeout:rN,pulsate:C,rippleX:S,rippleY:_,rippleSize:E},u.current)]),u.current+=1,m.current=A},[i]),j=h.useCallback((y={},C={},S=()=>{})=>{const{pulsate:_=!1,center:E=n||C.pulsate,fakeElement:A=!1}=C;if((y==null?void 0:y.type)==="mousedown"&&p.current){p.current=!1;return}(y==null?void 0:y.type)==="touchstart"&&(p.current=!0);const R=A?null:f.current,I=R?R.getBoundingClientRect():{width:0,height:0,left:0,top:0};let N,P,k;if(E||y===void 0||y.clientX===0&&y.clientY===0||!y.clientX&&!y.touches)N=Math.round(I.width/2),P=Math.round(I.height/2);else{const{clientX:D,clientY:$}=y.touches&&y.touches.length>0?y.touches[0]:y;N=Math.round(D-I.left),P=Math.round($-I.top)}if(E)k=Math.sqrt((2*I.width**2+I.height**2)/3),k%2===0&&(k+=1);else{const D=Math.max(Math.abs((R?R.clientWidth:0)-N),N)*2+2,$=Math.max(Math.abs((R?R.clientHeight:0)-P),P)*2+2;k=Math.sqrt(D**2+$**2)}y!=null&&y.touches?g.current===null&&(g.current=()=>{b({pulsate:_,rippleX:N,rippleY:P,rippleSize:k,cb:S})},x.start(Fre,()=>{g.current&&(g.current(),g.current=null)})):b({pulsate:_,rippleX:N,rippleY:P,rippleSize:k,cb:S})},[n,b,x]),v=h.useCallback(()=>{j({},{pulsate:!0})},[j]),w=h.useCallback((y,C)=>{if(x.clear(),(y==null?void 0:y.type)==="touchend"&&g.current){g.current(),g.current=null,x.start(0,()=>{w(y,C)});return}g.current=null,d(S=>S.length>0?S.slice(1):S),m.current=C},[x]);return h.useImperativeHandle(r,()=>({pulsate:v,start:j,stop:w}),[v,j,w]),e.jsx(Ure,{className:oe(kn.root,i.root,l),ref:f,...o,children:e.jsx(J2,{component:null,exit:!0,children:c})})});function Wre(t){return yt("MuiButtonBase",t)}const zre=gt("MuiButtonBase",["root","disabled","focusVisible"]),Gre=t=>{const{disabled:s,focusVisible:r,focusVisibleClassName:a,classes:n}=t,l=bt({root:["root",s&&"disabled",r&&"focusVisible"]},Wre,n);return r&&a&&(l.root+=` ${a}`),l},Kre=Pe("button",{name:"MuiButtonBase",slot:"Root"})({display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",boxSizing:"border-box",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none",textDecoration:"none",color:"inherit","&::-moz-focus-inner":{borderStyle:"none"},[`&.${zre.disabled}`]:{pointerEvents:"none",cursor:"default"},"@media print":{colorAdjust:"exact"}}),td=h.forwardRef(function(s,r){const a=kt({props:s,name:"MuiButtonBase"}),{action:n,centerRipple:i=!1,children:l,className:o,component:c="button",disabled:d=!1,disableRipple:u=!1,disableTouchRipple:m=!1,focusRipple:p=!1,focusVisibleClassName:x,LinkComponent:g="a",onBlur:f,onClick:b,onContextMenu:j,onDragLeave:v,onFocus:w,onFocusVisible:y,onKeyDown:C,onKeyUp:S,onMouseDown:_,onMouseLeave:E,onMouseUp:A,onTouchEnd:R,onTouchMove:I,onTouchStart:N,tabIndex:P=0,TouchRippleProps:k,touchRippleRef:D,type:$,...L}=a,B=h.useRef(null),T=Ire(),O=Br(T.ref,D),[q,K]=h.useState(!1);d&&q&&K(!1),h.useImperativeHandle(n,()=>({focusVisible:()=>{K(!0),B.current.focus()}}),[]);const le=T.shouldMount&&!u&&!d;h.useEffect(()=>{q&&p&&!u&&T.pulsate()},[u,p,q,T]);const X=Ji(T,"start",_,m),se=Ji(T,"stop",j,m),de=Ji(T,"stop",v,m),fe=Ji(T,"stop",A,m),z=Ji(T,"stop",ee=>{q&&ee.preventDefault(),E&&E(ee)},m),re=Ji(T,"start",N,m),ie=Ji(T,"stop",R,m),Y=Ji(T,"stop",I,m),G=Ji(T,"stop",ee=>{af(ee.target)||K(!1),f&&f(ee)},!1),H=Pn(ee=>{B.current||(B.current=ee.currentTarget),af(ee.target)&&(K(!0),y&&y(ee)),w&&w(ee)}),ue=()=>{const ee=B.current;return c&&c!=="button"&&!(ee.tagName==="A"&&ee.href)},me=Pn(ee=>{p&&!ee.repeat&&q&&ee.key===" "&&T.stop(ee,()=>{T.start(ee)}),ee.target===ee.currentTarget&&ue()&&ee.key===" "&&ee.preventDefault(),C&&C(ee),ee.target===ee.currentTarget&&ue()&&ee.key==="Enter"&&!d&&(ee.preventDefault(),b&&b(ee))}),ne=Pn(ee=>{p&&ee.key===" "&&q&&!ee.defaultPrevented&&T.stop(ee,()=>{T.pulsate(ee)}),S&&S(ee),b&&ee.target===ee.currentTarget&&ue()&&ee.key===" "&&!ee.defaultPrevented&&b(ee)});let Ae=c;Ae==="button"&&(L.href||L.to)&&(Ae=g);const Fe={};if(Ae==="button"){const ee=!!L.formAction;Fe.type=$===void 0&&!ee?"button":$,Fe.disabled=d}else!L.href&&!L.to&&(Fe.role="button"),d&&(Fe["aria-disabled"]=d);const at=Br(r,B),J={...a,centerRipple:i,component:c,disabled:d,disableRipple:u,disableTouchRipple:m,focusRipple:p,tabIndex:P,focusVisible:q},Q=Gre(J);return e.jsxs(Kre,{as:Ae,className:oe(Q.root,o),ownerState:J,onBlur:G,onClick:b,onContextMenu:se,onFocus:H,onKeyDown:me,onKeyUp:ne,onMouseDown:X,onMouseLeave:z,onMouseUp:fe,onDragLeave:de,onTouchEnd:ie,onTouchMove:Y,onTouchStart:re,ref:at,tabIndex:d?-1:P,type:$,...Fe,...L,children:[l,le?e.jsx(qre,{ref:O,center:i,...k}):null]})});function Ji(t,s,r,a=!1){return Pn(n=>(r&&r(n),a||t[s](n),!0))}function Hre(t){return typeof t.main=="string"}function Yre(t,s=[]){if(!Hre(t))return!1;for(const r of s)if(!t.hasOwnProperty(r)||typeof t[r]!="string")return!1;return!0}function Hr(t=[]){return([,s])=>s&&Yre(s,t)}function Qre(t){return yt("MuiAlert",t)}const I_=gt("MuiAlert",["root","action","icon","message","filled","colorSuccess","colorInfo","colorWarning","colorError","filledSuccess","filledInfo","filledWarning","filledError","outlined","outlinedSuccess","outlinedInfo","outlinedWarning","outlinedError","standard","standardSuccess","standardInfo","standardWarning","standardError"]);function Jre(t){return yt("MuiCircularProgress",t)}gt("MuiCircularProgress",["root","determinate","indeterminate","colorPrimary","colorSecondary","svg","track","circle","circleDeterminate","circleIndeterminate","circleDisableShrink"]);const Kn=44,aN=U0`
  0% {
    transform: rotate(0deg);
  }

  100% {
    transform: rotate(360deg);
  }
`,nN=U0`
  0% {
    stroke-dasharray: 1px, 200px;
    stroke-dashoffset: 0;
  }

  50% {
    stroke-dasharray: 100px, 200px;
    stroke-dashoffset: -15px;
  }

  100% {
    stroke-dasharray: 1px, 200px;
    stroke-dashoffset: -126px;
  }
`,Zre=typeof aN!="string"?O2`
        animation: ${aN} 1.4s linear infinite;
      `:null,Xre=typeof nN!="string"?O2`
        animation: ${nN} 1.4s ease-in-out infinite;
      `:null,eae=t=>{const{classes:s,variant:r,color:a,disableShrink:n}=t,i={root:["root",r,`color${_e(a)}`],svg:["svg"],track:["track"],circle:["circle",`circle${_e(r)}`,n&&"circleDisableShrink"]};return bt(i,Jre,s)},tae=Pe("span",{name:"MuiCircularProgress",slot:"Root",overridesResolver:(t,s)=>{const{ownerState:r}=t;return[s.root,s[r.variant],s[`color${_e(r.color)}`]]}})(Et(({theme:t})=>({display:"inline-block",variants:[{props:{variant:"determinate"},style:{transition:t.transitions.create("transform")}},{props:{variant:"indeterminate"},style:Zre||{animation:`${aN} 1.4s linear infinite`}},...Object.entries(t.palette).filter(Hr()).map(([s])=>({props:{color:s},style:{color:(t.vars||t).palette[s].main}}))]}))),sae=Pe("svg",{name:"MuiCircularProgress",slot:"Svg"})({display:"block"}),rae=Pe("circle",{name:"MuiCircularProgress",slot:"Circle",overridesResolver:(t,s)=>{const{ownerState:r}=t;return[s.circle,s[`circle${_e(r.variant)}`],r.disableShrink&&s.circleDisableShrink]}})(Et(({theme:t})=>({stroke:"currentColor",variants:[{props:{variant:"determinate"},style:{transition:t.transitions.create("stroke-dashoffset")}},{props:{variant:"indeterminate"},style:{strokeDasharray:"80px, 200px",strokeDashoffset:0}},{props:({ownerState:s})=>s.variant==="indeterminate"&&!s.disableShrink,style:Xre||{animation:`${nN} 1.4s ease-in-out infinite`}}]}))),aae=Pe("circle",{name:"MuiCircularProgress",slot:"Track"})(Et(({theme:t})=>({stroke:"currentColor",opacity:(t.vars||t).palette.action.activatedOpacity}))),Uy=h.forwardRef(function(s,r){const a=kt({props:s,name:"MuiCircularProgress"}),{className:n,color:i="primary",disableShrink:l=!1,enableTrackSlot:o=!1,size:c=40,style:d,thickness:u=3.6,value:m=0,variant:p="indeterminate",...x}=a,g={...a,color:i,disableShrink:l,size:c,thickness:u,value:m,variant:p,enableTrackSlot:o},f=eae(g),b={},j={},v={};if(p==="determinate"){const w=2*Math.PI*((Kn-u)/2);b.strokeDasharray=w.toFixed(3),v["aria-valuenow"]=Math.round(m),b.strokeDashoffset=`${((100-m)/100*w).toFixed(3)}px`,j.transform="rotate(-90deg)"}return e.jsx(tae,{className:oe(f.root,n),style:{width:c,height:c,...j,...d},ownerState:g,ref:r,role:"progressbar",...v,...x,children:e.jsxs(sae,{className:f.svg,ownerState:g,viewBox:`${Kn/2} ${Kn/2} ${Kn} ${Kn}`,children:[o?e.jsx(aae,{className:f.track,ownerState:g,cx:Kn,cy:Kn,r:(Kn-u)/2,fill:"none",strokeWidth:u,"aria-hidden":"true"}):null,e.jsx(rae,{className:f.circle,style:b,ownerState:g,cx:Kn,cy:Kn,r:(Kn-u)/2,fill:"none",strokeWidth:u})]})})});function nae(t){return yt("MuiIconButton",t)}const M_=gt("MuiIconButton",["root","disabled","colorInherit","colorPrimary","colorSecondary","colorError","colorInfo","colorSuccess","colorWarning","edgeStart","edgeEnd","sizeSmall","sizeMedium","sizeLarge","loading","loadingIndicator","loadingWrapper"]),iae=t=>{const{classes:s,disabled:r,color:a,edge:n,size:i,loading:l}=t,o={root:["root",l&&"loading",r&&"disabled",a!=="default"&&`color${_e(a)}`,n&&`edge${_e(n)}`,`size${_e(i)}`],loadingIndicator:["loadingIndicator"],loadingWrapper:["loadingWrapper"]};return bt(o,nae,s)},lae=Pe(td,{name:"MuiIconButton",slot:"Root",overridesResolver:(t,s)=>{const{ownerState:r}=t;return[s.root,r.loading&&s.loading,r.color!=="default"&&s[`color${_e(r.color)}`],r.edge&&s[`edge${_e(r.edge)}`],s[`size${_e(r.size)}`]]}})(Et(({theme:t})=>({textAlign:"center",flex:"0 0 auto",fontSize:t.typography.pxToRem(24),padding:8,borderRadius:"50%",color:(t.vars||t).palette.action.active,transition:t.transitions.create("background-color",{duration:t.transitions.duration.shortest}),variants:[{props:s=>!s.disableRipple,style:{"--IconButton-hoverBg":t.alpha((t.vars||t).palette.action.active,(t.vars||t).palette.action.hoverOpacity),"&:hover":{backgroundColor:"var(--IconButton-hoverBg)","@media (hover: none)":{backgroundColor:"transparent"}}}},{props:{edge:"start"},style:{marginLeft:-12}},{props:{edge:"start",size:"small"},style:{marginLeft:-3}},{props:{edge:"end"},style:{marginRight:-12}},{props:{edge:"end",size:"small"},style:{marginRight:-3}}]})),Et(({theme:t})=>({variants:[{props:{color:"inherit"},style:{color:"inherit"}},...Object.entries(t.palette).filter(Hr()).map(([s])=>({props:{color:s},style:{color:(t.vars||t).palette[s].main}})),...Object.entries(t.palette).filter(Hr()).map(([s])=>({props:{color:s},style:{"--IconButton-hoverBg":t.alpha((t.vars||t).palette[s].main,(t.vars||t).palette.action.hoverOpacity)}})),{props:{size:"small"},style:{padding:5,fontSize:t.typography.pxToRem(18)}},{props:{size:"large"},style:{padding:12,fontSize:t.typography.pxToRem(28)}}],[`&.${M_.disabled}`]:{backgroundColor:"transparent",color:(t.vars||t).palette.action.disabled},[`&.${M_.loading}`]:{color:"transparent"}}))),oae=Pe("span",{name:"MuiIconButton",slot:"LoadingIndicator"})(({theme:t})=>({display:"none",position:"absolute",visibility:"visible",top:"50%",left:"50%",transform:"translate(-50%, -50%)",color:(t.vars||t).palette.action.disabled,variants:[{props:{loading:!0},style:{display:"flex"}}]})),d0=h.forwardRef(function(s,r){const a=kt({props:s,name:"MuiIconButton"}),{edge:n=!1,children:i,className:l,color:o="default",disabled:c=!1,disableFocusRipple:d=!1,size:u="medium",id:m,loading:p=null,loadingIndicator:x,...g}=a,f=om(m),b=x??e.jsx(Uy,{"aria-labelledby":f,color:"inherit",size:16}),j={...a,edge:n,color:o,disabled:c,disableFocusRipple:d,loading:p,loadingIndicator:b,size:u},v=iae(j);return e.jsxs(lae,{id:p?f:m,className:oe(v.root,l),centerRipple:!0,focusRipple:!d,disabled:c||p,ref:r,...g,ownerState:j,children:[typeof p=="boolean"&&e.jsx("span",{className:v.loadingWrapper,style:{display:"contents"},children:e.jsx(oae,{className:v.loadingIndicator,ownerState:j,children:p&&b})}),i]})}),cae=Wn(e.jsx("path",{d:"M20,12A8,8 0 0,1 12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4C12.76,4 13.5,4.11 14.2, 4.31L15.77,2.74C14.61,2.26 13.34,2 12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0, 0 22,12M7.91,10.08L6.5,11.5L11,16L21,6L19.59,4.58L11,13.17L7.91,10.08Z"})),dae=Wn(e.jsx("path",{d:"M12 5.99L19.53 19H4.47L12 5.99M12 2L1 21h22L12 2zm1 14h-2v2h2v-2zm0-6h-2v4h2v-4z"})),uae=Wn(e.jsx("path",{d:"M11 15h2v2h-2zm0-8h2v6h-2zm.99-5C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"})),mae=Wn(e.jsx("path",{d:"M11,9H13V7H11M12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20, 12C20,16.41 16.41,20 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10, 10 0 0,0 12,2M11,17H13V11H11V17Z"})),hae=Wn(e.jsx("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"})),pae=t=>{const{variant:s,color:r,severity:a,classes:n}=t,i={root:["root",`color${_e(r||a)}`,`${s}${_e(r||a)}`,`${s}`],icon:["icon"],message:["message"],action:["action"]};return bt(i,Qre,n)},xae=Pe(dm,{name:"MuiAlert",slot:"Root",overridesResolver:(t,s)=>{const{ownerState:r}=t;return[s.root,s[r.variant],s[`${r.variant}${_e(r.color||r.severity)}`]]}})(Et(({theme:t})=>{const s=t.palette.mode==="light"?t.darken:t.lighten,r=t.palette.mode==="light"?t.lighten:t.darken;return{...t.typography.body2,backgroundColor:"transparent",display:"flex",padding:"6px 16px",variants:[...Object.entries(t.palette).filter(Hr(["light"])).map(([a])=>({props:{colorSeverity:a,variant:"standard"},style:{color:t.vars?t.vars.palette.Alert[`${a}Color`]:s(t.palette[a].light,.6),backgroundColor:t.vars?t.vars.palette.Alert[`${a}StandardBg`]:r(t.palette[a].light,.9),[`& .${I_.icon}`]:t.vars?{color:t.vars.palette.Alert[`${a}IconColor`]}:{color:t.palette[a].main}}})),...Object.entries(t.palette).filter(Hr(["light"])).map(([a])=>({props:{colorSeverity:a,variant:"outlined"},style:{color:t.vars?t.vars.palette.Alert[`${a}Color`]:s(t.palette[a].light,.6),border:`1px solid ${(t.vars||t).palette[a].light}`,[`& .${I_.icon}`]:t.vars?{color:t.vars.palette.Alert[`${a}IconColor`]}:{color:t.palette[a].main}}})),...Object.entries(t.palette).filter(Hr(["dark"])).map(([a])=>({props:{colorSeverity:a,variant:"filled"},style:{fontWeight:t.typography.fontWeightMedium,...t.vars?{color:t.vars.palette.Alert[`${a}FilledColor`],backgroundColor:t.vars.palette.Alert[`${a}FilledBg`]}:{backgroundColor:t.palette.mode==="dark"?t.palette[a].dark:t.palette[a].main,color:t.palette.getContrastText(t.palette[a].main)}}}))]}})),gae=Pe("div",{name:"MuiAlert",slot:"Icon"})({marginRight:12,padding:"7px 0",display:"flex",fontSize:22,opacity:.9}),fae=Pe("div",{name:"MuiAlert",slot:"Message"})({padding:"8px 0",minWidth:0,overflow:"auto"}),yae=Pe("div",{name:"MuiAlert",slot:"Action"})({display:"flex",alignItems:"flex-start",padding:"4px 0 0 16px",marginLeft:"auto",marginRight:-8}),L_={success:e.jsx(cae,{fontSize:"inherit"}),warning:e.jsx(dae,{fontSize:"inherit"}),error:e.jsx(uae,{fontSize:"inherit"}),info:e.jsx(mae,{fontSize:"inherit"})},lf=h.forwardRef(function(s,r){const a=kt({props:s,name:"MuiAlert"}),{action:n,children:i,className:l,closeText:o="Close",color:c,components:d={},componentsProps:u={},icon:m,iconMapping:p=L_,onClose:x,role:g="alert",severity:f="success",slotProps:b={},slots:j={},variant:v="standard",...w}=a,y={...a,color:c,severity:f,variant:v,colorSeverity:c||f},C=pae(y),S={slots:{closeButton:d.CloseButton,closeIcon:d.CloseIcon,...j},slotProps:{...u,...b}},[_,E]=Nt("root",{ref:r,shouldForwardComponentProp:!0,className:oe(C.root,l),elementType:xae,externalForwardedProps:{...S,...w},ownerState:y,additionalProps:{role:g,elevation:0}}),[A,R]=Nt("icon",{className:C.icon,elementType:gae,externalForwardedProps:S,ownerState:y}),[I,N]=Nt("message",{className:C.message,elementType:fae,externalForwardedProps:S,ownerState:y}),[P,k]=Nt("action",{className:C.action,elementType:yae,externalForwardedProps:S,ownerState:y}),[D,$]=Nt("closeButton",{elementType:d0,externalForwardedProps:S,ownerState:y}),[L,B]=Nt("closeIcon",{elementType:hae,externalForwardedProps:S,ownerState:y});return e.jsxs(_,{...E,children:[m!==!1?e.jsx(A,{...R,children:m||p[f]||L_[f]}):null,e.jsx(I,{...N,children:i}),n!=null?e.jsx(P,{...k,children:n}):null,n==null&&x?e.jsx(P,{...k,children:e.jsx(D,{size:"small","aria-label":o,title:o,color:"inherit",onClick:x,...$,children:e.jsx(L,{fontSize:"small",...B})})}):null]})});function bae(t){return yt("MuiTypography",t)}gt("MuiTypography",["root","h1","h2","h3","h4","h5","h6","subtitle1","subtitle2","body1","body2","inherit","button","caption","overline","alignLeft","alignRight","alignCenter","alignJustify","noWrap","gutterBottom","paragraph"]);const vae={primary:!0,secondary:!0,error:!0,info:!0,success:!0,warning:!0,textPrimary:!0,textSecondary:!0,textDisabled:!0},jae=gre(),wae=t=>{const{align:s,gutterBottom:r,noWrap:a,paragraph:n,variant:i,classes:l}=t,o={root:["root",i,t.align!=="inherit"&&`align${_e(s)}`,r&&"gutterBottom",a&&"noWrap",n&&"paragraph"]};return bt(o,bae,l)},Nae=Pe("span",{name:"MuiTypography",slot:"Root",overridesResolver:(t,s)=>{const{ownerState:r}=t;return[s.root,r.variant&&s[r.variant],r.align!=="inherit"&&s[`align${_e(r.align)}`],r.noWrap&&s.noWrap,r.gutterBottom&&s.gutterBottom,r.paragraph&&s.paragraph]}})(Et(({theme:t})=>{var s;return{margin:0,variants:[{props:{variant:"inherit"},style:{font:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}},...Object.entries(t.typography).filter(([r,a])=>r!=="inherit"&&a&&typeof a=="object").map(([r,a])=>({props:{variant:r},style:a})),...Object.entries(t.palette).filter(Hr()).map(([r])=>({props:{color:r},style:{color:(t.vars||t).palette[r].main}})),...Object.entries(((s=t.palette)==null?void 0:s.text)||{}).filter(([,r])=>typeof r=="string").map(([r])=>({props:{color:`text${_e(r)}`},style:{color:(t.vars||t).palette.text[r]}})),{props:({ownerState:r})=>r.align!=="inherit",style:{textAlign:"var(--Typography-textAlign)"}},{props:({ownerState:r})=>r.noWrap,style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}},{props:({ownerState:r})=>r.gutterBottom,style:{marginBottom:"0.35em"}},{props:({ownerState:r})=>r.paragraph,style:{marginBottom:16}}]}})),F_={h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",subtitle1:"h6",subtitle2:"h6",body1:"p",body2:"p",inherit:"p"},Rr=h.forwardRef(function(s,r){const{color:a,...n}=kt({props:s,name:"MuiTypography"}),i=!vae[a],l=jae({...n,...i&&{color:a}}),{align:o="inherit",className:c,component:d,gutterBottom:u=!1,noWrap:m=!1,paragraph:p=!1,variant:x="body1",variantMapping:g=F_,...f}=l,b={...l,align:o,color:a,className:c,component:d,gutterBottom:u,noWrap:m,paragraph:p,variant:x,variantMapping:g},j=d||(p?"p":g[x]||F_[x])||"span",v=wae(b);return e.jsx(Nae,{as:j,ref:r,className:oe(v.root,c),...f,ownerState:b,style:{...o!=="inherit"&&{"--Typography-textAlign":o},...f.style}})});var $a="top",Fn="bottom",On="right",Ua="left",Z2="auto",G0=[$a,Fn,On,Ua],zu="start",u0="end",kae="clippingParents",SM="viewport",Im="popper",Cae="reference",O_=G0.reduce(function(t,s){return t.concat([s+"-"+zu,s+"-"+u0])},[]),_M=[].concat(G0,[Z2]).reduce(function(t,s){return t.concat([s,s+"-"+zu,s+"-"+u0])},[]),Sae="beforeRead",_ae="read",Eae="afterRead",Aae="beforeMain",Tae="main",Pae="afterMain",Rae="beforeWrite",Dae="write",Iae="afterWrite",Mae=[Sae,_ae,Eae,Aae,Tae,Pae,Rae,Dae,Iae];function Ui(t){return t?(t.nodeName||"").toLowerCase():null}function on(t){if(t==null)return window;if(t.toString()!=="[object Window]"){var s=t.ownerDocument;return s&&s.defaultView||window}return t}function sd(t){var s=on(t).Element;return t instanceof s||t instanceof Element}function Rn(t){var s=on(t).HTMLElement;return t instanceof s||t instanceof HTMLElement}function X2(t){if(typeof ShadowRoot>"u")return!1;var s=on(t).ShadowRoot;return t instanceof s||t instanceof ShadowRoot}function Lae(t){var s=t.state;Object.keys(s.elements).forEach(function(r){var a=s.styles[r]||{},n=s.attributes[r]||{},i=s.elements[r];!Rn(i)||!Ui(i)||(Object.assign(i.style,a),Object.keys(n).forEach(function(l){var o=n[l];o===!1?i.removeAttribute(l):i.setAttribute(l,o===!0?"":o)}))})}function Fae(t){var s=t.state,r={popper:{position:s.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(s.elements.popper.style,r.popper),s.styles=r,s.elements.arrow&&Object.assign(s.elements.arrow.style,r.arrow),function(){Object.keys(s.elements).forEach(function(a){var n=s.elements[a],i=s.attributes[a]||{},l=Object.keys(s.styles.hasOwnProperty(a)?s.styles[a]:r[a]),o=l.reduce(function(c,d){return c[d]="",c},{});!Rn(n)||!Ui(n)||(Object.assign(n.style,o),Object.keys(i).forEach(function(c){n.removeAttribute(c)}))})}}const Oae={name:"applyStyles",enabled:!0,phase:"write",fn:Lae,effect:Fae,requires:["computeStyles"]};function Bi(t){return t.split("-")[0]}var Uc=Math.max,of=Math.min,Gu=Math.round;function iN(){var t=navigator.userAgentData;return t!=null&&t.brands&&Array.isArray(t.brands)?t.brands.map(function(s){return s.brand+"/"+s.version}).join(" "):navigator.userAgent}function EM(){return!/^((?!chrome|android).)*safari/i.test(iN())}function Ku(t,s,r){s===void 0&&(s=!1),r===void 0&&(r=!1);var a=t.getBoundingClientRect(),n=1,i=1;s&&Rn(t)&&(n=t.offsetWidth>0&&Gu(a.width)/t.offsetWidth||1,i=t.offsetHeight>0&&Gu(a.height)/t.offsetHeight||1);var l=sd(t)?on(t):window,o=l.visualViewport,c=!EM()&&r,d=(a.left+(c&&o?o.offsetLeft:0))/n,u=(a.top+(c&&o?o.offsetTop:0))/i,m=a.width/n,p=a.height/i;return{width:m,height:p,top:u,right:d+m,bottom:u+p,left:d,x:d,y:u}}function ek(t){var s=Ku(t),r=t.offsetWidth,a=t.offsetHeight;return Math.abs(s.width-r)<=1&&(r=s.width),Math.abs(s.height-a)<=1&&(a=s.height),{x:t.offsetLeft,y:t.offsetTop,width:r,height:a}}function AM(t,s){var r=s.getRootNode&&s.getRootNode();if(t.contains(s))return!0;if(r&&X2(r)){var a=s;do{if(a&&t.isSameNode(a))return!0;a=a.parentNode||a.host}while(a)}return!1}function Al(t){return on(t).getComputedStyle(t)}function Bae(t){return["table","td","th"].indexOf(Ui(t))>=0}function Ko(t){return((sd(t)?t.ownerDocument:t.document)||window.document).documentElement}function Vy(t){return Ui(t)==="html"?t:t.assignedSlot||t.parentNode||(X2(t)?t.host:null)||Ko(t)}function B_(t){return!Rn(t)||Al(t).position==="fixed"?null:t.offsetParent}function $ae(t){var s=/firefox/i.test(iN()),r=/Trident/i.test(iN());if(r&&Rn(t)){var a=Al(t);if(a.position==="fixed")return null}var n=Vy(t);for(X2(n)&&(n=n.host);Rn(n)&&["html","body"].indexOf(Ui(n))<0;){var i=Al(n);if(i.transform!=="none"||i.perspective!=="none"||i.contain==="paint"||["transform","perspective"].indexOf(i.willChange)!==-1||s&&i.willChange==="filter"||s&&i.filter&&i.filter!=="none")return n;n=n.parentNode}return null}function K0(t){for(var s=on(t),r=B_(t);r&&Bae(r)&&Al(r).position==="static";)r=B_(r);return r&&(Ui(r)==="html"||Ui(r)==="body"&&Al(r).position==="static")?s:r||$ae(t)||s}function tk(t){return["top","bottom"].indexOf(t)>=0?"x":"y"}function jh(t,s,r){return Uc(t,of(s,r))}function Uae(t,s,r){var a=jh(t,s,r);return a>r?r:a}function TM(){return{top:0,right:0,bottom:0,left:0}}function PM(t){return Object.assign({},TM(),t)}function RM(t,s){return s.reduce(function(r,a){return r[a]=t,r},{})}var Vae=function(s,r){return s=typeof s=="function"?s(Object.assign({},r.rects,{placement:r.placement})):s,PM(typeof s!="number"?s:RM(s,G0))};function qae(t){var s,r=t.state,a=t.name,n=t.options,i=r.elements.arrow,l=r.modifiersData.popperOffsets,o=Bi(r.placement),c=tk(o),d=[Ua,On].indexOf(o)>=0,u=d?"height":"width";if(!(!i||!l)){var m=Vae(n.padding,r),p=ek(i),x=c==="y"?$a:Ua,g=c==="y"?Fn:On,f=r.rects.reference[u]+r.rects.reference[c]-l[c]-r.rects.popper[u],b=l[c]-r.rects.reference[c],j=K0(i),v=j?c==="y"?j.clientHeight||0:j.clientWidth||0:0,w=f/2-b/2,y=m[x],C=v-p[u]-m[g],S=v/2-p[u]/2+w,_=jh(y,S,C),E=c;r.modifiersData[a]=(s={},s[E]=_,s.centerOffset=_-S,s)}}function Wae(t){var s=t.state,r=t.options,a=r.element,n=a===void 0?"[data-popper-arrow]":a;n!=null&&(typeof n=="string"&&(n=s.elements.popper.querySelector(n),!n)||AM(s.elements.popper,n)&&(s.elements.arrow=n))}const zae={name:"arrow",enabled:!0,phase:"main",fn:qae,effect:Wae,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function Hu(t){return t.split("-")[1]}var Gae={top:"auto",right:"auto",bottom:"auto",left:"auto"};function Kae(t,s){var r=t.x,a=t.y,n=s.devicePixelRatio||1;return{x:Gu(r*n)/n||0,y:Gu(a*n)/n||0}}function $_(t){var s,r=t.popper,a=t.popperRect,n=t.placement,i=t.variation,l=t.offsets,o=t.position,c=t.gpuAcceleration,d=t.adaptive,u=t.roundOffsets,m=t.isFixed,p=l.x,x=p===void 0?0:p,g=l.y,f=g===void 0?0:g,b=typeof u=="function"?u({x,y:f}):{x,y:f};x=b.x,f=b.y;var j=l.hasOwnProperty("x"),v=l.hasOwnProperty("y"),w=Ua,y=$a,C=window;if(d){var S=K0(r),_="clientHeight",E="clientWidth";if(S===on(r)&&(S=Ko(r),Al(S).position!=="static"&&o==="absolute"&&(_="scrollHeight",E="scrollWidth")),S=S,n===$a||(n===Ua||n===On)&&i===u0){y=Fn;var A=m&&S===C&&C.visualViewport?C.visualViewport.height:S[_];f-=A-a.height,f*=c?1:-1}if(n===Ua||(n===$a||n===Fn)&&i===u0){w=On;var R=m&&S===C&&C.visualViewport?C.visualViewport.width:S[E];x-=R-a.width,x*=c?1:-1}}var I=Object.assign({position:o},d&&Gae),N=u===!0?Kae({x,y:f},on(r)):{x,y:f};if(x=N.x,f=N.y,c){var P;return Object.assign({},I,(P={},P[y]=v?"0":"",P[w]=j?"0":"",P.transform=(C.devicePixelRatio||1)<=1?"translate("+x+"px, "+f+"px)":"translate3d("+x+"px, "+f+"px, 0)",P))}return Object.assign({},I,(s={},s[y]=v?f+"px":"",s[w]=j?x+"px":"",s.transform="",s))}function Hae(t){var s=t.state,r=t.options,a=r.gpuAcceleration,n=a===void 0?!0:a,i=r.adaptive,l=i===void 0?!0:i,o=r.roundOffsets,c=o===void 0?!0:o,d={placement:Bi(s.placement),variation:Hu(s.placement),popper:s.elements.popper,popperRect:s.rects.popper,gpuAcceleration:n,isFixed:s.options.strategy==="fixed"};s.modifiersData.popperOffsets!=null&&(s.styles.popper=Object.assign({},s.styles.popper,$_(Object.assign({},d,{offsets:s.modifiersData.popperOffsets,position:s.options.strategy,adaptive:l,roundOffsets:c})))),s.modifiersData.arrow!=null&&(s.styles.arrow=Object.assign({},s.styles.arrow,$_(Object.assign({},d,{offsets:s.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:c})))),s.attributes.popper=Object.assign({},s.attributes.popper,{"data-popper-placement":s.placement})}const Yae={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:Hae,data:{}};var Jp={passive:!0};function Qae(t){var s=t.state,r=t.instance,a=t.options,n=a.scroll,i=n===void 0?!0:n,l=a.resize,o=l===void 0?!0:l,c=on(s.elements.popper),d=[].concat(s.scrollParents.reference,s.scrollParents.popper);return i&&d.forEach(function(u){u.addEventListener("scroll",r.update,Jp)}),o&&c.addEventListener("resize",r.update,Jp),function(){i&&d.forEach(function(u){u.removeEventListener("scroll",r.update,Jp)}),o&&c.removeEventListener("resize",r.update,Jp)}}const Jae={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:Qae,data:{}};var Zae={left:"right",right:"left",bottom:"top",top:"bottom"};function qx(t){return t.replace(/left|right|bottom|top/g,function(s){return Zae[s]})}var Xae={start:"end",end:"start"};function U_(t){return t.replace(/start|end/g,function(s){return Xae[s]})}function sk(t){var s=on(t),r=s.pageXOffset,a=s.pageYOffset;return{scrollLeft:r,scrollTop:a}}function rk(t){return Ku(Ko(t)).left+sk(t).scrollLeft}function ene(t,s){var r=on(t),a=Ko(t),n=r.visualViewport,i=a.clientWidth,l=a.clientHeight,o=0,c=0;if(n){i=n.width,l=n.height;var d=EM();(d||!d&&s==="fixed")&&(o=n.offsetLeft,c=n.offsetTop)}return{width:i,height:l,x:o+rk(t),y:c}}function tne(t){var s,r=Ko(t),a=sk(t),n=(s=t.ownerDocument)==null?void 0:s.body,i=Uc(r.scrollWidth,r.clientWidth,n?n.scrollWidth:0,n?n.clientWidth:0),l=Uc(r.scrollHeight,r.clientHeight,n?n.scrollHeight:0,n?n.clientHeight:0),o=-a.scrollLeft+rk(t),c=-a.scrollTop;return Al(n||r).direction==="rtl"&&(o+=Uc(r.clientWidth,n?n.clientWidth:0)-i),{width:i,height:l,x:o,y:c}}function ak(t){var s=Al(t),r=s.overflow,a=s.overflowX,n=s.overflowY;return/auto|scroll|overlay|hidden/.test(r+n+a)}function DM(t){return["html","body","#document"].indexOf(Ui(t))>=0?t.ownerDocument.body:Rn(t)&&ak(t)?t:DM(Vy(t))}function wh(t,s){var r;s===void 0&&(s=[]);var a=DM(t),n=a===((r=t.ownerDocument)==null?void 0:r.body),i=on(a),l=n?[i].concat(i.visualViewport||[],ak(a)?a:[]):a,o=s.concat(l);return n?o:o.concat(wh(Vy(l)))}function lN(t){return Object.assign({},t,{left:t.x,top:t.y,right:t.x+t.width,bottom:t.y+t.height})}function sne(t,s){var r=Ku(t,!1,s==="fixed");return r.top=r.top+t.clientTop,r.left=r.left+t.clientLeft,r.bottom=r.top+t.clientHeight,r.right=r.left+t.clientWidth,r.width=t.clientWidth,r.height=t.clientHeight,r.x=r.left,r.y=r.top,r}function V_(t,s,r){return s===SM?lN(ene(t,r)):sd(s)?sne(s,r):lN(tne(Ko(t)))}function rne(t){var s=wh(Vy(t)),r=["absolute","fixed"].indexOf(Al(t).position)>=0,a=r&&Rn(t)?K0(t):t;return sd(a)?s.filter(function(n){return sd(n)&&AM(n,a)&&Ui(n)!=="body"}):[]}function ane(t,s,r,a){var n=s==="clippingParents"?rne(t):[].concat(s),i=[].concat(n,[r]),l=i[0],o=i.reduce(function(c,d){var u=V_(t,d,a);return c.top=Uc(u.top,c.top),c.right=of(u.right,c.right),c.bottom=of(u.bottom,c.bottom),c.left=Uc(u.left,c.left),c},V_(t,l,a));return o.width=o.right-o.left,o.height=o.bottom-o.top,o.x=o.left,o.y=o.top,o}function IM(t){var s=t.reference,r=t.element,a=t.placement,n=a?Bi(a):null,i=a?Hu(a):null,l=s.x+s.width/2-r.width/2,o=s.y+s.height/2-r.height/2,c;switch(n){case $a:c={x:l,y:s.y-r.height};break;case Fn:c={x:l,y:s.y+s.height};break;case On:c={x:s.x+s.width,y:o};break;case Ua:c={x:s.x-r.width,y:o};break;default:c={x:s.x,y:s.y}}var d=n?tk(n):null;if(d!=null){var u=d==="y"?"height":"width";switch(i){case zu:c[d]=c[d]-(s[u]/2-r[u]/2);break;case u0:c[d]=c[d]+(s[u]/2-r[u]/2);break}}return c}function m0(t,s){s===void 0&&(s={});var r=s,a=r.placement,n=a===void 0?t.placement:a,i=r.strategy,l=i===void 0?t.strategy:i,o=r.boundary,c=o===void 0?kae:o,d=r.rootBoundary,u=d===void 0?SM:d,m=r.elementContext,p=m===void 0?Im:m,x=r.altBoundary,g=x===void 0?!1:x,f=r.padding,b=f===void 0?0:f,j=PM(typeof b!="number"?b:RM(b,G0)),v=p===Im?Cae:Im,w=t.rects.popper,y=t.elements[g?v:p],C=ane(sd(y)?y:y.contextElement||Ko(t.elements.popper),c,u,l),S=Ku(t.elements.reference),_=IM({reference:S,element:w,placement:n}),E=lN(Object.assign({},w,_)),A=p===Im?E:S,R={top:C.top-A.top+j.top,bottom:A.bottom-C.bottom+j.bottom,left:C.left-A.left+j.left,right:A.right-C.right+j.right},I=t.modifiersData.offset;if(p===Im&&I){var N=I[n];Object.keys(R).forEach(function(P){var k=[On,Fn].indexOf(P)>=0?1:-1,D=[$a,Fn].indexOf(P)>=0?"y":"x";R[P]+=N[D]*k})}return R}function nne(t,s){s===void 0&&(s={});var r=s,a=r.placement,n=r.boundary,i=r.rootBoundary,l=r.padding,o=r.flipVariations,c=r.allowedAutoPlacements,d=c===void 0?_M:c,u=Hu(a),m=u?o?O_:O_.filter(function(g){return Hu(g)===u}):G0,p=m.filter(function(g){return d.indexOf(g)>=0});p.length===0&&(p=m);var x=p.reduce(function(g,f){return g[f]=m0(t,{placement:f,boundary:n,rootBoundary:i,padding:l})[Bi(f)],g},{});return Object.keys(x).sort(function(g,f){return x[g]-x[f]})}function ine(t){if(Bi(t)===Z2)return[];var s=qx(t);return[U_(t),s,U_(s)]}function lne(t){var s=t.state,r=t.options,a=t.name;if(!s.modifiersData[a]._skip){for(var n=r.mainAxis,i=n===void 0?!0:n,l=r.altAxis,o=l===void 0?!0:l,c=r.fallbackPlacements,d=r.padding,u=r.boundary,m=r.rootBoundary,p=r.altBoundary,x=r.flipVariations,g=x===void 0?!0:x,f=r.allowedAutoPlacements,b=s.options.placement,j=Bi(b),v=j===b,w=c||(v||!g?[qx(b)]:ine(b)),y=[b].concat(w).reduce(function(X,se){return X.concat(Bi(se)===Z2?nne(s,{placement:se,boundary:u,rootBoundary:m,padding:d,flipVariations:g,allowedAutoPlacements:f}):se)},[]),C=s.rects.reference,S=s.rects.popper,_=new Map,E=!0,A=y[0],R=0;R<y.length;R++){var I=y[R],N=Bi(I),P=Hu(I)===zu,k=[$a,Fn].indexOf(N)>=0,D=k?"width":"height",$=m0(s,{placement:I,boundary:u,rootBoundary:m,altBoundary:p,padding:d}),L=k?P?On:Ua:P?Fn:$a;C[D]>S[D]&&(L=qx(L));var B=qx(L),T=[];if(i&&T.push($[N]<=0),o&&T.push($[L]<=0,$[B]<=0),T.every(function(X){return X})){A=I,E=!1;break}_.set(I,T)}if(E)for(var O=g?3:1,q=function(se){var de=y.find(function(fe){var z=_.get(fe);if(z)return z.slice(0,se).every(function(re){return re})});if(de)return A=de,"break"},K=O;K>0;K--){var le=q(K);if(le==="break")break}s.placement!==A&&(s.modifiersData[a]._skip=!0,s.placement=A,s.reset=!0)}}const one={name:"flip",enabled:!0,phase:"main",fn:lne,requiresIfExists:["offset"],data:{_skip:!1}};function q_(t,s,r){return r===void 0&&(r={x:0,y:0}),{top:t.top-s.height-r.y,right:t.right-s.width+r.x,bottom:t.bottom-s.height+r.y,left:t.left-s.width-r.x}}function W_(t){return[$a,On,Fn,Ua].some(function(s){return t[s]>=0})}function cne(t){var s=t.state,r=t.name,a=s.rects.reference,n=s.rects.popper,i=s.modifiersData.preventOverflow,l=m0(s,{elementContext:"reference"}),o=m0(s,{altBoundary:!0}),c=q_(l,a),d=q_(o,n,i),u=W_(c),m=W_(d);s.modifiersData[r]={referenceClippingOffsets:c,popperEscapeOffsets:d,isReferenceHidden:u,hasPopperEscaped:m},s.attributes.popper=Object.assign({},s.attributes.popper,{"data-popper-reference-hidden":u,"data-popper-escaped":m})}const dne={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:cne};function une(t,s,r){var a=Bi(t),n=[Ua,$a].indexOf(a)>=0?-1:1,i=typeof r=="function"?r(Object.assign({},s,{placement:t})):r,l=i[0],o=i[1];return l=l||0,o=(o||0)*n,[Ua,On].indexOf(a)>=0?{x:o,y:l}:{x:l,y:o}}function mne(t){var s=t.state,r=t.options,a=t.name,n=r.offset,i=n===void 0?[0,0]:n,l=_M.reduce(function(u,m){return u[m]=une(m,s.rects,i),u},{}),o=l[s.placement],c=o.x,d=o.y;s.modifiersData.popperOffsets!=null&&(s.modifiersData.popperOffsets.x+=c,s.modifiersData.popperOffsets.y+=d),s.modifiersData[a]=l}const hne={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:mne};function pne(t){var s=t.state,r=t.name;s.modifiersData[r]=IM({reference:s.rects.reference,element:s.rects.popper,placement:s.placement})}const xne={name:"popperOffsets",enabled:!0,phase:"read",fn:pne,data:{}};function gne(t){return t==="x"?"y":"x"}function fne(t){var s=t.state,r=t.options,a=t.name,n=r.mainAxis,i=n===void 0?!0:n,l=r.altAxis,o=l===void 0?!1:l,c=r.boundary,d=r.rootBoundary,u=r.altBoundary,m=r.padding,p=r.tether,x=p===void 0?!0:p,g=r.tetherOffset,f=g===void 0?0:g,b=m0(s,{boundary:c,rootBoundary:d,padding:m,altBoundary:u}),j=Bi(s.placement),v=Hu(s.placement),w=!v,y=tk(j),C=gne(y),S=s.modifiersData.popperOffsets,_=s.rects.reference,E=s.rects.popper,A=typeof f=="function"?f(Object.assign({},s.rects,{placement:s.placement})):f,R=typeof A=="number"?{mainAxis:A,altAxis:A}:Object.assign({mainAxis:0,altAxis:0},A),I=s.modifiersData.offset?s.modifiersData.offset[s.placement]:null,N={x:0,y:0};if(S){if(i){var P,k=y==="y"?$a:Ua,D=y==="y"?Fn:On,$=y==="y"?"height":"width",L=S[y],B=L+b[k],T=L-b[D],O=x?-E[$]/2:0,q=v===zu?_[$]:E[$],K=v===zu?-E[$]:-_[$],le=s.elements.arrow,X=x&&le?ek(le):{width:0,height:0},se=s.modifiersData["arrow#persistent"]?s.modifiersData["arrow#persistent"].padding:TM(),de=se[k],fe=se[D],z=jh(0,_[$],X[$]),re=w?_[$]/2-O-z-de-R.mainAxis:q-z-de-R.mainAxis,ie=w?-_[$]/2+O+z+fe+R.mainAxis:K+z+fe+R.mainAxis,Y=s.elements.arrow&&K0(s.elements.arrow),G=Y?y==="y"?Y.clientTop||0:Y.clientLeft||0:0,H=(P=I==null?void 0:I[y])!=null?P:0,ue=L+re-H-G,me=L+ie-H,ne=jh(x?of(B,ue):B,L,x?Uc(T,me):T);S[y]=ne,N[y]=ne-L}if(o){var Ae,Fe=y==="x"?$a:Ua,at=y==="x"?Fn:On,J=S[C],Q=C==="y"?"height":"width",ee=J+b[Fe],Ne=J-b[at],ye=[$a,Ua].indexOf(j)!==-1,he=(Ae=I==null?void 0:I[C])!=null?Ae:0,Ce=ye?ee:J-_[Q]-E[Q]-he+R.altAxis,Se=ye?J+_[Q]+E[Q]-he-R.altAxis:Ne,Be=x&&ye?Uae(Ce,J,Se):jh(x?Ce:ee,J,x?Se:Ne);S[C]=Be,N[C]=Be-J}s.modifiersData[a]=N}}const yne={name:"preventOverflow",enabled:!0,phase:"main",fn:fne,requiresIfExists:["offset"]};function bne(t){return{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}}function vne(t){return t===on(t)||!Rn(t)?sk(t):bne(t)}function jne(t){var s=t.getBoundingClientRect(),r=Gu(s.width)/t.offsetWidth||1,a=Gu(s.height)/t.offsetHeight||1;return r!==1||a!==1}function wne(t,s,r){r===void 0&&(r=!1);var a=Rn(s),n=Rn(s)&&jne(s),i=Ko(s),l=Ku(t,n,r),o={scrollLeft:0,scrollTop:0},c={x:0,y:0};return(a||!a&&!r)&&((Ui(s)!=="body"||ak(i))&&(o=vne(s)),Rn(s)?(c=Ku(s,!0),c.x+=s.clientLeft,c.y+=s.clientTop):i&&(c.x=rk(i))),{x:l.left+o.scrollLeft-c.x,y:l.top+o.scrollTop-c.y,width:l.width,height:l.height}}function Nne(t){var s=new Map,r=new Set,a=[];t.forEach(function(i){s.set(i.name,i)});function n(i){r.add(i.name);var l=[].concat(i.requires||[],i.requiresIfExists||[]);l.forEach(function(o){if(!r.has(o)){var c=s.get(o);c&&n(c)}}),a.push(i)}return t.forEach(function(i){r.has(i.name)||n(i)}),a}function kne(t){var s=Nne(t);return Mae.reduce(function(r,a){return r.concat(s.filter(function(n){return n.phase===a}))},[])}function Cne(t){var s;return function(){return s||(s=new Promise(function(r){Promise.resolve().then(function(){s=void 0,r(t())})})),s}}function Sne(t){var s=t.reduce(function(r,a){var n=r[a.name];return r[a.name]=n?Object.assign({},n,a,{options:Object.assign({},n.options,a.options),data:Object.assign({},n.data,a.data)}):a,r},{});return Object.keys(s).map(function(r){return s[r]})}var z_={placement:"bottom",modifiers:[],strategy:"absolute"};function G_(){for(var t=arguments.length,s=new Array(t),r=0;r<t;r++)s[r]=arguments[r];return!s.some(function(a){return!(a&&typeof a.getBoundingClientRect=="function")})}function _ne(t){t===void 0&&(t={});var s=t,r=s.defaultModifiers,a=r===void 0?[]:r,n=s.defaultOptions,i=n===void 0?z_:n;return function(o,c,d){d===void 0&&(d=i);var u={placement:"bottom",orderedModifiers:[],options:Object.assign({},z_,i),modifiersData:{},elements:{reference:o,popper:c},attributes:{},styles:{}},m=[],p=!1,x={state:u,setOptions:function(j){var v=typeof j=="function"?j(u.options):j;f(),u.options=Object.assign({},i,u.options,v),u.scrollParents={reference:sd(o)?wh(o):o.contextElement?wh(o.contextElement):[],popper:wh(c)};var w=kne(Sne([].concat(a,u.options.modifiers)));return u.orderedModifiers=w.filter(function(y){return y.enabled}),g(),x.update()},forceUpdate:function(){if(!p){var j=u.elements,v=j.reference,w=j.popper;if(G_(v,w)){u.rects={reference:wne(v,K0(w),u.options.strategy==="fixed"),popper:ek(w)},u.reset=!1,u.placement=u.options.placement,u.orderedModifiers.forEach(function(R){return u.modifiersData[R.name]=Object.assign({},R.data)});for(var y=0;y<u.orderedModifiers.length;y++){if(u.reset===!0){u.reset=!1,y=-1;continue}var C=u.orderedModifiers[y],S=C.fn,_=C.options,E=_===void 0?{}:_,A=C.name;typeof S=="function"&&(u=S({state:u,options:E,name:A,instance:x})||u)}}}},update:Cne(function(){return new Promise(function(b){x.forceUpdate(),b(u)})}),destroy:function(){f(),p=!0}};if(!G_(o,c))return x;x.setOptions(d).then(function(b){!p&&d.onFirstUpdate&&d.onFirstUpdate(b)});function g(){u.orderedModifiers.forEach(function(b){var j=b.name,v=b.options,w=v===void 0?{}:v,y=b.effect;if(typeof y=="function"){var C=y({state:u,name:j,instance:x,options:w}),S=function(){};m.push(C||S)}})}function f(){m.forEach(function(b){return b()}),m=[]}return x}}var Ene=[Jae,xne,Yae,Oae,hne,one,yne,zae,dne],Ane=_ne({defaultModifiers:Ene});function Yu(t){var m;const{elementType:s,externalSlotProps:r,ownerState:a,skipResolvingSlotProps:n=!1,...i}=t,l=n?{}:NM(r,a),{props:o,internalRef:c}=CM({...i,externalSlotProps:l}),d=Br(c,l==null?void 0:l.ref,(m=t.additionalProps)==null?void 0:m.ref);return wM(s,{...o,ref:d},a)}function um(t){var s;return parseInt(h.version,10)>=19?((s=t==null?void 0:t.props)==null?void 0:s.ref)||null:(t==null?void 0:t.ref)||null}function Tne(t){return typeof t=="function"?t():t}const MM=h.forwardRef(function(s,r){const{children:a,container:n,disablePortal:i=!1}=s,[l,o]=h.useState(null),c=Br(h.isValidElement(a)?um(a):null,r);if($i(()=>{i||o(Tne(n)||document.body)},[n,i]),$i(()=>{if(l&&!i)return T_(r,l),()=>{T_(r,null)}},[r,l,i]),i){if(h.isValidElement(a)){const d={ref:c};return h.cloneElement(a,d)}return a}return l&&p1.createPortal(a,l)});function Pne(t){return yt("MuiPopper",t)}gt("MuiPopper",["root"]);function Rne(t,s){if(s==="ltr")return t;switch(t){case"bottom-end":return"bottom-start";case"bottom-start":return"bottom-end";case"top-end":return"top-start";case"top-start":return"top-end";default:return t}}function oN(t){return typeof t=="function"?t():t}function Dne(t){return t.nodeType!==void 0}const Ine=t=>{const{classes:s}=t;return bt({root:["root"]},Pne,s)},Mne={},Lne=h.forwardRef(function(s,r){const{anchorEl:a,children:n,direction:i,disablePortal:l,modifiers:o,open:c,placement:d,popperOptions:u,popperRef:m,slotProps:p={},slots:x={},TransitionProps:g,ownerState:f,...b}=s,j=h.useRef(null),v=Br(j,r),w=h.useRef(null),y=Br(w,m),C=h.useRef(y);$i(()=>{C.current=y},[y]),h.useImperativeHandle(m,()=>w.current,[]);const S=Rne(d,i),[_,E]=h.useState(S),[A,R]=h.useState(oN(a));h.useEffect(()=>{w.current&&w.current.forceUpdate()}),h.useEffect(()=>{a&&R(oN(a))},[a]),$i(()=>{if(!A||!c)return;const D=B=>{E(B.placement)};let $=[{name:"preventOverflow",options:{altBoundary:l}},{name:"flip",options:{altBoundary:l}},{name:"onUpdate",enabled:!0,phase:"afterWrite",fn:({state:B})=>{D(B)}}];o!=null&&($=$.concat(o)),u&&u.modifiers!=null&&($=$.concat(u.modifiers));const L=Ane(A,j.current,{placement:S,...u,modifiers:$});return C.current(L),()=>{L.destroy(),C.current(null)}},[A,l,o,c,u,S]);const I={placement:_};g!==null&&(I.TransitionProps=g);const N=Ine(s),P=x.root??"div",k=Yu({elementType:P,externalSlotProps:p.root,externalForwardedProps:b,additionalProps:{role:"tooltip",ref:v},ownerState:s,className:N.root});return e.jsx(P,{...k,children:typeof n=="function"?n(I):n})}),Fne=h.forwardRef(function(s,r){const{anchorEl:a,children:n,container:i,direction:l="ltr",disablePortal:o=!1,keepMounted:c=!1,modifiers:d,open:u,placement:m="bottom",popperOptions:p=Mne,popperRef:x,style:g,transition:f=!1,slotProps:b={},slots:j={},...v}=s,[w,y]=h.useState(!0),C=()=>{y(!1)},S=()=>{y(!0)};if(!c&&!u&&(!f||w))return null;let _;if(i)_=i;else if(a){const R=oN(a);_=R&&Dne(R)?za(R).body:za(null).body}const E=!u&&c&&(!f||w)?"none":void 0,A=f?{in:u,onEnter:C,onExited:S}:void 0;return e.jsx(MM,{disablePortal:o,container:_,children:e.jsx(Lne,{anchorEl:a,direction:l,disablePortal:o,modifiers:d,ref:r,open:f?!w:u,placement:m,popperOptions:p,popperRef:x,slotProps:b,slots:j,...v,style:{position:"fixed",top:0,left:0,display:E,...g},TransitionProps:A,children:n})})}),One=Pe(Fne,{name:"MuiPopper",slot:"Root"})({}),LM=h.forwardRef(function(s,r){const a=z0(),n=kt({props:s,name:"MuiPopper"}),{anchorEl:i,component:l,components:o,componentsProps:c,container:d,disablePortal:u,keepMounted:m,modifiers:p,open:x,placement:g,popperOptions:f,popperRef:b,transition:j,slots:v,slotProps:w,...y}=n,C=(v==null?void 0:v.root)??(o==null?void 0:o.Root),S={anchorEl:i,container:d,disablePortal:u,keepMounted:m,modifiers:p,open:x,placement:g,popperOptions:f,popperRef:b,transition:j,...y};return e.jsx(One,{as:l,direction:a?"rtl":"ltr",slots:{root:C},slotProps:w??c,...S,ref:r})}),Bne=Wn(e.jsx("path",{d:"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm5 13.59L15.59 17 12 13.41 8.41 17 7 15.59 10.59 12 7 8.41 8.41 7 12 10.59 15.59 7 17 8.41 13.41 12 17 15.59z"}));function $ne(t){return yt("MuiChip",t)}const $t=gt("MuiChip",["root","sizeSmall","sizeMedium","colorDefault","colorError","colorInfo","colorPrimary","colorSecondary","colorSuccess","colorWarning","disabled","clickable","clickableColorPrimary","clickableColorSecondary","deletable","deletableColorPrimary","deletableColorSecondary","outlined","filled","outlinedPrimary","outlinedSecondary","filledPrimary","filledSecondary","avatar","avatarSmall","avatarMedium","avatarColorPrimary","avatarColorSecondary","icon","iconSmall","iconMedium","iconColorPrimary","iconColorSecondary","label","labelSmall","labelMedium","deleteIcon","deleteIconSmall","deleteIconMedium","deleteIconColorPrimary","deleteIconColorSecondary","deleteIconOutlinedColorPrimary","deleteIconOutlinedColorSecondary","deleteIconFilledColorPrimary","deleteIconFilledColorSecondary","focusVisible"]),Une=t=>{const{classes:s,disabled:r,size:a,color:n,iconColor:i,onDelete:l,clickable:o,variant:c}=t,d={root:["root",c,r&&"disabled",`size${_e(a)}`,`color${_e(n)}`,o&&"clickable",o&&`clickableColor${_e(n)}`,l&&"deletable",l&&`deletableColor${_e(n)}`,`${c}${_e(n)}`],label:["label",`label${_e(a)}`],avatar:["avatar",`avatar${_e(a)}`,`avatarColor${_e(n)}`],icon:["icon",`icon${_e(a)}`,`iconColor${_e(i)}`],deleteIcon:["deleteIcon",`deleteIcon${_e(a)}`,`deleteIconColor${_e(n)}`,`deleteIcon${_e(c)}Color${_e(n)}`]};return bt(d,$ne,s)},Vne=Pe("div",{name:"MuiChip",slot:"Root",overridesResolver:(t,s)=>{const{ownerState:r}=t,{color:a,iconColor:n,clickable:i,onDelete:l,size:o,variant:c}=r;return[{[`& .${$t.avatar}`]:s.avatar},{[`& .${$t.avatar}`]:s[`avatar${_e(o)}`]},{[`& .${$t.avatar}`]:s[`avatarColor${_e(a)}`]},{[`& .${$t.icon}`]:s.icon},{[`& .${$t.icon}`]:s[`icon${_e(o)}`]},{[`& .${$t.icon}`]:s[`iconColor${_e(n)}`]},{[`& .${$t.deleteIcon}`]:s.deleteIcon},{[`& .${$t.deleteIcon}`]:s[`deleteIcon${_e(o)}`]},{[`& .${$t.deleteIcon}`]:s[`deleteIconColor${_e(a)}`]},{[`& .${$t.deleteIcon}`]:s[`deleteIcon${_e(c)}Color${_e(a)}`]},s.root,s[`size${_e(o)}`],s[`color${_e(a)}`],i&&s.clickable,i&&a!=="default"&&s[`clickableColor${_e(a)}`],l&&s.deletable,l&&a!=="default"&&s[`deletableColor${_e(a)}`],s[c],s[`${c}${_e(a)}`]]}})(Et(({theme:t})=>{const s=t.palette.mode==="light"?t.palette.grey[700]:t.palette.grey[300];return{maxWidth:"100%",fontFamily:t.typography.fontFamily,fontSize:t.typography.pxToRem(13),display:"inline-flex",alignItems:"center",justifyContent:"center",height:32,lineHeight:1.5,color:(t.vars||t).palette.text.primary,backgroundColor:(t.vars||t).palette.action.selected,borderRadius:32/2,whiteSpace:"nowrap",transition:t.transitions.create(["background-color","box-shadow"]),cursor:"unset",outline:0,textDecoration:"none",border:0,padding:0,verticalAlign:"middle",boxSizing:"border-box",[`&.${$t.disabled}`]:{opacity:(t.vars||t).palette.action.disabledOpacity,pointerEvents:"none"},[`& .${$t.avatar}`]:{marginLeft:5,marginRight:-6,width:24,height:24,color:t.vars?t.vars.palette.Chip.defaultAvatarColor:s,fontSize:t.typography.pxToRem(12)},[`& .${$t.avatarColorPrimary}`]:{color:(t.vars||t).palette.primary.contrastText,backgroundColor:(t.vars||t).palette.primary.dark},[`& .${$t.avatarColorSecondary}`]:{color:(t.vars||t).palette.secondary.contrastText,backgroundColor:(t.vars||t).palette.secondary.dark},[`& .${$t.avatarSmall}`]:{marginLeft:4,marginRight:-4,width:18,height:18,fontSize:t.typography.pxToRem(10)},[`& .${$t.icon}`]:{marginLeft:5,marginRight:-6},[`& .${$t.deleteIcon}`]:{WebkitTapHighlightColor:"transparent",color:t.alpha((t.vars||t).palette.text.primary,.26),fontSize:22,cursor:"pointer",margin:"0 5px 0 -6px","&:hover":{color:t.alpha((t.vars||t).palette.text.primary,.4)}},variants:[{props:{size:"small"},style:{height:24,[`& .${$t.icon}`]:{fontSize:18,marginLeft:4,marginRight:-4},[`& .${$t.deleteIcon}`]:{fontSize:16,marginRight:4,marginLeft:-4}}},...Object.entries(t.palette).filter(Hr(["contrastText"])).map(([r])=>({props:{color:r},style:{backgroundColor:(t.vars||t).palette[r].main,color:(t.vars||t).palette[r].contrastText,[`& .${$t.deleteIcon}`]:{color:t.alpha((t.vars||t).palette[r].contrastText,.7),"&:hover, &:active":{color:(t.vars||t).palette[r].contrastText}}}})),{props:r=>r.iconColor===r.color,style:{[`& .${$t.icon}`]:{color:t.vars?t.vars.palette.Chip.defaultIconColor:s}}},{props:r=>r.iconColor===r.color&&r.color!=="default",style:{[`& .${$t.icon}`]:{color:"inherit"}}},{props:{onDelete:!0},style:{[`&.${$t.focusVisible}`]:{backgroundColor:t.alpha((t.vars||t).palette.action.selected,`${(t.vars||t).palette.action.selectedOpacity} + ${(t.vars||t).palette.action.focusOpacity}`)}}},...Object.entries(t.palette).filter(Hr(["dark"])).map(([r])=>({props:{color:r,onDelete:!0},style:{[`&.${$t.focusVisible}`]:{background:(t.vars||t).palette[r].dark}}})),{props:{clickable:!0},style:{userSelect:"none",WebkitTapHighlightColor:"transparent",cursor:"pointer","&:hover":{backgroundColor:t.alpha((t.vars||t).palette.action.selected,`${(t.vars||t).palette.action.selectedOpacity} + ${(t.vars||t).palette.action.hoverOpacity}`)},[`&.${$t.focusVisible}`]:{backgroundColor:t.alpha((t.vars||t).palette.action.selected,`${(t.vars||t).palette.action.selectedOpacity} + ${(t.vars||t).palette.action.focusOpacity}`)},"&:active":{boxShadow:(t.vars||t).shadows[1]}}},...Object.entries(t.palette).filter(Hr(["dark"])).map(([r])=>({props:{color:r,clickable:!0},style:{[`&:hover, &.${$t.focusVisible}`]:{backgroundColor:(t.vars||t).palette[r].dark}}})),{props:{variant:"outlined"},style:{backgroundColor:"transparent",border:t.vars?`1px solid ${t.vars.palette.Chip.defaultBorder}`:`1px solid ${t.palette.mode==="light"?t.palette.grey[400]:t.palette.grey[700]}`,[`&.${$t.clickable}:hover`]:{backgroundColor:(t.vars||t).palette.action.hover},[`&.${$t.focusVisible}`]:{backgroundColor:(t.vars||t).palette.action.focus},[`& .${$t.avatar}`]:{marginLeft:4},[`& .${$t.avatarSmall}`]:{marginLeft:2},[`& .${$t.icon}`]:{marginLeft:4},[`& .${$t.iconSmall}`]:{marginLeft:2},[`& .${$t.deleteIcon}`]:{marginRight:5},[`& .${$t.deleteIconSmall}`]:{marginRight:3}}},...Object.entries(t.palette).filter(Hr()).map(([r])=>({props:{variant:"outlined",color:r},style:{color:(t.vars||t).palette[r].main,border:`1px solid ${t.alpha((t.vars||t).palette[r].main,.7)}`,[`&.${$t.clickable}:hover`]:{backgroundColor:t.alpha((t.vars||t).palette[r].main,(t.vars||t).palette.action.hoverOpacity)},[`&.${$t.focusVisible}`]:{backgroundColor:t.alpha((t.vars||t).palette[r].main,(t.vars||t).palette.action.focusOpacity)},[`& .${$t.deleteIcon}`]:{color:t.alpha((t.vars||t).palette[r].main,.7),"&:hover, &:active":{color:(t.vars||t).palette[r].main}}}}))]}})),qne=Pe("span",{name:"MuiChip",slot:"Label",overridesResolver:(t,s)=>{const{ownerState:r}=t,{size:a}=r;return[s.label,s[`label${_e(a)}`]]}})({overflow:"hidden",textOverflow:"ellipsis",paddingLeft:12,paddingRight:12,whiteSpace:"nowrap",variants:[{props:{variant:"outlined"},style:{paddingLeft:11,paddingRight:11}},{props:{size:"small"},style:{paddingLeft:8,paddingRight:8}},{props:{size:"small",variant:"outlined"},style:{paddingLeft:7,paddingRight:7}}]});function K_(t){return t.key==="Backspace"||t.key==="Delete"}const jn=h.forwardRef(function(s,r){const a=kt({props:s,name:"MuiChip"}),{avatar:n,className:i,clickable:l,color:o="default",component:c,deleteIcon:d,disabled:u=!1,icon:m,label:p,onClick:x,onDelete:g,onKeyDown:f,onKeyUp:b,size:j="medium",variant:v="filled",tabIndex:w,skipFocusWhenDisabled:y=!1,slots:C={},slotProps:S={},..._}=a,E=h.useRef(null),A=Br(E,r),R=de=>{de.stopPropagation(),g&&g(de)},I=de=>{de.currentTarget===de.target&&K_(de)&&de.preventDefault(),f&&f(de)},N=de=>{de.currentTarget===de.target&&g&&K_(de)&&g(de),b&&b(de)},P=l!==!1&&x?!0:l,k=P||g?td:c||"div",D={...a,component:k,disabled:u,size:j,color:o,iconColor:h.isValidElement(m)&&m.props.color||o,onDelete:!!g,clickable:P,variant:v},$=Une(D),L=k===td?{component:c||"div",focusVisibleClassName:$.focusVisible,...g&&{disableRipple:!0}}:{};let B=null;g&&(B=d&&h.isValidElement(d)?h.cloneElement(d,{className:oe(d.props.className,$.deleteIcon),onClick:R}):e.jsx(Bne,{className:$.deleteIcon,onClick:R}));let T=null;n&&h.isValidElement(n)&&(T=h.cloneElement(n,{className:oe($.avatar,n.props.className)}));let O=null;m&&h.isValidElement(m)&&(O=h.cloneElement(m,{className:oe($.icon,m.props.className)}));const q={slots:C,slotProps:S},[K,le]=Nt("root",{elementType:Vne,externalForwardedProps:{...q,..._},ownerState:D,shouldForwardComponentProp:!0,ref:A,className:oe($.root,i),additionalProps:{disabled:P&&u?!0:void 0,tabIndex:y&&u?-1:w,...L},getSlotProps:de=>({...de,onClick:fe=>{var z;(z=de.onClick)==null||z.call(de,fe),x==null||x(fe)},onKeyDown:fe=>{var z;(z=de.onKeyDown)==null||z.call(de,fe),I(fe)},onKeyUp:fe=>{var z;(z=de.onKeyUp)==null||z.call(de,fe),N(fe)}})}),[X,se]=Nt("label",{elementType:qne,externalForwardedProps:q,ownerState:D,className:$.label});return e.jsxs(K,{as:k,...le,children:[T||O,e.jsx(X,{...se,children:p}),B]})});function Zp(t){return parseInt(t,10)||0}const Wne={shadow:{visibility:"hidden",position:"absolute",overflow:"hidden",height:0,top:0,left:0,transform:"translateZ(0)"}};function zne(t){for(const s in t)return!1;return!0}function H_(t){return zne(t)||t.outerHeightStyle===0&&!t.overflowing}const Gne=h.forwardRef(function(s,r){const{onChange:a,maxRows:n,minRows:i=1,style:l,value:o,...c}=s,{current:d}=h.useRef(o!=null),u=h.useRef(null),m=Br(r,u),p=h.useRef(null),x=h.useRef(null),g=h.useCallback(()=>{const w=u.current,y=x.current;if(!w||!y)return;const S=mi(w).getComputedStyle(w);if(S.width==="0px")return{outerHeightStyle:0,overflowing:!1};y.style.width=S.width,y.value=w.value||s.placeholder||"x",y.value.slice(-1)===`
`&&(y.value+=" ");const _=S.boxSizing,E=Zp(S.paddingBottom)+Zp(S.paddingTop),A=Zp(S.borderBottomWidth)+Zp(S.borderTopWidth),R=y.scrollHeight;y.value="x";const I=y.scrollHeight;let N=R;i&&(N=Math.max(Number(i)*I,N)),n&&(N=Math.min(Number(n)*I,N)),N=Math.max(N,I);const P=N+(_==="border-box"?E+A:0),k=Math.abs(N-R)<=1;return{outerHeightStyle:P,overflowing:k}},[n,i,s.placeholder]),f=Pn(()=>{const w=u.current,y=g();if(!w||!y||H_(y))return!1;const C=y.outerHeightStyle;return p.current!=null&&p.current!==C}),b=h.useCallback(()=>{const w=u.current,y=g();if(!w||!y||H_(y))return;const C=y.outerHeightStyle;p.current!==C&&(p.current=C,w.style.height=`${C}px`),w.style.overflow=y.overflowing?"hidden":""},[g]),j=h.useRef(-1);$i(()=>{const w=By(b),y=u==null?void 0:u.current;if(!y)return;const C=mi(y);C.addEventListener("resize",w);let S;return typeof ResizeObserver<"u"&&(S=new ResizeObserver(()=>{f()&&(S.unobserve(y),cancelAnimationFrame(j.current),b(),j.current=requestAnimationFrame(()=>{S.observe(y)}))}),S.observe(y)),()=>{w.clear(),cancelAnimationFrame(j.current),C.removeEventListener("resize",w),S&&S.disconnect()}},[g,b,f]),$i(()=>{b()});const v=w=>{d||b();const y=w.target,C=y.value.length,S=y.value.endsWith(`
`),_=y.selectionStart===C;S&&_&&y.setSelectionRange(C,C),a&&a(w)};return e.jsxs(h.Fragment,{children:[e.jsx("textarea",{value:o,onChange:v,ref:m,rows:i,style:l,...c}),e.jsx("textarea",{"aria-hidden":!0,className:s.className,readOnly:!0,ref:x,tabIndex:-1,style:{...Wne.shadow,...l,paddingTop:0,paddingBottom:0}})]})});function cd({props:t,states:s,muiFormControl:r}){return s.reduce((a,n)=>(a[n]=t[n],r&&typeof t[n]>"u"&&(a[n]=r[n]),a),{})}const nk=h.createContext(void 0);function Ho(){return h.useContext(nk)}function Y_(t){return t!=null&&!(Array.isArray(t)&&t.length===0)}function cf(t,s=!1){return t&&(Y_(t.value)&&t.value!==""||s&&Y_(t.defaultValue)&&t.defaultValue!=="")}function Kne(t){return t.startAdornment}function Hne(t){return yt("MuiInputBase",t)}const Qu=gt("MuiInputBase",["root","formControl","focused","disabled","adornedStart","adornedEnd","error","sizeSmall","multiline","colorSecondary","fullWidth","hiddenLabel","readOnly","input","inputSizeSmall","inputMultiline","inputTypeSearch","inputAdornedStart","inputAdornedEnd","inputHiddenLabel"]);var Q_;const qy=(t,s)=>{const{ownerState:r}=t;return[s.root,r.formControl&&s.formControl,r.startAdornment&&s.adornedStart,r.endAdornment&&s.adornedEnd,r.error&&s.error,r.size==="small"&&s.sizeSmall,r.multiline&&s.multiline,r.color&&s[`color${_e(r.color)}`],r.fullWidth&&s.fullWidth,r.hiddenLabel&&s.hiddenLabel]},Wy=(t,s)=>{const{ownerState:r}=t;return[s.input,r.size==="small"&&s.inputSizeSmall,r.multiline&&s.inputMultiline,r.type==="search"&&s.inputTypeSearch,r.startAdornment&&s.inputAdornedStart,r.endAdornment&&s.inputAdornedEnd,r.hiddenLabel&&s.inputHiddenLabel]},Yne=t=>{const{classes:s,color:r,disabled:a,error:n,endAdornment:i,focused:l,formControl:o,fullWidth:c,hiddenLabel:d,multiline:u,readOnly:m,size:p,startAdornment:x,type:g}=t,f={root:["root",`color${_e(r)}`,a&&"disabled",n&&"error",c&&"fullWidth",l&&"focused",o&&"formControl",p&&p!=="medium"&&`size${_e(p)}`,u&&"multiline",x&&"adornedStart",i&&"adornedEnd",d&&"hiddenLabel",m&&"readOnly"],input:["input",a&&"disabled",g==="search"&&"inputTypeSearch",u&&"inputMultiline",p==="small"&&"inputSizeSmall",d&&"inputHiddenLabel",x&&"inputAdornedStart",i&&"inputAdornedEnd",m&&"readOnly"]};return bt(f,Hne,s)},zy=Pe("div",{name:"MuiInputBase",slot:"Root",overridesResolver:qy})(Et(({theme:t})=>({...t.typography.body1,color:(t.vars||t).palette.text.primary,lineHeight:"1.4375em",boxSizing:"border-box",position:"relative",cursor:"text",display:"inline-flex",alignItems:"center",[`&.${Qu.disabled}`]:{color:(t.vars||t).palette.text.disabled,cursor:"default"},variants:[{props:({ownerState:s})=>s.multiline,style:{padding:"4px 0 5px"}},{props:({ownerState:s,size:r})=>s.multiline&&r==="small",style:{paddingTop:1}},{props:({ownerState:s})=>s.fullWidth,style:{width:"100%"}}]}))),Gy=Pe("input",{name:"MuiInputBase",slot:"Input",overridesResolver:Wy})(Et(({theme:t})=>{const s=t.palette.mode==="light",r={color:"currentColor",...t.vars?{opacity:t.vars.opacity.inputPlaceholder}:{opacity:s?.42:.5},transition:t.transitions.create("opacity",{duration:t.transitions.duration.shorter})},a={opacity:"0 !important"},n=t.vars?{opacity:t.vars.opacity.inputPlaceholder}:{opacity:s?.42:.5};return{font:"inherit",letterSpacing:"inherit",color:"currentColor",padding:"4px 0 5px",border:0,boxSizing:"content-box",background:"none",height:"1.4375em",margin:0,WebkitTapHighlightColor:"transparent",display:"block",minWidth:0,width:"100%","&::-webkit-input-placeholder":r,"&::-moz-placeholder":r,"&::-ms-input-placeholder":r,"&:focus":{outline:0},"&:invalid":{boxShadow:"none"},"&::-webkit-search-decoration":{WebkitAppearance:"none"},[`label[data-shrink=false] + .${Qu.formControl} &`]:{"&::-webkit-input-placeholder":a,"&::-moz-placeholder":a,"&::-ms-input-placeholder":a,"&:focus::-webkit-input-placeholder":n,"&:focus::-moz-placeholder":n,"&:focus::-ms-input-placeholder":n},[`&.${Qu.disabled}`]:{opacity:1,WebkitTextFillColor:(t.vars||t).palette.text.disabled},variants:[{props:({ownerState:i})=>!i.disableInjectingGlobalStyles,style:{animationName:"mui-auto-fill-cancel",animationDuration:"10ms","&:-webkit-autofill":{animationDuration:"5000s",animationName:"mui-auto-fill"}}},{props:{size:"small"},style:{paddingTop:1}},{props:({ownerState:i})=>i.multiline,style:{height:"auto",resize:"none",padding:0,paddingTop:0}},{props:{type:"search"},style:{MozAppearance:"textfield"}}]}})),J_=xre({"@keyframes mui-auto-fill":{from:{display:"block"}},"@keyframes mui-auto-fill-cancel":{from:{display:"block"}}}),ik=h.forwardRef(function(s,r){const a=kt({props:s,name:"MuiInputBase"}),{"aria-describedby":n,autoComplete:i,autoFocus:l,className:o,color:c,components:d={},componentsProps:u={},defaultValue:m,disabled:p,disableInjectingGlobalStyles:x,endAdornment:g,error:f,fullWidth:b=!1,id:j,inputComponent:v="input",inputProps:w={},inputRef:y,margin:C,maxRows:S,minRows:_,multiline:E=!1,name:A,onBlur:R,onChange:I,onClick:N,onFocus:P,onKeyDown:k,onKeyUp:D,placeholder:$,readOnly:L,renderSuffix:B,rows:T,size:O,slotProps:q={},slots:K={},startAdornment:le,type:X="text",value:se,...de}=a,fe=w.value!=null?w.value:se,{current:z}=h.useRef(fe!=null),re=h.useRef(),ie=h.useCallback(Xe=>{},[]),Y=Br(re,y,w.ref,ie),[G,H]=h.useState(!1),ue=Ho(),me=cd({props:a,muiFormControl:ue,states:["color","disabled","error","hiddenLabel","size","required","filled"]});me.focused=ue?ue.focused:G,h.useEffect(()=>{!ue&&p&&G&&(H(!1),R&&R())},[ue,p,G,R]);const ne=ue&&ue.onFilled,Ae=ue&&ue.onEmpty,Fe=h.useCallback(Xe=>{cf(Xe)?ne&&ne():Ae&&Ae()},[ne,Ae]);$i(()=>{z&&Fe({value:fe})},[fe,Fe,z]);const at=Xe=>{P&&P(Xe),w.onFocus&&w.onFocus(Xe),ue&&ue.onFocus?ue.onFocus(Xe):H(!0)},J=Xe=>{R&&R(Xe),w.onBlur&&w.onBlur(Xe),ue&&ue.onBlur?ue.onBlur(Xe):H(!1)},Q=(Xe,...Yt)=>{if(!z){const Mt=Xe.target||re.current;if(Mt==null)throw new Error(_l(1));Fe({value:Mt.value})}w.onChange&&w.onChange(Xe,...Yt),I&&I(Xe,...Yt)};h.useEffect(()=>{Fe(re.current)},[]);const ee=Xe=>{re.current&&Xe.currentTarget===Xe.target&&re.current.focus(),N&&N(Xe)};let Ne=v,ye=w;E&&Ne==="input"&&(T?ye={type:void 0,minRows:T,maxRows:T,...ye}:ye={type:void 0,maxRows:S,minRows:_,...ye},Ne=Gne);const he=Xe=>{Fe(Xe.animationName==="mui-auto-fill-cancel"?re.current:{value:"x"})};h.useEffect(()=>{ue&&ue.setAdornedStart(!!le)},[ue,le]);const Ce={...a,color:me.color||"primary",disabled:me.disabled,endAdornment:g,error:me.error,focused:me.focused,formControl:ue,fullWidth:b,hiddenLabel:me.hiddenLabel,multiline:E,size:me.size,startAdornment:le,type:X},Se=Yne(Ce),Be=K.root||d.Root||zy,Dt=q.root||u.root||{},Ht=K.input||d.Input||Gy;return ye={...ye,...q.input??u.input},e.jsxs(h.Fragment,{children:[!x&&typeof J_=="function"&&(Q_||(Q_=e.jsx(J_,{}))),e.jsxs(Be,{...Dt,ref:r,onClick:ee,...de,...!rf(Be)&&{ownerState:{...Ce,...Dt.ownerState}},className:oe(Se.root,Dt.className,o,L&&"MuiInputBase-readOnly"),children:[le,e.jsx(nk.Provider,{value:null,children:e.jsx(Ht,{"aria-invalid":me.error,"aria-describedby":n,autoComplete:i,autoFocus:l,defaultValue:m,disabled:me.disabled,id:j,onAnimationStart:he,name:A,placeholder:$,readOnly:L,required:me.required,rows:T,value:fe,onKeyDown:k,onKeyUp:D,type:X,...ye,...!rf(Ht)&&{as:Ne,ownerState:{...Ce,...ye.ownerState}},ref:Y,className:oe(Se.input,ye.className,L&&"MuiInputBase-readOnly"),onBlur:J,onChange:Q,onFocus:at})}),g,B?B({...me,startAdornment:le}):null]})]})});function Qne(t){return yt("MuiInput",t)}const Mm={...Qu,...gt("MuiInput",["root","underline","input"])};function Jne(t){return yt("MuiOutlinedInput",t)}const fi={...Qu,...gt("MuiOutlinedInput",["root","notchedOutline","input"])};function Zne(t){return yt("MuiFilledInput",t)}const sc={...Qu,...gt("MuiFilledInput",["root","underline","input","adornedStart","adornedEnd","sizeSmall","multiline","hiddenLabel"])},Xne=Wn(e.jsx("path",{d:"M7 10l5 5 5-5z"})),eie={entering:{opacity:1},entered:{opacity:1}},cN=h.forwardRef(function(s,r){const a=cm(),n={enter:a.transitions.duration.enteringScreen,exit:a.transitions.duration.leavingScreen},{addEndListener:i,appear:l=!0,children:o,easing:c,in:d,onEnter:u,onEntered:m,onEntering:p,onExit:x,onExited:g,onExiting:f,style:b,timeout:j=n,TransitionComponent:v=zi,...w}=s,y=h.useRef(null),C=Br(y,um(o),r),S=k=>D=>{if(k){const $=y.current;D===void 0?k($):k($,D)}},_=S(p),E=S((k,D)=>{jM(k);const $=sf({style:b,timeout:j,easing:c},{mode:"enter"});k.style.webkitTransition=a.transitions.create("opacity",$),k.style.transition=a.transitions.create("opacity",$),u&&u(k,D)}),A=S(m),R=S(f),I=S(k=>{const D=sf({style:b,timeout:j,easing:c},{mode:"exit"});k.style.webkitTransition=a.transitions.create("opacity",D),k.style.transition=a.transitions.create("opacity",D),x&&x(k)}),N=S(g),P=k=>{i&&i(y.current,k)};return e.jsx(v,{appear:l,in:d,nodeRef:y,onEnter:E,onEntered:A,onEntering:_,onExit:I,onExited:N,onExiting:R,addEndListener:P,timeout:j,...w,children:(k,{ownerState:D,...$})=>h.cloneElement(o,{style:{opacity:0,visibility:k==="exited"&&!d?"hidden":void 0,...eie[k],...b,...o.props.style},ref:C,...$})})});function tie(t){return yt("MuiBackdrop",t)}gt("MuiBackdrop",["root","invisible"]);const sie=t=>{const{classes:s,invisible:r}=t;return bt({root:["root",r&&"invisible"]},tie,s)},rie=Pe("div",{name:"MuiBackdrop",slot:"Root",overridesResolver:(t,s)=>{const{ownerState:r}=t;return[s.root,r.invisible&&s.invisible]}})({position:"fixed",display:"flex",alignItems:"center",justifyContent:"center",right:0,bottom:0,top:0,left:0,backgroundColor:"rgba(0, 0, 0, 0.5)",WebkitTapHighlightColor:"transparent",variants:[{props:{invisible:!0},style:{backgroundColor:"transparent"}}]}),FM=h.forwardRef(function(s,r){const a=kt({props:s,name:"MuiBackdrop"}),{children:n,className:i,component:l="div",invisible:o=!1,open:c,components:d={},componentsProps:u={},slotProps:m={},slots:p={},TransitionComponent:x,transitionDuration:g,...f}=a,b={...a,component:l,invisible:o},j=sie(b),v={transition:x,root:d.Root,...p},w={...u,...m},y={component:l,slots:v,slotProps:w},[C,S]=Nt("root",{elementType:rie,externalForwardedProps:y,className:oe(j.root,i),ownerState:b}),[_,E]=Nt("transition",{elementType:cN,externalForwardedProps:y,ownerState:b});return e.jsx(_,{in:c,timeout:g,...f,...E,children:e.jsx(C,{"aria-hidden":!0,...S,classes:j,ref:r,children:n})})}),aie=gt("MuiBox",["root"]),nie=gM(),Tt=cse({themeId:ay,defaultTheme:nie,defaultClassName:aie.root,generateClassName:iM.generate});function iie(t){return yt("MuiButton",t)}const rc=gt("MuiButton",["root","text","textInherit","textPrimary","textSecondary","textSuccess","textError","textInfo","textWarning","outlined","outlinedInherit","outlinedPrimary","outlinedSecondary","outlinedSuccess","outlinedError","outlinedInfo","outlinedWarning","contained","containedInherit","containedPrimary","containedSecondary","containedSuccess","containedError","containedInfo","containedWarning","disableElevation","focusVisible","disabled","colorInherit","colorPrimary","colorSecondary","colorSuccess","colorError","colorInfo","colorWarning","textSizeSmall","textSizeMedium","textSizeLarge","outlinedSizeSmall","outlinedSizeMedium","outlinedSizeLarge","containedSizeSmall","containedSizeMedium","containedSizeLarge","sizeMedium","sizeSmall","sizeLarge","fullWidth","startIcon","endIcon","icon","iconSizeSmall","iconSizeMedium","iconSizeLarge","loading","loadingWrapper","loadingIconPlaceholder","loadingIndicator","loadingPositionCenter","loadingPositionStart","loadingPositionEnd"]),lie=h.createContext({}),oie=h.createContext(void 0),cie=t=>{const{color:s,disableElevation:r,fullWidth:a,size:n,variant:i,loading:l,loadingPosition:o,classes:c}=t,d={root:["root",l&&"loading",i,`${i}${_e(s)}`,`size${_e(n)}`,`${i}Size${_e(n)}`,`color${_e(s)}`,r&&"disableElevation",a&&"fullWidth",l&&`loadingPosition${_e(o)}`],startIcon:["icon","startIcon",`iconSize${_e(n)}`],endIcon:["icon","endIcon",`iconSize${_e(n)}`],loadingIndicator:["loadingIndicator"],loadingWrapper:["loadingWrapper"]},u=bt(d,iie,c);return{...c,...u}},OM=[{props:{size:"small"},style:{"& > *:nth-of-type(1)":{fontSize:18}}},{props:{size:"medium"},style:{"& > *:nth-of-type(1)":{fontSize:20}}},{props:{size:"large"},style:{"& > *:nth-of-type(1)":{fontSize:22}}}],die=Pe(td,{shouldForwardProp:t=>qn(t)||t==="classes",name:"MuiButton",slot:"Root",overridesResolver:(t,s)=>{const{ownerState:r}=t;return[s.root,s[r.variant],s[`${r.variant}${_e(r.color)}`],s[`size${_e(r.size)}`],s[`${r.variant}Size${_e(r.size)}`],r.color==="inherit"&&s.colorInherit,r.disableElevation&&s.disableElevation,r.fullWidth&&s.fullWidth,r.loading&&s.loading]}})(Et(({theme:t})=>{const s=t.palette.mode==="light"?t.palette.grey[300]:t.palette.grey[800],r=t.palette.mode==="light"?t.palette.grey.A100:t.palette.grey[700];return{...t.typography.button,minWidth:64,padding:"6px 16px",border:0,borderRadius:(t.vars||t).shape.borderRadius,transition:t.transitions.create(["background-color","box-shadow","border-color","color"],{duration:t.transitions.duration.short}),"&:hover":{textDecoration:"none"},[`&.${rc.disabled}`]:{color:(t.vars||t).palette.action.disabled},variants:[{props:{variant:"contained"},style:{color:"var(--variant-containedColor)",backgroundColor:"var(--variant-containedBg)",boxShadow:(t.vars||t).shadows[2],"&:hover":{boxShadow:(t.vars||t).shadows[4],"@media (hover: none)":{boxShadow:(t.vars||t).shadows[2]}},"&:active":{boxShadow:(t.vars||t).shadows[8]},[`&.${rc.focusVisible}`]:{boxShadow:(t.vars||t).shadows[6]},[`&.${rc.disabled}`]:{color:(t.vars||t).palette.action.disabled,boxShadow:(t.vars||t).shadows[0],backgroundColor:(t.vars||t).palette.action.disabledBackground}}},{props:{variant:"outlined"},style:{padding:"5px 15px",border:"1px solid currentColor",borderColor:"var(--variant-outlinedBorder, currentColor)",backgroundColor:"var(--variant-outlinedBg)",color:"var(--variant-outlinedColor)",[`&.${rc.disabled}`]:{border:`1px solid ${(t.vars||t).palette.action.disabledBackground}`}}},{props:{variant:"text"},style:{padding:"6px 8px",color:"var(--variant-textColor)",backgroundColor:"var(--variant-textBg)"}},...Object.entries(t.palette).filter(Hr()).map(([a])=>({props:{color:a},style:{"--variant-textColor":(t.vars||t).palette[a].main,"--variant-outlinedColor":(t.vars||t).palette[a].main,"--variant-outlinedBorder":t.alpha((t.vars||t).palette[a].main,.5),"--variant-containedColor":(t.vars||t).palette[a].contrastText,"--variant-containedBg":(t.vars||t).palette[a].main,"@media (hover: hover)":{"&:hover":{"--variant-containedBg":(t.vars||t).palette[a].dark,"--variant-textBg":t.alpha((t.vars||t).palette[a].main,(t.vars||t).palette.action.hoverOpacity),"--variant-outlinedBorder":(t.vars||t).palette[a].main,"--variant-outlinedBg":t.alpha((t.vars||t).palette[a].main,(t.vars||t).palette.action.hoverOpacity)}}}})),{props:{color:"inherit"},style:{color:"inherit",borderColor:"currentColor","--variant-containedBg":t.vars?t.vars.palette.Button.inheritContainedBg:s,"@media (hover: hover)":{"&:hover":{"--variant-containedBg":t.vars?t.vars.palette.Button.inheritContainedHoverBg:r,"--variant-textBg":t.alpha((t.vars||t).palette.text.primary,(t.vars||t).palette.action.hoverOpacity),"--variant-outlinedBg":t.alpha((t.vars||t).palette.text.primary,(t.vars||t).palette.action.hoverOpacity)}}}},{props:{size:"small",variant:"text"},style:{padding:"4px 5px",fontSize:t.typography.pxToRem(13)}},{props:{size:"large",variant:"text"},style:{padding:"8px 11px",fontSize:t.typography.pxToRem(15)}},{props:{size:"small",variant:"outlined"},style:{padding:"3px 9px",fontSize:t.typography.pxToRem(13)}},{props:{size:"large",variant:"outlined"},style:{padding:"7px 21px",fontSize:t.typography.pxToRem(15)}},{props:{size:"small",variant:"contained"},style:{padding:"4px 10px",fontSize:t.typography.pxToRem(13)}},{props:{size:"large",variant:"contained"},style:{padding:"8px 22px",fontSize:t.typography.pxToRem(15)}},{props:{disableElevation:!0},style:{boxShadow:"none","&:hover":{boxShadow:"none"},[`&.${rc.focusVisible}`]:{boxShadow:"none"},"&:active":{boxShadow:"none"},[`&.${rc.disabled}`]:{boxShadow:"none"}}},{props:{fullWidth:!0},style:{width:"100%"}},{props:{loadingPosition:"center"},style:{transition:t.transitions.create(["background-color","box-shadow","border-color"],{duration:t.transitions.duration.short}),[`&.${rc.loading}`]:{color:"transparent"}}}]}})),uie=Pe("span",{name:"MuiButton",slot:"StartIcon",overridesResolver:(t,s)=>{const{ownerState:r}=t;return[s.startIcon,r.loading&&s.startIconLoadingStart,s[`iconSize${_e(r.size)}`]]}})(({theme:t})=>({display:"inherit",marginRight:8,marginLeft:-4,variants:[{props:{size:"small"},style:{marginLeft:-2}},{props:{loadingPosition:"start",loading:!0},style:{transition:t.transitions.create(["opacity"],{duration:t.transitions.duration.short}),opacity:0}},{props:{loadingPosition:"start",loading:!0,fullWidth:!0},style:{marginRight:-8}},...OM]})),mie=Pe("span",{name:"MuiButton",slot:"EndIcon",overridesResolver:(t,s)=>{const{ownerState:r}=t;return[s.endIcon,r.loading&&s.endIconLoadingEnd,s[`iconSize${_e(r.size)}`]]}})(({theme:t})=>({display:"inherit",marginRight:-4,marginLeft:8,variants:[{props:{size:"small"},style:{marginRight:-2}},{props:{loadingPosition:"end",loading:!0},style:{transition:t.transitions.create(["opacity"],{duration:t.transitions.duration.short}),opacity:0}},{props:{loadingPosition:"end",loading:!0,fullWidth:!0},style:{marginLeft:-8}},...OM]})),hie=Pe("span",{name:"MuiButton",slot:"LoadingIndicator"})(({theme:t})=>({display:"none",position:"absolute",visibility:"visible",variants:[{props:{loading:!0},style:{display:"flex"}},{props:{loadingPosition:"start"},style:{left:14}},{props:{loadingPosition:"start",size:"small"},style:{left:10}},{props:{variant:"text",loadingPosition:"start"},style:{left:6}},{props:{loadingPosition:"center"},style:{left:"50%",transform:"translate(-50%)",color:(t.vars||t).palette.action.disabled}},{props:{loadingPosition:"end"},style:{right:14}},{props:{loadingPosition:"end",size:"small"},style:{right:10}},{props:{variant:"text",loadingPosition:"end"},style:{right:6}},{props:{loadingPosition:"start",fullWidth:!0},style:{position:"relative",left:-10}},{props:{loadingPosition:"end",fullWidth:!0},style:{position:"relative",right:-10}}]})),Z_=Pe("span",{name:"MuiButton",slot:"LoadingIconPlaceholder"})({display:"inline-block",width:"1em",height:"1em"}),ol=h.forwardRef(function(s,r){const a=h.useContext(lie),n=h.useContext(oie),i=Zg(a,s),l=kt({props:i,name:"MuiButton"}),{children:o,color:c="primary",component:d="button",className:u,disabled:m=!1,disableElevation:p=!1,disableFocusRipple:x=!1,endIcon:g,focusVisibleClassName:f,fullWidth:b=!1,id:j,loading:v=null,loadingIndicator:w,loadingPosition:y="center",size:C="medium",startIcon:S,type:_,variant:E="text",...A}=l,R=om(j),I=w??e.jsx(Uy,{"aria-labelledby":R,color:"inherit",size:16}),N={...l,color:c,component:d,disabled:m,disableElevation:p,disableFocusRipple:x,fullWidth:b,loading:v,loadingIndicator:I,loadingPosition:y,size:C,type:_,variant:E},P=cie(N),k=(S||v&&y==="start")&&e.jsx(uie,{className:P.startIcon,ownerState:N,children:S||e.jsx(Z_,{className:P.loadingIconPlaceholder,ownerState:N})}),D=(g||v&&y==="end")&&e.jsx(mie,{className:P.endIcon,ownerState:N,children:g||e.jsx(Z_,{className:P.loadingIconPlaceholder,ownerState:N})}),$=n||"",L=typeof v=="boolean"?e.jsx("span",{className:P.loadingWrapper,style:{display:"contents"},children:v&&e.jsx(hie,{className:P.loadingIndicator,ownerState:N,children:I})}):null;return e.jsxs(die,{ownerState:N,className:oe(a.className,P.root,u,$),component:d,disabled:m||v,focusRipple:!x,focusVisibleClassName:oe(P.focusVisible,f),ref:r,type:_,id:v?R:j,...A,classes:P,children:[k,y!=="end"&&L,o,y==="end"&&L,D]})});function pie(t){return yt("MuiCard",t)}gt("MuiCard",["root"]);const xie=t=>{const{classes:s}=t;return bt({root:["root"]},pie,s)},gie=Pe(dm,{name:"MuiCard",slot:"Root"})({overflow:"hidden"}),fie=h.forwardRef(function(s,r){const a=kt({props:s,name:"MuiCard"}),{className:n,raised:i=!1,...l}=a,o={...a,raised:i},c=xie(o);return e.jsx(gie,{className:oe(c.root,n),elevation:i?8:void 0,ref:r,ownerState:o,...l})});function yie(t){return yt("MuiCardContent",t)}gt("MuiCardContent",["root"]);const bie=t=>{const{classes:s}=t;return bt({root:["root"]},yie,s)},vie=Pe("div",{name:"MuiCardContent",slot:"Root"})({padding:16,"&:last-child":{paddingBottom:24}}),jie=h.forwardRef(function(s,r){const a=kt({props:s,name:"MuiCardContent"}),{className:n,component:i="div",...l}=a,o={...a,component:i},c=bie(o);return e.jsx(vie,{as:i,className:oe(c.root,n),ownerState:o,ref:r,...l})});function wie(t){return yt("PrivateSwitchBase",t)}gt("PrivateSwitchBase",["root","checked","disabled","input","edgeStart","edgeEnd"]);const Nie=t=>{const{classes:s,checked:r,disabled:a,edge:n}=t,i={root:["root",r&&"checked",a&&"disabled",n&&`edge${_e(n)}`],input:["input"]};return bt(i,wie,s)},kie=Pe(td,{name:"MuiSwitchBase"})({padding:9,borderRadius:"50%",variants:[{props:{edge:"start",size:"small"},style:{marginLeft:-3}},{props:({edge:t,ownerState:s})=>t==="start"&&s.size!=="small",style:{marginLeft:-12}},{props:{edge:"end",size:"small"},style:{marginRight:-3}},{props:({edge:t,ownerState:s})=>t==="end"&&s.size!=="small",style:{marginRight:-12}}]}),Cie=Pe("input",{name:"MuiSwitchBase",shouldForwardProp:qn})({cursor:"inherit",position:"absolute",opacity:0,width:"100%",height:"100%",top:0,left:0,margin:0,padding:0,zIndex:1}),Sie=h.forwardRef(function(s,r){const{autoFocus:a,checked:n,checkedIcon:i,defaultChecked:l,disabled:o,disableFocusRipple:c=!1,edge:d=!1,icon:u,id:m,inputProps:p,inputRef:x,name:g,onBlur:f,onChange:b,onFocus:j,readOnly:v,required:w=!1,tabIndex:y,type:C,value:S,slots:_={},slotProps:E={},...A}=s,[R,I]=ef({controlled:n,default:!!l,name:"SwitchBase",state:"checked"}),N=Ho(),P=se=>{j&&j(se),N&&N.onFocus&&N.onFocus(se)},k=se=>{f&&f(se),N&&N.onBlur&&N.onBlur(se)},D=se=>{if(se.nativeEvent.defaultPrevented)return;const de=se.target.checked;I(de),b&&b(se,de)};let $=o;N&&typeof $>"u"&&($=N.disabled);const L=C==="checkbox"||C==="radio",B={...s,checked:R,disabled:$,disableFocusRipple:c,edge:d},T=Nie(B),O={slots:_,slotProps:{input:p,...E}},[q,K]=Nt("root",{ref:r,elementType:kie,className:T.root,shouldForwardComponentProp:!0,externalForwardedProps:{...O,component:"span",...A},getSlotProps:se=>({...se,onFocus:de=>{var fe;(fe=se.onFocus)==null||fe.call(se,de),P(de)},onBlur:de=>{var fe;(fe=se.onBlur)==null||fe.call(se,de),k(de)}}),ownerState:B,additionalProps:{centerRipple:!0,focusRipple:!c,disabled:$,role:void 0,tabIndex:null}}),[le,X]=Nt("input",{ref:x,elementType:Cie,className:T.input,externalForwardedProps:O,getSlotProps:se=>({...se,onChange:de=>{var fe;(fe=se.onChange)==null||fe.call(se,de),D(de)}}),ownerState:B,additionalProps:{autoFocus:a,checked:n,defaultChecked:l,disabled:$,id:L?m:void 0,name:g,readOnly:v,required:w,tabIndex:y,type:C,...C==="checkbox"&&S===void 0?{}:{value:S}}});return e.jsxs(q,{...K,children:[e.jsx(le,{...X}),R?i:u]})});function BM(t=window){const s=t.document.documentElement.clientWidth;return t.innerWidth-s}function _ie(t){const s=za(t);return s.body===t?mi(t).innerWidth>s.documentElement.clientWidth:t.scrollHeight>t.clientHeight}function Nh(t,s){s?t.setAttribute("aria-hidden","true"):t.removeAttribute("aria-hidden")}function X_(t){return parseInt(mi(t).getComputedStyle(t).paddingRight,10)||0}function Eie(t){const r=["TEMPLATE","SCRIPT","STYLE","LINK","MAP","META","NOSCRIPT","PICTURE","COL","COLGROUP","PARAM","SLOT","SOURCE","TRACK"].includes(t.tagName),a=t.tagName==="INPUT"&&t.getAttribute("type")==="hidden";return r||a}function eE(t,s,r,a,n){const i=[s,r,...a];[].forEach.call(t.children,l=>{const o=!i.includes(l),c=!Eie(l);o&&c&&Nh(l,n)})}function bv(t,s){let r=-1;return t.some((a,n)=>s(a)?(r=n,!0):!1),r}function Aie(t,s){const r=[],a=t.container;if(!s.disableScrollLock){if(_ie(a)){const l=BM(mi(a));r.push({value:a.style.paddingRight,property:"padding-right",el:a}),a.style.paddingRight=`${X_(a)+l}px`;const o=za(a).querySelectorAll(".mui-fixed");[].forEach.call(o,c=>{r.push({value:c.style.paddingRight,property:"padding-right",el:c}),c.style.paddingRight=`${X_(c)+l}px`})}let i;if(a.parentNode instanceof DocumentFragment)i=za(a).body;else{const l=a.parentElement,o=mi(a);i=(l==null?void 0:l.nodeName)==="HTML"&&o.getComputedStyle(l).overflowY==="scroll"?l:a}r.push({value:i.style.overflow,property:"overflow",el:i},{value:i.style.overflowX,property:"overflow-x",el:i},{value:i.style.overflowY,property:"overflow-y",el:i}),i.style.overflow="hidden"}return()=>{r.forEach(({value:i,el:l,property:o})=>{i?l.style.setProperty(o,i):l.style.removeProperty(o)})}}function Tie(t){const s=[];return[].forEach.call(t.children,r=>{r.getAttribute("aria-hidden")==="true"&&s.push(r)}),s}class Pie{constructor(){this.modals=[],this.containers=[]}add(s,r){let a=this.modals.indexOf(s);if(a!==-1)return a;a=this.modals.length,this.modals.push(s),s.modalRef&&Nh(s.modalRef,!1);const n=Tie(r);eE(r,s.mount,s.modalRef,n,!0);const i=bv(this.containers,l=>l.container===r);return i!==-1?(this.containers[i].modals.push(s),a):(this.containers.push({modals:[s],container:r,restore:null,hiddenSiblings:n}),a)}mount(s,r){const a=bv(this.containers,i=>i.modals.includes(s)),n=this.containers[a];n.restore||(n.restore=Aie(n,r))}remove(s,r=!0){const a=this.modals.indexOf(s);if(a===-1)return a;const n=bv(this.containers,l=>l.modals.includes(s)),i=this.containers[n];if(i.modals.splice(i.modals.indexOf(s),1),this.modals.splice(a,1),i.modals.length===0)i.restore&&i.restore(),s.modalRef&&Nh(s.modalRef,r),eE(i.container,s.mount,s.modalRef,i.hiddenSiblings,!1),this.containers.splice(n,1);else{const l=i.modals[i.modals.length-1];l.modalRef&&Nh(l.modalRef,!1)}return a}isTopModal(s){return this.modals.length>0&&this.modals[this.modals.length-1]===s}}function Xd(t){var r;let s=t.activeElement;for(;((r=s==null?void 0:s.shadowRoot)==null?void 0:r.activeElement)!=null;)s=s.shadowRoot.activeElement;return s}const Rie=["input","select","textarea","a[href]","button","[tabindex]","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable="false"])'].join(",");function Die(t){const s=parseInt(t.getAttribute("tabindex")||"",10);return Number.isNaN(s)?t.contentEditable==="true"||(t.nodeName==="AUDIO"||t.nodeName==="VIDEO"||t.nodeName==="DETAILS")&&t.getAttribute("tabindex")===null?0:t.tabIndex:s}function Iie(t){if(t.tagName!=="INPUT"||t.type!=="radio"||!t.name)return!1;const s=a=>t.ownerDocument.querySelector(`input[type="radio"]${a}`);let r=s(`[name="${t.name}"]:checked`);return r||(r=s(`[name="${t.name}"]`)),r!==t}function Mie(t){return!(t.disabled||t.tagName==="INPUT"&&t.type==="hidden"||Iie(t))}function Lie(t){const s=[],r=[];return Array.from(t.querySelectorAll(Rie)).forEach((a,n)=>{const i=Die(a);i===-1||!Mie(a)||(i===0?s.push(a):r.push({documentOrder:n,tabIndex:i,node:a}))}),r.sort((a,n)=>a.tabIndex===n.tabIndex?a.documentOrder-n.documentOrder:a.tabIndex-n.tabIndex).map(a=>a.node).concat(s)}function Fie(){return!0}function Oie(t){const{children:s,disableAutoFocus:r=!1,disableEnforceFocus:a=!1,disableRestoreFocus:n=!1,getTabbable:i=Lie,isEnabled:l=Fie,open:o}=t,c=h.useRef(!1),d=h.useRef(null),u=h.useRef(null),m=h.useRef(null),p=h.useRef(null),x=h.useRef(!1),g=h.useRef(null),f=Br(um(s),g),b=h.useRef(null);h.useEffect(()=>{!o||!g.current||(x.current=!r)},[r,o]),h.useEffect(()=>{if(!o||!g.current)return;const w=za(g.current),y=Xd(w);return g.current.contains(y)||(g.current.hasAttribute("tabIndex")||g.current.setAttribute("tabIndex","-1"),x.current&&g.current.focus()),()=>{n||(m.current&&m.current.focus&&(c.current=!0,m.current.focus()),m.current=null)}},[o]),h.useEffect(()=>{if(!o||!g.current)return;const w=za(g.current),y=Xd(w),C=E=>{b.current=E,!(a||!l()||E.key!=="Tab")&&y===g.current&&E.shiftKey&&(c.current=!0,u.current&&u.current.focus())},S=()=>{var I,N;const E=g.current;if(E===null)return;const A=Xd(w);if(!w.hasFocus()||!l()||c.current){c.current=!1;return}if(E.contains(A)||a&&A!==d.current&&A!==u.current)return;if(A!==p.current)p.current=null;else if(p.current!==null)return;if(!x.current)return;let R=[];if((A===d.current||A===u.current)&&(R=i(g.current)),R.length>0){const P=!!((I=b.current)!=null&&I.shiftKey&&((N=b.current)==null?void 0:N.key)==="Tab"),k=R[0],D=R[R.length-1];typeof k!="string"&&typeof D!="string"&&(P?D.focus():k.focus())}else E.focus()};w.addEventListener("focusin",S),w.addEventListener("keydown",C,!0);const _=setInterval(()=>{const E=Xd(w);E&&E.tagName==="BODY"&&S()},50);return()=>{clearInterval(_),w.removeEventListener("focusin",S),w.removeEventListener("keydown",C,!0)}},[r,a,n,l,o,i]);const j=w=>{m.current===null&&(m.current=w.relatedTarget),x.current=!0,p.current=w.target;const y=s.props.onFocus;y&&y(w)},v=w=>{m.current===null&&(m.current=w.relatedTarget),x.current=!0};return e.jsxs(h.Fragment,{children:[e.jsx("div",{tabIndex:o?0:-1,onFocus:v,ref:d,"data-testid":"sentinelStart"}),h.cloneElement(s,{ref:f,onFocus:j}),e.jsx("div",{tabIndex:o?0:-1,onFocus:v,ref:u,"data-testid":"sentinelEnd"})]})}function Bie(t){return typeof t=="function"?t():t}function $ie(t){return t?t.props.hasOwnProperty("in"):!1}const tE=()=>{},Xp=new Pie;function Uie(t){const{container:s,disableEscapeKeyDown:r=!1,disableScrollLock:a=!1,closeAfterTransition:n=!1,onTransitionEnter:i,onTransitionExited:l,children:o,onClose:c,open:d,rootRef:u}=t,m=h.useRef({}),p=h.useRef(null),x=h.useRef(null),g=Br(x,u),[f,b]=h.useState(!d),j=$ie(o);let v=!0;(t["aria-hidden"]==="false"||t["aria-hidden"]===!1)&&(v=!1);const w=()=>za(p.current),y=()=>(m.current.modalRef=x.current,m.current.mount=p.current,m.current),C=()=>{Xp.mount(y(),{disableScrollLock:a}),x.current&&(x.current.scrollTop=0)},S=Pn(()=>{const D=Bie(s)||w().body;Xp.add(y(),D),x.current&&C()}),_=()=>Xp.isTopModal(y()),E=Pn(D=>{p.current=D,D&&(d&&_()?C():x.current&&Nh(x.current,v))}),A=h.useCallback(()=>{Xp.remove(y(),v)},[v]);h.useEffect(()=>()=>{A()},[A]),h.useEffect(()=>{d?S():(!j||!n)&&A()},[d,A,j,n,S]);const R=D=>$=>{var L;(L=D.onKeyDown)==null||L.call(D,$),!($.key!=="Escape"||$.which===229||!_())&&(r||($.stopPropagation(),c&&c($,"escapeKeyDown")))},I=D=>$=>{var L;(L=D.onClick)==null||L.call(D,$),$.target===$.currentTarget&&c&&c($,"backdropClick")};return{getRootProps:(D={})=>{const $=kM(t);delete $.onTransitionEnter,delete $.onTransitionExited;const L={...$,...D};return{role:"presentation",...L,onKeyDown:R(L),ref:g}},getBackdropProps:(D={})=>{const $=D;return{"aria-hidden":!0,...$,onClick:I($),open:d}},getTransitionProps:()=>{const D=()=>{b(!1),i&&i()},$=()=>{b(!0),l&&l(),n&&A()};return{onEnter:A_(D,(o==null?void 0:o.props.onEnter)??tE),onExited:A_($,(o==null?void 0:o.props.onExited)??tE)}},rootRef:g,portalRef:E,isTopModal:_,exited:f,hasTransition:j}}function Vie(t){return yt("MuiModal",t)}gt("MuiModal",["root","hidden","backdrop"]);const qie=t=>{const{open:s,exited:r,classes:a}=t;return bt({root:["root",!s&&r&&"hidden"],backdrop:["backdrop"]},Vie,a)},Wie=Pe("div",{name:"MuiModal",slot:"Root",overridesResolver:(t,s)=>{const{ownerState:r}=t;return[s.root,!r.open&&r.exited&&s.hidden]}})(Et(({theme:t})=>({position:"fixed",zIndex:(t.vars||t).zIndex.modal,right:0,bottom:0,top:0,left:0,variants:[{props:({ownerState:s})=>!s.open&&s.exited,style:{visibility:"hidden"}}]}))),zie=Pe(FM,{name:"MuiModal",slot:"Backdrop"})({zIndex:-1}),$M=h.forwardRef(function(s,r){const a=kt({name:"MuiModal",props:s}),{BackdropComponent:n=zie,BackdropProps:i,classes:l,className:o,closeAfterTransition:c=!1,children:d,container:u,component:m,components:p={},componentsProps:x={},disableAutoFocus:g=!1,disableEnforceFocus:f=!1,disableEscapeKeyDown:b=!1,disablePortal:j=!1,disableRestoreFocus:v=!1,disableScrollLock:w=!1,hideBackdrop:y=!1,keepMounted:C=!1,onClose:S,onTransitionEnter:_,onTransitionExited:E,open:A,slotProps:R={},slots:I={},theme:N,...P}=a,k={...a,closeAfterTransition:c,disableAutoFocus:g,disableEnforceFocus:f,disableEscapeKeyDown:b,disablePortal:j,disableRestoreFocus:v,disableScrollLock:w,hideBackdrop:y,keepMounted:C},{getRootProps:D,getBackdropProps:$,getTransitionProps:L,portalRef:B,isTopModal:T,exited:O,hasTransition:q}=Uie({...k,rootRef:r}),K={...k,exited:O},le=qie(K),X={};if(d.props.tabIndex===void 0&&(X.tabIndex="-1"),q){const{onEnter:ie,onExited:Y}=L();X.onEnter=ie,X.onExited=Y}const se={slots:{root:p.Root,backdrop:p.Backdrop,...I},slotProps:{...x,...R}},[de,fe]=Nt("root",{ref:r,elementType:Wie,externalForwardedProps:{...se,...P,component:m},getSlotProps:D,ownerState:K,className:oe(o,le==null?void 0:le.root,!K.open&&K.exited&&(le==null?void 0:le.hidden))}),[z,re]=Nt("backdrop",{ref:i==null?void 0:i.ref,elementType:n,externalForwardedProps:se,shouldForwardComponentProp:!0,additionalProps:i,getSlotProps:ie=>$({...ie,onClick:Y=>{ie!=null&&ie.onClick&&ie.onClick(Y)}}),className:oe(i==null?void 0:i.className,le==null?void 0:le.backdrop),ownerState:K});return!C&&!A&&(!q||O)?null:e.jsx(MM,{ref:B,container:u,disablePortal:j,children:e.jsxs(de,{...fe,children:[!y&&n?e.jsx(z,{...re}):null,e.jsx(Oie,{disableEnforceFocus:f,disableAutoFocus:g,disableRestoreFocus:v,isEnabled:T,open:A,children:h.cloneElement(d,X)})]})})});function Gie(t){return yt("MuiDialog",t)}const vv=gt("MuiDialog",["root","scrollPaper","scrollBody","container","paper","paperScrollPaper","paperScrollBody","paperWidthFalse","paperWidthXs","paperWidthSm","paperWidthMd","paperWidthLg","paperWidthXl","paperFullWidth","paperFullScreen"]),UM=h.createContext({}),Kie=Pe(FM,{name:"MuiDialog",slot:"Backdrop",overrides:(t,s)=>s.backdrop})({zIndex:-1}),Hie=t=>{const{classes:s,scroll:r,maxWidth:a,fullWidth:n,fullScreen:i}=t,l={root:["root"],container:["container",`scroll${_e(r)}`],paper:["paper",`paperScroll${_e(r)}`,`paperWidth${_e(String(a))}`,n&&"paperFullWidth",i&&"paperFullScreen"]};return bt(l,Gie,s)},Yie=Pe($M,{name:"MuiDialog",slot:"Root"})({"@media print":{position:"absolute !important"}}),Qie=Pe("div",{name:"MuiDialog",slot:"Container",overridesResolver:(t,s)=>{const{ownerState:r}=t;return[s.container,s[`scroll${_e(r.scroll)}`]]}})({height:"100%","@media print":{height:"auto"},outline:0,variants:[{props:{scroll:"paper"},style:{display:"flex",justifyContent:"center",alignItems:"center"}},{props:{scroll:"body"},style:{overflowY:"auto",overflowX:"hidden",textAlign:"center","&::after":{content:'""',display:"inline-block",verticalAlign:"middle",height:"100%",width:"0"}}}]}),Jie=Pe(dm,{name:"MuiDialog",slot:"Paper",overridesResolver:(t,s)=>{const{ownerState:r}=t;return[s.paper,s[`scrollPaper${_e(r.scroll)}`],s[`paperWidth${_e(String(r.maxWidth))}`],r.fullWidth&&s.paperFullWidth,r.fullScreen&&s.paperFullScreen]}})(Et(({theme:t})=>({margin:32,position:"relative",overflowY:"auto","@media print":{overflowY:"visible",boxShadow:"none"},variants:[{props:{scroll:"paper"},style:{display:"flex",flexDirection:"column",maxHeight:"calc(100% - 64px)"}},{props:{scroll:"body"},style:{display:"inline-block",verticalAlign:"middle",textAlign:"initial"}},{props:({ownerState:s})=>!s.maxWidth,style:{maxWidth:"calc(100% - 64px)"}},{props:{maxWidth:"xs"},style:{maxWidth:t.breakpoints.unit==="px"?Math.max(t.breakpoints.values.xs,444):`max(${t.breakpoints.values.xs}${t.breakpoints.unit}, 444px)`,[`&.${vv.paperScrollBody}`]:{[t.breakpoints.down(Math.max(t.breakpoints.values.xs,444)+32*2)]:{maxWidth:"calc(100% - 64px)"}}}},...Object.keys(t.breakpoints.values).filter(s=>s!=="xs").map(s=>({props:{maxWidth:s},style:{maxWidth:`${t.breakpoints.values[s]}${t.breakpoints.unit}`,[`&.${vv.paperScrollBody}`]:{[t.breakpoints.down(t.breakpoints.values[s]+32*2)]:{maxWidth:"calc(100% - 64px)"}}}})),{props:({ownerState:s})=>s.fullWidth,style:{width:"calc(100% - 64px)"}},{props:({ownerState:s})=>s.fullScreen,style:{margin:0,width:"100%",maxWidth:"100%",height:"100%",maxHeight:"none",borderRadius:0,[`&.${vv.paperScrollBody}`]:{margin:0,maxWidth:"100%"}}}]}))),dN=h.forwardRef(function(s,r){const a=kt({props:s,name:"MuiDialog"}),n=cm(),i={enter:n.transitions.duration.enteringScreen,exit:n.transitions.duration.leavingScreen},{"aria-describedby":l,"aria-labelledby":o,"aria-modal":c=!0,BackdropComponent:d,BackdropProps:u,children:m,className:p,disableEscapeKeyDown:x=!1,fullScreen:g=!1,fullWidth:f=!1,maxWidth:b="sm",onClick:j,onClose:v,open:w,PaperComponent:y=dm,PaperProps:C={},scroll:S="paper",slots:_={},slotProps:E={},TransitionComponent:A=cN,transitionDuration:R=i,TransitionProps:I,...N}=a,P={...a,disableEscapeKeyDown:x,fullScreen:g,fullWidth:f,maxWidth:b,scroll:S},k=Hie(P),D=h.useRef(),$=H=>{D.current=H.target===H.currentTarget},L=H=>{j&&j(H),D.current&&(D.current=null,v&&v(H,"backdropClick"))},B=om(o),T=h.useMemo(()=>({titleId:B}),[B]),O={transition:A,..._},q={transition:I,paper:C,backdrop:u,...E},K={slots:O,slotProps:q},[le,X]=Nt("root",{elementType:Yie,shouldForwardComponentProp:!0,externalForwardedProps:K,ownerState:P,className:oe(k.root,p),ref:r}),[se,de]=Nt("backdrop",{elementType:Kie,shouldForwardComponentProp:!0,externalForwardedProps:K,ownerState:P}),[fe,z]=Nt("paper",{elementType:Jie,shouldForwardComponentProp:!0,externalForwardedProps:K,ownerState:P,className:oe(k.paper,C.className)}),[re,ie]=Nt("container",{elementType:Qie,externalForwardedProps:K,ownerState:P,className:k.container}),[Y,G]=Nt("transition",{elementType:cN,externalForwardedProps:K,ownerState:P,additionalProps:{appear:!0,in:w,timeout:R,role:"presentation"}});return e.jsx(le,{closeAfterTransition:!0,slots:{backdrop:se},slotProps:{backdrop:{transitionDuration:R,as:d,...de}},disableEscapeKeyDown:x,onClose:v,open:w,onClick:L,...X,...N,children:e.jsx(Y,{...G,children:e.jsx(re,{onMouseDown:$,...ie,children:e.jsx(fe,{as:y,elevation:24,role:"dialog","aria-describedby":l,"aria-labelledby":B,"aria-modal":c,...z,children:e.jsx(UM.Provider,{value:T,children:m})})})})})});function Zie(t){return yt("MuiDialogActions",t)}gt("MuiDialogActions",["root","spacing"]);const Xie=t=>{const{classes:s,disableSpacing:r}=t;return bt({root:["root",!r&&"spacing"]},Zie,s)},ele=Pe("div",{name:"MuiDialogActions",slot:"Root",overridesResolver:(t,s)=>{const{ownerState:r}=t;return[s.root,!r.disableSpacing&&s.spacing]}})({display:"flex",alignItems:"center",padding:8,justifyContent:"flex-end",flex:"0 0 auto",variants:[{props:({ownerState:t})=>!t.disableSpacing,style:{"& > :not(style) ~ :not(style)":{marginLeft:8}}}]}),uN=h.forwardRef(function(s,r){const a=kt({props:s,name:"MuiDialogActions"}),{className:n,disableSpacing:i=!1,...l}=a,o={...a,disableSpacing:i},c=Xie(o);return e.jsx(ele,{className:oe(c.root,n),ownerState:o,ref:r,...l})});function tle(t){return yt("MuiDialogContent",t)}gt("MuiDialogContent",["root","dividers"]);function sle(t){return yt("MuiDialogTitle",t)}const rle=gt("MuiDialogTitle",["root"]),ale=t=>{const{classes:s,dividers:r}=t;return bt({root:["root",r&&"dividers"]},tle,s)},nle=Pe("div",{name:"MuiDialogContent",slot:"Root",overridesResolver:(t,s)=>{const{ownerState:r}=t;return[s.root,r.dividers&&s.dividers]}})(Et(({theme:t})=>({flex:"1 1 auto",WebkitOverflowScrolling:"touch",overflowY:"auto",padding:"20px 24px",variants:[{props:({ownerState:s})=>s.dividers,style:{padding:"16px 24px",borderTop:`1px solid ${(t.vars||t).palette.divider}`,borderBottom:`1px solid ${(t.vars||t).palette.divider}`}},{props:({ownerState:s})=>!s.dividers,style:{[`.${rle.root} + &`]:{paddingTop:0}}}]}))),mN=h.forwardRef(function(s,r){const a=kt({props:s,name:"MuiDialogContent"}),{className:n,dividers:i=!1,...l}=a,o={...a,dividers:i},c=ale(o);return e.jsx(nle,{className:oe(c.root,n),ownerState:o,ref:r,...l})}),ile=t=>{const{classes:s}=t;return bt({root:["root"]},sle,s)},lle=Pe(Rr,{name:"MuiDialogTitle",slot:"Root"})({padding:"16px 24px",flex:"0 0 auto"}),hN=h.forwardRef(function(s,r){const a=kt({props:s,name:"MuiDialogTitle"}),{className:n,id:i,...l}=a,o=a,c=ile(o),{titleId:d=i}=h.useContext(UM);return e.jsx(lle,{component:"h2",className:oe(c.root,n),ownerState:o,ref:r,variant:"h6",id:i??d,...l})});function ole(t){return yt("MuiDivider",t)}gt("MuiDivider",["root","absolute","fullWidth","inset","middle","flexItem","light","vertical","withChildren","withChildrenVertical","textAlignRight","textAlignLeft","wrapper","wrapperVertical"]);const cle=t=>{const{absolute:s,children:r,classes:a,flexItem:n,light:i,orientation:l,textAlign:o,variant:c}=t;return bt({root:["root",s&&"absolute",c,i&&"light",l==="vertical"&&"vertical",n&&"flexItem",r&&"withChildren",r&&l==="vertical"&&"withChildrenVertical",o==="right"&&l!=="vertical"&&"textAlignRight",o==="left"&&l!=="vertical"&&"textAlignLeft"],wrapper:["wrapper",l==="vertical"&&"wrapperVertical"]},ole,a)},dle=Pe("div",{name:"MuiDivider",slot:"Root",overridesResolver:(t,s)=>{const{ownerState:r}=t;return[s.root,r.absolute&&s.absolute,s[r.variant],r.light&&s.light,r.orientation==="vertical"&&s.vertical,r.flexItem&&s.flexItem,r.children&&s.withChildren,r.children&&r.orientation==="vertical"&&s.withChildrenVertical,r.textAlign==="right"&&r.orientation!=="vertical"&&s.textAlignRight,r.textAlign==="left"&&r.orientation!=="vertical"&&s.textAlignLeft]}})(Et(({theme:t})=>({margin:0,flexShrink:0,borderWidth:0,borderStyle:"solid",borderColor:(t.vars||t).palette.divider,borderBottomWidth:"thin",variants:[{props:{absolute:!0},style:{position:"absolute",bottom:0,left:0,width:"100%"}},{props:{light:!0},style:{borderColor:t.alpha((t.vars||t).palette.divider,.08)}},{props:{variant:"inset"},style:{marginLeft:72}},{props:{variant:"middle",orientation:"horizontal"},style:{marginLeft:t.spacing(2),marginRight:t.spacing(2)}},{props:{variant:"middle",orientation:"vertical"},style:{marginTop:t.spacing(1),marginBottom:t.spacing(1)}},{props:{orientation:"vertical"},style:{height:"100%",borderBottomWidth:0,borderRightWidth:"thin"}},{props:{flexItem:!0},style:{alignSelf:"stretch",height:"auto"}},{props:({ownerState:s})=>!!s.children,style:{display:"flex",textAlign:"center",border:0,borderTopStyle:"solid",borderLeftStyle:"solid","&::before, &::after":{content:'""',alignSelf:"center"}}},{props:({ownerState:s})=>s.children&&s.orientation!=="vertical",style:{"&::before, &::after":{width:"100%",borderTop:`thin solid ${(t.vars||t).palette.divider}`,borderTopStyle:"inherit"}}},{props:({ownerState:s})=>s.orientation==="vertical"&&s.children,style:{flexDirection:"column","&::before, &::after":{height:"100%",borderLeft:`thin solid ${(t.vars||t).palette.divider}`,borderLeftStyle:"inherit"}}},{props:({ownerState:s})=>s.textAlign==="right"&&s.orientation!=="vertical",style:{"&::before":{width:"90%"},"&::after":{width:"10%"}}},{props:({ownerState:s})=>s.textAlign==="left"&&s.orientation!=="vertical",style:{"&::before":{width:"10%"},"&::after":{width:"90%"}}}]}))),ule=Pe("span",{name:"MuiDivider",slot:"Wrapper",overridesResolver:(t,s)=>{const{ownerState:r}=t;return[s.wrapper,r.orientation==="vertical"&&s.wrapperVertical]}})(Et(({theme:t})=>({display:"inline-block",paddingLeft:`calc(${t.spacing(1)} * 1.2)`,paddingRight:`calc(${t.spacing(1)} * 1.2)`,whiteSpace:"nowrap",variants:[{props:{orientation:"vertical"},style:{paddingTop:`calc(${t.spacing(1)} * 1.2)`,paddingBottom:`calc(${t.spacing(1)} * 1.2)`}}]}))),gc=h.forwardRef(function(s,r){const a=kt({props:s,name:"MuiDivider"}),{absolute:n=!1,children:i,className:l,orientation:o="horizontal",component:c=i||o==="vertical"?"div":"hr",flexItem:d=!1,light:u=!1,role:m=c!=="hr"?"separator":void 0,textAlign:p="center",variant:x="fullWidth",...g}=a,f={...a,absolute:n,component:c,flexItem:d,light:u,orientation:o,role:m,textAlign:p,variant:x},b=cle(f);return e.jsx(dle,{as:c,className:oe(b.root,l),role:m,ref:r,ownerState:f,"aria-orientation":m==="separator"&&(c!=="hr"||o==="vertical")?o:void 0,...g,children:i?e.jsx(ule,{className:b.wrapper,ownerState:f,children:i}):null})});gc&&(gc.muiSkipListHighlight=!0);const mle=t=>{const{classes:s,disableUnderline:r,startAdornment:a,endAdornment:n,size:i,hiddenLabel:l,multiline:o}=t,c={root:["root",!r&&"underline",a&&"adornedStart",n&&"adornedEnd",i==="small"&&`size${_e(i)}`,l&&"hiddenLabel",o&&"multiline"],input:["input"]},d=bt(c,Zne,s);return{...s,...d}},hle=Pe(zy,{shouldForwardProp:t=>qn(t)||t==="classes",name:"MuiFilledInput",slot:"Root",overridesResolver:(t,s)=>{const{ownerState:r}=t;return[...qy(t,s),!r.disableUnderline&&s.underline]}})(Et(({theme:t})=>{const s=t.palette.mode==="light",r=s?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)",a=s?"rgba(0, 0, 0, 0.06)":"rgba(255, 255, 255, 0.09)",n=s?"rgba(0, 0, 0, 0.09)":"rgba(255, 255, 255, 0.13)",i=s?"rgba(0, 0, 0, 0.12)":"rgba(255, 255, 255, 0.12)";return{position:"relative",backgroundColor:t.vars?t.vars.palette.FilledInput.bg:a,borderTopLeftRadius:(t.vars||t).shape.borderRadius,borderTopRightRadius:(t.vars||t).shape.borderRadius,transition:t.transitions.create("background-color",{duration:t.transitions.duration.shorter,easing:t.transitions.easing.easeOut}),"&:hover":{backgroundColor:t.vars?t.vars.palette.FilledInput.hoverBg:n,"@media (hover: none)":{backgroundColor:t.vars?t.vars.palette.FilledInput.bg:a}},[`&.${sc.focused}`]:{backgroundColor:t.vars?t.vars.palette.FilledInput.bg:a},[`&.${sc.disabled}`]:{backgroundColor:t.vars?t.vars.palette.FilledInput.disabledBg:i},variants:[{props:({ownerState:l})=>!l.disableUnderline,style:{"&::after":{left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:t.transitions.create("transform",{duration:t.transitions.duration.shorter,easing:t.transitions.easing.easeOut}),pointerEvents:"none"},[`&.${sc.focused}:after`]:{transform:"scaleX(1) translateX(0)"},[`&.${sc.error}`]:{"&::before, &::after":{borderBottomColor:(t.vars||t).palette.error.main}},"&::before":{borderBottom:`1px solid ${t.vars?t.alpha(t.vars.palette.common.onBackground,t.vars.opacity.inputUnderline):r}`,left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:t.transitions.create("border-bottom-color",{duration:t.transitions.duration.shorter}),pointerEvents:"none"},[`&:hover:not(.${sc.disabled}, .${sc.error}):before`]:{borderBottom:`1px solid ${(t.vars||t).palette.text.primary}`},[`&.${sc.disabled}:before`]:{borderBottomStyle:"dotted"}}},...Object.entries(t.palette).filter(Hr()).map(([l])=>{var o;return{props:{disableUnderline:!1,color:l},style:{"&::after":{borderBottom:`2px solid ${(o=(t.vars||t).palette[l])==null?void 0:o.main}`}}}}),{props:({ownerState:l})=>l.startAdornment,style:{paddingLeft:12}},{props:({ownerState:l})=>l.endAdornment,style:{paddingRight:12}},{props:({ownerState:l})=>l.multiline,style:{padding:"25px 12px 8px"}},{props:({ownerState:l,size:o})=>l.multiline&&o==="small",style:{paddingTop:21,paddingBottom:4}},{props:({ownerState:l})=>l.multiline&&l.hiddenLabel,style:{paddingTop:16,paddingBottom:17}},{props:({ownerState:l})=>l.multiline&&l.hiddenLabel&&l.size==="small",style:{paddingTop:8,paddingBottom:9}}]}})),ple=Pe(Gy,{name:"MuiFilledInput",slot:"Input",overridesResolver:Wy})(Et(({theme:t})=>({paddingTop:25,paddingRight:12,paddingBottom:8,paddingLeft:12,...!t.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:t.palette.mode==="light"?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:t.palette.mode==="light"?null:"#fff",caretColor:t.palette.mode==="light"?null:"#fff",borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"}},...t.vars&&{"&:-webkit-autofill":{borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"},[t.getColorSchemeSelector("dark")]:{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}},variants:[{props:{size:"small"},style:{paddingTop:21,paddingBottom:4}},{props:({ownerState:s})=>s.hiddenLabel,style:{paddingTop:16,paddingBottom:17}},{props:({ownerState:s})=>s.startAdornment,style:{paddingLeft:0}},{props:({ownerState:s})=>s.endAdornment,style:{paddingRight:0}},{props:({ownerState:s})=>s.hiddenLabel&&s.size==="small",style:{paddingTop:8,paddingBottom:9}},{props:({ownerState:s})=>s.multiline,style:{paddingTop:0,paddingBottom:0,paddingLeft:0,paddingRight:0}}]}))),lk=h.forwardRef(function(s,r){const a=kt({props:s,name:"MuiFilledInput"}),{disableUnderline:n=!1,components:i={},componentsProps:l,fullWidth:o=!1,hiddenLabel:c,inputComponent:d="input",multiline:u=!1,slotProps:m,slots:p={},type:x="text",...g}=a,f={...a,disableUnderline:n,fullWidth:o,inputComponent:d,multiline:u,type:x},b=mle(a),j={root:{ownerState:f},input:{ownerState:f}},v=m??l?ca(j,m??l):j,w=p.root??i.Root??hle,y=p.input??i.Input??ple;return e.jsx(ik,{slots:{root:w,input:y},slotProps:v,fullWidth:o,inputComponent:d,multiline:u,ref:r,type:x,...g,classes:b})});lk.muiName="Input";function xle(t){return yt("MuiFormControl",t)}gt("MuiFormControl",["root","marginNone","marginNormal","marginDense","fullWidth","disabled"]);const gle=t=>{const{classes:s,margin:r,fullWidth:a}=t,n={root:["root",r!=="none"&&`margin${_e(r)}`,a&&"fullWidth"]};return bt(n,xle,s)},fle=Pe("div",{name:"MuiFormControl",slot:"Root",overridesResolver:(t,s)=>{const{ownerState:r}=t;return[s.root,s[`margin${_e(r.margin)}`],r.fullWidth&&s.fullWidth]}})({display:"inline-flex",flexDirection:"column",position:"relative",minWidth:0,padding:0,margin:0,border:0,verticalAlign:"top",variants:[{props:{margin:"normal"},style:{marginTop:16,marginBottom:8}},{props:{margin:"dense"},style:{marginTop:8,marginBottom:4}},{props:{fullWidth:!0},style:{width:"100%"}}]}),yle=h.forwardRef(function(s,r){const a=kt({props:s,name:"MuiFormControl"}),{children:n,className:i,color:l="primary",component:o="div",disabled:c=!1,error:d=!1,focused:u,fullWidth:m=!1,hiddenLabel:p=!1,margin:x="none",required:g=!1,size:f="medium",variant:b="outlined",...j}=a,v={...a,color:l,component:o,disabled:c,error:d,fullWidth:m,hiddenLabel:p,margin:x,required:g,size:f,variant:b},w=gle(v),[y,C]=h.useState(()=>{let D=!1;return n&&h.Children.forEach(n,$=>{if(!fv($,["Input","Select"]))return;const L=fv($,["Select"])?$.props.input:$;L&&Kne(L.props)&&(D=!0)}),D}),[S,_]=h.useState(()=>{let D=!1;return n&&h.Children.forEach(n,$=>{fv($,["Input","Select"])&&(cf($.props,!0)||cf($.props.inputProps,!0))&&(D=!0)}),D}),[E,A]=h.useState(!1);c&&E&&A(!1);const R=u!==void 0&&!c?u:E;let I;h.useRef(!1);const N=h.useCallback(()=>{_(!0)},[]),P=h.useCallback(()=>{_(!1)},[]),k=h.useMemo(()=>({adornedStart:y,setAdornedStart:C,color:l,disabled:c,error:d,filled:S,focused:R,fullWidth:m,hiddenLabel:p,size:f,onBlur:()=>{A(!1)},onFocus:()=>{A(!0)},onEmpty:P,onFilled:N,registerEffect:I,required:g,variant:b}),[y,l,c,d,S,R,m,p,I,P,N,g,f,b]);return e.jsx(nk.Provider,{value:k,children:e.jsx(fle,{as:o,ownerState:v,className:oe(w.root,i),ref:r,...j,children:n})})});function ble(t){return yt("MuiFormControlLabel",t)}const eh=gt("MuiFormControlLabel",["root","labelPlacementStart","labelPlacementTop","labelPlacementBottom","disabled","label","error","required","asterisk"]),vle=t=>{const{classes:s,disabled:r,labelPlacement:a,error:n,required:i}=t,l={root:["root",r&&"disabled",`labelPlacement${_e(a)}`,n&&"error",i&&"required"],label:["label",r&&"disabled"],asterisk:["asterisk",n&&"error"]};return bt(l,ble,s)},jle=Pe("label",{name:"MuiFormControlLabel",slot:"Root",overridesResolver:(t,s)=>{const{ownerState:r}=t;return[{[`& .${eh.label}`]:s.label},s.root,s[`labelPlacement${_e(r.labelPlacement)}`]]}})(Et(({theme:t})=>({display:"inline-flex",alignItems:"center",cursor:"pointer",verticalAlign:"middle",WebkitTapHighlightColor:"transparent",marginLeft:-11,marginRight:16,[`&.${eh.disabled}`]:{cursor:"default"},[`& .${eh.label}`]:{[`&.${eh.disabled}`]:{color:(t.vars||t).palette.text.disabled}},variants:[{props:{labelPlacement:"start"},style:{flexDirection:"row-reverse",marginRight:-11}},{props:{labelPlacement:"top"},style:{flexDirection:"column-reverse"}},{props:{labelPlacement:"bottom"},style:{flexDirection:"column"}},{props:({labelPlacement:s})=>s==="start"||s==="top"||s==="bottom",style:{marginLeft:16}}]}))),wle=Pe("span",{name:"MuiFormControlLabel",slot:"Asterisk"})(Et(({theme:t})=>({[`&.${eh.error}`]:{color:(t.vars||t).palette.error.main}}))),Ad=h.forwardRef(function(s,r){const a=kt({props:s,name:"MuiFormControlLabel"}),{checked:n,className:i,componentsProps:l={},control:o,disabled:c,disableTypography:d,inputRef:u,label:m,labelPlacement:p="end",name:x,onChange:g,required:f,slots:b={},slotProps:j={},value:v,...w}=a,y=Ho(),C=c??o.props.disabled??(y==null?void 0:y.disabled),S=f??o.props.required,_={disabled:C,required:S};["checked","name","onChange","value","inputRef"].forEach(D=>{typeof o.props[D]>"u"&&typeof a[D]<"u"&&(_[D]=a[D])});const E=cd({props:a,muiFormControl:y,states:["error"]}),A={...a,disabled:C,labelPlacement:p,required:S,error:E.error},R=vle(A),I={slots:b,slotProps:{...l,...j}},[N,P]=Nt("typography",{elementType:Rr,externalForwardedProps:I,ownerState:A});let k=m;return k!=null&&k.type!==Rr&&!d&&(k=e.jsx(N,{component:"span",...P,className:oe(R.label,P==null?void 0:P.className),children:k})),e.jsxs(jle,{className:oe(R.root,i),ownerState:A,ref:r,...w,children:[h.cloneElement(o,_),S?e.jsxs("div",{children:[k,e.jsxs(wle,{ownerState:A,"aria-hidden":!0,className:R.asterisk,children:["","*"]})]}):k]})});function Nle(t){return yt("MuiFormHelperText",t)}const sE=gt("MuiFormHelperText",["root","error","disabled","sizeSmall","sizeMedium","contained","focused","filled","required"]);var rE;const kle=t=>{const{classes:s,contained:r,size:a,disabled:n,error:i,filled:l,focused:o,required:c}=t,d={root:["root",n&&"disabled",i&&"error",a&&`size${_e(a)}`,r&&"contained",o&&"focused",l&&"filled",c&&"required"]};return bt(d,Nle,s)},Cle=Pe("p",{name:"MuiFormHelperText",slot:"Root",overridesResolver:(t,s)=>{const{ownerState:r}=t;return[s.root,r.size&&s[`size${_e(r.size)}`],r.contained&&s.contained,r.filled&&s.filled]}})(Et(({theme:t})=>({color:(t.vars||t).palette.text.secondary,...t.typography.caption,textAlign:"left",marginTop:3,marginRight:0,marginBottom:0,marginLeft:0,[`&.${sE.disabled}`]:{color:(t.vars||t).palette.text.disabled},[`&.${sE.error}`]:{color:(t.vars||t).palette.error.main},variants:[{props:{size:"small"},style:{marginTop:4}},{props:({ownerState:s})=>s.contained,style:{marginLeft:14,marginRight:14}}]}))),Sle=h.forwardRef(function(s,r){const a=kt({props:s,name:"MuiFormHelperText"}),{children:n,className:i,component:l="p",disabled:o,error:c,filled:d,focused:u,margin:m,required:p,variant:x,...g}=a,f=Ho(),b=cd({props:a,muiFormControl:f,states:["variant","size","disabled","error","filled","focused","required"]}),j={...a,component:l,contained:b.variant==="filled"||b.variant==="outlined",variant:b.variant,size:b.size,disabled:b.disabled,error:b.error,filled:b.filled,focused:b.focused,required:b.required};delete j.ownerState;const v=kle(j);return e.jsx(Cle,{as:l,className:oe(v.root,i),ref:r,...g,ownerState:j,children:n===" "?rE||(rE=e.jsx("span",{className:"notranslate","aria-hidden":!0,children:""})):n})});function _le(t){return yt("MuiFormLabel",t)}const kh=gt("MuiFormLabel",["root","colorSecondary","focused","disabled","error","filled","required","asterisk"]),Ele=t=>{const{classes:s,color:r,focused:a,disabled:n,error:i,filled:l,required:o}=t,c={root:["root",`color${_e(r)}`,n&&"disabled",i&&"error",l&&"filled",a&&"focused",o&&"required"],asterisk:["asterisk",i&&"error"]};return bt(c,_le,s)},Ale=Pe("label",{name:"MuiFormLabel",slot:"Root",overridesResolver:(t,s)=>{const{ownerState:r}=t;return[s.root,r.color==="secondary"&&s.colorSecondary,r.filled&&s.filled]}})(Et(({theme:t})=>({color:(t.vars||t).palette.text.secondary,...t.typography.body1,lineHeight:"1.4375em",padding:0,position:"relative",variants:[...Object.entries(t.palette).filter(Hr()).map(([s])=>({props:{color:s},style:{[`&.${kh.focused}`]:{color:(t.vars||t).palette[s].main}}})),{props:{},style:{[`&.${kh.disabled}`]:{color:(t.vars||t).palette.text.disabled},[`&.${kh.error}`]:{color:(t.vars||t).palette.error.main}}}]}))),Tle=Pe("span",{name:"MuiFormLabel",slot:"Asterisk"})(Et(({theme:t})=>({[`&.${kh.error}`]:{color:(t.vars||t).palette.error.main}}))),Ple=h.forwardRef(function(s,r){const a=kt({props:s,name:"MuiFormLabel"}),{children:n,className:i,color:l,component:o="label",disabled:c,error:d,filled:u,focused:m,required:p,...x}=a,g=Ho(),f=cd({props:a,muiFormControl:g,states:["color","required","focused","disabled","error","filled"]}),b={...a,color:f.color||"primary",component:o,disabled:f.disabled,error:f.error,filled:f.filled,focused:f.focused,required:f.required},j=Ele(b);return e.jsxs(Ale,{as:o,ownerState:b,className:oe(j.root,i),ref:r,...x,children:[n,f.required&&e.jsxs(Tle,{ownerState:b,"aria-hidden":!0,className:j.asterisk,children:["","*"]})]})});function pN(t){return`scale(${t}, ${t**2})`}const Rle={entering:{opacity:1,transform:pN(1)},entered:{opacity:1,transform:"none"}},jv=typeof navigator<"u"&&/^((?!chrome|android).)*(safari|mobile)/i.test(navigator.userAgent)&&/(os |version\/)15(.|_)4/i.test(navigator.userAgent),df=h.forwardRef(function(s,r){const{addEndListener:a,appear:n=!0,children:i,easing:l,in:o,onEnter:c,onEntered:d,onEntering:u,onExit:m,onExited:p,onExiting:x,style:g,timeout:f="auto",TransitionComponent:b=zi,...j}=s,v=Zd(),w=h.useRef(),y=cm(),C=h.useRef(null),S=Br(C,um(i),r),_=D=>$=>{if(D){const L=C.current;$===void 0?D(L):D(L,$)}},E=_(u),A=_((D,$)=>{jM(D);const{duration:L,delay:B,easing:T}=sf({style:g,timeout:f,easing:l},{mode:"enter"});let O;f==="auto"?(O=y.transitions.getAutoHeightDuration(D.clientHeight),w.current=O):O=L,D.style.transition=[y.transitions.create("opacity",{duration:O,delay:B}),y.transitions.create("transform",{duration:jv?O:O*.666,delay:B,easing:T})].join(","),c&&c(D,$)}),R=_(d),I=_(x),N=_(D=>{const{duration:$,delay:L,easing:B}=sf({style:g,timeout:f,easing:l},{mode:"exit"});let T;f==="auto"?(T=y.transitions.getAutoHeightDuration(D.clientHeight),w.current=T):T=$,D.style.transition=[y.transitions.create("opacity",{duration:T,delay:L}),y.transitions.create("transform",{duration:jv?T:T*.666,delay:jv?L:L||T*.333,easing:B})].join(","),D.style.opacity=0,D.style.transform=pN(.75),m&&m(D)}),P=_(p),k=D=>{f==="auto"&&v.start(w.current||0,D),a&&a(C.current,D)};return e.jsx(b,{appear:n,in:o,nodeRef:C,onEnter:A,onEntered:R,onEntering:E,onExit:N,onExited:P,onExiting:I,addEndListener:k,timeout:f==="auto"?null:f,...j,children:(D,{ownerState:$,...L})=>h.cloneElement(i,{style:{opacity:0,transform:pN(.75),visibility:D==="exited"&&!o?"hidden":void 0,...Rle[D],...g,...i.props.style},ref:S,...L})})});df&&(df.muiSupportAuto=!0);const Dle=t=>{const{classes:s,disableUnderline:r}=t,n=bt({root:["root",!r&&"underline"],input:["input"]},Qne,s);return{...s,...n}},Ile=Pe(zy,{shouldForwardProp:t=>qn(t)||t==="classes",name:"MuiInput",slot:"Root",overridesResolver:(t,s)=>{const{ownerState:r}=t;return[...qy(t,s),!r.disableUnderline&&s.underline]}})(Et(({theme:t})=>{let r=t.palette.mode==="light"?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)";return t.vars&&(r=t.alpha(t.vars.palette.common.onBackground,t.vars.opacity.inputUnderline)),{position:"relative",variants:[{props:({ownerState:a})=>a.formControl,style:{"label + &":{marginTop:16}}},{props:({ownerState:a})=>!a.disableUnderline,style:{"&::after":{left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:t.transitions.create("transform",{duration:t.transitions.duration.shorter,easing:t.transitions.easing.easeOut}),pointerEvents:"none"},[`&.${Mm.focused}:after`]:{transform:"scaleX(1) translateX(0)"},[`&.${Mm.error}`]:{"&::before, &::after":{borderBottomColor:(t.vars||t).palette.error.main}},"&::before":{borderBottom:`1px solid ${r}`,left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:t.transitions.create("border-bottom-color",{duration:t.transitions.duration.shorter}),pointerEvents:"none"},[`&:hover:not(.${Mm.disabled}, .${Mm.error}):before`]:{borderBottom:`2px solid ${(t.vars||t).palette.text.primary}`,"@media (hover: none)":{borderBottom:`1px solid ${r}`}},[`&.${Mm.disabled}:before`]:{borderBottomStyle:"dotted"}}},...Object.entries(t.palette).filter(Hr()).map(([a])=>({props:{color:a,disableUnderline:!1},style:{"&::after":{borderBottom:`2px solid ${(t.vars||t).palette[a].main}`}}}))]}})),Mle=Pe(Gy,{name:"MuiInput",slot:"Input",overridesResolver:Wy})({}),ok=h.forwardRef(function(s,r){const a=kt({props:s,name:"MuiInput"}),{disableUnderline:n=!1,components:i={},componentsProps:l,fullWidth:o=!1,inputComponent:c="input",multiline:d=!1,slotProps:u,slots:m={},type:p="text",...x}=a,g=Dle(a),b={root:{ownerState:{disableUnderline:n}}},j=u??l?ca(u??l,b):b,v=m.root??i.Root??Ile,w=m.input??i.Input??Mle;return e.jsx(ik,{slots:{root:v,input:w},slotProps:j,fullWidth:o,inputComponent:c,multiline:d,ref:r,type:p,...x,classes:g})});ok.muiName="Input";function Lle(t){return yt("MuiInputLabel",t)}gt("MuiInputLabel",["root","focused","disabled","error","required","asterisk","formControl","sizeSmall","shrink","animated","standard","filled","outlined"]);const Fle=t=>{const{classes:s,formControl:r,size:a,shrink:n,disableAnimation:i,variant:l,required:o}=t,c={root:["root",r&&"formControl",!i&&"animated",n&&"shrink",a&&a!=="medium"&&`size${_e(a)}`,l],asterisk:[o&&"asterisk"]},d=bt(c,Lle,s);return{...s,...d}},Ole=Pe(Ple,{shouldForwardProp:t=>qn(t)||t==="classes",name:"MuiInputLabel",slot:"Root",overridesResolver:(t,s)=>{const{ownerState:r}=t;return[{[`& .${kh.asterisk}`]:s.asterisk},s.root,r.formControl&&s.formControl,r.size==="small"&&s.sizeSmall,r.shrink&&s.shrink,!r.disableAnimation&&s.animated,r.focused&&s.focused,s[r.variant]]}})(Et(({theme:t})=>({display:"block",transformOrigin:"top left",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"100%",variants:[{props:({ownerState:s})=>s.formControl,style:{position:"absolute",left:0,top:0,transform:"translate(0, 20px) scale(1)"}},{props:{size:"small"},style:{transform:"translate(0, 17px) scale(1)"}},{props:({ownerState:s})=>s.shrink,style:{transform:"translate(0, -1.5px) scale(0.75)",transformOrigin:"top left",maxWidth:"133%"}},{props:({ownerState:s})=>!s.disableAnimation,style:{transition:t.transitions.create(["color","transform","max-width"],{duration:t.transitions.duration.shorter,easing:t.transitions.easing.easeOut})}},{props:{variant:"filled"},style:{zIndex:1,pointerEvents:"none",transform:"translate(12px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"}},{props:{variant:"filled",size:"small"},style:{transform:"translate(12px, 13px) scale(1)"}},{props:({variant:s,ownerState:r})=>s==="filled"&&r.shrink,style:{userSelect:"none",pointerEvents:"auto",transform:"translate(12px, 7px) scale(0.75)",maxWidth:"calc(133% - 24px)"}},{props:({variant:s,ownerState:r,size:a})=>s==="filled"&&r.shrink&&a==="small",style:{transform:"translate(12px, 4px) scale(0.75)"}},{props:{variant:"outlined"},style:{zIndex:1,pointerEvents:"none",transform:"translate(14px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"}},{props:{variant:"outlined",size:"small"},style:{transform:"translate(14px, 9px) scale(1)"}},{props:({variant:s,ownerState:r})=>s==="outlined"&&r.shrink,style:{userSelect:"none",pointerEvents:"auto",maxWidth:"calc(133% - 32px)",transform:"translate(14px, -9px) scale(0.75)"}}]}))),Ble=h.forwardRef(function(s,r){const a=kt({name:"MuiInputLabel",props:s}),{disableAnimation:n=!1,margin:i,shrink:l,variant:o,className:c,...d}=a,u=Ho();let m=l;typeof m>"u"&&u&&(m=u.filled||u.focused||u.adornedStart);const p=cd({props:a,muiFormControl:u,states:["size","variant","required","focused"]}),x={...a,disableAnimation:n,formControl:u,shrink:m,size:p.size,variant:p.variant,required:p.required,focused:p.focused},g=Fle(x);return e.jsx(Ole,{"data-shrink":m,ref:r,className:oe(g.root,c),...d,ownerState:x,classes:g})}),$le=h.createContext({});function Ule(t){return yt("MuiList",t)}gt("MuiList",["root","padding","dense","subheader"]);const Vle=t=>{const{classes:s,disablePadding:r,dense:a,subheader:n}=t;return bt({root:["root",!r&&"padding",a&&"dense",n&&"subheader"]},Ule,s)},qle=Pe("ul",{name:"MuiList",slot:"Root",overridesResolver:(t,s)=>{const{ownerState:r}=t;return[s.root,!r.disablePadding&&s.padding,r.dense&&s.dense,r.subheader&&s.subheader]}})({listStyle:"none",margin:0,padding:0,position:"relative",variants:[{props:({ownerState:t})=>!t.disablePadding,style:{paddingTop:8,paddingBottom:8}},{props:({ownerState:t})=>t.subheader,style:{paddingTop:0}}]}),Wle=h.forwardRef(function(s,r){const a=kt({props:s,name:"MuiList"}),{children:n,className:i,component:l="ul",dense:o=!1,disablePadding:c=!1,subheader:d,...u}=a,m=h.useMemo(()=>({dense:o}),[o]),p={...a,component:l,dense:o,disablePadding:c},x=Vle(p);return e.jsx($le.Provider,{value:m,children:e.jsxs(qle,{as:l,className:oe(x.root,i),ref:r,ownerState:p,...u,children:[d,n]})})});function wv(t,s,r){return t===s?t.firstChild:s&&s.nextElementSibling?s.nextElementSibling:r?null:t.firstChild}function aE(t,s,r){return t===s?r?t.firstChild:t.lastChild:s&&s.previousElementSibling?s.previousElementSibling:r?null:t.lastChild}function VM(t,s){if(s===void 0)return!0;let r=t.innerText;return r===void 0&&(r=t.textContent),r=r.trim().toLowerCase(),r.length===0?!1:s.repeating?r[0]===s.keys[0]:r.startsWith(s.keys.join(""))}function Lm(t,s,r,a,n,i){let l=!1,o=n(t,s,s?r:!1);for(;o;){if(o===t.firstChild){if(l)return!1;l=!0}const c=a?!1:o.disabled||o.getAttribute("aria-disabled")==="true";if(!o.hasAttribute("tabindex")||!VM(o,i)||c)o=n(t,o,r);else return o.focus(),!0}return!1}const zle=h.forwardRef(function(s,r){const{actions:a,autoFocus:n=!1,autoFocusItem:i=!1,children:l,className:o,disabledItemsFocusable:c=!1,disableListWrap:d=!1,onKeyDown:u,variant:m="selectedMenu",...p}=s,x=h.useRef(null),g=h.useRef({keys:[],repeating:!0,previousKeyMatched:!0,lastTime:null});$i(()=>{n&&x.current.focus()},[n]),h.useImperativeHandle(a,()=>({adjustStyleForScrollbar:(w,{direction:y})=>{const C=!x.current.style.width;if(w.clientHeight<x.current.clientHeight&&C){const S=`${BM(mi(w))}px`;x.current.style[y==="rtl"?"paddingLeft":"paddingRight"]=S,x.current.style.width=`calc(100% + ${S})`}return x.current}}),[]);const f=w=>{const y=x.current,C=w.key;if(w.ctrlKey||w.metaKey||w.altKey){u&&u(w);return}const _=Xd(za(y));if(C==="ArrowDown")w.preventDefault(),Lm(y,_,d,c,wv);else if(C==="ArrowUp")w.preventDefault(),Lm(y,_,d,c,aE);else if(C==="Home")w.preventDefault(),Lm(y,null,d,c,wv);else if(C==="End")w.preventDefault(),Lm(y,null,d,c,aE);else if(C.length===1){const E=g.current,A=C.toLowerCase(),R=performance.now();E.keys.length>0&&(R-E.lastTime>500?(E.keys=[],E.repeating=!0,E.previousKeyMatched=!0):E.repeating&&A!==E.keys[0]&&(E.repeating=!1)),E.lastTime=R,E.keys.push(A);const I=_&&!E.repeating&&VM(_,E);E.previousKeyMatched&&(I||Lm(y,_,!1,c,wv,E))?w.preventDefault():E.previousKeyMatched=!1}u&&u(w)},b=Br(x,r);let j=-1;h.Children.forEach(l,(w,y)=>{if(!h.isValidElement(w)){j===y&&(j+=1,j>=l.length&&(j=-1));return}w.props.disabled||(m==="selectedMenu"&&w.props.selected||j===-1)&&(j=y),j===y&&(w.props.disabled||w.props.muiSkipListHighlight||w.type.muiSkipListHighlight)&&(j+=1,j>=l.length&&(j=-1))});const v=h.Children.map(l,(w,y)=>{if(y===j){const C={};return i&&(C.autoFocus=!0),w.props.tabIndex===void 0&&m==="selectedMenu"&&(C.tabIndex=0),h.cloneElement(w,C)}return w});return e.jsx(Wle,{role:"menu",ref:b,className:o,onKeyDown:f,tabIndex:n?0:-1,...p,children:v})});function Gle(t){return yt("MuiPopover",t)}gt("MuiPopover",["root","paper"]);function nE(t,s){let r=0;return typeof s=="number"?r=s:s==="center"?r=t.height/2:s==="bottom"&&(r=t.height),r}function iE(t,s){let r=0;return typeof s=="number"?r=s:s==="center"?r=t.width/2:s==="right"&&(r=t.width),r}function lE(t){return[t.horizontal,t.vertical].map(s=>typeof s=="number"?`${s}px`:s).join(" ")}function ex(t){return typeof t=="function"?t():t}const Kle=t=>{const{classes:s}=t;return bt({root:["root"],paper:["paper"]},Gle,s)},Hle=Pe($M,{name:"MuiPopover",slot:"Root"})({}),qM=Pe(dm,{name:"MuiPopover",slot:"Paper"})({position:"absolute",overflowY:"auto",overflowX:"hidden",minWidth:16,minHeight:16,maxWidth:"calc(100% - 32px)",maxHeight:"calc(100% - 32px)",outline:0}),Yle=h.forwardRef(function(s,r){const a=kt({props:s,name:"MuiPopover"}),{action:n,anchorEl:i,anchorOrigin:l={vertical:"top",horizontal:"left"},anchorPosition:o,anchorReference:c="anchorEl",children:d,className:u,container:m,elevation:p=8,marginThreshold:x=16,open:g,PaperProps:f={},slots:b={},slotProps:j={},transformOrigin:v={vertical:"top",horizontal:"left"},TransitionComponent:w,transitionDuration:y="auto",TransitionProps:C={},disableScrollLock:S=!1,..._}=a,E=h.useRef(),A={...a,anchorOrigin:l,anchorReference:c,elevation:p,marginThreshold:x,transformOrigin:v,TransitionComponent:w,transitionDuration:y,TransitionProps:C},R=Kle(A),I=h.useCallback(()=>{if(c==="anchorPosition")return o;const ie=ex(i),G=(ie&&ie.nodeType===1?ie:za(E.current).body).getBoundingClientRect();return{top:G.top+nE(G,l.vertical),left:G.left+iE(G,l.horizontal)}},[i,l.horizontal,l.vertical,o,c]),N=h.useCallback(ie=>({vertical:nE(ie,v.vertical),horizontal:iE(ie,v.horizontal)}),[v.horizontal,v.vertical]),P=h.useCallback(ie=>{const Y={width:ie.offsetWidth,height:ie.offsetHeight},G=N(Y);if(c==="none")return{top:null,left:null,transformOrigin:lE(G)};const H=I();let ue=H.top-G.vertical,me=H.left-G.horizontal;const ne=ue+Y.height,Ae=me+Y.width,Fe=mi(ex(i)),at=Fe.innerHeight-x,J=Fe.innerWidth-x;if(x!==null&&ue<x){const Q=ue-x;ue-=Q,G.vertical+=Q}else if(x!==null&&ne>at){const Q=ne-at;ue-=Q,G.vertical+=Q}if(x!==null&&me<x){const Q=me-x;me-=Q,G.horizontal+=Q}else if(Ae>J){const Q=Ae-J;me-=Q,G.horizontal+=Q}return{top:`${Math.round(ue)}px`,left:`${Math.round(me)}px`,transformOrigin:lE(G)}},[i,c,I,N,x]),[k,D]=h.useState(g),$=h.useCallback(()=>{const ie=E.current;if(!ie)return;const Y=P(ie);Y.top!==null&&ie.style.setProperty("top",Y.top),Y.left!==null&&(ie.style.left=Y.left),ie.style.transformOrigin=Y.transformOrigin,D(!0)},[P]);h.useEffect(()=>(S&&window.addEventListener("scroll",$),()=>window.removeEventListener("scroll",$)),[i,S,$]);const L=()=>{$()},B=()=>{D(!1)};h.useEffect(()=>{g&&$()}),h.useImperativeHandle(n,()=>g?{updatePosition:()=>{$()}}:null,[g,$]),h.useEffect(()=>{if(!g)return;const ie=By(()=>{$()}),Y=mi(ex(i));return Y.addEventListener("resize",ie),()=>{ie.clear(),Y.removeEventListener("resize",ie)}},[i,g,$]);let T=y;const O={slots:{transition:w,...b},slotProps:{transition:C,paper:f,...j}},[q,K]=Nt("transition",{elementType:df,externalForwardedProps:O,ownerState:A,getSlotProps:ie=>({...ie,onEntering:(Y,G)=>{var H;(H=ie.onEntering)==null||H.call(ie,Y,G),L()},onExited:Y=>{var G;(G=ie.onExited)==null||G.call(ie,Y),B()}}),additionalProps:{appear:!0,in:g}});y==="auto"&&!q.muiSupportAuto&&(T=void 0);const le=m||(i?za(ex(i)).body:void 0),[X,{slots:se,slotProps:de,...fe}]=Nt("root",{ref:r,elementType:Hle,externalForwardedProps:{...O,..._},shouldForwardComponentProp:!0,additionalProps:{slots:{backdrop:b.backdrop},slotProps:{backdrop:jre(typeof j.backdrop=="function"?j.backdrop(A):j.backdrop,{invisible:!0})},container:le,open:g},ownerState:A,className:oe(R.root,u)}),[z,re]=Nt("paper",{ref:E,className:R.paper,elementType:qM,externalForwardedProps:O,shouldForwardComponentProp:!0,additionalProps:{elevation:p,style:k?void 0:{opacity:0}},ownerState:A});return e.jsx(X,{...fe,...!rf(X)&&{slots:se,slotProps:de,disableScrollLock:S},children:e.jsx(q,{...K,timeout:T,children:e.jsx(z,{...re,children:d})})})});function Qle(t){return yt("MuiMenu",t)}gt("MuiMenu",["root","paper","list"]);const Jle={vertical:"top",horizontal:"right"},Zle={vertical:"top",horizontal:"left"},Xle=t=>{const{classes:s}=t;return bt({root:["root"],paper:["paper"],list:["list"]},Qle,s)},eoe=Pe(Yle,{shouldForwardProp:t=>qn(t)||t==="classes",name:"MuiMenu",slot:"Root"})({}),toe=Pe(qM,{name:"MuiMenu",slot:"Paper"})({maxHeight:"calc(100% - 96px)",WebkitOverflowScrolling:"touch"}),soe=Pe(zle,{name:"MuiMenu",slot:"List"})({outline:0}),roe=h.forwardRef(function(s,r){const a=kt({props:s,name:"MuiMenu"}),{autoFocus:n=!0,children:i,className:l,disableAutoFocusItem:o=!1,MenuListProps:c={},onClose:d,open:u,PaperProps:m={},PopoverClasses:p,transitionDuration:x="auto",TransitionProps:{onEntering:g,...f}={},variant:b="selectedMenu",slots:j={},slotProps:v={},...w}=a,y=z0(),C={...a,autoFocus:n,disableAutoFocusItem:o,MenuListProps:c,onEntering:g,PaperProps:m,transitionDuration:x,TransitionProps:f,variant:b},S=Xle(C),_=n&&!o&&u,E=h.useRef(null),A=(T,O)=>{E.current&&E.current.adjustStyleForScrollbar(T,{direction:y?"rtl":"ltr"}),g&&g(T,O)},R=T=>{T.key==="Tab"&&(T.preventDefault(),d&&d(T,"tabKeyDown"))};let I=-1;h.Children.map(i,(T,O)=>{h.isValidElement(T)&&(T.props.disabled||(b==="selectedMenu"&&T.props.selected||I===-1)&&(I=O))});const N={slots:j,slotProps:{list:c,transition:f,paper:m,...v}},P=Yu({elementType:j.root,externalSlotProps:v.root,ownerState:C,className:[S.root,l]}),[k,D]=Nt("paper",{className:S.paper,elementType:toe,externalForwardedProps:N,shouldForwardComponentProp:!0,ownerState:C}),[$,L]=Nt("list",{className:oe(S.list,c.className),elementType:soe,shouldForwardComponentProp:!0,externalForwardedProps:N,getSlotProps:T=>({...T,onKeyDown:O=>{var q;R(O),(q=T.onKeyDown)==null||q.call(T,O)}}),ownerState:C}),B=typeof N.slotProps.transition=="function"?N.slotProps.transition(C):N.slotProps.transition;return e.jsx(eoe,{onClose:d,anchorOrigin:{vertical:"bottom",horizontal:y?"right":"left"},transformOrigin:y?Jle:Zle,slots:{root:j.root,paper:k,backdrop:j.backdrop,...j.transition&&{transition:j.transition}},slotProps:{root:P,paper:D,backdrop:typeof v.backdrop=="function"?v.backdrop(C):v.backdrop,transition:{...B,onEntering:(...T)=>{var O;A(...T),(O=B==null?void 0:B.onEntering)==null||O.call(B,...T)}}},open:u,ref:r,transitionDuration:x,ownerState:C,...w,classes:p,children:e.jsx($,{actions:E,autoFocus:n&&(I===-1||o),autoFocusItem:_,variant:b,...L,children:i})})});function aoe(t){return yt("MuiNativeSelect",t)}const ck=gt("MuiNativeSelect",["root","select","multiple","filled","outlined","standard","disabled","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput","error"]),noe=t=>{const{classes:s,variant:r,disabled:a,multiple:n,open:i,error:l}=t,o={select:["select",r,a&&"disabled",n&&"multiple",l&&"error"],icon:["icon",`icon${_e(r)}`,i&&"iconOpen",a&&"disabled"]};return bt(o,aoe,s)},WM=Pe("select",{name:"MuiNativeSelect"})(({theme:t})=>({MozAppearance:"none",WebkitAppearance:"none",userSelect:"none",borderRadius:0,cursor:"pointer","&:focus":{borderRadius:0},[`&.${ck.disabled}`]:{cursor:"default"},"&[multiple]":{height:"auto"},"&:not([multiple]) option, &:not([multiple]) optgroup":{backgroundColor:(t.vars||t).palette.background.paper},variants:[{props:({ownerState:s})=>s.variant!=="filled"&&s.variant!=="outlined",style:{"&&&":{paddingRight:24,minWidth:16}}},{props:{variant:"filled"},style:{"&&&":{paddingRight:32}}},{props:{variant:"outlined"},style:{borderRadius:(t.vars||t).shape.borderRadius,"&:focus":{borderRadius:(t.vars||t).shape.borderRadius},"&&&":{paddingRight:32}}}]})),ioe=Pe(WM,{name:"MuiNativeSelect",slot:"Select",shouldForwardProp:qn,overridesResolver:(t,s)=>{const{ownerState:r}=t;return[s.select,s[r.variant],r.error&&s.error,{[`&.${ck.multiple}`]:s.multiple}]}})({}),zM=Pe("svg",{name:"MuiNativeSelect"})(({theme:t})=>({position:"absolute",right:0,top:"calc(50% - .5em)",pointerEvents:"none",color:(t.vars||t).palette.action.active,[`&.${ck.disabled}`]:{color:(t.vars||t).palette.action.disabled},variants:[{props:({ownerState:s})=>s.open,style:{transform:"rotate(180deg)"}},{props:{variant:"filled"},style:{right:7}},{props:{variant:"outlined"},style:{right:7}}]})),loe=Pe(zM,{name:"MuiNativeSelect",slot:"Icon",overridesResolver:(t,s)=>{const{ownerState:r}=t;return[s.icon,r.variant&&s[`icon${_e(r.variant)}`],r.open&&s.iconOpen]}})({}),ooe=h.forwardRef(function(s,r){const{className:a,disabled:n,error:i,IconComponent:l,inputRef:o,variant:c="standard",...d}=s,u={...s,disabled:n,variant:c,error:i},m=noe(u);return e.jsxs(h.Fragment,{children:[e.jsx(ioe,{ownerState:u,className:oe(m.select,a),disabled:n,ref:o||r,...d}),s.multiple?null:e.jsx(loe,{as:l,ownerState:u,className:m.icon})]})});var oE;const coe=Pe("fieldset",{name:"MuiNotchedOutlined",shouldForwardProp:qn})({textAlign:"left",position:"absolute",bottom:0,right:0,top:-5,left:0,margin:0,padding:"0 8px",pointerEvents:"none",borderRadius:"inherit",borderStyle:"solid",borderWidth:1,overflow:"hidden",minWidth:"0%"}),doe=Pe("legend",{name:"MuiNotchedOutlined",shouldForwardProp:qn})(Et(({theme:t})=>({float:"unset",width:"auto",overflow:"hidden",variants:[{props:({ownerState:s})=>!s.withLabel,style:{padding:0,lineHeight:"11px",transition:t.transitions.create("width",{duration:150,easing:t.transitions.easing.easeOut})}},{props:({ownerState:s})=>s.withLabel,style:{display:"block",padding:0,height:11,fontSize:"0.75em",visibility:"hidden",maxWidth:.01,transition:t.transitions.create("max-width",{duration:50,easing:t.transitions.easing.easeOut}),whiteSpace:"nowrap","& > span":{paddingLeft:5,paddingRight:5,display:"inline-block",opacity:0,visibility:"visible"}}},{props:({ownerState:s})=>s.withLabel&&s.notched,style:{maxWidth:"100%",transition:t.transitions.create("max-width",{duration:100,easing:t.transitions.easing.easeOut,delay:50})}}]})));function uoe(t){const{children:s,classes:r,className:a,label:n,notched:i,...l}=t,o=n!=null&&n!=="",c={...t,notched:i,withLabel:o};return e.jsx(coe,{"aria-hidden":!0,className:a,ownerState:c,...l,children:e.jsx(doe,{ownerState:c,children:o?e.jsx("span",{children:n}):oE||(oE=e.jsx("span",{className:"notranslate","aria-hidden":!0,children:""}))})})}const moe=t=>{const{classes:s}=t,a=bt({root:["root"],notchedOutline:["notchedOutline"],input:["input"]},Jne,s);return{...s,...a}},hoe=Pe(zy,{shouldForwardProp:t=>qn(t)||t==="classes",name:"MuiOutlinedInput",slot:"Root",overridesResolver:qy})(Et(({theme:t})=>{const s=t.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return{position:"relative",borderRadius:(t.vars||t).shape.borderRadius,[`&:hover .${fi.notchedOutline}`]:{borderColor:(t.vars||t).palette.text.primary},"@media (hover: none)":{[`&:hover .${fi.notchedOutline}`]:{borderColor:t.vars?t.alpha(t.vars.palette.common.onBackground,.23):s}},[`&.${fi.focused} .${fi.notchedOutline}`]:{borderWidth:2},variants:[...Object.entries(t.palette).filter(Hr()).map(([r])=>({props:{color:r},style:{[`&.${fi.focused} .${fi.notchedOutline}`]:{borderColor:(t.vars||t).palette[r].main}}})),{props:{},style:{[`&.${fi.error} .${fi.notchedOutline}`]:{borderColor:(t.vars||t).palette.error.main},[`&.${fi.disabled} .${fi.notchedOutline}`]:{borderColor:(t.vars||t).palette.action.disabled}}},{props:({ownerState:r})=>r.startAdornment,style:{paddingLeft:14}},{props:({ownerState:r})=>r.endAdornment,style:{paddingRight:14}},{props:({ownerState:r})=>r.multiline,style:{padding:"16.5px 14px"}},{props:({ownerState:r,size:a})=>r.multiline&&a==="small",style:{padding:"8.5px 14px"}}]}})),poe=Pe(uoe,{name:"MuiOutlinedInput",slot:"NotchedOutline"})(Et(({theme:t})=>{const s=t.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return{borderColor:t.vars?t.alpha(t.vars.palette.common.onBackground,.23):s}})),xoe=Pe(Gy,{name:"MuiOutlinedInput",slot:"Input",overridesResolver:Wy})(Et(({theme:t})=>({padding:"16.5px 14px",...!t.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:t.palette.mode==="light"?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:t.palette.mode==="light"?null:"#fff",caretColor:t.palette.mode==="light"?null:"#fff",borderRadius:"inherit"}},...t.vars&&{"&:-webkit-autofill":{borderRadius:"inherit"},[t.getColorSchemeSelector("dark")]:{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}},variants:[{props:{size:"small"},style:{padding:"8.5px 14px"}},{props:({ownerState:s})=>s.multiline,style:{padding:0}},{props:({ownerState:s})=>s.startAdornment,style:{paddingLeft:0}},{props:({ownerState:s})=>s.endAdornment,style:{paddingRight:0}}]}))),dk=h.forwardRef(function(s,r){const a=kt({props:s,name:"MuiOutlinedInput"}),{components:n={},fullWidth:i=!1,inputComponent:l="input",label:o,multiline:c=!1,notched:d,slots:u={},slotProps:m={},type:p="text",...x}=a,g=moe(a),f=Ho(),b=cd({props:a,muiFormControl:f,states:["color","disabled","error","focused","hiddenLabel","size","required"]}),j={...a,color:b.color||"primary",disabled:b.disabled,error:b.error,focused:b.focused,formControl:f,fullWidth:i,hiddenLabel:b.hiddenLabel,multiline:c,size:b.size,type:p},v=u.root??n.Root??hoe,w=u.input??n.Input??xoe,[y,C]=Nt("notchedOutline",{elementType:poe,className:g.notchedOutline,shouldForwardComponentProp:!0,ownerState:j,externalForwardedProps:{slots:u,slotProps:m},additionalProps:{label:o!=null&&o!==""&&b.required?e.jsxs(h.Fragment,{children:[o,"","*"]}):o}});return e.jsx(ik,{slots:{root:v,input:w},slotProps:m,renderSuffix:S=>e.jsx(y,{...C,notched:typeof d<"u"?d:!!(S.startAdornment||S.filled||S.focused)}),fullWidth:i,inputComponent:l,multiline:c,ref:r,type:p,...x,classes:{...g,notchedOutline:null}})});dk.muiName="Input";function GM(t){return yt("MuiSelect",t)}const Fm=gt("MuiSelect",["root","select","multiple","filled","outlined","standard","disabled","focused","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput","error"]);var cE;const goe=Pe(WM,{name:"MuiSelect",slot:"Select",overridesResolver:(t,s)=>{const{ownerState:r}=t;return[{[`&.${Fm.select}`]:s.select},{[`&.${Fm.select}`]:s[r.variant]},{[`&.${Fm.error}`]:s.error},{[`&.${Fm.multiple}`]:s.multiple}]}})({[`&.${Fm.select}`]:{height:"auto",minHeight:"1.4375em",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"}}),foe=Pe(zM,{name:"MuiSelect",slot:"Icon",overridesResolver:(t,s)=>{const{ownerState:r}=t;return[s.icon,r.variant&&s[`icon${_e(r.variant)}`],r.open&&s.iconOpen]}})({}),yoe=Pe("input",{shouldForwardProp:t=>fM(t)&&t!=="classes",name:"MuiSelect",slot:"NativeInput"})({bottom:0,left:0,position:"absolute",opacity:0,pointerEvents:"none",width:"100%",boxSizing:"border-box"});function dE(t,s){return typeof s=="object"&&s!==null?t===s:String(t)===String(s)}function boe(t){return t==null||typeof t=="string"&&!t.trim()}const voe=t=>{const{classes:s,variant:r,disabled:a,multiple:n,open:i,error:l}=t,o={select:["select",r,a&&"disabled",n&&"multiple",l&&"error"],icon:["icon",`icon${_e(r)}`,i&&"iconOpen",a&&"disabled"],nativeInput:["nativeInput"]};return bt(o,GM,s)},joe=h.forwardRef(function(s,r){var As,fs,ma,er;const{"aria-describedby":a,"aria-label":n,autoFocus:i,autoWidth:l,children:o,className:c,defaultOpen:d,defaultValue:u,disabled:m,displayEmpty:p,error:x=!1,IconComponent:g,inputRef:f,labelId:b,MenuProps:j={},multiple:v,name:w,onBlur:y,onChange:C,onClose:S,onFocus:_,onKeyDown:E,onMouseDown:A,onOpen:R,open:I,readOnly:N,renderValue:P,required:k,SelectDisplayProps:D={},tabIndex:$,type:L,value:B,variant:T="standard",...O}=s,[q,K]=ef({controlled:B,default:u,name:"Select"}),[le,X]=ef({controlled:I,default:d,name:"Select"}),se=h.useRef(null),de=h.useRef(null),[fe,z]=h.useState(null),{current:re}=h.useRef(I!=null),[ie,Y]=h.useState(),G=Br(r,f),H=h.useCallback(ze=>{de.current=ze,ze&&z(ze)},[]),ue=fe==null?void 0:fe.parentNode;h.useImperativeHandle(G,()=>({focus:()=>{de.current.focus()},node:se.current,value:q}),[q]),h.useEffect(()=>{d&&le&&fe&&!re&&(Y(l?null:ue.clientWidth),de.current.focus())},[fe,l]),h.useEffect(()=>{i&&de.current.focus()},[i]),h.useEffect(()=>{if(!b)return;const ze=za(de.current).getElementById(b);if(ze){const Bt=()=>{getSelection().isCollapsed&&de.current.focus()};return ze.addEventListener("click",Bt),()=>{ze.removeEventListener("click",Bt)}}},[b]);const me=(ze,Bt)=>{ze?R&&R(Bt):S&&S(Bt),re||(Y(l?null:ue.clientWidth),X(ze))},ne=ze=>{A==null||A(ze),ze.button===0&&(ze.preventDefault(),de.current.focus(),me(!0,ze))},Ae=ze=>{me(!1,ze)},Fe=h.Children.toArray(o),at=ze=>{const Bt=Fe.find(ys=>ys.props.value===ze.target.value);Bt!==void 0&&(K(Bt.props.value),C&&C(ze,Bt))},J=ze=>Bt=>{let ys;if(Bt.currentTarget.hasAttribute("tabindex")){if(v){ys=Array.isArray(q)?q.slice():[];const Zr=q.indexOf(ze.props.value);Zr===-1?ys.push(ze.props.value):ys.splice(Zr,1)}else ys=ze.props.value;if(ze.props.onClick&&ze.props.onClick(Bt),q!==ys&&(K(ys),C)){const Zr=Bt.nativeEvent||Bt,Xr=new Zr.constructor(Zr.type,Zr);Object.defineProperty(Xr,"target",{writable:!0,value:{value:ys,name:w}}),C(Xr,ze)}v||me(!1,Bt)}},Q=ze=>{N||([" ","ArrowUp","ArrowDown","Enter"].includes(ze.key)&&(ze.preventDefault(),me(!0,ze)),E==null||E(ze))},ee=fe!==null&&le,Ne=ze=>{!ee&&y&&(Object.defineProperty(ze,"target",{writable:!0,value:{value:q,name:w}}),y(ze))};delete O["aria-invalid"];let ye,he;const Ce=[];let Se=!1;(cf({value:q})||p)&&(P?ye=P(q):Se=!0);const Be=Fe.map(ze=>{if(!h.isValidElement(ze))return null;let Bt;if(v){if(!Array.isArray(q))throw new Error(_l(2));Bt=q.some(ys=>dE(ys,ze.props.value)),Bt&&Se&&Ce.push(ze.props.children)}else Bt=dE(q,ze.props.value),Bt&&Se&&(he=ze.props.children);return h.cloneElement(ze,{"aria-selected":Bt?"true":"false",onClick:J(ze),onKeyUp:ys=>{ys.key===" "&&ys.preventDefault(),ze.props.onKeyUp&&ze.props.onKeyUp(ys)},role:"option",selected:Bt,value:void 0,"data-value":ze.props.value})});Se&&(v?Ce.length===0?ye=null:ye=Ce.reduce((ze,Bt,ys)=>(ze.push(Bt),ys<Ce.length-1&&ze.push(", "),ze),[]):ye=he);let Dt=ie;!l&&re&&fe&&(Dt=ue.clientWidth);let Ht;typeof $<"u"?Ht=$:Ht=m?null:0;const Xe=D.id||(w?`mui-component-select-${w}`:void 0),Yt={...s,variant:T,value:q,open:ee,error:x},Mt=voe(Yt),Qt={...j.PaperProps,...typeof((As=j.slotProps)==null?void 0:As.paper)=="function"?j.slotProps.paper(Yt):(fs=j.slotProps)==null?void 0:fs.paper},Wt={...j.MenuListProps,...typeof((ma=j.slotProps)==null?void 0:ma.list)=="function"?j.slotProps.list(Yt):(er=j.slotProps)==null?void 0:er.list},Ks=om();return e.jsxs(h.Fragment,{children:[e.jsx(goe,{as:"div",ref:H,tabIndex:Ht,role:"combobox","aria-controls":ee?Ks:void 0,"aria-disabled":m?"true":void 0,"aria-expanded":ee?"true":"false","aria-haspopup":"listbox","aria-label":n,"aria-labelledby":[b,Xe].filter(Boolean).join(" ")||void 0,"aria-describedby":a,"aria-required":k?"true":void 0,"aria-invalid":x?"true":void 0,onKeyDown:Q,onMouseDown:m||N?null:ne,onBlur:Ne,onFocus:_,...D,ownerState:Yt,className:oe(D.className,Mt.select,c),id:Xe,children:boe(ye)?cE||(cE=e.jsx("span",{className:"notranslate","aria-hidden":!0,children:""})):ye}),e.jsx(yoe,{"aria-invalid":x,value:Array.isArray(q)?q.join(","):q,name:w,ref:se,"aria-hidden":!0,onChange:at,tabIndex:-1,disabled:m,className:Mt.nativeInput,autoFocus:i,required:k,...O,ownerState:Yt}),e.jsx(foe,{as:g,className:Mt.icon,ownerState:Yt}),e.jsx(roe,{id:`menu-${w||""}`,anchorEl:ue,open:ee,onClose:Ae,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"},...j,slotProps:{...j.slotProps,list:{"aria-labelledby":b,role:"listbox","aria-multiselectable":v?"true":void 0,disableListWrap:!0,id:Ks,...Wt},paper:{...Qt,style:{minWidth:Dt,...Qt!=null?Qt.style:null}}},children:Be})]})}),woe=t=>{const{classes:s}=t,a=bt({root:["root"]},GM,s);return{...s,...a}},uk={name:"MuiSelect",slot:"Root",shouldForwardProp:t=>qn(t)&&t!=="variant"},Noe=Pe(ok,uk)(""),koe=Pe(dk,uk)(""),Coe=Pe(lk,uk)(""),KM=h.forwardRef(function(s,r){const a=kt({name:"MuiSelect",props:s}),{autoWidth:n=!1,children:i,classes:l={},className:o,defaultOpen:c=!1,displayEmpty:d=!1,IconComponent:u=Xne,id:m,input:p,inputProps:x,label:g,labelId:f,MenuProps:b,multiple:j=!1,native:v=!1,onClose:w,onOpen:y,open:C,renderValue:S,SelectDisplayProps:_,variant:E="outlined",...A}=a,R=v?ooe:joe,I=Ho(),N=cd({props:a,muiFormControl:I,states:["variant","error"]}),P=N.variant||E,k={...a,variant:P,classes:l},D=woe(k),{root:$,...L}=D,B=p||{standard:e.jsx(Noe,{ownerState:k}),outlined:e.jsx(koe,{label:g,ownerState:k}),filled:e.jsx(Coe,{ownerState:k})}[P],T=Br(r,um(B));return e.jsx(h.Fragment,{children:h.cloneElement(B,{inputComponent:R,inputProps:{children:i,error:N.error,IconComponent:u,variant:P,type:void 0,multiple:j,...v?{id:m}:{autoWidth:n,defaultOpen:c,displayEmpty:d,labelId:f,MenuProps:b,onClose:w,onOpen:y,open:C,renderValue:S,SelectDisplayProps:{id:m,..._}},...x,classes:x?ca(L,x.classes):L,...p?p.props.inputProps:{}},...(j&&v||d)&&P==="outlined"?{notched:!0}:{},ref:T,className:oe(B.props.className,o,D.root),...!p&&{variant:P},...A})})});KM.muiName="Select";function Soe(t){return yt("MuiTooltip",t)}const Js=gt("MuiTooltip",["popper","popperInteractive","popperArrow","popperClose","tooltip","tooltipArrow","touch","tooltipPlacementLeft","tooltipPlacementRight","tooltipPlacementTop","tooltipPlacementBottom","arrow"]);function _oe(t){return Math.round(t*1e5)/1e5}const Eoe=t=>{const{classes:s,disableInteractive:r,arrow:a,touch:n,placement:i}=t,l={popper:["popper",!r&&"popperInteractive",a&&"popperArrow"],tooltip:["tooltip",a&&"tooltipArrow",n&&"touch",`tooltipPlacement${_e(i.split("-")[0])}`],arrow:["arrow"]};return bt(l,Soe,s)},Aoe=Pe(LM,{name:"MuiTooltip",slot:"Popper",overridesResolver:(t,s)=>{const{ownerState:r}=t;return[s.popper,!r.disableInteractive&&s.popperInteractive,r.arrow&&s.popperArrow,!r.open&&s.popperClose]}})(Et(({theme:t})=>({zIndex:(t.vars||t).zIndex.tooltip,pointerEvents:"none",variants:[{props:({ownerState:s})=>!s.disableInteractive,style:{pointerEvents:"auto"}},{props:({open:s})=>!s,style:{pointerEvents:"none"}},{props:({ownerState:s})=>s.arrow,style:{[`&[data-popper-placement*="bottom"] .${Js.arrow}`]:{top:0,marginTop:"-0.71em","&::before":{transformOrigin:"0 100%"}},[`&[data-popper-placement*="top"] .${Js.arrow}`]:{bottom:0,marginBottom:"-0.71em","&::before":{transformOrigin:"100% 0"}},[`&[data-popper-placement*="right"] .${Js.arrow}`]:{height:"1em",width:"0.71em","&::before":{transformOrigin:"100% 100%"}},[`&[data-popper-placement*="left"] .${Js.arrow}`]:{height:"1em",width:"0.71em","&::before":{transformOrigin:"0 0"}}}},{props:({ownerState:s})=>s.arrow&&!s.isRtl,style:{[`&[data-popper-placement*="right"] .${Js.arrow}`]:{left:0,marginLeft:"-0.71em"}}},{props:({ownerState:s})=>s.arrow&&!!s.isRtl,style:{[`&[data-popper-placement*="right"] .${Js.arrow}`]:{right:0,marginRight:"-0.71em"}}},{props:({ownerState:s})=>s.arrow&&!s.isRtl,style:{[`&[data-popper-placement*="left"] .${Js.arrow}`]:{right:0,marginRight:"-0.71em"}}},{props:({ownerState:s})=>s.arrow&&!!s.isRtl,style:{[`&[data-popper-placement*="left"] .${Js.arrow}`]:{left:0,marginLeft:"-0.71em"}}}]}))),Toe=Pe("div",{name:"MuiTooltip",slot:"Tooltip",overridesResolver:(t,s)=>{const{ownerState:r}=t;return[s.tooltip,r.touch&&s.touch,r.arrow&&s.tooltipArrow,s[`tooltipPlacement${_e(r.placement.split("-")[0])}`]]}})(Et(({theme:t})=>({backgroundColor:t.vars?t.vars.palette.Tooltip.bg:t.alpha(t.palette.grey[700],.92),borderRadius:(t.vars||t).shape.borderRadius,color:(t.vars||t).palette.common.white,fontFamily:t.typography.fontFamily,padding:"4px 8px",fontSize:t.typography.pxToRem(11),maxWidth:300,margin:2,wordWrap:"break-word",fontWeight:t.typography.fontWeightMedium,[`.${Js.popper}[data-popper-placement*="left"] &`]:{transformOrigin:"right center"},[`.${Js.popper}[data-popper-placement*="right"] &`]:{transformOrigin:"left center"},[`.${Js.popper}[data-popper-placement*="top"] &`]:{transformOrigin:"center bottom",marginBottom:"14px"},[`.${Js.popper}[data-popper-placement*="bottom"] &`]:{transformOrigin:"center top",marginTop:"14px"},variants:[{props:({ownerState:s})=>s.arrow,style:{position:"relative",margin:0}},{props:({ownerState:s})=>s.touch,style:{padding:"8px 16px",fontSize:t.typography.pxToRem(14),lineHeight:`${_oe(16/14)}em`,fontWeight:t.typography.fontWeightRegular}},{props:({ownerState:s})=>!s.isRtl,style:{[`.${Js.popper}[data-popper-placement*="left"] &`]:{marginRight:"14px"},[`.${Js.popper}[data-popper-placement*="right"] &`]:{marginLeft:"14px"}}},{props:({ownerState:s})=>!s.isRtl&&s.touch,style:{[`.${Js.popper}[data-popper-placement*="left"] &`]:{marginRight:"24px"},[`.${Js.popper}[data-popper-placement*="right"] &`]:{marginLeft:"24px"}}},{props:({ownerState:s})=>!!s.isRtl,style:{[`.${Js.popper}[data-popper-placement*="left"] &`]:{marginLeft:"14px"},[`.${Js.popper}[data-popper-placement*="right"] &`]:{marginRight:"14px"}}},{props:({ownerState:s})=>!!s.isRtl&&s.touch,style:{[`.${Js.popper}[data-popper-placement*="left"] &`]:{marginLeft:"24px"},[`.${Js.popper}[data-popper-placement*="right"] &`]:{marginRight:"24px"}}},{props:({ownerState:s})=>s.touch,style:{[`.${Js.popper}[data-popper-placement*="top"] &`]:{marginBottom:"24px"}}},{props:({ownerState:s})=>s.touch,style:{[`.${Js.popper}[data-popper-placement*="bottom"] &`]:{marginTop:"24px"}}}]}))),Poe=Pe("span",{name:"MuiTooltip",slot:"Arrow"})(Et(({theme:t})=>({overflow:"hidden",position:"absolute",width:"1em",height:"0.71em",boxSizing:"border-box",color:t.vars?t.vars.palette.Tooltip.bg:t.alpha(t.palette.grey[700],.9),"&::before":{content:'""',margin:"auto",display:"block",width:"100%",height:"100%",backgroundColor:"currentColor",transform:"rotate(45deg)"}})));let tx=!1;const uE=new $y;let Om={x:0,y:0};function sx(t,s){return(r,...a)=>{s&&s(r,...a),t(r,...a)}}const mE=h.forwardRef(function(s,r){const a=kt({props:s,name:"MuiTooltip"}),{arrow:n=!1,children:i,classes:l,components:o={},componentsProps:c={},describeChild:d=!1,disableFocusListener:u=!1,disableHoverListener:m=!1,disableInteractive:p=!1,disableTouchListener:x=!1,enterDelay:g=100,enterNextDelay:f=0,enterTouchDelay:b=700,followCursor:j=!1,id:v,leaveDelay:w=0,leaveTouchDelay:y=1500,onClose:C,onOpen:S,open:_,placement:E="bottom",PopperComponent:A,PopperProps:R={},slotProps:I={},slots:N={},title:P,TransitionComponent:k,TransitionProps:D,...$}=a,L=h.isValidElement(i)?i:e.jsx("span",{children:i}),B=cm(),T=z0(),[O,q]=h.useState(),[K,le]=h.useState(null),X=h.useRef(!1),se=p||j,de=Zd(),fe=Zd(),z=Zd(),re=Zd(),[ie,Y]=ef({controlled:_,default:!1,name:"Tooltip",state:"open"});let G=ie;const H=om(v),ue=h.useRef(),me=Pn(()=>{ue.current!==void 0&&(document.body.style.WebkitUserSelect=ue.current,ue.current=void 0),re.clear()});h.useEffect(()=>me,[me]);const ne=ot=>{uE.clear(),tx=!0,Y(!0),S&&!G&&S(ot)},Ae=Pn(ot=>{uE.start(800+w,()=>{tx=!1}),Y(!1),C&&G&&C(ot),de.start(B.transitions.duration.shortest,()=>{X.current=!1})}),Fe=ot=>{X.current&&ot.type!=="touchstart"||(O&&O.removeAttribute("title"),fe.clear(),z.clear(),g||tx&&f?fe.start(tx?f:g,()=>{ne(ot)}):ne(ot))},at=ot=>{fe.clear(),z.start(w,()=>{Ae(ot)})},[,J]=h.useState(!1),Q=ot=>{af(ot.target)||(J(!1),at(ot))},ee=ot=>{O||q(ot.currentTarget),af(ot.target)&&(J(!0),Fe(ot))},Ne=ot=>{X.current=!0;const ht=L.props;ht.onTouchStart&&ht.onTouchStart(ot)},ye=ot=>{Ne(ot),z.clear(),de.clear(),me(),ue.current=document.body.style.WebkitUserSelect,document.body.style.WebkitUserSelect="none",re.start(b,()=>{document.body.style.WebkitUserSelect=ue.current,Fe(ot)})},he=ot=>{L.props.onTouchEnd&&L.props.onTouchEnd(ot),me(),z.start(y,()=>{Ae(ot)})};h.useEffect(()=>{if(!G)return;function ot(ht){ht.key==="Escape"&&Ae(ht)}return document.addEventListener("keydown",ot),()=>{document.removeEventListener("keydown",ot)}},[Ae,G]);const Ce=Br(um(L),q,r);!P&&P!==0&&(G=!1);const Se=h.useRef(),Be=ot=>{const ht=L.props;ht.onMouseMove&&ht.onMouseMove(ot),Om={x:ot.clientX,y:ot.clientY},Se.current&&Se.current.update()},Dt={},Ht=typeof P=="string";d?(Dt.title=!G&&Ht&&!m?P:null,Dt["aria-describedby"]=G?H:null):(Dt["aria-label"]=Ht?P:null,Dt["aria-labelledby"]=G&&!Ht?H:null);const Xe={...Dt,...$,...L.props,className:oe($.className,L.props.className),onTouchStart:Ne,ref:Ce,...j?{onMouseMove:Be}:{}},Yt={};x||(Xe.onTouchStart=ye,Xe.onTouchEnd=he),m||(Xe.onMouseOver=sx(Fe,Xe.onMouseOver),Xe.onMouseLeave=sx(at,Xe.onMouseLeave),se||(Yt.onMouseOver=Fe,Yt.onMouseLeave=at)),u||(Xe.onFocus=sx(ee,Xe.onFocus),Xe.onBlur=sx(Q,Xe.onBlur),se||(Yt.onFocus=ee,Yt.onBlur=Q));const Mt={...a,isRtl:T,arrow:n,disableInteractive:se,placement:E,PopperComponentProp:A,touch:X.current},Qt=typeof I.popper=="function"?I.popper(Mt):I.popper,Wt=h.useMemo(()=>{var ht,$e;let ot=[{name:"arrow",enabled:!!K,options:{element:K,padding:4}}];return(ht=R.popperOptions)!=null&&ht.modifiers&&(ot=ot.concat(R.popperOptions.modifiers)),($e=Qt==null?void 0:Qt.popperOptions)!=null&&$e.modifiers&&(ot=ot.concat(Qt.popperOptions.modifiers)),{...R.popperOptions,...Qt==null?void 0:Qt.popperOptions,modifiers:ot}},[K,R.popperOptions,Qt==null?void 0:Qt.popperOptions]),Ks=Eoe(Mt),As=typeof I.transition=="function"?I.transition(Mt):I.transition,fs={slots:{popper:o.Popper,transition:o.Transition??k,tooltip:o.Tooltip,arrow:o.Arrow,...N},slotProps:{arrow:I.arrow??c.arrow,popper:{...R,...Qt??c.popper},tooltip:I.tooltip??c.tooltip,transition:{...D,...As??c.transition}}},[ma,er]=Nt("popper",{elementType:Aoe,externalForwardedProps:fs,ownerState:Mt,className:oe(Ks.popper,R==null?void 0:R.className)}),[ze,Bt]=Nt("transition",{elementType:df,externalForwardedProps:fs,ownerState:Mt}),[ys,Zr]=Nt("tooltip",{elementType:Toe,className:Ks.tooltip,externalForwardedProps:fs,ownerState:Mt}),[Xr,Ms]=Nt("arrow",{elementType:Poe,className:Ks.arrow,externalForwardedProps:fs,ownerState:Mt,ref:le});return e.jsxs(h.Fragment,{children:[h.cloneElement(L,Xe),e.jsx(ma,{as:A??LM,placement:E,anchorEl:j?{getBoundingClientRect:()=>({top:Om.y,left:Om.x,right:Om.x,bottom:Om.y,width:0,height:0})}:O,popperRef:Se,open:O?G:!1,id:H,transition:!0,...Yt,...er,popperOptions:Wt,children:({TransitionProps:ot})=>e.jsx(ze,{timeout:B.transitions.duration.shorter,...ot,...Bt,children:e.jsxs(ys,{...Zr,children:[P,n?e.jsx(Xr,{...Ms}):null]})})})]})});function Roe(t){return yt("MuiSwitch",t)}const ha=gt("MuiSwitch",["root","edgeStart","edgeEnd","switchBase","colorPrimary","colorSecondary","sizeSmall","sizeMedium","checked","disabled","input","thumb","track"]),Doe=t=>{const{classes:s,edge:r,size:a,color:n,checked:i,disabled:l}=t,o={root:["root",r&&`edge${_e(r)}`,`size${_e(a)}`],switchBase:["switchBase",`color${_e(n)}`,i&&"checked",l&&"disabled"],thumb:["thumb"],track:["track"],input:["input"]},c=bt(o,Roe,s);return{...s,...c}},Ioe=Pe("span",{name:"MuiSwitch",slot:"Root",overridesResolver:(t,s)=>{const{ownerState:r}=t;return[s.root,r.edge&&s[`edge${_e(r.edge)}`],s[`size${_e(r.size)}`]]}})({display:"inline-flex",width:34+12*2,height:14+12*2,overflow:"hidden",padding:12,boxSizing:"border-box",position:"relative",flexShrink:0,zIndex:0,verticalAlign:"middle","@media print":{colorAdjust:"exact"},variants:[{props:{edge:"start"},style:{marginLeft:-8}},{props:{edge:"end"},style:{marginRight:-8}},{props:{size:"small"},style:{width:40,height:24,padding:7,[`& .${ha.thumb}`]:{width:16,height:16},[`& .${ha.switchBase}`]:{padding:4,[`&.${ha.checked}`]:{transform:"translateX(16px)"}}}}]}),Moe=Pe(Sie,{name:"MuiSwitch",slot:"SwitchBase",overridesResolver:(t,s)=>{const{ownerState:r}=t;return[s.switchBase,{[`& .${ha.input}`]:s.input},r.color!=="default"&&s[`color${_e(r.color)}`]]}})(Et(({theme:t})=>({position:"absolute",top:0,left:0,zIndex:1,color:t.vars?t.vars.palette.Switch.defaultColor:`${t.palette.mode==="light"?t.palette.common.white:t.palette.grey[300]}`,transition:t.transitions.create(["left","transform"],{duration:t.transitions.duration.shortest}),[`&.${ha.checked}`]:{transform:"translateX(20px)"},[`&.${ha.disabled}`]:{color:t.vars?t.vars.palette.Switch.defaultDisabledColor:`${t.palette.mode==="light"?t.palette.grey[100]:t.palette.grey[600]}`},[`&.${ha.checked} + .${ha.track}`]:{opacity:.5},[`&.${ha.disabled} + .${ha.track}`]:{opacity:t.vars?t.vars.opacity.switchTrackDisabled:`${t.palette.mode==="light"?.12:.2}`},[`& .${ha.input}`]:{left:"-100%",width:"300%"}})),Et(({theme:t})=>({"&:hover":{backgroundColor:t.alpha((t.vars||t).palette.action.active,(t.vars||t).palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},variants:[...Object.entries(t.palette).filter(Hr(["light"])).map(([s])=>({props:{color:s},style:{[`&.${ha.checked}`]:{color:(t.vars||t).palette[s].main,"&:hover":{backgroundColor:t.alpha((t.vars||t).palette[s].main,(t.vars||t).palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${ha.disabled}`]:{color:t.vars?t.vars.palette.Switch[`${s}DisabledColor`]:`${t.palette.mode==="light"?t.lighten(t.palette[s].main,.62):t.darken(t.palette[s].main,.55)}`}},[`&.${ha.checked} + .${ha.track}`]:{backgroundColor:(t.vars||t).palette[s].main}}}))]}))),Loe=Pe("span",{name:"MuiSwitch",slot:"Track"})(Et(({theme:t})=>({height:"100%",width:"100%",borderRadius:14/2,zIndex:-1,transition:t.transitions.create(["opacity","background-color"],{duration:t.transitions.duration.shortest}),backgroundColor:t.vars?t.vars.palette.common.onBackground:`${t.palette.mode==="light"?t.palette.common.black:t.palette.common.white}`,opacity:t.vars?t.vars.opacity.switchTrack:`${t.palette.mode==="light"?.38:.3}`}))),Foe=Pe("span",{name:"MuiSwitch",slot:"Thumb"})(Et(({theme:t})=>({boxShadow:(t.vars||t).shadows[1],backgroundColor:"currentColor",width:20,height:20,borderRadius:"50%"}))),uc=h.forwardRef(function(s,r){const a=kt({props:s,name:"MuiSwitch"}),{className:n,color:i="primary",edge:l=!1,size:o="medium",sx:c,slots:d={},slotProps:u={},...m}=a,p={...a,color:i,edge:l,size:o},x=Doe(p),g={slots:d,slotProps:u},[f,b]=Nt("root",{className:oe(x.root,n),elementType:Ioe,externalForwardedProps:g,ownerState:p,additionalProps:{sx:c}}),[j,v]=Nt("thumb",{className:x.thumb,elementType:Foe,externalForwardedProps:g,ownerState:p}),w=e.jsx(j,{...v}),[y,C]=Nt("track",{className:x.track,elementType:Loe,externalForwardedProps:g,ownerState:p});return e.jsxs(f,{...b,children:[e.jsx(Moe,{type:"checkbox",icon:w,checkedIcon:w,ref:r,ownerState:p,...m,classes:{...x,root:x.switchBase},slots:{...d.switchBase&&{root:d.switchBase},...d.input&&{input:d.input}},slotProps:{...u.switchBase&&{root:typeof u.switchBase=="function"?u.switchBase(p):u.switchBase},input:{role:"switch"},...u.input&&{input:typeof u.input=="function"?u.input(p):u.input}}}),e.jsx(y,{...C})]})});function Ooe(t){return yt("MuiTab",t)}const bn=gt("MuiTab",["root","labelIcon","textColorInherit","textColorPrimary","textColorSecondary","selected","disabled","fullWidth","wrapped","iconWrapper","icon"]),Boe=t=>{const{classes:s,textColor:r,fullWidth:a,wrapped:n,icon:i,label:l,selected:o,disabled:c}=t,d={root:["root",i&&l&&"labelIcon",`textColor${_e(r)}`,a&&"fullWidth",n&&"wrapped",o&&"selected",c&&"disabled"],icon:["iconWrapper","icon"]};return bt(d,Ooe,s)},$oe=Pe(td,{name:"MuiTab",slot:"Root",overridesResolver:(t,s)=>{const{ownerState:r}=t;return[s.root,r.label&&r.icon&&s.labelIcon,s[`textColor${_e(r.textColor)}`],r.fullWidth&&s.fullWidth,r.wrapped&&s.wrapped,{[`& .${bn.iconWrapper}`]:s.iconWrapper},{[`& .${bn.icon}`]:s.icon}]}})(Et(({theme:t})=>({...t.typography.button,maxWidth:360,minWidth:90,position:"relative",minHeight:48,flexShrink:0,padding:"12px 16px",overflow:"hidden",whiteSpace:"normal",textAlign:"center",lineHeight:1.25,variants:[{props:({ownerState:s})=>s.label&&(s.iconPosition==="top"||s.iconPosition==="bottom"),style:{flexDirection:"column"}},{props:({ownerState:s})=>s.label&&s.iconPosition!=="top"&&s.iconPosition!=="bottom",style:{flexDirection:"row"}},{props:({ownerState:s})=>s.icon&&s.label,style:{minHeight:72,paddingTop:9,paddingBottom:9}},{props:({ownerState:s,iconPosition:r})=>s.icon&&s.label&&r==="top",style:{[`& > .${bn.icon}`]:{marginBottom:6}}},{props:({ownerState:s,iconPosition:r})=>s.icon&&s.label&&r==="bottom",style:{[`& > .${bn.icon}`]:{marginTop:6}}},{props:({ownerState:s,iconPosition:r})=>s.icon&&s.label&&r==="start",style:{[`& > .${bn.icon}`]:{marginRight:t.spacing(1)}}},{props:({ownerState:s,iconPosition:r})=>s.icon&&s.label&&r==="end",style:{[`& > .${bn.icon}`]:{marginLeft:t.spacing(1)}}},{props:{textColor:"inherit"},style:{color:"inherit",opacity:.6,[`&.${bn.selected}`]:{opacity:1},[`&.${bn.disabled}`]:{opacity:(t.vars||t).palette.action.disabledOpacity}}},{props:{textColor:"primary"},style:{color:(t.vars||t).palette.text.secondary,[`&.${bn.selected}`]:{color:(t.vars||t).palette.primary.main},[`&.${bn.disabled}`]:{color:(t.vars||t).palette.text.disabled}}},{props:{textColor:"secondary"},style:{color:(t.vars||t).palette.text.secondary,[`&.${bn.selected}`]:{color:(t.vars||t).palette.secondary.main},[`&.${bn.disabled}`]:{color:(t.vars||t).palette.text.disabled}}},{props:({ownerState:s})=>s.fullWidth,style:{flexShrink:1,flexGrow:1,flexBasis:0,maxWidth:"none"}},{props:({ownerState:s})=>s.wrapped,style:{fontSize:t.typography.pxToRem(12)}}]}))),rx=h.forwardRef(function(s,r){const a=kt({props:s,name:"MuiTab"}),{className:n,disabled:i=!1,disableFocusRipple:l=!1,fullWidth:o,icon:c,iconPosition:d="top",indicator:u,label:m,onChange:p,onClick:x,onFocus:g,selected:f,selectionFollowsFocus:b,textColor:j="inherit",value:v,wrapped:w=!1,...y}=a,C={...a,disabled:i,disableFocusRipple:l,selected:f,icon:!!c,iconPosition:d,label:!!m,fullWidth:o,textColor:j,wrapped:w},S=Boe(C),_=c&&m&&h.isValidElement(c)?h.cloneElement(c,{className:oe(S.icon,c.props.className)}):c,E=R=>{!f&&p&&p(R,v),x&&x(R)},A=R=>{b&&!f&&p&&p(R,v),g&&g(R)};return e.jsxs($oe,{focusRipple:!l,className:oe(S.root,n),ref:r,role:"tab","aria-selected":f,disabled:i,onClick:E,onFocus:A,ownerState:C,tabIndex:f?0:-1,...y,children:[d==="top"||d==="start"?e.jsxs(h.Fragment,{children:[_,m]}):e.jsxs(h.Fragment,{children:[m,_]}),u]})}),HM=h.createContext();function Uoe(t){return yt("MuiTable",t)}gt("MuiTable",["root","stickyHeader"]);const Voe=t=>{const{classes:s,stickyHeader:r}=t;return bt({root:["root",r&&"stickyHeader"]},Uoe,s)},qoe=Pe("table",{name:"MuiTable",slot:"Root",overridesResolver:(t,s)=>{const{ownerState:r}=t;return[s.root,r.stickyHeader&&s.stickyHeader]}})(Et(({theme:t})=>({display:"table",width:"100%",borderCollapse:"collapse",borderSpacing:0,"& caption":{...t.typography.body2,padding:t.spacing(2),color:(t.vars||t).palette.text.secondary,textAlign:"left",captionSide:"bottom"},variants:[{props:({ownerState:s})=>s.stickyHeader,style:{borderCollapse:"separate"}}]}))),hE="table",Woe=h.forwardRef(function(s,r){const a=kt({props:s,name:"MuiTable"}),{className:n,component:i=hE,padding:l="normal",size:o="medium",stickyHeader:c=!1,...d}=a,u={...a,component:i,padding:l,size:o,stickyHeader:c},m=Voe(u),p=h.useMemo(()=>({padding:l,size:o,stickyHeader:c}),[l,o,c]);return e.jsx(HM.Provider,{value:p,children:e.jsx(qoe,{as:i,role:i===hE?null:"table",ref:r,className:oe(m.root,n),ownerState:u,...d})})}),Ky=h.createContext();function zoe(t){return yt("MuiTableBody",t)}gt("MuiTableBody",["root"]);const Goe=t=>{const{classes:s}=t;return bt({root:["root"]},zoe,s)},Koe=Pe("tbody",{name:"MuiTableBody",slot:"Root"})({display:"table-row-group"}),Hoe={variant:"body"},pE="tbody",Yoe=h.forwardRef(function(s,r){const a=kt({props:s,name:"MuiTableBody"}),{className:n,component:i=pE,...l}=a,o={...a,component:i},c=Goe(o);return e.jsx(Ky.Provider,{value:Hoe,children:e.jsx(Koe,{className:oe(c.root,n),as:i,ref:r,role:i===pE?null:"rowgroup",ownerState:o,...l})})});function Qoe(t){return yt("MuiTableCell",t)}const Joe=gt("MuiTableCell",["root","head","body","footer","sizeSmall","sizeMedium","paddingCheckbox","paddingNone","alignLeft","alignCenter","alignRight","alignJustify","stickyHeader"]),Zoe=t=>{const{classes:s,variant:r,align:a,padding:n,size:i,stickyHeader:l}=t,o={root:["root",r,l&&"stickyHeader",a!=="inherit"&&`align${_e(a)}`,n!=="normal"&&`padding${_e(n)}`,`size${_e(i)}`]};return bt(o,Qoe,s)},Xoe=Pe("td",{name:"MuiTableCell",slot:"Root",overridesResolver:(t,s)=>{const{ownerState:r}=t;return[s.root,s[r.variant],s[`size${_e(r.size)}`],r.padding!=="normal"&&s[`padding${_e(r.padding)}`],r.align!=="inherit"&&s[`align${_e(r.align)}`],r.stickyHeader&&s.stickyHeader]}})(Et(({theme:t})=>({...t.typography.body2,display:"table-cell",verticalAlign:"inherit",borderBottom:t.vars?`1px solid ${t.vars.palette.TableCell.border}`:`1px solid
    ${t.palette.mode==="light"?t.lighten(t.alpha(t.palette.divider,1),.88):t.darken(t.alpha(t.palette.divider,1),.68)}`,textAlign:"left",padding:16,variants:[{props:{variant:"head"},style:{color:(t.vars||t).palette.text.primary,lineHeight:t.typography.pxToRem(24),fontWeight:t.typography.fontWeightMedium}},{props:{variant:"body"},style:{color:(t.vars||t).palette.text.primary}},{props:{variant:"footer"},style:{color:(t.vars||t).palette.text.secondary,lineHeight:t.typography.pxToRem(21),fontSize:t.typography.pxToRem(12)}},{props:{size:"small"},style:{padding:"6px 16px",[`&.${Joe.paddingCheckbox}`]:{width:24,padding:"0 12px 0 16px","& > *":{padding:0}}}},{props:{padding:"checkbox"},style:{width:48,padding:"0 0 0 4px"}},{props:{padding:"none"},style:{padding:0}},{props:{align:"left"},style:{textAlign:"left"}},{props:{align:"center"},style:{textAlign:"center"}},{props:{align:"right"},style:{textAlign:"right",flexDirection:"row-reverse"}},{props:{align:"justify"},style:{textAlign:"justify"}},{props:({ownerState:s})=>s.stickyHeader,style:{position:"sticky",top:0,zIndex:2,backgroundColor:(t.vars||t).palette.background.default}}]}))),sa=h.forwardRef(function(s,r){const a=kt({props:s,name:"MuiTableCell"}),{align:n="inherit",className:i,component:l,padding:o,scope:c,size:d,sortDirection:u,variant:m,...p}=a,x=h.useContext(HM),g=h.useContext(Ky),f=g&&g.variant==="head";let b;l?b=l:b=f?"th":"td";let j=c;b==="td"?j=void 0:!j&&f&&(j="col");const v=m||g&&g.variant,w={...a,align:n,component:b,padding:o||(x&&x.padding?x.padding:"normal"),size:d||(x&&x.size?x.size:"medium"),sortDirection:u,stickyHeader:v==="head"&&x&&x.stickyHeader,variant:v},y=Zoe(w);let C=null;return u&&(C=u==="asc"?"ascending":"descending"),e.jsx(Xoe,{as:b,ref:r,className:oe(y.root,i),"aria-sort":C,scope:j,ownerState:w,...p})});function ece(t){return yt("MuiTableContainer",t)}gt("MuiTableContainer",["root"]);const tce=t=>{const{classes:s}=t;return bt({root:["root"]},ece,s)},sce=Pe("div",{name:"MuiTableContainer",slot:"Root"})({width:"100%",overflowX:"auto"}),rce=h.forwardRef(function(s,r){const a=kt({props:s,name:"MuiTableContainer"}),{className:n,component:i="div",...l}=a,o={...a,component:i},c=tce(o);return e.jsx(sce,{ref:r,as:i,className:oe(c.root,n),ownerState:o,...l})});function ace(t){return yt("MuiTableHead",t)}gt("MuiTableHead",["root"]);const nce=t=>{const{classes:s}=t;return bt({root:["root"]},ace,s)},ice=Pe("thead",{name:"MuiTableHead",slot:"Root"})({display:"table-header-group"}),lce={variant:"head"},xE="thead",oce=h.forwardRef(function(s,r){const a=kt({props:s,name:"MuiTableHead"}),{className:n,component:i=xE,...l}=a,o={...a,component:i},c=nce(o);return e.jsx(Ky.Provider,{value:lce,children:e.jsx(ice,{as:i,className:oe(c.root,n),ref:r,role:i===xE?null:"rowgroup",ownerState:o,...l})})}),cce=Wn(e.jsx("path",{d:"M15.41 16.09l-4.58-4.59 4.58-4.59L14 5.5l-6 6 6 6z"})),dce=Wn(e.jsx("path",{d:"M8.59 16.34l4.58-4.59-4.58-4.59L10 5.75l6 6-6 6z"}));function uce(t){return yt("MuiTableRow",t)}const gE=gt("MuiTableRow",["root","selected","hover","head","footer"]),mce=t=>{const{classes:s,selected:r,hover:a,head:n,footer:i}=t;return bt({root:["root",r&&"selected",a&&"hover",n&&"head",i&&"footer"]},uce,s)},hce=Pe("tr",{name:"MuiTableRow",slot:"Root",overridesResolver:(t,s)=>{const{ownerState:r}=t;return[s.root,r.head&&s.head,r.footer&&s.footer]}})(Et(({theme:t})=>({color:"inherit",display:"table-row",verticalAlign:"middle",outline:0,[`&.${gE.hover}:hover`]:{backgroundColor:(t.vars||t).palette.action.hover},[`&.${gE.selected}`]:{backgroundColor:t.alpha((t.vars||t).palette.primary.main,(t.vars||t).palette.action.selectedOpacity),"&:hover":{backgroundColor:t.alpha((t.vars||t).palette.primary.main,`${(t.vars||t).palette.action.selectedOpacity} + ${(t.vars||t).palette.action.hoverOpacity}`)}}}))),fE="tr",yE=h.forwardRef(function(s,r){const a=kt({props:s,name:"MuiTableRow"}),{className:n,component:i=fE,hover:l=!1,selected:o=!1,...c}=a,d=h.useContext(Ky),u={...a,component:i,hover:l,selected:o,head:d&&d.variant==="head",footer:d&&d.variant==="footer"},m=mce(u);return e.jsx(hce,{as:i,ref:r,className:oe(m.root,n),role:i===fE?null:"row",ownerState:u,...c})});function pce(t){return(1+Math.sin(Math.PI*t-Math.PI/2))/2}function xce(t,s,r,a={},n=()=>{}){const{ease:i=pce,duration:l=300}=a;let o=null;const c=s[t];let d=!1;const u=()=>{d=!0},m=p=>{if(d){n(new Error("Animation cancelled"));return}o===null&&(o=p);const x=Math.min(1,(p-o)/l);if(s[t]=i(x)*(r-c)+c,x>=1){requestAnimationFrame(()=>{n(null)});return}requestAnimationFrame(m)};return c===r?(n(new Error("Element already at target position")),u):(requestAnimationFrame(m),u)}const gce={width:99,height:99,position:"absolute",top:-9999,overflow:"scroll"};function fce(t){const{onChange:s,...r}=t,a=h.useRef(),n=h.useRef(null),i=()=>{a.current=n.current.offsetHeight-n.current.clientHeight};return $i(()=>{const l=By(()=>{const c=a.current;i(),c!==a.current&&s(a.current)}),o=mi(n.current);return o.addEventListener("resize",l),()=>{l.clear(),o.removeEventListener("resize",l)}},[s]),h.useEffect(()=>{i(),s(a.current)},[s]),e.jsx("div",{style:gce,...r,ref:n})}function yce(t){return yt("MuiTabScrollButton",t)}const bce=gt("MuiTabScrollButton",["root","vertical","horizontal","disabled"]),vce=t=>{const{classes:s,orientation:r,disabled:a}=t;return bt({root:["root",r,a&&"disabled"]},yce,s)},jce=Pe(td,{name:"MuiTabScrollButton",slot:"Root",overridesResolver:(t,s)=>{const{ownerState:r}=t;return[s.root,r.orientation&&s[r.orientation]]}})({width:40,flexShrink:0,opacity:.8,[`&.${bce.disabled}`]:{opacity:0},variants:[{props:{orientation:"vertical"},style:{width:"100%",height:40,"& svg":{transform:"var(--TabScrollButton-svgRotate)"}}}]}),wce=h.forwardRef(function(s,r){const a=kt({props:s,name:"MuiTabScrollButton"}),{className:n,slots:i={},slotProps:l={},direction:o,orientation:c,disabled:d,...u}=a,m=z0(),p={isRtl:m,...a},x=vce(p),g=i.StartScrollButtonIcon??cce,f=i.EndScrollButtonIcon??dce,b=Yu({elementType:g,externalSlotProps:l.startScrollButtonIcon,additionalProps:{fontSize:"small"},ownerState:p}),j=Yu({elementType:f,externalSlotProps:l.endScrollButtonIcon,additionalProps:{fontSize:"small"},ownerState:p});return e.jsx(jce,{component:"div",className:oe(x.root,n),ref:r,role:null,ownerState:p,tabIndex:null,...u,style:{...u.style,...c==="vertical"&&{"--TabScrollButton-svgRotate":`rotate(${m?-90:90}deg)`}},children:o==="left"?e.jsx(g,{...b}):e.jsx(f,{...j})})});function Nce(t){return yt("MuiTabs",t)}const Nv=gt("MuiTabs",["root","vertical","list","flexContainer","flexContainerVertical","centered","scroller","fixed","scrollableX","scrollableY","hideScrollbar","scrollButtons","scrollButtonsHideMobile","indicator"]),bE=(t,s)=>t===s?t.firstChild:s&&s.nextElementSibling?s.nextElementSibling:t.firstChild,vE=(t,s)=>t===s?t.lastChild:s&&s.previousElementSibling?s.previousElementSibling:t.lastChild,ax=(t,s,r)=>{let a=!1,n=r(t,s);for(;n;){if(n===t.firstChild){if(a)return;a=!0}const i=n.disabled||n.getAttribute("aria-disabled")==="true";if(!n.hasAttribute("tabindex")||i)n=r(t,n);else{n.focus();return}}},kce=t=>{const{vertical:s,fixed:r,hideScrollbar:a,scrollableX:n,scrollableY:i,centered:l,scrollButtonsHideMobile:o,classes:c}=t;return bt({root:["root",s&&"vertical"],scroller:["scroller",r&&"fixed",a&&"hideScrollbar",n&&"scrollableX",i&&"scrollableY"],list:["list","flexContainer",s&&"flexContainerVertical",s&&"vertical",l&&"centered"],indicator:["indicator"],scrollButtons:["scrollButtons",o&&"scrollButtonsHideMobile"],scrollableX:[n&&"scrollableX"],hideScrollbar:[a&&"hideScrollbar"]},Nce,c)},Cce=Pe("div",{name:"MuiTabs",slot:"Root",overridesResolver:(t,s)=>{const{ownerState:r}=t;return[{[`& .${Nv.scrollButtons}`]:s.scrollButtons},{[`& .${Nv.scrollButtons}`]:r.scrollButtonsHideMobile&&s.scrollButtonsHideMobile},s.root,r.vertical&&s.vertical]}})(Et(({theme:t})=>({overflow:"hidden",minHeight:48,WebkitOverflowScrolling:"touch",display:"flex",variants:[{props:({ownerState:s})=>s.vertical,style:{flexDirection:"column"}},{props:({ownerState:s})=>s.scrollButtonsHideMobile,style:{[`& .${Nv.scrollButtons}`]:{[t.breakpoints.down("sm")]:{display:"none"}}}}]}))),Sce=Pe("div",{name:"MuiTabs",slot:"Scroller",overridesResolver:(t,s)=>{const{ownerState:r}=t;return[s.scroller,r.fixed&&s.fixed,r.hideScrollbar&&s.hideScrollbar,r.scrollableX&&s.scrollableX,r.scrollableY&&s.scrollableY]}})({position:"relative",display:"inline-block",flex:"1 1 auto",whiteSpace:"nowrap",variants:[{props:({ownerState:t})=>t.fixed,style:{overflowX:"hidden",width:"100%"}},{props:({ownerState:t})=>t.hideScrollbar,style:{scrollbarWidth:"none","&::-webkit-scrollbar":{display:"none"}}},{props:({ownerState:t})=>t.scrollableX,style:{overflowX:"auto",overflowY:"hidden"}},{props:({ownerState:t})=>t.scrollableY,style:{overflowY:"auto",overflowX:"hidden"}}]}),_ce=Pe("div",{name:"MuiTabs",slot:"List",overridesResolver:(t,s)=>{const{ownerState:r}=t;return[s.list,s.flexContainer,r.vertical&&s.flexContainerVertical,r.centered&&s.centered]}})({display:"flex",variants:[{props:({ownerState:t})=>t.vertical,style:{flexDirection:"column"}},{props:({ownerState:t})=>t.centered,style:{justifyContent:"center"}}]}),Ece=Pe("span",{name:"MuiTabs",slot:"Indicator"})(Et(({theme:t})=>({position:"absolute",height:2,bottom:0,width:"100%",transition:t.transitions.create(),variants:[{props:{indicatorColor:"primary"},style:{backgroundColor:(t.vars||t).palette.primary.main}},{props:{indicatorColor:"secondary"},style:{backgroundColor:(t.vars||t).palette.secondary.main}},{props:({ownerState:s})=>s.vertical,style:{height:"100%",width:2,right:0}}]}))),Ace=Pe(fce)({overflowX:"auto",overflowY:"hidden",scrollbarWidth:"none","&::-webkit-scrollbar":{display:"none"}}),jE={},Tce=h.forwardRef(function(s,r){const a=kt({props:s,name:"MuiTabs"}),n=cm(),i=z0(),{"aria-label":l,"aria-labelledby":o,action:c,centered:d=!1,children:u,className:m,component:p="div",allowScrollButtonsMobile:x=!1,indicatorColor:g="primary",onChange:f,orientation:b="horizontal",ScrollButtonComponent:j,scrollButtons:v="auto",selectionFollowsFocus:w,slots:y={},slotProps:C={},TabIndicatorProps:S={},TabScrollButtonProps:_={},textColor:E="primary",value:A,variant:R="standard",visibleScrollbar:I=!1,...N}=a,P=R==="scrollable",k=b==="vertical",D=k?"scrollTop":"scrollLeft",$=k?"top":"left",L=k?"bottom":"right",B=k?"clientHeight":"clientWidth",T=k?"height":"width",O={...a,component:p,allowScrollButtonsMobile:x,indicatorColor:g,orientation:b,vertical:k,scrollButtons:v,textColor:E,variant:R,visibleScrollbar:I,fixed:!P,hideScrollbar:P&&!I,scrollableX:P&&!k,scrollableY:P&&k,centered:d&&!P,scrollButtonsHideMobile:!x},q=kce(O),K=Yu({elementType:y.StartScrollButtonIcon,externalSlotProps:C.startScrollButtonIcon,ownerState:O}),le=Yu({elementType:y.EndScrollButtonIcon,externalSlotProps:C.endScrollButtonIcon,ownerState:O}),[X,se]=h.useState(!1),[de,fe]=h.useState(jE),[z,re]=h.useState(!1),[ie,Y]=h.useState(!1),[G,H]=h.useState(!1),[ue,me]=h.useState({overflow:"hidden",scrollbarWidth:0}),ne=new Map,Ae=h.useRef(null),Fe=h.useRef(null),at={slots:y,slotProps:{indicator:S,scrollButton:_,...C}},J=()=>{const $e=Ae.current;let Ve;if($e){const Pt=$e.getBoundingClientRect();Ve={clientWidth:$e.clientWidth,scrollLeft:$e.scrollLeft,scrollTop:$e.scrollTop,scrollWidth:$e.scrollWidth,top:Pt.top,bottom:Pt.bottom,left:Pt.left,right:Pt.right}}let pt;if($e&&A!==!1){const Pt=Fe.current.children;if(Pt.length>0){const hs=Pt[ne.get(A)];pt=hs?hs.getBoundingClientRect():null}}return{tabsMeta:Ve,tabMeta:pt}},Q=Pn(()=>{const{tabsMeta:$e,tabMeta:Ve}=J();let pt=0,Pt;k?(Pt="top",Ve&&$e&&(pt=Ve.top-$e.top+$e.scrollTop)):(Pt=i?"right":"left",Ve&&$e&&(pt=(i?-1:1)*(Ve[Pt]-$e[Pt]+$e.scrollLeft)));const hs={[Pt]:pt,[T]:Ve?Ve[T]:0};if(typeof de[Pt]!="number"||typeof de[T]!="number")fe(hs);else{const Ee=Math.abs(de[Pt]-hs[Pt]),ct=Math.abs(de[T]-hs[T]);(Ee>=1||ct>=1)&&fe(hs)}}),ee=($e,{animation:Ve=!0}={})=>{Ve?xce(D,Ae.current,$e,{duration:n.transitions.duration.standard}):Ae.current[D]=$e},Ne=$e=>{let Ve=Ae.current[D];k?Ve+=$e:Ve+=$e*(i?-1:1),ee(Ve)},ye=()=>{const $e=Ae.current[B];let Ve=0;const pt=Array.from(Fe.current.children);for(let Pt=0;Pt<pt.length;Pt+=1){const hs=pt[Pt];if(Ve+hs[B]>$e){Pt===0&&(Ve=$e);break}Ve+=hs[B]}return Ve},he=()=>{Ne(-1*ye())},Ce=()=>{Ne(ye())},[Se,{onChange:Be,...Dt}]=Nt("scrollbar",{className:oe(q.scrollableX,q.hideScrollbar),elementType:Ace,shouldForwardComponentProp:!0,externalForwardedProps:at,ownerState:O}),Ht=h.useCallback($e=>{Be==null||Be($e),me({overflow:null,scrollbarWidth:$e})},[Be]),[Xe,Yt]=Nt("scrollButtons",{className:oe(q.scrollButtons,_.className),elementType:wce,externalForwardedProps:at,ownerState:O,additionalProps:{orientation:b,slots:{StartScrollButtonIcon:y.startScrollButtonIcon||y.StartScrollButtonIcon,EndScrollButtonIcon:y.endScrollButtonIcon||y.EndScrollButtonIcon},slotProps:{startScrollButtonIcon:K,endScrollButtonIcon:le}}}),Mt=()=>{const $e={};$e.scrollbarSizeListener=P?e.jsx(Se,{...Dt,onChange:Ht}):null;const pt=P&&(v==="auto"&&(z||ie)||v===!0);return $e.scrollButtonStart=pt?e.jsx(Xe,{direction:i?"right":"left",onClick:he,disabled:!z,...Yt}):null,$e.scrollButtonEnd=pt?e.jsx(Xe,{direction:i?"left":"right",onClick:Ce,disabled:!ie,...Yt}):null,$e},Qt=Pn($e=>{const{tabsMeta:Ve,tabMeta:pt}=J();if(!(!pt||!Ve)){if(pt[$]<Ve[$]){const Pt=Ve[D]+(pt[$]-Ve[$]);ee(Pt,{animation:$e})}else if(pt[L]>Ve[L]){const Pt=Ve[D]+(pt[L]-Ve[L]);ee(Pt,{animation:$e})}}}),Wt=Pn(()=>{P&&v!==!1&&H(!G)});h.useEffect(()=>{const $e=By(()=>{Ae.current&&Q()});let Ve;const pt=Ee=>{Ee.forEach(ct=>{ct.removedNodes.forEach(je=>{Ve==null||Ve.unobserve(je)}),ct.addedNodes.forEach(je=>{Ve==null||Ve.observe(je)})}),$e(),Wt()},Pt=mi(Ae.current);Pt.addEventListener("resize",$e);let hs;return typeof ResizeObserver<"u"&&(Ve=new ResizeObserver($e),Array.from(Fe.current.children).forEach(Ee=>{Ve.observe(Ee)})),typeof MutationObserver<"u"&&(hs=new MutationObserver(pt),hs.observe(Fe.current,{childList:!0})),()=>{$e.clear(),Pt.removeEventListener("resize",$e),hs==null||hs.disconnect(),Ve==null||Ve.disconnect()}},[Q,Wt]),h.useEffect(()=>{const $e=Array.from(Fe.current.children),Ve=$e.length;if(typeof IntersectionObserver<"u"&&Ve>0&&P&&v!==!1){const pt=$e[0],Pt=$e[Ve-1],hs={root:Ae.current,threshold:.99},Ee=nt=>{re(!nt[0].isIntersecting)},ct=new IntersectionObserver(Ee,hs);ct.observe(pt);const je=nt=>{Y(!nt[0].isIntersecting)},Ge=new IntersectionObserver(je,hs);return Ge.observe(Pt),()=>{ct.disconnect(),Ge.disconnect()}}},[P,v,G,u==null?void 0:u.length]),h.useEffect(()=>{se(!0)},[]),h.useEffect(()=>{Q()}),h.useEffect(()=>{Qt(jE!==de)},[Qt,de]),h.useImperativeHandle(c,()=>({updateIndicator:Q,updateScrollButtons:Wt}),[Q,Wt]);const[Ks,As]=Nt("indicator",{className:oe(q.indicator,S.className),elementType:Ece,externalForwardedProps:at,ownerState:O,additionalProps:{style:de}}),fs=e.jsx(Ks,{...As});let ma=0;const er=h.Children.map(u,$e=>{if(!h.isValidElement($e))return null;const Ve=$e.props.value===void 0?ma:$e.props.value;ne.set(Ve,ma);const pt=Ve===A;return ma+=1,h.cloneElement($e,{fullWidth:R==="fullWidth",indicator:pt&&!X&&fs,selected:pt,selectionFollowsFocus:w,onChange:f,textColor:E,value:Ve,...ma===1&&A===!1&&!$e.props.tabIndex?{tabIndex:0}:{}})}),ze=$e=>{if($e.altKey||$e.shiftKey||$e.ctrlKey||$e.metaKey)return;const Ve=Fe.current,pt=Xd(za(Ve));if((pt==null?void 0:pt.getAttribute("role"))!=="tab")return;let hs=b==="horizontal"?"ArrowLeft":"ArrowUp",Ee=b==="horizontal"?"ArrowRight":"ArrowDown";switch(b==="horizontal"&&i&&(hs="ArrowRight",Ee="ArrowLeft"),$e.key){case hs:$e.preventDefault(),ax(Ve,pt,vE);break;case Ee:$e.preventDefault(),ax(Ve,pt,bE);break;case"Home":$e.preventDefault(),ax(Ve,null,bE);break;case"End":$e.preventDefault(),ax(Ve,null,vE);break}},Bt=Mt(),[ys,Zr]=Nt("root",{ref:r,className:oe(q.root,m),elementType:Cce,externalForwardedProps:{...at,...N,component:p},ownerState:O}),[Xr,Ms]=Nt("scroller",{ref:Ae,className:q.scroller,elementType:Sce,externalForwardedProps:at,ownerState:O,additionalProps:{style:{overflow:ue.overflow,[k?`margin${i?"Left":"Right"}`:"marginBottom"]:I?void 0:-ue.scrollbarWidth}}}),[ot,ht]=Nt("list",{ref:Fe,className:oe(q.list,q.flexContainer),elementType:_ce,externalForwardedProps:at,ownerState:O,getSlotProps:$e=>({...$e,onKeyDown:Ve=>{var pt;ze(Ve),(pt=$e.onKeyDown)==null||pt.call($e,Ve)}})});return e.jsxs(ys,{...Zr,children:[Bt.scrollButtonStart,Bt.scrollbarSizeListener,e.jsxs(Xr,{...Ms,children:[e.jsx(ot,{"aria-label":l,"aria-labelledby":o,"aria-orientation":b==="vertical"?"vertical":null,role:"tablist",...ht,children:er}),X&&fs]}),Bt.scrollButtonEnd]})});function Pce(t){return yt("MuiTextField",t)}gt("MuiTextField",["root"]);const Rce={standard:ok,filled:lk,outlined:dk},Dce=t=>{const{classes:s}=t;return bt({root:["root"]},Pce,s)},Ice=Pe(yle,{name:"MuiTextField",slot:"Root"})({}),ps=h.forwardRef(function(s,r){const a=kt({props:s,name:"MuiTextField"}),{autoComplete:n,autoFocus:i=!1,children:l,className:o,color:c="primary",defaultValue:d,disabled:u=!1,error:m=!1,FormHelperTextProps:p,fullWidth:x=!1,helperText:g,id:f,InputLabelProps:b,inputProps:j,InputProps:v,inputRef:w,label:y,maxRows:C,minRows:S,multiline:_=!1,name:E,onBlur:A,onChange:R,onFocus:I,placeholder:N,required:P=!1,rows:k,select:D=!1,SelectProps:$,slots:L={},slotProps:B={},type:T,value:O,variant:q="outlined",...K}=a,le={...a,autoFocus:i,color:c,disabled:u,error:m,fullWidth:x,multiline:_,required:P,select:D,variant:q},X=Dce(le),se=om(f),de=g&&se?`${se}-helper-text`:void 0,fe=y&&se?`${se}-label`:void 0,z=Rce[q],re={slots:L,slotProps:{input:v,inputLabel:b,htmlInput:j,formHelperText:p,select:$,...B}},ie={},Y=re.slotProps.inputLabel;q==="outlined"&&(Y&&typeof Y.shrink<"u"&&(ie.notched=Y.shrink),ie.label=y),D&&((!$||!$.native)&&(ie.id=void 0),ie["aria-describedby"]=void 0);const[G,H]=Nt("root",{elementType:Ice,shouldForwardComponentProp:!0,externalForwardedProps:{...re,...K},ownerState:le,className:oe(X.root,o),ref:r,additionalProps:{disabled:u,error:m,fullWidth:x,required:P,color:c,variant:q}}),[ue,me]=Nt("input",{elementType:z,externalForwardedProps:re,additionalProps:ie,ownerState:le}),[ne,Ae]=Nt("inputLabel",{elementType:Ble,externalForwardedProps:re,ownerState:le}),[Fe,at]=Nt("htmlInput",{elementType:"input",externalForwardedProps:re,ownerState:le}),[J,Q]=Nt("formHelperText",{elementType:Sle,externalForwardedProps:re,ownerState:le}),[ee,Ne]=Nt("select",{elementType:KM,externalForwardedProps:re,ownerState:le}),ye=e.jsx(ue,{"aria-describedby":de,autoComplete:n,autoFocus:i,defaultValue:d,fullWidth:x,multiline:_,name:E,rows:k,maxRows:C,minRows:S,type:T,value:O,id:se,inputRef:w,onBlur:A,onChange:R,onFocus:I,placeholder:N,inputProps:at,slots:{input:L.htmlInput?Fe:void 0},...me});return e.jsxs(G,{...H,children:[y!=null&&y!==""&&e.jsx(ne,{htmlFor:se,id:fe,...Ae,children:y}),D?e.jsx(ee,{"aria-describedby":de,id:se,labelId:fe,value:O,input:ye,...Ne,children:l}):ye,g&&e.jsx(J,{id:de,...Q,children:g})]})}),YM=Wn(e.jsx("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6z"})),QM=Wn(e.jsx("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zM19 4h-3.5l-1-1h-5l-1 1H5v2h14z"})),JM=Wn(e.jsx("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.996.996 0 0 0-1.41 0l-1.83 1.83 3.75 3.75z"})),Bm="/api";function Mce(){const[t,s]=h.useState([]),[r,a]=h.useState(!0),[n,i]=h.useState(""),[l,o]=h.useState(""),[c,d]=h.useState(!1),[u,m]=h.useState(!1),[p,x]=h.useState(null),[g,f]=h.useState({code:"",name:"",description:"",category:"feature",version:"1.0.0",icon:"",config:{}});h.useEffect(()=>{b()},[]);const b=async()=>{try{a(!0);const E=await fetch(`${Bm}/modules`);if(!E.ok){const R=await E.json();i(R.error||`API Error: ${E.status} ${E.statusText}`),a(!1);return}const A=await E.json();s(A.modules||[])}catch(E){console.error("Failed to load modules:",E),i(E.message||"Failed to load modules. Check console for details.")}finally{a(!1)}},j=async E=>{try{const A=await fetch(`${Bm}/modules/${E.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({is_enabled:!E.is_enabled})}),R=await A.json();A.ok?(o(`${E.name} ${E.is_enabled?"disabled":"enabled"} successfully`),b()):i(R.error||"Failed to toggle module")}catch(A){i(A.message||"Failed to toggle module")}},v=async()=>{try{const E=await fetch(`${Bm}/modules`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(g)}),A=await E.json();E.ok?(o("Module created successfully"),d(!1),S(),b()):i(A.error||"Failed to create module")}catch(E){i(E.message||"Failed to create module")}},w=async()=>{if(p)try{const E=await fetch(`${Bm}/modules/${p.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(g)}),A=await E.json();E.ok?(o("Module updated successfully"),m(!1),x(null),S(),b()):i(A.error||"Failed to update module")}catch(E){i(E.message||"Failed to update module")}},y=async E=>{if(confirm(`Are you sure you want to delete "${E.name}"?`))try{const A=await fetch(`${Bm}/modules/${E.id}`,{method:"DELETE"}),R=await A.json();A.ok?(o("Module deleted successfully"),b()):i(R.error||"Failed to delete module")}catch(A){i(A.message||"Failed to delete module")}},C=E=>{x(E),f({code:E.code,name:E.name,description:E.description||"",category:E.category||"feature",version:E.version||"1.0.0",icon:E.icon||"",config:E.config||{}}),m(!0)},S=()=>{f({code:"",name:"",description:"",category:"feature",version:"1.0.0",icon:"",config:{}})},_=E=>{switch(E){case"feature":return"primary";case"security":return"error";case"payment":return"success";default:return"default"}};return e.jsx(Kt,{children:e.jsxs(Tt,{p:3,children:[e.jsxs(Tt,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3,children:[e.jsx(Rr,{variant:"h4",children:"Platform Modules"}),e.jsx(ol,{variant:"contained",startIcon:e.jsx(YM,{}),onClick:()=>d(!0),children:"Add Custom Module"})]}),n&&e.jsx(lf,{severity:"error",onClose:()=>i(""),sx:{mb:2},children:n}),r&&!n?e.jsx(Tt,{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"400px",children:e.jsx(Uy,{})}):null,l&&e.jsx(lf,{severity:"success",onClose:()=>o(""),sx:{mb:2},children:l}),!r&&!n&&t.length>0&&e.jsx(Tt,{display:"flex",flexWrap:"wrap",gap:3,children:t.map(E=>e.jsx(Tt,{flex:"1 1 300px",minWidth:"300px",maxWidth:"400px",children:e.jsx(fie,{elevation:3,children:e.jsxs(jie,{children:[e.jsxs(Tt,{display:"flex",justifyContent:"space-between",alignItems:"flex-start",mb:2,children:[e.jsxs(Tt,{display:"flex",alignItems:"center",gap:1,children:[e.jsx(Rr,{variant:"h4",children:E.icon}),e.jsxs(Tt,{children:[e.jsx(Rr,{variant:"h6",children:E.name}),e.jsxs(Rr,{variant:"caption",color:"text.secondary",children:["v",E.version]})]})]}),e.jsx(uc,{checked:E.is_enabled,onChange:()=>j(E),color:"primary"})]}),e.jsx(Rr,{variant:"body2",color:"text.secondary",mb:2,children:E.description}),e.jsxs(Tt,{display:"flex",gap:1,mb:2,flexWrap:"wrap",children:[e.jsx(jn,{label:E.category,size:"small",color:_(E.category)}),E.is_system&&e.jsx(jn,{label:"System",size:"small",color:"default"}),E.is_enabled&&e.jsx(jn,{label:"Active",size:"small",color:"success"})]}),E.dependencies&&E.dependencies.length>0&&e.jsx(Tt,{mb:2,children:e.jsxs(Rr,{variant:"caption",color:"text.secondary",children:["Dependencies: ",E.dependencies.join(", ")]})}),e.jsxs(Tt,{display:"flex",justifyContent:"flex-end",gap:1,children:[e.jsx(mE,{title:"Edit Module",children:e.jsx(d0,{size:"small",onClick:()=>C(E),children:e.jsx(JM,{fontSize:"small"})})}),!E.is_system&&e.jsx(mE,{title:"Delete Module",children:e.jsx(d0,{size:"small",color:"error",onClick:()=>y(E),children:e.jsx(QM,{fontSize:"small"})})})]})]})})},E.id))}),e.jsxs(dN,{open:c,onClose:()=>d(!1),maxWidth:"sm",fullWidth:!0,children:[e.jsx(hN,{children:"Create Custom Module"}),e.jsx(mN,{children:e.jsxs(Tt,{display:"flex",flexDirection:"column",gap:2,mt:1,children:[e.jsx(ps,{label:"Module Code",placeholder:"e.g., custom_feature",value:g.code,onChange:E=>f({...g,code:E.target.value}),fullWidth:!0,required:!0}),e.jsx(ps,{label:"Module Name",placeholder:"e.g., Custom Feature",value:g.name,onChange:E=>f({...g,name:E.target.value}),fullWidth:!0,required:!0}),e.jsx(ps,{label:"Description",placeholder:"Describe what this module does",value:g.description,onChange:E=>f({...g,description:E.target.value}),multiline:!0,rows:3,fullWidth:!0}),e.jsxs(ps,{label:"Category",select:!0,value:g.category,onChange:E=>f({...g,category:E.target.value}),SelectProps:{native:!0},fullWidth:!0,children:[e.jsx("option",{value:"feature",children:"Feature"}),e.jsx("option",{value:"security",children:"Security"}),e.jsx("option",{value:"payment",children:"Payment"}),e.jsx("option",{value:"integration",children:"Integration"})]}),e.jsx(ps,{label:"Icon (Emoji)",placeholder:"e.g., ",value:g.icon,onChange:E=>f({...g,icon:E.target.value}),fullWidth:!0}),e.jsx(ps,{label:"Version",value:g.version,onChange:E=>f({...g,version:E.target.value}),fullWidth:!0})]})}),e.jsxs(uN,{children:[e.jsx(ol,{onClick:()=>d(!1),children:"Cancel"}),e.jsx(ol,{onClick:v,variant:"contained",children:"Create Module"})]})]}),e.jsxs(dN,{open:u,onClose:()=>m(!1),maxWidth:"sm",fullWidth:!0,children:[e.jsx(hN,{children:"Edit Module"}),e.jsx(mN,{children:e.jsxs(Tt,{display:"flex",flexDirection:"column",gap:2,mt:1,children:[e.jsx(ps,{label:"Module Name",value:g.name,onChange:E=>f({...g,name:E.target.value}),fullWidth:!0}),e.jsx(ps,{label:"Description",value:g.description,onChange:E=>f({...g,description:E.target.value}),multiline:!0,rows:3,fullWidth:!0}),e.jsx(ps,{label:"Icon (Emoji)",value:g.icon,onChange:E=>f({...g,icon:E.target.value}),fullWidth:!0})]})}),e.jsxs(uN,{children:[e.jsx(ol,{onClick:()=>m(!1),children:"Cancel"}),e.jsx(ol,{onClick:w,variant:"contained",children:"Update Module"})]})]})]})})}const nx="/api",wE={code:"",name:"",description:"",tier:1,purchase_price:0,annual_fee:0,currency:"SLE",daily_transaction_limit:5e4,monthly_transaction_limit:5e5,max_balance:1e6,transaction_fee_percent:1.5,transaction_fee_flat:0,bin_prefix:"520010",card_length:16,is_online_enabled:!0,is_atm_enabled:!1,is_contactless_enabled:!1,is_international_enabled:!1,cashback_percent:0,features:[],card_design_url:"",card_color:"#1A1A1A",card_text_color:"#FFFFFF",is_active:!0,is_visible:!0,stock_limit:void 0,sort_order:0};function Lce(){const[t,s]=h.useState([]),[r,a]=h.useState(!0),[n,i]=h.useState(""),[l,o]=h.useState(""),[c,d]=h.useState(!1),[u,m]=h.useState(!1),[p,x]=h.useState(null),[g,f]=h.useState(0),[b,j]=h.useState(wE),[v,w]=h.useState("");h.useEffect(()=>{y()},[]);const y=async()=>{try{a(!0);const k=await fetch(`${nx}/card-products?admin=true`),D=await k.json();k.ok?s(D.products||[]):i(D.error||"Failed to load card products")}catch(k){i(k.message||"Failed to load card products")}finally{a(!1)}},C=async()=>{try{const k=await fetch(`${nx}/card-products`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(b)}),D=await k.json();k.ok?(o("Card product created successfully"),d(!1),R(),y()):i(D.error||"Failed to create card product")}catch(k){i(k.message||"Failed to create card product")}},S=async()=>{if(p)try{const k=await fetch(`${nx}/card-products/${p.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(b)}),D=await k.json();k.ok?(o("Card product updated successfully"),d(!1),x(null),m(!1),R(),y()):i(D.error||"Failed to update card product")}catch(k){i(k.message||"Failed to update card product")}},_=async k=>{if(confirm(`Are you sure you want to delete "${k.name}"?`))try{const D=await fetch(`${nx}/card-products/${k.id}`,{method:"DELETE"}),$=await D.json();D.ok?(o("Card product deleted successfully"),y()):i($.error||"Failed to delete card product")}catch(D){i(D.message||"Failed to delete card product")}},E=()=>{R(),m(!1),d(!0)},A=k=>{x(k),j({code:k.code,name:k.name,description:k.description||"",tier:k.tier,purchase_price:k.purchase_price,annual_fee:k.annual_fee,currency:k.currency,daily_transaction_limit:k.daily_transaction_limit,monthly_transaction_limit:k.monthly_transaction_limit,max_balance:k.max_balance,transaction_fee_percent:k.transaction_fee_percent,transaction_fee_flat:k.transaction_fee_flat,bin_prefix:k.bin_prefix,card_length:k.card_length,is_online_enabled:k.is_online_enabled,is_atm_enabled:k.is_atm_enabled,is_contactless_enabled:k.is_contactless_enabled,is_international_enabled:k.is_international_enabled,cashback_percent:k.cashback_percent,features:k.features||[],card_design_url:k.card_design_url||"",card_color:k.card_color,card_text_color:k.card_text_color,is_active:k.is_active,is_visible:k.is_visible,stock_limit:k.stock_limit,sort_order:k.sort_order}),m(!0),d(!0)},R=()=>{j(wE),w("")},I=()=>{v.trim()&&(j({...b,features:[...b.features,v.trim()]}),w(""))},N=k=>{j({...b,features:b.features.filter((D,$)=>$!==k)})},P=k=>new Intl.NumberFormat("en-SL",{style:"currency",currency:"SLE",minimumFractionDigits:0}).format(k);return r?e.jsx(Kt,{children:e.jsx(Tt,{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"400px",children:e.jsx(Uy,{})})}):e.jsx(Kt,{children:e.jsxs(Tt,{p:3,children:[e.jsxs(Tt,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3,children:[e.jsx(Rr,{variant:"h4",children:"Card Products"}),e.jsx(ol,{variant:"contained",startIcon:e.jsx(YM,{}),onClick:E,children:"Create Card Product"})]}),n&&e.jsx(lf,{severity:"error",onClose:()=>i(""),sx:{mb:2},children:n}),l&&e.jsx(lf,{severity:"success",onClose:()=>o(""),sx:{mb:2},children:l}),e.jsx(rce,{component:dm,children:e.jsxs(Woe,{children:[e.jsx(oce,{children:e.jsxs(yE,{children:[e.jsx(sa,{children:"Tier"}),e.jsx(sa,{children:"Name"}),e.jsx(sa,{children:"Price"}),e.jsx(sa,{children:"Daily Limit"}),e.jsx(sa,{children:"Features"}),e.jsx(sa,{children:"Cards Issued"}),e.jsx(sa,{children:"Status"}),e.jsx(sa,{align:"right",children:"Actions"})]})}),e.jsx(Yoe,{children:t.map(k=>e.jsxs(yE,{children:[e.jsx(sa,{children:e.jsx(jn,{label:`Tier ${k.tier}`,size:"small",color:"primary"})}),e.jsxs(sa,{children:[e.jsx(Rr,{variant:"body2",fontWeight:"bold",children:k.name}),e.jsx(Rr,{variant:"caption",color:"text.secondary",children:k.code})]}),e.jsx(sa,{children:P(k.purchase_price)}),e.jsx(sa,{children:P(k.daily_transaction_limit)}),e.jsx(sa,{children:e.jsxs(Tt,{display:"flex",gap:.5,flexWrap:"wrap",children:[k.is_online_enabled&&e.jsx(jn,{label:"Online",size:"small"}),k.is_atm_enabled&&e.jsx(jn,{label:"ATM",size:"small"}),k.is_international_enabled&&e.jsx(jn,{label:"International",size:"small"})]})}),e.jsxs(sa,{children:[e.jsx(Rr,{variant:"body2",children:k.cards_issued}),k.stock_limit&&e.jsxs(Rr,{variant:"caption",color:"text.secondary",children:["/ ",k.stock_limit]})]}),e.jsx(sa,{children:e.jsxs(Tt,{display:"flex",gap:.5,flexDirection:"column",children:[k.is_active?e.jsx(jn,{label:"Active",size:"small",color:"success"}):e.jsx(jn,{label:"Inactive",size:"small",color:"default"}),k.is_visible?e.jsx(jn,{label:"Visible",size:"small",color:"info"}):e.jsx(jn,{label:"Hidden",size:"small",color:"default"})]})}),e.jsxs(sa,{align:"right",children:[e.jsx(d0,{size:"small",onClick:()=>A(k),children:e.jsx(JM,{fontSize:"small"})}),e.jsx(d0,{size:"small",color:"error",onClick:()=>_(k),disabled:k.cards_issued>0,children:e.jsx(QM,{fontSize:"small"})})]})]},k.id))})]})}),e.jsxs(dN,{open:c,onClose:()=>d(!1),maxWidth:"md",fullWidth:!0,children:[e.jsx(hN,{children:u?"Edit Card Product":"Create Card Product"}),e.jsxs(mN,{children:[e.jsxs(Tce,{value:g,onChange:(k,D)=>f(D),sx:{mb:2},children:[e.jsx(rx,{label:"Basic Info"}),e.jsx(rx,{label:"Pricing & Limits"}),e.jsx(rx,{label:"Features"}),e.jsx(rx,{label:"Design"})]}),g===0&&e.jsxs(Tt,{display:"flex",flexDirection:"column",gap:2,children:[e.jsx(ps,{label:"Product Code",placeholder:"e.g., gold",value:b.code,onChange:k=>j({...b,code:k.target.value}),fullWidth:!0,required:!0,disabled:u}),e.jsx(ps,{label:"Product Name",placeholder:"e.g., Gold Card",value:b.name,onChange:k=>j({...b,name:k.target.value}),fullWidth:!0,required:!0}),e.jsx(ps,{label:"Description",placeholder:"Describe the card benefits",value:b.description,onChange:k=>j({...b,description:k.target.value}),multiline:!0,rows:3,fullWidth:!0}),e.jsxs(Tt,{display:"flex",gap:2,children:[e.jsx(Tt,{flex:1,children:e.jsx(ps,{label:"Tier",type:"number",value:b.tier,onChange:k=>j({...b,tier:parseInt(k.target.value)}),fullWidth:!0,required:!0})}),e.jsx(Tt,{flex:1,children:e.jsx(ps,{label:"Sort Order",type:"number",value:b.sort_order,onChange:k=>j({...b,sort_order:parseInt(k.target.value)}),fullWidth:!0})})]})]}),g===1&&e.jsxs(Tt,{display:"flex",flexDirection:"column",gap:2,children:[e.jsxs(Tt,{display:"flex",gap:2,children:[e.jsx(Tt,{flex:1,children:e.jsx(ps,{label:"Purchase Price",type:"number",value:b.purchase_price,onChange:k=>j({...b,purchase_price:parseFloat(k.target.value)}),fullWidth:!0,required:!0})}),e.jsx(Tt,{flex:1,children:e.jsx(ps,{label:"Annual Fee",type:"number",value:b.annual_fee,onChange:k=>j({...b,annual_fee:parseFloat(k.target.value)}),fullWidth:!0})})]}),e.jsx(gc,{}),e.jsx(ps,{label:"Daily Transaction Limit",type:"number",value:b.daily_transaction_limit,onChange:k=>j({...b,daily_transaction_limit:parseFloat(k.target.value)}),fullWidth:!0}),e.jsx(ps,{label:"Monthly Transaction Limit",type:"number",value:b.monthly_transaction_limit,onChange:k=>j({...b,monthly_transaction_limit:parseFloat(k.target.value)}),fullWidth:!0}),e.jsx(ps,{label:"Max Balance",type:"number",value:b.max_balance,onChange:k=>j({...b,max_balance:parseFloat(k.target.value)}),fullWidth:!0}),e.jsx(gc,{}),e.jsxs(Tt,{display:"flex",gap:2,children:[e.jsx(Tt,{flex:1,children:e.jsx(ps,{label:"Transaction Fee (%)",type:"number",value:b.transaction_fee_percent,onChange:k=>j({...b,transaction_fee_percent:parseFloat(k.target.value)}),fullWidth:!0})}),e.jsx(Tt,{flex:1,children:e.jsx(ps,{label:"Transaction Fee (Flat)",type:"number",value:b.transaction_fee_flat,onChange:k=>j({...b,transaction_fee_flat:parseFloat(k.target.value)}),fullWidth:!0})})]}),e.jsx(ps,{label:"Cashback Percent",type:"number",value:b.cashback_percent,onChange:k=>j({...b,cashback_percent:parseFloat(k.target.value)}),fullWidth:!0}),e.jsx(gc,{}),e.jsxs(Tt,{display:"flex",gap:2,children:[e.jsx(Tt,{flex:1,children:e.jsx(ps,{label:"BIN Prefix",placeholder:"e.g., 520013",value:b.bin_prefix,onChange:k=>j({...b,bin_prefix:k.target.value}),fullWidth:!0,required:!0})}),e.jsx(Tt,{flex:1,children:e.jsx(ps,{label:"Stock Limit",type:"number",placeholder:"Leave empty for unlimited",value:b.stock_limit||"",onChange:k=>j({...b,stock_limit:k.target.value?parseInt(k.target.value):void 0}),fullWidth:!0})})]})]}),g===2&&e.jsxs(Tt,{display:"flex",flexDirection:"column",gap:2,children:[e.jsx(Ad,{control:e.jsx(uc,{checked:b.is_online_enabled,onChange:k=>j({...b,is_online_enabled:k.target.checked})}),label:"Online Payments Enabled"}),e.jsx(Ad,{control:e.jsx(uc,{checked:b.is_atm_enabled,onChange:k=>j({...b,is_atm_enabled:k.target.checked})}),label:"ATM Withdrawals Enabled"}),e.jsx(Ad,{control:e.jsx(uc,{checked:b.is_contactless_enabled,onChange:k=>j({...b,is_contactless_enabled:k.target.checked})}),label:"Contactless Payments"}),e.jsx(Ad,{control:e.jsx(uc,{checked:b.is_international_enabled,onChange:k=>j({...b,is_international_enabled:k.target.checked})}),label:"International Payments"}),e.jsx(gc,{}),e.jsx(Rr,{variant:"subtitle2",children:"Feature List (for display)"}),e.jsxs(Tt,{display:"flex",gap:1,children:[e.jsx(ps,{placeholder:"e.g., Free airport lounge access",value:v,onChange:k=>w(k.target.value),onKeyPress:k=>k.key==="Enter"&&I(),fullWidth:!0,size:"small"}),e.jsx(ol,{onClick:I,variant:"outlined",children:"Add"})]}),e.jsx(Tt,{display:"flex",gap:1,flexWrap:"wrap",children:b.features.map((k,D)=>e.jsx(jn,{label:k,onDelete:()=>N(D)},D))})]}),g===3&&e.jsxs(Tt,{display:"flex",flexDirection:"column",gap:2,children:[e.jsx(ps,{label:"Card Design URL",placeholder:"https://example.com/card-design.png",value:b.card_design_url,onChange:k=>j({...b,card_design_url:k.target.value}),fullWidth:!0}),e.jsxs(Tt,{display:"flex",gap:2,children:[e.jsx(Tt,{flex:1,children:e.jsx(ps,{label:"Card Background Color",type:"color",value:b.card_color,onChange:k=>j({...b,card_color:k.target.value}),fullWidth:!0})}),e.jsx(Tt,{flex:1,children:e.jsx(ps,{label:"Card Text Color",type:"color",value:b.card_text_color,onChange:k=>j({...b,card_text_color:k.target.value}),fullWidth:!0})})]}),e.jsx(gc,{}),e.jsx(Ad,{control:e.jsx(uc,{checked:b.is_active,onChange:k=>j({...b,is_active:k.target.checked})}),label:"Active (can be purchased)"}),e.jsx(Ad,{control:e.jsx(uc,{checked:b.is_visible,onChange:k=>j({...b,is_visible:k.target.checked})}),label:"Visible (show in marketplace)"}),e.jsxs(Tt,{sx:{width:"100%",height:200,borderRadius:2,background:b.card_color,color:b.card_text_color,display:"flex",flexDirection:"column",justifyContent:"space-between",p:3},children:[e.jsx(Rr,{variant:"h6",children:b.name}),e.jsxs(Tt,{children:[e.jsx(Rr,{variant:"body2",children:"**** **** **** 1234"}),e.jsx(Rr,{variant:"caption",children:"12/30"})]})]})]})]}),e.jsxs(uN,{children:[e.jsx(ol,{onClick:()=>d(!1),children:"Cancel"}),e.jsx(ol,{onClick:u?S:C,variant:"contained",children:u?"Update":"Create"})]})]})]})})}function Fce(){const[t,s]=h.useState("sdks"),[r,a]=h.useState([]),[n,i]=h.useState([]),[l,o]=h.useState(!1),[c,d]=h.useState(!1),[u,m]=h.useState(null),[p,x]=h.useState(!1),g=j=>{const v={javascript:"npm install @softtouch/sdk",python:"pip install cardpay-sdk",php:"composer require softtouch/sdk",go:"go get github.com/softtouch/sdk-go"};navigator.clipboard.writeText(v[j]||""),x(!0),setTimeout(()=>x(!1),2e3)},f=j=>({javascript:"",python:"",php:"",go:"",java:""})[j]||"",b=j=>{a(r.map(v=>v.id===j?{...v,isActive:!v.isActive}:v))};return e.jsx(Kt,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Developer Management"}),e.jsx("p",{className:"text-gray-500 mt-1",children:"Manage SDKs, documentation, and developer resources for merchants and agents"})]}),e.jsx("div",{className:"flex gap-3",children:e.jsxs("button",{onClick:()=>o(!0),className:"flex items-center gap-2 px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-colors",children:[e.jsx(Du,{className:"w-4 h-4"}),"Upload SDK"]})})]}),e.jsx("div",{className:"border-b border-gray-200",children:e.jsx("nav",{className:"flex gap-8",children:[{id:"sdks",label:"SDK Packages",icon:$b},{id:"docs",label:"Documentation",icon:LT},{id:"settings",label:"Settings",icon:or}].map(j=>e.jsxs("button",{onClick:()=>s(j.id),className:`flex items-center gap-2 px-1 py-4 border-b-2 transition-colors ${t===j.id?"border-primary-600 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:[e.jsx(j.icon,{className:"w-4 h-4"}),j.label]},j.id))})}),t==="sdks"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx("div",{className:"bg-white rounded-xl p-6 border border-gray-200",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-3 bg-blue-100 rounded-lg",children:e.jsx($b,{className:"w-6 h-6 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold",children:r.length}),e.jsx("p",{className:"text-sm text-gray-500",children:"SDK Packages"})]})]})}),e.jsx("div",{className:"bg-white rounded-xl p-6 border border-gray-200",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-3 bg-green-100 rounded-lg",children:e.jsx(ws,{className:"w-6 h-6 text-green-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold",children:r.reduce((j,v)=>j+v.downloads,0).toLocaleString()}),e.jsx("p",{className:"text-sm text-gray-500",children:"Total Downloads"})]})]})}),e.jsx("div",{className:"bg-white rounded-xl p-6 border border-gray-200",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-3 bg-purple-100 rounded-lg",children:e.jsx(Ir,{className:"w-6 h-6 text-purple-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold",children:r.filter(j=>j.isActive).length}),e.jsx("p",{className:"text-sm text-gray-500",children:"Active SDKs"})]})]})}),e.jsx("div",{className:"bg-white rounded-xl p-6 border border-gray-200",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-3 bg-orange-100 rounded-lg",children:e.jsx(li,{className:"w-6 h-6 text-orange-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold",children:"4"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Languages"})]})]})})]}),e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 overflow-hidden",children:[e.jsxs("div",{className:"p-4 border-b border-gray-200",children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:"Available SDK Packages"}),e.jsx("p",{className:"text-sm text-gray-500",children:"These SDKs are available for download in merchant and agent developer portals"})]}),e.jsx("div",{className:"divide-y divide-gray-200",children:r.map(j=>e.jsx("div",{className:"p-4 hover:bg-gray-50",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"text-3xl",children:f(j.language)}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h4",{className:"font-medium text-gray-900",children:j.name}),e.jsxs("span",{className:"px-2 py-0.5 bg-gray-100 text-gray-600 text-xs rounded-full",children:["v",j.version]}),j.isActive?e.jsx("span",{className:"px-2 py-0.5 bg-green-100 text-green-700 text-xs rounded-full",children:"Active"}):e.jsx("span",{className:"px-2 py-0.5 bg-gray-100 text-gray-500 text-xs rounded-full",children:"Inactive"})]}),e.jsxs("div",{className:"flex items-center gap-4 mt-1 text-sm text-gray-500",children:[e.jsx("span",{children:j.size}),e.jsx("span",{children:""}),e.jsxs("span",{children:[j.downloads.toLocaleString()," downloads"]}),e.jsx("span",{children:""}),e.jsxs("span",{children:["Updated ",j.updatedAt]})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{onClick:()=>g(j.language),className:"flex items-center gap-1 px-3 py-1.5 text-sm text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",title:"Copy install command",children:[p?e.jsx(Rs,{className:"w-4 h-4 text-green-500"}):e.jsx(vs,{className:"w-4 h-4"}),"Install"]}),e.jsx("button",{onClick:()=>b(j.id),className:`px-3 py-1.5 text-sm rounded-lg transition-colors ${j.isActive?"text-orange-600 hover:bg-orange-50":"text-green-600 hover:bg-green-50"}`,children:j.isActive?"Deactivate":"Activate"}),e.jsx("button",{className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg",children:e.jsx(Qc,{className:"w-4 h-4"})}),e.jsx("button",{className:"p-2 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded-lg",children:e.jsx(Or,{className:"w-4 h-4"})})]})]})},j.id))})]}),e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-4",children:"SDK Resources"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("a",{href:"https://github.com/PeeapDev/Card",target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-3 p-4 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:[e.jsx(bV,{className:"w-6 h-6"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:"GitHub Repository"}),e.jsx("p",{className:"text-sm text-gray-500",children:"View source code"})]}),e.jsx(Fr,{className:"w-4 h-4 text-gray-400 ml-auto"})]}),e.jsxs("a",{href:"https://www.npmjs.com/package/@softtouch/sdk",target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-3 p-4 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:[e.jsx($b,{className:"w-6 h-6 text-red-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:"NPM Package"}),e.jsx("p",{className:"text-sm text-gray-500",children:"@softtouch/sdk"})]}),e.jsx(Fr,{className:"w-4 h-4 text-gray-400 ml-auto"})]}),e.jsxs("button",{className:"flex items-center gap-3 p-4 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors text-left",children:[e.jsx(vt,{className:"w-6 h-6 text-blue-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:"Sync from NPM"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Update SDK versions"})]}),e.jsx(Vs,{className:"w-4 h-4 text-gray-400 ml-auto"})]})]})]})]}),t==="docs"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex justify-end",children:e.jsxs("button",{onClick:()=>{m(null),d(!0)},className:"flex items-center gap-2 px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-colors",children:[e.jsx(It,{className:"w-4 h-4"}),"Add Section"]})}),e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 overflow-hidden",children:[e.jsxs("div",{className:"p-4 border-b border-gray-200",children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:"Documentation Sections"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Manage documentation content shown in merchant and agent developer portals"})]}),e.jsx("div",{className:"divide-y divide-gray-200",children:n.map((j,v)=>e.jsx("div",{className:"p-4 hover:bg-gray-50",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"flex items-center justify-center w-8 h-8 bg-gray-100 rounded-lg text-sm font-medium text-gray-600",children:v+1}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h4",{className:"font-medium text-gray-900",children:j.title}),j.status==="published"?e.jsx("span",{className:"px-2 py-0.5 bg-green-100 text-green-700 text-xs rounded-full",children:"Published"}):e.jsx("span",{className:"px-2 py-0.5 bg-yellow-100 text-yellow-700 text-xs rounded-full",children:"Draft"})]}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:j.description}),e.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:["Last updated: ",j.lastUpdated]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg",children:e.jsx(es,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>{m(j),d(!0)},className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg",children:e.jsx(Qc,{className:"w-4 h-4"})}),e.jsx("button",{className:"p-2 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded-lg",children:e.jsx(Or,{className:"w-4 h-4"})})]})]})},j.id))})]}),e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-4",children:"Code Examples Configuration"}),e.jsx("p",{className:"text-sm text-gray-500 mb-4",children:"Configure code examples shown in the SDK documentation for each language"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:["JavaScript","Python","PHP","Go"].map(j=>e.jsxs("div",{className:"p-4 border border-gray-200 rounded-lg hover:border-primary-300 cursor-pointer transition-colors",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"font-medium",children:j}),e.jsx("span",{className:"text-green-500 text-sm",children:" Configured"})]}),e.jsx("p",{className:"text-sm text-gray-500",children:"12 examples"})]},j))})]})]}),t==="settings"&&e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-4",children:"Developer Portal Settings"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Test Mode Rate Limit (requests/minute)"}),e.jsx("input",{type:"number",defaultValue:100,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Live Mode Rate Limit (requests/minute)"}),e.jsx("input",{type:"number",defaultValue:1e3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Webhook Retry Attempts"}),e.jsxs("select",{className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",children:[e.jsx("option",{value:"3",children:"3 attempts"}),e.jsx("option",{value:"5",children:"5 attempts"}),e.jsx("option",{value:"10",children:"10 attempts"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Default API Version"}),e.jsxs("select",{className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",children:[e.jsx("option",{value:"2024-01",children:"2024-01 (Latest)"}),e.jsx("option",{value:"2023-10",children:"2023-10"}),e.jsx("option",{value:"2023-07",children:"2023-07"})]})]}),e.jsxs("div",{className:"pt-4 border-t border-gray-200",children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-4",children:"Sandbox Environment"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("label",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"checkbox",defaultChecked:!0,className:"w-4 h-4 text-primary-600 border-gray-300 rounded focus:ring-primary-500"}),e.jsx("span",{className:"text-sm text-gray-700",children:"Enable sandbox environment for all developers"})]}),e.jsxs("label",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"checkbox",defaultChecked:!0,className:"w-4 h-4 text-primary-600 border-gray-300 rounded focus:ring-primary-500"}),e.jsx("span",{className:"text-sm text-gray-700",children:"Auto-generate test API keys on registration"})]}),e.jsxs("label",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"checkbox",className:"w-4 h-4 text-primary-600 border-gray-300 rounded focus:ring-primary-500"}),e.jsx("span",{className:"text-sm text-gray-700",children:"Require approval for live API key generation"})]})]})]}),e.jsx("div",{className:"pt-4 flex justify-end",children:e.jsxs("button",{className:"flex items-center gap-2 px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-colors",children:[e.jsx(oa,{className:"w-4 h-4"}),"Save Settings"]})})]})]})}),l&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:e.jsxs("div",{className:"bg-white rounded-xl w-full max-w-lg mx-4 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Upload SDK Package"}),e.jsx("button",{onClick:()=>o(!1),className:"p-2 hover:bg-gray-100 rounded-lg",children:""})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"SDK Name"}),e.jsx("input",{type:"text",placeholder:"e.g., JavaScript SDK",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Language"}),e.jsxs("select",{className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500",children:[e.jsx("option",{value:"javascript",children:"JavaScript/TypeScript"}),e.jsx("option",{value:"python",children:"Python"}),e.jsx("option",{value:"php",children:"PHP"}),e.jsx("option",{value:"go",children:"Go"}),e.jsx("option",{value:"java",children:"Java"}),e.jsx("option",{value:"ruby",children:"Ruby"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Version"}),e.jsx("input",{type:"text",placeholder:"e.g., 1.0.0",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Package File"}),e.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-8 text-center hover:border-primary-400 transition-colors cursor-pointer",children:[e.jsx(Du,{className:"w-10 h-10 text-gray-400 mx-auto mb-2"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Drag and drop or click to upload"}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:".tgz, .tar.gz, .zip (max 50MB)"})]})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx("button",{onClick:()=>o(!1),className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{className:"flex-1 px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700",children:"Upload SDK"})]})]})]})}),c&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:e.jsxs("div",{className:"bg-white rounded-xl w-full max-w-2xl mx-4 p-6 max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:u?"Edit Documentation Section":"Add Documentation Section"}),e.jsx("button",{onClick:()=>d(!1),className:"p-2 hover:bg-gray-100 rounded-lg",children:""})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Section Title"}),e.jsx("input",{type:"text",defaultValue:(u==null?void 0:u.title)||"",placeholder:"e.g., Getting Started",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),e.jsx("input",{type:"text",defaultValue:(u==null?void 0:u.description)||"",placeholder:"Brief description of this section",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Content (Markdown)"}),e.jsx("textarea",{rows:12,placeholder:"Write your documentation content here using Markdown...",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 font-mono text-sm",defaultValue:`# ${(u==null?void 0:u.title)||"Section Title"}

## Overview
Describe what this section covers...

## Getting Started
\`\`\`javascript
import { SoftTouchSDK } from '@softtouch/sdk';

const sdk = new SoftTouchSDK({
  apiKey: 'your_api_key'
});
\`\`\`

## Next Steps
- Step 1
- Step 2
- Step 3
`})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),e.jsxs("select",{defaultValue:(u==null?void 0:u.status)||"draft",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500",children:[e.jsx("option",{value:"draft",children:"Draft"}),e.jsx("option",{value:"published",children:"Published"})]})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx("button",{onClick:()=>d(!1),className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{className:"flex-1 px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700",children:u?"Save Changes":"Create Section"})]})]})]})})]})})}function Oce(){const t=At(),[s,r]=h.useState([]),[a,n]=h.useState(!0),[i,l]=h.useState(""),[o,c]=h.useState("all"),[d,u]=h.useState(null);h.useEffect(()=>{Ut.getDefaultCurrency().then(u)},[]);const m=(d==null?void 0:d.symbol)||"",[p,x]=h.useState(!1),[g,f]=h.useState(!1),[b,j]=h.useState(null),[v,w]=h.useState(null),[y,C]=h.useState({email:"",password:"User123!@#",firstName:"",lastName:"",phone:"",username:"",role:"user",initialBalance:100}),[S,_]=h.useState(!1),[E,A]=h.useState(null),[R,I]=h.useState(null);h.useEffect(()=>{N()},[]);const N=async()=>{n(!0);try{const{data:B,error:T}=await U.from("users").select("*").order("created_at",{ascending:!1});if(T){console.error("Error fetching users:",T),r([]);return}r(B||[])}catch(B){console.error("Error fetching users:",B),r([])}finally{n(!1)}},P=h.useCallback(async B=>{const T=B.replace(/^@/,"").toLowerCase().trim();if(!T){A(null),I(null);return}if(!/^[a-zA-Z0-9_]+$/.test(T)){A(!1),I("Username can only contain letters, numbers, and underscores");return}if(T.length<3){A(!1),I("Username must be at least 3 characters");return}if(T.length>20){A(!1),I("Username must be 20 characters or less");return}_(!0),I(null);try{const{data:O,error:q}=await U.from("users").select("id").ilike("external_id",`%${T}%`).limit(1);if(q){console.error("Error checking username:",q),A(null);return}A(!O||O.length===0),O&&O.length>0&&I("This username is already taken")}catch(O){console.error("Error checking username:",O),A(null)}finally{_(!1)}},[]);h.useEffect(()=>{const B=setTimeout(()=>{y.username?P(y.username):(A(null),I(null))},500);return()=>clearTimeout(B)},[y.username,P]);const k=B=>{const T=B.replace(/^@/,"");C({...y,username:T})},D=async()=>{f(!0),j(null),w(null);try{if(!y.phone||!y.firstName||!y.lastName){j("Please fill in all required fields (Phone, First Name, Last Name)"),f(!1);return}const B=lu(y.phone),T=VU(y.phone);if(T){j(T),f(!1);return}const O=y.username||`user${Date.now().toString(36)}`,{data:q,error:K}=await U.from("users").select("id").eq("phone",B).maybeSingle();if(!K&&q){j("A user with this phone number already exists"),f(!1);return}if(y.email){const{data:fe,error:z}=await U.from("users").select("id").eq("email",y.email).maybeSingle();if(!z&&fe){j("A user with this email already exists"),f(!1);return}}const le=`usr_${Date.now()}_${Math.random().toString(36).substr(2,6)}`,X=`wal_${Date.now()}_${Math.random().toString(36).substr(2,6)}`,{data:se,error:de}=await U.rpc("create_user_with_wallet",{p_external_id:le,p_email:y.email||null,p_password_hash:y.password,p_first_name:y.firstName,p_last_name:y.lastName,p_phone:B,p_username:O,p_roles:y.role,p_wallet_external_id:X,p_initial_balance:y.initialBalance});if(!de&&se)w(`User ${y.firstName} created successfully with ${m}${y.initialBalance} balance!`);else{console.log("RPC not available, trying direct insert:",de==null?void 0:de.message);const fe={external_id:le,email:y.email||null,password_hash:y.password,first_name:y.firstName,last_name:y.lastName,phone:B,roles:y.role,kyc_tier:1,kyc_status:"APPROVED",status:"ACTIVE",email_verified:!!y.email,phone_verified:!0},{data:z,error:re}=await U.from("users").insert(fe).select().single();if(re){re.message.includes("external_id")&&re.message.includes("wallets")?j("Database trigger error. Please run the SQL migration in Supabase."):j(`Failed to create user: ${re.message}`),f(!1);return}const{data:ie}=await U.from("wallets").select("id, external_id").eq("user_id",z.id).eq("wallet_type","primary").maybeSingle();ie?await U.from("wallets").update({external_id:ie.external_id||X,balance:y.initialBalance,status:"ACTIVE",daily_limit:5e3,monthly_limit:5e4}).eq("id",ie.id):await U.from("wallets").insert({external_id:X,user_id:z.id,wallet_type:"primary",currency:"USD",balance:y.initialBalance,status:"ACTIVE",daily_limit:5e3,monthly_limit:5e4}),w(`User ${y.firstName} created successfully with ${m}${y.initialBalance} balance!`)}C({email:"",password:"User123!@#",firstName:"",lastName:"",phone:"",username:"",role:"user",initialBalance:100}),N(),setTimeout(()=>{x(!1),w(null)},2e3)}catch(B){j(B.message||"An unexpected error occurred")}finally{f(!1)}},$=s.filter(B=>{var K,le;const T=((K=B.email)==null?void 0:K.toLowerCase().includes(i.toLowerCase()))||((le=B.phone)==null?void 0:le.toLowerCase().includes(i.toLowerCase()))||`${B.first_name} ${B.last_name}`.toLowerCase().includes(i.toLowerCase()),O=B.status==="ACTIVE",q=o==="all"||o==="active"&&O||o==="inactive"&&!O||o==="verified"&&B.kyc_status==="APPROVED"||o==="pending"&&B.kyc_status==="PENDING";return T&&q}),L=B=>{switch(B){case"APPROVED":case"VERIFIED":return e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400",children:[e.jsx(be,{className:"w-3 h-3"})," Verified"]});case"PENDING":return e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium bg-yellow-100 dark:bg-yellow-900/30 text-yellow-700 dark:text-yellow-400",children:[e.jsx(it,{className:"w-3 h-3"})," Pending"]});case"REJECTED":return e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-400",children:[e.jsx(ft,{className:"w-3 h-3"})," Rejected"]});default:return e.jsx("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300",children:"Not Started"})}};return e.jsx(Kt,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"User Management"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Manage regular user accounts and settings"})]}),e.jsxs("button",{onClick:()=>x(!0),className:"px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 flex items-center gap-2",children:[e.jsx(It,{className:"w-4 h-4"}),"Add User"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx(we,{className:"p-4",delay:0,children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-900/30 rounded-lg",children:e.jsx(ia,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Total Users"}),e.jsx("p",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:s.length})]})]})}),e.jsx(we,{className:"p-4",delay:.1,children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-green-100 dark:bg-green-900/30 rounded-lg",children:e.jsx(be,{className:"w-5 h-5 text-green-600 dark:text-green-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Verified"}),e.jsx("p",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:s.filter(B=>B.kyc_status==="APPROVED"||B.kyc_status==="VERIFIED").length})]})]})}),e.jsx(we,{className:"p-4",delay:.2,children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-yellow-100 dark:bg-yellow-900/30 rounded-lg",children:e.jsx(it,{className:"w-5 h-5 text-yellow-600 dark:text-yellow-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Pending KYC"}),e.jsx("p",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:s.filter(B=>B.kyc_status==="PENDING").length})]})]})}),e.jsx(we,{className:"p-4",delay:.3,children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-red-100 dark:bg-red-900/30 rounded-lg",children:e.jsx(hl,{className:"w-5 h-5 text-red-600 dark:text-red-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Suspended"}),e.jsx("p",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:s.filter(B=>B.status==="SUSPENDED").length})]})]})})]}),e.jsx(W,{className:"p-4",children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(ts,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search users by name, email, or phone...",value:i,onChange:B=>l(B.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-400"})]}),e.jsxs("select",{value:o,onChange:B=>c(B.target.value),className:"px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"inactive",children:"Suspended"}),e.jsx("option",{value:"verified",children:"KYC Verified"}),e.jsx("option",{value:"pending",children:"KYC Pending"})]}),e.jsxs("button",{className:"px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 flex items-center gap-2 text-gray-700 dark:text-gray-300",children:[e.jsx(ws,{className:"w-4 h-4"}),"Export"]})]})}),e.jsxs(W,{className:"overflow-hidden",children:[a?e.jsxs("div",{className:"p-8 text-center",children:[e.jsx("div",{className:"w-8 h-8 border-4 border-primary-600 border-t-transparent rounded-full animate-spin mx-auto"}),e.jsx("p",{className:"mt-2 text-gray-500 dark:text-gray-400",children:"Loading users..."})]}):e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700/50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"User"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Contact"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"KYC Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Joined"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:$.map(B=>{var T,O;return e.jsxs("tr",{onClick:()=>t(`/admin/users/${B.id}`),className:"hover:bg-blue-50 dark:hover:bg-blue-900/20 cursor-pointer transition-colors",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-primary-100 dark:bg-primary-900/30 rounded-full flex items-center justify-center",children:e.jsxs("span",{className:"text-primary-700 dark:text-primary-400 font-medium",children:[(T=B.first_name)==null?void 0:T.charAt(0),(O=B.last_name)==null?void 0:O.charAt(0)]})}),e.jsxs("div",{children:[e.jsxs("p",{className:"font-medium text-gray-900 dark:text-white",children:[B.first_name," ",B.last_name]}),e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:["ID: ",B.id.slice(0,8),"..."]})]})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"space-y-1",children:[B.email&&e.jsxs("p",{className:"text-sm flex items-center gap-1 text-gray-700 dark:text-gray-300",children:[e.jsx(Va,{className:"w-3 h-3 text-gray-400"}),B.email]}),B.phone&&e.jsxs("p",{className:"text-sm flex items-center gap-1 text-gray-700 dark:text-gray-300",children:[e.jsx(lr,{className:"w-3 h-3 text-gray-400"}),B.phone]})]})}),e.jsx("td",{className:"px-6 py-4",children:L(B.kyc_status)}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${B.status==="ACTIVE"?"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400":"bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-400"}`,children:B.status==="ACTIVE"?"Active":B.status||"Inactive"})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:new Date(B.created_at).toLocaleDateString()})})]},B.id)})})]}),!a&&$.length===0&&e.jsxs("div",{className:"p-8 text-center",children:[e.jsx(ia,{className:"w-12 h-12 text-gray-300 dark:text-gray-600 mx-auto mb-3"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"No users found"})]})]}),p&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-xl w-full max-w-md mx-4 max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700 flex items-center justify-between",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"Create New User"}),e.jsx("button",{onClick:()=>{x(!1),j(null),w(null)},className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg text-gray-600 dark:text-gray-400",children:e.jsx(lt,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"p-6 space-y-4",children:[b&&e.jsxs("div",{className:"p-3 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg text-red-700 dark:text-red-400 text-sm flex items-center gap-2",children:[e.jsx(Lt,{className:"w-4 h-4"}),b]}),v&&e.jsxs("div",{className:"p-3 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg text-green-700 dark:text-green-400 text-sm flex items-center gap-2",children:[e.jsx(be,{className:"w-4 h-4"}),v]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"First Name *"}),e.jsx("input",{type:"text",value:y.firstName,onChange:B=>C({...y,firstName:B.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:"John"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Last Name *"}),e.jsx("input",{type:"text",value:y.lastName,onChange:B=>C({...y,lastName:B.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:"Doe"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:[e.jsx(Cg,{className:"w-4 h-4 inline mr-1"}),"Username"]}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-500 dark:text-gray-400",children:"@"}),e.jsx("input",{type:"text",value:y.username,onChange:B=>k(B.target.value),className:`w-full pl-8 pr-10 py-2 border rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white ${R?"border-red-300 dark:border-red-600":E===!0?"border-green-300 dark:border-green-600":"border-gray-300 dark:border-gray-600"}`,placeholder:"johndoe"}),S&&e.jsx(Ie,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 w-4 h-4 animate-spin text-gray-400"}),!S&&E===!0&&y.username&&e.jsx(be,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-green-500"}),!S&&E===!1&&y.username&&e.jsx(ft,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-red-500"})]}),R&&e.jsx("p",{className:"text-xs text-red-600 dark:text-red-400 mt-1",children:R}),E===!0&&y.username&&e.jsxs("p",{className:"text-xs text-green-600 dark:text-green-400 mt-1",children:["Username @",y.username," is available!"]}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Letters, numbers, and underscores only. The @ will be added automatically."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Phone Number *"}),e.jsx("input",{type:"tel",value:y.phone,onChange:B=>C({...y,phone:B.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:"077123456 or +232771234567"}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"9 digits starting with 0. Country code (+232) will be auto-removed."}),y.phone&&e.jsxs("p",{className:"text-xs text-primary-600 dark:text-primary-400 mt-1",children:["Will be saved as: ",lu(y.phone)||y.phone]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Email (Optional)"}),e.jsx("input",{type:"email",value:y.email,onChange:B=>C({...y,email:B.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:"john@example.com"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Password"}),e.jsx("input",{type:"text",value:y.password,onChange:B=>C({...y,password:B.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Role"}),e.jsxs("select",{value:y.role,onChange:B=>C({...y,role:B.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[e.jsx("option",{value:"user",children:"User"}),e.jsx("option",{value:"merchant",children:"Merchant"}),e.jsx("option",{value:"agent",children:"Agent"}),e.jsx("option",{value:"admin",children:"Admin"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:[e.jsx(jt,{className:"w-4 h-4 inline mr-1"}),"Initial Balance ($)"]}),e.jsx("input",{type:"number",min:"0",step:"0.01",value:y.initialBalance,onChange:B=>C({...y,initialBalance:parseFloat(B.target.value)||0}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]})]}),e.jsxs("div",{className:"p-6 border-t border-gray-200 dark:border-gray-700 flex gap-3",children:[e.jsx("button",{onClick:()=>{x(!1),j(null),w(null)},className:"flex-1 px-4 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700",children:"Cancel"}),e.jsx("button",{onClick:D,disabled:g,className:"flex-1 px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 disabled:opacity-50 flex items-center justify-center gap-2",children:g?e.jsxs(e.Fragment,{children:[e.jsx(Ie,{className:"w-4 h-4 animate-spin"}),"Creating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(It,{className:"w-4 h-4"}),"Create User"]})})]})]})})]})})}function Bce(){var B,T;const{userId:t}=hi(),s=At(),[r,a]=h.useState(null),[n,i]=h.useState([]),[l,o]=h.useState([]),[c,d]=h.useState([]),[u,m]=h.useState(!0),[p,x]=h.useState("overview"),[g,f]=h.useState(!1),[b,j]=h.useState({first_name:"",last_name:"",phone:"",email:""}),[v,w]=h.useState(!1),[y,C]=h.useState(!1),[S,_]=h.useState(null);h.useEffect(()=>{Ut.getDefaultCurrency().then(_)},[]);const E=(S==null?void 0:S.symbol)||"",A=O=>`${E}${O.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}`;h.useEffect(()=>{t&&R()},[t]);const R=async()=>{m(!0);try{const{data:O,error:q}=await U.from("users").select("*").eq("id",t).single();if(q||!O){console.error("Error fetching user:",q),s("/admin/users");return}a(O);const{data:K}=await U.from("wallets").select("*").eq("user_id",t);i(K||[]);const{data:le}=await U.from("cards").select("*").eq("user_id",t);if(o(le||[]),K&&K.length>0){const X=K.map(de=>de.id),{data:se}=await U.from("transactions").select("*").in("wallet_id",X).order("created_at",{ascending:!1}).limit(50);d(se||[])}}catch(O){console.error("Error fetching user data:",O)}finally{m(!1)}},I=async()=>{if(!r)return;const O=r.status==="ACTIVE"?"SUSPENDED":"ACTIVE",{error:q}=await U.from("users").update({status:O}).eq("id",r.id);q||a({...r,status:O})},N=O=>{switch(O){case"ACTIVE":return e.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 rounded-full text-sm font-medium bg-green-100 text-green-700",children:[e.jsx(be,{className:"w-4 h-4"})," Active"]});case"SUSPENDED":return e.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 rounded-full text-sm font-medium bg-red-100 text-red-700",children:[e.jsx(hl,{className:"w-4 h-4"})," Suspended"]});default:return e.jsx("span",{className:"inline-flex items-center gap-1 px-3 py-1 rounded-full text-sm font-medium bg-gray-100 text-gray-700",children:O})}},P=(O,q)=>{switch(O){case"APPROVED":case"VERIFIED":return e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 rounded-full text-sm font-medium bg-green-100 text-green-700",children:[e.jsx(be,{className:"w-4 h-4"})," Verified"]}),e.jsxs("span",{className:"text-sm text-gray-500",children:["Tier ",q]})]});case"PENDING":return e.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 rounded-full text-sm font-medium bg-yellow-100 text-yellow-700",children:[e.jsx(it,{className:"w-4 h-4"})," Pending Review"]});case"REJECTED":return e.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 rounded-full text-sm font-medium bg-red-100 text-red-700",children:[e.jsx(ft,{className:"w-4 h-4"})," Rejected"]});default:return e.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 rounded-full text-sm font-medium bg-gray-100 text-gray-700",children:[e.jsx(Lt,{className:"w-4 h-4"})," Not Started"]})}},k=n.reduce((O,q)=>O+(q.balance||0),0),D=()=>{r&&(j({first_name:r.first_name||"",last_name:r.last_name||"",phone:r.phone||"",email:r.email||""}),f(!0))},$=async()=>{if(!r)return;w(!0);const{error:O}=await U.from("users").update({first_name:b.first_name,last_name:b.last_name,phone:b.phone,email:b.email}).eq("id",r.id);O||(a({...r,first_name:b.first_name,last_name:b.last_name,phone:b.phone,email:b.email}),f(!1)),w(!1)},L=async O=>{var K;const q=(K=O.target.files)==null?void 0:K[0];if(!(!q||!r)){C(!0);try{const le=q.name.split(".").pop(),se=`profile-pictures/${`${r.id}_${Date.now()}.${le}`}`,{error:de}=await U.storage.from("avatars").upload(se,q);if(de){const fe=`https://ui-avatars.com/api/?name=${r.first_name}+${r.last_name}&background=random`;await U.from("users").update({profile_picture:fe}).eq("id",r.id),a({...r,profile_picture:fe})}else{const{data:{publicUrl:fe}}=U.storage.from("avatars").getPublicUrl(se);await U.from("users").update({profile_picture:fe}).eq("id",r.id),a({...r,profile_picture:fe})}}catch(le){console.error("Photo upload error:",le)}finally{C(!1)}}};return u?e.jsx(Kt,{children:e.jsx("div",{className:"flex items-center justify-center h-96",children:e.jsx(Ie,{className:"w-8 h-8 animate-spin text-primary-600"})})}):r?e.jsx(Kt,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("button",{onClick:()=>s("/admin/users"),className:"p-2 hover:bg-gray-100 rounded-lg",children:e.jsx(_s,{className:"w-5 h-5"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"User Details"}),e.jsx("p",{className:"text-gray-500",children:"Manage user account and view activity"})]}),e.jsx("button",{onClick:R,className:"p-2 hover:bg-gray-100 rounded-lg",title:"Refresh",children:e.jsx(vt,{className:"w-5 h-5"})})]}),e.jsx(W,{className:"p-6",children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-6",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"w-32 h-32 bg-primary-100 rounded-full flex items-center justify-center",children:r.profile_picture?e.jsx("img",{src:r.profile_picture,alt:`${r.first_name} ${r.last_name}`,className:"w-32 h-32 rounded-full object-cover"}):e.jsxs("span",{className:"text-4xl font-bold text-primary-600",children:[(B=r.first_name)==null?void 0:B.charAt(0),(T=r.last_name)==null?void 0:T.charAt(0)]})}),e.jsxs("label",{className:"absolute bottom-0 right-0 p-2 bg-white rounded-full shadow-lg hover:bg-gray-50 cursor-pointer",children:[y?e.jsx(Ie,{className:"w-4 h-4 text-gray-600 animate-spin"}):e.jsx(Yc,{className:"w-4 h-4 text-gray-600"}),e.jsx("input",{type:"file",accept:"image/*",onChange:L,className:"hidden",disabled:y})]})]})}),e.jsxs("div",{className:"flex-1 space-y-4",children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[e.jsxs("h2",{className:"text-2xl font-bold text-gray-900",children:[r.first_name," ",r.last_name]}),r.username&&e.jsxs("span",{className:"text-lg text-primary-600",children:["@",r.username]}),N(r.status)]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[e.jsx(lr,{className:"w-4 h-4"}),e.jsx("span",{children:r.phone||"No phone"}),r.phone_verified&&e.jsx(be,{className:"w-4 h-4 text-green-500"})]}),e.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[e.jsx(Va,{className:"w-4 h-4"}),e.jsx("span",{children:r.email||"No email"}),r.email_verified&&e.jsx(be,{className:"w-4 h-4 text-green-500"})]}),e.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[e.jsx(Mn,{className:"w-4 h-4"}),e.jsxs("span",{children:["Joined ",new Date(r.created_at).toLocaleDateString()]})]}),e.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[e.jsx(Xt,{className:"w-4 h-4"}),e.jsx("span",{className:"capitalize",children:r.roles||"user"})]}),r.last_login_at&&e.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[e.jsx(it,{className:"w-4 h-4"}),e.jsxs("span",{children:["Last login: ",new Date(r.last_login_at).toLocaleString()]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm text-gray-500",children:"KYC Status:"}),P(r.kyc_status,r.kyc_tier)]})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("button",{onClick:I,className:`px-4 py-2 rounded-lg font-medium flex items-center gap-2 ${r.status==="ACTIVE"?"bg-red-100 text-red-700 hover:bg-red-200":"bg-green-100 text-green-700 hover:bg-green-200"}`,children:r.status==="ACTIVE"?e.jsxs(e.Fragment,{children:[e.jsx(hl,{className:"w-4 h-4"}),"Suspend"]}):e.jsxs(e.Fragment,{children:[e.jsx(be,{className:"w-4 h-4"}),"Activate"]})}),e.jsxs("button",{onClick:D,className:"px-4 py-2 bg-gray-100 text-gray-700 rounded-lg font-medium flex items-center gap-2 hover:bg-gray-200",children:[e.jsx(Nl,{className:"w-4 h-4"}),"Edit User"]}),e.jsxs("button",{className:"px-4 py-2 bg-gray-100 text-gray-700 rounded-lg font-medium flex items-center gap-2 hover:bg-gray-200",children:[e.jsx(jl,{className:"w-4 h-4"}),"Send Notification"]})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx(W,{className:"p-6 bg-gradient-to-br from-primary-600 to-primary-500 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-primary-100 text-sm",children:"Total Balance"}),e.jsx("p",{className:"text-3xl font-bold mt-1",children:A(k)})]}),e.jsx("div",{className:"p-3 bg-white/20 rounded-xl",children:e.jsx(jt,{className:"w-8 h-8"})})]})}),e.jsx(W,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500 text-sm",children:"Active Wallets"}),e.jsx("p",{className:"text-3xl font-bold mt-1 text-gray-900",children:n.length})]}),e.jsx("div",{className:"p-3 bg-blue-100 rounded-xl",children:e.jsx(jt,{className:"w-8 h-8 text-blue-600"})})]})}),e.jsx(W,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500 text-sm",children:"Active Cards"}),e.jsx("p",{className:"text-3xl font-bold mt-1 text-gray-900",children:l.length})]}),e.jsx("div",{className:"p-3 bg-purple-100 rounded-xl",children:e.jsx(Je,{className:"w-8 h-8 text-purple-600"})})]})})]}),e.jsx("div",{className:"border-b border-gray-200",children:e.jsx("nav",{className:"flex gap-8",children:[{id:"overview",label:"Overview",icon:Es},{id:"transactions",label:"Transactions",icon:js},{id:"cards",label:"Cards & Wallets",icon:Je},{id:"kyc",label:"KYC Details",icon:Yh}].map(O=>e.jsxs("button",{onClick:()=>x(O.id),className:`flex items-center gap-2 py-4 border-b-2 font-medium text-sm transition-colors ${p===O.id?"border-primary-600 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:[e.jsx(O.icon,{className:"w-4 h-4"}),O.label]},O.id))})}),p==="overview"&&e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(W,{className:"p-6",children:[e.jsxs("h3",{className:"font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[e.jsx(js,{className:"w-5 h-5"}),"Recent Transactions"]}),c.length===0?e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(js,{className:"w-10 h-10 mx-auto mb-2 text-gray-300"}),"No transactions yet"]}):e.jsx("div",{className:"space-y-3",children:c.slice(0,5).map(O=>{var q;return e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`p-2 rounded-full ${O.amount>=0?"bg-green-100":"bg-red-100"}`,children:O.amount>=0?e.jsx(la,{className:"w-4 h-4 text-green-600"}):e.jsx(xs,{className:"w-4 h-4 text-red-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-sm",children:O.description||O.type}),e.jsx("p",{className:"text-xs text-gray-500",children:new Date(O.created_at).toLocaleString()})]})]}),e.jsxs("p",{className:`font-semibold ${O.amount>=0?"text-green-600":"text-red-600"}`,children:[O.amount>=0?"+":"",(q=O.amount)==null?void 0:q.toFixed(2)," ",O.currency]})]},O.id)})})]}),e.jsxs(W,{className:"p-6",children:[e.jsxs("h3",{className:"font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[e.jsx(jt,{className:"w-5 h-5"}),"Wallets"]}),n.length===0?e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(jt,{className:"w-10 h-10 mx-auto mb-2 text-gray-300"}),"No wallets found"]}):e.jsx("div",{className:"space-y-3",children:n.map(O=>{var q,K;return e.jsxs("div",{className:"p-4 border border-gray-200 rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("span",{className:"font-medium capitalize",children:[O.wallet_type," Wallet"]}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${O.status==="ACTIVE"?"bg-green-100 text-green-700":"bg-gray-100 text-gray-700"}`,children:O.status})]}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:A(O.balance||0)}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Daily Limit: ",E,(q=O.daily_limit)==null?void 0:q.toLocaleString()," | Monthly: ",E,(K=O.monthly_limit)==null?void 0:K.toLocaleString()]})]},O.id)})})]})]}),p==="transactions"&&e.jsxs(W,{className:"overflow-hidden",children:[e.jsx("div",{className:"p-4 border-b border-gray-200",children:e.jsx("h3",{className:"font-semibold text-gray-900",children:"All Transactions"})}),c.length===0?e.jsxs("div",{className:"text-center py-12 text-gray-500",children:[e.jsx(js,{className:"w-12 h-12 mx-auto mb-3 text-gray-300"}),"No transactions found"]}):e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Type"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Description"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Amount"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Date"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:c.map(O=>{var q;return e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:`p-1.5 rounded-full ${O.amount>=0?"bg-green-100":"bg-red-100"}`,children:O.amount>=0?e.jsx(la,{className:"w-3 h-3 text-green-600"}):e.jsx(xs,{className:"w-3 h-3 text-red-600"})}),e.jsx("span",{className:"font-medium",children:O.type})]})}),e.jsx("td",{className:"px-6 py-4 text-gray-600",children:O.description||"-"}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("span",{className:`font-semibold ${O.amount>=0?"text-green-600":"text-red-600"}`,children:[O.amount>=0?"+":"",(q=O.amount)==null?void 0:q.toFixed(2)," ",O.currency]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${O.status==="COMPLETED"?"bg-green-100 text-green-700":O.status==="PENDING"?"bg-yellow-100 text-yellow-700":"bg-red-100 text-red-700"}`,children:O.status})}),e.jsx("td",{className:"px-6 py-4 text-gray-500 text-sm",children:new Date(O.created_at).toLocaleString()})]},O.id)})})]})]}),p==="cards"&&e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(W,{className:"p-6",children:[e.jsxs("h3",{className:"font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[e.jsx(Je,{className:"w-5 h-5"}),"Cards"]}),l.length===0?e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(Je,{className:"w-10 h-10 mx-auto mb-2 text-gray-300"}),"No cards issued",e.jsx("button",{className:"block mx-auto mt-4 px-4 py-2 bg-primary-600 text-white rounded-lg text-sm",children:"Issue New Card"})]}):e.jsx("div",{className:"space-y-4",children:l.map(O=>{var q;return e.jsxs("div",{className:"p-4 bg-gradient-to-r from-gray-800 to-gray-700 rounded-xl text-white",children:[e.jsxs("div",{className:"flex justify-between items-start mb-8",children:[e.jsx(Je,{className:"w-8 h-8"}),e.jsx("span",{className:`px-2 py-1 rounded text-xs ${O.status==="ACTIVE"?"bg-green-500":"bg-red-500"}`,children:O.status})]}),e.jsxs("p",{className:"text-lg tracking-widest mb-4",children:["   ",((q=O.card_number)==null?void 0:q.slice(-4))||"****"]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsxs("span",{className:"text-gray-400",children:["Expires: ",O.expiry_date]}),e.jsx("span",{className:"capitalize",children:O.card_type})]})]},O.id)})})]}),e.jsxs(W,{className:"p-6",children:[e.jsxs("h3",{className:"font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[e.jsx(jt,{className:"w-5 h-5"}),"Wallet Details"]}),n.map(O=>{var q,K;return e.jsxs("div",{className:"p-4 border border-gray-200 rounded-lg mb-3",children:[e.jsxs("div",{className:"flex justify-between items-center mb-3",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"font-medium capitalize",children:[O.wallet_type," Wallet"]}),e.jsx("p",{className:"text-xs text-gray-500",children:O.external_id})]}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${O.status==="ACTIVE"?"bg-green-100 text-green-700":"bg-gray-100 text-gray-700"}`,children:O.status})]}),e.jsxs("p",{className:"text-3xl font-bold text-gray-900 mb-3",children:[A(O.balance||0),e.jsx("span",{className:"text-sm text-gray-500 ml-2",children:O.currency})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"Daily Limit"}),e.jsxs("p",{className:"font-medium",children:[E,(q=O.daily_limit)==null?void 0:q.toLocaleString()]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"Monthly Limit"}),e.jsxs("p",{className:"font-medium",children:[E,(K=O.monthly_limit)==null?void 0:K.toLocaleString()]})]})]})]},O.id)})]})]}),p==="kyc"&&e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(W,{className:"p-6",children:[e.jsxs("h3",{className:"font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[e.jsx(Xt,{className:"w-5 h-5"}),"KYC Verification"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"p-4 bg-gray-50 rounded-lg",children:e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-gray-600",children:"Status"}),P(r.kyc_status,r.kyc_tier)]})}),e.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[e.jsx("p",{className:"text-gray-600 mb-1",children:"Verification Tier"}),e.jsxs("p",{className:"font-semibold text-lg",children:["Tier ",r.kyc_tier]}),e.jsx("div",{className:"mt-2 flex gap-1",children:[1,2,3].map(O=>e.jsx("div",{className:`flex-1 h-2 rounded-full ${O<=r.kyc_tier?"bg-primary-600":"bg-gray-200"}`},O))})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[e.jsx("p",{className:"text-gray-600 mb-1",children:"Email Verified"}),e.jsx("p",{className:`font-semibold flex items-center gap-1 ${r.email_verified?"text-green-600":"text-red-600"}`,children:r.email_verified?e.jsxs(e.Fragment,{children:[e.jsx(be,{className:"w-4 h-4"})," Yes"]}):e.jsxs(e.Fragment,{children:[e.jsx(ft,{className:"w-4 h-4"})," No"]})})]}),e.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[e.jsx("p",{className:"text-gray-600 mb-1",children:"Phone Verified"}),e.jsx("p",{className:`font-semibold flex items-center gap-1 ${r.phone_verified?"text-green-600":"text-red-600"}`,children:r.phone_verified?e.jsxs(e.Fragment,{children:[e.jsx(be,{className:"w-4 h-4"})," Yes"]}):e.jsxs(e.Fragment,{children:[e.jsx(ft,{className:"w-4 h-4"})," No"]})})]})]})]})]}),e.jsxs(W,{className:"p-6",children:[e.jsxs("h3",{className:"font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[e.jsx(Es,{className:"w-5 h-5"}),"Personal Details"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"First Name"}),e.jsx("p",{className:"font-medium",children:r.first_name})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Last Name"}),e.jsx("p",{className:"font-medium",children:r.last_name})]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Email"}),e.jsx("p",{className:"font-medium",children:r.email||"Not provided"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Phone"}),e.jsx("p",{className:"font-medium",children:r.phone||"Not provided"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Date of Birth"}),e.jsx("p",{className:"font-medium",children:r.date_of_birth||"Not provided"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Address"}),e.jsx("p",{className:"font-medium",children:r.address||"Not provided"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"City"}),e.jsx("p",{className:"font-medium",children:r.city||"Not provided"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Country"}),e.jsx("p",{className:"font-medium",children:r.country||"Not provided"})]})]})]})]})]}),g&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-md",children:[e.jsxs("div",{className:"p-6 border-b border-gray-200 flex items-center justify-between",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Edit User"}),e.jsx("button",{onClick:()=>f(!1),className:"p-1 hover:bg-gray-100 rounded",children:e.jsx(lt,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"First Name"}),e.jsx("input",{type:"text",value:b.first_name,onChange:O=>j({...b,first_name:O.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Last Name"}),e.jsx("input",{type:"text",value:b.last_name,onChange:O=>j({...b,last_name:O.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone"}),e.jsx("input",{type:"text",value:b.phone,onChange:O=>j({...b,phone:O.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),e.jsx("input",{type:"email",value:b.email,onChange:O=>j({...b,email:O.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500"})]})]}),e.jsxs("div",{className:"p-6 border-t border-gray-200 flex gap-3",children:[e.jsx("button",{onClick:()=>f(!1),className:"flex-1 py-2 bg-gray-100 text-gray-700 rounded-lg font-medium hover:bg-gray-200",children:"Cancel"}),e.jsx("button",{onClick:$,disabled:v,className:"flex-1 py-2 bg-primary-600 text-white rounded-lg font-medium hover:bg-primary-700 flex items-center justify-center gap-2",children:v?e.jsxs(e.Fragment,{children:[e.jsx(Ie,{className:"w-4 h-4 animate-spin"}),"Saving..."]}):"Save Changes"})]})]})})]})}):e.jsx(Kt,{children:e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Es,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"User not found"}),e.jsx("button",{onClick:()=>s("/admin/users"),className:"mt-4 text-primary-600 hover:underline",children:"Back to Users"})]})})}function $ce(){const t=At(),[s,r]=h.useState([]),[a,n]=h.useState(!0),[i,l]=h.useState(""),[o,c]=h.useState("all");h.useEffect(()=>{d()},[]);const d=async()=>{n(!0);try{const{data:x,error:g}=await U.from("users").select("*").ilike("roles","%merchant%").order("created_at",{ascending:!1});if(g){console.error("Error fetching merchants:",g),r([]);return}r(x||[])}catch(x){console.error("Error fetching merchants:",x),r([])}finally{n(!1)}},u=s.filter(x=>{var j,v;const g=x.email.toLowerCase().includes(i.toLowerCase())||`${x.first_name} ${x.last_name}`.toLowerCase().includes(i.toLowerCase())||((j=x.phone)==null?void 0:j.toLowerCase().includes(i.toLowerCase()))||((v=x.business_name)==null?void 0:v.toLowerCase().includes(i.toLowerCase())),f=x.status==="ACTIVE",b=o==="all"||o==="active"&&f||o==="inactive"&&!f||o==="subscribed"&&x.subscription_status==="active";return g&&b}),m=(x,g)=>{if(!x||x==="inactive")return e.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300",children:"No Subscription"});const f={starter:"bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-400",business:"bg-purple-100 dark:bg-purple-900/30 text-purple-700 dark:text-purple-400",enterprise:"bg-indigo-100 dark:bg-indigo-900/30 text-indigo-700 dark:text-indigo-400"};return e.jsxs("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${f[g||"starter"]||"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400"}`,children:[g==null?void 0:g.charAt(0).toUpperCase(),(g==null?void 0:g.slice(1))||"Active"]})},p=async(x,g)=>{try{const f=g?"INACTIVE":"ACTIVE",{error:b}=await U.from("users").update({status:f}).eq("id",x);if(b){console.error("Error updating merchant status:",b);return}d()}catch(f){console.error("Error updating merchant status:",f)}};return e.jsx(Kt,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Merchant Management"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Manage merchant accounts, subscriptions and settings"})]}),e.jsxs("button",{onClick:()=>t("/admin/merchants/create"),className:"px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 flex items-center gap-2",children:[e.jsx(It,{className:"w-4 h-4"}),"Add Merchant"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx(we,{className:"p-4",delay:0,children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-green-100 dark:bg-green-900/30 rounded-lg",children:e.jsx(Ft,{className:"w-5 h-5 text-green-600 dark:text-green-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Total Merchants"}),e.jsx("p",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:s.length})]})]})}),e.jsx(we,{className:"p-4",delay:.1,children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-900/30 rounded-lg",children:e.jsx(be,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Active"}),e.jsx("p",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:s.filter(x=>x.status==="ACTIVE").length})]})]})}),e.jsx(we,{className:"p-4",delay:.2,children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-purple-100 dark:bg-purple-900/30 rounded-lg",children:e.jsx(Je,{className:"w-5 h-5 text-purple-600 dark:text-purple-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Subscribed"}),e.jsx("p",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:s.filter(x=>x.subscription_status==="active").length})]})]})}),e.jsx(we,{className:"p-4",delay:.3,children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-yellow-100 dark:bg-yellow-900/30 rounded-lg",children:e.jsx(js,{className:"w-5 h-5 text-yellow-600 dark:text-yellow-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Monthly Revenue"}),e.jsx("p",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"$0"})]})]})})]}),e.jsx(W,{className:"p-4",children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(ts,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search by name, business, email or phone...",value:i,onChange:x=>l(x.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500"})]}),e.jsxs("select",{value:o,onChange:x=>c(x.target.value),className:"px-4 py-2 border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"inactive",children:"Inactive"}),e.jsx("option",{value:"subscribed",children:"Subscribed"})]}),e.jsxs("button",{className:"px-4 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 flex items-center gap-2",children:[e.jsx(ws,{className:"w-4 h-4"}),"Export"]})]})}),e.jsxs(W,{className:"overflow-hidden",children:[a?e.jsxs("div",{className:"p-8 text-center",children:[e.jsx("div",{className:"w-8 h-8 border-4 border-primary-600 dark:border-primary-400 border-t-transparent rounded-full animate-spin mx-auto"}),e.jsx("p",{className:"mt-2 text-gray-500 dark:text-gray-400",children:"Loading merchants..."})]}):e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700/50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Merchant"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Contact"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Subscription"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Joined"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:u.map(x=>e.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700/50",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-green-100 dark:bg-green-900/30 rounded-full flex items-center justify-center",children:e.jsx(Ft,{className:"w-5 h-5 text-green-600 dark:text-green-400"})}),e.jsxs("div",{children:[e.jsxs("p",{className:"font-medium text-gray-900 dark:text-white",children:[x.first_name," ",x.last_name]}),x.business_name&&e.jsx("p",{className:"text-sm text-primary-600 dark:text-primary-400 font-medium",children:x.business_name}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:x.email})]})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"space-y-1",children:[e.jsxs("p",{className:"text-sm text-gray-700 dark:text-gray-300 flex items-center gap-1",children:[e.jsx(Va,{className:"w-3 h-3 text-gray-400"}),x.email]}),x.phone&&e.jsxs("p",{className:"text-sm text-gray-700 dark:text-gray-300 flex items-center gap-1",children:[e.jsx(lr,{className:"w-3 h-3 text-gray-400"}),x.phone]})]})}),e.jsx("td",{className:"px-6 py-4",children:m(x.subscription_status,x.subscription_plan)}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${x.status==="ACTIVE"?"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400":"bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-400"}`,children:x.status==="ACTIVE"?"Active":"Inactive"})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:new Date(x.created_at).toLocaleDateString()})}),e.jsx("td",{className:"px-6 py-4 text-right",children:e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[e.jsx("button",{className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg",title:"View",children:e.jsx(es,{className:"w-4 h-4 text-gray-500 dark:text-gray-400"})}),e.jsx("button",{className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg",title:"Edit",children:e.jsx(Nl,{className:"w-4 h-4 text-gray-500 dark:text-gray-400"})}),e.jsx("button",{className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg",title:"Settings",children:e.jsx(or,{className:"w-4 h-4 text-gray-500 dark:text-gray-400"})}),e.jsx("button",{onClick:()=>p(x.id,x.status==="ACTIVE"),className:`p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg ${x.status==="ACTIVE"?"text-red-500 dark:text-red-400":"text-green-500 dark:text-green-400"}`,title:x.status==="ACTIVE"?"Deactivate":"Activate",children:x.status==="ACTIVE"?e.jsx(hl,{className:"w-4 h-4"}):e.jsx(be,{className:"w-4 h-4"})})]})})]},x.id))})]}),!a&&u.length===0&&e.jsxs("div",{className:"p-8 text-center",children:[e.jsx(Ft,{className:"w-12 h-12 text-gray-300 dark:text-gray-600 mx-auto mb-3"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"No merchants found"})]})]})]})})}const ix=[{id:1,title:"Account",description:"Login credentials"},{id:2,title:"Business Info",description:"Business details"},{id:3,title:"Categories",description:"What they sell"},{id:4,title:"Address",description:"Location"},{id:5,title:"Bank Account",description:"Payout info"}],Uce=t=>{if(!t)return"";let s=t.replace(/\D/g,"");return s.startsWith("232")&&(s=s.substring(3)),!s.startsWith("0")&&s.length===8&&(s="0"+s),s};function Vce(){var I;const t=At(),[s,r]=h.useState(1),[a,n]=h.useState(!1),[i,l]=h.useState(""),[o,c]=h.useState({email:"",phone:"",password:"",first_name:"",last_name:"",business_name:"",business_type:"",registration_number:"",tax_id:"",website:"",description:"",address_line1:"",address_line2:"",city:"",state:"",postal_code:"",country:"",bank_name:"",account_name:"",account_number:"",routing_number:""}),[d,u]=h.useState([]),[m,p]=h.useState(null),[x,g]=h.useState([]);h.useEffect(()=>{f()},[]);const f=async()=>{const{data:N,error:P}=await U.from("business_categories").select("id, name, parent_id, icon").eq("status","ACTIVE").order("sort_order",{ascending:!0});!P&&N&&u(N)},b=d.filter(N=>!N.parent_id),j=N=>d.filter(P=>P.parent_id===N),v=N=>{p(N===m?null:N)},w=N=>{if(x.some(k=>k.id===N.id)){const k=x.filter(D=>D.id!==N.id);k.length>0&&!k.some(D=>D.is_primary)&&(k[0].is_primary=!0),g(k)}else g([...x,{id:N.id,name:N.name,is_primary:x.length===0}])},y=N=>{g(x.map(P=>({...P,is_primary:P.id===N})))},C=N=>{const P=x.filter(k=>k.id!==N);P.length>0&&!P.some(k=>k.is_primary)&&(P[0].is_primary=!0),g(P)},S=(N,P)=>{c(k=>({...k,[N]:P}))},_=N=>{switch(l(""),N){case 1:return o.email.trim()?o.first_name.trim()?o.last_name.trim()?!o.password||o.password.length<6?(l("Password must be at least 6 characters"),!1):!0:(l("Last name is required"),!1):(l("First name is required"),!1):(l("Email is required"),!1);case 2:return o.business_name.trim()?!0:(l("Business name is required"),!1);case 3:return!0;case 4:return!0;case 5:return!0;default:return!0}},E=()=>{_(s)&&r(N=>Math.min(N+1,ix.length))},A=()=>{r(N=>Math.max(N-1,1))},R=async()=>{var N;if(_(s)){n(!0),l("");try{const P=Uce(o.phone),{data:k}=await U.from("users").select("id").eq("email",o.email).limit(1);if(k&&k.length>0){l("A user with this email already exists"),n(!1);return}if(P){const{data:B}=await U.from("users").select("id").eq("phone",P).limit(1);if(B&&B.length>0){l("A user with this phone number already exists"),n(!1);return}}const D=`usr_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,{data:$,error:L}=await U.from("users").insert({external_id:D,email:o.email,phone:P||null,password_hash:o.password,first_name:o.first_name,last_name:o.last_name,business_name:o.business_name||null,business_category_id:((N=x.find(B=>B.is_primary))==null?void 0:N.id)||null,status:"ACTIVE",kyc_status:"NOT_STARTED",email_verified:!1,roles:"merchant",kyc_tier:0}).select().single();if(L){l(L.message||"Failed to create merchant"),n(!1);return}if(x.length>0&&($!=null&&$.id)){const B=x.map(T=>({user_id:$.id,business_category_id:T.id,is_primary:T.is_primary}));await U.from("merchant_business_categories").insert(B)}t("/admin/merchants")}catch(P){l(P.message||"Failed to create merchant")}finally{n(!1)}}};return e.jsx(Kt,{children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("button",{onClick:()=>t("/admin/merchants"),className:"text-sm text-gray-500 hover:text-gray-700 flex items-center gap-1 mb-2",children:[e.jsx(_s,{className:"w-4 h-4"}),"Back to Merchants"]}),e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Create New Merchant"}),e.jsx("p",{className:"text-gray-500",children:"Set up a new merchant account with full business details"})]}),e.jsx("div",{className:"mb-8",children:e.jsx("div",{className:"flex items-center justify-between",children:ix.map((N,P)=>e.jsxs("div",{className:"flex items-center",children:[e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center font-semibold text-sm ${s>N.id?"bg-green-600 text-white":s===N.id?"bg-primary-600 text-white":"bg-gray-200 text-gray-500"}`,children:s>N.id?e.jsx(be,{className:"w-5 h-5"}):N.id}),e.jsx("div",{className:"mt-2 text-center hidden sm:block",children:e.jsx("p",{className:`text-xs font-medium ${s>=N.id?"text-primary-600":"text-gray-400"}`,children:N.title})})]}),P<ix.length-1&&e.jsx("div",{className:`w-12 sm:w-20 h-1 mx-1 sm:mx-2 ${s>N.id?"bg-green-600":"bg-gray-200"}`})]},N.id))})}),i&&e.jsx("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-lg text-red-700 text-sm",children:i}),e.jsxs(W,{className:"p-6",children:[s===1&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(Es,{className:"w-5 h-5 text-primary-600"}),e.jsx("h2",{className:"text-lg font-semibold",children:"Account Information"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["First Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:o.first_name,onChange:N=>S("first_name",N.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",placeholder:"John"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Last Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:o.last_name,onChange:N=>S("last_name",N.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",placeholder:"Doe"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Email ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"email",value:o.email,onChange:N=>S("email",N.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",placeholder:"merchant@example.com"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone Number"}),e.jsx("input",{type:"tel",value:o.phone,onChange:N=>S("phone",N.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",placeholder:"077123456"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Password ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"password",value:o.password,onChange:N=>S("password",N.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",placeholder:"Minimum 6 characters"})]})]}),s===2&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(ua,{className:"w-5 h-5 text-primary-600"}),e.jsx("h2",{className:"text-lg font-semibold",children:"Business Information"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Business Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:o.business_name,onChange:N=>S("business_name",N.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",placeholder:"ABC Enterprises Ltd"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Business Type"}),e.jsxs("select",{value:o.business_type,onChange:N=>S("business_type",N.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",children:[e.jsx("option",{value:"",children:"Select business type"}),e.jsx("option",{value:"sole_proprietorship",children:"Sole Proprietorship"}),e.jsx("option",{value:"partnership",children:"Partnership"}),e.jsx("option",{value:"llc",children:"LLC"}),e.jsx("option",{value:"corporation",children:"Corporation"}),e.jsx("option",{value:"nonprofit",children:"Non-Profit"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Registration Number"}),e.jsx("input",{type:"text",value:o.registration_number,onChange:N=>S("registration_number",N.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",placeholder:"Business registration"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tax ID"}),e.jsx("input",{type:"text",value:o.tax_id,onChange:N=>S("tax_id",N.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",placeholder:"Tax ID"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Website"}),e.jsx("input",{type:"url",value:o.website,onChange:N=>S("website",N.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",placeholder:"https://www.example.com"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),e.jsx("textarea",{value:o.description,onChange:N=>S("description",N.target.value),rows:3,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",placeholder:"Describe the business..."})]})]}),s===3&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(Lf,{className:"w-5 h-5 text-primary-600"}),e.jsx("h2",{className:"text-lg font-semibold",children:"Business Categories"})]}),e.jsx("p",{className:"text-sm text-gray-500 mb-4",children:"Select the categories that describe what this merchant sells."}),x.length>0&&e.jsxs("div",{className:"p-4 bg-green-50 border border-green-200 rounded-lg mb-4",children:[e.jsxs("p",{className:"text-sm font-medium text-green-700 mb-2",children:["Selected (",x.length,"):"]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:x.map(N=>e.jsxs("span",{className:`inline-flex items-center gap-2 px-3 py-1.5 rounded-full text-sm ${N.is_primary?"bg-green-200 text-green-800":"bg-white text-gray-700 border border-gray-200"}`,children:[N.name,N.is_primary&&e.jsx("span",{className:"text-xs bg-green-300 px-1.5 py-0.5 rounded",children:"Primary"}),!N.is_primary&&e.jsx("button",{type:"button",onClick:()=>y(N.id),className:"text-xs text-green-600 hover:text-green-700 underline",children:"Set Primary"}),e.jsx("button",{type:"button",onClick:()=>C(N.id),className:"text-gray-400 hover:text-red-500",children:""})]},N.id))})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-0 border border-gray-200 rounded-lg overflow-hidden",children:[e.jsxs("div",{className:"border-r border-gray-200",children:[e.jsx("div",{className:"bg-gray-50 px-4 py-2 border-b border-gray-200",children:e.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Select a Category"})}),e.jsx("div",{className:"max-h-80 overflow-y-auto",children:b.map(N=>{const k=j(N.id).filter($=>x.some(L=>L.id===$.id)).length,D=m===N.id;return e.jsxs("button",{type:"button",onClick:()=>v(N.id),className:`w-full flex items-center justify-between px-4 py-3 text-left hover:bg-gray-50 border-b border-gray-100 last:border-0 transition-colors ${D?"bg-primary-50 border-l-4 border-l-primary-500":""}`,children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Ft,{className:"w-5 h-5 text-gray-400"}),e.jsx("span",{className:`font-medium ${D?"text-primary-700":"text-gray-900"}`,children:N.name})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[k>0&&e.jsx("span",{className:"px-2 py-0.5 bg-green-100 text-green-700 text-xs rounded-full",children:k}),e.jsx(Vs,{className:`w-4 h-4 text-gray-400 ${D?"text-primary-500":""}`})]})]},N.id)})})]}),e.jsxs("div",{children:[e.jsx("div",{className:"bg-gray-50 px-4 py-2 border-b border-gray-200",children:e.jsx("p",{className:"text-sm font-medium text-gray-700",children:m?"Select Subcategories":"Select a category first"})}),e.jsx("div",{className:"max-h-80 overflow-y-auto",children:m?j(m).length>0?e.jsx("div",{className:"p-2 space-y-1",children:j(m).map(N=>{const P=x.some(k=>k.id===N.id);return e.jsxs("label",{className:`flex items-center gap-3 p-3 rounded-lg cursor-pointer transition-colors ${P?"bg-green-50 border border-green-200":"hover:bg-gray-50 border border-transparent"}`,children:[e.jsx("input",{type:"checkbox",checked:P,onChange:()=>w(N),className:"w-5 h-5 text-green-600 border-gray-300 rounded focus:ring-green-500"}),e.jsx("span",{className:P?"text-green-700 font-medium":"text-gray-700",children:N.name})]},N.id)})}):e.jsxs("div",{className:"p-8 text-center text-gray-500",children:[e.jsx("p",{children:"No subcategories"}),e.jsxs("button",{type:"button",onClick:()=>{const N=d.find(P=>P.id===m);N&&w(N)},className:"mt-3 px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 text-sm",children:['Select "',(I=b.find(N=>N.id===m))==null?void 0:I.name,'"']})]}):e.jsxs("div",{className:"p-8 text-center text-gray-400",children:[e.jsx(Ft,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),e.jsx("p",{children:"Select a category from the left"})]})})]})]})]}),s===4&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(Vi,{className:"w-5 h-5 text-primary-600"}),e.jsx("h2",{className:"text-lg font-semibold",children:"Business Address"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Address Line 1"}),e.jsx("input",{type:"text",value:o.address_line1,onChange:N=>S("address_line1",N.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",placeholder:"Street address"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Address Line 2"}),e.jsx("input",{type:"text",value:o.address_line2,onChange:N=>S("address_line2",N.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",placeholder:"Apt, Suite, Building (optional)"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"City"}),e.jsx("input",{type:"text",value:o.city,onChange:N=>S("city",N.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",placeholder:"City"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"State/Province"}),e.jsx("input",{type:"text",value:o.state,onChange:N=>S("state",N.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",placeholder:"State"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Postal Code"}),e.jsx("input",{type:"text",value:o.postal_code,onChange:N=>S("postal_code",N.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",placeholder:"Postal code"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Country"}),e.jsx("input",{type:"text",value:o.country,onChange:N=>S("country",N.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",placeholder:"Country"})]})]})]}),s===5&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(Je,{className:"w-5 h-5 text-primary-600"}),e.jsx("h2",{className:"text-lg font-semibold",children:"Payout Account"})]}),e.jsx("p",{className:"text-sm text-gray-500 mb-4",children:"Bank account for receiving payouts. This can be added later."}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Bank Name"}),e.jsx("input",{type:"text",value:o.bank_name,onChange:N=>S("bank_name",N.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",placeholder:"Bank name"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Account Holder Name"}),e.jsx("input",{type:"text",value:o.account_name,onChange:N=>S("account_name",N.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",placeholder:"Name on account"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Account Number"}),e.jsx("input",{type:"text",value:o.account_number,onChange:N=>S("account_number",N.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",placeholder:"Account number"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Routing / Sort Code"}),e.jsx("input",{type:"text",value:o.routing_number,onChange:N=>S("routing_number",N.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",placeholder:"Routing number"})]})]}),e.jsxs("div",{className:"mt-6 p-4 bg-gray-50 rounded-lg",children:[e.jsx("h3",{className:"font-medium text-gray-900 mb-3",children:"Summary"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"Name"}),e.jsxs("p",{className:"font-medium",children:[o.first_name," ",o.last_name]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"Email"}),e.jsx("p",{className:"font-medium",children:o.email||"-"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"Business"}),e.jsx("p",{className:"font-medium",children:o.business_name||"-"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"Categories"}),e.jsxs("p",{className:"font-medium",children:[x.length," selected"]})]})]})]})]}),e.jsxs("div",{className:"flex items-center justify-between mt-8 pt-6 border-t border-gray-200",children:[s>1?e.jsxs("button",{type:"button",onClick:A,className:"flex items-center gap-2 px-4 py-2 text-gray-600 hover:text-gray-900",children:[e.jsx(_s,{className:"w-4 h-4"}),"Back"]}):e.jsx("button",{type:"button",onClick:()=>t("/admin/merchants"),className:"flex items-center gap-2 px-4 py-2 text-gray-600 hover:text-gray-900",children:"Cancel"}),s<ix.length?e.jsxs("button",{type:"button",onClick:E,className:"flex items-center gap-2 px-6 py-3 bg-primary-600 text-white rounded-lg hover:bg-primary-700",children:["Continue",e.jsx(Lr,{className:"w-4 h-4"})]}):e.jsx("button",{type:"button",onClick:R,disabled:a,className:"flex items-center gap-2 px-6 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50",children:a?e.jsxs(e.Fragment,{children:[e.jsx(Ie,{className:"w-4 h-4 animate-spin"}),"Creating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(be,{className:"w-4 h-4"}),"Create Merchant"]})})]})]})]})})}function qce(){const[t,s]=h.useState([]),[r,a]=h.useState(!0),[n,i]=h.useState(""),[l,o]=h.useState("all");h.useEffect(()=>{c()},[]);const c=async()=>{a(!0);try{const{data:p,error:x}=await U.from("users").select("*").ilike("roles","%agent%").order("created_at",{ascending:!1});if(x){console.error("Error fetching agents:",x),s([]);return}s(p||[])}catch(p){console.error("Error fetching agents:",p),s([])}finally{a(!1)}},d=t.filter(p=>{const x=p.email.toLowerCase().includes(n.toLowerCase())||`${p.first_name} ${p.last_name}`.toLowerCase().includes(n.toLowerCase()),g=p.status==="ACTIVE",f=l==="all"||l==="active"&&g||l==="inactive"&&!g||l==="online"&&p.online_status==="online";return x&&f}),u=(p,x)=>{if(!(x==="ACTIVE"))return e.jsx("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300",children:"Inactive"});switch(p){case"online":return e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400",children:[e.jsx("span",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"})," Online"]});case"busy":return e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium bg-yellow-100 dark:bg-yellow-900/30 text-yellow-700 dark:text-yellow-400",children:[e.jsx("span",{className:"w-2 h-2 bg-yellow-500 rounded-full"})," Busy"]});default:return e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium bg-green-100 dark:bg-green-900/30 text-green-600 dark:text-green-400",children:[e.jsx("span",{className:"w-2 h-2 bg-green-400 rounded-full"})," Active"]})}},m=async(p,x)=>{try{const g=x?"INACTIVE":"ACTIVE",{error:f}=await U.from("users").update({status:g}).eq("id",p);if(f){console.error("Error updating agent status:",f);return}c()}catch(g){console.error("Error updating agent status:",g)}};return e.jsx(Kt,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Agent Management"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Manage support agent accounts and performance"})]}),e.jsxs("button",{className:"px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 flex items-center gap-2",children:[e.jsx(It,{className:"w-4 h-4"}),"Add Agent"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx(we,{className:"p-4",delay:0,children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-orange-100 dark:bg-orange-900/30 rounded-lg",children:e.jsx(No,{className:"w-5 h-5 text-orange-600 dark:text-orange-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Total Agents"}),e.jsx("p",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:t.length})]})]})}),e.jsx(we,{className:"p-4",delay:.1,children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-green-100 dark:bg-green-900/30 rounded-lg",children:e.jsx(be,{className:"w-5 h-5 text-green-600 dark:text-green-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Online"}),e.jsx("p",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:t.filter(p=>p.status==="online").length})]})]})}),e.jsx(we,{className:"p-4",delay:.2,children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-900/30 rounded-lg",children:e.jsx(rw,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Tickets Resolved"}),e.jsx("p",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:t.reduce((p,x)=>p+(x.tickets_resolved||0),0)})]})]})}),e.jsx(we,{className:"p-4",delay:.3,children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-yellow-100 dark:bg-yellow-900/30 rounded-lg",children:e.jsx(sw,{className:"w-5 h-5 text-yellow-600 dark:text-yellow-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Avg Rating"}),e.jsx("p",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:t.length>0?(t.reduce((p,x)=>p+(x.avg_rating||0),0)/t.length).toFixed(1):"0.0"})]})]})})]}),e.jsx(we,{className:"p-4",delay:.4,children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(ts,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search agents by name or email...",value:n,onChange:p=>i(p.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]}),e.jsxs("select",{value:l,onChange:p=>o(p.target.value),className:"px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"inactive",children:"Inactive"}),e.jsx("option",{value:"online",children:"Online"})]}),e.jsxs("button",{className:"px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 flex items-center gap-2 text-gray-700 dark:text-gray-300",children:[e.jsx(ws,{className:"w-4 h-4"}),"Export"]})]})}),e.jsxs(we,{className:"overflow-hidden",delay:.5,children:[r?e.jsxs("div",{className:"p-8 text-center",children:[e.jsx("div",{className:"w-8 h-8 border-4 border-primary-600 border-t-transparent rounded-full animate-spin mx-auto"}),e.jsx("p",{className:"mt-2 text-gray-500 dark:text-gray-400",children:"Loading agents..."})]}):e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700/50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Agent"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Contact"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Performance"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Joined"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:d.map(p=>{var x;return e.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700/50",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-orange-100 dark:bg-orange-900/30 rounded-full flex items-center justify-center",children:e.jsx(No,{className:"w-5 h-5 text-orange-600 dark:text-orange-400"})}),e.jsxs("div",{children:[e.jsxs("p",{className:"font-medium text-gray-900 dark:text-white",children:[p.first_name," ",p.last_name]}),e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:["ID: ",p.id.slice(0,8),"..."]})]})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"space-y-1",children:[e.jsxs("p",{className:"text-sm flex items-center gap-1 text-gray-700 dark:text-gray-300",children:[e.jsx(Va,{className:"w-3 h-3 text-gray-400"}),p.email]}),p.phone&&e.jsxs("p",{className:"text-sm flex items-center gap-1 text-gray-700 dark:text-gray-300",children:[e.jsx(lr,{className:"w-3 h-3 text-gray-400"}),p.phone]})]})}),e.jsx("td",{className:"px-6 py-4",children:u(p.online_status,p.status)}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"space-y-1",children:[e.jsxs("p",{className:"text-sm flex items-center gap-1 text-gray-700 dark:text-gray-300",children:[e.jsx(rw,{className:"w-3 h-3 text-gray-400"}),p.tickets_resolved||0," resolved"]}),e.jsxs("p",{className:"text-sm flex items-center gap-1 text-gray-700 dark:text-gray-300",children:[e.jsx(sw,{className:"w-3 h-3 text-yellow-500"}),((x=p.avg_rating)==null?void 0:x.toFixed(1))||"0.0"," rating"]})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:new Date(p.created_at).toLocaleDateString()})}),e.jsx("td",{className:"px-6 py-4 text-right",children:e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[e.jsx("button",{className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg",title:"View",children:e.jsx(es,{className:"w-4 h-4 text-gray-500 dark:text-gray-400"})}),e.jsx("button",{className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg",title:"Edit",children:e.jsx(Nl,{className:"w-4 h-4 text-gray-500 dark:text-gray-400"})}),e.jsx("button",{className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg",title:"Chat",children:e.jsx(Ao,{className:"w-4 h-4 text-gray-500 dark:text-gray-400"})}),e.jsx("button",{onClick:()=>m(p.id,p.status==="ACTIVE"),className:`p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg ${p.status==="ACTIVE"?"text-red-500":"text-green-500"}`,title:p.status==="ACTIVE"?"Deactivate":"Activate",children:p.status==="ACTIVE"?e.jsx(hl,{className:"w-4 h-4"}):e.jsx(be,{className:"w-4 h-4"})})]})})]},p.id)})})]}),!r&&d.length===0&&e.jsxs("div",{className:"p-8 text-center",children:[e.jsx(No,{className:"w-12 h-12 text-gray-300 dark:text-gray-600 mx-auto mb-3"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"No agents found"})]})]})]})})}function Wce(){const[t,s]=h.useState("p2p"),[r,a]=h.useState(!1),[n,i]=h.useState(!1),[l,o]=h.useState(!0),[c,d]=h.useState(null);h.useEffect(()=>{Ut.getDefaultCurrency().then(d)},[]);const u=(c==null?void 0:c.symbol)||"",m=A=>`${u}${A.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}`,[p,x]=h.useState([{id:"p2p-standard",name:"Standard User P2P Fee",description:"Fee for regular user transfers",type:"percentage",value:1,minFee:.1,maxFee:10,category:"p2p",userType:"standard",isActive:!0},{id:"p2p-agent",name:"Agent P2P Fee",description:"Fee for agent transfers",type:"percentage",value:.5,minFee:.1,maxFee:5,category:"p2p",userType:"agent",isActive:!0},{id:"p2p-agent-plus",name:"Agent+ P2P Fee",description:"Fee for Agent+ transfers (unlimited volume)",type:"percentage",value:.2,minFee:.05,maxFee:5,category:"p2p",userType:"agent_plus",isActive:!0},{id:"p2p-merchant",name:"Merchant P2P Fee",description:"Fee for merchant transfers",type:"percentage",value:.5,minFee:.1,maxFee:25,category:"p2p",userType:"merchant",isActive:!0},{id:"transfer-internal",name:"Internal Transfer Fee",description:"Fee for transfers between users",type:"percentage",value:.5,minFee:0,maxFee:100,category:"transfer",userType:"all_users",isActive:!0},{id:"transfer-external",name:"External Transfer Fee",description:"Fee for transfers to external banks",type:"fixed",value:2.5,category:"transfer",userType:"all_users",isActive:!0},{id:"transfer-intl",name:"International Transfer Fee",description:"Fee for international transfers",type:"percentage",value:2.5,minFee:5,maxFee:500,category:"transfer",userType:"all_users",isActive:!0},{id:"card-virtual",name:"Virtual Card Creation",description:"One-time fee for virtual card",type:"fixed",value:1,category:"card",userType:"all_users",isActive:!0},{id:"card-physical",name:"Physical Card Creation",description:"One-time fee for physical card",type:"fixed",value:10,category:"card",userType:"all_users",isActive:!0},{id:"card-txn",name:"Card Transaction Fee",description:"Per transaction fee",type:"percentage",value:1.5,minFee:.1,maxFee:50,category:"card",userType:"all_users",isActive:!0},{id:"card-monthly",name:"Card Monthly Maintenance",description:"Monthly card maintenance fee",type:"fixed",value:1,category:"card",userType:"all_users",isActive:!0},{id:"merchant-processing",name:"Payment Processing Fee",description:"Fee for processing payments",type:"percentage",value:2.9,minFee:.3,category:"merchant",userType:"merchant",isActive:!0},{id:"merchant-payout",name:"Payout Fee",description:"Fee for merchant payouts",type:"percentage",value:.25,minFee:.25,maxFee:25,category:"merchant",userType:"merchant",isActive:!0},{id:"merchant-chargeback",name:"Chargeback Fee",description:"Fee per chargeback",type:"fixed",value:15,category:"merchant",userType:"merchant",isActive:!0}]),[g,f]=h.useState([{id:"limit-standard",userType:"standard",dailyLimit:5e3,monthlyLimit:25e3,perTransactionLimit:2500,minAmount:1},{id:"limit-agent",userType:"agent",dailyLimit:5e4,monthlyLimit:25e4,perTransactionLimit:25e3,minAmount:.5},{id:"limit-agent-plus",userType:"agent_plus",dailyLimit:1e6,monthlyLimit:1e7,perTransactionLimit:5e5,minAmount:.01},{id:"limit-merchant",userType:"merchant",dailyLimit:1e5,monthlyLimit:1e6,perTransactionLimit:5e4,minAmount:.01}]);h.useEffect(()=>{b()},[]);const b=async()=>{o(!0);try{o(!1)}catch(A){console.error("Error fetching fees:",A),o(!1)}},j=p.filter(A=>A.category===t),v=async()=>{try{i(!0),a(!1),setTimeout(()=>i(!1),3e3)}catch(A){console.error("Error saving fees:",A)}},w=(A,R,I)=>{x(p.map(N=>N.id===A?{...N,[R]:I}:N))},y=(A,R,I)=>{f(g.map(N=>N.id===A?{...N,[R]:I}:N))},C=A=>{x(p.map(R=>R.id===A?{...R,isActive:!R.isActive}:R))},S=A=>{switch(A){case"standard":return e.jsx(Es,{className:"w-4 h-4"});case"agent":return e.jsx(ia,{className:"w-4 h-4"});case"agent_plus":return e.jsx(ui,{className:"w-4 h-4"});case"merchant":return e.jsx(ua,{className:"w-4 h-4"});default:return e.jsx(ia,{className:"w-4 h-4"})}},_=A=>{switch(A){case"standard":return"Standard User";case"agent":return"Agent";case"agent_plus":return"Agent+";case"merchant":return"Merchant";case"all_users":return"All Users";default:return A}},E=A=>{switch(A){case"standard":return"bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-400";case"agent":return"bg-purple-100 dark:bg-purple-900/30 text-purple-700 dark:text-purple-400";case"agent_plus":return"bg-orange-100 dark:bg-orange-900/30 text-orange-700 dark:text-orange-400";case"merchant":return"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400";case"all_users":return"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300";default:return"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300"}};return e.jsx(Kt,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Fees & Pricing"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Configure transaction fees, limits, and pricing for all user types"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[n&&e.jsxs("span",{className:"flex items-center gap-2 text-green-600 dark:text-green-400 text-sm",children:[e.jsx(be,{className:"w-4 h-4"}),"Changes saved"]}),e.jsxs("button",{onClick:b,className:"px-4 py-2 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 flex items-center gap-2 text-gray-700 dark:text-gray-300",children:[e.jsx(vt,{className:`w-4 h-4 ${l?"animate-spin":""}`}),"Refresh"]}),e.jsxs("button",{onClick:()=>a(!r),className:`px-4 py-2 rounded-lg flex items-center gap-2 ${r?"bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300":"bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700"}`,children:[e.jsx(Nl,{className:"w-4 h-4"}),r?"Cancel":"Edit Fees"]}),r&&e.jsxs("button",{onClick:v,className:"px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 flex items-center gap-2",children:[e.jsx(oa,{className:"w-4 h-4"}),"Save Changes"]})]})]}),e.jsx(W,{className:"p-4 bg-blue-50 dark:bg-blue-900/20 border-blue-200 dark:border-blue-800",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(ut,{className:"w-5 h-5 text-blue-600 dark:text-blue-400 flex-shrink-0 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-blue-800 dark:text-blue-300",children:"Fee Configuration"}),e.jsx("p",{className:"text-sm text-blue-700 dark:text-blue-400 mt-1",children:"Fees are applied based on user type. Agent+ users get the lowest fees with unlimited transaction limits. Changes affect all new transactions immediately."})]})]})}),e.jsx(W,{className:"p-1",children:e.jsx("div",{className:"flex gap-1",children:[{id:"p2p",label:"P2P Fees",icon:ci},{id:"transfer",label:"Transfer Fees",icon:ci},{id:"card",label:"Card Fees",icon:Je},{id:"merchant",label:"Merchant Fees",icon:js},{id:"limits",label:"Transfer Limits",icon:ia}].map(A=>e.jsxs("button",{onClick:()=>s(A.id),className:`flex-1 px-4 py-3 text-sm font-medium rounded-lg transition-colors flex items-center justify-center gap-2 ${t===A.id?"bg-primary-600 text-white":"text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700"}`,children:[e.jsx(A.icon,{className:"w-4 h-4"}),A.label]},A.id))})}),t==="limits"?e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Transfer Limits by User Type"}),g.map(A=>e.jsxs(W,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:`p-2 rounded-lg ${E(A.userType)}`,children:S(A.userType)}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white",children:_(A.userType)}),e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Transaction limits for ",A.userType," users"]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-500 dark:text-gray-400 mb-1",children:"Daily Limit"}),r?e.jsx("input",{type:"number",value:A.dailyLimit,onChange:R=>y(A.id,"dailyLimit",parseFloat(R.target.value)),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white"}):e.jsxs("p",{className:"text-xl font-bold text-gray-900 dark:text-white",children:[u,A.dailyLimit.toLocaleString()]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-500 dark:text-gray-400 mb-1",children:"Monthly Limit"}),r?e.jsx("input",{type:"number",value:A.monthlyLimit,onChange:R=>y(A.id,"monthlyLimit",parseFloat(R.target.value)),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white"}):e.jsxs("p",{className:"text-xl font-bold text-gray-900 dark:text-white",children:[u,A.monthlyLimit.toLocaleString()]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-500 dark:text-gray-400 mb-1",children:"Per Transaction"}),r?e.jsx("input",{type:"number",value:A.perTransactionLimit,onChange:R=>y(A.id,"perTransactionLimit",parseFloat(R.target.value)),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white"}):e.jsxs("p",{className:"text-xl font-bold text-gray-900 dark:text-white",children:[u,A.perTransactionLimit.toLocaleString()]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-500 dark:text-gray-400 mb-1",children:"Minimum Amount"}),r?e.jsx("input",{type:"number",step:"0.01",value:A.minAmount,onChange:R=>y(A.id,"minAmount",parseFloat(R.target.value)),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white"}):e.jsx("p",{className:"text-xl font-bold text-gray-900 dark:text-white",children:m(A.minAmount)})]})]})]},A.id))]}):e.jsx("div",{className:"space-y-4",children:j.map(A=>e.jsx(W,{className:`p-6 ${A.isActive?"":"opacity-60"}`,children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:`p-3 rounded-lg ${A.isActive?"bg-primary-100 dark:bg-primary-900/30":"bg-gray-100 dark:bg-gray-700"}`,children:A.type==="percentage"?e.jsx(Pu,{className:`w-5 h-5 ${A.isActive?"text-primary-600 dark:text-primary-400":"text-gray-400"}`}):e.jsx(js,{className:`w-5 h-5 ${A.isActive?"text-primary-600 dark:text-primary-400":"text-gray-400"}`})}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:A.name}),e.jsxs("span",{className:`px-2 py-0.5 text-xs rounded-full flex items-center gap-1 ${E(A.userType)}`,children:[S(A.userType),_(A.userType)]})]}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:A.description}),(A.minFee!==void 0||A.maxFee!==void 0)&&e.jsxs("p",{className:"text-xs text-gray-400 dark:text-gray-500 mt-2",children:[A.minFee!==void 0&&`Min Fee: ${m(A.minFee)}`,A.minFee!==void 0&&A.maxFee!==void 0&&" | ",A.maxFee!==void 0&&`Max Fee: ${m(A.maxFee)}`]})]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[r?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"number",step:"0.01",value:A.value,onChange:R=>w(A.id,"value",parseFloat(R.target.value)),className:"w-24 px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg text-right focus:ring-2 focus:ring-primary-500 focus:border-primary-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white"}),e.jsx("span",{className:"text-gray-500 dark:text-gray-400 text-sm",children:A.type==="percentage"?"%":"USD"})]}):e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:A.type==="percentage"?`${A.value}%`:m(A.value)}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 capitalize",children:A.type})]}),e.jsx("button",{onClick:()=>C(A.id),className:`p-2 rounded-lg transition-colors ${A.isActive?"bg-green-100 dark:bg-green-900/30 text-green-600 dark:text-green-400 hover:bg-green-200 dark:hover:bg-green-900/50":"bg-gray-100 dark:bg-gray-700 text-gray-400 hover:bg-gray-200 dark:hover:bg-gray-600"}`,title:A.isActive?"Disable":"Enable",children:A.isActive?e.jsx(be,{className:"w-5 h-5"}):e.jsx(vt,{className:"w-5 h-5"})})]})]})},A.id))}),r&&t!=="limits"&&e.jsxs("button",{className:"w-full p-4 border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg text-gray-500 dark:text-gray-400 hover:border-primary-500 hover:text-primary-600 dark:hover:text-primary-400 transition-colors flex items-center justify-center gap-2",children:[e.jsx(It,{className:"w-5 h-5"}),"Add New Fee"]}),e.jsxs(W,{className:"p-6 bg-gray-50 dark:bg-gray-700/50",children:[e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white mb-4",children:"Fee Summary by User Type"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"p-4 bg-white dark:bg-gray-800 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Es,{className:"w-4 h-4 text-blue-600 dark:text-blue-400"}),e.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:"Standard"})]}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"1.0%"}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"P2P Transfer Fee"})]}),e.jsxs("div",{className:"p-4 bg-white dark:bg-gray-800 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(ia,{className:"w-4 h-4 text-purple-600 dark:text-purple-400"}),e.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:"Agent"})]}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"0.5%"}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"P2P Transfer Fee"})]}),e.jsxs("div",{className:"p-4 bg-white dark:bg-gray-800 rounded-lg border-2 border-orange-200 dark:border-orange-800",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(ui,{className:"w-4 h-4 text-orange-600 dark:text-orange-400"}),e.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:"Agent+"})]}),e.jsx("p",{className:"text-2xl font-bold text-orange-600 dark:text-orange-400",children:"0.2%"}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"P2P Transfer Fee"})]}),e.jsxs("div",{className:"p-4 bg-white dark:bg-gray-800 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(ua,{className:"w-4 h-4 text-green-600 dark:text-green-400"}),e.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:"Merchant"})]}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"0.5%"}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"P2P Transfer Fee"})]})]})]})]})})}const zce=[{code:"SLE",name:"Sierra Leone Leone",symbol:"Le",isDefault:!0,isActive:!0},{code:"USD",name:"US Dollar",symbol:"$",isDefault:!1,isActive:!0},{code:"EUR",name:"Euro",symbol:"",isDefault:!1,isActive:!1},{code:"GBP",name:"British Pound",symbol:"",isDefault:!1,isActive:!1},{code:"NGN",name:"Nigerian Naira",symbol:"",isDefault:!1,isActive:!1},{code:"XOF",name:"West African CFA Franc",symbol:"CFA",isDefault:!1,isActive:!1},{code:"GHS",name:"Ghanaian Cedi",symbol:"GH",isDefault:!1,isActive:!1}],NE=[{value:"P2P_TRANSFER",label:"P2P Transfer"},{value:"BANK_TRANSFER",label:"Bank Transfer"},{value:"CARD_PAYMENT",label:"Card Payment"},{value:"MERCHANT_PAYMENT",label:"Merchant Payment"},{value:"WITHDRAWAL",label:"Withdrawal"},{value:"DEPOSIT",label:"Deposit"},{value:"INTERNATIONAL",label:"International Transfer"}];function Gce(){const[t,s]=h.useState(zce),[r,a]=h.useState([]),[n,i]=h.useState(!0),[l,o]=h.useState(!1),[c,d]=h.useState(null),[u,m]=h.useState(null),[p,x]=h.useState(!1),[g,f]=h.useState(!1),[b,j]=h.useState(null),[v,w]=h.useState({transactionType:"P2P_TRANSFER",percentage:1,minimumFee:1,maximumFee:null,flatFee:0,currency:"SLE",isActive:!0}),[y,C]=h.useState({code:"",name:"",symbol:"",isDefault:!1,isActive:!0});h.useEffect(()=>{S()},[]);const S=async()=>{i(!0);try{const{data:T,error:O}=await U.from("fee_settings").select("*").order("transaction_type");T&&T.length>0?a(T.map(le=>({id:le.id,transactionType:le.transaction_type,percentage:le.percentage,minimumFee:le.minimum_fee,maximumFee:le.maximum_fee,flatFee:le.flat_fee,currency:le.currency,isActive:le.is_active}))):a([]);const{data:q,error:K}=await U.from("currencies").select("*");q&&q.length>0&&s(q.map(le=>({code:le.code,name:le.name,symbol:le.symbol,isDefault:le.is_default,isActive:le.is_active})))}catch(T){console.error("Failed to fetch settings:",T),a([])}finally{i(!1)}},_=async()=>{o(!0),m(null);try{const T={transaction_type:v.transactionType,percentage:v.percentage,minimum_fee:v.minimumFee,maximum_fee:v.maximumFee,flat_fee:v.flatFee,currency:v.currency,is_active:v.isActive};if(b){const{error:O}=await U.from("fee_settings").update(T).eq("id",b.id);if(O)throw O;a(q=>q.map(K=>K.id===b.id?{...K,...v}:K))}else{const{data:O,error:q}=await U.from("fee_settings").insert(T).select().single();if(q){const K={id:`local_${Date.now()}`,transactionType:v.transactionType||"TRANSFER",percentage:v.percentage||0,minimumFee:v.minimumFee||0,maximumFee:v.maximumFee??null,flatFee:v.flatFee||0,currency:v.currency||"USD",isActive:v.isActive??!0};a(le=>[...le,K])}else O&&a(K=>[...K,{id:O.id,transactionType:O.transaction_type,percentage:O.percentage,minimumFee:O.minimum_fee,maximumFee:O.maximum_fee,flatFee:O.flat_fee,currency:O.currency,isActive:O.is_active}])}d("Fee configuration saved successfully"),x(!1),j(null),I(),setTimeout(()=>d(null),3e3)}catch(T){m(T.message||"Failed to save fee configuration")}finally{o(!1)}},E=async T=>{if(confirm("Are you sure you want to delete this fee configuration?"))try{await U.from("fee_settings").delete().eq("id",T),a(O=>O.filter(q=>q.id!==T)),d("Fee configuration deleted"),setTimeout(()=>d(null),3e3)}catch(O){console.error("Delete error:",O)}},A=async T=>{var O;s(q=>q.map(K=>K.code===T?{...K,isActive:!K.isActive}:K));try{await U.from("currencies").update({is_active:!((O=t.find(q=>q.code===T))!=null&&O.isActive)}).eq("code",T)}catch{}},R=async T=>{s(O=>O.map(q=>({...q,isDefault:q.code===T})));try{await U.from("currencies").update({is_default:!1}).neq("code",T),await U.from("currencies").update({is_default:!0}).eq("code",T)}catch{}d(`${T} set as default currency`),setTimeout(()=>d(null),3e3)},I=()=>{w({transactionType:"P2P_TRANSFER",percentage:1,minimumFee:1,maximumFee:null,flatFee:0,currency:"SLE",isActive:!0})},N=()=>{C({code:"",name:"",symbol:"",isDefault:!1,isActive:!0})},P=async()=>{if(!y.code||!y.name||!y.symbol){m("Please fill in all currency fields");return}if(t.some(T=>{var O;return T.code===((O=y.code)==null?void 0:O.toUpperCase())})){m("Currency with this code already exists");return}o(!0),m(null);try{const T={code:y.code.toUpperCase(),name:y.name,symbol:y.symbol,isDefault:y.isDefault||!1,isActive:y.isActive??!0};try{await U.from("currencies").insert({code:T.code,name:T.name,symbol:T.symbol,is_default:T.isDefault,is_active:T.isActive})}catch{}T.isDefault&&s(O=>O.map(q=>({...q,isDefault:!1}))),s(O=>[...O,T]),d(`Currency ${T.code} added successfully`),f(!1),N(),setTimeout(()=>d(null),3e3)}catch(T){m(T.message||"Failed to add currency")}finally{o(!1)}},k=async T=>{const O=t.find(q=>q.code===T);if(O!=null&&O.isDefault){m("Cannot delete the default currency"),setTimeout(()=>m(null),3e3);return}if(confirm(`Are you sure you want to delete ${T}?`)){try{await U.from("currencies").delete().eq("code",T)}catch{}s(q=>q.filter(K=>K.code!==T)),d(`Currency ${T} deleted`),setTimeout(()=>d(null),3e3)}},D=T=>{j(T),w({transactionType:T.transactionType,percentage:T.percentage,minimumFee:T.minimumFee,maximumFee:T.maximumFee,flatFee:T.flatFee,currency:T.currency,isActive:T.isActive}),x(!0)},$=T=>{var O;return((O=NE.find(q=>q.value===T))==null?void 0:O.label)||T},L=T=>{var O;return((O=t.find(q=>q.code===T))==null?void 0:O.symbol)||T},B=(T,O)=>`${L(O)}${T.toFixed(2)}`;return n?e.jsx(Kt,{children:e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx(Ie,{className:"w-8 h-8 text-primary-600 dark:text-primary-400 animate-spin"})})}):e.jsx(Kt,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Fee Settings"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Manage transaction fees and currencies"})]}),e.jsxs("button",{onClick:S,className:"px-4 py-2 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 flex items-center gap-2",children:[e.jsx(vt,{className:"w-4 h-4"}),"Refresh"]})]}),c&&e.jsxs("div",{className:"p-4 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg flex items-center gap-2 text-green-700 dark:text-green-400",children:[e.jsx(be,{className:"w-5 h-5"}),c]}),u&&e.jsxs("div",{className:"p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg flex items-center gap-2 text-red-700 dark:text-red-400",children:[e.jsx(ft,{className:"w-5 h-5"}),u]}),e.jsxs(W,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-900/30 rounded-lg",children:e.jsx(li,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Supported Currencies"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Enable currencies for transactions"})]})]}),e.jsxs("button",{onClick:()=>{N(),f(!0)},className:"px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 flex items-center gap-2",children:[e.jsx(It,{className:"w-4 h-4"}),"Add Currency"]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:t.map(T=>e.jsxs("div",{className:`p-4 rounded-lg border-2 ${T.isActive?"border-green-200 dark:border-green-800 bg-green-50 dark:bg-green-900/20":"border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-700/50"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-2xl",children:T.symbol}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:T.code}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:T.name})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[T.isDefault&&e.jsx("span",{className:"px-2 py-1 bg-primary-100 dark:bg-primary-900/30 text-primary-700 dark:text-primary-400 text-xs font-medium rounded-full",children:"Default"}),!T.isDefault&&e.jsx("button",{onClick:()=>k(T.code),className:"p-1 hover:bg-red-100 dark:hover:bg-red-900/30 rounded",title:"Delete currency",children:e.jsx(Or,{className:"w-4 h-4 text-red-500 dark:text-red-400"})})]})]}),e.jsxs("div",{className:"flex gap-2 mt-3",children:[e.jsx("button",{onClick:()=>A(T.code),className:`flex-1 px-3 py-2 rounded-lg text-sm font-medium ${T.isActive?"bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-400 hover:bg-red-200 dark:hover:bg-red-900/50":"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400 hover:bg-green-200 dark:hover:bg-green-900/50"}`,children:T.isActive?"Disable":"Enable"}),T.isActive&&!T.isDefault&&e.jsx("button",{onClick:()=>R(T.code),className:"flex-1 px-3 py-2 bg-primary-100 dark:bg-primary-900/30 text-primary-700 dark:text-primary-400 rounded-lg text-sm font-medium hover:bg-primary-200 dark:hover:bg-primary-900/50",children:"Set Default"})]})]},T.code))})]}),e.jsxs(W,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-green-100 dark:bg-green-900/30 rounded-lg",children:e.jsx(Pu,{className:"w-5 h-5 text-green-600 dark:text-green-400"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Transaction Fees"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Configure fees for different transaction types"})]})]}),e.jsxs("button",{onClick:()=>{j(null),I(),x(!0)},className:"px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 flex items-center gap-2",children:[e.jsx(It,{className:"w-4 h-4"}),"Add Fee"]})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700/50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Transaction Type"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Percentage"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Flat Fee"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Min/Max"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Currency"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Status"}),e.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:r.map(T=>e.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700/50",children:[e.jsx("td",{className:"px-4 py-4",children:e.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:$(T.transactionType)})}),e.jsx("td",{className:"px-4 py-4",children:e.jsxs("span",{className:"text-gray-700 dark:text-gray-300",children:[T.percentage,"%"]})}),e.jsx("td",{className:"px-4 py-4",children:e.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:T.flatFee>0?B(T.flatFee,T.currency):"-"})}),e.jsx("td",{className:"px-4 py-4",children:e.jsxs("span",{className:"text-gray-700 dark:text-gray-300",children:[B(T.minimumFee,T.currency)," - ",T.maximumFee?B(T.maximumFee,T.currency):"No max"]})}),e.jsx("td",{className:"px-4 py-4",children:e.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:T.currency})}),e.jsx("td",{className:"px-4 py-4",children:e.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${T.isActive?"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400":"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300"}`,children:T.isActive?"Active":"Inactive"})}),e.jsx("td",{className:"px-4 py-4 text-right",children:e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[e.jsx("button",{onClick:()=>D(T),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg",title:"Edit",children:e.jsx(Nl,{className:"w-4 h-4 text-gray-500 dark:text-gray-400"})}),e.jsx("button",{onClick:()=>E(T.id),className:"p-2 hover:bg-red-100 dark:hover:bg-red-900/30 rounded-lg",title:"Delete",children:e.jsx(Or,{className:"w-4 h-4 text-red-500 dark:text-red-400"})})]})})]},T.id))})]})}),r.length===0&&e.jsxs("div",{className:"text-center py-8",children:[e.jsx(or,{className:"w-12 h-12 text-gray-300 dark:text-gray-600 mx-auto mb-3"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"No fee configurations found"}),e.jsx("button",{onClick:()=>x(!0),className:"mt-4 px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700",children:"Add Fee Configuration"})]})]}),e.jsx(W,{className:"p-6 bg-blue-50 dark:bg-blue-900/20 border-blue-200 dark:border-blue-800",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(ut,{className:"w-5 h-5 text-blue-600 dark:text-blue-400 mt-0.5"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-blue-900 dark:text-blue-300",children:"Fee Calculation Formula"}),e.jsx("p",{className:"text-sm text-blue-700 dark:text-blue-400 mt-1",children:e.jsx("code",{className:"bg-blue-100 dark:bg-blue-800/50 px-2 py-1 rounded",children:"fee = max(min(amount  percentage/100, maximumFee), minimumFee) + flatFee"})}),(()=>{const T=t.find(q=>q.isDefault),O=(T==null?void 0:T.symbol)||"Le";return e.jsxs("p",{className:"text-sm text-blue-600 dark:text-blue-400 mt-2",children:["Example: For a ",O,"100 transfer with 1% fee, ",O,"0.10 minimum, and ",O,"50 maximum:",e.jsx("br",{}),"fee = max(min(",O,"100  0.01, ",O,"50), ",O,"0.10) = max(min(",O,"1.00, ",O,"50), ",O,"0.10) = ",O,"1.00"]})})()]})]})}),p&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-xl w-full max-w-md mx-4",children:[e.jsx("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:e.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:b?"Edit Fee Configuration":"Add Fee Configuration"})}),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Transaction Type"}),e.jsx("select",{value:v.transactionType,onChange:T=>w({...v,transactionType:T.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white rounded-lg focus:ring-2 focus:ring-primary-500",children:NE.map(T=>e.jsx("option",{value:T.value,children:T.label},T.value))})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Percentage (%)"}),e.jsx("input",{type:"number",step:"0.01",min:"0",value:v.percentage,onChange:T=>w({...v,percentage:parseFloat(T.target.value)||0}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white rounded-lg focus:ring-2 focus:ring-primary-500"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:["Flat Fee (",L(v.currency||"SLE"),")"]}),e.jsx("input",{type:"number",step:"0.01",min:"0",value:v.flatFee,onChange:T=>w({...v,flatFee:parseFloat(T.target.value)||0}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white rounded-lg focus:ring-2 focus:ring-primary-500"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:["Minimum Fee (",L(v.currency||"SLE"),")"]}),e.jsx("input",{type:"number",step:"0.01",min:"0",value:v.minimumFee,onChange:T=>w({...v,minimumFee:parseFloat(T.target.value)||0}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white rounded-lg focus:ring-2 focus:ring-primary-500"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:["Maximum Fee (",L(v.currency||"SLE"),")"]}),e.jsx("input",{type:"number",step:"0.01",min:"0",value:v.maximumFee||"",onChange:T=>w({...v,maximumFee:T.target.value?parseFloat(T.target.value):null}),placeholder:"No limit",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-400 dark:placeholder-gray-500 rounded-lg focus:ring-2 focus:ring-primary-500"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Currency"}),e.jsx("select",{value:v.currency,onChange:T=>w({...v,currency:T.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white rounded-lg focus:ring-2 focus:ring-primary-500",children:t.filter(T=>T.isActive).map(T=>e.jsxs("option",{value:T.code,children:[T.code," - ",T.name]},T.code))})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",id:"isActive",checked:v.isActive,onChange:T=>w({...v,isActive:T.target.checked}),className:"w-4 h-4 text-primary-600 border-gray-300 dark:border-gray-600 rounded focus:ring-primary-500"}),e.jsx("label",{htmlFor:"isActive",className:"text-sm text-gray-700 dark:text-gray-300",children:"Active"})]})]}),e.jsxs("div",{className:"p-6 border-t border-gray-200 dark:border-gray-700 flex gap-3",children:[e.jsx("button",{onClick:()=>{x(!1),j(null),I()},className:"flex-1 px-4 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700",children:"Cancel"}),e.jsx("button",{onClick:_,disabled:l,className:"flex-1 px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 disabled:opacity-50 flex items-center justify-center gap-2",children:l?e.jsxs(e.Fragment,{children:[e.jsx(Ie,{className:"w-4 h-4 animate-spin"}),"Saving..."]}):e.jsxs(e.Fragment,{children:[e.jsx(oa,{className:"w-4 h-4"}),"Save"]})})]})]})}),g&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-xl w-full max-w-md mx-4",children:[e.jsx("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:e.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"Add New Currency"})}),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Currency Code (e.g., SLE, USD)"}),e.jsx("input",{type:"text",maxLength:3,value:y.code,onChange:T=>C({...y,code:T.target.value.toUpperCase()}),placeholder:"SLE",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-400 dark:placeholder-gray-500 rounded-lg focus:ring-2 focus:ring-primary-500 uppercase"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Currency Name"}),e.jsx("input",{type:"text",value:y.name,onChange:T=>C({...y,name:T.target.value}),placeholder:"Sierra Leone Leone",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-400 dark:placeholder-gray-500 rounded-lg focus:ring-2 focus:ring-primary-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Symbol"}),e.jsx("input",{type:"text",maxLength:5,value:y.symbol,onChange:T=>C({...y,symbol:T.target.value}),placeholder:"Le",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-400 dark:placeholder-gray-500 rounded-lg focus:ring-2 focus:ring-primary-500"})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",id:"currencyActive",checked:y.isActive,onChange:T=>C({...y,isActive:T.target.checked}),className:"w-4 h-4 text-primary-600 border-gray-300 dark:border-gray-600 rounded focus:ring-primary-500"}),e.jsx("label",{htmlFor:"currencyActive",className:"text-sm text-gray-700 dark:text-gray-300",children:"Active"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",id:"currencyDefault",checked:y.isDefault,onChange:T=>C({...y,isDefault:T.target.checked}),className:"w-4 h-4 text-primary-600 border-gray-300 dark:border-gray-600 rounded focus:ring-primary-500"}),e.jsx("label",{htmlFor:"currencyDefault",className:"text-sm text-gray-700 dark:text-gray-300",children:"Set as Default"})]})]})]}),e.jsxs("div",{className:"p-6 border-t border-gray-200 dark:border-gray-700 flex gap-3",children:[e.jsx("button",{onClick:()=>{f(!1),N()},className:"flex-1 px-4 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700",children:"Cancel"}),e.jsx("button",{onClick:P,disabled:l||!y.code||!y.name||!y.symbol,className:"flex-1 px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 disabled:opacity-50 flex items-center justify-center gap-2",children:l?e.jsxs(e.Fragment,{children:[e.jsx(Ie,{className:"w-4 h-4 animate-spin"}),"Saving..."]}):e.jsxs(e.Fragment,{children:[e.jsx(oa,{className:"w-4 h-4"}),"Add Currency"]})})]})]})})]})})}const Kce="https://akiecgwcxadcpqlvntmf.supabase.co",Hce="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImFraWVjZ3djeGFkY3BxbHZudG1mIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjQyODMzMzIsImV4cCI6MjA3OTg1OTMzMn0.L2ePGMJRjBqHS-M1d9mxys7I9bZv93YYr9dzQzCQINE",lx=ST(Kce,Hce),ox="00000000-0000-0000-0000-000000000001",Yce={accessToken:"",spaceId:"",webhookSecret:"",sourceAccountId:"",payoutAccountId:"",isEnabled:!1,backendUrl:"",frontendUrl:""},Qce={mobileMoneyEnabled:!0,bankTransferEnabled:!0,minWithdrawalAmount:1e3,maxWithdrawalAmount:5e7,dailyWithdrawalLimit:1e8,withdrawalFeePercent:1.5,withdrawalFeeFlat:100,requirePin:!0,autoApproveUnder:1e6},Jce={checkoutSessionEnabled:!0,paymentCodeEnabled:!0,mobileMoneyEnabled:!0,minDepositAmount:100,maxDepositAmount:1e8};function Zce(){const[t,s]=h.useState(Yce),[r,a]=h.useState(Qce),[n,i]=h.useState(Jce),[l,o]=h.useState(!0),[c,d]=h.useState(!1),[u,m]=h.useState(!1),[p,x]=h.useState(null),[g,f]=h.useState(null),[b,j]=h.useState(!1),[v,w]=h.useState("monime"),[y,C]=h.useState(1e3);h.useEffect(()=>{S()},[]);const S=async()=>{o(!0);try{const{data:N,error:P}=await lx.from("payment_settings").select("*").eq("id",ox).single();if(P){if(P.code==="PGRST116"){const{data:k,error:D}=await lx.from("payment_settings").insert({id:ox,monime_enabled:!1,withdrawal_mobile_money_enabled:!0,withdrawal_bank_transfer_enabled:!0,min_withdrawal_amount:1e3,max_withdrawal_amount:5e7,daily_withdrawal_limit:1e8,withdrawal_fee_percent:1.5,withdrawal_fee_flat:100,withdrawal_require_pin:!0,withdrawal_auto_approve_under:1e6,deposit_checkout_enabled:!0,deposit_payment_code_enabled:!0,deposit_mobile_money_enabled:!0,min_deposit_amount:100,max_deposit_amount:1e8}).select().single();if(D)throw new Error("Failed to initialize settings: "+D.message);k&&_(k);return}throw new Error(P.message)}N&&_(N)}catch(N){console.error("Failed to fetch settings:",N),f(N.message||"Failed to load settings from database.")}finally{o(!1)}},_=N=>{s({accessToken:N.monime_access_token||"",spaceId:N.monime_space_id||"",webhookSecret:N.monime_webhook_secret||"",sourceAccountId:N.monime_source_account_id||"",payoutAccountId:N.monime_payout_account_id||"",isEnabled:N.monime_enabled||!1,backendUrl:N.backend_url||"",frontendUrl:N.frontend_url||""}),a({mobileMoneyEnabled:N.withdrawal_mobile_money_enabled??!0,bankTransferEnabled:N.withdrawal_bank_transfer_enabled??!0,minWithdrawalAmount:Number(N.min_withdrawal_amount)||1e3,maxWithdrawalAmount:Number(N.max_withdrawal_amount)||5e7,dailyWithdrawalLimit:Number(N.daily_withdrawal_limit)||1e8,withdrawalFeePercent:Number(N.withdrawal_fee_percent)||1.5,withdrawalFeeFlat:Number(N.withdrawal_fee_flat)||100,requirePin:N.withdrawal_require_pin??!0,autoApproveUnder:Number(N.withdrawal_auto_approve_under)||1e6}),i({checkoutSessionEnabled:N.deposit_checkout_enabled??!0,paymentCodeEnabled:N.deposit_payment_code_enabled??!0,mobileMoneyEnabled:N.deposit_mobile_money_enabled??!0,minDepositAmount:Number(N.min_deposit_amount)||100,maxDepositAmount:Number(N.max_deposit_amount)||1e8})},E=async()=>{d(!0),f(null);try{const N={monime_access_token:t.accessToken,monime_space_id:t.spaceId,monime_webhook_secret:t.webhookSecret,monime_source_account_id:t.sourceAccountId,monime_payout_account_id:t.payoutAccountId,monime_enabled:t.isEnabled,backend_url:t.backendUrl,frontend_url:t.frontendUrl,withdrawal_mobile_money_enabled:r.mobileMoneyEnabled,withdrawal_bank_transfer_enabled:r.bankTransferEnabled,min_withdrawal_amount:r.minWithdrawalAmount,max_withdrawal_amount:r.maxWithdrawalAmount,daily_withdrawal_limit:r.dailyWithdrawalLimit,withdrawal_fee_percent:r.withdrawalFeePercent,withdrawal_fee_flat:r.withdrawalFeeFlat,withdrawal_require_pin:r.requirePin,withdrawal_auto_approve_under:r.autoApproveUnder,deposit_checkout_enabled:n.checkoutSessionEnabled,deposit_payment_code_enabled:n.paymentCodeEnabled,deposit_mobile_money_enabled:n.mobileMoneyEnabled,min_deposit_amount:n.minDepositAmount,max_deposit_amount:n.maxDepositAmount,updated_at:new Date().toISOString()},{error:P}=await lx.from("payment_settings").update(N).eq("id",ox);if(P)if(P.code==="PGRST116"){const{error:k}=await lx.from("payment_settings").insert({id:ox,...N});if(k)throw new Error(k.message)}else throw new Error(P.message);x("Payment settings saved successfully"),setTimeout(()=>x(null),3e3)}catch(N){f(N.message||"Failed to save settings")}finally{d(!1)}},A=async()=>{var N,P,k;m(!0),f(null);try{if(!t.accessToken)throw new Error("Access Token is required. Please enter your Monime API key.");if(!t.spaceId)throw new Error("Space ID is required. Please enter your Monime Space ID.");if(!t.frontendUrl)throw new Error("Frontend URL is required. Please enter your app URL (e.g., https://my.peeap.com).");if(y<=0)throw new Error("Test amount must be greater than 0.");const D=t.frontendUrl.replace(/\/$/,""),$=`${D}/api/deposit/success`,L=`${D}/api/deposit/cancel`;console.log("[Monime Test] Starting checkout session creation..."),console.log("[Monime Test] Config:",{spaceId:t.spaceId,tokenPrefix:t.accessToken.substring(0,10)+"...",amount:y,successUrl:$,cancelUrl:L});const B=await fetch("/api/test-monime",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({accessToken:t.accessToken,spaceId:t.spaceId,amount:y,currency:"SLE",successUrl:$,cancelUrl:L})});console.log("[Monime Test] Response status:",B.status,B.statusText);const T=await B.json();if(console.log("[Monime Test] Response data:",JSON.stringify(T,null,2)),!B.ok){const O=((N=T==null?void 0:T.error)==null?void 0:N.message)||(T==null?void 0:T.message)||(T==null?void 0:T.error)||`HTTP ${B.status}: ${B.statusText}`,q=((P=T==null?void 0:T.error)==null?void 0:P.details)||(T==null?void 0:T.details)||"",K=q?`${O} - ${JSON.stringify(q)}`:O;throw console.error("[Monime Test] API Error:",K),new Error(K)}if(!T.success){const O=((k=T==null?void 0:T.error)==null?void 0:k.message)||(T==null?void 0:T.message)||"Unknown error from Monime";throw console.error("[Monime Test] Success=false:",O),new Error(O)}if(T!=null&&T.url)console.log("[Monime Test] Success! Redirect URL:",T.url),window.open(T.url,"_blank"),x(`Checkout session created! Order: ${T.orderNumber||"N/A"}`),setTimeout(()=>x(null),5e3);else throw console.error("[Monime Test] No redirect URL in response"),new Error("No checkout URL returned from Monime. Response: "+JSON.stringify(T))}catch(D){console.error("[Monime Test] Error:",D);const $=D.message||"Unknown error";f(`Monime Error: ${$}`)}finally{m(!1)}},R=N=>N.toLocaleString("en-US",{minimumFractionDigits:0,maximumFractionDigits:0}),I=N=>{const P=parseFloat(N.replace(/,/g,""));return isNaN(P)?0:Math.round(P)};return l?e.jsx(Kt,{children:e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx(Ie,{className:"w-8 h-8 text-primary-600 dark:text-primary-400 animate-spin"})})}):e.jsx(Kt,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Payment Settings"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Configure payment gateway, withdrawals, and deposits"})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("button",{onClick:S,className:"px-4 py-2 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 flex items-center gap-2",children:[e.jsx(vt,{className:"w-4 h-4"}),"Refresh"]}),e.jsxs("button",{onClick:E,disabled:c,className:"px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 flex items-center gap-2 disabled:opacity-50",children:[c?e.jsx(Ie,{className:"w-4 h-4 animate-spin"}):e.jsx(oa,{className:"w-4 h-4"}),"Save All Settings"]})]})]}),p&&e.jsxs("div",{className:"p-4 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg flex items-center gap-2 text-green-700 dark:text-green-400",children:[e.jsx(be,{className:"w-5 h-5"}),p]}),g&&e.jsxs("div",{className:"p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg flex items-center gap-2 text-red-700 dark:text-red-400",children:[e.jsx(ft,{className:"w-5 h-5"}),g]}),e.jsx("div",{className:"border-b border-gray-200 dark:border-gray-700",children:e.jsx("nav",{className:"-mb-px flex gap-6",children:[{id:"monime",label:"Monime Gateway",icon:Je},{id:"withdrawal",label:"Withdrawal Settings",icon:BC},{id:"deposit",label:"Deposit Settings",icon:$C}].map(N=>e.jsxs("button",{onClick:()=>w(N.id),className:`flex items-center gap-2 py-4 px-1 border-b-2 font-medium text-sm transition-colors ${v===N.id?"border-primary-500 text-primary-600 dark:text-primary-400":"border-transparent text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300 hover:border-gray-300 dark:hover:border-gray-600"}`,children:[e.jsx(N.icon,{className:"w-4 h-4"}),N.label]},N.id))})}),v==="monime"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx(W,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`p-2 rounded-lg ${t.isEnabled?"bg-green-100 dark:bg-green-900/30":"bg-gray-100 dark:bg-gray-700"}`,children:e.jsx(li,{className:`w-5 h-5 ${t.isEnabled?"text-green-600 dark:text-green-400":"text-gray-500 dark:text-gray-400"}`})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Monime Payment Gateway"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Enable Monime for deposits and withdrawals"})]}),t.accessToken&&e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${t.accessToken.startsWith("mon_test_")?"bg-yellow-100 dark:bg-yellow-900/30 text-yellow-700 dark:text-yellow-400":"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400"}`,children:t.accessToken.startsWith("mon_test_")?"Test Mode":"Live Mode"})]}),e.jsx("button",{onClick:()=>s(N=>({...N,isEnabled:!N.isEnabled})),className:`p-2 rounded-lg transition-colors ${t.isEnabled?"bg-green-100 dark:bg-green-900/30 text-green-600 dark:text-green-400":"bg-gray-100 dark:bg-gray-700 text-gray-400 dark:text-gray-500"}`,children:t.isEnabled?e.jsx(kr,{className:"w-8 h-8"}):e.jsx(Nr,{className:"w-8 h-8"})})]})}),e.jsxs(W,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-900/30 rounded-lg",children:e.jsx(wl,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"API Credentials"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Your Monime API keys from the dashboard"})]}),e.jsx("button",{onClick:()=>j(!b),className:"ml-auto p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg",title:b?"Hide secrets":"Show secrets",children:b?e.jsx(Ln,{className:"w-4 h-4 text-gray-500 dark:text-gray-400"}):e.jsx(es,{className:"w-4 h-4 text-gray-500 dark:text-gray-400"})})]}),e.jsxs("div",{className:"grid gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Access Token"}),e.jsx("input",{type:b?"text":"password",value:t.accessToken,onChange:N=>s(P=>({...P,accessToken:N.target.value})),placeholder:"mon_test_xxxxx (test) or mon_xxxxx (live)",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white rounded-lg focus:ring-2 focus:ring-primary-500"}),e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:["Token prefix determines environment: ",e.jsx("code",{className:"bg-gray-100 dark:bg-gray-700 px-1 rounded",children:"mon_test_"})," for testing, ",e.jsx("code",{className:"bg-gray-100 dark:bg-gray-700 px-1 rounded",children:"mon_"})," for live"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Space ID"}),e.jsx("input",{type:"text",value:t.spaceId,onChange:N=>s(P=>({...P,spaceId:N.target.value})),placeholder:"spc_xxxxx",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white rounded-lg focus:ring-2 focus:ring-primary-500"}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Your Monime workspace identifier"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Webhook Secret"}),e.jsx("input",{type:b?"text":"password",value:t.webhookSecret,onChange:N=>s(P=>({...P,webhookSecret:N.target.value})),placeholder:"whsec_xxxxx",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white rounded-lg focus:ring-2 focus:ring-primary-500"}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Used to verify webhook signatures"})]}),e.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-gray-700/50 rounded-lg border border-gray-200 dark:border-gray-700",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Webhook URL"}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mb-2",children:"Use this URL when configuring webhooks in your Monime dashboard"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("code",{className:"flex-1 px-3 py-2 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-lg text-sm font-mono text-gray-800 dark:text-gray-200 overflow-x-auto",children:[window.location.origin,"/api/webhooks/monime"]}),e.jsx("button",{type:"button",onClick:()=>{navigator.clipboard.writeText(`${window.location.origin}/api/webhooks/monime`),x("Webhook URL copied to clipboard!"),setTimeout(()=>x(null),2e3)},className:"px-3 py-2 bg-gray-200 dark:bg-gray-600 hover:bg-gray-300 dark:hover:bg-gray-500 rounded-lg text-sm font-medium text-gray-700 dark:text-gray-300 transition-colors",children:"Copy"})]}),e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-2",children:["For production, replace with your actual domain: ",e.jsx("code",{className:"bg-gray-100 dark:bg-gray-700 px-1 rounded",children:"https://yourdomain.com/api/webhooks/monime"})]})]})]})]}),e.jsxs(W,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"p-2 bg-purple-100 dark:bg-purple-900/30 rounded-lg",children:e.jsx(jt,{className:"w-5 h-5 text-purple-600 dark:text-purple-400"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Financial Accounts"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Monime financial account IDs for payouts"})]})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Source Account ID"}),e.jsx("input",{type:"text",value:t.sourceAccountId,onChange:N=>s(P=>({...P,sourceAccountId:N.target.value})),placeholder:"fa_xxxxx",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white rounded-lg focus:ring-2 focus:ring-primary-500"}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Account to debit for payouts"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Payout Account ID"}),e.jsx("input",{type:"text",value:t.payoutAccountId,onChange:N=>s(P=>({...P,payoutAccountId:N.target.value})),placeholder:"fa_xxxxx",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white rounded-lg focus:ring-2 focus:ring-primary-500"}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Account for receiving payouts"})]})]})]}),e.jsxs(W,{className:"p-6 border-orange-200 dark:border-orange-800 bg-orange-50 dark:bg-orange-900/20",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"p-2 bg-orange-100 dark:bg-orange-900/30 rounded-lg",children:e.jsx(_V,{className:"w-5 h-5 text-orange-600 dark:text-orange-400"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"URL Configuration"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Required for Monime checkout redirects"})]}),e.jsx("span",{className:"ml-auto px-2 py-1 text-xs font-medium rounded-full bg-orange-200 dark:bg-orange-900/50 text-orange-700 dark:text-orange-400",children:"Required"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"p-3 bg-white dark:bg-gray-800 rounded-lg border border-orange-200 dark:border-orange-800",children:e.jsxs("p",{className:"text-sm text-orange-800 dark:text-orange-300",children:[e.jsx("strong",{children:"Important:"})," These URLs are required for Monime to redirect users after payment. They must be publicly accessible URLs (not localhost)."]})}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Backend API URL"}),e.jsx("input",{type:"text",value:t.backendUrl,onChange:N=>s(P=>({...P,backendUrl:N.target.value})),placeholder:"https://api.yourdomain.com",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white rounded-lg focus:ring-2 focus:ring-primary-500"}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"The URL where your backend API is hosted (e.g., https://api.yourdomain.com)"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Frontend App URL"}),e.jsx("input",{type:"text",value:t.frontendUrl,onChange:N=>s(P=>({...P,frontendUrl:N.target.value})),placeholder:"https://app.yourdomain.com",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white rounded-lg focus:ring-2 focus:ring-primary-500"}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"The URL where your frontend app is hosted (e.g., https://app.yourdomain.com)"})]}),(!t.backendUrl||!t.frontendUrl)&&e.jsxs("div",{className:"p-3 bg-red-50 dark:bg-red-900/20 rounded-lg border border-red-200 dark:border-red-800 flex items-start gap-2",children:[e.jsx(ut,{className:"w-4 h-4 text-red-600 dark:text-red-400 mt-0.5 flex-shrink-0"}),e.jsx("p",{className:"text-sm text-red-700 dark:text-red-400",children:'Both URLs must be configured for Monime payments to work. Without these, checkout sessions will fail with "successUrl must be a URL address" error.'})]})]})]}),e.jsxs(W,{className:"p-6 bg-blue-50 dark:bg-blue-900/20 border-blue-200 dark:border-blue-800",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx(HT,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-blue-900 dark:text-blue-300",children:"Test Payment"}),e.jsx("p",{className:"text-sm text-blue-700 dark:text-blue-400",children:"Create a test checkout session to verify your Monime integration"})]})]}),e.jsxs("div",{className:"flex items-end gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"block text-sm font-medium text-blue-900 dark:text-blue-300 mb-1",children:"Test Amount (SLE)"}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-3 top-2 text-gray-500 dark:text-gray-400",children:"Le"}),e.jsx("input",{type:"text",value:R(y),onChange:N=>C(I(N.target.value)),placeholder:"10.00",className:"w-full pl-10 pr-3 py-2 border border-blue-300 dark:border-blue-700 rounded-lg focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]}),e.jsx("p",{className:"text-xs text-blue-600 dark:text-blue-400 mt-1",children:"Enter any amount for testing"})]}),e.jsxs("button",{onClick:A,disabled:u||!t.accessToken||!t.spaceId||y<=0,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed h-[42px]",children:[u?e.jsx(Ie,{className:"w-4 h-4 animate-spin"}):e.jsx(Je,{className:"w-4 h-4"}),u?"Creating...":"Open Checkout"]})]}),(!t.accessToken||!t.spaceId)&&e.jsxs("p",{className:"text-xs text-red-600 dark:text-red-400 mt-3 flex items-center gap-1",children:[e.jsx(ut,{className:"w-3 h-3"}),"Please enter your Access Token and Space ID above to test payments"]})]})]}),v==="withdrawal"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs(W,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"p-2 bg-orange-100 dark:bg-orange-900/30 rounded-lg",children:e.jsx(BC,{className:"w-5 h-5 text-orange-600 dark:text-orange-400"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Withdrawal Methods"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Enable or disable withdrawal options"})]})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:`p-4 rounded-lg border-2 ${r.mobileMoneyEnabled?"border-green-200 dark:border-green-800 bg-green-50 dark:bg-green-900/20":"border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-700/50"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Na,{className:"w-5 h-5 text-orange-600 dark:text-orange-400"}),e.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:"Mobile Money"})]}),e.jsx("button",{onClick:()=>a(N=>({...N,mobileMoneyEnabled:!N.mobileMoneyEnabled})),className:`p-1 rounded ${r.mobileMoneyEnabled?"bg-green-200 dark:bg-green-900/50":"bg-gray-200 dark:bg-gray-600"}`,children:r.mobileMoneyEnabled?e.jsx(kr,{className:"w-6 h-6 text-green-600 dark:text-green-400"}):e.jsx(Nr,{className:"w-6 h-6 text-gray-400 dark:text-gray-500"})})]}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Allow withdrawals to mobile money wallets"})]}),e.jsxs("div",{className:`p-4 rounded-lg border-2 ${r.bankTransferEnabled?"border-green-200 dark:border-green-800 bg-green-50 dark:bg-green-900/20":"border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-700/50"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ua,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"}),e.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:"Bank Transfer"})]}),e.jsx("button",{onClick:()=>a(N=>({...N,bankTransferEnabled:!N.bankTransferEnabled})),className:`p-1 rounded ${r.bankTransferEnabled?"bg-green-200 dark:bg-green-900/50":"bg-gray-200 dark:bg-gray-600"}`,children:r.bankTransferEnabled?e.jsx(kr,{className:"w-6 h-6 text-green-600 dark:text-green-400"}):e.jsx(Nr,{className:"w-6 h-6 text-gray-400 dark:text-gray-500"})})]}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Allow withdrawals to bank accounts"})]})]})]}),e.jsxs(W,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"p-2 bg-red-100 dark:bg-red-900/30 rounded-lg",children:e.jsx(ut,{className:"w-5 h-5 text-red-600 dark:text-red-400"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Withdrawal Limits"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Set minimum, maximum, and daily limits (in SLE)"})]})]}),e.jsxs("div",{className:"grid md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Minimum Amount"}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-3 top-2 text-gray-500 dark:text-gray-400",children:"Le"}),e.jsx("input",{type:"text",value:R(r.minWithdrawalAmount),onChange:N=>a(P=>({...P,minWithdrawalAmount:I(N.target.value)})),className:"w-full pl-10 pr-3 py-2 border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white rounded-lg focus:ring-2 focus:ring-primary-500"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Maximum Amount"}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-3 top-2 text-gray-500 dark:text-gray-400",children:"Le"}),e.jsx("input",{type:"text",value:R(r.maxWithdrawalAmount),onChange:N=>a(P=>({...P,maxWithdrawalAmount:I(N.target.value)})),className:"w-full pl-10 pr-3 py-2 border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white rounded-lg focus:ring-2 focus:ring-primary-500"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Daily Limit"}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-3 top-2 text-gray-500 dark:text-gray-400",children:"Le"}),e.jsx("input",{type:"text",value:R(r.dailyWithdrawalLimit),onChange:N=>a(P=>({...P,dailyWithdrawalLimit:I(N.target.value)})),className:"w-full pl-10 pr-3 py-2 border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white rounded-lg focus:ring-2 focus:ring-primary-500"})]})]})]})]}),e.jsxs(W,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"p-2 bg-green-100 dark:bg-green-900/30 rounded-lg",children:e.jsx(Je,{className:"w-5 h-5 text-green-600 dark:text-green-400"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Withdrawal Fees"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Configure fees for withdrawals"})]})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Fee Percentage (%)"}),e.jsx("input",{type:"number",step:"0.1",min:"0",value:r.withdrawalFeePercent,onChange:N=>a(P=>({...P,withdrawalFeePercent:parseFloat(N.target.value)||0})),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white rounded-lg focus:ring-2 focus:ring-primary-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Flat Fee (Le)"}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-3 top-2 text-gray-500 dark:text-gray-400",children:"Le"}),e.jsx("input",{type:"text",value:R(r.withdrawalFeeFlat),onChange:N=>a(P=>({...P,withdrawalFeeFlat:I(N.target.value)})),className:"w-full pl-10 pr-3 py-2 border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white rounded-lg focus:ring-2 focus:ring-primary-500"})]})]})]}),e.jsxs("div",{className:"mt-4 p-3 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:[e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:[e.jsx("strong",{children:"Fee Formula:"})," ",r.withdrawalFeePercent,"% + Le ",R(r.withdrawalFeeFlat)]}),e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:["Example: For Le 10,000 withdrawal = Le ",R(1e4*r.withdrawalFeePercent/100+r.withdrawalFeeFlat)," fee"]})]})]}),e.jsxs(W,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"p-2 bg-purple-100 dark:bg-purple-900/30 rounded-lg",children:e.jsx(or,{className:"w-5 h-5 text-purple-600 dark:text-purple-400"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Security & Approval"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Configure withdrawal security settings"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:"Require PIN for withdrawals"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Users must enter their PIN to confirm withdrawals"})]}),e.jsx("button",{onClick:()=>a(N=>({...N,requirePin:!N.requirePin})),className:`p-1 rounded ${r.requirePin?"bg-green-200 dark:bg-green-900/50":"bg-gray-200 dark:bg-gray-600"}`,children:r.requirePin?e.jsx(kr,{className:"w-6 h-6 text-green-600 dark:text-green-400"}):e.jsx(Nr,{className:"w-6 h-6 text-gray-400 dark:text-gray-500"})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Auto-Approve Under (Le)"}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-3 top-2 text-gray-500 dark:text-gray-400",children:"Le"}),e.jsx("input",{type:"text",value:R(r.autoApproveUnder),onChange:N=>a(P=>({...P,autoApproveUnder:I(N.target.value)})),className:"w-full pl-10 pr-3 py-2 border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white rounded-lg focus:ring-2 focus:ring-primary-500"})]}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Withdrawals under this amount are automatically approved"})]})]})]})]}),v==="deposit"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs(W,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"p-2 bg-green-100 dark:bg-green-900/30 rounded-lg",children:e.jsx($C,{className:"w-5 h-5 text-green-600 dark:text-green-400"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Deposit Methods"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Enable or disable deposit options"})]})]}),e.jsxs("div",{className:"grid md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:`p-4 rounded-lg border-2 ${n.checkoutSessionEnabled?"border-green-200 dark:border-green-800 bg-green-50 dark:bg-green-900/20":"border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-700/50"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Je,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"}),e.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:"Checkout"})]}),e.jsx("button",{onClick:()=>i(N=>({...N,checkoutSessionEnabled:!N.checkoutSessionEnabled})),className:`p-1 rounded ${n.checkoutSessionEnabled?"bg-green-200 dark:bg-green-900/50":"bg-gray-200 dark:bg-gray-600"}`,children:n.checkoutSessionEnabled?e.jsx(kr,{className:"w-6 h-6 text-green-600 dark:text-green-400"}):e.jsx(Nr,{className:"w-6 h-6 text-gray-400 dark:text-gray-500"})})]}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Monime checkout page"})]}),e.jsxs("div",{className:`p-4 rounded-lg border-2 ${n.paymentCodeEnabled?"border-green-200 dark:border-green-800 bg-green-50 dark:bg-green-900/20":"border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-700/50"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(or,{className:"w-5 h-5 text-purple-600 dark:text-purple-400"}),e.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:"USSD Code"})]}),e.jsx("button",{onClick:()=>i(N=>({...N,paymentCodeEnabled:!N.paymentCodeEnabled})),className:`p-1 rounded ${n.paymentCodeEnabled?"bg-green-200 dark:bg-green-900/50":"bg-gray-200 dark:bg-gray-600"}`,children:n.paymentCodeEnabled?e.jsx(kr,{className:"w-6 h-6 text-green-600 dark:text-green-400"}):e.jsx(Nr,{className:"w-6 h-6 text-gray-400 dark:text-gray-500"})})]}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Payment via USSD code"})]}),e.jsxs("div",{className:`p-4 rounded-lg border-2 ${n.mobileMoneyEnabled?"border-green-200 dark:border-green-800 bg-green-50 dark:bg-green-900/20":"border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-700/50"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Na,{className:"w-5 h-5 text-orange-600 dark:text-orange-400"}),e.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:"Mobile Money"})]}),e.jsx("button",{onClick:()=>i(N=>({...N,mobileMoneyEnabled:!N.mobileMoneyEnabled})),className:`p-1 rounded ${n.mobileMoneyEnabled?"bg-green-200 dark:bg-green-900/50":"bg-gray-200 dark:bg-gray-600"}`,children:n.mobileMoneyEnabled?e.jsx(kr,{className:"w-6 h-6 text-green-600 dark:text-green-400"}):e.jsx(Nr,{className:"w-6 h-6 text-gray-400 dark:text-gray-500"})})]}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Direct mobile money"})]})]})]}),e.jsxs(W,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-900/30 rounded-lg",children:e.jsx(ut,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Deposit Limits"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Set minimum and maximum deposit amounts (in SLE)"})]})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Minimum Deposit"}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-3 top-2 text-gray-500 dark:text-gray-400",children:"Le"}),e.jsx("input",{type:"text",value:R(n.minDepositAmount),onChange:N=>i(P=>({...P,minDepositAmount:I(N.target.value)})),className:"w-full pl-10 pr-3 py-2 border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white rounded-lg focus:ring-2 focus:ring-primary-500"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Maximum Deposit"}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-3 top-2 text-gray-500 dark:text-gray-400",children:"Le"}),e.jsx("input",{type:"text",value:R(n.maxDepositAmount),onChange:N=>i(P=>({...P,maxDepositAmount:I(N.target.value)})),className:"w-full pl-10 pr-3 py-2 border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white rounded-lg focus:ring-2 focus:ring-primary-500"})]})]})]})]})]})]})})}const Xce={pending:"bg-yellow-100 text-yellow-800",processing:"bg-blue-100 text-blue-800",completed:"bg-green-100 text-green-800",failed:"bg-red-100 text-red-800",expired:"bg-gray-100 text-gray-800",cancelled:"bg-gray-100 text-gray-800",delayed:"bg-orange-100 text-orange-800"},ede={pending:e.jsx(it,{className:"w-3 h-3"}),processing:e.jsx(Ie,{className:"w-3 h-3 animate-spin"}),completed:e.jsx(be,{className:"w-3 h-3"}),failed:e.jsx(ft,{className:"w-3 h-3"}),expired:e.jsx(it,{className:"w-3 h-3"}),cancelled:e.jsx(ft,{className:"w-3 h-3"}),delayed:e.jsx(Lt,{className:"w-3 h-3"})};function tde(){const[t,s]=h.useState([]),[r,a]=h.useState(!0),[n,i]=h.useState(""),[l,o]=h.useState(0),[c,d]=h.useState(""),[u,m]=h.useState("all"),[p,x]=h.useState(new Map),[g,f]=h.useState(null);h.useEffect(()=>{Ut.getDefaultCurrency().then(f)},[]);const b=(g==null?void 0:g.symbol)||"",j=_=>`${b}${_.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}`,v=async _=>{const E=[...new Set(_.filter(A=>A&&!p.has(A)))];if(E.length!==0)try{const{data:A}=await U.from("users").select("id, first_name, last_name, email, phone").in("id",E);if(A){const R=new Map(p);A.forEach(I=>{R.set(I.id,{id:I.id,firstName:I.first_name||"",lastName:I.last_name||"",email:I.email||"",phone:I.phone||""})}),x(R)}}catch(A){console.error("Failed to fetch users:",A)}},w=async()=>{var _;a(!0),i("");try{const E=await FQ.getAllDeposits(100,0);s(E.data||[]),o(E.total||0);const A=(_=E.data)==null?void 0:_.map(R=>R.userId).filter(Boolean);A.length>0&&await v(A)}catch(E){i(E.message||"Failed to fetch deposits"),s([])}finally{a(!1)}};h.useEffect(()=>{w()},[]);const y=_=>{if(!_)return"Unknown";const E=p.get(_);return E?`${E.firstName} ${E.lastName}`.trim()||E.email||E.phone||_.slice(0,8):_.slice(0,8)+"..."},C=t.filter(_=>{var k,D,$,L,B;const E=_.userId?p.get(_.userId):null,A=E?`${E.firstName} ${E.lastName}`.toLowerCase():"",R=((k=E==null?void 0:E.email)==null?void 0:k.toLowerCase())||"",I=((D=E==null?void 0:E.phone)==null?void 0:D.toLowerCase())||"",N=c===""||_.id.toLowerCase().includes(c.toLowerCase())||(($=_.monimeReference)==null?void 0:$.toLowerCase().includes(c.toLowerCase()))||((L=_.walletId)==null?void 0:L.toLowerCase().includes(c.toLowerCase()))||((B=_.userId)==null?void 0:B.toLowerCase().includes(c.toLowerCase()))||A.includes(c.toLowerCase())||R.includes(c.toLowerCase())||I.includes(c.toLowerCase()),P=u==="all"||_.status===u;return N&&P}),S={total:t.length,completed:t.filter(_=>_.status==="completed").length,pending:t.filter(_=>_.status==="pending"||_.status==="processing").length,failed:t.filter(_=>_.status==="failed"||_.status==="cancelled").length,totalAmount:t.filter(_=>_.status==="completed").reduce((_,E)=>_+(E.amount||0),0)};return e.jsx(Kt,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Deposit History"}),e.jsx("p",{className:"text-gray-500 mt-1",children:"Track all customer deposits via Monime"})]}),e.jsxs(De,{onClick:w,disabled:r,children:[e.jsx(vt,{className:`w-4 h-4 mr-2 ${r?"animate-spin":""}`}),"Refresh"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx(W,{children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:e.jsx(Za,{className:"w-5 h-5 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Total Deposits"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:S.total})]})]})}),e.jsx(W,{children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:e.jsx(be,{className:"w-5 h-5 text-green-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Completed"}),e.jsx("p",{className:"text-2xl font-bold text-green-600",children:S.completed})]})]})}),e.jsx(W,{children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-yellow-100 rounded-lg",children:e.jsx(it,{className:"w-5 h-5 text-yellow-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Pending"}),e.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:S.pending})]})]})}),e.jsx(W,{children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-emerald-100 rounded-lg",children:e.jsx(Za,{className:"w-5 h-5 text-emerald-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Total Volume"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:j(P5(S.totalAmount))})]})]})})]}),e.jsx(W,{children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(ts,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search by name, email, phone, ID...",value:c,onChange:_=>d(_.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500"})]}),e.jsxs("select",{value:u,onChange:_=>m(_.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"processing",children:"Processing"}),e.jsx("option",{value:"completed",children:"Completed"}),e.jsx("option",{value:"failed",children:"Failed"}),e.jsx("option",{value:"cancelled",children:"Cancelled"}),e.jsx("option",{value:"expired",children:"Expired"})]})]})}),n&&e.jsx(W,{className:"bg-red-50 border-red-200",children:e.jsxs("div",{className:"flex items-center gap-2 text-red-700",children:[e.jsx(Lt,{className:"w-5 h-5"}),e.jsx("span",{children:n})]})}),e.jsxs(W,{children:[e.jsx(Sr,{children:e.jsxs(_r,{children:["Deposits (",C.length,")"]})}),r?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx(Ie,{className:"w-8 h-8 animate-spin text-primary-600"})}):C.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Za,{className:"w-12 h-12 text-gray-300 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500",children:"No deposits found"})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-gray-200",children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Customer"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Amount"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Status"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Method"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Reference"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Created"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Completed"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:C.map(_=>{var A;const E=_.userId?p.get(_.userId):null;return e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-8 h-8 bg-primary-100 rounded-full flex items-center justify-center",children:e.jsx(Es,{className:"w-4 h-4 text-primary-600"})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-900",children:y(_.userId)}),(E==null?void 0:E.email)&&e.jsx("div",{className:"text-xs text-gray-500",children:E.email}),(E==null?void 0:E.phone)&&!(E!=null&&E.email)&&e.jsx("div",{className:"text-xs text-gray-500",children:E.phone})]})]})}),e.jsxs("td",{className:"px-4 py-3",children:[e.jsx("div",{className:"font-medium text-gray-900",children:j(P5(_.amount||0))}),e.jsx("div",{className:"text-xs text-gray-500",children:_.currency||"SLE"})]}),e.jsx("td",{className:"px-4 py-3",children:e.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium ${Xce[_.status]||"bg-gray-100 text-gray-800"}`,children:[ede[_.status],_.status]})}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("span",{className:"text-xs text-gray-600 bg-gray-100 px-2 py-1 rounded",children:((A=_.depositMethod)==null?void 0:A.replace("_"," "))||"CHECKOUT"})}),e.jsxs("td",{className:"px-4 py-3",children:[e.jsxs("div",{className:"font-mono text-xs text-gray-900",children:[_.id.slice(0,8),"..."]}),_.monimeReference&&e.jsxs("div",{className:"font-mono text-xs text-gray-500",children:[_.monimeReference.slice(0,15),"..."]})]}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-500",children:_.createdAt?new Date(_.createdAt).toLocaleString():"-"}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-500",children:_.completedAt?new Date(_.completedAt).toLocaleString():"-"})]},_.id)})})]})})]})]})})}function sde(){const[t,s]=h.useState(!1),[r,a]=h.useState(!1),[n,i]=h.useState(!1),[l,o]=h.useState(null);h.useEffect(()=>{Ut.getDefaultCurrency().then(o)},[]);const c=(l==null?void 0:l.symbol)||"",d=j=>`${c}${j.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}`,[u,m]=h.useState([]),p=()=>{a(!0),s(!1),setTimeout(()=>a(!1),3e3)},x=(j,v,w)=>{m(u.map(y=>y.id===j?{...y,[v]:w}:y))},g=j=>{m(u.map(v=>v.id===j?{...v,isActive:!v.isActive}:v))},f=j=>{m(u.map(v=>v.id===j?{...v,isPopular:!v.isPopular}:{...v,isPopular:!1}))},b={totalSubscribers:156,monthlyRevenue:u.reduce((j,v)=>j+v.monthlyPrice*Math.floor(Math.random()*50),0),activeBusiness:89,activeEnterprise:22};return e.jsx(Kt,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Subscription Plans"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Manage merchant subscription plans and pricing"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[r&&e.jsxs("span",{className:"flex items-center gap-2 text-green-600 dark:text-green-400 text-sm",children:[e.jsx(be,{className:"w-4 h-4"}),"Changes saved"]}),e.jsxs("button",{onClick:()=>s(!t),className:`px-4 py-2 rounded-lg flex items-center gap-2 ${t?"bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300":"bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700"}`,children:[e.jsx(Nl,{className:"w-4 h-4"}),t?"Cancel":"Edit Plans"]}),t&&e.jsxs("button",{onClick:p,className:"px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 flex items-center gap-2",children:[e.jsx(oa,{className:"w-4 h-4"}),"Save Changes"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx(we,{className:"p-4",delay:0,children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-900/30 rounded-lg",children:e.jsx(ia,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Total Subscribers"}),e.jsx("p",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:b.totalSubscribers})]})]})}),e.jsx(we,{className:"p-4",delay:.1,children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-green-100 dark:bg-green-900/30 rounded-lg",children:e.jsx(js,{className:"w-5 h-5 text-green-600 dark:text-green-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Monthly Revenue"}),e.jsx("p",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:d(b.monthlyRevenue)})]})]})}),e.jsx(we,{className:"p-4",delay:.2,children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-purple-100 dark:bg-purple-900/30 rounded-lg",children:e.jsx(ui,{className:"w-5 h-5 text-purple-600 dark:text-purple-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Business Plan"}),e.jsxs("p",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:[b.activeBusiness," active"]})]})]})}),e.jsx(we,{className:"p-4",delay:.3,children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-indigo-100 dark:bg-indigo-900/30 rounded-lg",children:e.jsx(Xt,{className:"w-5 h-5 text-indigo-600 dark:text-indigo-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Enterprise Plan"}),e.jsxs("p",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:[b.activeEnterprise," active"]})]})]})})]}),e.jsx(W,{className:"p-4 bg-amber-50 dark:bg-amber-900/20 border-amber-200 dark:border-amber-800",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(ut,{className:"w-5 h-5 text-amber-600 dark:text-amber-400 flex-shrink-0 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-amber-800 dark:text-amber-300",children:"Subscription Management"}),e.jsx("p",{className:"text-sm text-amber-700 dark:text-amber-400 mt-1",children:"Changes to subscription plans will only affect new subscribers. Existing subscribers will keep their current plan until renewal. Consider grandfathering existing customers when making price changes."})]})]})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:u.map(j=>e.jsxs(W,{className:`relative overflow-hidden ${j.isActive?"":"opacity-60"} ${j.isPopular?"ring-2 ring-primary-500":""}`,children:[j.isPopular&&e.jsx("div",{className:"absolute top-0 right-0 bg-primary-600 text-white px-3 py-1 text-xs font-medium",children:"Most Popular"}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white",children:j.name}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:j.description})]}),t&&e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>f(j.id),className:`p-2 rounded-lg ${j.isPopular?"bg-yellow-100 dark:bg-yellow-900/30 text-yellow-600 dark:text-yellow-400":"bg-gray-100 dark:bg-gray-700 text-gray-400 dark:text-gray-500"}`,title:"Set as popular",children:e.jsx(sw,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>g(j.id),className:`p-2 rounded-lg ${j.isActive?"bg-green-100 dark:bg-green-900/30 text-green-600 dark:text-green-400":"bg-gray-100 dark:bg-gray-700 text-gray-400 dark:text-gray-500"}`,title:j.isActive?"Disable":"Enable",children:j.isActive?e.jsx(Rs,{className:"w-4 h-4"}):e.jsx(lt,{className:"w-4 h-4"})})]})]}),e.jsx("div",{className:"mb-6",children:t?e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:c}),e.jsx("input",{type:"number",value:j.monthlyPrice,onChange:v=>x(j.id,"monthlyPrice",parseFloat(v.target.value)),className:"w-20 px-2 py-1 border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white rounded text-2xl font-bold"}),e.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"/month"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-gray-500 dark:text-gray-400 text-sm",children:c}),e.jsx("input",{type:"number",value:j.yearlyPrice,onChange:v=>x(j.id,"yearlyPrice",parseFloat(v.target.value)),className:"w-20 px-2 py-1 border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white rounded text-sm"}),e.jsx("span",{className:"text-gray-500 dark:text-gray-400 text-sm",children:"/year"})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-baseline gap-1",children:[e.jsxs("span",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:[c,j.monthlyPrice]}),e.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"/month"})]}),e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:["or ",c,j.yearlyPrice,"/year (save 17%)"]})]})}),e.jsx("div",{className:"space-y-3 mb-6",children:j.features.map((v,w)=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Rs,{className:"w-4 h-4 text-green-500 dark:text-green-400 flex-shrink-0"}),e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-300",children:v})]},w))}),e.jsxs("div",{className:"pt-4 border-t border-gray-200 dark:border-gray-700",children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-900 dark:text-white mb-2",children:"Limits"}),e.jsxs("div",{className:"grid grid-cols-3 gap-2 text-center",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:j.limits.transactions===-1?"":j.limits.transactions.toLocaleString()}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Transactions"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:j.limits.apiCalls===-1?"":`${j.limits.apiCalls/1e3}K`}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"API Calls"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:j.limits.teamMembers===-1?"":j.limits.teamMembers}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Team"})]})]})]})]})]},j.id))}),t&&e.jsxs("button",{onClick:()=>i(!0),className:"w-full p-6 border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg text-gray-500 dark:text-gray-400 hover:border-primary-500 hover:text-primary-600 dark:hover:text-primary-400 transition-colors flex items-center justify-center gap-2",children:[e.jsx(It,{className:"w-5 h-5"}),"Add New Plan"]}),e.jsxs(W,{className:"p-6",children:[e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white mb-4",children:"Subscription Settings"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Trial Period"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"number",defaultValue:14,className:"w-20 px-3 py-2 border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500"}),e.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"days"})]}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Free trial period for new subscribers"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Grace Period"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"number",defaultValue:3,className:"w-20 px-3 py-2 border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500"}),e.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"days"})]}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Days before account suspension after failed payment"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Yearly Discount"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"number",defaultValue:17,className:"w-20 px-3 py-2 border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500"}),e.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"%"})]}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Discount for yearly subscriptions"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Auto-Renewal"}),e.jsxs("label",{className:"flex items-center gap-2 mt-2",children:[e.jsx("input",{type:"checkbox",defaultChecked:!0,className:"rounded text-primary-600 focus:ring-primary-500"}),e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-300",children:"Enable auto-renewal by default"})]}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Subscriptions will automatically renew"})]})]})]})]})})}const $m=[{resource:"users",label:"User Management",icon:ia,actions:{create:!1,read:!1,update:!1,delete:!1}},{resource:"wallets",label:"Wallets",icon:jt,actions:{create:!1,read:!1,update:!1,delete:!1}},{resource:"cards",label:"Cards",icon:Je,actions:{create:!1,read:!1,update:!1,delete:!1}},{resource:"transactions",label:"Transactions",icon:jt,actions:{create:!1,read:!1,update:!1,delete:!1}},{resource:"settings",label:"System Settings",icon:or,actions:{create:!1,read:!1,update:!1,delete:!1}},{resource:"roles",label:"Role Management",icon:Xt,actions:{create:!1,read:!1,update:!1,delete:!1}}],rde=[{id:"role_superadmin",name:"superadmin",displayName:"Super Administrator",description:"Full system access with all permissions. Can manage roles and system settings.",permissions:$m.map(t=>({...t,actions:{create:!0,read:!0,update:!0,delete:!0}})),userCount:0,isSystem:!0},{id:"role_admin",name:"admin",displayName:"Administrator",description:"Administrative access to manage users, transactions, and operations.",permissions:$m.map(t=>({...t,actions:t.resource==="roles"||t.resource==="settings"?{create:!1,read:!0,update:!1,delete:!1}:{create:!0,read:!0,update:!0,delete:!0}})),userCount:0,isSystem:!0},{id:"role_merchant",name:"merchant",displayName:"Merchant",description:"Business account with payment processing and transaction capabilities.",permissions:$m.map(t=>({...t,actions:["wallets","cards","transactions"].includes(t.resource)?{create:!0,read:!0,update:!0,delete:!1}:{create:!1,read:!1,update:!1,delete:!1}})),userCount:0,isSystem:!0},{id:"role_agent",name:"agent",displayName:"Agent",description:"Support agent with customer service and transaction monitoring access.",permissions:$m.map(t=>({...t,actions:["users","wallets","transactions"].includes(t.resource)?{create:!1,read:!0,update:!0,delete:!1}:{create:!1,read:!1,update:!1,delete:!1}})),userCount:0,isSystem:!0},{id:"role_user",name:"user",displayName:"User",description:"Standard user account with personal wallet and card access.",permissions:$m.map(t=>({...t,actions:["wallets","cards","transactions"].includes(t.resource)?{create:!0,read:!0,update:!0,delete:!1}:{create:!1,read:!1,update:!1,delete:!1}})),userCount:0,isSystem:!0}];function ade(){const[t,s]=h.useState(rde),[r,a]=h.useState(!0),[n,i]=h.useState(null),[l,o]=h.useState(null),[c,d]=h.useState(!1);h.useEffect(()=>{u()},[]);const u=async()=>{a(!0);try{const{data:g}=await U.from("users").select("roles"),f=new Map;g==null||g.forEach(b=>{(b.roles||"user").split(",").map(v=>v.trim()).forEach(v=>{f.set(v,(f.get(v)||0)+1)})}),s(b=>b.map(j=>({...j,userCount:f.get(j.name)||0})))}catch(g){console.error("Error fetching role counts:",g)}finally{a(!1)}},m=g=>{i(n===g?null:g)},p=(g,f,b)=>{s(j=>j.map(v=>v.id!==g||v.isSystem?v:{...v,permissions:v.permissions.map(w=>w.resource!==f?w:{...w,actions:{...w.actions,[b]:!w.actions[b]}})}))},x=g=>{switch(g){case"superadmin":return"bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-400";case"admin":return"bg-purple-100 dark:bg-purple-900/30 text-purple-700 dark:text-purple-400";case"merchant":return"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400";case"agent":return"bg-orange-100 dark:bg-orange-900/30 text-orange-700 dark:text-orange-400";case"user":return"bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-400";default:return"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300"}};return e.jsx(Kt,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Role Management"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Configure user roles and permissions"})]}),e.jsxs("button",{onClick:()=>d(!0),className:"px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 flex items-center gap-2",children:[e.jsx(It,{className:"w-4 h-4"}),"Create Custom Role"]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:t.map((g,f)=>e.jsx(we,{className:"p-4",delay:f*.05,children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`p-2 rounded-lg ${x(g.name).replace("text-","bg-").split(" ")[0]}`,children:e.jsx(Xt,{className:`w-5 h-5 ${x(g.name).split(" ")[1]} ${x(g.name).split(" ")[3]||""}`})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:g.displayName}),e.jsx("p",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:g.userCount})]})]})},g.id))}),e.jsx("div",{className:"space-y-4",children:t.map(g=>e.jsxs(W,{className:"overflow-hidden",children:[e.jsxs("div",{className:"p-4 flex items-center justify-between cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-700/50",onClick:()=>m(g.id),children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:`p-2 rounded-lg ${x(g.name).replace("text-","bg-").split(" ")[0]}`,children:e.jsx(Xt,{className:`w-5 h-5 ${x(g.name).split(" ")[1]} ${x(g.name).split(" ")[3]||""}`})}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:g.displayName}),e.jsx("span",{className:`px-2 py-0.5 rounded text-xs font-medium ${x(g.name)}`,children:g.name}),g.isSystem&&e.jsxs("span",{className:"px-2 py-0.5 rounded text-xs font-medium bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-400 flex items-center gap-1",children:[e.jsx(Xs,{className:"w-3 h-3"})," System"]})]}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:g.description})]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:[g.userCount," users"]}),e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:[g.permissions.filter(f=>Object.values(f.actions).some(b=>b)).length," resources"]})]}),n===g.id?e.jsx(FT,{className:"w-5 h-5 text-gray-400"}):e.jsx(zs,{className:"w-5 h-5 text-gray-400"})]})]}),n===g.id&&e.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-700 p-4",children:[e.jsx("h4",{className:"font-medium text-gray-900 dark:text-white mb-4",children:"Permissions"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"text-left text-xs text-gray-500 dark:text-gray-400 uppercase",children:[e.jsx("th",{className:"pb-3 font-medium",children:"Resource"}),e.jsx("th",{className:"pb-3 font-medium text-center",children:"Create"}),e.jsx("th",{className:"pb-3 font-medium text-center",children:"Read"}),e.jsx("th",{className:"pb-3 font-medium text-center",children:"Update"}),e.jsx("th",{className:"pb-3 font-medium text-center",children:"Delete"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-100 dark:divide-gray-700",children:g.permissions.map(f=>{const b=f.icon;return e.jsxs("tr",{className:"text-sm",children:[e.jsx("td",{className:"py-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(b,{className:"w-4 h-4 text-gray-400"}),e.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:f.label})]})}),["create","read","update","delete"].map(j=>e.jsx("td",{className:"py-3 text-center",children:e.jsx("button",{onClick:v=>{v.stopPropagation(),p(g.id,f.resource,j)},disabled:g.isSystem,className:`p-1 rounded ${f.actions[j]?"bg-green-100 dark:bg-green-900/30 text-green-600 dark:text-green-400":"bg-gray-100 dark:bg-gray-700 text-gray-400 dark:text-gray-500"} ${g.isSystem?"opacity-60 cursor-not-allowed":"hover:opacity-80"}`,children:f.actions[j]?e.jsx(be,{className:"w-4 h-4"}):e.jsx(ft,{className:"w-4 h-4"})})},j))]},f.resource)})})]})}),!g.isSystem&&e.jsxs("div",{className:"flex justify-end gap-2 mt-4 pt-4 border-t border-gray-200 dark:border-gray-700",children:[e.jsxs("button",{className:"px-4 py-2 text-sm bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 flex items-center gap-2",children:[e.jsx(Or,{className:"w-4 h-4"}),"Delete Role"]}),e.jsxs("button",{className:"px-4 py-2 text-sm bg-primary-600 text-white rounded-lg hover:bg-primary-700 flex items-center gap-2",children:[e.jsx(oa,{className:"w-4 h-4"}),"Save Changes"]})]}),g.isSystem&&e.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-lg p-3 flex items-start gap-2",children:[e.jsx(Xs,{className:"w-4 h-4 text-yellow-600 dark:text-yellow-400 mt-0.5"}),e.jsxs("div",{className:"text-sm text-yellow-700 dark:text-yellow-400",children:[e.jsx("p",{className:"font-medium",children:"System Role"}),e.jsx("p",{className:"text-yellow-600 dark:text-yellow-500",children:"This is a system-defined role and cannot be modified. To customize permissions, create a new custom role."})]})]})})]})]},g.id))}),e.jsxs(W,{className:"p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Quick User Role Assignment"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-4",children:"To change a user's role, go to the User Management section and edit the individual user."}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("a",{href:"/admin/users",className:"px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 flex items-center gap-2",children:[e.jsx(ia,{className:"w-4 h-4"}),"Manage Users"]}),e.jsxs("a",{href:"/admin/merchants",className:"px-4 py-2 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 flex items-center gap-2",children:[e.jsx(jt,{className:"w-4 h-4"}),"Manage Merchants"]}),e.jsxs("a",{href:"/admin/agents",className:"px-4 py-2 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 flex items-center gap-2",children:[e.jsx(YT,{className:"w-4 h-4"}),"Manage Agents"]})]})]})]})})}function nde(){const t=At(),[s,r]=h.useState(""),[a,n]=h.useState("all"),[i,l]=h.useState(1),[o,c]=h.useState(null),[d,u]=h.useState(!1),[m,p]=h.useState(""),[x,g]=h.useState(!1),{data:f,isLoading:b,refetch:j}=_Q({page:i,limit:20,status:a==="all"?void 0:a}),{data:v}=Yf(),w=EQ(),y=AQ(),C=TQ(),[S,_]=h.useState([]),[E,A]=h.useState(!1);h.useEffect(()=>{(async()=>{if(!(f!=null&&f.data)||f.data.length===0){_([]);return}A(!0);const q=[...new Set(f.data.map(X=>X.userId))],{data:K,error:le}=await U.from("users").select("id, first_name, last_name, email, phone").in("id",q);if(le)console.error("Error fetching users:",le),_(f.data.map(X=>({...X})));else{const X=new Map((K==null?void 0:K.map(se=>[se.id,se]))||[]);_(f.data.map(se=>({...se,user:X.get(se.userId)})))}A(!1)})()},[f==null?void 0:f.data]);const R=S.filter(O=>{var K,le,X,se,de,fe;if(!s)return!0;const q=s.toLowerCase();return O.name.toLowerCase().includes(q)||((le=(K=O.user)==null?void 0:K.first_name)==null?void 0:le.toLowerCase().includes(q))||((se=(X=O.user)==null?void 0:X.last_name)==null?void 0:se.toLowerCase().includes(q))||((fe=(de=O.user)==null?void 0:de.email)==null?void 0:fe.toLowerCase().includes(q))||O.id.toLowerCase().includes(q)}),I=(f==null?void 0:f.total)||0,N=R.reduce((O,q)=>O+q.currentBalance,0),P=R.filter(O=>O.lockStatus==="LOCKED"||O.adminLocked).length,k=R.filter(O=>O.adminLocked).length,D=O=>new Intl.NumberFormat("en-SL",{style:"currency",currency:"SLE",minimumFractionDigits:2}).format(O),$=O=>new Date(O).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}),L=async()=>{if(o)try{await w.mutateAsync({potId:o.id,lock:!o.adminLocked,reason:m}),j(),u(!1),c(null),p("")}catch(O){console.error("Failed to toggle lock:",O)}},B=async O=>{if(confirm(`Force unlock pot "${O.name}"? This will allow the user to withdraw immediately.`))try{await y.mutateAsync(O.id),j()}catch(q){console.error("Failed to force unlock:",q)}},T=O=>{if(O.adminLocked)return e.jsx("span",{className:"px-2 py-1 text-xs font-medium rounded-full bg-red-100 text-red-700",children:"Admin Locked"});switch(O.status){case"ACTIVE":return e.jsx("span",{className:"px-2 py-1 text-xs font-medium rounded-full bg-green-100 text-green-700",children:"Active"});case"LOCKED":return e.jsx("span",{className:"px-2 py-1 text-xs font-medium rounded-full bg-amber-100 text-amber-700",children:"Locked"});case"UNLOCKED":return e.jsx("span",{className:"px-2 py-1 text-xs font-medium rounded-full bg-blue-100 text-blue-700",children:"Unlocked"});case"CLOSED":return e.jsx("span",{className:"px-2 py-1 text-xs font-medium rounded-full bg-gray-100 text-gray-700",children:"Closed"});default:return e.jsx("span",{className:"px-2 py-1 text-xs font-medium rounded-full bg-gray-100 text-gray-700",children:O.status})}};return e.jsxs(Kt,{children:[e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Pots Management"}),e.jsx("p",{className:"text-gray-500 mt-1",children:"Manage all user savings pots"})]}),e.jsxs("button",{onClick:()=>g(!0),className:"inline-flex items-center gap-2 px-4 py-2.5 bg-gray-100 text-gray-700 rounded-xl font-medium hover:bg-gray-200 transition-colors",children:[e.jsx(or,{className:"w-5 h-5"}),"Settings"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsx(W,{children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-primary-100 flex items-center justify-center",children:e.jsx(di,{className:"w-6 h-6 text-primary-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Total Pots"}),e.jsx("p",{className:"text-xl font-bold text-gray-900",children:I})]})]})}),e.jsx(W,{children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-green-100 flex items-center justify-center",children:e.jsx(rr,{className:"w-6 h-6 text-green-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Total Savings"}),e.jsx("p",{className:"text-xl font-bold text-gray-900",children:D(N)})]})]})}),e.jsx(W,{children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-amber-100 flex items-center justify-center",children:e.jsx(Xs,{className:"w-6 h-6 text-amber-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Locked Pots"}),e.jsx("p",{className:"text-xl font-bold text-gray-900",children:P})]})]})}),e.jsx(W,{children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-red-100 flex items-center justify-center",children:e.jsx(ut,{className:"w-6 h-6 text-red-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Admin Locked"}),e.jsx("p",{className:"text-xl font-bold text-gray-900",children:k})]})]})})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(ts,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{type:"text",value:s,onChange:O=>r(O.target.value),placeholder:"Search by name, user, email, or ID...",className:"w-full pl-12 pr-4 py-3 rounded-xl border border-gray-300 focus:border-primary-500 focus:ring-primary-500 transition-colors"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Bn,{className:"w-5 h-5 text-gray-400"}),e.jsxs("select",{value:a,onChange:O=>{n(O.target.value),l(1)},className:"px-4 py-3 rounded-xl border border-gray-300 focus:border-primary-500 focus:ring-primary-500 transition-colors",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"ACTIVE",children:"Active"}),e.jsx("option",{value:"LOCKED",children:"Locked"}),e.jsx("option",{value:"UNLOCKED",children:"Unlocked"}),e.jsx("option",{value:"CLOSED",children:"Closed"})]})]})]}),e.jsxs(W,{padding:"none",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Pot"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"User"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Balance"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Maturity"}),e.jsx("th",{className:"px-6 py-4 text-right text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-100",children:b||E?e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"px-6 py-12 text-center",children:e.jsx(Ie,{className:"w-8 h-8 text-primary-600 animate-spin mx-auto"})})}):R.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"px-6 py-12 text-center text-gray-500",children:"No pots found"})}):R.map(O=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full flex items-center justify-center",style:{backgroundColor:`${O.color||"#4F46E5"}15`},children:e.jsx(di,{className:"w-5 h-5",style:{color:O.color||"#4F46E5"}})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:O.name}),e.jsxs("p",{className:"text-xs text-gray-500 font-mono",children:[O.id.slice(0,8),"..."]})]})]})}),e.jsx("td",{className:"px-6 py-4",children:O.user?e.jsxs("div",{children:[e.jsxs("p",{className:"font-medium text-gray-900",children:[O.user.first_name," ",O.user.last_name]}),e.jsx("p",{className:"text-sm text-gray-500",children:O.user.email})]}):e.jsx("span",{className:"text-gray-400",children:"Unknown"})}),e.jsxs("td",{className:"px-6 py-4",children:[e.jsx("p",{className:"font-medium text-gray-900",children:D(O.currentBalance)}),O.goalAmount&&e.jsxs("p",{className:"text-sm text-gray-500",children:["of ",D(O.goalAmount)]})]}),e.jsxs("td",{className:"px-6 py-4",children:[T(O),O.adminLocked&&O.adminLockReason&&e.jsx("p",{className:"text-xs text-red-600 mt-1",children:O.adminLockReason})]}),e.jsx("td",{className:"px-6 py-4",children:O.lockEndDate?e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-900",children:$(O.lockEndDate)}),new Date(O.lockEndDate)>new Date&&e.jsxs("p",{className:"text-xs text-gray-500",children:[Math.ceil((new Date(O.lockEndDate).getTime()-Date.now())/(1e3*60*60*24))," ","days left"]})]}):e.jsx("span",{className:"text-gray-400",children:"-"})}),e.jsx("td",{className:"px-6 py-4 text-right",children:e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[e.jsx("button",{onClick:()=>t(`/pots/${O.id}`),className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",title:"View",children:e.jsx(es,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>{c(O),u(!0)},className:oe("p-2 rounded-lg transition-colors",O.adminLocked?"text-green-600 hover:bg-green-50":"text-amber-600 hover:bg-amber-50"),title:O.adminLocked?"Unlock":"Lock",children:O.adminLocked?e.jsx(A0,{className:"w-4 h-4"}):e.jsx(Xs,{className:"w-4 h-4"})}),O.lockStatus==="LOCKED"&&!O.adminLocked&&e.jsx("button",{onClick:()=>B(O),className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"Force Unlock",children:e.jsx(Mn,{className:"w-4 h-4"})})]})})]},O.id))})]})}),f&&f.totalPages>1&&e.jsxs("div",{className:"px-6 py-4 border-t border-gray-200 flex items-center justify-between",children:[e.jsxs("p",{className:"text-sm text-gray-600",children:["Page ",i," of ",f.totalPages," (",f.total," total)"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>l(O=>Math.max(1,O-1)),disabled:i===1,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),e.jsx("button",{onClick:()=>l(O=>Math.min(f.totalPages,O+1)),disabled:i===f.totalPages,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"})]})]})]})]}),d&&o&&e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[e.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:()=>{u(!1),c(null),p("")}}),e.jsxs("div",{className:"relative bg-white rounded-2xl shadow-xl w-full max-w-md mx-4 p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-2",children:o.adminLocked?"Unlock Pot":"Lock Pot"}),e.jsx("p",{className:"text-gray-600 mb-4",children:o.adminLocked?`Remove admin lock from "${o.name}"?`:`Add admin lock to "${o.name}"? The user will not be able to withdraw funds.`}),!o.adminLocked&&e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Reason (Required)"}),e.jsx("textarea",{value:m,onChange:O=>p(O.target.value),placeholder:"e.g., Fraud investigation, Compliance review",rows:3,className:"w-full px-4 py-3 rounded-xl border border-gray-300 focus:border-primary-500 focus:ring-primary-500 transition-colors resize-none"})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>{u(!1),c(null),p("")},className:"flex-1 py-2.5 px-4 rounded-xl border border-gray-300 text-gray-700 font-medium hover:bg-gray-50 transition-colors",children:"Cancel"}),e.jsx("button",{onClick:L,disabled:w.isPending||!o.adminLocked&&!m,className:oe("flex-1 py-2.5 px-4 rounded-xl font-medium transition-colors flex items-center justify-center gap-2",o.adminLocked?"bg-green-600 text-white hover:bg-green-700":"bg-red-600 text-white hover:bg-red-700",(w.isPending||!o.adminLocked&&!m)&&"opacity-50 cursor-not-allowed"),children:w.isPending?e.jsxs(e.Fragment,{children:[e.jsx(Ie,{className:"w-4 h-4 animate-spin"}),"Processing..."]}):o.adminLocked?"Unlock Pot":"Lock Pot"})]})]})]}),x&&v&&e.jsx(ide,{settings:v,onClose:()=>g(!1),onUpdate:async(O,q)=>{await C.mutateAsync({key:O,value:q})},isUpdating:C.isPending})]})}function ide({settings:t,onClose:s,onUpdate:r,isUpdating:a}){const[n,i]=h.useState(t),l=async()=>{n.maxPotsPerUser!==t.maxPotsPerUser&&await r("max_pots_per_user",n.maxPotsPerUser),n.minContributionAmount!==t.minContributionAmount&&await r("min_contribution_amount",n.minContributionAmount),n.maxContributionAmount!==t.maxContributionAmount&&await r("max_contribution_amount",n.maxContributionAmount),n.minLockPeriodDays!==t.minLockPeriodDays&&await r("min_lock_period_days",n.minLockPeriodDays),n.maxLockPeriodDays!==t.maxLockPeriodDays&&await r("max_lock_period_days",n.maxLockPeriodDays),n.earlyWithdrawalPenaltyPercent!==t.earlyWithdrawalPenaltyPercent&&await r("early_withdrawal_penalty_percent",n.earlyWithdrawalPenaltyPercent),s()};return e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[e.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:s}),e.jsxs("div",{className:"relative bg-white rounded-2xl shadow-xl w-full max-w-lg mx-4 overflow-hidden",children:[e.jsxs("div",{className:"p-6 border-b border-gray-200",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Pot Settings"}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Configure global pot settings"})]}),e.jsxs("div",{className:"p-6 space-y-4 max-h-[60vh] overflow-y-auto",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Max Pots Per User"}),e.jsx("input",{type:"number",value:n.maxPotsPerUser,onChange:o=>i({...n,maxPotsPerUser:parseInt(o.target.value)||0}),min:"1",max:"100",className:"w-full px-4 py-3 rounded-xl border border-gray-300 focus:border-primary-500 focus:ring-primary-500"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Min Contribution (SLE)"}),e.jsx("input",{type:"number",value:n.minContributionAmount,onChange:o=>i({...n,minContributionAmount:parseFloat(o.target.value)||0}),min:"0",step:"0.01",className:"w-full px-4 py-3 rounded-xl border border-gray-300 focus:border-primary-500 focus:ring-primary-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Max Contribution (SLE)"}),e.jsx("input",{type:"number",value:n.maxContributionAmount,onChange:o=>i({...n,maxContributionAmount:parseFloat(o.target.value)||0}),min:"0",step:"0.01",className:"w-full px-4 py-3 rounded-xl border border-gray-300 focus:border-primary-500 focus:ring-primary-500"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Min Lock Period (Days)"}),e.jsx("input",{type:"number",value:n.minLockPeriodDays,onChange:o=>i({...n,minLockPeriodDays:parseInt(o.target.value)||0}),min:"1",className:"w-full px-4 py-3 rounded-xl border border-gray-300 focus:border-primary-500 focus:ring-primary-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Max Lock Period (Days)"}),e.jsx("input",{type:"number",value:n.maxLockPeriodDays,onChange:o=>i({...n,maxLockPeriodDays:parseInt(o.target.value)||0}),min:"1",className:"w-full px-4 py-3 rounded-xl border border-gray-300 focus:border-primary-500 focus:ring-primary-500"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Early Withdrawal Penalty (%)"}),e.jsx("input",{type:"number",value:n.earlyWithdrawalPenaltyPercent,onChange:o=>i({...n,earlyWithdrawalPenaltyPercent:parseFloat(o.target.value)||0}),min:"0",max:"100",step:"0.1",className:"w-full px-4 py-3 rounded-xl border border-gray-300 focus:border-primary-500 focus:ring-primary-500"})]})]}),e.jsx("div",{className:"p-6 border-t border-gray-200 bg-gray-50",children:e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:s,className:"flex-1 py-2.5 px-4 rounded-xl border border-gray-300 text-gray-700 font-medium hover:bg-gray-100 transition-colors",children:"Cancel"}),e.jsx("button",{onClick:l,disabled:a,className:"flex-1 py-2.5 px-4 rounded-xl bg-primary-600 text-white font-medium hover:bg-primary-700 transition-colors flex items-center justify-center gap-2",children:a?e.jsxs(e.Fragment,{children:[e.jsx(Ie,{className:"w-4 h-4 animate-spin"}),"Saving..."]}):"Save Settings"})]})})]})]})}const xN={ShoppingCart:Mf,Utensils:OV,Briefcase:Sg,Heart:wV,GraduationCap:vV,Monitor:UT,Truck:Sx,Film:fV,Building2:ua,Landmark:$T,Plane:DV,Wheat:$V,Factory:gV,HardHat:jV,Wifi:Mi,HeartHandshake:UC,HandHeart:UC,MoreHorizontal:AV,Store:Ft},lde=Object.keys(xN);function ode(){const[t,s]=h.useState([]),[r,a]=h.useState(!0),[n,i]=h.useState(""),[l,o]=h.useState("all"),[c,d]=h.useState(!1),[u,m]=h.useState(null),[p,x]=h.useState(!1),[g,f]=h.useState(""),[b,j]=h.useState({name:"",description:"",icon:"Store",parent_id:"",sort_order:0}),[v,w]=h.useState(!1),[y,C]=h.useState(null),[S,_]=h.useState(""),[E,A]=h.useState(!1),[R,I]=h.useState(new Set);h.useEffect(()=>{N()},[]);const N=async()=>{a(!0);try{const{data:z,error:re}=await U.from("business_categories").select("*").order("sort_order",{ascending:!0});if(re){console.error("Error fetching categories:",re),s([]);return}const{data:ie}=await U.from("users").select("business_category_id").ilike("roles","%merchant%").not("business_category_id","is",null),Y=new Map;ie==null||ie.forEach(H=>{const ue=H.business_category_id;Y.set(ue,(Y.get(ue)||0)+1)});const G=(z||[]).map(H=>({...H,merchant_count:Y.get(H.id)||0}));s(G)}catch(z){console.error("Error fetching categories:",z),s([])}finally{a(!1)}},P=t.filter(z=>{var Y;const re=z.name.toLowerCase().includes(n.toLowerCase())||((Y=z.description)==null?void 0:Y.toLowerCase().includes(n.toLowerCase())),ie=l==="all"||l==="active"&&z.status==="ACTIVE"||l==="inactive"&&z.status==="INACTIVE";return re&&ie}),k=()=>P.filter(z=>!z.parent_id),D=z=>t.filter(re=>re.parent_id===z),$=z=>{I(re=>{const ie=new Set(re);return ie.has(z)?ie.delete(z):ie.add(z),ie})},L=k(),B=()=>{j({name:"",description:"",icon:"Store",parent_id:"",sort_order:t.length+1}),f(""),m(null)},T=()=>{B(),d(!0)},O=z=>{m(z),j({name:z.name,description:z.description||"",icon:z.icon||"Store",parent_id:z.parent_id||"",sort_order:z.sort_order}),f(""),d(!0)},q=()=>{d(!1),B()},K=async z=>{z.preventDefault(),f(""),x(!0);try{if(!b.name.trim()){f("Category name is required"),x(!1);return}const re={name:b.name.trim(),description:b.description.trim()||null,icon:b.icon,parent_id:b.parent_id||null,sort_order:b.sort_order};if(u){const{error:ie}=await U.from("business_categories").update(re).eq("id",u.id);if(ie){f(ie.message),x(!1);return}}else{const{error:ie}=await U.from("business_categories").insert({...re,status:"ACTIVE"});if(ie){f(ie.message),x(!1);return}}q(),N()}catch(re){console.error("Error saving category:",re),f(re.message||"An unexpected error occurred")}finally{x(!1)}},le=async(z,re)=>{try{const ie=re==="ACTIVE"?"INACTIVE":"ACTIVE",{error:Y}=await U.from("business_categories").update({status:ie}).eq("id",z);if(Y){console.error("Error updating category status:",Y);return}N()}catch(ie){console.error("Error updating category status:",ie)}},X=async z=>{if(confirm("Are you sure you want to delete this category? Merchants using this category will have their category unset."))try{const{error:re}=await U.from("business_categories").delete().eq("id",z);if(re){console.error("Error deleting category:",re),alert("Failed to delete category: "+re.message);return}N()}catch(re){console.error("Error deleting category:",re)}},se=z=>{const re=xN[z||"Store"]||Ft;return e.jsx(re,{className:"w-5 h-5"})},de=z=>{C(z),_(""),w(!0)},fe=async()=>{if(!(!y||!S.trim())){A(!0);try{const z=S.split(",").map(H=>H.trim()).filter(H=>H.length>0);if(z.length===0){A(!1);return}const re=t.filter(H=>H.parent_id===y.id);let ie=re.length>0?Math.max(...re.map(H=>H.sort_order))+1:1;const Y=z.map((H,ue)=>({name:H,description:null,icon:y.icon||"Store",parent_id:y.id,status:"ACTIVE",sort_order:ie+ue})),{error:G}=await U.from("business_categories").insert(Y);if(G){console.error("Error adding subcategories:",G),alert("Failed to add subcategories: "+G.message);return}w(!1),_(""),C(null),N()}catch(z){console.error("Error adding subcategories:",z)}finally{A(!1)}}};return e.jsxs(Kt,{children:[e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Business Categories"}),e.jsx("p",{className:"text-gray-500",children:"Manage business categories for merchant classification"})]}),e.jsxs("button",{onClick:T,className:"px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 flex items-center gap-2",children:[e.jsx(It,{className:"w-4 h-4"}),"Add Category"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[e.jsx(W,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:e.jsx(Sg,{className:"w-5 h-5 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Parent Categories"}),e.jsx("p",{className:"text-xl font-semibold",children:t.filter(z=>!z.parent_id).length})]})]})}),e.jsx(W,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-indigo-100 rounded-lg",children:e.jsx(zs,{className:"w-5 h-5 text-indigo-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Subcategories"}),e.jsx("p",{className:"text-xl font-semibold",children:t.filter(z=>z.parent_id).length})]})]})}),e.jsx(W,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:e.jsx(be,{className:"w-5 h-5 text-green-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Active"}),e.jsx("p",{className:"text-xl font-semibold",children:t.filter(z=>z.status==="ACTIVE").length})]})]})}),e.jsx(W,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-gray-100 rounded-lg",children:e.jsx(ft,{className:"w-5 h-5 text-gray-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Inactive"}),e.jsx("p",{className:"text-xl font-semibold",children:t.filter(z=>z.status==="INACTIVE").length})]})]})}),e.jsx(W,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-purple-100 rounded-lg",children:e.jsx(Ft,{className:"w-5 h-5 text-purple-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Merchants Assigned"}),e.jsx("p",{className:"text-xl font-semibold",children:t.reduce((z,re)=>z+(re.merchant_count||0),0)})]})]})})]}),e.jsx(W,{className:"p-4",children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(ts,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search categories...",value:n,onChange:z=>i(z.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500"})]}),e.jsxs("select",{value:l,onChange:z=>o(z.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"inactive",children:"Inactive"})]})]})}),e.jsxs(W,{className:"overflow-hidden",children:[r?e.jsxs("div",{className:"p-8 text-center",children:[e.jsx("div",{className:"w-8 h-8 border-4 border-primary-600 border-t-transparent rounded-full animate-spin mx-auto"}),e.jsx("p",{className:"mt-2 text-gray-500",children:"Loading categories..."})]}):e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Category"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Description"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Subcategories"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Merchants"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:L.map(z=>{const re=D(z.id),ie=R.has(z.id);return e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg flex items-center justify-center bg-blue-100 text-blue-600",children:se(z.icon)}),e.jsx("div",{children:e.jsx("p",{className:"font-medium text-gray-900",children:z.name})})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("p",{className:"text-sm text-gray-600 max-w-xs truncate",children:z.description||"No description"})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[re.length>0?e.jsxs("button",{onClick:()=>$(z.id),className:"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium bg-indigo-100 text-indigo-700 hover:bg-indigo-200 transition-colors",children:[ie?e.jsx(FT,{className:"w-3 h-3"}):e.jsx(zs,{className:"w-3 h-3"}),re.length," subcategories"]}):e.jsx("span",{className:"text-xs text-gray-400",children:"No subcategories"}),e.jsxs("button",{onClick:()=>de(z),className:"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-700 hover:bg-green-200 transition-colors",title:"Add subcategories",children:[e.jsx(It,{className:"w-3 h-3"}),"Add"]})]}),ie&&re.length>0&&e.jsx("div",{className:"flex flex-wrap gap-1 mt-2 p-2 bg-gray-50 rounded-lg max-w-md",children:re.map(Y=>e.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium ${Y.status==="ACTIVE"?"bg-white border border-gray-200 text-gray-700":"bg-gray-200 text-gray-500"}`,children:[Y.name,e.jsx("button",{onClick:()=>O(Y),className:"hover:text-primary-600",title:"Edit",children:e.jsx(Nl,{className:"w-3 h-3"})}),e.jsx("button",{onClick:()=>X(Y.id),className:"hover:text-red-600",title:"Delete",children:e.jsx(lt,{className:"w-3 h-3"})})]},Y.id))})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-purple-100 text-purple-700",children:[z.merchant_count||0," merchants"]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${z.status==="ACTIVE"?"bg-green-100 text-green-700":"bg-gray-100 text-gray-700"}`,children:z.status==="ACTIVE"?"Active":"Inactive"})}),e.jsx("td",{className:"px-6 py-4 text-right",children:e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[e.jsx("button",{onClick:()=>O(z),className:"p-2 hover:bg-gray-100 rounded-lg",title:"Edit",children:e.jsx(Nl,{className:"w-4 h-4 text-gray-500"})}),e.jsx("button",{onClick:()=>le(z.id,z.status),className:`p-2 hover:bg-gray-100 rounded-lg ${z.status==="ACTIVE"?"text-yellow-500":"text-green-500"}`,title:z.status==="ACTIVE"?"Deactivate":"Activate",children:z.status==="ACTIVE"?e.jsx(ft,{className:"w-4 h-4"}):e.jsx(be,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>X(z.id),className:"p-2 hover:bg-gray-100 rounded-lg text-red-500",title:"Delete",children:e.jsx(Or,{className:"w-4 h-4"})})]})})]},z.id)})})]}),!r&&L.length===0&&e.jsxs("div",{className:"p-8 text-center",children:[e.jsx(Sg,{className:"w-12 h-12 text-gray-300 mx-auto mb-3"}),e.jsx("p",{className:"text-gray-500",children:"No categories found"})]})]})]}),c&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md mx-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:u?"Edit Category":"Add New Category"}),e.jsx("button",{onClick:q,className:"p-1 hover:bg-gray-100 rounded-lg",children:e.jsx(lt,{className:"w-5 h-5 text-gray-500"})})]}),e.jsxs("form",{onSubmit:K,className:"p-4 space-y-4",children:[g&&e.jsx("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg text-red-700 text-sm",children:g}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Category Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:b.name,onChange:z=>j({...b,name:z.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",placeholder:"e.g., Retail & Shopping",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),e.jsx("textarea",{value:b.description,onChange:z=>j({...b,description:z.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",placeholder:"Brief description of this category",rows:2})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Icon"}),e.jsx("div",{className:"grid grid-cols-6 gap-2 mb-2",children:lde.map(z=>{const re=xN[z];return e.jsx("button",{type:"button",onClick:()=>j({...b,icon:z}),className:`p-2 rounded-lg border-2 transition-colors ${b.icon===z?"border-primary-500 bg-primary-50 text-primary-600":"border-gray-200 hover:border-gray-300 text-gray-500"}`,title:z,children:e.jsx(re,{className:"w-5 h-5 mx-auto"})},z)})}),e.jsxs("p",{className:"text-xs text-gray-500",children:["Selected: ",b.icon]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Parent Category (Optional - for subcategories)"}),e.jsxs("select",{value:b.parent_id,onChange:z=>j({...b,parent_id:z.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",children:[e.jsx("option",{value:"",children:"None (This is a parent category)"}),t.filter(z=>z.id!==(u==null?void 0:u.id)&&!z.parent_id).map(z=>e.jsx("option",{value:z.id,children:z.name},z.id))]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Select a parent to create a subcategory, or leave empty for a main category"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Sort Order"}),e.jsx("input",{type:"number",value:b.sort_order,onChange:z=>j({...b,sort_order:parseInt(z.target.value)||0}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",min:0}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Lower numbers appear first"})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx("button",{type:"button",onClick:q,className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:p,className:"flex-1 px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:p?e.jsxs(e.Fragment,{children:[e.jsx(Ie,{className:"w-4 h-4 animate-spin"}),u?"Updating...":"Creating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(oa,{className:"w-4 h-4"}),u?"Update Category":"Create Category"]})})]})]})]})}),v&&y&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-lg mx-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Add Subcategories"}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Adding to: ",e.jsx("span",{className:"font-medium text-primary-600",children:y.name})]})]}),e.jsx("button",{onClick:()=>{w(!1),C(null),_("")},className:"p-1 hover:bg-gray-100 rounded-lg",children:e.jsx(lt,{className:"w-5 h-5 text-gray-500"})})]}),e.jsxs("div",{className:"p-4 space-y-4",children:[D(y.id).length>0&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Existing Subcategories"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:D(y.id).map(z=>e.jsx("span",{className:"inline-flex items-center px-2 py-1 bg-gray-100 text-gray-700 rounded-full text-xs",children:z.name},z.id))})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["New Subcategories ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("textarea",{value:S,onChange:z=>_(z.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",placeholder:"Enter subcategory names separated by commas, e.g.: Clothing, Electronics, Home & Garden",rows:3,autoFocus:!0}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Separate multiple subcategories with commas (,)"})]}),S.trim()&&e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Preview (",S.split(",").filter(z=>z.trim()).length," subcategories)"]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:S.split(",").map(z=>z.trim()).filter(z=>z.length>0).map((z,re)=>e.jsxs("span",{className:"inline-flex items-center px-2 py-1 bg-green-100 text-green-700 rounded-full text-xs",children:[e.jsx(It,{className:"w-3 h-3 mr-1"}),z]},re))})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>{w(!1),C(null),_("")},className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{onClick:fe,disabled:E||!S.trim(),className:"flex-1 px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:E?e.jsxs(e.Fragment,{children:[e.jsx(Ie,{className:"w-4 h-4 animate-spin"}),"Adding..."]}):e.jsxs(e.Fragment,{children:[e.jsx(It,{className:"w-4 h-4"}),"Add Subcategories"]})})]})]})]})})]})}const Ai={async getMyBusinesses(){const t=localStorage.getItem("accessToken");if(!t)throw new Error("Not authenticated");let s;try{const n=JSON.parse(atob(t));if(n.exp<Date.now())throw new Error("Session expired");s=n.userId}catch{throw new Error("Invalid session")}const{data:r,error:a}=await U.from("merchant_businesses").select(`
        *,
        business_category:business_categories(id, name, icon)
      `).eq("merchant_id",s).order("created_at",{ascending:!1});if(a)throw console.error("Error fetching businesses:",a),new Error(a.message);return r||[]},async getBusiness(t){const{data:s,error:r}=await U.from("merchant_businesses").select(`
        *,
        business_category:business_categories(id, name, icon)
      `).eq("id",t).single();if(r)throw console.error("Error fetching business:",r),new Error(r.message);return s},async createBusiness(t){const s=localStorage.getItem("accessToken");if(!s)throw new Error("Not authenticated");let r;try{const i=JSON.parse(atob(s));if(i.exp<Date.now())throw new Error("Session expired");r=i.userId}catch{throw new Error("Invalid session")}const{data:a,error:n}=await U.from("merchant_businesses").insert({merchant_id:r,name:t.name,description:t.description||null,business_category_id:t.business_category_id||null,email:t.email||null,phone:t.phone||null,address:t.address||null,city:t.city||null,website_url:t.website_url||null,logo_url:t.logo_url||null}).select(`
        *,
        business_category:business_categories(id, name, icon)
      `).single();if(n)throw console.error("Error creating business:",n),new Error(n.message);return a},async updateBusiness(t,s){const{data:r,error:a}=await U.from("merchant_businesses").update(s).eq("id",t).select(`
        *,
        business_category:business_categories(id, name, icon)
      `).single();if(a)throw console.error("Error updating business:",a),new Error(a.message);return r},async toggleLiveMode(t,s){const r=await this.getBusiness(t);if(s&&r.approval_status!=="APPROVED"){if(r.approval_status==="REJECTED")throw new Error("Business has been rejected. Please contact support.");if(r.approval_status==="SUSPENDED")throw new Error("Business has been suspended. Please contact support.");if(r.approval_status==="PENDING"){const i=r.trial_live_transaction_limit||2,l=r.trial_live_transactions_used||0;if(i-l<=0)throw new Error(`You have used all ${i} trial live transactions. Please wait for admin approval to continue processing live payments.`)}}const{data:a,error:n}=await U.from("merchant_businesses").update({is_live_mode:s}).eq("id",t).select().single();if(n)throw console.error("Error toggling live mode:",n),new Error(n.message);return a},canProcessLiveTransaction(t){if(t.approval_status==="APPROVED")return{allowed:!0};if(t.approval_status==="REJECTED")return{allowed:!1,reason:"Business has been rejected. Please contact support."};if(t.approval_status==="SUSPENDED")return{allowed:!1,reason:"Business has been suspended. Please contact support."};const s=t.trial_live_transaction_limit||2,r=t.trial_live_transactions_used||0,a=s-r;return a<=0?{allowed:!1,reason:`You have used all ${s} trial live transactions. Please wait for admin approval to continue processing live payments.`,remaining:0}:{allowed:!0,remaining:a,reason:`${a} trial live transaction(s) remaining before approval required`}},async incrementTrialTransactionCount(t){const s=await this.getBusiness(t);if(s.approval_status!=="PENDING")return null;const{data:r,error:a}=await U.from("merchant_businesses").update({trial_live_transactions_used:(s.trial_live_transactions_used||0)+1}).eq("id",t).select().single();return a?(console.error("Error incrementing trial transaction count:",a),null):r},getTransactionLimitsInfo(t){if(t.approval_status==="APPROVED")return{testTransactions:"Unlimited",liveTransactions:"Unlimited",status:"unlimited"};if(t.approval_status==="REJECTED"||t.approval_status==="SUSPENDED")return{testTransactions:"Unlimited",liveTransactions:"Blocked",status:"blocked"};const s=t.trial_live_transaction_limit||2,r=t.trial_live_transactions_used||0;return{testTransactions:"Unlimited",liveTransactions:`${Math.max(0,s-r)} of ${s} trial remaining`,status:"trial"}},async regenerateApiKeys(t,s){const r=s==="live"?{live_public_key:null,live_secret_key:null}:{test_public_key:null,test_secret_key:null},{data:a,error:n}=await U.from("merchant_businesses").update(r).eq("id",t).select().single();if(n)throw console.error("Error regenerating API keys:",n),new Error(n.message);return a},async deleteBusiness(t){const{error:s}=await U.from("merchant_businesses").delete().eq("id",t);if(s)throw console.error("Error deleting business:",s),new Error(s.message)},async getAllBusinesses(t){let s=U.from("merchant_businesses").select(`
        *,
        business_category:business_categories(id, name, icon),
        merchant:users!merchant_id(id, first_name, last_name, email)
      `).order("created_at",{ascending:!1});t!=null&&t.approval_status&&t.approval_status!=="all"&&(s=s.eq("approval_status",t.approval_status)),t!=null&&t.status&&t.status!=="all"&&(s=s.eq("status",t.status));const{data:r,error:a}=await s;if(a)throw console.error("Error fetching all businesses:",a),new Error(a.message);let n=r||[];if(t!=null&&t.search){const i=t.search.toLowerCase();n=n.filter(l=>{var o,c,d,u,m;return l.name.toLowerCase().includes(i)||((o=l.email)==null?void 0:o.toLowerCase().includes(i))||((d=(c=l.merchant)==null?void 0:c.email)==null?void 0:d.toLowerCase().includes(i))||`${(u=l.merchant)==null?void 0:u.first_name} ${(m=l.merchant)==null?void 0:m.last_name}`.toLowerCase().includes(i)})}return n},async approveBusiness(t,s,r){const{data:a,error:n}=await U.from("merchant_businesses").update({approval_status:"APPROVED",approved_by:s,approved_at:new Date().toISOString(),approval_notes:r||"Approved by admin"}).eq("id",t).select().single();if(n)throw console.error("Error approving business:",n),new Error(n.message);return a},async rejectBusiness(t,s,r){const{data:a,error:n}=await U.from("merchant_businesses").update({approval_status:"REJECTED",approved_by:s,approved_at:new Date().toISOString(),approval_notes:r}).eq("id",t).select().single();if(n)throw console.error("Error rejecting business:",n),new Error(n.message);return a},async suspendBusiness(t,s,r){const{data:a,error:n}=await U.from("merchant_businesses").update({approval_status:"SUSPENDED",status:"SUSPENDED",approved_by:s,approval_notes:r,is_live_mode:!1}).eq("id",t).select().single();if(n)throw console.error("Error suspending business:",n),new Error(n.message);return a},async reactivateBusiness(t,s){const{data:r,error:a}=await U.from("merchant_businesses").update({approval_status:"APPROVED",status:"ACTIVE",approved_by:s,approval_notes:"Reactivated by admin"}).eq("id",t).select().single();if(a)throw console.error("Error reactivating business:",a),new Error(a.message);return r}};function cde(){var D,$;const{user:t}=wt(),[s,r]=h.useState([]),[a,n]=h.useState(!0),[i,l]=h.useState(""),[o,c]=h.useState("all"),[d,u]=h.useState("all"),[m,p]=h.useState(null),[x,g]=h.useState(!1),[f,b]=h.useState(!1),[j,v]=h.useState(""),[w,y]=h.useState(!1);h.useEffect(()=>{C()},[o,d]);const C=async()=>{n(!0);try{const L=await Ai.getAllBusinesses({status:o,approval_status:d,search:i});r(L)}catch(L){console.error("Error fetching businesses:",L)}finally{n(!1)}},S=()=>{C()},_=async L=>{if(t){b(!0);try{await Ai.approveBusiness(L.id,t.id,"Approved by admin"),C(),g(!1)}catch(B){console.error("Error approving business:",B)}finally{b(!1)}}},E=async()=>{if(!(!t||!m||!j)){b(!0);try{await Ai.rejectBusiness(m.id,t.id,j),C(),y(!1),g(!1),v("")}catch(L){console.error("Error rejecting business:",L)}finally{b(!1)}}},A=async L=>{if(!t)return;const B=prompt("Enter reason for suspension:");if(B){b(!0);try{await Ai.suspendBusiness(L.id,t.id,B),C(),g(!1)}catch(T){console.error("Error suspending business:",T)}finally{b(!1)}}},R=async L=>{if(t){b(!0);try{await Ai.reactivateBusiness(L.id,t.id),C(),g(!1)}catch(B){console.error("Error reactivating business:",B)}finally{b(!1)}}},I=L=>{const B={PENDING:{color:"bg-yellow-100 text-yellow-700",icon:e.jsx(it,{className:"w-3 h-3"}),label:"Pending"},APPROVED:{color:"bg-green-100 text-green-700",icon:e.jsx(be,{className:"w-3 h-3"}),label:"Approved"},REJECTED:{color:"bg-red-100 text-red-700",icon:e.jsx(ft,{className:"w-3 h-3"}),label:"Rejected"},SUSPENDED:{color:"bg-gray-100 text-gray-700",icon:e.jsx(hl,{className:"w-3 h-3"}),label:"Suspended"}},T=B[L]||B.PENDING;return e.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium ${T.color}`,children:[T.icon,T.label]})},N=L=>{const B=L==="ACTIVE";return e.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${B?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:B?"Active":"Inactive"})},P=i?s.filter(L=>{var B,T,O;return L.name.toLowerCase().includes(i.toLowerCase())||((B=L.email)==null?void 0:B.toLowerCase().includes(i.toLowerCase()))||((O=(T=L.merchant)==null?void 0:T.email)==null?void 0:O.toLowerCase().includes(i.toLowerCase()))}):s,k={total:s.length,pending:s.filter(L=>L.approval_status==="PENDING").length,approved:s.filter(L=>L.approval_status==="APPROVED").length,live:s.filter(L=>L.is_live_mode).length};return e.jsxs(Kt,{children:[e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Business Management"}),e.jsx("p",{className:"text-gray-500",children:"Review and manage merchant businesses"})]}),e.jsxs("button",{onClick:C,className:"px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 flex items-center gap-2",children:[e.jsx(vt,{className:"w-4 h-4"}),"Refresh"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx(W,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:e.jsx(Ft,{className:"w-5 h-5 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Total Businesses"}),e.jsx("p",{className:"text-xl font-semibold",children:k.total})]})]})}),e.jsx(W,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-yellow-100 rounded-lg",children:e.jsx(it,{className:"w-5 h-5 text-yellow-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Pending Approval"}),e.jsx("p",{className:"text-xl font-semibold",children:k.pending})]})]})}),e.jsx(W,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:e.jsx(be,{className:"w-5 h-5 text-green-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Approved"}),e.jsx("p",{className:"text-xl font-semibold",children:k.approved})]})]})}),e.jsx(W,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-purple-100 rounded-lg",children:e.jsx(wl,{className:"w-5 h-5 text-purple-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Live Mode"}),e.jsx("p",{className:"text-xl font-semibold",children:k.live})]})]})})]}),e.jsx(W,{className:"p-4",children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(ts,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search by business name or merchant email...",value:i,onChange:L=>l(L.target.value),onKeyDown:L=>L.key==="Enter"&&S(),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500"})]}),e.jsxs("select",{value:d,onChange:L=>u(L.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",children:[e.jsx("option",{value:"all",children:"All Approval Status"}),e.jsx("option",{value:"PENDING",children:"Pending"}),e.jsx("option",{value:"APPROVED",children:"Approved"}),e.jsx("option",{value:"REJECTED",children:"Rejected"}),e.jsx("option",{value:"SUSPENDED",children:"Suspended"})]}),e.jsxs("select",{value:o,onChange:L=>c(L.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"ACTIVE",children:"Active"}),e.jsx("option",{value:"INACTIVE",children:"Inactive"}),e.jsx("option",{value:"SUSPENDED",children:"Suspended"})]})]})}),e.jsxs(W,{className:"overflow-hidden",children:[a?e.jsxs("div",{className:"p-8 text-center",children:[e.jsx(Ie,{className:"w-8 h-8 animate-spin text-primary-600 mx-auto"}),e.jsx("p",{className:"mt-2 text-gray-500",children:"Loading businesses..."})]}):e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Business"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Merchant"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Approval"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Mode"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Progress"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Created"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:P.map(L=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-primary-100 rounded-lg flex items-center justify-center",children:e.jsx(Ft,{className:"w-5 h-5 text-primary-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:L.name}),e.jsx("p",{className:"text-sm text-gray-500",children:L.slug})]})]})}),e.jsx("td",{className:"px-6 py-4",children:L.merchant&&e.jsxs("div",{children:[e.jsxs("p",{className:"text-sm font-medium text-gray-900",children:[L.merchant.first_name," ",L.merchant.last_name]}),e.jsx("p",{className:"text-sm text-gray-500",children:L.merchant.email})]})}),e.jsx("td",{className:"px-6 py-4",children:I(L.approval_status)}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${L.is_live_mode?"bg-green-100 text-green-700":"bg-orange-100 text-orange-700"}`,children:L.is_live_mode?"Live":"Test"})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"flex-1 bg-gray-200 rounded-full h-2 w-20",children:e.jsx("div",{className:"bg-primary-600 h-2 rounded-full transition-all",style:{width:`${(L.sandbox_transactions_used||0)/(L.sandbox_transaction_limit||1)*100}%`}})}),e.jsxs("span",{className:"text-xs text-gray-500",children:[L.sandbox_transactions_used||0,"/",L.sandbox_transaction_limit||0]})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("p",{className:"text-sm text-gray-500",children:new Date(L.created_at).toLocaleDateString()})}),e.jsx("td",{className:"px-6 py-4 text-right",children:e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[e.jsx("button",{onClick:()=>{p(L),g(!0)},className:"p-2 hover:bg-gray-100 rounded-lg",title:"View Details",children:e.jsx(es,{className:"w-4 h-4 text-gray-500"})}),L.approval_status==="PENDING"&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>_(L),disabled:f,className:"p-2 hover:bg-green-100 rounded-lg text-green-600",title:"Approve",children:e.jsx(be,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>{p(L),y(!0)},disabled:f,className:"p-2 hover:bg-red-100 rounded-lg text-red-600",title:"Reject",children:e.jsx(ft,{className:"w-4 h-4"})})]}),L.approval_status==="APPROVED"&&e.jsx("button",{onClick:()=>A(L),disabled:f,className:"p-2 hover:bg-red-100 rounded-lg text-red-600",title:"Suspend",children:e.jsx(hl,{className:"w-4 h-4"})}),L.approval_status==="SUSPENDED"&&e.jsx("button",{onClick:()=>R(L),disabled:f,className:"p-2 hover:bg-green-100 rounded-lg text-green-600",title:"Reactivate",children:e.jsx(vt,{className:"w-4 h-4"})})]})})]},L.id))})]}),!a&&P.length===0&&e.jsxs("div",{className:"p-8 text-center",children:[e.jsx(Ft,{className:"w-12 h-12 text-gray-300 mx-auto mb-3"}),e.jsx("p",{className:"text-gray-500",children:"No businesses found"})]})]})]}),x&&m&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b sticky top-0 bg-white",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Business Details"}),e.jsx("button",{onClick:()=>g(!1),className:"p-1 hover:bg-gray-100 rounded-lg",children:e.jsx(lt,{className:"w-5 h-5 text-gray-500"})})]}),e.jsxs("div",{className:"p-4 space-y-6",children:[e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"w-16 h-16 bg-primary-100 rounded-lg flex items-center justify-center",children:e.jsx(Ft,{className:"w-8 h-8 text-primary-600"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:m.name}),e.jsx("p",{className:"text-gray-500",children:m.slug}),e.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[I(m.approval_status),N(m.status),e.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${m.is_live_mode?"bg-green-100 text-green-700":"bg-orange-100 text-orange-700"}`,children:m.is_live_mode?"Live Mode":"Test Mode"})]})]})]}),m.merchant&&e.jsxs(W,{className:"p-4",children:[e.jsxs("h4",{className:"font-medium text-gray-900 mb-3 flex items-center gap-2",children:[e.jsx(Es,{className:"w-4 h-4"}),"Merchant Owner"]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Name"}),e.jsxs("p",{className:"font-medium",children:[m.merchant.first_name," ",m.merchant.last_name]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Email"}),e.jsx("p",{className:"font-medium",children:m.merchant.email})]})]})]}),e.jsxs(W,{className:"p-4",children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-3",children:"Business Information"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[m.email&&e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(Va,{className:"w-4 h-4 text-gray-400"}),e.jsx("span",{children:m.email})]}),m.phone&&e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(lr,{className:"w-4 h-4 text-gray-400"}),e.jsx("span",{children:m.phone})]}),m.website_url&&e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(li,{className:"w-4 h-4 text-gray-400"}),e.jsxs("a",{href:m.website_url,target:"_blank",rel:"noopener noreferrer",className:"text-primary-600 hover:underline flex items-center gap-1",children:[m.website_url,e.jsx(Fr,{className:"w-3 h-3"})]})]}),(m.address||m.city)&&e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(Vi,{className:"w-4 h-4 text-gray-400"}),e.jsx("span",{children:[m.address,m.city,m.country].filter(Boolean).join(", ")})]}),m.business_category&&e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(ua,{className:"w-4 h-4 text-gray-400"}),e.jsx("span",{children:m.business_category.name})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(Mn,{className:"w-4 h-4 text-gray-400"}),e.jsxs("span",{children:["Created ",new Date(m.created_at).toLocaleDateString()]})]})]}),m.description&&e.jsx("div",{className:"mt-4 pt-4 border-t",children:e.jsx("p",{className:"text-sm text-gray-600",children:m.description})})]}),e.jsxs(W,{className:"p-4",children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-3",children:"Sandbox Progress"}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsx("div",{className:"bg-gray-200 rounded-full h-3",children:e.jsx("div",{className:"bg-primary-600 h-3 rounded-full transition-all",style:{width:`${(m.sandbox_transactions_used||0)/(m.sandbox_transaction_limit||1)*100}%`}})})}),e.jsxs("span",{className:"text-sm font-medium text-gray-700",children:[m.sandbox_transactions_used||0," / ",m.sandbox_transaction_limit||0]})]}),e.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Test transactions completed before live mode eligibility"})]}),e.jsxs(W,{className:"p-4",children:[e.jsxs("h4",{className:"font-medium text-gray-900 mb-3 flex items-center gap-2",children:[e.jsx(wl,{className:"w-4 h-4"}),"API Keys"]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500 mb-1",children:"Test Public Key"}),e.jsxs("code",{className:"text-xs bg-gray-100 px-2 py-1 rounded",children:[(D=m.test_public_key)==null?void 0:D.substring(0,20),"..."]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500 mb-1",children:"Live Public Key"}),e.jsxs("code",{className:"text-xs bg-gray-100 px-2 py-1 rounded",children:[($=m.live_public_key)==null?void 0:$.substring(0,20),"..."]})]})]})]}),m.approval_notes&&e.jsxs(W,{className:"p-4",children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Approval Notes"}),e.jsx("p",{className:"text-sm text-gray-600",children:m.approval_notes}),m.approved_at&&e.jsxs("p",{className:"text-xs text-gray-400 mt-2",children:[m.approval_status==="APPROVED"?"Approved":"Reviewed"," on"," ",new Date(m.approved_at).toLocaleString()]})]}),e.jsxs("div",{className:"flex gap-3 pt-4 border-t",children:[m.approval_status==="PENDING"&&e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:()=>_(m),disabled:f,className:"flex-1 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50 flex items-center justify-center gap-2",children:[f?e.jsx(Ie,{className:"w-4 h-4 animate-spin"}):e.jsx(be,{className:"w-4 h-4"}),"Approve Business"]}),e.jsxs("button",{onClick:()=>y(!0),disabled:f,className:"flex-1 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 disabled:opacity-50 flex items-center justify-center gap-2",children:[e.jsx(ft,{className:"w-4 h-4"}),"Reject"]})]}),m.approval_status==="APPROVED"&&e.jsxs("button",{onClick:()=>A(m),disabled:f,className:"flex-1 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 disabled:opacity-50 flex items-center justify-center gap-2",children:[e.jsx(hl,{className:"w-4 h-4"}),"Suspend Business"]}),m.approval_status==="SUSPENDED"&&e.jsxs("button",{onClick:()=>R(m),disabled:f,className:"flex-1 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50 flex items-center justify-center gap-2",children:[e.jsx(vt,{className:"w-4 h-4"}),"Reactivate Business"]}),e.jsx("button",{onClick:()=>g(!1),className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50",children:"Close"})]})]})]})}),w&&m&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md",children:[e.jsx("div",{className:"p-4 border-b",children:e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Reject Business"})}),e.jsxs("div",{className:"p-4 space-y-4",children:[e.jsxs("p",{className:"text-gray-600",children:["Please provide a reason for rejecting ",e.jsx("strong",{children:m.name}),". This will be visible to the merchant."]}),e.jsx("textarea",{value:j,onChange:L=>v(L.target.value),placeholder:"Enter rejection reason...",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500",rows:4}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>{y(!1),v("")},className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{onClick:E,disabled:f||!j,className:"flex-1 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 disabled:opacity-50 flex items-center justify-center gap-2",children:f?e.jsx(Ie,{className:"w-4 h-4 animate-spin"}):"Reject Business"})]})]})]})})]})}const dde=[{id:"TKT-001",subject:"Cannot access my wallet",user:"john@example.com",status:"open",priority:"high",createdAt:"2024-01-15"},{id:"TKT-002",subject:"Transaction failed but money deducted",user:"mary@example.com",status:"in_progress",priority:"high",createdAt:"2024-01-14"},{id:"TKT-003",subject:"Card not working at merchant",user:"peter@example.com",status:"resolved",priority:"medium",createdAt:"2024-01-13"}],ude={open:"bg-yellow-100 text-yellow-800",in_progress:"bg-blue-100 text-blue-800",resolved:"bg-green-100 text-green-800",closed:"bg-gray-100 text-gray-800"},mde={low:"bg-gray-100 text-gray-800",medium:"bg-orange-100 text-orange-800",high:"bg-red-100 text-red-800"};function hde(){const[t]=h.useState(dde),[s,r]=h.useState(""),a=t.filter(n=>n.subject.toLowerCase().includes(s.toLowerCase())||n.user.toLowerCase().includes(s.toLowerCase())||n.id.toLowerCase().includes(s.toLowerCase()));return e.jsx(Kt,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Support Tickets"}),e.jsx("p",{className:"text-gray-500 mt-1",children:"Manage customer support requests"})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx(W,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-yellow-100 rounded-lg",children:e.jsx(ut,{className:"w-5 h-5 text-yellow-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold",children:t.filter(n=>n.status==="open").length}),e.jsx("p",{className:"text-sm text-gray-500",children:"Open"})]})]})}),e.jsx(W,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:e.jsx(it,{className:"w-5 h-5 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold",children:t.filter(n=>n.status==="in_progress").length}),e.jsx("p",{className:"text-sm text-gray-500",children:"In Progress"})]})]})}),e.jsx(W,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:e.jsx(be,{className:"w-5 h-5 text-green-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold",children:t.filter(n=>n.status==="resolved").length}),e.jsx("p",{className:"text-sm text-gray-500",children:"Resolved"})]})]})}),e.jsx(W,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-gray-100 rounded-lg",children:e.jsx(Ao,{className:"w-5 h-5 text-gray-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold",children:t.length}),e.jsx("p",{className:"text-sm text-gray-500",children:"Total"})]})]})})]}),e.jsxs(W,{children:[e.jsx(Sr,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(_r,{children:"All Tickets"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"relative",children:[e.jsx(ts,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),e.jsx("input",{type:"text",value:s,onChange:n=>r(n.target.value),placeholder:"Search tickets...",className:"pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500"})]}),e.jsxs(De,{variant:"outline",children:[e.jsx(Bn,{className:"w-4 h-4 mr-2"}),"Filter"]})]})]})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"ID"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Subject"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"User"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Priority"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Created"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:a.map(n=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 text-sm font-mono text-gray-900",children:n.id}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-900",children:n.subject}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-500",children:n.user}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${ude[n.status]}`,children:n.status.replace("_"," ")})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${mde[n.priority]}`,children:n.priority})}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-500",children:n.createdAt}),e.jsx("td",{className:"px-6 py-4",children:e.jsx(De,{variant:"ghost",size:"sm",children:"View"})})]},n.id))})]})})]})]})})}function kE(){const{token:t}=hi(),s=At(),[r,a]=h.useState(null),[n,i]=h.useState("loading"),[l,o]=h.useState(null),[c,d]=h.useState(0),[u,m]=h.useState(!1),[p,x]=h.useState(!1),g=(w,y)=>y==="SLE"||y==="SLL"?`Le ${new Intl.NumberFormat("en-US",{minimumFractionDigits:0}).format(w)}`:new Intl.NumberFormat("en-US",{style:"currency",currency:y,minimumFractionDigits:2}).format(w/100),f=w=>{const y=Math.floor(w/60),C=w%60;return`${y}:${C.toString().padStart(2,"0")}`},b=h.useCallback(async()=>{var w,y,C,S,_,E;if(!t){o("Invalid payment link"),i("failed");return}try{const A=await fetch("/api/session/verify",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:t})});if(!A.ok)throw new Error("Failed to verify session");const R=await A.json();if(!R.valid){o(R.error||"Invalid or expired payment link"),i("expired");return}const I={sessionId:((w=R.session)==null?void 0:w.id)||"ps_demo_123",merchantName:((y=R.session)==null?void 0:y.merchantName)||"Demo Store",amount:((C=R.session)==null?void 0:C.amount)||5e3,currency:((S=R.session)==null?void 0:S.currency)||"USD",description:((_=R.session)==null?void 0:_.description)||"Payment",expiresAt:((E=R.session)==null?void 0:E.expiresAt)||new Date(Date.now()+9e5).toISOString(),deepLink:`peeappay://pay?token=${t}`,universalLink:`https://pay.peeap.com/app/pay?token=${t}`,qrUrl:`https://pay.peeap.com/t/${t}`,isExpired:!1};a(I),i("ready");const N=new Date(I.expiresAt).getTime(),P=Math.max(0,Math.floor((N-Date.now())/1e3));d(P)}catch(A){console.error("Session fetch error:",A);const R={sessionId:"ps_demo_123",merchantName:"Demo Store",amount:5e3,currency:"USD",description:"Demo Payment",expiresAt:new Date(Date.now()+9e5).toISOString(),deepLink:`peeappay://pay?token=${t}`,universalLink:`https://pay.peeap.com/app/pay?token=${t}`,qrUrl:`https://pay.peeap.com/t/${t}`,isExpired:!1};a(R),i("ready"),d(900)}},[t]);h.useEffect(()=>{m("NDEFReader"in window);const w=navigator.userAgent.toLowerCase(),y=/iphone|ipad|android/.test(w);x(y)},[]),h.useEffect(()=>{b()},[b]),h.useEffect(()=>{if(c<=0||n!=="ready")return;const w=setInterval(()=>{d(y=>y<=1?(i("expired"),0):y-1)},1e3);return()=>clearInterval(w)},[c,n]);const j=()=>{r&&(window.location.href=r.deepLink,setTimeout(()=>{window.location.href=r.universalLink},500))},v=()=>{i("processing"),setTimeout(()=>{i("success")},2e3)};return n==="loading"?e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Ie,{className:"w-12 h-12 text-primary-600 animate-spin mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Loading payment..."})]})}):n==="failed"||n==="expired"?e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"max-w-md w-full bg-white rounded-2xl shadow-lg p-8 text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(ft,{className:"w-8 h-8 text-red-600"})}),e.jsx("h1",{className:"text-xl font-bold text-gray-900 mb-2",children:n==="expired"?"Payment Expired":"Payment Failed"}),e.jsx("p",{className:"text-gray-600 mb-6",children:l||"This payment link is no longer valid. Please request a new payment link."}),e.jsx("button",{onClick:()=>s("/"),className:"px-6 py-3 bg-gray-100 text-gray-700 rounded-lg font-medium hover:bg-gray-200 transition-colors",children:"Return Home"})]})}):n==="success"?e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"max-w-md w-full bg-white rounded-2xl shadow-lg p-8 text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(be,{className:"w-8 h-8 text-green-600"})}),e.jsx("h1",{className:"text-xl font-bold text-gray-900 mb-2",children:"Payment Successful!"}),e.jsxs("p",{className:"text-gray-600 mb-2",children:["Thank you for your payment to ",r==null?void 0:r.merchantName]}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 mb-6",children:r&&g(r.amount,r.currency)}),e.jsxs("div",{className:"text-sm text-gray-500 mb-6",children:["Transaction ID: ",r==null?void 0:r.sessionId]}),e.jsx("button",{onClick:()=>s("/"),className:"px-6 py-3 bg-primary-600 text-white rounded-lg font-medium hover:bg-primary-700 transition-colors",children:"Done"})]})}):n==="processing"?e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"max-w-md w-full bg-white rounded-2xl shadow-lg p-8 text-center",children:[e.jsx(Ie,{className:"w-12 h-12 text-primary-600 animate-spin mx-auto mb-4"}),e.jsx("h1",{className:"text-xl font-bold text-gray-900 mb-2",children:"Processing Payment"}),e.jsx("p",{className:"text-gray-600",children:"Please wait while we process your payment..."})]})}):e.jsx("div",{className:"min-h-screen bg-gradient-to-b from-primary-600 to-primary-800 flex items-center justify-center p-4",children:e.jsxs("div",{className:"max-w-md w-full",children:[e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl overflow-hidden",children:[e.jsxs("div",{className:"bg-primary-600 text-white p-6 text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-white/20 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(Je,{className:"w-8 h-8"})}),e.jsx("h1",{className:"text-xl font-bold mb-1",children:"Peeap Pay"}),e.jsx("p",{className:"text-primary-100 text-sm",children:"Secure Payment"})]}),e.jsxs("div",{className:"p-6 text-center border-b border-gray-100",children:[e.jsxs("p",{className:"text-sm text-gray-500 mb-1",children:["Pay to ",r==null?void 0:r.merchantName]}),e.jsx("p",{className:"text-4xl font-bold text-gray-900",children:r&&g(r.amount,r.currency)}),(r==null?void 0:r.description)&&e.jsx("p",{className:"text-sm text-gray-500 mt-2",children:r.description})]}),e.jsxs("div",{className:"px-6 py-3 bg-yellow-50 border-b border-yellow-100 flex items-center justify-center gap-2",children:[e.jsx(it,{className:"w-4 h-4 text-yellow-600"}),e.jsxs("span",{className:"text-sm text-yellow-700",children:["Expires in ",f(c)]})]}),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{className:"bg-gray-50 rounded-xl p-4 text-center",children:[e.jsxs("div",{className:"flex items-center justify-center gap-2 mb-3",children:[e.jsx(wa,{className:"w-5 h-5 text-gray-600"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Scan to Pay"})]}),e.jsx("div",{className:"bg-white p-4 rounded-lg inline-block",children:e.jsx("div",{className:"w-40 h-40 bg-gray-200 rounded flex items-center justify-center",children:e.jsx(wa,{className:"w-20 h-20 text-gray-400"})})}),e.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Open Peeap app and scan this code"})]}),e.jsxs("button",{onClick:j,className:"w-full py-4 bg-primary-600 text-white rounded-xl font-semibold flex items-center justify-center gap-2 hover:bg-primary-700 transition-colors",children:[e.jsx(Na,{className:"w-5 h-5"}),"Open Peeap App",e.jsx(Fr,{className:"w-4 h-4"})]}),u&&e.jsx("div",{className:"text-center py-3",children:e.jsxs("div",{className:"flex items-center justify-center gap-2 text-gray-500",children:[e.jsx(Mi,{className:"w-5 h-5"}),e.jsx("span",{className:"text-sm",children:"or tap your NFC card"})]})}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-0 flex items-center",children:e.jsx("div",{className:"w-full border-t border-gray-200"})}),e.jsx("div",{className:"relative flex justify-center text-sm",children:e.jsx("span",{className:"px-2 bg-white text-gray-500",children:"or"})})]}),e.jsxs("button",{onClick:v,className:"w-full py-4 bg-gray-100 text-gray-700 rounded-xl font-semibold flex items-center justify-center gap-2 hover:bg-gray-200 transition-colors",children:[e.jsx(Je,{className:"w-5 h-5"}),"Pay with Card"]}),e.jsx("div",{className:"text-center",children:e.jsxs("a",{href:"https://peeap.com/download",className:"inline-flex items-center gap-1 text-sm text-primary-600 hover:text-primary-700",children:[e.jsx(ws,{className:"w-4 h-4"}),"Don't have the app? Download Peeap"]})})]}),e.jsx("div",{className:"px-6 py-4 bg-gray-50 border-t border-gray-100",children:e.jsxs("div",{className:"flex items-center justify-center gap-2 text-gray-500",children:[e.jsx(Xt,{className:"w-4 h-4"}),e.jsx("span",{className:"text-xs",children:"Secured by Peeap Pay"})]})})]}),e.jsx("div",{className:"text-center mt-4",children:e.jsxs("p",{className:"text-xs text-white/60",children:["Session: ",r==null?void 0:r.sessionId]})})]})})}function pde(){const[t]=$o(),s=At(),{user:r,isAuthenticated:a,isLoading:n}=wt(),[i,l]=h.useState("loading"),[o,c]=h.useState(null),[d,u]=h.useState(0),[m,p]=h.useState(""),[x,g]=h.useState(null),[f,b]=h.useState(null),[j,v]=h.useState(!1),[w,y]=h.useState(!1),[C,S]=h.useState(!1),[_,E]=h.useState(""),[A,R]=h.useState(0),[I,N]=h.useState(null);h.useEffect(()=>{Ut.getDefaultCurrency().then(N)},[]);const P=(I==null?void 0:I.symbol)||"",k=H=>`${P}${H.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}`,L=d>0?Math.max(d*(1/100),.1):0,B=t.get("to"),T=t.get("amount"),O=t.get("note"),q=t.get("qr"),K=t.get("username"),le=window.location.href,X=`peeappay://pay?${t.toString()}`;h.useEffect(()=>{y("NDEFReader"in window),S(/iPhone|iPad|iPod|Android/i.test(navigator.userAgent)),se()},[B,q,K]),h.useEffect(()=>{a&&(r!=null&&r.id)&&i==="login"&&(z(),l("confirm"))},[a,r==null?void 0:r.id]);const se=async()=>{try{let H=null;if(K){const ue=K.replace("@","");H=await fe(ue)}else B?H=await de(B):q&&(H=await de(q));if(!H){g("Recipient not found"),l("error");return}c(H),T&&u(parseFloat(T)),O&&p(O),l("checkout")}catch(H){console.error("Payment init error:",H),g(H.message||"Failed to load payment"),l("error")}},de=async H=>{const{data:ue,error:me}=await U.from("users").select("id, first_name, last_name, email, phone").eq("id",H).single();if(me||!ue)return console.error("Error fetching recipient:",me),null;const{data:ne}=await U.from("wallets").select("id").eq("user_id",H).eq("wallet_type","primary").single();return{id:ue.id,name:`${ue.first_name} ${ue.last_name}`,username:void 0,email:ue.email,phone:ue.phone,walletId:(ne==null?void 0:ne.id)||""}},fe=async H=>{try{const{data:ue,error:me}=await U.from("users").select("id, first_name, last_name, email, phone").or(`phone.eq.${H},first_name.ilike.%${H}%,last_name.ilike.%${H}%`).limit(1).single();if(me||!ue)return console.error("Error fetching recipient by username:",me),null;const{data:ne}=await U.from("wallets").select("id").eq("user_id",ue.id).eq("wallet_type","primary").single();return{id:ue.id,name:`${ue.first_name} ${ue.last_name}`,username:void 0,email:ue.email,phone:ue.phone,walletId:(ne==null?void 0:ne.id)||""}}catch(ue){return console.error("Error in fetchRecipientByUsername:",ue),null}},z=async()=>{if(!(r!=null&&r.id))return;const{data:H}=await U.from("wallets").select("id, balance").eq("user_id",r.id).eq("wallet_type","primary").single();H&&(E(H.id),R(H.balance))},re=()=>{sessionStorage.setItem("paymentIntent",JSON.stringify({to:B||(o==null?void 0:o.id),username:K,amount:d||T,note:m||O,qr:q})),l("login")},ie=async()=>{if(!o||!d||!(r!=null&&r.id)||!_){g("Missing payment information");return}if(d>A){g("Insufficient balance");return}if(o.id===r.id){g("Cannot send money to yourself");return}l("processing");try{const{data:H}=await U.from("wallets").select("balance").eq("id",_).single();if(!H||H.balance<d){g("Insufficient balance"),l("error");return}const ue=`txn_${Date.now()}_${Math.random().toString(36).substr(2,9)}`;await U.from("wallets").update({balance:H.balance-d,updated_at:new Date().toISOString()}).eq("id",_);const{data:me}=await U.from("wallets").select("balance").eq("id",o.walletId).single();if(me){const ne=d-L;await U.from("wallets").update({balance:me.balance+ne,updated_at:new Date().toISOString()}).eq("id",o.walletId)}await U.from("transactions").insert([{external_id:`${ue}_out`,wallet_id:_,type:"TRANSFER",amount:-d,fee:L,currency:"USD",status:"COMPLETED",description:m||`Transfer to ${o.name}`,metadata:{recipient_id:o.id,recipient_wallet:o.walletId,recipient_name:o.name,method:"payment_link"}},{external_id:`${ue}_in`,wallet_id:o.walletId,type:"TRANSFER",amount:d-L,currency:"USD",status:"COMPLETED",description:m||`Transfer from ${r.firstName} ${r.lastName}`,metadata:{sender_id:r.id,sender_wallet:_,sender_name:`${r.firstName} ${r.lastName}`,method:"payment_link"}}]),b(ue),l("success")}catch(H){console.error("Payment error:",H),g(H.message||"Payment failed"),l("error")}},Y=async()=>{await navigator.clipboard.writeText(le),v(!0),setTimeout(()=>v(!1),2e3)},G=()=>{window.location.href=X};return i==="loading"?e.jsx("div",{className:"min-h-screen bg-gradient-to-b from-primary-600 to-primary-800 flex items-center justify-center p-4",children:e.jsxs("div",{className:"text-center text-white",children:[e.jsx(Ie,{className:"w-12 h-12 animate-spin mx-auto mb-4"}),e.jsx("p",{children:"Loading payment..."})]})}):i==="error"?e.jsx("div",{className:"min-h-screen bg-gradient-to-b from-primary-600 to-primary-800 flex items-center justify-center p-4",children:e.jsxs(W,{className:"max-w-md w-full p-8 text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(ft,{className:"w-8 h-8 text-red-600"})}),e.jsx("h1",{className:"text-xl font-bold text-gray-900 mb-2",children:"Payment Error"}),e.jsx("p",{className:"text-gray-600 mb-6",children:x||"Something went wrong"}),e.jsx("button",{onClick:()=>s("/"),className:"px-6 py-3 bg-primary-600 text-white rounded-xl font-medium hover:bg-primary-700",children:"Go Home"})]})}):i==="success"?e.jsx("div",{className:"min-h-screen bg-gradient-to-b from-green-600 to-green-800 flex items-center justify-center p-4",children:e.jsxs(W,{className:"max-w-md w-full p-8 text-center",children:[e.jsx("div",{className:"w-20 h-20 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(be,{className:"w-10 h-10 text-green-600"})}),e.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Payment Successful!"}),e.jsxs("p",{className:"text-gray-600 mb-4",children:["You sent ",k(d)," to ",o==null?void 0:o.name]}),f&&e.jsxs("p",{className:"text-xs text-gray-400 mb-6",children:["Transaction ID: ",f]}),e.jsx("button",{onClick:()=>s("/dashboard"),className:"w-full py-3 bg-primary-600 text-white rounded-xl font-semibold hover:bg-primary-700",children:"Go to Dashboard"})]})}):i==="processing"?e.jsx("div",{className:"min-h-screen bg-gradient-to-b from-primary-600 to-primary-800 flex items-center justify-center p-4",children:e.jsxs(W,{className:"max-w-md w-full p-8 text-center",children:[e.jsx(Ie,{className:"w-12 h-12 text-primary-600 animate-spin mx-auto mb-4"}),e.jsx("h1",{className:"text-xl font-bold text-gray-900 mb-2",children:"Processing Payment"}),e.jsx("p",{className:"text-gray-600",children:"Please wait..."})]})}):i==="login"?e.jsx("div",{className:"min-h-screen bg-gradient-to-b from-primary-600 to-primary-800 flex items-center justify-center p-4",children:e.jsxs(W,{className:"max-w-md w-full p-8 text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-primary-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(ew,{className:"w-8 h-8 text-primary-600"})}),e.jsx("h1",{className:"text-xl font-bold text-gray-900 mb-2",children:"Sign In to Complete Payment"}),e.jsxs("p",{className:"text-gray-600 mb-6",children:["Sign in to send ",k(d)," to ",o==null?void 0:o.name]}),e.jsx("button",{onClick:()=>s("/login?redirect="+encodeURIComponent(window.location.pathname+window.location.search)),className:"w-full py-3 bg-primary-600 text-white rounded-xl font-semibold hover:bg-primary-700 mb-3",children:"Sign In"}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Don't have an account?"," ",e.jsx("a",{href:"/register",className:"text-primary-600 hover:underline",children:"Sign up"})]})]})}):i==="confirm"&&a?e.jsx("div",{className:"min-h-screen bg-gradient-to-b from-primary-600 to-primary-800 flex items-center justify-center p-4",children:e.jsxs(W,{className:"max-w-md w-full overflow-hidden",children:[e.jsxs("div",{className:"bg-primary-600 text-white p-6 text-center",children:[e.jsx(Ba,{className:"w-10 h-10 mx-auto mb-2"}),e.jsx("h1",{className:"text-xl font-bold",children:"Confirm Payment"})]}),e.jsx("div",{className:"p-6 border-b border-gray-100",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 bg-primary-100 rounded-full flex items-center justify-center",children:e.jsx(Es,{className:"w-6 h-6 text-primary-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Sending to"}),e.jsx("p",{className:"font-semibold text-gray-900",children:o==null?void 0:o.name}),(o==null?void 0:o.username)&&e.jsxs("p",{className:"text-sm text-primary-600",children:["@",o.username]})]})]})}),e.jsxs("div",{className:"p-6 text-center border-b border-gray-100",children:[e.jsx("p",{className:"text-4xl font-bold text-gray-900",children:k(d)}),e.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["Fee: ",k(L)]})]}),e.jsxs("div",{className:"p-4 bg-blue-50 flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-blue-700",children:"Your balance"}),e.jsx("span",{className:"font-semibold text-blue-700",children:k(A)})]}),d>A&&e.jsxs("div",{className:"p-4 bg-red-50 flex items-center gap-2 text-red-700",children:[e.jsx(ut,{className:"w-5 h-5"}),e.jsx("span",{className:"text-sm",children:"Insufficient balance"})]}),e.jsxs("div",{className:"p-6 space-y-3",children:[e.jsxs("button",{onClick:ie,disabled:d<=0||d>A,className:"w-full py-4 bg-primary-600 text-white rounded-xl font-semibold disabled:opacity-50",children:["Send ",k(d)]}),e.jsx("button",{onClick:()=>s(-1),className:"w-full py-3 bg-gray-100 text-gray-700 rounded-xl",children:"Cancel"})]})]})}):e.jsx("div",{className:"min-h-screen bg-gradient-to-b from-primary-600 to-primary-800 flex items-center justify-center p-4",children:e.jsxs("div",{className:"max-w-md w-full",children:[e.jsxs(W,{className:"overflow-hidden",children:[e.jsxs("div",{className:"bg-primary-600 text-white p-6 text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-white/20 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(js,{className:"w-8 h-8"})}),e.jsx("h1",{className:"text-xl font-bold",children:"Payment Request"}),e.jsx("p",{className:"text-primary-100 text-sm",children:"Peeap Pay"})]}),e.jsx("div",{className:"p-6 border-b border-gray-100",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-14 h-14 bg-primary-100 rounded-full flex items-center justify-center",children:e.jsx(Es,{className:"w-7 h-7 text-primary-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Pay to"}),e.jsx("p",{className:"font-bold text-gray-900 text-lg",children:o==null?void 0:o.name}),(o==null?void 0:o.username)&&e.jsxs("p",{className:"text-primary-600 font-medium",children:["@",o.username]})]})]})}),d>0&&e.jsxs("div",{className:"p-6 text-center border-b border-gray-100 bg-gray-50",children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Amount"}),e.jsx("p",{className:"text-4xl font-bold text-gray-900",children:k(d)}),m&&e.jsx("p",{className:"text-sm text-gray-500 mt-2",children:m})]}),e.jsxs("div",{className:"p-6 text-center border-b border-gray-100",children:[e.jsxs("div",{className:"flex items-center justify-center gap-2 mb-4",children:[e.jsx(wa,{className:"w-5 h-5 text-gray-600"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Scan with Peeap App"})]}),e.jsx("div",{className:"bg-white p-4 rounded-xl inline-block shadow-sm border",children:e.jsx(L0,{value:le,size:180,level:"M"})}),e.jsx("p",{className:"text-xs text-gray-500 mt-3",children:"Open Peeap app and scan this code"})]}),C&&w&&e.jsx("div",{className:"p-4 bg-blue-50 border-b border-blue-100",children:e.jsxs("div",{className:"flex items-center justify-center gap-2 text-blue-700",children:[e.jsx(Mi,{className:"w-5 h-5 animate-pulse"}),e.jsx("span",{className:"text-sm font-medium",children:"Ready for NFC tap"})]})}),e.jsxs("div",{className:"p-6 space-y-3",children:[C&&e.jsxs("button",{onClick:G,className:"w-full py-4 bg-primary-600 text-white rounded-xl font-semibold flex items-center justify-center gap-2 hover:bg-primary-700",children:[e.jsx(Na,{className:"w-5 h-5"}),"Open in Peeap App",e.jsx(Fr,{className:"w-4 h-4"})]}),e.jsxs("button",{onClick:re,className:`w-full py-4 ${C?"bg-gray-100 text-gray-700":"bg-primary-600 text-white"} rounded-xl font-semibold flex items-center justify-center gap-2 hover:opacity-90`,children:[e.jsx(ew,{className:"w-5 h-5"}),"Complete with Login"]}),e.jsx("button",{onClick:Y,className:"w-full py-3 bg-gray-100 text-gray-700 rounded-xl font-medium flex items-center justify-center gap-2 hover:bg-gray-200",children:j?e.jsxs(e.Fragment,{children:[e.jsx(be,{className:"w-5 h-5 text-green-600"}),"Link Copied!"]}):e.jsxs(e.Fragment,{children:[e.jsx(vs,{className:"w-5 h-5"}),"Copy Payment Link"]})})]}),e.jsx("div",{className:"px-6 py-4 bg-gray-50 border-t border-gray-100",children:e.jsxs("div",{className:"flex items-center justify-center gap-2 text-gray-500",children:[e.jsx(Xt,{className:"w-4 h-4"}),e.jsx("span",{className:"text-xs",children:"Secured by Peeap Pay"})]})})]}),e.jsx("div",{className:"text-center mt-4",children:e.jsx("a",{href:"https://peeap.com/download",className:"text-sm text-white/80 hover:text-white",children:"Don't have the app? Download Peeap"})})]})})}function xde(){const[t]=$o(),s=At(),[r,a]=h.useState(5),n=t.get("sessionId"),i=t.get("status"),l=t.get("amount"),o=t.get("currency")||"SLE",c=t.get("orderNumber"),d=t.get("error");h.useEffect(()=>{if(r>0){const m=setTimeout(()=>a(r-1),1e3);return()=>clearTimeout(m)}else s("/admin/payment-settings")},[r,s]);const u=m=>{if(!m)return"0";const p=Number(m);return new Intl.NumberFormat("en-US",{minimumFractionDigits:0,maximumFractionDigits:0}).format(p)};return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-green-50 to-emerald-100 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-xl max-w-md w-full p-8 text-center",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("div",{className:"w-20 h-20 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(be,{className:"w-12 h-12 text-green-600"})}),e.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Payment Successful!"}),e.jsx("p",{className:"text-gray-600",children:"Your payment has been processed successfully."})]}),d&&e.jsx("div",{className:"mb-6 p-4 bg-yellow-50 border border-yellow-200 rounded-lg",children:e.jsxs("p",{className:"text-sm text-yellow-800",children:["Note: ",d]})}),e.jsxs("div",{className:"bg-gray-50 rounded-xl p-6 mb-6",children:[e.jsxs("div",{className:"flex items-center justify-center gap-2 mb-4",children:[e.jsx(qT,{className:"w-5 h-5 text-gray-500"}),e.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Payment Details"})]}),l&&e.jsxs("div",{className:"mb-4",children:[e.jsxs("p",{className:"text-3xl font-bold text-gray-900",children:["Le ",u(l)]}),e.jsx("p",{className:"text-sm text-gray-500",children:o})]}),e.jsxs("div",{className:"space-y-2 text-sm",children:[c&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-500",children:"Order Number"}),e.jsx("span",{className:"font-medium text-gray-900",children:c})]}),n&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-500",children:"Session ID"}),e.jsx("span",{className:"font-mono text-xs text-gray-900 truncate max-w-[180px]",children:n})]}),i&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-500",children:"Status"}),e.jsx("span",{className:`font-medium capitalize ${i==="completed"?"text-green-600":"text-blue-600"}`,children:i})]})]})]}),e.jsxs("div",{className:"flex items-center justify-center gap-2 text-gray-500 mb-4",children:[e.jsx(Ie,{className:"w-4 h-4 animate-spin"}),e.jsxs("span",{className:"text-sm",children:["Redirecting to Payment Settings in ",r,"s..."]})]}),e.jsx("button",{onClick:()=>s("/admin/payment-settings"),className:"w-full inline-flex items-center justify-center gap-2 px-6 py-3 bg-green-600 text-white font-medium rounded-lg hover:bg-green-700 transition-colors",children:"Go to Payment Settings Now"})]})})}function gde(){const[t]=$o(),s=t.get("sessionId"),r=t.get("status");return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-slate-100 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-xl max-w-md w-full p-8 text-center",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("div",{className:"w-20 h-20 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(ft,{className:"w-12 h-12 text-red-600"})}),e.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Payment Cancelled"}),e.jsx("p",{className:"text-gray-600",children:"Your payment was cancelled and no charges were made."})]}),e.jsx("div",{className:"bg-gray-50 rounded-xl p-6 mb-6",children:e.jsxs("div",{className:"space-y-2 text-sm",children:[s&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-500",children:"Session ID"}),e.jsx("span",{className:"font-mono text-xs text-gray-900 truncate max-w-[180px]",children:s})]}),r&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-500",children:"Status"}),e.jsx("span",{className:"font-medium text-red-600 capitalize",children:r})]})]})}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs(Qe,{to:"/admin/payment-settings",className:"w-full inline-flex items-center justify-center gap-2 px-6 py-3 bg-blue-600 text-white font-medium rounded-lg hover:bg-blue-700 transition-colors",children:[e.jsx(vt,{className:"w-4 h-4"}),"Try Again"]}),e.jsxs(Qe,{to:"/dashboard",className:"w-full inline-flex items-center justify-center gap-2 px-6 py-3 border border-gray-300 text-gray-700 font-medium rounded-lg hover:bg-gray-50 transition-colors",children:[e.jsx(_s,{className:"w-4 h-4"}),"Back to Dashboard"]})]})]})})}function fde(){const[t]=$o(),s=At(),{user:r}=wt(),[a,n]=h.useState(5),i=t.get("sessionId"),l=t.get("walletId"),o=t.get("status"),c=t.get("amount"),d=t.get("currency")||"SLE",u=t.get("newBalance"),m=t.get("error"),x=(()=>{const f=(r==null?void 0:r.roles)||[];return f.includes("superadmin")||f.includes("admin")?"/admin/dashboard":f.includes("merchant")||f.includes("developer")?"/merchant/dashboard":f.includes("agent")?"/agent/dashboard":"/wallets"})();h.useEffect(()=>{if(a>0){const f=setTimeout(()=>n(a-1),1e3);return()=>clearTimeout(f)}else s(x)},[a,s,x]);const g=f=>{if(!f)return"0";const b=Number(f);return new Intl.NumberFormat("en-US",{minimumFractionDigits:0,maximumFractionDigits:0}).format(b)};return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-green-50 to-emerald-100 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-xl max-w-md w-full p-8 text-center",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("div",{className:"w-20 h-20 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(be,{className:"w-12 h-12 text-green-600"})}),e.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Deposit Successful!"}),e.jsx("p",{className:"text-gray-600",children:"Your wallet has been credited successfully."})]}),m&&e.jsx("div",{className:"mb-6 p-4 bg-yellow-50 border border-yellow-200 rounded-lg",children:e.jsxs("p",{className:"text-sm text-yellow-800",children:["Note: ",m]})}),e.jsxs("div",{className:"bg-gray-50 rounded-xl p-6 mb-6",children:[e.jsxs("div",{className:"flex items-center justify-center gap-2 mb-4",children:[e.jsx(jt,{className:"w-5 h-5 text-gray-500"}),e.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Deposit Details"})]}),c&&e.jsxs("div",{className:"mb-4",children:[e.jsxs("p",{className:"text-3xl font-bold text-green-600",children:["+Le ",g(c)]}),e.jsx("p",{className:"text-sm text-gray-500",children:d})]}),u&&e.jsxs("div",{className:"mb-4 p-3 bg-white rounded-lg border border-gray-200",children:[e.jsx("p",{className:"text-sm text-gray-500",children:"New Wallet Balance"}),e.jsxs("p",{className:"text-xl font-bold text-gray-900",children:["Le ",Number(u).toLocaleString("en-US",{minimumFractionDigits:2})]})]}),e.jsxs("div",{className:"space-y-2 text-sm",children:[l&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-500",children:"Wallet"}),e.jsxs("span",{className:"font-mono text-xs text-gray-900 truncate max-w-[180px]",children:[l.slice(0,8),"..."]})]}),i&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-500",children:"Transaction ID"}),e.jsxs("span",{className:"font-mono text-xs text-gray-900 truncate max-w-[180px]",children:[i.slice(0,12),"..."]})]}),o&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-500",children:"Status"}),e.jsx("span",{className:`font-medium capitalize ${o==="completed"?"text-green-600":"text-blue-600"}`,children:o})]})]})]}),e.jsxs("div",{className:"flex items-center justify-center gap-2 text-gray-500 mb-4",children:[e.jsx(Ie,{className:"w-4 h-4 animate-spin"}),e.jsxs("span",{className:"text-sm",children:["Redirecting in ",a,"s..."]})]}),e.jsxs("button",{onClick:()=>s(x),className:"w-full inline-flex items-center justify-center gap-2 px-6 py-3 bg-green-600 text-white font-medium rounded-lg hover:bg-green-700 transition-colors",children:[e.jsx(jt,{className:"w-4 h-4"}),"Continue"]})]})})}function yde(){const[t]=$o(),s=t.get("sessionId"),r=t.get("walletId"),a=t.get("status");return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-slate-100 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-xl max-w-md w-full p-8 text-center",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("div",{className:"w-20 h-20 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(ft,{className:"w-12 h-12 text-red-600"})}),e.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Deposit Cancelled"}),e.jsx("p",{className:"text-gray-600",children:"Your deposit was cancelled and no funds were added to your wallet."})]}),e.jsx("div",{className:"bg-gray-50 rounded-xl p-6 mb-6",children:e.jsxs("div",{className:"space-y-2 text-sm",children:[r&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-500",children:"Wallet"}),e.jsxs("span",{className:"font-mono text-xs text-gray-900 truncate max-w-[180px]",children:[r.slice(0,8),"..."]})]}),s&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-500",children:"Session ID"}),e.jsxs("span",{className:"font-mono text-xs text-gray-900 truncate max-w-[180px]",children:[s.slice(0,12),"..."]})]}),a&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-500",children:"Status"}),e.jsx("span",{className:"font-medium text-red-600 capitalize",children:a})]})]})}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs(Qe,{to:"/wallets",className:"w-full inline-flex items-center justify-center gap-2 px-6 py-3 bg-primary-600 text-white font-medium rounded-lg hover:bg-primary-700 transition-colors",children:[e.jsx(vt,{className:"w-4 h-4"}),"Try Again"]}),e.jsxs(Qe,{to:"/dashboard",className:"w-full inline-flex items-center justify-center gap-2 px-6 py-3 border border-gray-300 text-gray-700 font-medium rounded-lg hover:bg-gray-50 transition-colors",children:[e.jsx(_s,{className:"w-4 h-4"}),"Back to Dashboard"]})]})]})})}const cx={SLE:{symbol:"Le",name:"Sierra Leonean Leone",decimals:2},USD:{symbol:"$",name:"US Dollar",decimals:2},EUR:{symbol:"",name:"Euro",decimals:2},GBP:{symbol:"",name:"British Pound",decimals:2},NGN:{symbol:"",name:"Nigerian Naira",decimals:2},GHS:{symbol:"",name:"Ghanaian Cedi",decimals:2}},CE="peeap_pending_checkout";function bde(){var Ee,ct;const{businessId:t}=hi(),[s]=$o();At();const r=s.get("amount"),a=s.get("currency")||"SLE",n=s.get("reference"),i=s.get("description"),l=s.get("mode")||"live",o=s.get("redirect"),[c,d]=h.useState("loading"),[u,m]=h.useState(null),[p,x]=h.useState(r||""),[g,f]=h.useState(a),[b,j]=h.useState(""),[v,w]=h.useState(""),[y,C]=h.useState(null),[S,_]=h.useState(null),[E,A]=h.useState(null),[R,I]=h.useState(""),[N,P]=h.useState(""),[k,D]=h.useState(!1),[$,L]=h.useState(300),[B,T]=h.useState(!1),[O,q]=h.useState(null),[K,le]=h.useState("login"),[X,se]=h.useState(""),[de,fe]=h.useState(""),[z,re]=h.useState(""),[ie,Y]=h.useState(""),[G,H]=h.useState(!1),[ue,me]=h.useState(!1),[ne,Ae]=h.useState(null),[Fe,at]=h.useState([]),[J,Q]=h.useState(null),[ee,Ne]=h.useState(!1),[ye,he]=h.useState(0),[Ce,Se]=h.useState(!1),[Be,Dt]=h.useState(!1),[Ht,Xe]=h.useState(""),[Yt,Mt]=h.useState(null),Qt=[{id:"mobile_money",name:"Mobile Money",icon:e.jsx(Na,{className:"w-5 h-5"}),description:"Orange Money, Africell Money",available:!0,requiresAuth:!0},{id:"card",name:"Card Payment",icon:e.jsx(Je,{className:"w-5 h-5"}),description:"Visa, Mastercard",available:!0,requiresAuth:!0},{id:"bank_transfer",name:"Bank Transfer",icon:e.jsx(ua,{className:"w-5 h-5"}),description:"Direct bank payment",available:!0,requiresAuth:!0},{id:"wallet",name:"Peeap Wallet",icon:e.jsx(jt,{className:"w-5 h-5"}),description:"Pay with your balance",available:!0,requiresAuth:!0}],Wt=je=>{const Ge=cx[g]||cx.SLE;return`${Ge.symbol} ${je.toLocaleString(void 0,{minimumFractionDigits:Ge.decimals,maximumFractionDigits:Ge.decimals})}`},Ks=()=>"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,je=>{const Ge=Math.random()*16|0;return(je==="x"?Ge:Ge&3|8).toString(16)}),As=()=>{const je=Ks();return P(je),n||`PAY-${je.split("-")[0].toUpperCase()}`},fs=je=>{const Ge=Math.floor(je/60),nt=je%60;return`${Ge}:${nt.toString().padStart(2,"0")}`},ma=()=>`peeap://pay?${new URLSearchParams({uuid:N,businessId:t||"",businessName:(u==null?void 0:u.name)||"",amount:p,currency:g,reference:R,description:i||`Payment to ${u==null?void 0:u.name}`}).toString()}`;h.useEffect(()=>{er()},[]),h.useEffect(()=>{t&&ze()},[t]),h.useEffect(()=>{c==="qr_payment"&&!R&&I(As())},[c]),h.useEffect(()=>{let je;return c==="qr_payment"&&$>0&&!B&&(je=setInterval(()=>{L(Ge=>Ge<=1?(T(!0),window.parent!==window&&window.parent.postMessage({type:"peeap_payment",status:"expired",error:{message:"Payment session expired",code:"SESSION_EXPIRED"}},"*"),0):Ge-1)},1e3)),()=>{je&&clearInterval(je)}},[c,B]),h.useEffect(()=>{N&&(L(300),T(!1))},[N]);const er=async()=>{const{data:{session:je}}=await U.auth.getSession();if(je!=null&&je.user){q(je.user);const Ge=localStorage.getItem(CE);if(Ge){const nt=JSON.parse(Ge);localStorage.removeItem(CE),nt.businessId===t&&(x(nt.amount),f(nt.currency),j(nt.email),w(nt.phone),C(nt.selectedMethod),I(nt.reference||As()),setTimeout(()=>{Xr(nt)},500))}}},ze=async()=>{try{const{data:je,error:Ge}=await U.from("merchant_businesses").select("id, name, logo_url, description, is_live_mode, approval_status").eq("id",t).single();if(Ge||!je){_("Business not found"),d("error");return}m(je),r&&parseFloat(r)>0?(I(As()),d("qr_payment")):d("amount")}catch(je){console.error("Error loading business:",je),_("Failed to load business"),d("error")}},Bt=()=>{const je=parseFloat(p);if(!je||je<=0){_("Please enter a valid amount");return}_(null),d("details")},ys=()=>{if(!b&&!v){_("Please enter your email or phone number");return}_(null),se(b),Y(v),I(As()),d("qr_payment")},Zr=async je=>{C(je);const Ge=Qt.find(nt=>nt.id===je);if(Ge!=null&&Ge.requiresAuth&&!O)d("auth");else if(je==="wallet"&&O){if((await Ms(O.id)).length===0){_("You don't have any wallets. Please create a wallet first.");return}d("wallet_select")}else Xr()},Xr=async je=>{const Ge=je||{businessId:u==null?void 0:u.id,amount:p,currency:g,email:b,phone:v,selectedMethod:y,reference:R};d("processing"),_(null);try{if(["mobile_money","card","bank_transfer"].includes(Ge.selectedMethod)){const dr=Math.round(parseFloat(Ge.amount)),tr=await fetch("/api/checkout/create",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({businessId:Ge.businessId||(u==null?void 0:u.id),amount:dr,currency:Ge.currency||g,reference:Ge.reference||R,description:i||`Payment to ${u==null?void 0:u.name}`,customerEmail:Ge.email||b,customerPhone:Ge.phone||v,paymentMethod:Ge.selectedMethod||y,redirectUrl:o})}),Ur=await tr.json();if(!tr.ok)throw new Error(Ur.error||"Failed to create checkout session");if(Ur.paymentUrl){console.log("[Checkout] Redirecting to Monime:",Ur.paymentUrl),window.parent!==window?(window.parent.postMessage({type:"peeap_payment",status:"redirect",redirectUrl:Ur.paymentUrl,payment:{id:Ur.paymentId,reference:R,amount:parseFloat(p),currency:g}},"*"),setTimeout(()=>{window.location.href=Ur.paymentUrl},500)):window.location.href=Ur.paymentUrl;return}else throw new Error("No payment URL returned")}const nt=`pay_${Date.now()}_${Math.random().toString(36).substr(2,9)}`;A(nt),await new Promise(dr=>setTimeout(dr,2e3)),d("success"),window.parent!==window&&window.parent.postMessage({type:"peeap_payment",status:"success",payment:{id:nt,reference:R||nt,amount:parseFloat(p),currency:g,status:"completed"}},"*"),o&&setTimeout(()=>{window.location.href=`${o}?payment_id=${nt}&status=success`},3e3)}catch(nt){console.error("Payment error:",nt),_(nt.message||"Payment failed"),d("error"),window.parent!==window&&window.parent.postMessage({type:"peeap_payment",status:"error",error:{message:nt.message||"Payment failed"}},"*")}},Ms=async je=>{Ne(!0);try{const Ge=await qo.getWallets(je);return at(Ge),Ge}catch(Ge){return console.error("Failed to fetch wallets:",Ge),[]}finally{Ne(!1)}},ot=async je=>{je.preventDefault(),me(!0),Ae(null);try{const Ge=await tl.login({email:X,password:de});if("mfaRequired"in Ge){Ae("This account has 2FA enabled. Please log in through the main app first.");return}const nt=Ge.user;if(q(nt),y==="wallet"){if((await Ms(nt.id)).length===0){Ae("You don't have any wallets. Please create a wallet first.");return}d("wallet_select")}else await Xr()}catch(Ge){Ae(Ge.message||"Login failed")}finally{me(!1)}},ht=je=>{const Ge=parseFloat(p);if(je.balance<Ge){_(`Insufficient balance. You have ${Wt(je.balance)} but need ${Wt(Ge)}`);return}Q(je),_(null),he(0),Dt(!1),d("slide_to_pay")},$e=()=>{Dt(!0),d("enter_pin"),Xe(""),Mt(null)},Ve=async()=>{if(Ht.length!==4){Mt("Please enter your 4-digit PIN");return}d("processing"),Mt(null);try{const{data:je,error:Ge}=await U.from("users").select("transaction_pin").eq("id",O.id).single();if(Ge||!je){Mt("Failed to verify PIN"),d("enter_pin");return}if(je.transaction_pin!==Ht){Mt("Incorrect PIN. Please try again."),d("enter_pin");return}const nt=parseFloat(p),{error:dr}=await U.from("transactions").insert({wallet_id:J==null?void 0:J.id,type:"PAYMENT",amount:-nt,currency:g,status:"COMPLETED",description:i||`Payment to ${u==null?void 0:u.name}`,reference:R,merchant_name:u==null?void 0:u.name});if(dr)throw new Error("Payment failed. Please try again.");const Aa=((J==null?void 0:J.balance)||0)-nt;await U.from("wallets").update({balance:Aa,updated_at:new Date().toISOString()}).eq("id",J==null?void 0:J.id);const tr=`pay_${Date.now()}_${Math.random().toString(36).substr(2,9)}`;A(tr),d("success"),window.parent!==window&&window.parent.postMessage({type:"peeap_payment",status:"success",payment:{id:tr,reference:R,amount:nt,currency:g,status:"completed",walletId:J==null?void 0:J.id}},"*")}catch(je){_(je.message||"Payment failed"),d("error")}},pt=async je=>{je.preventDefault(),me(!0),Ae(null);try{const Ge=z.trim().split(" "),nt=Ge[0]||"",dr=Ge.slice(1).join(" ")||"",{user:Aa}=await tl.register({email:X,password:de,firstName:nt,lastName:dr,phone:ie});q(Aa),await Xr()}catch(Ge){Ae(Ge.message||"Signup failed")}finally{me(!1)}},Pt=()=>{c==="details"?d("amount"):c==="qr_payment"?d("details"):c==="auth"&&(d("qr_payment"),D(!0))},hs=()=>{window.parent!==window&&window.parent.postMessage({type:"peeap_payment",status:"cancel"},"*"),window.close()};return c==="loading"?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-indigo-600 to-purple-700 flex items-center justify-center p-4",children:e.jsxs("div",{className:"text-center text-white",children:[e.jsx(Ie,{className:"w-12 h-12 animate-spin mx-auto mb-4"}),e.jsx("p",{children:"Loading checkout..."})]})}):c==="error"?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-indigo-600 to-purple-700 flex items-center justify-center p-4",children:e.jsxs(W,{className:"max-w-md w-full p-8 text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(lt,{className:"w-8 h-8 text-red-600"})}),e.jsx("h1",{className:"text-xl font-bold text-gray-900 mb-2",children:"Payment Error"}),e.jsx("p",{className:"text-gray-600 mb-6",children:S||"Something went wrong"}),e.jsx("button",{onClick:()=>window.location.reload(),className:"px-6 py-3 bg-indigo-600 text-white rounded-xl font-medium hover:bg-indigo-700",children:"Try Again"})]})}):c==="success"?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-green-500 to-emerald-600 flex items-center justify-center p-4",children:e.jsxs(W,{className:"max-w-md w-full p-8 text-center",children:[e.jsx("div",{className:"w-20 h-20 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(be,{className:"w-10 h-10 text-green-600"})}),e.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Payment Successful!"}),e.jsxs("p",{className:"text-gray-600 mb-2",children:["Thank you for your payment of ",Wt(parseFloat(p))," to ",u==null?void 0:u.name]}),(E||R)&&e.jsxs("p",{className:"text-xs text-gray-400 mb-6 font-mono",children:["Reference: ",R||E]}),o?e.jsx("p",{className:"text-sm text-gray-500",children:"Redirecting back..."}):e.jsx("button",{onClick:()=>window.close(),className:"px-6 py-3 bg-green-600 text-white rounded-xl font-medium hover:bg-green-700",children:"Close"})]})}):c==="processing"?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-indigo-600 to-purple-700 flex items-center justify-center p-4",children:e.jsxs(W,{className:"max-w-md w-full p-8 text-center",children:[e.jsxs("div",{className:"relative w-20 h-20 mx-auto mb-6",children:[e.jsx("div",{className:"absolute inset-0 border-4 border-indigo-200 rounded-full"}),e.jsx("div",{className:"absolute inset-0 border-4 border-indigo-600 rounded-full border-t-transparent animate-spin"})]}),e.jsx("h1",{className:"text-xl font-bold text-gray-900 mb-2",children:"Processing Payment"}),e.jsx("p",{className:"text-gray-600",children:"Redirecting to secure payment page..."}),e.jsx("p",{className:"text-xs text-gray-400 mt-4",children:"Do not close this window"})]})}):e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-indigo-600 to-purple-700 flex items-center justify-center p-4",children:e.jsxs("div",{className:"max-w-md w-full",children:[e.jsxs(W,{className:"overflow-hidden",children:[e.jsx("div",{className:"bg-white border-b border-gray-100 p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[c!=="amount"?e.jsx("button",{onClick:Pt,className:"p-2 hover:bg-gray-100 rounded-lg",children:e.jsx(_s,{className:"w-5 h-5 text-gray-600"})}):e.jsx("div",{className:"w-9"}),e.jsxs("div",{className:"flex items-center gap-3",children:[u!=null&&u.logo_url?e.jsx("img",{src:u.logo_url,alt:u.name,className:"w-10 h-10 rounded-lg object-cover"}):e.jsx("div",{className:"w-10 h-10 bg-indigo-100 rounded-lg flex items-center justify-center",children:e.jsx(ua,{className:"w-5 h-5 text-indigo-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-gray-900",children:u==null?void 0:u.name}),e.jsx("p",{className:"text-xs text-gray-500",children:l==="test"&&e.jsx("span",{className:"px-1.5 py-0.5 bg-orange-100 text-orange-700 rounded text-xs",children:"TEST MODE"})})]})]}),e.jsx("button",{onClick:hs,className:"p-2 hover:bg-gray-100 rounded-lg",children:e.jsx(lt,{className:"w-5 h-5 text-gray-600"})})]})}),e.jsxs("div",{className:"px-6 pt-4",children:[e.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-400 mb-2",children:[e.jsx("span",{className:c==="amount"?"text-indigo-600 font-medium":"",children:"Amount"}),e.jsx("span",{className:c==="details"?"text-indigo-600 font-medium":"",children:"Details"}),e.jsx("span",{className:c==="qr_payment"||c==="auth"?"text-indigo-600 font-medium":"",children:"Pay"})]}),e.jsx("div",{className:"h-1 bg-gray-100 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-indigo-600 transition-all duration-300",style:{width:c==="amount"?"33%":c==="details"?"66%":"100%"}})})]}),S&&e.jsxs("div",{className:"mx-6 mt-4 p-3 bg-red-50 border border-red-200 rounded-lg flex items-center gap-2 text-red-700 text-sm",children:[e.jsx(ut,{className:"w-4 h-4 flex-shrink-0"}),S]}),c==="amount"&&e.jsxs("div",{className:"p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-1",children:"Enter Amount"}),e.jsx("p",{className:"text-sm text-gray-500 mb-6",children:i||`Payment to ${u==null?void 0:u.name}`}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-2xl text-gray-400",children:((Ee=cx[g])==null?void 0:Ee.symbol)||"Le"}),e.jsx("input",{type:"number",value:p,onChange:je=>x(je.target.value),placeholder:"0.00",className:"w-full text-4xl font-bold text-center py-6 px-16 border-2 border-gray-200 rounded-2xl focus:border-indigo-500 focus:ring-0 outline-none",autoFocus:!0})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx("label",{className:"text-sm text-gray-500 mb-2 block",children:"Currency"}),e.jsx("div",{className:"grid grid-cols-3 gap-2",children:Object.entries(cx).slice(0,6).map(([je,Ge])=>e.jsxs("button",{onClick:()=>f(je),className:`p-3 rounded-lg text-sm font-medium transition-colors ${g===je?"bg-indigo-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[Ge.symbol," ",je]},je))})]})]}),e.jsxs("button",{onClick:Bt,disabled:!p||parseFloat(p)<=0,className:"w-full py-4 bg-indigo-600 text-white rounded-xl font-semibold disabled:opacity-50 disabled:cursor-not-allowed hover:bg-indigo-700 transition-colors flex items-center justify-center gap-2",children:["Continue",e.jsx(Vs,{className:"w-5 h-5"})]})]}),c==="details"&&e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"text-center mb-6 p-4 bg-gray-50 rounded-xl",children:[e.jsx("p",{className:"text-sm text-gray-500",children:"You're paying"}),e.jsx("p",{className:"text-3xl font-bold text-gray-900",children:Wt(parseFloat(p))})]}),e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Your Details"}),e.jsxs("div",{className:"space-y-4 mb-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email Address"}),e.jsxs("div",{className:"relative",children:[e.jsx(Va,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{type:"email",value:b,onChange:je=>j(je.target.value),placeholder:"your@email.com",className:"w-full py-3 pl-12 pr-4 border-2 border-gray-200 rounded-xl focus:border-indigo-500 outline-none"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone Number"}),e.jsxs("div",{className:"relative",children:[e.jsx(lr,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{type:"tel",value:v,onChange:je=>w(je.target.value),placeholder:"+232 76 123456",className:"w-full py-3 pl-12 pr-4 border-2 border-gray-200 rounded-xl focus:border-indigo-500 outline-none"})]})]})]}),e.jsxs("button",{onClick:ys,className:"w-full py-4 bg-indigo-600 text-white rounded-xl font-semibold hover:bg-indigo-700 transition-colors flex items-center justify-center gap-2",children:["Continue to Payment",e.jsx(Vs,{className:"w-5 h-5"})]})]}),c==="qr_payment"&&e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"text-center mb-6",children:[u!=null&&u.logo_url?e.jsx("img",{src:u.logo_url,alt:u.name,className:"w-16 h-16 rounded-xl mx-auto mb-3 object-cover"}):e.jsx("div",{className:"w-16 h-16 rounded-xl bg-gradient-to-br from-indigo-500 to-purple-600 mx-auto mb-3 flex items-center justify-center text-white text-2xl font-bold",children:((ct=u==null?void 0:u.name)==null?void 0:ct.charAt(0))||"P"}),e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:u==null?void 0:u.name})]}),e.jsx("div",{className:`text-center mb-4 py-2 px-4 rounded-lg ${B?"bg-red-100 text-red-700":$<=60?"bg-orange-100 text-orange-700":"bg-gray-100 text-gray-600"}`,children:B?e.jsx("span",{className:"font-medium",children:"Payment session expired"}):e.jsxs("span",{className:"font-mono font-medium",children:["Time remaining: ",fs($)]})}),B?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"w-16 h-16 mx-auto mb-4 rounded-full bg-red-100 flex items-center justify-center",children:e.jsx(lt,{className:"w-8 h-8 text-red-600"})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Session Expired"}),e.jsx("p",{className:"text-sm text-gray-500 mb-6",children:"This payment session has expired for security reasons."}),e.jsx("button",{onClick:()=>{I(As())},className:"px-6 py-3 bg-indigo-600 text-white rounded-xl font-semibold hover:bg-indigo-700",children:"Generate New QR Code"})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"text-center mb-6 p-6 bg-gradient-to-r from-indigo-600 to-purple-600 rounded-2xl text-white",children:[e.jsx("p",{className:"text-sm opacity-80",children:"Pay"}),e.jsx("p",{className:"text-4xl font-bold",children:Wt(parseFloat(p))}),e.jsxs("p",{className:"text-xs opacity-60 mt-2 font-mono",children:["ID: ",N.split("-")[0]]})]}),e.jsxs("div",{className:"text-center mb-6",children:[e.jsxs("div",{className:"flex items-center justify-center gap-2 mb-4",children:[e.jsx(zT,{className:"w-6 h-6 text-indigo-600"}),e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Scan to Pay"})]}),e.jsx("div",{className:"bg-white p-6 rounded-2xl border-2 border-indigo-100 inline-block mx-auto shadow-lg",children:e.jsx(L0,{value:ma(),size:200,level:"H",style:{height:"auto",maxWidth:"100%",width:"100%"},bgColor:"#ffffff",fgColor:"#1e1b4b"})}),e.jsx("p",{className:"mt-4 text-sm text-gray-500",children:"Open Peeap app and scan this code"})]}),e.jsxs("div",{className:"relative my-6",children:[e.jsx("div",{className:"absolute inset-0 flex items-center",children:e.jsx("div",{className:"w-full border-t border-gray-200"})}),e.jsx("div",{className:"relative flex justify-center text-sm",children:e.jsx("span",{className:"px-4 bg-white text-gray-500",children:"or"})})]}),e.jsx("div",{className:"space-y-2",children:Qt.map(je=>e.jsxs("button",{onClick:()=>Zr(je.id),disabled:!je.available||B,className:`w-full p-3 rounded-xl border-2 transition-all flex items-center gap-3 ${y===je.id?"border-indigo-600 bg-indigo-50":"border-gray-200 hover:border-gray-300"} ${je.available?"":"opacity-50 cursor-not-allowed"}`,children:[e.jsx("div",{className:`w-10 h-10 rounded-lg flex items-center justify-center ${y===je.id?"bg-indigo-600 text-white":"bg-gray-100 text-gray-600"}`,children:je.icon}),e.jsxs("div",{className:"flex-1 text-left",children:[e.jsx("p",{className:"font-medium text-gray-900 text-sm",children:je.name}),e.jsx("p",{className:"text-xs text-gray-500",children:je.description})]}),e.jsx(Vs,{className:"w-4 h-4 text-gray-400"})]},je.id))}),e.jsx("div",{className:"mt-6 text-center",children:e.jsxs("div",{className:"flex items-center justify-center gap-2 text-gray-400",children:[e.jsx("div",{className:"w-2 h-2 bg-indigo-600 rounded-full animate-pulse"}),e.jsx("span",{className:"text-xs",children:"Waiting for payment..."})]})})]})]}),c==="auth"&&e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"text-center mb-6 p-4 bg-gray-50 rounded-xl",children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Total Amount"}),e.jsx("p",{className:"text-3xl font-bold text-gray-900",children:Wt(parseFloat(p))})]}),e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-2",children:K==="login"?"Login to Continue":"Create Account"}),e.jsx("p",{className:"text-sm text-gray-500 mb-4",children:K==="login"?"Sign in to complete your payment securely":"Create an account to complete your payment"}),ne&&e.jsxs("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-lg flex items-center gap-2 text-red-700 text-sm",children:[e.jsx(ut,{className:"w-4 h-4 flex-shrink-0"}),ne]}),e.jsxs("form",{onSubmit:K==="login"?ot:pt,className:"space-y-4",children:[K==="signup"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Full Name"}),e.jsxs("div",{className:"relative",children:[e.jsx(Es,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{type:"text",value:z,onChange:je=>re(je.target.value),placeholder:"John Doe",required:!0,className:"w-full py-3 pl-12 pr-4 border-2 border-gray-200 rounded-xl focus:border-indigo-500 outline-none"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email or Phone"}),e.jsxs("div",{className:"relative",children:[e.jsx(Va,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{type:"text",value:X,onChange:je=>se(je.target.value),placeholder:"email@example.com or 076123456",required:!0,className:"w-full py-3 pl-12 pr-4 border-2 border-gray-200 rounded-xl focus:border-indigo-500 outline-none"})]})]}),K==="signup"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone"}),e.jsxs("div",{className:"relative",children:[e.jsx(lr,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{type:"tel",value:ie,onChange:je=>Y(je.target.value),placeholder:"+232 76 123456",className:"w-full py-3 pl-12 pr-4 border-2 border-gray-200 rounded-xl focus:border-indigo-500 outline-none"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(Xs,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{type:G?"text":"password",value:de,onChange:je=>fe(je.target.value),placeholder:"",required:!0,minLength:6,className:"w-full py-3 pl-12 pr-12 border-2 border-gray-200 rounded-xl focus:border-indigo-500 outline-none"}),e.jsx("button",{type:"button",onClick:()=>H(!G),className:"absolute right-4 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600",children:G?e.jsx(Ln,{className:"w-5 h-5"}):e.jsx(es,{className:"w-5 h-5"})})]})]}),e.jsx("button",{type:"submit",disabled:ue,className:"w-full py-4 bg-indigo-600 text-white rounded-xl font-semibold disabled:opacity-50 hover:bg-indigo-700 transition-colors flex items-center justify-center gap-2",children:ue?e.jsx(Ie,{className:"w-5 h-5 animate-spin"}):e.jsxs(e.Fragment,{children:[K==="login"?"Login & Pay":"Create Account & Pay",e.jsx(Vs,{className:"w-5 h-5"})]})})]}),e.jsx("div",{className:"mt-4 text-center",children:e.jsx("button",{onClick:()=>{le(K==="login"?"signup":"login"),Ae(null)},className:"text-sm text-indigo-600 hover:text-indigo-700",children:K==="login"?"Don't have an account? Sign up":"Already have an account? Login"})})]}),c==="wallet_select"&&e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"text-center mb-6 p-4 bg-gradient-to-r from-indigo-600 to-purple-600 rounded-xl text-white",children:[e.jsx("p",{className:"text-sm opacity-80",children:"You're paying"}),e.jsx("p",{className:"text-3xl font-bold",children:Wt(parseFloat(p))}),e.jsxs("p",{className:"text-sm opacity-80 mt-1",children:["to ",u==null?void 0:u.name]})]}),e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Select Wallet"}),S&&e.jsxs("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-lg flex items-center gap-2 text-red-700 text-sm",children:[e.jsx(ut,{className:"w-4 h-4 flex-shrink-0"}),S]}),ee?e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsx(Ie,{className:"w-8 h-8 animate-spin text-indigo-600"})}):Fe.length===0?e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(jt,{className:"w-12 h-12 mx-auto mb-3 text-gray-300"}),e.jsx("p",{children:"No wallets found"})]}):e.jsx("div",{className:"space-y-3",children:Fe.map(je=>e.jsxs("button",{onClick:()=>ht(je),className:`w-full p-4 rounded-xl border-2 transition-all flex items-center gap-4 ${je.balance>=parseFloat(p)?"border-gray-200 hover:border-indigo-500 hover:bg-indigo-50":"border-gray-100 bg-gray-50 opacity-60"}`,children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-gradient-to-br from-indigo-500 to-purple-600 flex items-center justify-center text-white",children:e.jsx(jt,{className:"w-6 h-6"})}),e.jsxs("div",{className:"flex-1 text-left",children:[e.jsx("p",{className:"font-semibold text-gray-900",children:Wt(je.balance)}),e.jsxs("p",{className:"text-sm text-gray-500",children:[je.currency," Wallet"]})]}),je.balance>=parseFloat(p)?e.jsx(Vs,{className:"w-5 h-5 text-gray-400"}):e.jsx("span",{className:"text-xs text-red-500",children:"Insufficient"})]},je.id))}),e.jsxs("button",{onClick:()=>d("qr_payment"),className:"mt-6 w-full py-3 text-gray-600 text-sm hover:text-gray-800",children:[e.jsx(_s,{className:"w-4 h-4 inline mr-2"}),"Back to payment methods"]})]}),c==="slide_to_pay"&&e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"text-center mb-6 p-4 bg-gradient-to-r from-indigo-600 to-purple-600 rounded-xl text-white",children:[e.jsx("p",{className:"text-sm opacity-80",children:"Paying"}),e.jsx("p",{className:"text-3xl font-bold",children:Wt(parseFloat(p))}),e.jsxs("p",{className:"text-sm opacity-80 mt-1",children:["to ",u==null?void 0:u.name]})]}),e.jsxs("div",{className:"bg-gray-50 rounded-xl p-4 mb-6 flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-indigo-500 to-purple-600 flex items-center justify-center text-white",children:e.jsx(jt,{className:"w-5 h-5"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"From wallet"}),e.jsx("p",{className:"font-semibold text-gray-900",children:Wt((J==null?void 0:J.balance)||0)})]})]}),e.jsx("div",{className:"relative mb-6",children:e.jsxs("div",{className:"h-16 bg-gray-100 rounded-full relative overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-indigo-600 to-purple-600 transition-all duration-300",style:{width:`${ye}%`}}),e.jsx("div",{className:"absolute top-1 left-1 bottom-1 w-14 bg-white rounded-full shadow-lg flex items-center justify-center cursor-grab active:cursor-grabbing transition-all",style:{left:`calc(${ye}% - ${ye*.14}px + 4px)`},onMouseDown:je=>{Se(!0);const Ge=je.clientX,nt=je.currentTarget.parentElement,dr=(nt==null?void 0:nt.clientWidth)||200,Aa=Ur=>{const dd=Ur.clientX-Ge,Rl=Math.min(100,Math.max(0,dd/(dr-60)*100));he(Rl),Rl>=95&&($e(),document.removeEventListener("mousemove",Aa),document.removeEventListener("mouseup",tr))},tr=()=>{Se(!1),ye<95&&he(0),document.removeEventListener("mousemove",Aa),document.removeEventListener("mouseup",tr)};document.addEventListener("mousemove",Aa),document.addEventListener("mouseup",tr)},onTouchStart:je=>{Se(!0);const Ge=je.touches[0].clientX,nt=je.currentTarget.parentElement,dr=(nt==null?void 0:nt.clientWidth)||200,Aa=Ur=>{const dd=Ur.touches[0].clientX-Ge,Rl=Math.min(100,Math.max(0,dd/(dr-60)*100));he(Rl),Rl>=95&&$e()},tr=()=>{Se(!1),ye<95&&he(0),document.removeEventListener("touchmove",Aa),document.removeEventListener("touchend",tr)};document.addEventListener("touchmove",Aa),document.addEventListener("touchend",tr)},children:e.jsx(Vs,{className:"w-6 h-6 text-indigo-600"})}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none",children:e.jsx("span",{className:`font-medium transition-opacity ${ye>30?"text-white":"text-gray-500"}`,children:ye>80?"Release to confirm":"Slide to pay"})})]})}),e.jsxs("button",{onClick:()=>d("wallet_select"),className:"w-full py-3 text-gray-600 text-sm hover:text-gray-800",children:[e.jsx(_s,{className:"w-4 h-4 inline mr-2"}),"Change wallet"]})]}),c==="enter_pin"&&e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"text-center mb-6 p-4 bg-gradient-to-r from-green-500 to-emerald-600 rounded-xl text-white",children:[e.jsx(be,{className:"w-8 h-8 mx-auto mb-2"}),e.jsx("p",{className:"text-sm opacity-80",children:"Confirming payment of"}),e.jsx("p",{className:"text-2xl font-bold",children:Wt(parseFloat(p))})]}),e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-2 text-center",children:"Enter Transaction PIN"}),e.jsx("p",{className:"text-sm text-gray-500 text-center mb-6",children:"Enter your 4-digit PIN to complete this payment"}),Yt&&e.jsxs("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-lg flex items-center gap-2 text-red-700 text-sm",children:[e.jsx(ut,{className:"w-4 h-4 flex-shrink-0"}),Yt]}),e.jsx("div",{className:"flex justify-center gap-3 mb-6",children:[0,1,2,3].map(je=>e.jsx("div",{className:`w-14 h-14 rounded-xl border-2 flex items-center justify-center text-2xl font-bold ${Ht.length>je?"border-indigo-600 bg-indigo-50 text-indigo-600":"border-gray-200 text-gray-400"}`,children:Ht.length>je?"":""},je))}),e.jsx("div",{className:"grid grid-cols-3 gap-3 max-w-xs mx-auto mb-6",children:[1,2,3,4,5,6,7,8,9,null,0,"del"].map((je,Ge)=>e.jsx("button",{onClick:()=>{je==="del"?Xe(nt=>nt.slice(0,-1)):je!==null&&Ht.length<4&&Xe(nt=>nt+je)},disabled:je===null,className:`h-14 rounded-xl font-semibold text-xl transition-colors ${je===null?"invisible":je==="del"?"bg-gray-100 text-gray-600 hover:bg-gray-200":"bg-gray-100 text-gray-900 hover:bg-gray-200 active:bg-indigo-100"}`,children:je==="del"?e.jsx(lt,{className:"w-5 h-5 mx-auto"}):je},Ge))}),e.jsxs("button",{onClick:Ve,disabled:Ht.length!==4,className:"w-full py-4 bg-indigo-600 text-white rounded-xl font-semibold disabled:opacity-50 hover:bg-indigo-700 transition-colors flex items-center justify-center gap-2",children:["Confirm Payment",e.jsx(Vs,{className:"w-5 h-5"})]})]}),e.jsx("div",{className:"px-6 py-4 bg-gray-50 border-t border-gray-100",children:e.jsxs("div",{className:"flex items-center justify-center gap-2 text-gray-500",children:[e.jsx(Xt,{className:"w-4 h-4"}),e.jsx("span",{className:"text-xs",children:"Secured by Peeap"})]})})]}),e.jsx("div",{className:"text-center mt-4",children:e.jsx("a",{href:"https://peeap.com",target:"_blank",rel:"noopener noreferrer",className:"text-sm text-white/70 hover:text-white",children:"Powered by Peeap"})})]})})}const SE={SLE:{symbol:"Le",name:"Sierra Leonean Leone",decimals:0},USD:{symbol:"$",name:"US Dollar",decimals:2},EUR:{symbol:"",name:"Euro",decimals:2},GBP:{symbol:"",name:"British Pound",decimals:2},NGN:{symbol:"",name:"Nigerian Naira",decimals:2},GHS:{symbol:"",name:"Ghanaian Cedi",decimals:2}};function vde(){var ee,Ne,ye;const{sessionId:t}=hi(),[s]=$o();At();const{user:r,isAuthenticated:a,login:n,register:i,isLoading:l}=wt(),[o,c]=h.useState("loading"),[d,u]=h.useState(null),[m,p]=h.useState(null),[x,g]=h.useState(null),[f,b]=h.useState(""),[j,v]=h.useState(""),[w,y]=h.useState(""),[C,S]=h.useState(""),[_,E]=h.useState("login"),[A,R]=h.useState(""),[I,N]=h.useState(""),[P,k]=h.useState(""),[D,$]=h.useState(""),[L,B]=h.useState(""),[T,O]=h.useState(""),[q,K]=h.useState(!1),[le,X]=h.useState(null),[se,de]=h.useState(!1),fe=(he,Ce)=>{const Se=SE[Ce]||SE.SLE;return`${Se.symbol} ${he.toLocaleString(void 0,{minimumFractionDigits:Se.decimals,maximumFractionDigits:Se.decimals})}`},[z,re]=h.useState(null);h.useEffect(()=>{const he=s.get("status"),Ce=s.get("retry"),Se=s.get("message");he==="success"?ie():Ce==="true"&&Se&&(re(decodeURIComponent(Se)),window.history.replaceState({},"",`/checkout/pay/${t}`));const Be=window.__CHECKOUT_MESSAGE__;Be&&(re(Be),delete window.__CHECKOUT_MESSAGE__)},[s,t]);const ie=async()=>{if(t){c("processing");try{const he="https://api.peeap.com",Ce=await fetch(`${he}/checkout/sessions/${t}/complete`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({paymentMethod:"mobile_money"})});if(!Ce.ok){const Dt=await Ce.json();throw new Error(Dt.error||"Failed to complete session")}const Be=await(await fetch(`${he}/checkout/sessions/${t}`)).json();u({...Be,successUrl:Be.success_url||Be.successUrl,merchantName:Be.merchant_name||Be.merchantName,amount:Be.amount,currencyCode:Be.currency_code||Be.currencyCode||"SLE"}),c("success"),(Be.success_url||Be.successUrl)&&setTimeout(()=>{window.location.href=Be.success_url||Be.successUrl},3e3)}catch(he){console.error("Complete session error:",he),g(he.message||"Failed to complete payment"),c("error")}}};h.useEffect(()=>{s.get("status")||Y()},[t]),h.useEffect(()=>{a&&r&&m==="mobile"&&o==="login_prompt"&&Fe()},[a,r,m,o]);const Y=async()=>{if(!t){g("Invalid checkout session"),c("error");return}try{const Ce=await fetch(`https://api.peeap.com/checkout/sessions/${t}`);if(!Ce.ok)throw new Error("Session not found");const Se=await Ce.json(),Be={id:Se.id,externalId:Se.external_id||Se.externalId,merchantId:Se.merchant_id||Se.merchantId,amount:Se.amount,currencyCode:Se.currency_code||Se.currencyCode||"SLE",description:Se.description,status:Se.status,expiresAt:Se.expires_at||Se.expiresAt,createdAt:Se.created_at||Se.createdAt,merchantName:Se.merchant_name||Se.merchantName,merchantLogoUrl:Se.merchant_logo_url||Se.merchantLogoUrl,brandColor:Se.brand_color||Se.brandColor||"#4F46E5",successUrl:Se.success_url||Se.successUrl,cancelUrl:Se.cancel_url||Se.cancelUrl,paymentMethods:Se.payment_methods&&typeof Se.payment_methods=="object"?Se.payment_methods:Se.paymentMethods&&typeof Se.paymentMethods=="object"?Se.paymentMethods:{qr:!0,card:!0,mobile:!0}};if(new Date(Be.expiresAt)<new Date){u(Be),c("expired");return}if(Be.status==="COMPLETE"){g("This checkout session has already been completed"),c("error");return}if(Be.status==="CANCELLED"){g("This checkout session was cancelled"),c("error");return}u(Be),c("select_method")}catch(he){console.error("Failed to load session:",he),g(he.message||"Failed to load checkout session"),c("error")}},G=async he=>{p(he),he==="qr"?c("qr_display"):he==="card"?c("card_form"):he==="mobile"&&(a&&r?Fe():c("login_prompt"))},H=()=>{p(null),c("select_method"),g(null)},ue=()=>`${window.location.origin}/pay/${t}`,me=async he=>{if(he.preventDefault(),!!d){de(!0),g(null);try{const Ce="https://api.peeap.com",[Se,Be]=j.split("/"),Dt=parseInt(Se,10);let Ht=parseInt(Be,10);Ht<100&&(Ht+=2e3);const Xe=await fetch(`${Ce}/checkout/tokenize`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({pan:f.replace(/\s/g,""),expiryMonth:Dt,expiryYear:Ht})});if(!Xe.ok){const Wt=await Xe.json().catch(()=>({}));throw new Error(Wt.message||"Card not found or invalid. Please use a valid Peeap card.")}const{cardToken:Yt}=await Xe.json(),Mt=await fetch(`${Ce}/checkout/sessions/${t}/complete`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({cardToken:Yt})});if(!Mt.ok){const Wt=await Mt.json().catch(()=>({}));throw new Error(Wt.message||"Payment failed")}if((await Mt.json()).status==="COMPLETE")d.successUrl?window.location.href=d.successUrl:c("success");else throw new Error("Payment was not successful")}catch(Ce){console.error("Card payment error:",Ce),g(Ce.message||"Payment failed. Please try again.")}finally{de(!1)}}},ne=async he=>{he.preventDefault(),K(!0),X(null);try{await n({email:A,password:D})}catch(Ce){X(Ce.message||"Login failed. Please try again.")}finally{K(!1)}},Ae=async he=>{he.preventDefault(),K(!0),X(null);try{await i({email:I,phone:P,password:D,firstName:L,lastName:T})}catch(Ce){X(Ce.message||"Registration failed. Please try again.")}finally{K(!1)}},Fe=async()=>{if(d){c("processing"),g(null);try{const Ce=await fetch(`https://api.peeap.com/checkout/sessions/${t}/mobile-pay`,{method:"POST",headers:{"Content-Type":"application/json",...r!=null&&r.id?{"X-User-Id":r.id}:{}},body:JSON.stringify({userId:r==null?void 0:r.id,userEmail:r==null?void 0:r.email})}),Se=await Ce.json();if(!Ce.ok)throw new Error(Se.error||"Failed to create payment session");if(Se.paymentUrl)window.location.href=Se.paymentUrl;else throw new Error("No payment URL received from Monime")}catch(he){console.error("Mobile payment error:",he),g(he.message||"Payment failed. Please try again."),c("error")}}},at=he=>{var Be;const Ce=he.replace(/\s/g,"");return(((Be=Ce.match(/.{1,4}/g))==null?void 0:Be.join(" "))||Ce).substring(0,19)},J=he=>{const Ce=he.replace(/\D/g,"");return Ce.length>=2?`${Ce.substring(0,2)}/${Ce.substring(2,4)}`:Ce},Q=(d==null?void 0:d.brandColor)||"#4F46E5";return o==="loading"||l?e.jsx("div",{className:"min-h-screen flex items-center justify-center p-4",style:{background:"#f8fafc"},children:e.jsxs("div",{className:"text-center text-gray-600",children:[e.jsx(Ie,{className:"w-12 h-12 animate-spin mx-auto mb-4 text-indigo-600"}),e.jsx("p",{children:"Loading checkout..."})]})}):o==="expired"?e.jsx("div",{className:"min-h-screen flex items-center justify-center p-4",style:{background:"#f8fafc"},children:e.jsxs(W,{className:"max-w-md w-full p-8 text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-orange-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(ut,{className:"w-8 h-8 text-orange-600"})}),e.jsx("h1",{className:"text-xl font-bold text-gray-900 mb-2",children:"Session Expired"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"This checkout session has expired. Please contact the merchant to get a new payment link."}),(d==null?void 0:d.cancelUrl)&&e.jsx("button",{onClick:()=>window.location.href=d.cancelUrl,className:"w-full px-6 py-3 bg-gray-100 text-gray-700 rounded-xl font-medium hover:bg-gray-200",children:"Return to Merchant"})]})}):o==="error"?e.jsx("div",{className:"min-h-screen flex items-center justify-center p-4",style:{background:"#f8fafc"},children:e.jsxs(W,{className:"max-w-md w-full p-8 text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(ft,{className:"w-8 h-8 text-red-600"})}),e.jsx("h1",{className:"text-xl font-bold text-gray-900 mb-2",children:"Payment Error"}),e.jsx("p",{className:"text-gray-600 mb-6",children:x||"Something went wrong"}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("button",{onClick:H,className:"w-full px-6 py-3 text-white rounded-xl font-medium hover:opacity-90",style:{backgroundColor:Q},children:"Try Again"}),(d==null?void 0:d.cancelUrl)&&e.jsx("button",{onClick:()=>window.location.href=d.cancelUrl,className:"w-full px-6 py-3 bg-gray-100 text-gray-700 rounded-xl font-medium hover:bg-gray-200",children:"Cancel & Return to Merchant"})]})]})}):o==="success"?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-green-500 to-emerald-600 flex items-center justify-center p-4",children:e.jsxs(W,{className:"max-w-md w-full p-8 text-center",children:[e.jsx("div",{className:"w-20 h-20 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(be,{className:"w-10 h-10 text-green-600"})}),e.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Payment Successful!"}),d&&e.jsxs("p",{className:"text-gray-600 mb-2",children:["You paid ",fe(d.amount,d.currencyCode)]}),(d==null?void 0:d.merchantName)&&e.jsxs("p",{className:"text-sm text-gray-500 mb-6",children:["to ",d.merchantName]}),(d==null?void 0:d.successUrl)&&e.jsxs("button",{onClick:()=>window.location.href=d.successUrl,className:"w-full py-4 text-white rounded-xl font-semibold hover:opacity-90",style:{backgroundColor:Q},children:["Return to ",d.merchantName||"Merchant"]})]})}):o==="processing"?e.jsx("div",{className:"min-h-screen flex items-center justify-center p-4",style:{background:"#f8fafc"},children:e.jsxs(W,{className:"max-w-md w-full p-8 text-center",children:[e.jsxs("div",{className:"relative w-20 h-20 mx-auto mb-6",children:[e.jsx("div",{className:"absolute inset-0 border-4 border-indigo-200 rounded-full"}),e.jsx("div",{className:"absolute inset-0 border-4 rounded-full border-t-transparent animate-spin",style:{borderColor:`${Q} transparent transparent transparent`}})]}),e.jsx("h1",{className:"text-xl font-bold text-gray-900 mb-2",children:"Processing Payment"}),e.jsx("p",{className:"text-gray-600",children:"Please wait..."}),e.jsx("p",{className:"text-xs text-gray-400 mt-4",children:"Do not close this window"})]})}):o==="login_prompt"?e.jsx("div",{className:"min-h-screen flex items-center justify-center p-4",style:{background:"#f8fafc"},children:e.jsx("div",{className:"max-w-md w-full",children:e.jsxs(W,{className:"overflow-hidden",children:[e.jsx("div",{className:"bg-white border-b border-gray-100 p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:H,className:"p-2 hover:bg-gray-100 rounded-lg",children:e.jsx(_s,{className:"w-5 h-5 text-gray-600"})}),e.jsxs("div",{className:"flex-1",children:[(d==null?void 0:d.merchantLogoUrl)&&e.jsx("img",{src:d.merchantLogoUrl,alt:d.merchantName,className:"h-8 mb-1"}),e.jsx("p",{className:"font-semibold text-gray-900",children:(d==null?void 0:d.merchantName)||"Merchant"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Sign in to complete payment"})]})]})}),d&&e.jsxs("div",{className:"p-6 text-center bg-gray-50 border-b border-gray-100",children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Amount to pay"}),e.jsx("p",{className:"text-3xl font-bold text-gray-900",children:fe(d.amount,d.currencyCode)})]}),e.jsx("div",{className:"p-4 border-b border-gray-100",children:e.jsxs("div",{className:"flex bg-gray-100 rounded-xl p-1",children:[e.jsx("button",{onClick:()=>E("login"),className:`flex-1 py-2 px-4 rounded-lg font-medium transition-colors ${_==="login"?"bg-white shadow-sm":"text-gray-600 hover:text-gray-900"}`,style:_==="login"?{color:Q}:{},children:"Sign In"}),e.jsx("button",{onClick:()=>E("register"),className:`flex-1 py-2 px-4 rounded-lg font-medium transition-colors ${_==="register"?"bg-white shadow-sm":"text-gray-600 hover:text-gray-900"}`,style:_==="register"?{color:Q}:{},children:"Create Account"})]})}),le&&e.jsxs("div",{className:"mx-6 mt-4 p-3 bg-red-50 border border-red-200 rounded-lg flex items-center gap-2 text-red-700 text-sm",children:[e.jsx(ut,{className:"w-4 h-4 flex-shrink-0"}),le]}),_==="login"&&e.jsxs("form",{onSubmit:ne,className:"p-6 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone Number or Email"}),e.jsx("input",{type:"text",value:A,onChange:he=>R(he.target.value),placeholder:"+232 76 123456 or email@example.com",className:"w-full py-3 px-4 border-2 border-gray-200 rounded-xl focus:outline-none",style:{borderColor:`${Q}40`},required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Password"}),e.jsx("input",{type:"password",value:D,onChange:he=>$(he.target.value),placeholder:"Enter your password",className:"w-full py-3 px-4 border-2 border-gray-200 rounded-xl focus:outline-none",required:!0})]}),e.jsx("button",{type:"submit",disabled:q,className:"w-full py-4 text-white rounded-xl font-semibold disabled:opacity-50 hover:opacity-90 flex items-center justify-center gap-2",style:{backgroundColor:Q},children:q?e.jsx(Ie,{className:"w-5 h-5 animate-spin"}):e.jsxs(e.Fragment,{children:[e.jsx(ew,{className:"w-5 h-5"}),"Sign In & Pay ",d&&fe(d.amount,d.currencyCode)]})})]}),_==="register"&&e.jsxs("form",{onSubmit:Ae,className:"p-6 space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"First Name"}),e.jsx("input",{type:"text",value:L,onChange:he=>B(he.target.value),placeholder:"John",className:"w-full py-3 px-4 border-2 border-gray-200 rounded-xl focus:outline-none",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Last Name"}),e.jsx("input",{type:"text",value:T,onChange:he=>O(he.target.value),placeholder:"Doe",className:"w-full py-3 px-4 border-2 border-gray-200 rounded-xl focus:outline-none",required:!0})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email Address"}),e.jsx("input",{type:"email",value:I,onChange:he=>N(he.target.value),placeholder:"john@example.com",className:"w-full py-3 px-4 border-2 border-gray-200 rounded-xl focus:outline-none",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone Number"}),e.jsx("input",{type:"tel",value:P,onChange:he=>k(he.target.value),placeholder:"+232 76 123456",className:"w-full py-3 px-4 border-2 border-gray-200 rounded-xl focus:outline-none",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Password"}),e.jsx("input",{type:"password",value:D,onChange:he=>$(he.target.value),placeholder:"Create a password",className:"w-full py-3 px-4 border-2 border-gray-200 rounded-xl focus:outline-none",required:!0})]}),e.jsx("button",{type:"submit",disabled:q,className:"w-full py-4 text-white rounded-xl font-semibold disabled:opacity-50 hover:opacity-90 flex items-center justify-center gap-2",style:{backgroundColor:Q},children:q?e.jsx(Ie,{className:"w-5 h-5 animate-spin"}):e.jsxs(e.Fragment,{children:[e.jsx(FV,{className:"w-5 h-5"}),"Create Account & Pay ",d&&fe(d.amount,d.currencyCode)]})})]}),e.jsx("div",{className:"px-6 py-4 bg-gray-50 border-t border-gray-100",children:e.jsxs("div",{className:"flex items-center justify-center gap-2 text-gray-500",children:[e.jsx(Xt,{className:"w-4 h-4"}),e.jsx("span",{className:"text-xs",children:"Secured by Peeap"})]})})]})})}):o==="qr_display"?e.jsx("div",{className:"min-h-screen flex items-center justify-center p-4",style:{background:"#f8fafc"},children:e.jsx("div",{className:"max-w-md w-full",children:e.jsxs(W,{className:"overflow-hidden",children:[e.jsx("div",{className:"bg-white border-b border-gray-100 p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:H,className:"p-2 hover:bg-gray-100 rounded-lg",children:e.jsx(_s,{className:"w-5 h-5 text-gray-600"})}),e.jsxs("div",{className:"flex-1 text-center",children:[(d==null?void 0:d.merchantLogoUrl)&&e.jsx("img",{src:d.merchantLogoUrl,alt:d.merchantName,className:"h-8 mx-auto mb-1"}),e.jsx("p",{className:"font-semibold text-gray-900",children:(d==null?void 0:d.merchantName)||"Merchant"})]})]})}),d&&e.jsxs("div",{className:"p-6 text-center bg-gray-50 border-b border-gray-100",children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Amount to pay"}),e.jsx("p",{className:"text-4xl font-bold text-gray-900",children:fe(d.amount,d.currencyCode)}),d.description&&e.jsx("p",{className:"text-sm text-gray-500 mt-2",children:d.description})]}),e.jsxs("div",{className:"p-8 text-center",children:[e.jsx("div",{className:"bg-white p-6 rounded-xl inline-block shadow-md border-2",style:{borderColor:`${Q}40`},children:e.jsx(L0,{value:ue(),size:200,level:"M"})}),e.jsx("p",{className:"text-sm text-gray-600 mt-4",children:"Scan this QR code with your Peeap app to complete payment"})]}),e.jsx("div",{className:"px-6 py-4 bg-gray-50 border-t border-gray-100",children:e.jsxs("div",{className:"flex items-center justify-center gap-2 text-gray-500",children:[e.jsx(Xt,{className:"w-4 h-4"}),e.jsx("span",{className:"text-xs",children:"Secured by Peeap"})]})})]})})}):o==="card_form"?e.jsx("div",{className:"min-h-screen flex items-center justify-center p-4",style:{background:"#f8fafc"},children:e.jsx("div",{className:"max-w-md w-full",children:e.jsxs(W,{className:"overflow-hidden",children:[e.jsx("div",{className:"bg-white border-b border-gray-100 p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:H,className:"p-2 hover:bg-gray-100 rounded-lg",children:e.jsx(_s,{className:"w-5 h-5 text-gray-600"})}),e.jsxs("div",{className:"flex-1",children:[(d==null?void 0:d.merchantLogoUrl)&&e.jsx("img",{src:d.merchantLogoUrl,alt:d.merchantName,className:"h-8 mb-1"}),e.jsx("p",{className:"font-semibold text-gray-900",children:(d==null?void 0:d.merchantName)||"Merchant"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Pay with your PEEAP Card"})]})]})}),d&&e.jsxs("div",{className:"p-6 text-center bg-gray-50 border-b border-gray-100",children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Amount to pay"}),e.jsx("p",{className:"text-3xl font-bold text-gray-900",children:fe(d.amount,d.currencyCode)})]}),x&&e.jsxs("div",{className:"mx-6 mt-4 p-3 bg-red-50 border border-red-200 rounded-lg flex items-center gap-2 text-red-700 text-sm",children:[e.jsx(ut,{className:"w-4 h-4 flex-shrink-0"}),x]}),e.jsxs("form",{onSubmit:me,className:"p-6 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Card Number"}),e.jsx("input",{type:"text",value:f,onChange:he=>b(at(he.target.value)),placeholder:"1234 5678 9012 3456",className:"w-full py-3 px-4 border-2 border-gray-200 rounded-xl focus:outline-none font-mono",maxLength:19,required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Cardholder Name"}),e.jsx("input",{type:"text",value:C,onChange:he=>S(he.target.value),placeholder:"John Doe",className:"w-full py-3 px-4 border-2 border-gray-200 rounded-xl focus:outline-none",required:!0})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Expiry Date"}),e.jsx("input",{type:"text",value:j,onChange:he=>v(J(he.target.value)),placeholder:"MM/YY",className:"w-full py-3 px-4 border-2 border-gray-200 rounded-xl focus:outline-none font-mono",maxLength:5,required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"CVV"}),e.jsx("input",{type:"text",value:w,onChange:he=>y(he.target.value.replace(/\D/g,"").substring(0,3)),placeholder:"123",className:"w-full py-3 px-4 border-2 border-gray-200 rounded-xl focus:outline-none font-mono",maxLength:3,required:!0})]})]}),e.jsx("button",{type:"submit",disabled:se,className:"w-full py-4 text-white rounded-xl font-semibold disabled:opacity-50 hover:opacity-90 flex items-center justify-center gap-2",style:{backgroundColor:Q},children:se?e.jsx(Ie,{className:"w-5 h-5 animate-spin"}):e.jsxs(e.Fragment,{children:[e.jsx(Xs,{className:"w-5 h-5"}),"Pay ",d&&fe(d.amount,d.currencyCode)]})})]}),e.jsx("div",{className:"px-6 py-4 bg-gray-50 border-t border-gray-100",children:e.jsxs("div",{className:"flex items-center justify-center gap-2 text-gray-500",children:[e.jsx(Xt,{className:"w-4 h-4"}),e.jsx("span",{className:"text-xs",children:"Your payment information is secure and encrypted"})]})})]})})}):d?e.jsx("div",{className:"min-h-screen flex items-center justify-center p-4",style:{background:"#f8fafc"},children:e.jsxs("div",{className:"max-w-md w-full",children:[e.jsxs(W,{className:"overflow-hidden",children:[e.jsxs("div",{className:"bg-white border-b border-gray-100 p-6 text-center",children:[d.merchantLogoUrl?e.jsx("img",{src:d.merchantLogoUrl,alt:d.merchantName,className:"h-16 mx-auto mb-3"}):e.jsx("div",{className:"w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-3",style:{backgroundColor:`${Q}20`},children:e.jsx(Je,{className:"w-8 h-8",style:{color:Q}})}),e.jsx("h1",{className:"text-xl font-bold text-gray-900",children:"Secure Checkout"}),e.jsx("p",{className:"text-sm text-gray-500",children:d.merchantName||"Merchant"})]}),e.jsxs("div",{className:"p-6 text-center bg-gray-50 border-b border-gray-100",children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Amount to pay"}),e.jsx("p",{className:"text-4xl font-bold text-gray-900",children:fe(d.amount,d.currencyCode)}),d.description&&e.jsx("p",{className:"text-sm text-gray-500 mt-2",children:d.description})]}),e.jsxs("div",{className:"p-6",children:[z&&e.jsxs("div",{className:"mb-4 p-4 bg-amber-50 border border-amber-200 rounded-xl flex items-start gap-3",children:[e.jsx(ut,{className:"w-5 h-5 text-amber-600 flex-shrink-0 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-amber-800 font-medium",children:z}),e.jsx("button",{onClick:()=>re(null),className:"text-xs text-amber-600 hover:text-amber-800 mt-1 underline",children:"Dismiss"})]})]}),e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Choose Payment Method"}),e.jsxs("div",{className:"space-y-3",children:[((ee=d.paymentMethods)==null?void 0:ee.qr)!==!1&&e.jsxs("button",{onClick:()=>G("qr"),className:"w-full flex items-center gap-4 p-4 rounded-xl border-2 border-gray-200 hover:border-gray-300 transition-all",children:[e.jsx("div",{className:"w-12 h-12 rounded-xl flex items-center justify-center",style:{backgroundColor:`${Q}20`,color:Q},children:e.jsx(wa,{className:"w-6 h-6"})}),e.jsxs("div",{className:"flex-1 text-left",children:[e.jsx("p",{className:"font-medium text-gray-900",children:"QR Code"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Scan with Peeap app"})]})]}),((Ne=d.paymentMethods)==null?void 0:Ne.card)!==!1&&e.jsxs("button",{onClick:()=>G("card"),className:"w-full flex items-center gap-4 p-4 rounded-xl border-2 border-gray-200 hover:border-gray-300 transition-all",children:[e.jsx("div",{className:"w-12 h-12 rounded-xl flex items-center justify-center",style:{backgroundColor:`${Q}20`,color:Q},children:e.jsx(Je,{className:"w-6 h-6"})}),e.jsxs("div",{className:"flex-1 text-left",children:[e.jsx("p",{className:"font-medium text-gray-900",children:"PEEAP Card"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Pay with your card"})]})]}),((ye=d.paymentMethods)==null?void 0:ye.mobile)!==!1&&e.jsxs("button",{onClick:()=>G("mobile"),className:"w-full flex items-center gap-4 p-4 rounded-xl border-2 border-gray-200 hover:border-gray-300 transition-all",children:[e.jsx("div",{className:"w-12 h-12 rounded-xl flex items-center justify-center bg-orange-100 text-orange-600",children:e.jsx(Na,{className:"w-6 h-6"})}),e.jsxs("div",{className:"flex-1 text-left",children:[e.jsx("p",{className:"font-medium text-gray-900",children:"Mobile Money"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Orange Money & more"})]})]})]})]}),e.jsx("div",{className:"px-6 py-4 bg-gray-50 border-t border-gray-100",children:e.jsxs("div",{className:"flex items-center justify-center gap-2 text-gray-500",children:[e.jsx(Xt,{className:"w-4 h-4"}),e.jsx("span",{className:"text-xs",children:"Secured by Peeap"})]})})]}),e.jsx("div",{className:"text-center mt-4",children:e.jsx("a",{href:"https://peeap.com",target:"_blank",rel:"noopener noreferrer",className:"text-sm text-white/70 hover:text-white",children:"Powered by Peeap"})})]})}):null}const jde="https://apps.apple.com/app/peeap/id123456789",wde="https://play.google.com/store/apps/details?id=com.peeap.app",_E="peeappay",EE={SLE:{symbol:"Le",name:"Sierra Leonean Leone"},USD:{symbol:"$",name:"US Dollar"},EUR:{symbol:"",name:"Euro"},GBP:{symbol:"",name:"British Pound"}};function Nde(){const{paymentId:t}=hi(),[s]=$o(),r=At(),[a,n]=h.useState(!0),[i,l]=h.useState(!1),[o,c]=h.useState("desktop"),d=s.get("amount"),u=s.get("currency")||"SLE",m=s.get("description"),p=s.get("merchant"),x=w=>`${(EE[u]||EE.SLE).symbol} ${parseFloat(w).toLocaleString()}`,g=()=>{const w=new URLSearchParams;return d&&w.set("amount",d),w.set("currency",u),m&&w.set("description",m),p&&w.set("merchant",p),`${_E}://checkout/${t}?${w.toString()}`},f=()=>`/checkout/${t}?${s.toString()}`;h.useEffect(()=>{const w=navigator.userAgent.toLowerCase();/iphone|ipad|ipod/.test(w)?c("ios"):/android/.test(w)?c("android"):c("desktop")},[]),h.useEffect(()=>{if(o==="desktop"){n(!1);return}const w={paymentId:t,amount:d,currency:u,description:m,merchant:p,timestamp:Date.now(),returnUrl:window.location.href};localStorage.setItem("pendingPayment",JSON.stringify(w)),document.cookie=`peeap_payment=${encodeURIComponent(JSON.stringify(w))}; path=/; max-age=3600`;const y=g(),C=Date.now(),S=document.createElement("iframe");if(S.style.display="none",S.src=y,document.body.appendChild(S),o==="android"){const A=`intent://checkout/${t}?${s.toString()}#Intent;scheme=${_E};package=com.peeap.app;end`;window.location.href=A}const _=setTimeout(()=>{Date.now()-C<2500&&!document.hidden&&(n(!1),l(!1))},2500),E=()=>{document.hidden&&(l(!0),clearTimeout(_))};return document.addEventListener("visibilitychange",E),()=>{clearTimeout(_),document.removeEventListener("visibilitychange",E),S.parentNode&&S.parentNode.removeChild(S)}},[o,t,d,u,m,p]);const b=()=>{const w=g();window.location.href=w,setTimeout(()=>{document.hidden||j()},1500)},j=()=>{const w={paymentId:t,amount:d,currency:u,description:m,merchant:p,timestamp:Date.now(),returnUrl:window.location.href};localStorage.setItem("pendingPayment",JSON.stringify(w)),o==="ios"?window.location.href=jde:o==="android"&&(window.location.href=wde)},v=()=>{r(f())};return a?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-indigo-600 to-purple-700 flex items-center justify-center p-4",children:e.jsxs(W,{className:"max-w-md w-full p-8 text-center",children:[e.jsx(Ie,{className:"w-12 h-12 text-indigo-600 animate-spin mx-auto mb-4"}),e.jsx("h1",{className:"text-xl font-bold text-gray-900 mb-2",children:"Opening Peeap..."}),e.jsx("p",{className:"text-gray-600",children:o==="desktop"?"Preparing payment...":"Checking if Peeap app is installed..."})]})}):o==="desktop"?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-indigo-600 to-purple-700 flex items-center justify-center p-4",children:e.jsxs(W,{className:"max-w-md w-full p-8 text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-indigo-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(Na,{className:"w-8 h-8 text-indigo-600"})}),e.jsx("h1",{className:"text-xl font-bold text-gray-900 mb-2",children:"Scan with Phone"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Please scan this QR code with your phone to complete the payment"}),d&&e.jsxs("div",{className:"p-4 bg-gray-50 rounded-xl mb-6",children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Amount to pay"}),e.jsx("p",{className:"text-3xl font-bold text-gray-900",children:x(d)})]}),e.jsx("p",{className:"text-sm text-gray-500 mb-4",children:"Or continue on this device:"}),e.jsxs("button",{onClick:v,className:"w-full py-3 bg-indigo-600 text-white rounded-xl font-semibold hover:bg-indigo-700 flex items-center justify-center gap-2",children:["Continue in Browser",e.jsx(Lr,{className:"w-5 h-5"})]})]})}):e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-indigo-600 to-purple-700 flex items-center justify-center p-4",children:e.jsxs("div",{className:"max-w-md w-full",children:[e.jsxs(W,{className:"overflow-hidden",children:[e.jsxs("div",{className:"bg-white p-6 text-center border-b border-gray-100",children:[e.jsx("div",{className:"w-20 h-20 bg-indigo-100 rounded-2xl flex items-center justify-center mx-auto mb-4",children:e.jsx(wa,{className:"w-10 h-10 text-indigo-600"})}),e.jsx("h1",{className:"text-xl font-bold text-gray-900 mb-1",children:"Complete Payment"}),e.jsx("p",{className:"text-gray-500 text-sm",children:"with Peeap App"})]}),d&&e.jsxs("div",{className:"p-6 bg-gray-50 border-b border-gray-100 text-center",children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Amount to pay"}),e.jsx("p",{className:"text-4xl font-bold text-gray-900",children:x(d)}),p&&e.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["to ",p]})]}),e.jsxs("div",{className:"p-6",children:[e.jsx("div",{className:"bg-indigo-50 rounded-xl p-4 mb-6",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(ws,{className:"w-6 h-6 text-indigo-600 flex-shrink-0 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-indigo-900",children:"Get the Peeap App"}),e.jsx("p",{className:"text-sm text-indigo-700 mt-1",children:"Download the app to complete this payment securely. Your payment will continue automatically after installation."})]})]})}),e.jsxs("div",{className:"space-y-3 mb-6",children:[o==="ios"&&e.jsxs("button",{onClick:j,className:"w-full py-4 bg-black text-white rounded-xl font-semibold hover:bg-gray-800 flex items-center justify-center gap-3",children:[e.jsx(dV,{className:"w-6 h-6"}),e.jsxs("div",{className:"text-left",children:[e.jsx("p",{className:"text-xs opacity-80",children:"Download on the"}),e.jsx("p",{className:"text-lg font-bold -mt-1",children:"App Store"})]})]}),o==="android"&&e.jsxs("button",{onClick:j,className:"w-full py-4 bg-black text-white rounded-xl font-semibold hover:bg-gray-800 flex items-center justify-center gap-3",children:[e.jsx(If,{className:"w-6 h-6"}),e.jsxs("div",{className:"text-left",children:[e.jsx("p",{className:"text-xs opacity-80",children:"Get it on"}),e.jsx("p",{className:"text-lg font-bold -mt-1",children:"Google Play"})]})]})]}),e.jsxs("button",{onClick:b,className:"w-full py-3 bg-indigo-600 text-white rounded-xl font-semibold hover:bg-indigo-700 flex items-center justify-center gap-2 mb-3",children:[e.jsx(Fr,{className:"w-5 h-5"}),"I have the app, open it"]}),e.jsx("button",{onClick:v,className:"w-full py-3 bg-gray-100 text-gray-700 rounded-xl font-medium hover:bg-gray-200",children:"Continue in Browser Instead"})]}),e.jsx("div",{className:"px-6 pb-6",children:e.jsx("div",{className:"border-t border-gray-100 pt-4",children:e.jsx("p",{className:"text-xs text-gray-500 text-center",children:"After downloading, the app will automatically open with your payment ready to complete."})})})]}),e.jsx("div",{className:"text-center mt-4",children:e.jsx("p",{className:"text-sm text-white/70",children:"Secure payments powered by Peeap"})})]})})}const kde=[{path:"/merchant",label:"Dashboard",icon:Df},{path:"/merchant/shops",label:"My Shops",icon:ua},{path:"/merchant/transactions",label:"Transactions",icon:ci},{path:"/merchant/payouts",label:"Payouts",icon:js},{path:"/merchant/refunds",label:"Refunds",icon:vt},{path:"/merchant/reports",label:"Reports",icon:Bc},{path:"/merchant/payment-links",label:"Payment Links",icon:Qh},{path:"/merchant/profile",label:"Business Profile",icon:Ft},{path:"/merchant/settings",label:"Settings",icon:or}];function gs({children:t}){const[s,r]=h.useState(!1),{user:a,logout:n}=wt(),{isDeveloperMode:i,checkBusinesses:l,hasBusinesses:o,businessCount:c}=C0();h.useEffect(()=>{l()},[]);const d=Ga(),u=At(),m=async()=>{await n(),u("/login")};return e.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:[s&&e.jsx("div",{className:"fixed inset-0 z-40 bg-gray-600 bg-opacity-75 lg:hidden",onClick:()=>r(!1)}),e.jsx("aside",{className:oe("fixed inset-y-0 left-0 z-50 w-64 bg-white dark:bg-gray-800 border-r border-gray-200 dark:border-gray-700 transform transition-transform duration-300 ease-in-out lg:translate-x-0",s?"translate-x-0":"-translate-x-full"),children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex items-center justify-between h-16 px-6 border-b border-gray-200 dark:border-gray-700",children:[e.jsxs(Qe,{to:"/merchant",className:"flex items-center gap-2",children:[e.jsx(Ft,{className:"w-8 h-8 text-green-600 dark:text-green-400"}),e.jsx("span",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Merchant"})]}),e.jsx("button",{className:"lg:hidden p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700",onClick:()=>r(!1),children:e.jsx(lt,{className:"w-5 h-5 text-gray-600 dark:text-gray-400"})})]}),e.jsxs("nav",{className:"flex-1 px-4 py-6 space-y-1 overflow-y-auto scrollbar-hide",children:[kde.map(p=>{const x=p.icon,g=d.pathname===p.path||p.path!=="/merchant"&&d.pathname.startsWith(p.path);return e.jsxs(Qe,{to:p.path,className:oe("flex items-center px-4 py-3 rounded-lg transition-colors",g?"bg-green-50 dark:bg-green-900/30 text-green-700 dark:text-green-400":"text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700"),children:[e.jsx(x,{className:"w-5 h-5 mr-3"}),p.label]},p.path)}),i&&e.jsx("div",{className:"pt-4 mt-4 border-t border-gray-200 dark:border-gray-700",children:e.jsxs(Qe,{to:"/merchant/developer",className:"flex items-center justify-between px-4 py-3 rounded-lg bg-indigo-50 dark:bg-indigo-900/30 text-indigo-700 dark:text-indigo-400 hover:bg-indigo-100 dark:hover:bg-indigo-900/50 transition-colors",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(Ir,{className:"w-5 h-5 mr-3"}),e.jsx("span",{className:"font-medium",children:"Developer Portal"})]}),e.jsx(Fr,{className:"w-4 h-4"})]})})]}),e.jsx("div",{className:"px-4 py-3 border-t border-gray-200 dark:border-gray-700",children:e.jsxs(Qe,{to:"/merchant/support",className:oe("flex items-center px-4 py-3 rounded-lg transition-colors",d.pathname==="/merchant/support"?"bg-green-50 dark:bg-green-900/30 text-green-700 dark:text-green-400":"text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700"),children:[e.jsx(O1,{className:"w-5 h-5 mr-3"}),"Help & Support"]})}),e.jsxs("div",{className:"p-4 border-t border-gray-200 dark:border-gray-700",children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx("div",{className:"w-10 h-10 bg-green-100 dark:bg-green-900/30 rounded-full flex items-center justify-center",children:e.jsx(Ft,{className:"w-5 h-5 text-green-600 dark:text-green-400"})}),e.jsxs("div",{className:"ml-3",children:[e.jsxs("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:[a==null?void 0:a.firstName," ",a==null?void 0:a.lastName]}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Merchant Account"})]})]}),e.jsxs("button",{onClick:m,className:"flex items-center w-full px-4 py-2 text-gray-600 dark:text-gray-300 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",children:[e.jsx(_0,{className:"w-5 h-5 mr-3"}),"Sign out"]})]})]})}),e.jsxs("div",{className:"lg:pl-64",children:[e.jsx("header",{className:"sticky top-0 z-30 h-16 bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex items-center justify-between h-full px-4 lg:px-8",children:[e.jsx("button",{className:"lg:hidden p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700",onClick:()=>r(!0),children:e.jsx(E0,{className:"w-6 h-6 dark:text-gray-400"})}),e.jsxs("div",{className:"flex items-center gap-2 sm:gap-4",children:[e.jsx("span",{className:"hidden sm:inline-flex px-3 py-1 bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400 rounded-full text-xs font-medium",children:"Merchant Portal"}),e.jsxs(Qe,{to:"/merchant/upgrade",className:"inline-flex items-center gap-1.5 px-3 py-1.5 bg-gradient-to-r from-amber-500 to-orange-500 text-white rounded-full text-xs font-medium hover:from-amber-600 hover:to-orange-600 transition-all shadow-sm",children:[e.jsx(_g,{className:"w-3.5 h-3.5"}),e.jsx("span",{className:"hidden sm:inline",children:"Upgrade to"})," Merchant+"]}),i&&e.jsxs(Qe,{to:"/merchant/developer",className:"hidden sm:inline-flex items-center gap-1 px-3 py-1 bg-indigo-100 dark:bg-indigo-900/30 text-indigo-700 dark:text-indigo-400 rounded-full text-xs font-medium hover:bg-indigo-200 dark:hover:bg-indigo-900/50 transition-colors",children:[e.jsx(Ir,{className:"w-3 h-3"}),"Developer"]}),e.jsx(Wf,{}),e.jsx(zf,{})]})]})}),e.jsx("main",{className:"p-4 lg:p-8",children:t})]})]})}const kv={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}},$l={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.4,ease:"easeOut"}}};function AE(){const[t,s]=h.useState(null);h.useEffect(()=>{Ut.getDefaultCurrency().then(s)},[]);const r=(t==null?void 0:t.symbol)||"",a=l=>`${r}${l.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}`,[n]=h.useState({todayRevenue:0,monthlyRevenue:0,totalTransactions:0,avgTicket:0,successRate:0,pendingPayouts:0}),[i]=h.useState([]);return e.jsx(gs,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs(Oe.div,{className:"flex justify-between items-center",initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.5},children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Merchant Dashboard"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Overview of your merchant account"})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("button",{className:"px-4 py-2 text-sm bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 flex items-center gap-2 transition-colors",children:[e.jsx(Mn,{className:"w-4 h-4"}),"Last 30 days"]}),e.jsxs("button",{className:"px-4 py-2 text-sm bg-primary-600 text-white rounded-lg hover:bg-primary-700 flex items-center gap-2 transition-colors",children:[e.jsx(ws,{className:"w-4 h-4"}),"Export"]})]})]}),e.jsxs(Oe.div,{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",variants:kv,initial:"hidden",animate:"visible",children:[e.jsx(Oe.div,{variants:$l,children:e.jsx(Ax,{gradient:"green",delay:0,children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-green-100 text-sm font-medium",children:"Today's Revenue"}),e.jsx("p",{className:"text-3xl font-bold mt-2",children:a(n.todayRevenue)}),e.jsxs("div",{className:"flex items-center gap-1 mt-2 text-green-100",children:[e.jsx(xs,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm",children:"+12.5% vs yesterday"})]})]}),e.jsx("div",{className:"p-3 bg-white/20 rounded-lg",children:e.jsx(js,{className:"w-6 h-6"})})]})})}),e.jsx(Oe.div,{variants:$l,children:e.jsx(Ax,{gradient:"blue",delay:.1,children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-blue-100 text-sm font-medium",children:"Monthly Revenue"}),e.jsx("p",{className:"text-3xl font-bold mt-2",children:a(n.monthlyRevenue)}),e.jsxs("div",{className:"flex items-center gap-1 mt-2 text-blue-100",children:[e.jsx(xs,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm",children:"+8.3% vs last month"})]})]}),e.jsx("div",{className:"p-3 bg-white/20 rounded-lg",children:e.jsx(rr,{className:"w-6 h-6"})})]})})}),e.jsx(Oe.div,{variants:$l,children:e.jsx(Ax,{gradient:"purple",delay:.2,children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-purple-100 text-sm font-medium",children:"Pending Payouts"}),e.jsx("p",{className:"text-3xl font-bold mt-2",children:a(n.pendingPayouts)}),e.jsxs("div",{className:"flex items-center gap-1 mt-2 text-purple-100",children:[e.jsx(vt,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm",children:"Next payout: Tomorrow"})]})]}),e.jsx("div",{className:"p-3 bg-white/20 rounded-lg",children:e.jsx(Ft,{className:"w-6 h-6"})})]})})})]}),e.jsxs(Oe.div,{className:"grid grid-cols-1 md:grid-cols-3 gap-6",variants:kv,initial:"hidden",animate:"visible",children:[e.jsx(Oe.div,{variants:$l,children:e.jsxs(we,{padding:"sm",className:"flex items-center gap-4",delay:.3,glowEffect:!0,children:[e.jsx("div",{className:"p-3 bg-cyan-100 dark:bg-cyan-900/30 rounded-lg",children:e.jsx(Mf,{className:"w-5 h-5 text-cyan-600 dark:text-cyan-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Total Transactions"}),e.jsx("p",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:n.totalTransactions.toLocaleString()})]})]})}),e.jsx(Oe.div,{variants:$l,children:e.jsxs(we,{padding:"sm",className:"flex items-center gap-4",delay:.4,glowEffect:!0,children:[e.jsx("div",{className:"p-3 bg-amber-100 dark:bg-amber-900/30 rounded-lg",children:e.jsx(Je,{className:"w-5 h-5 text-amber-600 dark:text-amber-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Average Ticket"}),e.jsx("p",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:a(n.avgTicket)})]})]})}),e.jsx(Oe.div,{variants:$l,children:e.jsxs(we,{padding:"sm",className:"flex items-center gap-4",delay:.5,glowEffect:!0,children:[e.jsx("div",{className:"p-3 bg-emerald-100 dark:bg-emerald-900/30 rounded-lg",children:e.jsx(rr,{className:"w-5 h-5 text-emerald-600 dark:text-emerald-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Success Rate"}),e.jsxs("p",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:[n.successRate,"%"]})]})]})})]}),e.jsxs(Oe.div,{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",variants:kv,initial:"hidden",animate:"visible",children:[e.jsx(Oe.div,{variants:$l,className:"lg:col-span-2",children:e.jsxs(we,{className:"p-6",delay:.6,children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Recent Transactions"}),e.jsx("button",{className:"text-sm text-primary-600 dark:text-primary-400 hover:text-primary-700 dark:hover:text-primary-300",children:"View all"})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"text-left text-sm text-gray-500 dark:text-gray-400 border-b border-gray-200 dark:border-gray-700",children:[e.jsx("th",{className:"pb-3 font-medium",children:"Transaction ID"}),e.jsx("th",{className:"pb-3 font-medium",children:"Card"}),e.jsx("th",{className:"pb-3 font-medium",children:"Amount"}),e.jsx("th",{className:"pb-3 font-medium",children:"Status"}),e.jsx("th",{className:"pb-3 font-medium",children:"Time"})]})}),e.jsx("tbody",{children:i.map((l,o)=>e.jsxs(Oe.tr,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},transition:{delay:.7+o*.05},className:"border-b border-gray-100 dark:border-gray-700 last:border-0",children:[e.jsx("td",{className:"py-3 text-sm font-medium text-gray-900 dark:text-white",children:l.id}),e.jsxs("td",{className:"py-3 text-sm text-gray-600 dark:text-gray-400",children:["****",l.cardLast4]}),e.jsx("td",{className:"py-3 text-sm font-medium text-gray-900 dark:text-white",children:a(l.amount)}),e.jsx("td",{className:"py-3",children:e.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${l.status==="completed"?"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400":l.status==="pending"?"bg-yellow-100 dark:bg-yellow-900/30 text-yellow-700 dark:text-yellow-400":"bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-400"}`,children:l.status})}),e.jsx("td",{className:"py-3 text-sm text-gray-500 dark:text-gray-400",children:l.time})]},l.id))})]})})]})}),e.jsx(Oe.div,{variants:$l,children:e.jsxs(we,{className:"p-6",delay:.7,children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Quick Actions"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs(Oe.button,{whileHover:{scale:1.02},whileTap:{scale:.98},className:"w-full p-4 bg-gray-50 dark:bg-gray-700/50 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg text-left transition-colors flex items-center gap-3",children:[e.jsx(vt,{className:"w-5 h-5 text-gray-600 dark:text-gray-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-sm text-gray-900 dark:text-white",children:"Process Refund"}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Issue customer refunds"})]})]}),e.jsxs(Oe.button,{whileHover:{scale:1.02},whileTap:{scale:.98},className:"w-full p-4 bg-gray-50 dark:bg-gray-700/50 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg text-left transition-colors flex items-center gap-3",children:[e.jsx(ws,{className:"w-5 h-5 text-gray-600 dark:text-gray-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-sm text-gray-900 dark:text-white",children:"Download Report"}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Export transaction data"})]})]}),e.jsxs(Oe.button,{whileHover:{scale:1.02},whileTap:{scale:.98},className:"w-full p-4 bg-gray-50 dark:bg-gray-700/50 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg text-left transition-colors flex items-center gap-3",children:[e.jsx(or,{className:"w-5 h-5 text-gray-600 dark:text-gray-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-sm text-gray-900 dark:text-white",children:"Payment Settings"}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Configure payment options"})]})]})]})]})})]})]})})}function Cde(){const{isDeveloperMode:t,toggleDeveloperMode:s}=C0(),[r,a]=h.useState("general"),[n,i]=h.useState(!1),[l,o]=h.useState({businessName:"Acme Store",businessEmail:"contact@acmestore.com",businessPhone:"+1 (555) 123-4567",businessAddress:"123 Main St, Suite 100",notifyTransactions:!0,notifyPayouts:!0,notifyDisputes:!0,notifyWeeklyReport:!0,twoFactorEnabled:!1,ipWhitelist:""}),c=()=>{i(!0),setTimeout(()=>i(!1),3e3)},d=[{id:"general",label:"General",icon:L1},{id:"notifications",label:"Notifications",icon:jl},{id:"security",label:"Security",icon:Xt},{id:"developer",label:"Developer Mode",icon:Ir}];return e.jsx(gs,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Settings"}),e.jsx("p",{className:"text-gray-500",children:"Manage your merchant account settings"})]}),n&&e.jsxs("div",{className:"flex items-center gap-2 px-4 py-2 bg-green-100 text-green-700 rounded-lg",children:[e.jsx(be,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm font-medium",children:"Settings saved successfully"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[e.jsx(W,{className:"p-4 lg:col-span-1",children:e.jsx("nav",{className:"space-y-1",children:d.map(u=>{const m=u.icon;return e.jsxs("button",{onClick:()=>a(u.id),className:`w-full flex items-center gap-3 px-4 py-3 rounded-lg text-left transition-colors ${r===u.id?"bg-green-50 text-green-700":"text-gray-600 hover:bg-gray-50"}`,children:[e.jsx(m,{className:"w-5 h-5"}),e.jsx("span",{className:"font-medium",children:u.label}),u.id==="developer"&&t&&e.jsx("span",{className:"ml-auto px-2 py-0.5 bg-indigo-100 text-indigo-700 text-xs rounded-full",children:"ON"})]},u.id)})})}),e.jsxs("div",{className:"lg:col-span-3",children:[r==="general"&&e.jsxs(W,{className:"p-6",children:[e.jsx("h2",{className:"text-lg font-semibold mb-6",children:"Business Information"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Business Name"}),e.jsx("input",{type:"text",value:l.businessName,onChange:u=>o({...l,businessName:u.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Business Email"}),e.jsx("input",{type:"email",value:l.businessEmail,onChange:u=>o({...l,businessEmail:u.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Business Phone"}),e.jsx("input",{type:"tel",value:l.businessPhone,onChange:u=>o({...l,businessPhone:u.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Business Address"}),e.jsx("textarea",{value:l.businessAddress,onChange:u=>o({...l,businessAddress:u.target.value}),rows:3,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500"})]}),e.jsxs("button",{onClick:c,className:"px-6 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 flex items-center gap-2",children:[e.jsx(oa,{className:"w-4 h-4"}),"Save Changes"]})]})]}),r==="notifications"&&e.jsxs(W,{className:"p-6",children:[e.jsx("h2",{className:"text-lg font-semibold mb-6",children:"Notification Preferences"}),e.jsxs("div",{className:"space-y-4",children:[[{key:"notifyTransactions",label:"Transaction Notifications",desc:"Receive alerts for every transaction"},{key:"notifyPayouts",label:"Payout Notifications",desc:"Get notified when payouts are processed"},{key:"notifyDisputes",label:"Dispute Alerts",desc:"Immediate alerts for chargebacks and disputes"},{key:"notifyWeeklyReport",label:"Weekly Reports",desc:"Receive weekly business summary emails"}].map(u=>e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:u.label}),e.jsx("p",{className:"text-sm text-gray-500",children:u.desc})]}),e.jsx("button",{onClick:()=>o({...l,[u.key]:!l[u.key]}),className:"text-gray-600",children:l[u.key]?e.jsx(kr,{className:"w-10 h-10 text-green-600"}):e.jsx(Nr,{className:"w-10 h-10"})})]},u.key)),e.jsxs("button",{onClick:c,className:"px-6 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 flex items-center gap-2",children:[e.jsx(oa,{className:"w-4 h-4"}),"Save Changes"]})]})]}),r==="security"&&e.jsxs(W,{className:"p-6",children:[e.jsx("h2",{className:"text-lg font-semibold mb-6",children:"Security Settings"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:"Two-Factor Authentication"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Add an extra layer of security to your account"})]}),e.jsx("button",{onClick:()=>o({...l,twoFactorEnabled:!l.twoFactorEnabled}),className:"text-gray-600",children:l.twoFactorEnabled?e.jsx(kr,{className:"w-10 h-10 text-green-600"}):e.jsx(Nr,{className:"w-10 h-10"})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"IP Whitelist (Optional)"}),e.jsx("textarea",{value:l.ipWhitelist,onChange:u=>o({...l,ipWhitelist:u.target.value}),placeholder:"Enter IP addresses, one per line",rows:4,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500"}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Only allow API access from these IP addresses"})]}),e.jsxs("button",{onClick:c,className:"px-6 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 flex items-center gap-2",children:[e.jsx(oa,{className:"w-4 h-4"}),"Save Changes"]})]})]}),r==="developer"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx(W,{className:"p-6",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"p-3 bg-indigo-100 rounded-lg",children:e.jsx(Ir,{className:"w-6 h-6 text-indigo-600"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Developer Mode"}),e.jsx("p",{className:"text-gray-500 mt-1",children:"Enable developer mode to access API keys, webhooks, SDK documentation, and developer tools."})]})]}),e.jsx("button",{onClick:s,className:"text-gray-600",children:t?e.jsx(kr,{className:"w-12 h-12 text-indigo-600"}):e.jsx(Nr,{className:"w-12 h-12"})})]})}),t?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"p-4 bg-indigo-50 border border-indigo-200 rounded-lg flex items-start gap-3",children:[e.jsx(be,{className:"w-5 h-5 text-indigo-600 flex-shrink-0 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-indigo-900",children:"Developer Mode is Active"}),e.jsx("p",{className:"text-sm text-indigo-700 mt-1",children:"You now have access to the Developer section in your sidebar. Navigate there to manage API keys, webhooks, and view documentation."})]})]}),e.jsxs(W,{className:"p-6",children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-4",children:"What you can do with Developer Mode:"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"flex items-start gap-3 p-4 bg-gray-50 rounded-lg",children:[e.jsx("div",{className:"p-2 bg-indigo-100 rounded",children:e.jsx(Je,{className:"w-4 h-4 text-indigo-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-sm",children:"API Keys"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Generate and manage API credentials"})]})]}),e.jsxs("div",{className:"flex items-start gap-3 p-4 bg-gray-50 rounded-lg",children:[e.jsx("div",{className:"p-2 bg-indigo-100 rounded",children:e.jsx(jl,{className:"w-4 h-4 text-indigo-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-sm",children:"Webhooks"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Configure event notifications"})]})]}),e.jsxs("div",{className:"flex items-start gap-3 p-4 bg-gray-50 rounded-lg",children:[e.jsx("div",{className:"p-2 bg-indigo-100 rounded",children:e.jsx(or,{className:"w-4 h-4 text-indigo-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-sm",children:"Sandbox Testing"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Test your integration safely"})]})]}),e.jsxs("div",{className:"flex items-start gap-3 p-4 bg-gray-50 rounded-lg",children:[e.jsx("div",{className:"p-2 bg-indigo-100 rounded",children:e.jsx(Ir,{className:"w-4 h-4 text-indigo-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-sm",children:"SDK & Documentation"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Access code samples and guides"})]})]})]})]})]}):e.jsx(W,{className:"p-6",children:e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(Ir,{className:"w-8 h-8 text-gray-400"})}),e.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"Developer Mode is Disabled"}),e.jsx("p",{className:"text-gray-500 max-w-md mx-auto",children:"Enable developer mode to access API integration features, webhooks, and SDK documentation."})]})})]})]})]})]})})}function mk({children:t,homeRoute:s,homeLabel:r,basePath:a}){const[n,i]=h.useState(!1),{user:l,logout:o}=wt(),c=Ga(),d=At(),u=[{path:`${a}`,label:"Businesses",icon:Ft,exact:!0},{path:`${a}/webhooks`,label:"Webhooks",icon:Zc},{path:`${a}/logs`,label:"Request Logs",icon:S0},{path:`${a}/docs`,label:"SDK & Libraries",icon:OT},{path:`${a}/settings`,label:"Settings",icon:or}],m=async()=>{await o(),d("/login")};return e.jsxs("div",{className:"min-h-screen bg-gray-900",children:[n&&e.jsx("div",{className:"fixed inset-0 z-40 bg-black bg-opacity-50 lg:hidden",onClick:()=>i(!1)}),e.jsx("aside",{className:oe("fixed inset-y-0 left-0 z-50 w-64 bg-gray-900 border-r border-gray-800 transform transition-transform duration-300 ease-in-out lg:translate-x-0",n?"translate-x-0":"-translate-x-full"),children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex items-center justify-between h-16 px-6 bg-gray-800",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ir,{className:"w-8 h-8 text-indigo-400"}),e.jsx("span",{className:"text-xl font-bold text-white",children:"Developer"})]}),e.jsx("button",{className:"lg:hidden p-2 rounded-lg hover:bg-gray-700 text-gray-400",onClick:()=>i(!1),children:e.jsx(lt,{className:"w-5 h-5"})})]}),e.jsx("div",{className:"px-4 py-3 border-b border-gray-800",children:e.jsxs(Qe,{to:s,className:"flex items-center gap-2 px-4 py-3 text-gray-300 bg-gray-800 hover:bg-gray-700 rounded-lg transition-colors",children:[e.jsx(_s,{className:"w-4 h-4"}),e.jsxs("span",{className:"text-sm font-medium",children:["Back to ",r]})]})}),e.jsx("nav",{className:"flex-1 px-3 py-4 space-y-1 overflow-y-auto scrollbar-hide",children:u.map(p=>{const x=p.icon,g=p.exact?c.pathname===p.path:c.pathname.startsWith(p.path)&&p.path!==a;return e.jsxs(Qe,{to:p.path,className:oe("flex items-center px-4 py-2.5 rounded-lg transition-colors text-sm",g?"bg-indigo-600 text-white":"text-gray-300 hover:bg-gray-800 hover:text-white"),children:[e.jsx(x,{className:"w-5 h-5 mr-3"}),p.label]},p.path)})}),e.jsx("div",{className:"px-4 py-3 border-t border-gray-800",children:e.jsxs("button",{className:"w-full flex items-center justify-center gap-2 px-4 py-2.5 bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg text-sm transition-colors",children:[e.jsx(KT,{className:"w-4 h-4"}),"Open API Console"]})}),e.jsxs("div",{className:"p-4 border-t border-gray-800",children:[e.jsxs("div",{className:"flex items-center mb-3",children:[e.jsx("div",{className:"w-10 h-10 bg-indigo-600 rounded-full flex items-center justify-center",children:e.jsx(Ir,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{className:"ml-3",children:[e.jsxs("p",{className:"text-sm font-medium text-white",children:[l==null?void 0:l.firstName," ",l==null?void 0:l.lastName]}),e.jsx("p",{className:"text-xs text-gray-400",children:"Developer Mode"})]})]}),e.jsxs("button",{onClick:m,className:"flex items-center w-full px-4 py-2 text-gray-300 rounded-lg hover:bg-gray-800 hover:text-white transition-colors text-sm",children:[e.jsx(_0,{className:"w-5 h-5 mr-3"}),"Sign out"]})]})]})}),e.jsxs("div",{className:"lg:pl-64",children:[e.jsx("header",{className:"sticky top-0 z-30 h-16 bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 shadow-sm",children:e.jsxs("div",{className:"flex items-center justify-between h-full px-4 lg:px-8",children:[e.jsx("div",{className:"flex items-center gap-4",children:e.jsx("button",{className:"lg:hidden p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700",onClick:()=>i(!0),children:e.jsx(E0,{className:"w-6 h-6 dark:text-gray-400"})})}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs(Qe,{to:s,className:"hidden sm:flex items-center gap-2 px-4 py-2 text-sm text-gray-600 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:[e.jsx(kV,{className:"w-4 h-4"}),r]}),e.jsx("span",{className:"px-3 py-1 bg-indigo-100 text-indigo-700 rounded-full text-xs font-medium",children:"Developer Portal"}),e.jsx(Wf,{}),e.jsx(zf,{})]})]})}),e.jsx("main",{className:"p-4 lg:p-8 bg-gray-50 dark:bg-gray-900 min-h-[calc(100vh-4rem)]",children:t})]})]})}function Sde(){const[t,s]=h.useState([]),[r,a]=h.useState(!0),n=At();h.useEffect(()=>{i()},[]);const i=async()=>{try{const o=await Ai.getMyBusinesses();s(o)}catch(o){console.error("Error fetching businesses:",o)}finally{a(!1)}},l=o=>{const c={PENDING:{color:"bg-yellow-100 text-yellow-700",icon:e.jsx(it,{className:"w-3 h-3"}),label:"Pending Approval"},APPROVED:{color:"bg-green-100 text-green-700",icon:e.jsx(be,{className:"w-3 h-3"}),label:"Approved"},REJECTED:{color:"bg-red-100 text-red-700",icon:e.jsx(lt,{className:"w-3 h-3"}),label:"Rejected"},SUSPENDED:{color:"bg-gray-100 text-gray-700",icon:e.jsx(Lt,{className:"w-3 h-3"}),label:"Suspended"}},d=c[o]||c.PENDING;return e.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium ${d.color}`,children:[d.icon,d.label]})};return r?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx(Ie,{className:"w-8 h-8 animate-spin text-primary-600"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"My Businesses"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Create and manage your business shops with their own API keys"})]}),e.jsxs("button",{onClick:()=>n("/merchant/developer/create-business"),className:"px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 flex items-center gap-2",children:[e.jsx(It,{className:"w-4 h-4"}),"Create Business"]})]}),t.length===0?e.jsxs(W,{className:"p-8 text-center",children:[e.jsx(Ft,{className:"w-12 h-12 text-gray-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No businesses yet"}),e.jsx("p",{className:"text-gray-500 mb-4",children:"Create your first business to get API keys and start accepting payments."}),e.jsxs("button",{onClick:()=>n("/merchant/developer/create-business"),className:"px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 inline-flex items-center gap-2",children:[e.jsx(It,{className:"w-4 h-4"}),"Create Your First Business"]})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:t.map(o=>e.jsxs(W,{className:"p-4 hover:shadow-md transition-shadow cursor-pointer",onClick:()=>n(`/merchant/developer/business/${o.id}`),children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[o.logo_url?e.jsx("img",{src:o.logo_url,alt:o.name,className:"w-10 h-10 rounded-lg object-cover"}):e.jsx("div",{className:"w-10 h-10 bg-primary-100 rounded-lg flex items-center justify-center",children:e.jsx(Ft,{className:"w-5 h-5 text-primary-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-gray-900",children:o.name}),e.jsx("p",{className:"text-xs text-gray-500",children:o.slug})]})]}),e.jsx(Vs,{className:"w-5 h-5 text-gray-400"})]}),e.jsxs("div",{className:"space-y-2 mb-3",children:[o.business_category&&e.jsx("p",{className:"text-sm text-gray-600",children:o.business_category.name}),o.description&&e.jsx("p",{className:"text-sm text-gray-500 line-clamp-2",children:o.description})]}),e.jsxs("div",{className:"flex items-center justify-between pt-3 border-t",children:[e.jsx("div",{className:"flex items-center gap-2",children:l(o.approval_status)}),e.jsx("div",{className:"flex items-center gap-1",children:o.is_live_mode?e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-700",children:[e.jsx(kr,{className:"w-3 h-3"}),"Live"]}):e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium bg-orange-100 text-orange-700",children:[e.jsx(Nr,{className:"w-3 h-3"}),"Test"]})})]}),o.approval_status==="PENDING"&&e.jsx("div",{className:"mt-3 p-2 bg-yellow-50 rounded-lg",children:e.jsx("p",{className:"text-xs text-yellow-700",children:(o.trial_live_transactions_used||0)<(o.trial_live_transaction_limit||2)?`${(o.trial_live_transaction_limit||2)-(o.trial_live_transactions_used||0)} trial live transactions remaining`:"Awaiting admin approval for unlimited live access"})})]},o.id))})]})}function _de(){const[t,s]=h.useState(null),[r,a]=h.useState(!0),[n,i]=h.useState(!1),[l,o]=h.useState(null),[c,d]=h.useState(!1),[u,m]=h.useState(""),p=At(),x=window.location.pathname.split("/").pop();h.useEffect(()=>{x&&g()},[x]);const g=async()=>{try{const C=await Ai.getBusiness(x);s(C)}catch(C){console.error("Error fetching business:",C)}finally{a(!1)}},f=async(C,S)=>{await navigator.clipboard.writeText(C),o(S),setTimeout(()=>o(null),2e3)},b=async()=>{if(t){m(""),d(!0);try{await Ai.toggleLiveMode(t.id,!t.is_live_mode),g()}catch(C){m(C.message)}finally{d(!1)}}};if(r)return e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx(Ie,{className:"w-8 h-8 animate-spin text-primary-600"})});if(!t)return e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Lt,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Business not found"}),e.jsx("button",{onClick:()=>p("/merchant/developer"),className:"mt-4 text-primary-600 hover:text-primary-700",children:"Back to businesses"})]});const j=t.is_live_mode?{public:t.live_public_key,secret:t.live_secret_key}:{public:t.test_public_key,secret:t.test_secret_key},v=()=>{if(t.approval_status==="APPROVED")return!0;if(t.approval_status==="REJECTED"||t.approval_status==="SUSPENDED")return!1;const C=t.trial_live_transaction_limit||2;return(t.trial_live_transactions_used||0)<C},w=()=>{const C=t.trial_live_transaction_limit||2,S=t.trial_live_transactions_used||0;return Math.max(0,C-S)},y=()=>{const C="https://my.peeap.com",S=j.public;return`/**
 * ============================================================================
 * PEEAP PAYMENT SDK INTEGRATION
 * ============================================================================
 * Business: ${t.name}
 * Public Key: ${S}
 * Mode: ${t.is_live_mode?"LIVE":"TEST"}
 * API Endpoint: ${C}/api/checkout/create
 *
 * SECURITY:
 * - Use PUBLIC KEY (pk_...) for frontend code - safe to expose
 * - SECRET KEY (sk_...) is for server-side only - NEVER expose in frontend
 * - Each payment request generates a unique idempotency key to prevent duplicates
 *
 * AMOUNT FORMAT:
 * - Pass amount in WHOLE units (e.g., 100 = Le 100.00)
 * - SDK automatically converts to minor units for API
 *
 * SUPPORTED LANGUAGES:
 * - JavaScript/React/Vue/Next.js: npm install peeap-sdk
 * - Python: pip install requests (use API directly)
 * - PHP: Use curl (use API directly)
 * - Any language: POST to ${C}/api/checkout/create
 * ============================================================================
 */

// ============================================================================
// JAVASCRIPT / REACT / VUE / NEXT.JS
// Run: npm install peeap-sdk
// ============================================================================
import Peeap from 'peeap-sdk';

const peeap = new Peeap({
  publicKey: '${S}',
  mode: '${t.is_live_mode?"live":"test"}',
  currency: 'SLE'
});

// amount = whole units (100 = Le 100.00, 5000 = Le 5,000.00)
async function handlePayment(amount, description) {
  await peeap.checkout({
    amount: amount,
    currency: 'SLE',
    description: description
  });
}

// Example: handlePayment(100, 'Order #123');  // Le 100.00

// ============================================================================
// PYTHON
// Run: pip install requests
// ============================================================================
/*
import requests
import uuid

def create_payment(amount, description):
    # amount in whole units (100 = Le 100.00)
    # API expects minor units, so multiply by 100
    # idempotency_key prevents duplicate charges if request is retried
    response = requests.post('${C}/api/checkout/create',
        json={
            'publicKey': '${S}',
            'amount': amount * 100,
            'currency': 'SLE',
            'description': description,
            'paymentMethod': 'mobile_money',
            'idempotencyKey': str(uuid.uuid4())  # Unique per payment attempt
        },
        headers={
            'Content-Type': 'application/json'
        }
    )
    data = response.json()
    if data.get('paymentUrl'):
        return data['paymentUrl']  # Redirect user to this URL
    raise Exception(data.get('error', 'Payment failed'))

# Example: redirect_url = create_payment(100, 'Order #123')  # Le 100.00
*/

// ============================================================================
// PHP
// ============================================================================
/*
<?php
function createPayment($amount, $description) {
    // amount in whole units (100 = Le 100.00)
    // idempotency_key prevents duplicate charges if request is retried
    $data = [
        'publicKey' => '${S}',
        'amount' => $amount * 100,  // Convert to minor units
        'currency' => 'SLE',
        'description' => $description,
        'paymentMethod' => 'mobile_money',
        'idempotencyKey' => uniqid('peeap_', true)  // Unique per payment attempt
    ];

    $ch = curl_init('${C}/api/checkout/create');
    curl_setopt($ch, CURLOPT_POST, true);
    curl_setopt($ch, CURLOPT_POSTFIELDS, json_encode($data));
    curl_setopt($ch, CURLOPT_HTTPHEADER, ['Content-Type: application/json']);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);

    $response = json_decode(curl_exec($ch), true);
    curl_close($ch);

    if (isset($response['paymentUrl'])) {
        header('Location: ' . $response['paymentUrl']);
        exit;
    }
    throw new Exception($response['error'] ?? 'Payment failed');
}

// Example: createPayment(100, 'Order #123');  // Le 100.00
?>
*/

// ============================================================================
// HTML / CDN (Browser Script)
// ============================================================================
/*
<script src="${C}/embed/peeap-sdk.js"><\/script>
<script>
  PeeapSDK.init({
    publicKey: '${S}',
    mode: '${t.is_live_mode?"live":"test"}',
    currency: 'SLE',
    onSuccess: function(payment) {
      alert('Payment successful! Ref: ' + payment.reference);
    },
    onError: function(error) {
      alert('Payment failed: ' + error.message);
    }
  });

  // amount in whole units (100 = Le 100.00)
  // SDK auto-generates idempotency key for each payment
  function checkout(amount, description) {
    PeeapSDK.createPayment({ amount: amount, currency: 'SLE', description: description });
  }
<\/script>
<button onclick="checkout(100, 'Order #123')">Pay Le 100.00</button>
*/

// ============================================================================
// WEBHOOK HANDLER (to receive payment notifications)
// Verify signature using your SECRET KEY (server-side only)
// ============================================================================
/*
// Node.js/Express
app.post('/webhook/peeap', (req, res) => {
  const { event, data } = req.body;
  // TODO: Verify webhook signature using your secret key

  if (event === 'payment.completed') {
    console.log('Payment completed:', data.reference, data.amount);
    // Update your order status here
  }

  res.status(200).json({ received: true });
});

// Python/Flask
@app.route('/webhook/peeap', methods=['POST'])
def peeap_webhook():
    data = request.json
    # TODO: Verify webhook signature using your secret key
    if data.get('event') == 'payment.completed':
        print('Payment completed:', data['data']['reference'])
        # Update your order status here
    return {'received': True}

// PHP
<?php
$payload = json_decode(file_get_contents('php://input'), true);
// TODO: Verify webhook signature using your secret key
if ($payload['event'] === 'payment.completed') {
    // Update your order status here
    error_log('Payment completed: ' . $payload['data']['reference']);
}
http_response_code(200);
echo json_encode(['received' => true]);
?>
*/`};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("button",{onClick:()=>p("/merchant/developer"),className:"p-2 hover:bg-gray-100 rounded-lg",children:e.jsx(Vs,{className:"w-5 h-5 text-gray-400 rotate-180"})}),t.logo_url?e.jsx("img",{src:t.logo_url,alt:t.name,className:"w-12 h-12 rounded-lg object-cover"}):e.jsx("div",{className:"w-12 h-12 bg-primary-100 rounded-lg flex items-center justify-center",children:e.jsx(Ft,{className:"w-6 h-6 text-primary-600"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:t.name}),e.jsx("p",{className:"text-sm text-gray-500",children:t.slug})]})]}),e.jsx("div",{className:"flex items-center gap-4",children:e.jsxs("div",{className:"flex items-center gap-2 p-1 bg-gray-100 rounded-lg",children:[e.jsx("button",{onClick:()=>t.is_live_mode?b():null,disabled:c,className:`px-4 py-2 rounded-md text-sm font-medium transition-colors ${t.is_live_mode?"text-gray-600 hover:text-gray-900":"bg-white shadow text-orange-700"}`,children:"Test Mode"}),e.jsxs("button",{onClick:()=>t.is_live_mode?null:b(),disabled:c||v()===!1,className:`px-4 py-2 rounded-md text-sm font-medium transition-colors ${t.is_live_mode?"bg-white shadow text-green-700":"text-gray-600 hover:text-gray-900 disabled:opacity-50 disabled:cursor-not-allowed"}`,children:["Live Mode",t.approval_status==="PENDING"&&!t.is_live_mode&&v()&&e.jsx("span",{className:"ml-1 text-xs text-orange-500",children:"(Trial)"})]})]})})]}),u&&e.jsx("div",{className:"p-4 bg-red-50 border border-red-200 rounded-lg text-red-700",children:u}),t.approval_status==="PENDING"&&e.jsx(W,{className:"p-4 bg-yellow-50 border-yellow-200",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(it,{className:"w-5 h-5 text-yellow-600 mt-0.5"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-yellow-900",children:"Pending Approval"}),e.jsxs("p",{className:"text-sm text-yellow-700 mt-1",children:["You can process unlimited test transactions and ",w()," trial live transactions. After using your trial live transactions, an admin will review your business for full live access."]}),e.jsxs("div",{className:"mt-3 grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{className:"p-2 bg-white rounded-lg",children:[e.jsx("p",{className:"text-gray-500",children:"Test Transactions"}),e.jsx("p",{className:"font-semibold text-green-600",children:"Unlimited"})]}),e.jsxs("div",{className:"p-2 bg-white rounded-lg",children:[e.jsx("p",{className:"text-gray-500",children:"Trial Live Transactions"}),e.jsxs("p",{className:"font-semibold text-orange-600",children:[t.trial_live_transactions_used||0,"/",t.trial_live_transaction_limit||2," used"]})]})]})]})]})}),t.approval_status==="REJECTED"&&e.jsx(W,{className:"p-4 bg-red-50 border-red-200",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(lt,{className:"w-5 h-5 text-red-600 mt-0.5"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-red-900",children:"Application Rejected"}),e.jsx("p",{className:"text-sm text-red-700 mt-1",children:t.approval_notes||"Your business application was not approved. Please contact support."})]})]})}),e.jsxs(W,{className:"p-6",children:[e.jsx("h3",{className:"font-medium text-gray-900 mb-4",children:"Business Details"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[t.email&&e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(Va,{className:"w-4 h-4 text-gray-400"}),e.jsx("span",{children:t.email})]}),t.phone&&e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(lr,{className:"w-4 h-4 text-gray-400"}),e.jsx("span",{children:t.phone})]}),t.website_url&&e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(li,{className:"w-4 h-4 text-gray-400"}),e.jsx("a",{href:t.website_url,target:"_blank",rel:"noopener noreferrer",className:"text-primary-600 hover:underline",children:t.website_url})]}),(t.address||t.city)&&e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(Vi,{className:"w-4 h-4 text-gray-400"}),e.jsx("span",{children:[t.address,t.city,t.country].filter(Boolean).join(", ")})]}),t.business_category&&e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(ua,{className:"w-4 h-4 text-gray-400"}),e.jsx("span",{children:t.business_category.name})]})]}),t.description&&e.jsx("div",{className:"mt-4 pt-4 border-t",children:e.jsx("p",{className:"text-sm text-gray-600",children:t.description})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx(W,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:e.jsx(S0,{className:"w-5 h-5 text-green-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Status"}),e.jsx("p",{className:"font-medium text-gray-900",children:t.status})]})]})}),e.jsx(W,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:e.jsx(be,{className:"w-5 h-5 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Approval"}),e.jsx("p",{className:"font-medium text-gray-900",children:t.approval_status})]})]})}),e.jsx(W,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-purple-100 rounded-lg",children:e.jsx(Zc,{className:"w-5 h-5 text-purple-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Webhook"}),e.jsx("p",{className:"font-medium text-gray-900",children:t.webhook_url?"Configured":"Not Set"})]})]})})]}),e.jsxs("div",{className:"border-t pt-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-1",children:"Integration"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Add payment capabilities to your website or application"})]}),e.jsxs(W,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Fr,{className:"w-5 h-5 text-gray-600"}),e.jsx("h3",{className:"font-medium text-gray-900",children:"Peeap Payment SDK"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"px-2 py-1 bg-green-100 text-green-700 text-xs font-medium rounded",children:"AI-Ready"}),e.jsx("span",{className:"px-2 py-1 bg-blue-100 text-blue-700 text-xs font-medium rounded",children:"v1.0.0"})]})]}),e.jsxs("p",{className:"text-sm text-gray-600 mb-4",children:["Copy and share this complete integration guide. Works with any website, React, Vue, Next.js, or AI platforms like ",e.jsx("strong",{children:"Lovable"}),", ",e.jsx("strong",{children:"v0"}),", ",e.jsx("strong",{children:"Bolt"}),", and others. The documentation includes all supported currencies, payment methods, API endpoints, and examples."]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 mb-4",children:[e.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg text-center",children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Currencies"}),e.jsx("p",{className:"font-semibold text-gray-900",children:"6+"})]}),e.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg text-center",children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Payment Methods"}),e.jsx("p",{className:"font-semibold text-gray-900",children:"5"})]}),e.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg text-center",children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Frameworks"}),e.jsx("p",{className:"font-semibold text-gray-900",children:"All"})]}),e.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg text-center",children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Setup Time"}),e.jsx("p",{className:"font-semibold text-gray-900",children:"2 min"})]})]}),e.jsxs("div",{className:"relative",children:[e.jsx("pre",{className:"bg-gray-900 text-gray-100 p-4 rounded-lg text-sm overflow-x-auto max-h-[500px] overflow-y-auto",children:e.jsx("code",{children:y()})}),e.jsx("button",{onClick:()=>f(y(),"sdk"),className:"absolute top-2 right-2 px-3 py-2 bg-primary-600 hover:bg-primary-700 text-white rounded-lg transition-colors flex items-center gap-2",children:l==="sdk"?e.jsxs(e.Fragment,{children:[e.jsx(Rs,{className:"w-4 h-4"}),"Copied!"]}):e.jsxs(e.Fragment,{children:[e.jsx(vs,{className:"w-4 h-4"}),"Copy SDK"]})})]}),e.jsx("div",{className:"mt-4 p-3 bg-yellow-50 border border-yellow-200 rounded-lg",children:e.jsxs("p",{className:"text-sm text-yellow-800",children:[e.jsx("strong",{children:"Tip:"})," Paste this entire code into ChatGPT, Claude, Lovable, v0, or any AI platform - they will understand the full API and help integrate it into your project."]})})]}),e.jsxs(W,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(wl,{className:"w-5 h-5 text-gray-600"}),e.jsxs("h3",{className:"font-medium text-gray-900",children:[t.is_live_mode?"Live":"Test"," API Keys"]})]}),e.jsxs("button",{onClick:()=>i(!n),className:"text-sm text-primary-600 hover:text-primary-700 flex items-center gap-1",children:[n?e.jsx(Ln,{className:"w-4 h-4"}):e.jsx(es,{className:"w-4 h-4"}),n?"Hide":"Show"," Secret Keys"]})]}),e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Use these keys for custom API integrations. For most use cases, we recommend using the embeddable scripts above."}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Publishable Key"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("code",{className:"flex-1 px-3 py-2 bg-gray-100 rounded-lg text-sm font-mono overflow-x-auto",children:j.public}),e.jsx("button",{onClick:()=>f(j.public,"public"),className:"p-2 hover:bg-gray-100 rounded-lg",children:l==="public"?e.jsx(Rs,{className:"w-4 h-4 text-green-600"}):e.jsx(vs,{className:"w-4 h-4 text-gray-500"})})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Safe to use in frontend code"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Secret Key"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("code",{className:"flex-1 px-3 py-2 bg-gray-100 rounded-lg text-sm font-mono",children:n?j.secret:""}),e.jsx("button",{onClick:()=>f(j.secret,"secret"),className:"p-2 hover:bg-gray-100 rounded-lg",disabled:!n,children:l==="secret"?e.jsx(Rs,{className:"w-4 h-4 text-green-600"}):e.jsx(vs,{className:"w-4 h-4 text-gray-500"})})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Keep this secret! Only use in server-side code"})]})]})]}),e.jsxs(W,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Zc,{className:"w-5 h-5 text-gray-600"}),e.jsx("h3",{className:"font-medium text-gray-900",children:"Webhook Configuration"})]}),e.jsx("button",{className:"text-sm text-primary-600 hover:text-primary-700",children:"Configure"})]}),t.webhook_url?e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Endpoint URL"}),e.jsx("code",{className:"block px-3 py-2 bg-gray-100 rounded-lg text-sm font-mono",children:t.webhook_url})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Signing Secret"}),e.jsx("code",{className:"block px-3 py-2 bg-gray-100 rounded-lg text-sm font-mono",children:n?t.webhook_secret:""})]})]}):e.jsx("p",{className:"text-sm text-gray-500",children:"No webhook configured. Set up a webhook to receive real-time payment notifications."})]})]})}function Ede(){return e.jsx(mk,{homeRoute:"/merchant",homeLabel:"Merchant Portal",basePath:"/merchant/developer",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Developer Dashboard"}),e.jsx("p",{className:"text-gray-500",children:"Create businesses and manage your API integration"})]}),e.jsxs(v1,{children:[e.jsx(Te,{index:!0,element:e.jsx(Sde,{})}),e.jsx(Te,{path:"business/:businessId",element:e.jsx(_de,{})})]})]})})}function Ade({merchantId:t,merchantName:s,merchantLogo:r,brandColor:a="#4F46E5"}){const[n,i]=h.useState(null),[l,o]=h.useState("50000"),[c,d]=h.useState("SLE"),[u,m]=h.useState("Payment"),p="https://api.peeap.com",x=(v,w)=>{navigator.clipboard.writeText(v).then(()=>{i(w),setTimeout(()=>i(null),2e3)})},g=`<!-- Peeap Payment Button -->
<button id="peeap-pay-btn"
        style="display:inline-block;background:${a};color:white;padding:15px 30px;border:none;border-radius:8px;font-weight:600;font-family:system-ui,-apple-system,sans-serif;cursor:pointer;transition:all 0.2s;"
        onmouseover="this.style.background='${Tde(a,-20)}';this.style.transform='translateY(-2px)';this.style.boxShadow='0 10px 20px rgba(79,70,229,0.3)'"
        onmouseout="this.style.background='${a}';this.style.transform='translateY(0)';this.style.boxShadow='none'">
   Pay ${Cv(l,c)}
</button>

<script>
document.getElementById('peeap-pay-btn').addEventListener('click', async function() {
  try {
    const response = await fetch('${p}/checkout/sessions', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({
        merchantId: '${t}',
        amount: ${l},
        currency: '${c}',
        description: '${u}',
        merchantName: '${s}',${r?`
        merchantLogoUrl: '${r}',`:""}
        brandColor: '${a}',
        successUrl: window.location.origin + '/success.html',
        cancelUrl: window.location.origin + '/cancel.html'
      })
    });
    const data = await response.json();
    window.location.href = data.url;
  } catch (error) {
    alert('Payment error. Please try again.');
  }
});
<\/script>`,f=`<!-- Add this button to your page -->
<button id="pay-button"
        style="background:${a};color:white;padding:15px 30px;border:none;border-radius:8px;font-weight:600;cursor:pointer;font-size:16px;">
  Pay Now
</button>

<script>
document.getElementById('pay-button').addEventListener('click', async function() {
  // Get your dynamic amount (e.g., from cart total)
  var amount = ${l}; // ${Cv(l,c)}
  var description = '${u}';

  try {
    // Create checkout session
    const response = await fetch('${p}/checkout/sessions', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({
        merchantId: '${t}',
        amount: amount,
        currency: '${c}',
        description: description,
        merchantName: '${s}',${r?`
        merchantLogoUrl: '${r}',`:""}
        brandColor: '${a}',
        successUrl: window.location.origin + '/success.html',
        cancelUrl: window.location.origin + '/cancel.html'
      })
    });

    const data = await response.json();

    // Redirect to hosted checkout page
    window.location.href = data.url;
  } catch (error) {
    alert('Payment error: ' + error.message);
  }
});
<\/script>`,b=`<!-- Payment Form with Session API -->
<form id="payment-form">
  <label>Amount (${c}):</label>
  <input type="number" id="amount-input" value="${l}" required>

  <label>Description:</label>
  <input type="text" id="description-input" value="${u}" required>

  <button type="submit"
          style="background:${a};color:white;padding:15px 30px;border:none;border-radius:8px;font-weight:600;cursor:pointer;margin-top:10px;">
    Proceed to Payment
  </button>
</form>

<script>
document.getElementById('payment-form').addEventListener('submit', async function(e) {
  e.preventDefault();
  const amount = parseInt(document.getElementById('amount-input').value);
  const description = document.getElementById('description-input').value;

  try {
    const response = await fetch('${p}/checkout/sessions', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({
        merchantId: '${t}',
        amount: amount,
        currency: '${c}',
        description: description,
        merchantName: '${s}',${r?`
        merchantLogoUrl: '${r}',`:""}
        brandColor: '${a}',
        successUrl: window.location.origin + '/success.html',
        cancelUrl: window.location.origin + '/cancel.html'
      })
    });
    const data = await response.json();
    window.location.href = data.url;
  } catch (error) {
    alert('Payment error. Please try again.');
  }
});
<\/script>`,j=`curl -X POST ${p}/checkout/sessions \\
  -H "Content-Type: application/json" \\
  -d '{
    "merchantId": "${t}",
    "amount": ${l},
    "currency": "${c}",
    "description": "${u}",
    "merchantName": "${s}",${r?`
    "merchantLogoUrl": "${r}",`:""}
    "brandColor": "${a}",
    "successUrl": "https://yoursite.com/success",
    "cancelUrl": "https://yoursite.com/cancel"
  }'`;return e.jsxs("div",{className:"space-y-6",children:[e.jsxs(W,{className:"p-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Payment Configuration"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Amount (minor units)"}),e.jsx("input",{type:"number",value:l,onChange:v=>o(v.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",placeholder:"50000"}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Current: ",Cv(l,c)]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Currency"}),e.jsxs("select",{value:c,onChange:v=>d(v.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",children:[e.jsx("option",{value:"SLE",children:"SLE - Sierra Leone Leone"}),e.jsx("option",{value:"USD",children:"USD - US Dollar"}),e.jsx("option",{value:"EUR",children:"EUR - Euro"}),e.jsx("option",{value:"GBP",children:"GBP - British Pound"}),e.jsx("option",{value:"NGN",children:"NGN - Nigerian Naira"}),e.jsx("option",{value:"GHS",children:"GHS - Ghanaian Cedi"})]})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),e.jsx("input",{type:"text",value:u,onChange:v=>m(v.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",placeholder:"Payment for..."})]})]})]}),e.jsxs(W,{className:"p-6",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsx("h3",{className:"text-lg font-semibold",children:" Method 1: HTML Button (Copy & Paste)"})}),e.jsx("p",{className:"text-gray-600 text-sm mb-4",children:"Add a beautiful styled button to any HTML page. Works on WordPress, Wix, Squarespace, etc. Just copy and paste!"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"bg-gray-900 text-gray-100 p-4 rounded-lg overflow-x-auto",children:e.jsx("pre",{className:"text-sm",children:g})}),e.jsx("button",{onClick:()=>x(g,"button"),className:"absolute top-2 right-2 p-2 bg-indigo-600 text-white rounded hover:bg-indigo-700",children:n==="button"?e.jsx(Rs,{className:"w-4 h-4"}):e.jsx(vs,{className:"w-4 h-4"})})]})]}),e.jsxs(W,{className:"p-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:" Method 2: JavaScript (Dynamic Amounts)"}),e.jsx("p",{className:"text-gray-600 text-sm mb-4",children:"Perfect for shopping carts where the amount changes dynamically."}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"bg-gray-900 text-gray-100 p-4 rounded-lg overflow-x-auto",children:e.jsx("pre",{className:"text-sm",children:f})}),e.jsx("button",{onClick:()=>x(f,"js"),className:"absolute top-2 right-2 p-2 bg-indigo-600 text-white rounded hover:bg-indigo-700",children:n==="js"?e.jsx(Rs,{className:"w-4 h-4"}):e.jsx(vs,{className:"w-4 h-4"})})]})]}),e.jsxs(W,{className:"p-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:" Method 3: HTML Form (User Inputs)"}),e.jsx("p",{className:"text-gray-600 text-sm mb-4",children:"Let customers enter the amount and description before checkout."}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"bg-gray-900 text-gray-100 p-4 rounded-lg overflow-x-auto",children:e.jsx("pre",{className:"text-sm",children:b})}),e.jsx("button",{onClick:()=>x(b,"form"),className:"absolute top-2 right-2 p-2 bg-indigo-600 text-white rounded hover:bg-indigo-700",children:n==="form"?e.jsx(Rs,{className:"w-4 h-4"}):e.jsx(vs,{className:"w-4 h-4"})})]})]}),e.jsxs(W,{className:"p-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:" Method 4: Direct API Call"}),e.jsx("p",{className:"text-gray-600 text-sm mb-4",children:"For backend integrations. Create sessions from your server and redirect users."}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"bg-gray-900 text-gray-100 p-4 rounded-lg overflow-x-auto",children:e.jsx("pre",{className:"text-sm",children:j})}),e.jsx("button",{onClick:()=>x(j,"curl"),className:"absolute top-2 right-2 p-2 bg-indigo-600 text-white rounded hover:bg-indigo-700",children:n==="curl"?e.jsx(Rs,{className:"w-4 h-4"}):e.jsx(vs,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"mt-4 p-3 bg-blue-50 rounded-lg text-sm text-blue-800",children:[e.jsx("strong",{children:"Response:"})," You'll receive a JSON with ",e.jsx("code",{className:"bg-blue-100 px-1 rounded",children:"sessionId"})," and ",e.jsx("code",{className:"bg-blue-100 px-1 rounded",children:"url"}),". Redirect users to the ",e.jsx("code",{className:"bg-blue-100 px-1 rounded",children:"url"})," to complete payment."]})]}),e.jsxs(W,{className:"p-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:" Platform-Specific Guides"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("details",{className:"border border-gray-200 rounded-lg p-4",children:[e.jsx("summary",{className:"font-semibold cursor-pointer",children:"WordPress"}),e.jsx("div",{className:"mt-3 text-sm text-gray-600",children:e.jsxs("ol",{className:"list-decimal ml-5 space-y-2",children:[e.jsx("li",{children:"Go to your page/post editor"}),e.jsx("li",{children:'Add a "Custom HTML" block'}),e.jsx("li",{children:"Paste Method 1 (HTML Button) code"}),e.jsx("li",{children:"Publish your page"})]})})]}),e.jsxs("details",{className:"border border-gray-200 rounded-lg p-4",children:[e.jsx("summary",{className:"font-semibold cursor-pointer",children:"Wix / Squarespace / Webflow"}),e.jsx("div",{className:"mt-3 text-sm text-gray-600",children:e.jsxs("ol",{className:"list-decimal ml-5 space-y-2",children:[e.jsx("li",{children:'Add an "Embed" or "Custom Code" element'}),e.jsx("li",{children:"Paste Method 1 (HTML Button) code"}),e.jsx("li",{children:"Save and publish"})]})})]}),e.jsxs("details",{className:"border border-gray-200 rounded-lg p-4",children:[e.jsx("summary",{className:"font-semibold cursor-pointer",children:"Shopify"}),e.jsx("div",{className:"mt-3 text-sm text-gray-600",children:e.jsxs("ol",{className:"list-decimal ml-5 space-y-2",children:[e.jsx("li",{children:"Go to your product page template"}),e.jsx("li",{children:"Add Method 2 (JavaScript) code"}),e.jsx("li",{children:"Use Shopify's cart object to get dynamic total"})]})})]}),e.jsxs("details",{className:"border border-gray-200 rounded-lg p-4",children:[e.jsx("summary",{className:"font-semibold cursor-pointer",children:"React / Vue / Angular"}),e.jsxs("div",{className:"mt-3 text-sm text-gray-600",children:[e.jsx("p",{children:"Use Method 4 (Direct API) to create sessions from your frontend:"}),e.jsxs("div",{className:"bg-gray-50 p-3 rounded mt-2 font-mono text-xs",children:["const response = await fetch('",p,"/checkout/sessions', ","{",e.jsx("br",{}),"method: 'POST',",e.jsx("br",{}),"headers: ","{"," 'Content-Type': 'application/json' ","}",",",e.jsx("br",{}),"body: JSON.stringify(","{"," merchantId, amount, ... ","}",")",e.jsx("br",{}),"}",");",e.jsx("br",{}),"const ","{"," url ","}"," = await response.json();",e.jsx("br",{}),"window.location.href = url;"]})]})]})]})]}),e.jsxs(W,{className:"p-6 bg-indigo-50 border-indigo-200",children:[e.jsx("h3",{className:"text-lg font-semibold mb-2 text-indigo-900",children:"Need Help?"}),e.jsx("p",{className:"text-indigo-700 text-sm mb-3",children:"These code snippets work on ANY website or platform. Just copy and paste!"}),e.jsx("div",{className:"flex gap-3",children:e.jsxs("a",{href:"/docs",target:"_blank",className:"text-indigo-600 hover:text-indigo-700 text-sm flex items-center gap-1",children:[e.jsx(Fr,{className:"w-4 h-4"}),"View Full Documentation"]})})]})]})}function Cv(t,s){const r=typeof t=="string"?parseFloat(t):t,a=s==="SLE"||s==="SLL",n=a?r:r/100,i=a?0:2,l=n.toLocaleString("en-US",{minimumFractionDigits:i,maximumFractionDigits:i});return`${{SLE:"Le",USD:"$",EUR:"",GBP:"",NGN:"",GHS:""}[s]||s} ${l}`}function Tde(t,s){const r=o=>Math.min(Math.max(o,0),255),a=parseInt(t.replace("#",""),16),n=r((a>>16)+s),i=r((a>>8&255)+s),l=r((a&255)+s);return`#${(n<<16|i<<8|l).toString(16).padStart(6,"0")}`}function Pde(){const{businessId:t}=hi(),s=At(),[r,a]=h.useState(null),[n,i]=h.useState(!0);h.useEffect(()=>{t&&l()},[t]);const l=async()=>{if(t)try{const{data:o,error:c}=await U.from("merchant_businesses").select("id, name, logo_url, brand_color, approval_status").eq("id",t).single();if(c)throw c;a(o)}catch(o){console.error("Error fetching business:",o)}finally{i(!1)}};return n?e.jsx(gs,{children:e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx(Ie,{className:"w-8 h-8 animate-spin text-indigo-600"})})}):r?e.jsx(gs,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex items-start justify-between",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("button",{onClick:()=>s(`/merchant/shops/${r.id}`),className:"p-2 hover:bg-gray-100 rounded-lg mt-1",children:e.jsx(_s,{className:"w-5 h-5 text-gray-600"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-1",children:"Integration Guide"}),e.jsxs("p",{className:"text-gray-600",children:["Copy & paste these code snippets to start accepting payments for"," ",e.jsx("span",{className:"font-semibold",children:r.name})]})]})]})}),r.approval_status!=="APPROVED"&&e.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 flex items-start gap-3",children:[e.jsx(Lt,{className:"w-5 h-5 text-yellow-600 flex-shrink-0 mt-0.5"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-yellow-900",children:"Business Pending Approval"}),e.jsx("p",{className:"text-sm text-yellow-700 mt-1",children:"Your business is currently pending approval. You can test the integration, but live payments will only work after approval."})]})]}),e.jsx(Ade,{merchantId:r.id,merchantName:r.name,merchantLogo:r.logo_url,brandColor:r.brand_color})]})}):e.jsx(gs,{children:e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Ft,{className:"w-12 h-12 text-gray-300 mx-auto mb-4"}),e.jsx("h2",{className:"text-lg font-medium text-gray-900 mb-2",children:"Business not found"}),e.jsx("p",{className:"text-gray-500 mb-4",children:"The business you're looking for doesn't exist or you don't have access."}),e.jsx("button",{onClick:()=>s("/merchant/shops"),className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700",children:"Back to My Shops"})]})})}function Rde(){const[t,s]=h.useState([]),[r,a]=h.useState(!0),[n,i]=h.useState(""),[l,o]=h.useState("all"),[c,d]=h.useState(null);h.useEffect(()=>{Ut.getDefaultCurrency().then(d),u()},[]);const u=async()=>{a(!0);try{s([])}catch(f){console.error("Error fetching transactions:",f)}finally{a(!1)}},m=(c==null?void 0:c.symbol)||"",p=f=>`${m}${f.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}`,x=f=>{switch(f){case"completed":return e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-700",children:[e.jsx(be,{className:"w-3 h-3"})," Completed"]});case"pending":return e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium bg-yellow-100 text-yellow-700",children:[e.jsx(it,{className:"w-3 h-3"})," Pending"]});case"failed":return e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium bg-red-100 text-red-700",children:[e.jsx(ft,{className:"w-3 h-3"})," Failed"]});default:return e.jsx("span",{className:"px-2 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-700",children:f})}},g=t.filter(f=>{var v;const b=f.id.toLowerCase().includes(n.toLowerCase())||((v=f.description)==null?void 0:v.toLowerCase().includes(n.toLowerCase())),j=l==="all"||f.status===l;return b&&j});return e.jsx(gs,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Transactions"}),e.jsx("p",{className:"text-gray-500",children:"View and manage your payment transactions"})]}),e.jsxs("button",{className:"px-4 py-2 text-sm bg-white border border-gray-300 rounded-lg hover:bg-gray-50 flex items-center gap-2",children:[e.jsx(ws,{className:"w-4 h-4"}),"Export"]})]}),e.jsx(W,{className:"p-4",children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(ts,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search transactions...",value:n,onChange:f=>i(f.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500"})]}),e.jsxs("select",{value:l,onChange:f=>o(f.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"completed",children:"Completed"}),e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"failed",children:"Failed"})]})]})}),e.jsx(W,{className:"overflow-hidden",children:r?e.jsxs("div",{className:"p-8 text-center",children:[e.jsx("div",{className:"w-8 h-8 border-4 border-green-600 border-t-transparent rounded-full animate-spin mx-auto"}),e.jsx("p",{className:"mt-2 text-gray-500",children:"Loading transactions..."})]}):g.length===0?e.jsxs("div",{className:"p-8 text-center",children:[e.jsx(ci,{className:"w-12 h-12 text-gray-300 mx-auto mb-3"}),e.jsx("p",{className:"text-gray-500",children:"No transactions found"})]}):e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Transaction ID"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Amount"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Date"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:g.map(f=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 text-sm font-medium text-gray-900",children:f.id}),e.jsx("td",{className:"px-6 py-4 text-sm font-medium",children:p(f.amount)}),e.jsx("td",{className:"px-6 py-4",children:x(f.status)}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-500",children:new Date(f.created_at).toLocaleDateString()})]},f.id))})]})})]})})}function Dde(){const[t,s]=h.useState([]),[r,a]=h.useState(!0),[n,i]=h.useState(null),[l]=h.useState({availableBalance:0,pendingBalance:0,totalPayouts:0});h.useEffect(()=>{Ut.getDefaultCurrency().then(i),o()},[]);const o=async()=>{a(!0);try{s([])}catch(m){console.error("Error fetching payouts:",m)}finally{a(!1)}},c=(n==null?void 0:n.symbol)||"",d=m=>`${c}${m.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}`,u=m=>{switch(m){case"paid":return e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-700",children:[e.jsx(be,{className:"w-3 h-3"})," Paid"]});case"pending":return e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium bg-yellow-100 text-yellow-700",children:[e.jsx(it,{className:"w-3 h-3"})," Pending"]});case"in_transit":return e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-700",children:[e.jsx(it,{className:"w-3 h-3"})," In Transit"]});default:return e.jsx("span",{className:"px-2 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-700",children:m})}};return e.jsx(gs,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Payouts"}),e.jsx("p",{className:"text-gray-500",children:"Track your payouts and balances"})]}),e.jsxs("button",{className:"px-4 py-2 text-sm bg-white border border-gray-300 rounded-lg hover:bg-gray-50 flex items-center gap-2",children:[e.jsx(ws,{className:"w-4 h-4"}),"Export"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsx(W,{className:"p-6",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-3 bg-green-100 rounded-lg",children:e.jsx(jt,{className:"w-6 h-6 text-green-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Available Balance"}),e.jsx("p",{className:"text-2xl font-bold",children:d(l.availableBalance)})]})]})}),e.jsx(W,{className:"p-6",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-3 bg-yellow-100 rounded-lg",children:e.jsx(it,{className:"w-6 h-6 text-yellow-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Pending Balance"}),e.jsx("p",{className:"text-2xl font-bold",children:d(l.pendingBalance)})]})]})}),e.jsx(W,{className:"p-6",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-3 bg-blue-100 rounded-lg",children:e.jsx(js,{className:"w-6 h-6 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Total Payouts"}),e.jsx("p",{className:"text-2xl font-bold",children:d(l.totalPayouts)})]})]})})]}),e.jsxs(W,{className:"overflow-hidden",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:e.jsx("h2",{className:"text-lg font-semibold",children:"Payout History"})}),r?e.jsxs("div",{className:"p-8 text-center",children:[e.jsx("div",{className:"w-8 h-8 border-4 border-green-600 border-t-transparent rounded-full animate-spin mx-auto"}),e.jsx("p",{className:"mt-2 text-gray-500",children:"Loading payouts..."})]}):t.length===0?e.jsxs("div",{className:"p-8 text-center",children:[e.jsx(js,{className:"w-12 h-12 text-gray-300 mx-auto mb-3"}),e.jsx("p",{className:"text-gray-500",children:"No payouts yet"})]}):e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Payout ID"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Amount"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Arrival Date"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:t.map(m=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 text-sm font-medium text-gray-900",children:m.id}),e.jsx("td",{className:"px-6 py-4 text-sm font-medium",children:d(m.amount)}),e.jsx("td",{className:"px-6 py-4",children:u(m.status)}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-500",children:m.arrival_date?new Date(m.arrival_date).toLocaleDateString():"-"})]},m.id))})]})]})]})})}function Ide(){const[t,s]=h.useState([]),[r,a]=h.useState(!0),[n,i]=h.useState(""),[l,o]=h.useState(null);h.useEffect(()=>{Ut.getDefaultCurrency().then(o),c()},[]);const c=async()=>{a(!0);try{s([])}catch(x){console.error("Error fetching refunds:",x)}finally{a(!1)}},d=(l==null?void 0:l.symbol)||"",u=x=>`${d}${x.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}`,m=x=>{switch(x){case"succeeded":return e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-700",children:[e.jsx(be,{className:"w-3 h-3"})," Succeeded"]});case"pending":return e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium bg-yellow-100 text-yellow-700",children:[e.jsx(it,{className:"w-3 h-3"})," Pending"]});case"failed":return e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium bg-red-100 text-red-700",children:[e.jsx(ft,{className:"w-3 h-3"})," Failed"]});default:return e.jsx("span",{className:"px-2 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-700",children:x})}},p=t.filter(x=>x.id.toLowerCase().includes(n.toLowerCase())||x.transaction_id.toLowerCase().includes(n.toLowerCase()));return e.jsx(gs,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Refunds"}),e.jsx("p",{className:"text-gray-500",children:"Manage customer refunds"})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("button",{className:"px-4 py-2 text-sm bg-white border border-gray-300 rounded-lg hover:bg-gray-50 flex items-center gap-2",children:[e.jsx(ws,{className:"w-4 h-4"}),"Export"]}),e.jsxs("button",{className:"px-4 py-2 text-sm bg-green-600 text-white rounded-lg hover:bg-green-700 flex items-center gap-2",children:[e.jsx(It,{className:"w-4 h-4"}),"New Refund"]})]})]}),e.jsx(W,{className:"p-4",children:e.jsxs("div",{className:"relative",children:[e.jsx(ts,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search refunds...",value:n,onChange:x=>i(x.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500"})]})}),e.jsx(W,{className:"overflow-hidden",children:r?e.jsxs("div",{className:"p-8 text-center",children:[e.jsx("div",{className:"w-8 h-8 border-4 border-green-600 border-t-transparent rounded-full animate-spin mx-auto"}),e.jsx("p",{className:"mt-2 text-gray-500",children:"Loading refunds..."})]}):p.length===0?e.jsxs("div",{className:"p-8 text-center",children:[e.jsx(vt,{className:"w-12 h-12 text-gray-300 mx-auto mb-3"}),e.jsx("p",{className:"text-gray-500",children:"No refunds found"})]}):e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Refund ID"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Transaction"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Amount"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Date"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:p.map(x=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 text-sm font-medium text-gray-900",children:x.id}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-600",children:x.transaction_id}),e.jsx("td",{className:"px-6 py-4 text-sm font-medium",children:u(x.amount)}),e.jsx("td",{className:"px-6 py-4",children:m(x.status)}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-500",children:new Date(x.created_at).toLocaleDateString()})]},x.id))})]})})]})})}function Mde(){const[t,s]=h.useState(null),[r,a]=h.useState("30days"),[n]=h.useState({totalRevenue:0,totalTransactions:0,avgOrderValue:0,refundRate:0});h.useEffect(()=>{Ut.getDefaultCurrency().then(s)},[]);const i=(t==null?void 0:t.symbol)||"",l=o=>`${i}${o.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}`;return e.jsx(gs,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Reports"}),e.jsx("p",{className:"text-gray-500",children:"Analytics and business insights"})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("select",{value:r,onChange:o=>a(o.target.value),className:"px-4 py-2 text-sm bg-white border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500",children:[e.jsx("option",{value:"7days",children:"Last 7 days"}),e.jsx("option",{value:"30days",children:"Last 30 days"}),e.jsx("option",{value:"90days",children:"Last 90 days"}),e.jsx("option",{value:"year",children:"This year"})]}),e.jsxs("button",{className:"px-4 py-2 text-sm bg-white border border-gray-300 rounded-lg hover:bg-gray-50 flex items-center gap-2",children:[e.jsx(ws,{className:"w-4 h-4"}),"Export Report"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsx(W,{className:"p-6",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-3 bg-green-100 rounded-lg",children:e.jsx(js,{className:"w-6 h-6 text-green-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Total Revenue"}),e.jsx("p",{className:"text-2xl font-bold",children:l(n.totalRevenue)})]})]})}),e.jsx(W,{className:"p-6",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-3 bg-blue-100 rounded-lg",children:e.jsx(Mf,{className:"w-6 h-6 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Total Transactions"}),e.jsx("p",{className:"text-2xl font-bold",children:n.totalTransactions.toLocaleString()})]})]})}),e.jsx(W,{className:"p-6",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-3 bg-purple-100 rounded-lg",children:e.jsx(rr,{className:"w-6 h-6 text-purple-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Avg. Order Value"}),e.jsx("p",{className:"text-2xl font-bold",children:l(n.avgOrderValue)})]})]})}),e.jsx(W,{className:"p-6",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-3 bg-orange-100 rounded-lg",children:e.jsx(Bc,{className:"w-6 h-6 text-orange-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Refund Rate"}),e.jsxs("p",{className:"text-2xl font-bold",children:[n.refundRate,"%"]})]})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(W,{className:"p-6",children:[e.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Revenue Over Time"}),e.jsx("div",{className:"h-64 flex items-center justify-center bg-gray-50 rounded-lg",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Bc,{className:"w-12 h-12 text-gray-300 mx-auto mb-3"}),e.jsx("p",{className:"text-gray-500",children:"No data available"})]})})]}),e.jsxs(W,{className:"p-6",children:[e.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Transaction Volume"}),e.jsx("div",{className:"h-64 flex items-center justify-center bg-gray-50 rounded-lg",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Bc,{className:"w-12 h-12 text-gray-300 mx-auto mb-3"}),e.jsx("p",{className:"text-gray-500",children:"No data available"})]})})]})]}),e.jsxs(W,{className:"p-6",children:[e.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Available Reports"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("button",{className:"p-4 border border-gray-200 rounded-lg hover:bg-gray-50 text-left",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx(ws,{className:"w-5 h-5 text-gray-600"}),e.jsx("span",{className:"font-medium",children:"Transaction Report"})]}),e.jsx("p",{className:"text-sm text-gray-500",children:"Detailed list of all transactions"})]}),e.jsxs("button",{className:"p-4 border border-gray-200 rounded-lg hover:bg-gray-50 text-left",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx(ws,{className:"w-5 h-5 text-gray-600"}),e.jsx("span",{className:"font-medium",children:"Payout Report"})]}),e.jsx("p",{className:"text-sm text-gray-500",children:"Summary of all payouts"})]}),e.jsxs("button",{className:"p-4 border border-gray-200 rounded-lg hover:bg-gray-50 text-left",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx(ws,{className:"w-5 h-5 text-gray-600"}),e.jsx("span",{className:"font-medium",children:"Refund Report"})]}),e.jsx("p",{className:"text-sm text-gray-500",children:"All refunds and chargebacks"})]})]})]})]})})}function Lde(){const[t,s]=h.useState([]),[r,a]=h.useState(!0),[n,i]=h.useState(""),[l,o]=h.useState(null),[c,d]=h.useState(null);h.useEffect(()=>{Ut.getDefaultCurrency().then(o),u()},[]);const u=async()=>{a(!0);try{s([])}catch(b){console.error("Error fetching payment links:",b)}finally{a(!1)}},m=(l==null?void 0:l.symbol)||"",p=b=>`${m}${b.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}`,x=(b,j)=>{navigator.clipboard.writeText(j),d(b),setTimeout(()=>d(null),2e3)},g=b=>{switch(b){case"active":return e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-700",children:[e.jsx(be,{className:"w-3 h-3"})," Active"]});case"inactive":return e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-700",children:[e.jsx(ft,{className:"w-3 h-3"})," Inactive"]});default:return e.jsx("span",{className:"px-2 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-700",children:b})}},f=t.filter(b=>b.name.toLowerCase().includes(n.toLowerCase()));return e.jsx(gs,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Payment Links"}),e.jsx("p",{className:"text-gray-500",children:"Create and manage payment links"})]}),e.jsxs("button",{className:"px-4 py-2 text-sm bg-green-600 text-white rounded-lg hover:bg-green-700 flex items-center gap-2",children:[e.jsx(It,{className:"w-4 h-4"}),"Create Payment Link"]})]}),e.jsx(W,{className:"p-4",children:e.jsxs("div",{className:"relative",children:[e.jsx(ts,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search payment links...",value:n,onChange:b=>i(b.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500"})]})}),e.jsx(W,{className:"overflow-hidden",children:r?e.jsxs("div",{className:"p-8 text-center",children:[e.jsx("div",{className:"w-8 h-8 border-4 border-green-600 border-t-transparent rounded-full animate-spin mx-auto"}),e.jsx("p",{className:"mt-2 text-gray-500",children:"Loading payment links..."})]}):f.length===0?e.jsxs("div",{className:"p-8 text-center",children:[e.jsx(Qh,{className:"w-12 h-12 text-gray-300 mx-auto mb-3"}),e.jsx("p",{className:"text-gray-500 mb-4",children:"No payment links found"}),e.jsxs("button",{className:"px-4 py-2 text-sm bg-green-600 text-white rounded-lg hover:bg-green-700 inline-flex items-center gap-2",children:[e.jsx(It,{className:"w-4 h-4"}),"Create Your First Payment Link"]})]}):e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Name"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Amount"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Visits"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Conversions"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:f.map(b=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsxs("td",{className:"px-6 py-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:b.name}),e.jsx("p",{className:"text-xs text-gray-500 truncate max-w-xs",children:b.url})]}),e.jsx("td",{className:"px-6 py-4 text-sm font-medium",children:p(b.amount)}),e.jsx("td",{className:"px-6 py-4",children:g(b.status)}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-500",children:b.visits}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-500",children:b.conversions}),e.jsx("td",{className:"px-6 py-4 text-right",children:e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[e.jsx("button",{onClick:()=>x(b.id,b.url),className:"p-2 hover:bg-gray-100 rounded-lg",title:"Copy link",children:c===b.id?e.jsx(be,{className:"w-4 h-4 text-green-500"}):e.jsx(vs,{className:"w-4 h-4 text-gray-500"})}),e.jsx("a",{href:b.url,target:"_blank",rel:"noopener noreferrer",className:"p-2 hover:bg-gray-100 rounded-lg",title:"Open link",children:e.jsx(Fr,{className:"w-4 h-4 text-gray-500"})}),e.jsx("button",{className:"p-2 hover:bg-gray-100 rounded-lg",title:"View details",children:e.jsx(es,{className:"w-4 h-4 text-gray-500"})}),e.jsx("button",{className:"p-2 hover:bg-gray-100 rounded-lg text-red-500",title:"Delete",children:e.jsx(Or,{className:"w-4 h-4"})})]})})]},b.id))})]})})]})})}function Fde(){var $;const{user:t}=wt(),[s,r]=h.useState(!0),[a,n]=h.useState(!1),[i,l]=h.useState(!1),[o,c]=h.useState(""),[d,u]=h.useState(""),[m,p]=h.useState({id:"",business_name:"",business_type:"",business_category_id:null,registration_number:"",tax_id:"",website:"",description:"",email:"",phone:"",address_line1:"",address_line2:"",city:"",state:"",postal_code:"",country:"",logo_url:null,kyc_status:"pending",is_active:!0,created_at:""}),[x,g]=h.useState({bank_name:"",account_name:"",account_number:"",routing_number:""}),[f,b]=h.useState([]),[j,v]=h.useState([]),[w,y]=h.useState(null);h.useEffect(()=>{C(),S(),_()},[t]);const C=async()=>{if(t!=null&&t.id){r(!0);try{const{data:L,error:B}=await U.from("users").select(`
          id,
          email,
          phone,
          business_name,
          kyc_status,
          is_active,
          created_at,
          business_category_id,
          business_categories (
            id,
            name
          )
        `).eq("id",t.id).single();if(B){console.error("Error fetching profile:",B);return}L&&p(T=>{var O;return{...T,id:L.id,business_name:L.business_name||"",email:L.email||"",phone:L.phone||"",kyc_status:L.kyc_status||"pending",is_active:L.is_active??!0,created_at:L.created_at,business_category_id:L.business_category_id,business_category_name:((O=L.business_categories)==null?void 0:O.name)||""}})}catch(L){console.error("Error fetching profile:",L)}finally{r(!1)}}},S=async()=>{try{const{data:L,error:B}=await U.from("business_categories").select("id, name, parent_id").eq("status","ACTIVE").order("sort_order",{ascending:!0});!B&&L&&b(L)}catch(L){console.error("Error fetching categories:",L)}},_=async()=>{if(t!=null&&t.id)try{const{data:L,error:B}=await U.from("merchant_business_categories").select(`
          id,
          is_primary,
          business_category_id,
          business_categories (
            id,
            name
          )
        `).eq("user_id",t.id);if(!B&&L){const T=L.map(O=>{var q,K;return{id:((q=O.business_categories)==null?void 0:q.id)||O.business_category_id,name:((K=O.business_categories)==null?void 0:K.name)||"",is_primary:O.is_primary}});v(T)}}catch(L){console.error("Error fetching merchant categories:",L)}},E=async()=>{var L;n(!0),u(""),c("");try{const{error:B}=await U.from("users").update({business_name:m.business_name,phone:m.phone,business_category_id:((L=j.find(T=>T.is_primary))==null?void 0:L.id)||null}).eq("id",t==null?void 0:t.id);if(B){u(B.message);return}if(t!=null&&t.id&&(await U.from("merchant_business_categories").delete().eq("user_id",t.id),j.length>0)){const T=j.map(q=>({user_id:t.id,business_category_id:q.id,is_primary:q.is_primary})),{error:O}=await U.from("merchant_business_categories").insert(T);O&&console.error("Error saving categories:",O)}c("Profile updated successfully"),l(!1),setTimeout(()=>c(""),3e3)}catch(B){u(B.message||"Failed to update profile")}finally{n(!1)}},A=L=>{const B=f.find(O=>O.id===L);if(!B)return;if(j.some(O=>O.id===L)){const O=j.filter(q=>q.id!==L);O.length>0&&!O.some(q=>q.is_primary)&&(O[0].is_primary=!0),v(O)}else{const O={id:B.id,name:B.name,is_primary:j.length===0};v([...j,O])}},R=L=>{v(j.map(B=>({...B,is_primary:B.id===L})))},I=L=>{const B=j.filter(T=>T.id!==L);B.length>0&&!B.some(T=>T.is_primary)&&(B[0].is_primary=!0),v(B)},N=L=>{y(L===w?null:L)},P=f.filter(L=>!L.parent_id),k=L=>f.filter(B=>B.parent_id===L),D=L=>{switch(L){case"approved":case"verified":return e.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 rounded-full text-sm font-medium bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400",children:[e.jsx(be,{className:"w-4 h-4"})," Verified"]});case"pending":return e.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 rounded-full text-sm font-medium bg-yellow-100 dark:bg-yellow-900/30 text-yellow-700 dark:text-yellow-400",children:[e.jsx(it,{className:"w-4 h-4"})," Pending Verification"]});case"rejected":return e.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 rounded-full text-sm font-medium bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-400",children:[e.jsx(ut,{className:"w-4 h-4"})," Verification Failed"]});default:return e.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 rounded-full text-sm font-medium bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300",children:[e.jsx(it,{className:"w-4 h-4"})," ",L]})}};return s?e.jsx(gs,{children:e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"w-8 h-8 border-4 border-green-600 dark:border-green-400 border-t-transparent rounded-full animate-spin"})})}):e.jsx(gs,{children:e.jsxs(Oe.div,{className:"space-y-6",initial:{opacity:0},animate:{opacity:1},transition:{duration:.4},children:[e.jsxs(Oe.div,{className:"flex justify-between items-center",initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.5},children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Business Profile"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Manage your business information"})]}),i?e.jsxs("div",{className:"flex gap-3",children:[e.jsxs(Oe.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>{l(!1),C()},className:"px-4 py-2 text-sm bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 flex items-center gap-2",children:[e.jsx(lt,{className:"w-4 h-4"}),"Cancel"]}),e.jsxs(Oe.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:E,disabled:a,className:"px-4 py-2 text-sm bg-green-600 text-white rounded-lg hover:bg-green-700 flex items-center gap-2 disabled:opacity-50",children:[a?e.jsx(Ie,{className:"w-4 h-4 animate-spin"}):e.jsx(oa,{className:"w-4 h-4"}),"Save Changes"]})]}):e.jsxs(Oe.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>l(!0),className:"px-4 py-2 text-sm bg-green-600 text-white rounded-lg hover:bg-green-700 flex items-center gap-2",children:[e.jsx(Nl,{className:"w-4 h-4"}),"Edit Profile"]})]}),o&&e.jsxs(Oe.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"p-4 bg-green-50 dark:bg-green-900/30 border border-green-200 dark:border-green-800 rounded-lg text-green-700 dark:text-green-400 flex items-center gap-2",children:[e.jsx(be,{className:"w-5 h-5"}),o]}),d&&e.jsxs(Oe.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"p-4 bg-red-50 dark:bg-red-900/30 border border-red-200 dark:border-red-800 rounded-lg text-red-700 dark:text-red-400 flex items-center gap-2",children:[e.jsx(ut,{className:"w-5 h-5"}),d]}),e.jsx(we,{className:"p-6",delay:.1,glowEffect:!0,children:e.jsxs("div",{className:"flex items-start gap-6",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"w-24 h-24 bg-green-100 dark:bg-green-900/30 rounded-xl flex items-center justify-center",children:m.logo_url?e.jsx("img",{src:m.logo_url,alt:"Business Logo",className:"w-full h-full object-cover rounded-xl"}):e.jsx(Ft,{className:"w-12 h-12 text-green-600 dark:text-green-400"})}),i&&e.jsx("button",{className:"absolute -bottom-2 -right-2 p-2 bg-white dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-full shadow-sm hover:bg-gray-50 dark:hover:bg-gray-600",children:e.jsx(Yc,{className:"w-4 h-4 text-gray-600 dark:text-gray-400"})})]}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[i?e.jsx("input",{type:"text",value:m.business_name,onChange:L=>p({...m,business_name:L.target.value}),className:"text-2xl font-bold text-gray-900 dark:text-white bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-1 focus:ring-2 focus:ring-green-500",placeholder:"Business Name"}):e.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:m.business_name||"Your Business Name"}),D(m.kyc_status)]}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-3",children:m.business_category_name||"No category selected"}),e.jsxs("div",{className:"flex items-center gap-6 text-sm text-gray-600 dark:text-gray-400",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Va,{className:"w-4 h-4"}),m.email]}),m.phone&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(lr,{className:"w-4 h-4"}),m.phone]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-1",children:"Account Status"}),e.jsx("span",{className:`inline-flex items-center gap-1 px-3 py-1 rounded-full text-sm font-medium ${m.is_active?"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400":"bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-400"}`,children:m.is_active?"Active":"Inactive"}),e.jsxs("p",{className:"text-xs text-gray-400 dark:text-gray-500 mt-2",children:["Member since ",new Date(m.created_at).toLocaleDateString()]})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(we,{className:"p-6",delay:.2,children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(ua,{className:"w-5 h-5 text-gray-600 dark:text-gray-400"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Business Information"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Business Name"}),i?e.jsx("input",{type:"text",value:m.business_name,onChange:L=>p({...m,business_name:L.target.value}),className:"w-full px-3 py-2 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500 text-gray-900 dark:text-white"}):e.jsx("p",{className:"text-gray-900 dark:text-white",children:m.business_name||"-"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:["Business Categories",e.jsx("span",{className:"text-xs text-gray-400 dark:text-gray-500 ml-2",children:"(Select all that apply)"})]}),i?e.jsxs("div",{className:"space-y-3",children:[j.length>0&&e.jsxs("div",{className:"p-3 bg-green-50 dark:bg-green-900/30 border border-green-200 dark:border-green-800 rounded-lg",children:[e.jsxs("p",{className:"text-xs text-green-700 dark:text-green-400 font-medium mb-2",children:["Selected Categories (",j.length,"):"]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:j.map(L=>e.jsxs("span",{className:`inline-flex items-center gap-2 px-2 py-1 rounded-full text-xs ${L.is_primary?"bg-green-200 dark:bg-green-800 text-green-800 dark:text-green-200":"bg-white dark:bg-gray-700 text-gray-700 dark:text-gray-300 border border-gray-200 dark:border-gray-600"}`,children:[L.name,L.is_primary&&e.jsx("span",{className:"text-[10px] font-medium",children:"(Primary)"}),!L.is_primary&&e.jsx("button",{type:"button",onClick:()=>R(L.id),className:"text-[10px] text-green-600 dark:text-green-400 hover:text-green-700 dark:hover:text-green-300 underline",children:"Set Primary"}),e.jsx("button",{type:"button",onClick:()=>I(L.id),className:"text-gray-400 dark:text-gray-500 hover:text-red-500 dark:hover:text-red-400",children:""})]},L.id))})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-0 border border-gray-200 dark:border-gray-600 rounded-lg overflow-hidden",children:[e.jsxs("div",{className:"border-r border-gray-200 dark:border-gray-600",children:[e.jsx("div",{className:"bg-gray-50 dark:bg-gray-700 px-3 py-2 border-b border-gray-200 dark:border-gray-600",children:e.jsx("p",{className:"text-xs font-medium text-gray-700 dark:text-gray-300",children:"Categories"})}),e.jsx("div",{className:"max-h-64 overflow-y-auto bg-white dark:bg-gray-800",children:P.map(L=>{const T=k(L.id).filter(q=>j.some(K=>K.id===q.id)).length,O=w===L.id;return e.jsxs("button",{type:"button",onClick:()=>N(L.id),className:`w-full flex items-center justify-between px-3 py-2 text-left text-sm hover:bg-gray-50 dark:hover:bg-gray-700 border-b border-gray-100 dark:border-gray-700 last:border-0 ${O?"bg-green-50 dark:bg-green-900/30 border-l-2 border-l-green-500":""}`,children:[e.jsx("span",{className:`${O?"text-green-700 dark:text-green-400 font-medium":"text-gray-700 dark:text-gray-300"}`,children:L.name}),e.jsxs("div",{className:"flex items-center gap-1",children:[T>0&&e.jsx("span",{className:"px-1.5 py-0.5 bg-green-100 dark:bg-green-800 text-green-700 dark:text-green-300 text-[10px] rounded-full",children:T}),e.jsx(zs,{className:`w-3 h-3 text-gray-400 -rotate-90 ${O?"text-green-500":""}`})]})]},L.id)})})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800",children:[e.jsx("div",{className:"bg-gray-50 dark:bg-gray-700 px-3 py-2 border-b border-gray-200 dark:border-gray-600",children:e.jsx("p",{className:"text-xs font-medium text-gray-700 dark:text-gray-300",children:"Subcategories"})}),e.jsx("div",{className:"max-h-64 overflow-y-auto",children:w?k(w).length>0?e.jsx("div",{className:"p-2 space-y-1",children:k(w).map(L=>{const B=j.some(T=>T.id===L.id);return e.jsxs("label",{className:`flex items-center gap-2 p-2 rounded cursor-pointer text-sm ${B?"bg-green-50 dark:bg-green-900/30":"hover:bg-gray-50 dark:hover:bg-gray-700"}`,children:[e.jsx("input",{type:"checkbox",checked:B,onChange:()=>A(L.id),className:"w-4 h-4 text-green-600 border-gray-300 dark:border-gray-600 rounded focus:ring-green-500 bg-white dark:bg-gray-700"}),e.jsx("span",{className:B?"text-green-700 dark:text-green-400 font-medium":"text-gray-600 dark:text-gray-400",children:L.name})]},L.id)})}):e.jsxs("div",{className:"p-4 text-center text-gray-400 dark:text-gray-500 text-xs",children:[e.jsx("p",{children:"No subcategories"}),e.jsxs("label",{className:"flex items-center justify-center gap-2 mt-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:j.some(L=>L.id===w),onChange:()=>A(w),className:"w-4 h-4 text-green-600 border-gray-300 dark:border-gray-600 rounded focus:ring-green-500 bg-white dark:bg-gray-700"}),e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Select parent"})]})]}):e.jsx("div",{className:"p-4 text-center text-gray-400 dark:text-gray-500 text-xs",children:"Select a category"})})]})]}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Select a category on the left to see subcategories. First selected becomes primary."})]}):e.jsx("div",{className:"flex flex-wrap gap-2",children:j.length>0?j.map(L=>e.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs ${L.is_primary?"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400":"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300"}`,children:[e.jsx(Lf,{className:"w-3 h-3"}),L.name,L.is_primary&&e.jsx("span",{className:"text-[10px]",children:"(Primary)"})]},L.id)):e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"No categories selected"})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Business Type"}),i?e.jsxs("select",{value:m.business_type,onChange:L=>p({...m,business_type:L.target.value}),className:"w-full px-3 py-2 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500 text-gray-900 dark:text-white",children:[e.jsx("option",{value:"",children:"Select type"}),e.jsx("option",{value:"sole_proprietorship",children:"Sole Proprietorship"}),e.jsx("option",{value:"partnership",children:"Partnership"}),e.jsx("option",{value:"llc",children:"LLC"}),e.jsx("option",{value:"corporation",children:"Corporation"}),e.jsx("option",{value:"nonprofit",children:"Non-Profit"})]}):e.jsx("p",{className:"text-gray-900 dark:text-white capitalize",children:(($=m.business_type)==null?void 0:$.replace("_"," "))||"-"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Registration Number"}),i?e.jsx("input",{type:"text",value:m.registration_number,onChange:L=>p({...m,registration_number:L.target.value}),className:"w-full px-3 py-2 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500 text-gray-900 dark:text-white",placeholder:"Business registration number"}):e.jsx("p",{className:"text-gray-900 dark:text-white",children:m.registration_number||"-"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Tax ID"}),i?e.jsx("input",{type:"text",value:m.tax_id,onChange:L=>p({...m,tax_id:L.target.value}),className:"w-full px-3 py-2 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500 text-gray-900 dark:text-white",placeholder:"Tax identification number"}):e.jsx("p",{className:"text-gray-900 dark:text-white",children:m.tax_id||"-"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Website"}),i?e.jsx("input",{type:"url",value:m.website,onChange:L=>p({...m,website:L.target.value}),className:"w-full px-3 py-2 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500 text-gray-900 dark:text-white",placeholder:"https://example.com"}):e.jsx("p",{className:"text-gray-900 dark:text-white",children:m.website?e.jsx("a",{href:m.website,target:"_blank",rel:"noopener noreferrer",className:"text-green-600 dark:text-green-400 hover:underline",children:m.website}):"-"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Business Description"}),i?e.jsx("textarea",{value:m.description,onChange:L=>p({...m,description:L.target.value}),rows:3,className:"w-full px-3 py-2 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500 text-gray-900 dark:text-white",placeholder:"Describe your business..."}):e.jsx("p",{className:"text-gray-900 dark:text-white",children:m.description||"-"})]})]})]}),e.jsxs(we,{className:"p-6",delay:.3,children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(Vi,{className:"w-5 h-5 text-gray-600 dark:text-gray-400"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Contact & Address"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Email"}),e.jsx("p",{className:"text-gray-900 dark:text-white",children:m.email}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Contact support to change email"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Phone Number"}),i?e.jsx("input",{type:"tel",value:m.phone,onChange:L=>p({...m,phone:L.target.value}),className:"w-full px-3 py-2 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500 text-gray-900 dark:text-white",placeholder:"+1 (555) 000-0000"}):e.jsx("p",{className:"text-gray-900 dark:text-white",children:m.phone||"-"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Address Line 1"}),i?e.jsx("input",{type:"text",value:m.address_line1,onChange:L=>p({...m,address_line1:L.target.value}),className:"w-full px-3 py-2 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500 text-gray-900 dark:text-white",placeholder:"Street address"}):e.jsx("p",{className:"text-gray-900 dark:text-white",children:m.address_line1||"-"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Address Line 2"}),i?e.jsx("input",{type:"text",value:m.address_line2,onChange:L=>p({...m,address_line2:L.target.value}),className:"w-full px-3 py-2 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500 text-gray-900 dark:text-white",placeholder:"Apt, Suite, Building (optional)"}):e.jsx("p",{className:"text-gray-900 dark:text-white",children:m.address_line2||"-"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"City"}),i?e.jsx("input",{type:"text",value:m.city,onChange:L=>p({...m,city:L.target.value}),className:"w-full px-3 py-2 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500 text-gray-900 dark:text-white"}):e.jsx("p",{className:"text-gray-900 dark:text-white",children:m.city||"-"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"State/Province"}),i?e.jsx("input",{type:"text",value:m.state,onChange:L=>p({...m,state:L.target.value}),className:"w-full px-3 py-2 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500 text-gray-900 dark:text-white"}):e.jsx("p",{className:"text-gray-900 dark:text-white",children:m.state||"-"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Postal Code"}),i?e.jsx("input",{type:"text",value:m.postal_code,onChange:L=>p({...m,postal_code:L.target.value}),className:"w-full px-3 py-2 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500 text-gray-900 dark:text-white"}):e.jsx("p",{className:"text-gray-900 dark:text-white",children:m.postal_code||"-"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Country"}),i?e.jsx("input",{type:"text",value:m.country,onChange:L=>p({...m,country:L.target.value}),className:"w-full px-3 py-2 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500 text-gray-900 dark:text-white"}):e.jsx("p",{className:"text-gray-900 dark:text-white",children:m.country||"-"})]})]})]})]})]}),e.jsxs(we,{className:"p-6",delay:.4,children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Je,{className:"w-5 h-5 text-gray-600 dark:text-gray-400"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Payout Account"})]}),e.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"For receiving payouts"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Bank Name"}),i?e.jsx("input",{type:"text",value:x.bank_name,onChange:L=>g({...x,bank_name:L.target.value}),className:"w-full px-3 py-2 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500 text-gray-900 dark:text-white",placeholder:"Bank name"}):e.jsx("p",{className:"text-gray-900 dark:text-white",children:x.bank_name||"-"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Account Name"}),i?e.jsx("input",{type:"text",value:x.account_name,onChange:L=>g({...x,account_name:L.target.value}),className:"w-full px-3 py-2 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500 text-gray-900 dark:text-white",placeholder:"Account holder name"}):e.jsx("p",{className:"text-gray-900 dark:text-white",children:x.account_name||"-"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Account Number"}),i?e.jsx("input",{type:"text",value:x.account_number,onChange:L=>g({...x,account_number:L.target.value}),className:"w-full px-3 py-2 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500 text-gray-900 dark:text-white",placeholder:"Account number"}):e.jsx("p",{className:"text-gray-900 dark:text-white",children:x.account_number?`****${x.account_number.slice(-4)}`:"-"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Routing Number"}),i?e.jsx("input",{type:"text",value:x.routing_number,onChange:L=>g({...x,routing_number:L.target.value}),className:"w-full px-3 py-2 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500 text-gray-900 dark:text-white",placeholder:"Routing number"}):e.jsx("p",{className:"text-gray-900 dark:text-white",children:x.routing_number||"-"})]})]})]}),e.jsxs(we,{className:"p-6",delay:.5,glowEffect:!0,children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(Xt,{className:"w-5 h-5 text-gray-600 dark:text-gray-400"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Verification Status"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"flex items-center gap-3 p-4 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:[e.jsx("div",{className:`p-2 rounded-full ${m.kyc_status==="approved"||m.kyc_status==="verified"?"bg-green-100 dark:bg-green-900/30":"bg-yellow-100 dark:bg-yellow-900/30"}`,children:m.kyc_status==="approved"||m.kyc_status==="verified"?e.jsx(be,{className:"w-5 h-5 text-green-600 dark:text-green-400"}):e.jsx(it,{className:"w-5 h-5 text-yellow-600 dark:text-yellow-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:"Identity Verification"}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 capitalize",children:m.kyc_status||"Pending"})]})]}),e.jsxs("div",{className:"flex items-center gap-3 p-4 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:[e.jsx("div",{className:`p-2 rounded-full ${m.business_name?"bg-green-100 dark:bg-green-900/30":"bg-yellow-100 dark:bg-yellow-900/30"}`,children:m.business_name?e.jsx(be,{className:"w-5 h-5 text-green-600 dark:text-green-400"}):e.jsx(it,{className:"w-5 h-5 text-yellow-600 dark:text-yellow-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:"Business Information"}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:m.business_name?"Complete":"Incomplete"})]})]}),e.jsxs("div",{className:"flex items-center gap-3 p-4 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:[e.jsx("div",{className:`p-2 rounded-full ${x.account_number?"bg-green-100 dark:bg-green-900/30":"bg-yellow-100 dark:bg-yellow-900/30"}`,children:x.account_number?e.jsx(be,{className:"w-5 h-5 text-green-600 dark:text-green-400"}):e.jsx(it,{className:"w-5 h-5 text-yellow-600 dark:text-yellow-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:"Payout Account"}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:x.account_number?"Connected":"Not connected"})]})]})]})]})]})})}const dx=[{id:1,title:"Business Info",description:"Basic business details"},{id:2,title:"Categories",description:"What do you sell?"},{id:3,title:"Contact & Address",description:"Location details"},{id:4,title:"Payout Account",description:"Bank information"}];function Ode(){var N,P;const{user:t}=wt(),s=At(),[r,a]=h.useState(1),[n,i]=h.useState(!1),[l,o]=h.useState(""),[c,d]=h.useState({business_name:"",business_type:"",registration_number:"",tax_id:"",website:"",description:"",phone:"",address_line1:"",address_line2:"",city:"",state:"",postal_code:"",country:"",bank_name:"",account_name:"",account_number:"",routing_number:""}),[u,m]=h.useState([]),[p,x]=h.useState(null),[g,f]=h.useState([]);h.useEffect(()=>{b()},[]);const b=async()=>{const{data:k,error:D}=await U.from("business_categories").select("id, name, parent_id, icon").eq("status","ACTIVE").order("sort_order",{ascending:!0});!D&&k&&m(k)},j=u.filter(k=>!k.parent_id),v=k=>u.filter(D=>D.parent_id===k),w=k=>{x(k===p?null:k)},y=k=>{if(g.some($=>$.id===k.id)){const $=g.filter(L=>L.id!==k.id);$.length>0&&!$.some(L=>L.is_primary)&&($[0].is_primary=!0),f($)}else f([...g,{id:k.id,name:k.name,is_primary:g.length===0}])},C=k=>{f(g.map(D=>({...D,is_primary:D.id===k})))},S=k=>{const D=g.filter($=>$.id!==k);D.length>0&&!D.some($=>$.is_primary)&&(D[0].is_primary=!0),f(D)},_=(k,D)=>{d($=>({...$,[k]:D}))},E=k=>{switch(o(""),k){case 1:return c.business_name.trim()?c.business_type?!0:(o("Please select a business type"),!1):(o("Business name is required"),!1);case 2:return g.length===0?(o("Please select at least one business category"),!1):!0;case 3:return c.phone.trim()?c.address_line1.trim()?c.city.trim()?c.country.trim()?!0:(o("Country is required"),!1):(o("City is required"),!1):(o("Address is required"),!1):(o("Phone number is required"),!1);case 4:return!0;default:return!0}},A=()=>{E(r)&&a(k=>Math.min(k+1,dx.length))},R=()=>{a(k=>Math.max(k-1,1))},I=async()=>{var k;if(E(r)){i(!0),o("");try{const{error:D}=await U.from("users").update({business_name:c.business_name,phone:c.phone,business_category_id:((k=g.find($=>$.is_primary))==null?void 0:k.id)||null}).eq("id",t==null?void 0:t.id);if(D){o(D.message),i(!1);return}if(g.length>0&&(t!=null&&t.id)){await U.from("merchant_business_categories").delete().eq("user_id",t.id);const $=g.map(L=>({user_id:t.id,business_category_id:L.id,is_primary:L.is_primary}));await U.from("merchant_business_categories").insert($)}s("/merchant")}catch(D){o(D.message||"Failed to create business")}finally{i(!1)}}};return e.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:e.jsxs("div",{className:"max-w-3xl mx-auto px-4",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-green-100 rounded-full mb-4",children:e.jsx(Ft,{className:"w-8 h-8 text-green-600"})}),e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Create Your Business"}),e.jsx("p",{className:"text-gray-500 mt-1",children:"Set up your merchant account to start accepting payments"})]}),e.jsx("div",{className:"mb-8",children:e.jsx("div",{className:"flex items-center justify-between",children:dx.map((k,D)=>e.jsxs("div",{className:"flex items-center",children:[e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center font-semibold text-sm ${r>k.id||r===k.id?"bg-green-600 text-white":"bg-gray-200 text-gray-500"}`,children:r>k.id?e.jsx(be,{className:"w-5 h-5"}):k.id}),e.jsx("div",{className:"mt-2 text-center",children:e.jsx("p",{className:`text-xs font-medium ${r>=k.id?"text-green-600":"text-gray-400"}`,children:k.title})})]}),D<dx.length-1&&e.jsx("div",{className:`w-16 sm:w-24 h-1 mx-2 ${r>k.id?"bg-green-600":"bg-gray-200"}`})]},k.id))})}),l&&e.jsx("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-lg text-red-700 text-sm",children:l}),e.jsxs(W,{className:"p-6",children:[r===1&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(ua,{className:"w-5 h-5 text-green-600"}),e.jsx("h2",{className:"text-lg font-semibold",children:"Business Information"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Business Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:c.business_name,onChange:k=>_("business_name",k.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500",placeholder:"Your Business Name"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Business Type ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{value:c.business_type,onChange:k=>_("business_type",k.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500",children:[e.jsx("option",{value:"",children:"Select business type"}),e.jsx("option",{value:"sole_proprietorship",children:"Sole Proprietorship"}),e.jsx("option",{value:"partnership",children:"Partnership"}),e.jsx("option",{value:"llc",children:"LLC (Limited Liability Company)"}),e.jsx("option",{value:"corporation",children:"Corporation"}),e.jsx("option",{value:"nonprofit",children:"Non-Profit Organization"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Registration Number"}),e.jsx("input",{type:"text",value:c.registration_number,onChange:k=>_("registration_number",k.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500",placeholder:"Business registration number"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tax ID"}),e.jsx("input",{type:"text",value:c.tax_id,onChange:k=>_("tax_id",k.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500",placeholder:"Tax identification number"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Website"}),e.jsx("input",{type:"url",value:c.website,onChange:k=>_("website",k.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500",placeholder:"https://www.yourbusiness.com"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Business Description"}),e.jsx("textarea",{value:c.description,onChange:k=>_("description",k.target.value),rows:3,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500",placeholder:"Describe what your business does..."})]})]}),r===2&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(Lf,{className:"w-5 h-5 text-green-600"}),e.jsx("h2",{className:"text-lg font-semibold",children:"Business Categories"})]}),e.jsx("p",{className:"text-sm text-gray-500 mb-4",children:"Select the categories that best describe your business. You can select multiple subcategories."}),g.length>0&&e.jsxs("div",{className:"p-4 bg-green-50 border border-green-200 rounded-lg mb-4",children:[e.jsxs("p",{className:"text-sm font-medium text-green-700 mb-2",children:["Selected Categories (",g.length,"):"]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:g.map(k=>e.jsxs("span",{className:`inline-flex items-center gap-2 px-3 py-1.5 rounded-full text-sm ${k.is_primary?"bg-green-200 text-green-800":"bg-white text-gray-700 border border-gray-200"}`,children:[k.name,k.is_primary&&e.jsx("span",{className:"text-xs bg-green-300 px-1.5 py-0.5 rounded",children:"Primary"}),!k.is_primary&&e.jsx("button",{type:"button",onClick:()=>C(k.id),className:"text-xs text-green-600 hover:text-green-700 underline",children:"Set Primary"}),e.jsx("button",{type:"button",onClick:()=>S(k.id),className:"text-gray-400 hover:text-red-500",children:""})]},k.id))})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 border border-gray-200 rounded-lg overflow-hidden",children:[e.jsxs("div",{className:"border-r border-gray-200",children:[e.jsx("div",{className:"bg-gray-50 px-4 py-2 border-b border-gray-200",children:e.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Select a Category"})}),e.jsx("div",{className:"max-h-80 overflow-y-auto",children:j.map(k=>{const $=v(k.id).filter(B=>g.some(T=>T.id===B.id)).length,L=p===k.id;return e.jsxs("button",{type:"button",onClick:()=>w(k.id),className:`w-full flex items-center justify-between px-4 py-3 text-left hover:bg-gray-50 border-b border-gray-100 last:border-0 transition-colors ${L?"bg-green-50 border-l-4 border-l-green-500":""}`,children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Ft,{className:"w-5 h-5 text-gray-400"}),e.jsx("span",{className:`font-medium ${L?"text-green-700":"text-gray-900"}`,children:k.name})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[$>0&&e.jsx("span",{className:"px-2 py-0.5 bg-green-100 text-green-700 text-xs rounded-full",children:$}),e.jsx(Vs,{className:`w-4 h-4 text-gray-400 ${L?"text-green-500":""}`})]})]},k.id)})})]}),e.jsxs("div",{children:[e.jsx("div",{className:"bg-gray-50 px-4 py-2 border-b border-gray-200",children:e.jsx("p",{className:"text-sm font-medium text-gray-700",children:p?"Select Subcategories":"Select a category first"})}),e.jsx("div",{className:"max-h-80 overflow-y-auto",children:p?v(p).length>0?e.jsx("div",{className:"p-2 space-y-1",children:v(p).map(k=>{const D=g.some($=>$.id===k.id);return e.jsxs("label",{className:`flex items-center gap-3 p-3 rounded-lg cursor-pointer transition-colors ${D?"bg-green-50 border border-green-200":"hover:bg-gray-50 border border-transparent"}`,children:[e.jsx("input",{type:"checkbox",checked:D,onChange:()=>y(k),className:"w-5 h-5 text-green-600 border-gray-300 rounded focus:ring-green-500"}),e.jsx("span",{className:`${D?"text-green-700 font-medium":"text-gray-700"}`,children:k.name})]},k.id)})}):e.jsxs("div",{className:"p-8 text-center text-gray-500",children:[e.jsx("p",{children:"No subcategories available"}),e.jsx("p",{className:"text-sm mt-1",children:"You can select the parent category directly"}),e.jsxs("button",{type:"button",onClick:()=>{const k=u.find(D=>D.id===p);k&&y(k)},className:"mt-3 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 text-sm",children:['Select "',(N=j.find(k=>k.id===p))==null?void 0:N.name,'"']})]}):e.jsxs("div",{className:"p-8 text-center text-gray-400",children:[e.jsx(Ft,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),e.jsx("p",{children:"Select a category from the left"}),e.jsx("p",{className:"text-sm mt-1",children:"to see available subcategories"})]})})]})]})]}),r===3&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(Vi,{className:"w-5 h-5 text-green-600"}),e.jsx("h2",{className:"text-lg font-semibold",children:"Contact & Address"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),e.jsx("input",{type:"email",value:(t==null?void 0:t.email)||"",disabled:!0,className:"w-full px-4 py-3 border border-gray-200 rounded-lg bg-gray-50 text-gray-500"}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Cannot be changed"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Phone Number ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"tel",value:c.phone,onChange:k=>_("phone",k.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500",placeholder:"+234 800 000 0000"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Address Line 1 ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:c.address_line1,onChange:k=>_("address_line1",k.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500",placeholder:"Street address"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Address Line 2"}),e.jsx("input",{type:"text",value:c.address_line2,onChange:k=>_("address_line2",k.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500",placeholder:"Apt, Suite, Building (optional)"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["City ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:c.city,onChange:k=>_("city",k.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500",placeholder:"City"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"State/Province"}),e.jsx("input",{type:"text",value:c.state,onChange:k=>_("state",k.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500",placeholder:"State"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Postal Code"}),e.jsx("input",{type:"text",value:c.postal_code,onChange:k=>_("postal_code",k.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500",placeholder:"Postal code"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Country ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:c.country,onChange:k=>_("country",k.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500",placeholder:"Country"})]})]})]}),r===4&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(Je,{className:"w-5 h-5 text-green-600"}),e.jsx("h2",{className:"text-lg font-semibold",children:"Payout Account"})]}),e.jsx("p",{className:"text-sm text-gray-500 mb-4",children:"Add your bank account to receive payouts. You can skip this and add it later."}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Bank Name"}),e.jsx("input",{type:"text",value:c.bank_name,onChange:k=>_("bank_name",k.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500",placeholder:"Bank name"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Account Holder Name"}),e.jsx("input",{type:"text",value:c.account_name,onChange:k=>_("account_name",k.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500",placeholder:"Name on account"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Account Number"}),e.jsx("input",{type:"text",value:c.account_number,onChange:k=>_("account_number",k.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500",placeholder:"Account number"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Routing Number / Sort Code"}),e.jsx("input",{type:"text",value:c.routing_number,onChange:k=>_("routing_number",k.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500",placeholder:"Routing number"})]})]}),e.jsxs("div",{className:"mt-6 p-4 bg-gray-50 rounded-lg",children:[e.jsx("h3",{className:"font-medium text-gray-900 mb-3",children:"Business Summary"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"Business Name"}),e.jsx("p",{className:"font-medium",children:c.business_name||"-"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"Business Type"}),e.jsx("p",{className:"font-medium capitalize",children:((P=c.business_type)==null?void 0:P.replace("_"," "))||"-"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"Categories"}),e.jsxs("p",{className:"font-medium",children:[g.length," selected"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"Location"}),e.jsx("p",{className:"font-medium",children:c.city?`${c.city}, ${c.country}`:"-"})]})]})]})]}),e.jsxs("div",{className:"flex items-center justify-between mt-8 pt-6 border-t border-gray-200",children:[r>1?e.jsxs("button",{type:"button",onClick:R,className:"flex items-center gap-2 px-4 py-2 text-gray-600 hover:text-gray-900",children:[e.jsx(_s,{className:"w-4 h-4"}),"Back"]}):e.jsx("div",{}),r<dx.length?e.jsxs("button",{type:"button",onClick:A,className:"flex items-center gap-2 px-6 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700",children:["Continue",e.jsx(Lr,{className:"w-4 h-4"})]}):e.jsx("button",{type:"button",onClick:I,disabled:n,className:"flex items-center gap-2 px-6 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50",children:n?e.jsxs(e.Fragment,{children:[e.jsx(Ie,{className:"w-4 h-4 animate-spin"}),"Creating Business..."]}):e.jsxs(e.Fragment,{children:[e.jsx(be,{className:"w-4 h-4"}),"Create Business"]})})]})]})]})})}const _c={bucketName:"uploads",maxFileSize:5*1024*1024,allowedTypes:["image/jpeg","image/png","image/gif","image/webp","image/svg+xml"]};function Bde(t){var n;const s=((n=t.split(".").pop())==null?void 0:n.toLowerCase())||"jpg",r=Date.now(),a=Math.random().toString(36).substring(2,8);return`${r}-${a}.${s}`}function $de(t){return t.size>_c.maxFileSize?`File size exceeds ${_c.maxFileSize/(1024*1024)}MB limit`:_c.allowedTypes.includes(t.type)?null:"Invalid file type. Allowed: JPG, PNG, GIF, WebP, SVG"}const Ude={async uploadImage(t,s="uploads"){const r=$de(t);if(r)throw new Error(r);const a=Bde(t.name),n=`${s}/${a}`;try{const{data:i,error:l}=await U.storage.from(_c.bucketName).upload(n,t,{cacheControl:"3600",upsert:!1});if(l)throw console.error("Supabase upload error:",l),new Error(l.message);const{data:o}=U.storage.from(_c.bucketName).getPublicUrl(i.path);return{success:!0,url:o.publicUrl,filename:a,size:t.size}}catch(i){throw console.error("Upload error:",i),new Error(i.message||"Failed to upload file")}},async uploadImages(t,s="uploads"){const r=[];for(const a of t)try{const n=await this.uploadImage(a,s);r.push(n)}catch(n){console.error(`Failed to upload ${a.name}:`,n)}return r},async deleteImage(t){try{const s=t.split("/storage/v1/object/public/");if(s.length<2)return console.error("Invalid URL format for deletion"),!1;const r=s[1].split("/"),a=r[0],n=r.slice(1).join("/"),{error:i}=await U.storage.from(a).remove([n]);return i?(console.error("Supabase delete error:",i),!1):!0}catch(s){return console.error("Delete error:",s),!1}},getImageUrl(t,s){const{data:r}=U.storage.from(_c.bucketName).getPublicUrl(`${t}/${s}`);return r.publicUrl},async listFiles(t){const{data:s,error:r}=await U.storage.from(_c.bucketName).list(t);return r?(console.error("List files error:",r),[]):s.map(a=>a.name)}},ux=[{id:1,title:"Business Info",description:"Basic details"},{id:2,title:"Categories",description:"What you sell"},{id:3,title:"Contact",description:"How to reach you"}];function Vde(){var q;const t=At(),[s,r]=h.useState(1),[a,n]=h.useState(!1),[i,l]=h.useState(""),o=h.useRef(null),[c,d]=h.useState(null),[u,m]=h.useState(null),[p,x]=h.useState(!1),[g,f]=h.useState({name:"",description:"",business_category_id:"",email:"",phone:"",address:"",city:"",website_url:"",logo_url:""}),[b,j]=h.useState([]),[v,w]=h.useState(null),[y,C]=h.useState([]);h.useEffect(()=>{S()},[]);const S=async()=>{const{data:K,error:le}=await U.from("business_categories").select("id, name, parent_id, icon").eq("status","ACTIVE").order("sort_order",{ascending:!0});!le&&K&&j(K)},_=b.filter(K=>!K.parent_id),E=K=>b.filter(le=>le.parent_id===K),A=K=>{w(K===v?null:K)},R=K=>{if(y.some(X=>X.id===K.id)){const X=y.filter(se=>se.id!==K.id);X.length>0&&!X.some(se=>se.is_primary)&&(X[0].is_primary=!0),C(X)}else C([...y,{id:K.id,name:K.name,is_primary:y.length===0}])},I=K=>{C(y.map(le=>({...le,is_primary:le.id===K})))},N=K=>{const le=y.filter(X=>X.id!==K);le.length>0&&!le.some(X=>X.is_primary)&&(le[0].is_primary=!0),C(le)},P=(K,le)=>{f(X=>({...X,[K]:le}))},k=K=>{var X;const le=(X=K.target.files)==null?void 0:X[0];if(le){if(!le.type.startsWith("image/")){l("Please select an image file");return}if(le.size>5*1024*1024){l("Logo must be less than 5MB");return}d(le);const se=new FileReader;se.onloadend=()=>{m(se.result)},se.readAsDataURL(le),l("")}},D=()=>{d(null),m(null),f(K=>({...K,logo_url:""})),o.current&&(o.current.value="")},$=async()=>{if(!c)return g.logo_url||null;x(!0);try{return(await Ude.uploadImage(c,"business-logos")).url}catch(K){return console.error("Logo upload failed:",K),l("Failed to upload logo: "+K.message),null}finally{x(!1)}},L=K=>{switch(l(""),K){case 1:return g.name.trim()?!0:(l("Business name is required"),!1);case 2:return!0;case 3:return!0;default:return!0}},B=()=>{L(s)&&r(K=>Math.min(K+1,ux.length))},T=()=>{r(K=>Math.max(K-1,1))},O=async()=>{if(L(s)){n(!0),l("");try{let K=g.logo_url;if(c){const se=await $();se&&(K=se)}const le=y.find(se=>se.is_primary),X={...g,logo_url:K,business_category_id:(le==null?void 0:le.id)||""};await Ai.createBusiness(X),t("/merchant/developer")}catch(K){l(K.message||"Failed to create business")}finally{n(!1)}}};return e.jsx(mk,{homeRoute:"/merchant",homeLabel:"Merchant Portal",basePath:"/merchant/developer",children:e.jsxs("div",{className:"max-w-3xl mx-auto",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("button",{onClick:()=>t("/merchant/developer"),className:"text-sm text-gray-500 hover:text-gray-700 flex items-center gap-1 mb-2",children:[e.jsx(_s,{className:"w-4 h-4"}),"Back to Businesses"]}),e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Create New Business"}),e.jsx("p",{className:"text-gray-500",children:"Set up a new business to get API keys and start accepting payments"})]}),e.jsx("div",{className:"mb-8",children:e.jsx("div",{className:"flex items-center justify-between",children:ux.map((K,le)=>e.jsxs("div",{className:"flex items-center",children:[e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center font-semibold text-sm ${s>K.id?"bg-green-600 text-white":s===K.id?"bg-primary-600 text-white":"bg-gray-200 text-gray-500"}`,children:s>K.id?e.jsx(be,{className:"w-5 h-5"}):K.id}),e.jsx("div",{className:"mt-2 text-center",children:e.jsx("p",{className:`text-xs font-medium ${s>=K.id?"text-primary-600":"text-gray-400"}`,children:K.title})})]}),le<ux.length-1&&e.jsx("div",{className:`w-20 sm:w-32 h-1 mx-2 ${s>K.id?"bg-green-600":"bg-gray-200"}`})]},K.id))})}),i&&e.jsx("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-lg text-red-700 text-sm",children:i}),e.jsxs(W,{className:"p-6",children:[s===1&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(ua,{className:"w-5 h-5 text-primary-600"}),e.jsx("h2",{className:"text-lg font-semibold",children:"Business Information"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Business Logo"}),e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"flex-shrink-0",children:u?e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:u,alt:"Logo preview",className:"w-24 h-24 rounded-lg object-cover border border-gray-200"}),e.jsx("button",{type:"button",onClick:D,className:"absolute -top-2 -right-2 p-1 bg-red-500 text-white rounded-full hover:bg-red-600",children:e.jsx(lt,{className:"w-4 h-4"})})]}):e.jsx("div",{onClick:()=>{var K;return(K=o.current)==null?void 0:K.click()},className:"w-24 h-24 rounded-lg border-2 border-dashed border-gray-300 flex items-center justify-center cursor-pointer hover:border-primary-500 hover:bg-gray-50 transition-colors",children:e.jsx(CV,{className:"w-8 h-8 text-gray-400"})})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("input",{ref:o,type:"file",accept:"image/*",onChange:k,className:"hidden"}),e.jsxs("button",{type:"button",onClick:()=>{var K;return(K=o.current)==null?void 0:K.click()},className:"px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 flex items-center gap-2 text-sm",children:[e.jsx(Du,{className:"w-4 h-4"}),u?"Change Logo":"Upload Logo"]}),e.jsx("p",{className:"mt-2 text-xs text-gray-500",children:"PNG, JPG up to 5MB. Recommended: 256x256px or higher."}),e.jsx("p",{className:"text-xs text-gray-400",children:"Your logo will appear on checkout pages."})]})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Business Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:g.name,onChange:K=>P("name",K.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",placeholder:"My Awesome Shop"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),e.jsx("textarea",{value:g.description,onChange:K=>P("description",K.target.value),rows:3,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",placeholder:"Describe what your business does..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Website"}),e.jsx("input",{type:"url",value:g.website_url,onChange:K=>P("website_url",K.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",placeholder:"https://myshop.com"})]})]}),s===2&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(Lf,{className:"w-5 h-5 text-primary-600"}),e.jsx("h2",{className:"text-lg font-semibold",children:"Business Categories"})]}),e.jsx("p",{className:"text-sm text-gray-500 mb-4",children:"Select the categories that describe what your business sells."}),y.length>0&&e.jsxs("div",{className:"p-4 bg-green-50 border border-green-200 rounded-lg mb-4",children:[e.jsxs("p",{className:"text-sm font-medium text-green-700 mb-2",children:["Selected (",y.length,"):"]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:y.map(K=>e.jsxs("span",{className:`inline-flex items-center gap-2 px-3 py-1.5 rounded-full text-sm ${K.is_primary?"bg-green-200 text-green-800":"bg-white text-gray-700 border border-gray-200"}`,children:[K.name,K.is_primary&&e.jsx("span",{className:"text-xs bg-green-300 px-1.5 py-0.5 rounded",children:"Primary"}),!K.is_primary&&e.jsx("button",{type:"button",onClick:()=>I(K.id),className:"text-xs text-green-600 hover:text-green-700 underline",children:"Set Primary"}),e.jsx("button",{type:"button",onClick:()=>N(K.id),className:"text-gray-400 hover:text-red-500",children:""})]},K.id))})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-0 border border-gray-200 rounded-lg overflow-hidden",children:[e.jsxs("div",{className:"border-r border-gray-200",children:[e.jsx("div",{className:"bg-gray-50 px-4 py-2 border-b border-gray-200",children:e.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Select a Category"})}),e.jsx("div",{className:"max-h-72 overflow-y-auto",children:_.map(K=>{const X=E(K.id).filter(de=>y.some(fe=>fe.id===de.id)).length,se=v===K.id;return e.jsxs("button",{type:"button",onClick:()=>A(K.id),className:`w-full flex items-center justify-between px-4 py-3 text-left hover:bg-gray-50 border-b border-gray-100 last:border-0 transition-colors ${se?"bg-primary-50 border-l-4 border-l-primary-500":""}`,children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Ft,{className:"w-5 h-5 text-gray-400"}),e.jsx("span",{className:`font-medium ${se?"text-primary-700":"text-gray-900"}`,children:K.name})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[X>0&&e.jsx("span",{className:"px-2 py-0.5 bg-green-100 text-green-700 text-xs rounded-full",children:X}),e.jsx(Vs,{className:`w-4 h-4 text-gray-400 ${se?"text-primary-500":""}`})]})]},K.id)})})]}),e.jsxs("div",{children:[e.jsx("div",{className:"bg-gray-50 px-4 py-2 border-b border-gray-200",children:e.jsx("p",{className:"text-sm font-medium text-gray-700",children:v?"Select Subcategories":"Select a category first"})}),e.jsx("div",{className:"max-h-72 overflow-y-auto",children:v?E(v).length>0?e.jsx("div",{className:"p-2 space-y-1",children:E(v).map(K=>{const le=y.some(X=>X.id===K.id);return e.jsxs("label",{className:`flex items-center gap-3 p-3 rounded-lg cursor-pointer transition-colors ${le?"bg-green-50 border border-green-200":"hover:bg-gray-50 border border-transparent"}`,children:[e.jsx("input",{type:"checkbox",checked:le,onChange:()=>R(K),className:"w-5 h-5 text-green-600 border-gray-300 rounded focus:ring-green-500"}),e.jsx("span",{className:le?"text-green-700 font-medium":"text-gray-700",children:K.name})]},K.id)})}):e.jsxs("div",{className:"p-8 text-center text-gray-500",children:[e.jsx("p",{children:"No subcategories"}),e.jsxs("button",{type:"button",onClick:()=>{const K=b.find(le=>le.id===v);K&&R(K)},className:"mt-3 px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 text-sm",children:['Select "',(q=_.find(K=>K.id===v))==null?void 0:q.name,'"']})]}):e.jsxs("div",{className:"p-8 text-center text-gray-400",children:[e.jsx(Ft,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),e.jsx("p",{children:"Select a category from the left"})]})})]})]})]}),s===3&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(Va,{className:"w-5 h-5 text-primary-600"}),e.jsx("h2",{className:"text-lg font-semibold",children:"Contact Information"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Business Email"}),e.jsx("input",{type:"email",value:g.email,onChange:K=>P("email",K.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",placeholder:"shop@example.com"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone Number"}),e.jsx("input",{type:"tel",value:g.phone,onChange:K=>P("phone",K.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",placeholder:"077123456"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"City"}),e.jsx("input",{type:"text",value:g.city,onChange:K=>P("city",K.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",placeholder:"Freetown"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Address"}),e.jsx("input",{type:"text",value:g.address,onChange:K=>P("address",K.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",placeholder:"123 Main Street"})]})]}),e.jsxs("div",{className:"mt-6 p-4 bg-gray-50 rounded-lg",children:[e.jsx("h3",{className:"font-medium text-gray-900 mb-3",children:"Summary"}),e.jsxs("div",{className:"flex items-start gap-4",children:[u&&e.jsx("img",{src:u,alt:"Business logo",className:"w-16 h-16 rounded-lg object-cover border border-gray-200"}),e.jsxs("div",{className:"flex-1 grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"Business Name"}),e.jsx("p",{className:"font-medium",children:g.name||"-"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"Categories"}),e.jsxs("p",{className:"font-medium",children:[y.length," selected"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"Email"}),e.jsx("p",{className:"font-medium",children:g.email||"-"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"Location"}),e.jsx("p",{className:"font-medium",children:g.city||"-"})]})]})]})]}),e.jsxs("div",{className:"mt-6 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[e.jsx("h3",{className:"font-medium text-blue-900 mb-2",children:"What happens next?"}),e.jsxs("ul",{className:"text-sm text-blue-700 space-y-1",children:[e.jsx("li",{children:"1. Your business is created and you get API keys instantly"}),e.jsx("li",{children:"2. Complete 2 test transactions in sandbox mode"}),e.jsx("li",{children:"3. Admin reviews and approves your business for live payments"}),e.jsx("li",{children:"4. Switch to live mode and start accepting real payments"})]})]})]}),e.jsxs("div",{className:"flex items-center justify-between mt-8 pt-6 border-t border-gray-200",children:[s>1?e.jsxs("button",{type:"button",onClick:T,className:"flex items-center gap-2 px-4 py-2 text-gray-600 hover:text-gray-900",children:[e.jsx(_s,{className:"w-4 h-4"}),"Back"]}):e.jsx("button",{type:"button",onClick:()=>t("/merchant/developer"),className:"flex items-center gap-2 px-4 py-2 text-gray-600 hover:text-gray-900",children:"Cancel"}),s<ux.length?e.jsxs("button",{type:"button",onClick:B,className:"flex items-center gap-2 px-6 py-3 bg-primary-600 text-white rounded-lg hover:bg-primary-700",children:["Continue",e.jsx(Lr,{className:"w-4 h-4"})]}):e.jsx("button",{type:"button",onClick:O,disabled:a,className:"flex items-center gap-2 px-6 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50",children:a?e.jsxs(e.Fragment,{children:[e.jsx(Ie,{className:"w-4 h-4 animate-spin"}),"Creating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(be,{className:"w-4 h-4"}),"Create Business"]})})]})]})]})})}function qde(){const[t,s]=h.useState([]),[r,a]=h.useState(!0),[n,i]=h.useState({totalRevenue:0,totalTransactions:0,activeShops:0,pendingApprovals:0}),l=At(),{isDeveloperMode:o,businessCount:c}=C0(),d=1,u=3,m=d,p=t.length<m;h.useEffect(()=>{x()},[]);const x=async()=>{try{const b=await Ai.getMyBusinesses();s(b);const j=b.filter(w=>w.approval_status==="APPROVED").length,v=b.filter(w=>w.approval_status==="PENDING").length;i({totalRevenue:0,totalTransactions:0,activeShops:j,pendingApprovals:v})}catch(b){console.error("Error fetching businesses:",b)}finally{a(!1)}},g=b=>{const j={PENDING:{color:"bg-yellow-100 text-yellow-700",icon:e.jsx(it,{className:"w-3.5 h-3.5"}),label:"Pending"},APPROVED:{color:"bg-green-100 text-green-700",icon:e.jsx(be,{className:"w-3.5 h-3.5"}),label:"Approved"},REJECTED:{color:"bg-red-100 text-red-700",icon:e.jsx(lt,{className:"w-3.5 h-3.5"}),label:"Rejected"},SUSPENDED:{color:"bg-gray-100 text-gray-700",icon:e.jsx(Lt,{className:"w-3.5 h-3.5"}),label:"Suspended"}},v=j[b]||j.PENDING;return e.jsxs("span",{className:`inline-flex items-center gap-1 px-2.5 py-1 rounded-full text-xs font-medium ${v.color}`,children:[v.icon,v.label]})},f=()=>{l(p?o?"/merchant/developer/create-business":"/merchant/create-business":"/merchant/upgrade")};return r?e.jsx(gs,{children:e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx(Ie,{className:"w-8 h-8 animate-spin text-green-600"})})}):e.jsx(gs,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"My Shops"}),e.jsx("p",{className:"text-gray-500",children:"Manage your businesses and view their performance"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[!p&&e.jsxs("button",{onClick:()=>l("/merchant/upgrade"),className:"px-4 py-2 bg-gradient-to-r from-amber-500 to-orange-500 text-white rounded-lg hover:from-amber-600 hover:to-orange-600 flex items-center gap-2 text-sm font-medium",children:[e.jsx(_g,{className:"w-4 h-4"}),"Upgrade for More"]}),e.jsx("button",{onClick:f,disabled:!p&&!o,className:`px-4 py-2 rounded-lg flex items-center gap-2 text-sm font-medium ${p?"bg-green-600 text-white hover:bg-green-700":"bg-gray-100 text-gray-400 cursor-not-allowed"}`,children:p?e.jsxs(e.Fragment,{children:[e.jsx(It,{className:"w-4 h-4"}),"Create Shop"]}):e.jsxs(e.Fragment,{children:[e.jsx(Xs,{className:"w-4 h-4"}),"Limit Reached"]})})]})]}),!p&&e.jsx(W,{className:"p-4 bg-gradient-to-r from-amber-50 to-orange-50 border-amber-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-amber-100 rounded-lg",children:e.jsx(_g,{className:"w-5 h-5 text-amber-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-amber-900",children:"Upgrade to Merchant+"}),e.jsxs("p",{className:"text-sm text-amber-700",children:["Create up to ",u," shops and unlock premium features"]})]})]}),e.jsx("button",{onClick:()=>l("/merchant/upgrade"),className:"px-4 py-2 bg-amber-600 text-white rounded-lg hover:bg-amber-700 text-sm font-medium",children:"Upgrade Now"})]})}),e.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsx(W,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:e.jsx(ua,{className:"w-5 h-5 text-green-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Total Shops"}),e.jsxs("p",{className:"text-xl font-bold text-gray-900",children:[t.length,"/",m]})]})]})}),e.jsx(W,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:e.jsx(be,{className:"w-5 h-5 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Active Shops"}),e.jsx("p",{className:"text-xl font-bold text-gray-900",children:n.activeShops})]})]})}),e.jsx(W,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-yellow-100 rounded-lg",children:e.jsx(it,{className:"w-5 h-5 text-yellow-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Pending Approval"}),e.jsx("p",{className:"text-xl font-bold text-gray-900",children:n.pendingApprovals})]})]})}),e.jsx(W,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-purple-100 rounded-lg",children:e.jsx(rr,{className:"w-5 h-5 text-purple-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Total Revenue"}),e.jsx("p",{className:"text-xl font-bold text-gray-900",children:"Le 0"})]})]})})]}),t.length===0?e.jsxs(W,{className:"p-8 text-center",children:[e.jsx(Ft,{className:"w-12 h-12 text-gray-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No shops yet"}),e.jsx("p",{className:"text-gray-500 mb-4 max-w-md mx-auto",children:"Create your first shop to start accepting payments and managing your business."}),e.jsxs("button",{onClick:f,className:"px-6 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 inline-flex items-center gap-2",children:[e.jsx(It,{className:"w-5 h-5"}),"Create Your First Shop"]})]}):e.jsx("div",{className:"space-y-4",children:t.map(b=>e.jsx(W,{className:"p-0 overflow-hidden hover:shadow-md transition-shadow",children:e.jsxs("div",{className:"flex flex-col sm:flex-row",children:[e.jsx("div",{className:"flex-1 p-5 cursor-pointer",onClick:()=>l(`/merchant/shops/${b.id}`),children:e.jsxs("div",{className:"flex items-start gap-4",children:[b.logo_url?e.jsx("img",{src:b.logo_url,alt:b.name,className:"w-14 h-14 rounded-xl object-cover"}):e.jsx("div",{className:"w-14 h-14 bg-green-100 rounded-xl flex items-center justify-center",children:e.jsx(Ft,{className:"w-7 h-7 text-green-600"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("h3",{className:"font-semibold text-gray-900 truncate",children:b.name}),g(b.approval_status)]}),e.jsx("p",{className:"text-sm text-gray-500 mb-2",children:b.slug}),b.description&&e.jsx("p",{className:"text-sm text-gray-600 line-clamp-1",children:b.description}),e.jsxs("div",{className:"flex items-center gap-4 mt-3 text-xs text-gray-500",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(ci,{className:"w-3.5 h-3.5"}),"0 transactions"]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(js,{className:"w-3.5 h-3.5"}),"Le 0 revenue"]}),e.jsx("span",{className:`flex items-center gap-1 ${b.is_live_mode?"text-green-600":"text-orange-600"}`,children:b.is_live_mode?"Live":"Test Mode"})]})]}),e.jsx(Vs,{className:"w-5 h-5 text-gray-400 hidden sm:block"})]})}),e.jsxs("div",{className:"flex sm:flex-col border-t sm:border-t-0 sm:border-l border-gray-100 bg-gray-50",children:[e.jsxs("button",{onClick:()=>l(`/merchant/shops/${b.id}`),className:"flex-1 sm:flex-none px-4 py-3 text-sm text-gray-700 hover:bg-gray-100 flex items-center justify-center gap-2",children:[e.jsx(Bc,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Dashboard"})]}),e.jsxs("button",{onClick:()=>l(`/merchant/shops/${b.id}/transactions`),className:"flex-1 sm:flex-none px-4 py-3 text-sm text-gray-700 hover:bg-gray-100 flex items-center justify-center gap-2 border-l sm:border-l-0 sm:border-t border-gray-100",children:[e.jsx(ci,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Transactions"})]}),e.jsxs("button",{onClick:()=>l(`/merchant/shops/${b.id}/disputes`),className:"flex-1 sm:flex-none px-4 py-3 text-sm text-gray-700 hover:bg-gray-100 flex items-center justify-center gap-2 border-l sm:border-l-0 sm:border-t border-gray-100",children:[e.jsx(Lt,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Disputes"})]}),e.jsxs("button",{onClick:()=>l(`/merchant/shops/${b.id}/settings`),className:"flex-1 sm:flex-none px-4 py-3 text-sm text-gray-700 hover:bg-gray-100 flex items-center justify-center gap-2 border-l sm:border-l-0 sm:border-t border-gray-100",children:[e.jsx(or,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Settings"})]})]})]})},b.id))}),o&&e.jsx(W,{className:"p-4 bg-indigo-50 border-indigo-200",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-indigo-100 rounded-lg",children:e.jsx(Fr,{className:"w-5 h-5 text-indigo-600"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-medium text-indigo-900",children:"Developer Mode Active"}),e.jsx("p",{className:"text-sm text-indigo-700",children:"Access the full Developer Portal for API keys, webhooks, and integration tools."})]}),e.jsx("button",{onClick:()=>l("/merchant/developer"),className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 text-sm font-medium",children:"Open Developer Portal"})]})})]})})}function Wde(){const[t,s]=h.useState(null),[r,a]=h.useState(!1),n=At(),i=[{id:"free",name:"Free",price:0,currency:"Le",period:"forever",description:"Perfect for getting started",shopLimit:1,features:["1 Business/Shop","Unlimited test transactions","2 trial live transactions","Basic analytics","Email support"]},{id:"merchant_plus",name:"Merchant+",price:150,currency:"Le",period:"month",description:"For growing businesses",shopLimit:3,popular:!0,features:["Up to 3 Businesses/Shops","Unlimited live transactions","Priority approval","Advanced analytics","Dispute management","Priority support","Custom branding","Webhook notifications"]},{id:"enterprise",name:"Enterprise",price:500,currency:"Le",period:"month",description:"For large operations",shopLimit:10,features:["Up to 10 Businesses/Shops","Unlimited live transactions","Instant approval","Real-time analytics","Advanced dispute management","Dedicated account manager","White-label solution","API priority access","Custom integrations","SLA guarantee"]}],l=async c=>{if(c==="free"){n("/merchant/shops");return}s(c),a(!0),setTimeout(()=>{a(!1),alert("Upgrade feature coming soon! Contact support for early access.")},2e3)},o=c=>c===0?"0":Number.isInteger(c)?c.toString():c.toFixed(2);return e.jsx(gs,{children:e.jsxs("div",{className:"max-w-5xl mx-auto space-y-8",children:[e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-2 bg-amber-100 text-amber-700 rounded-full text-sm font-medium mb-4",children:[e.jsx(_g,{className:"w-4 h-4"}),"Upgrade Your Account"]}),e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-3",children:"Choose the Right Plan for Your Business"}),e.jsx("p",{className:"text-gray-600 max-w-2xl mx-auto",children:"Unlock more shops, faster approvals, and premium features to grow your business"})]}),e.jsx("div",{className:"grid md:grid-cols-3 gap-6",children:i.map(c=>e.jsxs(W,{className:`relative p-6 ${c.popular?"border-2 border-amber-400 shadow-lg":"border border-gray-200"}`,children:[c.popular&&e.jsx("div",{className:"absolute -top-3 left-1/2 -translate-x-1/2",children:e.jsx("span",{className:"px-3 py-1 bg-amber-500 text-white text-xs font-bold rounded-full",children:"MOST POPULAR"})}),e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:c.name}),e.jsx("p",{className:"text-sm text-gray-500 mb-4",children:c.description}),e.jsxs("div",{className:"flex items-baseline justify-center gap-1",children:[e.jsx("span",{className:"text-sm text-gray-500",children:c.currency}),e.jsx("span",{className:"text-4xl font-bold text-gray-900",children:o(c.price)}),c.price>0&&e.jsxs("span",{className:"text-gray-500",children:["/",c.period]})]})]}),e.jsxs("div",{className:"flex items-center justify-center gap-2 mb-6 p-3 bg-gray-50 rounded-lg",children:[e.jsx(ua,{className:"w-5 h-5 text-gray-600"}),e.jsxs("span",{className:"font-medium text-gray-900",children:[c.shopLimit===10?"Up to 10":c.shopLimit," Shop",c.shopLimit>1?"s":""]})]}),e.jsx("ul",{className:"space-y-3 mb-6",children:c.features.map((d,u)=>e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx(Rs,{className:"w-5 h-5 text-green-500 flex-shrink-0 mt-0.5"}),e.jsx("span",{className:"text-sm text-gray-600",children:d})]},u))}),e.jsx("button",{onClick:()=>l(c.id),disabled:r&&t===c.id,className:`w-full py-3 rounded-lg font-medium flex items-center justify-center gap-2 transition-colors ${c.popular?"bg-amber-500 text-white hover:bg-amber-600":c.id==="free"?"bg-gray-100 text-gray-700 hover:bg-gray-200":"bg-gray-900 text-white hover:bg-gray-800"}`,children:r&&t===c.id?e.jsxs(e.Fragment,{children:[e.jsx(Ie,{className:"w-4 h-4 animate-spin"}),"Processing..."]}):c.id==="free"?"Current Plan":e.jsxs(e.Fragment,{children:["Upgrade Now",e.jsx(Lr,{className:"w-4 h-4"})]})})]},c.id))}),e.jsxs(W,{className:"p-6",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-6 text-center",children:"Why Upgrade to Merchant+?"}),e.jsxs("div",{className:"grid sm:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-12 h-12 bg-amber-100 rounded-xl flex items-center justify-center mx-auto mb-3",children:e.jsx(ua,{className:"w-6 h-6 text-amber-600"})}),e.jsx("h3",{className:"font-medium text-gray-900 mb-1",children:"Multiple Shops"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Create up to 3 separate businesses with independent branding"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-xl flex items-center justify-center mx-auto mb-3",children:e.jsx(ui,{className:"w-6 h-6 text-green-600"})}),e.jsx("h3",{className:"font-medium text-gray-900 mb-1",children:"Priority Approval"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Get your businesses approved faster with priority review"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-xl flex items-center justify-center mx-auto mb-3",children:e.jsx(Xt,{className:"w-6 h-6 text-blue-600"})}),e.jsx("h3",{className:"font-medium text-gray-900 mb-1",children:"Dispute Management"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Handle customer disputes directly from your dashboard"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-12 h-12 bg-purple-100 rounded-xl flex items-center justify-center mx-auto mb-3",children:e.jsx(Bc,{className:"w-6 h-6 text-purple-600"})}),e.jsx("h3",{className:"font-medium text-gray-900 mb-1",children:"Advanced Analytics"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Deep insights into your business performance"})]})]})]}),e.jsxs(W,{className:"p-6",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-6",children:"Frequently Asked Questions"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-gray-900 mb-1",children:"Can I downgrade later?"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Yes, you can downgrade at any time. Your additional shops will become read-only until you upgrade again."})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-gray-900 mb-1",children:"What payment methods are accepted?"}),e.jsx("p",{className:"text-sm text-gray-600",children:"We accept Mobile Money (Orange Money, Africell), bank transfers, and Peeap wallet payments."})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-gray-900 mb-1",children:"Is there a contract?"}),e.jsx("p",{className:"text-sm text-gray-600",children:"No long-term contracts. You can cancel anytime and your subscription will remain active until the end of the billing period."})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-gray-900 mb-1",children:"What happens to my data if I cancel?"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Your data is retained for 30 days after cancellation. You can export all your transaction history before canceling."})]})]})]}),e.jsxs("div",{className:"text-center py-8",children:[e.jsx("p",{className:"text-gray-600 mb-2",children:"Need a custom plan for your business?"}),e.jsx("a",{href:"mailto:enterprise@peeap.com",className:"text-amber-600 hover:text-amber-700 font-medium",children:"Contact our sales team"})]})]})})}const mx={SLE:{code:"SLE",symbol:"Le",name:"Sierra Leonean Leone",decimalPlaces:0,minorUnit:1,minAmount:1},SLL:{code:"SLL",symbol:"Le",name:"Sierra Leonean Leone (old)",decimalPlaces:0,minorUnit:1,minAmount:1},USD:{code:"USD",symbol:"$",name:"US Dollar",decimalPlaces:2,minorUnit:100,minAmount:.01}};function zde(t){if(!t)return mx.SLE;const s=t.toUpperCase();return s in mx?mx[s]:mx.SLE}function Ri(t,s,r){const a=zde(s),{showSymbol:n=!0,showCode:i=!1,alwaysShowDecimals:l=!1}={};let o;l||!Number.isInteger(t)?o=t.toFixed(a.decimalPlaces):o=t.toString();let c=o;return n&&(c=`${a.symbol} ${c}`),i&&(c=`${c} ${a.code}`),c}function Gde(){const{businessId:t}=hi(),s=At(),[r,a]=h.useState(null),[n,i]=h.useState(!0),[l,o]=h.useState(!1),[c,d]=h.useState([]),[u,m]=h.useState([]),[p,x]=h.useState({totalRevenue:0,totalTransactions:0,successRate:0,pendingDisputes:0});h.useEffect(()=>{t&&g()},[t]);const g=async()=>{if(t)try{const{data:v,error:w}=await U.from("merchant_businesses").select("*").eq("id",t).single();if(w)throw w;a(v);const{data:y}=await U.from("transactions").select("*").eq("business_id",t).order("created_at",{ascending:!1}).limit(5);d(y||[]);const{data:C}=await U.from("disputes").select("*").eq("business_id",t).order("created_at",{ascending:!1}).limit(5);m(C||[]);const{data:S}=await U.from("transactions").select("amount, status").eq("business_id",t);if(S){const _=S.reduce((A,R)=>A+(R.amount||0),0),E=S.filter(A=>A.status==="completed"||A.status==="success").length;x({totalRevenue:_,totalTransactions:S.length,successRate:S.length>0?E/S.length*100:0,pendingDisputes:(C||[]).filter(A=>A.status==="pending"||A.status==="open").length})}}catch(v){console.error("Error fetching business data:",v)}finally{i(!1)}},f=v=>{const w={PENDING:{color:"bg-yellow-100 text-yellow-700",icon:e.jsx(it,{className:"w-3.5 h-3.5"}),label:"Pending"},APPROVED:{color:"bg-green-100 text-green-700",icon:e.jsx(be,{className:"w-3.5 h-3.5"}),label:"Approved"},REJECTED:{color:"bg-red-100 text-red-700",icon:e.jsx(lt,{className:"w-3.5 h-3.5"}),label:"Rejected"},SUSPENDED:{color:"bg-gray-100 text-gray-700",icon:e.jsx(Lt,{className:"w-3.5 h-3.5"}),label:"Suspended"}},y=w[v]||w.PENDING;return e.jsxs("span",{className:`inline-flex items-center gap-1 px-2.5 py-1 rounded-full text-xs font-medium ${y.color}`,children:[y.icon,y.label]})},b=v=>{navigator.clipboard.writeText(v),o(!0),setTimeout(()=>o(!1),2e3)},j=v=>new Date(v).toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"});return n?e.jsx(gs,{children:e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx(Ie,{className:"w-8 h-8 animate-spin text-green-600"})})}):r?e.jsx(gs,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("button",{onClick:()=>s("/merchant/shops"),className:"p-2 hover:bg-gray-100 rounded-lg mt-1",children:e.jsx(_s,{className:"w-5 h-5 text-gray-600"})}),e.jsxs("div",{className:"flex items-start gap-4",children:[r.logo_url?e.jsx("img",{src:r.logo_url,alt:r.name,className:"w-16 h-16 rounded-xl object-cover"}):e.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-xl flex items-center justify-center",children:e.jsx(Ft,{className:"w-8 h-8 text-green-600"})}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-3 mb-1",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:r.name}),f(r.approval_status),e.jsx("span",{className:`text-xs px-2 py-0.5 rounded ${r.is_live_mode?"bg-green-100 text-green-700":"bg-orange-100 text-orange-700"}`,children:r.is_live_mode?"Live":"Test Mode"})]}),e.jsx("p",{className:"text-gray-500",children:r.description||"No description"}),e.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[e.jsx("code",{className:"text-xs bg-gray-100 px-2 py-1 rounded font-mono",children:r.id}),e.jsx("button",{onClick:()=>b(r.id),className:"p-1 hover:bg-gray-100 rounded",title:"Copy Business ID",children:l?e.jsx(Rs,{className:"w-3.5 h-3.5 text-green-600"}):e.jsx(vs,{className:"w-3.5 h-3.5 text-gray-400"})})]})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(Qe,{to:`/merchant/developer/${r.id}`,className:"px-4 py-2 bg-indigo-100 text-indigo-700 rounded-lg hover:bg-indigo-200 flex items-center gap-2 text-sm font-medium",children:[e.jsx(Ir,{className:"w-4 h-4"}),"Developer"]}),e.jsxs(Qe,{to:`/merchant/shops/${r.id}/settings`,className:"px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 flex items-center gap-2 text-sm font-medium",children:[e.jsx(or,{className:"w-4 h-4"}),"Settings"]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsx(W,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:e.jsx(js,{className:"w-5 h-5 text-green-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Total Revenue"}),e.jsx("p",{className:"text-xl font-bold text-gray-900",children:Ri(p.totalRevenue)})]})]})}),e.jsx(W,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:e.jsx(ci,{className:"w-5 h-5 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Transactions"}),e.jsx("p",{className:"text-xl font-bold text-gray-900",children:p.totalTransactions})]})]})}),e.jsx(W,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-purple-100 rounded-lg",children:e.jsx(rr,{className:"w-5 h-5 text-purple-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Success Rate"}),e.jsxs("p",{className:"text-xl font-bold text-gray-900",children:[p.successRate.toFixed(1),"%"]})]})]})}),e.jsx(W,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-yellow-100 rounded-lg",children:e.jsx(Lt,{className:"w-5 h-5 text-yellow-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Pending Disputes"}),e.jsx("p",{className:"text-xl font-bold text-gray-900",children:p.pendingDisputes})]})]})})]}),e.jsxs("div",{className:"grid sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs(Qe,{to:`/merchant/shops/${r.id}/transactions`,className:"p-4 bg-white border border-gray-200 rounded-xl hover:shadow-md transition-shadow flex items-center gap-4",children:[e.jsx("div",{className:"p-3 bg-blue-100 rounded-lg",children:e.jsx(ci,{className:"w-6 h-6 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-gray-900",children:"Transactions"}),e.jsx("p",{className:"text-sm text-gray-500",children:"View all payments"})]})]}),e.jsxs(Qe,{to:`/merchant/shops/${r.id}/disputes`,className:"p-4 bg-white border border-gray-200 rounded-xl hover:shadow-md transition-shadow flex items-center gap-4",children:[e.jsx("div",{className:"p-3 bg-yellow-100 rounded-lg",children:e.jsx(Lt,{className:"w-6 h-6 text-yellow-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-gray-900",children:"Disputes"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Manage customer issues"})]})]}),e.jsxs(Qe,{to:`/merchant/developer/${r.id}`,className:"p-4 bg-white border border-gray-200 rounded-xl hover:shadow-md transition-shadow flex items-center gap-4",children:[e.jsx("div",{className:"p-3 bg-indigo-100 rounded-lg",children:e.jsx(Ir,{className:"w-6 h-6 text-indigo-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-gray-900",children:"Integration"}),e.jsx("p",{className:"text-sm text-gray-500",children:"API keys & SDK"})]})]}),e.jsxs(Qe,{to:`/merchant/shops/${r.id}/settings`,className:"p-4 bg-white border border-gray-200 rounded-xl hover:shadow-md transition-shadow flex items-center gap-4",children:[e.jsx("div",{className:"p-3 bg-gray-100 rounded-lg",children:e.jsx(or,{className:"w-6 h-6 text-gray-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-gray-900",children:"Settings"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Configure shop"})]})]})]}),e.jsxs("div",{className:"grid lg:grid-cols-2 gap-6",children:[e.jsxs(W,{className:"p-0",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-100",children:[e.jsx("h2",{className:"font-semibold text-gray-900",children:"Recent Transactions"}),e.jsxs(Qe,{to:`/merchant/shops/${r.id}/transactions`,className:"text-sm text-green-600 hover:text-green-700 flex items-center gap-1",children:["View All",e.jsx(Fr,{className:"w-3.5 h-3.5"})]})]}),e.jsx("div",{className:"divide-y divide-gray-100",children:c.length===0?e.jsxs("div",{className:"p-8 text-center",children:[e.jsx(S0,{className:"w-8 h-8 text-gray-300 mx-auto mb-2"}),e.jsx("p",{className:"text-sm text-gray-500",children:"No transactions yet"})]}):c.map(v=>e.jsxs("div",{className:"p-4 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:v.customer_email||"Customer"}),e.jsx("p",{className:"text-xs text-gray-500",children:j(v.created_at)})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"font-semibold text-gray-900",children:Ri(v.amount)}),e.jsx("span",{className:`text-xs px-2 py-0.5 rounded ${v.status==="completed"||v.status==="success"?"bg-green-100 text-green-700":v.status==="pending"?"bg-yellow-100 text-yellow-700":"bg-red-100 text-red-700"}`,children:v.status})]})]},v.id))})]}),e.jsxs(W,{className:"p-0",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-100",children:[e.jsx("h2",{className:"font-semibold text-gray-900",children:"Recent Disputes"}),e.jsxs(Qe,{to:`/merchant/shops/${r.id}/disputes`,className:"text-sm text-green-600 hover:text-green-700 flex items-center gap-1",children:["View All",e.jsx(Fr,{className:"w-3.5 h-3.5"})]})]}),e.jsx("div",{className:"divide-y divide-gray-100",children:u.length===0?e.jsxs("div",{className:"p-8 text-center",children:[e.jsx(be,{className:"w-8 h-8 text-green-300 mx-auto mb-2"}),e.jsx("p",{className:"text-sm text-gray-500",children:"No disputes"})]}):u.map(v=>e.jsxs("div",{className:"p-4 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:v.reason||"Dispute"}),e.jsx("p",{className:"text-xs text-gray-500",children:j(v.created_at)})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"font-semibold text-gray-900",children:Ri(v.amount)}),e.jsx("span",{className:`text-xs px-2 py-0.5 rounded ${v.status==="resolved"||v.status==="closed"?"bg-green-100 text-green-700":v.status==="pending"||v.status==="open"?"bg-yellow-100 text-yellow-700":"bg-red-100 text-red-700"}`,children:v.status})]})]},v.id))})]})]})]})}):e.jsx(gs,{children:e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Ft,{className:"w-12 h-12 text-gray-300 mx-auto mb-4"}),e.jsx("h2",{className:"text-lg font-medium text-gray-900 mb-2",children:"Business not found"}),e.jsx("p",{className:"text-gray-500 mb-4",children:"The business you're looking for doesn't exist or you don't have access."}),e.jsx("button",{onClick:()=>s("/merchant/shops"),className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",children:"Back to My Shops"})]})})}function Kde(){const{businessId:t}=hi(),s=At(),[r,a]=h.useState(null),[n,i]=h.useState([]),[l,o]=h.useState(!0),[c,d]=h.useState(""),[u,m]=h.useState("all"),[p,x]=h.useState("all"),[g,f]=h.useState(!1),[b,j]=h.useState(null),[v,w]=h.useState({total:0,completed:0,pending:0,failed:0,totalAmount:0});h.useEffect(()=>{t&&y()},[t]);const y=async()=>{if(t)try{const{data:A,error:R}=await U.from("merchant_businesses").select("*").eq("id",t).single();if(R)throw R;a(A);const{data:I,error:N}=await U.from("transactions").select("*").eq("business_id",t).order("created_at",{ascending:!1});if(N)throw N;i(I||[]);const P=I||[];w({total:P.length,completed:P.filter(k=>k.status==="completed"||k.status==="success").length,pending:P.filter(k=>k.status==="pending").length,failed:P.filter(k=>k.status==="failed"||k.status==="cancelled").length,totalAmount:P.reduce((k,D)=>k+(D.amount||0),0)})}catch(A){console.error("Error fetching data:",A)}finally{o(!1)}},C=A=>{const R={completed:{color:"bg-green-100 text-green-700",icon:e.jsx(be,{className:"w-3.5 h-3.5"}),label:"Completed"},success:{color:"bg-green-100 text-green-700",icon:e.jsx(be,{className:"w-3.5 h-3.5"}),label:"Success"},pending:{color:"bg-yellow-100 text-yellow-700",icon:e.jsx(it,{className:"w-3.5 h-3.5"}),label:"Pending"},processing:{color:"bg-blue-100 text-blue-700",icon:e.jsx(vt,{className:"w-3.5 h-3.5"}),label:"Processing"},failed:{color:"bg-red-100 text-red-700",icon:e.jsx(lt,{className:"w-3.5 h-3.5"}),label:"Failed"},cancelled:{color:"bg-gray-100 text-gray-700",icon:e.jsx(lt,{className:"w-3.5 h-3.5"}),label:"Cancelled"},refunded:{color:"bg-purple-100 text-purple-700",icon:e.jsx(vt,{className:"w-3.5 h-3.5"}),label:"Refunded"}},I=R[A]||R.pending;return e.jsxs("span",{className:`inline-flex items-center gap-1 px-2.5 py-1 rounded-full text-xs font-medium ${I.color}`,children:[I.icon,I.label]})},S=A=>new Date(A).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),_=n.filter(A=>{var R,I,N;if(c){const P=c.toLowerCase();if(!(A.id.toLowerCase().includes(P)||((R=A.customer_email)==null?void 0:R.toLowerCase().includes(P))||((I=A.customer_name)==null?void 0:I.toLowerCase().includes(P))||((N=A.reference)==null?void 0:N.toLowerCase().includes(P))))return!1}if(u!=="all"&&A.status!==u)return!1;if(p!=="all"){const P=new Date(A.created_at),k=new Date;if(p==="today"){const D=new Date(k.getFullYear(),k.getMonth(),k.getDate());if(P<D)return!1}else if(p==="week"){const D=new Date(k.getTime()-6048e5);if(P<D)return!1}else if(p==="month"){const D=new Date(k.getTime()-2592e6);if(P<D)return!1}}return!0}),E=()=>{const A=_.map($=>({ID:$.id,Amount:$.amount,Currency:$.currency||"SLE",Status:$.status,Customer:$.customer_email||$.customer_name||"N/A",Reference:$.reference||"N/A","Payment Method":$.payment_method||"N/A",Date:S($.created_at)})),R=Object.keys(A[0]||{}).join(","),I=A.map($=>Object.values($).join(",")).join(`
`),N=`${R}
${I}`,P=new Blob([N],{type:"text/csv"}),k=URL.createObjectURL(P),D=document.createElement("a");D.href=k,D.download=`transactions-${(r==null?void 0:r.slug)||t}-${new Date().toISOString().split("T")[0]}.csv`,D.click()};return l?e.jsx(gs,{children:e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx(Ie,{className:"w-8 h-8 animate-spin text-green-600"})})}):r?e.jsx(gs,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("button",{onClick:()=>s(`/merchant/shops/${t}`),className:"p-2 hover:bg-gray-100 rounded-lg",children:e.jsx(_s,{className:"w-5 h-5 text-gray-600"})}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-500 mb-1",children:[e.jsx(Qe,{to:"/merchant/shops",className:"hover:text-green-600",children:"My Shops"}),e.jsx("span",{children:"/"}),e.jsx(Qe,{to:`/merchant/shops/${t}`,className:"hover:text-green-600",children:r.name}),e.jsx("span",{children:"/"}),e.jsx("span",{className:"text-gray-900",children:"Transactions"})]}),e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Transactions"})]})]}),e.jsxs("button",{onClick:E,disabled:_.length===0,className:"px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 flex items-center gap-2 text-sm font-medium disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(ws,{className:"w-4 h-4"}),"Export CSV"]})]}),e.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-5 gap-4",children:[e.jsxs(W,{className:"p-4",children:[e.jsx("div",{className:"text-sm text-gray-500 mb-1",children:"Total Transactions"}),e.jsx("div",{className:"text-2xl font-bold text-gray-900",children:v.total})]}),e.jsxs(W,{className:"p-4",children:[e.jsx("div",{className:"text-sm text-gray-500 mb-1",children:"Completed"}),e.jsx("div",{className:"text-2xl font-bold text-green-600",children:v.completed})]}),e.jsxs(W,{className:"p-4",children:[e.jsx("div",{className:"text-sm text-gray-500 mb-1",children:"Pending"}),e.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:v.pending})]}),e.jsxs(W,{className:"p-4",children:[e.jsx("div",{className:"text-sm text-gray-500 mb-1",children:"Failed"}),e.jsx("div",{className:"text-2xl font-bold text-red-600",children:v.failed})]}),e.jsxs(W,{className:"p-4",children:[e.jsx("div",{className:"text-sm text-gray-500 mb-1",children:"Total Amount"}),e.jsx("div",{className:"text-2xl font-bold text-gray-900",children:Ri(v.totalAmount)})]})]}),e.jsx(W,{className:"p-4",children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(ts,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search by ID, email, reference...",value:c,onChange:A=>d(A.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent"})]}),e.jsxs("select",{value:u,onChange:A=>m(A.target.value),className:"px-4 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"completed",children:"Completed"}),e.jsx("option",{value:"success",children:"Success"}),e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"processing",children:"Processing"}),e.jsx("option",{value:"failed",children:"Failed"}),e.jsx("option",{value:"cancelled",children:"Cancelled"}),e.jsx("option",{value:"refunded",children:"Refunded"})]}),e.jsxs("select",{value:p,onChange:A=>x(A.target.value),className:"px-4 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500",children:[e.jsx("option",{value:"all",children:"All Time"}),e.jsx("option",{value:"today",children:"Today"}),e.jsx("option",{value:"week",children:"This Week"}),e.jsx("option",{value:"month",children:"This Month"})]})]})}),e.jsx(W,{className:"p-0 overflow-hidden",children:_.length===0?e.jsxs("div",{className:"p-12 text-center",children:[e.jsx(ci,{className:"w-12 h-12 text-gray-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No transactions found"}),e.jsx("p",{className:"text-gray-500",children:n.length===0?"This business has no transactions yet.":"No transactions match your filters."})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Transaction"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Customer"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Amount"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),e.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-100",children:_.map(A=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-4 py-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`p-2 rounded-lg ${A.type==="payout"?"bg-red-100":"bg-green-100"}`,children:A.type==="payout"?e.jsx(xs,{className:"w-4 h-4 text-red-600"}):e.jsx(la,{className:"w-4 h-4 text-green-600"})}),e.jsxs("div",{children:[e.jsxs("p",{className:"font-medium text-gray-900 font-mono text-sm",children:[A.id.substring(0,8),"..."]}),A.reference&&e.jsxs("p",{className:"text-xs text-gray-500",children:["Ref: ",A.reference]})]})]})}),e.jsxs("td",{className:"px-4 py-4",children:[e.jsx("p",{className:"text-sm text-gray-900",children:A.customer_name||A.customer_email||"N/A"}),A.customer_name&&A.customer_email&&e.jsx("p",{className:"text-xs text-gray-500",children:A.customer_email})]}),e.jsxs("td",{className:"px-4 py-4",children:[e.jsx("p",{className:"font-semibold text-gray-900",children:Ri(A.amount,A.currency)}),A.payment_method&&e.jsx("p",{className:"text-xs text-gray-500",children:A.payment_method})]}),e.jsx("td",{className:"px-4 py-4",children:C(A.status)}),e.jsx("td",{className:"px-4 py-4",children:e.jsx("p",{className:"text-sm text-gray-900",children:S(A.created_at)})}),e.jsx("td",{className:"px-4 py-4 text-right",children:e.jsx("button",{onClick:()=>j(A),className:"p-2 hover:bg-gray-100 rounded-lg text-gray-600",title:"View Details",children:e.jsx(es,{className:"w-4 h-4"})})})]},A.id))})]})})}),b&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-xl max-w-lg w-full mx-4 max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Transaction Details"}),e.jsx("button",{onClick:()=>j(null),className:"p-2 hover:bg-gray-100 rounded-lg",children:e.jsx(lt,{className:"w-5 h-5 text-gray-500"})})]}),e.jsxs("div",{className:"p-4 space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-500",children:"Status"}),C(b.status)]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-500",children:"Amount"}),e.jsx("span",{className:"font-semibold text-gray-900",children:Ri(b.amount,b.currency)})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-500",children:"Transaction ID"}),e.jsx("code",{className:"text-sm bg-gray-100 px-2 py-1 rounded font-mono",children:b.id})]}),b.reference&&e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-500",children:"Reference"}),e.jsx("span",{className:"text-gray-900",children:b.reference})]}),b.customer_email&&e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-500",children:"Customer Email"}),e.jsx("span",{className:"text-gray-900",children:b.customer_email})]}),b.customer_name&&e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-500",children:"Customer Name"}),e.jsx("span",{className:"text-gray-900",children:b.customer_name})]}),b.payment_method&&e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-500",children:"Payment Method"}),e.jsx("span",{className:"text-gray-900",children:b.payment_method})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-500",children:"Created"}),e.jsx("span",{className:"text-gray-900",children:S(b.created_at)})]}),b.completed_at&&e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-500",children:"Completed"}),e.jsx("span",{className:"text-gray-900",children:S(b.completed_at)})]}),b.metadata&&Object.keys(b.metadata).length>0&&e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500 block mb-2",children:"Metadata"}),e.jsx("pre",{className:"text-xs bg-gray-100 p-3 rounded-lg overflow-x-auto",children:JSON.stringify(b.metadata,null,2)})]})]})]})})]})}):e.jsx(gs,{children:e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Ft,{className:"w-12 h-12 text-gray-300 mx-auto mb-4"}),e.jsx("h2",{className:"text-lg font-medium text-gray-900 mb-2",children:"Business not found"}),e.jsx("button",{onClick:()=>s("/merchant/shops"),className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",children:"Back to My Shops"})]})})}function Hde(){const{businessId:t}=hi(),s=At(),[r,a]=h.useState(null),[n,i]=h.useState([]),[l,o]=h.useState(!0),[c,d]=h.useState(""),[u,m]=h.useState("all"),[p,x]=h.useState(null),[g,f]=h.useState(!1),[b,j]=h.useState(""),[v,w]=h.useState(!1),[y,C]=h.useState({total:0,open:0,pending:0,resolved:0,lost:0,totalAmount:0});h.useEffect(()=>{t&&S()},[t]);const S=async()=>{if(t)try{const{data:N,error:P}=await U.from("merchant_businesses").select("*").eq("id",t).single();if(P)throw P;a(N);const{data:k,error:D}=await U.from("disputes").select("*").eq("business_id",t).order("created_at",{ascending:!1});if(D)console.log("Disputes table not available:",D),i([]);else{i(k||[]);const $=k||[];C({total:$.length,open:$.filter(L=>L.status==="open").length,pending:$.filter(L=>L.status==="pending"||L.status==="under_review").length,resolved:$.filter(L=>L.status==="resolved"||L.status==="won").length,lost:$.filter(L=>L.status==="lost"||L.status==="closed").length,totalAmount:$.reduce((L,B)=>L+(B.amount||0),0)})}}catch(N){console.error("Error fetching data:",N)}finally{o(!1)}},_=N=>{const P={open:{color:"bg-red-100 text-red-700",icon:e.jsx(Lt,{className:"w-3.5 h-3.5"}),label:"Open"},pending:{color:"bg-yellow-100 text-yellow-700",icon:e.jsx(it,{className:"w-3.5 h-3.5"}),label:"Pending"},under_review:{color:"bg-blue-100 text-blue-700",icon:e.jsx(es,{className:"w-3.5 h-3.5"}),label:"Under Review"},resolved:{color:"bg-green-100 text-green-700",icon:e.jsx(be,{className:"w-3.5 h-3.5"}),label:"Resolved"},won:{color:"bg-green-100 text-green-700",icon:e.jsx(be,{className:"w-3.5 h-3.5"}),label:"Won"},lost:{color:"bg-gray-100 text-gray-700",icon:e.jsx(ft,{className:"w-3.5 h-3.5"}),label:"Lost"},closed:{color:"bg-gray-100 text-gray-700",icon:e.jsx(lt,{className:"w-3.5 h-3.5"}),label:"Closed"}},k=P[N]||P.pending;return e.jsxs("span",{className:`inline-flex items-center gap-1 px-2.5 py-1 rounded-full text-xs font-medium ${k.color}`,children:[k.icon,k.label]})},E=N=>({duplicate:"Duplicate Charge",fraudulent:"Fraudulent Transaction",product_not_received:"Product Not Received",product_unacceptable:"Product Unacceptable",subscription_canceled:"Subscription Canceled",unrecognized:"Unrecognized Charge",credit_not_processed:"Credit Not Processed",general:"General Dispute",other:"Other"})[N]||N,A=N=>new Date(N).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),R=async()=>{if(!(!p||!b.trim())){w(!0);try{const{error:N}=await U.from("disputes").update({merchant_response:b,status:"under_review",updated_at:new Date().toISOString()}).eq("id",p.id);if(N)throw N;await S(),f(!1),j(""),x(null)}catch(N){console.error("Error submitting response:",N),alert("Failed to submit response. Please try again.")}finally{w(!1)}}},I=n.filter(N=>{var P,k,D,$;if(c){const L=c.toLowerCase();if(!(N.id.toLowerCase().includes(L)||((P=N.transaction_id)==null?void 0:P.toLowerCase().includes(L))||((k=N.customer_email)==null?void 0:k.toLowerCase().includes(L))||((D=N.customer_name)==null?void 0:D.toLowerCase().includes(L))||(($=N.reason)==null?void 0:$.toLowerCase().includes(L))))return!1}return!(u!=="all"&&N.status!==u)});return l?e.jsx(gs,{children:e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx(Ie,{className:"w-8 h-8 animate-spin text-green-600"})})}):r?e.jsx(gs,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("button",{onClick:()=>s(`/merchant/shops/${t}`),className:"p-2 hover:bg-gray-100 rounded-lg",children:e.jsx(_s,{className:"w-5 h-5 text-gray-600"})}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-500 mb-1",children:[e.jsx(Qe,{to:"/merchant/shops",className:"hover:text-green-600",children:"My Shops"}),e.jsx("span",{children:"/"}),e.jsx(Qe,{to:`/merchant/shops/${t}`,className:"hover:text-green-600",children:r.name}),e.jsx("span",{children:"/"}),e.jsx("span",{className:"text-gray-900",children:"Disputes"})]}),e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Disputes"})]})]}),e.jsxs("button",{onClick:S,className:"px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 flex items-center gap-2 text-sm font-medium",children:[e.jsx(vt,{className:"w-4 h-4"}),"Refresh"]})]}),e.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-6 gap-4",children:[e.jsxs(W,{className:"p-4",children:[e.jsx("div",{className:"text-sm text-gray-500 mb-1",children:"Total Disputes"}),e.jsx("div",{className:"text-2xl font-bold text-gray-900",children:y.total})]}),e.jsxs(W,{className:"p-4",children:[e.jsx("div",{className:"text-sm text-gray-500 mb-1",children:"Open"}),e.jsx("div",{className:"text-2xl font-bold text-red-600",children:y.open})]}),e.jsxs(W,{className:"p-4",children:[e.jsx("div",{className:"text-sm text-gray-500 mb-1",children:"Pending"}),e.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:y.pending})]}),e.jsxs(W,{className:"p-4",children:[e.jsx("div",{className:"text-sm text-gray-500 mb-1",children:"Resolved"}),e.jsx("div",{className:"text-2xl font-bold text-green-600",children:y.resolved})]}),e.jsxs(W,{className:"p-4",children:[e.jsx("div",{className:"text-sm text-gray-500 mb-1",children:"Lost"}),e.jsx("div",{className:"text-2xl font-bold text-gray-600",children:y.lost})]}),e.jsxs(W,{className:"p-4",children:[e.jsx("div",{className:"text-sm text-gray-500 mb-1",children:"Total Amount"}),e.jsx("div",{className:"text-2xl font-bold text-gray-900",children:Ri(y.totalAmount)})]})]}),e.jsx(W,{className:"p-4",children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(ts,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search by ID, email, reason...",value:c,onChange:N=>d(N.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent"})]}),e.jsxs("select",{value:u,onChange:N=>m(N.target.value),className:"px-4 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"open",children:"Open"}),e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"under_review",children:"Under Review"}),e.jsx("option",{value:"resolved",children:"Resolved"}),e.jsx("option",{value:"won",children:"Won"}),e.jsx("option",{value:"lost",children:"Lost"}),e.jsx("option",{value:"closed",children:"Closed"})]})]})}),e.jsx(W,{className:"p-0 overflow-hidden",children:I.length===0?e.jsxs("div",{className:"p-12 text-center",children:[e.jsx(be,{className:"w-12 h-12 text-green-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:n.length===0?"No disputes":"No disputes match your filters"}),e.jsx("p",{className:"text-gray-500",children:n.length===0?"Great news! This business has no disputes.":"Try adjusting your filters."})]}):e.jsx("div",{className:"divide-y divide-gray-100",children:I.map(N=>e.jsx("div",{className:"p-4 hover:bg-gray-50 cursor-pointer",onClick:()=>x(N),children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:`p-2 rounded-lg ${N.status==="open"||N.status==="pending"?"bg-red-100":N.status==="resolved"||N.status==="won"?"bg-green-100":"bg-gray-100"}`,children:e.jsx(Lt,{className:`w-5 h-5 ${N.status==="open"||N.status==="pending"?"text-red-600":N.status==="resolved"||N.status==="won"?"text-green-600":"text-gray-600"}`})}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("h3",{className:"font-medium text-gray-900",children:E(N.reason)}),_(N.status)]}),e.jsx("p",{className:"text-sm text-gray-500 mb-2",children:N.description||"No description provided"}),e.jsxs("div",{className:"flex items-center gap-4 text-xs text-gray-500",children:[e.jsxs("span",{children:["ID: ",N.id.substring(0,8),"..."]}),N.customer_email&&e.jsxs("span",{children:["Customer: ",N.customer_email]}),e.jsx("span",{children:A(N.created_at)})]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"font-semibold text-gray-900",children:Ri(N.amount,N.currency)}),N.merchant_response&&e.jsxs("span",{className:"text-xs text-green-600 flex items-center gap-1 justify-end mt-1",children:[e.jsx(Ao,{className:"w-3 h-3"}),"Responded"]})]})]})},N.id))})}),p&&!g&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-xl max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Dispute Details"}),e.jsx("button",{onClick:()=>x(null),className:"p-2 hover:bg-gray-100 rounded-lg",children:e.jsx(lt,{className:"w-5 h-5 text-gray-500"})})]}),e.jsxs("div",{className:"p-4 space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-500",children:"Status"}),_(p.status)]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-500",children:"Reason"}),e.jsx("span",{className:"font-medium text-gray-900",children:E(p.reason)})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-500",children:"Amount"}),e.jsx("span",{className:"font-semibold text-gray-900",children:Ri(p.amount,p.currency)})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-500",children:"Dispute ID"}),e.jsx("code",{className:"text-sm bg-gray-100 px-2 py-1 rounded font-mono",children:p.id})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-500",children:"Transaction ID"}),e.jsx("code",{className:"text-sm bg-gray-100 px-2 py-1 rounded font-mono",children:p.transaction_id})]}),p.customer_email&&e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-500",children:"Customer Email"}),e.jsx("span",{className:"text-gray-900",children:p.customer_email})]}),p.customer_name&&e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-500",children:"Customer Name"}),e.jsx("span",{className:"text-gray-900",children:p.customer_name})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-500",children:"Created"}),e.jsx("span",{className:"text-gray-900",children:A(p.created_at)})]}),p.resolved_at&&e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-500",children:"Resolved"}),e.jsx("span",{className:"text-gray-900",children:A(p.resolved_at)})]}),p.description&&e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500 block mb-2",children:"Description"}),e.jsx("p",{className:"text-gray-900 bg-gray-50 p-3 rounded-lg",children:p.description})]}),p.merchant_response&&e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500 block mb-2",children:"Your Response"}),e.jsx("p",{className:"text-gray-900 bg-green-50 p-3 rounded-lg border border-green-200",children:p.merchant_response})]}),p.resolution&&e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500 block mb-2",children:"Resolution"}),e.jsx("p",{className:"text-gray-900 bg-blue-50 p-3 rounded-lg border border-blue-200",children:p.resolution})]}),(p.status==="open"||p.status==="pending")&&!p.merchant_response&&e.jsx("div",{className:"flex gap-3 pt-4 border-t border-gray-200",children:e.jsxs("button",{onClick:()=>f(!0),className:"flex-1 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 flex items-center justify-center gap-2",children:[e.jsx(Ao,{className:"w-4 h-4"}),"Submit Response"]})})]})]})}),g&&p&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-xl max-w-lg w-full mx-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Submit Response"}),e.jsx("button",{onClick:()=>{f(!1),j("")},className:"p-2 hover:bg-gray-100 rounded-lg",children:e.jsx(lt,{className:"w-5 h-5 text-gray-500"})})]}),e.jsxs("div",{className:"p-4 space-y-4",children:[e.jsxs("div",{className:"bg-gray-50 p-3 rounded-lg",children:[e.jsxs("p",{className:"text-sm text-gray-500 mb-1",children:["Dispute: ",E(p.reason)]}),e.jsx("p",{className:"font-semibold text-gray-900",children:Ri(p.amount,p.currency)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Your Response"}),e.jsx("textarea",{value:b,onChange:N=>j(N.target.value),placeholder:"Explain why this dispute should be resolved in your favor. Include any relevant details about the transaction, delivery confirmation, or communication with the customer.",rows:5,className:"w-full px-3 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500 resize-none"})]}),e.jsxs("div",{className:"bg-yellow-50 p-3 rounded-lg text-sm text-yellow-800",children:[e.jsx("strong",{children:"Note:"})," Once submitted, your response will be reviewed by our team. Provide as much detail as possible to support your case."]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>{f(!1),j("")},className:"flex-1 px-4 py-2 border border-gray-200 text-gray-700 rounded-lg hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{onClick:R,disabled:!b.trim()||v,className:"flex-1 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:v?e.jsxs(e.Fragment,{children:[e.jsx(Ie,{className:"w-4 h-4 animate-spin"}),"Submitting..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Ba,{className:"w-4 h-4"}),"Submit Response"]})})]})]})]})})]})}):e.jsx(gs,{children:e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Ft,{className:"w-12 h-12 text-gray-300 mx-auto mb-4"}),e.jsx("h2",{className:"text-lg font-medium text-gray-900 mb-2",children:"Business not found"}),e.jsx("button",{onClick:()=>s("/merchant/shops"),className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",children:"Back to My Shops"})]})})}function Yde(){const{businessId:t}=hi(),s=At(),[r,a]=h.useState(null),[n,i]=h.useState(!0),[l,o]=h.useState(!1),[c,d]=h.useState(!1),[u,m]=h.useState({name:"",slug:"",description:"",website_url:"",contact_email:"",contact_phone:"",address:"",logo_url:"",callback_url:"",webhook_url:"",is_live_mode:!1}),[p,x]=h.useState(!1),[g,f]=h.useState("");h.useEffect(()=>{t&&b()},[t]);const b=async()=>{if(t)try{const{data:C,error:S}=await U.from("merchant_businesses").select("*").eq("id",t).single();if(S)throw S;a(C),m({name:C.name||"",slug:C.slug||"",description:C.description||"",website_url:C.website_url||"",contact_email:C.contact_email||"",contact_phone:C.contact_phone||"",address:C.address||"",logo_url:C.logo_url||"",callback_url:C.callback_url||"",webhook_url:C.webhook_url||"",is_live_mode:C.is_live_mode||!1})}catch(C){console.error("Error fetching business:",C)}finally{i(!1)}},j=async()=>{if(t){o(!0);try{const{error:C}=await U.from("merchant_businesses").update({name:u.name,description:u.description,website_url:u.website_url,contact_email:u.contact_email,contact_phone:u.contact_phone,address:u.address,logo_url:u.logo_url,callback_url:u.callback_url,webhook_url:u.webhook_url,updated_at:new Date().toISOString()}).eq("id",t);if(C)throw C;f("Settings saved successfully!"),setTimeout(()=>f(""),3e3)}catch(C){console.error("Error saving settings:",C),alert("Failed to save settings. Please try again.")}finally{o(!1)}}},v=async()=>{if(!(!t||!c))try{const{error:C}=await U.from("merchant_businesses").delete().eq("id",t);if(C)throw C;s("/merchant/shops")}catch(C){console.error("Error deleting business:",C),alert("Failed to delete business. Please try again.")}},w=async()=>{if(!t)return;const C=`pk_${r!=null&&r.is_live_mode?"live":"test"}_${crypto.randomUUID().replace(/-/g,"")}`;try{const{error:S}=await U.from("merchant_businesses").update({api_key:C,updated_at:new Date().toISOString()}).eq("id",t);if(S)throw S;a(_=>_?{..._,api_key:C}:null),f("API key regenerated successfully!"),setTimeout(()=>f(""),3e3)}catch(S){console.error("Error regenerating API key:",S),alert("Failed to regenerate API key. Please try again.")}},y=C=>{const S={PENDING:{color:"bg-yellow-100 text-yellow-700",icon:e.jsx(Lt,{className:"w-3.5 h-3.5"}),label:"Pending Approval"},APPROVED:{color:"bg-green-100 text-green-700",icon:e.jsx(be,{className:"w-3.5 h-3.5"}),label:"Approved"},REJECTED:{color:"bg-red-100 text-red-700",icon:e.jsx(Lt,{className:"w-3.5 h-3.5"}),label:"Rejected"},SUSPENDED:{color:"bg-gray-100 text-gray-700",icon:e.jsx(Lt,{className:"w-3.5 h-3.5"}),label:"Suspended"}},_=S[C]||S.PENDING;return e.jsxs("span",{className:`inline-flex items-center gap-1 px-2.5 py-1 rounded-full text-xs font-medium ${_.color}`,children:[_.icon,_.label]})};return n?e.jsx(gs,{children:e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx(Ie,{className:"w-8 h-8 animate-spin text-green-600"})})}):r?e.jsx(gs,{children:e.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("button",{onClick:()=>s(`/merchant/shops/${t}`),className:"p-2 hover:bg-gray-100 rounded-lg",children:e.jsx(_s,{className:"w-5 h-5 text-gray-600"})}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-500 mb-1",children:[e.jsx(Qe,{to:"/merchant/shops",className:"hover:text-green-600",children:"My Shops"}),e.jsx("span",{children:"/"}),e.jsx(Qe,{to:`/merchant/shops/${t}`,className:"hover:text-green-600",children:r.name}),e.jsx("span",{children:"/"}),e.jsx("span",{className:"text-gray-900",children:"Settings"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Shop Settings"}),y(r.approval_status)]})]})]}),e.jsx("button",{onClick:j,disabled:l,className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 flex items-center gap-2 disabled:opacity-50",children:l?e.jsxs(e.Fragment,{children:[e.jsx(Ie,{className:"w-4 h-4 animate-spin"}),"Saving..."]}):e.jsxs(e.Fragment,{children:[e.jsx(oa,{className:"w-4 h-4"}),"Save Changes"]})})]}),g&&e.jsxs("div",{className:"bg-green-50 border border-green-200 text-green-700 px-4 py-3 rounded-lg flex items-center gap-2",children:[e.jsx(be,{className:"w-5 h-5"}),g]}),e.jsxs(W,{className:"p-6",children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[e.jsx(Ft,{className:"w-5 h-5"}),"Basic Information"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Business Name"}),e.jsx("input",{type:"text",value:u.name,onChange:C=>m({...u,name:C.target.value}),className:"w-full px-3 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Slug (URL identifier)"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-gray-500",children:"pay.peeap.com/"}),e.jsx("input",{type:"text",value:u.slug,disabled:!0,className:"flex-1 px-3 py-2 bg-gray-50 border border-gray-200 rounded-lg text-gray-500"})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Slug cannot be changed after creation"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),e.jsx("textarea",{value:u.description,onChange:C=>m({...u,description:C.target.value}),rows:3,className:"w-full px-3 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500 resize-none"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Logo URL"}),e.jsxs("div",{className:"flex items-center gap-4",children:[u.logo_url&&e.jsx("img",{src:u.logo_url,alt:"Logo",className:"w-16 h-16 rounded-lg object-cover border border-gray-200"}),e.jsx("input",{type:"url",value:u.logo_url,onChange:C=>m({...u,logo_url:C.target.value}),placeholder:"https://example.com/logo.png",className:"flex-1 px-3 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500"})]})]})]})]}),e.jsxs(W,{className:"p-6",children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[e.jsx(Va,{className:"w-5 h-5"}),"Contact Information"]}),e.jsxs("div",{className:"grid sm:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[e.jsx(li,{className:"w-4 h-4 inline mr-1"}),"Website"]}),e.jsx("input",{type:"url",value:u.website_url,onChange:C=>m({...u,website_url:C.target.value}),placeholder:"https://example.com",className:"w-full px-3 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[e.jsx(Va,{className:"w-4 h-4 inline mr-1"}),"Email"]}),e.jsx("input",{type:"email",value:u.contact_email,onChange:C=>m({...u,contact_email:C.target.value}),placeholder:"contact@example.com",className:"w-full px-3 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[e.jsx(lr,{className:"w-4 h-4 inline mr-1"}),"Phone"]}),e.jsx("input",{type:"tel",value:u.contact_phone,onChange:C=>m({...u,contact_phone:C.target.value}),placeholder:"+232 76 123456",className:"w-full px-3 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[e.jsx(Vi,{className:"w-4 h-4 inline mr-1"}),"Address"]}),e.jsx("input",{type:"text",value:u.address,onChange:C=>m({...u,address:C.target.value}),placeholder:"123 Main St, Freetown",className:"w-full px-3 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500"})]})]})]}),e.jsxs(W,{className:"p-6",children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[e.jsx(wl,{className:"w-5 h-5"}),"API & Integration"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Business ID"}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("input",{type:"text",value:r.id,disabled:!0,className:"flex-1 px-3 py-2 bg-gray-50 border border-gray-200 rounded-lg font-mono text-sm"})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"API Key"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:p?"text":"password",value:r.api_key||"Not generated",disabled:!0,className:"flex-1 px-3 py-2 bg-gray-50 border border-gray-200 rounded-lg font-mono text-sm"}),e.jsx("button",{onClick:()=>x(!p),className:"p-2 hover:bg-gray-100 rounded-lg",title:p?"Hide":"Show",children:p?e.jsx(Ln,{className:"w-4 h-4"}):e.jsx(es,{className:"w-4 h-4"})}),e.jsx("button",{onClick:w,className:"p-2 hover:bg-gray-100 rounded-lg text-yellow-600",title:"Regenerate API Key",children:e.jsx(vt,{className:"w-4 h-4"})})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Keep your API key secret. Regenerating will invalidate the old key."})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[e.jsx(Qh,{className:"w-4 h-4 inline mr-1"}),"Callback URL"]}),e.jsx("input",{type:"url",value:u.callback_url,onChange:C=>m({...u,callback_url:C.target.value}),placeholder:"https://yoursite.com/payment/callback",className:"w-full px-3 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Users will be redirected here after payment"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[e.jsx(jl,{className:"w-4 h-4 inline mr-1"}),"Webhook URL"]}),e.jsx("input",{type:"url",value:u.webhook_url,onChange:C=>m({...u,webhook_url:C.target.value}),placeholder:"https://yoursite.com/webhooks/peeap",className:"w-full px-3 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"We'll send payment notifications to this URL"})]})]})]}),e.jsxs(W,{className:"p-6",children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[e.jsx(Xt,{className:"w-5 h-5"}),"Environment Mode"]}),e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-gray-900",children:u.is_live_mode?"Live Mode":"Test Mode"}),e.jsx("p",{className:"text-sm text-gray-500",children:u.is_live_mode?"Processing real transactions with real money.":"Testing mode - no real transactions are processed."})]}),e.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${u.is_live_mode?"bg-green-100 text-green-700":"bg-orange-100 text-orange-700"}`,children:u.is_live_mode?"Live":"Test"})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Mode can only be changed from the Developer Portal when your business is approved."})]}),e.jsxs(W,{className:"p-6 border-red-200",children:[e.jsxs("h2",{className:"text-lg font-semibold text-red-600 mb-4 flex items-center gap-2",children:[e.jsx(Lt,{className:"w-5 h-5"}),"Danger Zone"]}),e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"flex items-center justify-between p-4 bg-red-50 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-red-900",children:"Delete Business"}),e.jsx("p",{className:"text-sm text-red-700",children:"This action cannot be undone. All transactions and data will be permanently deleted."})]}),c?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>d(!1),className:"px-4 py-2 border border-gray-200 text-gray-700 rounded-lg hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{onClick:v,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700",children:"Confirm Delete"})]}):e.jsxs("button",{onClick:()=>d(!0),className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 flex items-center gap-2",children:[e.jsx(Or,{className:"w-4 h-4"}),"Delete"]})]})})]})]})}):e.jsx(gs,{children:e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Ft,{className:"w-12 h-12 text-gray-300 mx-auto mb-4"}),e.jsx("h2",{className:"text-lg font-medium text-gray-900 mb-2",children:"Business not found"}),e.jsx("button",{onClick:()=>s("/merchant/shops"),className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",children:"Back to My Shops"})]})})}const Qde=[{id:"TKT-M001",subject:"Settlement delay question",status:"resolved",createdAt:"2024-01-10",lastReply:"2024-01-11"},{id:"TKT-M002",subject:"API integration help needed",status:"in_progress",createdAt:"2024-01-14",lastReply:"2024-01-14"}],Sv={open:"bg-yellow-100 text-yellow-800",in_progress:"bg-blue-100 text-blue-800",resolved:"bg-green-100 text-green-800",closed:"bg-gray-100 text-gray-800"},Jde={open:ut,in_progress:it,resolved:be,closed:Ao};function Zde(){const[t]=h.useState(Qde),[s,r]=h.useState(!1),[a,n]=h.useState(""),[i,l]=h.useState(""),o=c=>{c.preventDefault(),r(!1),n(""),l("")};return e.jsx(gs,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Support"}),e.jsx("p",{className:"text-gray-500 mt-1",children:"Get help with your merchant account"})]}),e.jsxs(De,{onClick:()=>r(!0),children:[e.jsx(It,{className:"w-4 h-4 mr-2"}),"New Ticket"]})]}),s&&e.jsxs(W,{children:[e.jsx(Sr,{children:e.jsx(_r,{children:"Create Support Ticket"})}),e.jsxs("form",{onSubmit:o,className:"p-6 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Subject"}),e.jsx("input",{type:"text",value:a,onChange:c=>n(c.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"Brief description of your issue"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Category"}),e.jsxs("select",{className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",children:[e.jsx("option",{children:"Payments & Transactions"}),e.jsx("option",{children:"Settlements & Payouts"}),e.jsx("option",{children:"API & Integration"}),e.jsx("option",{children:"Account Settings"}),e.jsx("option",{children:"Other"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Message"}),e.jsx("textarea",{value:i,onChange:c=>l(c.target.value),rows:5,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"Describe your issue in detail..."})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(De,{type:"button",variant:"outline",onClick:()=>r(!1),children:"Cancel"}),e.jsxs(De,{type:"submit",disabled:!a.trim()||!i.trim(),children:[e.jsx(Ba,{className:"w-4 h-4 mr-2"}),"Submit Ticket"]})]})]})]}),e.jsxs(W,{children:[e.jsx(Sr,{children:e.jsx(_r,{children:"Your Tickets"})}),t.length===0?e.jsxs("div",{className:"p-8 text-center",children:[e.jsx(Ao,{className:"w-12 h-12 text-gray-300 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500",children:"No support tickets yet"}),e.jsx(De,{className:"mt-4",onClick:()=>r(!0),children:"Create Your First Ticket"})]}):e.jsx("div",{className:"divide-y divide-gray-200",children:t.map(c=>{const d=Jde[c.status];return e.jsx("div",{className:"p-4 hover:bg-gray-50 cursor-pointer",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:`p-2 rounded-lg ${Sv[c.status].replace("text-","bg-").replace("800","100")}`,children:e.jsx(d,{className:`w-5 h-5 ${Sv[c.status].split(" ")[1]}`})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:c.subject}),e.jsx("p",{className:"text-sm text-gray-500",children:c.id})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${Sv[c.status]}`,children:c.status.replace("_"," ")}),e.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:["Last reply: ",c.lastReply]})]})]})},c.id)})})]}),e.jsxs(W,{className:"p-6",children:[e.jsx("h3",{className:"font-medium text-gray-900 mb-4",children:"Need immediate help?"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[e.jsx("p",{className:"font-medium text-gray-900",children:"Email"}),e.jsx("p",{className:"text-gray-500",children:"merchant-support@peeap.com"})]}),e.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[e.jsx("p",{className:"font-medium text-gray-900",children:"Phone"}),e.jsx("p",{className:"text-gray-500",children:"+232 76 000000"})]})]})]})]})})}const Xde=[{path:"/agent",label:"Dashboard",icon:Df},{path:"/agent/tickets",label:"Tickets",icon:rw},{path:"/agent/customers",label:"Customers",icon:ia},{path:"/agent/live-chat",label:"Live Chat",icon:Ao},{path:"/agent/calls",label:"Call Log",icon:RV},{path:"/agent/kyc-review",label:"KYC Review",icon:Xt},{path:"/agent/knowledge",label:"Knowledge Base",icon:Yh},{path:"/agent/settings",label:"Settings",icon:or}];function H0({children:t}){const[s,r]=h.useState(!1),{user:a,logout:n}=wt(),{isDeveloperMode:i}=C0(),l=Ga(),o=At(),c=async()=>{await n(),o("/login")};return e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[s&&e.jsx("div",{className:"fixed inset-0 z-40 bg-gray-600 bg-opacity-75 lg:hidden",onClick:()=>r(!1)}),e.jsx("aside",{className:oe("fixed inset-y-0 left-0 z-50 w-64 bg-white border-r border-gray-200 transform transition-transform duration-300 ease-in-out lg:translate-x-0",s?"translate-x-0":"-translate-x-full"),children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex items-center justify-between h-16 px-6 border-b border-gray-200",children:[e.jsxs(Qe,{to:"/agent",className:"flex items-center gap-2",children:[e.jsx(No,{className:"w-8 h-8 text-orange-600"}),e.jsx("span",{className:"text-xl font-bold text-gray-900",children:"Support"})]}),e.jsx("button",{className:"lg:hidden p-2 rounded-lg hover:bg-gray-100",onClick:()=>r(!1),children:e.jsx(lt,{className:"w-5 h-5"})})]}),e.jsx("div",{className:"px-4 py-3 border-b border-gray-200",children:e.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 bg-green-50 border border-green-200 rounded-lg",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),e.jsx("span",{className:"text-sm text-green-700 font-medium",children:"Online - Available"})]})}),e.jsxs("nav",{className:"flex-1 px-4 py-6 space-y-1 overflow-y-auto scrollbar-hide",children:[Xde.map(d=>{const u=d.icon,m=l.pathname===d.path||d.path!=="/agent"&&l.pathname.startsWith(d.path);return e.jsxs(Qe,{to:d.path,className:oe("flex items-center px-4 py-3 rounded-lg transition-colors",m?"bg-orange-50 text-orange-700":"text-gray-600 hover:bg-gray-100"),children:[e.jsx(u,{className:"w-5 h-5 mr-3"}),d.label,d.label==="Tickets"&&e.jsx("span",{className:"ml-auto px-2 py-0.5 bg-red-100 text-red-700 text-xs rounded-full",children:"12"}),d.label==="Live Chat"&&e.jsx("span",{className:"ml-auto px-2 py-0.5 bg-green-100 text-green-700 text-xs rounded-full",children:"3"})]},d.path)}),i&&e.jsx("div",{className:"pt-4 mt-4 border-t border-gray-200",children:e.jsxs(Qe,{to:"/agent/developer",className:"flex items-center justify-between px-4 py-3 rounded-lg bg-indigo-50 text-indigo-700 hover:bg-indigo-100 transition-colors",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(Ir,{className:"w-5 h-5 mr-3"}),e.jsx("span",{className:"font-medium",children:"Developer Portal"})]}),e.jsx(Fr,{className:"w-4 h-4"})]})})]}),e.jsx("div",{className:"px-4 py-3 border-t border-gray-200",children:e.jsxs(Qe,{to:"/agent/help",className:"flex items-center px-4 py-3 text-gray-600 rounded-lg hover:bg-gray-100",children:[e.jsx(O1,{className:"w-5 h-5 mr-3"}),"Help & Guidelines"]})}),e.jsxs("div",{className:"p-4 border-t border-gray-200",children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx("div",{className:"w-10 h-10 bg-orange-100 rounded-full flex items-center justify-center",children:e.jsx(No,{className:"w-5 h-5 text-orange-600"})}),e.jsxs("div",{className:"ml-3",children:[e.jsxs("p",{className:"text-sm font-medium text-gray-900",children:[a==null?void 0:a.firstName," ",a==null?void 0:a.lastName]}),e.jsx("p",{className:"text-xs text-gray-500",children:"Support Agent"})]})]}),e.jsxs("button",{onClick:c,className:"flex items-center w-full px-4 py-2 text-gray-600 rounded-lg hover:bg-gray-100 transition-colors",children:[e.jsx(_0,{className:"w-5 h-5 mr-3"}),"Sign out"]})]})]})}),e.jsxs("div",{className:"lg:pl-64",children:[e.jsx("header",{className:"sticky top-0 z-30 h-16 bg-white border-b border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between h-full px-4 lg:px-8",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("button",{className:"lg:hidden p-2 rounded-lg hover:bg-gray-100",onClick:()=>r(!0),children:e.jsx(E0,{className:"w-6 h-6"})}),e.jsxs("div",{className:"hidden md:flex items-center gap-2 bg-gray-100 rounded-lg px-3 py-2",children:[e.jsx(ts,{className:"w-4 h-4 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search customers, tickets...",className:"bg-transparent border-none outline-none text-sm w-64"})]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("span",{className:"hidden sm:inline-flex px-3 py-1 bg-orange-100 text-orange-700 rounded-full text-xs font-medium",children:"Agent Portal"}),i&&e.jsxs(Qe,{to:"/agent/developer",className:"hidden sm:inline-flex items-center gap-1 px-3 py-1 bg-indigo-100 text-indigo-700 rounded-full text-xs font-medium hover:bg-indigo-200 transition-colors",children:[e.jsx(Ir,{className:"w-3 h-3"}),"Developer"]}),e.jsxs("button",{className:"relative p-2 hover:bg-gray-100 rounded-lg",children:[e.jsx(jl,{className:"w-5 h-5 text-gray-600"}),e.jsx("span",{className:"absolute top-1 right-1 w-2 h-2 bg-red-500 rounded-full"})]})]})]})}),e.jsx("main",{className:"p-4 lg:p-8",children:t})]})]})}const eue=t=>({id:t.id,userId:t.agent_id||t.user_id,businessName:t.business_name,address:t.address,city:t.city,region:t.region,phone:t.phone,whatsapp:t.whatsapp,operatingHours:t.operating_hours,isActive:t.is_active??!0,verified:t.verified??!1,tier:t.tier||"basic",dailyLimit:parseFloat(t.daily_limit)||5e5,minAmount:parseFloat(t.min_amount)||10,maxAmount:parseFloat(t.max_amount)||1e5,commissionRate:parseFloat(t.commission_rate)||.5,totalTransactions:parseInt(t.total_transactions)||0,rating:parseFloat(t.rating)||0,latitude:t.latitude?parseFloat(t.latitude):void 0,longitude:t.longitude?parseFloat(t.longitude):void 0,createdAt:t.created_at}),_v=t=>{var s,r;return{id:t.id,customerId:t.user_id,customerName:(s=t.user)!=null&&s.first_name?`${t.user.first_name} ${t.user.last_name||""}`.trim():"Unknown Customer",customerPhone:(r=t.user)==null?void 0:r.phone,amount:parseFloat(t.amount)||0,fee:parseFloat(t.fee)||0,code:t.code,codeExpiresAt:t.code_expires_at,status:t.status||"PENDING",requestedAt:t.requested_at||t.created_at,walletId:t.wallet_id}},tue=t=>{var s;return{id:t.id,type:t.type||"TRANSFER",amount:Math.abs(parseFloat(t.amount)||0),fee:parseFloat(t.fee)||0,commission:parseFloat(t.commission)||0,customerId:t.customer_id||t.recipient_id,customerName:t.customer_name||t.description,customerPhone:t.customer_phone,status:t.status||"COMPLETED",reference:t.reference||((s=t.id)==null?void 0:s.slice(0,8).toUpperCase()),description:t.description||t.type,createdAt:t.created_at}},wr={async getProfile(t){const{data:s}=await U.from("agent_locations").select("*").eq("agent_id",t).maybeSingle();if(s)return eue(s);const{data:r}=await U.from("users").select("id, first_name, last_name, phone, role").eq("id",t).eq("role","agent").maybeSingle();return r?{id:r.id,userId:r.id,businessName:`${r.first_name} ${r.last_name||""}`.trim()||"Agent",address:"",isActive:!0,verified:!1,tier:"basic",dailyLimit:5e5,minAmount:10,maxAmount:1e5,commissionRate:.5,totalTransactions:0,rating:0,phone:r.phone,createdAt:new Date().toISOString()}:null},async getDashboardStats(t){const s=new Date;s.setHours(0,0,0,0);const r=new Date(s.getFullYear(),s.getMonth(),1),{data:a}=await U.from("wallets").select("id, balance").eq("user_id",t).eq("is_primary",!0).maybeSingle(),n=a==null?void 0:a.id,i=parseFloat((a==null?void 0:a.balance)||"0"),{data:l}=await U.from("transactions").select("amount, type, fee").eq("wallet_id",n).eq("status","COMPLETED").gte("created_at",s.toISOString());let o=0,c=0,d=0;for(const g of l||[]){const f=parseFloat(g.amount)||0,b=parseFloat(g.fee)||0;g.type==="CASH_IN"||g.type==="DEPOSIT"?(o+=Math.abs(f),d+=b*.5):g.type==="CASH_OUT"&&(c+=Math.abs(f),d+=b*.5)}const{data:u}=await U.from("cash_out_requests").select("id").or(`agent_id.eq.${t},agent_location_id.is.null`).eq("status","PENDING").gt("code_expires_at",new Date().toISOString()),{data:m}=await U.from("transactions").select("amount").eq("wallet_id",n).eq("status","COMPLETED").gte("created_at",r.toISOString()),p=(m||[]).reduce((g,f)=>g+Math.abs(parseFloat(f.amount)||0),0),{count:x}=await U.from("transactions").select("recipient_id",{count:"exact",head:!0}).eq("wallet_id",n).not("recipient_id","is",null);return{walletBalance:i,floatBalance:i,todayCashIn:o,todayCashOut:c,todayCommissions:d,todayTransactions:(l==null?void 0:l.length)||0,pendingCashOuts:(u==null?void 0:u.length)||0,monthlyVolume:p,monthlyCommissions:d*30,totalCustomersServed:x||0}},async getPendingCashOuts(t,s=20){const{data:r,error:a}=await U.from("cash_out_requests").select(`
        *,
        user:users(first_name, last_name, phone)
      `).eq("status","PENDING").gt("code_expires_at",new Date().toISOString()).order("created_at",{ascending:!1}).limit(s);return a?(console.error("Error fetching pending cash-outs:",a),[]):(r||[]).map(_v)},async verifyCashOutCode(t){const{data:s,error:r}=await U.from("cash_out_requests").select(`
        *,
        user:users(first_name, last_name, phone)
      `).eq("code",t).eq("status","PENDING").gt("code_expires_at",new Date().toISOString()).maybeSingle();return r?{success:!1,error:r.message}:s?{success:!0,request:_v(s)}:{success:!1,error:"Invalid or expired code"}},async completeCashOut(t){const{data:s,error:r}=await U.rpc("complete_cash_out",{p_request_id:t.requestId,p_agent_id:t.agentId,p_code:t.code});if(r)return r.message.includes("does not exist")?this.completeCashOutManually(t):{success:!1,message:r.message};const a=(s==null?void 0:s[0])||s;return{success:(a==null?void 0:a.success)||!1,message:(a==null?void 0:a.message)||"Cash-out completed"}},async completeCashOutManually(t){const{data:s}=await U.from("cash_out_requests").select("*").eq("id",t.requestId).eq("code",t.code).eq("status","PENDING").gt("code_expires_at",new Date().toISOString()).single();if(!s)return{success:!1,message:"Invalid request or code"};const{data:r}=await U.from("wallets").select("id, balance").eq("user_id",t.agentId).eq("is_primary",!0).single();if(!r||parseFloat(r.balance)<parseFloat(s.amount))return{success:!1,message:"Insufficient float balance"};await U.from("wallets").update({balance:parseFloat(r.balance)-parseFloat(s.amount),updated_at:new Date().toISOString()}).eq("id",r.id),await U.from("cash_out_requests").update({status:"COMPLETED",agent_id:t.agentId,code_verified_at:new Date().toISOString(),completed_at:new Date().toISOString(),updated_at:new Date().toISOString()}).eq("id",t.requestId);const a=parseFloat(s.fee)*.5;return await U.from("transactions").insert({wallet_id:r.id,user_id:t.agentId,amount:-parseFloat(s.amount),type:"CASH_OUT",status:"COMPLETED",description:"Cash-out to customer",fee:0,metadata:{cash_out_request_id:t.requestId,commission:a,customer_id:s.user_id}}),{success:!0,message:`Cash-out of Le ${s.amount} completed. Commission: Le ${a.toFixed(2)}`}},async processCashIn(t){const{data:s}=await U.from("users").select("id").eq("phone",t.customerPhone).maybeSingle();if(!s)return{success:!1,message:"Customer not found with that phone number"};const{data:r}=await U.from("wallets").select("id, balance").eq("user_id",s.id).eq("is_primary",!0).maybeSingle();if(!r)return{success:!1,message:"Customer wallet not found"};const{data:a}=await U.from("wallets").select("id, balance").eq("user_id",t.agentId).eq("is_primary",!0).single();if(!a)return{success:!1,message:"Agent wallet not found"};const n=Math.max(t.amount*.01,1),i=n*.5,l=t.amount-n;await U.from("wallets").update({balance:parseFloat(r.balance)+l,updated_at:new Date().toISOString()}).eq("id",r.id),await U.from("wallets").update({balance:parseFloat(a.balance)+t.amount,updated_at:new Date().toISOString()}).eq("id",a.id);const{data:o}=await U.from("transactions").insert({wallet_id:r.id,user_id:s.id,amount:l,type:"CASH_IN",status:"COMPLETED",description:t.description||"Cash deposit via agent",fee:n,metadata:{agent_id:t.agentId,gross_amount:t.amount}}).select("id").single();return await U.from("transactions").insert({wallet_id:a.id,user_id:t.agentId,amount:t.amount,type:"CASH_IN",status:"COMPLETED",description:"Cash-in from customer",fee:0,metadata:{customer_id:s.id,commission:i}}),{success:!0,transactionId:o==null?void 0:o.id,message:`Deposited Le ${l.toLocaleString()} to customer. Commission: Le ${i.toFixed(2)}`}},async getTransactions(t,s){const{data:r}=await U.from("wallets").select("id").eq("user_id",t).eq("is_primary",!0).maybeSingle();if(!r)return[];let a=U.from("transactions").select("*").eq("wallet_id",r.id).order("created_at",{ascending:!1});s!=null&&s.type&&(a=a.eq("type",s.type)),s!=null&&s.startDate&&(a=a.gte("created_at",s.startDate.toISOString())),s!=null&&s.endDate&&(a=a.lte("created_at",s.endDate.toISOString())),s!=null&&s.limit&&(a=a.limit(s.limit)),s!=null&&s.offset&&(a=a.range(s.offset,s.offset+(s.limit||20)-1));const{data:n,error:i}=await a;return i?(console.error("Error fetching transactions:",i),[]):(n||[]).map(tue)},async getCashOutHistory(t,s=20){const{data:r,error:a}=await U.from("cash_out_requests").select(`
        *,
        user:users(first_name, last_name, phone)
      `).eq("agent_id",t).in("status",["COMPLETED","CANCELLED"]).order("completed_at",{ascending:!1}).limit(s);return a?(console.error("Error fetching cash-out history:",a),[]):(r||[]).map(_v)},async requestFloatTopup(t,s){const{data:r}=await U.from("wallets").select("id").eq("user_id",t).eq("is_primary",!0).single();return r?(await U.from("transactions").insert({wallet_id:r.id,user_id:t,amount:s,type:"FLOAT_TOPUP",status:"PENDING",description:"Float top-up request"}),{success:!0,message:"Float top-up request submitted"}):{success:!1,message:"Wallet not found"}},getCommissionRates(){return{cashIn:.5,cashOut:.5,transfer:.3}},getLimits(t="basic"){return{basic:{minTransaction:10,maxTransaction:5e4,dailyLimit:5e5},standard:{minTransaction:10,maxTransaction:1e5,dailyLimit:1e6},agent_plus:{minTransaction:10,maxTransaction:5e5,dailyLimit:5e6}}[t]}};function TE(){const{user:t}=wt(),[s,r]=h.useState({walletBalance:0,floatBalance:0,todayCashIn:0,todayCashOut:0,todayCommissions:0,todayTransactions:0,pendingCashOuts:0,monthlyVolume:0,monthlyCommissions:0,totalCustomersServed:0}),[a,n]=h.useState([]),[i,l]=h.useState([]),[o,c]=h.useState(!0),[d,u]=h.useState("basic"),[m,p]=h.useState(!1),[x,g]=h.useState(""),[f,b]=h.useState(""),[j,v]=h.useState(!1),[w,y]=h.useState(null),[C,S]=h.useState(!1),[_,E]=h.useState(""),[A,R]=h.useState(!1),[I,N]=h.useState(null),[P,k]=h.useState(null),[D,$]=h.useState(null);h.useEffect(()=>{Ut.getDefaultCurrency().then($),t!=null&&t.id&&T()},[t==null?void 0:t.id]);const L=(D==null?void 0:D.symbol)||"Le ",B=se=>`${L}${se.toLocaleString(void 0,{minimumFractionDigits:0,maximumFractionDigits:0})}`,T=async()=>{if(t!=null&&t.id){c(!0);try{const[se,de,fe,z]=await Promise.all([wr.getDashboardStats(t.id),wr.getPendingCashOuts(t.id,5),wr.getTransactions(t.id,{limit:5}),wr.getProfile(t.id)]);r(se),n(de),l(fe),z!=null&&z.tier&&u(z.tier)}catch(se){console.error("Error fetching dashboard data:",se)}finally{c(!1)}}},O=async()=>{if(!(!(t!=null&&t.id)||!x||!f)){v(!0),y(null);try{const se=await wr.processCashIn({agentId:t.id,customerPhone:x,amount:parseFloat(f)});se.success?(y({type:"success",text:se.message}),g(""),b(""),T(),setTimeout(()=>{p(!1),y(null)},2e3)):y({type:"error",text:se.message})}catch{y({type:"error",text:"Failed to process cash-in"})}finally{v(!1)}}},q=async()=>{if(!_||_.length!==6){k({type:"error",text:"Please enter a valid 6-digit code"});return}R(!0),k(null);try{const se=await wr.verifyCashOutCode(_);se.success&&se.request?(N(se.request),k({type:"success",text:"Code verified! Confirm to dispense cash."})):k({type:"error",text:se.error||"Invalid or expired code"})}catch{k({type:"error",text:"Failed to verify code"})}finally{R(!1)}},K=async()=>{if(!(!(t!=null&&t.id)||!I)){R(!0);try{const se=await wr.completeCashOut({requestId:I.id,agentId:t.id,code:_});se.success?(k({type:"success",text:se.message}),T(),setTimeout(()=>{S(!1),E(""),N(null),k(null)},2e3)):k({type:"error",text:se.message})}catch{k({type:"error",text:"Failed to complete cash-out"})}finally{R(!1)}}},le=se=>{const de=new Date(se),z=new Date().getTime()-de.getTime(),re=Math.floor(z/6e4),ie=Math.floor(z/36e5);return re<1?"Just now":re<60?`${re}m ago`:ie<24?`${ie}h ago`:de.toLocaleDateString()},X=wr.getLimits(d);return e.jsxs(H0,{children:[e.jsxs(Oe.div,{className:"space-y-6",initial:{opacity:0},animate:{opacity:1},transition:{duration:.4},children:[e.jsxs(Oe.div,{className:"flex justify-between items-center",initial:{opacity:0,y:-20},animate:{opacity:1,y:0},children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Agent Dashboard"}),e.jsxs("p",{className:"text-gray-500 dark:text-gray-400",children:[d==="agent_plus"?"Agent+ Account":d==="standard"?"Standard Agent":"Basic Agent"," ",""," ","Daily Limit: ",B(X.dailyLimit)]})]}),e.jsx("div",{className:"flex gap-3",children:e.jsxs(Oe.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:T,className:"px-4 py-2 text-sm bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 flex items-center gap-2",children:[e.jsx(vt,{className:`w-4 h-4 ${o?"animate-spin":""}`}),"Refresh"]})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs(Oe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"p-6 bg-gradient-to-br from-orange-500 to-orange-600 dark:from-orange-600 dark:to-orange-700 text-white rounded-xl shadow-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:"p-2 bg-white/20 rounded-lg",children:e.jsx(jt,{className:"w-6 h-6"})}),e.jsx("span",{className:"text-xs bg-white/20 px-2 py-1 rounded-full",children:"Float Balance"})]}),e.jsx("p",{className:"text-sm text-orange-100",children:"Available Cash"}),e.jsx("p",{className:"text-3xl font-bold",children:B(s.floatBalance)}),e.jsxs("div",{className:"flex gap-2 mt-4",children:[e.jsxs(Qe,{to:"/agent/float",className:"flex-1 py-2 bg-white/20 hover:bg-white/30 rounded-lg text-sm font-medium transition-colors flex items-center justify-center gap-1",children:[e.jsx(rr,{className:"w-4 h-4"}),"Top Up"]}),e.jsxs(Qe,{to:"/agent/transactions",className:"flex-1 py-2 bg-white/20 hover:bg-white/30 rounded-lg text-sm font-medium transition-colors flex items-center justify-center gap-1",children:[e.jsx(NV,{className:"w-4 h-4"}),"History"]})]})]}),e.jsxs(we,{className:"p-6",delay:.2,children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"p-2 bg-green-100 dark:bg-green-900/30 rounded-lg",children:e.jsx(la,{className:"w-5 h-5 text-green-600 dark:text-green-400"})}),e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:"Cash In (Deposit)"})]}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-4",children:"Accept cash from customer and credit their wallet"}),e.jsxs(Oe.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>p(!0),className:"w-full py-3 bg-green-600 text-white rounded-lg font-medium hover:bg-green-700 transition-colors flex items-center justify-center gap-2",children:[e.jsx(Si,{className:"w-5 h-5"}),"Process Cash In"]})]}),e.jsxs(we,{className:"p-6",delay:.3,children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"p-2 bg-red-100 dark:bg-red-900/30 rounded-lg",children:e.jsx(xs,{className:"w-5 h-5 text-red-600 dark:text-red-400"})}),e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:"Cash Out (Withdrawal)"})]}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-4",children:"Verify customer code and dispense cash"}),e.jsxs(Oe.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>S(!0),className:"w-full py-3 bg-orange-600 text-white rounded-lg font-medium hover:bg-orange-700 transition-colors flex items-center justify-center gap-2",children:[e.jsx(wa,{className:"w-5 h-5"}),"Verify Code"]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsx(we,{className:"p-4",delay:.4,children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-green-100 dark:bg-green-900/30 rounded-lg",children:e.jsx(la,{className:"w-5 h-5 text-green-600 dark:text-green-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Today's Cash In"}),e.jsx("p",{className:"text-lg font-bold text-green-600 dark:text-green-400",children:B(s.todayCashIn)})]})]})}),e.jsx(we,{className:"p-4",delay:.45,children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-red-100 dark:bg-red-900/30 rounded-lg",children:e.jsx(xs,{className:"w-5 h-5 text-red-600 dark:text-red-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Today's Cash Out"}),e.jsx("p",{className:"text-lg font-bold text-red-600 dark:text-red-400",children:B(s.todayCashOut)})]})]})}),e.jsx(we,{className:"p-4",delay:.5,children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-purple-100 dark:bg-purple-900/30 rounded-lg",children:e.jsx(Pu,{className:"w-5 h-5 text-purple-600 dark:text-purple-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Today's Commission"}),e.jsx("p",{className:"text-lg font-bold text-purple-600 dark:text-purple-400",children:B(s.todayCommissions)})]})]})}),e.jsx(we,{className:"p-4",delay:.55,children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-900/30 rounded-lg",children:e.jsx(Ba,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Transactions"}),e.jsx("p",{className:"text-lg font-bold text-blue-600 dark:text-blue-400",children:s.todayTransactions})]})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs(we,{className:"lg:col-span-2 p-6",delay:.6,children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Pending Cash-Outs"}),s.pendingCashOuts>0&&e.jsx("span",{className:"px-2 py-0.5 bg-orange-100 dark:bg-orange-900/30 text-orange-700 dark:text-orange-400 text-xs font-medium rounded-full",children:s.pendingCashOuts})]}),e.jsx(Qe,{to:"/agent/cashout",className:"text-sm text-orange-600 dark:text-orange-400 hover:text-orange-700 dark:hover:text-orange-300",children:"View All"})]}),o?e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsx(vt,{className:"w-6 h-6 animate-spin text-gray-400"})}):a.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(be,{className:"w-12 h-12 text-gray-300 dark:text-gray-600 mx-auto mb-3"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"No pending cash-out requests"}),e.jsx("p",{className:"text-sm text-gray-400 dark:text-gray-500",children:"Requests will appear here when customers request cash"})]}):e.jsx("div",{className:"space-y-3",children:a.map(se=>e.jsxs(Oe.div,{whileHover:{scale:1.01},className:"flex items-center justify-between p-4 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-2 bg-orange-100 dark:bg-orange-900/30 rounded-full",children:e.jsx(Si,{className:"w-5 h-5 text-orange-600 dark:text-orange-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:se.customerName}),e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Code: ",e.jsx("span",{className:"font-mono font-bold",children:se.code})]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"font-bold text-gray-900 dark:text-white",children:B(se.amount)}),e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Expires ",le(se.codeExpiresAt)]})]})]},se.id))})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs(we,{className:"p-6",delay:.7,children:[e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white mb-4",children:"Monthly Summary"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(js,{className:"w-4 h-4 text-gray-400"}),e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Volume"})]}),e.jsx("span",{className:"font-semibold text-gray-900 dark:text-white",children:B(s.monthlyVolume)})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Pu,{className:"w-4 h-4 text-gray-400"}),e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Commissions"})]}),e.jsx("span",{className:"font-semibold text-green-600 dark:text-green-400",children:B(s.monthlyCommissions)})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ia,{className:"w-4 h-4 text-gray-400"}),e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Customers"})]}),e.jsx("span",{className:"font-semibold text-gray-900 dark:text-white",children:s.totalCustomersServed})]})]})]}),e.jsxs(we,{className:"p-6",delay:.8,children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:"Recent Activity"}),e.jsx(Qe,{to:"/agent/transactions",className:"text-sm text-orange-600 dark:text-orange-400 hover:text-orange-700",children:"View All"})]}),e.jsx("div",{className:"space-y-3",children:i.length===0?e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 text-center py-4",children:"No recent transactions"}):i.slice(0,4).map(se=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:`p-1.5 rounded-full ${se.type==="CASH_IN"?"bg-green-100 dark:bg-green-900/30":se.type==="CASH_OUT"?"bg-red-100 dark:bg-red-900/30":"bg-blue-100 dark:bg-blue-900/30"}`,children:se.type==="CASH_IN"?e.jsx(la,{className:"w-3 h-3 text-green-600 dark:text-green-400"}):se.type==="CASH_OUT"?e.jsx(xs,{className:"w-3 h-3 text-red-600 dark:text-red-400"}):e.jsx(Ba,{className:"w-3 h-3 text-blue-600 dark:text-blue-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:se.type.replace("_"," ")}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:le(se.createdAt)})]})]}),e.jsxs("span",{className:`text-sm font-medium ${se.type==="CASH_IN"?"text-green-600 dark:text-green-400":se.type==="CASH_OUT"?"text-red-600 dark:text-red-400":"text-gray-900 dark:text-white"}`,children:[se.type==="CASH_OUT"?"-":"+",B(se.amount)]})]},se.id))})]})]})]}),d!=="agent_plus"&&e.jsx(we,{className:"p-6 border-2 border-orange-200 dark:border-orange-800 bg-gradient-to-r from-orange-50 to-amber-50 dark:from-orange-900/20 dark:to-amber-900/20",delay:.9,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-3 bg-orange-100 dark:bg-orange-900/50 rounded-xl",children:e.jsx(ui,{className:"w-8 h-8 text-orange-600 dark:text-orange-400"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-gray-900 dark:text-white",children:"Upgrade to Agent+"}),e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Higher limits (",B(5e6),"/day), lower fees, priority support & more"]})]})]}),e.jsxs(Qe,{to:"/agent/upgrade",className:"px-6 py-3 bg-orange-600 text-white rounded-lg font-medium hover:bg-orange-700 transition-colors flex items-center gap-2",children:[e.jsx(ui,{className:"w-5 h-5"}),"Upgrade Now"]})]})})]}),m&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs(Oe.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"bg-white dark:bg-gray-800 rounded-xl p-6 w-full max-w-md",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white mb-4",children:"Cash In (Deposit)"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-4",children:"Accept cash from customer and credit their wallet"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Customer Phone Number"}),e.jsx("input",{type:"tel",value:x,onChange:se=>g(se.target.value),placeholder:"+232 XX XXX XXXX",className:"w-full px-4 py-3 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-orange-500"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:["Amount (",L,")"]}),e.jsx("input",{type:"number",value:f,onChange:se=>b(se.target.value),placeholder:"0",min:X.minTransaction,max:X.maxTransaction,className:"w-full px-4 py-3 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-orange-500 text-2xl font-bold"}),e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:["Min: ",B(X.minTransaction),"  Max: ",B(X.maxTransaction)]})]}),f&&e.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-500",children:"Fee (1%)"}),e.jsx("span",{className:"text-gray-900 dark:text-white",children:B(Math.max(parseFloat(f)*.01,1))})]}),e.jsxs("div",{className:"flex justify-between text-sm mt-1",children:[e.jsx("span",{className:"text-gray-500",children:"Customer receives"}),e.jsx("span",{className:"font-bold text-green-600",children:B(parseFloat(f)-Math.max(parseFloat(f)*.01,1))})]}),e.jsxs("div",{className:"flex justify-between text-sm mt-1",children:[e.jsx("span",{className:"text-gray-500",children:"Your commission"}),e.jsx("span",{className:"font-bold text-purple-600",children:B(Math.max(parseFloat(f)*.01,1)*.5)})]})]}),w&&e.jsx("div",{className:`p-3 rounded-lg ${w.type==="success"?"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400":"bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-400"}`,children:w.text}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>{p(!1),g(""),b(""),y(null)},className:"flex-1 py-3 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg font-medium hover:bg-gray-200 dark:hover:bg-gray-600",children:"Cancel"}),e.jsx("button",{onClick:O,disabled:j||!x||!f,className:"flex-1 py-3 bg-green-600 text-white rounded-lg font-medium hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:j?e.jsx(vt,{className:"w-5 h-5 animate-spin"}):e.jsxs(e.Fragment,{children:[e.jsx(be,{className:"w-5 h-5"}),"Confirm Deposit"]})})]})]})]})}),C&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs(Oe.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"bg-white dark:bg-gray-800 rounded-xl p-6 w-full max-w-md",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white mb-4",children:"Cash Out Verification"}),I?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"p-4 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2 text-green-700 dark:text-green-400 mb-2",children:[e.jsx(be,{className:"w-5 h-5"}),e.jsx("span",{className:"font-medium",children:"Code Verified"})]}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Customer"}),e.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:I.customerName})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Amount"}),e.jsx("span",{className:"font-bold text-gray-900 dark:text-white",children:B(I.amount)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Your commission"}),e.jsx("span",{className:"font-bold text-purple-600",children:B(I.fee*.5)})]})]})]}),s.floatBalance<I.amount&&e.jsxs("div",{className:"p-3 bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-400 rounded-lg mb-4 flex items-center gap-2",children:[e.jsx(Lt,{className:"w-5 h-5"}),"Insufficient float balance"]}),P&&P.type==="error"&&e.jsx("div",{className:"p-3 bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-400 rounded-lg mb-4",children:P.text}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>{S(!1),E(""),N(null),k(null)},className:"flex-1 py-3 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg font-medium hover:bg-gray-200 dark:hover:bg-gray-600",children:"Cancel"}),e.jsx("button",{onClick:K,disabled:A||s.floatBalance<I.amount,className:"flex-1 py-3 bg-orange-600 text-white rounded-lg font-medium hover:bg-orange-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:A?e.jsx(vt,{className:"w-5 h-5 animate-spin"}):e.jsxs(e.Fragment,{children:[e.jsx(Si,{className:"w-5 h-5"}),"Dispense Cash"]})})]})]}):e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-4",children:"Enter the 6-digit code from the customer"}),e.jsx("div",{className:"mb-4",children:e.jsx("input",{type:"text",value:_,onChange:se=>E(se.target.value.replace(/\D/g,"").slice(0,6)),placeholder:"Enter 6-digit code",className:"w-full px-4 py-4 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-orange-500 text-3xl font-mono text-center tracking-widest",maxLength:6})}),P&&e.jsx("div",{className:`p-3 rounded-lg mb-4 ${P.type==="success"?"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400":"bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-400"}`,children:P.text}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>{S(!1),E(""),k(null)},className:"flex-1 py-3 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg font-medium hover:bg-gray-200 dark:hover:bg-gray-600",children:"Cancel"}),e.jsx("button",{onClick:q,disabled:A||_.length!==6,className:"flex-1 py-3 bg-orange-600 text-white rounded-lg font-medium hover:bg-orange-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:A?e.jsx(vt,{className:"w-5 h-5 animate-spin"}):e.jsxs(e.Fragment,{children:[e.jsx(wa,{className:"w-5 h-5"}),"Verify Code"]})})]})]})]})})]})}function sue(){const{isDeveloperMode:t,toggleDeveloperMode:s}=C0(),[r,a]=h.useState("profile"),[n,i]=h.useState(!1),[l,o]=h.useState({displayName:"Support Agent",email:"agent@example.com",phone:"+1 (555) 987-6543",notifyNewTickets:!0,notifyAssignments:!0,notifyEscalations:!0,soundAlerts:!0,autoAcceptChats:!1,maxConcurrentChats:3}),c=()=>{i(!0),setTimeout(()=>i(!1),3e3)},d=[{id:"profile",label:"Profile",icon:Es},{id:"notifications",label:"Notifications",icon:jl},{id:"preferences",label:"Preferences",icon:No},{id:"developer",label:"Developer Mode",icon:Ir}];return e.jsx(H0,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Settings"}),e.jsx("p",{className:"text-gray-500",children:"Manage your agent account settings"})]}),n&&e.jsxs("div",{className:"flex items-center gap-2 px-4 py-2 bg-green-100 text-green-700 rounded-lg",children:[e.jsx(be,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm font-medium",children:"Settings saved successfully"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[e.jsx(W,{className:"p-4 lg:col-span-1",children:e.jsx("nav",{className:"space-y-1",children:d.map(u=>{const m=u.icon;return e.jsxs("button",{onClick:()=>a(u.id),className:`w-full flex items-center gap-3 px-4 py-3 rounded-lg text-left transition-colors ${r===u.id?"bg-orange-50 text-orange-700":"text-gray-600 hover:bg-gray-50"}`,children:[e.jsx(m,{className:"w-5 h-5"}),e.jsx("span",{className:"font-medium",children:u.label}),u.id==="developer"&&t&&e.jsx("span",{className:"ml-auto px-2 py-0.5 bg-indigo-100 text-indigo-700 text-xs rounded-full",children:"ON"})]},u.id)})})}),e.jsxs("div",{className:"lg:col-span-3",children:[r==="profile"&&e.jsxs(W,{className:"p-6",children:[e.jsx("h2",{className:"text-lg font-semibold mb-6",children:"Profile Information"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Display Name"}),e.jsx("input",{type:"text",value:l.displayName,onChange:u=>o({...l,displayName:u.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),e.jsx("input",{type:"email",value:l.email,onChange:u=>o({...l,email:u.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone"}),e.jsx("input",{type:"tel",value:l.phone,onChange:u=>o({...l,phone:u.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500"})]}),e.jsxs("button",{onClick:c,className:"px-6 py-2 bg-orange-600 text-white rounded-lg hover:bg-orange-700 flex items-center gap-2",children:[e.jsx(oa,{className:"w-4 h-4"}),"Save Changes"]})]})]}),r==="notifications"&&e.jsxs(W,{className:"p-6",children:[e.jsx("h2",{className:"text-lg font-semibold mb-6",children:"Notification Settings"}),e.jsxs("div",{className:"space-y-4",children:[[{key:"notifyNewTickets",label:"New Ticket Alerts",desc:"Get notified when new tickets arrive"},{key:"notifyAssignments",label:"Assignment Notifications",desc:"Alerts when tickets are assigned to you"},{key:"notifyEscalations",label:"Escalation Alerts",desc:"Urgent notifications for escalated issues"},{key:"soundAlerts",label:"Sound Alerts",desc:"Play sound for incoming notifications"}].map(u=>e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:u.label}),e.jsx("p",{className:"text-sm text-gray-500",children:u.desc})]}),e.jsx("button",{onClick:()=>o({...l,[u.key]:!l[u.key]}),className:"text-gray-600",children:l[u.key]?e.jsx(kr,{className:"w-10 h-10 text-orange-600"}):e.jsx(Nr,{className:"w-10 h-10"})})]},u.key)),e.jsxs("button",{onClick:c,className:"px-6 py-2 bg-orange-600 text-white rounded-lg hover:bg-orange-700 flex items-center gap-2",children:[e.jsx(oa,{className:"w-4 h-4"}),"Save Changes"]})]})]}),r==="preferences"&&e.jsxs(W,{className:"p-6",children:[e.jsx("h2",{className:"text-lg font-semibold mb-6",children:"Chat Preferences"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:"Auto-Accept Chats"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Automatically accept incoming chat requests"})]}),e.jsx("button",{onClick:()=>o({...l,autoAcceptChats:!l.autoAcceptChats}),className:"text-gray-600",children:l.autoAcceptChats?e.jsx(kr,{className:"w-10 h-10 text-orange-600"}):e.jsx(Nr,{className:"w-10 h-10"})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Max Concurrent Chats"}),e.jsxs("select",{value:l.maxConcurrentChats,onChange:u=>o({...l,maxConcurrentChats:parseInt(u.target.value)}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500",children:[e.jsx("option",{value:1,children:"1 chat"}),e.jsx("option",{value:2,children:"2 chats"}),e.jsx("option",{value:3,children:"3 chats"}),e.jsx("option",{value:5,children:"5 chats"}),e.jsx("option",{value:10,children:"10 chats"})]})]}),e.jsxs("button",{onClick:c,className:"px-6 py-2 bg-orange-600 text-white rounded-lg hover:bg-orange-700 flex items-center gap-2",children:[e.jsx(oa,{className:"w-4 h-4"}),"Save Changes"]})]})]}),r==="developer"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx(W,{className:"p-6",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"p-3 bg-indigo-100 rounded-lg",children:e.jsx(Ir,{className:"w-6 h-6 text-indigo-600"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Developer Mode"}),e.jsx("p",{className:"text-gray-500 mt-1",children:"Enable developer mode to access API keys, webhooks, SDK documentation, and developer tools."})]})]}),e.jsx("button",{onClick:s,className:"text-gray-600",children:t?e.jsx(kr,{className:"w-12 h-12 text-indigo-600"}):e.jsx(Nr,{className:"w-12 h-12"})})]})}),t?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"p-4 bg-indigo-50 border border-indigo-200 rounded-lg flex items-start gap-3",children:[e.jsx(be,{className:"w-5 h-5 text-indigo-600 flex-shrink-0 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-indigo-900",children:"Developer Mode is Active"}),e.jsx("p",{className:"text-sm text-indigo-700 mt-1",children:"You now have access to the Developer section in your sidebar. Navigate there to manage API keys, webhooks, and view documentation."})]})]}),e.jsxs(W,{className:"p-6",children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-4",children:"What you can do with Developer Mode:"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"flex items-start gap-3 p-4 bg-gray-50 rounded-lg",children:[e.jsx("div",{className:"p-2 bg-indigo-100 rounded",children:e.jsx(Je,{className:"w-4 h-4 text-indigo-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-sm",children:"API Keys"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Generate and manage API credentials"})]})]}),e.jsxs("div",{className:"flex items-start gap-3 p-4 bg-gray-50 rounded-lg",children:[e.jsx("div",{className:"p-2 bg-indigo-100 rounded",children:e.jsx(jl,{className:"w-4 h-4 text-indigo-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-sm",children:"Webhooks"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Configure event notifications"})]})]}),e.jsxs("div",{className:"flex items-start gap-3 p-4 bg-gray-50 rounded-lg",children:[e.jsx("div",{className:"p-2 bg-indigo-100 rounded",children:e.jsx(or,{className:"w-4 h-4 text-indigo-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-sm",children:"Sandbox Testing"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Test your integration safely"})]})]}),e.jsxs("div",{className:"flex items-start gap-3 p-4 bg-gray-50 rounded-lg",children:[e.jsx("div",{className:"p-2 bg-indigo-100 rounded",children:e.jsx(Ir,{className:"w-4 h-4 text-indigo-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-sm",children:"SDK & Documentation"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Access code samples and guides"})]})]})]})]})]}):e.jsx(W,{className:"p-6",children:e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(Ir,{className:"w-8 h-8 text-gray-400"})}),e.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"Developer Mode is Disabled"}),e.jsx("p",{className:"text-gray-500 max-w-md mx-auto",children:"Enable developer mode to access API integration features, webhooks, and SDK documentation."})]})})]})]})]})]})})}function rue(){const[t,s]=h.useState(!1),[r]=h.useState({publicKey:"pk_live_51234567890abcdefghij",secretKey:"sk_live_abcdefghij1234567890xyz",testPublicKey:"pk_test_98765432109876543210",testSecretKey:"sk_test_zyxwvutsrqpo0987654321"}),[a]=h.useState({totalRequests:45672,successRate:99.2,avgLatency:145,activeWebhooks:3}),[n]=h.useState([{id:1,endpoint:"POST /v1/cards",status:200,latency:123,time:"2 mins ago"},{id:2,endpoint:"GET /v1/wallets",status:200,latency:89,time:"5 mins ago"},{id:3,endpoint:"POST /v1/transactions",status:400,latency:45,time:"8 mins ago"},{id:4,endpoint:"GET /v1/users/me",status:200,latency:67,time:"12 mins ago"},{id:5,endpoint:"POST /v1/webhooks",status:201,latency:234,time:"15 mins ago"}]),i=l=>{navigator.clipboard.writeText(l)};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs(W,{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("h2",{className:"text-lg font-semibold flex items-center gap-2",children:[e.jsx(wl,{className:"w-5 h-5 text-indigo-600"}),"API Keys"]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("span",{className:"px-3 py-1 bg-green-100 text-green-700 rounded-full text-xs font-medium",children:"Live Mode"})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[e.jsx("p",{className:"text-sm text-gray-500 mb-2",children:"Publishable Key"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("code",{className:"flex-1 text-sm bg-white px-3 py-2 rounded border font-mono truncate",children:r.publicKey}),e.jsx("button",{onClick:()=>i(r.publicKey),className:"p-2 hover:bg-gray-200 rounded",children:e.jsx(vs,{className:"w-4 h-4 text-gray-500"})})]})]}),e.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[e.jsx("p",{className:"text-sm text-gray-500 mb-2",children:"Secret Key"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("code",{className:"flex-1 text-sm bg-white px-3 py-2 rounded border font-mono truncate",children:t?r.secretKey:""}),e.jsx("button",{onClick:()=>s(!t),className:"p-2 hover:bg-gray-200 rounded",children:t?e.jsx(Ln,{className:"w-4 h-4 text-gray-500"}):e.jsx(es,{className:"w-4 h-4 text-gray-500"})}),e.jsx("button",{onClick:()=>i(r.secretKey),className:"p-2 hover:bg-gray-200 rounded",children:e.jsx(vs,{className:"w-4 h-4 text-gray-500"})})]})]})]}),e.jsxs("div",{className:"mt-4 p-3 bg-amber-50 border border-amber-200 rounded-lg flex items-start gap-2",children:[e.jsx(ut,{className:"w-5 h-5 text-amber-600 flex-shrink-0 mt-0.5"}),e.jsx("p",{className:"text-sm text-amber-800",children:"Never share your secret key publicly. Use environment variables in production."})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx(W,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-indigo-100 rounded-lg",children:e.jsx(S0,{className:"w-5 h-5 text-indigo-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Total Requests"}),e.jsx("p",{className:"text-xl font-semibold",children:a.totalRequests.toLocaleString()})]})]})}),e.jsx(W,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:e.jsx(be,{className:"w-5 h-5 text-green-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Success Rate"}),e.jsxs("p",{className:"text-xl font-semibold",children:[a.successRate,"%"]})]})]})}),e.jsx(W,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-cyan-100 rounded-lg",children:e.jsx(ui,{className:"w-5 h-5 text-cyan-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Avg Latency"}),e.jsxs("p",{className:"text-xl font-semibold",children:[a.avgLatency,"ms"]})]})]})}),e.jsx(W,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-purple-100 rounded-lg",children:e.jsx(Zc,{className:"w-5 h-5 text-purple-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Active Webhooks"}),e.jsx("p",{className:"text-xl font-semibold",children:a.activeWebhooks})]})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs(W,{className:"lg:col-span-2 p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-lg font-semibold",children:"Recent API Requests"}),e.jsxs("button",{className:"text-sm text-indigo-600 hover:text-indigo-700 flex items-center gap-1",children:[e.jsx(vt,{className:"w-4 h-4"}),"Refresh"]})]}),e.jsx("div",{className:"space-y-3",children:n.map(l=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded ${l.status>=200&&l.status<300?"bg-green-100 text-green-700":l.status>=400?"bg-red-100 text-red-700":"bg-yellow-100 text-yellow-700"}`,children:l.status}),e.jsx("code",{className:"text-sm font-mono text-gray-700",children:l.endpoint})]}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-500",children:[e.jsxs("span",{children:[l.latency,"ms"]}),e.jsx("span",{children:l.time})]})]},l.id))})]}),e.jsxs(W,{className:"p-6",children:[e.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Quick Start"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"p-4 bg-gray-900 rounded-lg",children:[e.jsx("p",{className:"text-xs text-gray-400 mb-2",children:"Install SDK"}),e.jsx("code",{className:"text-sm text-green-400 font-mono",children:"npm install @cardpay/sdk"})]}),e.jsxs("div",{className:"p-4 bg-gray-900 rounded-lg",children:[e.jsx("p",{className:"text-xs text-gray-400 mb-2",children:"Initialize"}),e.jsx("pre",{className:"text-sm text-green-400 font-mono whitespace-pre-wrap",children:`import { CardPaySDK } from '@cardpay/sdk';

const sdk = new CardPaySDK({
  apiKey: 'your-api-key',
  environment: 'sandbox'
});`})]}),e.jsx("a",{href:"/docs",className:"block text-center py-2 text-indigo-600 hover:text-indigo-700 text-sm font-medium",children:"View Full Documentation"})]})]})]})]})}function aue(){const[t,s]=h.useState({}),[r]=h.useState([{id:"key_1",name:"Production Key",type:"live",publicKey:"pk_live_51234567890abcdefghij",secretKey:"sk_live_abcdefghij1234567890xyz",created:"2024-01-15",lastUsed:"2 hours ago"},{id:"key_2",name:"Test Key",type:"test",publicKey:"pk_test_98765432109876543210",secretKey:"sk_test_zyxwvutsrqpo0987654321",created:"2024-01-10",lastUsed:"5 mins ago"}]),a=i=>{navigator.clipboard.writeText(i)},n=i=>{s(l=>({...l,[i]:!l[i]}))};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold",children:"API Keys"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Manage your API credentials"})]}),e.jsxs("button",{className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 flex items-center gap-2",children:[e.jsx(It,{className:"w-4 h-4"}),"Create New Key"]})]}),e.jsx("div",{className:"space-y-4",children:r.map(i=>e.jsxs(W,{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`p-2 rounded-lg ${i.type==="live"?"bg-green-100":"bg-amber-100"}`,children:e.jsx(wl,{className:`w-5 h-5 ${i.type==="live"?"text-green-600":"text-amber-600"}`})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold",children:i.name}),e.jsx("span",{className:`text-xs px-2 py-0.5 rounded-full ${i.type==="live"?"bg-green-100 text-green-700":"bg-amber-100 text-amber-700"}`,children:i.type==="live"?"Live":"Test"})]})]}),e.jsx("button",{className:"p-2 text-gray-400 hover:text-red-500 hover:bg-red-50 rounded",children:e.jsx(Or,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Publishable Key"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("code",{className:"flex-1 text-sm bg-gray-50 px-3 py-2 rounded border font-mono truncate",children:i.publicKey}),e.jsx("button",{onClick:()=>a(i.publicKey),className:"p-2 hover:bg-gray-100 rounded",children:e.jsx(vs,{className:"w-4 h-4 text-gray-500"})})]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Secret Key"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("code",{className:"flex-1 text-sm bg-gray-50 px-3 py-2 rounded border font-mono truncate",children:t[i.id]?i.secretKey:""}),e.jsx("button",{onClick:()=>n(i.id),className:"p-2 hover:bg-gray-100 rounded",children:t[i.id]?e.jsx(Ln,{className:"w-4 h-4 text-gray-500"}):e.jsx(es,{className:"w-4 h-4 text-gray-500"})}),e.jsx("button",{onClick:()=>a(i.secretKey),className:"p-2 hover:bg-gray-100 rounded",children:e.jsx(vs,{className:"w-4 h-4 text-gray-500"})})]})]})]}),e.jsxs("div",{className:"flex items-center gap-4 mt-4 pt-4 border-t text-xs text-gray-500",children:[e.jsxs("span",{children:["Created: ",i.created]}),e.jsxs("span",{children:["Last used: ",i.lastUsed]})]})]},i.id))})]})}function nue(){const[t]=h.useState([{id:"wh_1",url:"https://example.com/webhooks/payments",events:["payment.completed","payment.failed"],status:"active",lastTriggered:"5 mins ago"},{id:"wh_2",url:"https://api.myapp.com/hooks/cards",events:["card.created","card.frozen"],status:"active",lastTriggered:"2 hours ago"},{id:"wh_3",url:"https://test.example.com/webhook",events:["*"],status:"disabled",lastTriggered:"Never"}]);return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold",children:"Webhooks"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Configure webhook endpoints for event notifications"})]}),e.jsxs("button",{className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 flex items-center gap-2",children:[e.jsx(It,{className:"w-4 h-4"}),"Add Endpoint"]})]}),e.jsx("div",{className:"space-y-4",children:t.map(s=>e.jsxs(W,{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:`p-2 rounded-lg ${s.status==="active"?"bg-green-100":"bg-gray-100"}`,children:e.jsx(Zc,{className:`w-5 h-5 ${s.status==="active"?"text-green-600":"text-gray-400"}`})}),e.jsxs("div",{children:[e.jsx("code",{className:"text-sm font-mono",children:s.url}),e.jsx("div",{className:"flex flex-wrap gap-1 mt-2",children:s.events.map((r,a)=>e.jsx("span",{className:"px-2 py-0.5 bg-indigo-50 text-indigo-700 text-xs rounded",children:r},a))})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${s.status==="active"?"bg-green-100 text-green-700":"bg-gray-100 text-gray-500"}`,children:s.status}),e.jsx("button",{className:"p-2 text-gray-400 hover:text-red-500 hover:bg-red-50 rounded",children:e.jsx(Or,{className:"w-4 h-4"})})]})]}),e.jsxs("div",{className:"mt-4 pt-4 border-t text-xs text-gray-500",children:["Last triggered: ",s.lastTriggered]})]},s.id))}),e.jsxs(W,{className:"p-6",children:[e.jsx("h3",{className:"font-semibold mb-4",children:"Webhook Signature Verification"}),e.jsx("div",{className:"p-4 bg-gray-900 rounded-lg",children:e.jsx("pre",{className:"text-sm text-green-400 font-mono whitespace-pre-wrap",children:`// Verify webhook signature
const isValid = sdk.webhooks.verifySignature({
  payload: req.body,
  signature: req.headers['x-webhook-signature'],
  secret: process.env.WEBHOOK_SECRET
});`})})]})]})}function iue(){const[t]=h.useState([{id:1,method:"POST",endpoint:"/v1/payments/charge",status:200,latency:245,time:"2024-01-20 14:32:15",requestId:"req_abc123"},{id:2,method:"GET",endpoint:"/v1/wallets/balance",status:200,latency:89,time:"2024-01-20 14:31:42",requestId:"req_def456"},{id:3,method:"POST",endpoint:"/v1/cards/virtual",status:400,latency:156,time:"2024-01-20 14:30:18",requestId:"req_ghi789"},{id:4,method:"GET",endpoint:"/v1/transactions",status:200,latency:312,time:"2024-01-20 14:28:55",requestId:"req_jkl012"},{id:5,method:"POST",endpoint:"/v1/transfers",status:201,latency:423,time:"2024-01-20 14:27:33",requestId:"req_mno345"}]);return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold",children:"Request Logs"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Monitor your API requests"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("select",{className:"px-3 py-2 border border-gray-300 rounded-lg text-sm",children:[e.jsx("option",{children:"All Methods"}),e.jsx("option",{children:"GET"}),e.jsx("option",{children:"POST"}),e.jsx("option",{children:"PUT"}),e.jsx("option",{children:"DELETE"})]}),e.jsxs("select",{className:"px-3 py-2 border border-gray-300 rounded-lg text-sm",children:[e.jsx("option",{children:"All Status"}),e.jsx("option",{children:"2xx Success"}),e.jsx("option",{children:"4xx Client Error"}),e.jsx("option",{children:"5xx Server Error"})]})]})]}),e.jsx(W,{className:"overflow-hidden",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Method"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Endpoint"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Latency"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Time"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Request ID"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:t.map(s=>e.jsxs("tr",{className:"hover:bg-gray-50 cursor-pointer",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded ${s.method==="GET"?"bg-blue-100 text-blue-700":s.method==="POST"?"bg-green-100 text-green-700":s.method==="PUT"?"bg-amber-100 text-amber-700":"bg-red-100 text-red-700"}`,children:s.method})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("code",{className:"text-sm font-mono",children:s.endpoint})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded ${s.status>=200&&s.status<300?"bg-green-100 text-green-700":s.status>=400&&s.status<500?"bg-amber-100 text-amber-700":"bg-red-100 text-red-700"}`,children:s.status})}),e.jsxs("td",{className:"px-6 py-4 text-sm text-gray-500",children:[s.latency,"ms"]}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-500",children:s.time}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("code",{className:"text-xs text-gray-500",children:s.requestId})})]},s.id))})]})})]})}function lue(){const[t,s]=h.useState("wallet.getBalance"),[r,a]=h.useState(null),n=[{id:"wallet.getBalance",name:"Get Wallet Balance",method:"GET"},{id:"wallet.topUp",name:"Top Up Wallet",method:"POST"},{id:"cards.createVirtual",name:"Create Virtual Card",method:"POST"},{id:"payments.charge",name:"Charge Payment",method:"POST"},{id:"transfers.send",name:"Send Transfer",method:"POST"}],i=()=>{a(JSON.stringify({success:!0,data:{balance:125e3,currency:"SLE",available:12e4,pending:5e3},requestId:"req_sandbox_"+Date.now()},null,2))};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold",children:"API Sandbox"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Test API endpoints in a safe environment"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(W,{className:"p-6",children:[e.jsx("h3",{className:"font-semibold mb-4",children:"Select Endpoint"}),e.jsx("div",{className:"space-y-2",children:n.map(l=>e.jsxs("button",{onClick:()=>s(l.id),className:`w-full flex items-center justify-between p-3 rounded-lg text-left ${t===l.id?"bg-indigo-50 border-2 border-indigo-500":"bg-gray-50 hover:bg-gray-100"}`,children:[e.jsx("span",{className:"font-medium text-sm",children:l.name}),e.jsx("span",{className:`px-2 py-0.5 text-xs rounded ${l.method==="GET"?"bg-blue-100 text-blue-700":"bg-green-100 text-green-700"}`,children:l.method})]},l.id))}),e.jsxs("button",{onClick:i,className:"w-full mt-4 px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 flex items-center justify-center gap-2",children:[e.jsx(If,{className:"w-4 h-4"}),"Run Test"]})]}),e.jsxs(W,{className:"p-6",children:[e.jsx("h3",{className:"font-semibold mb-4",children:"Response"}),e.jsx("div",{className:"bg-gray-900 rounded-lg p-4 min-h-[300px]",children:r?e.jsx("pre",{className:"text-sm text-green-400 font-mono whitespace-pre-wrap",children:r}):e.jsx("p",{className:"text-gray-500 text-sm",children:"Run a test to see the response"})})]})]})]})}function oue(){const[t,s]=h.useState("javascript"),r=[{id:"javascript",name:"JavaScript/Node.js"},{id:"python",name:"Python"},{id:"go",name:"Go"},{id:"php",name:"PHP"},{id:"java",name:"Java"}],a={javascript:`import { CardPaySDK } from '@cardpay/sdk';

const sdk = new CardPaySDK({
  apiKey: process.env.CARDPAY_API_KEY,
  environment: 'sandbox'
});

// Get wallet balance
const balance = await sdk.wallet.getBalance();
console.log(balance);

// Create virtual card
const card = await sdk.cards.createVirtual({
  spendingLimit: 500000,
  currency: 'SLE'
});

// Process payment
const payment = await sdk.payments.charge({
  amount: 25000,
  currency: 'SLE',
  customerId: 'cust_123'
});`,python:`from cardpay import CardPaySDK

sdk = CardPaySDK(
    api_key=os.environ['CARDPAY_API_KEY'],
    environment='sandbox'
)

# Get wallet balance
balance = sdk.wallet.get_balance()
print(balance)

# Create virtual card
card = sdk.cards.create_virtual(
    spending_limit=500000,
    currency='SLE'
)

# Process payment
payment = sdk.payments.charge(
    amount=25000,
    currency='SLE',
    customer_id='cust_123'
)`,go:`package main

import (
    "github.com/cardpay/sdk-go"
)

func main() {
    client := cardpay.NewClient(
        os.Getenv("CARDPAY_API_KEY"),
        cardpay.WithEnvironment("sandbox"),
    )

    // Get wallet balance
    balance, _ := client.Wallet.GetBalance()

    // Create virtual card
    card, _ := client.Cards.CreateVirtual(&cardpay.CardParams{
        SpendingLimit: 500000,
        Currency: "SLE",
    })

    // Process payment
    payment, _ := client.Payments.Charge(&cardpay.ChargeParams{
        Amount: 25000,
        Currency: "SLE",
        CustomerID: "cust_123",
    })
}`,php:`<?php
use SoftTouch\\SDK\\CardPaySDK;

$sdk = new CardPaySDK([
    'api_key' => getenv('CARDPAY_API_KEY'),
    'environment' => 'sandbox'
]);

// Get wallet balance
$balance = $sdk->wallet->getBalance();

// Create virtual card
$card = $sdk->cards->createVirtual([
    'spending_limit' => 500000,
    'currency' => 'SLE'
]);

// Process payment
$payment = $sdk->payments->charge([
    'amount' => 25000,
    'currency' => 'SLE',
    'customer_id' => 'cust_123'
]);`,java:`import com.cardpay.sdk.CardPaySDK;

public class Main {
    public static void main(String[] args) {
        CardPaySDK sdk = new CardPaySDK.Builder()
            .apiKey(System.getenv("CARDPAY_API_KEY"))
            .environment("sandbox")
            .build();

        // Get wallet balance
        Balance balance = sdk.wallet().getBalance();

        // Create virtual card
        Card card = sdk.cards().createVirtual(
            new VirtualCardParams()
                .setSpendingLimit(500000)
                .setCurrency("SLE")
        );

        // Process payment
        Payment payment = sdk.payments().charge(
            new ChargeParams()
                .setAmount(25000)
                .setCurrency("SLE")
                .setCustomerId("cust_123")
        );
    }
}`};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold",children:"SDK & Documentation"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Code examples and integration guides"})]}),e.jsxs(W,{className:"p-6",children:[e.jsx("div",{className:"flex items-center gap-4 mb-4 border-b pb-4",children:r.map(n=>e.jsx("button",{onClick:()=>s(n.id),className:`px-4 py-2 rounded-lg text-sm font-medium ${t===n.id?"bg-indigo-100 text-indigo-700":"text-gray-500 hover:bg-gray-100"}`,children:n.name},n.id))}),e.jsx("div",{className:"bg-gray-900 rounded-lg p-4",children:e.jsx("pre",{className:"text-sm text-green-400 font-mono whitespace-pre-wrap overflow-x-auto",children:a[t]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs(W,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("div",{className:"p-2 bg-indigo-100 rounded-lg",children:e.jsx(OT,{className:"w-5 h-5 text-indigo-600"})}),e.jsx("h3",{className:"font-semibold",children:"NPM Package"})]}),e.jsx("p",{className:"text-sm text-gray-500 mb-3",children:"Install via npm or yarn"}),e.jsx("code",{className:"text-sm bg-gray-100 px-3 py-2 rounded block",children:"npm install @cardpay/sdk"})]}),e.jsxs(W,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:e.jsx(uV,{className:"w-5 h-5 text-green-600"})}),e.jsx("h3",{className:"font-semibold",children:"API Reference"})]}),e.jsx("p",{className:"text-sm text-gray-500 mb-3",children:"Complete API documentation"}),e.jsxs("a",{href:"/docs",className:"text-sm text-indigo-600 hover:text-indigo-700 flex items-center gap-1",children:["View Docs ",e.jsx(Fr,{className:"w-3 h-3"})]})]}),e.jsxs(W,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("div",{className:"p-2 bg-purple-100 rounded-lg",children:e.jsx(F1,{className:"w-5 h-5 text-purple-600"})}),e.jsx("h3",{className:"font-semibold",children:"GitHub"})]}),e.jsx("p",{className:"text-sm text-gray-500 mb-3",children:"Source code and examples"}),e.jsxs("a",{href:"#",className:"text-sm text-indigo-600 hover:text-indigo-700 flex items-center gap-1",children:["View on GitHub ",e.jsx(Fr,{className:"w-3 h-3"})]})]})]})]})}function cue(){const[t,s]=h.useState("authorization"),[r,a]=h.useState(!1),[n,i]=h.useState([]),[l,o]=h.useState({cardId:"",amount:"",currency:"USD",merchantName:"",merchantCategory:"5411",merchantCity:"",merchantCountry:"US",authorizationType:"purchase"}),c=[{code:"5411",name:"Grocery Stores"},{code:"5812",name:"Restaurants"},{code:"5912",name:"Drug Stores"},{code:"5541",name:"Gas Stations"},{code:"5311",name:"Department Stores"},{code:"5999",name:"Miscellaneous Retail"},{code:"7011",name:"Hotels & Lodging"},{code:"4111",name:"Transportation"},{code:"6011",name:"ATM/Cash Withdrawal"},{code:"7995",name:"Gambling"}],d=async()=>{a(!0),await new Promise(g=>setTimeout(g,1500));const x={id:`sim_${Date.now()}`,type:t.charAt(0).toUpperCase()+t.slice(1),status:Math.random()>.2?"success":"failed",request:{cardId:l.cardId,amount:parseFloat(l.amount)||0,currency:l.currency,merchant:{name:l.merchantName,category:l.merchantCategory,city:l.merchantCity,country:l.merchantCountry},type:l.authorizationType},response:Math.random()>.2?{approved:!0,authorizationCode:`AUTH${Math.random().toString(36).substr(2,8).toUpperCase()}`,balance:1e3-(parseFloat(l.amount)||0),message:"Transaction approved"}:{approved:!1,declineCode:"INSUFFICIENT_FUNDS",message:"Transaction declined due to insufficient funds"},timestamp:new Date().toISOString(),duration:Math.floor(Math.random()*200)+50};i([x,...n]),a(!1)},u=()=>{o({cardId:"",amount:"",currency:"USD",merchantName:"",merchantCategory:"5411",merchantCity:"",merchantCountry:"US",authorizationType:"purchase"})},m=x=>{navigator.clipboard.writeText(x)},p=x=>{switch(x){case"success":return e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-700",children:[e.jsx(be,{className:"w-3 h-3"})," Success"]});case"failed":return e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium bg-red-100 text-red-700",children:[e.jsx(ft,{className:"w-3 h-3"})," Failed"]});default:return e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium bg-yellow-100 text-yellow-700",children:[e.jsx(it,{className:"w-3 h-3"})," Pending"]})}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold",children:"Transaction Simulator"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Test card transactions in sandbox environment"})]}),e.jsxs("span",{className:"px-3 py-1 bg-yellow-100 text-yellow-700 rounded-full text-xs font-medium flex items-center gap-1",children:[e.jsx(HT,{className:"w-3 h-3"}),"Sandbox Mode"]})]}),e.jsx(W,{className:"p-4 bg-blue-50 border-blue-200",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(Lt,{className:"w-5 h-5 text-blue-600 flex-shrink-0 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-blue-800",children:"Sandbox Environment"}),e.jsx("p",{className:"text-sm text-blue-700 mt-1",children:'All transactions in the simulator are test transactions and do not affect real cards or accounts. Use test card IDs starting with "card_test_" for simulations.'})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[e.jsx(W,{className:"p-1",children:e.jsx("div",{className:"flex gap-1",children:["authorization","clearing","refund","reversal"].map(x=>e.jsx("button",{onClick:()=>s(x),className:`flex-1 px-4 py-2 text-sm font-medium rounded-lg transition-colors ${t===x?"bg-indigo-600 text-white":"text-gray-600 hover:bg-gray-100"}`,children:x.charAt(0).toUpperCase()+x.slice(1)},x))})}),e.jsxs(W,{className:"p-6",children:[e.jsxs("h3",{className:"text-md font-semibold mb-4",children:[t==="authorization"&&"Simulate Authorization",t==="clearing"&&"Simulate Clearing",t==="refund"&&"Simulate Refund",t==="reversal"&&"Simulate Reversal"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"md:col-span-2",children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[e.jsx(Je,{className:"w-4 h-4 inline mr-1"}),"Card ID"]}),e.jsx("input",{type:"text",value:l.cardId,onChange:x=>o({...l,cardId:x.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 font-mono text-sm",placeholder:"card_test_1234567890"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[e.jsx(js,{className:"w-4 h-4 inline mr-1"}),"Amount"]}),e.jsx("input",{type:"number",step:"0.01",value:l.amount,onChange:x=>o({...l,amount:x.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"100.00"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Currency"}),e.jsxs("div",{className:"relative",children:[e.jsxs("select",{value:l.currency,onChange:x=>o({...l,currency:x.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 appearance-none",children:[e.jsx("option",{value:"USD",children:"USD - US Dollar"}),e.jsx("option",{value:"NGN",children:"NGN - Nigerian Naira"}),e.jsx("option",{value:"EUR",children:"EUR - Euro"}),e.jsx("option",{value:"GBP",children:"GBP - British Pound"})]}),e.jsx(zs,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400 pointer-events-none"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[e.jsx(Ft,{className:"w-4 h-4 inline mr-1"}),"Merchant Name"]}),e.jsx("input",{type:"text",value:l.merchantName,onChange:x=>o({...l,merchantName:x.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"Test Merchant"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Merchant Category (MCC)"}),e.jsxs("div",{className:"relative",children:[e.jsx("select",{value:l.merchantCategory,onChange:x=>o({...l,merchantCategory:x.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 appearance-none",children:c.map(x=>e.jsxs("option",{value:x.code,children:[x.code," - ",x.name]},x.code))}),e.jsx(zs,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400 pointer-events-none"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[e.jsx(Vi,{className:"w-4 h-4 inline mr-1"}),"Merchant City"]}),e.jsx("input",{type:"text",value:l.merchantCity,onChange:x=>o({...l,merchantCity:x.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"New York"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Merchant Country"}),e.jsxs("div",{className:"relative",children:[e.jsxs("select",{value:l.merchantCountry,onChange:x=>o({...l,merchantCountry:x.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 appearance-none",children:[e.jsx("option",{value:"US",children:"United States"}),e.jsx("option",{value:"NG",children:"Nigeria"}),e.jsx("option",{value:"GB",children:"United Kingdom"}),e.jsx("option",{value:"DE",children:"Germany"}),e.jsx("option",{value:"FR",children:"France"})]}),e.jsx(zs,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400 pointer-events-none"})]})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Authorization Type"}),e.jsx("div",{className:"flex gap-4",children:["purchase","atm_withdrawal","preauth","refund"].map(x=>e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"radio",name:"authType",value:x,checked:l.authorizationType===x,onChange:g=>o({...l,authorizationType:g.target.value}),className:"text-indigo-600 focus:ring-indigo-500"}),e.jsx("span",{className:"text-sm text-gray-700 capitalize",children:x.replace("_"," ")})]},x))})]})]}),e.jsxs("div",{className:"flex gap-3 mt-6",children:[e.jsx("button",{onClick:d,disabled:r,className:"flex-1 px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:r?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Simulating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(If,{className:"w-4 h-4"}),"Run Simulation"]})}),e.jsxs("button",{onClick:u,className:"px-4 py-2 bg-white border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 flex items-center gap-2",children:[e.jsx(Ru,{className:"w-4 h-4"}),"Reset"]})]})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs(W,{className:"p-6",children:[e.jsxs("h3",{className:"text-md font-semibold mb-4 flex items-center gap-2",children:[e.jsx(ui,{className:"w-5 h-5 text-yellow-600"}),"Test Cards"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsx("span",{className:"text-xs font-medium text-green-600",children:"Always Approved"}),e.jsx("button",{onClick:()=>{o({...l,cardId:"card_test_approved"}),m("card_test_approved")},className:"p-1 hover:bg-gray-200 rounded",children:e.jsx(vs,{className:"w-3 h-3 text-gray-500"})})]}),e.jsx("code",{className:"text-sm font-mono text-gray-700",children:"card_test_approved"})]}),e.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsx("span",{className:"text-xs font-medium text-red-600",children:"Always Declined"}),e.jsx("button",{onClick:()=>{o({...l,cardId:"card_test_declined"}),m("card_test_declined")},className:"p-1 hover:bg-gray-200 rounded",children:e.jsx(vs,{className:"w-3 h-3 text-gray-500"})})]}),e.jsx("code",{className:"text-sm font-mono text-gray-700",children:"card_test_declined"})]}),e.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsx("span",{className:"text-xs font-medium text-yellow-600",children:"Insufficient Funds"}),e.jsx("button",{onClick:()=>{o({...l,cardId:"card_test_nsf"}),m("card_test_nsf")},className:"p-1 hover:bg-gray-200 rounded",children:e.jsx(vs,{className:"w-3 h-3 text-gray-500"})})]}),e.jsx("code",{className:"text-sm font-mono text-gray-700",children:"card_test_nsf"})]}),e.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsx("span",{className:"text-xs font-medium text-purple-600",children:"Requires 3DS"}),e.jsx("button",{onClick:()=>{o({...l,cardId:"card_test_3ds"}),m("card_test_3ds")},className:"p-1 hover:bg-gray-200 rounded",children:e.jsx(vs,{className:"w-3 h-3 text-gray-500"})})]}),e.jsx("code",{className:"text-sm font-mono text-gray-700",children:"card_test_3ds"})]})]})]}),e.jsxs(W,{className:"p-6",children:[e.jsx("h3",{className:"text-md font-semibold mb-4",children:"Response Codes"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"00"}),e.jsx("span",{className:"text-green-600",children:"Approved"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"51"}),e.jsx("span",{className:"text-red-600",children:"Insufficient Funds"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"05"}),e.jsx("span",{className:"text-red-600",children:"Do Not Honor"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"14"}),e.jsx("span",{className:"text-red-600",children:"Invalid Card"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"54"}),e.jsx("span",{className:"text-red-600",children:"Expired Card"})]})]})]})]})]}),n.length>0&&e.jsxs(W,{className:"overflow-hidden",children:[e.jsxs("div",{className:"px-6 py-4 border-b border-gray-200 flex justify-between items-center",children:[e.jsx("h3",{className:"text-md font-semibold",children:"Simulation History"}),e.jsx("button",{onClick:()=>i([]),className:"text-sm text-gray-500 hover:text-gray-700",children:"Clear History"})]}),e.jsx("div",{className:"divide-y divide-gray-200",children:n.map(x=>e.jsxs("div",{className:"p-4 hover:bg-gray-50",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"font-mono text-sm text-gray-500",children:x.id}),e.jsx("span",{className:"px-2 py-1 bg-gray-100 text-gray-700 rounded text-xs font-medium",children:x.type}),p(x.status)]}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-500",children:[e.jsxs("span",{children:[x.duration,"ms"]}),e.jsx("span",{children:new Date(x.timestamp).toLocaleTimeString()})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"p-3 bg-gray-900 rounded-lg",children:[e.jsx("p",{className:"text-xs text-gray-400 mb-1",children:"Request"}),e.jsx("pre",{className:"text-xs text-green-400 font-mono overflow-x-auto",children:JSON.stringify(x.request,null,2)})]}),e.jsxs("div",{className:"p-3 bg-gray-900 rounded-lg",children:[e.jsx("p",{className:"text-xs text-gray-400 mb-1",children:"Response"}),e.jsx("pre",{className:"text-xs text-green-400 font-mono overflow-x-auto",children:JSON.stringify(x.response,null,2)})]})]})]},x.id))})]})]})}function due(){return e.jsx(mk,{homeRoute:"/agent",homeLabel:"Agent Portal",basePath:"/agent/developer",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Developer Dashboard"}),e.jsx("p",{className:"text-gray-500",children:"Manage your API integration and developer resources"})]}),e.jsxs(v1,{children:[e.jsx(Te,{index:!0,element:e.jsx(rue,{})}),e.jsx(Te,{path:"api-keys",element:e.jsx(aue,{})}),e.jsx(Te,{path:"webhooks",element:e.jsx(nue,{})}),e.jsx(Te,{path:"logs",element:e.jsx(iue,{})}),e.jsx(Te,{path:"sandbox",element:e.jsx(lue,{})}),e.jsx(Te,{path:"simulator",element:e.jsx(cue,{})}),e.jsx(Te,{path:"docs",element:e.jsx(oue,{})})]})]})})}function uue(){const{user:t}=wt(),[s,r]=h.useState([]),[a,n]=h.useState(!0),[i,l]=h.useState("all"),[o,c]=h.useState(""),[d,u]=h.useState("month"),[m,p]=h.useState(1),[x,g]=h.useState(!0),f=20,[b,j]=h.useState({totalCashIn:0,totalCashOut:0,totalCommissions:0,transactionCount:0}),[v,w]=h.useState(null);h.useEffect(()=>{Ut.getDefaultCurrency().then(w)},[]),h.useEffect(()=>{t!=null&&t.id&&_()},[t==null?void 0:t.id,i,d,m]);const y=(v==null?void 0:v.symbol)||"Le ",C=P=>`${y}${P.toLocaleString(void 0,{minimumFractionDigits:0,maximumFractionDigits:0})}`,S=()=>{const P=new Date,k=new Date(P.getFullYear(),P.getMonth(),P.getDate());switch(d){case"today":return{startDate:k,endDate:P};case"week":const D=new Date(k);return D.setDate(D.getDate()-7),{startDate:D,endDate:P};case"month":const $=new Date(k);return $.setMonth($.getMonth()-1),{startDate:$,endDate:P};default:return{}}},_=async()=>{if(t!=null&&t.id){n(!0);try{const{startDate:P,endDate:k}=S(),D=i==="all"?void 0:i,$=await wr.getTransactions(t.id,{type:D,startDate:P,endDate:k,limit:f,offset:(m-1)*f});r($),g($.length===f);let L=0,B=0,T=0;for(const O of $)O.type==="CASH_IN"||O.type==="DEPOSIT"?L+=O.amount:O.type==="CASH_OUT"&&(B+=O.amount),T+=O.commission||0;j({totalCashIn:L,totalCashOut:B,totalCommissions:T,transactionCount:$.length})}catch(P){console.error("Error fetching transactions:",P)}finally{n(!1)}}},E=s.filter(P=>{var D,$,L;if(!o)return!0;const k=o.toLowerCase();return((D=P.reference)==null?void 0:D.toLowerCase().includes(k))||(($=P.description)==null?void 0:$.toLowerCase().includes(k))||((L=P.customerName)==null?void 0:L.toLowerCase().includes(k))}),A=P=>new Date(P).toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),R=P=>{switch(P){case"CASH_IN":case"DEPOSIT":return e.jsx(la,{className:"w-4 h-4 text-green-600 dark:text-green-400"});case"CASH_OUT":return e.jsx(xs,{className:"w-4 h-4 text-red-600 dark:text-red-400"});default:return e.jsx(Ba,{className:"w-4 h-4 text-blue-600 dark:text-blue-400"})}},I=P=>{switch(P){case"CASH_IN":case"DEPOSIT":return"bg-green-100 dark:bg-green-900/30";case"CASH_OUT":return"bg-red-100 dark:bg-red-900/30";default:return"bg-blue-100 dark:bg-blue-900/30"}},N=P=>{switch(P){case"CASH_IN":case"DEPOSIT":return"text-green-600 dark:text-green-400";case"CASH_OUT":return"text-red-600 dark:text-red-400";default:return"text-gray-900 dark:text-white"}};return e.jsx(H0,{children:e.jsxs(Oe.div,{className:"space-y-6",initial:{opacity:0},animate:{opacity:1},children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Transactions"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"View your transaction history"})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs(Oe.button,{whileHover:{scale:1.02},whileTap:{scale:.98},className:"px-4 py-2 text-sm bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 flex items-center gap-2",children:[e.jsx(ws,{className:"w-4 h-4"}),"Export"]}),e.jsxs(Oe.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:_,className:"px-4 py-2 text-sm bg-orange-600 text-white rounded-lg hover:bg-orange-700 flex items-center gap-2",children:[e.jsx(vt,{className:`w-4 h-4 ${a?"animate-spin":""}`}),"Refresh"]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsx(we,{className:"p-4",delay:.1,children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-green-100 dark:bg-green-900/30 rounded-lg",children:e.jsx(la,{className:"w-5 h-5 text-green-600 dark:text-green-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Total Cash In"}),e.jsx("p",{className:"text-lg font-bold text-green-600 dark:text-green-400",children:C(b.totalCashIn)})]})]})}),e.jsx(we,{className:"p-4",delay:.15,children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-red-100 dark:bg-red-900/30 rounded-lg",children:e.jsx(xs,{className:"w-5 h-5 text-red-600 dark:text-red-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Total Cash Out"}),e.jsx("p",{className:"text-lg font-bold text-red-600 dark:text-red-400",children:C(b.totalCashOut)})]})]})}),e.jsx(we,{className:"p-4",delay:.2,children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-purple-100 dark:bg-purple-900/30 rounded-lg",children:e.jsx(Ba,{className:"w-5 h-5 text-purple-600 dark:text-purple-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Commissions"}),e.jsx("p",{className:"text-lg font-bold text-purple-600 dark:text-purple-400",children:C(b.totalCommissions)})]})]})}),e.jsx(we,{className:"p-4",delay:.25,children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-900/30 rounded-lg",children:e.jsx(Mn,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Transactions"}),e.jsx("p",{className:"text-lg font-bold text-blue-600 dark:text-blue-400",children:b.transactionCount})]})]})})]}),e.jsx(we,{className:"p-4",delay:.3,children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(ts,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search by reference, description...",value:o,onChange:P=>c(P.target.value),className:"w-full pl-10 pr-4 py-2.5 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-orange-500"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Bn,{className:"w-5 h-5 text-gray-400"}),e.jsxs("select",{value:i,onChange:P=>{l(P.target.value),p(1)},className:"px-4 py-2.5 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-orange-500",children:[e.jsx("option",{value:"all",children:"All Types"}),e.jsx("option",{value:"CASH_IN",children:"Cash In"}),e.jsx("option",{value:"CASH_OUT",children:"Cash Out"}),e.jsx("option",{value:"TRANSFER",children:"Transfers"}),e.jsx("option",{value:"COMMISSION",children:"Commissions"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Mn,{className:"w-5 h-5 text-gray-400"}),e.jsxs("select",{value:d,onChange:P=>{u(P.target.value),p(1)},className:"px-4 py-2.5 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-orange-500",children:[e.jsx("option",{value:"today",children:"Today"}),e.jsx("option",{value:"week",children:"Last 7 Days"}),e.jsx("option",{value:"month",children:"Last 30 Days"}),e.jsx("option",{value:"all",children:"All Time"})]})]})]})}),e.jsx(we,{className:"overflow-hidden",delay:.4,children:a?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx(vt,{className:"w-8 h-8 animate-spin text-gray-400"})}):E.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Ba,{className:"w-12 h-12 text-gray-300 dark:text-gray-600 mx-auto mb-3"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"No transactions found"}),e.jsx("p",{className:"text-sm text-gray-400 dark:text-gray-500",children:"Try adjusting your filters"})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"hidden md:block overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"text-left text-xs text-gray-500 dark:text-gray-400 border-b border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-800/50",children:[e.jsx("th",{className:"px-6 py-3 font-medium",children:"Type"}),e.jsx("th",{className:"px-6 py-3 font-medium",children:"Reference"}),e.jsx("th",{className:"px-6 py-3 font-medium",children:"Description"}),e.jsx("th",{className:"px-6 py-3 font-medium",children:"Amount"}),e.jsx("th",{className:"px-6 py-3 font-medium",children:"Commission"}),e.jsx("th",{className:"px-6 py-3 font-medium",children:"Status"}),e.jsx("th",{className:"px-6 py-3 font-medium",children:"Date"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-100 dark:divide-gray-700",children:E.map(P=>e.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700/50",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:`p-2 rounded-lg ${I(P.type)}`,children:R(P.type)}),e.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:P.type.replace("_"," ")})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:"font-mono text-sm text-gray-600 dark:text-gray-400",children:P.reference})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:P.description||"-"})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("span",{className:`font-semibold ${N(P.type)}`,children:[P.type==="CASH_OUT"?"-":"+",C(P.amount)]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:"text-sm text-purple-600 dark:text-purple-400",children:P.commission>0?`+${C(P.commission)}`:"-"})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${P.status==="COMPLETED"?"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400":P.status==="PENDING"?"bg-yellow-100 dark:bg-yellow-900/30 text-yellow-700 dark:text-yellow-400":"bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-400"}`,children:P.status})}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-500 dark:text-gray-400",children:A(P.createdAt)})]},P.id))})]})}),e.jsx("div",{className:"md:hidden divide-y divide-gray-100 dark:divide-gray-700",children:E.map(P=>e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`p-2 rounded-lg ${I(P.type)}`,children:R(P.type)}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:P.type.replace("_"," ")}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:P.reference})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:`font-bold ${N(P.type)}`,children:[P.type==="CASH_OUT"?"-":"+",C(P.amount)]}),P.commission>0&&e.jsxs("p",{className:"text-xs text-purple-600 dark:text-purple-400",children:["+",C(P.commission)," comm."]})]})]}),e.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500 dark:text-gray-400",children:[e.jsx("span",{children:P.description||"-"}),e.jsx("span",{children:A(P.createdAt)})]})]},P.id))}),e.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-t border-gray-200 dark:border-gray-700",children:[e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Page ",m,"  Showing ",E.length," transactions"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:()=>p(P=>Math.max(1,P-1)),disabled:m===1,className:"px-3 py-1.5 text-sm bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50 dark:hover:bg-gray-600 flex items-center gap-1",children:[e.jsx(Zj,{className:"w-4 h-4"}),"Previous"]}),e.jsxs("button",{onClick:()=>p(P=>P+1),disabled:!x,className:"px-3 py-1.5 text-sm bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50 dark:hover:bg-gray-600 flex items-center gap-1",children:["Next",e.jsx(Vs,{className:"w-4 h-4"})]})]})]})]})})]})})}function mue(){const{user:t}=wt(),[s,r]=h.useState([]),[a,n]=h.useState([]),[i,l]=h.useState(null),[o,c]=h.useState(!0),[d,u]=h.useState("pending"),[m,p]=h.useState(!1),[x,g]=h.useState(""),[f,b]=h.useState(!1),[j,v]=h.useState(null),[w,y]=h.useState(null),[C,S]=h.useState(null);h.useEffect(()=>{Ut.getDefaultCurrency().then(S),t!=null&&t.id&&A()},[t==null?void 0:t.id]);const _=(C==null?void 0:C.symbol)||"Le ",E=D=>`${_}${D.toLocaleString(void 0,{minimumFractionDigits:0,maximumFractionDigits:0})}`,A=async()=>{if(t!=null&&t.id){c(!0);try{const[D,$,L]=await Promise.all([wr.getPendingCashOuts(t.id,50),wr.getCashOutHistory(t.id,20),wr.getDashboardStats(t.id)]);r(D),n($),l(L)}catch(D){console.error("Error fetching data:",D)}finally{c(!1)}}},R=async()=>{if(!x||x.length!==6){y({type:"error",text:"Please enter a valid 6-digit code"});return}b(!0),y(null);try{const D=await wr.verifyCashOutCode(x);D.success&&D.request?(v(D.request),y({type:"success",text:"Code verified! Confirm to dispense cash."})):y({type:"error",text:D.error||"Invalid or expired code"})}catch{y({type:"error",text:"Failed to verify code"})}finally{b(!1)}},I=async()=>{if(!(!(t!=null&&t.id)||!j)){b(!0);try{const D=await wr.completeCashOut({requestId:j.id,agentId:t.id,code:x});D.success?(y({type:"success",text:D.message}),A(),setTimeout(()=>{N()},2e3)):y({type:"error",text:D.message})}catch{y({type:"error",text:"Failed to complete cash-out"})}finally{b(!1)}}},N=()=>{p(!1),g(""),v(null),y(null)},P=D=>{const $=new Date(D),L=new Date,B=$.getTime()-L.getTime();if(B<=0)return"Expired";const T=Math.floor(B/6e4);return T<60?`${T}m left`:`${Math.floor(T/60)}h ${T%60}m left`},k=D=>new Date(D).toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"});return e.jsxs(H0,{children:[e.jsxs(Oe.div,{className:"space-y-6",initial:{opacity:0},animate:{opacity:1},children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Cash Out Processing"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Verify codes and dispense cash to customers"})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs(Oe.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:A,className:"px-4 py-2 text-sm bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 flex items-center gap-2",children:[e.jsx(vt,{className:`w-4 h-4 ${o?"animate-spin":""}`}),"Refresh"]}),e.jsxs(Oe.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>p(!0),className:"px-4 py-2 text-sm bg-orange-600 text-white rounded-lg hover:bg-orange-700 flex items-center gap-2",children:[e.jsx(wa,{className:"w-4 h-4"}),"Verify Code"]})]})]}),i&&i.floatBalance<1e3&&e.jsxs(Oe.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg flex items-center gap-3",children:[e.jsx(Lt,{className:"w-5 h-5 text-red-600 dark:text-red-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-red-800 dark:text-red-300",children:"Low Float Balance"}),e.jsxs("p",{className:"text-sm text-red-600 dark:text-red-400",children:["Your float balance is ",E(i.floatBalance),". Top up to continue processing cash-outs."]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsx(we,{className:"p-4",delay:.1,children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-orange-100 dark:bg-orange-900/30 rounded-lg",children:e.jsx(it,{className:"w-5 h-5 text-orange-600 dark:text-orange-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Pending"}),e.jsx("p",{className:"text-2xl font-bold text-orange-600 dark:text-orange-400",children:s.length})]})]})}),e.jsx(we,{className:"p-4",delay:.15,children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-green-100 dark:bg-green-900/30 rounded-lg",children:e.jsx(be,{className:"w-5 h-5 text-green-600 dark:text-green-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Today's Processed"}),e.jsx("p",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:(i==null?void 0:i.todayTransactions)||0})]})]})}),e.jsx(we,{className:"p-4",delay:.2,children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-900/30 rounded-lg",children:e.jsx(Si,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Float Balance"}),e.jsx("p",{className:"text-lg font-bold text-blue-600 dark:text-blue-400",children:E((i==null?void 0:i.floatBalance)||0)})]})]})}),e.jsx(we,{className:"p-4",delay:.25,children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-purple-100 dark:bg-purple-900/30 rounded-lg",children:e.jsx(Si,{className:"w-5 h-5 text-purple-600 dark:text-purple-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Today's Cash Out"}),e.jsx("p",{className:"text-lg font-bold text-purple-600 dark:text-purple-400",children:E((i==null?void 0:i.todayCashOut)||0)})]})]})})]}),e.jsxs("div",{className:"flex gap-2 border-b border-gray-200 dark:border-gray-700",children:[e.jsxs("button",{onClick:()=>u("pending"),className:`px-4 py-2 text-sm font-medium border-b-2 transition-colors ${d==="pending"?"border-orange-500 text-orange-600 dark:text-orange-400":"border-transparent text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300"}`,children:["Pending Requests (",s.length,")"]}),e.jsx("button",{onClick:()=>u("completed"),className:`px-4 py-2 text-sm font-medium border-b-2 transition-colors ${d==="completed"?"border-orange-500 text-orange-600 dark:text-orange-400":"border-transparent text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300"}`,children:"Completed"})]}),e.jsx(we,{className:"overflow-hidden",delay:.3,children:o?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx(vt,{className:"w-8 h-8 animate-spin text-gray-400"})}):d==="pending"?s.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(be,{className:"w-12 h-12 text-gray-300 dark:text-gray-600 mx-auto mb-3"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"No pending cash-out requests"}),e.jsx("p",{className:"text-sm text-gray-400 dark:text-gray-500",children:"Requests will appear here when customers request cash"})]}):e.jsx("div",{className:"divide-y divide-gray-100 dark:divide-gray-700",children:s.map(D=>e.jsxs(Oe.div,{whileHover:{backgroundColor:"rgba(0,0,0,0.02)"},className:"p-4 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-3 bg-orange-100 dark:bg-orange-900/30 rounded-full",children:e.jsx(Es,{className:"w-6 h-6 text-orange-600 dark:text-orange-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:D.customerName}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-500 dark:text-gray-400",children:[D.customerPhone&&e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(lr,{className:"w-3 h-3"}),D.customerPhone]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(it,{className:"w-3 h-3"}),P(D.codeExpiresAt)]})]})]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:E(D.amount)}),e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Code: ",e.jsx("span",{className:"font-mono font-bold text-orange-600",children:D.code})]})]}),e.jsxs(Oe.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{g(D.code),p(!0)},disabled:((i==null?void 0:i.floatBalance)||0)<D.amount,className:"px-4 py-2 bg-orange-600 text-white rounded-lg font-medium hover:bg-orange-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[e.jsx(Si,{className:"w-4 h-4"}),"Process"]})]})]},D.id))}):a.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Si,{className:"w-12 h-12 text-gray-300 dark:text-gray-600 mx-auto mb-3"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"No completed requests yet"})]}):e.jsx("div",{className:"divide-y divide-gray-100 dark:divide-gray-700",children:a.map(D=>e.jsxs("div",{className:"p-4 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:`p-3 rounded-full ${D.status==="COMPLETED"?"bg-green-100 dark:bg-green-900/30":"bg-red-100 dark:bg-red-900/30"}`,children:D.status==="COMPLETED"?e.jsx(be,{className:"w-6 h-6 text-green-600 dark:text-green-400"}):e.jsx(Lt,{className:"w-6 h-6 text-red-600 dark:text-red-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:D.customerName}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:k(D.requestedAt)})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-xl font-bold text-gray-900 dark:text-white",children:E(D.amount)}),e.jsx("span",{className:`text-xs font-medium px-2 py-0.5 rounded-full ${D.status==="COMPLETED"?"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400":"bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-400"}`,children:D.status})]})]},D.id))})})]}),m&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs(Oe.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"bg-white dark:bg-gray-800 rounded-xl p-6 w-full max-w-md",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white mb-4",children:"Cash Out Verification"}),j?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"p-4 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2 text-green-700 dark:text-green-400 mb-3",children:[e.jsx(be,{className:"w-5 h-5"}),e.jsx("span",{className:"font-medium",children:"Code Verified"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Customer"}),e.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:j.customerName})]}),j.customerPhone&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Phone"}),e.jsx("span",{className:"text-gray-900 dark:text-white",children:j.customerPhone})]}),e.jsxs("div",{className:"flex justify-between border-t border-green-200 dark:border-green-800 pt-2",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Amount to Dispense"}),e.jsx("span",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:E(j.amount)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Your Commission"}),e.jsx("span",{className:"font-bold text-purple-600",children:E(j.fee*.5)})]})]})]}),((i==null?void 0:i.floatBalance)||0)<j.amount&&e.jsxs("div",{className:"p-3 bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-400 rounded-lg mb-4 flex items-center gap-2",children:[e.jsx(Lt,{className:"w-5 h-5"}),"Insufficient float balance. You need ",E(j.amount-((i==null?void 0:i.floatBalance)||0))," more."]}),w&&w.type==="error"&&e.jsx("div",{className:"p-3 bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-400 rounded-lg mb-4",children:w.text}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:N,className:"flex-1 py-3 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg font-medium hover:bg-gray-200 dark:hover:bg-gray-600",children:"Cancel"}),e.jsx("button",{onClick:I,disabled:f||((i==null?void 0:i.floatBalance)||0)<j.amount,className:"flex-1 py-3 bg-orange-600 text-white rounded-lg font-medium hover:bg-orange-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:f?e.jsx(vt,{className:"w-5 h-5 animate-spin"}):e.jsxs(e.Fragment,{children:[e.jsx(Si,{className:"w-5 h-5"}),"Dispense Cash"]})})]})]}):e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-4",children:"Enter the 6-digit code from the customer"}),e.jsx("div",{className:"mb-4",children:e.jsx("input",{type:"text",value:x,onChange:D=>g(D.target.value.replace(/\D/g,"").slice(0,6)),placeholder:"Enter 6-digit code",className:"w-full px-4 py-4 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-orange-500 text-3xl font-mono text-center tracking-widest",maxLength:6,autoFocus:!0})}),w&&e.jsx("div",{className:`p-3 rounded-lg mb-4 ${w.type==="success"?"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400":"bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-400"}`,children:w.text}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:N,className:"flex-1 py-3 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg font-medium hover:bg-gray-200 dark:hover:bg-gray-600",children:"Cancel"}),e.jsx("button",{onClick:R,disabled:f||x.length!==6,className:"flex-1 py-3 bg-orange-600 text-white rounded-lg font-medium hover:bg-orange-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:f?e.jsx(vt,{className:"w-5 h-5 animate-spin"}):e.jsxs(e.Fragment,{children:[e.jsx(ts,{className:"w-5 h-5"}),"Verify Code"]})})]})]})]})})]})}function hue(){const{user:t}=wt(),[s,r]=h.useState(null),[a,n]=h.useState([]),[i,l]=h.useState(!0),[o,c]=h.useState("basic"),[d,u]=h.useState(!1),[m,p]=h.useState(""),[x,g]=h.useState("mobile"),[f,b]=h.useState(!1),[j,v]=h.useState(null),[w,y]=h.useState(null);h.useEffect(()=>{Ut.getDefaultCurrency().then(y),t!=null&&t.id&&_()},[t==null?void 0:t.id]);const C=(w==null?void 0:w.symbol)||"Le ",S=N=>`${C}${N.toLocaleString(void 0,{minimumFractionDigits:0,maximumFractionDigits:0})}`,_=async()=>{if(t!=null&&t.id){l(!0);try{const[N,P,k]=await Promise.all([wr.getDashboardStats(t.id),wr.getTransactions(t.id,{limit:10,type:void 0}),wr.getProfile(t.id)]);r(N),n(P),k!=null&&k.tier&&c(k.tier)}catch(N){console.error("Error fetching data:",N)}finally{l(!1)}}},E=async()=>{if(!(!(t!=null&&t.id)||!m)){b(!0),v(null);try{const N=await wr.requestFloatTopup(t.id,parseFloat(m));N.success?(v({type:"success",text:N.message}),p(""),_(),setTimeout(()=>{u(!1),v(null)},2e3)):v({type:"error",text:N.message})}catch{v({type:"error",text:"Failed to request top-up"})}finally{b(!1)}}},A=wr.getLimits(o),R=N=>{const P=new Date(N),D=new Date().getTime()-P.getTime(),$=Math.floor(D/6e4),L=Math.floor(D/36e5);return $<1?"Just now":$<60?`${$}m ago`:L<24?`${L}h ago`:P.toLocaleDateString()},I=s?Math.min(100,(s.todayCashIn+s.todayCashOut)/A.dailyLimit*100):0;return e.jsxs(H0,{children:[e.jsxs(Oe.div,{className:"space-y-6",initial:{opacity:0},animate:{opacity:1},children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Float Management"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Manage your cash float and transaction limits"})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs(Oe.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:_,className:"px-4 py-2 text-sm bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 flex items-center gap-2",children:[e.jsx(vt,{className:`w-4 h-4 ${i?"animate-spin":""}`}),"Refresh"]}),e.jsxs(Oe.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>u(!0),className:"px-4 py-2 text-sm bg-orange-600 text-white rounded-lg hover:bg-orange-700 flex items-center gap-2",children:[e.jsx(rr,{className:"w-4 h-4"}),"Top Up Float"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs(Oe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"lg:col-span-2 p-6 bg-gradient-to-br from-orange-500 to-orange-600 dark:from-orange-600 dark:to-orange-700 text-white rounded-xl shadow-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-3 bg-white/20 rounded-xl",children:e.jsx(jt,{className:"w-8 h-8"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-orange-100",children:"Available Float Balance"}),e.jsx("p",{className:"text-4xl font-bold",children:S((s==null?void 0:s.floatBalance)||0)})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-sm text-orange-100",children:"Daily Limit"}),e.jsx("p",{className:"text-2xl font-bold",children:S(A.dailyLimit)})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"flex justify-between text-sm text-orange-100 mb-2",children:[e.jsx("span",{children:"Daily Usage"}),e.jsxs("span",{children:[I.toFixed(1),"% used"]})]}),e.jsx("div",{className:"w-full bg-white/20 rounded-full h-3",children:e.jsx("div",{className:"bg-white rounded-full h-3 transition-all duration-500",style:{width:`${I}%`}})}),e.jsxs("div",{className:"flex justify-between text-xs text-orange-100 mt-1",children:[e.jsxs("span",{children:[S(((s==null?void 0:s.todayCashIn)||0)+((s==null?void 0:s.todayCashOut)||0))," processed today"]}),e.jsxs("span",{children:[S(A.dailyLimit-((s==null?void 0:s.todayCashIn)||0)-((s==null?void 0:s.todayCashOut)||0))," remaining"]})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-white/10 rounded-lg p-3",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(la,{className:"w-4 h-4 text-green-300"}),e.jsx("span",{className:"text-xs text-orange-100",children:"Cash In"})]}),e.jsx("p",{className:"text-lg font-bold",children:S((s==null?void 0:s.todayCashIn)||0)})]}),e.jsxs("div",{className:"bg-white/10 rounded-lg p-3",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(xs,{className:"w-4 h-4 text-red-300"}),e.jsx("span",{className:"text-xs text-orange-100",children:"Cash Out"})]}),e.jsx("p",{className:"text-lg font-bold",children:S((s==null?void 0:s.todayCashOut)||0)})]}),e.jsxs("div",{className:"bg-white/10 rounded-lg p-3",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(rr,{className:"w-4 h-4 text-purple-300"}),e.jsx("span",{className:"text-xs text-orange-100",children:"Commission"})]}),e.jsx("p",{className:"text-lg font-bold",children:S((s==null?void 0:s.todayCommissions)||0)})]})]})]}),e.jsxs(we,{className:"p-6",delay:.1,children:[e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white mb-4",children:"Account Tier"}),e.jsxs("div",{className:`p-4 rounded-lg mb-4 ${o==="agent_plus"?"bg-gradient-to-r from-purple-100 to-orange-100 dark:from-purple-900/30 dark:to-orange-900/30":o==="standard"?"bg-blue-100 dark:bg-blue-900/30":"bg-gray-100 dark:bg-gray-700/50"}`,children:[e.jsx("p",{className:"text-lg font-bold text-gray-900 dark:text-white capitalize",children:o==="agent_plus"?"Agent+":o}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:o==="agent_plus"?"Premium features unlocked":o==="standard"?"Standard agent benefits":"Basic tier - Upgrade for higher limits"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Min Transaction"}),e.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:S(A.minTransaction)})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Max Transaction"}),e.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:S(A.maxTransaction)})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Daily Limit"}),e.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:S(A.dailyLimit)})]})]}),o!=="agent_plus"&&e.jsxs(Oe.button,{whileHover:{scale:1.02},whileTap:{scale:.98},className:"w-full mt-4 py-2 bg-orange-600 text-white rounded-lg font-medium hover:bg-orange-700 flex items-center justify-center gap-2",children:[e.jsx(rr,{className:"w-4 h-4"}),"Upgrade Account"]})]})]}),s&&s.floatBalance<5e3&&e.jsxs(Oe.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"p-4 bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-lg flex items-center gap-3",children:[e.jsx(Lt,{className:"w-5 h-5 text-yellow-600 dark:text-yellow-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-yellow-800 dark:text-yellow-300",children:"Low Float Balance"}),e.jsx("p",{className:"text-sm text-yellow-600 dark:text-yellow-400",children:"Consider topping up your float to continue processing transactions smoothly."})]}),e.jsx(Oe.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>u(!0),className:"ml-auto px-4 py-2 bg-yellow-600 text-white rounded-lg text-sm font-medium hover:bg-yellow-700",children:"Top Up Now"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(we,{className:"p-6",delay:.2,children:[e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white mb-4",children:"Monthly Summary"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-900/30 rounded-lg",children:e.jsx(rr,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"})}),e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Total Volume"})]}),e.jsx("span",{className:"font-bold text-gray-900 dark:text-white",children:S((s==null?void 0:s.monthlyVolume)||0)})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-purple-100 dark:bg-purple-900/30 rounded-lg",children:e.jsx(rr,{className:"w-5 h-5 text-purple-600 dark:text-purple-400"})}),e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Total Commissions"})]}),e.jsx("span",{className:"font-bold text-purple-600 dark:text-purple-400",children:S((s==null?void 0:s.monthlyCommissions)||0)})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-green-100 dark:bg-green-900/30 rounded-lg",children:e.jsx(be,{className:"w-5 h-5 text-green-600 dark:text-green-400"})}),e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Customers Served"})]}),e.jsx("span",{className:"font-bold text-gray-900 dark:text-white",children:(s==null?void 0:s.totalCustomersServed)||0})]})]})]}),e.jsxs(we,{className:"p-6",delay:.3,children:[e.jsx("div",{className:"flex justify-between items-center mb-4",children:e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:"Recent Activity"})}),e.jsx("div",{className:"space-y-3",children:a.length===0?e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 text-center py-4",children:"No recent activity"}):a.slice(0,5).map(N=>e.jsxs("div",{className:"flex items-center justify-between p-2 hover:bg-gray-50 dark:hover:bg-gray-700/50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`p-2 rounded-lg ${N.type==="CASH_IN"||N.type==="DEPOSIT"?"bg-green-100 dark:bg-green-900/30":N.type==="CASH_OUT"?"bg-red-100 dark:bg-red-900/30":"bg-blue-100 dark:bg-blue-900/30"}`,children:N.type==="CASH_IN"||N.type==="DEPOSIT"?e.jsx(la,{className:"w-4 h-4 text-green-600 dark:text-green-400"}):N.type==="CASH_OUT"?e.jsx(xs,{className:"w-4 h-4 text-red-600 dark:text-red-400"}):e.jsx(rr,{className:"w-4 h-4 text-blue-600 dark:text-blue-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:N.type.replace("_"," ")}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:R(N.createdAt)})]})]}),e.jsxs("span",{className:`font-medium ${N.type==="CASH_IN"||N.type==="DEPOSIT"?"text-green-600 dark:text-green-400":N.type==="CASH_OUT"?"text-red-600 dark:text-red-400":"text-gray-900 dark:text-white"}`,children:[N.type==="CASH_OUT"?"-":"+",S(N.amount)]})]},N.id))})]})]})]}),d&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs(Oe.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"bg-white dark:bg-gray-800 rounded-xl p-6 w-full max-w-md",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white mb-4",children:"Top Up Float"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-4",children:"Request a float top-up to increase your available balance"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:["Amount (",C,")"]}),e.jsx("input",{type:"number",value:m,onChange:N=>p(N.target.value),placeholder:"0",className:"w-full px-4 py-3 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-orange-500 text-2xl font-bold"}),e.jsx("div",{className:"flex gap-2 mt-2",children:[1e4,5e4,1e5,5e5].map(N=>e.jsx("button",{onClick:()=>p(N.toString()),className:"flex-1 py-1 text-xs bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-400 rounded hover:bg-gray-200 dark:hover:bg-gray-600",children:S(N)},N))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Payment Method"}),e.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[e.jsxs("button",{onClick:()=>g("mobile"),className:`p-3 rounded-lg border-2 transition-colors flex flex-col items-center gap-2 ${x==="mobile"?"border-orange-500 bg-orange-50 dark:bg-orange-900/20":"border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600"}`,children:[e.jsx(Na,{className:"w-6 h-6 text-gray-600 dark:text-gray-400"}),e.jsx("span",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Mobile Money"})]}),e.jsxs("button",{onClick:()=>g("bank"),className:`p-3 rounded-lg border-2 transition-colors flex flex-col items-center gap-2 ${x==="bank"?"border-orange-500 bg-orange-50 dark:bg-orange-900/20":"border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600"}`,children:[e.jsx(L1,{className:"w-6 h-6 text-gray-600 dark:text-gray-400"}),e.jsx("span",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Bank Transfer"})]}),e.jsxs("button",{onClick:()=>g("card"),className:`p-3 rounded-lg border-2 transition-colors flex flex-col items-center gap-2 ${x==="card"?"border-orange-500 bg-orange-50 dark:bg-orange-900/20":"border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600"}`,children:[e.jsx(Je,{className:"w-6 h-6 text-gray-600 dark:text-gray-400"}),e.jsx("span",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Card"})]})]})]}),e.jsxs("div",{className:"p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 text-blue-700 dark:text-blue-400 mb-1",children:[e.jsx(it,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm font-medium",children:"Processing Time"})]}),e.jsx("p",{className:"text-xs text-blue-600 dark:text-blue-300",children:x==="mobile"?"Instant - Mobile money transfers are processed immediately":x==="bank"?"1-2 business days - Bank transfers may take time to clear":"Instant - Card payments are processed immediately"})]}),j&&e.jsx("div",{className:`p-3 rounded-lg ${j.type==="success"?"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400":"bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-400"}`,children:j.text}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>{u(!1),p(""),v(null)},className:"flex-1 py-3 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg font-medium hover:bg-gray-200 dark:hover:bg-gray-600",children:"Cancel"}),e.jsx("button",{onClick:E,disabled:f||!m||parseFloat(m)<=0,className:"flex-1 py-3 bg-orange-600 text-white rounded-lg font-medium hover:bg-orange-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:f?e.jsx(vt,{className:"w-5 h-5 animate-spin"}):e.jsxs(e.Fragment,{children:[e.jsx(rr,{className:"w-5 h-5"}),"Request Top Up"]})})]})]})]})})]})}const pue={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_API_URL:"https://api.peeap.com",VITE_MERCHANT_SERVICE_URL:"https://api.peeap.com"},xue=new s8({defaultOptions:{queries:{staleTime:1e3*60*5,retry:1}}}),gN="full";console.log("App Mode:",gN);console.log("Environment:",pue);function gue(){const t=gN==="checkout",s=gN==="merchant";return e.jsx(r8,{client:xue,children:e.jsx(iV,{children:e.jsx(T9,{children:e.jsx(rV,{children:e.jsx(nV,{children:e.jsxs(aV,{children:[e.jsx(GV,{}),e.jsxs(v1,{children:[t,s,e.jsxs(e.Fragment,{children:[e.jsx(Te,{path:"/",element:e.jsx(eH,{})}),e.jsx(Te,{path:"/login",element:e.jsx(eY,{})}),e.jsx(Te,{path:"/register",element:e.jsx(sY,{})}),e.jsx(Te,{path:"/docs",element:e.jsx(dZ,{})}),e.jsx(Te,{path:"/t/:token",element:e.jsx(kE,{})}),e.jsx(Te,{path:"/pay/:token",element:e.jsx(kE,{})}),e.jsx(Te,{path:"/pay",element:e.jsx(pde,{})}),e.jsx(Te,{path:"/payment/success",element:e.jsx(xde,{})}),e.jsx(Te,{path:"/payment/cancel",element:e.jsx(gde,{})}),e.jsx(Te,{path:"/deposit/success",element:e.jsx(fde,{})}),e.jsx(Te,{path:"/deposit/cancel",element:e.jsx(yde,{})}),e.jsx(Te,{path:"/checkout/:businessId",element:e.jsx(bde,{})}),e.jsx(Te,{path:"/checkout/pay/:sessionId",element:e.jsx(vde,{})}),e.jsx(Te,{path:"/app/pay/:paymentId",element:e.jsx(Nde,{})}),e.jsx(Te,{path:"/dashboard",element:e.jsx(Vr,{children:e.jsx(xQ,{})})}),e.jsx(Te,{path:"/wallets",element:e.jsx(Vr,{children:e.jsx(hJ,{})})}),e.jsx(Te,{path:"/cards",element:e.jsx(Vr,{children:e.jsx(CX,{})})}),e.jsx(Te,{path:"/cards/marketplace",element:e.jsx(Vr,{children:e.jsx(kX,{})})}),e.jsx(Te,{path:"/cards/legacy",element:e.jsx(Vr,{children:e.jsx(pJ,{})})}),e.jsx(Te,{path:"/transactions",element:e.jsx(Vr,{children:e.jsx(xJ,{})})}),e.jsx(Te,{path:"/profile",element:e.jsx(Vr,{children:e.jsx(cZ,{})})}),e.jsx(Te,{path:"/send",element:e.jsx(Vr,{children:e.jsx(bX,{})})}),e.jsx(Te,{path:"/receive",element:e.jsx(Vr,{children:e.jsx(vX,{})})}),e.jsx(Te,{path:"/pots",element:e.jsx(Vr,{children:e.jsx(jX,{})})}),e.jsx(Te,{path:"/pots/:potId",element:e.jsx(Vr,{children:e.jsx(wX,{})})}),e.jsx(Te,{path:"/bills",element:e.jsx(Vr,{children:e.jsx(EX,{})})}),e.jsx(Te,{path:"/airtime",element:e.jsx(Vr,{children:e.jsx(PX,{})})}),e.jsx(Te,{path:"/cashback",element:e.jsx(Vr,{children:e.jsx(IX,{})})}),e.jsx(Te,{path:"/bnpl",element:e.jsx(Vr,{children:e.jsx(MX,{})})}),e.jsx(Te,{path:"/cashout",element:e.jsx(Vr,{children:e.jsx(LX,{})})}),e.jsx(Te,{path:"/analytics",element:e.jsx(Vr,{children:e.jsx(FX,{})})}),e.jsx(Te,{path:"/admin",element:e.jsx(st,{allowedRoles:["admin","superadmin"],children:e.jsx(BX,{})})}),e.jsx(Te,{path:"/admin/accounts",element:e.jsx(st,{allowedRoles:["admin","superadmin"],children:e.jsx(WX,{})})}),e.jsx(Te,{path:"/admin/customers",element:e.jsx(st,{allowedRoles:["admin","superadmin"],children:e.jsx(qX,{})})}),e.jsx(Te,{path:"/admin/cards",element:e.jsx(st,{allowedRoles:["admin","superadmin"],children:e.jsx(zX,{})})}),e.jsx(Te,{path:"/admin/card-programs",element:e.jsx(st,{allowedRoles:["admin","superadmin"],children:e.jsx(HX,{})})}),e.jsx(Te,{path:"/admin/card-types",element:e.jsx(st,{allowedRoles:["admin","superadmin"],children:e.jsx(QX,{})})}),e.jsx(Te,{path:"/admin/card-orders",element:e.jsx(st,{allowedRoles:["admin","superadmin"],children:e.jsx(ZX,{})})}),e.jsx(Te,{path:"/admin/card-products",element:e.jsx(st,{allowedRoles:["admin","superadmin"],children:e.jsx(Lce,{})})}),e.jsx(Te,{path:"/admin/modules",element:e.jsx(st,{allowedRoles:["admin","superadmin"],children:e.jsx(Mce,{})})}),e.jsx(Te,{path:"/admin/authorization",element:e.jsx(st,{allowedRoles:["admin","superadmin"],children:e.jsx($X,{})})}),e.jsx(Te,{path:"/admin/transactions",element:e.jsx(st,{allowedRoles:["admin","superadmin"],children:e.jsx(XX,{})})}),e.jsx(Te,{path:"/admin/disputes",element:e.jsx(st,{allowedRoles:["admin","superadmin"],children:e.jsx(eee,{})})}),e.jsx(Te,{path:"/admin/users",element:e.jsx(st,{allowedRoles:["admin","superadmin"],children:e.jsx(Oce,{})})}),e.jsx(Te,{path:"/admin/users/:userId",element:e.jsx(st,{allowedRoles:["admin","superadmin"],children:e.jsx(Bce,{})})}),e.jsx(Te,{path:"/admin/merchants",element:e.jsx(st,{allowedRoles:["admin","superadmin"],children:e.jsx($ce,{})})}),e.jsx(Te,{path:"/admin/merchants/create",element:e.jsx(st,{allowedRoles:["admin","superadmin"],children:e.jsx(Vce,{})})}),e.jsx(Te,{path:"/admin/agents",element:e.jsx(st,{allowedRoles:["admin","superadmin"],children:e.jsx(qce,{})})}),e.jsx(Te,{path:"/admin/fees",element:e.jsx(st,{allowedRoles:["admin","superadmin"],children:e.jsx(Wce,{})})}),e.jsx(Te,{path:"/admin/fee-settings",element:e.jsx(st,{allowedRoles:["admin","superadmin"],children:e.jsx(Gce,{})})}),e.jsx(Te,{path:"/admin/payment-settings",element:e.jsx(st,{allowedRoles:["admin","superadmin"],children:e.jsx(Zce,{})})}),e.jsx(Te,{path:"/admin/deposits",element:e.jsx(st,{allowedRoles:["admin","superadmin"],children:e.jsx(tde,{})})}),e.jsx(Te,{path:"/admin/subscriptions",element:e.jsx(st,{allowedRoles:["admin","superadmin"],children:e.jsx(sde,{})})}),e.jsx(Te,{path:"/admin/roles",element:e.jsx(st,{allowedRoles:["admin","superadmin"],children:e.jsx(ade,{})})}),e.jsx(Te,{path:"/admin/pots",element:e.jsx(st,{allowedRoles:["admin","superadmin"],children:e.jsx(nde,{})})}),e.jsx(Te,{path:"/admin/business-categories",element:e.jsx(st,{allowedRoles:["admin","superadmin"],children:e.jsx(ode,{})})}),e.jsx(Te,{path:"/admin/businesses",element:e.jsx(st,{allowedRoles:["admin","superadmin"],children:e.jsx(cde,{})})}),e.jsx(Te,{path:"/admin/webhooks",element:e.jsx(st,{allowedRoles:["admin","superadmin"],children:e.jsx(UX,{})})}),e.jsx(Te,{path:"/admin/compliance",element:e.jsx(st,{allowedRoles:["admin","superadmin"],children:e.jsx(VX,{})})}),e.jsx(Te,{path:"/admin/developers",element:e.jsx(st,{allowedRoles:["admin","superadmin"],children:e.jsx(Fce,{})})}),e.jsx(Te,{path:"/admin/support",element:e.jsx(st,{allowedRoles:["admin","superadmin"],children:e.jsx(hde,{})})}),e.jsx(Te,{path:"/merchant",element:e.jsx(st,{allowedRoles:["merchant"],children:e.jsx(AE,{})})}),e.jsx(Te,{path:"/merchant/transactions",element:e.jsx(st,{allowedRoles:["merchant"],children:e.jsx(Rde,{})})}),e.jsx(Te,{path:"/merchant/payouts",element:e.jsx(st,{allowedRoles:["merchant"],children:e.jsx(Dde,{})})}),e.jsx(Te,{path:"/merchant/refunds",element:e.jsx(st,{allowedRoles:["merchant"],children:e.jsx(Ide,{})})}),e.jsx(Te,{path:"/merchant/reports",element:e.jsx(st,{allowedRoles:["merchant"],children:e.jsx(Mde,{})})}),e.jsx(Te,{path:"/merchant/payment-links",element:e.jsx(st,{allowedRoles:["merchant"],children:e.jsx(Lde,{})})}),e.jsx(Te,{path:"/merchant/profile",element:e.jsx(st,{allowedRoles:["merchant"],children:e.jsx(Fde,{})})}),e.jsx(Te,{path:"/merchant/create-business",element:e.jsx(st,{allowedRoles:["merchant"],children:e.jsx(Ode,{})})}),e.jsx(Te,{path:"/merchant/settings",element:e.jsx(st,{allowedRoles:["merchant"],children:e.jsx(Cde,{})})}),e.jsx(Te,{path:"/merchant/support",element:e.jsx(st,{allowedRoles:["merchant"],children:e.jsx(Zde,{})})}),e.jsx(Te,{path:"/merchant/shops",element:e.jsx(st,{allowedRoles:["merchant"],children:e.jsx(qde,{})})}),e.jsx(Te,{path:"/merchant/upgrade",element:e.jsx(st,{allowedRoles:["merchant"],children:e.jsx(Wde,{})})}),e.jsx(Te,{path:"/merchant/shops/:businessId",element:e.jsx(st,{allowedRoles:["merchant"],children:e.jsx(Gde,{})})}),e.jsx(Te,{path:"/merchant/shops/:businessId/transactions",element:e.jsx(st,{allowedRoles:["merchant"],children:e.jsx(Kde,{})})}),e.jsx(Te,{path:"/merchant/shops/:businessId/disputes",element:e.jsx(st,{allowedRoles:["merchant"],children:e.jsx(Hde,{})})}),e.jsx(Te,{path:"/merchant/shops/:businessId/settings",element:e.jsx(st,{allowedRoles:["merchant"],children:e.jsx(Yde,{})})}),e.jsx(Te,{path:"/merchant/developer/create-business",element:e.jsx(st,{allowedRoles:["merchant"],children:e.jsx(Vde,{})})}),e.jsx(Te,{path:"/merchant/developer/:businessId",element:e.jsx(st,{allowedRoles:["merchant"],children:e.jsx(Pde,{})})}),e.jsx(Te,{path:"/merchant/developer/*",element:e.jsx(st,{allowedRoles:["merchant"],children:e.jsx(Ede,{})})}),e.jsx(Te,{path:"/merchant/*",element:e.jsx(st,{allowedRoles:["merchant"],children:e.jsx(AE,{})})}),e.jsx(Te,{path:"/agent",element:e.jsx(st,{allowedRoles:["agent"],children:e.jsx(TE,{})})}),e.jsx(Te,{path:"/agent/settings",element:e.jsx(st,{allowedRoles:["agent"],children:e.jsx(sue,{})})}),e.jsx(Te,{path:"/agent/transactions",element:e.jsx(st,{allowedRoles:["agent"],children:e.jsx(uue,{})})}),e.jsx(Te,{path:"/agent/cashout",element:e.jsx(st,{allowedRoles:["agent"],children:e.jsx(mue,{})})}),e.jsx(Te,{path:"/agent/float",element:e.jsx(st,{allowedRoles:["agent"],children:e.jsx(hue,{})})}),e.jsx(Te,{path:"/agent/developer/*",element:e.jsx(st,{allowedRoles:["agent"],children:e.jsx(due,{})})}),e.jsx(Te,{path:"/agent/*",element:e.jsx(st,{allowedRoles:["agent"],children:e.jsx(TE,{})})}),e.jsx(Te,{path:"*",element:e.jsx(gg,{to:"/",replace:!0})})]})]})]})})})})})})}Ev.createRoot(document.getElementById("root")).render(e.jsx(ds.StrictMode,{children:e.jsx(gue,{})}));
